{"file_name": "/home/qj213/afp-2021-10-22/thys/QHLProver/Quantum_Program.thy", "working_directory": "/home/qj213/afp-2021-10-22/thys/QHLProver", "problem_names": ["lemma denote_while_n_iter_assoc:\n  \"denote_while_n_iter M0 M1 DS (Suc n) \\<rho> = DS (M1 * (denote_while_n_iter M0 M1 DS n \\<rho>) * adjoint M1)\"", "lemma denote_while_n_iter_dim:\n  \"\\<rho> \\<in> carrier_mat m m \\<Longrightarrow> partial_density_operator \\<rho> \\<Longrightarrow> M1 \\<in> carrier_mat m m \\<Longrightarrow> adjoint M1 * M1 \\<le>\\<^sub>L 1\\<^sub>m m\n  \\<Longrightarrow> (\\<And>\\<rho>. \\<rho> \\<in> carrier_mat m m \\<Longrightarrow> partial_density_operator \\<rho> \\<Longrightarrow> DS \\<rho> \\<in> carrier_mat m m \\<and> partial_density_operator (DS \\<rho>))\n  \\<Longrightarrow> denote_while_n_iter M0 M1 DS n \\<rho> \\<in> carrier_mat m m \\<and> partial_density_operator (denote_while_n_iter M0 M1 DS n \\<rho>)\"", "lemma pdo_denote_while_n_iter:\n  \"\\<rho> \\<in> carrier_mat m m \\<Longrightarrow> partial_density_operator \\<rho> \\<Longrightarrow> M1 \\<in> carrier_mat m m \\<Longrightarrow> adjoint M1 * M1 \\<le>\\<^sub>L 1\\<^sub>m m\n  \\<Longrightarrow> (\\<And>\\<rho>. \\<rho> \\<in> carrier_mat m m \\<and> partial_density_operator \\<rho> \\<Longrightarrow> partial_density_operator (DS \\<rho>))\n  \\<Longrightarrow> (\\<And>\\<rho>. \\<rho> \\<in> carrier_mat m m \\<and> partial_density_operator \\<rho> \\<Longrightarrow> DS \\<rho> \\<in> carrier_mat m m)\n  \\<Longrightarrow> partial_density_operator (denote_while_n_iter M0 M1 DS n \\<rho>)\"", "lemma denote_while_n_dim:\n  assumes \"\\<rho> \\<in> carrier_mat d d\"\n    \"M0 \\<in> carrier_mat d d\"\n    \"M1 \\<in> carrier_mat d d\"\n    \"partial_density_operator \\<rho>\"\n    \"\\<And>\\<rho>'. \\<rho>' \\<in> carrier_mat d d \\<Longrightarrow> partial_density_operator \\<rho>'  \\<Longrightarrow> positive (DS \\<rho>') \\<and> trace (DS \\<rho>') \\<le> trace \\<rho>' \\<and> DS \\<rho>' \\<in> carrier_mat d d\"\n   shows \"denote_while_n M0 M1 DS n \\<rho>  \\<in> carrier_mat d d\"", "lemma denote_while_n_sum_dim:\n  assumes \"\\<rho> \\<in> carrier_mat d d\"\n    \"M0 \\<in> carrier_mat d d\"\n    \"M1 \\<in> carrier_mat d d\"\n    \"partial_density_operator \\<rho>\"\n    \"\\<And>\\<rho>'. \\<rho>' \\<in> carrier_mat d d \\<Longrightarrow> partial_density_operator \\<rho>'  \\<Longrightarrow> positive (DS \\<rho>') \\<and> trace (DS \\<rho>') \\<le> trace \\<rho>' \\<and> DS \\<rho>' \\<in> carrier_mat d d\"\n  shows \"matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>) n \\<in> carrier_mat d d\"", "lemma trace_decrease_mul_adj:\n  assumes pdo: \"partial_density_operator \\<rho>\" and dimr: \"\\<rho> \\<in> carrier_mat d d\" \n    and dimx: \"x \\<in> carrier_mat d d\" and un: \"adjoint x * x \\<le>\\<^sub>L   1\\<^sub>m d \"\n  shows \"trace (x * \\<rho> * adjoint x) \\<le> trace \\<rho>\"", "lemma denote_while_n_positive: \n  assumes dim0: \"M0 \\<in> carrier_mat d d\" and dim1: \"M1 \\<in> carrier_mat d d\" and un: \"adjoint M1 * M1 \\<le>\\<^sub>L   1\\<^sub>m d\"\n      and DS: \"\\<And>\\<rho>. \\<rho> \\<in> carrier_mat d d \\<Longrightarrow> partial_density_operator \\<rho> \\<Longrightarrow> positive (DS \\<rho>) \\<and> trace (DS \\<rho>) \\<le> trace \\<rho> \\<and> DS \\<rho> \\<in> carrier_mat d d\"\n  shows \"partial_density_operator \\<rho> \\<and> \\<rho> \\<in> carrier_mat d d \\<Longrightarrow> positive (denote_while_n M0 M1 DS n \\<rho>)\"", "lemma denote_while_n_sum_positive:\n  assumes dim0: \"M0 \\<in> carrier_mat d d\" and dim1: \"M1 \\<in> carrier_mat d d\" and un: \"adjoint M1 * M1 \\<le>\\<^sub>L   1\\<^sub>m d\" \n      and DS: \"\\<And>\\<rho>. \\<rho> \\<in> carrier_mat d d \\<Longrightarrow> partial_density_operator \\<rho> \\<Longrightarrow> positive (DS \\<rho>) \\<and> trace (DS \\<rho>) \\<le> trace \\<rho> \\<and> DS \\<rho> \\<in> carrier_mat d d\"\n      and pdo: \"partial_density_operator \\<rho>\" and r: \" \\<rho> \\<in> carrier_mat d d\" \n    shows \"positive (matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>) n)\"", "lemma trace_measure2_id:\n  assumes dM0: \"M0 \\<in> carrier_mat n n\" and dM1: \"M1 \\<in> carrier_mat n n\" \n    and id: \"adjoint M0 * M0 + adjoint M1 * M1 = 1\\<^sub>m n\"\n    and dA: \"A \\<in> carrier_mat n n\"\n  shows \"trace (M0 * A * adjoint M0) + trace (M1 * A * adjoint M1) = trace A\"", "lemma measurement_lowner_le_one1:\n  assumes dim0: \"M0 \\<in> carrier_mat d d\" and dim1: \"M1 \\<in> carrier_mat d d\" and id: \"adjoint M0 * M0 + adjoint M1 * M1 = 1\\<^sub>m d\"\n  shows \"adjoint M1 * M1 \\<le>\\<^sub>L 1\\<^sub>m d\"", "lemma denote_while_n_sum_trace:\n  assumes dim0: \"M0 \\<in> carrier_mat d d\" and dim1: \"M1 \\<in> carrier_mat d d\" and id: \"adjoint M0 * M0 + adjoint M1 * M1 = 1\\<^sub>m d\" \n      and DS: \"\\<And>\\<rho>. \\<rho> \\<in> carrier_mat d d \\<Longrightarrow> partial_density_operator \\<rho> \\<Longrightarrow> positive (DS \\<rho>) \\<and> trace (DS \\<rho>) \\<le> trace \\<rho> \\<and> DS \\<rho> \\<in> carrier_mat d d\"\n      and r: \" \\<rho> \\<in> carrier_mat d d\"\n      and pdor: \"partial_density_operator \\<rho>\"\n    shows \"trace (matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>) n) \\<le> trace \\<rho>\"", "lemma denote_while_n_sum_partial_density:\n  assumes dim0: \"M0 \\<in> carrier_mat d d\" and dim1: \"M1 \\<in> carrier_mat d d\" and id: \"adjoint M0 * M0 + adjoint M1 * M1 = 1\\<^sub>m d\"\n      and DS: \"\\<And>\\<rho>. \\<rho> \\<in> carrier_mat d d \\<Longrightarrow> partial_density_operator \\<rho> \\<Longrightarrow> positive (DS \\<rho>) \\<and> trace (DS \\<rho>) \\<le> trace \\<rho> \\<and> DS \\<rho> \\<in> carrier_mat d d\"\n      and pdo: \"partial_density_operator \\<rho>\" and r: \" \\<rho> \\<in> carrier_mat d d\" \n  shows \"(partial_density_operator (matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>) n))\"", "lemma denote_while_n_sum_lowner_le:\n  assumes dim0: \"M0 \\<in> carrier_mat d d\" and dim1: \"M1 \\<in> carrier_mat d d\" and id: \"adjoint M0 * M0 + adjoint M1 * M1 = 1\\<^sub>m d\"\n      and DS: \"\\<And>\\<rho>. \\<rho> \\<in> carrier_mat d d \\<Longrightarrow> partial_density_operator \\<rho> \\<Longrightarrow> positive (DS \\<rho>) \\<and> trace (DS \\<rho>) \\<le> trace \\<rho> \\<and> DS \\<rho> \\<in> carrier_mat d d\"\n      and pdo: \"partial_density_operator \\<rho>\" and dimr: \" \\<rho> \\<in> carrier_mat d d\" \n  shows \"(matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>) n \\<le>\\<^sub>L matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>) (Suc n))\"", "lemma lowner_is_lub_matrix_sum: \n  assumes dim0: \"M0 \\<in> carrier_mat d d\" and dim1: \"M1 \\<in> carrier_mat d d\" and id: \"adjoint M0 * M0 + adjoint M1 * M1 = 1\\<^sub>m d\"\n      and DS: \"\\<And>\\<rho>. \\<rho> \\<in> carrier_mat d d \\<Longrightarrow> partial_density_operator \\<rho> \\<Longrightarrow> positive (DS \\<rho>) \\<and> trace (DS \\<rho>) \\<le> trace \\<rho> \\<and> DS \\<rho> \\<in> carrier_mat d d\"\n      and pdo: \"partial_density_operator \\<rho>\" and dimr: \" \\<rho> \\<in> carrier_mat d d\" \n  shows  \"matrix_seq.lowner_is_lub (matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>)) (matrix_seq.lowner_lub (matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>)))\"", "lemma denote_while_dim_positive:\n  assumes dim0: \"M0 \\<in> carrier_mat d d\" and dim1: \"M1 \\<in> carrier_mat d d\" and id: \"adjoint M0 * M0 + adjoint M1 * M1 = 1\\<^sub>m d\"\n      and DS: \"\\<And>\\<rho>. \\<rho> \\<in> carrier_mat d d \\<Longrightarrow> partial_density_operator \\<rho> \\<Longrightarrow> positive (DS \\<rho>) \\<and> trace (DS \\<rho>) \\<le> trace \\<rho> \\<and> DS \\<rho> \\<in> carrier_mat d d\"\n      and pdo: \"partial_density_operator \\<rho>\" and dimr: \" \\<rho> \\<in> carrier_mat d d\" \n  shows\n    \"denote_while M0 M1 DS \\<rho> \\<in> carrier_mat d d \\<and> positive (denote_while M0 M1 DS \\<rho>) \\<and> trace (denote_while M0 M1 DS \\<rho>) \\<le> trace \\<rho>\"", "lemma denote_measure_dim:\n  assumes \"\\<rho> \\<in> carrier_mat d d\"\n    \"measurement d n M\"\n    \"\\<And>\\<rho>' k. \\<rho>' \\<in> carrier_mat d d \\<Longrightarrow> k < n \\<Longrightarrow> (DS!k) \\<rho>' \\<in> carrier_mat d d\"\n  shows\n    \"denote_measure n M DS \\<rho> \\<in> carrier_mat d d\"", "lemma measure_well_com:\n  assumes \"well_com (Measure n M S)\"\n  shows \"\\<And>k. k < n \\<Longrightarrow> well_com (S ! k)\"", "lemma denote_measure_expand:\n  assumes m: \"m \\<le> n\" and wc: \"well_com (Measure n M S)\"  \n  shows \"denote (Measure m M S) \\<rho> = matrix_sum d (\\<lambda>k. denote (S!k) ((M k) * \\<rho> * adjoint (M k))) m\"", "lemma matrix_sum_trace_le:\n  fixes f :: \"nat \\<Rightarrow> complex mat\" and g :: \"nat \\<Rightarrow> complex mat\"\n  assumes \"(\\<And>k. k < n \\<Longrightarrow> f k \\<in> carrier_mat d d)\" \n    \"(\\<And>k. k < n \\<Longrightarrow> g k \\<in> carrier_mat d d)\"\n    \"(\\<And>k. k < n \\<Longrightarrow> trace (f k) \\<le> trace (g k))\"\n  shows \"trace (matrix_sum d f n) \\<le> trace (matrix_sum d g n)\"", "lemma map_denote_positive_trace_dim:\n  assumes \"well_com (Measure x1 x2a x3a)\"\n    \"x4 \\<in> carrier_mat d d\"\n    \"partial_density_operator x4\"\n    \"\\<And>x3aa \\<rho>. x3aa \\<in> set x3a \\<Longrightarrow> well_com x3aa \\<Longrightarrow> \\<rho> \\<in> carrier_mat d d \\<Longrightarrow> partial_density_operator \\<rho> \n      \\<Longrightarrow> positive (denote x3aa \\<rho>) \\<and> trace (denote x3aa \\<rho>) \\<le> trace \\<rho> \\<and> denote x3aa \\<rho> \\<in> carrier_mat d d\"\n  shows \"\\<forall>k < x1. positive ((map denote x3a ! k) (x2a k * x4 * adjoint (x2a k))) \n               \\<and> ((map denote x3a ! k) (x2a k * x4 * adjoint (x2a k))) \\<in> carrier_mat d d\n               \\<and> trace ((map denote x3a ! k) (x2a k * x4 * adjoint (x2a k))) \\<le> trace (x2a k * x4 * adjoint (x2a k))\"", "lemma denote_measure_positive_trace_dim:\n  assumes \"well_com (Measure x1 x2a x3a)\"\n    \"x4 \\<in> carrier_mat d d\"\n    \"partial_density_operator x4\"\n    \"\\<And>x3aa \\<rho>. x3aa \\<in> set x3a \\<Longrightarrow> well_com x3aa \\<Longrightarrow> \\<rho> \\<in> carrier_mat d d \\<Longrightarrow> partial_density_operator \\<rho> \n      \\<Longrightarrow> positive (denote x3aa \\<rho>) \\<and> trace (denote x3aa \\<rho>) \\<le> trace \\<rho> \\<and> denote x3aa \\<rho> \\<in> carrier_mat d d\"\n  shows \"positive (denote (Measure x1 x2a x3a) x4) \\<and> trace (denote (Measure x1 x2a x3a) x4) \\<le> trace x4\n        \\<and> (denote (Measure x1 x2a x3a) x4) \\<in> carrier_mat d d\"", "lemma denote_positive_trace_dim:\n  \"well_com S \\<Longrightarrow> \\<rho> \\<in> carrier_mat d d \\<Longrightarrow> partial_density_operator \\<rho> \n   \\<Longrightarrow> (positive (denote S \\<rho>) \\<and> trace (denote S \\<rho>) \\<le> trace \\<rho> \\<and> denote S \\<rho> \\<in> carrier_mat d d)\"", "lemma denote_dim_pdo:\n  \"well_com S \\<Longrightarrow> \\<rho> \\<in> carrier_mat d d \\<Longrightarrow> partial_density_operator \\<rho> \n   \\<Longrightarrow> (denote S \\<rho> \\<in> carrier_mat d d) \\<and> (partial_density_operator (denote S \\<rho>))\"", "lemma denote_dim:\n  \"well_com S \\<Longrightarrow> \\<rho> \\<in> carrier_mat d d \\<Longrightarrow> partial_density_operator \\<rho> \n   \\<Longrightarrow> (denote S \\<rho> \\<in> carrier_mat d d)\"", "lemma denote_trace:\n  \"well_com S \\<Longrightarrow> \\<rho> \\<in> carrier_mat d d \\<Longrightarrow> partial_density_operator \\<rho> \n   \\<Longrightarrow> trace (denote S \\<rho>) \\<le> trace \\<rho>\"", "lemma denote_partial_density_operator:\n  assumes \"well_com S\" \"partial_density_operator \\<rho>\" \"\\<rho> \\<in> carrier_mat d d\"\n  shows \"partial_density_operator (denote S \\<rho>)\"", "lemma denote_while_n_sum_mat_seq:\n  assumes \"\\<rho> \\<in> carrier_mat d d\" and\n    \"x1 0 \\<in> carrier_mat d d\" and\n    \"x1 1 \\<in> carrier_mat d d\" and\n    \"partial_density_operator \\<rho>\" and\n    wc: \"well_com x2\" and mea: \"measurement d 2 x1\"  \n  shows \"matrix_seq d (matrix_sum d (\\<lambda>n. denote_while_n (x1 0) (x1 1) (denote x2) n \\<rho>))\"", "lemma denote_while_n_add:\n  assumes M0: \"x1 0 \\<in> carrier_mat d d\" and\n    M1: \"x1 1 \\<in> carrier_mat d d\" and\n    wc: \"well_com x2\" and mea: \"measurement d 2 x1\" and\n    DS: \"(\\<And>\\<rho>\\<^sub>1 \\<rho>\\<^sub>2. \\<rho>\\<^sub>1 \\<in> carrier_mat d d \\<Longrightarrow> \\<rho>\\<^sub>2 \\<in> carrier_mat d d \\<Longrightarrow> partial_density_operator \\<rho>\\<^sub>1 \\<Longrightarrow> \n      partial_density_operator \\<rho>\\<^sub>2 \\<Longrightarrow> trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) \\<le> 1 \\<Longrightarrow> denote x2 (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) = denote x2 \\<rho>\\<^sub>1 + denote x2 \\<rho>\\<^sub>2)\"\n  shows \"\\<rho>\\<^sub>1 \\<in> carrier_mat d d \\<Longrightarrow> \\<rho>\\<^sub>2 \\<in> carrier_mat d d \\<Longrightarrow> partial_density_operator \\<rho>\\<^sub>1 \\<Longrightarrow> partial_density_operator \\<rho>\\<^sub>2 \\<Longrightarrow> trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) \\<le> 1 \\<Longrightarrow> \n    denote_while_n (x1 0) (x1 1) (denote x2) k (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) = denote_while_n (x1 0) (x1 1) (denote x2) k \\<rho>\\<^sub>1 + denote_while_n (x1 0) (x1 1) (denote x2) k \\<rho>\\<^sub>2\"", "lemma denote_while_add:\n  assumes r1: \"\\<rho>\\<^sub>1 \\<in> carrier_mat d d\" and\n    r2: \"\\<rho>\\<^sub>2 \\<in> carrier_mat d d\" and\n    M0: \"x1 0 \\<in> carrier_mat d d\" and\n    M1: \"x1 1 \\<in> carrier_mat d d\" and\n    pdo1: \"partial_density_operator \\<rho>\\<^sub>1\" and\n    pdo2: \"partial_density_operator \\<rho>\\<^sub>2\" and tr12: \"trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) \\<le> 1\" and\n    wc: \"well_com x2\" and mea: \"measurement d 2 x1\" and\n    DS: \"(\\<And>\\<rho>\\<^sub>1 \\<rho>\\<^sub>2. \\<rho>\\<^sub>1 \\<in> carrier_mat d d \\<Longrightarrow> \\<rho>\\<^sub>2 \\<in> carrier_mat d d \\<Longrightarrow> partial_density_operator \\<rho>\\<^sub>1 \\<Longrightarrow> \n      partial_density_operator \\<rho>\\<^sub>2 \\<Longrightarrow> trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) \\<le> 1 \\<Longrightarrow> denote x2 (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) = denote x2 \\<rho>\\<^sub>1 + denote x2 \\<rho>\\<^sub>2)\"\n    shows\n    \"denote_while (x1 0) (x1 1) (denote x2) (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) = denote_while (x1 0) (x1 1) (denote x2) \\<rho>\\<^sub>1 + denote_while (x1 0) (x1 1) (denote x2) \\<rho>\\<^sub>2\"", "lemma denote_add:\n  \"well_com S \\<Longrightarrow> \\<rho>\\<^sub>1 \\<in> carrier_mat d d \\<Longrightarrow> \\<rho>\\<^sub>2 \\<in> carrier_mat d d \\<Longrightarrow>\n   partial_density_operator \\<rho>\\<^sub>1 \\<Longrightarrow> partial_density_operator \\<rho>\\<^sub>2 \\<Longrightarrow> trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) \\<le> 1 \\<Longrightarrow>\n   denote S (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) = denote S \\<rho>\\<^sub>1 + denote S \\<rho>\\<^sub>2\"", "lemma mulfact:\n  fixes c:: real and a:: complex and b:: complex\n  assumes \"c\\<ge>0\" \"a \\<le> b\"\n  shows \"c * a \\<le> c * b\"", "lemma denote_while_n_scale:\n  fixes c:: real\n  assumes \"c\\<ge>0\"\n    \"measurement d 2 x1\" \"well_com x2\"\n    \"(\\<And>\\<rho>. \\<rho> \\<in> carrier_mat d d \\<Longrightarrow> partial_density_operator \\<rho> \\<Longrightarrow> trace (c \\<cdot>\\<^sub>m \\<rho>) \\<le> 1 \\<Longrightarrow> \n      denote x2 (c \\<cdot>\\<^sub>m \\<rho>) =  c \\<cdot>\\<^sub>m denote x2 \\<rho>)\"\n  shows \"\\<rho> \\<in> carrier_mat d d \\<Longrightarrow> partial_density_operator \\<rho> \\<Longrightarrow> trace (c \\<cdot>\\<^sub>m \\<rho>) \\<le> 1 \\<Longrightarrow> \n    denote_while_n (x1 0) (x1 1) (denote x2) n (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) = c \\<cdot>\\<^sub>m (denote_while_n (x1 0) (x1 1) (denote x2) n \\<rho>)\"", "lemma denote_while_scale:\n  fixes c:: real\n  assumes \"\\<rho> \\<in> carrier_mat d d\"\n    \"partial_density_operator \\<rho>\"\n    \"trace (c \\<cdot>\\<^sub>m \\<rho>) \\<le> 1\" \"c \\<ge> 0\"\n    \"measurement d 2 x1\" \"well_com x2\"\n    \"(\\<And>\\<rho>. \\<rho> \\<in> carrier_mat d d \\<Longrightarrow> partial_density_operator \\<rho> \\<Longrightarrow> trace (c \\<cdot>\\<^sub>m \\<rho>) \\<le> 1 \\<Longrightarrow> \n      denote x2 (c \\<cdot>\\<^sub>m \\<rho>) =  c \\<cdot>\\<^sub>m denote x2 \\<rho>)\"\n  shows \"denote_while (x1 0) (x1 1) (denote x2) (c \\<cdot>\\<^sub>m \\<rho>) = c \\<cdot>\\<^sub>m denote_while (x1 0) (x1 1) (denote x2) \\<rho>\"", "lemma denote_scale:\n  fixes c :: real\n  assumes \"c\\<ge>0\"\n  shows \"well_com S \\<Longrightarrow> \\<rho> \\<in> carrier_mat d d \\<Longrightarrow> partial_density_operator \\<rho> \\<Longrightarrow>\n         trace (c  \\<cdot>\\<^sub>m \\<rho>) \\<le> 1 \\<Longrightarrow> denote S (c  \\<cdot>\\<^sub>m \\<rho>) = c  \\<cdot>\\<^sub>m denote S \\<rho>\"", "lemma limit_mat_denote_while_n:\n  assumes wc: \"well_com (While M S)\" and dr: \"\\<rho> \\<in> carrier_mat d d\" and pdor: \"partial_density_operator \\<rho>\"\n  shows \"limit_mat (matrix_sum d (\\<lambda>k. denote_while_n (M 0) (M 1) (denote S) k \\<rho>)) (denote (While M S) \\<rho>) d\""], "translations": [["", "lemma denote_while_n_iter_assoc:\n  \"denote_while_n_iter M0 M1 DS (Suc n) \\<rho> = DS (M1 * (denote_while_n_iter M0 M1 DS n \\<rho>) * adjoint M1)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. denote_while_n_iter M0 M1 DS (Suc n) \\<rho> =\n    DS (M1 * denote_while_n_iter M0 M1 DS n \\<rho> * adjoint M1)", "proof (induct n arbitrary: \\<rho>)"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>\\<rho>.\n       denote_while_n_iter M0 M1 DS (Suc 0) \\<rho> =\n       DS (M1 * denote_while_n_iter M0 M1 DS 0 \\<rho> * adjoint M1)\n 2. \\<And>n \\<rho>.\n       (\\<And>\\<rho>.\n           denote_while_n_iter M0 M1 DS (Suc n) \\<rho> =\n           DS (M1 * denote_while_n_iter M0 M1 DS n \\<rho> *\n               adjoint M1)) \\<Longrightarrow>\n       denote_while_n_iter M0 M1 DS (Suc (Suc n)) \\<rho> =\n       DS (M1 * denote_while_n_iter M0 M1 DS (Suc n) \\<rho> * adjoint M1)", "case 0"], ["proof (state)\nthis:\n  \n\ngoal (2 subgoals):\n 1. \\<And>\\<rho>.\n       denote_while_n_iter M0 M1 DS (Suc 0) \\<rho> =\n       DS (M1 * denote_while_n_iter M0 M1 DS 0 \\<rho> * adjoint M1)\n 2. \\<And>n \\<rho>.\n       (\\<And>\\<rho>.\n           denote_while_n_iter M0 M1 DS (Suc n) \\<rho> =\n           DS (M1 * denote_while_n_iter M0 M1 DS n \\<rho> *\n               adjoint M1)) \\<Longrightarrow>\n       denote_while_n_iter M0 M1 DS (Suc (Suc n)) \\<rho> =\n       DS (M1 * denote_while_n_iter M0 M1 DS (Suc n) \\<rho> * adjoint M1)", "show ?case"], ["proof (prove)\ngoal (1 subgoal):\n 1. denote_while_n_iter M0 M1 DS (Suc 0) \\<rho> =\n    DS (M1 * denote_while_n_iter M0 M1 DS 0 \\<rho> * adjoint M1)", "by auto"], ["proof (state)\nthis:\n  denote_while_n_iter M0 M1 DS (Suc 0) \\<rho> =\n  DS (M1 * denote_while_n_iter M0 M1 DS 0 \\<rho> * adjoint M1)\n\ngoal (1 subgoal):\n 1. \\<And>n \\<rho>.\n       (\\<And>\\<rho>.\n           denote_while_n_iter M0 M1 DS (Suc n) \\<rho> =\n           DS (M1 * denote_while_n_iter M0 M1 DS n \\<rho> *\n               adjoint M1)) \\<Longrightarrow>\n       denote_while_n_iter M0 M1 DS (Suc (Suc n)) \\<rho> =\n       DS (M1 * denote_while_n_iter M0 M1 DS (Suc n) \\<rho> * adjoint M1)", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>n \\<rho>.\n       (\\<And>\\<rho>.\n           denote_while_n_iter M0 M1 DS (Suc n) \\<rho> =\n           DS (M1 * denote_while_n_iter M0 M1 DS n \\<rho> *\n               adjoint M1)) \\<Longrightarrow>\n       denote_while_n_iter M0 M1 DS (Suc (Suc n)) \\<rho> =\n       DS (M1 * denote_while_n_iter M0 M1 DS (Suc n) \\<rho> * adjoint M1)", "case (Suc n)"], ["proof (state)\nthis:\n  denote_while_n_iter M0 M1 DS (Suc n) ?\\<rho> =\n  DS (M1 * denote_while_n_iter M0 M1 DS n ?\\<rho> * adjoint M1)\n\ngoal (1 subgoal):\n 1. \\<And>n \\<rho>.\n       (\\<And>\\<rho>.\n           denote_while_n_iter M0 M1 DS (Suc n) \\<rho> =\n           DS (M1 * denote_while_n_iter M0 M1 DS n \\<rho> *\n               adjoint M1)) \\<Longrightarrow>\n       denote_while_n_iter M0 M1 DS (Suc (Suc n)) \\<rho> =\n       DS (M1 * denote_while_n_iter M0 M1 DS (Suc n) \\<rho> * adjoint M1)", "show ?case"], ["proof (prove)\ngoal (1 subgoal):\n 1. denote_while_n_iter M0 M1 DS (Suc (Suc n)) \\<rho> =\n    DS (M1 * denote_while_n_iter M0 M1 DS (Suc n) \\<rho> * adjoint M1)", "apply (subst denote_while_n_iter.simps)"], ["proof (prove)\ngoal (1 subgoal):\n 1. denote_while_n_iter M0 M1 DS (Suc n) (DS (M1 * \\<rho> * adjoint M1)) =\n    DS (M1 * denote_while_n_iter M0 M1 DS (Suc n) \\<rho> * adjoint M1)", "apply (subst Suc, auto)"], ["proof (prove)\ngoal:\nNo subgoals!", "done"], ["proof (state)\nthis:\n  denote_while_n_iter M0 M1 DS (Suc (Suc n)) \\<rho> =\n  DS (M1 * denote_while_n_iter M0 M1 DS (Suc n) \\<rho> * adjoint M1)\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma denote_while_n_iter_dim:\n  \"\\<rho> \\<in> carrier_mat m m \\<Longrightarrow> partial_density_operator \\<rho> \\<Longrightarrow> M1 \\<in> carrier_mat m m \\<Longrightarrow> adjoint M1 * M1 \\<le>\\<^sub>L 1\\<^sub>m m\n  \\<Longrightarrow> (\\<And>\\<rho>. \\<rho> \\<in> carrier_mat m m \\<Longrightarrow> partial_density_operator \\<rho> \\<Longrightarrow> DS \\<rho> \\<in> carrier_mat m m \\<and> partial_density_operator (DS \\<rho>))\n  \\<Longrightarrow> denote_while_n_iter M0 M1 DS n \\<rho> \\<in> carrier_mat m m \\<and> partial_density_operator (denote_while_n_iter M0 M1 DS n \\<rho>)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<rho> \\<in> carrier_mat m m; partial_density_operator \\<rho>;\n     M1 \\<in> carrier_mat m m; adjoint M1 * M1 \\<le>\\<^sub>L 1\\<^sub>m m;\n     \\<And>\\<rho>.\n        \\<lbrakk>\\<rho> \\<in> carrier_mat m m;\n         partial_density_operator \\<rho>\\<rbrakk>\n        \\<Longrightarrow> DS \\<rho> \\<in> carrier_mat m m \\<and>\n                          partial_density_operator (DS \\<rho>)\\<rbrakk>\n    \\<Longrightarrow> denote_while_n_iter M0 M1 DS n \\<rho>\n                      \\<in> carrier_mat m m \\<and>\n                      partial_density_operator\n                       (denote_while_n_iter M0 M1 DS n \\<rho>)", "proof (induct n arbitrary: \\<rho>)"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>\\<rho>.\n       \\<lbrakk>\\<rho> \\<in> carrier_mat m m;\n        partial_density_operator \\<rho>; M1 \\<in> carrier_mat m m;\n        adjoint M1 * M1 \\<le>\\<^sub>L 1\\<^sub>m m;\n        \\<And>\\<rho>.\n           \\<lbrakk>\\<rho> \\<in> carrier_mat m m;\n            partial_density_operator \\<rho>\\<rbrakk>\n           \\<Longrightarrow> DS \\<rho> \\<in> carrier_mat m m \\<and>\n                             partial_density_operator (DS \\<rho>)\\<rbrakk>\n       \\<Longrightarrow> denote_while_n_iter M0 M1 DS 0 \\<rho>\n                         \\<in> carrier_mat m m \\<and>\n                         partial_density_operator\n                          (denote_while_n_iter M0 M1 DS 0 \\<rho>)\n 2. \\<And>n \\<rho>.\n       \\<lbrakk>\\<And>\\<rho>.\n                   \\<lbrakk>\\<rho> \\<in> carrier_mat m m;\n                    partial_density_operator \\<rho>;\n                    M1 \\<in> carrier_mat m m;\n                    adjoint M1 * M1 \\<le>\\<^sub>L 1\\<^sub>m m;\n                    \\<And>\\<rho>.\n                       \\<lbrakk>\\<rho> \\<in> carrier_mat m m;\n                        partial_density_operator \\<rho>\\<rbrakk>\n                       \\<Longrightarrow> DS \\<rho>\n   \\<in> carrier_mat m m \\<and>\n   partial_density_operator (DS \\<rho>)\\<rbrakk>\n                   \\<Longrightarrow> denote_while_n_iter M0 M1 DS n \\<rho>\n                                     \\<in> carrier_mat m m \\<and>\n                                     partial_density_operator\n(denote_while_n_iter M0 M1 DS n \\<rho>);\n        \\<rho> \\<in> carrier_mat m m; partial_density_operator \\<rho>;\n        M1 \\<in> carrier_mat m m; adjoint M1 * M1 \\<le>\\<^sub>L 1\\<^sub>m m;\n        \\<And>\\<rho>.\n           \\<lbrakk>\\<rho> \\<in> carrier_mat m m;\n            partial_density_operator \\<rho>\\<rbrakk>\n           \\<Longrightarrow> DS \\<rho> \\<in> carrier_mat m m \\<and>\n                             partial_density_operator (DS \\<rho>)\\<rbrakk>\n       \\<Longrightarrow> denote_while_n_iter M0 M1 DS (Suc n) \\<rho>\n                         \\<in> carrier_mat m m \\<and>\n                         partial_density_operator\n                          (denote_while_n_iter M0 M1 DS (Suc n) \\<rho>)", "case 0"], ["proof (state)\nthis:\n  \\<rho> \\<in> carrier_mat m m\n  partial_density_operator \\<rho>\n  M1 \\<in> carrier_mat m m\n  adjoint M1 * M1 \\<le>\\<^sub>L 1\\<^sub>m m\n  \\<lbrakk>?\\<rho> \\<in> carrier_mat m m;\n   partial_density_operator ?\\<rho>\\<rbrakk>\n  \\<Longrightarrow> DS ?\\<rho> \\<in> carrier_mat m m \\<and>\n                    partial_density_operator (DS ?\\<rho>)\n\ngoal (2 subgoals):\n 1. \\<And>\\<rho>.\n       \\<lbrakk>\\<rho> \\<in> carrier_mat m m;\n        partial_density_operator \\<rho>; M1 \\<in> carrier_mat m m;\n        adjoint M1 * M1 \\<le>\\<^sub>L 1\\<^sub>m m;\n        \\<And>\\<rho>.\n           \\<lbrakk>\\<rho> \\<in> carrier_mat m m;\n            partial_density_operator \\<rho>\\<rbrakk>\n           \\<Longrightarrow> DS \\<rho> \\<in> carrier_mat m m \\<and>\n                             partial_density_operator (DS \\<rho>)\\<rbrakk>\n       \\<Longrightarrow> denote_while_n_iter M0 M1 DS 0 \\<rho>\n                         \\<in> carrier_mat m m \\<and>\n                         partial_density_operator\n                          (denote_while_n_iter M0 M1 DS 0 \\<rho>)\n 2. \\<And>n \\<rho>.\n       \\<lbrakk>\\<And>\\<rho>.\n                   \\<lbrakk>\\<rho> \\<in> carrier_mat m m;\n                    partial_density_operator \\<rho>;\n                    M1 \\<in> carrier_mat m m;\n                    adjoint M1 * M1 \\<le>\\<^sub>L 1\\<^sub>m m;\n                    \\<And>\\<rho>.\n                       \\<lbrakk>\\<rho> \\<in> carrier_mat m m;\n                        partial_density_operator \\<rho>\\<rbrakk>\n                       \\<Longrightarrow> DS \\<rho>\n   \\<in> carrier_mat m m \\<and>\n   partial_density_operator (DS \\<rho>)\\<rbrakk>\n                   \\<Longrightarrow> denote_while_n_iter M0 M1 DS n \\<rho>\n                                     \\<in> carrier_mat m m \\<and>\n                                     partial_density_operator\n(denote_while_n_iter M0 M1 DS n \\<rho>);\n        \\<rho> \\<in> carrier_mat m m; partial_density_operator \\<rho>;\n        M1 \\<in> carrier_mat m m; adjoint M1 * M1 \\<le>\\<^sub>L 1\\<^sub>m m;\n        \\<And>\\<rho>.\n           \\<lbrakk>\\<rho> \\<in> carrier_mat m m;\n            partial_density_operator \\<rho>\\<rbrakk>\n           \\<Longrightarrow> DS \\<rho> \\<in> carrier_mat m m \\<and>\n                             partial_density_operator (DS \\<rho>)\\<rbrakk>\n       \\<Longrightarrow> denote_while_n_iter M0 M1 DS (Suc n) \\<rho>\n                         \\<in> carrier_mat m m \\<and>\n                         partial_density_operator\n                          (denote_while_n_iter M0 M1 DS (Suc n) \\<rho>)", "then"], ["proof (chain)\npicking this:\n  \\<rho> \\<in> carrier_mat m m\n  partial_density_operator \\<rho>\n  M1 \\<in> carrier_mat m m\n  adjoint M1 * M1 \\<le>\\<^sub>L 1\\<^sub>m m\n  \\<lbrakk>?\\<rho> \\<in> carrier_mat m m;\n   partial_density_operator ?\\<rho>\\<rbrakk>\n  \\<Longrightarrow> DS ?\\<rho> \\<in> carrier_mat m m \\<and>\n                    partial_density_operator (DS ?\\<rho>)", "show ?case"], ["proof (prove)\nusing this:\n  \\<rho> \\<in> carrier_mat m m\n  partial_density_operator \\<rho>\n  M1 \\<in> carrier_mat m m\n  adjoint M1 * M1 \\<le>\\<^sub>L 1\\<^sub>m m\n  \\<lbrakk>?\\<rho> \\<in> carrier_mat m m;\n   partial_density_operator ?\\<rho>\\<rbrakk>\n  \\<Longrightarrow> DS ?\\<rho> \\<in> carrier_mat m m \\<and>\n                    partial_density_operator (DS ?\\<rho>)\n\ngoal (1 subgoal):\n 1. denote_while_n_iter M0 M1 DS 0 \\<rho> \\<in> carrier_mat m m \\<and>\n    partial_density_operator (denote_while_n_iter M0 M1 DS 0 \\<rho>)", "unfolding denote_while_n_iter.simps"], ["proof (prove)\nusing this:\n  \\<rho> \\<in> carrier_mat m m\n  partial_density_operator \\<rho>\n  M1 \\<in> carrier_mat m m\n  adjoint M1 * M1 \\<le>\\<^sub>L 1\\<^sub>m m\n  \\<lbrakk>?\\<rho> \\<in> carrier_mat m m;\n   partial_density_operator ?\\<rho>\\<rbrakk>\n  \\<Longrightarrow> DS ?\\<rho> \\<in> carrier_mat m m \\<and>\n                    partial_density_operator (DS ?\\<rho>)\n\ngoal (1 subgoal):\n 1. \\<rho> \\<in> carrier_mat m m \\<and> partial_density_operator \\<rho>", "by auto"], ["proof (state)\nthis:\n  denote_while_n_iter M0 M1 DS 0 \\<rho> \\<in> carrier_mat m m \\<and>\n  partial_density_operator (denote_while_n_iter M0 M1 DS 0 \\<rho>)\n\ngoal (1 subgoal):\n 1. \\<And>n \\<rho>.\n       \\<lbrakk>\\<And>\\<rho>.\n                   \\<lbrakk>\\<rho> \\<in> carrier_mat m m;\n                    partial_density_operator \\<rho>;\n                    M1 \\<in> carrier_mat m m;\n                    adjoint M1 * M1 \\<le>\\<^sub>L 1\\<^sub>m m;\n                    \\<And>\\<rho>.\n                       \\<lbrakk>\\<rho> \\<in> carrier_mat m m;\n                        partial_density_operator \\<rho>\\<rbrakk>\n                       \\<Longrightarrow> DS \\<rho>\n   \\<in> carrier_mat m m \\<and>\n   partial_density_operator (DS \\<rho>)\\<rbrakk>\n                   \\<Longrightarrow> denote_while_n_iter M0 M1 DS n \\<rho>\n                                     \\<in> carrier_mat m m \\<and>\n                                     partial_density_operator\n(denote_while_n_iter M0 M1 DS n \\<rho>);\n        \\<rho> \\<in> carrier_mat m m; partial_density_operator \\<rho>;\n        M1 \\<in> carrier_mat m m; adjoint M1 * M1 \\<le>\\<^sub>L 1\\<^sub>m m;\n        \\<And>\\<rho>.\n           \\<lbrakk>\\<rho> \\<in> carrier_mat m m;\n            partial_density_operator \\<rho>\\<rbrakk>\n           \\<Longrightarrow> DS \\<rho> \\<in> carrier_mat m m \\<and>\n                             partial_density_operator (DS \\<rho>)\\<rbrakk>\n       \\<Longrightarrow> denote_while_n_iter M0 M1 DS (Suc n) \\<rho>\n                         \\<in> carrier_mat m m \\<and>\n                         partial_density_operator\n                          (denote_while_n_iter M0 M1 DS (Suc n) \\<rho>)", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>n \\<rho>.\n       \\<lbrakk>\\<And>\\<rho>.\n                   \\<lbrakk>\\<rho> \\<in> carrier_mat m m;\n                    partial_density_operator \\<rho>;\n                    M1 \\<in> carrier_mat m m;\n                    adjoint M1 * M1 \\<le>\\<^sub>L 1\\<^sub>m m;\n                    \\<And>\\<rho>.\n                       \\<lbrakk>\\<rho> \\<in> carrier_mat m m;\n                        partial_density_operator \\<rho>\\<rbrakk>\n                       \\<Longrightarrow> DS \\<rho>\n   \\<in> carrier_mat m m \\<and>\n   partial_density_operator (DS \\<rho>)\\<rbrakk>\n                   \\<Longrightarrow> denote_while_n_iter M0 M1 DS n \\<rho>\n                                     \\<in> carrier_mat m m \\<and>\n                                     partial_density_operator\n(denote_while_n_iter M0 M1 DS n \\<rho>);\n        \\<rho> \\<in> carrier_mat m m; partial_density_operator \\<rho>;\n        M1 \\<in> carrier_mat m m; adjoint M1 * M1 \\<le>\\<^sub>L 1\\<^sub>m m;\n        \\<And>\\<rho>.\n           \\<lbrakk>\\<rho> \\<in> carrier_mat m m;\n            partial_density_operator \\<rho>\\<rbrakk>\n           \\<Longrightarrow> DS \\<rho> \\<in> carrier_mat m m \\<and>\n                             partial_density_operator (DS \\<rho>)\\<rbrakk>\n       \\<Longrightarrow> denote_while_n_iter M0 M1 DS (Suc n) \\<rho>\n                         \\<in> carrier_mat m m \\<and>\n                         partial_density_operator\n                          (denote_while_n_iter M0 M1 DS (Suc n) \\<rho>)", "case (Suc n)"], ["proof (state)\nthis:\n  \\<lbrakk>?\\<rho> \\<in> carrier_mat m m; partial_density_operator ?\\<rho>;\n   M1 \\<in> carrier_mat m m; adjoint M1 * M1 \\<le>\\<^sub>L 1\\<^sub>m m;\n   \\<And>\\<rho>.\n      \\<lbrakk>\\<rho> \\<in> carrier_mat m m;\n       partial_density_operator \\<rho>\\<rbrakk>\n      \\<Longrightarrow> DS \\<rho> \\<in> carrier_mat m m \\<and>\n                        partial_density_operator (DS \\<rho>)\\<rbrakk>\n  \\<Longrightarrow> denote_while_n_iter M0 M1 DS n ?\\<rho>\n                    \\<in> carrier_mat m m \\<and>\n                    partial_density_operator\n                     (denote_while_n_iter M0 M1 DS n ?\\<rho>)\n  \\<rho> \\<in> carrier_mat m m\n  partial_density_operator \\<rho>\n  M1 \\<in> carrier_mat m m\n  adjoint M1 * M1 \\<le>\\<^sub>L 1\\<^sub>m m\n  \\<lbrakk>?\\<rho> \\<in> carrier_mat m m;\n   partial_density_operator ?\\<rho>\\<rbrakk>\n  \\<Longrightarrow> DS ?\\<rho> \\<in> carrier_mat m m \\<and>\n                    partial_density_operator (DS ?\\<rho>)\n\ngoal (1 subgoal):\n 1. \\<And>n \\<rho>.\n       \\<lbrakk>\\<And>\\<rho>.\n                   \\<lbrakk>\\<rho> \\<in> carrier_mat m m;\n                    partial_density_operator \\<rho>;\n                    M1 \\<in> carrier_mat m m;\n                    adjoint M1 * M1 \\<le>\\<^sub>L 1\\<^sub>m m;\n                    \\<And>\\<rho>.\n                       \\<lbrakk>\\<rho> \\<in> carrier_mat m m;\n                        partial_density_operator \\<rho>\\<rbrakk>\n                       \\<Longrightarrow> DS \\<rho>\n   \\<in> carrier_mat m m \\<and>\n   partial_density_operator (DS \\<rho>)\\<rbrakk>\n                   \\<Longrightarrow> denote_while_n_iter M0 M1 DS n \\<rho>\n                                     \\<in> carrier_mat m m \\<and>\n                                     partial_density_operator\n(denote_while_n_iter M0 M1 DS n \\<rho>);\n        \\<rho> \\<in> carrier_mat m m; partial_density_operator \\<rho>;\n        M1 \\<in> carrier_mat m m; adjoint M1 * M1 \\<le>\\<^sub>L 1\\<^sub>m m;\n        \\<And>\\<rho>.\n           \\<lbrakk>\\<rho> \\<in> carrier_mat m m;\n            partial_density_operator \\<rho>\\<rbrakk>\n           \\<Longrightarrow> DS \\<rho> \\<in> carrier_mat m m \\<and>\n                             partial_density_operator (DS \\<rho>)\\<rbrakk>\n       \\<Longrightarrow> denote_while_n_iter M0 M1 DS (Suc n) \\<rho>\n                         \\<in> carrier_mat m m \\<and>\n                         partial_density_operator\n                          (denote_while_n_iter M0 M1 DS (Suc n) \\<rho>)", "then"], ["proof (chain)\npicking this:\n  \\<lbrakk>?\\<rho> \\<in> carrier_mat m m; partial_density_operator ?\\<rho>;\n   M1 \\<in> carrier_mat m m; adjoint M1 * M1 \\<le>\\<^sub>L 1\\<^sub>m m;\n   \\<And>\\<rho>.\n      \\<lbrakk>\\<rho> \\<in> carrier_mat m m;\n       partial_density_operator \\<rho>\\<rbrakk>\n      \\<Longrightarrow> DS \\<rho> \\<in> carrier_mat m m \\<and>\n                        partial_density_operator (DS \\<rho>)\\<rbrakk>\n  \\<Longrightarrow> denote_while_n_iter M0 M1 DS n ?\\<rho>\n                    \\<in> carrier_mat m m \\<and>\n                    partial_density_operator\n                     (denote_while_n_iter M0 M1 DS n ?\\<rho>)\n  \\<rho> \\<in> carrier_mat m m\n  partial_density_operator \\<rho>\n  M1 \\<in> carrier_mat m m\n  adjoint M1 * M1 \\<le>\\<^sub>L 1\\<^sub>m m\n  \\<lbrakk>?\\<rho> \\<in> carrier_mat m m;\n   partial_density_operator ?\\<rho>\\<rbrakk>\n  \\<Longrightarrow> DS ?\\<rho> \\<in> carrier_mat m m \\<and>\n                    partial_density_operator (DS ?\\<rho>)", "have dr: \"\\<rho> \\<in> carrier_mat m m\" and dM1: \"M1 \\<in> carrier_mat m m\""], ["proof (prove)\nusing this:\n  \\<lbrakk>?\\<rho> \\<in> carrier_mat m m; partial_density_operator ?\\<rho>;\n   M1 \\<in> carrier_mat m m; adjoint M1 * M1 \\<le>\\<^sub>L 1\\<^sub>m m;\n   \\<And>\\<rho>.\n      \\<lbrakk>\\<rho> \\<in> carrier_mat m m;\n       partial_density_operator \\<rho>\\<rbrakk>\n      \\<Longrightarrow> DS \\<rho> \\<in> carrier_mat m m \\<and>\n                        partial_density_operator (DS \\<rho>)\\<rbrakk>\n  \\<Longrightarrow> denote_while_n_iter M0 M1 DS n ?\\<rho>\n                    \\<in> carrier_mat m m \\<and>\n                    partial_density_operator\n                     (denote_while_n_iter M0 M1 DS n ?\\<rho>)\n  \\<rho> \\<in> carrier_mat m m\n  partial_density_operator \\<rho>\n  M1 \\<in> carrier_mat m m\n  adjoint M1 * M1 \\<le>\\<^sub>L 1\\<^sub>m m\n  \\<lbrakk>?\\<rho> \\<in> carrier_mat m m;\n   partial_density_operator ?\\<rho>\\<rbrakk>\n  \\<Longrightarrow> DS ?\\<rho> \\<in> carrier_mat m m \\<and>\n                    partial_density_operator (DS ?\\<rho>)\n\ngoal (1 subgoal):\n 1. \\<rho> \\<in> carrier_mat m m &&& M1 \\<in> carrier_mat m m", "by auto"], ["proof (state)\nthis:\n  \\<rho> \\<in> carrier_mat m m\n  M1 \\<in> carrier_mat m m\n\ngoal (1 subgoal):\n 1. \\<And>n \\<rho>.\n       \\<lbrakk>\\<And>\\<rho>.\n                   \\<lbrakk>\\<rho> \\<in> carrier_mat m m;\n                    partial_density_operator \\<rho>;\n                    M1 \\<in> carrier_mat m m;\n                    adjoint M1 * M1 \\<le>\\<^sub>L 1\\<^sub>m m;\n                    \\<And>\\<rho>.\n                       \\<lbrakk>\\<rho> \\<in> carrier_mat m m;\n                        partial_density_operator \\<rho>\\<rbrakk>\n                       \\<Longrightarrow> DS \\<rho>\n   \\<in> carrier_mat m m \\<and>\n   partial_density_operator (DS \\<rho>)\\<rbrakk>\n                   \\<Longrightarrow> denote_while_n_iter M0 M1 DS n \\<rho>\n                                     \\<in> carrier_mat m m \\<and>\n                                     partial_density_operator\n(denote_while_n_iter M0 M1 DS n \\<rho>);\n        \\<rho> \\<in> carrier_mat m m; partial_density_operator \\<rho>;\n        M1 \\<in> carrier_mat m m; adjoint M1 * M1 \\<le>\\<^sub>L 1\\<^sub>m m;\n        \\<And>\\<rho>.\n           \\<lbrakk>\\<rho> \\<in> carrier_mat m m;\n            partial_density_operator \\<rho>\\<rbrakk>\n           \\<Longrightarrow> DS \\<rho> \\<in> carrier_mat m m \\<and>\n                             partial_density_operator (DS \\<rho>)\\<rbrakk>\n       \\<Longrightarrow> denote_while_n_iter M0 M1 DS (Suc n) \\<rho>\n                         \\<in> carrier_mat m m \\<and>\n                         partial_density_operator\n                          (denote_while_n_iter M0 M1 DS (Suc n) \\<rho>)", "have dMr: \"M1 * \\<rho> * adjoint M1 \\<in> carrier_mat m m\""], ["proof (prove)\ngoal (1 subgoal):\n 1. M1 * \\<rho> * adjoint M1 \\<in> carrier_mat m m", "using dr dM1"], ["proof (prove)\nusing this:\n  \\<rho> \\<in> carrier_mat m m\n  M1 \\<in> carrier_mat m m\n\ngoal (1 subgoal):\n 1. M1 * \\<rho> * adjoint M1 \\<in> carrier_mat m m", "by fastforce"], ["proof (state)\nthis:\n  M1 * \\<rho> * adjoint M1 \\<in> carrier_mat m m\n\ngoal (1 subgoal):\n 1. \\<And>n \\<rho>.\n       \\<lbrakk>\\<And>\\<rho>.\n                   \\<lbrakk>\\<rho> \\<in> carrier_mat m m;\n                    partial_density_operator \\<rho>;\n                    M1 \\<in> carrier_mat m m;\n                    adjoint M1 * M1 \\<le>\\<^sub>L 1\\<^sub>m m;\n                    \\<And>\\<rho>.\n                       \\<lbrakk>\\<rho> \\<in> carrier_mat m m;\n                        partial_density_operator \\<rho>\\<rbrakk>\n                       \\<Longrightarrow> DS \\<rho>\n   \\<in> carrier_mat m m \\<and>\n   partial_density_operator (DS \\<rho>)\\<rbrakk>\n                   \\<Longrightarrow> denote_while_n_iter M0 M1 DS n \\<rho>\n                                     \\<in> carrier_mat m m \\<and>\n                                     partial_density_operator\n(denote_while_n_iter M0 M1 DS n \\<rho>);\n        \\<rho> \\<in> carrier_mat m m; partial_density_operator \\<rho>;\n        M1 \\<in> carrier_mat m m; adjoint M1 * M1 \\<le>\\<^sub>L 1\\<^sub>m m;\n        \\<And>\\<rho>.\n           \\<lbrakk>\\<rho> \\<in> carrier_mat m m;\n            partial_density_operator \\<rho>\\<rbrakk>\n           \\<Longrightarrow> DS \\<rho> \\<in> carrier_mat m m \\<and>\n                             partial_density_operator (DS \\<rho>)\\<rbrakk>\n       \\<Longrightarrow> denote_while_n_iter M0 M1 DS (Suc n) \\<rho>\n                         \\<in> carrier_mat m m \\<and>\n                         partial_density_operator\n                          (denote_while_n_iter M0 M1 DS (Suc n) \\<rho>)", "have pdoMr: \"partial_density_operator (M1 * \\<rho> * adjoint M1)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. partial_density_operator (M1 * \\<rho> * adjoint M1)", "using pdo_close_under_measurement Suc"], ["proof (prove)\nusing this:\n  \\<lbrakk>?M \\<in> carrier_mat ?n ?n; ?\\<rho> \\<in> carrier_mat ?n ?n;\n   partial_density_operator ?\\<rho>;\n   adjoint ?M * ?M \\<le>\\<^sub>L 1\\<^sub>m ?n\\<rbrakk>\n  \\<Longrightarrow> partial_density_operator (?M * ?\\<rho> * adjoint ?M)\n  \\<lbrakk>?\\<rho> \\<in> carrier_mat m m; partial_density_operator ?\\<rho>;\n   M1 \\<in> carrier_mat m m; adjoint M1 * M1 \\<le>\\<^sub>L 1\\<^sub>m m;\n   \\<And>\\<rho>.\n      \\<lbrakk>\\<rho> \\<in> carrier_mat m m;\n       partial_density_operator \\<rho>\\<rbrakk>\n      \\<Longrightarrow> DS \\<rho> \\<in> carrier_mat m m \\<and>\n                        partial_density_operator (DS \\<rho>)\\<rbrakk>\n  \\<Longrightarrow> denote_while_n_iter M0 M1 DS n ?\\<rho>\n                    \\<in> carrier_mat m m \\<and>\n                    partial_density_operator\n                     (denote_while_n_iter M0 M1 DS n ?\\<rho>)\n  \\<rho> \\<in> carrier_mat m m\n  partial_density_operator \\<rho>\n  M1 \\<in> carrier_mat m m\n  adjoint M1 * M1 \\<le>\\<^sub>L 1\\<^sub>m m\n  \\<lbrakk>?\\<rho> \\<in> carrier_mat m m;\n   partial_density_operator ?\\<rho>\\<rbrakk>\n  \\<Longrightarrow> DS ?\\<rho> \\<in> carrier_mat m m \\<and>\n                    partial_density_operator (DS ?\\<rho>)\n\ngoal (1 subgoal):\n 1. partial_density_operator (M1 * \\<rho> * adjoint M1)", "by auto"], ["proof (state)\nthis:\n  partial_density_operator (M1 * \\<rho> * adjoint M1)\n\ngoal (1 subgoal):\n 1. \\<And>n \\<rho>.\n       \\<lbrakk>\\<And>\\<rho>.\n                   \\<lbrakk>\\<rho> \\<in> carrier_mat m m;\n                    partial_density_operator \\<rho>;\n                    M1 \\<in> carrier_mat m m;\n                    adjoint M1 * M1 \\<le>\\<^sub>L 1\\<^sub>m m;\n                    \\<And>\\<rho>.\n                       \\<lbrakk>\\<rho> \\<in> carrier_mat m m;\n                        partial_density_operator \\<rho>\\<rbrakk>\n                       \\<Longrightarrow> DS \\<rho>\n   \\<in> carrier_mat m m \\<and>\n   partial_density_operator (DS \\<rho>)\\<rbrakk>\n                   \\<Longrightarrow> denote_while_n_iter M0 M1 DS n \\<rho>\n                                     \\<in> carrier_mat m m \\<and>\n                                     partial_density_operator\n(denote_while_n_iter M0 M1 DS n \\<rho>);\n        \\<rho> \\<in> carrier_mat m m; partial_density_operator \\<rho>;\n        M1 \\<in> carrier_mat m m; adjoint M1 * M1 \\<le>\\<^sub>L 1\\<^sub>m m;\n        \\<And>\\<rho>.\n           \\<lbrakk>\\<rho> \\<in> carrier_mat m m;\n            partial_density_operator \\<rho>\\<rbrakk>\n           \\<Longrightarrow> DS \\<rho> \\<in> carrier_mat m m \\<and>\n                             partial_density_operator (DS \\<rho>)\\<rbrakk>\n       \\<Longrightarrow> denote_while_n_iter M0 M1 DS (Suc n) \\<rho>\n                         \\<in> carrier_mat m m \\<and>\n                         partial_density_operator\n                          (denote_while_n_iter M0 M1 DS (Suc n) \\<rho>)", "from Suc dMr pdoMr"], ["proof (chain)\npicking this:\n  \\<lbrakk>?\\<rho> \\<in> carrier_mat m m; partial_density_operator ?\\<rho>;\n   M1 \\<in> carrier_mat m m; adjoint M1 * M1 \\<le>\\<^sub>L 1\\<^sub>m m;\n   \\<And>\\<rho>.\n      \\<lbrakk>\\<rho> \\<in> carrier_mat m m;\n       partial_density_operator \\<rho>\\<rbrakk>\n      \\<Longrightarrow> DS \\<rho> \\<in> carrier_mat m m \\<and>\n                        partial_density_operator (DS \\<rho>)\\<rbrakk>\n  \\<Longrightarrow> denote_while_n_iter M0 M1 DS n ?\\<rho>\n                    \\<in> carrier_mat m m \\<and>\n                    partial_density_operator\n                     (denote_while_n_iter M0 M1 DS n ?\\<rho>)\n  \\<rho> \\<in> carrier_mat m m\n  partial_density_operator \\<rho>\n  M1 \\<in> carrier_mat m m\n  adjoint M1 * M1 \\<le>\\<^sub>L 1\\<^sub>m m\n  \\<lbrakk>?\\<rho> \\<in> carrier_mat m m;\n   partial_density_operator ?\\<rho>\\<rbrakk>\n  \\<Longrightarrow> DS ?\\<rho> \\<in> carrier_mat m m \\<and>\n                    partial_density_operator (DS ?\\<rho>)\n  M1 * \\<rho> * adjoint M1 \\<in> carrier_mat m m\n  partial_density_operator (M1 * \\<rho> * adjoint M1)", "have d: \"DS (M1 * \\<rho> * adjoint M1) \\<in> carrier_mat m m\" and \"partial_density_operator (DS (M1 * \\<rho> * adjoint M1))\""], ["proof (prove)\nusing this:\n  \\<lbrakk>?\\<rho> \\<in> carrier_mat m m; partial_density_operator ?\\<rho>;\n   M1 \\<in> carrier_mat m m; adjoint M1 * M1 \\<le>\\<^sub>L 1\\<^sub>m m;\n   \\<And>\\<rho>.\n      \\<lbrakk>\\<rho> \\<in> carrier_mat m m;\n       partial_density_operator \\<rho>\\<rbrakk>\n      \\<Longrightarrow> DS \\<rho> \\<in> carrier_mat m m \\<and>\n                        partial_density_operator (DS \\<rho>)\\<rbrakk>\n  \\<Longrightarrow> denote_while_n_iter M0 M1 DS n ?\\<rho>\n                    \\<in> carrier_mat m m \\<and>\n                    partial_density_operator\n                     (denote_while_n_iter M0 M1 DS n ?\\<rho>)\n  \\<rho> \\<in> carrier_mat m m\n  partial_density_operator \\<rho>\n  M1 \\<in> carrier_mat m m\n  adjoint M1 * M1 \\<le>\\<^sub>L 1\\<^sub>m m\n  \\<lbrakk>?\\<rho> \\<in> carrier_mat m m;\n   partial_density_operator ?\\<rho>\\<rbrakk>\n  \\<Longrightarrow> DS ?\\<rho> \\<in> carrier_mat m m \\<and>\n                    partial_density_operator (DS ?\\<rho>)\n  M1 * \\<rho> * adjoint M1 \\<in> carrier_mat m m\n  partial_density_operator (M1 * \\<rho> * adjoint M1)\n\ngoal (1 subgoal):\n 1. DS (M1 * \\<rho> * adjoint M1) \\<in> carrier_mat m m &&&\n    partial_density_operator (DS (M1 * \\<rho> * adjoint M1))", "by auto"], ["proof (state)\nthis:\n  DS (M1 * \\<rho> * adjoint M1) \\<in> carrier_mat m m\n  partial_density_operator (DS (M1 * \\<rho> * adjoint M1))\n\ngoal (1 subgoal):\n 1. \\<And>n \\<rho>.\n       \\<lbrakk>\\<And>\\<rho>.\n                   \\<lbrakk>\\<rho> \\<in> carrier_mat m m;\n                    partial_density_operator \\<rho>;\n                    M1 \\<in> carrier_mat m m;\n                    adjoint M1 * M1 \\<le>\\<^sub>L 1\\<^sub>m m;\n                    \\<And>\\<rho>.\n                       \\<lbrakk>\\<rho> \\<in> carrier_mat m m;\n                        partial_density_operator \\<rho>\\<rbrakk>\n                       \\<Longrightarrow> DS \\<rho>\n   \\<in> carrier_mat m m \\<and>\n   partial_density_operator (DS \\<rho>)\\<rbrakk>\n                   \\<Longrightarrow> denote_while_n_iter M0 M1 DS n \\<rho>\n                                     \\<in> carrier_mat m m \\<and>\n                                     partial_density_operator\n(denote_while_n_iter M0 M1 DS n \\<rho>);\n        \\<rho> \\<in> carrier_mat m m; partial_density_operator \\<rho>;\n        M1 \\<in> carrier_mat m m; adjoint M1 * M1 \\<le>\\<^sub>L 1\\<^sub>m m;\n        \\<And>\\<rho>.\n           \\<lbrakk>\\<rho> \\<in> carrier_mat m m;\n            partial_density_operator \\<rho>\\<rbrakk>\n           \\<Longrightarrow> DS \\<rho> \\<in> carrier_mat m m \\<and>\n                             partial_density_operator (DS \\<rho>)\\<rbrakk>\n       \\<Longrightarrow> denote_while_n_iter M0 M1 DS (Suc n) \\<rho>\n                         \\<in> carrier_mat m m \\<and>\n                         partial_density_operator\n                          (denote_while_n_iter M0 M1 DS (Suc n) \\<rho>)", "then"], ["proof (chain)\npicking this:\n  DS (M1 * \\<rho> * adjoint M1) \\<in> carrier_mat m m\n  partial_density_operator (DS (M1 * \\<rho> * adjoint M1))", "show ?case"], ["proof (prove)\nusing this:\n  DS (M1 * \\<rho> * adjoint M1) \\<in> carrier_mat m m\n  partial_density_operator (DS (M1 * \\<rho> * adjoint M1))\n\ngoal (1 subgoal):\n 1. denote_while_n_iter M0 M1 DS (Suc n) \\<rho> \\<in> carrier_mat m m \\<and>\n    partial_density_operator (denote_while_n_iter M0 M1 DS (Suc n) \\<rho>)", "unfolding denote_while_n_iter.simps"], ["proof (prove)\nusing this:\n  DS (M1 * \\<rho> * adjoint M1) \\<in> carrier_mat m m\n  partial_density_operator (DS (M1 * \\<rho> * adjoint M1))\n\ngoal (1 subgoal):\n 1. denote_while_n_iter M0 M1 DS n (DS (M1 * \\<rho> * adjoint M1))\n    \\<in> carrier_mat m m \\<and>\n    partial_density_operator\n     (denote_while_n_iter M0 M1 DS n (DS (M1 * \\<rho> * adjoint M1)))", "using Suc"], ["proof (prove)\nusing this:\n  DS (M1 * \\<rho> * adjoint M1) \\<in> carrier_mat m m\n  partial_density_operator (DS (M1 * \\<rho> * adjoint M1))\n  \\<lbrakk>?\\<rho> \\<in> carrier_mat m m; partial_density_operator ?\\<rho>;\n   M1 \\<in> carrier_mat m m; adjoint M1 * M1 \\<le>\\<^sub>L 1\\<^sub>m m;\n   \\<And>\\<rho>.\n      \\<lbrakk>\\<rho> \\<in> carrier_mat m m;\n       partial_density_operator \\<rho>\\<rbrakk>\n      \\<Longrightarrow> DS \\<rho> \\<in> carrier_mat m m \\<and>\n                        partial_density_operator (DS \\<rho>)\\<rbrakk>\n  \\<Longrightarrow> denote_while_n_iter M0 M1 DS n ?\\<rho>\n                    \\<in> carrier_mat m m \\<and>\n                    partial_density_operator\n                     (denote_while_n_iter M0 M1 DS n ?\\<rho>)\n  \\<rho> \\<in> carrier_mat m m\n  partial_density_operator \\<rho>\n  M1 \\<in> carrier_mat m m\n  adjoint M1 * M1 \\<le>\\<^sub>L 1\\<^sub>m m\n  \\<lbrakk>?\\<rho> \\<in> carrier_mat m m;\n   partial_density_operator ?\\<rho>\\<rbrakk>\n  \\<Longrightarrow> DS ?\\<rho> \\<in> carrier_mat m m \\<and>\n                    partial_density_operator (DS ?\\<rho>)\n\ngoal (1 subgoal):\n 1. denote_while_n_iter M0 M1 DS n (DS (M1 * \\<rho> * adjoint M1))\n    \\<in> carrier_mat m m \\<and>\n    partial_density_operator\n     (denote_while_n_iter M0 M1 DS n (DS (M1 * \\<rho> * adjoint M1)))", "by auto"], ["proof (state)\nthis:\n  denote_while_n_iter M0 M1 DS (Suc n) \\<rho> \\<in> carrier_mat m m \\<and>\n  partial_density_operator (denote_while_n_iter M0 M1 DS (Suc n) \\<rho>)\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma pdo_denote_while_n_iter:\n  \"\\<rho> \\<in> carrier_mat m m \\<Longrightarrow> partial_density_operator \\<rho> \\<Longrightarrow> M1 \\<in> carrier_mat m m \\<Longrightarrow> adjoint M1 * M1 \\<le>\\<^sub>L 1\\<^sub>m m\n  \\<Longrightarrow> (\\<And>\\<rho>. \\<rho> \\<in> carrier_mat m m \\<and> partial_density_operator \\<rho> \\<Longrightarrow> partial_density_operator (DS \\<rho>))\n  \\<Longrightarrow> (\\<And>\\<rho>. \\<rho> \\<in> carrier_mat m m \\<and> partial_density_operator \\<rho> \\<Longrightarrow> DS \\<rho> \\<in> carrier_mat m m)\n  \\<Longrightarrow> partial_density_operator (denote_while_n_iter M0 M1 DS n \\<rho>)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<rho> \\<in> carrier_mat m m; partial_density_operator \\<rho>;\n     M1 \\<in> carrier_mat m m; adjoint M1 * M1 \\<le>\\<^sub>L 1\\<^sub>m m;\n     \\<And>\\<rho>.\n        \\<rho> \\<in> carrier_mat m m \\<and>\n        partial_density_operator \\<rho> \\<Longrightarrow>\n        partial_density_operator (DS \\<rho>);\n     \\<And>\\<rho>.\n        \\<rho> \\<in> carrier_mat m m \\<and>\n        partial_density_operator \\<rho> \\<Longrightarrow>\n        DS \\<rho> \\<in> carrier_mat m m\\<rbrakk>\n    \\<Longrightarrow> partial_density_operator\n                       (denote_while_n_iter M0 M1 DS n \\<rho>)", "proof (induct n arbitrary: \\<rho>)"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>\\<rho>.\n       \\<lbrakk>\\<rho> \\<in> carrier_mat m m;\n        partial_density_operator \\<rho>; M1 \\<in> carrier_mat m m;\n        adjoint M1 * M1 \\<le>\\<^sub>L 1\\<^sub>m m;\n        \\<And>\\<rho>.\n           \\<rho> \\<in> carrier_mat m m \\<and>\n           partial_density_operator \\<rho> \\<Longrightarrow>\n           partial_density_operator (DS \\<rho>);\n        \\<And>\\<rho>.\n           \\<rho> \\<in> carrier_mat m m \\<and>\n           partial_density_operator \\<rho> \\<Longrightarrow>\n           DS \\<rho> \\<in> carrier_mat m m\\<rbrakk>\n       \\<Longrightarrow> partial_density_operator\n                          (denote_while_n_iter M0 M1 DS 0 \\<rho>)\n 2. \\<And>n \\<rho>.\n       \\<lbrakk>\\<And>\\<rho>.\n                   \\<lbrakk>\\<rho> \\<in> carrier_mat m m;\n                    partial_density_operator \\<rho>;\n                    M1 \\<in> carrier_mat m m;\n                    adjoint M1 * M1 \\<le>\\<^sub>L 1\\<^sub>m m;\n                    \\<And>\\<rho>.\n                       \\<rho> \\<in> carrier_mat m m \\<and>\n                       partial_density_operator \\<rho> \\<Longrightarrow>\n                       partial_density_operator (DS \\<rho>);\n                    \\<And>\\<rho>.\n                       \\<rho> \\<in> carrier_mat m m \\<and>\n                       partial_density_operator \\<rho> \\<Longrightarrow>\n                       DS \\<rho> \\<in> carrier_mat m m\\<rbrakk>\n                   \\<Longrightarrow> partial_density_operator\n(denote_while_n_iter M0 M1 DS n \\<rho>);\n        \\<rho> \\<in> carrier_mat m m; partial_density_operator \\<rho>;\n        M1 \\<in> carrier_mat m m; adjoint M1 * M1 \\<le>\\<^sub>L 1\\<^sub>m m;\n        \\<And>\\<rho>.\n           \\<rho> \\<in> carrier_mat m m \\<and>\n           partial_density_operator \\<rho> \\<Longrightarrow>\n           partial_density_operator (DS \\<rho>);\n        \\<And>\\<rho>.\n           \\<rho> \\<in> carrier_mat m m \\<and>\n           partial_density_operator \\<rho> \\<Longrightarrow>\n           DS \\<rho> \\<in> carrier_mat m m\\<rbrakk>\n       \\<Longrightarrow> partial_density_operator\n                          (denote_while_n_iter M0 M1 DS (Suc n) \\<rho>)", "case 0"], ["proof (state)\nthis:\n  \\<rho> \\<in> carrier_mat m m\n  partial_density_operator \\<rho>\n  M1 \\<in> carrier_mat m m\n  adjoint M1 * M1 \\<le>\\<^sub>L 1\\<^sub>m m\n  ?\\<rho> \\<in> carrier_mat m m \\<and>\n  partial_density_operator ?\\<rho> \\<Longrightarrow>\n  partial_density_operator (DS ?\\<rho>)\n  ?\\<rho> \\<in> carrier_mat m m \\<and>\n  partial_density_operator ?\\<rho> \\<Longrightarrow>\n  DS ?\\<rho> \\<in> carrier_mat m m\n\ngoal (2 subgoals):\n 1. \\<And>\\<rho>.\n       \\<lbrakk>\\<rho> \\<in> carrier_mat m m;\n        partial_density_operator \\<rho>; M1 \\<in> carrier_mat m m;\n        adjoint M1 * M1 \\<le>\\<^sub>L 1\\<^sub>m m;\n        \\<And>\\<rho>.\n           \\<rho> \\<in> carrier_mat m m \\<and>\n           partial_density_operator \\<rho> \\<Longrightarrow>\n           partial_density_operator (DS \\<rho>);\n        \\<And>\\<rho>.\n           \\<rho> \\<in> carrier_mat m m \\<and>\n           partial_density_operator \\<rho> \\<Longrightarrow>\n           DS \\<rho> \\<in> carrier_mat m m\\<rbrakk>\n       \\<Longrightarrow> partial_density_operator\n                          (denote_while_n_iter M0 M1 DS 0 \\<rho>)\n 2. \\<And>n \\<rho>.\n       \\<lbrakk>\\<And>\\<rho>.\n                   \\<lbrakk>\\<rho> \\<in> carrier_mat m m;\n                    partial_density_operator \\<rho>;\n                    M1 \\<in> carrier_mat m m;\n                    adjoint M1 * M1 \\<le>\\<^sub>L 1\\<^sub>m m;\n                    \\<And>\\<rho>.\n                       \\<rho> \\<in> carrier_mat m m \\<and>\n                       partial_density_operator \\<rho> \\<Longrightarrow>\n                       partial_density_operator (DS \\<rho>);\n                    \\<And>\\<rho>.\n                       \\<rho> \\<in> carrier_mat m m \\<and>\n                       partial_density_operator \\<rho> \\<Longrightarrow>\n                       DS \\<rho> \\<in> carrier_mat m m\\<rbrakk>\n                   \\<Longrightarrow> partial_density_operator\n(denote_while_n_iter M0 M1 DS n \\<rho>);\n        \\<rho> \\<in> carrier_mat m m; partial_density_operator \\<rho>;\n        M1 \\<in> carrier_mat m m; adjoint M1 * M1 \\<le>\\<^sub>L 1\\<^sub>m m;\n        \\<And>\\<rho>.\n           \\<rho> \\<in> carrier_mat m m \\<and>\n           partial_density_operator \\<rho> \\<Longrightarrow>\n           partial_density_operator (DS \\<rho>);\n        \\<And>\\<rho>.\n           \\<rho> \\<in> carrier_mat m m \\<and>\n           partial_density_operator \\<rho> \\<Longrightarrow>\n           DS \\<rho> \\<in> carrier_mat m m\\<rbrakk>\n       \\<Longrightarrow> partial_density_operator\n                          (denote_while_n_iter M0 M1 DS (Suc n) \\<rho>)", "then"], ["proof (chain)\npicking this:\n  \\<rho> \\<in> carrier_mat m m\n  partial_density_operator \\<rho>\n  M1 \\<in> carrier_mat m m\n  adjoint M1 * M1 \\<le>\\<^sub>L 1\\<^sub>m m\n  ?\\<rho> \\<in> carrier_mat m m \\<and>\n  partial_density_operator ?\\<rho> \\<Longrightarrow>\n  partial_density_operator (DS ?\\<rho>)\n  ?\\<rho> \\<in> carrier_mat m m \\<and>\n  partial_density_operator ?\\<rho> \\<Longrightarrow>\n  DS ?\\<rho> \\<in> carrier_mat m m", "show ?case"], ["proof (prove)\nusing this:\n  \\<rho> \\<in> carrier_mat m m\n  partial_density_operator \\<rho>\n  M1 \\<in> carrier_mat m m\n  adjoint M1 * M1 \\<le>\\<^sub>L 1\\<^sub>m m\n  ?\\<rho> \\<in> carrier_mat m m \\<and>\n  partial_density_operator ?\\<rho> \\<Longrightarrow>\n  partial_density_operator (DS ?\\<rho>)\n  ?\\<rho> \\<in> carrier_mat m m \\<and>\n  partial_density_operator ?\\<rho> \\<Longrightarrow>\n  DS ?\\<rho> \\<in> carrier_mat m m\n\ngoal (1 subgoal):\n 1. partial_density_operator (denote_while_n_iter M0 M1 DS 0 \\<rho>)", "unfolding denote_while_n_iter.simps"], ["proof (prove)\nusing this:\n  \\<rho> \\<in> carrier_mat m m\n  partial_density_operator \\<rho>\n  M1 \\<in> carrier_mat m m\n  adjoint M1 * M1 \\<le>\\<^sub>L 1\\<^sub>m m\n  ?\\<rho> \\<in> carrier_mat m m \\<and>\n  partial_density_operator ?\\<rho> \\<Longrightarrow>\n  partial_density_operator (DS ?\\<rho>)\n  ?\\<rho> \\<in> carrier_mat m m \\<and>\n  partial_density_operator ?\\<rho> \\<Longrightarrow>\n  DS ?\\<rho> \\<in> carrier_mat m m\n\ngoal (1 subgoal):\n 1. partial_density_operator \\<rho>", "by auto"], ["proof (state)\nthis:\n  partial_density_operator (denote_while_n_iter M0 M1 DS 0 \\<rho>)\n\ngoal (1 subgoal):\n 1. \\<And>n \\<rho>.\n       \\<lbrakk>\\<And>\\<rho>.\n                   \\<lbrakk>\\<rho> \\<in> carrier_mat m m;\n                    partial_density_operator \\<rho>;\n                    M1 \\<in> carrier_mat m m;\n                    adjoint M1 * M1 \\<le>\\<^sub>L 1\\<^sub>m m;\n                    \\<And>\\<rho>.\n                       \\<rho> \\<in> carrier_mat m m \\<and>\n                       partial_density_operator \\<rho> \\<Longrightarrow>\n                       partial_density_operator (DS \\<rho>);\n                    \\<And>\\<rho>.\n                       \\<rho> \\<in> carrier_mat m m \\<and>\n                       partial_density_operator \\<rho> \\<Longrightarrow>\n                       DS \\<rho> \\<in> carrier_mat m m\\<rbrakk>\n                   \\<Longrightarrow> partial_density_operator\n(denote_while_n_iter M0 M1 DS n \\<rho>);\n        \\<rho> \\<in> carrier_mat m m; partial_density_operator \\<rho>;\n        M1 \\<in> carrier_mat m m; adjoint M1 * M1 \\<le>\\<^sub>L 1\\<^sub>m m;\n        \\<And>\\<rho>.\n           \\<rho> \\<in> carrier_mat m m \\<and>\n           partial_density_operator \\<rho> \\<Longrightarrow>\n           partial_density_operator (DS \\<rho>);\n        \\<And>\\<rho>.\n           \\<rho> \\<in> carrier_mat m m \\<and>\n           partial_density_operator \\<rho> \\<Longrightarrow>\n           DS \\<rho> \\<in> carrier_mat m m\\<rbrakk>\n       \\<Longrightarrow> partial_density_operator\n                          (denote_while_n_iter M0 M1 DS (Suc n) \\<rho>)", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>n \\<rho>.\n       \\<lbrakk>\\<And>\\<rho>.\n                   \\<lbrakk>\\<rho> \\<in> carrier_mat m m;\n                    partial_density_operator \\<rho>;\n                    M1 \\<in> carrier_mat m m;\n                    adjoint M1 * M1 \\<le>\\<^sub>L 1\\<^sub>m m;\n                    \\<And>\\<rho>.\n                       \\<rho> \\<in> carrier_mat m m \\<and>\n                       partial_density_operator \\<rho> \\<Longrightarrow>\n                       partial_density_operator (DS \\<rho>);\n                    \\<And>\\<rho>.\n                       \\<rho> \\<in> carrier_mat m m \\<and>\n                       partial_density_operator \\<rho> \\<Longrightarrow>\n                       DS \\<rho> \\<in> carrier_mat m m\\<rbrakk>\n                   \\<Longrightarrow> partial_density_operator\n(denote_while_n_iter M0 M1 DS n \\<rho>);\n        \\<rho> \\<in> carrier_mat m m; partial_density_operator \\<rho>;\n        M1 \\<in> carrier_mat m m; adjoint M1 * M1 \\<le>\\<^sub>L 1\\<^sub>m m;\n        \\<And>\\<rho>.\n           \\<rho> \\<in> carrier_mat m m \\<and>\n           partial_density_operator \\<rho> \\<Longrightarrow>\n           partial_density_operator (DS \\<rho>);\n        \\<And>\\<rho>.\n           \\<rho> \\<in> carrier_mat m m \\<and>\n           partial_density_operator \\<rho> \\<Longrightarrow>\n           DS \\<rho> \\<in> carrier_mat m m\\<rbrakk>\n       \\<Longrightarrow> partial_density_operator\n                          (denote_while_n_iter M0 M1 DS (Suc n) \\<rho>)", "case (Suc n)"], ["proof (state)\nthis:\n  \\<lbrakk>?\\<rho> \\<in> carrier_mat m m; partial_density_operator ?\\<rho>;\n   M1 \\<in> carrier_mat m m; adjoint M1 * M1 \\<le>\\<^sub>L 1\\<^sub>m m;\n   \\<And>\\<rho>.\n      \\<rho> \\<in> carrier_mat m m \\<and>\n      partial_density_operator \\<rho> \\<Longrightarrow>\n      partial_density_operator (DS \\<rho>);\n   \\<And>\\<rho>.\n      \\<rho> \\<in> carrier_mat m m \\<and>\n      partial_density_operator \\<rho> \\<Longrightarrow>\n      DS \\<rho> \\<in> carrier_mat m m\\<rbrakk>\n  \\<Longrightarrow> partial_density_operator\n                     (denote_while_n_iter M0 M1 DS n ?\\<rho>)\n  \\<rho> \\<in> carrier_mat m m\n  partial_density_operator \\<rho>\n  M1 \\<in> carrier_mat m m\n  adjoint M1 * M1 \\<le>\\<^sub>L 1\\<^sub>m m\n  ?\\<rho> \\<in> carrier_mat m m \\<and>\n  partial_density_operator ?\\<rho> \\<Longrightarrow>\n  partial_density_operator (DS ?\\<rho>)\n  ?\\<rho> \\<in> carrier_mat m m \\<and>\n  partial_density_operator ?\\<rho> \\<Longrightarrow>\n  DS ?\\<rho> \\<in> carrier_mat m m\n\ngoal (1 subgoal):\n 1. \\<And>n \\<rho>.\n       \\<lbrakk>\\<And>\\<rho>.\n                   \\<lbrakk>\\<rho> \\<in> carrier_mat m m;\n                    partial_density_operator \\<rho>;\n                    M1 \\<in> carrier_mat m m;\n                    adjoint M1 * M1 \\<le>\\<^sub>L 1\\<^sub>m m;\n                    \\<And>\\<rho>.\n                       \\<rho> \\<in> carrier_mat m m \\<and>\n                       partial_density_operator \\<rho> \\<Longrightarrow>\n                       partial_density_operator (DS \\<rho>);\n                    \\<And>\\<rho>.\n                       \\<rho> \\<in> carrier_mat m m \\<and>\n                       partial_density_operator \\<rho> \\<Longrightarrow>\n                       DS \\<rho> \\<in> carrier_mat m m\\<rbrakk>\n                   \\<Longrightarrow> partial_density_operator\n(denote_while_n_iter M0 M1 DS n \\<rho>);\n        \\<rho> \\<in> carrier_mat m m; partial_density_operator \\<rho>;\n        M1 \\<in> carrier_mat m m; adjoint M1 * M1 \\<le>\\<^sub>L 1\\<^sub>m m;\n        \\<And>\\<rho>.\n           \\<rho> \\<in> carrier_mat m m \\<and>\n           partial_density_operator \\<rho> \\<Longrightarrow>\n           partial_density_operator (DS \\<rho>);\n        \\<And>\\<rho>.\n           \\<rho> \\<in> carrier_mat m m \\<and>\n           partial_density_operator \\<rho> \\<Longrightarrow>\n           DS \\<rho> \\<in> carrier_mat m m\\<rbrakk>\n       \\<Longrightarrow> partial_density_operator\n                          (denote_while_n_iter M0 M1 DS (Suc n) \\<rho>)", "have \"partial_density_operator (M1 * \\<rho> * adjoint M1)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. partial_density_operator (M1 * \\<rho> * adjoint M1)", "using Suc pdo_close_under_measurement"], ["proof (prove)\nusing this:\n  \\<lbrakk>?\\<rho> \\<in> carrier_mat m m; partial_density_operator ?\\<rho>;\n   M1 \\<in> carrier_mat m m; adjoint M1 * M1 \\<le>\\<^sub>L 1\\<^sub>m m;\n   \\<And>\\<rho>.\n      \\<rho> \\<in> carrier_mat m m \\<and>\n      partial_density_operator \\<rho> \\<Longrightarrow>\n      partial_density_operator (DS \\<rho>);\n   \\<And>\\<rho>.\n      \\<rho> \\<in> carrier_mat m m \\<and>\n      partial_density_operator \\<rho> \\<Longrightarrow>\n      DS \\<rho> \\<in> carrier_mat m m\\<rbrakk>\n  \\<Longrightarrow> partial_density_operator\n                     (denote_while_n_iter M0 M1 DS n ?\\<rho>)\n  \\<rho> \\<in> carrier_mat m m\n  partial_density_operator \\<rho>\n  M1 \\<in> carrier_mat m m\n  adjoint M1 * M1 \\<le>\\<^sub>L 1\\<^sub>m m\n  ?\\<rho> \\<in> carrier_mat m m \\<and>\n  partial_density_operator ?\\<rho> \\<Longrightarrow>\n  partial_density_operator (DS ?\\<rho>)\n  ?\\<rho> \\<in> carrier_mat m m \\<and>\n  partial_density_operator ?\\<rho> \\<Longrightarrow>\n  DS ?\\<rho> \\<in> carrier_mat m m\n  \\<lbrakk>?M \\<in> carrier_mat ?n ?n; ?\\<rho> \\<in> carrier_mat ?n ?n;\n   partial_density_operator ?\\<rho>;\n   adjoint ?M * ?M \\<le>\\<^sub>L 1\\<^sub>m ?n\\<rbrakk>\n  \\<Longrightarrow> partial_density_operator (?M * ?\\<rho> * adjoint ?M)\n\ngoal (1 subgoal):\n 1. partial_density_operator (M1 * \\<rho> * adjoint M1)", "by auto"], ["proof (state)\nthis:\n  partial_density_operator (M1 * \\<rho> * adjoint M1)\n\ngoal (1 subgoal):\n 1. \\<And>n \\<rho>.\n       \\<lbrakk>\\<And>\\<rho>.\n                   \\<lbrakk>\\<rho> \\<in> carrier_mat m m;\n                    partial_density_operator \\<rho>;\n                    M1 \\<in> carrier_mat m m;\n                    adjoint M1 * M1 \\<le>\\<^sub>L 1\\<^sub>m m;\n                    \\<And>\\<rho>.\n                       \\<rho> \\<in> carrier_mat m m \\<and>\n                       partial_density_operator \\<rho> \\<Longrightarrow>\n                       partial_density_operator (DS \\<rho>);\n                    \\<And>\\<rho>.\n                       \\<rho> \\<in> carrier_mat m m \\<and>\n                       partial_density_operator \\<rho> \\<Longrightarrow>\n                       DS \\<rho> \\<in> carrier_mat m m\\<rbrakk>\n                   \\<Longrightarrow> partial_density_operator\n(denote_while_n_iter M0 M1 DS n \\<rho>);\n        \\<rho> \\<in> carrier_mat m m; partial_density_operator \\<rho>;\n        M1 \\<in> carrier_mat m m; adjoint M1 * M1 \\<le>\\<^sub>L 1\\<^sub>m m;\n        \\<And>\\<rho>.\n           \\<rho> \\<in> carrier_mat m m \\<and>\n           partial_density_operator \\<rho> \\<Longrightarrow>\n           partial_density_operator (DS \\<rho>);\n        \\<And>\\<rho>.\n           \\<rho> \\<in> carrier_mat m m \\<and>\n           partial_density_operator \\<rho> \\<Longrightarrow>\n           DS \\<rho> \\<in> carrier_mat m m\\<rbrakk>\n       \\<Longrightarrow> partial_density_operator\n                          (denote_while_n_iter M0 M1 DS (Suc n) \\<rho>)", "moreover"], ["proof (state)\nthis:\n  partial_density_operator (M1 * \\<rho> * adjoint M1)\n\ngoal (1 subgoal):\n 1. \\<And>n \\<rho>.\n       \\<lbrakk>\\<And>\\<rho>.\n                   \\<lbrakk>\\<rho> \\<in> carrier_mat m m;\n                    partial_density_operator \\<rho>;\n                    M1 \\<in> carrier_mat m m;\n                    adjoint M1 * M1 \\<le>\\<^sub>L 1\\<^sub>m m;\n                    \\<And>\\<rho>.\n                       \\<rho> \\<in> carrier_mat m m \\<and>\n                       partial_density_operator \\<rho> \\<Longrightarrow>\n                       partial_density_operator (DS \\<rho>);\n                    \\<And>\\<rho>.\n                       \\<rho> \\<in> carrier_mat m m \\<and>\n                       partial_density_operator \\<rho> \\<Longrightarrow>\n                       DS \\<rho> \\<in> carrier_mat m m\\<rbrakk>\n                   \\<Longrightarrow> partial_density_operator\n(denote_while_n_iter M0 M1 DS n \\<rho>);\n        \\<rho> \\<in> carrier_mat m m; partial_density_operator \\<rho>;\n        M1 \\<in> carrier_mat m m; adjoint M1 * M1 \\<le>\\<^sub>L 1\\<^sub>m m;\n        \\<And>\\<rho>.\n           \\<rho> \\<in> carrier_mat m m \\<and>\n           partial_density_operator \\<rho> \\<Longrightarrow>\n           partial_density_operator (DS \\<rho>);\n        \\<And>\\<rho>.\n           \\<rho> \\<in> carrier_mat m m \\<and>\n           partial_density_operator \\<rho> \\<Longrightarrow>\n           DS \\<rho> \\<in> carrier_mat m m\\<rbrakk>\n       \\<Longrightarrow> partial_density_operator\n                          (denote_while_n_iter M0 M1 DS (Suc n) \\<rho>)", "have \"M1 * \\<rho> * adjoint M1 \\<in> carrier_mat m m\""], ["proof (prove)\ngoal (1 subgoal):\n 1. M1 * \\<rho> * adjoint M1 \\<in> carrier_mat m m", "using Suc"], ["proof (prove)\nusing this:\n  \\<lbrakk>?\\<rho> \\<in> carrier_mat m m; partial_density_operator ?\\<rho>;\n   M1 \\<in> carrier_mat m m; adjoint M1 * M1 \\<le>\\<^sub>L 1\\<^sub>m m;\n   \\<And>\\<rho>.\n      \\<rho> \\<in> carrier_mat m m \\<and>\n      partial_density_operator \\<rho> \\<Longrightarrow>\n      partial_density_operator (DS \\<rho>);\n   \\<And>\\<rho>.\n      \\<rho> \\<in> carrier_mat m m \\<and>\n      partial_density_operator \\<rho> \\<Longrightarrow>\n      DS \\<rho> \\<in> carrier_mat m m\\<rbrakk>\n  \\<Longrightarrow> partial_density_operator\n                     (denote_while_n_iter M0 M1 DS n ?\\<rho>)\n  \\<rho> \\<in> carrier_mat m m\n  partial_density_operator \\<rho>\n  M1 \\<in> carrier_mat m m\n  adjoint M1 * M1 \\<le>\\<^sub>L 1\\<^sub>m m\n  ?\\<rho> \\<in> carrier_mat m m \\<and>\n  partial_density_operator ?\\<rho> \\<Longrightarrow>\n  partial_density_operator (DS ?\\<rho>)\n  ?\\<rho> \\<in> carrier_mat m m \\<and>\n  partial_density_operator ?\\<rho> \\<Longrightarrow>\n  DS ?\\<rho> \\<in> carrier_mat m m\n\ngoal (1 subgoal):\n 1. M1 * \\<rho> * adjoint M1 \\<in> carrier_mat m m", "by auto"], ["proof (state)\nthis:\n  M1 * \\<rho> * adjoint M1 \\<in> carrier_mat m m\n\ngoal (1 subgoal):\n 1. \\<And>n \\<rho>.\n       \\<lbrakk>\\<And>\\<rho>.\n                   \\<lbrakk>\\<rho> \\<in> carrier_mat m m;\n                    partial_density_operator \\<rho>;\n                    M1 \\<in> carrier_mat m m;\n                    adjoint M1 * M1 \\<le>\\<^sub>L 1\\<^sub>m m;\n                    \\<And>\\<rho>.\n                       \\<rho> \\<in> carrier_mat m m \\<and>\n                       partial_density_operator \\<rho> \\<Longrightarrow>\n                       partial_density_operator (DS \\<rho>);\n                    \\<And>\\<rho>.\n                       \\<rho> \\<in> carrier_mat m m \\<and>\n                       partial_density_operator \\<rho> \\<Longrightarrow>\n                       DS \\<rho> \\<in> carrier_mat m m\\<rbrakk>\n                   \\<Longrightarrow> partial_density_operator\n(denote_while_n_iter M0 M1 DS n \\<rho>);\n        \\<rho> \\<in> carrier_mat m m; partial_density_operator \\<rho>;\n        M1 \\<in> carrier_mat m m; adjoint M1 * M1 \\<le>\\<^sub>L 1\\<^sub>m m;\n        \\<And>\\<rho>.\n           \\<rho> \\<in> carrier_mat m m \\<and>\n           partial_density_operator \\<rho> \\<Longrightarrow>\n           partial_density_operator (DS \\<rho>);\n        \\<And>\\<rho>.\n           \\<rho> \\<in> carrier_mat m m \\<and>\n           partial_density_operator \\<rho> \\<Longrightarrow>\n           DS \\<rho> \\<in> carrier_mat m m\\<rbrakk>\n       \\<Longrightarrow> partial_density_operator\n                          (denote_while_n_iter M0 M1 DS (Suc n) \\<rho>)", "ultimately"], ["proof (chain)\npicking this:\n  partial_density_operator (M1 * \\<rho> * adjoint M1)\n  M1 * \\<rho> * adjoint M1 \\<in> carrier_mat m m", "have p: \"partial_density_operator (DS (M1 * \\<rho> * adjoint M1))\" and d: \"DS (M1 * \\<rho> * adjoint M1) \\<in> carrier_mat m m \""], ["proof (prove)\nusing this:\n  partial_density_operator (M1 * \\<rho> * adjoint M1)\n  M1 * \\<rho> * adjoint M1 \\<in> carrier_mat m m\n\ngoal (1 subgoal):\n 1. partial_density_operator (DS (M1 * \\<rho> * adjoint M1)) &&&\n    DS (M1 * \\<rho> * adjoint M1) \\<in> carrier_mat m m", "using Suc"], ["proof (prove)\nusing this:\n  partial_density_operator (M1 * \\<rho> * adjoint M1)\n  M1 * \\<rho> * adjoint M1 \\<in> carrier_mat m m\n  \\<lbrakk>?\\<rho> \\<in> carrier_mat m m; partial_density_operator ?\\<rho>;\n   M1 \\<in> carrier_mat m m; adjoint M1 * M1 \\<le>\\<^sub>L 1\\<^sub>m m;\n   \\<And>\\<rho>.\n      \\<rho> \\<in> carrier_mat m m \\<and>\n      partial_density_operator \\<rho> \\<Longrightarrow>\n      partial_density_operator (DS \\<rho>);\n   \\<And>\\<rho>.\n      \\<rho> \\<in> carrier_mat m m \\<and>\n      partial_density_operator \\<rho> \\<Longrightarrow>\n      DS \\<rho> \\<in> carrier_mat m m\\<rbrakk>\n  \\<Longrightarrow> partial_density_operator\n                     (denote_while_n_iter M0 M1 DS n ?\\<rho>)\n  \\<rho> \\<in> carrier_mat m m\n  partial_density_operator \\<rho>\n  M1 \\<in> carrier_mat m m\n  adjoint M1 * M1 \\<le>\\<^sub>L 1\\<^sub>m m\n  ?\\<rho> \\<in> carrier_mat m m \\<and>\n  partial_density_operator ?\\<rho> \\<Longrightarrow>\n  partial_density_operator (DS ?\\<rho>)\n  ?\\<rho> \\<in> carrier_mat m m \\<and>\n  partial_density_operator ?\\<rho> \\<Longrightarrow>\n  DS ?\\<rho> \\<in> carrier_mat m m\n\ngoal (1 subgoal):\n 1. partial_density_operator (DS (M1 * \\<rho> * adjoint M1)) &&&\n    DS (M1 * \\<rho> * adjoint M1) \\<in> carrier_mat m m", "by auto"], ["proof (state)\nthis:\n  partial_density_operator (DS (M1 * \\<rho> * adjoint M1))\n  DS (M1 * \\<rho> * adjoint M1) \\<in> carrier_mat m m\n\ngoal (1 subgoal):\n 1. \\<And>n \\<rho>.\n       \\<lbrakk>\\<And>\\<rho>.\n                   \\<lbrakk>\\<rho> \\<in> carrier_mat m m;\n                    partial_density_operator \\<rho>;\n                    M1 \\<in> carrier_mat m m;\n                    adjoint M1 * M1 \\<le>\\<^sub>L 1\\<^sub>m m;\n                    \\<And>\\<rho>.\n                       \\<rho> \\<in> carrier_mat m m \\<and>\n                       partial_density_operator \\<rho> \\<Longrightarrow>\n                       partial_density_operator (DS \\<rho>);\n                    \\<And>\\<rho>.\n                       \\<rho> \\<in> carrier_mat m m \\<and>\n                       partial_density_operator \\<rho> \\<Longrightarrow>\n                       DS \\<rho> \\<in> carrier_mat m m\\<rbrakk>\n                   \\<Longrightarrow> partial_density_operator\n(denote_while_n_iter M0 M1 DS n \\<rho>);\n        \\<rho> \\<in> carrier_mat m m; partial_density_operator \\<rho>;\n        M1 \\<in> carrier_mat m m; adjoint M1 * M1 \\<le>\\<^sub>L 1\\<^sub>m m;\n        \\<And>\\<rho>.\n           \\<rho> \\<in> carrier_mat m m \\<and>\n           partial_density_operator \\<rho> \\<Longrightarrow>\n           partial_density_operator (DS \\<rho>);\n        \\<And>\\<rho>.\n           \\<rho> \\<in> carrier_mat m m \\<and>\n           partial_density_operator \\<rho> \\<Longrightarrow>\n           DS \\<rho> \\<in> carrier_mat m m\\<rbrakk>\n       \\<Longrightarrow> partial_density_operator\n                          (denote_while_n_iter M0 M1 DS (Suc n) \\<rho>)", "show ?case"], ["proof (prove)\ngoal (1 subgoal):\n 1. partial_density_operator (denote_while_n_iter M0 M1 DS (Suc n) \\<rho>)", "unfolding denote_while_n_iter.simps"], ["proof (prove)\ngoal (1 subgoal):\n 1. partial_density_operator\n     (denote_while_n_iter M0 M1 DS n (DS (M1 * \\<rho> * adjoint M1)))", "using Suc(1)[OF d p Suc(4) Suc(5)] Suc"], ["proof (prove)\nusing this:\n  \\<lbrakk>\\<And>\\<rho>.\n              \\<rho> \\<in> carrier_mat m m \\<and>\n              partial_density_operator \\<rho> \\<Longrightarrow>\n              partial_density_operator (DS \\<rho>);\n   \\<And>\\<rho>.\n      \\<rho> \\<in> carrier_mat m m \\<and>\n      partial_density_operator \\<rho> \\<Longrightarrow>\n      DS \\<rho> \\<in> carrier_mat m m\\<rbrakk>\n  \\<Longrightarrow> partial_density_operator\n                     (denote_while_n_iter M0 M1 DS n\n                       (DS (M1 * \\<rho> * adjoint M1)))\n  \\<lbrakk>?\\<rho> \\<in> carrier_mat m m; partial_density_operator ?\\<rho>;\n   M1 \\<in> carrier_mat m m; adjoint M1 * M1 \\<le>\\<^sub>L 1\\<^sub>m m;\n   \\<And>\\<rho>.\n      \\<rho> \\<in> carrier_mat m m \\<and>\n      partial_density_operator \\<rho> \\<Longrightarrow>\n      partial_density_operator (DS \\<rho>);\n   \\<And>\\<rho>.\n      \\<rho> \\<in> carrier_mat m m \\<and>\n      partial_density_operator \\<rho> \\<Longrightarrow>\n      DS \\<rho> \\<in> carrier_mat m m\\<rbrakk>\n  \\<Longrightarrow> partial_density_operator\n                     (denote_while_n_iter M0 M1 DS n ?\\<rho>)\n  \\<rho> \\<in> carrier_mat m m\n  partial_density_operator \\<rho>\n  M1 \\<in> carrier_mat m m\n  adjoint M1 * M1 \\<le>\\<^sub>L 1\\<^sub>m m\n  ?\\<rho> \\<in> carrier_mat m m \\<and>\n  partial_density_operator ?\\<rho> \\<Longrightarrow>\n  partial_density_operator (DS ?\\<rho>)\n  ?\\<rho> \\<in> carrier_mat m m \\<and>\n  partial_density_operator ?\\<rho> \\<Longrightarrow>\n  DS ?\\<rho> \\<in> carrier_mat m m\n\ngoal (1 subgoal):\n 1. partial_density_operator\n     (denote_while_n_iter M0 M1 DS n (DS (M1 * \\<rho> * adjoint M1)))", "by auto"], ["proof (state)\nthis:\n  partial_density_operator (denote_while_n_iter M0 M1 DS (Suc n) \\<rho>)\n\ngoal:\nNo subgoals!", "qed"], ["", "text \\<open>Denotation of while is simply the infinite sum of denote\\_while\\_n\\<close>"], ["", "definition denote_while :: \"complex mat \\<Rightarrow> complex mat \\<Rightarrow> (state \\<Rightarrow> state) \\<Rightarrow> state \\<Rightarrow> state\" where\n  \"denote_while M0 M1 DS \\<rho> = matrix_inf_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>)\""], ["", "lemma denote_while_n_dim:\n  assumes \"\\<rho> \\<in> carrier_mat d d\"\n    \"M0 \\<in> carrier_mat d d\"\n    \"M1 \\<in> carrier_mat d d\"\n    \"partial_density_operator \\<rho>\"\n    \"\\<And>\\<rho>'. \\<rho>' \\<in> carrier_mat d d \\<Longrightarrow> partial_density_operator \\<rho>'  \\<Longrightarrow> positive (DS \\<rho>') \\<and> trace (DS \\<rho>') \\<le> trace \\<rho>' \\<and> DS \\<rho>' \\<in> carrier_mat d d\"\n   shows \"denote_while_n M0 M1 DS n \\<rho>  \\<in> carrier_mat d d\""], ["proof (prove)\ngoal (1 subgoal):\n 1. denote_while_n M0 M1 DS n \\<rho> \\<in> carrier_mat d d", "proof (induction n arbitrary: \\<rho>)"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>\\<rho>. denote_while_n M0 M1 DS 0 \\<rho> \\<in> carrier_mat d d\n 2. \\<And>n \\<rho>.\n       (\\<And>\\<rho>.\n           denote_while_n M0 M1 DS n \\<rho>\n           \\<in> carrier_mat d d) \\<Longrightarrow>\n       denote_while_n M0 M1 DS (Suc n) \\<rho> \\<in> carrier_mat d d", "case 0"], ["proof (state)\nthis:\n  \n\ngoal (2 subgoals):\n 1. \\<And>\\<rho>. denote_while_n M0 M1 DS 0 \\<rho> \\<in> carrier_mat d d\n 2. \\<And>n \\<rho>.\n       (\\<And>\\<rho>.\n           denote_while_n M0 M1 DS n \\<rho>\n           \\<in> carrier_mat d d) \\<Longrightarrow>\n       denote_while_n M0 M1 DS (Suc n) \\<rho> \\<in> carrier_mat d d", "then"], ["proof (chain)\npicking this:", "show ?case"], ["proof (prove)\ngoal (1 subgoal):\n 1. denote_while_n M0 M1 DS 0 \\<rho> \\<in> carrier_mat d d", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. denote_while_n M0 M1 DS 0 \\<rho> \\<in> carrier_mat d d", "have \"M0 * \\<rho> * adjoint M0 \\<in> carrier_mat d d\""], ["proof (prove)\ngoal (1 subgoal):\n 1. M0 * \\<rho> * adjoint M0 \\<in> carrier_mat d d", "using assms assoc_mult_mat"], ["proof (prove)\nusing this:\n  \\<rho> \\<in> carrier_mat d d\n  M0 \\<in> carrier_mat d d\n  M1 \\<in> carrier_mat d d\n  partial_density_operator \\<rho>\n  \\<lbrakk>?\\<rho>' \\<in> carrier_mat d d;\n   partial_density_operator ?\\<rho>'\\<rbrakk>\n  \\<Longrightarrow> positive (DS ?\\<rho>') \\<and>\n                    trace (DS ?\\<rho>') \\<le> trace ?\\<rho>' \\<and>\n                    DS ?\\<rho>' \\<in> carrier_mat d d\n  \\<lbrakk>?A \\<in> carrier_mat ?n\\<^sub>1 ?n\\<^sub>2;\n   ?B \\<in> carrier_mat ?n\\<^sub>2 ?n\\<^sub>3;\n   ?C \\<in> carrier_mat ?n\\<^sub>3 ?n\\<^sub>4\\<rbrakk>\n  \\<Longrightarrow> ?A * ?B * ?C = ?A * (?B * ?C)\n\ngoal (1 subgoal):\n 1. M0 * \\<rho> * adjoint M0 \\<in> carrier_mat d d", "by auto"], ["proof (state)\nthis:\n  M0 * \\<rho> * adjoint M0 \\<in> carrier_mat d d\n\ngoal (1 subgoal):\n 1. denote_while_n M0 M1 DS 0 \\<rho> \\<in> carrier_mat d d", "then"], ["proof (chain)\npicking this:\n  M0 * \\<rho> * adjoint M0 \\<in> carrier_mat d d", "show ?thesis"], ["proof (prove)\nusing this:\n  M0 * \\<rho> * adjoint M0 \\<in> carrier_mat d d\n\ngoal (1 subgoal):\n 1. denote_while_n M0 M1 DS 0 \\<rho> \\<in> carrier_mat d d", "by auto"], ["proof (state)\nthis:\n  denote_while_n M0 M1 DS 0 \\<rho> \\<in> carrier_mat d d\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  denote_while_n M0 M1 DS 0 \\<rho> \\<in> carrier_mat d d\n\ngoal (1 subgoal):\n 1. \\<And>n \\<rho>.\n       (\\<And>\\<rho>.\n           denote_while_n M0 M1 DS n \\<rho>\n           \\<in> carrier_mat d d) \\<Longrightarrow>\n       denote_while_n M0 M1 DS (Suc n) \\<rho> \\<in> carrier_mat d d", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>n \\<rho>.\n       (\\<And>\\<rho>.\n           denote_while_n M0 M1 DS n \\<rho>\n           \\<in> carrier_mat d d) \\<Longrightarrow>\n       denote_while_n M0 M1 DS (Suc n) \\<rho> \\<in> carrier_mat d d", "case (Suc n)"], ["proof (state)\nthis:\n  denote_while_n M0 M1 DS n ?\\<rho> \\<in> carrier_mat d d\n\ngoal (1 subgoal):\n 1. \\<And>n \\<rho>.\n       (\\<And>\\<rho>.\n           denote_while_n M0 M1 DS n \\<rho>\n           \\<in> carrier_mat d d) \\<Longrightarrow>\n       denote_while_n M0 M1 DS (Suc n) \\<rho> \\<in> carrier_mat d d", "then"], ["proof (chain)\npicking this:\n  denote_while_n M0 M1 DS n ?\\<rho> \\<in> carrier_mat d d", "show ?case"], ["proof (prove)\nusing this:\n  denote_while_n M0 M1 DS n ?\\<rho> \\<in> carrier_mat d d\n\ngoal (1 subgoal):\n 1. denote_while_n M0 M1 DS (Suc n) \\<rho> \\<in> carrier_mat d d", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. (\\<And>\\<rho>.\n        denote_while_n M0 M1 DS n \\<rho>\n        \\<in> carrier_mat d d) \\<Longrightarrow>\n    denote_while_n M0 M1 DS (Suc n) \\<rho> \\<in> carrier_mat d d", "have \"denote_while_n M0 M1 DS n (DS (M1 * \\<rho> * adjoint M1)) \\<in> carrier_mat d d\""], ["proof (prove)\ngoal (1 subgoal):\n 1. denote_while_n M0 M1 DS n (DS (M1 * \\<rho> * adjoint M1))\n    \\<in> carrier_mat d d", "using Suc assms"], ["proof (prove)\nusing this:\n  denote_while_n M0 M1 DS n ?\\<rho> \\<in> carrier_mat d d\n  \\<rho> \\<in> carrier_mat d d\n  M0 \\<in> carrier_mat d d\n  M1 \\<in> carrier_mat d d\n  partial_density_operator \\<rho>\n  \\<lbrakk>?\\<rho>' \\<in> carrier_mat d d;\n   partial_density_operator ?\\<rho>'\\<rbrakk>\n  \\<Longrightarrow> positive (DS ?\\<rho>') \\<and>\n                    trace (DS ?\\<rho>') \\<le> trace ?\\<rho>' \\<and>\n                    DS ?\\<rho>' \\<in> carrier_mat d d\n\ngoal (1 subgoal):\n 1. denote_while_n M0 M1 DS n (DS (M1 * \\<rho> * adjoint M1))\n    \\<in> carrier_mat d d", "by auto"], ["proof (state)\nthis:\n  denote_while_n M0 M1 DS n (DS (M1 * \\<rho> * adjoint M1))\n  \\<in> carrier_mat d d\n\ngoal (1 subgoal):\n 1. (\\<And>\\<rho>.\n        denote_while_n M0 M1 DS n \\<rho>\n        \\<in> carrier_mat d d) \\<Longrightarrow>\n    denote_while_n M0 M1 DS (Suc n) \\<rho> \\<in> carrier_mat d d", "then"], ["proof (chain)\npicking this:\n  denote_while_n M0 M1 DS n (DS (M1 * \\<rho> * adjoint M1))\n  \\<in> carrier_mat d d", "show ?thesis"], ["proof (prove)\nusing this:\n  denote_while_n M0 M1 DS n (DS (M1 * \\<rho> * adjoint M1))\n  \\<in> carrier_mat d d\n\ngoal (1 subgoal):\n 1. denote_while_n M0 M1 DS (Suc n) \\<rho> \\<in> carrier_mat d d", "by auto"], ["proof (state)\nthis:\n  denote_while_n M0 M1 DS (Suc n) \\<rho> \\<in> carrier_mat d d\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  denote_while_n M0 M1 DS (Suc n) \\<rho> \\<in> carrier_mat d d\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma denote_while_n_sum_dim:\n  assumes \"\\<rho> \\<in> carrier_mat d d\"\n    \"M0 \\<in> carrier_mat d d\"\n    \"M1 \\<in> carrier_mat d d\"\n    \"partial_density_operator \\<rho>\"\n    \"\\<And>\\<rho>'. \\<rho>' \\<in> carrier_mat d d \\<Longrightarrow> partial_density_operator \\<rho>'  \\<Longrightarrow> positive (DS \\<rho>') \\<and> trace (DS \\<rho>') \\<le> trace \\<rho>' \\<and> DS \\<rho>' \\<in> carrier_mat d d\"\n  shows \"matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>) n \\<in> carrier_mat d d\""], ["proof (prove)\ngoal (1 subgoal):\n 1. matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>) n\n    \\<in> carrier_mat d d", "proof (induct n)"], ["proof (state)\ngoal (2 subgoals):\n 1. matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>) 0\n    \\<in> carrier_mat d d\n 2. \\<And>n.\n       matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>) n\n       \\<in> carrier_mat d d \\<Longrightarrow>\n       matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>) (Suc n)\n       \\<in> carrier_mat d d", "case 0"], ["proof (state)\nthis:\n  \n\ngoal (2 subgoals):\n 1. matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>) 0\n    \\<in> carrier_mat d d\n 2. \\<And>n.\n       matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>) n\n       \\<in> carrier_mat d d \\<Longrightarrow>\n       matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>) (Suc n)\n       \\<in> carrier_mat d d", "then"], ["proof (chain)\npicking this:", "show ?case"], ["proof (prove)\ngoal (1 subgoal):\n 1. matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>) 0\n    \\<in> carrier_mat d d", "by auto"], ["proof (state)\nthis:\n  matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>) 0\n  \\<in> carrier_mat d d\n\ngoal (1 subgoal):\n 1. \\<And>n.\n       matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>) n\n       \\<in> carrier_mat d d \\<Longrightarrow>\n       matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>) (Suc n)\n       \\<in> carrier_mat d d", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>n.\n       matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>) n\n       \\<in> carrier_mat d d \\<Longrightarrow>\n       matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>) (Suc n)\n       \\<in> carrier_mat d d", "case (Suc n)"], ["proof (state)\nthis:\n  matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>) n\n  \\<in> carrier_mat d d\n\ngoal (1 subgoal):\n 1. \\<And>n.\n       matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>) n\n       \\<in> carrier_mat d d \\<Longrightarrow>\n       matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>) (Suc n)\n       \\<in> carrier_mat d d", "then"], ["proof (chain)\npicking this:\n  matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>) n\n  \\<in> carrier_mat d d", "show ?case"], ["proof (prove)\nusing this:\n  matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>) n\n  \\<in> carrier_mat d d\n\ngoal (1 subgoal):\n 1. matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>) (Suc n)\n    \\<in> carrier_mat d d", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>) n\n    \\<in> carrier_mat d d \\<Longrightarrow>\n    matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>) (Suc n)\n    \\<in> carrier_mat d d", "have \" denote_while_n M0 M1 DS n \\<rho> \\<in> carrier_mat d d\""], ["proof (prove)\ngoal (1 subgoal):\n 1. denote_while_n M0 M1 DS n \\<rho> \\<in> carrier_mat d d", "using denote_while_n_dim assms"], ["proof (prove)\nusing this:\n  \\<lbrakk>?\\<rho> \\<in> carrier_mat d d; ?M0.0 \\<in> carrier_mat d d;\n   ?M1.0 \\<in> carrier_mat d d; partial_density_operator ?\\<rho>;\n   \\<And>\\<rho>'.\n      \\<lbrakk>\\<rho>' \\<in> carrier_mat d d;\n       partial_density_operator \\<rho>'\\<rbrakk>\n      \\<Longrightarrow> positive (?DS \\<rho>') \\<and>\n                        trace (?DS \\<rho>') \\<le> trace \\<rho>' \\<and>\n                        ?DS \\<rho>' \\<in> carrier_mat d d\\<rbrakk>\n  \\<Longrightarrow> denote_while_n ?M0.0 ?M1.0 ?DS ?n ?\\<rho>\n                    \\<in> carrier_mat d d\n  \\<rho> \\<in> carrier_mat d d\n  M0 \\<in> carrier_mat d d\n  M1 \\<in> carrier_mat d d\n  partial_density_operator \\<rho>\n  \\<lbrakk>?\\<rho>' \\<in> carrier_mat d d;\n   partial_density_operator ?\\<rho>'\\<rbrakk>\n  \\<Longrightarrow> positive (DS ?\\<rho>') \\<and>\n                    trace (DS ?\\<rho>') \\<le> trace ?\\<rho>' \\<and>\n                    DS ?\\<rho>' \\<in> carrier_mat d d\n\ngoal (1 subgoal):\n 1. denote_while_n M0 M1 DS n \\<rho> \\<in> carrier_mat d d", "by auto"], ["proof (state)\nthis:\n  denote_while_n M0 M1 DS n \\<rho> \\<in> carrier_mat d d\n\ngoal (1 subgoal):\n 1. matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>) n\n    \\<in> carrier_mat d d \\<Longrightarrow>\n    matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>) (Suc n)\n    \\<in> carrier_mat d d", "then"], ["proof (chain)\npicking this:\n  denote_while_n M0 M1 DS n \\<rho> \\<in> carrier_mat d d", "have \"matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>) (Suc n) \\<in> carrier_mat d d\""], ["proof (prove)\nusing this:\n  denote_while_n M0 M1 DS n \\<rho> \\<in> carrier_mat d d\n\ngoal (1 subgoal):\n 1. matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>) (Suc n)\n    \\<in> carrier_mat d d", "using Suc"], ["proof (prove)\nusing this:\n  denote_while_n M0 M1 DS n \\<rho> \\<in> carrier_mat d d\n  matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>) n\n  \\<in> carrier_mat d d\n\ngoal (1 subgoal):\n 1. matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>) (Suc n)\n    \\<in> carrier_mat d d", "by auto"], ["proof (state)\nthis:\n  matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>) (Suc n)\n  \\<in> carrier_mat d d\n\ngoal (1 subgoal):\n 1. matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>) n\n    \\<in> carrier_mat d d \\<Longrightarrow>\n    matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>) (Suc n)\n    \\<in> carrier_mat d d", "then"], ["proof (chain)\npicking this:\n  matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>) (Suc n)\n  \\<in> carrier_mat d d", "show ?thesis"], ["proof (prove)\nusing this:\n  matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>) (Suc n)\n  \\<in> carrier_mat d d\n\ngoal (1 subgoal):\n 1. matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>) (Suc n)\n    \\<in> carrier_mat d d", "by auto"], ["proof (state)\nthis:\n  matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>) (Suc n)\n  \\<in> carrier_mat d d\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>) (Suc n)\n  \\<in> carrier_mat d d\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma trace_decrease_mul_adj:\n  assumes pdo: \"partial_density_operator \\<rho>\" and dimr: \"\\<rho> \\<in> carrier_mat d d\" \n    and dimx: \"x \\<in> carrier_mat d d\" and un: \"adjoint x * x \\<le>\\<^sub>L   1\\<^sub>m d \"\n  shows \"trace (x * \\<rho> * adjoint x) \\<le> trace \\<rho>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. trace (x * \\<rho> * adjoint x) \\<le> trace \\<rho>", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. trace (x * \\<rho> * adjoint x) \\<le> trace \\<rho>", "have ad: \"adjoint x * x \\<in> carrier_mat d d\""], ["proof (prove)\ngoal (1 subgoal):\n 1. adjoint x * x \\<in> carrier_mat d d", "using adjoint_dim index_mult_mat dimx"], ["proof (prove)\nusing this:\n  ?A \\<in> carrier_mat ?n ?n \\<Longrightarrow>\n  adjoint ?A \\<in> carrier_mat ?n ?n\n  \\<lbrakk>?i < dim_row ?A; ?j < dim_col ?B\\<rbrakk>\n  \\<Longrightarrow> (?A * ?B) $$ (?i, ?j) = row ?A ?i \\<bullet> col ?B ?j\n  dim_row (?A * ?B) = dim_row ?A\n  dim_col (?A * ?B) = dim_col ?B\n  x \\<in> carrier_mat d d\n\ngoal (1 subgoal):\n 1. adjoint x * x \\<in> carrier_mat d d", "by auto"], ["proof (state)\nthis:\n  adjoint x * x \\<in> carrier_mat d d\n\ngoal (1 subgoal):\n 1. trace (x * \\<rho> * adjoint x) \\<le> trace \\<rho>", "have \"trace (x * \\<rho> * adjoint x) = trace ((adjoint x * x) * \\<rho>)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. trace (x * \\<rho> * adjoint x) = trace (adjoint x * x * \\<rho>)", "using dimx dimr"], ["proof (prove)\nusing this:\n  x \\<in> carrier_mat d d\n  \\<rho> \\<in> carrier_mat d d\n\ngoal (1 subgoal):\n 1. trace (x * \\<rho> * adjoint x) = trace (adjoint x * x * \\<rho>)", "by (mat_assoc d)"], ["proof (state)\nthis:\n  trace (x * \\<rho> * adjoint x) = trace (adjoint x * x * \\<rho>)\n\ngoal (1 subgoal):\n 1. trace (x * \\<rho> * adjoint x) \\<le> trace \\<rho>", "also"], ["proof (state)\nthis:\n  trace (x * \\<rho> * adjoint x) = trace (adjoint x * x * \\<rho>)\n\ngoal (1 subgoal):\n 1. trace (x * \\<rho> * adjoint x) \\<le> trace \\<rho>", "have \"\\<dots> \\<le> trace (1\\<^sub>m d * \\<rho>)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. trace (adjoint x * x * \\<rho>) \\<le> trace (1\\<^sub>m d * \\<rho>)", "using lowner_le_trace un ad dimr pdo"], ["proof (prove)\nusing this:\n  \\<lbrakk>?A \\<in> carrier_mat ?n ?n; ?B \\<in> carrier_mat ?n ?n\\<rbrakk>\n  \\<Longrightarrow> (?A \\<le>\\<^sub>L ?B) =\n                    (\\<forall>\\<rho>\\<in>carrier_mat ?n ?n.\n                        partial_density_operator \\<rho> \\<longrightarrow>\n                        trace (?A * \\<rho>) \\<le> trace (?B * \\<rho>))\n  adjoint x * x \\<le>\\<^sub>L 1\\<^sub>m d\n  adjoint x * x \\<in> carrier_mat d d\n  \\<rho> \\<in> carrier_mat d d\n  partial_density_operator \\<rho>\n\ngoal (1 subgoal):\n 1. trace (adjoint x * x * \\<rho>) \\<le> trace (1\\<^sub>m d * \\<rho>)", "by auto"], ["proof (state)\nthis:\n  trace (adjoint x * x * \\<rho>) \\<le> trace (1\\<^sub>m d * \\<rho>)\n\ngoal (1 subgoal):\n 1. trace (x * \\<rho> * adjoint x) \\<le> trace \\<rho>", "also"], ["proof (state)\nthis:\n  trace (adjoint x * x * \\<rho>) \\<le> trace (1\\<^sub>m d * \\<rho>)\n\ngoal (1 subgoal):\n 1. trace (x * \\<rho> * adjoint x) \\<le> trace \\<rho>", "have \"\\<dots> = trace \\<rho>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. trace (1\\<^sub>m d * \\<rho>) = trace \\<rho>", "using dimr"], ["proof (prove)\nusing this:\n  \\<rho> \\<in> carrier_mat d d\n\ngoal (1 subgoal):\n 1. trace (1\\<^sub>m d * \\<rho>) = trace \\<rho>", "by auto"], ["proof (state)\nthis:\n  trace (1\\<^sub>m d * \\<rho>) = trace \\<rho>\n\ngoal (1 subgoal):\n 1. trace (x * \\<rho> * adjoint x) \\<le> trace \\<rho>", "ultimately"], ["proof (chain)\npicking this:\n  trace (x * \\<rho> * adjoint x) \\<le> trace (1\\<^sub>m d * \\<rho>)\n  trace (1\\<^sub>m d * \\<rho>) = trace \\<rho>", "show ?thesis"], ["proof (prove)\nusing this:\n  trace (x * \\<rho> * adjoint x) \\<le> trace (1\\<^sub>m d * \\<rho>)\n  trace (1\\<^sub>m d * \\<rho>) = trace \\<rho>\n\ngoal (1 subgoal):\n 1. trace (x * \\<rho> * adjoint x) \\<le> trace \\<rho>", "by auto"], ["proof (state)\nthis:\n  trace (x * \\<rho> * adjoint x) \\<le> trace \\<rho>\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma denote_while_n_positive: \n  assumes dim0: \"M0 \\<in> carrier_mat d d\" and dim1: \"M1 \\<in> carrier_mat d d\" and un: \"adjoint M1 * M1 \\<le>\\<^sub>L   1\\<^sub>m d\"\n      and DS: \"\\<And>\\<rho>. \\<rho> \\<in> carrier_mat d d \\<Longrightarrow> partial_density_operator \\<rho> \\<Longrightarrow> positive (DS \\<rho>) \\<and> trace (DS \\<rho>) \\<le> trace \\<rho> \\<and> DS \\<rho> \\<in> carrier_mat d d\"\n  shows \"partial_density_operator \\<rho> \\<and> \\<rho> \\<in> carrier_mat d d \\<Longrightarrow> positive (denote_while_n M0 M1 DS n \\<rho>)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. partial_density_operator \\<rho> \\<and>\n    \\<rho> \\<in> carrier_mat d d \\<Longrightarrow>\n    positive (denote_while_n M0 M1 DS n \\<rho>)", "proof (induction n arbitrary: \\<rho>)"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>\\<rho>.\n       partial_density_operator \\<rho> \\<and>\n       \\<rho> \\<in> carrier_mat d d \\<Longrightarrow>\n       positive (denote_while_n M0 M1 DS 0 \\<rho>)\n 2. \\<And>n \\<rho>.\n       \\<lbrakk>\\<And>\\<rho>.\n                   partial_density_operator \\<rho> \\<and>\n                   \\<rho> \\<in> carrier_mat d d \\<Longrightarrow>\n                   positive (denote_while_n M0 M1 DS n \\<rho>);\n        partial_density_operator \\<rho> \\<and>\n        \\<rho> \\<in> carrier_mat d d\\<rbrakk>\n       \\<Longrightarrow> positive (denote_while_n M0 M1 DS (Suc n) \\<rho>)", "case 0"], ["proof (state)\nthis:\n  partial_density_operator \\<rho> \\<and> \\<rho> \\<in> carrier_mat d d\n\ngoal (2 subgoals):\n 1. \\<And>\\<rho>.\n       partial_density_operator \\<rho> \\<and>\n       \\<rho> \\<in> carrier_mat d d \\<Longrightarrow>\n       positive (denote_while_n M0 M1 DS 0 \\<rho>)\n 2. \\<And>n \\<rho>.\n       \\<lbrakk>\\<And>\\<rho>.\n                   partial_density_operator \\<rho> \\<and>\n                   \\<rho> \\<in> carrier_mat d d \\<Longrightarrow>\n                   positive (denote_while_n M0 M1 DS n \\<rho>);\n        partial_density_operator \\<rho> \\<and>\n        \\<rho> \\<in> carrier_mat d d\\<rbrakk>\n       \\<Longrightarrow> positive (denote_while_n M0 M1 DS (Suc n) \\<rho>)", "then"], ["proof (chain)\npicking this:\n  partial_density_operator \\<rho> \\<and> \\<rho> \\<in> carrier_mat d d", "show ?case"], ["proof (prove)\nusing this:\n  partial_density_operator \\<rho> \\<and> \\<rho> \\<in> carrier_mat d d\n\ngoal (1 subgoal):\n 1. positive (denote_while_n M0 M1 DS 0 \\<rho>)", "using positive_close_under_left_right_mult_adjoint dim0"], ["proof (prove)\nusing this:\n  partial_density_operator \\<rho> \\<and> \\<rho> \\<in> carrier_mat d d\n  \\<lbrakk>?M \\<in> carrier_mat ?n ?n; ?A \\<in> carrier_mat ?n ?n;\n   positive ?A\\<rbrakk>\n  \\<Longrightarrow> positive (?M * ?A * adjoint ?M)\n  M0 \\<in> carrier_mat d d\n\ngoal (1 subgoal):\n 1. positive (denote_while_n M0 M1 DS 0 \\<rho>)", "unfolding partial_density_operator_def"], ["proof (prove)\nusing this:\n  (positive \\<rho> \\<and> trace \\<rho> \\<le> 1) \\<and>\n  \\<rho> \\<in> carrier_mat d d\n  \\<lbrakk>?M \\<in> carrier_mat ?n ?n; ?A \\<in> carrier_mat ?n ?n;\n   positive ?A\\<rbrakk>\n  \\<Longrightarrow> positive (?M * ?A * adjoint ?M)\n  M0 \\<in> carrier_mat d d\n\ngoal (1 subgoal):\n 1. positive (denote_while_n M0 M1 DS 0 \\<rho>)", "by auto"], ["proof (state)\nthis:\n  positive (denote_while_n M0 M1 DS 0 \\<rho>)\n\ngoal (1 subgoal):\n 1. \\<And>n \\<rho>.\n       \\<lbrakk>\\<And>\\<rho>.\n                   partial_density_operator \\<rho> \\<and>\n                   \\<rho> \\<in> carrier_mat d d \\<Longrightarrow>\n                   positive (denote_while_n M0 M1 DS n \\<rho>);\n        partial_density_operator \\<rho> \\<and>\n        \\<rho> \\<in> carrier_mat d d\\<rbrakk>\n       \\<Longrightarrow> positive (denote_while_n M0 M1 DS (Suc n) \\<rho>)", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>n \\<rho>.\n       \\<lbrakk>\\<And>\\<rho>.\n                   partial_density_operator \\<rho> \\<and>\n                   \\<rho> \\<in> carrier_mat d d \\<Longrightarrow>\n                   positive (denote_while_n M0 M1 DS n \\<rho>);\n        partial_density_operator \\<rho> \\<and>\n        \\<rho> \\<in> carrier_mat d d\\<rbrakk>\n       \\<Longrightarrow> positive (denote_while_n M0 M1 DS (Suc n) \\<rho>)", "case (Suc n)"], ["proof (state)\nthis:\n  partial_density_operator ?\\<rho> \\<and>\n  ?\\<rho> \\<in> carrier_mat d d \\<Longrightarrow>\n  positive (denote_while_n M0 M1 DS n ?\\<rho>)\n  partial_density_operator \\<rho> \\<and> \\<rho> \\<in> carrier_mat d d\n\ngoal (1 subgoal):\n 1. \\<And>n \\<rho>.\n       \\<lbrakk>\\<And>\\<rho>.\n                   partial_density_operator \\<rho> \\<and>\n                   \\<rho> \\<in> carrier_mat d d \\<Longrightarrow>\n                   positive (denote_while_n M0 M1 DS n \\<rho>);\n        partial_density_operator \\<rho> \\<and>\n        \\<rho> \\<in> carrier_mat d d\\<rbrakk>\n       \\<Longrightarrow> positive (denote_while_n M0 M1 DS (Suc n) \\<rho>)", "then"], ["proof (chain)\npicking this:\n  partial_density_operator ?\\<rho> \\<and>\n  ?\\<rho> \\<in> carrier_mat d d \\<Longrightarrow>\n  positive (denote_while_n M0 M1 DS n ?\\<rho>)\n  partial_density_operator \\<rho> \\<and> \\<rho> \\<in> carrier_mat d d", "show ?case"], ["proof (prove)\nusing this:\n  partial_density_operator ?\\<rho> \\<and>\n  ?\\<rho> \\<in> carrier_mat d d \\<Longrightarrow>\n  positive (denote_while_n M0 M1 DS n ?\\<rho>)\n  partial_density_operator \\<rho> \\<and> \\<rho> \\<in> carrier_mat d d\n\ngoal (1 subgoal):\n 1. positive (denote_while_n M0 M1 DS (Suc n) \\<rho>)", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<And>\\<rho>.\n                partial_density_operator \\<rho> \\<and>\n                \\<rho> \\<in> carrier_mat d d \\<Longrightarrow>\n                positive (denote_while_n M0 M1 DS n \\<rho>);\n     partial_density_operator \\<rho> \\<and>\n     \\<rho> \\<in> carrier_mat d d\\<rbrakk>\n    \\<Longrightarrow> positive (denote_while_n M0 M1 DS (Suc n) \\<rho>)", "have pdoM: \"partial_density_operator (M1 * \\<rho> * adjoint M1)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. partial_density_operator (M1 * \\<rho> * adjoint M1)", "using pdo_close_under_measurement Suc dim1 un"], ["proof (prove)\nusing this:\n  \\<lbrakk>?M \\<in> carrier_mat ?n ?n; ?\\<rho> \\<in> carrier_mat ?n ?n;\n   partial_density_operator ?\\<rho>;\n   adjoint ?M * ?M \\<le>\\<^sub>L 1\\<^sub>m ?n\\<rbrakk>\n  \\<Longrightarrow> partial_density_operator (?M * ?\\<rho> * adjoint ?M)\n  partial_density_operator ?\\<rho> \\<and>\n  ?\\<rho> \\<in> carrier_mat d d \\<Longrightarrow>\n  positive (denote_while_n M0 M1 DS n ?\\<rho>)\n  partial_density_operator \\<rho> \\<and> \\<rho> \\<in> carrier_mat d d\n  M1 \\<in> carrier_mat d d\n  adjoint M1 * M1 \\<le>\\<^sub>L 1\\<^sub>m d\n\ngoal (1 subgoal):\n 1. partial_density_operator (M1 * \\<rho> * adjoint M1)", "by auto"], ["proof (state)\nthis:\n  partial_density_operator (M1 * \\<rho> * adjoint M1)\n\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<And>\\<rho>.\n                partial_density_operator \\<rho> \\<and>\n                \\<rho> \\<in> carrier_mat d d \\<Longrightarrow>\n                positive (denote_while_n M0 M1 DS n \\<rho>);\n     partial_density_operator \\<rho> \\<and>\n     \\<rho> \\<in> carrier_mat d d\\<rbrakk>\n    \\<Longrightarrow> positive (denote_while_n M0 M1 DS (Suc n) \\<rho>)", "moreover"], ["proof (state)\nthis:\n  partial_density_operator (M1 * \\<rho> * adjoint M1)\n\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<And>\\<rho>.\n                partial_density_operator \\<rho> \\<and>\n                \\<rho> \\<in> carrier_mat d d \\<Longrightarrow>\n                positive (denote_while_n M0 M1 DS n \\<rho>);\n     partial_density_operator \\<rho> \\<and>\n     \\<rho> \\<in> carrier_mat d d\\<rbrakk>\n    \\<Longrightarrow> positive (denote_while_n M0 M1 DS (Suc n) \\<rho>)", "have cM: \"M1 * \\<rho> * adjoint M1 \\<in> carrier_mat d d\""], ["proof (prove)\ngoal (1 subgoal):\n 1. M1 * \\<rho> * adjoint M1 \\<in> carrier_mat d d", "using Suc dim1 adjoint_dim index_mult_mat"], ["proof (prove)\nusing this:\n  partial_density_operator ?\\<rho> \\<and>\n  ?\\<rho> \\<in> carrier_mat d d \\<Longrightarrow>\n  positive (denote_while_n M0 M1 DS n ?\\<rho>)\n  partial_density_operator \\<rho> \\<and> \\<rho> \\<in> carrier_mat d d\n  M1 \\<in> carrier_mat d d\n  ?A \\<in> carrier_mat ?n ?n \\<Longrightarrow>\n  adjoint ?A \\<in> carrier_mat ?n ?n\n  \\<lbrakk>?i < dim_row ?A; ?j < dim_col ?B\\<rbrakk>\n  \\<Longrightarrow> (?A * ?B) $$ (?i, ?j) = row ?A ?i \\<bullet> col ?B ?j\n  dim_row (?A * ?B) = dim_row ?A\n  dim_col (?A * ?B) = dim_col ?B\n\ngoal (1 subgoal):\n 1. M1 * \\<rho> * adjoint M1 \\<in> carrier_mat d d", "by auto"], ["proof (state)\nthis:\n  M1 * \\<rho> * adjoint M1 \\<in> carrier_mat d d\n\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<And>\\<rho>.\n                partial_density_operator \\<rho> \\<and>\n                \\<rho> \\<in> carrier_mat d d \\<Longrightarrow>\n                positive (denote_while_n M0 M1 DS n \\<rho>);\n     partial_density_operator \\<rho> \\<and>\n     \\<rho> \\<in> carrier_mat d d\\<rbrakk>\n    \\<Longrightarrow> positive (denote_while_n M0 M1 DS (Suc n) \\<rho>)", "ultimately"], ["proof (chain)\npicking this:\n  partial_density_operator (M1 * \\<rho> * adjoint M1)\n  M1 * \\<rho> * adjoint M1 \\<in> carrier_mat d d", "have DSM1: \"positive (DS (M1 * \\<rho> * adjoint M1)) \\<and> trace (DS (M1 * \\<rho> * adjoint M1)) \\<le> trace (M1 * \\<rho> * adjoint M1) \\<and> DS (M1 * \\<rho> * adjoint M1) \\<in> carrier_mat d d\""], ["proof (prove)\nusing this:\n  partial_density_operator (M1 * \\<rho> * adjoint M1)\n  M1 * \\<rho> * adjoint M1 \\<in> carrier_mat d d\n\ngoal (1 subgoal):\n 1. positive (DS (M1 * \\<rho> * adjoint M1)) \\<and>\n    trace (DS (M1 * \\<rho> * adjoint M1))\n    \\<le> trace (M1 * \\<rho> * adjoint M1) \\<and>\n    DS (M1 * \\<rho> * adjoint M1) \\<in> carrier_mat d d", "using DS"], ["proof (prove)\nusing this:\n  partial_density_operator (M1 * \\<rho> * adjoint M1)\n  M1 * \\<rho> * adjoint M1 \\<in> carrier_mat d d\n  \\<lbrakk>?\\<rho> \\<in> carrier_mat d d;\n   partial_density_operator ?\\<rho>\\<rbrakk>\n  \\<Longrightarrow> positive (DS ?\\<rho>) \\<and>\n                    trace (DS ?\\<rho>) \\<le> trace ?\\<rho> \\<and>\n                    DS ?\\<rho> \\<in> carrier_mat d d\n\ngoal (1 subgoal):\n 1. positive (DS (M1 * \\<rho> * adjoint M1)) \\<and>\n    trace (DS (M1 * \\<rho> * adjoint M1))\n    \\<le> trace (M1 * \\<rho> * adjoint M1) \\<and>\n    DS (M1 * \\<rho> * adjoint M1) \\<in> carrier_mat d d", "by auto"], ["proof (state)\nthis:\n  positive (DS (M1 * \\<rho> * adjoint M1)) \\<and>\n  trace (DS (M1 * \\<rho> * adjoint M1))\n  \\<le> trace (M1 * \\<rho> * adjoint M1) \\<and>\n  DS (M1 * \\<rho> * adjoint M1) \\<in> carrier_mat d d\n\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<And>\\<rho>.\n                partial_density_operator \\<rho> \\<and>\n                \\<rho> \\<in> carrier_mat d d \\<Longrightarrow>\n                positive (denote_while_n M0 M1 DS n \\<rho>);\n     partial_density_operator \\<rho> \\<and>\n     \\<rho> \\<in> carrier_mat d d\\<rbrakk>\n    \\<Longrightarrow> positive (denote_while_n M0 M1 DS (Suc n) \\<rho>)", "moreover"], ["proof (state)\nthis:\n  positive (DS (M1 * \\<rho> * adjoint M1)) \\<and>\n  trace (DS (M1 * \\<rho> * adjoint M1))\n  \\<le> trace (M1 * \\<rho> * adjoint M1) \\<and>\n  DS (M1 * \\<rho> * adjoint M1) \\<in> carrier_mat d d\n\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<And>\\<rho>.\n                partial_density_operator \\<rho> \\<and>\n                \\<rho> \\<in> carrier_mat d d \\<Longrightarrow>\n                positive (denote_while_n M0 M1 DS n \\<rho>);\n     partial_density_operator \\<rho> \\<and>\n     \\<rho> \\<in> carrier_mat d d\\<rbrakk>\n    \\<Longrightarrow> positive (denote_while_n M0 M1 DS (Suc n) \\<rho>)", "have \"trace (M1 * \\<rho> * adjoint M1) \\<le> trace \\<rho>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. trace (M1 * \\<rho> * adjoint M1) \\<le> trace \\<rho>", "using trace_decrease_mul_adj Suc dim1 un"], ["proof (prove)\nusing this:\n  \\<lbrakk>partial_density_operator ?\\<rho>; ?\\<rho> \\<in> carrier_mat d d;\n   ?x \\<in> carrier_mat d d;\n   adjoint ?x * ?x \\<le>\\<^sub>L 1\\<^sub>m d\\<rbrakk>\n  \\<Longrightarrow> trace (?x * ?\\<rho> * adjoint ?x) \\<le> trace ?\\<rho>\n  partial_density_operator ?\\<rho> \\<and>\n  ?\\<rho> \\<in> carrier_mat d d \\<Longrightarrow>\n  positive (denote_while_n M0 M1 DS n ?\\<rho>)\n  partial_density_operator \\<rho> \\<and> \\<rho> \\<in> carrier_mat d d\n  M1 \\<in> carrier_mat d d\n  adjoint M1 * M1 \\<le>\\<^sub>L 1\\<^sub>m d\n\ngoal (1 subgoal):\n 1. trace (M1 * \\<rho> * adjoint M1) \\<le> trace \\<rho>", "by auto"], ["proof (state)\nthis:\n  trace (M1 * \\<rho> * adjoint M1) \\<le> trace \\<rho>\n\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<And>\\<rho>.\n                partial_density_operator \\<rho> \\<and>\n                \\<rho> \\<in> carrier_mat d d \\<Longrightarrow>\n                positive (denote_while_n M0 M1 DS n \\<rho>);\n     partial_density_operator \\<rho> \\<and>\n     \\<rho> \\<in> carrier_mat d d\\<rbrakk>\n    \\<Longrightarrow> positive (denote_while_n M0 M1 DS (Suc n) \\<rho>)", "ultimately"], ["proof (chain)\npicking this:\n  positive (DS (M1 * \\<rho> * adjoint M1)) \\<and>\n  trace (DS (M1 * \\<rho> * adjoint M1))\n  \\<le> trace (M1 * \\<rho> * adjoint M1) \\<and>\n  DS (M1 * \\<rho> * adjoint M1) \\<in> carrier_mat d d\n  trace (M1 * \\<rho> * adjoint M1) \\<le> trace \\<rho>", "have \"partial_density_operator (DS (M1 * \\<rho> * adjoint M1))\""], ["proof (prove)\nusing this:\n  positive (DS (M1 * \\<rho> * adjoint M1)) \\<and>\n  trace (DS (M1 * \\<rho> * adjoint M1))\n  \\<le> trace (M1 * \\<rho> * adjoint M1) \\<and>\n  DS (M1 * \\<rho> * adjoint M1) \\<in> carrier_mat d d\n  trace (M1 * \\<rho> * adjoint M1) \\<le> trace \\<rho>\n\ngoal (1 subgoal):\n 1. partial_density_operator (DS (M1 * \\<rho> * adjoint M1))", "using Suc"], ["proof (prove)\nusing this:\n  positive (DS (M1 * \\<rho> * adjoint M1)) \\<and>\n  trace (DS (M1 * \\<rho> * adjoint M1))\n  \\<le> trace (M1 * \\<rho> * adjoint M1) \\<and>\n  DS (M1 * \\<rho> * adjoint M1) \\<in> carrier_mat d d\n  trace (M1 * \\<rho> * adjoint M1) \\<le> trace \\<rho>\n  partial_density_operator ?\\<rho> \\<and>\n  ?\\<rho> \\<in> carrier_mat d d \\<Longrightarrow>\n  positive (denote_while_n M0 M1 DS n ?\\<rho>)\n  partial_density_operator \\<rho> \\<and> \\<rho> \\<in> carrier_mat d d\n\ngoal (1 subgoal):\n 1. partial_density_operator (DS (M1 * \\<rho> * adjoint M1))", "unfolding partial_density_operator_def"], ["proof (prove)\nusing this:\n  positive (DS (M1 * \\<rho> * adjoint M1)) \\<and>\n  trace (DS (M1 * \\<rho> * adjoint M1))\n  \\<le> trace (M1 * \\<rho> * adjoint M1) \\<and>\n  DS (M1 * \\<rho> * adjoint M1) \\<in> carrier_mat d d\n  trace (M1 * \\<rho> * adjoint M1) \\<le> trace \\<rho>\n  (positive ?\\<rho> \\<and> trace ?\\<rho> \\<le> 1) \\<and>\n  ?\\<rho> \\<in> carrier_mat d d \\<Longrightarrow>\n  positive (denote_while_n M0 M1 DS n ?\\<rho>)\n  (positive \\<rho> \\<and> trace \\<rho> \\<le> 1) \\<and>\n  \\<rho> \\<in> carrier_mat d d\n\ngoal (1 subgoal):\n 1. positive (DS (M1 * \\<rho> * adjoint M1)) \\<and>\n    trace (DS (M1 * \\<rho> * adjoint M1)) \\<le> 1", "by auto"], ["proof (state)\nthis:\n  partial_density_operator (DS (M1 * \\<rho> * adjoint M1))\n\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<And>\\<rho>.\n                partial_density_operator \\<rho> \\<and>\n                \\<rho> \\<in> carrier_mat d d \\<Longrightarrow>\n                positive (denote_while_n M0 M1 DS n \\<rho>);\n     partial_density_operator \\<rho> \\<and>\n     \\<rho> \\<in> carrier_mat d d\\<rbrakk>\n    \\<Longrightarrow> positive (denote_while_n M0 M1 DS (Suc n) \\<rho>)", "then"], ["proof (chain)\npicking this:\n  partial_density_operator (DS (M1 * \\<rho> * adjoint M1))", "have \"positive (M0 * denote_while_n_iter M0 M1 DS n (DS (M1 * \\<rho> * adjoint M1)) * adjoint M0)\""], ["proof (prove)\nusing this:\n  partial_density_operator (DS (M1 * \\<rho> * adjoint M1))\n\ngoal (1 subgoal):\n 1. positive\n     (M0 * denote_while_n_iter M0 M1 DS n (DS (M1 * \\<rho> * adjoint M1)) *\n      adjoint M0)", "using Suc DSM1"], ["proof (prove)\nusing this:\n  partial_density_operator (DS (M1 * \\<rho> * adjoint M1))\n  partial_density_operator ?\\<rho> \\<and>\n  ?\\<rho> \\<in> carrier_mat d d \\<Longrightarrow>\n  positive (denote_while_n M0 M1 DS n ?\\<rho>)\n  partial_density_operator \\<rho> \\<and> \\<rho> \\<in> carrier_mat d d\n  positive (DS (M1 * \\<rho> * adjoint M1)) \\<and>\n  trace (DS (M1 * \\<rho> * adjoint M1))\n  \\<le> trace (M1 * \\<rho> * adjoint M1) \\<and>\n  DS (M1 * \\<rho> * adjoint M1) \\<in> carrier_mat d d\n\ngoal (1 subgoal):\n 1. positive\n     (M0 * denote_while_n_iter M0 M1 DS n (DS (M1 * \\<rho> * adjoint M1)) *\n      adjoint M0)", "by auto"], ["proof (state)\nthis:\n  positive\n   (M0 * denote_while_n_iter M0 M1 DS n (DS (M1 * \\<rho> * adjoint M1)) *\n    adjoint M0)\n\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<And>\\<rho>.\n                partial_density_operator \\<rho> \\<and>\n                \\<rho> \\<in> carrier_mat d d \\<Longrightarrow>\n                positive (denote_while_n M0 M1 DS n \\<rho>);\n     partial_density_operator \\<rho> \\<and>\n     \\<rho> \\<in> carrier_mat d d\\<rbrakk>\n    \\<Longrightarrow> positive (denote_while_n M0 M1 DS (Suc n) \\<rho>)", "then"], ["proof (chain)\npicking this:\n  positive\n   (M0 * denote_while_n_iter M0 M1 DS n (DS (M1 * \\<rho> * adjoint M1)) *\n    adjoint M0)", "have \"positive (denote_while_n M0 M1 DS (Suc n) \\<rho>)\""], ["proof (prove)\nusing this:\n  positive\n   (M0 * denote_while_n_iter M0 M1 DS n (DS (M1 * \\<rho> * adjoint M1)) *\n    adjoint M0)\n\ngoal (1 subgoal):\n 1. positive (denote_while_n M0 M1 DS (Suc n) \\<rho>)", "by auto"], ["proof (state)\nthis:\n  positive (denote_while_n M0 M1 DS (Suc n) \\<rho>)\n\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<And>\\<rho>.\n                partial_density_operator \\<rho> \\<and>\n                \\<rho> \\<in> carrier_mat d d \\<Longrightarrow>\n                positive (denote_while_n M0 M1 DS n \\<rho>);\n     partial_density_operator \\<rho> \\<and>\n     \\<rho> \\<in> carrier_mat d d\\<rbrakk>\n    \\<Longrightarrow> positive (denote_while_n M0 M1 DS (Suc n) \\<rho>)", "then"], ["proof (chain)\npicking this:\n  positive (denote_while_n M0 M1 DS (Suc n) \\<rho>)", "show ?thesis"], ["proof (prove)\nusing this:\n  positive (denote_while_n M0 M1 DS (Suc n) \\<rho>)\n\ngoal (1 subgoal):\n 1. positive (denote_while_n M0 M1 DS (Suc n) \\<rho>)", "by auto"], ["proof (state)\nthis:\n  positive (denote_while_n M0 M1 DS (Suc n) \\<rho>)\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  positive (denote_while_n M0 M1 DS (Suc n) \\<rho>)\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma denote_while_n_sum_positive:\n  assumes dim0: \"M0 \\<in> carrier_mat d d\" and dim1: \"M1 \\<in> carrier_mat d d\" and un: \"adjoint M1 * M1 \\<le>\\<^sub>L   1\\<^sub>m d\" \n      and DS: \"\\<And>\\<rho>. \\<rho> \\<in> carrier_mat d d \\<Longrightarrow> partial_density_operator \\<rho> \\<Longrightarrow> positive (DS \\<rho>) \\<and> trace (DS \\<rho>) \\<le> trace \\<rho> \\<and> DS \\<rho> \\<in> carrier_mat d d\"\n      and pdo: \"partial_density_operator \\<rho>\" and r: \" \\<rho> \\<in> carrier_mat d d\" \n    shows \"positive (matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>) n)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. positive (matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>) n)", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. positive (matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>) n)", "have \"\\<And>k. k < n \\<Longrightarrow> positive (denote_while_n M0 M1 DS k \\<rho>)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>k.\n       k < n \\<Longrightarrow> positive (denote_while_n M0 M1 DS k \\<rho>)", "using assms denote_while_n_positive"], ["proof (prove)\nusing this:\n  M0 \\<in> carrier_mat d d\n  M1 \\<in> carrier_mat d d\n  adjoint M1 * M1 \\<le>\\<^sub>L 1\\<^sub>m d\n  \\<lbrakk>?\\<rho> \\<in> carrier_mat d d;\n   partial_density_operator ?\\<rho>\\<rbrakk>\n  \\<Longrightarrow> positive (DS ?\\<rho>) \\<and>\n                    trace (DS ?\\<rho>) \\<le> trace ?\\<rho> \\<and>\n                    DS ?\\<rho> \\<in> carrier_mat d d\n  partial_density_operator \\<rho>\n  \\<rho> \\<in> carrier_mat d d\n  \\<lbrakk>?M0.0 \\<in> carrier_mat d d; ?M1.0 \\<in> carrier_mat d d;\n   adjoint ?M1.0 * ?M1.0 \\<le>\\<^sub>L 1\\<^sub>m d;\n   \\<And>\\<rho>.\n      \\<lbrakk>\\<rho> \\<in> carrier_mat d d;\n       partial_density_operator \\<rho>\\<rbrakk>\n      \\<Longrightarrow> positive (?DS \\<rho>) \\<and>\n                        trace (?DS \\<rho>) \\<le> trace \\<rho> \\<and>\n                        ?DS \\<rho> \\<in> carrier_mat d d;\n   partial_density_operator ?\\<rho> \\<and>\n   ?\\<rho> \\<in> carrier_mat d d\\<rbrakk>\n  \\<Longrightarrow> positive (denote_while_n ?M0.0 ?M1.0 ?DS ?n ?\\<rho>)\n\ngoal (1 subgoal):\n 1. \\<And>k.\n       k < n \\<Longrightarrow> positive (denote_while_n M0 M1 DS k \\<rho>)", "by auto"], ["proof (state)\nthis:\n  ?k < n \\<Longrightarrow> positive (denote_while_n M0 M1 DS ?k \\<rho>)\n\ngoal (1 subgoal):\n 1. positive (matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>) n)", "moreover"], ["proof (state)\nthis:\n  ?k < n \\<Longrightarrow> positive (denote_while_n M0 M1 DS ?k \\<rho>)\n\ngoal (1 subgoal):\n 1. positive (matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>) n)", "have \"\\<And>k. k < n \\<Longrightarrow> denote_while_n M0 M1 DS k \\<rho> \\<in> carrier_mat d d\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>k.\n       k < n \\<Longrightarrow>\n       denote_while_n M0 M1 DS k \\<rho> \\<in> carrier_mat d d", "using denote_while_n_dim assms"], ["proof (prove)\nusing this:\n  \\<lbrakk>?\\<rho> \\<in> carrier_mat d d; ?M0.0 \\<in> carrier_mat d d;\n   ?M1.0 \\<in> carrier_mat d d; partial_density_operator ?\\<rho>;\n   \\<And>\\<rho>'.\n      \\<lbrakk>\\<rho>' \\<in> carrier_mat d d;\n       partial_density_operator \\<rho>'\\<rbrakk>\n      \\<Longrightarrow> positive (?DS \\<rho>') \\<and>\n                        trace (?DS \\<rho>') \\<le> trace \\<rho>' \\<and>\n                        ?DS \\<rho>' \\<in> carrier_mat d d\\<rbrakk>\n  \\<Longrightarrow> denote_while_n ?M0.0 ?M1.0 ?DS ?n ?\\<rho>\n                    \\<in> carrier_mat d d\n  M0 \\<in> carrier_mat d d\n  M1 \\<in> carrier_mat d d\n  adjoint M1 * M1 \\<le>\\<^sub>L 1\\<^sub>m d\n  \\<lbrakk>?\\<rho> \\<in> carrier_mat d d;\n   partial_density_operator ?\\<rho>\\<rbrakk>\n  \\<Longrightarrow> positive (DS ?\\<rho>) \\<and>\n                    trace (DS ?\\<rho>) \\<le> trace ?\\<rho> \\<and>\n                    DS ?\\<rho> \\<in> carrier_mat d d\n  partial_density_operator \\<rho>\n  \\<rho> \\<in> carrier_mat d d\n\ngoal (1 subgoal):\n 1. \\<And>k.\n       k < n \\<Longrightarrow>\n       denote_while_n M0 M1 DS k \\<rho> \\<in> carrier_mat d d", "by auto"], ["proof (state)\nthis:\n  ?k < n \\<Longrightarrow>\n  denote_while_n M0 M1 DS ?k \\<rho> \\<in> carrier_mat d d\n\ngoal (1 subgoal):\n 1. positive (matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>) n)", "ultimately"], ["proof (chain)\npicking this:\n  ?k < n \\<Longrightarrow> positive (denote_while_n M0 M1 DS ?k \\<rho>)\n  ?k < n \\<Longrightarrow>\n  denote_while_n M0 M1 DS ?k \\<rho> \\<in> carrier_mat d d", "show ?thesis"], ["proof (prove)\nusing this:\n  ?k < n \\<Longrightarrow> positive (denote_while_n M0 M1 DS ?k \\<rho>)\n  ?k < n \\<Longrightarrow>\n  denote_while_n M0 M1 DS ?k \\<rho> \\<in> carrier_mat d d\n\ngoal (1 subgoal):\n 1. positive (matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>) n)", "using matrix_sum_positive"], ["proof (prove)\nusing this:\n  ?k < n \\<Longrightarrow> positive (denote_while_n M0 M1 DS ?k \\<rho>)\n  ?k < n \\<Longrightarrow>\n  denote_while_n M0 M1 DS ?k \\<rho> \\<in> carrier_mat d d\n  \\<lbrakk>\\<And>k. k < ?n \\<Longrightarrow> ?f k \\<in> carrier_mat ?d ?d;\n   \\<And>k. k < ?n \\<Longrightarrow> positive (?f k)\\<rbrakk>\n  \\<Longrightarrow> positive (matrix_sum ?d ?f ?n)\n\ngoal (1 subgoal):\n 1. positive (matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>) n)", "by auto"], ["proof (state)\nthis:\n  positive (matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>) n)\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma trace_measure2_id:\n  assumes dM0: \"M0 \\<in> carrier_mat n n\" and dM1: \"M1 \\<in> carrier_mat n n\" \n    and id: \"adjoint M0 * M0 + adjoint M1 * M1 = 1\\<^sub>m n\"\n    and dA: \"A \\<in> carrier_mat n n\"\n  shows \"trace (M0 * A * adjoint M0) + trace (M1 * A * adjoint M1) = trace A\""], ["proof (prove)\ngoal (1 subgoal):\n 1. trace (M0 * A * adjoint M0) + trace (M1 * A * adjoint M1) = trace A", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. trace (M0 * A * adjoint M0) + trace (M1 * A * adjoint M1) = trace A", "have \"trace (M0 * A * adjoint M0) + trace (M1 * A * adjoint M1) = trace ((adjoint M0 * M0 + adjoint M1 * M1) * A)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. trace (M0 * A * adjoint M0) + trace (M1 * A * adjoint M1) =\n    trace ((adjoint M0 * M0 + adjoint M1 * M1) * A)", "using assms"], ["proof (prove)\nusing this:\n  M0 \\<in> carrier_mat n n\n  M1 \\<in> carrier_mat n n\n  adjoint M0 * M0 + adjoint M1 * M1 = 1\\<^sub>m n\n  A \\<in> carrier_mat n n\n\ngoal (1 subgoal):\n 1. trace (M0 * A * adjoint M0) + trace (M1 * A * adjoint M1) =\n    trace ((adjoint M0 * M0 + adjoint M1 * M1) * A)", "by (mat_assoc n)"], ["proof (state)\nthis:\n  trace (M0 * A * adjoint M0) + trace (M1 * A * adjoint M1) =\n  trace ((adjoint M0 * M0 + adjoint M1 * M1) * A)\n\ngoal (1 subgoal):\n 1. trace (M0 * A * adjoint M0) + trace (M1 * A * adjoint M1) = trace A", "also"], ["proof (state)\nthis:\n  trace (M0 * A * adjoint M0) + trace (M1 * A * adjoint M1) =\n  trace ((adjoint M0 * M0 + adjoint M1 * M1) * A)\n\ngoal (1 subgoal):\n 1. trace (M0 * A * adjoint M0) + trace (M1 * A * adjoint M1) = trace A", "have \"\\<dots> = trace (1\\<^sub>m n * A)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. trace ((adjoint M0 * M0 + adjoint M1 * M1) * A) =\n    trace (1\\<^sub>m n * A)", "using id"], ["proof (prove)\nusing this:\n  adjoint M0 * M0 + adjoint M1 * M1 = 1\\<^sub>m n\n\ngoal (1 subgoal):\n 1. trace ((adjoint M0 * M0 + adjoint M1 * M1) * A) =\n    trace (1\\<^sub>m n * A)", "by auto"], ["proof (state)\nthis:\n  trace ((adjoint M0 * M0 + adjoint M1 * M1) * A) = trace (1\\<^sub>m n * A)\n\ngoal (1 subgoal):\n 1. trace (M0 * A * adjoint M0) + trace (M1 * A * adjoint M1) = trace A", "also"], ["proof (state)\nthis:\n  trace ((adjoint M0 * M0 + adjoint M1 * M1) * A) = trace (1\\<^sub>m n * A)\n\ngoal (1 subgoal):\n 1. trace (M0 * A * adjoint M0) + trace (M1 * A * adjoint M1) = trace A", "have \"\\<dots> = trace A\""], ["proof (prove)\ngoal (1 subgoal):\n 1. trace (1\\<^sub>m n * A) = trace A", "using dA"], ["proof (prove)\nusing this:\n  A \\<in> carrier_mat n n\n\ngoal (1 subgoal):\n 1. trace (1\\<^sub>m n * A) = trace A", "by auto"], ["proof (state)\nthis:\n  trace (1\\<^sub>m n * A) = trace A\n\ngoal (1 subgoal):\n 1. trace (M0 * A * adjoint M0) + trace (M1 * A * adjoint M1) = trace A", "finally"], ["proof (chain)\npicking this:\n  trace (M0 * A * adjoint M0) + trace (M1 * A * adjoint M1) = trace A", "show ?thesis"], ["proof (prove)\nusing this:\n  trace (M0 * A * adjoint M0) + trace (M1 * A * adjoint M1) = trace A\n\ngoal (1 subgoal):\n 1. trace (M0 * A * adjoint M0) + trace (M1 * A * adjoint M1) = trace A", "."], ["proof (state)\nthis:\n  trace (M0 * A * adjoint M0) + trace (M1 * A * adjoint M1) = trace A\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma measurement_lowner_le_one1:\n  assumes dim0: \"M0 \\<in> carrier_mat d d\" and dim1: \"M1 \\<in> carrier_mat d d\" and id: \"adjoint M0 * M0 + adjoint M1 * M1 = 1\\<^sub>m d\"\n  shows \"adjoint M1 * M1 \\<le>\\<^sub>L 1\\<^sub>m d\""], ["proof (prove)\ngoal (1 subgoal):\n 1. adjoint M1 * M1 \\<le>\\<^sub>L 1\\<^sub>m d", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. adjoint M1 * M1 \\<le>\\<^sub>L 1\\<^sub>m d", "have paM0: \"positive (adjoint M0 * M0)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. positive (adjoint M0 * M0)", "apply (subgoal_tac \"adjoint M0 * adjoint (adjoint M0) = adjoint M0 * M0\")"], ["proof (prove)\ngoal (2 subgoals):\n 1. adjoint M0 * adjoint (adjoint M0) = adjoint M0 * M0 \\<Longrightarrow>\n    positive (adjoint M0 * M0)\n 2. adjoint M0 * adjoint (adjoint M0) = adjoint M0 * M0", "subgoal"], ["proof (prove)\ngoal (1 subgoal):\n 1. adjoint M0 * adjoint (adjoint M0) = adjoint M0 * M0 \\<Longrightarrow>\n    positive (adjoint M0 * M0)", "using positive_if_decomp[of \"adjoint M0 * M0\"] dim0 adjoint_dim[OF dim0]"], ["proof (prove)\nusing this:\n  \\<lbrakk>adjoint M0 * M0 \\<in> carrier_mat ?n ?n;\n   \\<exists>M. M * adjoint M = adjoint M0 * M0\\<rbrakk>\n  \\<Longrightarrow> positive (adjoint M0 * M0)\n  M0 \\<in> carrier_mat d d\n  adjoint M0 \\<in> carrier_mat d d\n\ngoal (1 subgoal):\n 1. adjoint M0 * adjoint (adjoint M0) = adjoint M0 * M0 \\<Longrightarrow>\n    positive (adjoint M0 * M0)", "by fastforce"], ["proof (prove)\ngoal (1 subgoal):\n 1. adjoint M0 * adjoint (adjoint M0) = adjoint M0 * M0", "using adjoint_adjoint[of M0]"], ["proof (prove)\nusing this:\n  adjoint (adjoint M0) = M0\n\ngoal (1 subgoal):\n 1. adjoint M0 * adjoint (adjoint M0) = adjoint M0 * M0", "by auto"], ["proof (state)\nthis:\n  positive (adjoint M0 * M0)\n\ngoal (1 subgoal):\n 1. adjoint M1 * M1 \\<le>\\<^sub>L 1\\<^sub>m d", "have le1: \"adjoint M0 * M0 + adjoint M1 * M1 \\<le>\\<^sub>L 1\\<^sub>m d\""], ["proof (prove)\ngoal (1 subgoal):\n 1. adjoint M0 * M0 + adjoint M1 * M1 \\<le>\\<^sub>L 1\\<^sub>m d", "using id lowner_le_refl[of \"1\\<^sub>m d\"]"], ["proof (prove)\nusing this:\n  adjoint M0 * M0 + adjoint M1 * M1 = 1\\<^sub>m d\n  1\\<^sub>m d \\<in> carrier_mat ?n ?n \\<Longrightarrow>\n  1\\<^sub>m d \\<le>\\<^sub>L 1\\<^sub>m d\n\ngoal (1 subgoal):\n 1. adjoint M0 * M0 + adjoint M1 * M1 \\<le>\\<^sub>L 1\\<^sub>m d", "by fastforce"], ["proof (state)\nthis:\n  adjoint M0 * M0 + adjoint M1 * M1 \\<le>\\<^sub>L 1\\<^sub>m d\n\ngoal (1 subgoal):\n 1. adjoint M1 * M1 \\<le>\\<^sub>L 1\\<^sub>m d", "show \"adjoint M1 * M1 \\<le>\\<^sub>L 1\\<^sub>m d\""], ["proof (prove)\ngoal (1 subgoal):\n 1. adjoint M1 * M1 \\<le>\\<^sub>L 1\\<^sub>m d", "using add_positive_le_reduce2[OF _ _ _ paM0 le1] dim0 dim1"], ["proof (prove)\nusing this:\n  \\<lbrakk>adjoint M1 * M1 \\<in> carrier_mat ?n ?n;\n   adjoint M0 * M0 \\<in> carrier_mat ?n ?n;\n   1\\<^sub>m d \\<in> carrier_mat ?n ?n\\<rbrakk>\n  \\<Longrightarrow> adjoint M1 * M1 \\<le>\\<^sub>L 1\\<^sub>m d\n  M0 \\<in> carrier_mat d d\n  M1 \\<in> carrier_mat d d\n\ngoal (1 subgoal):\n 1. adjoint M1 * M1 \\<le>\\<^sub>L 1\\<^sub>m d", "by fastforce"], ["proof (state)\nthis:\n  adjoint M1 * M1 \\<le>\\<^sub>L 1\\<^sub>m d\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma denote_while_n_sum_trace:\n  assumes dim0: \"M0 \\<in> carrier_mat d d\" and dim1: \"M1 \\<in> carrier_mat d d\" and id: \"adjoint M0 * M0 + adjoint M1 * M1 = 1\\<^sub>m d\" \n      and DS: \"\\<And>\\<rho>. \\<rho> \\<in> carrier_mat d d \\<Longrightarrow> partial_density_operator \\<rho> \\<Longrightarrow> positive (DS \\<rho>) \\<and> trace (DS \\<rho>) \\<le> trace \\<rho> \\<and> DS \\<rho> \\<in> carrier_mat d d\"\n      and r: \" \\<rho> \\<in> carrier_mat d d\"\n      and pdor: \"partial_density_operator \\<rho>\"\n    shows \"trace (matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>) n) \\<le> trace \\<rho>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. trace (matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>) n)\n    \\<le> trace \\<rho>", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. trace (matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>) n)\n    \\<le> trace \\<rho>", "have un: \"adjoint M1 * M1 \\<le>\\<^sub>L 1\\<^sub>m d\""], ["proof (prove)\ngoal (1 subgoal):\n 1. adjoint M1 * M1 \\<le>\\<^sub>L 1\\<^sub>m d", "using measurement_lowner_le_one1"], ["proof (prove)\nusing this:\n  \\<lbrakk>?M0.0 \\<in> carrier_mat d d; ?M1.0 \\<in> carrier_mat d d;\n   adjoint ?M0.0 * ?M0.0 + adjoint ?M1.0 * ?M1.0 = 1\\<^sub>m d\\<rbrakk>\n  \\<Longrightarrow> adjoint ?M1.0 * ?M1.0 \\<le>\\<^sub>L 1\\<^sub>m d\n\ngoal (1 subgoal):\n 1. adjoint M1 * M1 \\<le>\\<^sub>L 1\\<^sub>m d", "using dim0 dim1 id"], ["proof (prove)\nusing this:\n  \\<lbrakk>?M0.0 \\<in> carrier_mat d d; ?M1.0 \\<in> carrier_mat d d;\n   adjoint ?M0.0 * ?M0.0 + adjoint ?M1.0 * ?M1.0 = 1\\<^sub>m d\\<rbrakk>\n  \\<Longrightarrow> adjoint ?M1.0 * ?M1.0 \\<le>\\<^sub>L 1\\<^sub>m d\n  M0 \\<in> carrier_mat d d\n  M1 \\<in> carrier_mat d d\n  adjoint M0 * M0 + adjoint M1 * M1 = 1\\<^sub>m d\n\ngoal (1 subgoal):\n 1. adjoint M1 * M1 \\<le>\\<^sub>L 1\\<^sub>m d", "by auto"], ["proof (state)\nthis:\n  adjoint M1 * M1 \\<le>\\<^sub>L 1\\<^sub>m d\n\ngoal (1 subgoal):\n 1. trace (matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>) n)\n    \\<le> trace \\<rho>", "have DS': \"(DS \\<rho> \\<in> carrier_mat d d) \\<and> partial_density_operator (DS \\<rho>)\" if \"\\<rho> \\<in> carrier_mat d d\" and \"partial_density_operator \\<rho>\" for \\<rho>"], ["proof (prove)\ngoal (1 subgoal):\n 1. DS \\<rho> \\<in> carrier_mat d d \\<and>\n    partial_density_operator (DS \\<rho>)", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. DS \\<rho> \\<in> carrier_mat d d \\<and>\n    partial_density_operator (DS \\<rho>)", "have res: \"positive (DS \\<rho>) \\<and> trace (DS \\<rho>) \\<le> trace \\<rho> \\<and> DS \\<rho> \\<in> carrier_mat d d\""], ["proof (prove)\ngoal (1 subgoal):\n 1. positive (DS \\<rho>) \\<and>\n    trace (DS \\<rho>) \\<le> trace \\<rho> \\<and>\n    DS \\<rho> \\<in> carrier_mat d d", "using DS that"], ["proof (prove)\nusing this:\n  \\<lbrakk>?\\<rho> \\<in> carrier_mat d d;\n   partial_density_operator ?\\<rho>\\<rbrakk>\n  \\<Longrightarrow> positive (DS ?\\<rho>) \\<and>\n                    trace (DS ?\\<rho>) \\<le> trace ?\\<rho> \\<and>\n                    DS ?\\<rho> \\<in> carrier_mat d d\n  \\<rho> \\<in> carrier_mat d d\n  partial_density_operator \\<rho>\n\ngoal (1 subgoal):\n 1. positive (DS \\<rho>) \\<and>\n    trace (DS \\<rho>) \\<le> trace \\<rho> \\<and>\n    DS \\<rho> \\<in> carrier_mat d d", "by auto"], ["proof (state)\nthis:\n  positive (DS \\<rho>) \\<and>\n  trace (DS \\<rho>) \\<le> trace \\<rho> \\<and>\n  DS \\<rho> \\<in> carrier_mat d d\n\ngoal (1 subgoal):\n 1. DS \\<rho> \\<in> carrier_mat d d \\<and>\n    partial_density_operator (DS \\<rho>)", "moreover"], ["proof (state)\nthis:\n  positive (DS \\<rho>) \\<and>\n  trace (DS \\<rho>) \\<le> trace \\<rho> \\<and>\n  DS \\<rho> \\<in> carrier_mat d d\n\ngoal (1 subgoal):\n 1. DS \\<rho> \\<in> carrier_mat d d \\<and>\n    partial_density_operator (DS \\<rho>)", "have \"trace \\<rho> \\<le> 1\""], ["proof (prove)\ngoal (1 subgoal):\n 1. trace \\<rho> \\<le> 1", "using that partial_density_operator_def"], ["proof (prove)\nusing this:\n  \\<rho> \\<in> carrier_mat d d\n  partial_density_operator \\<rho>\n  partial_density_operator ?A = (positive ?A \\<and> trace ?A \\<le> 1)\n\ngoal (1 subgoal):\n 1. trace \\<rho> \\<le> 1", "by auto"], ["proof (state)\nthis:\n  trace \\<rho> \\<le> 1\n\ngoal (1 subgoal):\n 1. DS \\<rho> \\<in> carrier_mat d d \\<and>\n    partial_density_operator (DS \\<rho>)", "ultimately"], ["proof (chain)\npicking this:\n  positive (DS \\<rho>) \\<and>\n  trace (DS \\<rho>) \\<le> trace \\<rho> \\<and>\n  DS \\<rho> \\<in> carrier_mat d d\n  trace \\<rho> \\<le> 1", "have \"trace (DS \\<rho>) \\<le> 1\""], ["proof (prove)\nusing this:\n  positive (DS \\<rho>) \\<and>\n  trace (DS \\<rho>) \\<le> trace \\<rho> \\<and>\n  DS \\<rho> \\<in> carrier_mat d d\n  trace \\<rho> \\<le> 1\n\ngoal (1 subgoal):\n 1. trace (DS \\<rho>) \\<le> 1", "by auto"], ["proof (state)\nthis:\n  trace (DS \\<rho>) \\<le> 1\n\ngoal (1 subgoal):\n 1. DS \\<rho> \\<in> carrier_mat d d \\<and>\n    partial_density_operator (DS \\<rho>)", "with res"], ["proof (chain)\npicking this:\n  positive (DS \\<rho>) \\<and>\n  trace (DS \\<rho>) \\<le> trace \\<rho> \\<and>\n  DS \\<rho> \\<in> carrier_mat d d\n  trace (DS \\<rho>) \\<le> 1", "show ?thesis"], ["proof (prove)\nusing this:\n  positive (DS \\<rho>) \\<and>\n  trace (DS \\<rho>) \\<le> trace \\<rho> \\<and>\n  DS \\<rho> \\<in> carrier_mat d d\n  trace (DS \\<rho>) \\<le> 1\n\ngoal (1 subgoal):\n 1. DS \\<rho> \\<in> carrier_mat d d \\<and>\n    partial_density_operator (DS \\<rho>)", "unfolding partial_density_operator_def"], ["proof (prove)\nusing this:\n  positive (DS \\<rho>) \\<and>\n  trace (DS \\<rho>) \\<le> trace \\<rho> \\<and>\n  DS \\<rho> \\<in> carrier_mat d d\n  trace (DS \\<rho>) \\<le> 1\n\ngoal (1 subgoal):\n 1. DS \\<rho> \\<in> carrier_mat d d \\<and>\n    positive (DS \\<rho>) \\<and> trace (DS \\<rho>) \\<le> 1", "by auto"], ["proof (state)\nthis:\n  DS \\<rho> \\<in> carrier_mat d d \\<and>\n  partial_density_operator (DS \\<rho>)\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<lbrakk>?\\<rho> \\<in> carrier_mat d d;\n   partial_density_operator ?\\<rho>\\<rbrakk>\n  \\<Longrightarrow> DS ?\\<rho> \\<in> carrier_mat d d \\<and>\n                    partial_density_operator (DS ?\\<rho>)\n\ngoal (1 subgoal):\n 1. trace (matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>) n)\n    \\<le> trace \\<rho>", "have dWk: \"denote_while_n_iter M0 M1 DS k \\<rho> \\<in> carrier_mat d d\" for k"], ["proof (prove)\ngoal (1 subgoal):\n 1. denote_while_n_iter M0 M1 DS k \\<rho> \\<in> carrier_mat d d", "using denote_while_n_iter_dim[OF r pdor dim1 un] DS' dim0 dim1"], ["proof (prove)\nusing this:\n  (\\<And>\\<rho>.\n      \\<lbrakk>\\<rho> \\<in> carrier_mat d d;\n       partial_density_operator \\<rho>\\<rbrakk>\n      \\<Longrightarrow> ?DS \\<rho> \\<in> carrier_mat d d \\<and>\n                        partial_density_operator\n                         (?DS \\<rho>)) \\<Longrightarrow>\n  denote_while_n_iter ?M0.0 M1 ?DS ?n \\<rho> \\<in> carrier_mat d d \\<and>\n  partial_density_operator (denote_while_n_iter ?M0.0 M1 ?DS ?n \\<rho>)\n  \\<lbrakk>?\\<rho> \\<in> carrier_mat d d;\n   partial_density_operator ?\\<rho>\\<rbrakk>\n  \\<Longrightarrow> DS ?\\<rho> \\<in> carrier_mat d d \\<and>\n                    partial_density_operator (DS ?\\<rho>)\n  M0 \\<in> carrier_mat d d\n  M1 \\<in> carrier_mat d d\n\ngoal (1 subgoal):\n 1. denote_while_n_iter M0 M1 DS k \\<rho> \\<in> carrier_mat d d", "by auto"], ["proof (state)\nthis:\n  denote_while_n_iter M0 M1 DS ?k \\<rho> \\<in> carrier_mat d d\n\ngoal (1 subgoal):\n 1. trace (matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>) n)\n    \\<le> trace \\<rho>", "have pdoWk: \"partial_density_operator (denote_while_n_iter M0 M1 DS k \\<rho>)\" for k"], ["proof (prove)\ngoal (1 subgoal):\n 1. partial_density_operator (denote_while_n_iter M0 M1 DS k \\<rho>)", "using pdo_denote_while_n_iter[OF r pdor dim1 un] DS' dim0 dim1"], ["proof (prove)\nusing this:\n  \\<lbrakk>\\<And>\\<rho>.\n              \\<rho> \\<in> carrier_mat d d \\<and>\n              partial_density_operator \\<rho> \\<Longrightarrow>\n              partial_density_operator (?DS \\<rho>);\n   \\<And>\\<rho>.\n      \\<rho> \\<in> carrier_mat d d \\<and>\n      partial_density_operator \\<rho> \\<Longrightarrow>\n      ?DS \\<rho> \\<in> carrier_mat d d\\<rbrakk>\n  \\<Longrightarrow> partial_density_operator\n                     (denote_while_n_iter ?M0.0 M1 ?DS ?n \\<rho>)\n  \\<lbrakk>?\\<rho> \\<in> carrier_mat d d;\n   partial_density_operator ?\\<rho>\\<rbrakk>\n  \\<Longrightarrow> DS ?\\<rho> \\<in> carrier_mat d d \\<and>\n                    partial_density_operator (DS ?\\<rho>)\n  M0 \\<in> carrier_mat d d\n  M1 \\<in> carrier_mat d d\n\ngoal (1 subgoal):\n 1. partial_density_operator (denote_while_n_iter M0 M1 DS k \\<rho>)", "by auto"], ["proof (state)\nthis:\n  partial_density_operator (denote_while_n_iter M0 M1 DS ?k \\<rho>)\n\ngoal (1 subgoal):\n 1. trace (matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>) n)\n    \\<le> trace \\<rho>", "have dW0k: \"denote_while_n M0 M1 DS k \\<rho> \\<in> carrier_mat d d\" for k"], ["proof (prove)\ngoal (1 subgoal):\n 1. denote_while_n M0 M1 DS k \\<rho> \\<in> carrier_mat d d", "using denote_while_n_dim r dim0 dim1 pdor"], ["proof (prove)\nusing this:\n  \\<lbrakk>?\\<rho> \\<in> carrier_mat d d; ?M0.0 \\<in> carrier_mat d d;\n   ?M1.0 \\<in> carrier_mat d d; partial_density_operator ?\\<rho>;\n   \\<And>\\<rho>'.\n      \\<lbrakk>\\<rho>' \\<in> carrier_mat d d;\n       partial_density_operator \\<rho>'\\<rbrakk>\n      \\<Longrightarrow> positive (?DS \\<rho>') \\<and>\n                        trace (?DS \\<rho>') \\<le> trace \\<rho>' \\<and>\n                        ?DS \\<rho>' \\<in> carrier_mat d d\\<rbrakk>\n  \\<Longrightarrow> denote_while_n ?M0.0 ?M1.0 ?DS ?n ?\\<rho>\n                    \\<in> carrier_mat d d\n  \\<rho> \\<in> carrier_mat d d\n  M0 \\<in> carrier_mat d d\n  M1 \\<in> carrier_mat d d\n  partial_density_operator \\<rho>\n\ngoal (1 subgoal):\n 1. denote_while_n M0 M1 DS k \\<rho> \\<in> carrier_mat d d", "by auto"], ["proof (state)\nthis:\n  denote_while_n M0 M1 DS ?k \\<rho> \\<in> carrier_mat d d\n\ngoal (1 subgoal):\n 1. trace (matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>) n)\n    \\<le> trace \\<rho>", "then"], ["proof (chain)\npicking this:\n  denote_while_n M0 M1 DS ?k \\<rho> \\<in> carrier_mat d d", "have dsW0k: \"matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>) k \\<in> carrier_mat d d\" for k"], ["proof (prove)\nusing this:\n  denote_while_n M0 M1 DS ?k \\<rho> \\<in> carrier_mat d d\n\ngoal (1 subgoal):\n 1. matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>) k\n    \\<in> carrier_mat d d", "using matrix_sum_dim[of k \"\\<lambda>k. denote_while_n M0 M1 DS k \\<rho>\"]"], ["proof (prove)\nusing this:\n  denote_while_n M0 M1 DS ?k \\<rho> \\<in> carrier_mat d d\n  (\\<And>ka.\n      ka < k \\<Longrightarrow>\n      denote_while_n M0 M1 DS ka \\<rho>\n      \\<in> carrier_mat ?d ?d) \\<Longrightarrow>\n  matrix_sum ?d (\\<lambda>k. denote_while_n M0 M1 DS k \\<rho>) k\n  \\<in> carrier_mat ?d ?d\n\ngoal (1 subgoal):\n 1. matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>) k\n    \\<in> carrier_mat d d", "by auto"], ["proof (state)\nthis:\n  matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>) ?k\n  \\<in> carrier_mat d d\n\ngoal (1 subgoal):\n 1. trace (matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>) n)\n    \\<le> trace \\<rho>", "have \"(denote_while_n_comp M0 M1 DS n \\<rho>) \\<in> carrier_mat d d\" for n"], ["proof (prove)\ngoal (1 subgoal):\n 1. denote_while_n_comp M0 M1 DS n \\<rho> \\<in> carrier_mat d d", "unfolding denote_while_n_comp.simps"], ["proof (prove)\ngoal (1 subgoal):\n 1. M1 * denote_while_n_iter M0 M1 DS n \\<rho> * adjoint M1\n    \\<in> carrier_mat d d", "using dim1 dWk"], ["proof (prove)\nusing this:\n  M1 \\<in> carrier_mat d d\n  denote_while_n_iter M0 M1 DS ?k \\<rho> \\<in> carrier_mat d d\n\ngoal (1 subgoal):\n 1. M1 * denote_while_n_iter M0 M1 DS n \\<rho> * adjoint M1\n    \\<in> carrier_mat d d", "by auto"], ["proof (state)\nthis:\n  denote_while_n_comp M0 M1 DS ?n \\<rho> \\<in> carrier_mat d d\n\ngoal (1 subgoal):\n 1. trace (matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>) n)\n    \\<le> trace \\<rho>", "moreover"], ["proof (state)\nthis:\n  denote_while_n_comp M0 M1 DS ?n \\<rho> \\<in> carrier_mat d d\n\ngoal (1 subgoal):\n 1. trace (matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>) n)\n    \\<le> trace \\<rho>", "have \n    pdoW1k: \"partial_density_operator (denote_while_n_comp M0 M1 DS n \\<rho>)\" for n"], ["proof (prove)\ngoal (1 subgoal):\n 1. partial_density_operator (denote_while_n_comp M0 M1 DS n \\<rho>)", "unfolding denote_while_n_comp.simps"], ["proof (prove)\ngoal (1 subgoal):\n 1. partial_density_operator\n     (M1 * denote_while_n_iter M0 M1 DS n \\<rho> * adjoint M1)", "using pdo_close_under_measurement[OF dim1 dWk pdoWk un]"], ["proof (prove)\nusing this:\n  partial_density_operator\n   (M1 * denote_while_n_iter M0 M1 DS ?k1 \\<rho> * adjoint M1)\n\ngoal (1 subgoal):\n 1. partial_density_operator\n     (M1 * denote_while_n_iter M0 M1 DS n \\<rho> * adjoint M1)", "by auto"], ["proof (state)\nthis:\n  partial_density_operator (denote_while_n_comp M0 M1 DS ?n \\<rho>)\n\ngoal (1 subgoal):\n 1. trace (matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>) n)\n    \\<le> trace \\<rho>", "ultimately"], ["proof (chain)\npicking this:\n  denote_while_n_comp M0 M1 DS ?n \\<rho> \\<in> carrier_mat d d\n  partial_density_operator (denote_while_n_comp M0 M1 DS ?n \\<rho>)", "have \"trace (DS (denote_while_n_comp M0 M1 DS n \\<rho>)) \\<le> trace (denote_while_n_comp M0 M1 DS n \\<rho>)\" for n"], ["proof (prove)\nusing this:\n  denote_while_n_comp M0 M1 DS ?n \\<rho> \\<in> carrier_mat d d\n  partial_density_operator (denote_while_n_comp M0 M1 DS ?n \\<rho>)\n\ngoal (1 subgoal):\n 1. trace (DS (denote_while_n_comp M0 M1 DS n \\<rho>))\n    \\<le> trace (denote_while_n_comp M0 M1 DS n \\<rho>)", "using DS"], ["proof (prove)\nusing this:\n  denote_while_n_comp M0 M1 DS ?n \\<rho> \\<in> carrier_mat d d\n  partial_density_operator (denote_while_n_comp M0 M1 DS ?n \\<rho>)\n  \\<lbrakk>?\\<rho> \\<in> carrier_mat d d;\n   partial_density_operator ?\\<rho>\\<rbrakk>\n  \\<Longrightarrow> positive (DS ?\\<rho>) \\<and>\n                    trace (DS ?\\<rho>) \\<le> trace ?\\<rho> \\<and>\n                    DS ?\\<rho> \\<in> carrier_mat d d\n\ngoal (1 subgoal):\n 1. trace (DS (denote_while_n_comp M0 M1 DS n \\<rho>))\n    \\<le> trace (denote_while_n_comp M0 M1 DS n \\<rho>)", "by auto"], ["proof (state)\nthis:\n  trace (DS (denote_while_n_comp M0 M1 DS ?n \\<rho>))\n  \\<le> trace (denote_while_n_comp M0 M1 DS ?n \\<rho>)\n\ngoal (1 subgoal):\n 1. trace (matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>) n)\n    \\<le> trace \\<rho>", "moreover"], ["proof (state)\nthis:\n  trace (DS (denote_while_n_comp M0 M1 DS ?n \\<rho>))\n  \\<le> trace (denote_while_n_comp M0 M1 DS ?n \\<rho>)\n\ngoal (1 subgoal):\n 1. trace (matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>) n)\n    \\<le> trace \\<rho>", "have \"trace (denote_while_n_iter M0 M1 DS (Suc n) \\<rho>) = trace (DS (denote_while_n_comp M0 M1 DS n \\<rho>))\" for n"], ["proof (prove)\ngoal (1 subgoal):\n 1. trace (denote_while_n_iter M0 M1 DS (Suc n) \\<rho>) =\n    trace (DS (denote_while_n_comp M0 M1 DS n \\<rho>))", "using denote_while_n_iter_assoc[folded denote_while_n_comp.simps]"], ["proof (prove)\nusing this:\n  denote_while_n_iter ?M0.0 ?M1.0 ?DS (Suc ?n) ?\\<rho> =\n  ?DS (denote_while_n_comp ?M0.0 ?M1.0 ?DS ?n ?\\<rho>)\n\ngoal (1 subgoal):\n 1. trace (denote_while_n_iter M0 M1 DS (Suc n) \\<rho>) =\n    trace (DS (denote_while_n_comp M0 M1 DS n \\<rho>))", "by auto"], ["proof (state)\nthis:\n  trace (denote_while_n_iter M0 M1 DS (Suc ?n) \\<rho>) =\n  trace (DS (denote_while_n_comp M0 M1 DS ?n \\<rho>))\n\ngoal (1 subgoal):\n 1. trace (matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>) n)\n    \\<le> trace \\<rho>", "ultimately"], ["proof (chain)\npicking this:\n  trace (DS (denote_while_n_comp M0 M1 DS ?n \\<rho>))\n  \\<le> trace (denote_while_n_comp M0 M1 DS ?n \\<rho>)\n  trace (denote_while_n_iter M0 M1 DS (Suc ?n) \\<rho>) =\n  trace (DS (denote_while_n_comp M0 M1 DS ?n \\<rho>))", "have leq3: \"trace (denote_while_n_iter M0 M1 DS (Suc n) \\<rho>) \\<le> trace (denote_while_n_comp M0 M1 DS n \\<rho>)\" for n"], ["proof (prove)\nusing this:\n  trace (DS (denote_while_n_comp M0 M1 DS ?n \\<rho>))\n  \\<le> trace (denote_while_n_comp M0 M1 DS ?n \\<rho>)\n  trace (denote_while_n_iter M0 M1 DS (Suc ?n) \\<rho>) =\n  trace (DS (denote_while_n_comp M0 M1 DS ?n \\<rho>))\n\ngoal (1 subgoal):\n 1. trace (denote_while_n_iter M0 M1 DS (Suc n) \\<rho>)\n    \\<le> trace (denote_while_n_comp M0 M1 DS n \\<rho>)", "by auto"], ["proof (state)\nthis:\n  trace (denote_while_n_iter M0 M1 DS (Suc ?n) \\<rho>)\n  \\<le> trace (denote_while_n_comp M0 M1 DS ?n \\<rho>)\n\ngoal (1 subgoal):\n 1. trace (matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>) n)\n    \\<le> trace \\<rho>", "have mainleq: \"trace (matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>) (Suc n)) + trace (denote_while_n_comp M0 M1 DS n \\<rho>) \\<le> trace \\<rho>\" for n"], ["proof (prove)\ngoal (1 subgoal):\n 1. trace\n     (matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>) (Suc n)) +\n    trace (denote_while_n_comp M0 M1 DS n \\<rho>)\n    \\<le> trace \\<rho>", "proof (induct n)"], ["proof (state)\ngoal (2 subgoals):\n 1. trace\n     (matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>) (Suc 0)) +\n    trace (denote_while_n_comp M0 M1 DS 0 \\<rho>)\n    \\<le> trace \\<rho>\n 2. \\<And>n.\n       trace\n        (matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>)\n          (Suc n)) +\n       trace (denote_while_n_comp M0 M1 DS n \\<rho>)\n       \\<le> trace \\<rho> \\<Longrightarrow>\n       trace\n        (matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>)\n          (Suc (Suc n))) +\n       trace (denote_while_n_comp M0 M1 DS (Suc n) \\<rho>)\n       \\<le> trace \\<rho>", "case 0"], ["proof (state)\nthis:\n  \n\ngoal (2 subgoals):\n 1. trace\n     (matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>) (Suc 0)) +\n    trace (denote_while_n_comp M0 M1 DS 0 \\<rho>)\n    \\<le> trace \\<rho>\n 2. \\<And>n.\n       trace\n        (matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>)\n          (Suc n)) +\n       trace (denote_while_n_comp M0 M1 DS n \\<rho>)\n       \\<le> trace \\<rho> \\<Longrightarrow>\n       trace\n        (matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>)\n          (Suc (Suc n))) +\n       trace (denote_while_n_comp M0 M1 DS (Suc n) \\<rho>)\n       \\<le> trace \\<rho>", "then"], ["proof (chain)\npicking this:", "show ?case"], ["proof (prove)\ngoal (1 subgoal):\n 1. trace\n     (matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>) (Suc 0)) +\n    trace (denote_while_n_comp M0 M1 DS 0 \\<rho>)\n    \\<le> trace \\<rho>", "unfolding matrix_sum.simps denote_while_n.simps denote_while_n_comp.simps denote_while_n_iter.simps"], ["proof (prove)\ngoal (1 subgoal):\n 1. trace (M0 * \\<rho> * adjoint M0 + 0\\<^sub>m d d) +\n    trace (M1 * \\<rho> * adjoint M1)\n    \\<le> trace \\<rho>", "apply (subgoal_tac \"M0 * \\<rho> * adjoint M0 + 0\\<^sub>m d d = M0 * \\<rho> * adjoint M0\")"], ["proof (prove)\ngoal (2 subgoals):\n 1. M0 * \\<rho> * adjoint M0 + 0\\<^sub>m d d =\n    M0 * \\<rho> * adjoint M0 \\<Longrightarrow>\n    trace (M0 * \\<rho> * adjoint M0 + 0\\<^sub>m d d) +\n    trace (M1 * \\<rho> * adjoint M1)\n    \\<le> trace \\<rho>\n 2. M0 * \\<rho> * adjoint M0 + 0\\<^sub>m d d = M0 * \\<rho> * adjoint M0", "using trace_measure2_id[OF dim0 dim1 id r] dim0"], ["proof (prove)\nusing this:\n  trace (M0 * \\<rho> * adjoint M0) + trace (M1 * \\<rho> * adjoint M1) =\n  trace \\<rho>\n  M0 \\<in> carrier_mat d d\n\ngoal (2 subgoals):\n 1. M0 * \\<rho> * adjoint M0 + 0\\<^sub>m d d =\n    M0 * \\<rho> * adjoint M0 \\<Longrightarrow>\n    trace (M0 * \\<rho> * adjoint M0 + 0\\<^sub>m d d) +\n    trace (M1 * \\<rho> * adjoint M1)\n    \\<le> trace \\<rho>\n 2. M0 * \\<rho> * adjoint M0 + 0\\<^sub>m d d = M0 * \\<rho> * adjoint M0", "apply simp"], ["proof (prove)\ngoal (1 subgoal):\n 1. M0 * \\<rho> * adjoint M0 + 0\\<^sub>m d d = M0 * \\<rho> * adjoint M0", "using dim0"], ["proof (prove)\nusing this:\n  M0 \\<in> carrier_mat d d\n\ngoal (1 subgoal):\n 1. M0 * \\<rho> * adjoint M0 + 0\\<^sub>m d d = M0 * \\<rho> * adjoint M0", "by auto"], ["proof (state)\nthis:\n  trace\n   (matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>) (Suc 0)) +\n  trace (denote_while_n_comp M0 M1 DS 0 \\<rho>)\n  \\<le> trace \\<rho>\n\ngoal (1 subgoal):\n 1. \\<And>n.\n       trace\n        (matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>)\n          (Suc n)) +\n       trace (denote_while_n_comp M0 M1 DS n \\<rho>)\n       \\<le> trace \\<rho> \\<Longrightarrow>\n       trace\n        (matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>)\n          (Suc (Suc n))) +\n       trace (denote_while_n_comp M0 M1 DS (Suc n) \\<rho>)\n       \\<le> trace \\<rho>", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>n.\n       trace\n        (matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>)\n          (Suc n)) +\n       trace (denote_while_n_comp M0 M1 DS n \\<rho>)\n       \\<le> trace \\<rho> \\<Longrightarrow>\n       trace\n        (matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>)\n          (Suc (Suc n))) +\n       trace (denote_while_n_comp M0 M1 DS (Suc n) \\<rho>)\n       \\<le> trace \\<rho>", "case (Suc n)"], ["proof (state)\nthis:\n  trace\n   (matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>) (Suc n)) +\n  trace (denote_while_n_comp M0 M1 DS n \\<rho>)\n  \\<le> trace \\<rho>\n\ngoal (1 subgoal):\n 1. \\<And>n.\n       trace\n        (matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>)\n          (Suc n)) +\n       trace (denote_while_n_comp M0 M1 DS n \\<rho>)\n       \\<le> trace \\<rho> \\<Longrightarrow>\n       trace\n        (matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>)\n          (Suc (Suc n))) +\n       trace (denote_while_n_comp M0 M1 DS (Suc n) \\<rho>)\n       \\<le> trace \\<rho>", "have eq1: \"trace (matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>) (Suc (Suc n))) \n      = trace (denote_while_n M0 M1 DS (Suc n) \\<rho>) + trace (matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>) (Suc n))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. trace\n     (matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>)\n       (Suc (Suc n))) =\n    trace (denote_while_n M0 M1 DS (Suc n) \\<rho>) +\n    trace\n     (matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>) (Suc n))", "unfolding matrix_sum.simps"], ["proof (prove)\ngoal (1 subgoal):\n 1. trace\n     (denote_while_n M0 M1 DS (Suc n) \\<rho> +\n      (denote_while_n M0 M1 DS n \\<rho> +\n       matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>) n)) =\n    trace (denote_while_n M0 M1 DS (Suc n) \\<rho>) +\n    trace\n     (denote_while_n M0 M1 DS n \\<rho> +\n      matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>) n)", "using trace_add_linear dW0k[of \"Suc n\"] dsW0k[of \"Suc n\"]"], ["proof (prove)\nusing this:\n  \\<lbrakk>?A \\<in> carrier_mat ?n ?n; ?B \\<in> carrier_mat ?n ?n\\<rbrakk>\n  \\<Longrightarrow> trace (?A + ?B) = trace ?A + trace ?B\n  denote_while_n M0 M1 DS (Suc n) \\<rho> \\<in> carrier_mat d d\n  matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>) (Suc n)\n  \\<in> carrier_mat d d\n\ngoal (1 subgoal):\n 1. trace\n     (denote_while_n M0 M1 DS (Suc n) \\<rho> +\n      (denote_while_n M0 M1 DS n \\<rho> +\n       matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>) n)) =\n    trace (denote_while_n M0 M1 DS (Suc n) \\<rho>) +\n    trace\n     (denote_while_n M0 M1 DS n \\<rho> +\n      matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>) n)", "by auto"], ["proof (state)\nthis:\n  trace\n   (matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>)\n     (Suc (Suc n))) =\n  trace (denote_while_n M0 M1 DS (Suc n) \\<rho>) +\n  trace\n   (matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>) (Suc n))\n\ngoal (1 subgoal):\n 1. \\<And>n.\n       trace\n        (matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>)\n          (Suc n)) +\n       trace (denote_while_n_comp M0 M1 DS n \\<rho>)\n       \\<le> trace \\<rho> \\<Longrightarrow>\n       trace\n        (matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>)\n          (Suc (Suc n))) +\n       trace (denote_while_n_comp M0 M1 DS (Suc n) \\<rho>)\n       \\<le> trace \\<rho>", "have eq2: \"trace (denote_while_n M0 M1 DS (Suc n) \\<rho>) + trace (denote_while_n_comp M0 M1 DS (Suc n) \\<rho>) \n      = trace (denote_while_n_iter M0 M1 DS (Suc n) \\<rho>)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. trace (denote_while_n M0 M1 DS (Suc n) \\<rho>) +\n    trace (denote_while_n_comp M0 M1 DS (Suc n) \\<rho>) =\n    trace (denote_while_n_iter M0 M1 DS (Suc n) \\<rho>)", "unfolding denote_while_n.simps denote_while_n_comp.simps"], ["proof (prove)\ngoal (1 subgoal):\n 1. trace (M0 * denote_while_n_iter M0 M1 DS (Suc n) \\<rho> * adjoint M0) +\n    trace (M1 * denote_while_n_iter M0 M1 DS (Suc n) \\<rho> * adjoint M1) =\n    trace (denote_while_n_iter M0 M1 DS (Suc n) \\<rho>)", "using trace_measure2_id[OF dim0 dim1 id dWk[of \"Suc n\"]]"], ["proof (prove)\nusing this:\n  trace (M0 * denote_while_n_iter M0 M1 DS (Suc n) \\<rho> * adjoint M0) +\n  trace (M1 * denote_while_n_iter M0 M1 DS (Suc n) \\<rho> * adjoint M1) =\n  trace (denote_while_n_iter M0 M1 DS (Suc n) \\<rho>)\n\ngoal (1 subgoal):\n 1. trace (M0 * denote_while_n_iter M0 M1 DS (Suc n) \\<rho> * adjoint M0) +\n    trace (M1 * denote_while_n_iter M0 M1 DS (Suc n) \\<rho> * adjoint M1) =\n    trace (denote_while_n_iter M0 M1 DS (Suc n) \\<rho>)", "by auto"], ["proof (state)\nthis:\n  trace (denote_while_n M0 M1 DS (Suc n) \\<rho>) +\n  trace (denote_while_n_comp M0 M1 DS (Suc n) \\<rho>) =\n  trace (denote_while_n_iter M0 M1 DS (Suc n) \\<rho>)\n\ngoal (1 subgoal):\n 1. \\<And>n.\n       trace\n        (matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>)\n          (Suc n)) +\n       trace (denote_while_n_comp M0 M1 DS n \\<rho>)\n       \\<le> trace \\<rho> \\<Longrightarrow>\n       trace\n        (matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>)\n          (Suc (Suc n))) +\n       trace (denote_while_n_comp M0 M1 DS (Suc n) \\<rho>)\n       \\<le> trace \\<rho>", "have \"trace (matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>) (Suc (Suc n))) + trace (denote_while_n_comp M0 M1 DS (Suc n) \\<rho>)\n    = trace (matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>) (Suc n)) + trace (denote_while_n M0 M1 DS (Suc n) \\<rho>) + trace (denote_while_n_comp M0 M1 DS (Suc n) \\<rho>)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. trace\n     (matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>)\n       (Suc (Suc n))) +\n    trace (denote_while_n_comp M0 M1 DS (Suc n) \\<rho>) =\n    trace\n     (matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>) (Suc n)) +\n    trace (denote_while_n M0 M1 DS (Suc n) \\<rho>) +\n    trace (denote_while_n_comp M0 M1 DS (Suc n) \\<rho>)", "using eq1"], ["proof (prove)\nusing this:\n  trace\n   (matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>)\n     (Suc (Suc n))) =\n  trace (denote_while_n M0 M1 DS (Suc n) \\<rho>) +\n  trace\n   (matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>) (Suc n))\n\ngoal (1 subgoal):\n 1. trace\n     (matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>)\n       (Suc (Suc n))) +\n    trace (denote_while_n_comp M0 M1 DS (Suc n) \\<rho>) =\n    trace\n     (matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>) (Suc n)) +\n    trace (denote_while_n M0 M1 DS (Suc n) \\<rho>) +\n    trace (denote_while_n_comp M0 M1 DS (Suc n) \\<rho>)", "by auto"], ["proof (state)\nthis:\n  trace\n   (matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>)\n     (Suc (Suc n))) +\n  trace (denote_while_n_comp M0 M1 DS (Suc n) \\<rho>) =\n  trace\n   (matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>) (Suc n)) +\n  trace (denote_while_n M0 M1 DS (Suc n) \\<rho>) +\n  trace (denote_while_n_comp M0 M1 DS (Suc n) \\<rho>)\n\ngoal (1 subgoal):\n 1. \\<And>n.\n       trace\n        (matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>)\n          (Suc n)) +\n       trace (denote_while_n_comp M0 M1 DS n \\<rho>)\n       \\<le> trace \\<rho> \\<Longrightarrow>\n       trace\n        (matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>)\n          (Suc (Suc n))) +\n       trace (denote_while_n_comp M0 M1 DS (Suc n) \\<rho>)\n       \\<le> trace \\<rho>", "also"], ["proof (state)\nthis:\n  trace\n   (matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>)\n     (Suc (Suc n))) +\n  trace (denote_while_n_comp M0 M1 DS (Suc n) \\<rho>) =\n  trace\n   (matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>) (Suc n)) +\n  trace (denote_while_n M0 M1 DS (Suc n) \\<rho>) +\n  trace (denote_while_n_comp M0 M1 DS (Suc n) \\<rho>)\n\ngoal (1 subgoal):\n 1. \\<And>n.\n       trace\n        (matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>)\n          (Suc n)) +\n       trace (denote_while_n_comp M0 M1 DS n \\<rho>)\n       \\<le> trace \\<rho> \\<Longrightarrow>\n       trace\n        (matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>)\n          (Suc (Suc n))) +\n       trace (denote_while_n_comp M0 M1 DS (Suc n) \\<rho>)\n       \\<le> trace \\<rho>", "have \"\\<dots> = trace (matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>) (Suc n)) + trace (denote_while_n_iter M0 M1 DS (Suc n) \\<rho>)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. trace\n     (matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>) (Suc n)) +\n    trace (denote_while_n M0 M1 DS (Suc n) \\<rho>) +\n    trace (denote_while_n_comp M0 M1 DS (Suc n) \\<rho>) =\n    trace\n     (matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>) (Suc n)) +\n    trace (denote_while_n_iter M0 M1 DS (Suc n) \\<rho>)", "using eq2"], ["proof (prove)\nusing this:\n  trace (denote_while_n M0 M1 DS (Suc n) \\<rho>) +\n  trace (denote_while_n_comp M0 M1 DS (Suc n) \\<rho>) =\n  trace (denote_while_n_iter M0 M1 DS (Suc n) \\<rho>)\n\ngoal (1 subgoal):\n 1. trace\n     (matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>) (Suc n)) +\n    trace (denote_while_n M0 M1 DS (Suc n) \\<rho>) +\n    trace (denote_while_n_comp M0 M1 DS (Suc n) \\<rho>) =\n    trace\n     (matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>) (Suc n)) +\n    trace (denote_while_n_iter M0 M1 DS (Suc n) \\<rho>)", "by auto"], ["proof (state)\nthis:\n  trace\n   (matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>) (Suc n)) +\n  trace (denote_while_n M0 M1 DS (Suc n) \\<rho>) +\n  trace (denote_while_n_comp M0 M1 DS (Suc n) \\<rho>) =\n  trace\n   (matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>) (Suc n)) +\n  trace (denote_while_n_iter M0 M1 DS (Suc n) \\<rho>)\n\ngoal (1 subgoal):\n 1. \\<And>n.\n       trace\n        (matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>)\n          (Suc n)) +\n       trace (denote_while_n_comp M0 M1 DS n \\<rho>)\n       \\<le> trace \\<rho> \\<Longrightarrow>\n       trace\n        (matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>)\n          (Suc (Suc n))) +\n       trace (denote_while_n_comp M0 M1 DS (Suc n) \\<rho>)\n       \\<le> trace \\<rho>", "also"], ["proof (state)\nthis:\n  trace\n   (matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>) (Suc n)) +\n  trace (denote_while_n M0 M1 DS (Suc n) \\<rho>) +\n  trace (denote_while_n_comp M0 M1 DS (Suc n) \\<rho>) =\n  trace\n   (matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>) (Suc n)) +\n  trace (denote_while_n_iter M0 M1 DS (Suc n) \\<rho>)\n\ngoal (1 subgoal):\n 1. \\<And>n.\n       trace\n        (matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>)\n          (Suc n)) +\n       trace (denote_while_n_comp M0 M1 DS n \\<rho>)\n       \\<le> trace \\<rho> \\<Longrightarrow>\n       trace\n        (matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>)\n          (Suc (Suc n))) +\n       trace (denote_while_n_comp M0 M1 DS (Suc n) \\<rho>)\n       \\<le> trace \\<rho>", "have \"\\<dots> \\<le> trace (matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>) (Suc n)) + trace (denote_while_n_comp M0 M1 DS n \\<rho>)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. trace\n     (matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>) (Suc n)) +\n    trace (denote_while_n_iter M0 M1 DS (Suc n) \\<rho>)\n    \\<le> trace\n           (matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>)\n             (Suc n)) +\n          trace (denote_while_n_comp M0 M1 DS n \\<rho>)", "using leq3"], ["proof (prove)\nusing this:\n  trace (denote_while_n_iter M0 M1 DS (Suc ?n) \\<rho>)\n  \\<le> trace (denote_while_n_comp M0 M1 DS ?n \\<rho>)\n\ngoal (1 subgoal):\n 1. trace\n     (matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>) (Suc n)) +\n    trace (denote_while_n_iter M0 M1 DS (Suc n) \\<rho>)\n    \\<le> trace\n           (matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>)\n             (Suc n)) +\n          trace (denote_while_n_comp M0 M1 DS n \\<rho>)", "by auto"], ["proof (state)\nthis:\n  trace\n   (matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>) (Suc n)) +\n  trace (denote_while_n_iter M0 M1 DS (Suc n) \\<rho>)\n  \\<le> trace\n         (matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>)\n           (Suc n)) +\n        trace (denote_while_n_comp M0 M1 DS n \\<rho>)\n\ngoal (1 subgoal):\n 1. \\<And>n.\n       trace\n        (matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>)\n          (Suc n)) +\n       trace (denote_while_n_comp M0 M1 DS n \\<rho>)\n       \\<le> trace \\<rho> \\<Longrightarrow>\n       trace\n        (matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>)\n          (Suc (Suc n))) +\n       trace (denote_while_n_comp M0 M1 DS (Suc n) \\<rho>)\n       \\<le> trace \\<rho>", "also"], ["proof (state)\nthis:\n  trace\n   (matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>) (Suc n)) +\n  trace (denote_while_n_iter M0 M1 DS (Suc n) \\<rho>)\n  \\<le> trace\n         (matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>)\n           (Suc n)) +\n        trace (denote_while_n_comp M0 M1 DS n \\<rho>)\n\ngoal (1 subgoal):\n 1. \\<And>n.\n       trace\n        (matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>)\n          (Suc n)) +\n       trace (denote_while_n_comp M0 M1 DS n \\<rho>)\n       \\<le> trace \\<rho> \\<Longrightarrow>\n       trace\n        (matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>)\n          (Suc (Suc n))) +\n       trace (denote_while_n_comp M0 M1 DS (Suc n) \\<rho>)\n       \\<le> trace \\<rho>", "have \"\\<dots> \\<le> trace \\<rho>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. trace\n     (matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>) (Suc n)) +\n    trace (denote_while_n_comp M0 M1 DS n \\<rho>)\n    \\<le> trace \\<rho>", "using Suc"], ["proof (prove)\nusing this:\n  trace\n   (matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>) (Suc n)) +\n  trace (denote_while_n_comp M0 M1 DS n \\<rho>)\n  \\<le> trace \\<rho>\n\ngoal (1 subgoal):\n 1. trace\n     (matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>) (Suc n)) +\n    trace (denote_while_n_comp M0 M1 DS n \\<rho>)\n    \\<le> trace \\<rho>", "by auto"], ["proof (state)\nthis:\n  trace\n   (matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>) (Suc n)) +\n  trace (denote_while_n_comp M0 M1 DS n \\<rho>)\n  \\<le> trace \\<rho>\n\ngoal (1 subgoal):\n 1. \\<And>n.\n       trace\n        (matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>)\n          (Suc n)) +\n       trace (denote_while_n_comp M0 M1 DS n \\<rho>)\n       \\<le> trace \\<rho> \\<Longrightarrow>\n       trace\n        (matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>)\n          (Suc (Suc n))) +\n       trace (denote_while_n_comp M0 M1 DS (Suc n) \\<rho>)\n       \\<le> trace \\<rho>", "finally"], ["proof (chain)\npicking this:\n  trace\n   (matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>)\n     (Suc (Suc n))) +\n  trace (denote_while_n_comp M0 M1 DS (Suc n) \\<rho>)\n  \\<le> trace \\<rho>", "show ?case"], ["proof (prove)\nusing this:\n  trace\n   (matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>)\n     (Suc (Suc n))) +\n  trace (denote_while_n_comp M0 M1 DS (Suc n) \\<rho>)\n  \\<le> trace \\<rho>\n\ngoal (1 subgoal):\n 1. trace\n     (matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>)\n       (Suc (Suc n))) +\n    trace (denote_while_n_comp M0 M1 DS (Suc n) \\<rho>)\n    \\<le> trace \\<rho>", "."], ["proof (state)\nthis:\n  trace\n   (matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>)\n     (Suc (Suc n))) +\n  trace (denote_while_n_comp M0 M1 DS (Suc n) \\<rho>)\n  \\<le> trace \\<rho>\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  trace\n   (matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>) (Suc ?n)) +\n  trace (denote_while_n_comp M0 M1 DS ?n \\<rho>)\n  \\<le> trace \\<rho>\n\ngoal (1 subgoal):\n 1. trace (matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>) n)\n    \\<le> trace \\<rho>", "have reduce_le_complex: \"(b::complex) \\<ge> 0 \\<Longrightarrow> a + b \\<le> c \\<Longrightarrow> a \\<le> c\" for a b c"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>0 \\<le> b; a + b \\<le> c\\<rbrakk> \\<Longrightarrow> a \\<le> c", "by simp"], ["proof (state)\nthis:\n  \\<lbrakk>0 \\<le> ?b; ?a + ?b \\<le> ?c\\<rbrakk>\n  \\<Longrightarrow> ?a \\<le> ?c\n\ngoal (1 subgoal):\n 1. trace (matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>) n)\n    \\<le> trace \\<rho>", "have \"positive (denote_while_n_comp M0 M1 DS n \\<rho>)\" for n"], ["proof (prove)\ngoal (1 subgoal):\n 1. positive (denote_while_n_comp M0 M1 DS n \\<rho>)", "using pdoW1k"], ["proof (prove)\nusing this:\n  partial_density_operator (denote_while_n_comp M0 M1 DS ?n \\<rho>)\n\ngoal (1 subgoal):\n 1. positive (denote_while_n_comp M0 M1 DS n \\<rho>)", "unfolding partial_density_operator_def"], ["proof (prove)\nusing this:\n  positive (denote_while_n_comp M0 M1 DS ?n \\<rho>) \\<and>\n  trace (denote_while_n_comp M0 M1 DS ?n \\<rho>) \\<le> 1\n\ngoal (1 subgoal):\n 1. positive (denote_while_n_comp M0 M1 DS n \\<rho>)", "by auto"], ["proof (state)\nthis:\n  positive (denote_while_n_comp M0 M1 DS ?n \\<rho>)\n\ngoal (1 subgoal):\n 1. trace (matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>) n)\n    \\<le> trace \\<rho>", "then"], ["proof (chain)\npicking this:\n  positive (denote_while_n_comp M0 M1 DS ?n \\<rho>)", "have \"trace (denote_while_n_comp M0 M1 DS n \\<rho>) \\<ge> 0\" for n"], ["proof (prove)\nusing this:\n  positive (denote_while_n_comp M0 M1 DS ?n \\<rho>)\n\ngoal (1 subgoal):\n 1. 0 \\<le> trace (denote_while_n_comp M0 M1 DS n \\<rho>)", "using positive_trace"], ["proof (prove)\nusing this:\n  positive (denote_while_n_comp M0 M1 DS ?n \\<rho>)\n  \\<lbrakk>?A \\<in> carrier_mat ?n ?n; positive ?A\\<rbrakk>\n  \\<Longrightarrow> 0 \\<le> trace ?A\n\ngoal (1 subgoal):\n 1. 0 \\<le> trace (denote_while_n_comp M0 M1 DS n \\<rho>)", "using \\<open>\\<And>n. denote_while_n_comp M0 M1 DS n \\<rho> \\<in> carrier_mat d d\\<close>"], ["proof (prove)\nusing this:\n  positive (denote_while_n_comp M0 M1 DS ?n \\<rho>)\n  \\<lbrakk>?A \\<in> carrier_mat ?n ?n; positive ?A\\<rbrakk>\n  \\<Longrightarrow> 0 \\<le> trace ?A\n  denote_while_n_comp M0 M1 DS ?n \\<rho> \\<in> carrier_mat d d\n\ngoal (1 subgoal):\n 1. 0 \\<le> trace (denote_while_n_comp M0 M1 DS n \\<rho>)", "by blast"], ["proof (state)\nthis:\n  0 \\<le> trace (denote_while_n_comp M0 M1 DS ?n \\<rho>)\n\ngoal (1 subgoal):\n 1. trace (matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>) n)\n    \\<le> trace \\<rho>", "then"], ["proof (chain)\npicking this:\n  0 \\<le> trace (denote_while_n_comp M0 M1 DS ?n \\<rho>)", "have \"trace (matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>) (Suc n)) \\<le> trace \\<rho>\" for n"], ["proof (prove)\nusing this:\n  0 \\<le> trace (denote_while_n_comp M0 M1 DS ?n \\<rho>)\n\ngoal (1 subgoal):\n 1. trace\n     (matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>) (Suc n))\n    \\<le> trace \\<rho>", "using mainleq reduce_le_complex[of \"trace (denote_while_n_comp M0 M1 DS n \\<rho>)\"]"], ["proof (prove)\nusing this:\n  0 \\<le> trace (denote_while_n_comp M0 M1 DS ?n \\<rho>)\n  trace\n   (matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>) (Suc ?n)) +\n  trace (denote_while_n_comp M0 M1 DS ?n \\<rho>)\n  \\<le> trace \\<rho>\n  \\<lbrakk>0 \\<le> trace (denote_while_n_comp M0 M1 DS n \\<rho>);\n   ?a + trace (denote_while_n_comp M0 M1 DS n \\<rho>) \\<le> ?c\\<rbrakk>\n  \\<Longrightarrow> ?a \\<le> ?c\n\ngoal (1 subgoal):\n 1. trace\n     (matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>) (Suc n))\n    \\<le> trace \\<rho>", "by auto"], ["proof (state)\nthis:\n  trace\n   (matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>) (Suc ?n))\n  \\<le> trace \\<rho>\n\ngoal (1 subgoal):\n 1. trace (matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>) n)\n    \\<le> trace \\<rho>", "moreover"], ["proof (state)\nthis:\n  trace\n   (matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>) (Suc ?n))\n  \\<le> trace \\<rho>\n\ngoal (1 subgoal):\n 1. trace (matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>) n)\n    \\<le> trace \\<rho>", "have \"trace (matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>) 0) \\<le> trace \\<rho>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. trace (matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>) 0)\n    \\<le> trace \\<rho>", "unfolding matrix_sum.simps"], ["proof (prove)\ngoal (1 subgoal):\n 1. trace (0\\<^sub>m d d) \\<le> trace \\<rho>", "using trace_zero positive_trace pdor"], ["proof (prove)\nusing this:\n  trace (0\\<^sub>m ?n ?n) = (0::?'a)\n  \\<lbrakk>?A \\<in> carrier_mat ?n ?n; positive ?A\\<rbrakk>\n  \\<Longrightarrow> 0 \\<le> trace ?A\n  partial_density_operator \\<rho>\n\ngoal (1 subgoal):\n 1. trace (0\\<^sub>m d d) \\<le> trace \\<rho>", "unfolding partial_density_operator_def"], ["proof (prove)\nusing this:\n  trace (0\\<^sub>m ?n ?n) = (0::?'a)\n  \\<lbrakk>?A \\<in> carrier_mat ?n ?n; positive ?A\\<rbrakk>\n  \\<Longrightarrow> 0 \\<le> trace ?A\n  positive \\<rho> \\<and> trace \\<rho> \\<le> 1\n\ngoal (1 subgoal):\n 1. trace (0\\<^sub>m d d) \\<le> trace \\<rho>", "using r"], ["proof (prove)\nusing this:\n  trace (0\\<^sub>m ?n ?n) = (0::?'a)\n  \\<lbrakk>?A \\<in> carrier_mat ?n ?n; positive ?A\\<rbrakk>\n  \\<Longrightarrow> 0 \\<le> trace ?A\n  positive \\<rho> \\<and> trace \\<rho> \\<le> 1\n  \\<rho> \\<in> carrier_mat d d\n\ngoal (1 subgoal):\n 1. trace (0\\<^sub>m d d) \\<le> trace \\<rho>", "by auto"], ["proof (state)\nthis:\n  trace (matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>) 0)\n  \\<le> trace \\<rho>\n\ngoal (1 subgoal):\n 1. trace (matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>) n)\n    \\<le> trace \\<rho>", "ultimately"], ["proof (chain)\npicking this:\n  trace\n   (matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>) (Suc ?n))\n  \\<le> trace \\<rho>\n  trace (matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>) 0)\n  \\<le> trace \\<rho>", "show \"trace (matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>) n) \\<le> trace \\<rho>\" for n"], ["proof (prove)\nusing this:\n  trace\n   (matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>) (Suc ?n))\n  \\<le> trace \\<rho>\n  trace (matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>) 0)\n  \\<le> trace \\<rho>\n\ngoal (1 subgoal):\n 1. trace (matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>) n)\n    \\<le> trace \\<rho>", "apply (induct n)"], ["proof (prove)\ngoal (2 subgoals):\n 1. \\<lbrakk>\\<And>n.\n                trace\n                 (matrix_sum d\n                   (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>) (Suc n))\n                \\<le> trace \\<rho>;\n     trace (matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>) 0)\n     \\<le> trace \\<rho>\\<rbrakk>\n    \\<Longrightarrow> trace\n                       (matrix_sum d\n                         (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>) 0)\n                      \\<le> trace \\<rho>\n 2. \\<And>n.\n       \\<lbrakk>\\<lbrakk>\\<And>n.\n                            trace\n                             (matrix_sum d\n                               (\\<lambda>n.\n                                   denote_while_n M0 M1 DS n \\<rho>)\n                               (Suc n))\n                            \\<le> trace \\<rho>;\n                 trace\n                  (matrix_sum d\n                    (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>) 0)\n                 \\<le> trace \\<rho>\\<rbrakk>\n                \\<Longrightarrow> trace\n                                   (matrix_sum d\n                                     (\\<lambda>n.\n   denote_while_n M0 M1 DS n \\<rho>)\n                                     n)\n                                  \\<le> trace \\<rho>;\n        \\<And>n.\n           trace\n            (matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>)\n              (Suc n))\n           \\<le> trace \\<rho>;\n        trace\n         (matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>) 0)\n        \\<le> trace \\<rho>\\<rbrakk>\n       \\<Longrightarrow> trace\n                          (matrix_sum d\n                            (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>)\n                            (Suc n))\n                         \\<le> trace \\<rho>", "by auto"], ["proof (state)\nthis:\n  trace (matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>) ?n)\n  \\<le> trace \\<rho>\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma denote_while_n_sum_partial_density:\n  assumes dim0: \"M0 \\<in> carrier_mat d d\" and dim1: \"M1 \\<in> carrier_mat d d\" and id: \"adjoint M0 * M0 + adjoint M1 * M1 = 1\\<^sub>m d\"\n      and DS: \"\\<And>\\<rho>. \\<rho> \\<in> carrier_mat d d \\<Longrightarrow> partial_density_operator \\<rho> \\<Longrightarrow> positive (DS \\<rho>) \\<and> trace (DS \\<rho>) \\<le> trace \\<rho> \\<and> DS \\<rho> \\<in> carrier_mat d d\"\n      and pdo: \"partial_density_operator \\<rho>\" and r: \" \\<rho> \\<in> carrier_mat d d\" \n  shows \"(partial_density_operator (matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>) n))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. partial_density_operator\n     (matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>) n)", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. partial_density_operator\n     (matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>) n)", "have \"trace (matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>) n) \\<le> trace \\<rho>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. trace (matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>) n)\n    \\<le> trace \\<rho>", "using denote_while_n_sum_trace assms"], ["proof (prove)\nusing this:\n  \\<lbrakk>?M0.0 \\<in> carrier_mat d d; ?M1.0 \\<in> carrier_mat d d;\n   adjoint ?M0.0 * ?M0.0 + adjoint ?M1.0 * ?M1.0 = 1\\<^sub>m d;\n   \\<And>\\<rho>.\n      \\<lbrakk>\\<rho> \\<in> carrier_mat d d;\n       partial_density_operator \\<rho>\\<rbrakk>\n      \\<Longrightarrow> positive (?DS \\<rho>) \\<and>\n                        trace (?DS \\<rho>) \\<le> trace \\<rho> \\<and>\n                        ?DS \\<rho> \\<in> carrier_mat d d;\n   ?\\<rho> \\<in> carrier_mat d d; partial_density_operator ?\\<rho>\\<rbrakk>\n  \\<Longrightarrow> trace\n                     (matrix_sum d\n                       (\\<lambda>n.\n                           denote_while_n ?M0.0 ?M1.0 ?DS n ?\\<rho>)\n                       ?n)\n                    \\<le> trace ?\\<rho>\n  M0 \\<in> carrier_mat d d\n  M1 \\<in> carrier_mat d d\n  adjoint M0 * M0 + adjoint M1 * M1 = 1\\<^sub>m d\n  \\<lbrakk>?\\<rho> \\<in> carrier_mat d d;\n   partial_density_operator ?\\<rho>\\<rbrakk>\n  \\<Longrightarrow> positive (DS ?\\<rho>) \\<and>\n                    trace (DS ?\\<rho>) \\<le> trace ?\\<rho> \\<and>\n                    DS ?\\<rho> \\<in> carrier_mat d d\n  partial_density_operator \\<rho>\n  \\<rho> \\<in> carrier_mat d d\n\ngoal (1 subgoal):\n 1. trace (matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>) n)\n    \\<le> trace \\<rho>", "by auto"], ["proof (state)\nthis:\n  trace (matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>) n)\n  \\<le> trace \\<rho>\n\ngoal (1 subgoal):\n 1. partial_density_operator\n     (matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>) n)", "then"], ["proof (chain)\npicking this:\n  trace (matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>) n)\n  \\<le> trace \\<rho>", "have \"trace (matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>) n) \\<le> 1\""], ["proof (prove)\nusing this:\n  trace (matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>) n)\n  \\<le> trace \\<rho>\n\ngoal (1 subgoal):\n 1. trace (matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>) n)\n    \\<le> 1", "using pdo"], ["proof (prove)\nusing this:\n  trace (matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>) n)\n  \\<le> trace \\<rho>\n  partial_density_operator \\<rho>\n\ngoal (1 subgoal):\n 1. trace (matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>) n)\n    \\<le> 1", "unfolding partial_density_operator_def"], ["proof (prove)\nusing this:\n  trace (matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>) n)\n  \\<le> trace \\<rho>\n  positive \\<rho> \\<and> trace \\<rho> \\<le> 1\n\ngoal (1 subgoal):\n 1. trace (matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>) n)\n    \\<le> 1", "by auto"], ["proof (state)\nthis:\n  trace (matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>) n)\n  \\<le> 1\n\ngoal (1 subgoal):\n 1. partial_density_operator\n     (matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>) n)", "moreover"], ["proof (state)\nthis:\n  trace (matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>) n)\n  \\<le> 1\n\ngoal (1 subgoal):\n 1. partial_density_operator\n     (matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>) n)", "have \"positive (matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>) n)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. positive (matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>) n)", "using assms DS denote_while_n_sum_positive measurement_lowner_le_one1[OF dim0 dim1 id]"], ["proof (prove)\nusing this:\n  M0 \\<in> carrier_mat d d\n  M1 \\<in> carrier_mat d d\n  adjoint M0 * M0 + adjoint M1 * M1 = 1\\<^sub>m d\n  \\<lbrakk>?\\<rho> \\<in> carrier_mat d d;\n   partial_density_operator ?\\<rho>\\<rbrakk>\n  \\<Longrightarrow> positive (DS ?\\<rho>) \\<and>\n                    trace (DS ?\\<rho>) \\<le> trace ?\\<rho> \\<and>\n                    DS ?\\<rho> \\<in> carrier_mat d d\n  partial_density_operator \\<rho>\n  \\<rho> \\<in> carrier_mat d d\n  \\<lbrakk>?\\<rho> \\<in> carrier_mat d d;\n   partial_density_operator ?\\<rho>\\<rbrakk>\n  \\<Longrightarrow> positive (DS ?\\<rho>) \\<and>\n                    trace (DS ?\\<rho>) \\<le> trace ?\\<rho> \\<and>\n                    DS ?\\<rho> \\<in> carrier_mat d d\n  \\<lbrakk>?M0.0 \\<in> carrier_mat d d; ?M1.0 \\<in> carrier_mat d d;\n   adjoint ?M1.0 * ?M1.0 \\<le>\\<^sub>L 1\\<^sub>m d;\n   \\<And>\\<rho>.\n      \\<lbrakk>\\<rho> \\<in> carrier_mat d d;\n       partial_density_operator \\<rho>\\<rbrakk>\n      \\<Longrightarrow> positive (?DS \\<rho>) \\<and>\n                        trace (?DS \\<rho>) \\<le> trace \\<rho> \\<and>\n                        ?DS \\<rho> \\<in> carrier_mat d d;\n   partial_density_operator ?\\<rho>; ?\\<rho> \\<in> carrier_mat d d\\<rbrakk>\n  \\<Longrightarrow> positive\n                     (matrix_sum d\n                       (\\<lambda>n.\n                           denote_while_n ?M0.0 ?M1.0 ?DS n ?\\<rho>)\n                       ?n)\n  adjoint M1 * M1 \\<le>\\<^sub>L 1\\<^sub>m d\n\ngoal (1 subgoal):\n 1. positive (matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>) n)", "by auto"], ["proof (state)\nthis:\n  positive (matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>) n)\n\ngoal (1 subgoal):\n 1. partial_density_operator\n     (matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>) n)", "ultimately"], ["proof (chain)\npicking this:\n  trace (matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>) n)\n  \\<le> 1\n  positive (matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>) n)", "show ?thesis"], ["proof (prove)\nusing this:\n  trace (matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>) n)\n  \\<le> 1\n  positive (matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>) n)\n\ngoal (1 subgoal):\n 1. partial_density_operator\n     (matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>) n)", "unfolding partial_density_operator_def"], ["proof (prove)\nusing this:\n  trace (matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>) n)\n  \\<le> 1\n  positive (matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>) n)\n\ngoal (1 subgoal):\n 1. positive\n     (matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>) n) \\<and>\n    trace (matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>) n)\n    \\<le> 1", "by auto"], ["proof (state)\nthis:\n  partial_density_operator\n   (matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>) n)\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma denote_while_n_sum_lowner_le:\n  assumes dim0: \"M0 \\<in> carrier_mat d d\" and dim1: \"M1 \\<in> carrier_mat d d\" and id: \"adjoint M0 * M0 + adjoint M1 * M1 = 1\\<^sub>m d\"\n      and DS: \"\\<And>\\<rho>. \\<rho> \\<in> carrier_mat d d \\<Longrightarrow> partial_density_operator \\<rho> \\<Longrightarrow> positive (DS \\<rho>) \\<and> trace (DS \\<rho>) \\<le> trace \\<rho> \\<and> DS \\<rho> \\<in> carrier_mat d d\"\n      and pdo: \"partial_density_operator \\<rho>\" and dimr: \" \\<rho> \\<in> carrier_mat d d\" \n  shows \"(matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>) n \\<le>\\<^sub>L matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>) (Suc n))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>)\n     n \\<le>\\<^sub>L\n    matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>) (Suc n)", "proof auto"], ["proof (state)\ngoal (1 subgoal):\n 1. matrix_sum d\n     (\\<lambda>n. M0 * denote_while_n_iter M0 M1 DS n \\<rho> * adjoint M0)\n     n \\<le>\\<^sub>L\n    M0 * denote_while_n_iter M0 M1 DS n \\<rho> * adjoint M0 +\n    matrix_sum d\n     (\\<lambda>n. M0 * denote_while_n_iter M0 M1 DS n \\<rho> * adjoint M0) n", "have whilenc: \"denote_while_n M0 M1 DS n \\<rho> \\<in> carrier_mat d d\""], ["proof (prove)\ngoal (1 subgoal):\n 1. denote_while_n M0 M1 DS n \\<rho> \\<in> carrier_mat d d", "using denote_while_n_dim assms"], ["proof (prove)\nusing this:\n  \\<lbrakk>?\\<rho> \\<in> carrier_mat d d; ?M0.0 \\<in> carrier_mat d d;\n   ?M1.0 \\<in> carrier_mat d d; partial_density_operator ?\\<rho>;\n   \\<And>\\<rho>'.\n      \\<lbrakk>\\<rho>' \\<in> carrier_mat d d;\n       partial_density_operator \\<rho>'\\<rbrakk>\n      \\<Longrightarrow> positive (?DS \\<rho>') \\<and>\n                        trace (?DS \\<rho>') \\<le> trace \\<rho>' \\<and>\n                        ?DS \\<rho>' \\<in> carrier_mat d d\\<rbrakk>\n  \\<Longrightarrow> denote_while_n ?M0.0 ?M1.0 ?DS ?n ?\\<rho>\n                    \\<in> carrier_mat d d\n  M0 \\<in> carrier_mat d d\n  M1 \\<in> carrier_mat d d\n  adjoint M0 * M0 + adjoint M1 * M1 = 1\\<^sub>m d\n  \\<lbrakk>?\\<rho> \\<in> carrier_mat d d;\n   partial_density_operator ?\\<rho>\\<rbrakk>\n  \\<Longrightarrow> positive (DS ?\\<rho>) \\<and>\n                    trace (DS ?\\<rho>) \\<le> trace ?\\<rho> \\<and>\n                    DS ?\\<rho> \\<in> carrier_mat d d\n  partial_density_operator \\<rho>\n  \\<rho> \\<in> carrier_mat d d\n\ngoal (1 subgoal):\n 1. denote_while_n M0 M1 DS n \\<rho> \\<in> carrier_mat d d", "by auto"], ["proof (state)\nthis:\n  denote_while_n M0 M1 DS n \\<rho> \\<in> carrier_mat d d\n\ngoal (1 subgoal):\n 1. matrix_sum d\n     (\\<lambda>n. M0 * denote_while_n_iter M0 M1 DS n \\<rho> * adjoint M0)\n     n \\<le>\\<^sub>L\n    M0 * denote_while_n_iter M0 M1 DS n \\<rho> * adjoint M0 +\n    matrix_sum d\n     (\\<lambda>n. M0 * denote_while_n_iter M0 M1 DS n \\<rho> * adjoint M0) n", "have sumc: \"matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>) n \\<in> carrier_mat d d\""], ["proof (prove)\ngoal (1 subgoal):\n 1. matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>) n\n    \\<in> carrier_mat d d", "using denote_while_n_sum_dim assms"], ["proof (prove)\nusing this:\n  \\<lbrakk>?\\<rho> \\<in> carrier_mat d d; ?M0.0 \\<in> carrier_mat d d;\n   ?M1.0 \\<in> carrier_mat d d; partial_density_operator ?\\<rho>;\n   \\<And>\\<rho>'.\n      \\<lbrakk>\\<rho>' \\<in> carrier_mat d d;\n       partial_density_operator \\<rho>'\\<rbrakk>\n      \\<Longrightarrow> positive (?DS \\<rho>') \\<and>\n                        trace (?DS \\<rho>') \\<le> trace \\<rho>' \\<and>\n                        ?DS \\<rho>' \\<in> carrier_mat d d\\<rbrakk>\n  \\<Longrightarrow> matrix_sum d\n                     (\\<lambda>n. denote_while_n ?M0.0 ?M1.0 ?DS n ?\\<rho>)\n                     ?n\n                    \\<in> carrier_mat d d\n  M0 \\<in> carrier_mat d d\n  M1 \\<in> carrier_mat d d\n  adjoint M0 * M0 + adjoint M1 * M1 = 1\\<^sub>m d\n  \\<lbrakk>?\\<rho> \\<in> carrier_mat d d;\n   partial_density_operator ?\\<rho>\\<rbrakk>\n  \\<Longrightarrow> positive (DS ?\\<rho>) \\<and>\n                    trace (DS ?\\<rho>) \\<le> trace ?\\<rho> \\<and>\n                    DS ?\\<rho> \\<in> carrier_mat d d\n  partial_density_operator \\<rho>\n  \\<rho> \\<in> carrier_mat d d\n\ngoal (1 subgoal):\n 1. matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>) n\n    \\<in> carrier_mat d d", "by auto"], ["proof (state)\nthis:\n  matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>) n\n  \\<in> carrier_mat d d\n\ngoal (1 subgoal):\n 1. matrix_sum d\n     (\\<lambda>n. M0 * denote_while_n_iter M0 M1 DS n \\<rho> * adjoint M0)\n     n \\<le>\\<^sub>L\n    M0 * denote_while_n_iter M0 M1 DS n \\<rho> * adjoint M0 +\n    matrix_sum d\n     (\\<lambda>n. M0 * denote_while_n_iter M0 M1 DS n \\<rho> * adjoint M0) n", "have \"denote_while_n M0 M1 DS n \\<rho> + matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>) n - matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>) n\n         = denote_while_n M0 M1 DS n \\<rho>  + matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>) n + (- matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>) n)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. denote_while_n M0 M1 DS n \\<rho> +\n    matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>) n -\n    matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>) n =\n    denote_while_n M0 M1 DS n \\<rho> +\n    matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>) n +\n    - matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>) n", "using  minus_add_uminus_mat[of \"matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>) n\" d d \"matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>) n\"]"], ["proof (prove)\nusing this:\n  \\<lbrakk>matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>) n\n           \\<in> carrier_mat d d;\n   matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>) n\n   \\<in> carrier_mat d d\\<rbrakk>\n  \\<Longrightarrow> matrix_sum d\n                     (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>) n -\n                    matrix_sum d\n                     (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>) n =\n                    matrix_sum d\n                     (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>) n +\n                    - matrix_sum d\n                       (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>) n\n\ngoal (1 subgoal):\n 1. denote_while_n M0 M1 DS n \\<rho> +\n    matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>) n -\n    matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>) n =\n    denote_while_n M0 M1 DS n \\<rho> +\n    matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>) n +\n    - matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>) n", "by auto"], ["proof (state)\nthis:\n  denote_while_n M0 M1 DS n \\<rho> +\n  matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>) n -\n  matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>) n =\n  denote_while_n M0 M1 DS n \\<rho> +\n  matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>) n +\n  - matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>) n\n\ngoal (1 subgoal):\n 1. matrix_sum d\n     (\\<lambda>n. M0 * denote_while_n_iter M0 M1 DS n \\<rho> * adjoint M0)\n     n \\<le>\\<^sub>L\n    M0 * denote_while_n_iter M0 M1 DS n \\<rho> * adjoint M0 +\n    matrix_sum d\n     (\\<lambda>n. M0 * denote_while_n_iter M0 M1 DS n \\<rho> * adjoint M0) n", "also"], ["proof (state)\nthis:\n  denote_while_n M0 M1 DS n \\<rho> +\n  matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>) n -\n  matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>) n =\n  denote_while_n M0 M1 DS n \\<rho> +\n  matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>) n +\n  - matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>) n\n\ngoal (1 subgoal):\n 1. matrix_sum d\n     (\\<lambda>n. M0 * denote_while_n_iter M0 M1 DS n \\<rho> * adjoint M0)\n     n \\<le>\\<^sub>L\n    M0 * denote_while_n_iter M0 M1 DS n \\<rho> * adjoint M0 +\n    matrix_sum d\n     (\\<lambda>n. M0 * denote_while_n_iter M0 M1 DS n \\<rho> * adjoint M0) n", "have \"\\<dots> = denote_while_n M0 M1 DS n \\<rho>  + 0\\<^sub>m d d\""], ["proof (prove)\ngoal (1 subgoal):\n 1. denote_while_n M0 M1 DS n \\<rho> +\n    matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>) n +\n    - matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>) n =\n    denote_while_n M0 M1 DS n \\<rho> + 0\\<^sub>m d d", "by (smt assoc_add_mat minus_add_uminus_mat minus_r_inv_mat sumc uminus_carrier_mat whilenc)"], ["proof (state)\nthis:\n  denote_while_n M0 M1 DS n \\<rho> +\n  matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>) n +\n  - matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>) n =\n  denote_while_n M0 M1 DS n \\<rho> + 0\\<^sub>m d d\n\ngoal (1 subgoal):\n 1. matrix_sum d\n     (\\<lambda>n. M0 * denote_while_n_iter M0 M1 DS n \\<rho> * adjoint M0)\n     n \\<le>\\<^sub>L\n    M0 * denote_while_n_iter M0 M1 DS n \\<rho> * adjoint M0 +\n    matrix_sum d\n     (\\<lambda>n. M0 * denote_while_n_iter M0 M1 DS n \\<rho> * adjoint M0) n", "also"], ["proof (state)\nthis:\n  denote_while_n M0 M1 DS n \\<rho> +\n  matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>) n +\n  - matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>) n =\n  denote_while_n M0 M1 DS n \\<rho> + 0\\<^sub>m d d\n\ngoal (1 subgoal):\n 1. matrix_sum d\n     (\\<lambda>n. M0 * denote_while_n_iter M0 M1 DS n \\<rho> * adjoint M0)\n     n \\<le>\\<^sub>L\n    M0 * denote_while_n_iter M0 M1 DS n \\<rho> * adjoint M0 +\n    matrix_sum d\n     (\\<lambda>n. M0 * denote_while_n_iter M0 M1 DS n \\<rho> * adjoint M0) n", "have \"\\<dots> = denote_while_n M0 M1 DS n \\<rho>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. denote_while_n M0 M1 DS n \\<rho> + 0\\<^sub>m d d =\n    denote_while_n M0 M1 DS n \\<rho>", "using whilenc"], ["proof (prove)\nusing this:\n  denote_while_n M0 M1 DS n \\<rho> \\<in> carrier_mat d d\n\ngoal (1 subgoal):\n 1. denote_while_n M0 M1 DS n \\<rho> + 0\\<^sub>m d d =\n    denote_while_n M0 M1 DS n \\<rho>", "by auto"], ["proof (state)\nthis:\n  denote_while_n M0 M1 DS n \\<rho> + 0\\<^sub>m d d =\n  denote_while_n M0 M1 DS n \\<rho>\n\ngoal (1 subgoal):\n 1. matrix_sum d\n     (\\<lambda>n. M0 * denote_while_n_iter M0 M1 DS n \\<rho> * adjoint M0)\n     n \\<le>\\<^sub>L\n    M0 * denote_while_n_iter M0 M1 DS n \\<rho> * adjoint M0 +\n    matrix_sum d\n     (\\<lambda>n. M0 * denote_while_n_iter M0 M1 DS n \\<rho> * adjoint M0) n", "finally"], ["proof (chain)\npicking this:\n  denote_while_n M0 M1 DS n \\<rho> +\n  matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>) n -\n  matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>) n =\n  denote_while_n M0 M1 DS n \\<rho>", "have simp: \"denote_while_n M0 M1 DS n \\<rho> + matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>) n -  matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>) n =\n                denote_while_n M0 M1 DS n \\<rho> \""], ["proof (prove)\nusing this:\n  denote_while_n M0 M1 DS n \\<rho> +\n  matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>) n -\n  matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>) n =\n  denote_while_n M0 M1 DS n \\<rho>\n\ngoal (1 subgoal):\n 1. denote_while_n M0 M1 DS n \\<rho> +\n    matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>) n -\n    matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>) n =\n    denote_while_n M0 M1 DS n \\<rho>", "by auto"], ["proof (state)\nthis:\n  denote_while_n M0 M1 DS n \\<rho> +\n  matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>) n -\n  matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>) n =\n  denote_while_n M0 M1 DS n \\<rho>\n\ngoal (1 subgoal):\n 1. matrix_sum d\n     (\\<lambda>n. M0 * denote_while_n_iter M0 M1 DS n \\<rho> * adjoint M0)\n     n \\<le>\\<^sub>L\n    M0 * denote_while_n_iter M0 M1 DS n \\<rho> * adjoint M0 +\n    matrix_sum d\n     (\\<lambda>n. M0 * denote_while_n_iter M0 M1 DS n \\<rho> * adjoint M0) n", "have \"positive (denote_while_n M0 M1 DS n \\<rho>)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. positive (denote_while_n M0 M1 DS n \\<rho>)", "using denote_while_n_positive assms measurement_lowner_le_one1[OF dim0 dim1 id]"], ["proof (prove)\nusing this:\n  \\<lbrakk>?M0.0 \\<in> carrier_mat d d; ?M1.0 \\<in> carrier_mat d d;\n   adjoint ?M1.0 * ?M1.0 \\<le>\\<^sub>L 1\\<^sub>m d;\n   \\<And>\\<rho>.\n      \\<lbrakk>\\<rho> \\<in> carrier_mat d d;\n       partial_density_operator \\<rho>\\<rbrakk>\n      \\<Longrightarrow> positive (?DS \\<rho>) \\<and>\n                        trace (?DS \\<rho>) \\<le> trace \\<rho> \\<and>\n                        ?DS \\<rho> \\<in> carrier_mat d d;\n   partial_density_operator ?\\<rho> \\<and>\n   ?\\<rho> \\<in> carrier_mat d d\\<rbrakk>\n  \\<Longrightarrow> positive (denote_while_n ?M0.0 ?M1.0 ?DS ?n ?\\<rho>)\n  M0 \\<in> carrier_mat d d\n  M1 \\<in> carrier_mat d d\n  adjoint M0 * M0 + adjoint M1 * M1 = 1\\<^sub>m d\n  \\<lbrakk>?\\<rho> \\<in> carrier_mat d d;\n   partial_density_operator ?\\<rho>\\<rbrakk>\n  \\<Longrightarrow> positive (DS ?\\<rho>) \\<and>\n                    trace (DS ?\\<rho>) \\<le> trace ?\\<rho> \\<and>\n                    DS ?\\<rho> \\<in> carrier_mat d d\n  partial_density_operator \\<rho>\n  \\<rho> \\<in> carrier_mat d d\n  adjoint M1 * M1 \\<le>\\<^sub>L 1\\<^sub>m d\n\ngoal (1 subgoal):\n 1. positive (denote_while_n M0 M1 DS n \\<rho>)", "by auto"], ["proof (state)\nthis:\n  positive (denote_while_n M0 M1 DS n \\<rho>)\n\ngoal (1 subgoal):\n 1. matrix_sum d\n     (\\<lambda>n. M0 * denote_while_n_iter M0 M1 DS n \\<rho> * adjoint M0)\n     n \\<le>\\<^sub>L\n    M0 * denote_while_n_iter M0 M1 DS n \\<rho> * adjoint M0 +\n    matrix_sum d\n     (\\<lambda>n. M0 * denote_while_n_iter M0 M1 DS n \\<rho> * adjoint M0) n", "then"], ["proof (chain)\npicking this:\n  positive (denote_while_n M0 M1 DS n \\<rho>)", "have \"matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>) n \\<le>\\<^sub>L (denote_while_n M0 M1 DS n \\<rho> + matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>) n)\""], ["proof (prove)\nusing this:\n  positive (denote_while_n M0 M1 DS n \\<rho>)\n\ngoal (1 subgoal):\n 1. matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>)\n     n \\<le>\\<^sub>L\n    denote_while_n M0 M1 DS n \\<rho> +\n    matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>) n", "unfolding lowner_le_def"], ["proof (prove)\nusing this:\n  positive (denote_while_n M0 M1 DS n \\<rho>)\n\ngoal (1 subgoal):\n 1. dim_row\n     (matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>) n) =\n    dim_row\n     (denote_while_n M0 M1 DS n \\<rho> +\n      matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>) n) \\<and>\n    dim_col\n     (matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>) n) =\n    dim_col\n     (denote_while_n M0 M1 DS n \\<rho> +\n      matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>) n) \\<and>\n    positive\n     (denote_while_n M0 M1 DS n \\<rho> +\n      matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>) n -\n      matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>) n)", "using simp"], ["proof (prove)\nusing this:\n  positive (denote_while_n M0 M1 DS n \\<rho>)\n  denote_while_n M0 M1 DS n \\<rho> +\n  matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>) n -\n  matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>) n =\n  denote_while_n M0 M1 DS n \\<rho>\n\ngoal (1 subgoal):\n 1. dim_row\n     (matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>) n) =\n    dim_row\n     (denote_while_n M0 M1 DS n \\<rho> +\n      matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>) n) \\<and>\n    dim_col\n     (matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>) n) =\n    dim_col\n     (denote_while_n M0 M1 DS n \\<rho> +\n      matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>) n) \\<and>\n    positive\n     (denote_while_n M0 M1 DS n \\<rho> +\n      matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>) n -\n      matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>) n)", "by auto"], ["proof (state)\nthis:\n  matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>)\n   n \\<le>\\<^sub>L\n  denote_while_n M0 M1 DS n \\<rho> +\n  matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>) n\n\ngoal (1 subgoal):\n 1. matrix_sum d\n     (\\<lambda>n. M0 * denote_while_n_iter M0 M1 DS n \\<rho> * adjoint M0)\n     n \\<le>\\<^sub>L\n    M0 * denote_while_n_iter M0 M1 DS n \\<rho> * adjoint M0 +\n    matrix_sum d\n     (\\<lambda>n. M0 * denote_while_n_iter M0 M1 DS n \\<rho> * adjoint M0) n", "then"], ["proof (chain)\npicking this:\n  matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>)\n   n \\<le>\\<^sub>L\n  denote_while_n M0 M1 DS n \\<rho> +\n  matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>) n", "show \"matrix_sum d (\\<lambda>n. M0 * denote_while_n_iter M0 M1 DS n \\<rho> * adjoint M0) n \\<le>\\<^sub>L\n             (M0 * denote_while_n_iter M0 M1 DS n \\<rho> * adjoint M0 + matrix_sum d (\\<lambda>n. M0 * denote_while_n_iter M0 M1 DS n \\<rho> * adjoint M0) n)\""], ["proof (prove)\nusing this:\n  matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>)\n   n \\<le>\\<^sub>L\n  denote_while_n M0 M1 DS n \\<rho> +\n  matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>) n\n\ngoal (1 subgoal):\n 1. matrix_sum d\n     (\\<lambda>n. M0 * denote_while_n_iter M0 M1 DS n \\<rho> * adjoint M0)\n     n \\<le>\\<^sub>L\n    M0 * denote_while_n_iter M0 M1 DS n \\<rho> * adjoint M0 +\n    matrix_sum d\n     (\\<lambda>n. M0 * denote_while_n_iter M0 M1 DS n \\<rho> * adjoint M0) n", "by auto"], ["proof (state)\nthis:\n  matrix_sum d\n   (\\<lambda>n. M0 * denote_while_n_iter M0 M1 DS n \\<rho> * adjoint M0)\n   n \\<le>\\<^sub>L\n  M0 * denote_while_n_iter M0 M1 DS n \\<rho> * adjoint M0 +\n  matrix_sum d\n   (\\<lambda>n. M0 * denote_while_n_iter M0 M1 DS n \\<rho> * adjoint M0) n\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma lowner_is_lub_matrix_sum: \n  assumes dim0: \"M0 \\<in> carrier_mat d d\" and dim1: \"M1 \\<in> carrier_mat d d\" and id: \"adjoint M0 * M0 + adjoint M1 * M1 = 1\\<^sub>m d\"\n      and DS: \"\\<And>\\<rho>. \\<rho> \\<in> carrier_mat d d \\<Longrightarrow> partial_density_operator \\<rho> \\<Longrightarrow> positive (DS \\<rho>) \\<and> trace (DS \\<rho>) \\<le> trace \\<rho> \\<and> DS \\<rho> \\<in> carrier_mat d d\"\n      and pdo: \"partial_density_operator \\<rho>\" and dimr: \" \\<rho> \\<in> carrier_mat d d\" \n  shows  \"matrix_seq.lowner_is_lub (matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>)) (matrix_seq.lowner_lub (matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>)))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. matrix_seq.lowner_is_lub\n     (matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>))\n     (matrix_seq.lowner_lub\n       (matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>)))", "proof-"], ["proof (state)\ngoal (1 subgoal):\n 1. matrix_seq.lowner_is_lub\n     (matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>))\n     (matrix_seq.lowner_lub\n       (matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>)))", "have sumdd: \"\\<forall>n. matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>) n \\<in> carrier_mat d d\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>n.\n       matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>) n\n       \\<in> carrier_mat d d", "using  denote_while_n_sum_dim assms"], ["proof (prove)\nusing this:\n  \\<lbrakk>?\\<rho> \\<in> carrier_mat d d; ?M0.0 \\<in> carrier_mat d d;\n   ?M1.0 \\<in> carrier_mat d d; partial_density_operator ?\\<rho>;\n   \\<And>\\<rho>'.\n      \\<lbrakk>\\<rho>' \\<in> carrier_mat d d;\n       partial_density_operator \\<rho>'\\<rbrakk>\n      \\<Longrightarrow> positive (?DS \\<rho>') \\<and>\n                        trace (?DS \\<rho>') \\<le> trace \\<rho>' \\<and>\n                        ?DS \\<rho>' \\<in> carrier_mat d d\\<rbrakk>\n  \\<Longrightarrow> matrix_sum d\n                     (\\<lambda>n. denote_while_n ?M0.0 ?M1.0 ?DS n ?\\<rho>)\n                     ?n\n                    \\<in> carrier_mat d d\n  M0 \\<in> carrier_mat d d\n  M1 \\<in> carrier_mat d d\n  adjoint M0 * M0 + adjoint M1 * M1 = 1\\<^sub>m d\n  \\<lbrakk>?\\<rho> \\<in> carrier_mat d d;\n   partial_density_operator ?\\<rho>\\<rbrakk>\n  \\<Longrightarrow> positive (DS ?\\<rho>) \\<and>\n                    trace (DS ?\\<rho>) \\<le> trace ?\\<rho> \\<and>\n                    DS ?\\<rho> \\<in> carrier_mat d d\n  partial_density_operator \\<rho>\n  \\<rho> \\<in> carrier_mat d d\n\ngoal (1 subgoal):\n 1. \\<forall>n.\n       matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>) n\n       \\<in> carrier_mat d d", "by auto"], ["proof (state)\nthis:\n  \\<forall>n.\n     matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>) n\n     \\<in> carrier_mat d d\n\ngoal (1 subgoal):\n 1. matrix_seq.lowner_is_lub\n     (matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>))\n     (matrix_seq.lowner_lub\n       (matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>)))", "have sumtr: \"\\<forall>n. trace (matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>) n) \\<le> trace \\<rho>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>n.\n       trace (matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>) n)\n       \\<le> trace \\<rho>", "using denote_while_n_sum_trace assms"], ["proof (prove)\nusing this:\n  \\<lbrakk>?M0.0 \\<in> carrier_mat d d; ?M1.0 \\<in> carrier_mat d d;\n   adjoint ?M0.0 * ?M0.0 + adjoint ?M1.0 * ?M1.0 = 1\\<^sub>m d;\n   \\<And>\\<rho>.\n      \\<lbrakk>\\<rho> \\<in> carrier_mat d d;\n       partial_density_operator \\<rho>\\<rbrakk>\n      \\<Longrightarrow> positive (?DS \\<rho>) \\<and>\n                        trace (?DS \\<rho>) \\<le> trace \\<rho> \\<and>\n                        ?DS \\<rho> \\<in> carrier_mat d d;\n   ?\\<rho> \\<in> carrier_mat d d; partial_density_operator ?\\<rho>\\<rbrakk>\n  \\<Longrightarrow> trace\n                     (matrix_sum d\n                       (\\<lambda>n.\n                           denote_while_n ?M0.0 ?M1.0 ?DS n ?\\<rho>)\n                       ?n)\n                    \\<le> trace ?\\<rho>\n  M0 \\<in> carrier_mat d d\n  M1 \\<in> carrier_mat d d\n  adjoint M0 * M0 + adjoint M1 * M1 = 1\\<^sub>m d\n  \\<lbrakk>?\\<rho> \\<in> carrier_mat d d;\n   partial_density_operator ?\\<rho>\\<rbrakk>\n  \\<Longrightarrow> positive (DS ?\\<rho>) \\<and>\n                    trace (DS ?\\<rho>) \\<le> trace ?\\<rho> \\<and>\n                    DS ?\\<rho> \\<in> carrier_mat d d\n  partial_density_operator \\<rho>\n  \\<rho> \\<in> carrier_mat d d\n\ngoal (1 subgoal):\n 1. \\<forall>n.\n       trace (matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>) n)\n       \\<le> trace \\<rho>", "by auto"], ["proof (state)\nthis:\n  \\<forall>n.\n     trace (matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>) n)\n     \\<le> trace \\<rho>\n\ngoal (1 subgoal):\n 1. matrix_seq.lowner_is_lub\n     (matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>))\n     (matrix_seq.lowner_lub\n       (matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>)))", "have sumpar: \"\\<forall>n. partial_density_operator (matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>) n)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>n.\n       partial_density_operator\n        (matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>) n)", "using denote_while_n_sum_partial_density assms"], ["proof (prove)\nusing this:\n  \\<lbrakk>?M0.0 \\<in> carrier_mat d d; ?M1.0 \\<in> carrier_mat d d;\n   adjoint ?M0.0 * ?M0.0 + adjoint ?M1.0 * ?M1.0 = 1\\<^sub>m d;\n   \\<And>\\<rho>.\n      \\<lbrakk>\\<rho> \\<in> carrier_mat d d;\n       partial_density_operator \\<rho>\\<rbrakk>\n      \\<Longrightarrow> positive (?DS \\<rho>) \\<and>\n                        trace (?DS \\<rho>) \\<le> trace \\<rho> \\<and>\n                        ?DS \\<rho> \\<in> carrier_mat d d;\n   partial_density_operator ?\\<rho>; ?\\<rho> \\<in> carrier_mat d d\\<rbrakk>\n  \\<Longrightarrow> partial_density_operator\n                     (matrix_sum d\n                       (\\<lambda>n.\n                           denote_while_n ?M0.0 ?M1.0 ?DS n ?\\<rho>)\n                       ?n)\n  M0 \\<in> carrier_mat d d\n  M1 \\<in> carrier_mat d d\n  adjoint M0 * M0 + adjoint M1 * M1 = 1\\<^sub>m d\n  \\<lbrakk>?\\<rho> \\<in> carrier_mat d d;\n   partial_density_operator ?\\<rho>\\<rbrakk>\n  \\<Longrightarrow> positive (DS ?\\<rho>) \\<and>\n                    trace (DS ?\\<rho>) \\<le> trace ?\\<rho> \\<and>\n                    DS ?\\<rho> \\<in> carrier_mat d d\n  partial_density_operator \\<rho>\n  \\<rho> \\<in> carrier_mat d d\n\ngoal (1 subgoal):\n 1. \\<forall>n.\n       partial_density_operator\n        (matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>) n)", "by auto"], ["proof (state)\nthis:\n  \\<forall>n.\n     partial_density_operator\n      (matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>) n)\n\ngoal (1 subgoal):\n 1. matrix_seq.lowner_is_lub\n     (matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>))\n     (matrix_seq.lowner_lub\n       (matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>)))", "have sumle:\"\\<forall>n. matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>) n \\<le>\\<^sub>L matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>) (Suc n)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>n.\n       matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>)\n        n \\<le>\\<^sub>L\n       matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>) (Suc n)", "using denote_while_n_sum_lowner_le assms"], ["proof (prove)\nusing this:\n  \\<lbrakk>?M0.0 \\<in> carrier_mat d d; ?M1.0 \\<in> carrier_mat d d;\n   adjoint ?M0.0 * ?M0.0 + adjoint ?M1.0 * ?M1.0 = 1\\<^sub>m d;\n   \\<And>\\<rho>.\n      \\<lbrakk>\\<rho> \\<in> carrier_mat d d;\n       partial_density_operator \\<rho>\\<rbrakk>\n      \\<Longrightarrow> positive (?DS \\<rho>) \\<and>\n                        trace (?DS \\<rho>) \\<le> trace \\<rho> \\<and>\n                        ?DS \\<rho> \\<in> carrier_mat d d;\n   partial_density_operator ?\\<rho>; ?\\<rho> \\<in> carrier_mat d d\\<rbrakk>\n  \\<Longrightarrow> matrix_sum d\n                     (\\<lambda>n. denote_while_n ?M0.0 ?M1.0 ?DS n ?\\<rho>)\n                     ?n \\<le>\\<^sub>L\n                    matrix_sum d\n                     (\\<lambda>n. denote_while_n ?M0.0 ?M1.0 ?DS n ?\\<rho>)\n                     (Suc ?n)\n  M0 \\<in> carrier_mat d d\n  M1 \\<in> carrier_mat d d\n  adjoint M0 * M0 + adjoint M1 * M1 = 1\\<^sub>m d\n  \\<lbrakk>?\\<rho> \\<in> carrier_mat d d;\n   partial_density_operator ?\\<rho>\\<rbrakk>\n  \\<Longrightarrow> positive (DS ?\\<rho>) \\<and>\n                    trace (DS ?\\<rho>) \\<le> trace ?\\<rho> \\<and>\n                    DS ?\\<rho> \\<in> carrier_mat d d\n  partial_density_operator \\<rho>\n  \\<rho> \\<in> carrier_mat d d\n\ngoal (1 subgoal):\n 1. \\<forall>n.\n       matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>)\n        n \\<le>\\<^sub>L\n       matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>) (Suc n)", "by auto"], ["proof (state)\nthis:\n  \\<forall>n.\n     matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>)\n      n \\<le>\\<^sub>L\n     matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>) (Suc n)\n\ngoal (1 subgoal):\n 1. matrix_seq.lowner_is_lub\n     (matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>))\n     (matrix_seq.lowner_lub\n       (matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>)))", "have seqd: \"matrix_seq d (matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. matrix_seq d\n     (matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>))", "using matrix_seq_def sumdd sumpar sumle"], ["proof (prove)\nusing this:\n  matrix_seq ?dim ?f \\<equiv>\n  (\\<forall>n. ?f n \\<in> carrier_mat ?dim ?dim) \\<and>\n  (\\<forall>n. partial_density_operator (?f n)) \\<and>\n  (\\<forall>n. ?f n \\<le>\\<^sub>L ?f (Suc n))\n  \\<forall>n.\n     matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>) n\n     \\<in> carrier_mat d d\n  \\<forall>n.\n     partial_density_operator\n      (matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>) n)\n  \\<forall>n.\n     matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>)\n      n \\<le>\\<^sub>L\n     matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>) (Suc n)\n\ngoal (1 subgoal):\n 1. matrix_seq d\n     (matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>))", "by auto"], ["proof (state)\nthis:\n  matrix_seq d (matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>))\n\ngoal (1 subgoal):\n 1. matrix_seq.lowner_is_lub\n     (matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>))\n     (matrix_seq.lowner_lub\n       (matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>)))", "then"], ["proof (chain)\npicking this:\n  matrix_seq d (matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>))", "show ?thesis"], ["proof (prove)\nusing this:\n  matrix_seq d (matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>))\n\ngoal (1 subgoal):\n 1. matrix_seq.lowner_is_lub\n     (matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>))\n     (matrix_seq.lowner_lub\n       (matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>)))", "using matrix_seq.lowner_lub_prop[of d \"(matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>))\"]"], ["proof (prove)\nusing this:\n  matrix_seq d (matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>))\n  matrix_seq d\n   (matrix_sum d\n     (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>)) \\<Longrightarrow>\n  matrix_seq.lowner_is_lub\n   (matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>))\n   (matrix_seq.lowner_lub\n     (matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>)))\n\ngoal (1 subgoal):\n 1. matrix_seq.lowner_is_lub\n     (matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>))\n     (matrix_seq.lowner_lub\n       (matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>)))", "by auto"], ["proof (state)\nthis:\n  matrix_seq.lowner_is_lub\n   (matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>))\n   (matrix_seq.lowner_lub\n     (matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>)))\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma denote_while_dim_positive:\n  assumes dim0: \"M0 \\<in> carrier_mat d d\" and dim1: \"M1 \\<in> carrier_mat d d\" and id: \"adjoint M0 * M0 + adjoint M1 * M1 = 1\\<^sub>m d\"\n      and DS: \"\\<And>\\<rho>. \\<rho> \\<in> carrier_mat d d \\<Longrightarrow> partial_density_operator \\<rho> \\<Longrightarrow> positive (DS \\<rho>) \\<and> trace (DS \\<rho>) \\<le> trace \\<rho> \\<and> DS \\<rho> \\<in> carrier_mat d d\"\n      and pdo: \"partial_density_operator \\<rho>\" and dimr: \" \\<rho> \\<in> carrier_mat d d\" \n  shows\n    \"denote_while M0 M1 DS \\<rho> \\<in> carrier_mat d d \\<and> positive (denote_while M0 M1 DS \\<rho>) \\<and> trace (denote_while M0 M1 DS \\<rho>) \\<le> trace \\<rho>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. denote_while M0 M1 DS \\<rho> \\<in> carrier_mat d d \\<and>\n    positive (denote_while M0 M1 DS \\<rho>) \\<and>\n    trace (denote_while M0 M1 DS \\<rho>) \\<le> trace \\<rho>", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. denote_while M0 M1 DS \\<rho> \\<in> carrier_mat d d \\<and>\n    positive (denote_while M0 M1 DS \\<rho>) \\<and>\n    trace (denote_while M0 M1 DS \\<rho>) \\<le> trace \\<rho>", "have sumdd: \"\\<forall>n. matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>) n \\<in> carrier_mat d d\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>n.\n       matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>) n\n       \\<in> carrier_mat d d", "using denote_while_n_sum_dim assms"], ["proof (prove)\nusing this:\n  \\<lbrakk>?\\<rho> \\<in> carrier_mat d d; ?M0.0 \\<in> carrier_mat d d;\n   ?M1.0 \\<in> carrier_mat d d; partial_density_operator ?\\<rho>;\n   \\<And>\\<rho>'.\n      \\<lbrakk>\\<rho>' \\<in> carrier_mat d d;\n       partial_density_operator \\<rho>'\\<rbrakk>\n      \\<Longrightarrow> positive (?DS \\<rho>') \\<and>\n                        trace (?DS \\<rho>') \\<le> trace \\<rho>' \\<and>\n                        ?DS \\<rho>' \\<in> carrier_mat d d\\<rbrakk>\n  \\<Longrightarrow> matrix_sum d\n                     (\\<lambda>n. denote_while_n ?M0.0 ?M1.0 ?DS n ?\\<rho>)\n                     ?n\n                    \\<in> carrier_mat d d\n  M0 \\<in> carrier_mat d d\n  M1 \\<in> carrier_mat d d\n  adjoint M0 * M0 + adjoint M1 * M1 = 1\\<^sub>m d\n  \\<lbrakk>?\\<rho> \\<in> carrier_mat d d;\n   partial_density_operator ?\\<rho>\\<rbrakk>\n  \\<Longrightarrow> positive (DS ?\\<rho>) \\<and>\n                    trace (DS ?\\<rho>) \\<le> trace ?\\<rho> \\<and>\n                    DS ?\\<rho> \\<in> carrier_mat d d\n  partial_density_operator \\<rho>\n  \\<rho> \\<in> carrier_mat d d\n\ngoal (1 subgoal):\n 1. \\<forall>n.\n       matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>) n\n       \\<in> carrier_mat d d", "by auto"], ["proof (state)\nthis:\n  \\<forall>n.\n     matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>) n\n     \\<in> carrier_mat d d\n\ngoal (1 subgoal):\n 1. denote_while M0 M1 DS \\<rho> \\<in> carrier_mat d d \\<and>\n    positive (denote_while M0 M1 DS \\<rho>) \\<and>\n    trace (denote_while M0 M1 DS \\<rho>) \\<le> trace \\<rho>", "have sumtr: \"\\<forall>n. trace (matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>) n) \\<le> trace \\<rho>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>n.\n       trace (matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>) n)\n       \\<le> trace \\<rho>", "using denote_while_n_sum_trace assms"], ["proof (prove)\nusing this:\n  \\<lbrakk>?M0.0 \\<in> carrier_mat d d; ?M1.0 \\<in> carrier_mat d d;\n   adjoint ?M0.0 * ?M0.0 + adjoint ?M1.0 * ?M1.0 = 1\\<^sub>m d;\n   \\<And>\\<rho>.\n      \\<lbrakk>\\<rho> \\<in> carrier_mat d d;\n       partial_density_operator \\<rho>\\<rbrakk>\n      \\<Longrightarrow> positive (?DS \\<rho>) \\<and>\n                        trace (?DS \\<rho>) \\<le> trace \\<rho> \\<and>\n                        ?DS \\<rho> \\<in> carrier_mat d d;\n   ?\\<rho> \\<in> carrier_mat d d; partial_density_operator ?\\<rho>\\<rbrakk>\n  \\<Longrightarrow> trace\n                     (matrix_sum d\n                       (\\<lambda>n.\n                           denote_while_n ?M0.0 ?M1.0 ?DS n ?\\<rho>)\n                       ?n)\n                    \\<le> trace ?\\<rho>\n  M0 \\<in> carrier_mat d d\n  M1 \\<in> carrier_mat d d\n  adjoint M0 * M0 + adjoint M1 * M1 = 1\\<^sub>m d\n  \\<lbrakk>?\\<rho> \\<in> carrier_mat d d;\n   partial_density_operator ?\\<rho>\\<rbrakk>\n  \\<Longrightarrow> positive (DS ?\\<rho>) \\<and>\n                    trace (DS ?\\<rho>) \\<le> trace ?\\<rho> \\<and>\n                    DS ?\\<rho> \\<in> carrier_mat d d\n  partial_density_operator \\<rho>\n  \\<rho> \\<in> carrier_mat d d\n\ngoal (1 subgoal):\n 1. \\<forall>n.\n       trace (matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>) n)\n       \\<le> trace \\<rho>", "by auto"], ["proof (state)\nthis:\n  \\<forall>n.\n     trace (matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>) n)\n     \\<le> trace \\<rho>\n\ngoal (1 subgoal):\n 1. denote_while M0 M1 DS \\<rho> \\<in> carrier_mat d d \\<and>\n    positive (denote_while M0 M1 DS \\<rho>) \\<and>\n    trace (denote_while M0 M1 DS \\<rho>) \\<le> trace \\<rho>", "have sumpar: \"\\<forall>n. partial_density_operator (matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>) n)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>n.\n       partial_density_operator\n        (matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>) n)", "using denote_while_n_sum_partial_density assms"], ["proof (prove)\nusing this:\n  \\<lbrakk>?M0.0 \\<in> carrier_mat d d; ?M1.0 \\<in> carrier_mat d d;\n   adjoint ?M0.0 * ?M0.0 + adjoint ?M1.0 * ?M1.0 = 1\\<^sub>m d;\n   \\<And>\\<rho>.\n      \\<lbrakk>\\<rho> \\<in> carrier_mat d d;\n       partial_density_operator \\<rho>\\<rbrakk>\n      \\<Longrightarrow> positive (?DS \\<rho>) \\<and>\n                        trace (?DS \\<rho>) \\<le> trace \\<rho> \\<and>\n                        ?DS \\<rho> \\<in> carrier_mat d d;\n   partial_density_operator ?\\<rho>; ?\\<rho> \\<in> carrier_mat d d\\<rbrakk>\n  \\<Longrightarrow> partial_density_operator\n                     (matrix_sum d\n                       (\\<lambda>n.\n                           denote_while_n ?M0.0 ?M1.0 ?DS n ?\\<rho>)\n                       ?n)\n  M0 \\<in> carrier_mat d d\n  M1 \\<in> carrier_mat d d\n  adjoint M0 * M0 + adjoint M1 * M1 = 1\\<^sub>m d\n  \\<lbrakk>?\\<rho> \\<in> carrier_mat d d;\n   partial_density_operator ?\\<rho>\\<rbrakk>\n  \\<Longrightarrow> positive (DS ?\\<rho>) \\<and>\n                    trace (DS ?\\<rho>) \\<le> trace ?\\<rho> \\<and>\n                    DS ?\\<rho> \\<in> carrier_mat d d\n  partial_density_operator \\<rho>\n  \\<rho> \\<in> carrier_mat d d\n\ngoal (1 subgoal):\n 1. \\<forall>n.\n       partial_density_operator\n        (matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>) n)", "by auto"], ["proof (state)\nthis:\n  \\<forall>n.\n     partial_density_operator\n      (matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>) n)\n\ngoal (1 subgoal):\n 1. denote_while M0 M1 DS \\<rho> \\<in> carrier_mat d d \\<and>\n    positive (denote_while M0 M1 DS \\<rho>) \\<and>\n    trace (denote_while M0 M1 DS \\<rho>) \\<le> trace \\<rho>", "have sumle:\"\\<forall>n. matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>) n \\<le>\\<^sub>L matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>) (Suc n)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>n.\n       matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>)\n        n \\<le>\\<^sub>L\n       matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>) (Suc n)", "using denote_while_n_sum_lowner_le assms"], ["proof (prove)\nusing this:\n  \\<lbrakk>?M0.0 \\<in> carrier_mat d d; ?M1.0 \\<in> carrier_mat d d;\n   adjoint ?M0.0 * ?M0.0 + adjoint ?M1.0 * ?M1.0 = 1\\<^sub>m d;\n   \\<And>\\<rho>.\n      \\<lbrakk>\\<rho> \\<in> carrier_mat d d;\n       partial_density_operator \\<rho>\\<rbrakk>\n      \\<Longrightarrow> positive (?DS \\<rho>) \\<and>\n                        trace (?DS \\<rho>) \\<le> trace \\<rho> \\<and>\n                        ?DS \\<rho> \\<in> carrier_mat d d;\n   partial_density_operator ?\\<rho>; ?\\<rho> \\<in> carrier_mat d d\\<rbrakk>\n  \\<Longrightarrow> matrix_sum d\n                     (\\<lambda>n. denote_while_n ?M0.0 ?M1.0 ?DS n ?\\<rho>)\n                     ?n \\<le>\\<^sub>L\n                    matrix_sum d\n                     (\\<lambda>n. denote_while_n ?M0.0 ?M1.0 ?DS n ?\\<rho>)\n                     (Suc ?n)\n  M0 \\<in> carrier_mat d d\n  M1 \\<in> carrier_mat d d\n  adjoint M0 * M0 + adjoint M1 * M1 = 1\\<^sub>m d\n  \\<lbrakk>?\\<rho> \\<in> carrier_mat d d;\n   partial_density_operator ?\\<rho>\\<rbrakk>\n  \\<Longrightarrow> positive (DS ?\\<rho>) \\<and>\n                    trace (DS ?\\<rho>) \\<le> trace ?\\<rho> \\<and>\n                    DS ?\\<rho> \\<in> carrier_mat d d\n  partial_density_operator \\<rho>\n  \\<rho> \\<in> carrier_mat d d\n\ngoal (1 subgoal):\n 1. \\<forall>n.\n       matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>)\n        n \\<le>\\<^sub>L\n       matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>) (Suc n)", "by auto"], ["proof (state)\nthis:\n  \\<forall>n.\n     matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>)\n      n \\<le>\\<^sub>L\n     matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>) (Suc n)\n\ngoal (1 subgoal):\n 1. denote_while M0 M1 DS \\<rho> \\<in> carrier_mat d d \\<and>\n    positive (denote_while M0 M1 DS \\<rho>) \\<and>\n    trace (denote_while M0 M1 DS \\<rho>) \\<le> trace \\<rho>", "have seqd: \"matrix_seq d (matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. matrix_seq d\n     (matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>))", "using matrix_seq_def sumdd sumpar sumle"], ["proof (prove)\nusing this:\n  matrix_seq ?dim ?f \\<equiv>\n  (\\<forall>n. ?f n \\<in> carrier_mat ?dim ?dim) \\<and>\n  (\\<forall>n. partial_density_operator (?f n)) \\<and>\n  (\\<forall>n. ?f n \\<le>\\<^sub>L ?f (Suc n))\n  \\<forall>n.\n     matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>) n\n     \\<in> carrier_mat d d\n  \\<forall>n.\n     partial_density_operator\n      (matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>) n)\n  \\<forall>n.\n     matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>)\n      n \\<le>\\<^sub>L\n     matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>) (Suc n)\n\ngoal (1 subgoal):\n 1. matrix_seq d\n     (matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>))", "by auto"], ["proof (state)\nthis:\n  matrix_seq d (matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>))\n\ngoal (1 subgoal):\n 1. denote_while M0 M1 DS \\<rho> \\<in> carrier_mat d d \\<and>\n    positive (denote_while M0 M1 DS \\<rho>) \\<and>\n    trace (denote_while M0 M1 DS \\<rho>) \\<le> trace \\<rho>", "have \"matrix_seq.lowner_is_lub (matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>)) (matrix_seq.lowner_lub (matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>)))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. matrix_seq.lowner_is_lub\n     (matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>))\n     (matrix_seq.lowner_lub\n       (matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>)))", "using lowner_is_lub_matrix_sum assms"], ["proof (prove)\nusing this:\n  \\<lbrakk>?M0.0 \\<in> carrier_mat d d; ?M1.0 \\<in> carrier_mat d d;\n   adjoint ?M0.0 * ?M0.0 + adjoint ?M1.0 * ?M1.0 = 1\\<^sub>m d;\n   \\<And>\\<rho>.\n      \\<lbrakk>\\<rho> \\<in> carrier_mat d d;\n       partial_density_operator \\<rho>\\<rbrakk>\n      \\<Longrightarrow> positive (?DS \\<rho>) \\<and>\n                        trace (?DS \\<rho>) \\<le> trace \\<rho> \\<and>\n                        ?DS \\<rho> \\<in> carrier_mat d d;\n   partial_density_operator ?\\<rho>; ?\\<rho> \\<in> carrier_mat d d\\<rbrakk>\n  \\<Longrightarrow> matrix_seq.lowner_is_lub\n                     (matrix_sum d\n                       (\\<lambda>n.\n                           denote_while_n ?M0.0 ?M1.0 ?DS n ?\\<rho>))\n                     (matrix_seq.lowner_lub\n                       (matrix_sum d\n                         (\\<lambda>n.\n                             denote_while_n ?M0.0 ?M1.0 ?DS n ?\\<rho>)))\n  M0 \\<in> carrier_mat d d\n  M1 \\<in> carrier_mat d d\n  adjoint M0 * M0 + adjoint M1 * M1 = 1\\<^sub>m d\n  \\<lbrakk>?\\<rho> \\<in> carrier_mat d d;\n   partial_density_operator ?\\<rho>\\<rbrakk>\n  \\<Longrightarrow> positive (DS ?\\<rho>) \\<and>\n                    trace (DS ?\\<rho>) \\<le> trace ?\\<rho> \\<and>\n                    DS ?\\<rho> \\<in> carrier_mat d d\n  partial_density_operator \\<rho>\n  \\<rho> \\<in> carrier_mat d d\n\ngoal (1 subgoal):\n 1. matrix_seq.lowner_is_lub\n     (matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>))\n     (matrix_seq.lowner_lub\n       (matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>)))", "by auto"], ["proof (state)\nthis:\n  matrix_seq.lowner_is_lub\n   (matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>))\n   (matrix_seq.lowner_lub\n     (matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>)))\n\ngoal (1 subgoal):\n 1. denote_while M0 M1 DS \\<rho> \\<in> carrier_mat d d \\<and>\n    positive (denote_while M0 M1 DS \\<rho>) \\<and>\n    trace (denote_while M0 M1 DS \\<rho>) \\<le> trace \\<rho>", "then"], ["proof (chain)\npicking this:\n  matrix_seq.lowner_is_lub\n   (matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>))\n   (matrix_seq.lowner_lub\n     (matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>)))", "have \"matrix_seq.lowner_lub (matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>)) \\<in> carrier_mat d d\n            \\<and> positive (matrix_seq.lowner_lub (matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>)))\n            \\<and> trace (matrix_seq.lowner_lub (matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>))) \\<le> trace \\<rho>\""], ["proof (prove)\nusing this:\n  matrix_seq.lowner_is_lub\n   (matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>))\n   (matrix_seq.lowner_lub\n     (matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>)))\n\ngoal (1 subgoal):\n 1. matrix_seq.lowner_lub\n     (matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>))\n    \\<in> carrier_mat d d \\<and>\n    positive\n     (matrix_seq.lowner_lub\n       (matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>))) \\<and>\n    trace\n     (matrix_seq.lowner_lub\n       (matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>)))\n    \\<le> trace \\<rho>", "using matrix_seq.lowner_is_lub_dim seqd matrix_seq.lowner_lub_is_positive matrix_seq.lowner_lub_trace sumtr"], ["proof (prove)\nusing this:\n  matrix_seq.lowner_is_lub\n   (matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>))\n   (matrix_seq.lowner_lub\n     (matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>)))\n  \\<lbrakk>matrix_seq ?dim ?f; matrix_seq.lowner_is_lub ?f ?M\\<rbrakk>\n  \\<Longrightarrow> ?M \\<in> carrier_mat ?dim ?dim\n  matrix_seq d (matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>))\n  matrix_seq ?dim ?f \\<Longrightarrow> positive (matrix_seq.lowner_lub ?f)\n  \\<lbrakk>matrix_seq ?dim ?f; \\<forall>n. trace (?f n) \\<le> ?x\\<rbrakk>\n  \\<Longrightarrow> trace (matrix_seq.lowner_lub ?f) \\<le> ?x\n  \\<forall>n.\n     trace (matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>) n)\n     \\<le> trace \\<rho>\n\ngoal (1 subgoal):\n 1. matrix_seq.lowner_lub\n     (matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>))\n    \\<in> carrier_mat d d \\<and>\n    positive\n     (matrix_seq.lowner_lub\n       (matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>))) \\<and>\n    trace\n     (matrix_seq.lowner_lub\n       (matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>)))\n    \\<le> trace \\<rho>", "by auto"], ["proof (state)\nthis:\n  matrix_seq.lowner_lub\n   (matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>))\n  \\<in> carrier_mat d d \\<and>\n  positive\n   (matrix_seq.lowner_lub\n     (matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>))) \\<and>\n  trace\n   (matrix_seq.lowner_lub\n     (matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>)))\n  \\<le> trace \\<rho>\n\ngoal (1 subgoal):\n 1. denote_while M0 M1 DS \\<rho> \\<in> carrier_mat d d \\<and>\n    positive (denote_while M0 M1 DS \\<rho>) \\<and>\n    trace (denote_while M0 M1 DS \\<rho>) \\<le> trace \\<rho>", "then"], ["proof (chain)\npicking this:\n  matrix_seq.lowner_lub\n   (matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>))\n  \\<in> carrier_mat d d \\<and>\n  positive\n   (matrix_seq.lowner_lub\n     (matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>))) \\<and>\n  trace\n   (matrix_seq.lowner_lub\n     (matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>)))\n  \\<le> trace \\<rho>", "show ?thesis"], ["proof (prove)\nusing this:\n  matrix_seq.lowner_lub\n   (matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>))\n  \\<in> carrier_mat d d \\<and>\n  positive\n   (matrix_seq.lowner_lub\n     (matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>))) \\<and>\n  trace\n   (matrix_seq.lowner_lub\n     (matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>)))\n  \\<le> trace \\<rho>\n\ngoal (1 subgoal):\n 1. denote_while M0 M1 DS \\<rho> \\<in> carrier_mat d d \\<and>\n    positive (denote_while M0 M1 DS \\<rho>) \\<and>\n    trace (denote_while M0 M1 DS \\<rho>) \\<le> trace \\<rho>", "unfolding denote_while_def matrix_inf_sum_def"], ["proof (prove)\nusing this:\n  matrix_seq.lowner_lub\n   (matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>))\n  \\<in> carrier_mat d d \\<and>\n  positive\n   (matrix_seq.lowner_lub\n     (matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>))) \\<and>\n  trace\n   (matrix_seq.lowner_lub\n     (matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>)))\n  \\<le> trace \\<rho>\n\ngoal (1 subgoal):\n 1. matrix_seq.lowner_lub\n     (matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>))\n    \\<in> carrier_mat d d \\<and>\n    positive\n     (matrix_seq.lowner_lub\n       (matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>))) \\<and>\n    trace\n     (matrix_seq.lowner_lub\n       (matrix_sum d (\\<lambda>n. denote_while_n M0 M1 DS n \\<rho>)))\n    \\<le> trace \\<rho>", "by auto"], ["proof (state)\nthis:\n  denote_while M0 M1 DS \\<rho> \\<in> carrier_mat d d \\<and>\n  positive (denote_while M0 M1 DS \\<rho>) \\<and>\n  trace (denote_while M0 M1 DS \\<rho>) \\<le> trace \\<rho>\n\ngoal:\nNo subgoals!", "qed"], ["", "definition denote_measure :: \"nat \\<Rightarrow> (nat \\<Rightarrow> complex mat) \\<Rightarrow> ((state \\<Rightarrow> state) list) \\<Rightarrow> state \\<Rightarrow> state\" where\n  \"denote_measure n M DS \\<rho> = matrix_sum d (\\<lambda>k. (DS!k) ((M k) * \\<rho> * adjoint (M k))) n\""], ["", "lemma denote_measure_dim:\n  assumes \"\\<rho> \\<in> carrier_mat d d\"\n    \"measurement d n M\"\n    \"\\<And>\\<rho>' k. \\<rho>' \\<in> carrier_mat d d \\<Longrightarrow> k < n \\<Longrightarrow> (DS!k) \\<rho>' \\<in> carrier_mat d d\"\n  shows\n    \"denote_measure n M DS \\<rho> \\<in> carrier_mat d d\""], ["proof (prove)\ngoal (1 subgoal):\n 1. denote_measure n M DS \\<rho> \\<in> carrier_mat d d", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. denote_measure n M DS \\<rho> \\<in> carrier_mat d d", "have dMk: \"k < n \\<Longrightarrow> M k \\<in> carrier_mat d d\" for k"], ["proof (prove)\ngoal (1 subgoal):\n 1. k < n \\<Longrightarrow> M k \\<in> carrier_mat d d", "using assms measurement_def"], ["proof (prove)\nusing this:\n  \\<rho> \\<in> carrier_mat d d\n  measurement d n M\n  \\<lbrakk>?\\<rho>' \\<in> carrier_mat d d; ?k < n\\<rbrakk>\n  \\<Longrightarrow> (DS ! ?k) ?\\<rho>' \\<in> carrier_mat d d\n  measurement ?d ?n ?M =\n  ((\\<forall>j<?n. ?M j \\<in> carrier_mat ?d ?d) \\<and>\n   matrix_sum ?d (\\<lambda>j. adjoint (?M j) * ?M j) ?n = 1\\<^sub>m ?d)\n\ngoal (1 subgoal):\n 1. k < n \\<Longrightarrow> M k \\<in> carrier_mat d d", "by auto"], ["proof (state)\nthis:\n  ?k < n \\<Longrightarrow> M ?k \\<in> carrier_mat d d\n\ngoal (1 subgoal):\n 1. denote_measure n M DS \\<rho> \\<in> carrier_mat d d", "have d: \"k < n \\<Longrightarrow> (M k) * \\<rho> * adjoint (M k) \\<in> carrier_mat d d\" for k"], ["proof (prove)\ngoal (1 subgoal):\n 1. k < n \\<Longrightarrow>\n    M k * \\<rho> * adjoint (M k) \\<in> carrier_mat d d", "using mult_carrier_mat[OF mult_carrier_mat[OF dMk assms(1)] adjoint_dim[OF dMk]]"], ["proof (prove)\nusing this:\n  \\<lbrakk>?k4 < n; ?k2 < n\\<rbrakk>\n  \\<Longrightarrow> M ?k4 * \\<rho> * adjoint (M ?k2) \\<in> carrier_mat d d\n\ngoal (1 subgoal):\n 1. k < n \\<Longrightarrow>\n    M k * \\<rho> * adjoint (M k) \\<in> carrier_mat d d", "by auto"], ["proof (state)\nthis:\n  ?k < n \\<Longrightarrow>\n  M ?k * \\<rho> * adjoint (M ?k) \\<in> carrier_mat d d\n\ngoal (1 subgoal):\n 1. denote_measure n M DS \\<rho> \\<in> carrier_mat d d", "then"], ["proof (chain)\npicking this:\n  ?k < n \\<Longrightarrow>\n  M ?k * \\<rho> * adjoint (M ?k) \\<in> carrier_mat d d", "have \"k < n \\<Longrightarrow> (DS!k) ((M k) * \\<rho> * adjoint (M k)) \\<in> carrier_mat d d\" for k"], ["proof (prove)\nusing this:\n  ?k < n \\<Longrightarrow>\n  M ?k * \\<rho> * adjoint (M ?k) \\<in> carrier_mat d d\n\ngoal (1 subgoal):\n 1. k < n \\<Longrightarrow>\n    (DS ! k) (M k * \\<rho> * adjoint (M k)) \\<in> carrier_mat d d", "using assms(3)"], ["proof (prove)\nusing this:\n  ?k < n \\<Longrightarrow>\n  M ?k * \\<rho> * adjoint (M ?k) \\<in> carrier_mat d d\n  \\<lbrakk>?\\<rho>' \\<in> carrier_mat d d; ?k < n\\<rbrakk>\n  \\<Longrightarrow> (DS ! ?k) ?\\<rho>' \\<in> carrier_mat d d\n\ngoal (1 subgoal):\n 1. k < n \\<Longrightarrow>\n    (DS ! k) (M k * \\<rho> * adjoint (M k)) \\<in> carrier_mat d d", "by auto"], ["proof (state)\nthis:\n  ?k < n \\<Longrightarrow>\n  (DS ! ?k) (M ?k * \\<rho> * adjoint (M ?k)) \\<in> carrier_mat d d\n\ngoal (1 subgoal):\n 1. denote_measure n M DS \\<rho> \\<in> carrier_mat d d", "then"], ["proof (chain)\npicking this:\n  ?k < n \\<Longrightarrow>\n  (DS ! ?k) (M ?k * \\<rho> * adjoint (M ?k)) \\<in> carrier_mat d d", "show ?thesis"], ["proof (prove)\nusing this:\n  ?k < n \\<Longrightarrow>\n  (DS ! ?k) (M ?k * \\<rho> * adjoint (M ?k)) \\<in> carrier_mat d d\n\ngoal (1 subgoal):\n 1. denote_measure n M DS \\<rho> \\<in> carrier_mat d d", "unfolding denote_measure_def"], ["proof (prove)\nusing this:\n  ?k < n \\<Longrightarrow>\n  (DS ! ?k) (M ?k * \\<rho> * adjoint (M ?k)) \\<in> carrier_mat d d\n\ngoal (1 subgoal):\n 1. matrix_sum d (\\<lambda>k. (DS ! k) (M k * \\<rho> * adjoint (M k))) n\n    \\<in> carrier_mat d d", "using matrix_sum_dim[of n \"\\<lambda>k. (DS!k) ((M k) * \\<rho> * adjoint (M k))\"]"], ["proof (prove)\nusing this:\n  ?k < n \\<Longrightarrow>\n  (DS ! ?k) (M ?k * \\<rho> * adjoint (M ?k)) \\<in> carrier_mat d d\n  (\\<And>k.\n      k < n \\<Longrightarrow>\n      (DS ! k) (M k * \\<rho> * adjoint (M k))\n      \\<in> carrier_mat ?d ?d) \\<Longrightarrow>\n  matrix_sum ?d (\\<lambda>k. (DS ! k) (M k * \\<rho> * adjoint (M k))) n\n  \\<in> carrier_mat ?d ?d\n\ngoal (1 subgoal):\n 1. matrix_sum d (\\<lambda>k. (DS ! k) (M k * \\<rho> * adjoint (M k))) n\n    \\<in> carrier_mat d d", "by auto"], ["proof (state)\nthis:\n  denote_measure n M DS \\<rho> \\<in> carrier_mat d d\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma measure_well_com:\n  assumes \"well_com (Measure n M S)\"\n  shows \"\\<And>k. k < n \\<Longrightarrow> well_com (S ! k)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>k. k < n \\<Longrightarrow> well_com (S ! k)", "using assms"], ["proof (prove)\nusing this:\n  well_com (Measure n M S)\n\ngoal (1 subgoal):\n 1. \\<And>k. k < n \\<Longrightarrow> well_com (S ! k)", "unfolding well_com.simps"], ["proof (prove)\nusing this:\n  measurement d n M \\<and> length S = n \\<and> list_all well_com S\n\ngoal (1 subgoal):\n 1. \\<And>k. k < n \\<Longrightarrow> well_com (S ! k)", "using list_all_length"], ["proof (prove)\nusing this:\n  measurement d n M \\<and> length S = n \\<and> list_all well_com S\n  list_all ?P ?xs = (\\<forall>n<length ?xs. ?P (?xs ! n))\n\ngoal (1 subgoal):\n 1. \\<And>k. k < n \\<Longrightarrow> well_com (S ! k)", "by auto"], ["", "text \\<open>Semantics of commands\\<close>"], ["", "fun denote :: \"com \\<Rightarrow> state \\<Rightarrow> state\" where\n  \"denote SKIP \\<rho> = \\<rho>\"\n| \"denote (Utrans U) \\<rho> = U * \\<rho> * adjoint U\"\n| \"denote (Seq S1 S2) \\<rho> = denote S2 (denote S1 \\<rho>)\"\n| \"denote (Measure n M S) \\<rho> = denote_measure n M (map denote S) \\<rho>\"\n| \"denote (While M S) \\<rho> = denote_while (M 0) (M 1) (denote S) \\<rho>\""], ["", "lemma denote_measure_expand:\n  assumes m: \"m \\<le> n\" and wc: \"well_com (Measure n M S)\"  \n  shows \"denote (Measure m M S) \\<rho> = matrix_sum d (\\<lambda>k. denote (S!k) ((M k) * \\<rho> * adjoint (M k))) m\""], ["proof (prove)\ngoal (1 subgoal):\n 1. denote (Measure m M S) \\<rho> =\n    matrix_sum d (\\<lambda>k. denote (S ! k) (M k * \\<rho> * adjoint (M k)))\n     m", "unfolding denote.simps denote_measure_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. matrix_sum d\n     (\\<lambda>k. (map denote S ! k) (M k * \\<rho> * adjoint (M k))) m =\n    matrix_sum d (\\<lambda>k. denote (S ! k) (M k * \\<rho> * adjoint (M k)))\n     m", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. matrix_sum d\n     (\\<lambda>k. (map denote S ! k) (M k * \\<rho> * adjoint (M k))) m =\n    matrix_sum d (\\<lambda>k. denote (S ! k) (M k * \\<rho> * adjoint (M k)))\n     m", "have \"k < m \\<Longrightarrow> map denote S ! k = denote (S!k)\" for k"], ["proof (prove)\ngoal (1 subgoal):\n 1. k < m \\<Longrightarrow> map denote S ! k = denote (S ! k)", "using wc m"], ["proof (prove)\nusing this:\n  well_com (Measure n M S)\n  m \\<le> n\n\ngoal (1 subgoal):\n 1. k < m \\<Longrightarrow> map denote S ! k = denote (S ! k)", "by auto"], ["proof (state)\nthis:\n  ?k < m \\<Longrightarrow> map denote S ! ?k = denote (S ! ?k)\n\ngoal (1 subgoal):\n 1. matrix_sum d\n     (\\<lambda>k. (map denote S ! k) (M k * \\<rho> * adjoint (M k))) m =\n    matrix_sum d (\\<lambda>k. denote (S ! k) (M k * \\<rho> * adjoint (M k)))\n     m", "then"], ["proof (chain)\npicking this:\n  ?k < m \\<Longrightarrow> map denote S ! ?k = denote (S ! ?k)", "have \"k < m \\<Longrightarrow> (map denote S ! k) (M k * \\<rho> * adjoint (M k)) = denote (S!k) ((M k) * \\<rho> * adjoint (M k))\" for k"], ["proof (prove)\nusing this:\n  ?k < m \\<Longrightarrow> map denote S ! ?k = denote (S ! ?k)\n\ngoal (1 subgoal):\n 1. k < m \\<Longrightarrow>\n    (map denote S ! k) (M k * \\<rho> * adjoint (M k)) =\n    denote (S ! k) (M k * \\<rho> * adjoint (M k))", "by auto"], ["proof (state)\nthis:\n  ?k < m \\<Longrightarrow>\n  (map denote S ! ?k) (M ?k * \\<rho> * adjoint (M ?k)) =\n  denote (S ! ?k) (M ?k * \\<rho> * adjoint (M ?k))\n\ngoal (1 subgoal):\n 1. matrix_sum d\n     (\\<lambda>k. (map denote S ! k) (M k * \\<rho> * adjoint (M k))) m =\n    matrix_sum d (\\<lambda>k. denote (S ! k) (M k * \\<rho> * adjoint (M k)))\n     m", "then"], ["proof (chain)\npicking this:\n  ?k < m \\<Longrightarrow>\n  (map denote S ! ?k) (M ?k * \\<rho> * adjoint (M ?k)) =\n  denote (S ! ?k) (M ?k * \\<rho> * adjoint (M ?k))", "show \"matrix_sum d (\\<lambda>k. (map denote S ! k) (M k * \\<rho> * adjoint (M k))) m\n    = matrix_sum d (\\<lambda>k. denote (S ! k) (M k * \\<rho> * adjoint (M k))) m\""], ["proof (prove)\nusing this:\n  ?k < m \\<Longrightarrow>\n  (map denote S ! ?k) (M ?k * \\<rho> * adjoint (M ?k)) =\n  denote (S ! ?k) (M ?k * \\<rho> * adjoint (M ?k))\n\ngoal (1 subgoal):\n 1. matrix_sum d\n     (\\<lambda>k. (map denote S ! k) (M k * \\<rho> * adjoint (M k))) m =\n    matrix_sum d (\\<lambda>k. denote (S ! k) (M k * \\<rho> * adjoint (M k)))\n     m", "using matrix_sum_cong[of m \"\\<lambda>k. (map denote S ! k) (M k * \\<rho> * adjoint (M k))\" \"\\<lambda>k. denote (S ! k) (M k * \\<rho> * adjoint (M k))\"]"], ["proof (prove)\nusing this:\n  ?k < m \\<Longrightarrow>\n  (map denote S ! ?k) (M ?k * \\<rho> * adjoint (M ?k)) =\n  denote (S ! ?k) (M ?k * \\<rho> * adjoint (M ?k))\n  (\\<And>k.\n      k < m \\<Longrightarrow>\n      (map denote S ! k) (M k * \\<rho> * adjoint (M k)) =\n      denote (S ! k) (M k * \\<rho> * adjoint (M k))) \\<Longrightarrow>\n  matrix_sum ?d\n   (\\<lambda>k. (map denote S ! k) (M k * \\<rho> * adjoint (M k))) m =\n  matrix_sum ?d (\\<lambda>k. denote (S ! k) (M k * \\<rho> * adjoint (M k)))\n   m\n\ngoal (1 subgoal):\n 1. matrix_sum d\n     (\\<lambda>k. (map denote S ! k) (M k * \\<rho> * adjoint (M k))) m =\n    matrix_sum d (\\<lambda>k. denote (S ! k) (M k * \\<rho> * adjoint (M k)))\n     m", "by auto"], ["proof (state)\nthis:\n  matrix_sum d\n   (\\<lambda>k. (map denote S ! k) (M k * \\<rho> * adjoint (M k))) m =\n  matrix_sum d (\\<lambda>k. denote (S ! k) (M k * \\<rho> * adjoint (M k))) m\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma matrix_sum_trace_le:\n  fixes f :: \"nat \\<Rightarrow> complex mat\" and g :: \"nat \\<Rightarrow> complex mat\"\n  assumes \"(\\<And>k. k < n \\<Longrightarrow> f k \\<in> carrier_mat d d)\" \n    \"(\\<And>k. k < n \\<Longrightarrow> g k \\<in> carrier_mat d d)\"\n    \"(\\<And>k. k < n \\<Longrightarrow> trace (f k) \\<le> trace (g k))\"\n  shows \"trace (matrix_sum d f n) \\<le> trace (matrix_sum d g n)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. trace (matrix_sum d f n) \\<le> trace (matrix_sum d g n)", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. trace (matrix_sum d f n) \\<le> trace (matrix_sum d g n)", "have \"sum (\\<lambda>k. trace (f k)) {0..<n} \\<le>  sum (\\<lambda>k. trace (g k)) {0..<n}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>k = 0..<n. trace (f k)) \\<le> (\\<Sum>k = 0..<n. trace (g k))", "using assms"], ["proof (prove)\nusing this:\n  ?k < n \\<Longrightarrow> f ?k \\<in> carrier_mat d d\n  ?k < n \\<Longrightarrow> g ?k \\<in> carrier_mat d d\n  ?k < n \\<Longrightarrow> trace (f ?k) \\<le> trace (g ?k)\n\ngoal (1 subgoal):\n 1. (\\<Sum>k = 0..<n. trace (f k)) \\<le> (\\<Sum>k = 0..<n. trace (g k))", "by (meson atLeastLessThan_iff sum_mono)"], ["proof (state)\nthis:\n  (\\<Sum>k = 0..<n. trace (f k)) \\<le> (\\<Sum>k = 0..<n. trace (g k))\n\ngoal (1 subgoal):\n 1. trace (matrix_sum d f n) \\<le> trace (matrix_sum d g n)", "then"], ["proof (chain)\npicking this:\n  (\\<Sum>k = 0..<n. trace (f k)) \\<le> (\\<Sum>k = 0..<n. trace (g k))", "show ?thesis"], ["proof (prove)\nusing this:\n  (\\<Sum>k = 0..<n. trace (f k)) \\<le> (\\<Sum>k = 0..<n. trace (g k))\n\ngoal (1 subgoal):\n 1. trace (matrix_sum d f n) \\<le> trace (matrix_sum d g n)", "using trace_matrix_sum_linear assms"], ["proof (prove)\nusing this:\n  (\\<Sum>k = 0..<n. trace (f k)) \\<le> (\\<Sum>k = 0..<n. trace (g k))\n  (\\<And>k.\n      k < ?n \\<Longrightarrow>\n      ?f k \\<in> carrier_mat ?d ?d) \\<Longrightarrow>\n  trace (matrix_sum ?d ?f ?n) = (\\<Sum>k = 0..<?n. trace (?f k))\n  ?k < n \\<Longrightarrow> f ?k \\<in> carrier_mat d d\n  ?k < n \\<Longrightarrow> g ?k \\<in> carrier_mat d d\n  ?k < n \\<Longrightarrow> trace (f ?k) \\<le> trace (g ?k)\n\ngoal (1 subgoal):\n 1. trace (matrix_sum d f n) \\<le> trace (matrix_sum d g n)", "by auto"], ["proof (state)\nthis:\n  trace (matrix_sum d f n) \\<le> trace (matrix_sum d g n)\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma map_denote_positive_trace_dim:\n  assumes \"well_com (Measure x1 x2a x3a)\"\n    \"x4 \\<in> carrier_mat d d\"\n    \"partial_density_operator x4\"\n    \"\\<And>x3aa \\<rho>. x3aa \\<in> set x3a \\<Longrightarrow> well_com x3aa \\<Longrightarrow> \\<rho> \\<in> carrier_mat d d \\<Longrightarrow> partial_density_operator \\<rho> \n      \\<Longrightarrow> positive (denote x3aa \\<rho>) \\<and> trace (denote x3aa \\<rho>) \\<le> trace \\<rho> \\<and> denote x3aa \\<rho> \\<in> carrier_mat d d\"\n  shows \"\\<forall>k < x1. positive ((map denote x3a ! k) (x2a k * x4 * adjoint (x2a k))) \n               \\<and> ((map denote x3a ! k) (x2a k * x4 * adjoint (x2a k))) \\<in> carrier_mat d d\n               \\<and> trace ((map denote x3a ! k) (x2a k * x4 * adjoint (x2a k))) \\<le> trace (x2a k * x4 * adjoint (x2a k))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>k<x1.\n       positive ((map denote x3a ! k) (x2a k * x4 * adjoint (x2a k))) \\<and>\n       (map denote x3a ! k) (x2a k * x4 * adjoint (x2a k))\n       \\<in> carrier_mat d d \\<and>\n       trace ((map denote x3a ! k) (x2a k * x4 * adjoint (x2a k)))\n       \\<le> trace (x2a k * x4 * adjoint (x2a k))", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<forall>k<x1.\n       positive ((map denote x3a ! k) (x2a k * x4 * adjoint (x2a k))) \\<and>\n       (map denote x3a ! k) (x2a k * x4 * adjoint (x2a k))\n       \\<in> carrier_mat d d \\<and>\n       trace ((map denote x3a ! k) (x2a k * x4 * adjoint (x2a k)))\n       \\<le> trace (x2a k * x4 * adjoint (x2a k))", "have x2ak: \"\\<forall> k < x1. x2a k \\<in> carrier_mat d d\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>k<x1. x2a k \\<in> carrier_mat d d", "using assms(1) measurement_dim"], ["proof (prove)\nusing this:\n  well_com (Measure x1 x2a x3a)\n  \\<lbrakk>measurement ?d ?n ?M; ?k < ?n\\<rbrakk>\n  \\<Longrightarrow> ?M ?k \\<in> carrier_mat ?d ?d\n\ngoal (1 subgoal):\n 1. \\<forall>k<x1. x2a k \\<in> carrier_mat d d", "by auto"], ["proof (state)\nthis:\n  \\<forall>k<x1. x2a k \\<in> carrier_mat d d\n\ngoal (1 subgoal):\n 1. \\<forall>k<x1.\n       positive ((map denote x3a ! k) (x2a k * x4 * adjoint (x2a k))) \\<and>\n       (map denote x3a ! k) (x2a k * x4 * adjoint (x2a k))\n       \\<in> carrier_mat d d \\<and>\n       trace ((map denote x3a ! k) (x2a k * x4 * adjoint (x2a k)))\n       \\<le> trace (x2a k * x4 * adjoint (x2a k))", "then"], ["proof (chain)\npicking this:\n  \\<forall>k<x1. x2a k \\<in> carrier_mat d d", "have x2aa:\"\\<forall> k < x1. (x2a k * x4 * adjoint (x2a k)) \\<in> carrier_mat d d\""], ["proof (prove)\nusing this:\n  \\<forall>k<x1. x2a k \\<in> carrier_mat d d\n\ngoal (1 subgoal):\n 1. \\<forall>k<x1. x2a k * x4 * adjoint (x2a k) \\<in> carrier_mat d d", "using assms(2)"], ["proof (prove)\nusing this:\n  \\<forall>k<x1. x2a k \\<in> carrier_mat d d\n  x4 \\<in> carrier_mat d d\n\ngoal (1 subgoal):\n 1. \\<forall>k<x1. x2a k * x4 * adjoint (x2a k) \\<in> carrier_mat d d", "by fastforce"], ["proof (state)\nthis:\n  \\<forall>k<x1. x2a k * x4 * adjoint (x2a k) \\<in> carrier_mat d d\n\ngoal (1 subgoal):\n 1. \\<forall>k<x1.\n       positive ((map denote x3a ! k) (x2a k * x4 * adjoint (x2a k))) \\<and>\n       (map denote x3a ! k) (x2a k * x4 * adjoint (x2a k))\n       \\<in> carrier_mat d d \\<and>\n       trace ((map denote x3a ! k) (x2a k * x4 * adjoint (x2a k)))\n       \\<le> trace (x2a k * x4 * adjoint (x2a k))", "have posct: \"positive ((map denote x3a ! k) (x2a k * x4 * adjoint (x2a k))) \n               \\<and> ((map denote x3a ! k) (x2a k * x4 * adjoint (x2a k))) \\<in> carrier_mat d d\n               \\<and> trace ((map denote x3a ! k) (x2a k * x4 * adjoint (x2a k))) \\<le> trace (x2a k * x4 * adjoint (x2a k))\"\n    if k: \"k < x1\" for k"], ["proof (prove)\ngoal (1 subgoal):\n 1. positive ((map denote x3a ! k) (x2a k * x4 * adjoint (x2a k))) \\<and>\n    (map denote x3a ! k) (x2a k * x4 * adjoint (x2a k))\n    \\<in> carrier_mat d d \\<and>\n    trace ((map denote x3a ! k) (x2a k * x4 * adjoint (x2a k)))\n    \\<le> trace (x2a k * x4 * adjoint (x2a k))", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. positive ((map denote x3a ! k) (x2a k * x4 * adjoint (x2a k))) \\<and>\n    (map denote x3a ! k) (x2a k * x4 * adjoint (x2a k))\n    \\<in> carrier_mat d d \\<and>\n    trace ((map denote x3a ! k) (x2a k * x4 * adjoint (x2a k)))\n    \\<le> trace (x2a k * x4 * adjoint (x2a k))", "have lea: \"adjoint (x2a k) * x2a k \\<le>\\<^sub>L 1\\<^sub>m d\""], ["proof (prove)\ngoal (1 subgoal):\n 1. adjoint (x2a k) * x2a k \\<le>\\<^sub>L 1\\<^sub>m d", "using measurement_le_one_mat assms(1) k"], ["proof (prove)\nusing this:\n  \\<lbrakk>measurement ?d ?n ?f; ?j < ?n\\<rbrakk>\n  \\<Longrightarrow> adjoint (?f ?j) * ?f ?j \\<le>\\<^sub>L 1\\<^sub>m ?d\n  well_com (Measure x1 x2a x3a)\n  k < x1\n\ngoal (1 subgoal):\n 1. adjoint (x2a k) * x2a k \\<le>\\<^sub>L 1\\<^sub>m d", "by auto"], ["proof (state)\nthis:\n  adjoint (x2a k) * x2a k \\<le>\\<^sub>L 1\\<^sub>m d\n\ngoal (1 subgoal):\n 1. positive ((map denote x3a ! k) (x2a k * x4 * adjoint (x2a k))) \\<and>\n    (map denote x3a ! k) (x2a k * x4 * adjoint (x2a k))\n    \\<in> carrier_mat d d \\<and>\n    trace ((map denote x3a ! k) (x2a k * x4 * adjoint (x2a k)))\n    \\<le> trace (x2a k * x4 * adjoint (x2a k))", "have \"(x2a k * x4 * adjoint (x2a k)) \\<in> carrier_mat d d\""], ["proof (prove)\ngoal (1 subgoal):\n 1. x2a k * x4 * adjoint (x2a k) \\<in> carrier_mat d d", "using k x2aa assms(2)"], ["proof (prove)\nusing this:\n  k < x1\n  \\<forall>k<x1. x2a k * x4 * adjoint (x2a k) \\<in> carrier_mat d d\n  x4 \\<in> carrier_mat d d\n\ngoal (1 subgoal):\n 1. x2a k * x4 * adjoint (x2a k) \\<in> carrier_mat d d", "by fastforce"], ["proof (state)\nthis:\n  x2a k * x4 * adjoint (x2a k) \\<in> carrier_mat d d\n\ngoal (1 subgoal):\n 1. positive ((map denote x3a ! k) (x2a k * x4 * adjoint (x2a k))) \\<and>\n    (map denote x3a ! k) (x2a k * x4 * adjoint (x2a k))\n    \\<in> carrier_mat d d \\<and>\n    trace ((map denote x3a ! k) (x2a k * x4 * adjoint (x2a k)))\n    \\<le> trace (x2a k * x4 * adjoint (x2a k))", "moreover"], ["proof (state)\nthis:\n  x2a k * x4 * adjoint (x2a k) \\<in> carrier_mat d d\n\ngoal (1 subgoal):\n 1. positive ((map denote x3a ! k) (x2a k * x4 * adjoint (x2a k))) \\<and>\n    (map denote x3a ! k) (x2a k * x4 * adjoint (x2a k))\n    \\<in> carrier_mat d d \\<and>\n    trace ((map denote x3a ! k) (x2a k * x4 * adjoint (x2a k)))\n    \\<le> trace (x2a k * x4 * adjoint (x2a k))", "have \"(x3a ! k) \\<in> set x3a\""], ["proof (prove)\ngoal (1 subgoal):\n 1. x3a ! k \\<in> set x3a", "using k assms(1)"], ["proof (prove)\nusing this:\n  k < x1\n  well_com (Measure x1 x2a x3a)\n\ngoal (1 subgoal):\n 1. x3a ! k \\<in> set x3a", "by simp"], ["proof (state)\nthis:\n  x3a ! k \\<in> set x3a\n\ngoal (1 subgoal):\n 1. positive ((map denote x3a ! k) (x2a k * x4 * adjoint (x2a k))) \\<and>\n    (map denote x3a ! k) (x2a k * x4 * adjoint (x2a k))\n    \\<in> carrier_mat d d \\<and>\n    trace ((map denote x3a ! k) (x2a k * x4 * adjoint (x2a k)))\n    \\<le> trace (x2a k * x4 * adjoint (x2a k))", "moreover"], ["proof (state)\nthis:\n  x3a ! k \\<in> set x3a\n\ngoal (1 subgoal):\n 1. positive ((map denote x3a ! k) (x2a k * x4 * adjoint (x2a k))) \\<and>\n    (map denote x3a ! k) (x2a k * x4 * adjoint (x2a k))\n    \\<in> carrier_mat d d \\<and>\n    trace ((map denote x3a ! k) (x2a k * x4 * adjoint (x2a k)))\n    \\<le> trace (x2a k * x4 * adjoint (x2a k))", "have \"well_com (x3a ! k)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. well_com (x3a ! k)", "using k assms(1)"], ["proof (prove)\nusing this:\n  k < x1\n  well_com (Measure x1 x2a x3a)\n\ngoal (1 subgoal):\n 1. well_com (x3a ! k)", "using measure_well_com"], ["proof (prove)\nusing this:\n  k < x1\n  well_com (Measure x1 x2a x3a)\n  \\<lbrakk>well_com (Measure ?n ?M ?S); ?k < ?n\\<rbrakk>\n  \\<Longrightarrow> well_com (?S ! ?k)\n\ngoal (1 subgoal):\n 1. well_com (x3a ! k)", "by blast"], ["proof (state)\nthis:\n  well_com (x3a ! k)\n\ngoal (1 subgoal):\n 1. positive ((map denote x3a ! k) (x2a k * x4 * adjoint (x2a k))) \\<and>\n    (map denote x3a ! k) (x2a k * x4 * adjoint (x2a k))\n    \\<in> carrier_mat d d \\<and>\n    trace ((map denote x3a ! k) (x2a k * x4 * adjoint (x2a k)))\n    \\<le> trace (x2a k * x4 * adjoint (x2a k))", "moreover"], ["proof (state)\nthis:\n  well_com (x3a ! k)\n\ngoal (1 subgoal):\n 1. positive ((map denote x3a ! k) (x2a k * x4 * adjoint (x2a k))) \\<and>\n    (map denote x3a ! k) (x2a k * x4 * adjoint (x2a k))\n    \\<in> carrier_mat d d \\<and>\n    trace ((map denote x3a ! k) (x2a k * x4 * adjoint (x2a k)))\n    \\<le> trace (x2a k * x4 * adjoint (x2a k))", "have \"partial_density_operator (x2a k * x4 * adjoint (x2a k))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. partial_density_operator (x2a k * x4 * adjoint (x2a k))", "using pdo_close_under_measurement x2ak assms(2,3) lea  k"], ["proof (prove)\nusing this:\n  \\<lbrakk>?M \\<in> carrier_mat ?n ?n; ?\\<rho> \\<in> carrier_mat ?n ?n;\n   partial_density_operator ?\\<rho>;\n   adjoint ?M * ?M \\<le>\\<^sub>L 1\\<^sub>m ?n\\<rbrakk>\n  \\<Longrightarrow> partial_density_operator (?M * ?\\<rho> * adjoint ?M)\n  \\<forall>k<x1. x2a k \\<in> carrier_mat d d\n  x4 \\<in> carrier_mat d d\n  partial_density_operator x4\n  adjoint (x2a k) * x2a k \\<le>\\<^sub>L 1\\<^sub>m d\n  k < x1\n\ngoal (1 subgoal):\n 1. partial_density_operator (x2a k * x4 * adjoint (x2a k))", "by blast"], ["proof (state)\nthis:\n  partial_density_operator (x2a k * x4 * adjoint (x2a k))\n\ngoal (1 subgoal):\n 1. positive ((map denote x3a ! k) (x2a k * x4 * adjoint (x2a k))) \\<and>\n    (map denote x3a ! k) (x2a k * x4 * adjoint (x2a k))\n    \\<in> carrier_mat d d \\<and>\n    trace ((map denote x3a ! k) (x2a k * x4 * adjoint (x2a k)))\n    \\<le> trace (x2a k * x4 * adjoint (x2a k))", "ultimately"], ["proof (chain)\npicking this:\n  x2a k * x4 * adjoint (x2a k) \\<in> carrier_mat d d\n  x3a ! k \\<in> set x3a\n  well_com (x3a ! k)\n  partial_density_operator (x2a k * x4 * adjoint (x2a k))", "have \"positive (denote (x3a ! k) (x2a k * x4 * adjoint (x2a k)))\n         \\<and> (denote (x3a ! k) (x2a k * x4 * adjoint (x2a k))) \\<in> carrier_mat d d\n         \\<and> trace (denote (x3a ! k) (x2a k * x4 * adjoint (x2a k))) \\<le> trace (x2a k * x4 * adjoint (x2a k))\""], ["proof (prove)\nusing this:\n  x2a k * x4 * adjoint (x2a k) \\<in> carrier_mat d d\n  x3a ! k \\<in> set x3a\n  well_com (x3a ! k)\n  partial_density_operator (x2a k * x4 * adjoint (x2a k))\n\ngoal (1 subgoal):\n 1. positive (denote (x3a ! k) (x2a k * x4 * adjoint (x2a k))) \\<and>\n    denote (x3a ! k) (x2a k * x4 * adjoint (x2a k))\n    \\<in> carrier_mat d d \\<and>\n    trace (denote (x3a ! k) (x2a k * x4 * adjoint (x2a k)))\n    \\<le> trace (x2a k * x4 * adjoint (x2a k))", "using assms(4)"], ["proof (prove)\nusing this:\n  x2a k * x4 * adjoint (x2a k) \\<in> carrier_mat d d\n  x3a ! k \\<in> set x3a\n  well_com (x3a ! k)\n  partial_density_operator (x2a k * x4 * adjoint (x2a k))\n  \\<lbrakk>?x3aa \\<in> set x3a; well_com ?x3aa;\n   ?\\<rho> \\<in> carrier_mat d d; partial_density_operator ?\\<rho>\\<rbrakk>\n  \\<Longrightarrow> positive (denote ?x3aa ?\\<rho>) \\<and>\n                    trace (denote ?x3aa ?\\<rho>) \\<le> trace ?\\<rho> \\<and>\n                    denote ?x3aa ?\\<rho> \\<in> carrier_mat d d\n\ngoal (1 subgoal):\n 1. positive (denote (x3a ! k) (x2a k * x4 * adjoint (x2a k))) \\<and>\n    denote (x3a ! k) (x2a k * x4 * adjoint (x2a k))\n    \\<in> carrier_mat d d \\<and>\n    trace (denote (x3a ! k) (x2a k * x4 * adjoint (x2a k)))\n    \\<le> trace (x2a k * x4 * adjoint (x2a k))", "by auto"], ["proof (state)\nthis:\n  positive (denote (x3a ! k) (x2a k * x4 * adjoint (x2a k))) \\<and>\n  denote (x3a ! k) (x2a k * x4 * adjoint (x2a k))\n  \\<in> carrier_mat d d \\<and>\n  trace (denote (x3a ! k) (x2a k * x4 * adjoint (x2a k)))\n  \\<le> trace (x2a k * x4 * adjoint (x2a k))\n\ngoal (1 subgoal):\n 1. positive ((map denote x3a ! k) (x2a k * x4 * adjoint (x2a k))) \\<and>\n    (map denote x3a ! k) (x2a k * x4 * adjoint (x2a k))\n    \\<in> carrier_mat d d \\<and>\n    trace ((map denote x3a ! k) (x2a k * x4 * adjoint (x2a k)))\n    \\<le> trace (x2a k * x4 * adjoint (x2a k))", "then"], ["proof (chain)\npicking this:\n  positive (denote (x3a ! k) (x2a k * x4 * adjoint (x2a k))) \\<and>\n  denote (x3a ! k) (x2a k * x4 * adjoint (x2a k))\n  \\<in> carrier_mat d d \\<and>\n  trace (denote (x3a ! k) (x2a k * x4 * adjoint (x2a k)))\n  \\<le> trace (x2a k * x4 * adjoint (x2a k))", "show ?thesis"], ["proof (prove)\nusing this:\n  positive (denote (x3a ! k) (x2a k * x4 * adjoint (x2a k))) \\<and>\n  denote (x3a ! k) (x2a k * x4 * adjoint (x2a k))\n  \\<in> carrier_mat d d \\<and>\n  trace (denote (x3a ! k) (x2a k * x4 * adjoint (x2a k)))\n  \\<le> trace (x2a k * x4 * adjoint (x2a k))\n\ngoal (1 subgoal):\n 1. positive ((map denote x3a ! k) (x2a k * x4 * adjoint (x2a k))) \\<and>\n    (map denote x3a ! k) (x2a k * x4 * adjoint (x2a k))\n    \\<in> carrier_mat d d \\<and>\n    trace ((map denote x3a ! k) (x2a k * x4 * adjoint (x2a k)))\n    \\<le> trace (x2a k * x4 * adjoint (x2a k))", "using assms(1) k"], ["proof (prove)\nusing this:\n  positive (denote (x3a ! k) (x2a k * x4 * adjoint (x2a k))) \\<and>\n  denote (x3a ! k) (x2a k * x4 * adjoint (x2a k))\n  \\<in> carrier_mat d d \\<and>\n  trace (denote (x3a ! k) (x2a k * x4 * adjoint (x2a k)))\n  \\<le> trace (x2a k * x4 * adjoint (x2a k))\n  well_com (Measure x1 x2a x3a)\n  k < x1\n\ngoal (1 subgoal):\n 1. positive ((map denote x3a ! k) (x2a k * x4 * adjoint (x2a k))) \\<and>\n    (map denote x3a ! k) (x2a k * x4 * adjoint (x2a k))\n    \\<in> carrier_mat d d \\<and>\n    trace ((map denote x3a ! k) (x2a k * x4 * adjoint (x2a k)))\n    \\<le> trace (x2a k * x4 * adjoint (x2a k))", "by auto"], ["proof (state)\nthis:\n  positive ((map denote x3a ! k) (x2a k * x4 * adjoint (x2a k))) \\<and>\n  (map denote x3a ! k) (x2a k * x4 * adjoint (x2a k))\n  \\<in> carrier_mat d d \\<and>\n  trace ((map denote x3a ! k) (x2a k * x4 * adjoint (x2a k)))\n  \\<le> trace (x2a k * x4 * adjoint (x2a k))\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  ?k < x1 \\<Longrightarrow>\n  positive ((map denote x3a ! ?k) (x2a ?k * x4 * adjoint (x2a ?k))) \\<and>\n  (map denote x3a ! ?k) (x2a ?k * x4 * adjoint (x2a ?k))\n  \\<in> carrier_mat d d \\<and>\n  trace ((map denote x3a ! ?k) (x2a ?k * x4 * adjoint (x2a ?k)))\n  \\<le> trace (x2a ?k * x4 * adjoint (x2a ?k))\n\ngoal (1 subgoal):\n 1. \\<forall>k<x1.\n       positive ((map denote x3a ! k) (x2a k * x4 * adjoint (x2a k))) \\<and>\n       (map denote x3a ! k) (x2a k * x4 * adjoint (x2a k))\n       \\<in> carrier_mat d d \\<and>\n       trace ((map denote x3a ! k) (x2a k * x4 * adjoint (x2a k)))\n       \\<le> trace (x2a k * x4 * adjoint (x2a k))", "then"], ["proof (chain)\npicking this:\n  ?k < x1 \\<Longrightarrow>\n  positive ((map denote x3a ! ?k) (x2a ?k * x4 * adjoint (x2a ?k))) \\<and>\n  (map denote x3a ! ?k) (x2a ?k * x4 * adjoint (x2a ?k))\n  \\<in> carrier_mat d d \\<and>\n  trace ((map denote x3a ! ?k) (x2a ?k * x4 * adjoint (x2a ?k)))\n  \\<le> trace (x2a ?k * x4 * adjoint (x2a ?k))", "show ?thesis"], ["proof (prove)\nusing this:\n  ?k < x1 \\<Longrightarrow>\n  positive ((map denote x3a ! ?k) (x2a ?k * x4 * adjoint (x2a ?k))) \\<and>\n  (map denote x3a ! ?k) (x2a ?k * x4 * adjoint (x2a ?k))\n  \\<in> carrier_mat d d \\<and>\n  trace ((map denote x3a ! ?k) (x2a ?k * x4 * adjoint (x2a ?k)))\n  \\<le> trace (x2a ?k * x4 * adjoint (x2a ?k))\n\ngoal (1 subgoal):\n 1. \\<forall>k<x1.\n       positive ((map denote x3a ! k) (x2a k * x4 * adjoint (x2a k))) \\<and>\n       (map denote x3a ! k) (x2a k * x4 * adjoint (x2a k))\n       \\<in> carrier_mat d d \\<and>\n       trace ((map denote x3a ! k) (x2a k * x4 * adjoint (x2a k)))\n       \\<le> trace (x2a k * x4 * adjoint (x2a k))", "by auto"], ["proof (state)\nthis:\n  \\<forall>k<x1.\n     positive ((map denote x3a ! k) (x2a k * x4 * adjoint (x2a k))) \\<and>\n     (map denote x3a ! k) (x2a k * x4 * adjoint (x2a k))\n     \\<in> carrier_mat d d \\<and>\n     trace ((map denote x3a ! k) (x2a k * x4 * adjoint (x2a k)))\n     \\<le> trace (x2a k * x4 * adjoint (x2a k))\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma denote_measure_positive_trace_dim:\n  assumes \"well_com (Measure x1 x2a x3a)\"\n    \"x4 \\<in> carrier_mat d d\"\n    \"partial_density_operator x4\"\n    \"\\<And>x3aa \\<rho>. x3aa \\<in> set x3a \\<Longrightarrow> well_com x3aa \\<Longrightarrow> \\<rho> \\<in> carrier_mat d d \\<Longrightarrow> partial_density_operator \\<rho> \n      \\<Longrightarrow> positive (denote x3aa \\<rho>) \\<and> trace (denote x3aa \\<rho>) \\<le> trace \\<rho> \\<and> denote x3aa \\<rho> \\<in> carrier_mat d d\"\n  shows \"positive (denote (Measure x1 x2a x3a) x4) \\<and> trace (denote (Measure x1 x2a x3a) x4) \\<le> trace x4\n        \\<and> (denote (Measure x1 x2a x3a) x4) \\<in> carrier_mat d d\""], ["proof (prove)\ngoal (1 subgoal):\n 1. positive (denote (Measure x1 x2a x3a) x4) \\<and>\n    trace (denote (Measure x1 x2a x3a) x4) \\<le> trace x4 \\<and>\n    denote (Measure x1 x2a x3a) x4 \\<in> carrier_mat d d", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. positive (denote (Measure x1 x2a x3a) x4) \\<and>\n    trace (denote (Measure x1 x2a x3a) x4) \\<le> trace x4 \\<and>\n    denote (Measure x1 x2a x3a) x4 \\<in> carrier_mat d d", "have x2ak: \"\\<forall> k < x1. x2a k \\<in> carrier_mat d d\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>k<x1. x2a k \\<in> carrier_mat d d", "using assms(1) measurement_dim"], ["proof (prove)\nusing this:\n  well_com (Measure x1 x2a x3a)\n  \\<lbrakk>measurement ?d ?n ?M; ?k < ?n\\<rbrakk>\n  \\<Longrightarrow> ?M ?k \\<in> carrier_mat ?d ?d\n\ngoal (1 subgoal):\n 1. \\<forall>k<x1. x2a k \\<in> carrier_mat d d", "by auto"], ["proof (state)\nthis:\n  \\<forall>k<x1. x2a k \\<in> carrier_mat d d\n\ngoal (1 subgoal):\n 1. positive (denote (Measure x1 x2a x3a) x4) \\<and>\n    trace (denote (Measure x1 x2a x3a) x4) \\<le> trace x4 \\<and>\n    denote (Measure x1 x2a x3a) x4 \\<in> carrier_mat d d", "then"], ["proof (chain)\npicking this:\n  \\<forall>k<x1. x2a k \\<in> carrier_mat d d", "have x2aa:\"\\<forall> k < x1. (x2a k * x4 * adjoint (x2a k)) \\<in> carrier_mat d d\""], ["proof (prove)\nusing this:\n  \\<forall>k<x1. x2a k \\<in> carrier_mat d d\n\ngoal (1 subgoal):\n 1. \\<forall>k<x1. x2a k * x4 * adjoint (x2a k) \\<in> carrier_mat d d", "using assms(2)"], ["proof (prove)\nusing this:\n  \\<forall>k<x1. x2a k \\<in> carrier_mat d d\n  x4 \\<in> carrier_mat d d\n\ngoal (1 subgoal):\n 1. \\<forall>k<x1. x2a k * x4 * adjoint (x2a k) \\<in> carrier_mat d d", "by fastforce"], ["proof (state)\nthis:\n  \\<forall>k<x1. x2a k * x4 * adjoint (x2a k) \\<in> carrier_mat d d\n\ngoal (1 subgoal):\n 1. positive (denote (Measure x1 x2a x3a) x4) \\<and>\n    trace (denote (Measure x1 x2a x3a) x4) \\<le> trace x4 \\<and>\n    denote (Measure x1 x2a x3a) x4 \\<in> carrier_mat d d", "have posct:\"\\<forall> k < x1. positive ((map denote x3a ! k) (x2a k * x4 * adjoint (x2a k))) \n               \\<and> ((map denote x3a ! k) (x2a k * x4 * adjoint (x2a k))) \\<in> carrier_mat d d\n               \\<and> trace ((map denote x3a ! k) (x2a k * x4 * adjoint (x2a k))) \\<le> trace (x2a k * x4 * adjoint (x2a k))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>k<x1.\n       positive ((map denote x3a ! k) (x2a k * x4 * adjoint (x2a k))) \\<and>\n       (map denote x3a ! k) (x2a k * x4 * adjoint (x2a k))\n       \\<in> carrier_mat d d \\<and>\n       trace ((map denote x3a ! k) (x2a k * x4 * adjoint (x2a k)))\n       \\<le> trace (x2a k * x4 * adjoint (x2a k))", "using map_denote_positive_trace_dim assms"], ["proof (prove)\nusing this:\n  \\<lbrakk>well_com (Measure ?x1.0 ?x2a ?x3a); ?x4.0 \\<in> carrier_mat d d;\n   partial_density_operator ?x4.0;\n   \\<And>x3aa \\<rho>.\n      \\<lbrakk>x3aa \\<in> set ?x3a; well_com x3aa;\n       \\<rho> \\<in> carrier_mat d d;\n       partial_density_operator \\<rho>\\<rbrakk>\n      \\<Longrightarrow> positive (denote x3aa \\<rho>) \\<and>\n                        trace (denote x3aa \\<rho>) \\<le> trace \\<rho> \\<and>\n                        denote x3aa \\<rho> \\<in> carrier_mat d d\\<rbrakk>\n  \\<Longrightarrow> \\<forall>k<?x1.0.\n                       positive\n                        ((map denote ?x3a ! k)\n                          (?x2a k * ?x4.0 * adjoint (?x2a k))) \\<and>\n                       (map denote ?x3a ! k)\n                        (?x2a k * ?x4.0 * adjoint (?x2a k))\n                       \\<in> carrier_mat d d \\<and>\n                       trace\n                        ((map denote ?x3a ! k)\n                          (?x2a k * ?x4.0 * adjoint (?x2a k)))\n                       \\<le> trace (?x2a k * ?x4.0 * adjoint (?x2a k))\n  well_com (Measure x1 x2a x3a)\n  x4 \\<in> carrier_mat d d\n  partial_density_operator x4\n  \\<lbrakk>?x3aa \\<in> set x3a; well_com ?x3aa;\n   ?\\<rho> \\<in> carrier_mat d d; partial_density_operator ?\\<rho>\\<rbrakk>\n  \\<Longrightarrow> positive (denote ?x3aa ?\\<rho>) \\<and>\n                    trace (denote ?x3aa ?\\<rho>) \\<le> trace ?\\<rho> \\<and>\n                    denote ?x3aa ?\\<rho> \\<in> carrier_mat d d\n\ngoal (1 subgoal):\n 1. \\<forall>k<x1.\n       positive ((map denote x3a ! k) (x2a k * x4 * adjoint (x2a k))) \\<and>\n       (map denote x3a ! k) (x2a k * x4 * adjoint (x2a k))\n       \\<in> carrier_mat d d \\<and>\n       trace ((map denote x3a ! k) (x2a k * x4 * adjoint (x2a k)))\n       \\<le> trace (x2a k * x4 * adjoint (x2a k))", "by auto"], ["proof (state)\nthis:\n  \\<forall>k<x1.\n     positive ((map denote x3a ! k) (x2a k * x4 * adjoint (x2a k))) \\<and>\n     (map denote x3a ! k) (x2a k * x4 * adjoint (x2a k))\n     \\<in> carrier_mat d d \\<and>\n     trace ((map denote x3a ! k) (x2a k * x4 * adjoint (x2a k)))\n     \\<le> trace (x2a k * x4 * adjoint (x2a k))\n\ngoal (1 subgoal):\n 1. positive (denote (Measure x1 x2a x3a) x4) \\<and>\n    trace (denote (Measure x1 x2a x3a) x4) \\<le> trace x4 \\<and>\n    denote (Measure x1 x2a x3a) x4 \\<in> carrier_mat d d", "have \"trace (matrix_sum d (\\<lambda>k. (map denote x3a ! k) (x2a k * x4 * adjoint (x2a k))) x1)\n       \\<le> trace (matrix_sum d (\\<lambda>k. (x2a k * x4 * adjoint (x2a k))) x1)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. trace\n     (matrix_sum d\n       (\\<lambda>k. (map denote x3a ! k) (x2a k * x4 * adjoint (x2a k))) x1)\n    \\<le> trace (matrix_sum d (\\<lambda>k. x2a k * x4 * adjoint (x2a k)) x1)", "using posct matrix_sum_trace_le[of x1 \"(\\<lambda>k. (map denote x3a ! k) (x2a k * x4 * adjoint (x2a k)))\" \"(\\<lambda>k. x2a k * x4 * adjoint (x2a k)) \"]\n         x2aa"], ["proof (prove)\nusing this:\n  \\<forall>k<x1.\n     positive ((map denote x3a ! k) (x2a k * x4 * adjoint (x2a k))) \\<and>\n     (map denote x3a ! k) (x2a k * x4 * adjoint (x2a k))\n     \\<in> carrier_mat d d \\<and>\n     trace ((map denote x3a ! k) (x2a k * x4 * adjoint (x2a k)))\n     \\<le> trace (x2a k * x4 * adjoint (x2a k))\n  \\<lbrakk>\\<And>k.\n              k < x1 \\<Longrightarrow>\n              (map denote x3a ! k) (x2a k * x4 * adjoint (x2a k))\n              \\<in> carrier_mat d d;\n   \\<And>k.\n      k < x1 \\<Longrightarrow>\n      x2a k * x4 * adjoint (x2a k) \\<in> carrier_mat d d;\n   \\<And>k.\n      k < x1 \\<Longrightarrow>\n      trace ((map denote x3a ! k) (x2a k * x4 * adjoint (x2a k)))\n      \\<le> trace (x2a k * x4 * adjoint (x2a k))\\<rbrakk>\n  \\<Longrightarrow> trace\n                     (matrix_sum d\n                       (\\<lambda>k.\n                           (map denote x3a ! k)\n                            (x2a k * x4 * adjoint (x2a k)))\n                       x1)\n                    \\<le> trace\n                           (matrix_sum d\n                             (\\<lambda>k. x2a k * x4 * adjoint (x2a k)) x1)\n  \\<forall>k<x1. x2a k * x4 * adjoint (x2a k) \\<in> carrier_mat d d\n\ngoal (1 subgoal):\n 1. trace\n     (matrix_sum d\n       (\\<lambda>k. (map denote x3a ! k) (x2a k * x4 * adjoint (x2a k))) x1)\n    \\<le> trace (matrix_sum d (\\<lambda>k. x2a k * x4 * adjoint (x2a k)) x1)", "by auto"], ["proof (state)\nthis:\n  trace\n   (matrix_sum d\n     (\\<lambda>k. (map denote x3a ! k) (x2a k * x4 * adjoint (x2a k))) x1)\n  \\<le> trace (matrix_sum d (\\<lambda>k. x2a k * x4 * adjoint (x2a k)) x1)\n\ngoal (1 subgoal):\n 1. positive (denote (Measure x1 x2a x3a) x4) \\<and>\n    trace (denote (Measure x1 x2a x3a) x4) \\<le> trace x4 \\<and>\n    denote (Measure x1 x2a x3a) x4 \\<in> carrier_mat d d", "also"], ["proof (state)\nthis:\n  trace\n   (matrix_sum d\n     (\\<lambda>k. (map denote x3a ! k) (x2a k * x4 * adjoint (x2a k))) x1)\n  \\<le> trace (matrix_sum d (\\<lambda>k. x2a k * x4 * adjoint (x2a k)) x1)\n\ngoal (1 subgoal):\n 1. positive (denote (Measure x1 x2a x3a) x4) \\<and>\n    trace (denote (Measure x1 x2a x3a) x4) \\<le> trace x4 \\<and>\n    denote (Measure x1 x2a x3a) x4 \\<in> carrier_mat d d", "have \"\\<dots> = trace x4\""], ["proof (prove)\ngoal (1 subgoal):\n 1. trace (matrix_sum d (\\<lambda>k. x2a k * x4 * adjoint (x2a k)) x1) =\n    trace x4", "using trace_measurement[of d \"x1\" \"x2a\" x4] assms(1,2)"], ["proof (prove)\nusing this:\n  \\<lbrakk>measurement d x1 x2a; x4 \\<in> carrier_mat d d\\<rbrakk>\n  \\<Longrightarrow> trace\n                     (matrix_sum d\n                       (\\<lambda>k. x2a k * x4 * adjoint (x2a k)) x1) =\n                    trace x4\n  well_com (Measure x1 x2a x3a)\n  x4 \\<in> carrier_mat d d\n\ngoal (1 subgoal):\n 1. trace (matrix_sum d (\\<lambda>k. x2a k * x4 * adjoint (x2a k)) x1) =\n    trace x4", "by auto"], ["proof (state)\nthis:\n  trace (matrix_sum d (\\<lambda>k. x2a k * x4 * adjoint (x2a k)) x1) =\n  trace x4\n\ngoal (1 subgoal):\n 1. positive (denote (Measure x1 x2a x3a) x4) \\<and>\n    trace (denote (Measure x1 x2a x3a) x4) \\<le> trace x4 \\<and>\n    denote (Measure x1 x2a x3a) x4 \\<in> carrier_mat d d", "finally"], ["proof (chain)\npicking this:\n  trace\n   (matrix_sum d\n     (\\<lambda>k. (map denote x3a ! k) (x2a k * x4 * adjoint (x2a k))) x1)\n  \\<le> trace x4", "have \" trace (matrix_sum d (\\<lambda>k. (map denote x3a ! k) (x2a k * x4 * adjoint (x2a k))) x1) \\<le> trace x4\""], ["proof (prove)\nusing this:\n  trace\n   (matrix_sum d\n     (\\<lambda>k. (map denote x3a ! k) (x2a k * x4 * adjoint (x2a k))) x1)\n  \\<le> trace x4\n\ngoal (1 subgoal):\n 1. trace\n     (matrix_sum d\n       (\\<lambda>k. (map denote x3a ! k) (x2a k * x4 * adjoint (x2a k))) x1)\n    \\<le> trace x4", "by auto"], ["proof (state)\nthis:\n  trace\n   (matrix_sum d\n     (\\<lambda>k. (map denote x3a ! k) (x2a k * x4 * adjoint (x2a k))) x1)\n  \\<le> trace x4\n\ngoal (1 subgoal):\n 1. positive (denote (Measure x1 x2a x3a) x4) \\<and>\n    trace (denote (Measure x1 x2a x3a) x4) \\<le> trace x4 \\<and>\n    denote (Measure x1 x2a x3a) x4 \\<in> carrier_mat d d", "then"], ["proof (chain)\npicking this:\n  trace\n   (matrix_sum d\n     (\\<lambda>k. (map denote x3a ! k) (x2a k * x4 * adjoint (x2a k))) x1)\n  \\<le> trace x4", "have \"trace (denote_measure x1 x2a (map denote x3a) x4) \\<le> trace x4\""], ["proof (prove)\nusing this:\n  trace\n   (matrix_sum d\n     (\\<lambda>k. (map denote x3a ! k) (x2a k * x4 * adjoint (x2a k))) x1)\n  \\<le> trace x4\n\ngoal (1 subgoal):\n 1. trace (denote_measure x1 x2a (map denote x3a) x4) \\<le> trace x4", "unfolding denote_measure_def"], ["proof (prove)\nusing this:\n  trace\n   (matrix_sum d\n     (\\<lambda>k. (map denote x3a ! k) (x2a k * x4 * adjoint (x2a k))) x1)\n  \\<le> trace x4\n\ngoal (1 subgoal):\n 1. trace\n     (matrix_sum d\n       (\\<lambda>k. (map denote x3a ! k) (x2a k * x4 * adjoint (x2a k))) x1)\n    \\<le> trace x4", "by auto"], ["proof (state)\nthis:\n  trace (denote_measure x1 x2a (map denote x3a) x4) \\<le> trace x4\n\ngoal (1 subgoal):\n 1. positive (denote (Measure x1 x2a x3a) x4) \\<and>\n    trace (denote (Measure x1 x2a x3a) x4) \\<le> trace x4 \\<and>\n    denote (Measure x1 x2a x3a) x4 \\<in> carrier_mat d d", "then"], ["proof (chain)\npicking this:\n  trace (denote_measure x1 x2a (map denote x3a) x4) \\<le> trace x4", "have \"trace (denote (Measure x1 x2a x3a) x4) \\<le> trace x4\""], ["proof (prove)\nusing this:\n  trace (denote_measure x1 x2a (map denote x3a) x4) \\<le> trace x4\n\ngoal (1 subgoal):\n 1. trace (denote (Measure x1 x2a x3a) x4) \\<le> trace x4", "by auto"], ["proof (state)\nthis:\n  trace (denote (Measure x1 x2a x3a) x4) \\<le> trace x4\n\ngoal (1 subgoal):\n 1. positive (denote (Measure x1 x2a x3a) x4) \\<and>\n    trace (denote (Measure x1 x2a x3a) x4) \\<le> trace x4 \\<and>\n    denote (Measure x1 x2a x3a) x4 \\<in> carrier_mat d d", "moreover"], ["proof (state)\nthis:\n  trace (denote (Measure x1 x2a x3a) x4) \\<le> trace x4\n\ngoal (1 subgoal):\n 1. positive (denote (Measure x1 x2a x3a) x4) \\<and>\n    trace (denote (Measure x1 x2a x3a) x4) \\<le> trace x4 \\<and>\n    denote (Measure x1 x2a x3a) x4 \\<in> carrier_mat d d", "from posct"], ["proof (chain)\npicking this:\n  \\<forall>k<x1.\n     positive ((map denote x3a ! k) (x2a k * x4 * adjoint (x2a k))) \\<and>\n     (map denote x3a ! k) (x2a k * x4 * adjoint (x2a k))\n     \\<in> carrier_mat d d \\<and>\n     trace ((map denote x3a ! k) (x2a k * x4 * adjoint (x2a k)))\n     \\<le> trace (x2a k * x4 * adjoint (x2a k))", "have \"positive (denote (Measure x1 x2a x3a) x4)\""], ["proof (prove)\nusing this:\n  \\<forall>k<x1.\n     positive ((map denote x3a ! k) (x2a k * x4 * adjoint (x2a k))) \\<and>\n     (map denote x3a ! k) (x2a k * x4 * adjoint (x2a k))\n     \\<in> carrier_mat d d \\<and>\n     trace ((map denote x3a ! k) (x2a k * x4 * adjoint (x2a k)))\n     \\<le> trace (x2a k * x4 * adjoint (x2a k))\n\ngoal (1 subgoal):\n 1. positive (denote (Measure x1 x2a x3a) x4)", "apply auto"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>k<x1.\n       positive ((map denote x3a ! k) (x2a k * x4 * adjoint (x2a k))) \\<and>\n       (map denote x3a ! k) (x2a k * x4 * adjoint (x2a k))\n       \\<in> carrier_mat d d \\<and>\n       Im (trace ((map denote x3a ! k) (x2a k * x4 * adjoint (x2a k)))) =\n       Im (trace (x2a k * x4 * adjoint (x2a k))) \\<and>\n       Re (trace ((map denote x3a ! k) (x2a k * x4 * adjoint (x2a k))))\n       \\<le> Re (trace (x2a k * x4 * adjoint (x2a k))) \\<Longrightarrow>\n    positive (denote_measure x1 x2a (map denote x3a) x4)", "unfolding denote_measure_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>k<x1.\n       positive ((map denote x3a ! k) (x2a k * x4 * adjoint (x2a k))) \\<and>\n       (map denote x3a ! k) (x2a k * x4 * adjoint (x2a k))\n       \\<in> carrier_mat d d \\<and>\n       Im (trace ((map denote x3a ! k) (x2a k * x4 * adjoint (x2a k)))) =\n       Im (trace (x2a k * x4 * adjoint (x2a k))) \\<and>\n       Re (trace ((map denote x3a ! k) (x2a k * x4 * adjoint (x2a k))))\n       \\<le> Re (trace (x2a k * x4 * adjoint (x2a k))) \\<Longrightarrow>\n    positive\n     (matrix_sum d\n       (\\<lambda>k. (map denote x3a ! k) (x2a k * x4 * adjoint (x2a k))) x1)", "using matrix_sum_positive"], ["proof (prove)\nusing this:\n  \\<lbrakk>\\<And>k. k < ?n \\<Longrightarrow> ?f k \\<in> carrier_mat ?d ?d;\n   \\<And>k. k < ?n \\<Longrightarrow> positive (?f k)\\<rbrakk>\n  \\<Longrightarrow> positive (matrix_sum ?d ?f ?n)\n\ngoal (1 subgoal):\n 1. \\<forall>k<x1.\n       positive ((map denote x3a ! k) (x2a k * x4 * adjoint (x2a k))) \\<and>\n       (map denote x3a ! k) (x2a k * x4 * adjoint (x2a k))\n       \\<in> carrier_mat d d \\<and>\n       Im (trace ((map denote x3a ! k) (x2a k * x4 * adjoint (x2a k)))) =\n       Im (trace (x2a k * x4 * adjoint (x2a k))) \\<and>\n       Re (trace ((map denote x3a ! k) (x2a k * x4 * adjoint (x2a k))))\n       \\<le> Re (trace (x2a k * x4 * adjoint (x2a k))) \\<Longrightarrow>\n    positive\n     (matrix_sum d\n       (\\<lambda>k. (map denote x3a ! k) (x2a k * x4 * adjoint (x2a k))) x1)", "by auto"], ["proof (state)\nthis:\n  positive (denote (Measure x1 x2a x3a) x4)\n\ngoal (1 subgoal):\n 1. positive (denote (Measure x1 x2a x3a) x4) \\<and>\n    trace (denote (Measure x1 x2a x3a) x4) \\<le> trace x4 \\<and>\n    denote (Measure x1 x2a x3a) x4 \\<in> carrier_mat d d", "moreover"], ["proof (state)\nthis:\n  positive (denote (Measure x1 x2a x3a) x4)\n\ngoal (1 subgoal):\n 1. positive (denote (Measure x1 x2a x3a) x4) \\<and>\n    trace (denote (Measure x1 x2a x3a) x4) \\<le> trace x4 \\<and>\n    denote (Measure x1 x2a x3a) x4 \\<in> carrier_mat d d", "have \"(denote (Measure x1 x2a x3a) x4) \\<in> carrier_mat d d\""], ["proof (prove)\ngoal (1 subgoal):\n 1. denote (Measure x1 x2a x3a) x4 \\<in> carrier_mat d d", "apply auto"], ["proof (prove)\ngoal (1 subgoal):\n 1. denote_measure x1 x2a (map denote x3a) x4 \\<in> carrier_mat d d", "unfolding denote_measure_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. matrix_sum d\n     (\\<lambda>k. (map denote x3a ! k) (x2a k * x4 * adjoint (x2a k))) x1\n    \\<in> carrier_mat d d", "using matrix_sum_dim posct"], ["proof (prove)\nusing this:\n  (\\<And>k.\n      k < ?n \\<Longrightarrow>\n      ?f k \\<in> carrier_mat ?d ?d) \\<Longrightarrow>\n  matrix_sum ?d ?f ?n \\<in> carrier_mat ?d ?d\n  \\<forall>k<x1.\n     positive ((map denote x3a ! k) (x2a k * x4 * adjoint (x2a k))) \\<and>\n     (map denote x3a ! k) (x2a k * x4 * adjoint (x2a k))\n     \\<in> carrier_mat d d \\<and>\n     trace ((map denote x3a ! k) (x2a k * x4 * adjoint (x2a k)))\n     \\<le> trace (x2a k * x4 * adjoint (x2a k))\n\ngoal (1 subgoal):\n 1. matrix_sum d\n     (\\<lambda>k. (map denote x3a ! k) (x2a k * x4 * adjoint (x2a k))) x1\n    \\<in> carrier_mat d d", "by (simp add: matrix_sum_dim)"], ["proof (state)\nthis:\n  denote (Measure x1 x2a x3a) x4 \\<in> carrier_mat d d\n\ngoal (1 subgoal):\n 1. positive (denote (Measure x1 x2a x3a) x4) \\<and>\n    trace (denote (Measure x1 x2a x3a) x4) \\<le> trace x4 \\<and>\n    denote (Measure x1 x2a x3a) x4 \\<in> carrier_mat d d", "ultimately"], ["proof (chain)\npicking this:\n  trace (denote (Measure x1 x2a x3a) x4) \\<le> trace x4\n  positive (denote (Measure x1 x2a x3a) x4)\n  denote (Measure x1 x2a x3a) x4 \\<in> carrier_mat d d", "show ?thesis"], ["proof (prove)\nusing this:\n  trace (denote (Measure x1 x2a x3a) x4) \\<le> trace x4\n  positive (denote (Measure x1 x2a x3a) x4)\n  denote (Measure x1 x2a x3a) x4 \\<in> carrier_mat d d\n\ngoal (1 subgoal):\n 1. positive (denote (Measure x1 x2a x3a) x4) \\<and>\n    trace (denote (Measure x1 x2a x3a) x4) \\<le> trace x4 \\<and>\n    denote (Measure x1 x2a x3a) x4 \\<in> carrier_mat d d", "by auto"], ["proof (state)\nthis:\n  positive (denote (Measure x1 x2a x3a) x4) \\<and>\n  trace (denote (Measure x1 x2a x3a) x4) \\<le> trace x4 \\<and>\n  denote (Measure x1 x2a x3a) x4 \\<in> carrier_mat d d\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma denote_positive_trace_dim:\n  \"well_com S \\<Longrightarrow> \\<rho> \\<in> carrier_mat d d \\<Longrightarrow> partial_density_operator \\<rho> \n   \\<Longrightarrow> (positive (denote S \\<rho>) \\<and> trace (denote S \\<rho>) \\<le> trace \\<rho> \\<and> denote S \\<rho> \\<in> carrier_mat d d)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>well_com S; \\<rho> \\<in> carrier_mat d d;\n     partial_density_operator \\<rho>\\<rbrakk>\n    \\<Longrightarrow> positive (denote S \\<rho>) \\<and>\n                      trace (denote S \\<rho>) \\<le> trace \\<rho> \\<and>\n                      denote S \\<rho> \\<in> carrier_mat d d", "proof (induction arbitrary: \\<rho>)"], ["proof (state)\ngoal (5 subgoals):\n 1. \\<And>\\<rho>.\n       \\<lbrakk>well_com SKIP; \\<rho> \\<in> carrier_mat d d;\n        partial_density_operator \\<rho>\\<rbrakk>\n       \\<Longrightarrow> positive (denote SKIP \\<rho>) \\<and>\n                         trace (denote SKIP \\<rho>)\n                         \\<le> trace \\<rho> \\<and>\n                         denote SKIP \\<rho> \\<in> carrier_mat d d\n 2. \\<And>x \\<rho>.\n       \\<lbrakk>well_com (Utrans x); \\<rho> \\<in> carrier_mat d d;\n        partial_density_operator \\<rho>\\<rbrakk>\n       \\<Longrightarrow> positive (denote (Utrans x) \\<rho>) \\<and>\n                         trace (denote (Utrans x) \\<rho>)\n                         \\<le> trace \\<rho> \\<and>\n                         denote (Utrans x) \\<rho> \\<in> carrier_mat d d\n 3. \\<And>x1 x2a \\<rho>.\n       \\<lbrakk>\\<And>\\<rho>.\n                   \\<lbrakk>well_com x1; \\<rho> \\<in> carrier_mat d d;\n                    partial_density_operator \\<rho>\\<rbrakk>\n                   \\<Longrightarrow> positive (denote x1 \\<rho>) \\<and>\n                                     trace (denote x1 \\<rho>)\n                                     \\<le> trace \\<rho> \\<and>\n                                     denote x1 \\<rho> \\<in> carrier_mat d d;\n        \\<And>\\<rho>.\n           \\<lbrakk>well_com x2a; \\<rho> \\<in> carrier_mat d d;\n            partial_density_operator \\<rho>\\<rbrakk>\n           \\<Longrightarrow> positive (denote x2a \\<rho>) \\<and>\n                             trace (denote x2a \\<rho>)\n                             \\<le> trace \\<rho> \\<and>\n                             denote x2a \\<rho> \\<in> carrier_mat d d;\n        well_com (x1;; x2a); \\<rho> \\<in> carrier_mat d d;\n        partial_density_operator \\<rho>\\<rbrakk>\n       \\<Longrightarrow> positive (denote (x1;; x2a) \\<rho>) \\<and>\n                         trace (denote (x1;; x2a) \\<rho>)\n                         \\<le> trace \\<rho> \\<and>\n                         denote (x1;; x2a) \\<rho> \\<in> carrier_mat d d\n 4. \\<And>x1 x2a x3 \\<rho>.\n       \\<lbrakk>\\<And>x3a \\<rho>.\n                   \\<lbrakk>x3a \\<in> set x3; well_com x3a;\n                    \\<rho> \\<in> carrier_mat d d;\n                    partial_density_operator \\<rho>\\<rbrakk>\n                   \\<Longrightarrow> positive (denote x3a \\<rho>) \\<and>\n                                     trace (denote x3a \\<rho>)\n                                     \\<le> trace \\<rho> \\<and>\n                                     denote x3a \\<rho>\n                                     \\<in> carrier_mat d d;\n        well_com (Measure x1 x2a x3); \\<rho> \\<in> carrier_mat d d;\n        partial_density_operator \\<rho>\\<rbrakk>\n       \\<Longrightarrow> positive (denote (Measure x1 x2a x3) \\<rho>) \\<and>\n                         trace (denote (Measure x1 x2a x3) \\<rho>)\n                         \\<le> trace \\<rho> \\<and>\n                         denote (Measure x1 x2a x3) \\<rho>\n                         \\<in> carrier_mat d d\n 5. \\<And>x1 x2a \\<rho>.\n       \\<lbrakk>\\<And>\\<rho>.\n                   \\<lbrakk>well_com x2a; \\<rho> \\<in> carrier_mat d d;\n                    partial_density_operator \\<rho>\\<rbrakk>\n                   \\<Longrightarrow> positive (denote x2a \\<rho>) \\<and>\n                                     trace (denote x2a \\<rho>)\n                                     \\<le> trace \\<rho> \\<and>\n                                     denote x2a \\<rho>\n                                     \\<in> carrier_mat d d;\n        well_com (While x1 x2a); \\<rho> \\<in> carrier_mat d d;\n        partial_density_operator \\<rho>\\<rbrakk>\n       \\<Longrightarrow> positive (denote (While x1 x2a) \\<rho>) \\<and>\n                         trace (denote (While x1 x2a) \\<rho>)\n                         \\<le> trace \\<rho> \\<and>\n                         denote (While x1 x2a) \\<rho> \\<in> carrier_mat d d", "case SKIP"], ["proof (state)\nthis:\n  well_com SKIP\n  \\<rho> \\<in> carrier_mat d d\n  partial_density_operator \\<rho>\n\ngoal (5 subgoals):\n 1. \\<And>\\<rho>.\n       \\<lbrakk>well_com SKIP; \\<rho> \\<in> carrier_mat d d;\n        partial_density_operator \\<rho>\\<rbrakk>\n       \\<Longrightarrow> positive (denote SKIP \\<rho>) \\<and>\n                         trace (denote SKIP \\<rho>)\n                         \\<le> trace \\<rho> \\<and>\n                         denote SKIP \\<rho> \\<in> carrier_mat d d\n 2. \\<And>x \\<rho>.\n       \\<lbrakk>well_com (Utrans x); \\<rho> \\<in> carrier_mat d d;\n        partial_density_operator \\<rho>\\<rbrakk>\n       \\<Longrightarrow> positive (denote (Utrans x) \\<rho>) \\<and>\n                         trace (denote (Utrans x) \\<rho>)\n                         \\<le> trace \\<rho> \\<and>\n                         denote (Utrans x) \\<rho> \\<in> carrier_mat d d\n 3. \\<And>x1 x2a \\<rho>.\n       \\<lbrakk>\\<And>\\<rho>.\n                   \\<lbrakk>well_com x1; \\<rho> \\<in> carrier_mat d d;\n                    partial_density_operator \\<rho>\\<rbrakk>\n                   \\<Longrightarrow> positive (denote x1 \\<rho>) \\<and>\n                                     trace (denote x1 \\<rho>)\n                                     \\<le> trace \\<rho> \\<and>\n                                     denote x1 \\<rho> \\<in> carrier_mat d d;\n        \\<And>\\<rho>.\n           \\<lbrakk>well_com x2a; \\<rho> \\<in> carrier_mat d d;\n            partial_density_operator \\<rho>\\<rbrakk>\n           \\<Longrightarrow> positive (denote x2a \\<rho>) \\<and>\n                             trace (denote x2a \\<rho>)\n                             \\<le> trace \\<rho> \\<and>\n                             denote x2a \\<rho> \\<in> carrier_mat d d;\n        well_com (x1;; x2a); \\<rho> \\<in> carrier_mat d d;\n        partial_density_operator \\<rho>\\<rbrakk>\n       \\<Longrightarrow> positive (denote (x1;; x2a) \\<rho>) \\<and>\n                         trace (denote (x1;; x2a) \\<rho>)\n                         \\<le> trace \\<rho> \\<and>\n                         denote (x1;; x2a) \\<rho> \\<in> carrier_mat d d\n 4. \\<And>x1 x2a x3 \\<rho>.\n       \\<lbrakk>\\<And>x3a \\<rho>.\n                   \\<lbrakk>x3a \\<in> set x3; well_com x3a;\n                    \\<rho> \\<in> carrier_mat d d;\n                    partial_density_operator \\<rho>\\<rbrakk>\n                   \\<Longrightarrow> positive (denote x3a \\<rho>) \\<and>\n                                     trace (denote x3a \\<rho>)\n                                     \\<le> trace \\<rho> \\<and>\n                                     denote x3a \\<rho>\n                                     \\<in> carrier_mat d d;\n        well_com (Measure x1 x2a x3); \\<rho> \\<in> carrier_mat d d;\n        partial_density_operator \\<rho>\\<rbrakk>\n       \\<Longrightarrow> positive (denote (Measure x1 x2a x3) \\<rho>) \\<and>\n                         trace (denote (Measure x1 x2a x3) \\<rho>)\n                         \\<le> trace \\<rho> \\<and>\n                         denote (Measure x1 x2a x3) \\<rho>\n                         \\<in> carrier_mat d d\n 5. \\<And>x1 x2a \\<rho>.\n       \\<lbrakk>\\<And>\\<rho>.\n                   \\<lbrakk>well_com x2a; \\<rho> \\<in> carrier_mat d d;\n                    partial_density_operator \\<rho>\\<rbrakk>\n                   \\<Longrightarrow> positive (denote x2a \\<rho>) \\<and>\n                                     trace (denote x2a \\<rho>)\n                                     \\<le> trace \\<rho> \\<and>\n                                     denote x2a \\<rho>\n                                     \\<in> carrier_mat d d;\n        well_com (While x1 x2a); \\<rho> \\<in> carrier_mat d d;\n        partial_density_operator \\<rho>\\<rbrakk>\n       \\<Longrightarrow> positive (denote (While x1 x2a) \\<rho>) \\<and>\n                         trace (denote (While x1 x2a) \\<rho>)\n                         \\<le> trace \\<rho> \\<and>\n                         denote (While x1 x2a) \\<rho> \\<in> carrier_mat d d", "then"], ["proof (chain)\npicking this:\n  well_com SKIP\n  \\<rho> \\<in> carrier_mat d d\n  partial_density_operator \\<rho>", "show ?case"], ["proof (prove)\nusing this:\n  well_com SKIP\n  \\<rho> \\<in> carrier_mat d d\n  partial_density_operator \\<rho>\n\ngoal (1 subgoal):\n 1. positive (denote SKIP \\<rho>) \\<and>\n    trace (denote SKIP \\<rho>) \\<le> trace \\<rho> \\<and>\n    denote SKIP \\<rho> \\<in> carrier_mat d d", "unfolding partial_density_operator_def"], ["proof (prove)\nusing this:\n  well_com SKIP\n  \\<rho> \\<in> carrier_mat d d\n  positive \\<rho> \\<and> trace \\<rho> \\<le> 1\n\ngoal (1 subgoal):\n 1. positive (denote SKIP \\<rho>) \\<and>\n    trace (denote SKIP \\<rho>) \\<le> trace \\<rho> \\<and>\n    denote SKIP \\<rho> \\<in> carrier_mat d d", "by auto"], ["proof (state)\nthis:\n  positive (denote SKIP \\<rho>) \\<and>\n  trace (denote SKIP \\<rho>) \\<le> trace \\<rho> \\<and>\n  denote SKIP \\<rho> \\<in> carrier_mat d d\n\ngoal (4 subgoals):\n 1. \\<And>x \\<rho>.\n       \\<lbrakk>well_com (Utrans x); \\<rho> \\<in> carrier_mat d d;\n        partial_density_operator \\<rho>\\<rbrakk>\n       \\<Longrightarrow> positive (denote (Utrans x) \\<rho>) \\<and>\n                         trace (denote (Utrans x) \\<rho>)\n                         \\<le> trace \\<rho> \\<and>\n                         denote (Utrans x) \\<rho> \\<in> carrier_mat d d\n 2. \\<And>x1 x2a \\<rho>.\n       \\<lbrakk>\\<And>\\<rho>.\n                   \\<lbrakk>well_com x1; \\<rho> \\<in> carrier_mat d d;\n                    partial_density_operator \\<rho>\\<rbrakk>\n                   \\<Longrightarrow> positive (denote x1 \\<rho>) \\<and>\n                                     trace (denote x1 \\<rho>)\n                                     \\<le> trace \\<rho> \\<and>\n                                     denote x1 \\<rho> \\<in> carrier_mat d d;\n        \\<And>\\<rho>.\n           \\<lbrakk>well_com x2a; \\<rho> \\<in> carrier_mat d d;\n            partial_density_operator \\<rho>\\<rbrakk>\n           \\<Longrightarrow> positive (denote x2a \\<rho>) \\<and>\n                             trace (denote x2a \\<rho>)\n                             \\<le> trace \\<rho> \\<and>\n                             denote x2a \\<rho> \\<in> carrier_mat d d;\n        well_com (x1;; x2a); \\<rho> \\<in> carrier_mat d d;\n        partial_density_operator \\<rho>\\<rbrakk>\n       \\<Longrightarrow> positive (denote (x1;; x2a) \\<rho>) \\<and>\n                         trace (denote (x1;; x2a) \\<rho>)\n                         \\<le> trace \\<rho> \\<and>\n                         denote (x1;; x2a) \\<rho> \\<in> carrier_mat d d\n 3. \\<And>x1 x2a x3 \\<rho>.\n       \\<lbrakk>\\<And>x3a \\<rho>.\n                   \\<lbrakk>x3a \\<in> set x3; well_com x3a;\n                    \\<rho> \\<in> carrier_mat d d;\n                    partial_density_operator \\<rho>\\<rbrakk>\n                   \\<Longrightarrow> positive (denote x3a \\<rho>) \\<and>\n                                     trace (denote x3a \\<rho>)\n                                     \\<le> trace \\<rho> \\<and>\n                                     denote x3a \\<rho>\n                                     \\<in> carrier_mat d d;\n        well_com (Measure x1 x2a x3); \\<rho> \\<in> carrier_mat d d;\n        partial_density_operator \\<rho>\\<rbrakk>\n       \\<Longrightarrow> positive (denote (Measure x1 x2a x3) \\<rho>) \\<and>\n                         trace (denote (Measure x1 x2a x3) \\<rho>)\n                         \\<le> trace \\<rho> \\<and>\n                         denote (Measure x1 x2a x3) \\<rho>\n                         \\<in> carrier_mat d d\n 4. \\<And>x1 x2a \\<rho>.\n       \\<lbrakk>\\<And>\\<rho>.\n                   \\<lbrakk>well_com x2a; \\<rho> \\<in> carrier_mat d d;\n                    partial_density_operator \\<rho>\\<rbrakk>\n                   \\<Longrightarrow> positive (denote x2a \\<rho>) \\<and>\n                                     trace (denote x2a \\<rho>)\n                                     \\<le> trace \\<rho> \\<and>\n                                     denote x2a \\<rho>\n                                     \\<in> carrier_mat d d;\n        well_com (While x1 x2a); \\<rho> \\<in> carrier_mat d d;\n        partial_density_operator \\<rho>\\<rbrakk>\n       \\<Longrightarrow> positive (denote (While x1 x2a) \\<rho>) \\<and>\n                         trace (denote (While x1 x2a) \\<rho>)\n                         \\<le> trace \\<rho> \\<and>\n                         denote (While x1 x2a) \\<rho> \\<in> carrier_mat d d", "next"], ["proof (state)\ngoal (4 subgoals):\n 1. \\<And>x \\<rho>.\n       \\<lbrakk>well_com (Utrans x); \\<rho> \\<in> carrier_mat d d;\n        partial_density_operator \\<rho>\\<rbrakk>\n       \\<Longrightarrow> positive (denote (Utrans x) \\<rho>) \\<and>\n                         trace (denote (Utrans x) \\<rho>)\n                         \\<le> trace \\<rho> \\<and>\n                         denote (Utrans x) \\<rho> \\<in> carrier_mat d d\n 2. \\<And>x1 x2a \\<rho>.\n       \\<lbrakk>\\<And>\\<rho>.\n                   \\<lbrakk>well_com x1; \\<rho> \\<in> carrier_mat d d;\n                    partial_density_operator \\<rho>\\<rbrakk>\n                   \\<Longrightarrow> positive (denote x1 \\<rho>) \\<and>\n                                     trace (denote x1 \\<rho>)\n                                     \\<le> trace \\<rho> \\<and>\n                                     denote x1 \\<rho> \\<in> carrier_mat d d;\n        \\<And>\\<rho>.\n           \\<lbrakk>well_com x2a; \\<rho> \\<in> carrier_mat d d;\n            partial_density_operator \\<rho>\\<rbrakk>\n           \\<Longrightarrow> positive (denote x2a \\<rho>) \\<and>\n                             trace (denote x2a \\<rho>)\n                             \\<le> trace \\<rho> \\<and>\n                             denote x2a \\<rho> \\<in> carrier_mat d d;\n        well_com (x1;; x2a); \\<rho> \\<in> carrier_mat d d;\n        partial_density_operator \\<rho>\\<rbrakk>\n       \\<Longrightarrow> positive (denote (x1;; x2a) \\<rho>) \\<and>\n                         trace (denote (x1;; x2a) \\<rho>)\n                         \\<le> trace \\<rho> \\<and>\n                         denote (x1;; x2a) \\<rho> \\<in> carrier_mat d d\n 3. \\<And>x1 x2a x3 \\<rho>.\n       \\<lbrakk>\\<And>x3a \\<rho>.\n                   \\<lbrakk>x3a \\<in> set x3; well_com x3a;\n                    \\<rho> \\<in> carrier_mat d d;\n                    partial_density_operator \\<rho>\\<rbrakk>\n                   \\<Longrightarrow> positive (denote x3a \\<rho>) \\<and>\n                                     trace (denote x3a \\<rho>)\n                                     \\<le> trace \\<rho> \\<and>\n                                     denote x3a \\<rho>\n                                     \\<in> carrier_mat d d;\n        well_com (Measure x1 x2a x3); \\<rho> \\<in> carrier_mat d d;\n        partial_density_operator \\<rho>\\<rbrakk>\n       \\<Longrightarrow> positive (denote (Measure x1 x2a x3) \\<rho>) \\<and>\n                         trace (denote (Measure x1 x2a x3) \\<rho>)\n                         \\<le> trace \\<rho> \\<and>\n                         denote (Measure x1 x2a x3) \\<rho>\n                         \\<in> carrier_mat d d\n 4. \\<And>x1 x2a \\<rho>.\n       \\<lbrakk>\\<And>\\<rho>.\n                   \\<lbrakk>well_com x2a; \\<rho> \\<in> carrier_mat d d;\n                    partial_density_operator \\<rho>\\<rbrakk>\n                   \\<Longrightarrow> positive (denote x2a \\<rho>) \\<and>\n                                     trace (denote x2a \\<rho>)\n                                     \\<le> trace \\<rho> \\<and>\n                                     denote x2a \\<rho>\n                                     \\<in> carrier_mat d d;\n        well_com (While x1 x2a); \\<rho> \\<in> carrier_mat d d;\n        partial_density_operator \\<rho>\\<rbrakk>\n       \\<Longrightarrow> positive (denote (While x1 x2a) \\<rho>) \\<and>\n                         trace (denote (While x1 x2a) \\<rho>)\n                         \\<le> trace \\<rho> \\<and>\n                         denote (While x1 x2a) \\<rho> \\<in> carrier_mat d d", "case (Utrans x)"], ["proof (state)\nthis:\n  well_com (Utrans x)\n  \\<rho> \\<in> carrier_mat d d\n  partial_density_operator \\<rho>\n\ngoal (4 subgoals):\n 1. \\<And>x \\<rho>.\n       \\<lbrakk>well_com (Utrans x); \\<rho> \\<in> carrier_mat d d;\n        partial_density_operator \\<rho>\\<rbrakk>\n       \\<Longrightarrow> positive (denote (Utrans x) \\<rho>) \\<and>\n                         trace (denote (Utrans x) \\<rho>)\n                         \\<le> trace \\<rho> \\<and>\n                         denote (Utrans x) \\<rho> \\<in> carrier_mat d d\n 2. \\<And>x1 x2a \\<rho>.\n       \\<lbrakk>\\<And>\\<rho>.\n                   \\<lbrakk>well_com x1; \\<rho> \\<in> carrier_mat d d;\n                    partial_density_operator \\<rho>\\<rbrakk>\n                   \\<Longrightarrow> positive (denote x1 \\<rho>) \\<and>\n                                     trace (denote x1 \\<rho>)\n                                     \\<le> trace \\<rho> \\<and>\n                                     denote x1 \\<rho> \\<in> carrier_mat d d;\n        \\<And>\\<rho>.\n           \\<lbrakk>well_com x2a; \\<rho> \\<in> carrier_mat d d;\n            partial_density_operator \\<rho>\\<rbrakk>\n           \\<Longrightarrow> positive (denote x2a \\<rho>) \\<and>\n                             trace (denote x2a \\<rho>)\n                             \\<le> trace \\<rho> \\<and>\n                             denote x2a \\<rho> \\<in> carrier_mat d d;\n        well_com (x1;; x2a); \\<rho> \\<in> carrier_mat d d;\n        partial_density_operator \\<rho>\\<rbrakk>\n       \\<Longrightarrow> positive (denote (x1;; x2a) \\<rho>) \\<and>\n                         trace (denote (x1;; x2a) \\<rho>)\n                         \\<le> trace \\<rho> \\<and>\n                         denote (x1;; x2a) \\<rho> \\<in> carrier_mat d d\n 3. \\<And>x1 x2a x3 \\<rho>.\n       \\<lbrakk>\\<And>x3a \\<rho>.\n                   \\<lbrakk>x3a \\<in> set x3; well_com x3a;\n                    \\<rho> \\<in> carrier_mat d d;\n                    partial_density_operator \\<rho>\\<rbrakk>\n                   \\<Longrightarrow> positive (denote x3a \\<rho>) \\<and>\n                                     trace (denote x3a \\<rho>)\n                                     \\<le> trace \\<rho> \\<and>\n                                     denote x3a \\<rho>\n                                     \\<in> carrier_mat d d;\n        well_com (Measure x1 x2a x3); \\<rho> \\<in> carrier_mat d d;\n        partial_density_operator \\<rho>\\<rbrakk>\n       \\<Longrightarrow> positive (denote (Measure x1 x2a x3) \\<rho>) \\<and>\n                         trace (denote (Measure x1 x2a x3) \\<rho>)\n                         \\<le> trace \\<rho> \\<and>\n                         denote (Measure x1 x2a x3) \\<rho>\n                         \\<in> carrier_mat d d\n 4. \\<And>x1 x2a \\<rho>.\n       \\<lbrakk>\\<And>\\<rho>.\n                   \\<lbrakk>well_com x2a; \\<rho> \\<in> carrier_mat d d;\n                    partial_density_operator \\<rho>\\<rbrakk>\n                   \\<Longrightarrow> positive (denote x2a \\<rho>) \\<and>\n                                     trace (denote x2a \\<rho>)\n                                     \\<le> trace \\<rho> \\<and>\n                                     denote x2a \\<rho>\n                                     \\<in> carrier_mat d d;\n        well_com (While x1 x2a); \\<rho> \\<in> carrier_mat d d;\n        partial_density_operator \\<rho>\\<rbrakk>\n       \\<Longrightarrow> positive (denote (While x1 x2a) \\<rho>) \\<and>\n                         trace (denote (While x1 x2a) \\<rho>)\n                         \\<le> trace \\<rho> \\<and>\n                         denote (While x1 x2a) \\<rho> \\<in> carrier_mat d d", "then"], ["proof (chain)\npicking this:\n  well_com (Utrans x)\n  \\<rho> \\<in> carrier_mat d d\n  partial_density_operator \\<rho>", "show ?case"], ["proof (prove)\nusing this:\n  well_com (Utrans x)\n  \\<rho> \\<in> carrier_mat d d\n  partial_density_operator \\<rho>\n\ngoal (1 subgoal):\n 1. positive (denote (Utrans x) \\<rho>) \\<and>\n    trace (denote (Utrans x) \\<rho>) \\<le> trace \\<rho> \\<and>\n    denote (Utrans x) \\<rho> \\<in> carrier_mat d d", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<lbrakk>well_com (Utrans x); \\<rho> \\<in> carrier_mat d d;\n     partial_density_operator \\<rho>\\<rbrakk>\n    \\<Longrightarrow> positive (denote (Utrans x) \\<rho>) \\<and>\n                      trace (denote (Utrans x) \\<rho>)\n                      \\<le> trace \\<rho> \\<and>\n                      denote (Utrans x) \\<rho> \\<in> carrier_mat d d", "assume wc: \"well_com (Utrans x)\" and r: \"\\<rho> \\<in> carrier_mat d d\" and pdo: \"partial_density_operator \\<rho>\""], ["proof (state)\nthis:\n  well_com (Utrans x)\n  \\<rho> \\<in> carrier_mat d d\n  partial_density_operator \\<rho>\n\ngoal (1 subgoal):\n 1. \\<lbrakk>well_com (Utrans x); \\<rho> \\<in> carrier_mat d d;\n     partial_density_operator \\<rho>\\<rbrakk>\n    \\<Longrightarrow> positive (denote (Utrans x) \\<rho>) \\<and>\n                      trace (denote (Utrans x) \\<rho>)\n                      \\<le> trace \\<rho> \\<and>\n                      denote (Utrans x) \\<rho> \\<in> carrier_mat d d", "show \"positive (denote (Utrans x) \\<rho>) \\<and> trace (denote (Utrans x) \\<rho>) \\<le> trace \\<rho> \\<and> denote (Utrans x) \\<rho> \\<in> carrier_mat d d\""], ["proof (prove)\ngoal (1 subgoal):\n 1. positive (denote (Utrans x) \\<rho>) \\<and>\n    trace (denote (Utrans x) \\<rho>) \\<le> trace \\<rho> \\<and>\n    denote (Utrans x) \\<rho> \\<in> carrier_mat d d", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. positive (denote (Utrans x) \\<rho>) \\<and>\n    trace (denote (Utrans x) \\<rho>) \\<le> trace \\<rho> \\<and>\n    denote (Utrans x) \\<rho> \\<in> carrier_mat d d", "have \"trace (x * \\<rho> * adjoint x) = trace ((adjoint x * x) * \\<rho>)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. trace (x * \\<rho> * adjoint x) = trace (adjoint x * x * \\<rho>)", "using r"], ["proof (prove)\nusing this:\n  \\<rho> \\<in> carrier_mat d d\n\ngoal (1 subgoal):\n 1. trace (x * \\<rho> * adjoint x) = trace (adjoint x * x * \\<rho>)", "apply (mat_assoc d)"], ["proof (prove)\ngoal (1 subgoal):\n 1. x \\<in> carrier_mat d d", "using wc"], ["proof (prove)\nusing this:\n  well_com (Utrans x)\n\ngoal (1 subgoal):\n 1. x \\<in> carrier_mat d d", "by auto"], ["proof (state)\nthis:\n  trace (x * \\<rho> * adjoint x) = trace (adjoint x * x * \\<rho>)\n\ngoal (1 subgoal):\n 1. positive (denote (Utrans x) \\<rho>) \\<and>\n    trace (denote (Utrans x) \\<rho>) \\<le> trace \\<rho> \\<and>\n    denote (Utrans x) \\<rho> \\<in> carrier_mat d d", "also"], ["proof (state)\nthis:\n  trace (x * \\<rho> * adjoint x) = trace (adjoint x * x * \\<rho>)\n\ngoal (1 subgoal):\n 1. positive (denote (Utrans x) \\<rho>) \\<and>\n    trace (denote (Utrans x) \\<rho>) \\<le> trace \\<rho> \\<and>\n    denote (Utrans x) \\<rho> \\<in> carrier_mat d d", "have \"\\<dots> = trace (1\\<^sub>m d * \\<rho>)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. trace (adjoint x * x * \\<rho>) = trace (1\\<^sub>m d * \\<rho>)", "using wc inverts_mat_def inverts_mat_symm adjoint_dim"], ["proof (prove)\nusing this:\n  well_com (Utrans x)\n  inverts_mat ?A ?B \\<equiv> ?A * ?B = 1\\<^sub>m (dim_row ?A)\n  \\<lbrakk>?A \\<in> carrier_mat ?n ?n; ?B \\<in> carrier_mat ?n ?n;\n   inverts_mat ?A ?B\\<rbrakk>\n  \\<Longrightarrow> inverts_mat ?B ?A\n  ?A \\<in> carrier_mat ?n ?n \\<Longrightarrow>\n  adjoint ?A \\<in> carrier_mat ?n ?n\n\ngoal (1 subgoal):\n 1. trace (adjoint x * x * \\<rho>) = trace (1\\<^sub>m d * \\<rho>)", "by auto"], ["proof (state)\nthis:\n  trace (adjoint x * x * \\<rho>) = trace (1\\<^sub>m d * \\<rho>)\n\ngoal (1 subgoal):\n 1. positive (denote (Utrans x) \\<rho>) \\<and>\n    trace (denote (Utrans x) \\<rho>) \\<le> trace \\<rho> \\<and>\n    denote (Utrans x) \\<rho> \\<in> carrier_mat d d", "also"], ["proof (state)\nthis:\n  trace (adjoint x * x * \\<rho>) = trace (1\\<^sub>m d * \\<rho>)\n\ngoal (1 subgoal):\n 1. positive (denote (Utrans x) \\<rho>) \\<and>\n    trace (denote (Utrans x) \\<rho>) \\<le> trace \\<rho> \\<and>\n    denote (Utrans x) \\<rho> \\<in> carrier_mat d d", "have \"\\<dots> = trace \\<rho>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. trace (1\\<^sub>m d * \\<rho>) = trace \\<rho>", "using r"], ["proof (prove)\nusing this:\n  \\<rho> \\<in> carrier_mat d d\n\ngoal (1 subgoal):\n 1. trace (1\\<^sub>m d * \\<rho>) = trace \\<rho>", "by auto"], ["proof (state)\nthis:\n  trace (1\\<^sub>m d * \\<rho>) = trace \\<rho>\n\ngoal (1 subgoal):\n 1. positive (denote (Utrans x) \\<rho>) \\<and>\n    trace (denote (Utrans x) \\<rho>) \\<le> trace \\<rho> \\<and>\n    denote (Utrans x) \\<rho> \\<in> carrier_mat d d", "finally"], ["proof (chain)\npicking this:\n  trace (x * \\<rho> * adjoint x) = trace \\<rho>", "have fst: \"trace (x * \\<rho> * adjoint x) = trace \\<rho>\""], ["proof (prove)\nusing this:\n  trace (x * \\<rho> * adjoint x) = trace \\<rho>\n\ngoal (1 subgoal):\n 1. trace (x * \\<rho> * adjoint x) = trace \\<rho>", "by auto"], ["proof (state)\nthis:\n  trace (x * \\<rho> * adjoint x) = trace \\<rho>\n\ngoal (1 subgoal):\n 1. positive (denote (Utrans x) \\<rho>) \\<and>\n    trace (denote (Utrans x) \\<rho>) \\<le> trace \\<rho> \\<and>\n    denote (Utrans x) \\<rho> \\<in> carrier_mat d d", "moreover"], ["proof (state)\nthis:\n  trace (x * \\<rho> * adjoint x) = trace \\<rho>\n\ngoal (1 subgoal):\n 1. positive (denote (Utrans x) \\<rho>) \\<and>\n    trace (denote (Utrans x) \\<rho>) \\<le> trace \\<rho> \\<and>\n    denote (Utrans x) \\<rho> \\<in> carrier_mat d d", "have \"positive (x * \\<rho> * adjoint x)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. positive (x * \\<rho> * adjoint x)", "using positive_close_under_left_right_mult_adjoint r pdo wc"], ["proof (prove)\nusing this:\n  \\<lbrakk>?M \\<in> carrier_mat ?n ?n; ?A \\<in> carrier_mat ?n ?n;\n   positive ?A\\<rbrakk>\n  \\<Longrightarrow> positive (?M * ?A * adjoint ?M)\n  \\<rho> \\<in> carrier_mat d d\n  partial_density_operator \\<rho>\n  well_com (Utrans x)\n\ngoal (1 subgoal):\n 1. positive (x * \\<rho> * adjoint x)", "unfolding partial_density_operator_def"], ["proof (prove)\nusing this:\n  \\<lbrakk>?M \\<in> carrier_mat ?n ?n; ?A \\<in> carrier_mat ?n ?n;\n   positive ?A\\<rbrakk>\n  \\<Longrightarrow> positive (?M * ?A * adjoint ?M)\n  \\<rho> \\<in> carrier_mat d d\n  positive \\<rho> \\<and> trace \\<rho> \\<le> 1\n  well_com (Utrans x)\n\ngoal (1 subgoal):\n 1. positive (x * \\<rho> * adjoint x)", "by auto"], ["proof (state)\nthis:\n  positive (x * \\<rho> * adjoint x)\n\ngoal (1 subgoal):\n 1. positive (denote (Utrans x) \\<rho>) \\<and>\n    trace (denote (Utrans x) \\<rho>) \\<le> trace \\<rho> \\<and>\n    denote (Utrans x) \\<rho> \\<in> carrier_mat d d", "moreover"], ["proof (state)\nthis:\n  positive (x * \\<rho> * adjoint x)\n\ngoal (1 subgoal):\n 1. positive (denote (Utrans x) \\<rho>) \\<and>\n    trace (denote (Utrans x) \\<rho>) \\<le> trace \\<rho> \\<and>\n    denote (Utrans x) \\<rho> \\<in> carrier_mat d d", "have \"x * \\<rho> * adjoint x \\<in> carrier_mat d d\""], ["proof (prove)\ngoal (1 subgoal):\n 1. x * \\<rho> * adjoint x \\<in> carrier_mat d d", "using r wc adjoint_dim index_mult_mat"], ["proof (prove)\nusing this:\n  \\<rho> \\<in> carrier_mat d d\n  well_com (Utrans x)\n  ?A \\<in> carrier_mat ?n ?n \\<Longrightarrow>\n  adjoint ?A \\<in> carrier_mat ?n ?n\n  \\<lbrakk>?i < dim_row ?A; ?j < dim_col ?B\\<rbrakk>\n  \\<Longrightarrow> (?A * ?B) $$ (?i, ?j) = row ?A ?i \\<bullet> col ?B ?j\n  dim_row (?A * ?B) = dim_row ?A\n  dim_col (?A * ?B) = dim_col ?B\n\ngoal (1 subgoal):\n 1. x * \\<rho> * adjoint x \\<in> carrier_mat d d", "by auto"], ["proof (state)\nthis:\n  x * \\<rho> * adjoint x \\<in> carrier_mat d d\n\ngoal (1 subgoal):\n 1. positive (denote (Utrans x) \\<rho>) \\<and>\n    trace (denote (Utrans x) \\<rho>) \\<le> trace \\<rho> \\<and>\n    denote (Utrans x) \\<rho> \\<in> carrier_mat d d", "ultimately"], ["proof (chain)\npicking this:\n  trace (x * \\<rho> * adjoint x) = trace \\<rho>\n  positive (x * \\<rho> * adjoint x)\n  x * \\<rho> * adjoint x \\<in> carrier_mat d d", "show ?thesis"], ["proof (prove)\nusing this:\n  trace (x * \\<rho> * adjoint x) = trace \\<rho>\n  positive (x * \\<rho> * adjoint x)\n  x * \\<rho> * adjoint x \\<in> carrier_mat d d\n\ngoal (1 subgoal):\n 1. positive (denote (Utrans x) \\<rho>) \\<and>\n    trace (denote (Utrans x) \\<rho>) \\<le> trace \\<rho> \\<and>\n    denote (Utrans x) \\<rho> \\<in> carrier_mat d d", "by auto"], ["proof (state)\nthis:\n  positive (denote (Utrans x) \\<rho>) \\<and>\n  trace (denote (Utrans x) \\<rho>) \\<le> trace \\<rho> \\<and>\n  denote (Utrans x) \\<rho> \\<in> carrier_mat d d\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  positive (denote (Utrans x) \\<rho>) \\<and>\n  trace (denote (Utrans x) \\<rho>) \\<le> trace \\<rho> \\<and>\n  denote (Utrans x) \\<rho> \\<in> carrier_mat d d\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  positive (denote (Utrans x) \\<rho>) \\<and>\n  trace (denote (Utrans x) \\<rho>) \\<le> trace \\<rho> \\<and>\n  denote (Utrans x) \\<rho> \\<in> carrier_mat d d\n\ngoal (3 subgoals):\n 1. \\<And>x1 x2a \\<rho>.\n       \\<lbrakk>\\<And>\\<rho>.\n                   \\<lbrakk>well_com x1; \\<rho> \\<in> carrier_mat d d;\n                    partial_density_operator \\<rho>\\<rbrakk>\n                   \\<Longrightarrow> positive (denote x1 \\<rho>) \\<and>\n                                     trace (denote x1 \\<rho>)\n                                     \\<le> trace \\<rho> \\<and>\n                                     denote x1 \\<rho> \\<in> carrier_mat d d;\n        \\<And>\\<rho>.\n           \\<lbrakk>well_com x2a; \\<rho> \\<in> carrier_mat d d;\n            partial_density_operator \\<rho>\\<rbrakk>\n           \\<Longrightarrow> positive (denote x2a \\<rho>) \\<and>\n                             trace (denote x2a \\<rho>)\n                             \\<le> trace \\<rho> \\<and>\n                             denote x2a \\<rho> \\<in> carrier_mat d d;\n        well_com (x1;; x2a); \\<rho> \\<in> carrier_mat d d;\n        partial_density_operator \\<rho>\\<rbrakk>\n       \\<Longrightarrow> positive (denote (x1;; x2a) \\<rho>) \\<and>\n                         trace (denote (x1;; x2a) \\<rho>)\n                         \\<le> trace \\<rho> \\<and>\n                         denote (x1;; x2a) \\<rho> \\<in> carrier_mat d d\n 2. \\<And>x1 x2a x3 \\<rho>.\n       \\<lbrakk>\\<And>x3a \\<rho>.\n                   \\<lbrakk>x3a \\<in> set x3; well_com x3a;\n                    \\<rho> \\<in> carrier_mat d d;\n                    partial_density_operator \\<rho>\\<rbrakk>\n                   \\<Longrightarrow> positive (denote x3a \\<rho>) \\<and>\n                                     trace (denote x3a \\<rho>)\n                                     \\<le> trace \\<rho> \\<and>\n                                     denote x3a \\<rho>\n                                     \\<in> carrier_mat d d;\n        well_com (Measure x1 x2a x3); \\<rho> \\<in> carrier_mat d d;\n        partial_density_operator \\<rho>\\<rbrakk>\n       \\<Longrightarrow> positive (denote (Measure x1 x2a x3) \\<rho>) \\<and>\n                         trace (denote (Measure x1 x2a x3) \\<rho>)\n                         \\<le> trace \\<rho> \\<and>\n                         denote (Measure x1 x2a x3) \\<rho>\n                         \\<in> carrier_mat d d\n 3. \\<And>x1 x2a \\<rho>.\n       \\<lbrakk>\\<And>\\<rho>.\n                   \\<lbrakk>well_com x2a; \\<rho> \\<in> carrier_mat d d;\n                    partial_density_operator \\<rho>\\<rbrakk>\n                   \\<Longrightarrow> positive (denote x2a \\<rho>) \\<and>\n                                     trace (denote x2a \\<rho>)\n                                     \\<le> trace \\<rho> \\<and>\n                                     denote x2a \\<rho>\n                                     \\<in> carrier_mat d d;\n        well_com (While x1 x2a); \\<rho> \\<in> carrier_mat d d;\n        partial_density_operator \\<rho>\\<rbrakk>\n       \\<Longrightarrow> positive (denote (While x1 x2a) \\<rho>) \\<and>\n                         trace (denote (While x1 x2a) \\<rho>)\n                         \\<le> trace \\<rho> \\<and>\n                         denote (While x1 x2a) \\<rho> \\<in> carrier_mat d d", "next"], ["proof (state)\ngoal (3 subgoals):\n 1. \\<And>x1 x2a \\<rho>.\n       \\<lbrakk>\\<And>\\<rho>.\n                   \\<lbrakk>well_com x1; \\<rho> \\<in> carrier_mat d d;\n                    partial_density_operator \\<rho>\\<rbrakk>\n                   \\<Longrightarrow> positive (denote x1 \\<rho>) \\<and>\n                                     trace (denote x1 \\<rho>)\n                                     \\<le> trace \\<rho> \\<and>\n                                     denote x1 \\<rho> \\<in> carrier_mat d d;\n        \\<And>\\<rho>.\n           \\<lbrakk>well_com x2a; \\<rho> \\<in> carrier_mat d d;\n            partial_density_operator \\<rho>\\<rbrakk>\n           \\<Longrightarrow> positive (denote x2a \\<rho>) \\<and>\n                             trace (denote x2a \\<rho>)\n                             \\<le> trace \\<rho> \\<and>\n                             denote x2a \\<rho> \\<in> carrier_mat d d;\n        well_com (x1;; x2a); \\<rho> \\<in> carrier_mat d d;\n        partial_density_operator \\<rho>\\<rbrakk>\n       \\<Longrightarrow> positive (denote (x1;; x2a) \\<rho>) \\<and>\n                         trace (denote (x1;; x2a) \\<rho>)\n                         \\<le> trace \\<rho> \\<and>\n                         denote (x1;; x2a) \\<rho> \\<in> carrier_mat d d\n 2. \\<And>x1 x2a x3 \\<rho>.\n       \\<lbrakk>\\<And>x3a \\<rho>.\n                   \\<lbrakk>x3a \\<in> set x3; well_com x3a;\n                    \\<rho> \\<in> carrier_mat d d;\n                    partial_density_operator \\<rho>\\<rbrakk>\n                   \\<Longrightarrow> positive (denote x3a \\<rho>) \\<and>\n                                     trace (denote x3a \\<rho>)\n                                     \\<le> trace \\<rho> \\<and>\n                                     denote x3a \\<rho>\n                                     \\<in> carrier_mat d d;\n        well_com (Measure x1 x2a x3); \\<rho> \\<in> carrier_mat d d;\n        partial_density_operator \\<rho>\\<rbrakk>\n       \\<Longrightarrow> positive (denote (Measure x1 x2a x3) \\<rho>) \\<and>\n                         trace (denote (Measure x1 x2a x3) \\<rho>)\n                         \\<le> trace \\<rho> \\<and>\n                         denote (Measure x1 x2a x3) \\<rho>\n                         \\<in> carrier_mat d d\n 3. \\<And>x1 x2a \\<rho>.\n       \\<lbrakk>\\<And>\\<rho>.\n                   \\<lbrakk>well_com x2a; \\<rho> \\<in> carrier_mat d d;\n                    partial_density_operator \\<rho>\\<rbrakk>\n                   \\<Longrightarrow> positive (denote x2a \\<rho>) \\<and>\n                                     trace (denote x2a \\<rho>)\n                                     \\<le> trace \\<rho> \\<and>\n                                     denote x2a \\<rho>\n                                     \\<in> carrier_mat d d;\n        well_com (While x1 x2a); \\<rho> \\<in> carrier_mat d d;\n        partial_density_operator \\<rho>\\<rbrakk>\n       \\<Longrightarrow> positive (denote (While x1 x2a) \\<rho>) \\<and>\n                         trace (denote (While x1 x2a) \\<rho>)\n                         \\<le> trace \\<rho> \\<and>\n                         denote (While x1 x2a) \\<rho> \\<in> carrier_mat d d", "case (Seq x1 x2a)"], ["proof (state)\nthis:\n  \\<lbrakk>well_com x1; ?\\<rho> \\<in> carrier_mat d d;\n   partial_density_operator ?\\<rho>\\<rbrakk>\n  \\<Longrightarrow> positive (denote x1 ?\\<rho>) \\<and>\n                    trace (denote x1 ?\\<rho>) \\<le> trace ?\\<rho> \\<and>\n                    denote x1 ?\\<rho> \\<in> carrier_mat d d\n  \\<lbrakk>well_com x2a; ?\\<rho> \\<in> carrier_mat d d;\n   partial_density_operator ?\\<rho>\\<rbrakk>\n  \\<Longrightarrow> positive (denote x2a ?\\<rho>) \\<and>\n                    trace (denote x2a ?\\<rho>) \\<le> trace ?\\<rho> \\<and>\n                    denote x2a ?\\<rho> \\<in> carrier_mat d d\n  well_com (x1;; x2a)\n  \\<rho> \\<in> carrier_mat d d\n  partial_density_operator \\<rho>\n\ngoal (3 subgoals):\n 1. \\<And>x1 x2a \\<rho>.\n       \\<lbrakk>\\<And>\\<rho>.\n                   \\<lbrakk>well_com x1; \\<rho> \\<in> carrier_mat d d;\n                    partial_density_operator \\<rho>\\<rbrakk>\n                   \\<Longrightarrow> positive (denote x1 \\<rho>) \\<and>\n                                     trace (denote x1 \\<rho>)\n                                     \\<le> trace \\<rho> \\<and>\n                                     denote x1 \\<rho> \\<in> carrier_mat d d;\n        \\<And>\\<rho>.\n           \\<lbrakk>well_com x2a; \\<rho> \\<in> carrier_mat d d;\n            partial_density_operator \\<rho>\\<rbrakk>\n           \\<Longrightarrow> positive (denote x2a \\<rho>) \\<and>\n                             trace (denote x2a \\<rho>)\n                             \\<le> trace \\<rho> \\<and>\n                             denote x2a \\<rho> \\<in> carrier_mat d d;\n        well_com (x1;; x2a); \\<rho> \\<in> carrier_mat d d;\n        partial_density_operator \\<rho>\\<rbrakk>\n       \\<Longrightarrow> positive (denote (x1;; x2a) \\<rho>) \\<and>\n                         trace (denote (x1;; x2a) \\<rho>)\n                         \\<le> trace \\<rho> \\<and>\n                         denote (x1;; x2a) \\<rho> \\<in> carrier_mat d d\n 2. \\<And>x1 x2a x3 \\<rho>.\n       \\<lbrakk>\\<And>x3a \\<rho>.\n                   \\<lbrakk>x3a \\<in> set x3; well_com x3a;\n                    \\<rho> \\<in> carrier_mat d d;\n                    partial_density_operator \\<rho>\\<rbrakk>\n                   \\<Longrightarrow> positive (denote x3a \\<rho>) \\<and>\n                                     trace (denote x3a \\<rho>)\n                                     \\<le> trace \\<rho> \\<and>\n                                     denote x3a \\<rho>\n                                     \\<in> carrier_mat d d;\n        well_com (Measure x1 x2a x3); \\<rho> \\<in> carrier_mat d d;\n        partial_density_operator \\<rho>\\<rbrakk>\n       \\<Longrightarrow> positive (denote (Measure x1 x2a x3) \\<rho>) \\<and>\n                         trace (denote (Measure x1 x2a x3) \\<rho>)\n                         \\<le> trace \\<rho> \\<and>\n                         denote (Measure x1 x2a x3) \\<rho>\n                         \\<in> carrier_mat d d\n 3. \\<And>x1 x2a \\<rho>.\n       \\<lbrakk>\\<And>\\<rho>.\n                   \\<lbrakk>well_com x2a; \\<rho> \\<in> carrier_mat d d;\n                    partial_density_operator \\<rho>\\<rbrakk>\n                   \\<Longrightarrow> positive (denote x2a \\<rho>) \\<and>\n                                     trace (denote x2a \\<rho>)\n                                     \\<le> trace \\<rho> \\<and>\n                                     denote x2a \\<rho>\n                                     \\<in> carrier_mat d d;\n        well_com (While x1 x2a); \\<rho> \\<in> carrier_mat d d;\n        partial_density_operator \\<rho>\\<rbrakk>\n       \\<Longrightarrow> positive (denote (While x1 x2a) \\<rho>) \\<and>\n                         trace (denote (While x1 x2a) \\<rho>)\n                         \\<le> trace \\<rho> \\<and>\n                         denote (While x1 x2a) \\<rho> \\<in> carrier_mat d d", "then"], ["proof (chain)\npicking this:\n  \\<lbrakk>well_com x1; ?\\<rho> \\<in> carrier_mat d d;\n   partial_density_operator ?\\<rho>\\<rbrakk>\n  \\<Longrightarrow> positive (denote x1 ?\\<rho>) \\<and>\n                    trace (denote x1 ?\\<rho>) \\<le> trace ?\\<rho> \\<and>\n                    denote x1 ?\\<rho> \\<in> carrier_mat d d\n  \\<lbrakk>well_com x2a; ?\\<rho> \\<in> carrier_mat d d;\n   partial_density_operator ?\\<rho>\\<rbrakk>\n  \\<Longrightarrow> positive (denote x2a ?\\<rho>) \\<and>\n                    trace (denote x2a ?\\<rho>) \\<le> trace ?\\<rho> \\<and>\n                    denote x2a ?\\<rho> \\<in> carrier_mat d d\n  well_com (x1;; x2a)\n  \\<rho> \\<in> carrier_mat d d\n  partial_density_operator \\<rho>", "show ?case"], ["proof (prove)\nusing this:\n  \\<lbrakk>well_com x1; ?\\<rho> \\<in> carrier_mat d d;\n   partial_density_operator ?\\<rho>\\<rbrakk>\n  \\<Longrightarrow> positive (denote x1 ?\\<rho>) \\<and>\n                    trace (denote x1 ?\\<rho>) \\<le> trace ?\\<rho> \\<and>\n                    denote x1 ?\\<rho> \\<in> carrier_mat d d\n  \\<lbrakk>well_com x2a; ?\\<rho> \\<in> carrier_mat d d;\n   partial_density_operator ?\\<rho>\\<rbrakk>\n  \\<Longrightarrow> positive (denote x2a ?\\<rho>) \\<and>\n                    trace (denote x2a ?\\<rho>) \\<le> trace ?\\<rho> \\<and>\n                    denote x2a ?\\<rho> \\<in> carrier_mat d d\n  well_com (x1;; x2a)\n  \\<rho> \\<in> carrier_mat d d\n  partial_density_operator \\<rho>\n\ngoal (1 subgoal):\n 1. positive (denote (x1;; x2a) \\<rho>) \\<and>\n    trace (denote (x1;; x2a) \\<rho>) \\<le> trace \\<rho> \\<and>\n    denote (x1;; x2a) \\<rho> \\<in> carrier_mat d d", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<And>\\<rho>.\n                \\<lbrakk>well_com x1; \\<rho> \\<in> carrier_mat d d;\n                 partial_density_operator \\<rho>\\<rbrakk>\n                \\<Longrightarrow> positive (denote x1 \\<rho>) \\<and>\n                                  trace (denote x1 \\<rho>)\n                                  \\<le> trace \\<rho> \\<and>\n                                  denote x1 \\<rho> \\<in> carrier_mat d d;\n     \\<And>\\<rho>.\n        \\<lbrakk>well_com x2a; \\<rho> \\<in> carrier_mat d d;\n         partial_density_operator \\<rho>\\<rbrakk>\n        \\<Longrightarrow> positive (denote x2a \\<rho>) \\<and>\n                          trace (denote x2a \\<rho>)\n                          \\<le> trace \\<rho> \\<and>\n                          denote x2a \\<rho> \\<in> carrier_mat d d;\n     well_com (x1;; x2a); \\<rho> \\<in> carrier_mat d d;\n     partial_density_operator \\<rho>\\<rbrakk>\n    \\<Longrightarrow> positive (denote (x1;; x2a) \\<rho>) \\<and>\n                      trace (denote (x1;; x2a) \\<rho>)\n                      \\<le> trace \\<rho> \\<and>\n                      denote (x1;; x2a) \\<rho> \\<in> carrier_mat d d", "assume dx1: \"(\\<And>\\<rho>. well_com x1 \\<Longrightarrow> \\<rho> \\<in> carrier_mat d d \\<Longrightarrow> partial_density_operator \\<rho> \\<Longrightarrow> positive (denote x1 \\<rho>) \\<and> trace (denote x1 \\<rho>) \\<le> trace \\<rho> \\<and> denote x1 \\<rho> \\<in> carrier_mat d d)\"\n       and dx2a: \"(\\<And>\\<rho>. well_com x2a \\<Longrightarrow> \\<rho> \\<in> carrier_mat d d \\<Longrightarrow> partial_density_operator \\<rho> \\<Longrightarrow> positive (denote x2a \\<rho>) \\<and> trace (denote x2a \\<rho>) \\<le> trace \\<rho> \\<and> denote x2a \\<rho> \\<in> carrier_mat d d)\"\n       and wc: \"well_com (Seq x1 x2a)\" and r: \"\\<rho> \\<in> carrier_mat d d\" and pdo: \"partial_density_operator \\<rho>\""], ["proof (state)\nthis:\n  \\<lbrakk>well_com x1; ?\\<rho> \\<in> carrier_mat d d;\n   partial_density_operator ?\\<rho>\\<rbrakk>\n  \\<Longrightarrow> positive (denote x1 ?\\<rho>) \\<and>\n                    trace (denote x1 ?\\<rho>) \\<le> trace ?\\<rho> \\<and>\n                    denote x1 ?\\<rho> \\<in> carrier_mat d d\n  \\<lbrakk>well_com x2a; ?\\<rho> \\<in> carrier_mat d d;\n   partial_density_operator ?\\<rho>\\<rbrakk>\n  \\<Longrightarrow> positive (denote x2a ?\\<rho>) \\<and>\n                    trace (denote x2a ?\\<rho>) \\<le> trace ?\\<rho> \\<and>\n                    denote x2a ?\\<rho> \\<in> carrier_mat d d\n  well_com (x1;; x2a)\n  \\<rho> \\<in> carrier_mat d d\n  partial_density_operator \\<rho>\n\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<And>\\<rho>.\n                \\<lbrakk>well_com x1; \\<rho> \\<in> carrier_mat d d;\n                 partial_density_operator \\<rho>\\<rbrakk>\n                \\<Longrightarrow> positive (denote x1 \\<rho>) \\<and>\n                                  trace (denote x1 \\<rho>)\n                                  \\<le> trace \\<rho> \\<and>\n                                  denote x1 \\<rho> \\<in> carrier_mat d d;\n     \\<And>\\<rho>.\n        \\<lbrakk>well_com x2a; \\<rho> \\<in> carrier_mat d d;\n         partial_density_operator \\<rho>\\<rbrakk>\n        \\<Longrightarrow> positive (denote x2a \\<rho>) \\<and>\n                          trace (denote x2a \\<rho>)\n                          \\<le> trace \\<rho> \\<and>\n                          denote x2a \\<rho> \\<in> carrier_mat d d;\n     well_com (x1;; x2a); \\<rho> \\<in> carrier_mat d d;\n     partial_density_operator \\<rho>\\<rbrakk>\n    \\<Longrightarrow> positive (denote (x1;; x2a) \\<rho>) \\<and>\n                      trace (denote (x1;; x2a) \\<rho>)\n                      \\<le> trace \\<rho> \\<and>\n                      denote (x1;; x2a) \\<rho> \\<in> carrier_mat d d", "show \"positive (denote (Seq x1 x2a) \\<rho>) \\<and> trace (denote (Seq x1 x2a) \\<rho>) \\<le> trace \\<rho> \\<and> denote (Seq x1 x2a) \\<rho> \\<in> carrier_mat d d\""], ["proof (prove)\ngoal (1 subgoal):\n 1. positive (denote (x1;; x2a) \\<rho>) \\<and>\n    trace (denote (x1;; x2a) \\<rho>) \\<le> trace \\<rho> \\<and>\n    denote (x1;; x2a) \\<rho> \\<in> carrier_mat d d", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. positive (denote (x1;; x2a) \\<rho>) \\<and>\n    trace (denote (x1;; x2a) \\<rho>) \\<le> trace \\<rho> \\<and>\n    denote (x1;; x2a) \\<rho> \\<in> carrier_mat d d", "have ptc: \"positive (denote x1 \\<rho>) \\<and> trace (denote x1 \\<rho>) \\<le> trace \\<rho> \\<and> denote x1 \\<rho> \\<in> carrier_mat d d\""], ["proof (prove)\ngoal (1 subgoal):\n 1. positive (denote x1 \\<rho>) \\<and>\n    trace (denote x1 \\<rho>) \\<le> trace \\<rho> \\<and>\n    denote x1 \\<rho> \\<in> carrier_mat d d", "using wc r pdo dx1"], ["proof (prove)\nusing this:\n  well_com (x1;; x2a)\n  \\<rho> \\<in> carrier_mat d d\n  partial_density_operator \\<rho>\n  \\<lbrakk>well_com x1; ?\\<rho> \\<in> carrier_mat d d;\n   partial_density_operator ?\\<rho>\\<rbrakk>\n  \\<Longrightarrow> positive (denote x1 ?\\<rho>) \\<and>\n                    trace (denote x1 ?\\<rho>) \\<le> trace ?\\<rho> \\<and>\n                    denote x1 ?\\<rho> \\<in> carrier_mat d d\n\ngoal (1 subgoal):\n 1. positive (denote x1 \\<rho>) \\<and>\n    trace (denote x1 \\<rho>) \\<le> trace \\<rho> \\<and>\n    denote x1 \\<rho> \\<in> carrier_mat d d", "by auto"], ["proof (state)\nthis:\n  positive (denote x1 \\<rho>) \\<and>\n  trace (denote x1 \\<rho>) \\<le> trace \\<rho> \\<and>\n  denote x1 \\<rho> \\<in> carrier_mat d d\n\ngoal (1 subgoal):\n 1. positive (denote (x1;; x2a) \\<rho>) \\<and>\n    trace (denote (x1;; x2a) \\<rho>) \\<le> trace \\<rho> \\<and>\n    denote (x1;; x2a) \\<rho> \\<in> carrier_mat d d", "then"], ["proof (chain)\npicking this:\n  positive (denote x1 \\<rho>) \\<and>\n  trace (denote x1 \\<rho>) \\<le> trace \\<rho> \\<and>\n  denote x1 \\<rho> \\<in> carrier_mat d d", "have \"partial_density_operator (denote x1 \\<rho>)\""], ["proof (prove)\nusing this:\n  positive (denote x1 \\<rho>) \\<and>\n  trace (denote x1 \\<rho>) \\<le> trace \\<rho> \\<and>\n  denote x1 \\<rho> \\<in> carrier_mat d d\n\ngoal (1 subgoal):\n 1. partial_density_operator (denote x1 \\<rho>)", "using pdo"], ["proof (prove)\nusing this:\n  positive (denote x1 \\<rho>) \\<and>\n  trace (denote x1 \\<rho>) \\<le> trace \\<rho> \\<and>\n  denote x1 \\<rho> \\<in> carrier_mat d d\n  partial_density_operator \\<rho>\n\ngoal (1 subgoal):\n 1. partial_density_operator (denote x1 \\<rho>)", "unfolding partial_density_operator_def"], ["proof (prove)\nusing this:\n  positive (denote x1 \\<rho>) \\<and>\n  trace (denote x1 \\<rho>) \\<le> trace \\<rho> \\<and>\n  denote x1 \\<rho> \\<in> carrier_mat d d\n  positive \\<rho> \\<and> trace \\<rho> \\<le> 1\n\ngoal (1 subgoal):\n 1. positive (denote x1 \\<rho>) \\<and> trace (denote x1 \\<rho>) \\<le> 1", "by auto"], ["proof (state)\nthis:\n  partial_density_operator (denote x1 \\<rho>)\n\ngoal (1 subgoal):\n 1. positive (denote (x1;; x2a) \\<rho>) \\<and>\n    trace (denote (x1;; x2a) \\<rho>) \\<le> trace \\<rho> \\<and>\n    denote (x1;; x2a) \\<rho> \\<in> carrier_mat d d", "then"], ["proof (chain)\npicking this:\n  partial_density_operator (denote x1 \\<rho>)", "show ?thesis"], ["proof (prove)\nusing this:\n  partial_density_operator (denote x1 \\<rho>)\n\ngoal (1 subgoal):\n 1. positive (denote (x1;; x2a) \\<rho>) \\<and>\n    trace (denote (x1;; x2a) \\<rho>) \\<le> trace \\<rho> \\<and>\n    denote (x1;; x2a) \\<rho> \\<in> carrier_mat d d", "using ptc dx2a wc  dual_order.trans"], ["proof (prove)\nusing this:\n  partial_density_operator (denote x1 \\<rho>)\n  positive (denote x1 \\<rho>) \\<and>\n  trace (denote x1 \\<rho>) \\<le> trace \\<rho> \\<and>\n  denote x1 \\<rho> \\<in> carrier_mat d d\n  \\<lbrakk>well_com x2a; ?\\<rho> \\<in> carrier_mat d d;\n   partial_density_operator ?\\<rho>\\<rbrakk>\n  \\<Longrightarrow> positive (denote x2a ?\\<rho>) \\<and>\n                    trace (denote x2a ?\\<rho>) \\<le> trace ?\\<rho> \\<and>\n                    denote x2a ?\\<rho> \\<in> carrier_mat d d\n  well_com (x1;; x2a)\n  \\<lbrakk>?b \\<le> ?a; ?c \\<le> ?b\\<rbrakk> \\<Longrightarrow> ?c \\<le> ?a\n\ngoal (1 subgoal):\n 1. positive (denote (x1;; x2a) \\<rho>) \\<and>\n    trace (denote (x1;; x2a) \\<rho>) \\<le> trace \\<rho> \\<and>\n    denote (x1;; x2a) \\<rho> \\<in> carrier_mat d d", "by auto"], ["proof (state)\nthis:\n  positive (denote (x1;; x2a) \\<rho>) \\<and>\n  trace (denote (x1;; x2a) \\<rho>) \\<le> trace \\<rho> \\<and>\n  denote (x1;; x2a) \\<rho> \\<in> carrier_mat d d\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  positive (denote (x1;; x2a) \\<rho>) \\<and>\n  trace (denote (x1;; x2a) \\<rho>) \\<le> trace \\<rho> \\<and>\n  denote (x1;; x2a) \\<rho> \\<in> carrier_mat d d\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  positive (denote (x1;; x2a) \\<rho>) \\<and>\n  trace (denote (x1;; x2a) \\<rho>) \\<le> trace \\<rho> \\<and>\n  denote (x1;; x2a) \\<rho> \\<in> carrier_mat d d\n\ngoal (2 subgoals):\n 1. \\<And>x1 x2a x3 \\<rho>.\n       \\<lbrakk>\\<And>x3a \\<rho>.\n                   \\<lbrakk>x3a \\<in> set x3; well_com x3a;\n                    \\<rho> \\<in> carrier_mat d d;\n                    partial_density_operator \\<rho>\\<rbrakk>\n                   \\<Longrightarrow> positive (denote x3a \\<rho>) \\<and>\n                                     trace (denote x3a \\<rho>)\n                                     \\<le> trace \\<rho> \\<and>\n                                     denote x3a \\<rho>\n                                     \\<in> carrier_mat d d;\n        well_com (Measure x1 x2a x3); \\<rho> \\<in> carrier_mat d d;\n        partial_density_operator \\<rho>\\<rbrakk>\n       \\<Longrightarrow> positive (denote (Measure x1 x2a x3) \\<rho>) \\<and>\n                         trace (denote (Measure x1 x2a x3) \\<rho>)\n                         \\<le> trace \\<rho> \\<and>\n                         denote (Measure x1 x2a x3) \\<rho>\n                         \\<in> carrier_mat d d\n 2. \\<And>x1 x2a \\<rho>.\n       \\<lbrakk>\\<And>\\<rho>.\n                   \\<lbrakk>well_com x2a; \\<rho> \\<in> carrier_mat d d;\n                    partial_density_operator \\<rho>\\<rbrakk>\n                   \\<Longrightarrow> positive (denote x2a \\<rho>) \\<and>\n                                     trace (denote x2a \\<rho>)\n                                     \\<le> trace \\<rho> \\<and>\n                                     denote x2a \\<rho>\n                                     \\<in> carrier_mat d d;\n        well_com (While x1 x2a); \\<rho> \\<in> carrier_mat d d;\n        partial_density_operator \\<rho>\\<rbrakk>\n       \\<Longrightarrow> positive (denote (While x1 x2a) \\<rho>) \\<and>\n                         trace (denote (While x1 x2a) \\<rho>)\n                         \\<le> trace \\<rho> \\<and>\n                         denote (While x1 x2a) \\<rho> \\<in> carrier_mat d d", "next"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>x1 x2a x3 \\<rho>.\n       \\<lbrakk>\\<And>x3a \\<rho>.\n                   \\<lbrakk>x3a \\<in> set x3; well_com x3a;\n                    \\<rho> \\<in> carrier_mat d d;\n                    partial_density_operator \\<rho>\\<rbrakk>\n                   \\<Longrightarrow> positive (denote x3a \\<rho>) \\<and>\n                                     trace (denote x3a \\<rho>)\n                                     \\<le> trace \\<rho> \\<and>\n                                     denote x3a \\<rho>\n                                     \\<in> carrier_mat d d;\n        well_com (Measure x1 x2a x3); \\<rho> \\<in> carrier_mat d d;\n        partial_density_operator \\<rho>\\<rbrakk>\n       \\<Longrightarrow> positive (denote (Measure x1 x2a x3) \\<rho>) \\<and>\n                         trace (denote (Measure x1 x2a x3) \\<rho>)\n                         \\<le> trace \\<rho> \\<and>\n                         denote (Measure x1 x2a x3) \\<rho>\n                         \\<in> carrier_mat d d\n 2. \\<And>x1 x2a \\<rho>.\n       \\<lbrakk>\\<And>\\<rho>.\n                   \\<lbrakk>well_com x2a; \\<rho> \\<in> carrier_mat d d;\n                    partial_density_operator \\<rho>\\<rbrakk>\n                   \\<Longrightarrow> positive (denote x2a \\<rho>) \\<and>\n                                     trace (denote x2a \\<rho>)\n                                     \\<le> trace \\<rho> \\<and>\n                                     denote x2a \\<rho>\n                                     \\<in> carrier_mat d d;\n        well_com (While x1 x2a); \\<rho> \\<in> carrier_mat d d;\n        partial_density_operator \\<rho>\\<rbrakk>\n       \\<Longrightarrow> positive (denote (While x1 x2a) \\<rho>) \\<and>\n                         trace (denote (While x1 x2a) \\<rho>)\n                         \\<le> trace \\<rho> \\<and>\n                         denote (While x1 x2a) \\<rho> \\<in> carrier_mat d d", "case (Measure x1 x2a x3a)"], ["proof (state)\nthis:\n  \\<lbrakk>?x3a \\<in> set x3a; well_com ?x3a; ?\\<rho> \\<in> carrier_mat d d;\n   partial_density_operator ?\\<rho>\\<rbrakk>\n  \\<Longrightarrow> positive (denote ?x3a ?\\<rho>) \\<and>\n                    trace (denote ?x3a ?\\<rho>) \\<le> trace ?\\<rho> \\<and>\n                    denote ?x3a ?\\<rho> \\<in> carrier_mat d d\n  well_com (Measure x1 x2a x3a)\n  \\<rho> \\<in> carrier_mat d d\n  partial_density_operator \\<rho>\n\ngoal (2 subgoals):\n 1. \\<And>x1 x2a x3 \\<rho>.\n       \\<lbrakk>\\<And>x3a \\<rho>.\n                   \\<lbrakk>x3a \\<in> set x3; well_com x3a;\n                    \\<rho> \\<in> carrier_mat d d;\n                    partial_density_operator \\<rho>\\<rbrakk>\n                   \\<Longrightarrow> positive (denote x3a \\<rho>) \\<and>\n                                     trace (denote x3a \\<rho>)\n                                     \\<le> trace \\<rho> \\<and>\n                                     denote x3a \\<rho>\n                                     \\<in> carrier_mat d d;\n        well_com (Measure x1 x2a x3); \\<rho> \\<in> carrier_mat d d;\n        partial_density_operator \\<rho>\\<rbrakk>\n       \\<Longrightarrow> positive (denote (Measure x1 x2a x3) \\<rho>) \\<and>\n                         trace (denote (Measure x1 x2a x3) \\<rho>)\n                         \\<le> trace \\<rho> \\<and>\n                         denote (Measure x1 x2a x3) \\<rho>\n                         \\<in> carrier_mat d d\n 2. \\<And>x1 x2a \\<rho>.\n       \\<lbrakk>\\<And>\\<rho>.\n                   \\<lbrakk>well_com x2a; \\<rho> \\<in> carrier_mat d d;\n                    partial_density_operator \\<rho>\\<rbrakk>\n                   \\<Longrightarrow> positive (denote x2a \\<rho>) \\<and>\n                                     trace (denote x2a \\<rho>)\n                                     \\<le> trace \\<rho> \\<and>\n                                     denote x2a \\<rho>\n                                     \\<in> carrier_mat d d;\n        well_com (While x1 x2a); \\<rho> \\<in> carrier_mat d d;\n        partial_density_operator \\<rho>\\<rbrakk>\n       \\<Longrightarrow> positive (denote (While x1 x2a) \\<rho>) \\<and>\n                         trace (denote (While x1 x2a) \\<rho>)\n                         \\<le> trace \\<rho> \\<and>\n                         denote (While x1 x2a) \\<rho> \\<in> carrier_mat d d", "then"], ["proof (chain)\npicking this:\n  \\<lbrakk>?x3a \\<in> set x3a; well_com ?x3a; ?\\<rho> \\<in> carrier_mat d d;\n   partial_density_operator ?\\<rho>\\<rbrakk>\n  \\<Longrightarrow> positive (denote ?x3a ?\\<rho>) \\<and>\n                    trace (denote ?x3a ?\\<rho>) \\<le> trace ?\\<rho> \\<and>\n                    denote ?x3a ?\\<rho> \\<in> carrier_mat d d\n  well_com (Measure x1 x2a x3a)\n  \\<rho> \\<in> carrier_mat d d\n  partial_density_operator \\<rho>", "show ?case"], ["proof (prove)\nusing this:\n  \\<lbrakk>?x3a \\<in> set x3a; well_com ?x3a; ?\\<rho> \\<in> carrier_mat d d;\n   partial_density_operator ?\\<rho>\\<rbrakk>\n  \\<Longrightarrow> positive (denote ?x3a ?\\<rho>) \\<and>\n                    trace (denote ?x3a ?\\<rho>) \\<le> trace ?\\<rho> \\<and>\n                    denote ?x3a ?\\<rho> \\<in> carrier_mat d d\n  well_com (Measure x1 x2a x3a)\n  \\<rho> \\<in> carrier_mat d d\n  partial_density_operator \\<rho>\n\ngoal (1 subgoal):\n 1. positive (denote (Measure x1 x2a x3a) \\<rho>) \\<and>\n    trace (denote (Measure x1 x2a x3a) \\<rho>) \\<le> trace \\<rho> \\<and>\n    denote (Measure x1 x2a x3a) \\<rho> \\<in> carrier_mat d d", "using denote_measure_positive_trace_dim"], ["proof (prove)\nusing this:\n  \\<lbrakk>?x3a \\<in> set x3a; well_com ?x3a; ?\\<rho> \\<in> carrier_mat d d;\n   partial_density_operator ?\\<rho>\\<rbrakk>\n  \\<Longrightarrow> positive (denote ?x3a ?\\<rho>) \\<and>\n                    trace (denote ?x3a ?\\<rho>) \\<le> trace ?\\<rho> \\<and>\n                    denote ?x3a ?\\<rho> \\<in> carrier_mat d d\n  well_com (Measure x1 x2a x3a)\n  \\<rho> \\<in> carrier_mat d d\n  partial_density_operator \\<rho>\n  \\<lbrakk>well_com (Measure ?x1.0 ?x2a ?x3a); ?x4.0 \\<in> carrier_mat d d;\n   partial_density_operator ?x4.0;\n   \\<And>x3aa \\<rho>.\n      \\<lbrakk>x3aa \\<in> set ?x3a; well_com x3aa;\n       \\<rho> \\<in> carrier_mat d d;\n       partial_density_operator \\<rho>\\<rbrakk>\n      \\<Longrightarrow> positive (denote x3aa \\<rho>) \\<and>\n                        trace (denote x3aa \\<rho>) \\<le> trace \\<rho> \\<and>\n                        denote x3aa \\<rho> \\<in> carrier_mat d d\\<rbrakk>\n  \\<Longrightarrow> positive (denote (Measure ?x1.0 ?x2a ?x3a) ?x4.0) \\<and>\n                    trace (denote (Measure ?x1.0 ?x2a ?x3a) ?x4.0)\n                    \\<le> trace ?x4.0 \\<and>\n                    denote (Measure ?x1.0 ?x2a ?x3a) ?x4.0\n                    \\<in> carrier_mat d d\n\ngoal (1 subgoal):\n 1. positive (denote (Measure x1 x2a x3a) \\<rho>) \\<and>\n    trace (denote (Measure x1 x2a x3a) \\<rho>) \\<le> trace \\<rho> \\<and>\n    denote (Measure x1 x2a x3a) \\<rho> \\<in> carrier_mat d d", "by auto"], ["proof (state)\nthis:\n  positive (denote (Measure x1 x2a x3a) \\<rho>) \\<and>\n  trace (denote (Measure x1 x2a x3a) \\<rho>) \\<le> trace \\<rho> \\<and>\n  denote (Measure x1 x2a x3a) \\<rho> \\<in> carrier_mat d d\n\ngoal (1 subgoal):\n 1. \\<And>x1 x2a \\<rho>.\n       \\<lbrakk>\\<And>\\<rho>.\n                   \\<lbrakk>well_com x2a; \\<rho> \\<in> carrier_mat d d;\n                    partial_density_operator \\<rho>\\<rbrakk>\n                   \\<Longrightarrow> positive (denote x2a \\<rho>) \\<and>\n                                     trace (denote x2a \\<rho>)\n                                     \\<le> trace \\<rho> \\<and>\n                                     denote x2a \\<rho>\n                                     \\<in> carrier_mat d d;\n        well_com (While x1 x2a); \\<rho> \\<in> carrier_mat d d;\n        partial_density_operator \\<rho>\\<rbrakk>\n       \\<Longrightarrow> positive (denote (While x1 x2a) \\<rho>) \\<and>\n                         trace (denote (While x1 x2a) \\<rho>)\n                         \\<le> trace \\<rho> \\<and>\n                         denote (While x1 x2a) \\<rho> \\<in> carrier_mat d d", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x1 x2a \\<rho>.\n       \\<lbrakk>\\<And>\\<rho>.\n                   \\<lbrakk>well_com x2a; \\<rho> \\<in> carrier_mat d d;\n                    partial_density_operator \\<rho>\\<rbrakk>\n                   \\<Longrightarrow> positive (denote x2a \\<rho>) \\<and>\n                                     trace (denote x2a \\<rho>)\n                                     \\<le> trace \\<rho> \\<and>\n                                     denote x2a \\<rho>\n                                     \\<in> carrier_mat d d;\n        well_com (While x1 x2a); \\<rho> \\<in> carrier_mat d d;\n        partial_density_operator \\<rho>\\<rbrakk>\n       \\<Longrightarrow> positive (denote (While x1 x2a) \\<rho>) \\<and>\n                         trace (denote (While x1 x2a) \\<rho>)\n                         \\<le> trace \\<rho> \\<and>\n                         denote (While x1 x2a) \\<rho> \\<in> carrier_mat d d", "case (While x1 x2a)"], ["proof (state)\nthis:\n  \\<lbrakk>well_com x2a; ?\\<rho> \\<in> carrier_mat d d;\n   partial_density_operator ?\\<rho>\\<rbrakk>\n  \\<Longrightarrow> positive (denote x2a ?\\<rho>) \\<and>\n                    trace (denote x2a ?\\<rho>) \\<le> trace ?\\<rho> \\<and>\n                    denote x2a ?\\<rho> \\<in> carrier_mat d d\n  well_com (While x1 x2a)\n  \\<rho> \\<in> carrier_mat d d\n  partial_density_operator \\<rho>\n\ngoal (1 subgoal):\n 1. \\<And>x1 x2a \\<rho>.\n       \\<lbrakk>\\<And>\\<rho>.\n                   \\<lbrakk>well_com x2a; \\<rho> \\<in> carrier_mat d d;\n                    partial_density_operator \\<rho>\\<rbrakk>\n                   \\<Longrightarrow> positive (denote x2a \\<rho>) \\<and>\n                                     trace (denote x2a \\<rho>)\n                                     \\<le> trace \\<rho> \\<and>\n                                     denote x2a \\<rho>\n                                     \\<in> carrier_mat d d;\n        well_com (While x1 x2a); \\<rho> \\<in> carrier_mat d d;\n        partial_density_operator \\<rho>\\<rbrakk>\n       \\<Longrightarrow> positive (denote (While x1 x2a) \\<rho>) \\<and>\n                         trace (denote (While x1 x2a) \\<rho>)\n                         \\<le> trace \\<rho> \\<and>\n                         denote (While x1 x2a) \\<rho> \\<in> carrier_mat d d", "then"], ["proof (chain)\npicking this:\n  \\<lbrakk>well_com x2a; ?\\<rho> \\<in> carrier_mat d d;\n   partial_density_operator ?\\<rho>\\<rbrakk>\n  \\<Longrightarrow> positive (denote x2a ?\\<rho>) \\<and>\n                    trace (denote x2a ?\\<rho>) \\<le> trace ?\\<rho> \\<and>\n                    denote x2a ?\\<rho> \\<in> carrier_mat d d\n  well_com (While x1 x2a)\n  \\<rho> \\<in> carrier_mat d d\n  partial_density_operator \\<rho>", "show ?case"], ["proof (prove)\nusing this:\n  \\<lbrakk>well_com x2a; ?\\<rho> \\<in> carrier_mat d d;\n   partial_density_operator ?\\<rho>\\<rbrakk>\n  \\<Longrightarrow> positive (denote x2a ?\\<rho>) \\<and>\n                    trace (denote x2a ?\\<rho>) \\<le> trace ?\\<rho> \\<and>\n                    denote x2a ?\\<rho> \\<in> carrier_mat d d\n  well_com (While x1 x2a)\n  \\<rho> \\<in> carrier_mat d d\n  partial_density_operator \\<rho>\n\ngoal (1 subgoal):\n 1. positive (denote (While x1 x2a) \\<rho>) \\<and>\n    trace (denote (While x1 x2a) \\<rho>) \\<le> trace \\<rho> \\<and>\n    denote (While x1 x2a) \\<rho> \\<in> carrier_mat d d", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<And>\\<rho>.\n                \\<lbrakk>well_com x2a; \\<rho> \\<in> carrier_mat d d;\n                 partial_density_operator \\<rho>\\<rbrakk>\n                \\<Longrightarrow> positive (denote x2a \\<rho>) \\<and>\n                                  trace (denote x2a \\<rho>)\n                                  \\<le> trace \\<rho> \\<and>\n                                  denote x2a \\<rho> \\<in> carrier_mat d d;\n     well_com (While x1 x2a); \\<rho> \\<in> carrier_mat d d;\n     partial_density_operator \\<rho>\\<rbrakk>\n    \\<Longrightarrow> positive (denote (While x1 x2a) \\<rho>) \\<and>\n                      trace (denote (While x1 x2a) \\<rho>)\n                      \\<le> trace \\<rho> \\<and>\n                      denote (While x1 x2a) \\<rho> \\<in> carrier_mat d d", "have \"adjoint (x1 0) * (x1 0) + adjoint (x1 1) * (x1 1) = 1\\<^sub>m d\""], ["proof (prove)\ngoal (1 subgoal):\n 1. adjoint (x1 0) * x1 0 + adjoint (x1 1) * x1 1 = 1\\<^sub>m d", "using measurement_id2 While"], ["proof (prove)\nusing this:\n  measurement ?d 2 ?M \\<Longrightarrow>\n  adjoint (?M 0) * ?M 0 + adjoint (?M 1) * ?M 1 = 1\\<^sub>m ?d\n  \\<lbrakk>well_com x2a; ?\\<rho> \\<in> carrier_mat d d;\n   partial_density_operator ?\\<rho>\\<rbrakk>\n  \\<Longrightarrow> positive (denote x2a ?\\<rho>) \\<and>\n                    trace (denote x2a ?\\<rho>) \\<le> trace ?\\<rho> \\<and>\n                    denote x2a ?\\<rho> \\<in> carrier_mat d d\n  well_com (While x1 x2a)\n  \\<rho> \\<in> carrier_mat d d\n  partial_density_operator \\<rho>\n\ngoal (1 subgoal):\n 1. adjoint (x1 0) * x1 0 + adjoint (x1 1) * x1 1 = 1\\<^sub>m d", "by auto"], ["proof (state)\nthis:\n  adjoint (x1 0) * x1 0 + adjoint (x1 1) * x1 1 = 1\\<^sub>m d\n\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<And>\\<rho>.\n                \\<lbrakk>well_com x2a; \\<rho> \\<in> carrier_mat d d;\n                 partial_density_operator \\<rho>\\<rbrakk>\n                \\<Longrightarrow> positive (denote x2a \\<rho>) \\<and>\n                                  trace (denote x2a \\<rho>)\n                                  \\<le> trace \\<rho> \\<and>\n                                  denote x2a \\<rho> \\<in> carrier_mat d d;\n     well_com (While x1 x2a); \\<rho> \\<in> carrier_mat d d;\n     partial_density_operator \\<rho>\\<rbrakk>\n    \\<Longrightarrow> positive (denote (While x1 x2a) \\<rho>) \\<and>\n                      trace (denote (While x1 x2a) \\<rho>)\n                      \\<le> trace \\<rho> \\<and>\n                      denote (While x1 x2a) \\<rho> \\<in> carrier_mat d d", "moreover"], ["proof (state)\nthis:\n  adjoint (x1 0) * x1 0 + adjoint (x1 1) * x1 1 = 1\\<^sub>m d\n\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<And>\\<rho>.\n                \\<lbrakk>well_com x2a; \\<rho> \\<in> carrier_mat d d;\n                 partial_density_operator \\<rho>\\<rbrakk>\n                \\<Longrightarrow> positive (denote x2a \\<rho>) \\<and>\n                                  trace (denote x2a \\<rho>)\n                                  \\<le> trace \\<rho> \\<and>\n                                  denote x2a \\<rho> \\<in> carrier_mat d d;\n     well_com (While x1 x2a); \\<rho> \\<in> carrier_mat d d;\n     partial_density_operator \\<rho>\\<rbrakk>\n    \\<Longrightarrow> positive (denote (While x1 x2a) \\<rho>) \\<and>\n                      trace (denote (While x1 x2a) \\<rho>)\n                      \\<le> trace \\<rho> \\<and>\n                      denote (While x1 x2a) \\<rho> \\<in> carrier_mat d d", "have \"(\\<And>\\<rho>. \\<rho> \\<in> carrier_mat d d \\<Longrightarrow> partial_density_operator \\<rho> \\<Longrightarrow> \n      positive (denote x2a \\<rho>) \\<and> trace (denote x2a \\<rho>) \\<le> trace \\<rho> \\<and> denote x2a \\<rho> \\<in> carrier_mat d d)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>\\<rho>.\n       \\<lbrakk>\\<rho> \\<in> carrier_mat d d;\n        partial_density_operator \\<rho>\\<rbrakk>\n       \\<Longrightarrow> positive (denote x2a \\<rho>) \\<and>\n                         trace (denote x2a \\<rho>) \\<le> trace \\<rho> \\<and>\n                         denote x2a \\<rho> \\<in> carrier_mat d d", "using While"], ["proof (prove)\nusing this:\n  \\<lbrakk>well_com x2a; ?\\<rho> \\<in> carrier_mat d d;\n   partial_density_operator ?\\<rho>\\<rbrakk>\n  \\<Longrightarrow> positive (denote x2a ?\\<rho>) \\<and>\n                    trace (denote x2a ?\\<rho>) \\<le> trace ?\\<rho> \\<and>\n                    denote x2a ?\\<rho> \\<in> carrier_mat d d\n  well_com (While x1 x2a)\n  \\<rho> \\<in> carrier_mat d d\n  partial_density_operator \\<rho>\n\ngoal (1 subgoal):\n 1. \\<And>\\<rho>.\n       \\<lbrakk>\\<rho> \\<in> carrier_mat d d;\n        partial_density_operator \\<rho>\\<rbrakk>\n       \\<Longrightarrow> positive (denote x2a \\<rho>) \\<and>\n                         trace (denote x2a \\<rho>) \\<le> trace \\<rho> \\<and>\n                         denote x2a \\<rho> \\<in> carrier_mat d d", "by fastforce"], ["proof (state)\nthis:\n  \\<lbrakk>?\\<rho> \\<in> carrier_mat d d;\n   partial_density_operator ?\\<rho>\\<rbrakk>\n  \\<Longrightarrow> positive (denote x2a ?\\<rho>) \\<and>\n                    trace (denote x2a ?\\<rho>) \\<le> trace ?\\<rho> \\<and>\n                    denote x2a ?\\<rho> \\<in> carrier_mat d d\n\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<And>\\<rho>.\n                \\<lbrakk>well_com x2a; \\<rho> \\<in> carrier_mat d d;\n                 partial_density_operator \\<rho>\\<rbrakk>\n                \\<Longrightarrow> positive (denote x2a \\<rho>) \\<and>\n                                  trace (denote x2a \\<rho>)\n                                  \\<le> trace \\<rho> \\<and>\n                                  denote x2a \\<rho> \\<in> carrier_mat d d;\n     well_com (While x1 x2a); \\<rho> \\<in> carrier_mat d d;\n     partial_density_operator \\<rho>\\<rbrakk>\n    \\<Longrightarrow> positive (denote (While x1 x2a) \\<rho>) \\<and>\n                      trace (denote (While x1 x2a) \\<rho>)\n                      \\<le> trace \\<rho> \\<and>\n                      denote (While x1 x2a) \\<rho> \\<in> carrier_mat d d", "moreover"], ["proof (state)\nthis:\n  \\<lbrakk>?\\<rho> \\<in> carrier_mat d d;\n   partial_density_operator ?\\<rho>\\<rbrakk>\n  \\<Longrightarrow> positive (denote x2a ?\\<rho>) \\<and>\n                    trace (denote x2a ?\\<rho>) \\<le> trace ?\\<rho> \\<and>\n                    denote x2a ?\\<rho> \\<in> carrier_mat d d\n\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<And>\\<rho>.\n                \\<lbrakk>well_com x2a; \\<rho> \\<in> carrier_mat d d;\n                 partial_density_operator \\<rho>\\<rbrakk>\n                \\<Longrightarrow> positive (denote x2a \\<rho>) \\<and>\n                                  trace (denote x2a \\<rho>)\n                                  \\<le> trace \\<rho> \\<and>\n                                  denote x2a \\<rho> \\<in> carrier_mat d d;\n     well_com (While x1 x2a); \\<rho> \\<in> carrier_mat d d;\n     partial_density_operator \\<rho>\\<rbrakk>\n    \\<Longrightarrow> positive (denote (While x1 x2a) \\<rho>) \\<and>\n                      trace (denote (While x1 x2a) \\<rho>)\n                      \\<le> trace \\<rho> \\<and>\n                      denote (While x1 x2a) \\<rho> \\<in> carrier_mat d d", "have \"x1 0 \\<in> carrier_mat d d \\<and> x1 1 \\<in> carrier_mat d d\""], ["proof (prove)\ngoal (1 subgoal):\n 1. x1 0 \\<in> carrier_mat d d \\<and> x1 1 \\<in> carrier_mat d d", "using measurement_dim While"], ["proof (prove)\nusing this:\n  \\<lbrakk>measurement ?d ?n ?M; ?k < ?n\\<rbrakk>\n  \\<Longrightarrow> ?M ?k \\<in> carrier_mat ?d ?d\n  \\<lbrakk>well_com x2a; ?\\<rho> \\<in> carrier_mat d d;\n   partial_density_operator ?\\<rho>\\<rbrakk>\n  \\<Longrightarrow> positive (denote x2a ?\\<rho>) \\<and>\n                    trace (denote x2a ?\\<rho>) \\<le> trace ?\\<rho> \\<and>\n                    denote x2a ?\\<rho> \\<in> carrier_mat d d\n  well_com (While x1 x2a)\n  \\<rho> \\<in> carrier_mat d d\n  partial_density_operator \\<rho>\n\ngoal (1 subgoal):\n 1. x1 0 \\<in> carrier_mat d d \\<and> x1 1 \\<in> carrier_mat d d", "by fastforce"], ["proof (state)\nthis:\n  x1 0 \\<in> carrier_mat d d \\<and> x1 1 \\<in> carrier_mat d d\n\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<And>\\<rho>.\n                \\<lbrakk>well_com x2a; \\<rho> \\<in> carrier_mat d d;\n                 partial_density_operator \\<rho>\\<rbrakk>\n                \\<Longrightarrow> positive (denote x2a \\<rho>) \\<and>\n                                  trace (denote x2a \\<rho>)\n                                  \\<le> trace \\<rho> \\<and>\n                                  denote x2a \\<rho> \\<in> carrier_mat d d;\n     well_com (While x1 x2a); \\<rho> \\<in> carrier_mat d d;\n     partial_density_operator \\<rho>\\<rbrakk>\n    \\<Longrightarrow> positive (denote (While x1 x2a) \\<rho>) \\<and>\n                      trace (denote (While x1 x2a) \\<rho>)\n                      \\<le> trace \\<rho> \\<and>\n                      denote (While x1 x2a) \\<rho> \\<in> carrier_mat d d", "ultimately"], ["proof (chain)\npicking this:\n  adjoint (x1 0) * x1 0 + adjoint (x1 1) * x1 1 = 1\\<^sub>m d\n  \\<lbrakk>?\\<rho> \\<in> carrier_mat d d;\n   partial_density_operator ?\\<rho>\\<rbrakk>\n  \\<Longrightarrow> positive (denote x2a ?\\<rho>) \\<and>\n                    trace (denote x2a ?\\<rho>) \\<le> trace ?\\<rho> \\<and>\n                    denote x2a ?\\<rho> \\<in> carrier_mat d d\n  x1 0 \\<in> carrier_mat d d \\<and> x1 1 \\<in> carrier_mat d d", "have \"denote_while (x1 0) (x1 1) (denote x2a) \\<rho> \\<in> carrier_mat d d \\<and> \n               positive (denote_while (x1 0) (x1 1) (denote x2a) \\<rho>) \\<and> \n               trace (denote_while (x1 0) (x1 1) (denote x2a) \\<rho>) \\<le> trace \\<rho>\""], ["proof (prove)\nusing this:\n  adjoint (x1 0) * x1 0 + adjoint (x1 1) * x1 1 = 1\\<^sub>m d\n  \\<lbrakk>?\\<rho> \\<in> carrier_mat d d;\n   partial_density_operator ?\\<rho>\\<rbrakk>\n  \\<Longrightarrow> positive (denote x2a ?\\<rho>) \\<and>\n                    trace (denote x2a ?\\<rho>) \\<le> trace ?\\<rho> \\<and>\n                    denote x2a ?\\<rho> \\<in> carrier_mat d d\n  x1 0 \\<in> carrier_mat d d \\<and> x1 1 \\<in> carrier_mat d d\n\ngoal (1 subgoal):\n 1. denote_while (x1 0) (x1 1) (denote x2a) \\<rho>\n    \\<in> carrier_mat d d \\<and>\n    positive (denote_while (x1 0) (x1 1) (denote x2a) \\<rho>) \\<and>\n    trace (denote_while (x1 0) (x1 1) (denote x2a) \\<rho>)\n    \\<le> trace \\<rho>", "using denote_while_dim_positive[of \"x1 0\" \"x1 1\" \"denote x2a\" \"\\<rho>\"] While"], ["proof (prove)\nusing this:\n  adjoint (x1 0) * x1 0 + adjoint (x1 1) * x1 1 = 1\\<^sub>m d\n  \\<lbrakk>?\\<rho> \\<in> carrier_mat d d;\n   partial_density_operator ?\\<rho>\\<rbrakk>\n  \\<Longrightarrow> positive (denote x2a ?\\<rho>) \\<and>\n                    trace (denote x2a ?\\<rho>) \\<le> trace ?\\<rho> \\<and>\n                    denote x2a ?\\<rho> \\<in> carrier_mat d d\n  x1 0 \\<in> carrier_mat d d \\<and> x1 1 \\<in> carrier_mat d d\n  \\<lbrakk>x1 0 \\<in> carrier_mat d d; x1 1 \\<in> carrier_mat d d;\n   adjoint (x1 0) * x1 0 + adjoint (x1 1) * x1 1 = 1\\<^sub>m d;\n   \\<And>\\<rho>.\n      \\<lbrakk>\\<rho> \\<in> carrier_mat d d;\n       partial_density_operator \\<rho>\\<rbrakk>\n      \\<Longrightarrow> positive (denote x2a \\<rho>) \\<and>\n                        trace (denote x2a \\<rho>) \\<le> trace \\<rho> \\<and>\n                        denote x2a \\<rho> \\<in> carrier_mat d d;\n   partial_density_operator \\<rho>; \\<rho> \\<in> carrier_mat d d\\<rbrakk>\n  \\<Longrightarrow> denote_while (x1 0) (x1 1) (denote x2a) \\<rho>\n                    \\<in> carrier_mat d d \\<and>\n                    positive\n                     (denote_while (x1 0) (x1 1) (denote x2a) \\<rho>) \\<and>\n                    trace (denote_while (x1 0) (x1 1) (denote x2a) \\<rho>)\n                    \\<le> trace \\<rho>\n  \\<lbrakk>well_com x2a; ?\\<rho> \\<in> carrier_mat d d;\n   partial_density_operator ?\\<rho>\\<rbrakk>\n  \\<Longrightarrow> positive (denote x2a ?\\<rho>) \\<and>\n                    trace (denote x2a ?\\<rho>) \\<le> trace ?\\<rho> \\<and>\n                    denote x2a ?\\<rho> \\<in> carrier_mat d d\n  well_com (While x1 x2a)\n  \\<rho> \\<in> carrier_mat d d\n  partial_density_operator \\<rho>\n\ngoal (1 subgoal):\n 1. denote_while (x1 0) (x1 1) (denote x2a) \\<rho>\n    \\<in> carrier_mat d d \\<and>\n    positive (denote_while (x1 0) (x1 1) (denote x2a) \\<rho>) \\<and>\n    trace (denote_while (x1 0) (x1 1) (denote x2a) \\<rho>)\n    \\<le> trace \\<rho>", "by fastforce"], ["proof (state)\nthis:\n  denote_while (x1 0) (x1 1) (denote x2a) \\<rho>\n  \\<in> carrier_mat d d \\<and>\n  positive (denote_while (x1 0) (x1 1) (denote x2a) \\<rho>) \\<and>\n  trace (denote_while (x1 0) (x1 1) (denote x2a) \\<rho>) \\<le> trace \\<rho>\n\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<And>\\<rho>.\n                \\<lbrakk>well_com x2a; \\<rho> \\<in> carrier_mat d d;\n                 partial_density_operator \\<rho>\\<rbrakk>\n                \\<Longrightarrow> positive (denote x2a \\<rho>) \\<and>\n                                  trace (denote x2a \\<rho>)\n                                  \\<le> trace \\<rho> \\<and>\n                                  denote x2a \\<rho> \\<in> carrier_mat d d;\n     well_com (While x1 x2a); \\<rho> \\<in> carrier_mat d d;\n     partial_density_operator \\<rho>\\<rbrakk>\n    \\<Longrightarrow> positive (denote (While x1 x2a) \\<rho>) \\<and>\n                      trace (denote (While x1 x2a) \\<rho>)\n                      \\<le> trace \\<rho> \\<and>\n                      denote (While x1 x2a) \\<rho> \\<in> carrier_mat d d", "then"], ["proof (chain)\npicking this:\n  denote_while (x1 0) (x1 1) (denote x2a) \\<rho>\n  \\<in> carrier_mat d d \\<and>\n  positive (denote_while (x1 0) (x1 1) (denote x2a) \\<rho>) \\<and>\n  trace (denote_while (x1 0) (x1 1) (denote x2a) \\<rho>) \\<le> trace \\<rho>", "show ?thesis"], ["proof (prove)\nusing this:\n  denote_while (x1 0) (x1 1) (denote x2a) \\<rho>\n  \\<in> carrier_mat d d \\<and>\n  positive (denote_while (x1 0) (x1 1) (denote x2a) \\<rho>) \\<and>\n  trace (denote_while (x1 0) (x1 1) (denote x2a) \\<rho>) \\<le> trace \\<rho>\n\ngoal (1 subgoal):\n 1. positive (denote (While x1 x2a) \\<rho>) \\<and>\n    trace (denote (While x1 x2a) \\<rho>) \\<le> trace \\<rho> \\<and>\n    denote (While x1 x2a) \\<rho> \\<in> carrier_mat d d", "by auto"], ["proof (state)\nthis:\n  positive (denote (While x1 x2a) \\<rho>) \\<and>\n  trace (denote (While x1 x2a) \\<rho>) \\<le> trace \\<rho> \\<and>\n  denote (While x1 x2a) \\<rho> \\<in> carrier_mat d d\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  positive (denote (While x1 x2a) \\<rho>) \\<and>\n  trace (denote (While x1 x2a) \\<rho>) \\<le> trace \\<rho> \\<and>\n  denote (While x1 x2a) \\<rho> \\<in> carrier_mat d d\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma denote_dim_pdo:\n  \"well_com S \\<Longrightarrow> \\<rho> \\<in> carrier_mat d d \\<Longrightarrow> partial_density_operator \\<rho> \n   \\<Longrightarrow> (denote S \\<rho> \\<in> carrier_mat d d) \\<and> (partial_density_operator (denote S \\<rho>))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>well_com S; \\<rho> \\<in> carrier_mat d d;\n     partial_density_operator \\<rho>\\<rbrakk>\n    \\<Longrightarrow> denote S \\<rho> \\<in> carrier_mat d d \\<and>\n                      partial_density_operator (denote S \\<rho>)", "using denote_positive_trace_dim"], ["proof (prove)\nusing this:\n  \\<lbrakk>well_com ?S; ?\\<rho> \\<in> carrier_mat d d;\n   partial_density_operator ?\\<rho>\\<rbrakk>\n  \\<Longrightarrow> positive (denote ?S ?\\<rho>) \\<and>\n                    trace (denote ?S ?\\<rho>) \\<le> trace ?\\<rho> \\<and>\n                    denote ?S ?\\<rho> \\<in> carrier_mat d d\n\ngoal (1 subgoal):\n 1. \\<lbrakk>well_com S; \\<rho> \\<in> carrier_mat d d;\n     partial_density_operator \\<rho>\\<rbrakk>\n    \\<Longrightarrow> denote S \\<rho> \\<in> carrier_mat d d \\<and>\n                      partial_density_operator (denote S \\<rho>)", "unfolding partial_density_operator_def"], ["proof (prove)\nusing this:\n  \\<lbrakk>well_com ?S; ?\\<rho> \\<in> carrier_mat d d;\n   positive ?\\<rho> \\<and> trace ?\\<rho> \\<le> 1\\<rbrakk>\n  \\<Longrightarrow> positive (denote ?S ?\\<rho>) \\<and>\n                    trace (denote ?S ?\\<rho>) \\<le> trace ?\\<rho> \\<and>\n                    denote ?S ?\\<rho> \\<in> carrier_mat d d\n\ngoal (1 subgoal):\n 1. \\<lbrakk>well_com S; \\<rho> \\<in> carrier_mat d d;\n     positive \\<rho> \\<and> trace \\<rho> \\<le> 1\\<rbrakk>\n    \\<Longrightarrow> denote S \\<rho> \\<in> carrier_mat d d \\<and>\n                      positive (denote S \\<rho>) \\<and>\n                      trace (denote S \\<rho>) \\<le> 1", "by fastforce"], ["", "lemma denote_dim:\n  \"well_com S \\<Longrightarrow> \\<rho> \\<in> carrier_mat d d \\<Longrightarrow> partial_density_operator \\<rho> \n   \\<Longrightarrow> (denote S \\<rho> \\<in> carrier_mat d d)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>well_com S; \\<rho> \\<in> carrier_mat d d;\n     partial_density_operator \\<rho>\\<rbrakk>\n    \\<Longrightarrow> denote S \\<rho> \\<in> carrier_mat d d", "using denote_positive_trace_dim"], ["proof (prove)\nusing this:\n  \\<lbrakk>well_com ?S; ?\\<rho> \\<in> carrier_mat d d;\n   partial_density_operator ?\\<rho>\\<rbrakk>\n  \\<Longrightarrow> positive (denote ?S ?\\<rho>) \\<and>\n                    trace (denote ?S ?\\<rho>) \\<le> trace ?\\<rho> \\<and>\n                    denote ?S ?\\<rho> \\<in> carrier_mat d d\n\ngoal (1 subgoal):\n 1. \\<lbrakk>well_com S; \\<rho> \\<in> carrier_mat d d;\n     partial_density_operator \\<rho>\\<rbrakk>\n    \\<Longrightarrow> denote S \\<rho> \\<in> carrier_mat d d", "by auto"], ["", "lemma denote_trace:\n  \"well_com S \\<Longrightarrow> \\<rho> \\<in> carrier_mat d d \\<Longrightarrow> partial_density_operator \\<rho> \n   \\<Longrightarrow> trace (denote S \\<rho>) \\<le> trace \\<rho>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>well_com S; \\<rho> \\<in> carrier_mat d d;\n     partial_density_operator \\<rho>\\<rbrakk>\n    \\<Longrightarrow> trace (denote S \\<rho>) \\<le> trace \\<rho>", "using denote_positive_trace_dim"], ["proof (prove)\nusing this:\n  \\<lbrakk>well_com ?S; ?\\<rho> \\<in> carrier_mat d d;\n   partial_density_operator ?\\<rho>\\<rbrakk>\n  \\<Longrightarrow> positive (denote ?S ?\\<rho>) \\<and>\n                    trace (denote ?S ?\\<rho>) \\<le> trace ?\\<rho> \\<and>\n                    denote ?S ?\\<rho> \\<in> carrier_mat d d\n\ngoal (1 subgoal):\n 1. \\<lbrakk>well_com S; \\<rho> \\<in> carrier_mat d d;\n     partial_density_operator \\<rho>\\<rbrakk>\n    \\<Longrightarrow> trace (denote S \\<rho>) \\<le> trace \\<rho>", "by auto"], ["", "lemma denote_partial_density_operator:\n  assumes \"well_com S\" \"partial_density_operator \\<rho>\" \"\\<rho> \\<in> carrier_mat d d\"\n  shows \"partial_density_operator (denote S \\<rho>)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. partial_density_operator (denote S \\<rho>)", "using assms denote_positive_trace_dim"], ["proof (prove)\nusing this:\n  well_com S\n  partial_density_operator \\<rho>\n  \\<rho> \\<in> carrier_mat d d\n  \\<lbrakk>well_com ?S; ?\\<rho> \\<in> carrier_mat d d;\n   partial_density_operator ?\\<rho>\\<rbrakk>\n  \\<Longrightarrow> positive (denote ?S ?\\<rho>) \\<and>\n                    trace (denote ?S ?\\<rho>) \\<le> trace ?\\<rho> \\<and>\n                    denote ?S ?\\<rho> \\<in> carrier_mat d d\n\ngoal (1 subgoal):\n 1. partial_density_operator (denote S \\<rho>)", "unfolding partial_density_operator_def"], ["proof (prove)\nusing this:\n  well_com S\n  positive \\<rho> \\<and> trace \\<rho> \\<le> 1\n  \\<rho> \\<in> carrier_mat d d\n  \\<lbrakk>well_com ?S; ?\\<rho> \\<in> carrier_mat d d;\n   positive ?\\<rho> \\<and> trace ?\\<rho> \\<le> 1\\<rbrakk>\n  \\<Longrightarrow> positive (denote ?S ?\\<rho>) \\<and>\n                    trace (denote ?S ?\\<rho>) \\<le> trace ?\\<rho> \\<and>\n                    denote ?S ?\\<rho> \\<in> carrier_mat d d\n\ngoal (1 subgoal):\n 1. positive (denote S \\<rho>) \\<and> trace (denote S \\<rho>) \\<le> 1", "using dual_order.trans"], ["proof (prove)\nusing this:\n  well_com S\n  positive \\<rho> \\<and> trace \\<rho> \\<le> 1\n  \\<rho> \\<in> carrier_mat d d\n  \\<lbrakk>well_com ?S; ?\\<rho> \\<in> carrier_mat d d;\n   positive ?\\<rho> \\<and> trace ?\\<rho> \\<le> 1\\<rbrakk>\n  \\<Longrightarrow> positive (denote ?S ?\\<rho>) \\<and>\n                    trace (denote ?S ?\\<rho>) \\<le> trace ?\\<rho> \\<and>\n                    denote ?S ?\\<rho> \\<in> carrier_mat d d\n  \\<lbrakk>?b \\<le> ?a; ?c \\<le> ?b\\<rbrakk> \\<Longrightarrow> ?c \\<le> ?a\n\ngoal (1 subgoal):\n 1. positive (denote S \\<rho>) \\<and> trace (denote S \\<rho>) \\<le> 1", "by blast"], ["", "lemma denote_while_n_sum_mat_seq:\n  assumes \"\\<rho> \\<in> carrier_mat d d\" and\n    \"x1 0 \\<in> carrier_mat d d\" and\n    \"x1 1 \\<in> carrier_mat d d\" and\n    \"partial_density_operator \\<rho>\" and\n    wc: \"well_com x2\" and mea: \"measurement d 2 x1\"  \n  shows \"matrix_seq d (matrix_sum d (\\<lambda>n. denote_while_n (x1 0) (x1 1) (denote x2) n \\<rho>))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. matrix_seq d\n     (matrix_sum d\n       (\\<lambda>n. denote_while_n (x1 0) (x1 1) (denote x2) n \\<rho>))", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. matrix_seq d\n     (matrix_sum d\n       (\\<lambda>n. denote_while_n (x1 0) (x1 1) (denote x2) n \\<rho>))", "let ?A = \"x1 0\" and ?B = \"x1 1\""], ["proof (state)\ngoal (1 subgoal):\n 1. matrix_seq d\n     (matrix_sum d\n       (\\<lambda>n. denote_while_n (x1 0) (x1 1) (denote x2) n \\<rho>))", "have dx2:\"\\<And>\\<rho>. \\<rho> \\<in> carrier_mat d d \\<Longrightarrow> partial_density_operator \\<rho> \\<Longrightarrow>\n            positive ((denote x2) \\<rho>) \\<and> trace ((denote x2) \\<rho>) \\<le> trace \\<rho> \\<and> (denote x2) \\<rho> \\<in> carrier_mat d d\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>\\<rho>.\n       \\<lbrakk>\\<rho> \\<in> carrier_mat d d;\n        partial_density_operator \\<rho>\\<rbrakk>\n       \\<Longrightarrow> positive (denote x2 \\<rho>) \\<and>\n                         trace (denote x2 \\<rho>) \\<le> trace \\<rho> \\<and>\n                         denote x2 \\<rho> \\<in> carrier_mat d d", "using denote_positive_trace_dim wc"], ["proof (prove)\nusing this:\n  \\<lbrakk>well_com ?S; ?\\<rho> \\<in> carrier_mat d d;\n   partial_density_operator ?\\<rho>\\<rbrakk>\n  \\<Longrightarrow> positive (denote ?S ?\\<rho>) \\<and>\n                    trace (denote ?S ?\\<rho>) \\<le> trace ?\\<rho> \\<and>\n                    denote ?S ?\\<rho> \\<in> carrier_mat d d\n  well_com x2\n\ngoal (1 subgoal):\n 1. \\<And>\\<rho>.\n       \\<lbrakk>\\<rho> \\<in> carrier_mat d d;\n        partial_density_operator \\<rho>\\<rbrakk>\n       \\<Longrightarrow> positive (denote x2 \\<rho>) \\<and>\n                         trace (denote x2 \\<rho>) \\<le> trace \\<rho> \\<and>\n                         denote x2 \\<rho> \\<in> carrier_mat d d", "by auto"], ["proof (state)\nthis:\n  \\<lbrakk>?\\<rho> \\<in> carrier_mat d d;\n   partial_density_operator ?\\<rho>\\<rbrakk>\n  \\<Longrightarrow> positive (denote x2 ?\\<rho>) \\<and>\n                    trace (denote x2 ?\\<rho>) \\<le> trace ?\\<rho> \\<and>\n                    denote x2 ?\\<rho> \\<in> carrier_mat d d\n\ngoal (1 subgoal):\n 1. matrix_seq d\n     (matrix_sum d\n       (\\<lambda>n. denote_while_n (x1 0) (x1 1) (denote x2) n \\<rho>))", "have lo1: \"adjoint ?A * ?A + adjoint ?B * ?B = 1\\<^sub>m d\""], ["proof (prove)\ngoal (1 subgoal):\n 1. adjoint (x1 0) * x1 0 + adjoint (x1 1) * x1 1 = 1\\<^sub>m d", "using measurement_id2 assms"], ["proof (prove)\nusing this:\n  measurement ?d 2 ?M \\<Longrightarrow>\n  adjoint (?M 0) * ?M 0 + adjoint (?M 1) * ?M 1 = 1\\<^sub>m ?d\n  \\<rho> \\<in> carrier_mat d d\n  x1 0 \\<in> carrier_mat d d\n  x1 1 \\<in> carrier_mat d d\n  partial_density_operator \\<rho>\n  well_com x2\n  measurement d 2 x1\n\ngoal (1 subgoal):\n 1. adjoint (x1 0) * x1 0 + adjoint (x1 1) * x1 1 = 1\\<^sub>m d", "by auto"], ["proof (state)\nthis:\n  adjoint (x1 0) * x1 0 + adjoint (x1 1) * x1 1 = 1\\<^sub>m d\n\ngoal (1 subgoal):\n 1. matrix_seq d\n     (matrix_sum d\n       (\\<lambda>n. denote_while_n (x1 0) (x1 1) (denote x2) n \\<rho>))", "have \"\\<forall>n. matrix_sum d (\\<lambda>n. denote_while_n (x1 0) (x1 1) (denote x2) n \\<rho>) n \\<in> carrier_mat d d\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>n.\n       matrix_sum d\n        (\\<lambda>n. denote_while_n (x1 0) (x1 1) (denote x2) n \\<rho>) n\n       \\<in> carrier_mat d d", "using assms dx2"], ["proof (prove)\nusing this:\n  \\<rho> \\<in> carrier_mat d d\n  x1 0 \\<in> carrier_mat d d\n  x1 1 \\<in> carrier_mat d d\n  partial_density_operator \\<rho>\n  well_com x2\n  measurement d 2 x1\n  \\<lbrakk>?\\<rho> \\<in> carrier_mat d d;\n   partial_density_operator ?\\<rho>\\<rbrakk>\n  \\<Longrightarrow> positive (denote x2 ?\\<rho>) \\<and>\n                    trace (denote x2 ?\\<rho>) \\<le> trace ?\\<rho> \\<and>\n                    denote x2 ?\\<rho> \\<in> carrier_mat d d\n\ngoal (1 subgoal):\n 1. \\<forall>n.\n       matrix_sum d\n        (\\<lambda>n. denote_while_n (x1 0) (x1 1) (denote x2) n \\<rho>) n\n       \\<in> carrier_mat d d", "by (metis denote_while_n_dim matrix_sum_dim)"], ["proof (state)\nthis:\n  \\<forall>n.\n     matrix_sum d\n      (\\<lambda>n. denote_while_n (x1 0) (x1 1) (denote x2) n \\<rho>) n\n     \\<in> carrier_mat d d\n\ngoal (1 subgoal):\n 1. matrix_seq d\n     (matrix_sum d\n       (\\<lambda>n. denote_while_n (x1 0) (x1 1) (denote x2) n \\<rho>))", "moreover"], ["proof (state)\nthis:\n  \\<forall>n.\n     matrix_sum d\n      (\\<lambda>n. denote_while_n (x1 0) (x1 1) (denote x2) n \\<rho>) n\n     \\<in> carrier_mat d d\n\ngoal (1 subgoal):\n 1. matrix_seq d\n     (matrix_sum d\n       (\\<lambda>n. denote_while_n (x1 0) (x1 1) (denote x2) n \\<rho>))", "have \"(\\<forall>n. partial_density_operator (matrix_sum d (\\<lambda>n. denote_while_n (x1 0) (x1 1) (denote x2) n \\<rho>) n))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>n.\n       partial_density_operator\n        (matrix_sum d\n          (\\<lambda>n. denote_while_n (x1 0) (x1 1) (denote x2) n \\<rho>) n)", "using assms dx2 lo1"], ["proof (prove)\nusing this:\n  \\<rho> \\<in> carrier_mat d d\n  x1 0 \\<in> carrier_mat d d\n  x1 1 \\<in> carrier_mat d d\n  partial_density_operator \\<rho>\n  well_com x2\n  measurement d 2 x1\n  \\<lbrakk>?\\<rho> \\<in> carrier_mat d d;\n   partial_density_operator ?\\<rho>\\<rbrakk>\n  \\<Longrightarrow> positive (denote x2 ?\\<rho>) \\<and>\n                    trace (denote x2 ?\\<rho>) \\<le> trace ?\\<rho> \\<and>\n                    denote x2 ?\\<rho> \\<in> carrier_mat d d\n  adjoint (x1 0) * x1 0 + adjoint (x1 1) * x1 1 = 1\\<^sub>m d\n\ngoal (1 subgoal):\n 1. \\<forall>n.\n       partial_density_operator\n        (matrix_sum d\n          (\\<lambda>n. denote_while_n (x1 0) (x1 1) (denote x2) n \\<rho>) n)", "by (metis denote_while_n_sum_partial_density)"], ["proof (state)\nthis:\n  \\<forall>n.\n     partial_density_operator\n      (matrix_sum d\n        (\\<lambda>n. denote_while_n (x1 0) (x1 1) (denote x2) n \\<rho>) n)\n\ngoal (1 subgoal):\n 1. matrix_seq d\n     (matrix_sum d\n       (\\<lambda>n. denote_while_n (x1 0) (x1 1) (denote x2) n \\<rho>))", "moreover"], ["proof (state)\nthis:\n  \\<forall>n.\n     partial_density_operator\n      (matrix_sum d\n        (\\<lambda>n. denote_while_n (x1 0) (x1 1) (denote x2) n \\<rho>) n)\n\ngoal (1 subgoal):\n 1. matrix_seq d\n     (matrix_sum d\n       (\\<lambda>n. denote_while_n (x1 0) (x1 1) (denote x2) n \\<rho>))", "have \"(\\<forall>n. matrix_sum d (\\<lambda>n. denote_while_n (x1 0) (x1 1) (denote x2) n \\<rho>) n \\<le>\\<^sub>L matrix_sum d (\\<lambda>n. denote_while_n (x1 0) (x1 1) (denote x2) n \\<rho>) (Suc n))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>n.\n       matrix_sum d\n        (\\<lambda>n. denote_while_n (x1 0) (x1 1) (denote x2) n \\<rho>)\n        n \\<le>\\<^sub>L\n       matrix_sum d\n        (\\<lambda>n. denote_while_n (x1 0) (x1 1) (denote x2) n \\<rho>)\n        (Suc n)", "using assms dx2 lo1"], ["proof (prove)\nusing this:\n  \\<rho> \\<in> carrier_mat d d\n  x1 0 \\<in> carrier_mat d d\n  x1 1 \\<in> carrier_mat d d\n  partial_density_operator \\<rho>\n  well_com x2\n  measurement d 2 x1\n  \\<lbrakk>?\\<rho> \\<in> carrier_mat d d;\n   partial_density_operator ?\\<rho>\\<rbrakk>\n  \\<Longrightarrow> positive (denote x2 ?\\<rho>) \\<and>\n                    trace (denote x2 ?\\<rho>) \\<le> trace ?\\<rho> \\<and>\n                    denote x2 ?\\<rho> \\<in> carrier_mat d d\n  adjoint (x1 0) * x1 0 + adjoint (x1 1) * x1 1 = 1\\<^sub>m d\n\ngoal (1 subgoal):\n 1. \\<forall>n.\n       matrix_sum d\n        (\\<lambda>n. denote_while_n (x1 0) (x1 1) (denote x2) n \\<rho>)\n        n \\<le>\\<^sub>L\n       matrix_sum d\n        (\\<lambda>n. denote_while_n (x1 0) (x1 1) (denote x2) n \\<rho>)\n        (Suc n)", "by (metis denote_while_n_sum_lowner_le)"], ["proof (state)\nthis:\n  \\<forall>n.\n     matrix_sum d\n      (\\<lambda>n. denote_while_n (x1 0) (x1 1) (denote x2) n \\<rho>)\n      n \\<le>\\<^sub>L\n     matrix_sum d\n      (\\<lambda>n. denote_while_n (x1 0) (x1 1) (denote x2) n \\<rho>)\n      (Suc n)\n\ngoal (1 subgoal):\n 1. matrix_seq d\n     (matrix_sum d\n       (\\<lambda>n. denote_while_n (x1 0) (x1 1) (denote x2) n \\<rho>))", "ultimately"], ["proof (chain)\npicking this:\n  \\<forall>n.\n     matrix_sum d\n      (\\<lambda>n. denote_while_n (x1 0) (x1 1) (denote x2) n \\<rho>) n\n     \\<in> carrier_mat d d\n  \\<forall>n.\n     partial_density_operator\n      (matrix_sum d\n        (\\<lambda>n. denote_while_n (x1 0) (x1 1) (denote x2) n \\<rho>) n)\n  \\<forall>n.\n     matrix_sum d\n      (\\<lambda>n. denote_while_n (x1 0) (x1 1) (denote x2) n \\<rho>)\n      n \\<le>\\<^sub>L\n     matrix_sum d\n      (\\<lambda>n. denote_while_n (x1 0) (x1 1) (denote x2) n \\<rho>)\n      (Suc n)", "show ?thesis"], ["proof (prove)\nusing this:\n  \\<forall>n.\n     matrix_sum d\n      (\\<lambda>n. denote_while_n (x1 0) (x1 1) (denote x2) n \\<rho>) n\n     \\<in> carrier_mat d d\n  \\<forall>n.\n     partial_density_operator\n      (matrix_sum d\n        (\\<lambda>n. denote_while_n (x1 0) (x1 1) (denote x2) n \\<rho>) n)\n  \\<forall>n.\n     matrix_sum d\n      (\\<lambda>n. denote_while_n (x1 0) (x1 1) (denote x2) n \\<rho>)\n      n \\<le>\\<^sub>L\n     matrix_sum d\n      (\\<lambda>n. denote_while_n (x1 0) (x1 1) (denote x2) n \\<rho>)\n      (Suc n)\n\ngoal (1 subgoal):\n 1. matrix_seq d\n     (matrix_sum d\n       (\\<lambda>n. denote_while_n (x1 0) (x1 1) (denote x2) n \\<rho>))", "unfolding matrix_seq_def"], ["proof (prove)\nusing this:\n  \\<forall>n.\n     matrix_sum d\n      (\\<lambda>n. denote_while_n (x1 0) (x1 1) (denote x2) n \\<rho>) n\n     \\<in> carrier_mat d d\n  \\<forall>n.\n     partial_density_operator\n      (matrix_sum d\n        (\\<lambda>n. denote_while_n (x1 0) (x1 1) (denote x2) n \\<rho>) n)\n  \\<forall>n.\n     matrix_sum d\n      (\\<lambda>n. denote_while_n (x1 0) (x1 1) (denote x2) n \\<rho>)\n      n \\<le>\\<^sub>L\n     matrix_sum d\n      (\\<lambda>n. denote_while_n (x1 0) (x1 1) (denote x2) n \\<rho>)\n      (Suc n)\n\ngoal (1 subgoal):\n 1. (\\<forall>n.\n        matrix_sum d\n         (\\<lambda>n. denote_while_n (x1 0) (x1 1) (denote x2) n \\<rho>) n\n        \\<in> carrier_mat d d) \\<and>\n    (\\<forall>n.\n        partial_density_operator\n         (matrix_sum d\n           (\\<lambda>n. denote_while_n (x1 0) (x1 1) (denote x2) n \\<rho>)\n           n)) \\<and>\n    (\\<forall>n.\n        matrix_sum d\n         (\\<lambda>n. denote_while_n (x1 0) (x1 1) (denote x2) n \\<rho>)\n         n \\<le>\\<^sub>L\n        matrix_sum d\n         (\\<lambda>n. denote_while_n (x1 0) (x1 1) (denote x2) n \\<rho>)\n         (Suc n))", "by auto"], ["proof (state)\nthis:\n  matrix_seq d\n   (matrix_sum d\n     (\\<lambda>n. denote_while_n (x1 0) (x1 1) (denote x2) n \\<rho>))\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma denote_while_n_add:\n  assumes M0: \"x1 0 \\<in> carrier_mat d d\" and\n    M1: \"x1 1 \\<in> carrier_mat d d\" and\n    wc: \"well_com x2\" and mea: \"measurement d 2 x1\" and\n    DS: \"(\\<And>\\<rho>\\<^sub>1 \\<rho>\\<^sub>2. \\<rho>\\<^sub>1 \\<in> carrier_mat d d \\<Longrightarrow> \\<rho>\\<^sub>2 \\<in> carrier_mat d d \\<Longrightarrow> partial_density_operator \\<rho>\\<^sub>1 \\<Longrightarrow> \n      partial_density_operator \\<rho>\\<^sub>2 \\<Longrightarrow> trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) \\<le> 1 \\<Longrightarrow> denote x2 (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) = denote x2 \\<rho>\\<^sub>1 + denote x2 \\<rho>\\<^sub>2)\"\n  shows \"\\<rho>\\<^sub>1 \\<in> carrier_mat d d \\<Longrightarrow> \\<rho>\\<^sub>2 \\<in> carrier_mat d d \\<Longrightarrow> partial_density_operator \\<rho>\\<^sub>1 \\<Longrightarrow> partial_density_operator \\<rho>\\<^sub>2 \\<Longrightarrow> trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) \\<le> 1 \\<Longrightarrow> \n    denote_while_n (x1 0) (x1 1) (denote x2) k (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) = denote_while_n (x1 0) (x1 1) (denote x2) k \\<rho>\\<^sub>1 + denote_while_n (x1 0) (x1 1) (denote x2) k \\<rho>\\<^sub>2\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n     \\<rho>\\<^sub>2 \\<in> carrier_mat d d;\n     partial_density_operator \\<rho>\\<^sub>1;\n     partial_density_operator \\<rho>\\<^sub>2;\n     trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) \\<le> 1\\<rbrakk>\n    \\<Longrightarrow> denote_while_n (x1 0) (x1 1) (denote x2) k\n                       (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) =\n                      denote_while_n (x1 0) (x1 1) (denote x2) k\n                       \\<rho>\\<^sub>1 +\n                      denote_while_n (x1 0) (x1 1) (denote x2) k\n                       \\<rho>\\<^sub>2", "proof (auto, induct k arbitrary: \\<rho>\\<^sub>1 \\<rho>\\<^sub>2)"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>\\<rho>\\<^sub>1 \\<rho>\\<^sub>2.\n       \\<lbrakk>\\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n        \\<rho>\\<^sub>2 \\<in> carrier_mat d d;\n        partial_density_operator \\<rho>\\<^sub>1;\n        partial_density_operator \\<rho>\\<^sub>2;\n        Im (trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2)) = 0;\n        Re (trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2)) \\<le> 1\\<rbrakk>\n       \\<Longrightarrow> x1 0 *\n                         denote_while_n_iter (x1 0) (x1 (Suc 0)) (denote x2)\n                          0 (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) *\n                         adjoint (x1 0) =\n                         x1 0 *\n                         denote_while_n_iter (x1 0) (x1 (Suc 0)) (denote x2)\n                          0 \\<rho>\\<^sub>1 *\n                         adjoint (x1 0) +\n                         x1 0 *\n                         denote_while_n_iter (x1 0) (x1 (Suc 0)) (denote x2)\n                          0 \\<rho>\\<^sub>2 *\n                         adjoint (x1 0)\n 2. \\<And>k \\<rho>\\<^sub>1 \\<rho>\\<^sub>2.\n       \\<lbrakk>\\<And>\\<rho>\\<^sub>1 \\<rho>\\<^sub>2.\n                   \\<lbrakk>\\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n                    \\<rho>\\<^sub>2 \\<in> carrier_mat d d;\n                    partial_density_operator \\<rho>\\<^sub>1;\n                    partial_density_operator \\<rho>\\<^sub>2;\n                    Im (trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2)) = 0;\n                    Re (trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2))\n                    \\<le> 1\\<rbrakk>\n                   \\<Longrightarrow> x1 0 *\n                                     denote_while_n_iter (x1 0) (x1 (Suc 0))\n(denote x2) k (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) *\n                                     adjoint (x1 0) =\n                                     x1 0 *\n                                     denote_while_n_iter (x1 0) (x1 (Suc 0))\n(denote x2) k \\<rho>\\<^sub>1 *\n                                     adjoint (x1 0) +\n                                     x1 0 *\n                                     denote_while_n_iter (x1 0) (x1 (Suc 0))\n(denote x2) k \\<rho>\\<^sub>2 *\n                                     adjoint (x1 0);\n        \\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n        \\<rho>\\<^sub>2 \\<in> carrier_mat d d;\n        partial_density_operator \\<rho>\\<^sub>1;\n        partial_density_operator \\<rho>\\<^sub>2;\n        Im (trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2)) = 0;\n        Re (trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2)) \\<le> 1\\<rbrakk>\n       \\<Longrightarrow> x1 0 *\n                         denote_while_n_iter (x1 0) (x1 (Suc 0)) (denote x2)\n                          (Suc k) (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) *\n                         adjoint (x1 0) =\n                         x1 0 *\n                         denote_while_n_iter (x1 0) (x1 (Suc 0)) (denote x2)\n                          (Suc k) \\<rho>\\<^sub>1 *\n                         adjoint (x1 0) +\n                         x1 0 *\n                         denote_while_n_iter (x1 0) (x1 (Suc 0)) (denote x2)\n                          (Suc k) \\<rho>\\<^sub>2 *\n                         adjoint (x1 0)", "case 0"], ["proof (state)\nthis:\n  \\<rho>\\<^sub>1 \\<in> carrier_mat d d\n  \\<rho>\\<^sub>2 \\<in> carrier_mat d d\n  partial_density_operator \\<rho>\\<^sub>1\n  partial_density_operator \\<rho>\\<^sub>2\n  Im (trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2)) = 0\n  Re (trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2)) \\<le> 1\n\ngoal (2 subgoals):\n 1. \\<And>\\<rho>\\<^sub>1 \\<rho>\\<^sub>2.\n       \\<lbrakk>\\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n        \\<rho>\\<^sub>2 \\<in> carrier_mat d d;\n        partial_density_operator \\<rho>\\<^sub>1;\n        partial_density_operator \\<rho>\\<^sub>2;\n        Im (trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2)) = 0;\n        Re (trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2)) \\<le> 1\\<rbrakk>\n       \\<Longrightarrow> x1 0 *\n                         denote_while_n_iter (x1 0) (x1 (Suc 0)) (denote x2)\n                          0 (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) *\n                         adjoint (x1 0) =\n                         x1 0 *\n                         denote_while_n_iter (x1 0) (x1 (Suc 0)) (denote x2)\n                          0 \\<rho>\\<^sub>1 *\n                         adjoint (x1 0) +\n                         x1 0 *\n                         denote_while_n_iter (x1 0) (x1 (Suc 0)) (denote x2)\n                          0 \\<rho>\\<^sub>2 *\n                         adjoint (x1 0)\n 2. \\<And>k \\<rho>\\<^sub>1 \\<rho>\\<^sub>2.\n       \\<lbrakk>\\<And>\\<rho>\\<^sub>1 \\<rho>\\<^sub>2.\n                   \\<lbrakk>\\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n                    \\<rho>\\<^sub>2 \\<in> carrier_mat d d;\n                    partial_density_operator \\<rho>\\<^sub>1;\n                    partial_density_operator \\<rho>\\<^sub>2;\n                    Im (trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2)) = 0;\n                    Re (trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2))\n                    \\<le> 1\\<rbrakk>\n                   \\<Longrightarrow> x1 0 *\n                                     denote_while_n_iter (x1 0) (x1 (Suc 0))\n(denote x2) k (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) *\n                                     adjoint (x1 0) =\n                                     x1 0 *\n                                     denote_while_n_iter (x1 0) (x1 (Suc 0))\n(denote x2) k \\<rho>\\<^sub>1 *\n                                     adjoint (x1 0) +\n                                     x1 0 *\n                                     denote_while_n_iter (x1 0) (x1 (Suc 0))\n(denote x2) k \\<rho>\\<^sub>2 *\n                                     adjoint (x1 0);\n        \\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n        \\<rho>\\<^sub>2 \\<in> carrier_mat d d;\n        partial_density_operator \\<rho>\\<^sub>1;\n        partial_density_operator \\<rho>\\<^sub>2;\n        Im (trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2)) = 0;\n        Re (trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2)) \\<le> 1\\<rbrakk>\n       \\<Longrightarrow> x1 0 *\n                         denote_while_n_iter (x1 0) (x1 (Suc 0)) (denote x2)\n                          (Suc k) (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) *\n                         adjoint (x1 0) =\n                         x1 0 *\n                         denote_while_n_iter (x1 0) (x1 (Suc 0)) (denote x2)\n                          (Suc k) \\<rho>\\<^sub>1 *\n                         adjoint (x1 0) +\n                         x1 0 *\n                         denote_while_n_iter (x1 0) (x1 (Suc 0)) (denote x2)\n                          (Suc k) \\<rho>\\<^sub>2 *\n                         adjoint (x1 0)", "then"], ["proof (chain)\npicking this:\n  \\<rho>\\<^sub>1 \\<in> carrier_mat d d\n  \\<rho>\\<^sub>2 \\<in> carrier_mat d d\n  partial_density_operator \\<rho>\\<^sub>1\n  partial_density_operator \\<rho>\\<^sub>2\n  Im (trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2)) = 0\n  Re (trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2)) \\<le> 1", "show ?case"], ["proof (prove)\nusing this:\n  \\<rho>\\<^sub>1 \\<in> carrier_mat d d\n  \\<rho>\\<^sub>2 \\<in> carrier_mat d d\n  partial_density_operator \\<rho>\\<^sub>1\n  partial_density_operator \\<rho>\\<^sub>2\n  Im (trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2)) = 0\n  Re (trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2)) \\<le> 1\n\ngoal (1 subgoal):\n 1. x1 0 *\n    denote_while_n_iter (x1 0) (x1 (Suc 0)) (denote x2) 0\n     (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) *\n    adjoint (x1 0) =\n    x1 0 *\n    denote_while_n_iter (x1 0) (x1 (Suc 0)) (denote x2) 0 \\<rho>\\<^sub>1 *\n    adjoint (x1 0) +\n    x1 0 *\n    denote_while_n_iter (x1 0) (x1 (Suc 0)) (denote x2) 0 \\<rho>\\<^sub>2 *\n    adjoint (x1 0)", "apply auto"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n     \\<rho>\\<^sub>2 \\<in> carrier_mat d d;\n     partial_density_operator \\<rho>\\<^sub>1;\n     partial_density_operator \\<rho>\\<^sub>2;\n     Im (trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2)) = 0;\n     Re (trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2)) \\<le> 1\\<rbrakk>\n    \\<Longrightarrow> x1 0 * (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) *\n                      adjoint (x1 0) =\n                      x1 0 * \\<rho>\\<^sub>1 * adjoint (x1 0) +\n                      x1 0 * \\<rho>\\<^sub>2 * adjoint (x1 0)", "using M0"], ["proof (prove)\nusing this:\n  x1 0 \\<in> carrier_mat d d\n\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n     \\<rho>\\<^sub>2 \\<in> carrier_mat d d;\n     partial_density_operator \\<rho>\\<^sub>1;\n     partial_density_operator \\<rho>\\<^sub>2;\n     Im (trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2)) = 0;\n     Re (trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2)) \\<le> 1\\<rbrakk>\n    \\<Longrightarrow> x1 0 * (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) *\n                      adjoint (x1 0) =\n                      x1 0 * \\<rho>\\<^sub>1 * adjoint (x1 0) +\n                      x1 0 * \\<rho>\\<^sub>2 * adjoint (x1 0)", "by (mat_assoc d)"], ["proof (state)\nthis:\n  x1 0 *\n  denote_while_n_iter (x1 0) (x1 (Suc 0)) (denote x2) 0\n   (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) *\n  adjoint (x1 0) =\n  x1 0 *\n  denote_while_n_iter (x1 0) (x1 (Suc 0)) (denote x2) 0 \\<rho>\\<^sub>1 *\n  adjoint (x1 0) +\n  x1 0 *\n  denote_while_n_iter (x1 0) (x1 (Suc 0)) (denote x2) 0 \\<rho>\\<^sub>2 *\n  adjoint (x1 0)\n\ngoal (1 subgoal):\n 1. \\<And>k \\<rho>\\<^sub>1 \\<rho>\\<^sub>2.\n       \\<lbrakk>\\<And>\\<rho>\\<^sub>1 \\<rho>\\<^sub>2.\n                   \\<lbrakk>\\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n                    \\<rho>\\<^sub>2 \\<in> carrier_mat d d;\n                    partial_density_operator \\<rho>\\<^sub>1;\n                    partial_density_operator \\<rho>\\<^sub>2;\n                    Im (trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2)) = 0;\n                    Re (trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2))\n                    \\<le> 1\\<rbrakk>\n                   \\<Longrightarrow> x1 0 *\n                                     denote_while_n_iter (x1 0) (x1 (Suc 0))\n(denote x2) k (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) *\n                                     adjoint (x1 0) =\n                                     x1 0 *\n                                     denote_while_n_iter (x1 0) (x1 (Suc 0))\n(denote x2) k \\<rho>\\<^sub>1 *\n                                     adjoint (x1 0) +\n                                     x1 0 *\n                                     denote_while_n_iter (x1 0) (x1 (Suc 0))\n(denote x2) k \\<rho>\\<^sub>2 *\n                                     adjoint (x1 0);\n        \\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n        \\<rho>\\<^sub>2 \\<in> carrier_mat d d;\n        partial_density_operator \\<rho>\\<^sub>1;\n        partial_density_operator \\<rho>\\<^sub>2;\n        Im (trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2)) = 0;\n        Re (trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2)) \\<le> 1\\<rbrakk>\n       \\<Longrightarrow> x1 0 *\n                         denote_while_n_iter (x1 0) (x1 (Suc 0)) (denote x2)\n                          (Suc k) (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) *\n                         adjoint (x1 0) =\n                         x1 0 *\n                         denote_while_n_iter (x1 0) (x1 (Suc 0)) (denote x2)\n                          (Suc k) \\<rho>\\<^sub>1 *\n                         adjoint (x1 0) +\n                         x1 0 *\n                         denote_while_n_iter (x1 0) (x1 (Suc 0)) (denote x2)\n                          (Suc k) \\<rho>\\<^sub>2 *\n                         adjoint (x1 0)", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>k \\<rho>\\<^sub>1 \\<rho>\\<^sub>2.\n       \\<lbrakk>\\<And>\\<rho>\\<^sub>1 \\<rho>\\<^sub>2.\n                   \\<lbrakk>\\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n                    \\<rho>\\<^sub>2 \\<in> carrier_mat d d;\n                    partial_density_operator \\<rho>\\<^sub>1;\n                    partial_density_operator \\<rho>\\<^sub>2;\n                    Im (trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2)) = 0;\n                    Re (trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2))\n                    \\<le> 1\\<rbrakk>\n                   \\<Longrightarrow> x1 0 *\n                                     denote_while_n_iter (x1 0) (x1 (Suc 0))\n(denote x2) k (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) *\n                                     adjoint (x1 0) =\n                                     x1 0 *\n                                     denote_while_n_iter (x1 0) (x1 (Suc 0))\n(denote x2) k \\<rho>\\<^sub>1 *\n                                     adjoint (x1 0) +\n                                     x1 0 *\n                                     denote_while_n_iter (x1 0) (x1 (Suc 0))\n(denote x2) k \\<rho>\\<^sub>2 *\n                                     adjoint (x1 0);\n        \\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n        \\<rho>\\<^sub>2 \\<in> carrier_mat d d;\n        partial_density_operator \\<rho>\\<^sub>1;\n        partial_density_operator \\<rho>\\<^sub>2;\n        Im (trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2)) = 0;\n        Re (trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2)) \\<le> 1\\<rbrakk>\n       \\<Longrightarrow> x1 0 *\n                         denote_while_n_iter (x1 0) (x1 (Suc 0)) (denote x2)\n                          (Suc k) (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) *\n                         adjoint (x1 0) =\n                         x1 0 *\n                         denote_while_n_iter (x1 0) (x1 (Suc 0)) (denote x2)\n                          (Suc k) \\<rho>\\<^sub>1 *\n                         adjoint (x1 0) +\n                         x1 0 *\n                         denote_while_n_iter (x1 0) (x1 (Suc 0)) (denote x2)\n                          (Suc k) \\<rho>\\<^sub>2 *\n                         adjoint (x1 0)", "case (Suc k)"], ["proof (state)\nthis:\n  \\<lbrakk>?\\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n   ?\\<rho>\\<^sub>2 \\<in> carrier_mat d d;\n   partial_density_operator ?\\<rho>\\<^sub>1;\n   partial_density_operator ?\\<rho>\\<^sub>2;\n   Im (trace (?\\<rho>\\<^sub>1 + ?\\<rho>\\<^sub>2)) = 0;\n   Re (trace (?\\<rho>\\<^sub>1 + ?\\<rho>\\<^sub>2)) \\<le> 1\\<rbrakk>\n  \\<Longrightarrow> x1 0 *\n                    denote_while_n_iter (x1 0) (x1 (Suc 0)) (denote x2) k\n                     (?\\<rho>\\<^sub>1 + ?\\<rho>\\<^sub>2) *\n                    adjoint (x1 0) =\n                    x1 0 *\n                    denote_while_n_iter (x1 0) (x1 (Suc 0)) (denote x2) k\n                     ?\\<rho>\\<^sub>1 *\n                    adjoint (x1 0) +\n                    x1 0 *\n                    denote_while_n_iter (x1 0) (x1 (Suc 0)) (denote x2) k\n                     ?\\<rho>\\<^sub>2 *\n                    adjoint (x1 0)\n  \\<rho>\\<^sub>1 \\<in> carrier_mat d d\n  \\<rho>\\<^sub>2 \\<in> carrier_mat d d\n  partial_density_operator \\<rho>\\<^sub>1\n  partial_density_operator \\<rho>\\<^sub>2\n  Im (trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2)) = 0\n  Re (trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2)) \\<le> 1\n\ngoal (1 subgoal):\n 1. \\<And>k \\<rho>\\<^sub>1 \\<rho>\\<^sub>2.\n       \\<lbrakk>\\<And>\\<rho>\\<^sub>1 \\<rho>\\<^sub>2.\n                   \\<lbrakk>\\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n                    \\<rho>\\<^sub>2 \\<in> carrier_mat d d;\n                    partial_density_operator \\<rho>\\<^sub>1;\n                    partial_density_operator \\<rho>\\<^sub>2;\n                    Im (trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2)) = 0;\n                    Re (trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2))\n                    \\<le> 1\\<rbrakk>\n                   \\<Longrightarrow> x1 0 *\n                                     denote_while_n_iter (x1 0) (x1 (Suc 0))\n(denote x2) k (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) *\n                                     adjoint (x1 0) =\n                                     x1 0 *\n                                     denote_while_n_iter (x1 0) (x1 (Suc 0))\n(denote x2) k \\<rho>\\<^sub>1 *\n                                     adjoint (x1 0) +\n                                     x1 0 *\n                                     denote_while_n_iter (x1 0) (x1 (Suc 0))\n(denote x2) k \\<rho>\\<^sub>2 *\n                                     adjoint (x1 0);\n        \\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n        \\<rho>\\<^sub>2 \\<in> carrier_mat d d;\n        partial_density_operator \\<rho>\\<^sub>1;\n        partial_density_operator \\<rho>\\<^sub>2;\n        Im (trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2)) = 0;\n        Re (trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2)) \\<le> 1\\<rbrakk>\n       \\<Longrightarrow> x1 0 *\n                         denote_while_n_iter (x1 0) (x1 (Suc 0)) (denote x2)\n                          (Suc k) (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) *\n                         adjoint (x1 0) =\n                         x1 0 *\n                         denote_while_n_iter (x1 0) (x1 (Suc 0)) (denote x2)\n                          (Suc k) \\<rho>\\<^sub>1 *\n                         adjoint (x1 0) +\n                         x1 0 *\n                         denote_while_n_iter (x1 0) (x1 (Suc 0)) (denote x2)\n                          (Suc k) \\<rho>\\<^sub>2 *\n                         adjoint (x1 0)", "then"], ["proof (chain)\npicking this:\n  \\<lbrakk>?\\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n   ?\\<rho>\\<^sub>2 \\<in> carrier_mat d d;\n   partial_density_operator ?\\<rho>\\<^sub>1;\n   partial_density_operator ?\\<rho>\\<^sub>2;\n   Im (trace (?\\<rho>\\<^sub>1 + ?\\<rho>\\<^sub>2)) = 0;\n   Re (trace (?\\<rho>\\<^sub>1 + ?\\<rho>\\<^sub>2)) \\<le> 1\\<rbrakk>\n  \\<Longrightarrow> x1 0 *\n                    denote_while_n_iter (x1 0) (x1 (Suc 0)) (denote x2) k\n                     (?\\<rho>\\<^sub>1 + ?\\<rho>\\<^sub>2) *\n                    adjoint (x1 0) =\n                    x1 0 *\n                    denote_while_n_iter (x1 0) (x1 (Suc 0)) (denote x2) k\n                     ?\\<rho>\\<^sub>1 *\n                    adjoint (x1 0) +\n                    x1 0 *\n                    denote_while_n_iter (x1 0) (x1 (Suc 0)) (denote x2) k\n                     ?\\<rho>\\<^sub>2 *\n                    adjoint (x1 0)\n  \\<rho>\\<^sub>1 \\<in> carrier_mat d d\n  \\<rho>\\<^sub>2 \\<in> carrier_mat d d\n  partial_density_operator \\<rho>\\<^sub>1\n  partial_density_operator \\<rho>\\<^sub>2\n  Im (trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2)) = 0\n  Re (trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2)) \\<le> 1", "show ?case"], ["proof (prove)\nusing this:\n  \\<lbrakk>?\\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n   ?\\<rho>\\<^sub>2 \\<in> carrier_mat d d;\n   partial_density_operator ?\\<rho>\\<^sub>1;\n   partial_density_operator ?\\<rho>\\<^sub>2;\n   Im (trace (?\\<rho>\\<^sub>1 + ?\\<rho>\\<^sub>2)) = 0;\n   Re (trace (?\\<rho>\\<^sub>1 + ?\\<rho>\\<^sub>2)) \\<le> 1\\<rbrakk>\n  \\<Longrightarrow> x1 0 *\n                    denote_while_n_iter (x1 0) (x1 (Suc 0)) (denote x2) k\n                     (?\\<rho>\\<^sub>1 + ?\\<rho>\\<^sub>2) *\n                    adjoint (x1 0) =\n                    x1 0 *\n                    denote_while_n_iter (x1 0) (x1 (Suc 0)) (denote x2) k\n                     ?\\<rho>\\<^sub>1 *\n                    adjoint (x1 0) +\n                    x1 0 *\n                    denote_while_n_iter (x1 0) (x1 (Suc 0)) (denote x2) k\n                     ?\\<rho>\\<^sub>2 *\n                    adjoint (x1 0)\n  \\<rho>\\<^sub>1 \\<in> carrier_mat d d\n  \\<rho>\\<^sub>2 \\<in> carrier_mat d d\n  partial_density_operator \\<rho>\\<^sub>1\n  partial_density_operator \\<rho>\\<^sub>2\n  Im (trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2)) = 0\n  Re (trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2)) \\<le> 1\n\ngoal (1 subgoal):\n 1. x1 0 *\n    denote_while_n_iter (x1 0) (x1 (Suc 0)) (denote x2) (Suc k)\n     (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) *\n    adjoint (x1 0) =\n    x1 0 *\n    denote_while_n_iter (x1 0) (x1 (Suc 0)) (denote x2) (Suc k)\n     \\<rho>\\<^sub>1 *\n    adjoint (x1 0) +\n    x1 0 *\n    denote_while_n_iter (x1 0) (x1 (Suc 0)) (denote x2) (Suc k)\n     \\<rho>\\<^sub>2 *\n    adjoint (x1 0)", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<And>\\<rho>\\<^sub>1 \\<rho>\\<^sub>2.\n                \\<lbrakk>\\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n                 \\<rho>\\<^sub>2 \\<in> carrier_mat d d;\n                 partial_density_operator \\<rho>\\<^sub>1;\n                 partial_density_operator \\<rho>\\<^sub>2;\n                 Im (trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2)) = 0;\n                 Re (trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2))\n                 \\<le> 1\\<rbrakk>\n                \\<Longrightarrow> x1 0 *\n                                  denote_while_n_iter (x1 0) (x1 (Suc 0))\n                                   (denote x2) k\n                                   (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) *\n                                  adjoint (x1 0) =\n                                  x1 0 *\n                                  denote_while_n_iter (x1 0) (x1 (Suc 0))\n                                   (denote x2) k \\<rho>\\<^sub>1 *\n                                  adjoint (x1 0) +\n                                  x1 0 *\n                                  denote_while_n_iter (x1 0) (x1 (Suc 0))\n                                   (denote x2) k \\<rho>\\<^sub>2 *\n                                  adjoint (x1 0);\n     \\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n     \\<rho>\\<^sub>2 \\<in> carrier_mat d d;\n     partial_density_operator \\<rho>\\<^sub>1;\n     partial_density_operator \\<rho>\\<^sub>2;\n     Im (trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2)) = 0;\n     Re (trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2)) \\<le> 1\\<rbrakk>\n    \\<Longrightarrow> x1 0 *\n                      denote_while_n_iter (x1 0) (x1 (Suc 0)) (denote x2)\n                       (Suc k) (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) *\n                      adjoint (x1 0) =\n                      x1 0 *\n                      denote_while_n_iter (x1 0) (x1 (Suc 0)) (denote x2)\n                       (Suc k) \\<rho>\\<^sub>1 *\n                      adjoint (x1 0) +\n                      x1 0 *\n                      denote_while_n_iter (x1 0) (x1 (Suc 0)) (denote x2)\n                       (Suc k) \\<rho>\\<^sub>2 *\n                      adjoint (x1 0)", "let ?A = \"x1 0\" and ?B = \"x1 1\""], ["proof (state)\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<And>\\<rho>\\<^sub>1 \\<rho>\\<^sub>2.\n                \\<lbrakk>\\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n                 \\<rho>\\<^sub>2 \\<in> carrier_mat d d;\n                 partial_density_operator \\<rho>\\<^sub>1;\n                 partial_density_operator \\<rho>\\<^sub>2;\n                 Im (trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2)) = 0;\n                 Re (trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2))\n                 \\<le> 1\\<rbrakk>\n                \\<Longrightarrow> x1 0 *\n                                  denote_while_n_iter (x1 0) (x1 (Suc 0))\n                                   (denote x2) k\n                                   (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) *\n                                  adjoint (x1 0) =\n                                  x1 0 *\n                                  denote_while_n_iter (x1 0) (x1 (Suc 0))\n                                   (denote x2) k \\<rho>\\<^sub>1 *\n                                  adjoint (x1 0) +\n                                  x1 0 *\n                                  denote_while_n_iter (x1 0) (x1 (Suc 0))\n                                   (denote x2) k \\<rho>\\<^sub>2 *\n                                  adjoint (x1 0);\n     \\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n     \\<rho>\\<^sub>2 \\<in> carrier_mat d d;\n     partial_density_operator \\<rho>\\<^sub>1;\n     partial_density_operator \\<rho>\\<^sub>2;\n     Im (trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2)) = 0;\n     Re (trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2)) \\<le> 1\\<rbrakk>\n    \\<Longrightarrow> x1 0 *\n                      denote_while_n_iter (x1 0) (x1 (Suc 0)) (denote x2)\n                       (Suc k) (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) *\n                      adjoint (x1 0) =\n                      x1 0 *\n                      denote_while_n_iter (x1 0) (x1 (Suc 0)) (denote x2)\n                       (Suc k) \\<rho>\\<^sub>1 *\n                      adjoint (x1 0) +\n                      x1 0 *\n                      denote_while_n_iter (x1 0) (x1 (Suc 0)) (denote x2)\n                       (Suc k) \\<rho>\\<^sub>2 *\n                      adjoint (x1 0)", "have dx2:\"(\\<And>\\<rho>. \\<rho> \\<in> carrier_mat d d \\<Longrightarrow> partial_density_operator \\<rho> \\<Longrightarrow> positive ((denote x2) \\<rho>) \\<and> trace ((denote x2) \\<rho>) \\<le> trace \\<rho> \\<and> (denote x2) \\<rho> \\<in> carrier_mat d d) \""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>\\<rho>.\n       \\<lbrakk>\\<rho> \\<in> carrier_mat d d;\n        partial_density_operator \\<rho>\\<rbrakk>\n       \\<Longrightarrow> positive (denote x2 \\<rho>) \\<and>\n                         trace (denote x2 \\<rho>) \\<le> trace \\<rho> \\<and>\n                         denote x2 \\<rho> \\<in> carrier_mat d d", "using denote_positive_trace_dim wc"], ["proof (prove)\nusing this:\n  \\<lbrakk>well_com ?S; ?\\<rho> \\<in> carrier_mat d d;\n   partial_density_operator ?\\<rho>\\<rbrakk>\n  \\<Longrightarrow> positive (denote ?S ?\\<rho>) \\<and>\n                    trace (denote ?S ?\\<rho>) \\<le> trace ?\\<rho> \\<and>\n                    denote ?S ?\\<rho> \\<in> carrier_mat d d\n  well_com x2\n\ngoal (1 subgoal):\n 1. \\<And>\\<rho>.\n       \\<lbrakk>\\<rho> \\<in> carrier_mat d d;\n        partial_density_operator \\<rho>\\<rbrakk>\n       \\<Longrightarrow> positive (denote x2 \\<rho>) \\<and>\n                         trace (denote x2 \\<rho>) \\<le> trace \\<rho> \\<and>\n                         denote x2 \\<rho> \\<in> carrier_mat d d", "by auto"], ["proof (state)\nthis:\n  \\<lbrakk>?\\<rho> \\<in> carrier_mat d d;\n   partial_density_operator ?\\<rho>\\<rbrakk>\n  \\<Longrightarrow> positive (denote x2 ?\\<rho>) \\<and>\n                    trace (denote x2 ?\\<rho>) \\<le> trace ?\\<rho> \\<and>\n                    denote x2 ?\\<rho> \\<in> carrier_mat d d\n\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<And>\\<rho>\\<^sub>1 \\<rho>\\<^sub>2.\n                \\<lbrakk>\\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n                 \\<rho>\\<^sub>2 \\<in> carrier_mat d d;\n                 partial_density_operator \\<rho>\\<^sub>1;\n                 partial_density_operator \\<rho>\\<^sub>2;\n                 Im (trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2)) = 0;\n                 Re (trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2))\n                 \\<le> 1\\<rbrakk>\n                \\<Longrightarrow> x1 0 *\n                                  denote_while_n_iter (x1 0) (x1 (Suc 0))\n                                   (denote x2) k\n                                   (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) *\n                                  adjoint (x1 0) =\n                                  x1 0 *\n                                  denote_while_n_iter (x1 0) (x1 (Suc 0))\n                                   (denote x2) k \\<rho>\\<^sub>1 *\n                                  adjoint (x1 0) +\n                                  x1 0 *\n                                  denote_while_n_iter (x1 0) (x1 (Suc 0))\n                                   (denote x2) k \\<rho>\\<^sub>2 *\n                                  adjoint (x1 0);\n     \\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n     \\<rho>\\<^sub>2 \\<in> carrier_mat d d;\n     partial_density_operator \\<rho>\\<^sub>1;\n     partial_density_operator \\<rho>\\<^sub>2;\n     Im (trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2)) = 0;\n     Re (trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2)) \\<le> 1\\<rbrakk>\n    \\<Longrightarrow> x1 0 *\n                      denote_while_n_iter (x1 0) (x1 (Suc 0)) (denote x2)\n                       (Suc k) (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) *\n                      adjoint (x1 0) =\n                      x1 0 *\n                      denote_while_n_iter (x1 0) (x1 (Suc 0)) (denote x2)\n                       (Suc k) \\<rho>\\<^sub>1 *\n                      adjoint (x1 0) +\n                      x1 0 *\n                      denote_while_n_iter (x1 0) (x1 (Suc 0)) (denote x2)\n                       (Suc k) \\<rho>\\<^sub>2 *\n                      adjoint (x1 0)", "have lo1: \"adjoint ?B * ?B \\<le>\\<^sub>L 1\\<^sub>m d\""], ["proof (prove)\ngoal (1 subgoal):\n 1. adjoint (x1 1) * x1 1 \\<le>\\<^sub>L 1\\<^sub>m d", "using measurement_le_one_mat assms"], ["proof (prove)\nusing this:\n  \\<lbrakk>measurement ?d ?n ?f; ?j < ?n\\<rbrakk>\n  \\<Longrightarrow> adjoint (?f ?j) * ?f ?j \\<le>\\<^sub>L 1\\<^sub>m ?d\n  x1 0 \\<in> carrier_mat d d\n  x1 1 \\<in> carrier_mat d d\n  well_com x2\n  measurement d 2 x1\n  \\<lbrakk>?\\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n   ?\\<rho>\\<^sub>2 \\<in> carrier_mat d d;\n   partial_density_operator ?\\<rho>\\<^sub>1;\n   partial_density_operator ?\\<rho>\\<^sub>2;\n   trace (?\\<rho>\\<^sub>1 + ?\\<rho>\\<^sub>2) \\<le> 1\\<rbrakk>\n  \\<Longrightarrow> denote x2 (?\\<rho>\\<^sub>1 + ?\\<rho>\\<^sub>2) =\n                    denote x2 ?\\<rho>\\<^sub>1 + denote x2 ?\\<rho>\\<^sub>2\n\ngoal (1 subgoal):\n 1. adjoint (x1 1) * x1 1 \\<le>\\<^sub>L 1\\<^sub>m d", "by auto"], ["proof (state)\nthis:\n  adjoint (x1 1) * x1 1 \\<le>\\<^sub>L 1\\<^sub>m d\n\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<And>\\<rho>\\<^sub>1 \\<rho>\\<^sub>2.\n                \\<lbrakk>\\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n                 \\<rho>\\<^sub>2 \\<in> carrier_mat d d;\n                 partial_density_operator \\<rho>\\<^sub>1;\n                 partial_density_operator \\<rho>\\<^sub>2;\n                 Im (trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2)) = 0;\n                 Re (trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2))\n                 \\<le> 1\\<rbrakk>\n                \\<Longrightarrow> x1 0 *\n                                  denote_while_n_iter (x1 0) (x1 (Suc 0))\n                                   (denote x2) k\n                                   (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) *\n                                  adjoint (x1 0) =\n                                  x1 0 *\n                                  denote_while_n_iter (x1 0) (x1 (Suc 0))\n                                   (denote x2) k \\<rho>\\<^sub>1 *\n                                  adjoint (x1 0) +\n                                  x1 0 *\n                                  denote_while_n_iter (x1 0) (x1 (Suc 0))\n                                   (denote x2) k \\<rho>\\<^sub>2 *\n                                  adjoint (x1 0);\n     \\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n     \\<rho>\\<^sub>2 \\<in> carrier_mat d d;\n     partial_density_operator \\<rho>\\<^sub>1;\n     partial_density_operator \\<rho>\\<^sub>2;\n     Im (trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2)) = 0;\n     Re (trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2)) \\<le> 1\\<rbrakk>\n    \\<Longrightarrow> x1 0 *\n                      denote_while_n_iter (x1 0) (x1 (Suc 0)) (denote x2)\n                       (Suc k) (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) *\n                      adjoint (x1 0) =\n                      x1 0 *\n                      denote_while_n_iter (x1 0) (x1 (Suc 0)) (denote x2)\n                       (Suc k) \\<rho>\\<^sub>1 *\n                      adjoint (x1 0) +\n                      x1 0 *\n                      denote_while_n_iter (x1 0) (x1 (Suc 0)) (denote x2)\n                       (Suc k) \\<rho>\\<^sub>2 *\n                      adjoint (x1 0)", "have dim1: \"x1 1 * \\<rho>\\<^sub>1 * adjoint (x1 1) \\<in> carrier_mat d d\""], ["proof (prove)\ngoal (1 subgoal):\n 1. x1 1 * \\<rho>\\<^sub>1 * adjoint (x1 1) \\<in> carrier_mat d d", "using assms Suc"], ["proof (prove)\nusing this:\n  x1 0 \\<in> carrier_mat d d\n  x1 1 \\<in> carrier_mat d d\n  well_com x2\n  measurement d 2 x1\n  \\<lbrakk>?\\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n   ?\\<rho>\\<^sub>2 \\<in> carrier_mat d d;\n   partial_density_operator ?\\<rho>\\<^sub>1;\n   partial_density_operator ?\\<rho>\\<^sub>2;\n   trace (?\\<rho>\\<^sub>1 + ?\\<rho>\\<^sub>2) \\<le> 1\\<rbrakk>\n  \\<Longrightarrow> denote x2 (?\\<rho>\\<^sub>1 + ?\\<rho>\\<^sub>2) =\n                    denote x2 ?\\<rho>\\<^sub>1 + denote x2 ?\\<rho>\\<^sub>2\n  \\<lbrakk>?\\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n   ?\\<rho>\\<^sub>2 \\<in> carrier_mat d d;\n   partial_density_operator ?\\<rho>\\<^sub>1;\n   partial_density_operator ?\\<rho>\\<^sub>2;\n   Im (trace (?\\<rho>\\<^sub>1 + ?\\<rho>\\<^sub>2)) = 0;\n   Re (trace (?\\<rho>\\<^sub>1 + ?\\<rho>\\<^sub>2)) \\<le> 1\\<rbrakk>\n  \\<Longrightarrow> x1 0 *\n                    denote_while_n_iter (x1 0) (x1 (Suc 0)) (denote x2) k\n                     (?\\<rho>\\<^sub>1 + ?\\<rho>\\<^sub>2) *\n                    adjoint (x1 0) =\n                    x1 0 *\n                    denote_while_n_iter (x1 0) (x1 (Suc 0)) (denote x2) k\n                     ?\\<rho>\\<^sub>1 *\n                    adjoint (x1 0) +\n                    x1 0 *\n                    denote_while_n_iter (x1 0) (x1 (Suc 0)) (denote x2) k\n                     ?\\<rho>\\<^sub>2 *\n                    adjoint (x1 0)\n  \\<rho>\\<^sub>1 \\<in> carrier_mat d d\n  \\<rho>\\<^sub>2 \\<in> carrier_mat d d\n  partial_density_operator \\<rho>\\<^sub>1\n  partial_density_operator \\<rho>\\<^sub>2\n  Im (trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2)) = 0\n  Re (trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2)) \\<le> 1\n\ngoal (1 subgoal):\n 1. x1 1 * \\<rho>\\<^sub>1 * adjoint (x1 1) \\<in> carrier_mat d d", "by (metis adjoint_dim mult_carrier_mat)"], ["proof (state)\nthis:\n  x1 1 * \\<rho>\\<^sub>1 * adjoint (x1 1) \\<in> carrier_mat d d\n\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<And>\\<rho>\\<^sub>1 \\<rho>\\<^sub>2.\n                \\<lbrakk>\\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n                 \\<rho>\\<^sub>2 \\<in> carrier_mat d d;\n                 partial_density_operator \\<rho>\\<^sub>1;\n                 partial_density_operator \\<rho>\\<^sub>2;\n                 Im (trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2)) = 0;\n                 Re (trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2))\n                 \\<le> 1\\<rbrakk>\n                \\<Longrightarrow> x1 0 *\n                                  denote_while_n_iter (x1 0) (x1 (Suc 0))\n                                   (denote x2) k\n                                   (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) *\n                                  adjoint (x1 0) =\n                                  x1 0 *\n                                  denote_while_n_iter (x1 0) (x1 (Suc 0))\n                                   (denote x2) k \\<rho>\\<^sub>1 *\n                                  adjoint (x1 0) +\n                                  x1 0 *\n                                  denote_while_n_iter (x1 0) (x1 (Suc 0))\n                                   (denote x2) k \\<rho>\\<^sub>2 *\n                                  adjoint (x1 0);\n     \\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n     \\<rho>\\<^sub>2 \\<in> carrier_mat d d;\n     partial_density_operator \\<rho>\\<^sub>1;\n     partial_density_operator \\<rho>\\<^sub>2;\n     Im (trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2)) = 0;\n     Re (trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2)) \\<le> 1\\<rbrakk>\n    \\<Longrightarrow> x1 0 *\n                      denote_while_n_iter (x1 0) (x1 (Suc 0)) (denote x2)\n                       (Suc k) (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) *\n                      adjoint (x1 0) =\n                      x1 0 *\n                      denote_while_n_iter (x1 0) (x1 (Suc 0)) (denote x2)\n                       (Suc k) \\<rho>\\<^sub>1 *\n                      adjoint (x1 0) +\n                      x1 0 *\n                      denote_while_n_iter (x1 0) (x1 (Suc 0)) (denote x2)\n                       (Suc k) \\<rho>\\<^sub>2 *\n                      adjoint (x1 0)", "moreover"], ["proof (state)\nthis:\n  x1 1 * \\<rho>\\<^sub>1 * adjoint (x1 1) \\<in> carrier_mat d d\n\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<And>\\<rho>\\<^sub>1 \\<rho>\\<^sub>2.\n                \\<lbrakk>\\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n                 \\<rho>\\<^sub>2 \\<in> carrier_mat d d;\n                 partial_density_operator \\<rho>\\<^sub>1;\n                 partial_density_operator \\<rho>\\<^sub>2;\n                 Im (trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2)) = 0;\n                 Re (trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2))\n                 \\<le> 1\\<rbrakk>\n                \\<Longrightarrow> x1 0 *\n                                  denote_while_n_iter (x1 0) (x1 (Suc 0))\n                                   (denote x2) k\n                                   (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) *\n                                  adjoint (x1 0) =\n                                  x1 0 *\n                                  denote_while_n_iter (x1 0) (x1 (Suc 0))\n                                   (denote x2) k \\<rho>\\<^sub>1 *\n                                  adjoint (x1 0) +\n                                  x1 0 *\n                                  denote_while_n_iter (x1 0) (x1 (Suc 0))\n                                   (denote x2) k \\<rho>\\<^sub>2 *\n                                  adjoint (x1 0);\n     \\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n     \\<rho>\\<^sub>2 \\<in> carrier_mat d d;\n     partial_density_operator \\<rho>\\<^sub>1;\n     partial_density_operator \\<rho>\\<^sub>2;\n     Im (trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2)) = 0;\n     Re (trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2)) \\<le> 1\\<rbrakk>\n    \\<Longrightarrow> x1 0 *\n                      denote_while_n_iter (x1 0) (x1 (Suc 0)) (denote x2)\n                       (Suc k) (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) *\n                      adjoint (x1 0) =\n                      x1 0 *\n                      denote_while_n_iter (x1 0) (x1 (Suc 0)) (denote x2)\n                       (Suc k) \\<rho>\\<^sub>1 *\n                      adjoint (x1 0) +\n                      x1 0 *\n                      denote_while_n_iter (x1 0) (x1 (Suc 0)) (denote x2)\n                       (Suc k) \\<rho>\\<^sub>2 *\n                      adjoint (x1 0)", "have pdo1: \"partial_density_operator (x1 1 * \\<rho>\\<^sub>1 * adjoint (x1 1))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. partial_density_operator (x1 1 * \\<rho>\\<^sub>1 * adjoint (x1 1))", "using pdo_close_under_measurement assms(2) Suc(2,4) lo1"], ["proof (prove)\nusing this:\n  \\<lbrakk>?M \\<in> carrier_mat ?n ?n; ?\\<rho> \\<in> carrier_mat ?n ?n;\n   partial_density_operator ?\\<rho>;\n   adjoint ?M * ?M \\<le>\\<^sub>L 1\\<^sub>m ?n\\<rbrakk>\n  \\<Longrightarrow> partial_density_operator (?M * ?\\<rho> * adjoint ?M)\n  x1 1 \\<in> carrier_mat d d\n  \\<rho>\\<^sub>1 \\<in> carrier_mat d d\n  partial_density_operator \\<rho>\\<^sub>1\n  adjoint (x1 1) * x1 1 \\<le>\\<^sub>L 1\\<^sub>m d\n\ngoal (1 subgoal):\n 1. partial_density_operator (x1 1 * \\<rho>\\<^sub>1 * adjoint (x1 1))", "by auto"], ["proof (state)\nthis:\n  partial_density_operator (x1 1 * \\<rho>\\<^sub>1 * adjoint (x1 1))\n\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<And>\\<rho>\\<^sub>1 \\<rho>\\<^sub>2.\n                \\<lbrakk>\\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n                 \\<rho>\\<^sub>2 \\<in> carrier_mat d d;\n                 partial_density_operator \\<rho>\\<^sub>1;\n                 partial_density_operator \\<rho>\\<^sub>2;\n                 Im (trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2)) = 0;\n                 Re (trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2))\n                 \\<le> 1\\<rbrakk>\n                \\<Longrightarrow> x1 0 *\n                                  denote_while_n_iter (x1 0) (x1 (Suc 0))\n                                   (denote x2) k\n                                   (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) *\n                                  adjoint (x1 0) =\n                                  x1 0 *\n                                  denote_while_n_iter (x1 0) (x1 (Suc 0))\n                                   (denote x2) k \\<rho>\\<^sub>1 *\n                                  adjoint (x1 0) +\n                                  x1 0 *\n                                  denote_while_n_iter (x1 0) (x1 (Suc 0))\n                                   (denote x2) k \\<rho>\\<^sub>2 *\n                                  adjoint (x1 0);\n     \\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n     \\<rho>\\<^sub>2 \\<in> carrier_mat d d;\n     partial_density_operator \\<rho>\\<^sub>1;\n     partial_density_operator \\<rho>\\<^sub>2;\n     Im (trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2)) = 0;\n     Re (trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2)) \\<le> 1\\<rbrakk>\n    \\<Longrightarrow> x1 0 *\n                      denote_while_n_iter (x1 0) (x1 (Suc 0)) (denote x2)\n                       (Suc k) (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) *\n                      adjoint (x1 0) =\n                      x1 0 *\n                      denote_while_n_iter (x1 0) (x1 (Suc 0)) (denote x2)\n                       (Suc k) \\<rho>\\<^sub>1 *\n                      adjoint (x1 0) +\n                      x1 0 *\n                      denote_while_n_iter (x1 0) (x1 (Suc 0)) (denote x2)\n                       (Suc k) \\<rho>\\<^sub>2 *\n                      adjoint (x1 0)", "ultimately"], ["proof (chain)\npicking this:\n  x1 1 * \\<rho>\\<^sub>1 * adjoint (x1 1) \\<in> carrier_mat d d\n  partial_density_operator (x1 1 * \\<rho>\\<^sub>1 * adjoint (x1 1))", "have dimr1: \"denote x2 (x1 1 * \\<rho>\\<^sub>1 * adjoint (x1 1)) \\<in> carrier_mat d d\""], ["proof (prove)\nusing this:\n  x1 1 * \\<rho>\\<^sub>1 * adjoint (x1 1) \\<in> carrier_mat d d\n  partial_density_operator (x1 1 * \\<rho>\\<^sub>1 * adjoint (x1 1))\n\ngoal (1 subgoal):\n 1. denote x2 (x1 1 * \\<rho>\\<^sub>1 * adjoint (x1 1)) \\<in> carrier_mat d d", "using dx2"], ["proof (prove)\nusing this:\n  x1 1 * \\<rho>\\<^sub>1 * adjoint (x1 1) \\<in> carrier_mat d d\n  partial_density_operator (x1 1 * \\<rho>\\<^sub>1 * adjoint (x1 1))\n  \\<lbrakk>?\\<rho> \\<in> carrier_mat d d;\n   partial_density_operator ?\\<rho>\\<rbrakk>\n  \\<Longrightarrow> positive (denote x2 ?\\<rho>) \\<and>\n                    trace (denote x2 ?\\<rho>) \\<le> trace ?\\<rho> \\<and>\n                    denote x2 ?\\<rho> \\<in> carrier_mat d d\n\ngoal (1 subgoal):\n 1. denote x2 (x1 1 * \\<rho>\\<^sub>1 * adjoint (x1 1)) \\<in> carrier_mat d d", "by auto"], ["proof (state)\nthis:\n  denote x2 (x1 1 * \\<rho>\\<^sub>1 * adjoint (x1 1)) \\<in> carrier_mat d d\n\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<And>\\<rho>\\<^sub>1 \\<rho>\\<^sub>2.\n                \\<lbrakk>\\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n                 \\<rho>\\<^sub>2 \\<in> carrier_mat d d;\n                 partial_density_operator \\<rho>\\<^sub>1;\n                 partial_density_operator \\<rho>\\<^sub>2;\n                 Im (trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2)) = 0;\n                 Re (trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2))\n                 \\<le> 1\\<rbrakk>\n                \\<Longrightarrow> x1 0 *\n                                  denote_while_n_iter (x1 0) (x1 (Suc 0))\n                                   (denote x2) k\n                                   (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) *\n                                  adjoint (x1 0) =\n                                  x1 0 *\n                                  denote_while_n_iter (x1 0) (x1 (Suc 0))\n                                   (denote x2) k \\<rho>\\<^sub>1 *\n                                  adjoint (x1 0) +\n                                  x1 0 *\n                                  denote_while_n_iter (x1 0) (x1 (Suc 0))\n                                   (denote x2) k \\<rho>\\<^sub>2 *\n                                  adjoint (x1 0);\n     \\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n     \\<rho>\\<^sub>2 \\<in> carrier_mat d d;\n     partial_density_operator \\<rho>\\<^sub>1;\n     partial_density_operator \\<rho>\\<^sub>2;\n     Im (trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2)) = 0;\n     Re (trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2)) \\<le> 1\\<rbrakk>\n    \\<Longrightarrow> x1 0 *\n                      denote_while_n_iter (x1 0) (x1 (Suc 0)) (denote x2)\n                       (Suc k) (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) *\n                      adjoint (x1 0) =\n                      x1 0 *\n                      denote_while_n_iter (x1 0) (x1 (Suc 0)) (denote x2)\n                       (Suc k) \\<rho>\\<^sub>1 *\n                      adjoint (x1 0) +\n                      x1 0 *\n                      denote_while_n_iter (x1 0) (x1 (Suc 0)) (denote x2)\n                       (Suc k) \\<rho>\\<^sub>2 *\n                      adjoint (x1 0)", "have dim2: \"x1 1 * \\<rho>\\<^sub>2 * adjoint (x1 1) \\<in> carrier_mat d d\""], ["proof (prove)\ngoal (1 subgoal):\n 1. x1 1 * \\<rho>\\<^sub>2 * adjoint (x1 1) \\<in> carrier_mat d d", "using assms Suc"], ["proof (prove)\nusing this:\n  x1 0 \\<in> carrier_mat d d\n  x1 1 \\<in> carrier_mat d d\n  well_com x2\n  measurement d 2 x1\n  \\<lbrakk>?\\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n   ?\\<rho>\\<^sub>2 \\<in> carrier_mat d d;\n   partial_density_operator ?\\<rho>\\<^sub>1;\n   partial_density_operator ?\\<rho>\\<^sub>2;\n   trace (?\\<rho>\\<^sub>1 + ?\\<rho>\\<^sub>2) \\<le> 1\\<rbrakk>\n  \\<Longrightarrow> denote x2 (?\\<rho>\\<^sub>1 + ?\\<rho>\\<^sub>2) =\n                    denote x2 ?\\<rho>\\<^sub>1 + denote x2 ?\\<rho>\\<^sub>2\n  \\<lbrakk>?\\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n   ?\\<rho>\\<^sub>2 \\<in> carrier_mat d d;\n   partial_density_operator ?\\<rho>\\<^sub>1;\n   partial_density_operator ?\\<rho>\\<^sub>2;\n   Im (trace (?\\<rho>\\<^sub>1 + ?\\<rho>\\<^sub>2)) = 0;\n   Re (trace (?\\<rho>\\<^sub>1 + ?\\<rho>\\<^sub>2)) \\<le> 1\\<rbrakk>\n  \\<Longrightarrow> x1 0 *\n                    denote_while_n_iter (x1 0) (x1 (Suc 0)) (denote x2) k\n                     (?\\<rho>\\<^sub>1 + ?\\<rho>\\<^sub>2) *\n                    adjoint (x1 0) =\n                    x1 0 *\n                    denote_while_n_iter (x1 0) (x1 (Suc 0)) (denote x2) k\n                     ?\\<rho>\\<^sub>1 *\n                    adjoint (x1 0) +\n                    x1 0 *\n                    denote_while_n_iter (x1 0) (x1 (Suc 0)) (denote x2) k\n                     ?\\<rho>\\<^sub>2 *\n                    adjoint (x1 0)\n  \\<rho>\\<^sub>1 \\<in> carrier_mat d d\n  \\<rho>\\<^sub>2 \\<in> carrier_mat d d\n  partial_density_operator \\<rho>\\<^sub>1\n  partial_density_operator \\<rho>\\<^sub>2\n  Im (trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2)) = 0\n  Re (trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2)) \\<le> 1\n\ngoal (1 subgoal):\n 1. x1 1 * \\<rho>\\<^sub>2 * adjoint (x1 1) \\<in> carrier_mat d d", "by (metis adjoint_dim mult_carrier_mat)"], ["proof (state)\nthis:\n  x1 1 * \\<rho>\\<^sub>2 * adjoint (x1 1) \\<in> carrier_mat d d\n\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<And>\\<rho>\\<^sub>1 \\<rho>\\<^sub>2.\n                \\<lbrakk>\\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n                 \\<rho>\\<^sub>2 \\<in> carrier_mat d d;\n                 partial_density_operator \\<rho>\\<^sub>1;\n                 partial_density_operator \\<rho>\\<^sub>2;\n                 Im (trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2)) = 0;\n                 Re (trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2))\n                 \\<le> 1\\<rbrakk>\n                \\<Longrightarrow> x1 0 *\n                                  denote_while_n_iter (x1 0) (x1 (Suc 0))\n                                   (denote x2) k\n                                   (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) *\n                                  adjoint (x1 0) =\n                                  x1 0 *\n                                  denote_while_n_iter (x1 0) (x1 (Suc 0))\n                                   (denote x2) k \\<rho>\\<^sub>1 *\n                                  adjoint (x1 0) +\n                                  x1 0 *\n                                  denote_while_n_iter (x1 0) (x1 (Suc 0))\n                                   (denote x2) k \\<rho>\\<^sub>2 *\n                                  adjoint (x1 0);\n     \\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n     \\<rho>\\<^sub>2 \\<in> carrier_mat d d;\n     partial_density_operator \\<rho>\\<^sub>1;\n     partial_density_operator \\<rho>\\<^sub>2;\n     Im (trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2)) = 0;\n     Re (trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2)) \\<le> 1\\<rbrakk>\n    \\<Longrightarrow> x1 0 *\n                      denote_while_n_iter (x1 0) (x1 (Suc 0)) (denote x2)\n                       (Suc k) (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) *\n                      adjoint (x1 0) =\n                      x1 0 *\n                      denote_while_n_iter (x1 0) (x1 (Suc 0)) (denote x2)\n                       (Suc k) \\<rho>\\<^sub>1 *\n                      adjoint (x1 0) +\n                      x1 0 *\n                      denote_while_n_iter (x1 0) (x1 (Suc 0)) (denote x2)\n                       (Suc k) \\<rho>\\<^sub>2 *\n                      adjoint (x1 0)", "moreover"], ["proof (state)\nthis:\n  x1 1 * \\<rho>\\<^sub>2 * adjoint (x1 1) \\<in> carrier_mat d d\n\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<And>\\<rho>\\<^sub>1 \\<rho>\\<^sub>2.\n                \\<lbrakk>\\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n                 \\<rho>\\<^sub>2 \\<in> carrier_mat d d;\n                 partial_density_operator \\<rho>\\<^sub>1;\n                 partial_density_operator \\<rho>\\<^sub>2;\n                 Im (trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2)) = 0;\n                 Re (trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2))\n                 \\<le> 1\\<rbrakk>\n                \\<Longrightarrow> x1 0 *\n                                  denote_while_n_iter (x1 0) (x1 (Suc 0))\n                                   (denote x2) k\n                                   (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) *\n                                  adjoint (x1 0) =\n                                  x1 0 *\n                                  denote_while_n_iter (x1 0) (x1 (Suc 0))\n                                   (denote x2) k \\<rho>\\<^sub>1 *\n                                  adjoint (x1 0) +\n                                  x1 0 *\n                                  denote_while_n_iter (x1 0) (x1 (Suc 0))\n                                   (denote x2) k \\<rho>\\<^sub>2 *\n                                  adjoint (x1 0);\n     \\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n     \\<rho>\\<^sub>2 \\<in> carrier_mat d d;\n     partial_density_operator \\<rho>\\<^sub>1;\n     partial_density_operator \\<rho>\\<^sub>2;\n     Im (trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2)) = 0;\n     Re (trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2)) \\<le> 1\\<rbrakk>\n    \\<Longrightarrow> x1 0 *\n                      denote_while_n_iter (x1 0) (x1 (Suc 0)) (denote x2)\n                       (Suc k) (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) *\n                      adjoint (x1 0) =\n                      x1 0 *\n                      denote_while_n_iter (x1 0) (x1 (Suc 0)) (denote x2)\n                       (Suc k) \\<rho>\\<^sub>1 *\n                      adjoint (x1 0) +\n                      x1 0 *\n                      denote_while_n_iter (x1 0) (x1 (Suc 0)) (denote x2)\n                       (Suc k) \\<rho>\\<^sub>2 *\n                      adjoint (x1 0)", "have pdo2: \"partial_density_operator (x1 1 * \\<rho>\\<^sub>2 * adjoint (x1 1))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. partial_density_operator (x1 1 * \\<rho>\\<^sub>2 * adjoint (x1 1))", "using pdo_close_under_measurement assms(2) Suc lo1"], ["proof (prove)\nusing this:\n  \\<lbrakk>?M \\<in> carrier_mat ?n ?n; ?\\<rho> \\<in> carrier_mat ?n ?n;\n   partial_density_operator ?\\<rho>;\n   adjoint ?M * ?M \\<le>\\<^sub>L 1\\<^sub>m ?n\\<rbrakk>\n  \\<Longrightarrow> partial_density_operator (?M * ?\\<rho> * adjoint ?M)\n  x1 1 \\<in> carrier_mat d d\n  \\<lbrakk>?\\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n   ?\\<rho>\\<^sub>2 \\<in> carrier_mat d d;\n   partial_density_operator ?\\<rho>\\<^sub>1;\n   partial_density_operator ?\\<rho>\\<^sub>2;\n   Im (trace (?\\<rho>\\<^sub>1 + ?\\<rho>\\<^sub>2)) = 0;\n   Re (trace (?\\<rho>\\<^sub>1 + ?\\<rho>\\<^sub>2)) \\<le> 1\\<rbrakk>\n  \\<Longrightarrow> x1 0 *\n                    denote_while_n_iter (x1 0) (x1 (Suc 0)) (denote x2) k\n                     (?\\<rho>\\<^sub>1 + ?\\<rho>\\<^sub>2) *\n                    adjoint (x1 0) =\n                    x1 0 *\n                    denote_while_n_iter (x1 0) (x1 (Suc 0)) (denote x2) k\n                     ?\\<rho>\\<^sub>1 *\n                    adjoint (x1 0) +\n                    x1 0 *\n                    denote_while_n_iter (x1 0) (x1 (Suc 0)) (denote x2) k\n                     ?\\<rho>\\<^sub>2 *\n                    adjoint (x1 0)\n  \\<rho>\\<^sub>1 \\<in> carrier_mat d d\n  \\<rho>\\<^sub>2 \\<in> carrier_mat d d\n  partial_density_operator \\<rho>\\<^sub>1\n  partial_density_operator \\<rho>\\<^sub>2\n  Im (trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2)) = 0\n  Re (trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2)) \\<le> 1\n  adjoint (x1 1) * x1 1 \\<le>\\<^sub>L 1\\<^sub>m d\n\ngoal (1 subgoal):\n 1. partial_density_operator (x1 1 * \\<rho>\\<^sub>2 * adjoint (x1 1))", "by auto"], ["proof (state)\nthis:\n  partial_density_operator (x1 1 * \\<rho>\\<^sub>2 * adjoint (x1 1))\n\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<And>\\<rho>\\<^sub>1 \\<rho>\\<^sub>2.\n                \\<lbrakk>\\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n                 \\<rho>\\<^sub>2 \\<in> carrier_mat d d;\n                 partial_density_operator \\<rho>\\<^sub>1;\n                 partial_density_operator \\<rho>\\<^sub>2;\n                 Im (trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2)) = 0;\n                 Re (trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2))\n                 \\<le> 1\\<rbrakk>\n                \\<Longrightarrow> x1 0 *\n                                  denote_while_n_iter (x1 0) (x1 (Suc 0))\n                                   (denote x2) k\n                                   (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) *\n                                  adjoint (x1 0) =\n                                  x1 0 *\n                                  denote_while_n_iter (x1 0) (x1 (Suc 0))\n                                   (denote x2) k \\<rho>\\<^sub>1 *\n                                  adjoint (x1 0) +\n                                  x1 0 *\n                                  denote_while_n_iter (x1 0) (x1 (Suc 0))\n                                   (denote x2) k \\<rho>\\<^sub>2 *\n                                  adjoint (x1 0);\n     \\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n     \\<rho>\\<^sub>2 \\<in> carrier_mat d d;\n     partial_density_operator \\<rho>\\<^sub>1;\n     partial_density_operator \\<rho>\\<^sub>2;\n     Im (trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2)) = 0;\n     Re (trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2)) \\<le> 1\\<rbrakk>\n    \\<Longrightarrow> x1 0 *\n                      denote_while_n_iter (x1 0) (x1 (Suc 0)) (denote x2)\n                       (Suc k) (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) *\n                      adjoint (x1 0) =\n                      x1 0 *\n                      denote_while_n_iter (x1 0) (x1 (Suc 0)) (denote x2)\n                       (Suc k) \\<rho>\\<^sub>1 *\n                      adjoint (x1 0) +\n                      x1 0 *\n                      denote_while_n_iter (x1 0) (x1 (Suc 0)) (denote x2)\n                       (Suc k) \\<rho>\\<^sub>2 *\n                      adjoint (x1 0)", "ultimately"], ["proof (chain)\npicking this:\n  x1 1 * \\<rho>\\<^sub>2 * adjoint (x1 1) \\<in> carrier_mat d d\n  partial_density_operator (x1 1 * \\<rho>\\<^sub>2 * adjoint (x1 1))", "have dimr2: \"denote x2 (x1 1 * \\<rho>\\<^sub>2 * adjoint (x1 1)) \\<in> carrier_mat d d\""], ["proof (prove)\nusing this:\n  x1 1 * \\<rho>\\<^sub>2 * adjoint (x1 1) \\<in> carrier_mat d d\n  partial_density_operator (x1 1 * \\<rho>\\<^sub>2 * adjoint (x1 1))\n\ngoal (1 subgoal):\n 1. denote x2 (x1 1 * \\<rho>\\<^sub>2 * adjoint (x1 1)) \\<in> carrier_mat d d", "using dx2"], ["proof (prove)\nusing this:\n  x1 1 * \\<rho>\\<^sub>2 * adjoint (x1 1) \\<in> carrier_mat d d\n  partial_density_operator (x1 1 * \\<rho>\\<^sub>2 * adjoint (x1 1))\n  \\<lbrakk>?\\<rho> \\<in> carrier_mat d d;\n   partial_density_operator ?\\<rho>\\<rbrakk>\n  \\<Longrightarrow> positive (denote x2 ?\\<rho>) \\<and>\n                    trace (denote x2 ?\\<rho>) \\<le> trace ?\\<rho> \\<and>\n                    denote x2 ?\\<rho> \\<in> carrier_mat d d\n\ngoal (1 subgoal):\n 1. denote x2 (x1 1 * \\<rho>\\<^sub>2 * adjoint (x1 1)) \\<in> carrier_mat d d", "by auto"], ["proof (state)\nthis:\n  denote x2 (x1 1 * \\<rho>\\<^sub>2 * adjoint (x1 1)) \\<in> carrier_mat d d\n\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<And>\\<rho>\\<^sub>1 \\<rho>\\<^sub>2.\n                \\<lbrakk>\\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n                 \\<rho>\\<^sub>2 \\<in> carrier_mat d d;\n                 partial_density_operator \\<rho>\\<^sub>1;\n                 partial_density_operator \\<rho>\\<^sub>2;\n                 Im (trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2)) = 0;\n                 Re (trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2))\n                 \\<le> 1\\<rbrakk>\n                \\<Longrightarrow> x1 0 *\n                                  denote_while_n_iter (x1 0) (x1 (Suc 0))\n                                   (denote x2) k\n                                   (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) *\n                                  adjoint (x1 0) =\n                                  x1 0 *\n                                  denote_while_n_iter (x1 0) (x1 (Suc 0))\n                                   (denote x2) k \\<rho>\\<^sub>1 *\n                                  adjoint (x1 0) +\n                                  x1 0 *\n                                  denote_while_n_iter (x1 0) (x1 (Suc 0))\n                                   (denote x2) k \\<rho>\\<^sub>2 *\n                                  adjoint (x1 0);\n     \\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n     \\<rho>\\<^sub>2 \\<in> carrier_mat d d;\n     partial_density_operator \\<rho>\\<^sub>1;\n     partial_density_operator \\<rho>\\<^sub>2;\n     Im (trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2)) = 0;\n     Re (trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2)) \\<le> 1\\<rbrakk>\n    \\<Longrightarrow> x1 0 *\n                      denote_while_n_iter (x1 0) (x1 (Suc 0)) (denote x2)\n                       (Suc k) (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) *\n                      adjoint (x1 0) =\n                      x1 0 *\n                      denote_while_n_iter (x1 0) (x1 (Suc 0)) (denote x2)\n                       (Suc k) \\<rho>\\<^sub>1 *\n                      adjoint (x1 0) +\n                      x1 0 *\n                      denote_while_n_iter (x1 0) (x1 (Suc 0)) (denote x2)\n                       (Suc k) \\<rho>\\<^sub>2 *\n                      adjoint (x1 0)", "have pdor1: \"partial_density_operator (denote x2 (x1 1 * \\<rho>\\<^sub>1 * adjoint (x1 1)))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. partial_density_operator\n     (denote x2 (x1 1 * \\<rho>\\<^sub>1 * adjoint (x1 1)))", "using denote_partial_density_operator assms dim1 pdo1"], ["proof (prove)\nusing this:\n  \\<lbrakk>well_com ?S; partial_density_operator ?\\<rho>;\n   ?\\<rho> \\<in> carrier_mat d d\\<rbrakk>\n  \\<Longrightarrow> partial_density_operator (denote ?S ?\\<rho>)\n  x1 0 \\<in> carrier_mat d d\n  x1 1 \\<in> carrier_mat d d\n  well_com x2\n  measurement d 2 x1\n  \\<lbrakk>?\\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n   ?\\<rho>\\<^sub>2 \\<in> carrier_mat d d;\n   partial_density_operator ?\\<rho>\\<^sub>1;\n   partial_density_operator ?\\<rho>\\<^sub>2;\n   trace (?\\<rho>\\<^sub>1 + ?\\<rho>\\<^sub>2) \\<le> 1\\<rbrakk>\n  \\<Longrightarrow> denote x2 (?\\<rho>\\<^sub>1 + ?\\<rho>\\<^sub>2) =\n                    denote x2 ?\\<rho>\\<^sub>1 + denote x2 ?\\<rho>\\<^sub>2\n  x1 1 * \\<rho>\\<^sub>1 * adjoint (x1 1) \\<in> carrier_mat d d\n  partial_density_operator (x1 1 * \\<rho>\\<^sub>1 * adjoint (x1 1))\n\ngoal (1 subgoal):\n 1. partial_density_operator\n     (denote x2 (x1 1 * \\<rho>\\<^sub>1 * adjoint (x1 1)))", "by auto"], ["proof (state)\nthis:\n  partial_density_operator\n   (denote x2 (x1 1 * \\<rho>\\<^sub>1 * adjoint (x1 1)))\n\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<And>\\<rho>\\<^sub>1 \\<rho>\\<^sub>2.\n                \\<lbrakk>\\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n                 \\<rho>\\<^sub>2 \\<in> carrier_mat d d;\n                 partial_density_operator \\<rho>\\<^sub>1;\n                 partial_density_operator \\<rho>\\<^sub>2;\n                 Im (trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2)) = 0;\n                 Re (trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2))\n                 \\<le> 1\\<rbrakk>\n                \\<Longrightarrow> x1 0 *\n                                  denote_while_n_iter (x1 0) (x1 (Suc 0))\n                                   (denote x2) k\n                                   (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) *\n                                  adjoint (x1 0) =\n                                  x1 0 *\n                                  denote_while_n_iter (x1 0) (x1 (Suc 0))\n                                   (denote x2) k \\<rho>\\<^sub>1 *\n                                  adjoint (x1 0) +\n                                  x1 0 *\n                                  denote_while_n_iter (x1 0) (x1 (Suc 0))\n                                   (denote x2) k \\<rho>\\<^sub>2 *\n                                  adjoint (x1 0);\n     \\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n     \\<rho>\\<^sub>2 \\<in> carrier_mat d d;\n     partial_density_operator \\<rho>\\<^sub>1;\n     partial_density_operator \\<rho>\\<^sub>2;\n     Im (trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2)) = 0;\n     Re (trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2)) \\<le> 1\\<rbrakk>\n    \\<Longrightarrow> x1 0 *\n                      denote_while_n_iter (x1 0) (x1 (Suc 0)) (denote x2)\n                       (Suc k) (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) *\n                      adjoint (x1 0) =\n                      x1 0 *\n                      denote_while_n_iter (x1 0) (x1 (Suc 0)) (denote x2)\n                       (Suc k) \\<rho>\\<^sub>1 *\n                      adjoint (x1 0) +\n                      x1 0 *\n                      denote_while_n_iter (x1 0) (x1 (Suc 0)) (denote x2)\n                       (Suc k) \\<rho>\\<^sub>2 *\n                      adjoint (x1 0)", "have pdor2: \"partial_density_operator (denote x2 (x1 1 * \\<rho>\\<^sub>2 * adjoint (x1 1)))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. partial_density_operator\n     (denote x2 (x1 1 * \\<rho>\\<^sub>2 * adjoint (x1 1)))", "using denote_partial_density_operator assms dim2 pdo2"], ["proof (prove)\nusing this:\n  \\<lbrakk>well_com ?S; partial_density_operator ?\\<rho>;\n   ?\\<rho> \\<in> carrier_mat d d\\<rbrakk>\n  \\<Longrightarrow> partial_density_operator (denote ?S ?\\<rho>)\n  x1 0 \\<in> carrier_mat d d\n  x1 1 \\<in> carrier_mat d d\n  well_com x2\n  measurement d 2 x1\n  \\<lbrakk>?\\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n   ?\\<rho>\\<^sub>2 \\<in> carrier_mat d d;\n   partial_density_operator ?\\<rho>\\<^sub>1;\n   partial_density_operator ?\\<rho>\\<^sub>2;\n   trace (?\\<rho>\\<^sub>1 + ?\\<rho>\\<^sub>2) \\<le> 1\\<rbrakk>\n  \\<Longrightarrow> denote x2 (?\\<rho>\\<^sub>1 + ?\\<rho>\\<^sub>2) =\n                    denote x2 ?\\<rho>\\<^sub>1 + denote x2 ?\\<rho>\\<^sub>2\n  x1 1 * \\<rho>\\<^sub>2 * adjoint (x1 1) \\<in> carrier_mat d d\n  partial_density_operator (x1 1 * \\<rho>\\<^sub>2 * adjoint (x1 1))\n\ngoal (1 subgoal):\n 1. partial_density_operator\n     (denote x2 (x1 1 * \\<rho>\\<^sub>2 * adjoint (x1 1)))", "by auto"], ["proof (state)\nthis:\n  partial_density_operator\n   (denote x2 (x1 1 * \\<rho>\\<^sub>2 * adjoint (x1 1)))\n\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<And>\\<rho>\\<^sub>1 \\<rho>\\<^sub>2.\n                \\<lbrakk>\\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n                 \\<rho>\\<^sub>2 \\<in> carrier_mat d d;\n                 partial_density_operator \\<rho>\\<^sub>1;\n                 partial_density_operator \\<rho>\\<^sub>2;\n                 Im (trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2)) = 0;\n                 Re (trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2))\n                 \\<le> 1\\<rbrakk>\n                \\<Longrightarrow> x1 0 *\n                                  denote_while_n_iter (x1 0) (x1 (Suc 0))\n                                   (denote x2) k\n                                   (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) *\n                                  adjoint (x1 0) =\n                                  x1 0 *\n                                  denote_while_n_iter (x1 0) (x1 (Suc 0))\n                                   (denote x2) k \\<rho>\\<^sub>1 *\n                                  adjoint (x1 0) +\n                                  x1 0 *\n                                  denote_while_n_iter (x1 0) (x1 (Suc 0))\n                                   (denote x2) k \\<rho>\\<^sub>2 *\n                                  adjoint (x1 0);\n     \\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n     \\<rho>\\<^sub>2 \\<in> carrier_mat d d;\n     partial_density_operator \\<rho>\\<^sub>1;\n     partial_density_operator \\<rho>\\<^sub>2;\n     Im (trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2)) = 0;\n     Re (trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2)) \\<le> 1\\<rbrakk>\n    \\<Longrightarrow> x1 0 *\n                      denote_while_n_iter (x1 0) (x1 (Suc 0)) (denote x2)\n                       (Suc k) (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) *\n                      adjoint (x1 0) =\n                      x1 0 *\n                      denote_while_n_iter (x1 0) (x1 (Suc 0)) (denote x2)\n                       (Suc k) \\<rho>\\<^sub>1 *\n                      adjoint (x1 0) +\n                      x1 0 *\n                      denote_while_n_iter (x1 0) (x1 (Suc 0)) (denote x2)\n                       (Suc k) \\<rho>\\<^sub>2 *\n                      adjoint (x1 0)", "have \"trace (denote x2 (x1 1 * \\<rho>\\<^sub>1 * adjoint (x1 1))) \\<le> trace (x1 1 * \\<rho>\\<^sub>1 * adjoint (x1 1))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. trace (denote x2 (x1 1 * \\<rho>\\<^sub>1 * adjoint (x1 1)))\n    \\<le> trace (x1 1 * \\<rho>\\<^sub>1 * adjoint (x1 1))", "using dx2 dim1 pdo1"], ["proof (prove)\nusing this:\n  \\<lbrakk>?\\<rho> \\<in> carrier_mat d d;\n   partial_density_operator ?\\<rho>\\<rbrakk>\n  \\<Longrightarrow> positive (denote x2 ?\\<rho>) \\<and>\n                    trace (denote x2 ?\\<rho>) \\<le> trace ?\\<rho> \\<and>\n                    denote x2 ?\\<rho> \\<in> carrier_mat d d\n  x1 1 * \\<rho>\\<^sub>1 * adjoint (x1 1) \\<in> carrier_mat d d\n  partial_density_operator (x1 1 * \\<rho>\\<^sub>1 * adjoint (x1 1))\n\ngoal (1 subgoal):\n 1. trace (denote x2 (x1 1 * \\<rho>\\<^sub>1 * adjoint (x1 1)))\n    \\<le> trace (x1 1 * \\<rho>\\<^sub>1 * adjoint (x1 1))", "by auto"], ["proof (state)\nthis:\n  trace (denote x2 (x1 1 * \\<rho>\\<^sub>1 * adjoint (x1 1)))\n  \\<le> trace (x1 1 * \\<rho>\\<^sub>1 * adjoint (x1 1))\n\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<And>\\<rho>\\<^sub>1 \\<rho>\\<^sub>2.\n                \\<lbrakk>\\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n                 \\<rho>\\<^sub>2 \\<in> carrier_mat d d;\n                 partial_density_operator \\<rho>\\<^sub>1;\n                 partial_density_operator \\<rho>\\<^sub>2;\n                 Im (trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2)) = 0;\n                 Re (trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2))\n                 \\<le> 1\\<rbrakk>\n                \\<Longrightarrow> x1 0 *\n                                  denote_while_n_iter (x1 0) (x1 (Suc 0))\n                                   (denote x2) k\n                                   (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) *\n                                  adjoint (x1 0) =\n                                  x1 0 *\n                                  denote_while_n_iter (x1 0) (x1 (Suc 0))\n                                   (denote x2) k \\<rho>\\<^sub>1 *\n                                  adjoint (x1 0) +\n                                  x1 0 *\n                                  denote_while_n_iter (x1 0) (x1 (Suc 0))\n                                   (denote x2) k \\<rho>\\<^sub>2 *\n                                  adjoint (x1 0);\n     \\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n     \\<rho>\\<^sub>2 \\<in> carrier_mat d d;\n     partial_density_operator \\<rho>\\<^sub>1;\n     partial_density_operator \\<rho>\\<^sub>2;\n     Im (trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2)) = 0;\n     Re (trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2)) \\<le> 1\\<rbrakk>\n    \\<Longrightarrow> x1 0 *\n                      denote_while_n_iter (x1 0) (x1 (Suc 0)) (denote x2)\n                       (Suc k) (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) *\n                      adjoint (x1 0) =\n                      x1 0 *\n                      denote_while_n_iter (x1 0) (x1 (Suc 0)) (denote x2)\n                       (Suc k) \\<rho>\\<^sub>1 *\n                      adjoint (x1 0) +\n                      x1 0 *\n                      denote_while_n_iter (x1 0) (x1 (Suc 0)) (denote x2)\n                       (Suc k) \\<rho>\\<^sub>2 *\n                      adjoint (x1 0)", "also"], ["proof (state)\nthis:\n  trace (denote x2 (x1 1 * \\<rho>\\<^sub>1 * adjoint (x1 1)))\n  \\<le> trace (x1 1 * \\<rho>\\<^sub>1 * adjoint (x1 1))\n\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<And>\\<rho>\\<^sub>1 \\<rho>\\<^sub>2.\n                \\<lbrakk>\\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n                 \\<rho>\\<^sub>2 \\<in> carrier_mat d d;\n                 partial_density_operator \\<rho>\\<^sub>1;\n                 partial_density_operator \\<rho>\\<^sub>2;\n                 Im (trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2)) = 0;\n                 Re (trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2))\n                 \\<le> 1\\<rbrakk>\n                \\<Longrightarrow> x1 0 *\n                                  denote_while_n_iter (x1 0) (x1 (Suc 0))\n                                   (denote x2) k\n                                   (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) *\n                                  adjoint (x1 0) =\n                                  x1 0 *\n                                  denote_while_n_iter (x1 0) (x1 (Suc 0))\n                                   (denote x2) k \\<rho>\\<^sub>1 *\n                                  adjoint (x1 0) +\n                                  x1 0 *\n                                  denote_while_n_iter (x1 0) (x1 (Suc 0))\n                                   (denote x2) k \\<rho>\\<^sub>2 *\n                                  adjoint (x1 0);\n     \\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n     \\<rho>\\<^sub>2 \\<in> carrier_mat d d;\n     partial_density_operator \\<rho>\\<^sub>1;\n     partial_density_operator \\<rho>\\<^sub>2;\n     Im (trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2)) = 0;\n     Re (trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2)) \\<le> 1\\<rbrakk>\n    \\<Longrightarrow> x1 0 *\n                      denote_while_n_iter (x1 0) (x1 (Suc 0)) (denote x2)\n                       (Suc k) (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) *\n                      adjoint (x1 0) =\n                      x1 0 *\n                      denote_while_n_iter (x1 0) (x1 (Suc 0)) (denote x2)\n                       (Suc k) \\<rho>\\<^sub>1 *\n                      adjoint (x1 0) +\n                      x1 0 *\n                      denote_while_n_iter (x1 0) (x1 (Suc 0)) (denote x2)\n                       (Suc k) \\<rho>\\<^sub>2 *\n                      adjoint (x1 0)", "have tr1: \"\\<dots> \\<le> trace \\<rho>\\<^sub>1\""], ["proof (prove)\ngoal (1 subgoal):\n 1. trace (x1 1 * \\<rho>\\<^sub>1 * adjoint (x1 1))\n    \\<le> trace \\<rho>\\<^sub>1", "using trace_decrease_mul_adj assms Suc lo1"], ["proof (prove)\nusing this:\n  \\<lbrakk>partial_density_operator ?\\<rho>; ?\\<rho> \\<in> carrier_mat d d;\n   ?x \\<in> carrier_mat d d;\n   adjoint ?x * ?x \\<le>\\<^sub>L 1\\<^sub>m d\\<rbrakk>\n  \\<Longrightarrow> trace (?x * ?\\<rho> * adjoint ?x) \\<le> trace ?\\<rho>\n  x1 0 \\<in> carrier_mat d d\n  x1 1 \\<in> carrier_mat d d\n  well_com x2\n  measurement d 2 x1\n  \\<lbrakk>?\\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n   ?\\<rho>\\<^sub>2 \\<in> carrier_mat d d;\n   partial_density_operator ?\\<rho>\\<^sub>1;\n   partial_density_operator ?\\<rho>\\<^sub>2;\n   trace (?\\<rho>\\<^sub>1 + ?\\<rho>\\<^sub>2) \\<le> 1\\<rbrakk>\n  \\<Longrightarrow> denote x2 (?\\<rho>\\<^sub>1 + ?\\<rho>\\<^sub>2) =\n                    denote x2 ?\\<rho>\\<^sub>1 + denote x2 ?\\<rho>\\<^sub>2\n  \\<lbrakk>?\\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n   ?\\<rho>\\<^sub>2 \\<in> carrier_mat d d;\n   partial_density_operator ?\\<rho>\\<^sub>1;\n   partial_density_operator ?\\<rho>\\<^sub>2;\n   Im (trace (?\\<rho>\\<^sub>1 + ?\\<rho>\\<^sub>2)) = 0;\n   Re (trace (?\\<rho>\\<^sub>1 + ?\\<rho>\\<^sub>2)) \\<le> 1\\<rbrakk>\n  \\<Longrightarrow> x1 0 *\n                    denote_while_n_iter (x1 0) (x1 (Suc 0)) (denote x2) k\n                     (?\\<rho>\\<^sub>1 + ?\\<rho>\\<^sub>2) *\n                    adjoint (x1 0) =\n                    x1 0 *\n                    denote_while_n_iter (x1 0) (x1 (Suc 0)) (denote x2) k\n                     ?\\<rho>\\<^sub>1 *\n                    adjoint (x1 0) +\n                    x1 0 *\n                    denote_while_n_iter (x1 0) (x1 (Suc 0)) (denote x2) k\n                     ?\\<rho>\\<^sub>2 *\n                    adjoint (x1 0)\n  \\<rho>\\<^sub>1 \\<in> carrier_mat d d\n  \\<rho>\\<^sub>2 \\<in> carrier_mat d d\n  partial_density_operator \\<rho>\\<^sub>1\n  partial_density_operator \\<rho>\\<^sub>2\n  Im (trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2)) = 0\n  Re (trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2)) \\<le> 1\n  adjoint (x1 1) * x1 1 \\<le>\\<^sub>L 1\\<^sub>m d\n\ngoal (1 subgoal):\n 1. trace (x1 1 * \\<rho>\\<^sub>1 * adjoint (x1 1))\n    \\<le> trace \\<rho>\\<^sub>1", "by auto"], ["proof (state)\nthis:\n  trace (x1 1 * \\<rho>\\<^sub>1 * adjoint (x1 1)) \\<le> trace \\<rho>\\<^sub>1\n\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<And>\\<rho>\\<^sub>1 \\<rho>\\<^sub>2.\n                \\<lbrakk>\\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n                 \\<rho>\\<^sub>2 \\<in> carrier_mat d d;\n                 partial_density_operator \\<rho>\\<^sub>1;\n                 partial_density_operator \\<rho>\\<^sub>2;\n                 Im (trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2)) = 0;\n                 Re (trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2))\n                 \\<le> 1\\<rbrakk>\n                \\<Longrightarrow> x1 0 *\n                                  denote_while_n_iter (x1 0) (x1 (Suc 0))\n                                   (denote x2) k\n                                   (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) *\n                                  adjoint (x1 0) =\n                                  x1 0 *\n                                  denote_while_n_iter (x1 0) (x1 (Suc 0))\n                                   (denote x2) k \\<rho>\\<^sub>1 *\n                                  adjoint (x1 0) +\n                                  x1 0 *\n                                  denote_while_n_iter (x1 0) (x1 (Suc 0))\n                                   (denote x2) k \\<rho>\\<^sub>2 *\n                                  adjoint (x1 0);\n     \\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n     \\<rho>\\<^sub>2 \\<in> carrier_mat d d;\n     partial_density_operator \\<rho>\\<^sub>1;\n     partial_density_operator \\<rho>\\<^sub>2;\n     Im (trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2)) = 0;\n     Re (trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2)) \\<le> 1\\<rbrakk>\n    \\<Longrightarrow> x1 0 *\n                      denote_while_n_iter (x1 0) (x1 (Suc 0)) (denote x2)\n                       (Suc k) (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) *\n                      adjoint (x1 0) =\n                      x1 0 *\n                      denote_while_n_iter (x1 0) (x1 (Suc 0)) (denote x2)\n                       (Suc k) \\<rho>\\<^sub>1 *\n                      adjoint (x1 0) +\n                      x1 0 *\n                      denote_while_n_iter (x1 0) (x1 (Suc 0)) (denote x2)\n                       (Suc k) \\<rho>\\<^sub>2 *\n                      adjoint (x1 0)", "finally"], ["proof (chain)\npicking this:\n  trace (denote x2 (x1 1 * \\<rho>\\<^sub>1 * adjoint (x1 1)))\n  \\<le> trace \\<rho>\\<^sub>1", "have trr1:\" trace (denote x2 (x1 1 * \\<rho>\\<^sub>1 * adjoint (x1 1))) \\<le> trace \\<rho>\\<^sub>1\""], ["proof (prove)\nusing this:\n  trace (denote x2 (x1 1 * \\<rho>\\<^sub>1 * adjoint (x1 1)))\n  \\<le> trace \\<rho>\\<^sub>1\n\ngoal (1 subgoal):\n 1. trace (denote x2 (x1 1 * \\<rho>\\<^sub>1 * adjoint (x1 1)))\n    \\<le> trace \\<rho>\\<^sub>1", "by auto"], ["proof (state)\nthis:\n  trace (denote x2 (x1 1 * \\<rho>\\<^sub>1 * adjoint (x1 1)))\n  \\<le> trace \\<rho>\\<^sub>1\n\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<And>\\<rho>\\<^sub>1 \\<rho>\\<^sub>2.\n                \\<lbrakk>\\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n                 \\<rho>\\<^sub>2 \\<in> carrier_mat d d;\n                 partial_density_operator \\<rho>\\<^sub>1;\n                 partial_density_operator \\<rho>\\<^sub>2;\n                 Im (trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2)) = 0;\n                 Re (trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2))\n                 \\<le> 1\\<rbrakk>\n                \\<Longrightarrow> x1 0 *\n                                  denote_while_n_iter (x1 0) (x1 (Suc 0))\n                                   (denote x2) k\n                                   (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) *\n                                  adjoint (x1 0) =\n                                  x1 0 *\n                                  denote_while_n_iter (x1 0) (x1 (Suc 0))\n                                   (denote x2) k \\<rho>\\<^sub>1 *\n                                  adjoint (x1 0) +\n                                  x1 0 *\n                                  denote_while_n_iter (x1 0) (x1 (Suc 0))\n                                   (denote x2) k \\<rho>\\<^sub>2 *\n                                  adjoint (x1 0);\n     \\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n     \\<rho>\\<^sub>2 \\<in> carrier_mat d d;\n     partial_density_operator \\<rho>\\<^sub>1;\n     partial_density_operator \\<rho>\\<^sub>2;\n     Im (trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2)) = 0;\n     Re (trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2)) \\<le> 1\\<rbrakk>\n    \\<Longrightarrow> x1 0 *\n                      denote_while_n_iter (x1 0) (x1 (Suc 0)) (denote x2)\n                       (Suc k) (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) *\n                      adjoint (x1 0) =\n                      x1 0 *\n                      denote_while_n_iter (x1 0) (x1 (Suc 0)) (denote x2)\n                       (Suc k) \\<rho>\\<^sub>1 *\n                      adjoint (x1 0) +\n                      x1 0 *\n                      denote_while_n_iter (x1 0) (x1 (Suc 0)) (denote x2)\n                       (Suc k) \\<rho>\\<^sub>2 *\n                      adjoint (x1 0)", "have \"trace (denote x2 (x1 1 * \\<rho>\\<^sub>2 * adjoint (x1 1))) \\<le> trace (x1 1 * \\<rho>\\<^sub>2 * adjoint (x1 1))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. trace (denote x2 (x1 1 * \\<rho>\\<^sub>2 * adjoint (x1 1)))\n    \\<le> trace (x1 1 * \\<rho>\\<^sub>2 * adjoint (x1 1))", "using dx2 dim2 pdo2"], ["proof (prove)\nusing this:\n  \\<lbrakk>?\\<rho> \\<in> carrier_mat d d;\n   partial_density_operator ?\\<rho>\\<rbrakk>\n  \\<Longrightarrow> positive (denote x2 ?\\<rho>) \\<and>\n                    trace (denote x2 ?\\<rho>) \\<le> trace ?\\<rho> \\<and>\n                    denote x2 ?\\<rho> \\<in> carrier_mat d d\n  x1 1 * \\<rho>\\<^sub>2 * adjoint (x1 1) \\<in> carrier_mat d d\n  partial_density_operator (x1 1 * \\<rho>\\<^sub>2 * adjoint (x1 1))\n\ngoal (1 subgoal):\n 1. trace (denote x2 (x1 1 * \\<rho>\\<^sub>2 * adjoint (x1 1)))\n    \\<le> trace (x1 1 * \\<rho>\\<^sub>2 * adjoint (x1 1))", "by auto"], ["proof (state)\nthis:\n  trace (denote x2 (x1 1 * \\<rho>\\<^sub>2 * adjoint (x1 1)))\n  \\<le> trace (x1 1 * \\<rho>\\<^sub>2 * adjoint (x1 1))\n\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<And>\\<rho>\\<^sub>1 \\<rho>\\<^sub>2.\n                \\<lbrakk>\\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n                 \\<rho>\\<^sub>2 \\<in> carrier_mat d d;\n                 partial_density_operator \\<rho>\\<^sub>1;\n                 partial_density_operator \\<rho>\\<^sub>2;\n                 Im (trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2)) = 0;\n                 Re (trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2))\n                 \\<le> 1\\<rbrakk>\n                \\<Longrightarrow> x1 0 *\n                                  denote_while_n_iter (x1 0) (x1 (Suc 0))\n                                   (denote x2) k\n                                   (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) *\n                                  adjoint (x1 0) =\n                                  x1 0 *\n                                  denote_while_n_iter (x1 0) (x1 (Suc 0))\n                                   (denote x2) k \\<rho>\\<^sub>1 *\n                                  adjoint (x1 0) +\n                                  x1 0 *\n                                  denote_while_n_iter (x1 0) (x1 (Suc 0))\n                                   (denote x2) k \\<rho>\\<^sub>2 *\n                                  adjoint (x1 0);\n     \\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n     \\<rho>\\<^sub>2 \\<in> carrier_mat d d;\n     partial_density_operator \\<rho>\\<^sub>1;\n     partial_density_operator \\<rho>\\<^sub>2;\n     Im (trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2)) = 0;\n     Re (trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2)) \\<le> 1\\<rbrakk>\n    \\<Longrightarrow> x1 0 *\n                      denote_while_n_iter (x1 0) (x1 (Suc 0)) (denote x2)\n                       (Suc k) (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) *\n                      adjoint (x1 0) =\n                      x1 0 *\n                      denote_while_n_iter (x1 0) (x1 (Suc 0)) (denote x2)\n                       (Suc k) \\<rho>\\<^sub>1 *\n                      adjoint (x1 0) +\n                      x1 0 *\n                      denote_while_n_iter (x1 0) (x1 (Suc 0)) (denote x2)\n                       (Suc k) \\<rho>\\<^sub>2 *\n                      adjoint (x1 0)", "also"], ["proof (state)\nthis:\n  trace (denote x2 (x1 1 * \\<rho>\\<^sub>2 * adjoint (x1 1)))\n  \\<le> trace (x1 1 * \\<rho>\\<^sub>2 * adjoint (x1 1))\n\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<And>\\<rho>\\<^sub>1 \\<rho>\\<^sub>2.\n                \\<lbrakk>\\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n                 \\<rho>\\<^sub>2 \\<in> carrier_mat d d;\n                 partial_density_operator \\<rho>\\<^sub>1;\n                 partial_density_operator \\<rho>\\<^sub>2;\n                 Im (trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2)) = 0;\n                 Re (trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2))\n                 \\<le> 1\\<rbrakk>\n                \\<Longrightarrow> x1 0 *\n                                  denote_while_n_iter (x1 0) (x1 (Suc 0))\n                                   (denote x2) k\n                                   (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) *\n                                  adjoint (x1 0) =\n                                  x1 0 *\n                                  denote_while_n_iter (x1 0) (x1 (Suc 0))\n                                   (denote x2) k \\<rho>\\<^sub>1 *\n                                  adjoint (x1 0) +\n                                  x1 0 *\n                                  denote_while_n_iter (x1 0) (x1 (Suc 0))\n                                   (denote x2) k \\<rho>\\<^sub>2 *\n                                  adjoint (x1 0);\n     \\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n     \\<rho>\\<^sub>2 \\<in> carrier_mat d d;\n     partial_density_operator \\<rho>\\<^sub>1;\n     partial_density_operator \\<rho>\\<^sub>2;\n     Im (trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2)) = 0;\n     Re (trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2)) \\<le> 1\\<rbrakk>\n    \\<Longrightarrow> x1 0 *\n                      denote_while_n_iter (x1 0) (x1 (Suc 0)) (denote x2)\n                       (Suc k) (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) *\n                      adjoint (x1 0) =\n                      x1 0 *\n                      denote_while_n_iter (x1 0) (x1 (Suc 0)) (denote x2)\n                       (Suc k) \\<rho>\\<^sub>1 *\n                      adjoint (x1 0) +\n                      x1 0 *\n                      denote_while_n_iter (x1 0) (x1 (Suc 0)) (denote x2)\n                       (Suc k) \\<rho>\\<^sub>2 *\n                      adjoint (x1 0)", "have tr2: \"\\<dots> \\<le> trace \\<rho>\\<^sub>2\""], ["proof (prove)\ngoal (1 subgoal):\n 1. trace (x1 1 * \\<rho>\\<^sub>2 * adjoint (x1 1))\n    \\<le> trace \\<rho>\\<^sub>2", "using trace_decrease_mul_adj assms Suc lo1"], ["proof (prove)\nusing this:\n  \\<lbrakk>partial_density_operator ?\\<rho>; ?\\<rho> \\<in> carrier_mat d d;\n   ?x \\<in> carrier_mat d d;\n   adjoint ?x * ?x \\<le>\\<^sub>L 1\\<^sub>m d\\<rbrakk>\n  \\<Longrightarrow> trace (?x * ?\\<rho> * adjoint ?x) \\<le> trace ?\\<rho>\n  x1 0 \\<in> carrier_mat d d\n  x1 1 \\<in> carrier_mat d d\n  well_com x2\n  measurement d 2 x1\n  \\<lbrakk>?\\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n   ?\\<rho>\\<^sub>2 \\<in> carrier_mat d d;\n   partial_density_operator ?\\<rho>\\<^sub>1;\n   partial_density_operator ?\\<rho>\\<^sub>2;\n   trace (?\\<rho>\\<^sub>1 + ?\\<rho>\\<^sub>2) \\<le> 1\\<rbrakk>\n  \\<Longrightarrow> denote x2 (?\\<rho>\\<^sub>1 + ?\\<rho>\\<^sub>2) =\n                    denote x2 ?\\<rho>\\<^sub>1 + denote x2 ?\\<rho>\\<^sub>2\n  \\<lbrakk>?\\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n   ?\\<rho>\\<^sub>2 \\<in> carrier_mat d d;\n   partial_density_operator ?\\<rho>\\<^sub>1;\n   partial_density_operator ?\\<rho>\\<^sub>2;\n   Im (trace (?\\<rho>\\<^sub>1 + ?\\<rho>\\<^sub>2)) = 0;\n   Re (trace (?\\<rho>\\<^sub>1 + ?\\<rho>\\<^sub>2)) \\<le> 1\\<rbrakk>\n  \\<Longrightarrow> x1 0 *\n                    denote_while_n_iter (x1 0) (x1 (Suc 0)) (denote x2) k\n                     (?\\<rho>\\<^sub>1 + ?\\<rho>\\<^sub>2) *\n                    adjoint (x1 0) =\n                    x1 0 *\n                    denote_while_n_iter (x1 0) (x1 (Suc 0)) (denote x2) k\n                     ?\\<rho>\\<^sub>1 *\n                    adjoint (x1 0) +\n                    x1 0 *\n                    denote_while_n_iter (x1 0) (x1 (Suc 0)) (denote x2) k\n                     ?\\<rho>\\<^sub>2 *\n                    adjoint (x1 0)\n  \\<rho>\\<^sub>1 \\<in> carrier_mat d d\n  \\<rho>\\<^sub>2 \\<in> carrier_mat d d\n  partial_density_operator \\<rho>\\<^sub>1\n  partial_density_operator \\<rho>\\<^sub>2\n  Im (trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2)) = 0\n  Re (trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2)) \\<le> 1\n  adjoint (x1 1) * x1 1 \\<le>\\<^sub>L 1\\<^sub>m d\n\ngoal (1 subgoal):\n 1. trace (x1 1 * \\<rho>\\<^sub>2 * adjoint (x1 1))\n    \\<le> trace \\<rho>\\<^sub>2", "by auto"], ["proof (state)\nthis:\n  trace (x1 1 * \\<rho>\\<^sub>2 * adjoint (x1 1)) \\<le> trace \\<rho>\\<^sub>2\n\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<And>\\<rho>\\<^sub>1 \\<rho>\\<^sub>2.\n                \\<lbrakk>\\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n                 \\<rho>\\<^sub>2 \\<in> carrier_mat d d;\n                 partial_density_operator \\<rho>\\<^sub>1;\n                 partial_density_operator \\<rho>\\<^sub>2;\n                 Im (trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2)) = 0;\n                 Re (trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2))\n                 \\<le> 1\\<rbrakk>\n                \\<Longrightarrow> x1 0 *\n                                  denote_while_n_iter (x1 0) (x1 (Suc 0))\n                                   (denote x2) k\n                                   (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) *\n                                  adjoint (x1 0) =\n                                  x1 0 *\n                                  denote_while_n_iter (x1 0) (x1 (Suc 0))\n                                   (denote x2) k \\<rho>\\<^sub>1 *\n                                  adjoint (x1 0) +\n                                  x1 0 *\n                                  denote_while_n_iter (x1 0) (x1 (Suc 0))\n                                   (denote x2) k \\<rho>\\<^sub>2 *\n                                  adjoint (x1 0);\n     \\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n     \\<rho>\\<^sub>2 \\<in> carrier_mat d d;\n     partial_density_operator \\<rho>\\<^sub>1;\n     partial_density_operator \\<rho>\\<^sub>2;\n     Im (trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2)) = 0;\n     Re (trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2)) \\<le> 1\\<rbrakk>\n    \\<Longrightarrow> x1 0 *\n                      denote_while_n_iter (x1 0) (x1 (Suc 0)) (denote x2)\n                       (Suc k) (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) *\n                      adjoint (x1 0) =\n                      x1 0 *\n                      denote_while_n_iter (x1 0) (x1 (Suc 0)) (denote x2)\n                       (Suc k) \\<rho>\\<^sub>1 *\n                      adjoint (x1 0) +\n                      x1 0 *\n                      denote_while_n_iter (x1 0) (x1 (Suc 0)) (denote x2)\n                       (Suc k) \\<rho>\\<^sub>2 *\n                      adjoint (x1 0)", "finally"], ["proof (chain)\npicking this:\n  trace (denote x2 (x1 1 * \\<rho>\\<^sub>2 * adjoint (x1 1)))\n  \\<le> trace \\<rho>\\<^sub>2", "have trr2:\" trace (denote x2 (x1 1 * \\<rho>\\<^sub>2 * adjoint (x1 1))) \\<le> trace \\<rho>\\<^sub>2\""], ["proof (prove)\nusing this:\n  trace (denote x2 (x1 1 * \\<rho>\\<^sub>2 * adjoint (x1 1)))\n  \\<le> trace \\<rho>\\<^sub>2\n\ngoal (1 subgoal):\n 1. trace (denote x2 (x1 1 * \\<rho>\\<^sub>2 * adjoint (x1 1)))\n    \\<le> trace \\<rho>\\<^sub>2", "by auto"], ["proof (state)\nthis:\n  trace (denote x2 (x1 1 * \\<rho>\\<^sub>2 * adjoint (x1 1)))\n  \\<le> trace \\<rho>\\<^sub>2\n\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<And>\\<rho>\\<^sub>1 \\<rho>\\<^sub>2.\n                \\<lbrakk>\\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n                 \\<rho>\\<^sub>2 \\<in> carrier_mat d d;\n                 partial_density_operator \\<rho>\\<^sub>1;\n                 partial_density_operator \\<rho>\\<^sub>2;\n                 Im (trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2)) = 0;\n                 Re (trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2))\n                 \\<le> 1\\<rbrakk>\n                \\<Longrightarrow> x1 0 *\n                                  denote_while_n_iter (x1 0) (x1 (Suc 0))\n                                   (denote x2) k\n                                   (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) *\n                                  adjoint (x1 0) =\n                                  x1 0 *\n                                  denote_while_n_iter (x1 0) (x1 (Suc 0))\n                                   (denote x2) k \\<rho>\\<^sub>1 *\n                                  adjoint (x1 0) +\n                                  x1 0 *\n                                  denote_while_n_iter (x1 0) (x1 (Suc 0))\n                                   (denote x2) k \\<rho>\\<^sub>2 *\n                                  adjoint (x1 0);\n     \\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n     \\<rho>\\<^sub>2 \\<in> carrier_mat d d;\n     partial_density_operator \\<rho>\\<^sub>1;\n     partial_density_operator \\<rho>\\<^sub>2;\n     Im (trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2)) = 0;\n     Re (trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2)) \\<le> 1\\<rbrakk>\n    \\<Longrightarrow> x1 0 *\n                      denote_while_n_iter (x1 0) (x1 (Suc 0)) (denote x2)\n                       (Suc k) (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) *\n                      adjoint (x1 0) =\n                      x1 0 *\n                      denote_while_n_iter (x1 0) (x1 (Suc 0)) (denote x2)\n                       (Suc k) \\<rho>\\<^sub>1 *\n                      adjoint (x1 0) +\n                      x1 0 *\n                      denote_while_n_iter (x1 0) (x1 (Suc 0)) (denote x2)\n                       (Suc k) \\<rho>\\<^sub>2 *\n                      adjoint (x1 0)", "from tr1 tr2 Suc"], ["proof (chain)\npicking this:\n  trace (x1 1 * \\<rho>\\<^sub>1 * adjoint (x1 1)) \\<le> trace \\<rho>\\<^sub>1\n  trace (x1 1 * \\<rho>\\<^sub>2 * adjoint (x1 1)) \\<le> trace \\<rho>\\<^sub>2\n  \\<lbrakk>?\\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n   ?\\<rho>\\<^sub>2 \\<in> carrier_mat d d;\n   partial_density_operator ?\\<rho>\\<^sub>1;\n   partial_density_operator ?\\<rho>\\<^sub>2;\n   Im (trace (?\\<rho>\\<^sub>1 + ?\\<rho>\\<^sub>2)) = 0;\n   Re (trace (?\\<rho>\\<^sub>1 + ?\\<rho>\\<^sub>2)) \\<le> 1\\<rbrakk>\n  \\<Longrightarrow> x1 0 *\n                    denote_while_n_iter (x1 0) (x1 (Suc 0)) (denote x2) k\n                     (?\\<rho>\\<^sub>1 + ?\\<rho>\\<^sub>2) *\n                    adjoint (x1 0) =\n                    x1 0 *\n                    denote_while_n_iter (x1 0) (x1 (Suc 0)) (denote x2) k\n                     ?\\<rho>\\<^sub>1 *\n                    adjoint (x1 0) +\n                    x1 0 *\n                    denote_while_n_iter (x1 0) (x1 (Suc 0)) (denote x2) k\n                     ?\\<rho>\\<^sub>2 *\n                    adjoint (x1 0)\n  \\<rho>\\<^sub>1 \\<in> carrier_mat d d\n  \\<rho>\\<^sub>2 \\<in> carrier_mat d d\n  partial_density_operator \\<rho>\\<^sub>1\n  partial_density_operator \\<rho>\\<^sub>2\n  Im (trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2)) = 0\n  Re (trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2)) \\<le> 1", "have \"trace ( (x1 1 * \\<rho>\\<^sub>1 * adjoint (x1 1)) +  (x1 1 * \\<rho>\\<^sub>2 * adjoint (x1 1))) \\<le> trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2)\""], ["proof (prove)\nusing this:\n  trace (x1 1 * \\<rho>\\<^sub>1 * adjoint (x1 1)) \\<le> trace \\<rho>\\<^sub>1\n  trace (x1 1 * \\<rho>\\<^sub>2 * adjoint (x1 1)) \\<le> trace \\<rho>\\<^sub>2\n  \\<lbrakk>?\\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n   ?\\<rho>\\<^sub>2 \\<in> carrier_mat d d;\n   partial_density_operator ?\\<rho>\\<^sub>1;\n   partial_density_operator ?\\<rho>\\<^sub>2;\n   Im (trace (?\\<rho>\\<^sub>1 + ?\\<rho>\\<^sub>2)) = 0;\n   Re (trace (?\\<rho>\\<^sub>1 + ?\\<rho>\\<^sub>2)) \\<le> 1\\<rbrakk>\n  \\<Longrightarrow> x1 0 *\n                    denote_while_n_iter (x1 0) (x1 (Suc 0)) (denote x2) k\n                     (?\\<rho>\\<^sub>1 + ?\\<rho>\\<^sub>2) *\n                    adjoint (x1 0) =\n                    x1 0 *\n                    denote_while_n_iter (x1 0) (x1 (Suc 0)) (denote x2) k\n                     ?\\<rho>\\<^sub>1 *\n                    adjoint (x1 0) +\n                    x1 0 *\n                    denote_while_n_iter (x1 0) (x1 (Suc 0)) (denote x2) k\n                     ?\\<rho>\\<^sub>2 *\n                    adjoint (x1 0)\n  \\<rho>\\<^sub>1 \\<in> carrier_mat d d\n  \\<rho>\\<^sub>2 \\<in> carrier_mat d d\n  partial_density_operator \\<rho>\\<^sub>1\n  partial_density_operator \\<rho>\\<^sub>2\n  Im (trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2)) = 0\n  Re (trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2)) \\<le> 1\n\ngoal (1 subgoal):\n 1. trace\n     (x1 1 * \\<rho>\\<^sub>1 * adjoint (x1 1) +\n      x1 1 * \\<rho>\\<^sub>2 * adjoint (x1 1))\n    \\<le> trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2)", "using trace_add_linear trace_add_linear[of \"(x1 1 * \\<rho>\\<^sub>1 * adjoint (x1 1))\" d \"(x1 1 * \\<rho>\\<^sub>2 * adjoint (x1 1))\"]\n            trace_add_linear[of \\<rho>\\<^sub>1 d \\<rho>\\<^sub>2]"], ["proof (prove)\nusing this:\n  trace (x1 1 * \\<rho>\\<^sub>1 * adjoint (x1 1)) \\<le> trace \\<rho>\\<^sub>1\n  trace (x1 1 * \\<rho>\\<^sub>2 * adjoint (x1 1)) \\<le> trace \\<rho>\\<^sub>2\n  \\<lbrakk>?\\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n   ?\\<rho>\\<^sub>2 \\<in> carrier_mat d d;\n   partial_density_operator ?\\<rho>\\<^sub>1;\n   partial_density_operator ?\\<rho>\\<^sub>2;\n   Im (trace (?\\<rho>\\<^sub>1 + ?\\<rho>\\<^sub>2)) = 0;\n   Re (trace (?\\<rho>\\<^sub>1 + ?\\<rho>\\<^sub>2)) \\<le> 1\\<rbrakk>\n  \\<Longrightarrow> x1 0 *\n                    denote_while_n_iter (x1 0) (x1 (Suc 0)) (denote x2) k\n                     (?\\<rho>\\<^sub>1 + ?\\<rho>\\<^sub>2) *\n                    adjoint (x1 0) =\n                    x1 0 *\n                    denote_while_n_iter (x1 0) (x1 (Suc 0)) (denote x2) k\n                     ?\\<rho>\\<^sub>1 *\n                    adjoint (x1 0) +\n                    x1 0 *\n                    denote_while_n_iter (x1 0) (x1 (Suc 0)) (denote x2) k\n                     ?\\<rho>\\<^sub>2 *\n                    adjoint (x1 0)\n  \\<rho>\\<^sub>1 \\<in> carrier_mat d d\n  \\<rho>\\<^sub>2 \\<in> carrier_mat d d\n  partial_density_operator \\<rho>\\<^sub>1\n  partial_density_operator \\<rho>\\<^sub>2\n  Im (trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2)) = 0\n  Re (trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2)) \\<le> 1\n  \\<lbrakk>?A \\<in> carrier_mat ?n ?n; ?B \\<in> carrier_mat ?n ?n\\<rbrakk>\n  \\<Longrightarrow> trace (?A + ?B) = trace ?A + trace ?B\n  \\<lbrakk>x1 1 * \\<rho>\\<^sub>1 * adjoint (x1 1) \\<in> carrier_mat d d;\n   x1 1 * \\<rho>\\<^sub>2 * adjoint (x1 1) \\<in> carrier_mat d d\\<rbrakk>\n  \\<Longrightarrow> trace\n                     (x1 1 * \\<rho>\\<^sub>1 * adjoint (x1 1) +\n                      x1 1 * \\<rho>\\<^sub>2 * adjoint (x1 1)) =\n                    trace (x1 1 * \\<rho>\\<^sub>1 * adjoint (x1 1)) +\n                    trace (x1 1 * \\<rho>\\<^sub>2 * adjoint (x1 1))\n  \\<lbrakk>\\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n   \\<rho>\\<^sub>2 \\<in> carrier_mat d d\\<rbrakk>\n  \\<Longrightarrow> trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) =\n                    trace \\<rho>\\<^sub>1 + trace \\<rho>\\<^sub>2\n\ngoal (1 subgoal):\n 1. trace\n     (x1 1 * \\<rho>\\<^sub>1 * adjoint (x1 1) +\n      x1 1 * \\<rho>\\<^sub>2 * adjoint (x1 1))\n    \\<le> trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2)", "using dim1 dim2"], ["proof (prove)\nusing this:\n  trace (x1 1 * \\<rho>\\<^sub>1 * adjoint (x1 1)) \\<le> trace \\<rho>\\<^sub>1\n  trace (x1 1 * \\<rho>\\<^sub>2 * adjoint (x1 1)) \\<le> trace \\<rho>\\<^sub>2\n  \\<lbrakk>?\\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n   ?\\<rho>\\<^sub>2 \\<in> carrier_mat d d;\n   partial_density_operator ?\\<rho>\\<^sub>1;\n   partial_density_operator ?\\<rho>\\<^sub>2;\n   Im (trace (?\\<rho>\\<^sub>1 + ?\\<rho>\\<^sub>2)) = 0;\n   Re (trace (?\\<rho>\\<^sub>1 + ?\\<rho>\\<^sub>2)) \\<le> 1\\<rbrakk>\n  \\<Longrightarrow> x1 0 *\n                    denote_while_n_iter (x1 0) (x1 (Suc 0)) (denote x2) k\n                     (?\\<rho>\\<^sub>1 + ?\\<rho>\\<^sub>2) *\n                    adjoint (x1 0) =\n                    x1 0 *\n                    denote_while_n_iter (x1 0) (x1 (Suc 0)) (denote x2) k\n                     ?\\<rho>\\<^sub>1 *\n                    adjoint (x1 0) +\n                    x1 0 *\n                    denote_while_n_iter (x1 0) (x1 (Suc 0)) (denote x2) k\n                     ?\\<rho>\\<^sub>2 *\n                    adjoint (x1 0)\n  \\<rho>\\<^sub>1 \\<in> carrier_mat d d\n  \\<rho>\\<^sub>2 \\<in> carrier_mat d d\n  partial_density_operator \\<rho>\\<^sub>1\n  partial_density_operator \\<rho>\\<^sub>2\n  Im (trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2)) = 0\n  Re (trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2)) \\<le> 1\n  \\<lbrakk>?A \\<in> carrier_mat ?n ?n; ?B \\<in> carrier_mat ?n ?n\\<rbrakk>\n  \\<Longrightarrow> trace (?A + ?B) = trace ?A + trace ?B\n  \\<lbrakk>x1 1 * \\<rho>\\<^sub>1 * adjoint (x1 1) \\<in> carrier_mat d d;\n   x1 1 * \\<rho>\\<^sub>2 * adjoint (x1 1) \\<in> carrier_mat d d\\<rbrakk>\n  \\<Longrightarrow> trace\n                     (x1 1 * \\<rho>\\<^sub>1 * adjoint (x1 1) +\n                      x1 1 * \\<rho>\\<^sub>2 * adjoint (x1 1)) =\n                    trace (x1 1 * \\<rho>\\<^sub>1 * adjoint (x1 1)) +\n                    trace (x1 1 * \\<rho>\\<^sub>2 * adjoint (x1 1))\n  \\<lbrakk>\\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n   \\<rho>\\<^sub>2 \\<in> carrier_mat d d\\<rbrakk>\n  \\<Longrightarrow> trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) =\n                    trace \\<rho>\\<^sub>1 + trace \\<rho>\\<^sub>2\n  x1 1 * \\<rho>\\<^sub>1 * adjoint (x1 1) \\<in> carrier_mat d d\n  x1 1 * \\<rho>\\<^sub>2 * adjoint (x1 1) \\<in> carrier_mat d d\n\ngoal (1 subgoal):\n 1. trace\n     (x1 1 * \\<rho>\\<^sub>1 * adjoint (x1 1) +\n      x1 1 * \\<rho>\\<^sub>2 * adjoint (x1 1))\n    \\<le> trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2)", "by auto"], ["proof (state)\nthis:\n  trace\n   (x1 1 * \\<rho>\\<^sub>1 * adjoint (x1 1) +\n    x1 1 * \\<rho>\\<^sub>2 * adjoint (x1 1))\n  \\<le> trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2)\n\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<And>\\<rho>\\<^sub>1 \\<rho>\\<^sub>2.\n                \\<lbrakk>\\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n                 \\<rho>\\<^sub>2 \\<in> carrier_mat d d;\n                 partial_density_operator \\<rho>\\<^sub>1;\n                 partial_density_operator \\<rho>\\<^sub>2;\n                 Im (trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2)) = 0;\n                 Re (trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2))\n                 \\<le> 1\\<rbrakk>\n                \\<Longrightarrow> x1 0 *\n                                  denote_while_n_iter (x1 0) (x1 (Suc 0))\n                                   (denote x2) k\n                                   (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) *\n                                  adjoint (x1 0) =\n                                  x1 0 *\n                                  denote_while_n_iter (x1 0) (x1 (Suc 0))\n                                   (denote x2) k \\<rho>\\<^sub>1 *\n                                  adjoint (x1 0) +\n                                  x1 0 *\n                                  denote_while_n_iter (x1 0) (x1 (Suc 0))\n                                   (denote x2) k \\<rho>\\<^sub>2 *\n                                  adjoint (x1 0);\n     \\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n     \\<rho>\\<^sub>2 \\<in> carrier_mat d d;\n     partial_density_operator \\<rho>\\<^sub>1;\n     partial_density_operator \\<rho>\\<^sub>2;\n     Im (trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2)) = 0;\n     Re (trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2)) \\<le> 1\\<rbrakk>\n    \\<Longrightarrow> x1 0 *\n                      denote_while_n_iter (x1 0) (x1 (Suc 0)) (denote x2)\n                       (Suc k) (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) *\n                      adjoint (x1 0) =\n                      x1 0 *\n                      denote_while_n_iter (x1 0) (x1 (Suc 0)) (denote x2)\n                       (Suc k) \\<rho>\\<^sub>1 *\n                      adjoint (x1 0) +\n                      x1 0 *\n                      denote_while_n_iter (x1 0) (x1 (Suc 0)) (denote x2)\n                       (Suc k) \\<rho>\\<^sub>2 *\n                      adjoint (x1 0)", "then"], ["proof (chain)\npicking this:\n  trace\n   (x1 1 * \\<rho>\\<^sub>1 * adjoint (x1 1) +\n    x1 1 * \\<rho>\\<^sub>2 * adjoint (x1 1))\n  \\<le> trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2)", "have trless1: \"trace ( (x1 1 * \\<rho>\\<^sub>1 * adjoint (x1 1)) +  (x1 1 * \\<rho>\\<^sub>2 * adjoint (x1 1))) \\<le> 1\""], ["proof (prove)\nusing this:\n  trace\n   (x1 1 * \\<rho>\\<^sub>1 * adjoint (x1 1) +\n    x1 1 * \\<rho>\\<^sub>2 * adjoint (x1 1))\n  \\<le> trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2)\n\ngoal (1 subgoal):\n 1. trace\n     (x1 1 * \\<rho>\\<^sub>1 * adjoint (x1 1) +\n      x1 1 * \\<rho>\\<^sub>2 * adjoint (x1 1))\n    \\<le> 1", "using Suc"], ["proof (prove)\nusing this:\n  trace\n   (x1 1 * \\<rho>\\<^sub>1 * adjoint (x1 1) +\n    x1 1 * \\<rho>\\<^sub>2 * adjoint (x1 1))\n  \\<le> trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2)\n  \\<lbrakk>?\\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n   ?\\<rho>\\<^sub>2 \\<in> carrier_mat d d;\n   partial_density_operator ?\\<rho>\\<^sub>1;\n   partial_density_operator ?\\<rho>\\<^sub>2;\n   Im (trace (?\\<rho>\\<^sub>1 + ?\\<rho>\\<^sub>2)) = 0;\n   Re (trace (?\\<rho>\\<^sub>1 + ?\\<rho>\\<^sub>2)) \\<le> 1\\<rbrakk>\n  \\<Longrightarrow> x1 0 *\n                    denote_while_n_iter (x1 0) (x1 (Suc 0)) (denote x2) k\n                     (?\\<rho>\\<^sub>1 + ?\\<rho>\\<^sub>2) *\n                    adjoint (x1 0) =\n                    x1 0 *\n                    denote_while_n_iter (x1 0) (x1 (Suc 0)) (denote x2) k\n                     ?\\<rho>\\<^sub>1 *\n                    adjoint (x1 0) +\n                    x1 0 *\n                    denote_while_n_iter (x1 0) (x1 (Suc 0)) (denote x2) k\n                     ?\\<rho>\\<^sub>2 *\n                    adjoint (x1 0)\n  \\<rho>\\<^sub>1 \\<in> carrier_mat d d\n  \\<rho>\\<^sub>2 \\<in> carrier_mat d d\n  partial_density_operator \\<rho>\\<^sub>1\n  partial_density_operator \\<rho>\\<^sub>2\n  Im (trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2)) = 0\n  Re (trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2)) \\<le> 1\n\ngoal (1 subgoal):\n 1. trace\n     (x1 1 * \\<rho>\\<^sub>1 * adjoint (x1 1) +\n      x1 1 * \\<rho>\\<^sub>2 * adjoint (x1 1))\n    \\<le> 1", "by auto"], ["proof (state)\nthis:\n  trace\n   (x1 1 * \\<rho>\\<^sub>1 * adjoint (x1 1) +\n    x1 1 * \\<rho>\\<^sub>2 * adjoint (x1 1))\n  \\<le> 1\n\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<And>\\<rho>\\<^sub>1 \\<rho>\\<^sub>2.\n                \\<lbrakk>\\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n                 \\<rho>\\<^sub>2 \\<in> carrier_mat d d;\n                 partial_density_operator \\<rho>\\<^sub>1;\n                 partial_density_operator \\<rho>\\<^sub>2;\n                 Im (trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2)) = 0;\n                 Re (trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2))\n                 \\<le> 1\\<rbrakk>\n                \\<Longrightarrow> x1 0 *\n                                  denote_while_n_iter (x1 0) (x1 (Suc 0))\n                                   (denote x2) k\n                                   (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) *\n                                  adjoint (x1 0) =\n                                  x1 0 *\n                                  denote_while_n_iter (x1 0) (x1 (Suc 0))\n                                   (denote x2) k \\<rho>\\<^sub>1 *\n                                  adjoint (x1 0) +\n                                  x1 0 *\n                                  denote_while_n_iter (x1 0) (x1 (Suc 0))\n                                   (denote x2) k \\<rho>\\<^sub>2 *\n                                  adjoint (x1 0);\n     \\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n     \\<rho>\\<^sub>2 \\<in> carrier_mat d d;\n     partial_density_operator \\<rho>\\<^sub>1;\n     partial_density_operator \\<rho>\\<^sub>2;\n     Im (trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2)) = 0;\n     Re (trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2)) \\<le> 1\\<rbrakk>\n    \\<Longrightarrow> x1 0 *\n                      denote_while_n_iter (x1 0) (x1 (Suc 0)) (denote x2)\n                       (Suc k) (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) *\n                      adjoint (x1 0) =\n                      x1 0 *\n                      denote_while_n_iter (x1 0) (x1 (Suc 0)) (denote x2)\n                       (Suc k) \\<rho>\\<^sub>1 *\n                      adjoint (x1 0) +\n                      x1 0 *\n                      denote_while_n_iter (x1 0) (x1 (Suc 0)) (denote x2)\n                       (Suc k) \\<rho>\\<^sub>2 *\n                      adjoint (x1 0)", "from trr1 trr2 Suc"], ["proof (chain)\npicking this:\n  trace (denote x2 (x1 1 * \\<rho>\\<^sub>1 * adjoint (x1 1)))\n  \\<le> trace \\<rho>\\<^sub>1\n  trace (denote x2 (x1 1 * \\<rho>\\<^sub>2 * adjoint (x1 1)))\n  \\<le> trace \\<rho>\\<^sub>2\n  \\<lbrakk>?\\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n   ?\\<rho>\\<^sub>2 \\<in> carrier_mat d d;\n   partial_density_operator ?\\<rho>\\<^sub>1;\n   partial_density_operator ?\\<rho>\\<^sub>2;\n   Im (trace (?\\<rho>\\<^sub>1 + ?\\<rho>\\<^sub>2)) = 0;\n   Re (trace (?\\<rho>\\<^sub>1 + ?\\<rho>\\<^sub>2)) \\<le> 1\\<rbrakk>\n  \\<Longrightarrow> x1 0 *\n                    denote_while_n_iter (x1 0) (x1 (Suc 0)) (denote x2) k\n                     (?\\<rho>\\<^sub>1 + ?\\<rho>\\<^sub>2) *\n                    adjoint (x1 0) =\n                    x1 0 *\n                    denote_while_n_iter (x1 0) (x1 (Suc 0)) (denote x2) k\n                     ?\\<rho>\\<^sub>1 *\n                    adjoint (x1 0) +\n                    x1 0 *\n                    denote_while_n_iter (x1 0) (x1 (Suc 0)) (denote x2) k\n                     ?\\<rho>\\<^sub>2 *\n                    adjoint (x1 0)\n  \\<rho>\\<^sub>1 \\<in> carrier_mat d d\n  \\<rho>\\<^sub>2 \\<in> carrier_mat d d\n  partial_density_operator \\<rho>\\<^sub>1\n  partial_density_operator \\<rho>\\<^sub>2\n  Im (trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2)) = 0\n  Re (trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2)) \\<le> 1", "have \"trace (denote x2 (x1 1 * \\<rho>\\<^sub>1 * adjoint (x1 1)) + denote x2 (x1 1 * \\<rho>\\<^sub>2 * adjoint (x1 1))) \\<le> trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2)\""], ["proof (prove)\nusing this:\n  trace (denote x2 (x1 1 * \\<rho>\\<^sub>1 * adjoint (x1 1)))\n  \\<le> trace \\<rho>\\<^sub>1\n  trace (denote x2 (x1 1 * \\<rho>\\<^sub>2 * adjoint (x1 1)))\n  \\<le> trace \\<rho>\\<^sub>2\n  \\<lbrakk>?\\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n   ?\\<rho>\\<^sub>2 \\<in> carrier_mat d d;\n   partial_density_operator ?\\<rho>\\<^sub>1;\n   partial_density_operator ?\\<rho>\\<^sub>2;\n   Im (trace (?\\<rho>\\<^sub>1 + ?\\<rho>\\<^sub>2)) = 0;\n   Re (trace (?\\<rho>\\<^sub>1 + ?\\<rho>\\<^sub>2)) \\<le> 1\\<rbrakk>\n  \\<Longrightarrow> x1 0 *\n                    denote_while_n_iter (x1 0) (x1 (Suc 0)) (denote x2) k\n                     (?\\<rho>\\<^sub>1 + ?\\<rho>\\<^sub>2) *\n                    adjoint (x1 0) =\n                    x1 0 *\n                    denote_while_n_iter (x1 0) (x1 (Suc 0)) (denote x2) k\n                     ?\\<rho>\\<^sub>1 *\n                    adjoint (x1 0) +\n                    x1 0 *\n                    denote_while_n_iter (x1 0) (x1 (Suc 0)) (denote x2) k\n                     ?\\<rho>\\<^sub>2 *\n                    adjoint (x1 0)\n  \\<rho>\\<^sub>1 \\<in> carrier_mat d d\n  \\<rho>\\<^sub>2 \\<in> carrier_mat d d\n  partial_density_operator \\<rho>\\<^sub>1\n  partial_density_operator \\<rho>\\<^sub>2\n  Im (trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2)) = 0\n  Re (trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2)) \\<le> 1\n\ngoal (1 subgoal):\n 1. trace\n     (denote x2 (x1 1 * \\<rho>\\<^sub>1 * adjoint (x1 1)) +\n      denote x2 (x1 1 * \\<rho>\\<^sub>2 * adjoint (x1 1)))\n    \\<le> trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2)", "using trace_add_linear[of \"denote x2 (x1 1 * \\<rho>\\<^sub>1 * adjoint (x1 1))\" d \"denote x2 (x1 1 * \\<rho>\\<^sub>2 * adjoint (x1 1))\"]\n            trace_add_linear[of \\<rho>\\<^sub>1 d \\<rho>\\<^sub>2]"], ["proof (prove)\nusing this:\n  trace (denote x2 (x1 1 * \\<rho>\\<^sub>1 * adjoint (x1 1)))\n  \\<le> trace \\<rho>\\<^sub>1\n  trace (denote x2 (x1 1 * \\<rho>\\<^sub>2 * adjoint (x1 1)))\n  \\<le> trace \\<rho>\\<^sub>2\n  \\<lbrakk>?\\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n   ?\\<rho>\\<^sub>2 \\<in> carrier_mat d d;\n   partial_density_operator ?\\<rho>\\<^sub>1;\n   partial_density_operator ?\\<rho>\\<^sub>2;\n   Im (trace (?\\<rho>\\<^sub>1 + ?\\<rho>\\<^sub>2)) = 0;\n   Re (trace (?\\<rho>\\<^sub>1 + ?\\<rho>\\<^sub>2)) \\<le> 1\\<rbrakk>\n  \\<Longrightarrow> x1 0 *\n                    denote_while_n_iter (x1 0) (x1 (Suc 0)) (denote x2) k\n                     (?\\<rho>\\<^sub>1 + ?\\<rho>\\<^sub>2) *\n                    adjoint (x1 0) =\n                    x1 0 *\n                    denote_while_n_iter (x1 0) (x1 (Suc 0)) (denote x2) k\n                     ?\\<rho>\\<^sub>1 *\n                    adjoint (x1 0) +\n                    x1 0 *\n                    denote_while_n_iter (x1 0) (x1 (Suc 0)) (denote x2) k\n                     ?\\<rho>\\<^sub>2 *\n                    adjoint (x1 0)\n  \\<rho>\\<^sub>1 \\<in> carrier_mat d d\n  \\<rho>\\<^sub>2 \\<in> carrier_mat d d\n  partial_density_operator \\<rho>\\<^sub>1\n  partial_density_operator \\<rho>\\<^sub>2\n  Im (trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2)) = 0\n  Re (trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2)) \\<le> 1\n  \\<lbrakk>denote x2 (x1 1 * \\<rho>\\<^sub>1 * adjoint (x1 1))\n           \\<in> carrier_mat d d;\n   denote x2 (x1 1 * \\<rho>\\<^sub>2 * adjoint (x1 1))\n   \\<in> carrier_mat d d\\<rbrakk>\n  \\<Longrightarrow> trace\n                     (denote x2 (x1 1 * \\<rho>\\<^sub>1 * adjoint (x1 1)) +\n                      denote x2 (x1 1 * \\<rho>\\<^sub>2 * adjoint (x1 1))) =\n                    trace\n                     (denote x2 (x1 1 * \\<rho>\\<^sub>1 * adjoint (x1 1))) +\n                    trace\n                     (denote x2 (x1 1 * \\<rho>\\<^sub>2 * adjoint (x1 1)))\n  \\<lbrakk>\\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n   \\<rho>\\<^sub>2 \\<in> carrier_mat d d\\<rbrakk>\n  \\<Longrightarrow> trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) =\n                    trace \\<rho>\\<^sub>1 + trace \\<rho>\\<^sub>2\n\ngoal (1 subgoal):\n 1. trace\n     (denote x2 (x1 1 * \\<rho>\\<^sub>1 * adjoint (x1 1)) +\n      denote x2 (x1 1 * \\<rho>\\<^sub>2 * adjoint (x1 1)))\n    \\<le> trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2)", "using dimr1 dimr2"], ["proof (prove)\nusing this:\n  trace (denote x2 (x1 1 * \\<rho>\\<^sub>1 * adjoint (x1 1)))\n  \\<le> trace \\<rho>\\<^sub>1\n  trace (denote x2 (x1 1 * \\<rho>\\<^sub>2 * adjoint (x1 1)))\n  \\<le> trace \\<rho>\\<^sub>2\n  \\<lbrakk>?\\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n   ?\\<rho>\\<^sub>2 \\<in> carrier_mat d d;\n   partial_density_operator ?\\<rho>\\<^sub>1;\n   partial_density_operator ?\\<rho>\\<^sub>2;\n   Im (trace (?\\<rho>\\<^sub>1 + ?\\<rho>\\<^sub>2)) = 0;\n   Re (trace (?\\<rho>\\<^sub>1 + ?\\<rho>\\<^sub>2)) \\<le> 1\\<rbrakk>\n  \\<Longrightarrow> x1 0 *\n                    denote_while_n_iter (x1 0) (x1 (Suc 0)) (denote x2) k\n                     (?\\<rho>\\<^sub>1 + ?\\<rho>\\<^sub>2) *\n                    adjoint (x1 0) =\n                    x1 0 *\n                    denote_while_n_iter (x1 0) (x1 (Suc 0)) (denote x2) k\n                     ?\\<rho>\\<^sub>1 *\n                    adjoint (x1 0) +\n                    x1 0 *\n                    denote_while_n_iter (x1 0) (x1 (Suc 0)) (denote x2) k\n                     ?\\<rho>\\<^sub>2 *\n                    adjoint (x1 0)\n  \\<rho>\\<^sub>1 \\<in> carrier_mat d d\n  \\<rho>\\<^sub>2 \\<in> carrier_mat d d\n  partial_density_operator \\<rho>\\<^sub>1\n  partial_density_operator \\<rho>\\<^sub>2\n  Im (trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2)) = 0\n  Re (trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2)) \\<le> 1\n  \\<lbrakk>denote x2 (x1 1 * \\<rho>\\<^sub>1 * adjoint (x1 1))\n           \\<in> carrier_mat d d;\n   denote x2 (x1 1 * \\<rho>\\<^sub>2 * adjoint (x1 1))\n   \\<in> carrier_mat d d\\<rbrakk>\n  \\<Longrightarrow> trace\n                     (denote x2 (x1 1 * \\<rho>\\<^sub>1 * adjoint (x1 1)) +\n                      denote x2 (x1 1 * \\<rho>\\<^sub>2 * adjoint (x1 1))) =\n                    trace\n                     (denote x2 (x1 1 * \\<rho>\\<^sub>1 * adjoint (x1 1))) +\n                    trace\n                     (denote x2 (x1 1 * \\<rho>\\<^sub>2 * adjoint (x1 1)))\n  \\<lbrakk>\\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n   \\<rho>\\<^sub>2 \\<in> carrier_mat d d\\<rbrakk>\n  \\<Longrightarrow> trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) =\n                    trace \\<rho>\\<^sub>1 + trace \\<rho>\\<^sub>2\n  denote x2 (x1 1 * \\<rho>\\<^sub>1 * adjoint (x1 1)) \\<in> carrier_mat d d\n  denote x2 (x1 1 * \\<rho>\\<^sub>2 * adjoint (x1 1)) \\<in> carrier_mat d d\n\ngoal (1 subgoal):\n 1. trace\n     (denote x2 (x1 1 * \\<rho>\\<^sub>1 * adjoint (x1 1)) +\n      denote x2 (x1 1 * \\<rho>\\<^sub>2 * adjoint (x1 1)))\n    \\<le> trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2)", "by auto"], ["proof (state)\nthis:\n  trace\n   (denote x2 (x1 1 * \\<rho>\\<^sub>1 * adjoint (x1 1)) +\n    denote x2 (x1 1 * \\<rho>\\<^sub>2 * adjoint (x1 1)))\n  \\<le> trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2)\n\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<And>\\<rho>\\<^sub>1 \\<rho>\\<^sub>2.\n                \\<lbrakk>\\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n                 \\<rho>\\<^sub>2 \\<in> carrier_mat d d;\n                 partial_density_operator \\<rho>\\<^sub>1;\n                 partial_density_operator \\<rho>\\<^sub>2;\n                 Im (trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2)) = 0;\n                 Re (trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2))\n                 \\<le> 1\\<rbrakk>\n                \\<Longrightarrow> x1 0 *\n                                  denote_while_n_iter (x1 0) (x1 (Suc 0))\n                                   (denote x2) k\n                                   (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) *\n                                  adjoint (x1 0) =\n                                  x1 0 *\n                                  denote_while_n_iter (x1 0) (x1 (Suc 0))\n                                   (denote x2) k \\<rho>\\<^sub>1 *\n                                  adjoint (x1 0) +\n                                  x1 0 *\n                                  denote_while_n_iter (x1 0) (x1 (Suc 0))\n                                   (denote x2) k \\<rho>\\<^sub>2 *\n                                  adjoint (x1 0);\n     \\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n     \\<rho>\\<^sub>2 \\<in> carrier_mat d d;\n     partial_density_operator \\<rho>\\<^sub>1;\n     partial_density_operator \\<rho>\\<^sub>2;\n     Im (trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2)) = 0;\n     Re (trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2)) \\<le> 1\\<rbrakk>\n    \\<Longrightarrow> x1 0 *\n                      denote_while_n_iter (x1 0) (x1 (Suc 0)) (denote x2)\n                       (Suc k) (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) *\n                      adjoint (x1 0) =\n                      x1 0 *\n                      denote_while_n_iter (x1 0) (x1 (Suc 0)) (denote x2)\n                       (Suc k) \\<rho>\\<^sub>1 *\n                      adjoint (x1 0) +\n                      x1 0 *\n                      denote_while_n_iter (x1 0) (x1 (Suc 0)) (denote x2)\n                       (Suc k) \\<rho>\\<^sub>2 *\n                      adjoint (x1 0)", "then"], ["proof (chain)\npicking this:\n  trace\n   (denote x2 (x1 1 * \\<rho>\\<^sub>1 * adjoint (x1 1)) +\n    denote x2 (x1 1 * \\<rho>\\<^sub>2 * adjoint (x1 1)))\n  \\<le> trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2)", "have trless2: \"trace (denote x2 (x1 1 * \\<rho>\\<^sub>1 * adjoint (x1 1)) + denote x2 (x1 1 * \\<rho>\\<^sub>2 * adjoint (x1 1))) \\<le> 1\""], ["proof (prove)\nusing this:\n  trace\n   (denote x2 (x1 1 * \\<rho>\\<^sub>1 * adjoint (x1 1)) +\n    denote x2 (x1 1 * \\<rho>\\<^sub>2 * adjoint (x1 1)))\n  \\<le> trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2)\n\ngoal (1 subgoal):\n 1. trace\n     (denote x2 (x1 1 * \\<rho>\\<^sub>1 * adjoint (x1 1)) +\n      denote x2 (x1 1 * \\<rho>\\<^sub>2 * adjoint (x1 1)))\n    \\<le> 1", "using Suc"], ["proof (prove)\nusing this:\n  trace\n   (denote x2 (x1 1 * \\<rho>\\<^sub>1 * adjoint (x1 1)) +\n    denote x2 (x1 1 * \\<rho>\\<^sub>2 * adjoint (x1 1)))\n  \\<le> trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2)\n  \\<lbrakk>?\\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n   ?\\<rho>\\<^sub>2 \\<in> carrier_mat d d;\n   partial_density_operator ?\\<rho>\\<^sub>1;\n   partial_density_operator ?\\<rho>\\<^sub>2;\n   Im (trace (?\\<rho>\\<^sub>1 + ?\\<rho>\\<^sub>2)) = 0;\n   Re (trace (?\\<rho>\\<^sub>1 + ?\\<rho>\\<^sub>2)) \\<le> 1\\<rbrakk>\n  \\<Longrightarrow> x1 0 *\n                    denote_while_n_iter (x1 0) (x1 (Suc 0)) (denote x2) k\n                     (?\\<rho>\\<^sub>1 + ?\\<rho>\\<^sub>2) *\n                    adjoint (x1 0) =\n                    x1 0 *\n                    denote_while_n_iter (x1 0) (x1 (Suc 0)) (denote x2) k\n                     ?\\<rho>\\<^sub>1 *\n                    adjoint (x1 0) +\n                    x1 0 *\n                    denote_while_n_iter (x1 0) (x1 (Suc 0)) (denote x2) k\n                     ?\\<rho>\\<^sub>2 *\n                    adjoint (x1 0)\n  \\<rho>\\<^sub>1 \\<in> carrier_mat d d\n  \\<rho>\\<^sub>2 \\<in> carrier_mat d d\n  partial_density_operator \\<rho>\\<^sub>1\n  partial_density_operator \\<rho>\\<^sub>2\n  Im (trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2)) = 0\n  Re (trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2)) \\<le> 1\n\ngoal (1 subgoal):\n 1. trace\n     (denote x2 (x1 1 * \\<rho>\\<^sub>1 * adjoint (x1 1)) +\n      denote x2 (x1 1 * \\<rho>\\<^sub>2 * adjoint (x1 1)))\n    \\<le> 1", "by auto"], ["proof (state)\nthis:\n  trace\n   (denote x2 (x1 1 * \\<rho>\\<^sub>1 * adjoint (x1 1)) +\n    denote x2 (x1 1 * \\<rho>\\<^sub>2 * adjoint (x1 1)))\n  \\<le> 1\n\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<And>\\<rho>\\<^sub>1 \\<rho>\\<^sub>2.\n                \\<lbrakk>\\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n                 \\<rho>\\<^sub>2 \\<in> carrier_mat d d;\n                 partial_density_operator \\<rho>\\<^sub>1;\n                 partial_density_operator \\<rho>\\<^sub>2;\n                 Im (trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2)) = 0;\n                 Re (trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2))\n                 \\<le> 1\\<rbrakk>\n                \\<Longrightarrow> x1 0 *\n                                  denote_while_n_iter (x1 0) (x1 (Suc 0))\n                                   (denote x2) k\n                                   (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) *\n                                  adjoint (x1 0) =\n                                  x1 0 *\n                                  denote_while_n_iter (x1 0) (x1 (Suc 0))\n                                   (denote x2) k \\<rho>\\<^sub>1 *\n                                  adjoint (x1 0) +\n                                  x1 0 *\n                                  denote_while_n_iter (x1 0) (x1 (Suc 0))\n                                   (denote x2) k \\<rho>\\<^sub>2 *\n                                  adjoint (x1 0);\n     \\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n     \\<rho>\\<^sub>2 \\<in> carrier_mat d d;\n     partial_density_operator \\<rho>\\<^sub>1;\n     partial_density_operator \\<rho>\\<^sub>2;\n     Im (trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2)) = 0;\n     Re (trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2)) \\<le> 1\\<rbrakk>\n    \\<Longrightarrow> x1 0 *\n                      denote_while_n_iter (x1 0) (x1 (Suc 0)) (denote x2)\n                       (Suc k) (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) *\n                      adjoint (x1 0) =\n                      x1 0 *\n                      denote_while_n_iter (x1 0) (x1 (Suc 0)) (denote x2)\n                       (Suc k) \\<rho>\\<^sub>1 *\n                      adjoint (x1 0) +\n                      x1 0 *\n                      denote_while_n_iter (x1 0) (x1 (Suc 0)) (denote x2)\n                       (Suc k) \\<rho>\\<^sub>2 *\n                      adjoint (x1 0)", "have \"x1 1 * (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) * adjoint (x1 1) = (x1 1 * \\<rho>\\<^sub>1 * adjoint (x1 1)) + (x1 1 * \\<rho>\\<^sub>2 * adjoint (x1 1))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. x1 1 * (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) * adjoint (x1 1) =\n    x1 1 * \\<rho>\\<^sub>1 * adjoint (x1 1) +\n    x1 1 * \\<rho>\\<^sub>2 * adjoint (x1 1)", "using M1 Suc"], ["proof (prove)\nusing this:\n  x1 1 \\<in> carrier_mat d d\n  \\<lbrakk>?\\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n   ?\\<rho>\\<^sub>2 \\<in> carrier_mat d d;\n   partial_density_operator ?\\<rho>\\<^sub>1;\n   partial_density_operator ?\\<rho>\\<^sub>2;\n   Im (trace (?\\<rho>\\<^sub>1 + ?\\<rho>\\<^sub>2)) = 0;\n   Re (trace (?\\<rho>\\<^sub>1 + ?\\<rho>\\<^sub>2)) \\<le> 1\\<rbrakk>\n  \\<Longrightarrow> x1 0 *\n                    denote_while_n_iter (x1 0) (x1 (Suc 0)) (denote x2) k\n                     (?\\<rho>\\<^sub>1 + ?\\<rho>\\<^sub>2) *\n                    adjoint (x1 0) =\n                    x1 0 *\n                    denote_while_n_iter (x1 0) (x1 (Suc 0)) (denote x2) k\n                     ?\\<rho>\\<^sub>1 *\n                    adjoint (x1 0) +\n                    x1 0 *\n                    denote_while_n_iter (x1 0) (x1 (Suc 0)) (denote x2) k\n                     ?\\<rho>\\<^sub>2 *\n                    adjoint (x1 0)\n  \\<rho>\\<^sub>1 \\<in> carrier_mat d d\n  \\<rho>\\<^sub>2 \\<in> carrier_mat d d\n  partial_density_operator \\<rho>\\<^sub>1\n  partial_density_operator \\<rho>\\<^sub>2\n  Im (trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2)) = 0\n  Re (trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2)) \\<le> 1\n\ngoal (1 subgoal):\n 1. x1 1 * (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) * adjoint (x1 1) =\n    x1 1 * \\<rho>\\<^sub>1 * adjoint (x1 1) +\n    x1 1 * \\<rho>\\<^sub>2 * adjoint (x1 1)", "by (mat_assoc d)"], ["proof (state)\nthis:\n  x1 1 * (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) * adjoint (x1 1) =\n  x1 1 * \\<rho>\\<^sub>1 * adjoint (x1 1) +\n  x1 1 * \\<rho>\\<^sub>2 * adjoint (x1 1)\n\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<And>\\<rho>\\<^sub>1 \\<rho>\\<^sub>2.\n                \\<lbrakk>\\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n                 \\<rho>\\<^sub>2 \\<in> carrier_mat d d;\n                 partial_density_operator \\<rho>\\<^sub>1;\n                 partial_density_operator \\<rho>\\<^sub>2;\n                 Im (trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2)) = 0;\n                 Re (trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2))\n                 \\<le> 1\\<rbrakk>\n                \\<Longrightarrow> x1 0 *\n                                  denote_while_n_iter (x1 0) (x1 (Suc 0))\n                                   (denote x2) k\n                                   (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) *\n                                  adjoint (x1 0) =\n                                  x1 0 *\n                                  denote_while_n_iter (x1 0) (x1 (Suc 0))\n                                   (denote x2) k \\<rho>\\<^sub>1 *\n                                  adjoint (x1 0) +\n                                  x1 0 *\n                                  denote_while_n_iter (x1 0) (x1 (Suc 0))\n                                   (denote x2) k \\<rho>\\<^sub>2 *\n                                  adjoint (x1 0);\n     \\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n     \\<rho>\\<^sub>2 \\<in> carrier_mat d d;\n     partial_density_operator \\<rho>\\<^sub>1;\n     partial_density_operator \\<rho>\\<^sub>2;\n     Im (trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2)) = 0;\n     Re (trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2)) \\<le> 1\\<rbrakk>\n    \\<Longrightarrow> x1 0 *\n                      denote_while_n_iter (x1 0) (x1 (Suc 0)) (denote x2)\n                       (Suc k) (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) *\n                      adjoint (x1 0) =\n                      x1 0 *\n                      denote_while_n_iter (x1 0) (x1 (Suc 0)) (denote x2)\n                       (Suc k) \\<rho>\\<^sub>1 *\n                      adjoint (x1 0) +\n                      x1 0 *\n                      denote_while_n_iter (x1 0) (x1 (Suc 0)) (denote x2)\n                       (Suc k) \\<rho>\\<^sub>2 *\n                      adjoint (x1 0)", "then"], ["proof (chain)\npicking this:\n  x1 1 * (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) * adjoint (x1 1) =\n  x1 1 * \\<rho>\\<^sub>1 * adjoint (x1 1) +\n  x1 1 * \\<rho>\\<^sub>2 * adjoint (x1 1)", "have deadd: \"denote x2 (x1 1 * (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) * adjoint (x1 1)) =\n        denote x2 (x1 1 * \\<rho>\\<^sub>1 * adjoint (x1 1)) + denote x2 (x1 1 * \\<rho>\\<^sub>2 * adjoint (x1 1))\""], ["proof (prove)\nusing this:\n  x1 1 * (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) * adjoint (x1 1) =\n  x1 1 * \\<rho>\\<^sub>1 * adjoint (x1 1) +\n  x1 1 * \\<rho>\\<^sub>2 * adjoint (x1 1)\n\ngoal (1 subgoal):\n 1. denote x2 (x1 1 * (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) * adjoint (x1 1)) =\n    denote x2 (x1 1 * \\<rho>\\<^sub>1 * adjoint (x1 1)) +\n    denote x2 (x1 1 * \\<rho>\\<^sub>2 * adjoint (x1 1))", "using assms(5) dim1 dim2 pdo1 pdo2 trless1"], ["proof (prove)\nusing this:\n  x1 1 * (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) * adjoint (x1 1) =\n  x1 1 * \\<rho>\\<^sub>1 * adjoint (x1 1) +\n  x1 1 * \\<rho>\\<^sub>2 * adjoint (x1 1)\n  \\<lbrakk>?\\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n   ?\\<rho>\\<^sub>2 \\<in> carrier_mat d d;\n   partial_density_operator ?\\<rho>\\<^sub>1;\n   partial_density_operator ?\\<rho>\\<^sub>2;\n   trace (?\\<rho>\\<^sub>1 + ?\\<rho>\\<^sub>2) \\<le> 1\\<rbrakk>\n  \\<Longrightarrow> denote x2 (?\\<rho>\\<^sub>1 + ?\\<rho>\\<^sub>2) =\n                    denote x2 ?\\<rho>\\<^sub>1 + denote x2 ?\\<rho>\\<^sub>2\n  x1 1 * \\<rho>\\<^sub>1 * adjoint (x1 1) \\<in> carrier_mat d d\n  x1 1 * \\<rho>\\<^sub>2 * adjoint (x1 1) \\<in> carrier_mat d d\n  partial_density_operator (x1 1 * \\<rho>\\<^sub>1 * adjoint (x1 1))\n  partial_density_operator (x1 1 * \\<rho>\\<^sub>2 * adjoint (x1 1))\n  trace\n   (x1 1 * \\<rho>\\<^sub>1 * adjoint (x1 1) +\n    x1 1 * \\<rho>\\<^sub>2 * adjoint (x1 1))\n  \\<le> 1\n\ngoal (1 subgoal):\n 1. denote x2 (x1 1 * (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) * adjoint (x1 1)) =\n    denote x2 (x1 1 * \\<rho>\\<^sub>1 * adjoint (x1 1)) +\n    denote x2 (x1 1 * \\<rho>\\<^sub>2 * adjoint (x1 1))", "by auto"], ["proof (state)\nthis:\n  denote x2 (x1 1 * (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) * adjoint (x1 1)) =\n  denote x2 (x1 1 * \\<rho>\\<^sub>1 * adjoint (x1 1)) +\n  denote x2 (x1 1 * \\<rho>\\<^sub>2 * adjoint (x1 1))\n\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<And>\\<rho>\\<^sub>1 \\<rho>\\<^sub>2.\n                \\<lbrakk>\\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n                 \\<rho>\\<^sub>2 \\<in> carrier_mat d d;\n                 partial_density_operator \\<rho>\\<^sub>1;\n                 partial_density_operator \\<rho>\\<^sub>2;\n                 Im (trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2)) = 0;\n                 Re (trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2))\n                 \\<le> 1\\<rbrakk>\n                \\<Longrightarrow> x1 0 *\n                                  denote_while_n_iter (x1 0) (x1 (Suc 0))\n                                   (denote x2) k\n                                   (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) *\n                                  adjoint (x1 0) =\n                                  x1 0 *\n                                  denote_while_n_iter (x1 0) (x1 (Suc 0))\n                                   (denote x2) k \\<rho>\\<^sub>1 *\n                                  adjoint (x1 0) +\n                                  x1 0 *\n                                  denote_while_n_iter (x1 0) (x1 (Suc 0))\n                                   (denote x2) k \\<rho>\\<^sub>2 *\n                                  adjoint (x1 0);\n     \\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n     \\<rho>\\<^sub>2 \\<in> carrier_mat d d;\n     partial_density_operator \\<rho>\\<^sub>1;\n     partial_density_operator \\<rho>\\<^sub>2;\n     Im (trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2)) = 0;\n     Re (trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2)) \\<le> 1\\<rbrakk>\n    \\<Longrightarrow> x1 0 *\n                      denote_while_n_iter (x1 0) (x1 (Suc 0)) (denote x2)\n                       (Suc k) (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) *\n                      adjoint (x1 0) =\n                      x1 0 *\n                      denote_while_n_iter (x1 0) (x1 (Suc 0)) (denote x2)\n                       (Suc k) \\<rho>\\<^sub>1 *\n                      adjoint (x1 0) +\n                      x1 0 *\n                      denote_while_n_iter (x1 0) (x1 (Suc 0)) (denote x2)\n                       (Suc k) \\<rho>\\<^sub>2 *\n                      adjoint (x1 0)", "from dimr1 dimr2 pdor1 pdor2 trless2 Suc(1) deadd"], ["proof (chain)\npicking this:\n  denote x2 (x1 1 * \\<rho>\\<^sub>1 * adjoint (x1 1)) \\<in> carrier_mat d d\n  denote x2 (x1 1 * \\<rho>\\<^sub>2 * adjoint (x1 1)) \\<in> carrier_mat d d\n  partial_density_operator\n   (denote x2 (x1 1 * \\<rho>\\<^sub>1 * adjoint (x1 1)))\n  partial_density_operator\n   (denote x2 (x1 1 * \\<rho>\\<^sub>2 * adjoint (x1 1)))\n  trace\n   (denote x2 (x1 1 * \\<rho>\\<^sub>1 * adjoint (x1 1)) +\n    denote x2 (x1 1 * \\<rho>\\<^sub>2 * adjoint (x1 1)))\n  \\<le> 1\n  \\<lbrakk>?\\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n   ?\\<rho>\\<^sub>2 \\<in> carrier_mat d d;\n   partial_density_operator ?\\<rho>\\<^sub>1;\n   partial_density_operator ?\\<rho>\\<^sub>2;\n   Im (trace (?\\<rho>\\<^sub>1 + ?\\<rho>\\<^sub>2)) = 0;\n   Re (trace (?\\<rho>\\<^sub>1 + ?\\<rho>\\<^sub>2)) \\<le> 1\\<rbrakk>\n  \\<Longrightarrow> x1 0 *\n                    denote_while_n_iter (x1 0) (x1 (Suc 0)) (denote x2) k\n                     (?\\<rho>\\<^sub>1 + ?\\<rho>\\<^sub>2) *\n                    adjoint (x1 0) =\n                    x1 0 *\n                    denote_while_n_iter (x1 0) (x1 (Suc 0)) (denote x2) k\n                     ?\\<rho>\\<^sub>1 *\n                    adjoint (x1 0) +\n                    x1 0 *\n                    denote_while_n_iter (x1 0) (x1 (Suc 0)) (denote x2) k\n                     ?\\<rho>\\<^sub>2 *\n                    adjoint (x1 0)\n  denote x2 (x1 1 * (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) * adjoint (x1 1)) =\n  denote x2 (x1 1 * \\<rho>\\<^sub>1 * adjoint (x1 1)) +\n  denote x2 (x1 1 * \\<rho>\\<^sub>2 * adjoint (x1 1))", "show ?thesis"], ["proof (prove)\nusing this:\n  denote x2 (x1 1 * \\<rho>\\<^sub>1 * adjoint (x1 1)) \\<in> carrier_mat d d\n  denote x2 (x1 1 * \\<rho>\\<^sub>2 * adjoint (x1 1)) \\<in> carrier_mat d d\n  partial_density_operator\n   (denote x2 (x1 1 * \\<rho>\\<^sub>1 * adjoint (x1 1)))\n  partial_density_operator\n   (denote x2 (x1 1 * \\<rho>\\<^sub>2 * adjoint (x1 1)))\n  trace\n   (denote x2 (x1 1 * \\<rho>\\<^sub>1 * adjoint (x1 1)) +\n    denote x2 (x1 1 * \\<rho>\\<^sub>2 * adjoint (x1 1)))\n  \\<le> 1\n  \\<lbrakk>?\\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n   ?\\<rho>\\<^sub>2 \\<in> carrier_mat d d;\n   partial_density_operator ?\\<rho>\\<^sub>1;\n   partial_density_operator ?\\<rho>\\<^sub>2;\n   Im (trace (?\\<rho>\\<^sub>1 + ?\\<rho>\\<^sub>2)) = 0;\n   Re (trace (?\\<rho>\\<^sub>1 + ?\\<rho>\\<^sub>2)) \\<le> 1\\<rbrakk>\n  \\<Longrightarrow> x1 0 *\n                    denote_while_n_iter (x1 0) (x1 (Suc 0)) (denote x2) k\n                     (?\\<rho>\\<^sub>1 + ?\\<rho>\\<^sub>2) *\n                    adjoint (x1 0) =\n                    x1 0 *\n                    denote_while_n_iter (x1 0) (x1 (Suc 0)) (denote x2) k\n                     ?\\<rho>\\<^sub>1 *\n                    adjoint (x1 0) +\n                    x1 0 *\n                    denote_while_n_iter (x1 0) (x1 (Suc 0)) (denote x2) k\n                     ?\\<rho>\\<^sub>2 *\n                    adjoint (x1 0)\n  denote x2 (x1 1 * (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) * adjoint (x1 1)) =\n  denote x2 (x1 1 * \\<rho>\\<^sub>1 * adjoint (x1 1)) +\n  denote x2 (x1 1 * \\<rho>\\<^sub>2 * adjoint (x1 1))\n\ngoal (1 subgoal):\n 1. x1 0 *\n    denote_while_n_iter (x1 0) (x1 (Suc 0)) (denote x2) (Suc k)\n     (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) *\n    adjoint (x1 0) =\n    x1 0 *\n    denote_while_n_iter (x1 0) (x1 (Suc 0)) (denote x2) (Suc k)\n     \\<rho>\\<^sub>1 *\n    adjoint (x1 0) +\n    x1 0 *\n    denote_while_n_iter (x1 0) (x1 (Suc 0)) (denote x2) (Suc k)\n     \\<rho>\\<^sub>2 *\n    adjoint (x1 0)", "by auto"], ["proof (state)\nthis:\n  x1 0 *\n  denote_while_n_iter (x1 0) (x1 (Suc 0)) (denote x2) (Suc k)\n   (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) *\n  adjoint (x1 0) =\n  x1 0 *\n  denote_while_n_iter (x1 0) (x1 (Suc 0)) (denote x2) (Suc k)\n   \\<rho>\\<^sub>1 *\n  adjoint (x1 0) +\n  x1 0 *\n  denote_while_n_iter (x1 0) (x1 (Suc 0)) (denote x2) (Suc k)\n   \\<rho>\\<^sub>2 *\n  adjoint (x1 0)\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  x1 0 *\n  denote_while_n_iter (x1 0) (x1 (Suc 0)) (denote x2) (Suc k)\n   (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) *\n  adjoint (x1 0) =\n  x1 0 *\n  denote_while_n_iter (x1 0) (x1 (Suc 0)) (denote x2) (Suc k)\n   \\<rho>\\<^sub>1 *\n  adjoint (x1 0) +\n  x1 0 *\n  denote_while_n_iter (x1 0) (x1 (Suc 0)) (denote x2) (Suc k)\n   \\<rho>\\<^sub>2 *\n  adjoint (x1 0)\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma denote_while_add:\n  assumes r1: \"\\<rho>\\<^sub>1 \\<in> carrier_mat d d\" and\n    r2: \"\\<rho>\\<^sub>2 \\<in> carrier_mat d d\" and\n    M0: \"x1 0 \\<in> carrier_mat d d\" and\n    M1: \"x1 1 \\<in> carrier_mat d d\" and\n    pdo1: \"partial_density_operator \\<rho>\\<^sub>1\" and\n    pdo2: \"partial_density_operator \\<rho>\\<^sub>2\" and tr12: \"trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) \\<le> 1\" and\n    wc: \"well_com x2\" and mea: \"measurement d 2 x1\" and\n    DS: \"(\\<And>\\<rho>\\<^sub>1 \\<rho>\\<^sub>2. \\<rho>\\<^sub>1 \\<in> carrier_mat d d \\<Longrightarrow> \\<rho>\\<^sub>2 \\<in> carrier_mat d d \\<Longrightarrow> partial_density_operator \\<rho>\\<^sub>1 \\<Longrightarrow> \n      partial_density_operator \\<rho>\\<^sub>2 \\<Longrightarrow> trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) \\<le> 1 \\<Longrightarrow> denote x2 (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) = denote x2 \\<rho>\\<^sub>1 + denote x2 \\<rho>\\<^sub>2)\"\n    shows\n    \"denote_while (x1 0) (x1 1) (denote x2) (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) = denote_while (x1 0) (x1 1) (denote x2) \\<rho>\\<^sub>1 + denote_while (x1 0) (x1 1) (denote x2) \\<rho>\\<^sub>2\""], ["proof (prove)\ngoal (1 subgoal):\n 1. denote_while (x1 0) (x1 1) (denote x2)\n     (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) =\n    denote_while (x1 0) (x1 1) (denote x2) \\<rho>\\<^sub>1 +\n    denote_while (x1 0) (x1 1) (denote x2) \\<rho>\\<^sub>2", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. denote_while (x1 0) (x1 1) (denote x2)\n     (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) =\n    denote_while (x1 0) (x1 1) (denote x2) \\<rho>\\<^sub>1 +\n    denote_while (x1 0) (x1 1) (denote x2) \\<rho>\\<^sub>2", "let ?A = \"x1 0\" and ?B = \"x1 1\""], ["proof (state)\ngoal (1 subgoal):\n 1. denote_while (x1 0) (x1 1) (denote x2)\n     (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) =\n    denote_while (x1 0) (x1 1) (denote x2) \\<rho>\\<^sub>1 +\n    denote_while (x1 0) (x1 1) (denote x2) \\<rho>\\<^sub>2", "have dx2:\"(\\<And>\\<rho>. \\<rho> \\<in> carrier_mat d d \\<Longrightarrow> partial_density_operator \\<rho> \\<Longrightarrow> positive ((denote x2) \\<rho>) \\<and> trace ((denote x2) \\<rho>) \\<le> trace \\<rho> \\<and> (denote x2) \\<rho> \\<in> carrier_mat d d) \""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>\\<rho>.\n       \\<lbrakk>\\<rho> \\<in> carrier_mat d d;\n        partial_density_operator \\<rho>\\<rbrakk>\n       \\<Longrightarrow> positive (denote x2 \\<rho>) \\<and>\n                         trace (denote x2 \\<rho>) \\<le> trace \\<rho> \\<and>\n                         denote x2 \\<rho> \\<in> carrier_mat d d", "using denote_positive_trace_dim wc"], ["proof (prove)\nusing this:\n  \\<lbrakk>well_com ?S; ?\\<rho> \\<in> carrier_mat d d;\n   partial_density_operator ?\\<rho>\\<rbrakk>\n  \\<Longrightarrow> positive (denote ?S ?\\<rho>) \\<and>\n                    trace (denote ?S ?\\<rho>) \\<le> trace ?\\<rho> \\<and>\n                    denote ?S ?\\<rho> \\<in> carrier_mat d d\n  well_com x2\n\ngoal (1 subgoal):\n 1. \\<And>\\<rho>.\n       \\<lbrakk>\\<rho> \\<in> carrier_mat d d;\n        partial_density_operator \\<rho>\\<rbrakk>\n       \\<Longrightarrow> positive (denote x2 \\<rho>) \\<and>\n                         trace (denote x2 \\<rho>) \\<le> trace \\<rho> \\<and>\n                         denote x2 \\<rho> \\<in> carrier_mat d d", "by auto"], ["proof (state)\nthis:\n  \\<lbrakk>?\\<rho> \\<in> carrier_mat d d;\n   partial_density_operator ?\\<rho>\\<rbrakk>\n  \\<Longrightarrow> positive (denote x2 ?\\<rho>) \\<and>\n                    trace (denote x2 ?\\<rho>) \\<le> trace ?\\<rho> \\<and>\n                    denote x2 ?\\<rho> \\<in> carrier_mat d d\n\ngoal (1 subgoal):\n 1. denote_while (x1 0) (x1 1) (denote x2)\n     (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) =\n    denote_while (x1 0) (x1 1) (denote x2) \\<rho>\\<^sub>1 +\n    denote_while (x1 0) (x1 1) (denote x2) \\<rho>\\<^sub>2", "have lo1: \"adjoint ?A * ?A + adjoint ?B * ?B = 1\\<^sub>m d\""], ["proof (prove)\ngoal (1 subgoal):\n 1. adjoint (x1 0) * x1 0 + adjoint (x1 1) * x1 1 = 1\\<^sub>m d", "using measurement_id2 assms"], ["proof (prove)\nusing this:\n  measurement ?d 2 ?M \\<Longrightarrow>\n  adjoint (?M 0) * ?M 0 + adjoint (?M 1) * ?M 1 = 1\\<^sub>m ?d\n  \\<rho>\\<^sub>1 \\<in> carrier_mat d d\n  \\<rho>\\<^sub>2 \\<in> carrier_mat d d\n  x1 0 \\<in> carrier_mat d d\n  x1 1 \\<in> carrier_mat d d\n  partial_density_operator \\<rho>\\<^sub>1\n  partial_density_operator \\<rho>\\<^sub>2\n  trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) \\<le> 1\n  well_com x2\n  measurement d 2 x1\n  \\<lbrakk>?\\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n   ?\\<rho>\\<^sub>2 \\<in> carrier_mat d d;\n   partial_density_operator ?\\<rho>\\<^sub>1;\n   partial_density_operator ?\\<rho>\\<^sub>2;\n   trace (?\\<rho>\\<^sub>1 + ?\\<rho>\\<^sub>2) \\<le> 1\\<rbrakk>\n  \\<Longrightarrow> denote x2 (?\\<rho>\\<^sub>1 + ?\\<rho>\\<^sub>2) =\n                    denote x2 ?\\<rho>\\<^sub>1 + denote x2 ?\\<rho>\\<^sub>2\n\ngoal (1 subgoal):\n 1. adjoint (x1 0) * x1 0 + adjoint (x1 1) * x1 1 = 1\\<^sub>m d", "by auto"], ["proof (state)\nthis:\n  adjoint (x1 0) * x1 0 + adjoint (x1 1) * x1 1 = 1\\<^sub>m d\n\ngoal (1 subgoal):\n 1. denote_while (x1 0) (x1 1) (denote x2)\n     (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) =\n    denote_while (x1 0) (x1 1) (denote x2) \\<rho>\\<^sub>1 +\n    denote_while (x1 0) (x1 1) (denote x2) \\<rho>\\<^sub>2", "have pdo12: \"partial_density_operator (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. partial_density_operator (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2)", "using pdo1 pdo2"], ["proof (prove)\nusing this:\n  partial_density_operator \\<rho>\\<^sub>1\n  partial_density_operator \\<rho>\\<^sub>2\n\ngoal (1 subgoal):\n 1. partial_density_operator (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2)", "unfolding partial_density_operator_def"], ["proof (prove)\nusing this:\n  positive \\<rho>\\<^sub>1 \\<and> trace \\<rho>\\<^sub>1 \\<le> 1\n  positive \\<rho>\\<^sub>2 \\<and> trace \\<rho>\\<^sub>2 \\<le> 1\n\ngoal (1 subgoal):\n 1. positive (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) \\<and>\n    trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) \\<le> 1", "using tr12 positive_add assms"], ["proof (prove)\nusing this:\n  positive \\<rho>\\<^sub>1 \\<and> trace \\<rho>\\<^sub>1 \\<le> 1\n  positive \\<rho>\\<^sub>2 \\<and> trace \\<rho>\\<^sub>2 \\<le> 1\n  trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) \\<le> 1\n  \\<lbrakk>positive ?A; positive ?B; ?A \\<in> carrier_mat ?n ?n;\n   ?B \\<in> carrier_mat ?n ?n\\<rbrakk>\n  \\<Longrightarrow> positive (?A + ?B)\n  \\<rho>\\<^sub>1 \\<in> carrier_mat d d\n  \\<rho>\\<^sub>2 \\<in> carrier_mat d d\n  x1 0 \\<in> carrier_mat d d\n  x1 1 \\<in> carrier_mat d d\n  partial_density_operator \\<rho>\\<^sub>1\n  partial_density_operator \\<rho>\\<^sub>2\n  trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) \\<le> 1\n  well_com x2\n  measurement d 2 x1\n  \\<lbrakk>?\\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n   ?\\<rho>\\<^sub>2 \\<in> carrier_mat d d;\n   partial_density_operator ?\\<rho>\\<^sub>1;\n   partial_density_operator ?\\<rho>\\<^sub>2;\n   trace (?\\<rho>\\<^sub>1 + ?\\<rho>\\<^sub>2) \\<le> 1\\<rbrakk>\n  \\<Longrightarrow> denote x2 (?\\<rho>\\<^sub>1 + ?\\<rho>\\<^sub>2) =\n                    denote x2 ?\\<rho>\\<^sub>1 + denote x2 ?\\<rho>\\<^sub>2\n\ngoal (1 subgoal):\n 1. positive (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) \\<and>\n    trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) \\<le> 1", "by auto"], ["proof (state)\nthis:\n  partial_density_operator (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2)\n\ngoal (1 subgoal):\n 1. denote_while (x1 0) (x1 1) (denote x2)\n     (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) =\n    denote_while (x1 0) (x1 1) (denote x2) \\<rho>\\<^sub>1 +\n    denote_while (x1 0) (x1 1) (denote x2) \\<rho>\\<^sub>2", "have ms1: \"matrix_seq d (matrix_sum d (\\<lambda>n. denote_while_n ?A ?B (denote x2) n \\<rho>\\<^sub>1))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. matrix_seq d\n     (matrix_sum d\n       (\\<lambda>n.\n           denote_while_n (x1 0) (x1 1) (denote x2) n \\<rho>\\<^sub>1))", "using denote_while_n_sum_mat_seq assms"], ["proof (prove)\nusing this:\n  \\<lbrakk>?\\<rho> \\<in> carrier_mat d d; ?x1.0 0 \\<in> carrier_mat d d;\n   ?x1.0 1 \\<in> carrier_mat d d; partial_density_operator ?\\<rho>;\n   well_com ?x2.0; measurement d 2 ?x1.0\\<rbrakk>\n  \\<Longrightarrow> matrix_seq d\n                     (matrix_sum d\n                       (\\<lambda>n.\n                           denote_while_n (?x1.0 0) (?x1.0 1) (denote ?x2.0)\n                            n ?\\<rho>))\n  \\<rho>\\<^sub>1 \\<in> carrier_mat d d\n  \\<rho>\\<^sub>2 \\<in> carrier_mat d d\n  x1 0 \\<in> carrier_mat d d\n  x1 1 \\<in> carrier_mat d d\n  partial_density_operator \\<rho>\\<^sub>1\n  partial_density_operator \\<rho>\\<^sub>2\n  trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) \\<le> 1\n  well_com x2\n  measurement d 2 x1\n  \\<lbrakk>?\\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n   ?\\<rho>\\<^sub>2 \\<in> carrier_mat d d;\n   partial_density_operator ?\\<rho>\\<^sub>1;\n   partial_density_operator ?\\<rho>\\<^sub>2;\n   trace (?\\<rho>\\<^sub>1 + ?\\<rho>\\<^sub>2) \\<le> 1\\<rbrakk>\n  \\<Longrightarrow> denote x2 (?\\<rho>\\<^sub>1 + ?\\<rho>\\<^sub>2) =\n                    denote x2 ?\\<rho>\\<^sub>1 + denote x2 ?\\<rho>\\<^sub>2\n\ngoal (1 subgoal):\n 1. matrix_seq d\n     (matrix_sum d\n       (\\<lambda>n.\n           denote_while_n (x1 0) (x1 1) (denote x2) n \\<rho>\\<^sub>1))", "by auto"], ["proof (state)\nthis:\n  matrix_seq d\n   (matrix_sum d\n     (\\<lambda>n.\n         denote_while_n (x1 0) (x1 1) (denote x2) n \\<rho>\\<^sub>1))\n\ngoal (1 subgoal):\n 1. denote_while (x1 0) (x1 1) (denote x2)\n     (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) =\n    denote_while (x1 0) (x1 1) (denote x2) \\<rho>\\<^sub>1 +\n    denote_while (x1 0) (x1 1) (denote x2) \\<rho>\\<^sub>2", "have ms2: \"matrix_seq d (matrix_sum d (\\<lambda>n. denote_while_n ?A ?B (denote x2) n \\<rho>\\<^sub>2))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. matrix_seq d\n     (matrix_sum d\n       (\\<lambda>n.\n           denote_while_n (x1 0) (x1 1) (denote x2) n \\<rho>\\<^sub>2))", "using denote_while_n_sum_mat_seq assms"], ["proof (prove)\nusing this:\n  \\<lbrakk>?\\<rho> \\<in> carrier_mat d d; ?x1.0 0 \\<in> carrier_mat d d;\n   ?x1.0 1 \\<in> carrier_mat d d; partial_density_operator ?\\<rho>;\n   well_com ?x2.0; measurement d 2 ?x1.0\\<rbrakk>\n  \\<Longrightarrow> matrix_seq d\n                     (matrix_sum d\n                       (\\<lambda>n.\n                           denote_while_n (?x1.0 0) (?x1.0 1) (denote ?x2.0)\n                            n ?\\<rho>))\n  \\<rho>\\<^sub>1 \\<in> carrier_mat d d\n  \\<rho>\\<^sub>2 \\<in> carrier_mat d d\n  x1 0 \\<in> carrier_mat d d\n  x1 1 \\<in> carrier_mat d d\n  partial_density_operator \\<rho>\\<^sub>1\n  partial_density_operator \\<rho>\\<^sub>2\n  trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) \\<le> 1\n  well_com x2\n  measurement d 2 x1\n  \\<lbrakk>?\\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n   ?\\<rho>\\<^sub>2 \\<in> carrier_mat d d;\n   partial_density_operator ?\\<rho>\\<^sub>1;\n   partial_density_operator ?\\<rho>\\<^sub>2;\n   trace (?\\<rho>\\<^sub>1 + ?\\<rho>\\<^sub>2) \\<le> 1\\<rbrakk>\n  \\<Longrightarrow> denote x2 (?\\<rho>\\<^sub>1 + ?\\<rho>\\<^sub>2) =\n                    denote x2 ?\\<rho>\\<^sub>1 + denote x2 ?\\<rho>\\<^sub>2\n\ngoal (1 subgoal):\n 1. matrix_seq d\n     (matrix_sum d\n       (\\<lambda>n.\n           denote_while_n (x1 0) (x1 1) (denote x2) n \\<rho>\\<^sub>2))", "by auto"], ["proof (state)\nthis:\n  matrix_seq d\n   (matrix_sum d\n     (\\<lambda>n.\n         denote_while_n (x1 0) (x1 1) (denote x2) n \\<rho>\\<^sub>2))\n\ngoal (1 subgoal):\n 1. denote_while (x1 0) (x1 1) (denote x2)\n     (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) =\n    denote_while (x1 0) (x1 1) (denote x2) \\<rho>\\<^sub>1 +\n    denote_while (x1 0) (x1 1) (denote x2) \\<rho>\\<^sub>2", "have dim1: \"(\\<forall>n. matrix_sum d (\\<lambda>n. denote_while_n (x1 0) (x1 1) (denote x2) n \\<rho>\\<^sub>1) n \\<in> carrier_mat d d)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>n.\n       matrix_sum d\n        (\\<lambda>n.\n            denote_while_n (x1 0) (x1 1) (denote x2) n \\<rho>\\<^sub>1)\n        n\n       \\<in> carrier_mat d d", "using assms dx2"], ["proof (prove)\nusing this:\n  \\<rho>\\<^sub>1 \\<in> carrier_mat d d\n  \\<rho>\\<^sub>2 \\<in> carrier_mat d d\n  x1 0 \\<in> carrier_mat d d\n  x1 1 \\<in> carrier_mat d d\n  partial_density_operator \\<rho>\\<^sub>1\n  partial_density_operator \\<rho>\\<^sub>2\n  trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) \\<le> 1\n  well_com x2\n  measurement d 2 x1\n  \\<lbrakk>?\\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n   ?\\<rho>\\<^sub>2 \\<in> carrier_mat d d;\n   partial_density_operator ?\\<rho>\\<^sub>1;\n   partial_density_operator ?\\<rho>\\<^sub>2;\n   trace (?\\<rho>\\<^sub>1 + ?\\<rho>\\<^sub>2) \\<le> 1\\<rbrakk>\n  \\<Longrightarrow> denote x2 (?\\<rho>\\<^sub>1 + ?\\<rho>\\<^sub>2) =\n                    denote x2 ?\\<rho>\\<^sub>1 + denote x2 ?\\<rho>\\<^sub>2\n  \\<lbrakk>?\\<rho> \\<in> carrier_mat d d;\n   partial_density_operator ?\\<rho>\\<rbrakk>\n  \\<Longrightarrow> positive (denote x2 ?\\<rho>) \\<and>\n                    trace (denote x2 ?\\<rho>) \\<le> trace ?\\<rho> \\<and>\n                    denote x2 ?\\<rho> \\<in> carrier_mat d d\n\ngoal (1 subgoal):\n 1. \\<forall>n.\n       matrix_sum d\n        (\\<lambda>n.\n            denote_while_n (x1 0) (x1 1) (denote x2) n \\<rho>\\<^sub>1)\n        n\n       \\<in> carrier_mat d d", "by (metis denote_while_n_dim matrix_sum_dim)"], ["proof (state)\nthis:\n  \\<forall>n.\n     matrix_sum d\n      (\\<lambda>n.\n          denote_while_n (x1 0) (x1 1) (denote x2) n \\<rho>\\<^sub>1)\n      n\n     \\<in> carrier_mat d d\n\ngoal (1 subgoal):\n 1. denote_while (x1 0) (x1 1) (denote x2)\n     (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) =\n    denote_while (x1 0) (x1 1) (denote x2) \\<rho>\\<^sub>1 +\n    denote_while (x1 0) (x1 1) (denote x2) \\<rho>\\<^sub>2", "have dim2: \"(\\<forall>n. matrix_sum d (\\<lambda>n. denote_while_n (x1 0) (x1 1) (denote x2) n \\<rho>\\<^sub>2) n \\<in> carrier_mat d d)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>n.\n       matrix_sum d\n        (\\<lambda>n.\n            denote_while_n (x1 0) (x1 1) (denote x2) n \\<rho>\\<^sub>2)\n        n\n       \\<in> carrier_mat d d", "using assms dx2"], ["proof (prove)\nusing this:\n  \\<rho>\\<^sub>1 \\<in> carrier_mat d d\n  \\<rho>\\<^sub>2 \\<in> carrier_mat d d\n  x1 0 \\<in> carrier_mat d d\n  x1 1 \\<in> carrier_mat d d\n  partial_density_operator \\<rho>\\<^sub>1\n  partial_density_operator \\<rho>\\<^sub>2\n  trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) \\<le> 1\n  well_com x2\n  measurement d 2 x1\n  \\<lbrakk>?\\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n   ?\\<rho>\\<^sub>2 \\<in> carrier_mat d d;\n   partial_density_operator ?\\<rho>\\<^sub>1;\n   partial_density_operator ?\\<rho>\\<^sub>2;\n   trace (?\\<rho>\\<^sub>1 + ?\\<rho>\\<^sub>2) \\<le> 1\\<rbrakk>\n  \\<Longrightarrow> denote x2 (?\\<rho>\\<^sub>1 + ?\\<rho>\\<^sub>2) =\n                    denote x2 ?\\<rho>\\<^sub>1 + denote x2 ?\\<rho>\\<^sub>2\n  \\<lbrakk>?\\<rho> \\<in> carrier_mat d d;\n   partial_density_operator ?\\<rho>\\<rbrakk>\n  \\<Longrightarrow> positive (denote x2 ?\\<rho>) \\<and>\n                    trace (denote x2 ?\\<rho>) \\<le> trace ?\\<rho> \\<and>\n                    denote x2 ?\\<rho> \\<in> carrier_mat d d\n\ngoal (1 subgoal):\n 1. \\<forall>n.\n       matrix_sum d\n        (\\<lambda>n.\n            denote_while_n (x1 0) (x1 1) (denote x2) n \\<rho>\\<^sub>2)\n        n\n       \\<in> carrier_mat d d", "by (metis denote_while_n_dim matrix_sum_dim)"], ["proof (state)\nthis:\n  \\<forall>n.\n     matrix_sum d\n      (\\<lambda>n.\n          denote_while_n (x1 0) (x1 1) (denote x2) n \\<rho>\\<^sub>2)\n      n\n     \\<in> carrier_mat d d\n\ngoal (1 subgoal):\n 1. denote_while (x1 0) (x1 1) (denote x2)\n     (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) =\n    denote_while (x1 0) (x1 1) (denote x2) \\<rho>\\<^sub>1 +\n    denote_while (x1 0) (x1 1) (denote x2) \\<rho>\\<^sub>2", "have \"trace (matrix_sum d (\\<lambda>n. denote_while_n ?A ?B (denote x2) n \\<rho>\\<^sub>1) n +\n               matrix_sum d (\\<lambda>n. denote_while_n ?A ?B (denote x2) n \\<rho>\\<^sub>2) n) \\<le> trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2)\"\n    for n"], ["proof (prove)\ngoal (1 subgoal):\n 1. trace\n     (matrix_sum d\n       (\\<lambda>n.\n           denote_while_n (x1 0) (x1 1) (denote x2) n \\<rho>\\<^sub>1)\n       n +\n      matrix_sum d\n       (\\<lambda>n.\n           denote_while_n (x1 0) (x1 1) (denote x2) n \\<rho>\\<^sub>2)\n       n)\n    \\<le> trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2)", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. trace\n     (matrix_sum d\n       (\\<lambda>n.\n           denote_while_n (x1 0) (x1 1) (denote x2) n \\<rho>\\<^sub>1)\n       n +\n      matrix_sum d\n       (\\<lambda>n.\n           denote_while_n (x1 0) (x1 1) (denote x2) n \\<rho>\\<^sub>2)\n       n)\n    \\<le> trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2)", "have \"trace (matrix_sum d (\\<lambda>n. denote_while_n ?A ?B (denote x2) n \\<rho>\\<^sub>1) n) \\<le> trace \\<rho>\\<^sub>1\""], ["proof (prove)\ngoal (1 subgoal):\n 1. trace\n     (matrix_sum d\n       (\\<lambda>n.\n           denote_while_n (x1 0) (x1 1) (denote x2) n \\<rho>\\<^sub>1)\n       n)\n    \\<le> trace \\<rho>\\<^sub>1", "using denote_while_n_sum_trace dx2 lo1 assms"], ["proof (prove)\nusing this:\n  \\<lbrakk>?M0.0 \\<in> carrier_mat d d; ?M1.0 \\<in> carrier_mat d d;\n   adjoint ?M0.0 * ?M0.0 + adjoint ?M1.0 * ?M1.0 = 1\\<^sub>m d;\n   \\<And>\\<rho>.\n      \\<lbrakk>\\<rho> \\<in> carrier_mat d d;\n       partial_density_operator \\<rho>\\<rbrakk>\n      \\<Longrightarrow> positive (?DS \\<rho>) \\<and>\n                        trace (?DS \\<rho>) \\<le> trace \\<rho> \\<and>\n                        ?DS \\<rho> \\<in> carrier_mat d d;\n   ?\\<rho> \\<in> carrier_mat d d; partial_density_operator ?\\<rho>\\<rbrakk>\n  \\<Longrightarrow> trace\n                     (matrix_sum d\n                       (\\<lambda>n.\n                           denote_while_n ?M0.0 ?M1.0 ?DS n ?\\<rho>)\n                       ?n)\n                    \\<le> trace ?\\<rho>\n  \\<lbrakk>?\\<rho> \\<in> carrier_mat d d;\n   partial_density_operator ?\\<rho>\\<rbrakk>\n  \\<Longrightarrow> positive (denote x2 ?\\<rho>) \\<and>\n                    trace (denote x2 ?\\<rho>) \\<le> trace ?\\<rho> \\<and>\n                    denote x2 ?\\<rho> \\<in> carrier_mat d d\n  adjoint (x1 0) * x1 0 + adjoint (x1 1) * x1 1 = 1\\<^sub>m d\n  \\<rho>\\<^sub>1 \\<in> carrier_mat d d\n  \\<rho>\\<^sub>2 \\<in> carrier_mat d d\n  x1 0 \\<in> carrier_mat d d\n  x1 1 \\<in> carrier_mat d d\n  partial_density_operator \\<rho>\\<^sub>1\n  partial_density_operator \\<rho>\\<^sub>2\n  trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) \\<le> 1\n  well_com x2\n  measurement d 2 x1\n  \\<lbrakk>?\\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n   ?\\<rho>\\<^sub>2 \\<in> carrier_mat d d;\n   partial_density_operator ?\\<rho>\\<^sub>1;\n   partial_density_operator ?\\<rho>\\<^sub>2;\n   trace (?\\<rho>\\<^sub>1 + ?\\<rho>\\<^sub>2) \\<le> 1\\<rbrakk>\n  \\<Longrightarrow> denote x2 (?\\<rho>\\<^sub>1 + ?\\<rho>\\<^sub>2) =\n                    denote x2 ?\\<rho>\\<^sub>1 + denote x2 ?\\<rho>\\<^sub>2\n\ngoal (1 subgoal):\n 1. trace\n     (matrix_sum d\n       (\\<lambda>n.\n           denote_while_n (x1 0) (x1 1) (denote x2) n \\<rho>\\<^sub>1)\n       n)\n    \\<le> trace \\<rho>\\<^sub>1", "by auto"], ["proof (state)\nthis:\n  trace\n   (matrix_sum d\n     (\\<lambda>n. denote_while_n (x1 0) (x1 1) (denote x2) n \\<rho>\\<^sub>1)\n     n)\n  \\<le> trace \\<rho>\\<^sub>1\n\ngoal (1 subgoal):\n 1. trace\n     (matrix_sum d\n       (\\<lambda>n.\n           denote_while_n (x1 0) (x1 1) (denote x2) n \\<rho>\\<^sub>1)\n       n +\n      matrix_sum d\n       (\\<lambda>n.\n           denote_while_n (x1 0) (x1 1) (denote x2) n \\<rho>\\<^sub>2)\n       n)\n    \\<le> trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2)", "moreover"], ["proof (state)\nthis:\n  trace\n   (matrix_sum d\n     (\\<lambda>n. denote_while_n (x1 0) (x1 1) (denote x2) n \\<rho>\\<^sub>1)\n     n)\n  \\<le> trace \\<rho>\\<^sub>1\n\ngoal (1 subgoal):\n 1. trace\n     (matrix_sum d\n       (\\<lambda>n.\n           denote_while_n (x1 0) (x1 1) (denote x2) n \\<rho>\\<^sub>1)\n       n +\n      matrix_sum d\n       (\\<lambda>n.\n           denote_while_n (x1 0) (x1 1) (denote x2) n \\<rho>\\<^sub>2)\n       n)\n    \\<le> trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2)", "have \"trace (matrix_sum d (\\<lambda>n. denote_while_n ?A ?B (denote x2) n \\<rho>\\<^sub>2) n) \\<le> trace \\<rho>\\<^sub>2\""], ["proof (prove)\ngoal (1 subgoal):\n 1. trace\n     (matrix_sum d\n       (\\<lambda>n.\n           denote_while_n (x1 0) (x1 1) (denote x2) n \\<rho>\\<^sub>2)\n       n)\n    \\<le> trace \\<rho>\\<^sub>2", "using denote_while_n_sum_trace dx2 lo1 assms"], ["proof (prove)\nusing this:\n  \\<lbrakk>?M0.0 \\<in> carrier_mat d d; ?M1.0 \\<in> carrier_mat d d;\n   adjoint ?M0.0 * ?M0.0 + adjoint ?M1.0 * ?M1.0 = 1\\<^sub>m d;\n   \\<And>\\<rho>.\n      \\<lbrakk>\\<rho> \\<in> carrier_mat d d;\n       partial_density_operator \\<rho>\\<rbrakk>\n      \\<Longrightarrow> positive (?DS \\<rho>) \\<and>\n                        trace (?DS \\<rho>) \\<le> trace \\<rho> \\<and>\n                        ?DS \\<rho> \\<in> carrier_mat d d;\n   ?\\<rho> \\<in> carrier_mat d d; partial_density_operator ?\\<rho>\\<rbrakk>\n  \\<Longrightarrow> trace\n                     (matrix_sum d\n                       (\\<lambda>n.\n                           denote_while_n ?M0.0 ?M1.0 ?DS n ?\\<rho>)\n                       ?n)\n                    \\<le> trace ?\\<rho>\n  \\<lbrakk>?\\<rho> \\<in> carrier_mat d d;\n   partial_density_operator ?\\<rho>\\<rbrakk>\n  \\<Longrightarrow> positive (denote x2 ?\\<rho>) \\<and>\n                    trace (denote x2 ?\\<rho>) \\<le> trace ?\\<rho> \\<and>\n                    denote x2 ?\\<rho> \\<in> carrier_mat d d\n  adjoint (x1 0) * x1 0 + adjoint (x1 1) * x1 1 = 1\\<^sub>m d\n  \\<rho>\\<^sub>1 \\<in> carrier_mat d d\n  \\<rho>\\<^sub>2 \\<in> carrier_mat d d\n  x1 0 \\<in> carrier_mat d d\n  x1 1 \\<in> carrier_mat d d\n  partial_density_operator \\<rho>\\<^sub>1\n  partial_density_operator \\<rho>\\<^sub>2\n  trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) \\<le> 1\n  well_com x2\n  measurement d 2 x1\n  \\<lbrakk>?\\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n   ?\\<rho>\\<^sub>2 \\<in> carrier_mat d d;\n   partial_density_operator ?\\<rho>\\<^sub>1;\n   partial_density_operator ?\\<rho>\\<^sub>2;\n   trace (?\\<rho>\\<^sub>1 + ?\\<rho>\\<^sub>2) \\<le> 1\\<rbrakk>\n  \\<Longrightarrow> denote x2 (?\\<rho>\\<^sub>1 + ?\\<rho>\\<^sub>2) =\n                    denote x2 ?\\<rho>\\<^sub>1 + denote x2 ?\\<rho>\\<^sub>2\n\ngoal (1 subgoal):\n 1. trace\n     (matrix_sum d\n       (\\<lambda>n.\n           denote_while_n (x1 0) (x1 1) (denote x2) n \\<rho>\\<^sub>2)\n       n)\n    \\<le> trace \\<rho>\\<^sub>2", "by auto"], ["proof (state)\nthis:\n  trace\n   (matrix_sum d\n     (\\<lambda>n. denote_while_n (x1 0) (x1 1) (denote x2) n \\<rho>\\<^sub>2)\n     n)\n  \\<le> trace \\<rho>\\<^sub>2\n\ngoal (1 subgoal):\n 1. trace\n     (matrix_sum d\n       (\\<lambda>n.\n           denote_while_n (x1 0) (x1 1) (denote x2) n \\<rho>\\<^sub>1)\n       n +\n      matrix_sum d\n       (\\<lambda>n.\n           denote_while_n (x1 0) (x1 1) (denote x2) n \\<rho>\\<^sub>2)\n       n)\n    \\<le> trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2)", "ultimately"], ["proof (chain)\npicking this:\n  trace\n   (matrix_sum d\n     (\\<lambda>n. denote_while_n (x1 0) (x1 1) (denote x2) n \\<rho>\\<^sub>1)\n     n)\n  \\<le> trace \\<rho>\\<^sub>1\n  trace\n   (matrix_sum d\n     (\\<lambda>n. denote_while_n (x1 0) (x1 1) (denote x2) n \\<rho>\\<^sub>2)\n     n)\n  \\<le> trace \\<rho>\\<^sub>2", "show ?thesis"], ["proof (prove)\nusing this:\n  trace\n   (matrix_sum d\n     (\\<lambda>n. denote_while_n (x1 0) (x1 1) (denote x2) n \\<rho>\\<^sub>1)\n     n)\n  \\<le> trace \\<rho>\\<^sub>1\n  trace\n   (matrix_sum d\n     (\\<lambda>n. denote_while_n (x1 0) (x1 1) (denote x2) n \\<rho>\\<^sub>2)\n     n)\n  \\<le> trace \\<rho>\\<^sub>2\n\ngoal (1 subgoal):\n 1. trace\n     (matrix_sum d\n       (\\<lambda>n.\n           denote_while_n (x1 0) (x1 1) (denote x2) n \\<rho>\\<^sub>1)\n       n +\n      matrix_sum d\n       (\\<lambda>n.\n           denote_while_n (x1 0) (x1 1) (denote x2) n \\<rho>\\<^sub>2)\n       n)\n    \\<le> trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2)", "using trace_add_linear dim1 dim2"], ["proof (prove)\nusing this:\n  trace\n   (matrix_sum d\n     (\\<lambda>n. denote_while_n (x1 0) (x1 1) (denote x2) n \\<rho>\\<^sub>1)\n     n)\n  \\<le> trace \\<rho>\\<^sub>1\n  trace\n   (matrix_sum d\n     (\\<lambda>n. denote_while_n (x1 0) (x1 1) (denote x2) n \\<rho>\\<^sub>2)\n     n)\n  \\<le> trace \\<rho>\\<^sub>2\n  \\<lbrakk>?A \\<in> carrier_mat ?n ?n; ?B \\<in> carrier_mat ?n ?n\\<rbrakk>\n  \\<Longrightarrow> trace (?A + ?B) = trace ?A + trace ?B\n  \\<forall>n.\n     matrix_sum d\n      (\\<lambda>n.\n          denote_while_n (x1 0) (x1 1) (denote x2) n \\<rho>\\<^sub>1)\n      n\n     \\<in> carrier_mat d d\n  \\<forall>n.\n     matrix_sum d\n      (\\<lambda>n.\n          denote_while_n (x1 0) (x1 1) (denote x2) n \\<rho>\\<^sub>2)\n      n\n     \\<in> carrier_mat d d\n\ngoal (1 subgoal):\n 1. trace\n     (matrix_sum d\n       (\\<lambda>n.\n           denote_while_n (x1 0) (x1 1) (denote x2) n \\<rho>\\<^sub>1)\n       n +\n      matrix_sum d\n       (\\<lambda>n.\n           denote_while_n (x1 0) (x1 1) (denote x2) n \\<rho>\\<^sub>2)\n       n)\n    \\<le> trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2)", "by (metis add_mono_thms_linordered_semiring(1) r1 r2)"], ["proof (state)\nthis:\n  trace\n   (matrix_sum d\n     (\\<lambda>n. denote_while_n (x1 0) (x1 1) (denote x2) n \\<rho>\\<^sub>1)\n     n +\n    matrix_sum d\n     (\\<lambda>n. denote_while_n (x1 0) (x1 1) (denote x2) n \\<rho>\\<^sub>2)\n     n)\n  \\<le> trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2)\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  trace\n   (matrix_sum d\n     (\\<lambda>n. denote_while_n (x1 0) (x1 1) (denote x2) n \\<rho>\\<^sub>1)\n     ?n +\n    matrix_sum d\n     (\\<lambda>n. denote_while_n (x1 0) (x1 1) (denote x2) n \\<rho>\\<^sub>2)\n     ?n)\n  \\<le> trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2)\n\ngoal (1 subgoal):\n 1. denote_while (x1 0) (x1 1) (denote x2)\n     (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) =\n    denote_while (x1 0) (x1 1) (denote x2) \\<rho>\\<^sub>1 +\n    denote_while (x1 0) (x1 1) (denote x2) \\<rho>\\<^sub>2", "then"], ["proof (chain)\npicking this:\n  trace\n   (matrix_sum d\n     (\\<lambda>n. denote_while_n (x1 0) (x1 1) (denote x2) n \\<rho>\\<^sub>1)\n     ?n +\n    matrix_sum d\n     (\\<lambda>n. denote_while_n (x1 0) (x1 1) (denote x2) n \\<rho>\\<^sub>2)\n     ?n)\n  \\<le> trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2)", "have \"\\<forall>n. trace (matrix_sum d (\\<lambda>n. denote_while_n ?A ?B (denote x2) n \\<rho>\\<^sub>1) n + matrix_sum d (\\<lambda>n. denote_while_n ?A ?B (denote x2) n \\<rho>\\<^sub>2) n) \\<le> 1\""], ["proof (prove)\nusing this:\n  trace\n   (matrix_sum d\n     (\\<lambda>n. denote_while_n (x1 0) (x1 1) (denote x2) n \\<rho>\\<^sub>1)\n     ?n +\n    matrix_sum d\n     (\\<lambda>n. denote_while_n (x1 0) (x1 1) (denote x2) n \\<rho>\\<^sub>2)\n     ?n)\n  \\<le> trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2)\n\ngoal (1 subgoal):\n 1. \\<forall>n.\n       trace\n        (matrix_sum d\n          (\\<lambda>n.\n              denote_while_n (x1 0) (x1 1) (denote x2) n \\<rho>\\<^sub>1)\n          n +\n         matrix_sum d\n          (\\<lambda>n.\n              denote_while_n (x1 0) (x1 1) (denote x2) n \\<rho>\\<^sub>2)\n          n)\n       \\<le> 1", "using assms(7) dual_order.trans"], ["proof (prove)\nusing this:\n  trace\n   (matrix_sum d\n     (\\<lambda>n. denote_while_n (x1 0) (x1 1) (denote x2) n \\<rho>\\<^sub>1)\n     ?n +\n    matrix_sum d\n     (\\<lambda>n. denote_while_n (x1 0) (x1 1) (denote x2) n \\<rho>\\<^sub>2)\n     ?n)\n  \\<le> trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2)\n  trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) \\<le> 1\n  \\<lbrakk>?b \\<le> ?a; ?c \\<le> ?b\\<rbrakk> \\<Longrightarrow> ?c \\<le> ?a\n\ngoal (1 subgoal):\n 1. \\<forall>n.\n       trace\n        (matrix_sum d\n          (\\<lambda>n.\n              denote_while_n (x1 0) (x1 1) (denote x2) n \\<rho>\\<^sub>1)\n          n +\n         matrix_sum d\n          (\\<lambda>n.\n              denote_while_n (x1 0) (x1 1) (denote x2) n \\<rho>\\<^sub>2)\n          n)\n       \\<le> 1", "by blast"], ["proof (state)\nthis:\n  \\<forall>n.\n     trace\n      (matrix_sum d\n        (\\<lambda>n.\n            denote_while_n (x1 0) (x1 1) (denote x2) n \\<rho>\\<^sub>1)\n        n +\n       matrix_sum d\n        (\\<lambda>n.\n            denote_while_n (x1 0) (x1 1) (denote x2) n \\<rho>\\<^sub>2)\n        n)\n     \\<le> 1\n\ngoal (1 subgoal):\n 1. denote_while (x1 0) (x1 1) (denote x2)\n     (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) =\n    denote_while (x1 0) (x1 1) (denote x2) \\<rho>\\<^sub>1 +\n    denote_while (x1 0) (x1 1) (denote x2) \\<rho>\\<^sub>2", "then"], ["proof (chain)\npicking this:\n  \\<forall>n.\n     trace\n      (matrix_sum d\n        (\\<lambda>n.\n            denote_while_n (x1 0) (x1 1) (denote x2) n \\<rho>\\<^sub>1)\n        n +\n       matrix_sum d\n        (\\<lambda>n.\n            denote_while_n (x1 0) (x1 1) (denote x2) n \\<rho>\\<^sub>2)\n        n)\n     \\<le> 1", "have lladd: \"matrix_seq.lowner_lub  (\\<lambda>n. (matrix_sum d (\\<lambda>n. denote_while_n ?A ?B (denote x2) n \\<rho>\\<^sub>1)) n + (matrix_sum d (\\<lambda>n. denote_while_n ?A ?B (denote x2) n \\<rho>\\<^sub>2)) n) = matrix_seq.lowner_lub (matrix_sum d (\\<lambda>n. denote_while_n ?A ?B (denote x2) n \\<rho>\\<^sub>1))\n    + matrix_seq.lowner_lub (matrix_sum d (\\<lambda>n. denote_while_n ?A ?B (denote x2) n \\<rho>\\<^sub>2))\""], ["proof (prove)\nusing this:\n  \\<forall>n.\n     trace\n      (matrix_sum d\n        (\\<lambda>n.\n            denote_while_n (x1 0) (x1 1) (denote x2) n \\<rho>\\<^sub>1)\n        n +\n       matrix_sum d\n        (\\<lambda>n.\n            denote_while_n (x1 0) (x1 1) (denote x2) n \\<rho>\\<^sub>2)\n        n)\n     \\<le> 1\n\ngoal (1 subgoal):\n 1. matrix_seq.lowner_lub\n     (\\<lambda>n.\n         matrix_sum d\n          (\\<lambda>n.\n              denote_while_n (x1 0) (x1 1) (denote x2) n \\<rho>\\<^sub>1)\n          n +\n         matrix_sum d\n          (\\<lambda>n.\n              denote_while_n (x1 0) (x1 1) (denote x2) n \\<rho>\\<^sub>2)\n          n) =\n    matrix_seq.lowner_lub\n     (matrix_sum d\n       (\\<lambda>n.\n           denote_while_n (x1 0) (x1 1) (denote x2) n \\<rho>\\<^sub>1)) +\n    matrix_seq.lowner_lub\n     (matrix_sum d\n       (\\<lambda>n.\n           denote_while_n (x1 0) (x1 1) (denote x2) n \\<rho>\\<^sub>2))", "using lowner_lub_add ms1 ms2"], ["proof (prove)\nusing this:\n  \\<forall>n.\n     trace\n      (matrix_sum d\n        (\\<lambda>n.\n            denote_while_n (x1 0) (x1 1) (denote x2) n \\<rho>\\<^sub>1)\n        n +\n       matrix_sum d\n        (\\<lambda>n.\n            denote_while_n (x1 0) (x1 1) (denote x2) n \\<rho>\\<^sub>2)\n        n)\n     \\<le> 1\n  \\<lbrakk>matrix_seq ?d ?f; matrix_seq ?d ?g;\n   \\<forall>n. trace (?f n + ?g n) \\<le> 1\\<rbrakk>\n  \\<Longrightarrow> matrix_seq.lowner_lub (\\<lambda>n. ?f n + ?g n) =\n                    matrix_seq.lowner_lub ?f + matrix_seq.lowner_lub ?g\n  matrix_seq d\n   (matrix_sum d\n     (\\<lambda>n.\n         denote_while_n (x1 0) (x1 1) (denote x2) n \\<rho>\\<^sub>1))\n  matrix_seq d\n   (matrix_sum d\n     (\\<lambda>n.\n         denote_while_n (x1 0) (x1 1) (denote x2) n \\<rho>\\<^sub>2))\n\ngoal (1 subgoal):\n 1. matrix_seq.lowner_lub\n     (\\<lambda>n.\n         matrix_sum d\n          (\\<lambda>n.\n              denote_while_n (x1 0) (x1 1) (denote x2) n \\<rho>\\<^sub>1)\n          n +\n         matrix_sum d\n          (\\<lambda>n.\n              denote_while_n (x1 0) (x1 1) (denote x2) n \\<rho>\\<^sub>2)\n          n) =\n    matrix_seq.lowner_lub\n     (matrix_sum d\n       (\\<lambda>n.\n           denote_while_n (x1 0) (x1 1) (denote x2) n \\<rho>\\<^sub>1)) +\n    matrix_seq.lowner_lub\n     (matrix_sum d\n       (\\<lambda>n.\n           denote_while_n (x1 0) (x1 1) (denote x2) n \\<rho>\\<^sub>2))", "by auto"], ["proof (state)\nthis:\n  matrix_seq.lowner_lub\n   (\\<lambda>n.\n       matrix_sum d\n        (\\<lambda>n.\n            denote_while_n (x1 0) (x1 1) (denote x2) n \\<rho>\\<^sub>1)\n        n +\n       matrix_sum d\n        (\\<lambda>n.\n            denote_while_n (x1 0) (x1 1) (denote x2) n \\<rho>\\<^sub>2)\n        n) =\n  matrix_seq.lowner_lub\n   (matrix_sum d\n     (\\<lambda>n.\n         denote_while_n (x1 0) (x1 1) (denote x2) n \\<rho>\\<^sub>1)) +\n  matrix_seq.lowner_lub\n   (matrix_sum d\n     (\\<lambda>n.\n         denote_while_n (x1 0) (x1 1) (denote x2) n \\<rho>\\<^sub>2))\n\ngoal (1 subgoal):\n 1. denote_while (x1 0) (x1 1) (denote x2)\n     (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) =\n    denote_while (x1 0) (x1 1) (denote x2) \\<rho>\\<^sub>1 +\n    denote_while (x1 0) (x1 1) (denote x2) \\<rho>\\<^sub>2", "have \"matrix_sum d (\\<lambda>n. denote_while_n (x1 0) (x1 1) (denote x2) n (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2)) m =\n    matrix_sum d (\\<lambda>n. denote_while_n ?A ?B (denote x2) n \\<rho>\\<^sub>1) m + matrix_sum d (\\<lambda>n. denote_while_n ?A ?B (denote x2) n \\<rho>\\<^sub>2) m\"\n    for m"], ["proof (prove)\ngoal (1 subgoal):\n 1. matrix_sum d\n     (\\<lambda>n.\n         denote_while_n (x1 0) (x1 1) (denote x2) n\n          (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2))\n     m =\n    matrix_sum d\n     (\\<lambda>n. denote_while_n (x1 0) (x1 1) (denote x2) n \\<rho>\\<^sub>1)\n     m +\n    matrix_sum d\n     (\\<lambda>n. denote_while_n (x1 0) (x1 1) (denote x2) n \\<rho>\\<^sub>2)\n     m", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. matrix_sum d\n     (\\<lambda>n.\n         denote_while_n (x1 0) (x1 1) (denote x2) n\n          (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2))\n     m =\n    matrix_sum d\n     (\\<lambda>n. denote_while_n (x1 0) (x1 1) (denote x2) n \\<rho>\\<^sub>1)\n     m +\n    matrix_sum d\n     (\\<lambda>n. denote_while_n (x1 0) (x1 1) (denote x2) n \\<rho>\\<^sub>2)\n     m", "have \"(\\<And>k. k < m \\<Longrightarrow> denote_while_n (x1 0) (x1 1) (denote x2) k (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) \\<in> carrier_mat d d)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>k.\n       k < m \\<Longrightarrow>\n       denote_while_n (x1 0) (x1 1) (denote x2) k\n        (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2)\n       \\<in> carrier_mat d d", "using denote_while_n_dim dx2 pdo12 assms measurement_dim"], ["proof (prove)\nusing this:\n  \\<lbrakk>?\\<rho> \\<in> carrier_mat d d; ?M0.0 \\<in> carrier_mat d d;\n   ?M1.0 \\<in> carrier_mat d d; partial_density_operator ?\\<rho>;\n   \\<And>\\<rho>'.\n      \\<lbrakk>\\<rho>' \\<in> carrier_mat d d;\n       partial_density_operator \\<rho>'\\<rbrakk>\n      \\<Longrightarrow> positive (?DS \\<rho>') \\<and>\n                        trace (?DS \\<rho>') \\<le> trace \\<rho>' \\<and>\n                        ?DS \\<rho>' \\<in> carrier_mat d d\\<rbrakk>\n  \\<Longrightarrow> denote_while_n ?M0.0 ?M1.0 ?DS ?n ?\\<rho>\n                    \\<in> carrier_mat d d\n  \\<lbrakk>?\\<rho> \\<in> carrier_mat d d;\n   partial_density_operator ?\\<rho>\\<rbrakk>\n  \\<Longrightarrow> positive (denote x2 ?\\<rho>) \\<and>\n                    trace (denote x2 ?\\<rho>) \\<le> trace ?\\<rho> \\<and>\n                    denote x2 ?\\<rho> \\<in> carrier_mat d d\n  partial_density_operator (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2)\n  \\<rho>\\<^sub>1 \\<in> carrier_mat d d\n  \\<rho>\\<^sub>2 \\<in> carrier_mat d d\n  x1 0 \\<in> carrier_mat d d\n  x1 1 \\<in> carrier_mat d d\n  partial_density_operator \\<rho>\\<^sub>1\n  partial_density_operator \\<rho>\\<^sub>2\n  trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) \\<le> 1\n  well_com x2\n  measurement d 2 x1\n  \\<lbrakk>?\\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n   ?\\<rho>\\<^sub>2 \\<in> carrier_mat d d;\n   partial_density_operator ?\\<rho>\\<^sub>1;\n   partial_density_operator ?\\<rho>\\<^sub>2;\n   trace (?\\<rho>\\<^sub>1 + ?\\<rho>\\<^sub>2) \\<le> 1\\<rbrakk>\n  \\<Longrightarrow> denote x2 (?\\<rho>\\<^sub>1 + ?\\<rho>\\<^sub>2) =\n                    denote x2 ?\\<rho>\\<^sub>1 + denote x2 ?\\<rho>\\<^sub>2\n  \\<lbrakk>measurement ?d ?n ?M; ?k < ?n\\<rbrakk>\n  \\<Longrightarrow> ?M ?k \\<in> carrier_mat ?d ?d\n\ngoal (1 subgoal):\n 1. \\<And>k.\n       k < m \\<Longrightarrow>\n       denote_while_n (x1 0) (x1 1) (denote x2) k\n        (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2)\n       \\<in> carrier_mat d d", "by auto"], ["proof (state)\nthis:\n  ?k < m \\<Longrightarrow>\n  denote_while_n (x1 0) (x1 1) (denote x2) ?k\n   (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2)\n  \\<in> carrier_mat d d\n\ngoal (1 subgoal):\n 1. matrix_sum d\n     (\\<lambda>n.\n         denote_while_n (x1 0) (x1 1) (denote x2) n\n          (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2))\n     m =\n    matrix_sum d\n     (\\<lambda>n. denote_while_n (x1 0) (x1 1) (denote x2) n \\<rho>\\<^sub>1)\n     m +\n    matrix_sum d\n     (\\<lambda>n. denote_while_n (x1 0) (x1 1) (denote x2) n \\<rho>\\<^sub>2)\n     m", "moreover"], ["proof (state)\nthis:\n  ?k < m \\<Longrightarrow>\n  denote_while_n (x1 0) (x1 1) (denote x2) ?k\n   (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2)\n  \\<in> carrier_mat d d\n\ngoal (1 subgoal):\n 1. matrix_sum d\n     (\\<lambda>n.\n         denote_while_n (x1 0) (x1 1) (denote x2) n\n          (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2))\n     m =\n    matrix_sum d\n     (\\<lambda>n. denote_while_n (x1 0) (x1 1) (denote x2) n \\<rho>\\<^sub>1)\n     m +\n    matrix_sum d\n     (\\<lambda>n. denote_while_n (x1 0) (x1 1) (denote x2) n \\<rho>\\<^sub>2)\n     m", "have \"(\\<And>k. k < m \\<Longrightarrow> denote_while_n (x1 0) (x1 1) (denote x2) k \\<rho>\\<^sub>1 \\<in> carrier_mat d d)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>k.\n       k < m \\<Longrightarrow>\n       denote_while_n (x1 0) (x1 1) (denote x2) k \\<rho>\\<^sub>1\n       \\<in> carrier_mat d d", "using denote_while_n_dim dx2  assms measurement_dim"], ["proof (prove)\nusing this:\n  \\<lbrakk>?\\<rho> \\<in> carrier_mat d d; ?M0.0 \\<in> carrier_mat d d;\n   ?M1.0 \\<in> carrier_mat d d; partial_density_operator ?\\<rho>;\n   \\<And>\\<rho>'.\n      \\<lbrakk>\\<rho>' \\<in> carrier_mat d d;\n       partial_density_operator \\<rho>'\\<rbrakk>\n      \\<Longrightarrow> positive (?DS \\<rho>') \\<and>\n                        trace (?DS \\<rho>') \\<le> trace \\<rho>' \\<and>\n                        ?DS \\<rho>' \\<in> carrier_mat d d\\<rbrakk>\n  \\<Longrightarrow> denote_while_n ?M0.0 ?M1.0 ?DS ?n ?\\<rho>\n                    \\<in> carrier_mat d d\n  \\<lbrakk>?\\<rho> \\<in> carrier_mat d d;\n   partial_density_operator ?\\<rho>\\<rbrakk>\n  \\<Longrightarrow> positive (denote x2 ?\\<rho>) \\<and>\n                    trace (denote x2 ?\\<rho>) \\<le> trace ?\\<rho> \\<and>\n                    denote x2 ?\\<rho> \\<in> carrier_mat d d\n  \\<rho>\\<^sub>1 \\<in> carrier_mat d d\n  \\<rho>\\<^sub>2 \\<in> carrier_mat d d\n  x1 0 \\<in> carrier_mat d d\n  x1 1 \\<in> carrier_mat d d\n  partial_density_operator \\<rho>\\<^sub>1\n  partial_density_operator \\<rho>\\<^sub>2\n  trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) \\<le> 1\n  well_com x2\n  measurement d 2 x1\n  \\<lbrakk>?\\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n   ?\\<rho>\\<^sub>2 \\<in> carrier_mat d d;\n   partial_density_operator ?\\<rho>\\<^sub>1;\n   partial_density_operator ?\\<rho>\\<^sub>2;\n   trace (?\\<rho>\\<^sub>1 + ?\\<rho>\\<^sub>2) \\<le> 1\\<rbrakk>\n  \\<Longrightarrow> denote x2 (?\\<rho>\\<^sub>1 + ?\\<rho>\\<^sub>2) =\n                    denote x2 ?\\<rho>\\<^sub>1 + denote x2 ?\\<rho>\\<^sub>2\n  \\<lbrakk>measurement ?d ?n ?M; ?k < ?n\\<rbrakk>\n  \\<Longrightarrow> ?M ?k \\<in> carrier_mat ?d ?d\n\ngoal (1 subgoal):\n 1. \\<And>k.\n       k < m \\<Longrightarrow>\n       denote_while_n (x1 0) (x1 1) (denote x2) k \\<rho>\\<^sub>1\n       \\<in> carrier_mat d d", "by auto"], ["proof (state)\nthis:\n  ?k < m \\<Longrightarrow>\n  denote_while_n (x1 0) (x1 1) (denote x2) ?k \\<rho>\\<^sub>1\n  \\<in> carrier_mat d d\n\ngoal (1 subgoal):\n 1. matrix_sum d\n     (\\<lambda>n.\n         denote_while_n (x1 0) (x1 1) (denote x2) n\n          (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2))\n     m =\n    matrix_sum d\n     (\\<lambda>n. denote_while_n (x1 0) (x1 1) (denote x2) n \\<rho>\\<^sub>1)\n     m +\n    matrix_sum d\n     (\\<lambda>n. denote_while_n (x1 0) (x1 1) (denote x2) n \\<rho>\\<^sub>2)\n     m", "moreover"], ["proof (state)\nthis:\n  ?k < m \\<Longrightarrow>\n  denote_while_n (x1 0) (x1 1) (denote x2) ?k \\<rho>\\<^sub>1\n  \\<in> carrier_mat d d\n\ngoal (1 subgoal):\n 1. matrix_sum d\n     (\\<lambda>n.\n         denote_while_n (x1 0) (x1 1) (denote x2) n\n          (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2))\n     m =\n    matrix_sum d\n     (\\<lambda>n. denote_while_n (x1 0) (x1 1) (denote x2) n \\<rho>\\<^sub>1)\n     m +\n    matrix_sum d\n     (\\<lambda>n. denote_while_n (x1 0) (x1 1) (denote x2) n \\<rho>\\<^sub>2)\n     m", "have \"(\\<And>k. k < m \\<Longrightarrow> denote_while_n (x1 0) (x1 1) (denote x2) k \\<rho>\\<^sub>2 \\<in> carrier_mat d d)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>k.\n       k < m \\<Longrightarrow>\n       denote_while_n (x1 0) (x1 1) (denote x2) k \\<rho>\\<^sub>2\n       \\<in> carrier_mat d d", "using denote_while_n_dim dx2  assms measurement_dim"], ["proof (prove)\nusing this:\n  \\<lbrakk>?\\<rho> \\<in> carrier_mat d d; ?M0.0 \\<in> carrier_mat d d;\n   ?M1.0 \\<in> carrier_mat d d; partial_density_operator ?\\<rho>;\n   \\<And>\\<rho>'.\n      \\<lbrakk>\\<rho>' \\<in> carrier_mat d d;\n       partial_density_operator \\<rho>'\\<rbrakk>\n      \\<Longrightarrow> positive (?DS \\<rho>') \\<and>\n                        trace (?DS \\<rho>') \\<le> trace \\<rho>' \\<and>\n                        ?DS \\<rho>' \\<in> carrier_mat d d\\<rbrakk>\n  \\<Longrightarrow> denote_while_n ?M0.0 ?M1.0 ?DS ?n ?\\<rho>\n                    \\<in> carrier_mat d d\n  \\<lbrakk>?\\<rho> \\<in> carrier_mat d d;\n   partial_density_operator ?\\<rho>\\<rbrakk>\n  \\<Longrightarrow> positive (denote x2 ?\\<rho>) \\<and>\n                    trace (denote x2 ?\\<rho>) \\<le> trace ?\\<rho> \\<and>\n                    denote x2 ?\\<rho> \\<in> carrier_mat d d\n  \\<rho>\\<^sub>1 \\<in> carrier_mat d d\n  \\<rho>\\<^sub>2 \\<in> carrier_mat d d\n  x1 0 \\<in> carrier_mat d d\n  x1 1 \\<in> carrier_mat d d\n  partial_density_operator \\<rho>\\<^sub>1\n  partial_density_operator \\<rho>\\<^sub>2\n  trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) \\<le> 1\n  well_com x2\n  measurement d 2 x1\n  \\<lbrakk>?\\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n   ?\\<rho>\\<^sub>2 \\<in> carrier_mat d d;\n   partial_density_operator ?\\<rho>\\<^sub>1;\n   partial_density_operator ?\\<rho>\\<^sub>2;\n   trace (?\\<rho>\\<^sub>1 + ?\\<rho>\\<^sub>2) \\<le> 1\\<rbrakk>\n  \\<Longrightarrow> denote x2 (?\\<rho>\\<^sub>1 + ?\\<rho>\\<^sub>2) =\n                    denote x2 ?\\<rho>\\<^sub>1 + denote x2 ?\\<rho>\\<^sub>2\n  \\<lbrakk>measurement ?d ?n ?M; ?k < ?n\\<rbrakk>\n  \\<Longrightarrow> ?M ?k \\<in> carrier_mat ?d ?d\n\ngoal (1 subgoal):\n 1. \\<And>k.\n       k < m \\<Longrightarrow>\n       denote_while_n (x1 0) (x1 1) (denote x2) k \\<rho>\\<^sub>2\n       \\<in> carrier_mat d d", "by auto"], ["proof (state)\nthis:\n  ?k < m \\<Longrightarrow>\n  denote_while_n (x1 0) (x1 1) (denote x2) ?k \\<rho>\\<^sub>2\n  \\<in> carrier_mat d d\n\ngoal (1 subgoal):\n 1. matrix_sum d\n     (\\<lambda>n.\n         denote_while_n (x1 0) (x1 1) (denote x2) n\n          (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2))\n     m =\n    matrix_sum d\n     (\\<lambda>n. denote_while_n (x1 0) (x1 1) (denote x2) n \\<rho>\\<^sub>1)\n     m +\n    matrix_sum d\n     (\\<lambda>n. denote_while_n (x1 0) (x1 1) (denote x2) n \\<rho>\\<^sub>2)\n     m", "moreover"], ["proof (state)\nthis:\n  ?k < m \\<Longrightarrow>\n  denote_while_n (x1 0) (x1 1) (denote x2) ?k \\<rho>\\<^sub>2\n  \\<in> carrier_mat d d\n\ngoal (1 subgoal):\n 1. matrix_sum d\n     (\\<lambda>n.\n         denote_while_n (x1 0) (x1 1) (denote x2) n\n          (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2))\n     m =\n    matrix_sum d\n     (\\<lambda>n. denote_while_n (x1 0) (x1 1) (denote x2) n \\<rho>\\<^sub>1)\n     m +\n    matrix_sum d\n     (\\<lambda>n. denote_while_n (x1 0) (x1 1) (denote x2) n \\<rho>\\<^sub>2)\n     m", "have \"(\\<forall>  k < m.\n      denote_while_n (x1 0) (x1 1) (denote x2) k (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) = denote_while_n (x1 0) (x1 1) (denote x2) k \\<rho>\\<^sub>1 + denote_while_n (x1 0) (x1 1) (denote x2) k \\<rho>\\<^sub>2)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>k<m.\n       denote_while_n (x1 0) (x1 1) (denote x2) k\n        (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) =\n       denote_while_n (x1 0) (x1 1) (denote x2) k \\<rho>\\<^sub>1 +\n       denote_while_n (x1 0) (x1 1) (denote x2) k \\<rho>\\<^sub>2", "using denote_while_n_add assms"], ["proof (prove)\nusing this:\n  \\<lbrakk>?x1.0 0 \\<in> carrier_mat d d; ?x1.0 1 \\<in> carrier_mat d d;\n   well_com ?x2.0; measurement d 2 ?x1.0;\n   \\<And>\\<rho>\\<^sub>1 \\<rho>\\<^sub>2.\n      \\<lbrakk>\\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n       \\<rho>\\<^sub>2 \\<in> carrier_mat d d;\n       partial_density_operator \\<rho>\\<^sub>1;\n       partial_density_operator \\<rho>\\<^sub>2;\n       trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) \\<le> 1\\<rbrakk>\n      \\<Longrightarrow> denote ?x2.0 (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) =\n                        denote ?x2.0 \\<rho>\\<^sub>1 +\n                        denote ?x2.0 \\<rho>\\<^sub>2;\n   ?\\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n   ?\\<rho>\\<^sub>2 \\<in> carrier_mat d d;\n   partial_density_operator ?\\<rho>\\<^sub>1;\n   partial_density_operator ?\\<rho>\\<^sub>2;\n   trace (?\\<rho>\\<^sub>1 + ?\\<rho>\\<^sub>2) \\<le> 1\\<rbrakk>\n  \\<Longrightarrow> denote_while_n (?x1.0 0) (?x1.0 1) (denote ?x2.0) ?k\n                     (?\\<rho>\\<^sub>1 + ?\\<rho>\\<^sub>2) =\n                    denote_while_n (?x1.0 0) (?x1.0 1) (denote ?x2.0) ?k\n                     ?\\<rho>\\<^sub>1 +\n                    denote_while_n (?x1.0 0) (?x1.0 1) (denote ?x2.0) ?k\n                     ?\\<rho>\\<^sub>2\n  \\<rho>\\<^sub>1 \\<in> carrier_mat d d\n  \\<rho>\\<^sub>2 \\<in> carrier_mat d d\n  x1 0 \\<in> carrier_mat d d\n  x1 1 \\<in> carrier_mat d d\n  partial_density_operator \\<rho>\\<^sub>1\n  partial_density_operator \\<rho>\\<^sub>2\n  trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) \\<le> 1\n  well_com x2\n  measurement d 2 x1\n  \\<lbrakk>?\\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n   ?\\<rho>\\<^sub>2 \\<in> carrier_mat d d;\n   partial_density_operator ?\\<rho>\\<^sub>1;\n   partial_density_operator ?\\<rho>\\<^sub>2;\n   trace (?\\<rho>\\<^sub>1 + ?\\<rho>\\<^sub>2) \\<le> 1\\<rbrakk>\n  \\<Longrightarrow> denote x2 (?\\<rho>\\<^sub>1 + ?\\<rho>\\<^sub>2) =\n                    denote x2 ?\\<rho>\\<^sub>1 + denote x2 ?\\<rho>\\<^sub>2\n\ngoal (1 subgoal):\n 1. \\<forall>k<m.\n       denote_while_n (x1 0) (x1 1) (denote x2) k\n        (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) =\n       denote_while_n (x1 0) (x1 1) (denote x2) k \\<rho>\\<^sub>1 +\n       denote_while_n (x1 0) (x1 1) (denote x2) k \\<rho>\\<^sub>2", "by auto"], ["proof (state)\nthis:\n  \\<forall>k<m.\n     denote_while_n (x1 0) (x1 1) (denote x2) k\n      (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) =\n     denote_while_n (x1 0) (x1 1) (denote x2) k \\<rho>\\<^sub>1 +\n     denote_while_n (x1 0) (x1 1) (denote x2) k \\<rho>\\<^sub>2\n\ngoal (1 subgoal):\n 1. matrix_sum d\n     (\\<lambda>n.\n         denote_while_n (x1 0) (x1 1) (denote x2) n\n          (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2))\n     m =\n    matrix_sum d\n     (\\<lambda>n. denote_while_n (x1 0) (x1 1) (denote x2) n \\<rho>\\<^sub>1)\n     m +\n    matrix_sum d\n     (\\<lambda>n. denote_while_n (x1 0) (x1 1) (denote x2) n \\<rho>\\<^sub>2)\n     m", "ultimately"], ["proof (chain)\npicking this:\n  ?k < m \\<Longrightarrow>\n  denote_while_n (x1 0) (x1 1) (denote x2) ?k\n   (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2)\n  \\<in> carrier_mat d d\n  ?k < m \\<Longrightarrow>\n  denote_while_n (x1 0) (x1 1) (denote x2) ?k \\<rho>\\<^sub>1\n  \\<in> carrier_mat d d\n  ?k < m \\<Longrightarrow>\n  denote_while_n (x1 0) (x1 1) (denote x2) ?k \\<rho>\\<^sub>2\n  \\<in> carrier_mat d d\n  \\<forall>k<m.\n     denote_while_n (x1 0) (x1 1) (denote x2) k\n      (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) =\n     denote_while_n (x1 0) (x1 1) (denote x2) k \\<rho>\\<^sub>1 +\n     denote_while_n (x1 0) (x1 1) (denote x2) k \\<rho>\\<^sub>2", "show ?thesis"], ["proof (prove)\nusing this:\n  ?k < m \\<Longrightarrow>\n  denote_while_n (x1 0) (x1 1) (denote x2) ?k\n   (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2)\n  \\<in> carrier_mat d d\n  ?k < m \\<Longrightarrow>\n  denote_while_n (x1 0) (x1 1) (denote x2) ?k \\<rho>\\<^sub>1\n  \\<in> carrier_mat d d\n  ?k < m \\<Longrightarrow>\n  denote_while_n (x1 0) (x1 1) (denote x2) ?k \\<rho>\\<^sub>2\n  \\<in> carrier_mat d d\n  \\<forall>k<m.\n     denote_while_n (x1 0) (x1 1) (denote x2) k\n      (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) =\n     denote_while_n (x1 0) (x1 1) (denote x2) k \\<rho>\\<^sub>1 +\n     denote_while_n (x1 0) (x1 1) (denote x2) k \\<rho>\\<^sub>2\n\ngoal (1 subgoal):\n 1. matrix_sum d\n     (\\<lambda>n.\n         denote_while_n (x1 0) (x1 1) (denote x2) n\n          (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2))\n     m =\n    matrix_sum d\n     (\\<lambda>n. denote_while_n (x1 0) (x1 1) (denote x2) n \\<rho>\\<^sub>1)\n     m +\n    matrix_sum d\n     (\\<lambda>n. denote_while_n (x1 0) (x1 1) (denote x2) n \\<rho>\\<^sub>2)\n     m", "using matrix_sum_add[of m \"(\\<lambda>n. denote_while_n (x1 0) (x1 1) (denote x2) n (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2))\" d \"(\\<lambda>n. denote_while_n (x1 0) (x1 1) (denote x2) n \\<rho>\\<^sub>1)\"\n        \"(\\<lambda>n. denote_while_n (x1 0) (x1 1) (denote x2) n \\<rho>\\<^sub>2)\"]"], ["proof (prove)\nusing this:\n  ?k < m \\<Longrightarrow>\n  denote_while_n (x1 0) (x1 1) (denote x2) ?k\n   (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2)\n  \\<in> carrier_mat d d\n  ?k < m \\<Longrightarrow>\n  denote_while_n (x1 0) (x1 1) (denote x2) ?k \\<rho>\\<^sub>1\n  \\<in> carrier_mat d d\n  ?k < m \\<Longrightarrow>\n  denote_while_n (x1 0) (x1 1) (denote x2) ?k \\<rho>\\<^sub>2\n  \\<in> carrier_mat d d\n  \\<forall>k<m.\n     denote_while_n (x1 0) (x1 1) (denote x2) k\n      (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) =\n     denote_while_n (x1 0) (x1 1) (denote x2) k \\<rho>\\<^sub>1 +\n     denote_while_n (x1 0) (x1 1) (denote x2) k \\<rho>\\<^sub>2\n  \\<lbrakk>\\<And>k.\n              k < m \\<Longrightarrow>\n              denote_while_n (x1 0) (x1 1) (denote x2) k\n               (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2)\n              \\<in> carrier_mat d d;\n   \\<And>k.\n      k < m \\<Longrightarrow>\n      denote_while_n (x1 0) (x1 1) (denote x2) k \\<rho>\\<^sub>1\n      \\<in> carrier_mat d d;\n   \\<And>k.\n      k < m \\<Longrightarrow>\n      denote_while_n (x1 0) (x1 1) (denote x2) k \\<rho>\\<^sub>2\n      \\<in> carrier_mat d d;\n   \\<And>k.\n      k < m \\<Longrightarrow>\n      denote_while_n (x1 0) (x1 1) (denote x2) k\n       (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) =\n      denote_while_n (x1 0) (x1 1) (denote x2) k \\<rho>\\<^sub>1 +\n      denote_while_n (x1 0) (x1 1) (denote x2) k \\<rho>\\<^sub>2\\<rbrakk>\n  \\<Longrightarrow> matrix_sum d\n                     (\\<lambda>n.\n                         denote_while_n (x1 0) (x1 1) (denote x2) n\n                          (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2))\n                     m =\n                    matrix_sum d\n                     (\\<lambda>n.\n                         denote_while_n (x1 0) (x1 1) (denote x2) n\n                          \\<rho>\\<^sub>1)\n                     m +\n                    matrix_sum d\n                     (\\<lambda>n.\n                         denote_while_n (x1 0) (x1 1) (denote x2) n\n                          \\<rho>\\<^sub>2)\n                     m\n\ngoal (1 subgoal):\n 1. matrix_sum d\n     (\\<lambda>n.\n         denote_while_n (x1 0) (x1 1) (denote x2) n\n          (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2))\n     m =\n    matrix_sum d\n     (\\<lambda>n. denote_while_n (x1 0) (x1 1) (denote x2) n \\<rho>\\<^sub>1)\n     m +\n    matrix_sum d\n     (\\<lambda>n. denote_while_n (x1 0) (x1 1) (denote x2) n \\<rho>\\<^sub>2)\n     m", "by auto"], ["proof (state)\nthis:\n  matrix_sum d\n   (\\<lambda>n.\n       denote_while_n (x1 0) (x1 1) (denote x2) n\n        (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2))\n   m =\n  matrix_sum d\n   (\\<lambda>n. denote_while_n (x1 0) (x1 1) (denote x2) n \\<rho>\\<^sub>1)\n   m +\n  matrix_sum d\n   (\\<lambda>n. denote_while_n (x1 0) (x1 1) (denote x2) n \\<rho>\\<^sub>2) m\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  matrix_sum d\n   (\\<lambda>n.\n       denote_while_n (x1 0) (x1 1) (denote x2) n\n        (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2))\n   ?m =\n  matrix_sum d\n   (\\<lambda>n. denote_while_n (x1 0) (x1 1) (denote x2) n \\<rho>\\<^sub>1)\n   ?m +\n  matrix_sum d\n   (\\<lambda>n. denote_while_n (x1 0) (x1 1) (denote x2) n \\<rho>\\<^sub>2)\n   ?m\n\ngoal (1 subgoal):\n 1. denote_while (x1 0) (x1 1) (denote x2)\n     (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) =\n    denote_while (x1 0) (x1 1) (denote x2) \\<rho>\\<^sub>1 +\n    denote_while (x1 0) (x1 1) (denote x2) \\<rho>\\<^sub>2", "then"], ["proof (chain)\npicking this:\n  matrix_sum d\n   (\\<lambda>n.\n       denote_while_n (x1 0) (x1 1) (denote x2) n\n        (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2))\n   ?m =\n  matrix_sum d\n   (\\<lambda>n. denote_while_n (x1 0) (x1 1) (denote x2) n \\<rho>\\<^sub>1)\n   ?m +\n  matrix_sum d\n   (\\<lambda>n. denote_while_n (x1 0) (x1 1) (denote x2) n \\<rho>\\<^sub>2)\n   ?m", "have \"matrix_seq.lowner_lub (matrix_sum d (\\<lambda>n. denote_while_n (x1 0) (x1 1) (denote x2) n (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2))) = \n    matrix_seq.lowner_lub (\\<lambda>n. (matrix_sum d (\\<lambda>n. denote_while_n ?A ?B (denote x2) n \\<rho>\\<^sub>1)) n + (matrix_sum d (\\<lambda>n. denote_while_n ?A ?B (denote x2) n \\<rho>\\<^sub>2)) n)\""], ["proof (prove)\nusing this:\n  matrix_sum d\n   (\\<lambda>n.\n       denote_while_n (x1 0) (x1 1) (denote x2) n\n        (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2))\n   ?m =\n  matrix_sum d\n   (\\<lambda>n. denote_while_n (x1 0) (x1 1) (denote x2) n \\<rho>\\<^sub>1)\n   ?m +\n  matrix_sum d\n   (\\<lambda>n. denote_while_n (x1 0) (x1 1) (denote x2) n \\<rho>\\<^sub>2)\n   ?m\n\ngoal (1 subgoal):\n 1. matrix_seq.lowner_lub\n     (matrix_sum d\n       (\\<lambda>n.\n           denote_while_n (x1 0) (x1 1) (denote x2) n\n            (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2))) =\n    matrix_seq.lowner_lub\n     (\\<lambda>n.\n         matrix_sum d\n          (\\<lambda>n.\n              denote_while_n (x1 0) (x1 1) (denote x2) n \\<rho>\\<^sub>1)\n          n +\n         matrix_sum d\n          (\\<lambda>n.\n              denote_while_n (x1 0) (x1 1) (denote x2) n \\<rho>\\<^sub>2)\n          n)", "using lladd"], ["proof (prove)\nusing this:\n  matrix_sum d\n   (\\<lambda>n.\n       denote_while_n (x1 0) (x1 1) (denote x2) n\n        (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2))\n   ?m =\n  matrix_sum d\n   (\\<lambda>n. denote_while_n (x1 0) (x1 1) (denote x2) n \\<rho>\\<^sub>1)\n   ?m +\n  matrix_sum d\n   (\\<lambda>n. denote_while_n (x1 0) (x1 1) (denote x2) n \\<rho>\\<^sub>2)\n   ?m\n  matrix_seq.lowner_lub\n   (\\<lambda>n.\n       matrix_sum d\n        (\\<lambda>n.\n            denote_while_n (x1 0) (x1 1) (denote x2) n \\<rho>\\<^sub>1)\n        n +\n       matrix_sum d\n        (\\<lambda>n.\n            denote_while_n (x1 0) (x1 1) (denote x2) n \\<rho>\\<^sub>2)\n        n) =\n  matrix_seq.lowner_lub\n   (matrix_sum d\n     (\\<lambda>n.\n         denote_while_n (x1 0) (x1 1) (denote x2) n \\<rho>\\<^sub>1)) +\n  matrix_seq.lowner_lub\n   (matrix_sum d\n     (\\<lambda>n.\n         denote_while_n (x1 0) (x1 1) (denote x2) n \\<rho>\\<^sub>2))\n\ngoal (1 subgoal):\n 1. matrix_seq.lowner_lub\n     (matrix_sum d\n       (\\<lambda>n.\n           denote_while_n (x1 0) (x1 1) (denote x2) n\n            (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2))) =\n    matrix_seq.lowner_lub\n     (\\<lambda>n.\n         matrix_sum d\n          (\\<lambda>n.\n              denote_while_n (x1 0) (x1 1) (denote x2) n \\<rho>\\<^sub>1)\n          n +\n         matrix_sum d\n          (\\<lambda>n.\n              denote_while_n (x1 0) (x1 1) (denote x2) n \\<rho>\\<^sub>2)\n          n)", "by presburger"], ["proof (state)\nthis:\n  matrix_seq.lowner_lub\n   (matrix_sum d\n     (\\<lambda>n.\n         denote_while_n (x1 0) (x1 1) (denote x2) n\n          (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2))) =\n  matrix_seq.lowner_lub\n   (\\<lambda>n.\n       matrix_sum d\n        (\\<lambda>n.\n            denote_while_n (x1 0) (x1 1) (denote x2) n \\<rho>\\<^sub>1)\n        n +\n       matrix_sum d\n        (\\<lambda>n.\n            denote_while_n (x1 0) (x1 1) (denote x2) n \\<rho>\\<^sub>2)\n        n)\n\ngoal (1 subgoal):\n 1. denote_while (x1 0) (x1 1) (denote x2)\n     (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) =\n    denote_while (x1 0) (x1 1) (denote x2) \\<rho>\\<^sub>1 +\n    denote_while (x1 0) (x1 1) (denote x2) \\<rho>\\<^sub>2", "then"], ["proof (chain)\npicking this:\n  matrix_seq.lowner_lub\n   (matrix_sum d\n     (\\<lambda>n.\n         denote_while_n (x1 0) (x1 1) (denote x2) n\n          (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2))) =\n  matrix_seq.lowner_lub\n   (\\<lambda>n.\n       matrix_sum d\n        (\\<lambda>n.\n            denote_while_n (x1 0) (x1 1) (denote x2) n \\<rho>\\<^sub>1)\n        n +\n       matrix_sum d\n        (\\<lambda>n.\n            denote_while_n (x1 0) (x1 1) (denote x2) n \\<rho>\\<^sub>2)\n        n)", "show ?thesis"], ["proof (prove)\nusing this:\n  matrix_seq.lowner_lub\n   (matrix_sum d\n     (\\<lambda>n.\n         denote_while_n (x1 0) (x1 1) (denote x2) n\n          (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2))) =\n  matrix_seq.lowner_lub\n   (\\<lambda>n.\n       matrix_sum d\n        (\\<lambda>n.\n            denote_while_n (x1 0) (x1 1) (denote x2) n \\<rho>\\<^sub>1)\n        n +\n       matrix_sum d\n        (\\<lambda>n.\n            denote_while_n (x1 0) (x1 1) (denote x2) n \\<rho>\\<^sub>2)\n        n)\n\ngoal (1 subgoal):\n 1. denote_while (x1 0) (x1 1) (denote x2)\n     (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) =\n    denote_while (x1 0) (x1 1) (denote x2) \\<rho>\\<^sub>1 +\n    denote_while (x1 0) (x1 1) (denote x2) \\<rho>\\<^sub>2", "unfolding denote_while_def matrix_inf_sum_def"], ["proof (prove)\nusing this:\n  matrix_seq.lowner_lub\n   (matrix_sum d\n     (\\<lambda>n.\n         denote_while_n (x1 0) (x1 1) (denote x2) n\n          (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2))) =\n  matrix_seq.lowner_lub\n   (\\<lambda>n.\n       matrix_sum d\n        (\\<lambda>n.\n            denote_while_n (x1 0) (x1 1) (denote x2) n \\<rho>\\<^sub>1)\n        n +\n       matrix_sum d\n        (\\<lambda>n.\n            denote_while_n (x1 0) (x1 1) (denote x2) n \\<rho>\\<^sub>2)\n        n)\n\ngoal (1 subgoal):\n 1. matrix_seq.lowner_lub\n     (matrix_sum d\n       (\\<lambda>n.\n           denote_while_n (x1 0) (x1 1) (denote x2) n\n            (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2))) =\n    matrix_seq.lowner_lub\n     (matrix_sum d\n       (\\<lambda>n.\n           denote_while_n (x1 0) (x1 1) (denote x2) n \\<rho>\\<^sub>1)) +\n    matrix_seq.lowner_lub\n     (matrix_sum d\n       (\\<lambda>n.\n           denote_while_n (x1 0) (x1 1) (denote x2) n \\<rho>\\<^sub>2))", "using lladd"], ["proof (prove)\nusing this:\n  matrix_seq.lowner_lub\n   (matrix_sum d\n     (\\<lambda>n.\n         denote_while_n (x1 0) (x1 1) (denote x2) n\n          (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2))) =\n  matrix_seq.lowner_lub\n   (\\<lambda>n.\n       matrix_sum d\n        (\\<lambda>n.\n            denote_while_n (x1 0) (x1 1) (denote x2) n \\<rho>\\<^sub>1)\n        n +\n       matrix_sum d\n        (\\<lambda>n.\n            denote_while_n (x1 0) (x1 1) (denote x2) n \\<rho>\\<^sub>2)\n        n)\n  matrix_seq.lowner_lub\n   (\\<lambda>n.\n       matrix_sum d\n        (\\<lambda>n.\n            denote_while_n (x1 0) (x1 1) (denote x2) n \\<rho>\\<^sub>1)\n        n +\n       matrix_sum d\n        (\\<lambda>n.\n            denote_while_n (x1 0) (x1 1) (denote x2) n \\<rho>\\<^sub>2)\n        n) =\n  matrix_seq.lowner_lub\n   (matrix_sum d\n     (\\<lambda>n.\n         denote_while_n (x1 0) (x1 1) (denote x2) n \\<rho>\\<^sub>1)) +\n  matrix_seq.lowner_lub\n   (matrix_sum d\n     (\\<lambda>n.\n         denote_while_n (x1 0) (x1 1) (denote x2) n \\<rho>\\<^sub>2))\n\ngoal (1 subgoal):\n 1. matrix_seq.lowner_lub\n     (matrix_sum d\n       (\\<lambda>n.\n           denote_while_n (x1 0) (x1 1) (denote x2) n\n            (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2))) =\n    matrix_seq.lowner_lub\n     (matrix_sum d\n       (\\<lambda>n.\n           denote_while_n (x1 0) (x1 1) (denote x2) n \\<rho>\\<^sub>1)) +\n    matrix_seq.lowner_lub\n     (matrix_sum d\n       (\\<lambda>n.\n           denote_while_n (x1 0) (x1 1) (denote x2) n \\<rho>\\<^sub>2))", "by auto"], ["proof (state)\nthis:\n  denote_while (x1 0) (x1 1) (denote x2) (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) =\n  denote_while (x1 0) (x1 1) (denote x2) \\<rho>\\<^sub>1 +\n  denote_while (x1 0) (x1 1) (denote x2) \\<rho>\\<^sub>2\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma denote_add:\n  \"well_com S \\<Longrightarrow> \\<rho>\\<^sub>1 \\<in> carrier_mat d d \\<Longrightarrow> \\<rho>\\<^sub>2 \\<in> carrier_mat d d \\<Longrightarrow>\n   partial_density_operator \\<rho>\\<^sub>1 \\<Longrightarrow> partial_density_operator \\<rho>\\<^sub>2 \\<Longrightarrow> trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) \\<le> 1 \\<Longrightarrow>\n   denote S (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) = denote S \\<rho>\\<^sub>1 + denote S \\<rho>\\<^sub>2\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>well_com S; \\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n     \\<rho>\\<^sub>2 \\<in> carrier_mat d d;\n     partial_density_operator \\<rho>\\<^sub>1;\n     partial_density_operator \\<rho>\\<^sub>2;\n     trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) \\<le> 1\\<rbrakk>\n    \\<Longrightarrow> denote S (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) =\n                      denote S \\<rho>\\<^sub>1 + denote S \\<rho>\\<^sub>2", "proof (induction arbitrary: \\<rho>\\<^sub>1 \\<rho>\\<^sub>2)"], ["proof (state)\ngoal (5 subgoals):\n 1. \\<And>\\<rho>\\<^sub>1 \\<rho>\\<^sub>2.\n       \\<lbrakk>well_com SKIP; \\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n        \\<rho>\\<^sub>2 \\<in> carrier_mat d d;\n        partial_density_operator \\<rho>\\<^sub>1;\n        partial_density_operator \\<rho>\\<^sub>2;\n        trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) \\<le> 1\\<rbrakk>\n       \\<Longrightarrow> denote SKIP (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) =\n                         denote SKIP \\<rho>\\<^sub>1 +\n                         denote SKIP \\<rho>\\<^sub>2\n 2. \\<And>x \\<rho>\\<^sub>1 \\<rho>\\<^sub>2.\n       \\<lbrakk>well_com (Utrans x); \\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n        \\<rho>\\<^sub>2 \\<in> carrier_mat d d;\n        partial_density_operator \\<rho>\\<^sub>1;\n        partial_density_operator \\<rho>\\<^sub>2;\n        trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) \\<le> 1\\<rbrakk>\n       \\<Longrightarrow> denote (Utrans x)\n                          (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) =\n                         denote (Utrans x) \\<rho>\\<^sub>1 +\n                         denote (Utrans x) \\<rho>\\<^sub>2\n 3. \\<And>x1 x2a \\<rho>\\<^sub>1 \\<rho>\\<^sub>2.\n       \\<lbrakk>\\<And>\\<rho>\\<^sub>1 \\<rho>\\<^sub>2.\n                   \\<lbrakk>well_com x1;\n                    \\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n                    \\<rho>\\<^sub>2 \\<in> carrier_mat d d;\n                    partial_density_operator \\<rho>\\<^sub>1;\n                    partial_density_operator \\<rho>\\<^sub>2;\n                    trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) \\<le> 1\\<rbrakk>\n                   \\<Longrightarrow> denote x1\n(\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) =\n                                     denote x1 \\<rho>\\<^sub>1 +\n                                     denote x1 \\<rho>\\<^sub>2;\n        \\<And>\\<rho>\\<^sub>1 \\<rho>\\<^sub>2.\n           \\<lbrakk>well_com x2a; \\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n            \\<rho>\\<^sub>2 \\<in> carrier_mat d d;\n            partial_density_operator \\<rho>\\<^sub>1;\n            partial_density_operator \\<rho>\\<^sub>2;\n            trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) \\<le> 1\\<rbrakk>\n           \\<Longrightarrow> denote x2a (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) =\n                             denote x2a \\<rho>\\<^sub>1 +\n                             denote x2a \\<rho>\\<^sub>2;\n        well_com (x1;; x2a); \\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n        \\<rho>\\<^sub>2 \\<in> carrier_mat d d;\n        partial_density_operator \\<rho>\\<^sub>1;\n        partial_density_operator \\<rho>\\<^sub>2;\n        trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) \\<le> 1\\<rbrakk>\n       \\<Longrightarrow> denote (x1;; x2a)\n                          (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) =\n                         denote (x1;; x2a) \\<rho>\\<^sub>1 +\n                         denote (x1;; x2a) \\<rho>\\<^sub>2\n 4. \\<And>x1 x2a x3 \\<rho>\\<^sub>1 \\<rho>\\<^sub>2.\n       \\<lbrakk>\\<And>x3a \\<rho>\\<^sub>1 \\<rho>\\<^sub>2.\n                   \\<lbrakk>x3a \\<in> set x3; well_com x3a;\n                    \\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n                    \\<rho>\\<^sub>2 \\<in> carrier_mat d d;\n                    partial_density_operator \\<rho>\\<^sub>1;\n                    partial_density_operator \\<rho>\\<^sub>2;\n                    trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) \\<le> 1\\<rbrakk>\n                   \\<Longrightarrow> denote x3a\n(\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) =\n                                     denote x3a \\<rho>\\<^sub>1 +\n                                     denote x3a \\<rho>\\<^sub>2;\n        well_com (Measure x1 x2a x3); \\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n        \\<rho>\\<^sub>2 \\<in> carrier_mat d d;\n        partial_density_operator \\<rho>\\<^sub>1;\n        partial_density_operator \\<rho>\\<^sub>2;\n        trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) \\<le> 1\\<rbrakk>\n       \\<Longrightarrow> denote (Measure x1 x2a x3)\n                          (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) =\n                         denote (Measure x1 x2a x3) \\<rho>\\<^sub>1 +\n                         denote (Measure x1 x2a x3) \\<rho>\\<^sub>2\n 5. \\<And>x1 x2a \\<rho>\\<^sub>1 \\<rho>\\<^sub>2.\n       \\<lbrakk>\\<And>\\<rho>\\<^sub>1 \\<rho>\\<^sub>2.\n                   \\<lbrakk>well_com x2a;\n                    \\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n                    \\<rho>\\<^sub>2 \\<in> carrier_mat d d;\n                    partial_density_operator \\<rho>\\<^sub>1;\n                    partial_density_operator \\<rho>\\<^sub>2;\n                    trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) \\<le> 1\\<rbrakk>\n                   \\<Longrightarrow> denote x2a\n(\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) =\n                                     denote x2a \\<rho>\\<^sub>1 +\n                                     denote x2a \\<rho>\\<^sub>2;\n        well_com (While x1 x2a); \\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n        \\<rho>\\<^sub>2 \\<in> carrier_mat d d;\n        partial_density_operator \\<rho>\\<^sub>1;\n        partial_density_operator \\<rho>\\<^sub>2;\n        trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) \\<le> 1\\<rbrakk>\n       \\<Longrightarrow> denote (While x1 x2a)\n                          (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) =\n                         denote (While x1 x2a) \\<rho>\\<^sub>1 +\n                         denote (While x1 x2a) \\<rho>\\<^sub>2", "case SKIP"], ["proof (state)\nthis:\n  well_com SKIP\n  \\<rho>\\<^sub>1 \\<in> carrier_mat d d\n  \\<rho>\\<^sub>2 \\<in> carrier_mat d d\n  partial_density_operator \\<rho>\\<^sub>1\n  partial_density_operator \\<rho>\\<^sub>2\n  trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) \\<le> 1\n\ngoal (5 subgoals):\n 1. \\<And>\\<rho>\\<^sub>1 \\<rho>\\<^sub>2.\n       \\<lbrakk>well_com SKIP; \\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n        \\<rho>\\<^sub>2 \\<in> carrier_mat d d;\n        partial_density_operator \\<rho>\\<^sub>1;\n        partial_density_operator \\<rho>\\<^sub>2;\n        trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) \\<le> 1\\<rbrakk>\n       \\<Longrightarrow> denote SKIP (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) =\n                         denote SKIP \\<rho>\\<^sub>1 +\n                         denote SKIP \\<rho>\\<^sub>2\n 2. \\<And>x \\<rho>\\<^sub>1 \\<rho>\\<^sub>2.\n       \\<lbrakk>well_com (Utrans x); \\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n        \\<rho>\\<^sub>2 \\<in> carrier_mat d d;\n        partial_density_operator \\<rho>\\<^sub>1;\n        partial_density_operator \\<rho>\\<^sub>2;\n        trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) \\<le> 1\\<rbrakk>\n       \\<Longrightarrow> denote (Utrans x)\n                          (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) =\n                         denote (Utrans x) \\<rho>\\<^sub>1 +\n                         denote (Utrans x) \\<rho>\\<^sub>2\n 3. \\<And>x1 x2a \\<rho>\\<^sub>1 \\<rho>\\<^sub>2.\n       \\<lbrakk>\\<And>\\<rho>\\<^sub>1 \\<rho>\\<^sub>2.\n                   \\<lbrakk>well_com x1;\n                    \\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n                    \\<rho>\\<^sub>2 \\<in> carrier_mat d d;\n                    partial_density_operator \\<rho>\\<^sub>1;\n                    partial_density_operator \\<rho>\\<^sub>2;\n                    trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) \\<le> 1\\<rbrakk>\n                   \\<Longrightarrow> denote x1\n(\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) =\n                                     denote x1 \\<rho>\\<^sub>1 +\n                                     denote x1 \\<rho>\\<^sub>2;\n        \\<And>\\<rho>\\<^sub>1 \\<rho>\\<^sub>2.\n           \\<lbrakk>well_com x2a; \\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n            \\<rho>\\<^sub>2 \\<in> carrier_mat d d;\n            partial_density_operator \\<rho>\\<^sub>1;\n            partial_density_operator \\<rho>\\<^sub>2;\n            trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) \\<le> 1\\<rbrakk>\n           \\<Longrightarrow> denote x2a (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) =\n                             denote x2a \\<rho>\\<^sub>1 +\n                             denote x2a \\<rho>\\<^sub>2;\n        well_com (x1;; x2a); \\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n        \\<rho>\\<^sub>2 \\<in> carrier_mat d d;\n        partial_density_operator \\<rho>\\<^sub>1;\n        partial_density_operator \\<rho>\\<^sub>2;\n        trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) \\<le> 1\\<rbrakk>\n       \\<Longrightarrow> denote (x1;; x2a)\n                          (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) =\n                         denote (x1;; x2a) \\<rho>\\<^sub>1 +\n                         denote (x1;; x2a) \\<rho>\\<^sub>2\n 4. \\<And>x1 x2a x3 \\<rho>\\<^sub>1 \\<rho>\\<^sub>2.\n       \\<lbrakk>\\<And>x3a \\<rho>\\<^sub>1 \\<rho>\\<^sub>2.\n                   \\<lbrakk>x3a \\<in> set x3; well_com x3a;\n                    \\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n                    \\<rho>\\<^sub>2 \\<in> carrier_mat d d;\n                    partial_density_operator \\<rho>\\<^sub>1;\n                    partial_density_operator \\<rho>\\<^sub>2;\n                    trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) \\<le> 1\\<rbrakk>\n                   \\<Longrightarrow> denote x3a\n(\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) =\n                                     denote x3a \\<rho>\\<^sub>1 +\n                                     denote x3a \\<rho>\\<^sub>2;\n        well_com (Measure x1 x2a x3); \\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n        \\<rho>\\<^sub>2 \\<in> carrier_mat d d;\n        partial_density_operator \\<rho>\\<^sub>1;\n        partial_density_operator \\<rho>\\<^sub>2;\n        trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) \\<le> 1\\<rbrakk>\n       \\<Longrightarrow> denote (Measure x1 x2a x3)\n                          (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) =\n                         denote (Measure x1 x2a x3) \\<rho>\\<^sub>1 +\n                         denote (Measure x1 x2a x3) \\<rho>\\<^sub>2\n 5. \\<And>x1 x2a \\<rho>\\<^sub>1 \\<rho>\\<^sub>2.\n       \\<lbrakk>\\<And>\\<rho>\\<^sub>1 \\<rho>\\<^sub>2.\n                   \\<lbrakk>well_com x2a;\n                    \\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n                    \\<rho>\\<^sub>2 \\<in> carrier_mat d d;\n                    partial_density_operator \\<rho>\\<^sub>1;\n                    partial_density_operator \\<rho>\\<^sub>2;\n                    trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) \\<le> 1\\<rbrakk>\n                   \\<Longrightarrow> denote x2a\n(\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) =\n                                     denote x2a \\<rho>\\<^sub>1 +\n                                     denote x2a \\<rho>\\<^sub>2;\n        well_com (While x1 x2a); \\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n        \\<rho>\\<^sub>2 \\<in> carrier_mat d d;\n        partial_density_operator \\<rho>\\<^sub>1;\n        partial_density_operator \\<rho>\\<^sub>2;\n        trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) \\<le> 1\\<rbrakk>\n       \\<Longrightarrow> denote (While x1 x2a)\n                          (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) =\n                         denote (While x1 x2a) \\<rho>\\<^sub>1 +\n                         denote (While x1 x2a) \\<rho>\\<^sub>2", "then"], ["proof (chain)\npicking this:\n  well_com SKIP\n  \\<rho>\\<^sub>1 \\<in> carrier_mat d d\n  \\<rho>\\<^sub>2 \\<in> carrier_mat d d\n  partial_density_operator \\<rho>\\<^sub>1\n  partial_density_operator \\<rho>\\<^sub>2\n  trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) \\<le> 1", "show ?case"], ["proof (prove)\nusing this:\n  well_com SKIP\n  \\<rho>\\<^sub>1 \\<in> carrier_mat d d\n  \\<rho>\\<^sub>2 \\<in> carrier_mat d d\n  partial_density_operator \\<rho>\\<^sub>1\n  partial_density_operator \\<rho>\\<^sub>2\n  trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) \\<le> 1\n\ngoal (1 subgoal):\n 1. denote SKIP (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) =\n    denote SKIP \\<rho>\\<^sub>1 + denote SKIP \\<rho>\\<^sub>2", "by auto"], ["proof (state)\nthis:\n  denote SKIP (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) =\n  denote SKIP \\<rho>\\<^sub>1 + denote SKIP \\<rho>\\<^sub>2\n\ngoal (4 subgoals):\n 1. \\<And>x \\<rho>\\<^sub>1 \\<rho>\\<^sub>2.\n       \\<lbrakk>well_com (Utrans x); \\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n        \\<rho>\\<^sub>2 \\<in> carrier_mat d d;\n        partial_density_operator \\<rho>\\<^sub>1;\n        partial_density_operator \\<rho>\\<^sub>2;\n        trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) \\<le> 1\\<rbrakk>\n       \\<Longrightarrow> denote (Utrans x)\n                          (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) =\n                         denote (Utrans x) \\<rho>\\<^sub>1 +\n                         denote (Utrans x) \\<rho>\\<^sub>2\n 2. \\<And>x1 x2a \\<rho>\\<^sub>1 \\<rho>\\<^sub>2.\n       \\<lbrakk>\\<And>\\<rho>\\<^sub>1 \\<rho>\\<^sub>2.\n                   \\<lbrakk>well_com x1;\n                    \\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n                    \\<rho>\\<^sub>2 \\<in> carrier_mat d d;\n                    partial_density_operator \\<rho>\\<^sub>1;\n                    partial_density_operator \\<rho>\\<^sub>2;\n                    trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) \\<le> 1\\<rbrakk>\n                   \\<Longrightarrow> denote x1\n(\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) =\n                                     denote x1 \\<rho>\\<^sub>1 +\n                                     denote x1 \\<rho>\\<^sub>2;\n        \\<And>\\<rho>\\<^sub>1 \\<rho>\\<^sub>2.\n           \\<lbrakk>well_com x2a; \\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n            \\<rho>\\<^sub>2 \\<in> carrier_mat d d;\n            partial_density_operator \\<rho>\\<^sub>1;\n            partial_density_operator \\<rho>\\<^sub>2;\n            trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) \\<le> 1\\<rbrakk>\n           \\<Longrightarrow> denote x2a (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) =\n                             denote x2a \\<rho>\\<^sub>1 +\n                             denote x2a \\<rho>\\<^sub>2;\n        well_com (x1;; x2a); \\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n        \\<rho>\\<^sub>2 \\<in> carrier_mat d d;\n        partial_density_operator \\<rho>\\<^sub>1;\n        partial_density_operator \\<rho>\\<^sub>2;\n        trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) \\<le> 1\\<rbrakk>\n       \\<Longrightarrow> denote (x1;; x2a)\n                          (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) =\n                         denote (x1;; x2a) \\<rho>\\<^sub>1 +\n                         denote (x1;; x2a) \\<rho>\\<^sub>2\n 3. \\<And>x1 x2a x3 \\<rho>\\<^sub>1 \\<rho>\\<^sub>2.\n       \\<lbrakk>\\<And>x3a \\<rho>\\<^sub>1 \\<rho>\\<^sub>2.\n                   \\<lbrakk>x3a \\<in> set x3; well_com x3a;\n                    \\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n                    \\<rho>\\<^sub>2 \\<in> carrier_mat d d;\n                    partial_density_operator \\<rho>\\<^sub>1;\n                    partial_density_operator \\<rho>\\<^sub>2;\n                    trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) \\<le> 1\\<rbrakk>\n                   \\<Longrightarrow> denote x3a\n(\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) =\n                                     denote x3a \\<rho>\\<^sub>1 +\n                                     denote x3a \\<rho>\\<^sub>2;\n        well_com (Measure x1 x2a x3); \\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n        \\<rho>\\<^sub>2 \\<in> carrier_mat d d;\n        partial_density_operator \\<rho>\\<^sub>1;\n        partial_density_operator \\<rho>\\<^sub>2;\n        trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) \\<le> 1\\<rbrakk>\n       \\<Longrightarrow> denote (Measure x1 x2a x3)\n                          (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) =\n                         denote (Measure x1 x2a x3) \\<rho>\\<^sub>1 +\n                         denote (Measure x1 x2a x3) \\<rho>\\<^sub>2\n 4. \\<And>x1 x2a \\<rho>\\<^sub>1 \\<rho>\\<^sub>2.\n       \\<lbrakk>\\<And>\\<rho>\\<^sub>1 \\<rho>\\<^sub>2.\n                   \\<lbrakk>well_com x2a;\n                    \\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n                    \\<rho>\\<^sub>2 \\<in> carrier_mat d d;\n                    partial_density_operator \\<rho>\\<^sub>1;\n                    partial_density_operator \\<rho>\\<^sub>2;\n                    trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) \\<le> 1\\<rbrakk>\n                   \\<Longrightarrow> denote x2a\n(\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) =\n                                     denote x2a \\<rho>\\<^sub>1 +\n                                     denote x2a \\<rho>\\<^sub>2;\n        well_com (While x1 x2a); \\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n        \\<rho>\\<^sub>2 \\<in> carrier_mat d d;\n        partial_density_operator \\<rho>\\<^sub>1;\n        partial_density_operator \\<rho>\\<^sub>2;\n        trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) \\<le> 1\\<rbrakk>\n       \\<Longrightarrow> denote (While x1 x2a)\n                          (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) =\n                         denote (While x1 x2a) \\<rho>\\<^sub>1 +\n                         denote (While x1 x2a) \\<rho>\\<^sub>2", "next"], ["proof (state)\ngoal (4 subgoals):\n 1. \\<And>x \\<rho>\\<^sub>1 \\<rho>\\<^sub>2.\n       \\<lbrakk>well_com (Utrans x); \\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n        \\<rho>\\<^sub>2 \\<in> carrier_mat d d;\n        partial_density_operator \\<rho>\\<^sub>1;\n        partial_density_operator \\<rho>\\<^sub>2;\n        trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) \\<le> 1\\<rbrakk>\n       \\<Longrightarrow> denote (Utrans x)\n                          (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) =\n                         denote (Utrans x) \\<rho>\\<^sub>1 +\n                         denote (Utrans x) \\<rho>\\<^sub>2\n 2. \\<And>x1 x2a \\<rho>\\<^sub>1 \\<rho>\\<^sub>2.\n       \\<lbrakk>\\<And>\\<rho>\\<^sub>1 \\<rho>\\<^sub>2.\n                   \\<lbrakk>well_com x1;\n                    \\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n                    \\<rho>\\<^sub>2 \\<in> carrier_mat d d;\n                    partial_density_operator \\<rho>\\<^sub>1;\n                    partial_density_operator \\<rho>\\<^sub>2;\n                    trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) \\<le> 1\\<rbrakk>\n                   \\<Longrightarrow> denote x1\n(\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) =\n                                     denote x1 \\<rho>\\<^sub>1 +\n                                     denote x1 \\<rho>\\<^sub>2;\n        \\<And>\\<rho>\\<^sub>1 \\<rho>\\<^sub>2.\n           \\<lbrakk>well_com x2a; \\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n            \\<rho>\\<^sub>2 \\<in> carrier_mat d d;\n            partial_density_operator \\<rho>\\<^sub>1;\n            partial_density_operator \\<rho>\\<^sub>2;\n            trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) \\<le> 1\\<rbrakk>\n           \\<Longrightarrow> denote x2a (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) =\n                             denote x2a \\<rho>\\<^sub>1 +\n                             denote x2a \\<rho>\\<^sub>2;\n        well_com (x1;; x2a); \\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n        \\<rho>\\<^sub>2 \\<in> carrier_mat d d;\n        partial_density_operator \\<rho>\\<^sub>1;\n        partial_density_operator \\<rho>\\<^sub>2;\n        trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) \\<le> 1\\<rbrakk>\n       \\<Longrightarrow> denote (x1;; x2a)\n                          (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) =\n                         denote (x1;; x2a) \\<rho>\\<^sub>1 +\n                         denote (x1;; x2a) \\<rho>\\<^sub>2\n 3. \\<And>x1 x2a x3 \\<rho>\\<^sub>1 \\<rho>\\<^sub>2.\n       \\<lbrakk>\\<And>x3a \\<rho>\\<^sub>1 \\<rho>\\<^sub>2.\n                   \\<lbrakk>x3a \\<in> set x3; well_com x3a;\n                    \\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n                    \\<rho>\\<^sub>2 \\<in> carrier_mat d d;\n                    partial_density_operator \\<rho>\\<^sub>1;\n                    partial_density_operator \\<rho>\\<^sub>2;\n                    trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) \\<le> 1\\<rbrakk>\n                   \\<Longrightarrow> denote x3a\n(\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) =\n                                     denote x3a \\<rho>\\<^sub>1 +\n                                     denote x3a \\<rho>\\<^sub>2;\n        well_com (Measure x1 x2a x3); \\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n        \\<rho>\\<^sub>2 \\<in> carrier_mat d d;\n        partial_density_operator \\<rho>\\<^sub>1;\n        partial_density_operator \\<rho>\\<^sub>2;\n        trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) \\<le> 1\\<rbrakk>\n       \\<Longrightarrow> denote (Measure x1 x2a x3)\n                          (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) =\n                         denote (Measure x1 x2a x3) \\<rho>\\<^sub>1 +\n                         denote (Measure x1 x2a x3) \\<rho>\\<^sub>2\n 4. \\<And>x1 x2a \\<rho>\\<^sub>1 \\<rho>\\<^sub>2.\n       \\<lbrakk>\\<And>\\<rho>\\<^sub>1 \\<rho>\\<^sub>2.\n                   \\<lbrakk>well_com x2a;\n                    \\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n                    \\<rho>\\<^sub>2 \\<in> carrier_mat d d;\n                    partial_density_operator \\<rho>\\<^sub>1;\n                    partial_density_operator \\<rho>\\<^sub>2;\n                    trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) \\<le> 1\\<rbrakk>\n                   \\<Longrightarrow> denote x2a\n(\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) =\n                                     denote x2a \\<rho>\\<^sub>1 +\n                                     denote x2a \\<rho>\\<^sub>2;\n        well_com (While x1 x2a); \\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n        \\<rho>\\<^sub>2 \\<in> carrier_mat d d;\n        partial_density_operator \\<rho>\\<^sub>1;\n        partial_density_operator \\<rho>\\<^sub>2;\n        trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) \\<le> 1\\<rbrakk>\n       \\<Longrightarrow> denote (While x1 x2a)\n                          (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) =\n                         denote (While x1 x2a) \\<rho>\\<^sub>1 +\n                         denote (While x1 x2a) \\<rho>\\<^sub>2", "case (Utrans U)"], ["proof (state)\nthis:\n  well_com (Utrans U)\n  \\<rho>\\<^sub>1 \\<in> carrier_mat d d\n  \\<rho>\\<^sub>2 \\<in> carrier_mat d d\n  partial_density_operator \\<rho>\\<^sub>1\n  partial_density_operator \\<rho>\\<^sub>2\n  trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) \\<le> 1\n\ngoal (4 subgoals):\n 1. \\<And>x \\<rho>\\<^sub>1 \\<rho>\\<^sub>2.\n       \\<lbrakk>well_com (Utrans x); \\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n        \\<rho>\\<^sub>2 \\<in> carrier_mat d d;\n        partial_density_operator \\<rho>\\<^sub>1;\n        partial_density_operator \\<rho>\\<^sub>2;\n        trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) \\<le> 1\\<rbrakk>\n       \\<Longrightarrow> denote (Utrans x)\n                          (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) =\n                         denote (Utrans x) \\<rho>\\<^sub>1 +\n                         denote (Utrans x) \\<rho>\\<^sub>2\n 2. \\<And>x1 x2a \\<rho>\\<^sub>1 \\<rho>\\<^sub>2.\n       \\<lbrakk>\\<And>\\<rho>\\<^sub>1 \\<rho>\\<^sub>2.\n                   \\<lbrakk>well_com x1;\n                    \\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n                    \\<rho>\\<^sub>2 \\<in> carrier_mat d d;\n                    partial_density_operator \\<rho>\\<^sub>1;\n                    partial_density_operator \\<rho>\\<^sub>2;\n                    trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) \\<le> 1\\<rbrakk>\n                   \\<Longrightarrow> denote x1\n(\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) =\n                                     denote x1 \\<rho>\\<^sub>1 +\n                                     denote x1 \\<rho>\\<^sub>2;\n        \\<And>\\<rho>\\<^sub>1 \\<rho>\\<^sub>2.\n           \\<lbrakk>well_com x2a; \\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n            \\<rho>\\<^sub>2 \\<in> carrier_mat d d;\n            partial_density_operator \\<rho>\\<^sub>1;\n            partial_density_operator \\<rho>\\<^sub>2;\n            trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) \\<le> 1\\<rbrakk>\n           \\<Longrightarrow> denote x2a (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) =\n                             denote x2a \\<rho>\\<^sub>1 +\n                             denote x2a \\<rho>\\<^sub>2;\n        well_com (x1;; x2a); \\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n        \\<rho>\\<^sub>2 \\<in> carrier_mat d d;\n        partial_density_operator \\<rho>\\<^sub>1;\n        partial_density_operator \\<rho>\\<^sub>2;\n        trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) \\<le> 1\\<rbrakk>\n       \\<Longrightarrow> denote (x1;; x2a)\n                          (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) =\n                         denote (x1;; x2a) \\<rho>\\<^sub>1 +\n                         denote (x1;; x2a) \\<rho>\\<^sub>2\n 3. \\<And>x1 x2a x3 \\<rho>\\<^sub>1 \\<rho>\\<^sub>2.\n       \\<lbrakk>\\<And>x3a \\<rho>\\<^sub>1 \\<rho>\\<^sub>2.\n                   \\<lbrakk>x3a \\<in> set x3; well_com x3a;\n                    \\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n                    \\<rho>\\<^sub>2 \\<in> carrier_mat d d;\n                    partial_density_operator \\<rho>\\<^sub>1;\n                    partial_density_operator \\<rho>\\<^sub>2;\n                    trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) \\<le> 1\\<rbrakk>\n                   \\<Longrightarrow> denote x3a\n(\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) =\n                                     denote x3a \\<rho>\\<^sub>1 +\n                                     denote x3a \\<rho>\\<^sub>2;\n        well_com (Measure x1 x2a x3); \\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n        \\<rho>\\<^sub>2 \\<in> carrier_mat d d;\n        partial_density_operator \\<rho>\\<^sub>1;\n        partial_density_operator \\<rho>\\<^sub>2;\n        trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) \\<le> 1\\<rbrakk>\n       \\<Longrightarrow> denote (Measure x1 x2a x3)\n                          (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) =\n                         denote (Measure x1 x2a x3) \\<rho>\\<^sub>1 +\n                         denote (Measure x1 x2a x3) \\<rho>\\<^sub>2\n 4. \\<And>x1 x2a \\<rho>\\<^sub>1 \\<rho>\\<^sub>2.\n       \\<lbrakk>\\<And>\\<rho>\\<^sub>1 \\<rho>\\<^sub>2.\n                   \\<lbrakk>well_com x2a;\n                    \\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n                    \\<rho>\\<^sub>2 \\<in> carrier_mat d d;\n                    partial_density_operator \\<rho>\\<^sub>1;\n                    partial_density_operator \\<rho>\\<^sub>2;\n                    trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) \\<le> 1\\<rbrakk>\n                   \\<Longrightarrow> denote x2a\n(\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) =\n                                     denote x2a \\<rho>\\<^sub>1 +\n                                     denote x2a \\<rho>\\<^sub>2;\n        well_com (While x1 x2a); \\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n        \\<rho>\\<^sub>2 \\<in> carrier_mat d d;\n        partial_density_operator \\<rho>\\<^sub>1;\n        partial_density_operator \\<rho>\\<^sub>2;\n        trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) \\<le> 1\\<rbrakk>\n       \\<Longrightarrow> denote (While x1 x2a)\n                          (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) =\n                         denote (While x1 x2a) \\<rho>\\<^sub>1 +\n                         denote (While x1 x2a) \\<rho>\\<^sub>2", "then"], ["proof (chain)\npicking this:\n  well_com (Utrans U)\n  \\<rho>\\<^sub>1 \\<in> carrier_mat d d\n  \\<rho>\\<^sub>2 \\<in> carrier_mat d d\n  partial_density_operator \\<rho>\\<^sub>1\n  partial_density_operator \\<rho>\\<^sub>2\n  trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) \\<le> 1", "show ?case"], ["proof (prove)\nusing this:\n  well_com (Utrans U)\n  \\<rho>\\<^sub>1 \\<in> carrier_mat d d\n  \\<rho>\\<^sub>2 \\<in> carrier_mat d d\n  partial_density_operator \\<rho>\\<^sub>1\n  partial_density_operator \\<rho>\\<^sub>2\n  trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) \\<le> 1\n\ngoal (1 subgoal):\n 1. denote (Utrans U) (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) =\n    denote (Utrans U) \\<rho>\\<^sub>1 + denote (Utrans U) \\<rho>\\<^sub>2", "by (clarsimp, mat_assoc d)"], ["proof (state)\nthis:\n  denote (Utrans U) (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) =\n  denote (Utrans U) \\<rho>\\<^sub>1 + denote (Utrans U) \\<rho>\\<^sub>2\n\ngoal (3 subgoals):\n 1. \\<And>x1 x2a \\<rho>\\<^sub>1 \\<rho>\\<^sub>2.\n       \\<lbrakk>\\<And>\\<rho>\\<^sub>1 \\<rho>\\<^sub>2.\n                   \\<lbrakk>well_com x1;\n                    \\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n                    \\<rho>\\<^sub>2 \\<in> carrier_mat d d;\n                    partial_density_operator \\<rho>\\<^sub>1;\n                    partial_density_operator \\<rho>\\<^sub>2;\n                    trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) \\<le> 1\\<rbrakk>\n                   \\<Longrightarrow> denote x1\n(\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) =\n                                     denote x1 \\<rho>\\<^sub>1 +\n                                     denote x1 \\<rho>\\<^sub>2;\n        \\<And>\\<rho>\\<^sub>1 \\<rho>\\<^sub>2.\n           \\<lbrakk>well_com x2a; \\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n            \\<rho>\\<^sub>2 \\<in> carrier_mat d d;\n            partial_density_operator \\<rho>\\<^sub>1;\n            partial_density_operator \\<rho>\\<^sub>2;\n            trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) \\<le> 1\\<rbrakk>\n           \\<Longrightarrow> denote x2a (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) =\n                             denote x2a \\<rho>\\<^sub>1 +\n                             denote x2a \\<rho>\\<^sub>2;\n        well_com (x1;; x2a); \\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n        \\<rho>\\<^sub>2 \\<in> carrier_mat d d;\n        partial_density_operator \\<rho>\\<^sub>1;\n        partial_density_operator \\<rho>\\<^sub>2;\n        trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) \\<le> 1\\<rbrakk>\n       \\<Longrightarrow> denote (x1;; x2a)\n                          (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) =\n                         denote (x1;; x2a) \\<rho>\\<^sub>1 +\n                         denote (x1;; x2a) \\<rho>\\<^sub>2\n 2. \\<And>x1 x2a x3 \\<rho>\\<^sub>1 \\<rho>\\<^sub>2.\n       \\<lbrakk>\\<And>x3a \\<rho>\\<^sub>1 \\<rho>\\<^sub>2.\n                   \\<lbrakk>x3a \\<in> set x3; well_com x3a;\n                    \\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n                    \\<rho>\\<^sub>2 \\<in> carrier_mat d d;\n                    partial_density_operator \\<rho>\\<^sub>1;\n                    partial_density_operator \\<rho>\\<^sub>2;\n                    trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) \\<le> 1\\<rbrakk>\n                   \\<Longrightarrow> denote x3a\n(\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) =\n                                     denote x3a \\<rho>\\<^sub>1 +\n                                     denote x3a \\<rho>\\<^sub>2;\n        well_com (Measure x1 x2a x3); \\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n        \\<rho>\\<^sub>2 \\<in> carrier_mat d d;\n        partial_density_operator \\<rho>\\<^sub>1;\n        partial_density_operator \\<rho>\\<^sub>2;\n        trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) \\<le> 1\\<rbrakk>\n       \\<Longrightarrow> denote (Measure x1 x2a x3)\n                          (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) =\n                         denote (Measure x1 x2a x3) \\<rho>\\<^sub>1 +\n                         denote (Measure x1 x2a x3) \\<rho>\\<^sub>2\n 3. \\<And>x1 x2a \\<rho>\\<^sub>1 \\<rho>\\<^sub>2.\n       \\<lbrakk>\\<And>\\<rho>\\<^sub>1 \\<rho>\\<^sub>2.\n                   \\<lbrakk>well_com x2a;\n                    \\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n                    \\<rho>\\<^sub>2 \\<in> carrier_mat d d;\n                    partial_density_operator \\<rho>\\<^sub>1;\n                    partial_density_operator \\<rho>\\<^sub>2;\n                    trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) \\<le> 1\\<rbrakk>\n                   \\<Longrightarrow> denote x2a\n(\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) =\n                                     denote x2a \\<rho>\\<^sub>1 +\n                                     denote x2a \\<rho>\\<^sub>2;\n        well_com (While x1 x2a); \\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n        \\<rho>\\<^sub>2 \\<in> carrier_mat d d;\n        partial_density_operator \\<rho>\\<^sub>1;\n        partial_density_operator \\<rho>\\<^sub>2;\n        trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) \\<le> 1\\<rbrakk>\n       \\<Longrightarrow> denote (While x1 x2a)\n                          (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) =\n                         denote (While x1 x2a) \\<rho>\\<^sub>1 +\n                         denote (While x1 x2a) \\<rho>\\<^sub>2", "next"], ["proof (state)\ngoal (3 subgoals):\n 1. \\<And>x1 x2a \\<rho>\\<^sub>1 \\<rho>\\<^sub>2.\n       \\<lbrakk>\\<And>\\<rho>\\<^sub>1 \\<rho>\\<^sub>2.\n                   \\<lbrakk>well_com x1;\n                    \\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n                    \\<rho>\\<^sub>2 \\<in> carrier_mat d d;\n                    partial_density_operator \\<rho>\\<^sub>1;\n                    partial_density_operator \\<rho>\\<^sub>2;\n                    trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) \\<le> 1\\<rbrakk>\n                   \\<Longrightarrow> denote x1\n(\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) =\n                                     denote x1 \\<rho>\\<^sub>1 +\n                                     denote x1 \\<rho>\\<^sub>2;\n        \\<And>\\<rho>\\<^sub>1 \\<rho>\\<^sub>2.\n           \\<lbrakk>well_com x2a; \\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n            \\<rho>\\<^sub>2 \\<in> carrier_mat d d;\n            partial_density_operator \\<rho>\\<^sub>1;\n            partial_density_operator \\<rho>\\<^sub>2;\n            trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) \\<le> 1\\<rbrakk>\n           \\<Longrightarrow> denote x2a (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) =\n                             denote x2a \\<rho>\\<^sub>1 +\n                             denote x2a \\<rho>\\<^sub>2;\n        well_com (x1;; x2a); \\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n        \\<rho>\\<^sub>2 \\<in> carrier_mat d d;\n        partial_density_operator \\<rho>\\<^sub>1;\n        partial_density_operator \\<rho>\\<^sub>2;\n        trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) \\<le> 1\\<rbrakk>\n       \\<Longrightarrow> denote (x1;; x2a)\n                          (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) =\n                         denote (x1;; x2a) \\<rho>\\<^sub>1 +\n                         denote (x1;; x2a) \\<rho>\\<^sub>2\n 2. \\<And>x1 x2a x3 \\<rho>\\<^sub>1 \\<rho>\\<^sub>2.\n       \\<lbrakk>\\<And>x3a \\<rho>\\<^sub>1 \\<rho>\\<^sub>2.\n                   \\<lbrakk>x3a \\<in> set x3; well_com x3a;\n                    \\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n                    \\<rho>\\<^sub>2 \\<in> carrier_mat d d;\n                    partial_density_operator \\<rho>\\<^sub>1;\n                    partial_density_operator \\<rho>\\<^sub>2;\n                    trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) \\<le> 1\\<rbrakk>\n                   \\<Longrightarrow> denote x3a\n(\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) =\n                                     denote x3a \\<rho>\\<^sub>1 +\n                                     denote x3a \\<rho>\\<^sub>2;\n        well_com (Measure x1 x2a x3); \\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n        \\<rho>\\<^sub>2 \\<in> carrier_mat d d;\n        partial_density_operator \\<rho>\\<^sub>1;\n        partial_density_operator \\<rho>\\<^sub>2;\n        trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) \\<le> 1\\<rbrakk>\n       \\<Longrightarrow> denote (Measure x1 x2a x3)\n                          (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) =\n                         denote (Measure x1 x2a x3) \\<rho>\\<^sub>1 +\n                         denote (Measure x1 x2a x3) \\<rho>\\<^sub>2\n 3. \\<And>x1 x2a \\<rho>\\<^sub>1 \\<rho>\\<^sub>2.\n       \\<lbrakk>\\<And>\\<rho>\\<^sub>1 \\<rho>\\<^sub>2.\n                   \\<lbrakk>well_com x2a;\n                    \\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n                    \\<rho>\\<^sub>2 \\<in> carrier_mat d d;\n                    partial_density_operator \\<rho>\\<^sub>1;\n                    partial_density_operator \\<rho>\\<^sub>2;\n                    trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) \\<le> 1\\<rbrakk>\n                   \\<Longrightarrow> denote x2a\n(\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) =\n                                     denote x2a \\<rho>\\<^sub>1 +\n                                     denote x2a \\<rho>\\<^sub>2;\n        well_com (While x1 x2a); \\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n        \\<rho>\\<^sub>2 \\<in> carrier_mat d d;\n        partial_density_operator \\<rho>\\<^sub>1;\n        partial_density_operator \\<rho>\\<^sub>2;\n        trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) \\<le> 1\\<rbrakk>\n       \\<Longrightarrow> denote (While x1 x2a)\n                          (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) =\n                         denote (While x1 x2a) \\<rho>\\<^sub>1 +\n                         denote (While x1 x2a) \\<rho>\\<^sub>2", "case (Seq x1 x2a)"], ["proof (state)\nthis:\n  \\<lbrakk>well_com x1; ?\\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n   ?\\<rho>\\<^sub>2 \\<in> carrier_mat d d;\n   partial_density_operator ?\\<rho>\\<^sub>1;\n   partial_density_operator ?\\<rho>\\<^sub>2;\n   trace (?\\<rho>\\<^sub>1 + ?\\<rho>\\<^sub>2) \\<le> 1\\<rbrakk>\n  \\<Longrightarrow> denote x1 (?\\<rho>\\<^sub>1 + ?\\<rho>\\<^sub>2) =\n                    denote x1 ?\\<rho>\\<^sub>1 + denote x1 ?\\<rho>\\<^sub>2\n  \\<lbrakk>well_com x2a; ?\\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n   ?\\<rho>\\<^sub>2 \\<in> carrier_mat d d;\n   partial_density_operator ?\\<rho>\\<^sub>1;\n   partial_density_operator ?\\<rho>\\<^sub>2;\n   trace (?\\<rho>\\<^sub>1 + ?\\<rho>\\<^sub>2) \\<le> 1\\<rbrakk>\n  \\<Longrightarrow> denote x2a (?\\<rho>\\<^sub>1 + ?\\<rho>\\<^sub>2) =\n                    denote x2a ?\\<rho>\\<^sub>1 + denote x2a ?\\<rho>\\<^sub>2\n  well_com (x1;; x2a)\n  \\<rho>\\<^sub>1 \\<in> carrier_mat d d\n  \\<rho>\\<^sub>2 \\<in> carrier_mat d d\n  partial_density_operator \\<rho>\\<^sub>1\n  partial_density_operator \\<rho>\\<^sub>2\n  trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) \\<le> 1\n\ngoal (3 subgoals):\n 1. \\<And>x1 x2a \\<rho>\\<^sub>1 \\<rho>\\<^sub>2.\n       \\<lbrakk>\\<And>\\<rho>\\<^sub>1 \\<rho>\\<^sub>2.\n                   \\<lbrakk>well_com x1;\n                    \\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n                    \\<rho>\\<^sub>2 \\<in> carrier_mat d d;\n                    partial_density_operator \\<rho>\\<^sub>1;\n                    partial_density_operator \\<rho>\\<^sub>2;\n                    trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) \\<le> 1\\<rbrakk>\n                   \\<Longrightarrow> denote x1\n(\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) =\n                                     denote x1 \\<rho>\\<^sub>1 +\n                                     denote x1 \\<rho>\\<^sub>2;\n        \\<And>\\<rho>\\<^sub>1 \\<rho>\\<^sub>2.\n           \\<lbrakk>well_com x2a; \\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n            \\<rho>\\<^sub>2 \\<in> carrier_mat d d;\n            partial_density_operator \\<rho>\\<^sub>1;\n            partial_density_operator \\<rho>\\<^sub>2;\n            trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) \\<le> 1\\<rbrakk>\n           \\<Longrightarrow> denote x2a (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) =\n                             denote x2a \\<rho>\\<^sub>1 +\n                             denote x2a \\<rho>\\<^sub>2;\n        well_com (x1;; x2a); \\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n        \\<rho>\\<^sub>2 \\<in> carrier_mat d d;\n        partial_density_operator \\<rho>\\<^sub>1;\n        partial_density_operator \\<rho>\\<^sub>2;\n        trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) \\<le> 1\\<rbrakk>\n       \\<Longrightarrow> denote (x1;; x2a)\n                          (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) =\n                         denote (x1;; x2a) \\<rho>\\<^sub>1 +\n                         denote (x1;; x2a) \\<rho>\\<^sub>2\n 2. \\<And>x1 x2a x3 \\<rho>\\<^sub>1 \\<rho>\\<^sub>2.\n       \\<lbrakk>\\<And>x3a \\<rho>\\<^sub>1 \\<rho>\\<^sub>2.\n                   \\<lbrakk>x3a \\<in> set x3; well_com x3a;\n                    \\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n                    \\<rho>\\<^sub>2 \\<in> carrier_mat d d;\n                    partial_density_operator \\<rho>\\<^sub>1;\n                    partial_density_operator \\<rho>\\<^sub>2;\n                    trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) \\<le> 1\\<rbrakk>\n                   \\<Longrightarrow> denote x3a\n(\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) =\n                                     denote x3a \\<rho>\\<^sub>1 +\n                                     denote x3a \\<rho>\\<^sub>2;\n        well_com (Measure x1 x2a x3); \\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n        \\<rho>\\<^sub>2 \\<in> carrier_mat d d;\n        partial_density_operator \\<rho>\\<^sub>1;\n        partial_density_operator \\<rho>\\<^sub>2;\n        trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) \\<le> 1\\<rbrakk>\n       \\<Longrightarrow> denote (Measure x1 x2a x3)\n                          (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) =\n                         denote (Measure x1 x2a x3) \\<rho>\\<^sub>1 +\n                         denote (Measure x1 x2a x3) \\<rho>\\<^sub>2\n 3. \\<And>x1 x2a \\<rho>\\<^sub>1 \\<rho>\\<^sub>2.\n       \\<lbrakk>\\<And>\\<rho>\\<^sub>1 \\<rho>\\<^sub>2.\n                   \\<lbrakk>well_com x2a;\n                    \\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n                    \\<rho>\\<^sub>2 \\<in> carrier_mat d d;\n                    partial_density_operator \\<rho>\\<^sub>1;\n                    partial_density_operator \\<rho>\\<^sub>2;\n                    trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) \\<le> 1\\<rbrakk>\n                   \\<Longrightarrow> denote x2a\n(\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) =\n                                     denote x2a \\<rho>\\<^sub>1 +\n                                     denote x2a \\<rho>\\<^sub>2;\n        well_com (While x1 x2a); \\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n        \\<rho>\\<^sub>2 \\<in> carrier_mat d d;\n        partial_density_operator \\<rho>\\<^sub>1;\n        partial_density_operator \\<rho>\\<^sub>2;\n        trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) \\<le> 1\\<rbrakk>\n       \\<Longrightarrow> denote (While x1 x2a)\n                          (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) =\n                         denote (While x1 x2a) \\<rho>\\<^sub>1 +\n                         denote (While x1 x2a) \\<rho>\\<^sub>2", "then"], ["proof (chain)\npicking this:\n  \\<lbrakk>well_com x1; ?\\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n   ?\\<rho>\\<^sub>2 \\<in> carrier_mat d d;\n   partial_density_operator ?\\<rho>\\<^sub>1;\n   partial_density_operator ?\\<rho>\\<^sub>2;\n   trace (?\\<rho>\\<^sub>1 + ?\\<rho>\\<^sub>2) \\<le> 1\\<rbrakk>\n  \\<Longrightarrow> denote x1 (?\\<rho>\\<^sub>1 + ?\\<rho>\\<^sub>2) =\n                    denote x1 ?\\<rho>\\<^sub>1 + denote x1 ?\\<rho>\\<^sub>2\n  \\<lbrakk>well_com x2a; ?\\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n   ?\\<rho>\\<^sub>2 \\<in> carrier_mat d d;\n   partial_density_operator ?\\<rho>\\<^sub>1;\n   partial_density_operator ?\\<rho>\\<^sub>2;\n   trace (?\\<rho>\\<^sub>1 + ?\\<rho>\\<^sub>2) \\<le> 1\\<rbrakk>\n  \\<Longrightarrow> denote x2a (?\\<rho>\\<^sub>1 + ?\\<rho>\\<^sub>2) =\n                    denote x2a ?\\<rho>\\<^sub>1 + denote x2a ?\\<rho>\\<^sub>2\n  well_com (x1;; x2a)\n  \\<rho>\\<^sub>1 \\<in> carrier_mat d d\n  \\<rho>\\<^sub>2 \\<in> carrier_mat d d\n  partial_density_operator \\<rho>\\<^sub>1\n  partial_density_operator \\<rho>\\<^sub>2\n  trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) \\<le> 1", "show ?case"], ["proof (prove)\nusing this:\n  \\<lbrakk>well_com x1; ?\\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n   ?\\<rho>\\<^sub>2 \\<in> carrier_mat d d;\n   partial_density_operator ?\\<rho>\\<^sub>1;\n   partial_density_operator ?\\<rho>\\<^sub>2;\n   trace (?\\<rho>\\<^sub>1 + ?\\<rho>\\<^sub>2) \\<le> 1\\<rbrakk>\n  \\<Longrightarrow> denote x1 (?\\<rho>\\<^sub>1 + ?\\<rho>\\<^sub>2) =\n                    denote x1 ?\\<rho>\\<^sub>1 + denote x1 ?\\<rho>\\<^sub>2\n  \\<lbrakk>well_com x2a; ?\\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n   ?\\<rho>\\<^sub>2 \\<in> carrier_mat d d;\n   partial_density_operator ?\\<rho>\\<^sub>1;\n   partial_density_operator ?\\<rho>\\<^sub>2;\n   trace (?\\<rho>\\<^sub>1 + ?\\<rho>\\<^sub>2) \\<le> 1\\<rbrakk>\n  \\<Longrightarrow> denote x2a (?\\<rho>\\<^sub>1 + ?\\<rho>\\<^sub>2) =\n                    denote x2a ?\\<rho>\\<^sub>1 + denote x2a ?\\<rho>\\<^sub>2\n  well_com (x1;; x2a)\n  \\<rho>\\<^sub>1 \\<in> carrier_mat d d\n  \\<rho>\\<^sub>2 \\<in> carrier_mat d d\n  partial_density_operator \\<rho>\\<^sub>1\n  partial_density_operator \\<rho>\\<^sub>2\n  trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) \\<le> 1\n\ngoal (1 subgoal):\n 1. denote (x1;; x2a) (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) =\n    denote (x1;; x2a) \\<rho>\\<^sub>1 + denote (x1;; x2a) \\<rho>\\<^sub>2", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<And>\\<rho>\\<^sub>1 \\<rho>\\<^sub>2.\n                \\<lbrakk>well_com x1; \\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n                 \\<rho>\\<^sub>2 \\<in> carrier_mat d d;\n                 partial_density_operator \\<rho>\\<^sub>1;\n                 partial_density_operator \\<rho>\\<^sub>2;\n                 trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) \\<le> 1\\<rbrakk>\n                \\<Longrightarrow> denote x1\n                                   (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) =\n                                  denote x1 \\<rho>\\<^sub>1 +\n                                  denote x1 \\<rho>\\<^sub>2;\n     \\<And>\\<rho>\\<^sub>1 \\<rho>\\<^sub>2.\n        \\<lbrakk>well_com x2a; \\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n         \\<rho>\\<^sub>2 \\<in> carrier_mat d d;\n         partial_density_operator \\<rho>\\<^sub>1;\n         partial_density_operator \\<rho>\\<^sub>2;\n         trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) \\<le> 1\\<rbrakk>\n        \\<Longrightarrow> denote x2a (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) =\n                          denote x2a \\<rho>\\<^sub>1 +\n                          denote x2a \\<rho>\\<^sub>2;\n     well_com (x1;; x2a); \\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n     \\<rho>\\<^sub>2 \\<in> carrier_mat d d;\n     partial_density_operator \\<rho>\\<^sub>1;\n     partial_density_operator \\<rho>\\<^sub>2;\n     trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) \\<le> 1\\<rbrakk>\n    \\<Longrightarrow> denote (x1;; x2a) (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) =\n                      denote (x1;; x2a) \\<rho>\\<^sub>1 +\n                      denote (x1;; x2a) \\<rho>\\<^sub>2", "have dim1: \"denote x1 \\<rho>\\<^sub>1 \\<in> carrier_mat d d\""], ["proof (prove)\ngoal (1 subgoal):\n 1. denote x1 \\<rho>\\<^sub>1 \\<in> carrier_mat d d", "using denote_positive_trace_dim Seq"], ["proof (prove)\nusing this:\n  \\<lbrakk>well_com ?S; ?\\<rho> \\<in> carrier_mat d d;\n   partial_density_operator ?\\<rho>\\<rbrakk>\n  \\<Longrightarrow> positive (denote ?S ?\\<rho>) \\<and>\n                    trace (denote ?S ?\\<rho>) \\<le> trace ?\\<rho> \\<and>\n                    denote ?S ?\\<rho> \\<in> carrier_mat d d\n  \\<lbrakk>well_com x1; ?\\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n   ?\\<rho>\\<^sub>2 \\<in> carrier_mat d d;\n   partial_density_operator ?\\<rho>\\<^sub>1;\n   partial_density_operator ?\\<rho>\\<^sub>2;\n   trace (?\\<rho>\\<^sub>1 + ?\\<rho>\\<^sub>2) \\<le> 1\\<rbrakk>\n  \\<Longrightarrow> denote x1 (?\\<rho>\\<^sub>1 + ?\\<rho>\\<^sub>2) =\n                    denote x1 ?\\<rho>\\<^sub>1 + denote x1 ?\\<rho>\\<^sub>2\n  \\<lbrakk>well_com x2a; ?\\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n   ?\\<rho>\\<^sub>2 \\<in> carrier_mat d d;\n   partial_density_operator ?\\<rho>\\<^sub>1;\n   partial_density_operator ?\\<rho>\\<^sub>2;\n   trace (?\\<rho>\\<^sub>1 + ?\\<rho>\\<^sub>2) \\<le> 1\\<rbrakk>\n  \\<Longrightarrow> denote x2a (?\\<rho>\\<^sub>1 + ?\\<rho>\\<^sub>2) =\n                    denote x2a ?\\<rho>\\<^sub>1 + denote x2a ?\\<rho>\\<^sub>2\n  well_com (x1;; x2a)\n  \\<rho>\\<^sub>1 \\<in> carrier_mat d d\n  \\<rho>\\<^sub>2 \\<in> carrier_mat d d\n  partial_density_operator \\<rho>\\<^sub>1\n  partial_density_operator \\<rho>\\<^sub>2\n  trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) \\<le> 1\n\ngoal (1 subgoal):\n 1. denote x1 \\<rho>\\<^sub>1 \\<in> carrier_mat d d", "by auto"], ["proof (state)\nthis:\n  denote x1 \\<rho>\\<^sub>1 \\<in> carrier_mat d d\n\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<And>\\<rho>\\<^sub>1 \\<rho>\\<^sub>2.\n                \\<lbrakk>well_com x1; \\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n                 \\<rho>\\<^sub>2 \\<in> carrier_mat d d;\n                 partial_density_operator \\<rho>\\<^sub>1;\n                 partial_density_operator \\<rho>\\<^sub>2;\n                 trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) \\<le> 1\\<rbrakk>\n                \\<Longrightarrow> denote x1\n                                   (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) =\n                                  denote x1 \\<rho>\\<^sub>1 +\n                                  denote x1 \\<rho>\\<^sub>2;\n     \\<And>\\<rho>\\<^sub>1 \\<rho>\\<^sub>2.\n        \\<lbrakk>well_com x2a; \\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n         \\<rho>\\<^sub>2 \\<in> carrier_mat d d;\n         partial_density_operator \\<rho>\\<^sub>1;\n         partial_density_operator \\<rho>\\<^sub>2;\n         trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) \\<le> 1\\<rbrakk>\n        \\<Longrightarrow> denote x2a (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) =\n                          denote x2a \\<rho>\\<^sub>1 +\n                          denote x2a \\<rho>\\<^sub>2;\n     well_com (x1;; x2a); \\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n     \\<rho>\\<^sub>2 \\<in> carrier_mat d d;\n     partial_density_operator \\<rho>\\<^sub>1;\n     partial_density_operator \\<rho>\\<^sub>2;\n     trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) \\<le> 1\\<rbrakk>\n    \\<Longrightarrow> denote (x1;; x2a) (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) =\n                      denote (x1;; x2a) \\<rho>\\<^sub>1 +\n                      denote (x1;; x2a) \\<rho>\\<^sub>2", "have dim2: \"denote x1 \\<rho>\\<^sub>2 \\<in> carrier_mat d d\""], ["proof (prove)\ngoal (1 subgoal):\n 1. denote x1 \\<rho>\\<^sub>2 \\<in> carrier_mat d d", "using denote_positive_trace_dim Seq"], ["proof (prove)\nusing this:\n  \\<lbrakk>well_com ?S; ?\\<rho> \\<in> carrier_mat d d;\n   partial_density_operator ?\\<rho>\\<rbrakk>\n  \\<Longrightarrow> positive (denote ?S ?\\<rho>) \\<and>\n                    trace (denote ?S ?\\<rho>) \\<le> trace ?\\<rho> \\<and>\n                    denote ?S ?\\<rho> \\<in> carrier_mat d d\n  \\<lbrakk>well_com x1; ?\\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n   ?\\<rho>\\<^sub>2 \\<in> carrier_mat d d;\n   partial_density_operator ?\\<rho>\\<^sub>1;\n   partial_density_operator ?\\<rho>\\<^sub>2;\n   trace (?\\<rho>\\<^sub>1 + ?\\<rho>\\<^sub>2) \\<le> 1\\<rbrakk>\n  \\<Longrightarrow> denote x1 (?\\<rho>\\<^sub>1 + ?\\<rho>\\<^sub>2) =\n                    denote x1 ?\\<rho>\\<^sub>1 + denote x1 ?\\<rho>\\<^sub>2\n  \\<lbrakk>well_com x2a; ?\\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n   ?\\<rho>\\<^sub>2 \\<in> carrier_mat d d;\n   partial_density_operator ?\\<rho>\\<^sub>1;\n   partial_density_operator ?\\<rho>\\<^sub>2;\n   trace (?\\<rho>\\<^sub>1 + ?\\<rho>\\<^sub>2) \\<le> 1\\<rbrakk>\n  \\<Longrightarrow> denote x2a (?\\<rho>\\<^sub>1 + ?\\<rho>\\<^sub>2) =\n                    denote x2a ?\\<rho>\\<^sub>1 + denote x2a ?\\<rho>\\<^sub>2\n  well_com (x1;; x2a)\n  \\<rho>\\<^sub>1 \\<in> carrier_mat d d\n  \\<rho>\\<^sub>2 \\<in> carrier_mat d d\n  partial_density_operator \\<rho>\\<^sub>1\n  partial_density_operator \\<rho>\\<^sub>2\n  trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) \\<le> 1\n\ngoal (1 subgoal):\n 1. denote x1 \\<rho>\\<^sub>2 \\<in> carrier_mat d d", "by auto"], ["proof (state)\nthis:\n  denote x1 \\<rho>\\<^sub>2 \\<in> carrier_mat d d\n\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<And>\\<rho>\\<^sub>1 \\<rho>\\<^sub>2.\n                \\<lbrakk>well_com x1; \\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n                 \\<rho>\\<^sub>2 \\<in> carrier_mat d d;\n                 partial_density_operator \\<rho>\\<^sub>1;\n                 partial_density_operator \\<rho>\\<^sub>2;\n                 trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) \\<le> 1\\<rbrakk>\n                \\<Longrightarrow> denote x1\n                                   (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) =\n                                  denote x1 \\<rho>\\<^sub>1 +\n                                  denote x1 \\<rho>\\<^sub>2;\n     \\<And>\\<rho>\\<^sub>1 \\<rho>\\<^sub>2.\n        \\<lbrakk>well_com x2a; \\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n         \\<rho>\\<^sub>2 \\<in> carrier_mat d d;\n         partial_density_operator \\<rho>\\<^sub>1;\n         partial_density_operator \\<rho>\\<^sub>2;\n         trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) \\<le> 1\\<rbrakk>\n        \\<Longrightarrow> denote x2a (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) =\n                          denote x2a \\<rho>\\<^sub>1 +\n                          denote x2a \\<rho>\\<^sub>2;\n     well_com (x1;; x2a); \\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n     \\<rho>\\<^sub>2 \\<in> carrier_mat d d;\n     partial_density_operator \\<rho>\\<^sub>1;\n     partial_density_operator \\<rho>\\<^sub>2;\n     trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) \\<le> 1\\<rbrakk>\n    \\<Longrightarrow> denote (x1;; x2a) (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) =\n                      denote (x1;; x2a) \\<rho>\\<^sub>1 +\n                      denote (x1;; x2a) \\<rho>\\<^sub>2", "have \"trace (denote x1  \\<rho>\\<^sub>1) \\<le> trace \\<rho>\\<^sub>1\""], ["proof (prove)\ngoal (1 subgoal):\n 1. trace (denote x1 \\<rho>\\<^sub>1) \\<le> trace \\<rho>\\<^sub>1", "using denote_positive_trace_dim Seq"], ["proof (prove)\nusing this:\n  \\<lbrakk>well_com ?S; ?\\<rho> \\<in> carrier_mat d d;\n   partial_density_operator ?\\<rho>\\<rbrakk>\n  \\<Longrightarrow> positive (denote ?S ?\\<rho>) \\<and>\n                    trace (denote ?S ?\\<rho>) \\<le> trace ?\\<rho> \\<and>\n                    denote ?S ?\\<rho> \\<in> carrier_mat d d\n  \\<lbrakk>well_com x1; ?\\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n   ?\\<rho>\\<^sub>2 \\<in> carrier_mat d d;\n   partial_density_operator ?\\<rho>\\<^sub>1;\n   partial_density_operator ?\\<rho>\\<^sub>2;\n   trace (?\\<rho>\\<^sub>1 + ?\\<rho>\\<^sub>2) \\<le> 1\\<rbrakk>\n  \\<Longrightarrow> denote x1 (?\\<rho>\\<^sub>1 + ?\\<rho>\\<^sub>2) =\n                    denote x1 ?\\<rho>\\<^sub>1 + denote x1 ?\\<rho>\\<^sub>2\n  \\<lbrakk>well_com x2a; ?\\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n   ?\\<rho>\\<^sub>2 \\<in> carrier_mat d d;\n   partial_density_operator ?\\<rho>\\<^sub>1;\n   partial_density_operator ?\\<rho>\\<^sub>2;\n   trace (?\\<rho>\\<^sub>1 + ?\\<rho>\\<^sub>2) \\<le> 1\\<rbrakk>\n  \\<Longrightarrow> denote x2a (?\\<rho>\\<^sub>1 + ?\\<rho>\\<^sub>2) =\n                    denote x2a ?\\<rho>\\<^sub>1 + denote x2a ?\\<rho>\\<^sub>2\n  well_com (x1;; x2a)\n  \\<rho>\\<^sub>1 \\<in> carrier_mat d d\n  \\<rho>\\<^sub>2 \\<in> carrier_mat d d\n  partial_density_operator \\<rho>\\<^sub>1\n  partial_density_operator \\<rho>\\<^sub>2\n  trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) \\<le> 1\n\ngoal (1 subgoal):\n 1. trace (denote x1 \\<rho>\\<^sub>1) \\<le> trace \\<rho>\\<^sub>1", "by auto"], ["proof (state)\nthis:\n  trace (denote x1 \\<rho>\\<^sub>1) \\<le> trace \\<rho>\\<^sub>1\n\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<And>\\<rho>\\<^sub>1 \\<rho>\\<^sub>2.\n                \\<lbrakk>well_com x1; \\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n                 \\<rho>\\<^sub>2 \\<in> carrier_mat d d;\n                 partial_density_operator \\<rho>\\<^sub>1;\n                 partial_density_operator \\<rho>\\<^sub>2;\n                 trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) \\<le> 1\\<rbrakk>\n                \\<Longrightarrow> denote x1\n                                   (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) =\n                                  denote x1 \\<rho>\\<^sub>1 +\n                                  denote x1 \\<rho>\\<^sub>2;\n     \\<And>\\<rho>\\<^sub>1 \\<rho>\\<^sub>2.\n        \\<lbrakk>well_com x2a; \\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n         \\<rho>\\<^sub>2 \\<in> carrier_mat d d;\n         partial_density_operator \\<rho>\\<^sub>1;\n         partial_density_operator \\<rho>\\<^sub>2;\n         trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) \\<le> 1\\<rbrakk>\n        \\<Longrightarrow> denote x2a (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) =\n                          denote x2a \\<rho>\\<^sub>1 +\n                          denote x2a \\<rho>\\<^sub>2;\n     well_com (x1;; x2a); \\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n     \\<rho>\\<^sub>2 \\<in> carrier_mat d d;\n     partial_density_operator \\<rho>\\<^sub>1;\n     partial_density_operator \\<rho>\\<^sub>2;\n     trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) \\<le> 1\\<rbrakk>\n    \\<Longrightarrow> denote (x1;; x2a) (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) =\n                      denote (x1;; x2a) \\<rho>\\<^sub>1 +\n                      denote (x1;; x2a) \\<rho>\\<^sub>2", "moreover"], ["proof (state)\nthis:\n  trace (denote x1 \\<rho>\\<^sub>1) \\<le> trace \\<rho>\\<^sub>1\n\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<And>\\<rho>\\<^sub>1 \\<rho>\\<^sub>2.\n                \\<lbrakk>well_com x1; \\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n                 \\<rho>\\<^sub>2 \\<in> carrier_mat d d;\n                 partial_density_operator \\<rho>\\<^sub>1;\n                 partial_density_operator \\<rho>\\<^sub>2;\n                 trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) \\<le> 1\\<rbrakk>\n                \\<Longrightarrow> denote x1\n                                   (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) =\n                                  denote x1 \\<rho>\\<^sub>1 +\n                                  denote x1 \\<rho>\\<^sub>2;\n     \\<And>\\<rho>\\<^sub>1 \\<rho>\\<^sub>2.\n        \\<lbrakk>well_com x2a; \\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n         \\<rho>\\<^sub>2 \\<in> carrier_mat d d;\n         partial_density_operator \\<rho>\\<^sub>1;\n         partial_density_operator \\<rho>\\<^sub>2;\n         trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) \\<le> 1\\<rbrakk>\n        \\<Longrightarrow> denote x2a (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) =\n                          denote x2a \\<rho>\\<^sub>1 +\n                          denote x2a \\<rho>\\<^sub>2;\n     well_com (x1;; x2a); \\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n     \\<rho>\\<^sub>2 \\<in> carrier_mat d d;\n     partial_density_operator \\<rho>\\<^sub>1;\n     partial_density_operator \\<rho>\\<^sub>2;\n     trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) \\<le> 1\\<rbrakk>\n    \\<Longrightarrow> denote (x1;; x2a) (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) =\n                      denote (x1;; x2a) \\<rho>\\<^sub>1 +\n                      denote (x1;; x2a) \\<rho>\\<^sub>2", "have \"trace (denote x1 \\<rho>\\<^sub>2) \\<le> trace \\<rho>\\<^sub>2\""], ["proof (prove)\ngoal (1 subgoal):\n 1. trace (denote x1 \\<rho>\\<^sub>2) \\<le> trace \\<rho>\\<^sub>2", "using denote_positive_trace_dim Seq"], ["proof (prove)\nusing this:\n  \\<lbrakk>well_com ?S; ?\\<rho> \\<in> carrier_mat d d;\n   partial_density_operator ?\\<rho>\\<rbrakk>\n  \\<Longrightarrow> positive (denote ?S ?\\<rho>) \\<and>\n                    trace (denote ?S ?\\<rho>) \\<le> trace ?\\<rho> \\<and>\n                    denote ?S ?\\<rho> \\<in> carrier_mat d d\n  \\<lbrakk>well_com x1; ?\\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n   ?\\<rho>\\<^sub>2 \\<in> carrier_mat d d;\n   partial_density_operator ?\\<rho>\\<^sub>1;\n   partial_density_operator ?\\<rho>\\<^sub>2;\n   trace (?\\<rho>\\<^sub>1 + ?\\<rho>\\<^sub>2) \\<le> 1\\<rbrakk>\n  \\<Longrightarrow> denote x1 (?\\<rho>\\<^sub>1 + ?\\<rho>\\<^sub>2) =\n                    denote x1 ?\\<rho>\\<^sub>1 + denote x1 ?\\<rho>\\<^sub>2\n  \\<lbrakk>well_com x2a; ?\\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n   ?\\<rho>\\<^sub>2 \\<in> carrier_mat d d;\n   partial_density_operator ?\\<rho>\\<^sub>1;\n   partial_density_operator ?\\<rho>\\<^sub>2;\n   trace (?\\<rho>\\<^sub>1 + ?\\<rho>\\<^sub>2) \\<le> 1\\<rbrakk>\n  \\<Longrightarrow> denote x2a (?\\<rho>\\<^sub>1 + ?\\<rho>\\<^sub>2) =\n                    denote x2a ?\\<rho>\\<^sub>1 + denote x2a ?\\<rho>\\<^sub>2\n  well_com (x1;; x2a)\n  \\<rho>\\<^sub>1 \\<in> carrier_mat d d\n  \\<rho>\\<^sub>2 \\<in> carrier_mat d d\n  partial_density_operator \\<rho>\\<^sub>1\n  partial_density_operator \\<rho>\\<^sub>2\n  trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) \\<le> 1\n\ngoal (1 subgoal):\n 1. trace (denote x1 \\<rho>\\<^sub>2) \\<le> trace \\<rho>\\<^sub>2", "by auto"], ["proof (state)\nthis:\n  trace (denote x1 \\<rho>\\<^sub>2) \\<le> trace \\<rho>\\<^sub>2\n\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<And>\\<rho>\\<^sub>1 \\<rho>\\<^sub>2.\n                \\<lbrakk>well_com x1; \\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n                 \\<rho>\\<^sub>2 \\<in> carrier_mat d d;\n                 partial_density_operator \\<rho>\\<^sub>1;\n                 partial_density_operator \\<rho>\\<^sub>2;\n                 trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) \\<le> 1\\<rbrakk>\n                \\<Longrightarrow> denote x1\n                                   (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) =\n                                  denote x1 \\<rho>\\<^sub>1 +\n                                  denote x1 \\<rho>\\<^sub>2;\n     \\<And>\\<rho>\\<^sub>1 \\<rho>\\<^sub>2.\n        \\<lbrakk>well_com x2a; \\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n         \\<rho>\\<^sub>2 \\<in> carrier_mat d d;\n         partial_density_operator \\<rho>\\<^sub>1;\n         partial_density_operator \\<rho>\\<^sub>2;\n         trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) \\<le> 1\\<rbrakk>\n        \\<Longrightarrow> denote x2a (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) =\n                          denote x2a \\<rho>\\<^sub>1 +\n                          denote x2a \\<rho>\\<^sub>2;\n     well_com (x1;; x2a); \\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n     \\<rho>\\<^sub>2 \\<in> carrier_mat d d;\n     partial_density_operator \\<rho>\\<^sub>1;\n     partial_density_operator \\<rho>\\<^sub>2;\n     trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) \\<le> 1\\<rbrakk>\n    \\<Longrightarrow> denote (x1;; x2a) (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) =\n                      denote (x1;; x2a) \\<rho>\\<^sub>1 +\n                      denote (x1;; x2a) \\<rho>\\<^sub>2", "ultimately"], ["proof (chain)\npicking this:\n  trace (denote x1 \\<rho>\\<^sub>1) \\<le> trace \\<rho>\\<^sub>1\n  trace (denote x1 \\<rho>\\<^sub>2) \\<le> trace \\<rho>\\<^sub>2", "have tr: \"trace (denote x1 \\<rho>\\<^sub>1 + denote x1 \\<rho>\\<^sub>2) \\<le> 1\""], ["proof (prove)\nusing this:\n  trace (denote x1 \\<rho>\\<^sub>1) \\<le> trace \\<rho>\\<^sub>1\n  trace (denote x1 \\<rho>\\<^sub>2) \\<le> trace \\<rho>\\<^sub>2\n\ngoal (1 subgoal):\n 1. trace (denote x1 \\<rho>\\<^sub>1 + denote x1 \\<rho>\\<^sub>2) \\<le> 1", "using Seq(4,5,8) trace_add_linear dim1 dim2"], ["proof (prove)\nusing this:\n  trace (denote x1 \\<rho>\\<^sub>1) \\<le> trace \\<rho>\\<^sub>1\n  trace (denote x1 \\<rho>\\<^sub>2) \\<le> trace \\<rho>\\<^sub>2\n  \\<rho>\\<^sub>1 \\<in> carrier_mat d d\n  \\<rho>\\<^sub>2 \\<in> carrier_mat d d\n  trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) \\<le> 1\n  \\<lbrakk>?A \\<in> carrier_mat ?n ?n; ?B \\<in> carrier_mat ?n ?n\\<rbrakk>\n  \\<Longrightarrow> trace (?A + ?B) = trace ?A + trace ?B\n  denote x1 \\<rho>\\<^sub>1 \\<in> carrier_mat d d\n  denote x1 \\<rho>\\<^sub>2 \\<in> carrier_mat d d\n\ngoal (1 subgoal):\n 1. trace (denote x1 \\<rho>\\<^sub>1 + denote x1 \\<rho>\\<^sub>2) \\<le> 1", "by (smt add_mono order_trans)"], ["proof (state)\nthis:\n  trace (denote x1 \\<rho>\\<^sub>1 + denote x1 \\<rho>\\<^sub>2) \\<le> 1\n\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<And>\\<rho>\\<^sub>1 \\<rho>\\<^sub>2.\n                \\<lbrakk>well_com x1; \\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n                 \\<rho>\\<^sub>2 \\<in> carrier_mat d d;\n                 partial_density_operator \\<rho>\\<^sub>1;\n                 partial_density_operator \\<rho>\\<^sub>2;\n                 trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) \\<le> 1\\<rbrakk>\n                \\<Longrightarrow> denote x1\n                                   (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) =\n                                  denote x1 \\<rho>\\<^sub>1 +\n                                  denote x1 \\<rho>\\<^sub>2;\n     \\<And>\\<rho>\\<^sub>1 \\<rho>\\<^sub>2.\n        \\<lbrakk>well_com x2a; \\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n         \\<rho>\\<^sub>2 \\<in> carrier_mat d d;\n         partial_density_operator \\<rho>\\<^sub>1;\n         partial_density_operator \\<rho>\\<^sub>2;\n         trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) \\<le> 1\\<rbrakk>\n        \\<Longrightarrow> denote x2a (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) =\n                          denote x2a \\<rho>\\<^sub>1 +\n                          denote x2a \\<rho>\\<^sub>2;\n     well_com (x1;; x2a); \\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n     \\<rho>\\<^sub>2 \\<in> carrier_mat d d;\n     partial_density_operator \\<rho>\\<^sub>1;\n     partial_density_operator \\<rho>\\<^sub>2;\n     trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) \\<le> 1\\<rbrakk>\n    \\<Longrightarrow> denote (x1;; x2a) (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) =\n                      denote (x1;; x2a) \\<rho>\\<^sub>1 +\n                      denote (x1;; x2a) \\<rho>\\<^sub>2", "have \"denote (Seq x1 x2a) (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) = denote x2a (denote x1 (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. denote (x1;; x2a) (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) =\n    denote x2a (denote x1 (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2))", "by auto"], ["proof (state)\nthis:\n  denote (x1;; x2a) (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) =\n  denote x2a (denote x1 (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2))\n\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<And>\\<rho>\\<^sub>1 \\<rho>\\<^sub>2.\n                \\<lbrakk>well_com x1; \\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n                 \\<rho>\\<^sub>2 \\<in> carrier_mat d d;\n                 partial_density_operator \\<rho>\\<^sub>1;\n                 partial_density_operator \\<rho>\\<^sub>2;\n                 trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) \\<le> 1\\<rbrakk>\n                \\<Longrightarrow> denote x1\n                                   (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) =\n                                  denote x1 \\<rho>\\<^sub>1 +\n                                  denote x1 \\<rho>\\<^sub>2;\n     \\<And>\\<rho>\\<^sub>1 \\<rho>\\<^sub>2.\n        \\<lbrakk>well_com x2a; \\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n         \\<rho>\\<^sub>2 \\<in> carrier_mat d d;\n         partial_density_operator \\<rho>\\<^sub>1;\n         partial_density_operator \\<rho>\\<^sub>2;\n         trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) \\<le> 1\\<rbrakk>\n        \\<Longrightarrow> denote x2a (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) =\n                          denote x2a \\<rho>\\<^sub>1 +\n                          denote x2a \\<rho>\\<^sub>2;\n     well_com (x1;; x2a); \\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n     \\<rho>\\<^sub>2 \\<in> carrier_mat d d;\n     partial_density_operator \\<rho>\\<^sub>1;\n     partial_density_operator \\<rho>\\<^sub>2;\n     trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) \\<le> 1\\<rbrakk>\n    \\<Longrightarrow> denote (x1;; x2a) (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) =\n                      denote (x1;; x2a) \\<rho>\\<^sub>1 +\n                      denote (x1;; x2a) \\<rho>\\<^sub>2", "moreover"], ["proof (state)\nthis:\n  denote (x1;; x2a) (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) =\n  denote x2a (denote x1 (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2))\n\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<And>\\<rho>\\<^sub>1 \\<rho>\\<^sub>2.\n                \\<lbrakk>well_com x1; \\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n                 \\<rho>\\<^sub>2 \\<in> carrier_mat d d;\n                 partial_density_operator \\<rho>\\<^sub>1;\n                 partial_density_operator \\<rho>\\<^sub>2;\n                 trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) \\<le> 1\\<rbrakk>\n                \\<Longrightarrow> denote x1\n                                   (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) =\n                                  denote x1 \\<rho>\\<^sub>1 +\n                                  denote x1 \\<rho>\\<^sub>2;\n     \\<And>\\<rho>\\<^sub>1 \\<rho>\\<^sub>2.\n        \\<lbrakk>well_com x2a; \\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n         \\<rho>\\<^sub>2 \\<in> carrier_mat d d;\n         partial_density_operator \\<rho>\\<^sub>1;\n         partial_density_operator \\<rho>\\<^sub>2;\n         trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) \\<le> 1\\<rbrakk>\n        \\<Longrightarrow> denote x2a (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) =\n                          denote x2a \\<rho>\\<^sub>1 +\n                          denote x2a \\<rho>\\<^sub>2;\n     well_com (x1;; x2a); \\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n     \\<rho>\\<^sub>2 \\<in> carrier_mat d d;\n     partial_density_operator \\<rho>\\<^sub>1;\n     partial_density_operator \\<rho>\\<^sub>2;\n     trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) \\<le> 1\\<rbrakk>\n    \\<Longrightarrow> denote (x1;; x2a) (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) =\n                      denote (x1;; x2a) \\<rho>\\<^sub>1 +\n                      denote (x1;; x2a) \\<rho>\\<^sub>2", "have \"denote x1 (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) = denote x1 \\<rho>\\<^sub>1 + denote x1 \\<rho>\\<^sub>2\""], ["proof (prove)\ngoal (1 subgoal):\n 1. denote x1 (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) =\n    denote x1 \\<rho>\\<^sub>1 + denote x1 \\<rho>\\<^sub>2", "using Seq"], ["proof (prove)\nusing this:\n  \\<lbrakk>well_com x1; ?\\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n   ?\\<rho>\\<^sub>2 \\<in> carrier_mat d d;\n   partial_density_operator ?\\<rho>\\<^sub>1;\n   partial_density_operator ?\\<rho>\\<^sub>2;\n   trace (?\\<rho>\\<^sub>1 + ?\\<rho>\\<^sub>2) \\<le> 1\\<rbrakk>\n  \\<Longrightarrow> denote x1 (?\\<rho>\\<^sub>1 + ?\\<rho>\\<^sub>2) =\n                    denote x1 ?\\<rho>\\<^sub>1 + denote x1 ?\\<rho>\\<^sub>2\n  \\<lbrakk>well_com x2a; ?\\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n   ?\\<rho>\\<^sub>2 \\<in> carrier_mat d d;\n   partial_density_operator ?\\<rho>\\<^sub>1;\n   partial_density_operator ?\\<rho>\\<^sub>2;\n   trace (?\\<rho>\\<^sub>1 + ?\\<rho>\\<^sub>2) \\<le> 1\\<rbrakk>\n  \\<Longrightarrow> denote x2a (?\\<rho>\\<^sub>1 + ?\\<rho>\\<^sub>2) =\n                    denote x2a ?\\<rho>\\<^sub>1 + denote x2a ?\\<rho>\\<^sub>2\n  well_com (x1;; x2a)\n  \\<rho>\\<^sub>1 \\<in> carrier_mat d d\n  \\<rho>\\<^sub>2 \\<in> carrier_mat d d\n  partial_density_operator \\<rho>\\<^sub>1\n  partial_density_operator \\<rho>\\<^sub>2\n  trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) \\<le> 1\n\ngoal (1 subgoal):\n 1. denote x1 (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) =\n    denote x1 \\<rho>\\<^sub>1 + denote x1 \\<rho>\\<^sub>2", "by auto"], ["proof (state)\nthis:\n  denote x1 (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) =\n  denote x1 \\<rho>\\<^sub>1 + denote x1 \\<rho>\\<^sub>2\n\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<And>\\<rho>\\<^sub>1 \\<rho>\\<^sub>2.\n                \\<lbrakk>well_com x1; \\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n                 \\<rho>\\<^sub>2 \\<in> carrier_mat d d;\n                 partial_density_operator \\<rho>\\<^sub>1;\n                 partial_density_operator \\<rho>\\<^sub>2;\n                 trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) \\<le> 1\\<rbrakk>\n                \\<Longrightarrow> denote x1\n                                   (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) =\n                                  denote x1 \\<rho>\\<^sub>1 +\n                                  denote x1 \\<rho>\\<^sub>2;\n     \\<And>\\<rho>\\<^sub>1 \\<rho>\\<^sub>2.\n        \\<lbrakk>well_com x2a; \\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n         \\<rho>\\<^sub>2 \\<in> carrier_mat d d;\n         partial_density_operator \\<rho>\\<^sub>1;\n         partial_density_operator \\<rho>\\<^sub>2;\n         trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) \\<le> 1\\<rbrakk>\n        \\<Longrightarrow> denote x2a (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) =\n                          denote x2a \\<rho>\\<^sub>1 +\n                          denote x2a \\<rho>\\<^sub>2;\n     well_com (x1;; x2a); \\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n     \\<rho>\\<^sub>2 \\<in> carrier_mat d d;\n     partial_density_operator \\<rho>\\<^sub>1;\n     partial_density_operator \\<rho>\\<^sub>2;\n     trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) \\<le> 1\\<rbrakk>\n    \\<Longrightarrow> denote (x1;; x2a) (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) =\n                      denote (x1;; x2a) \\<rho>\\<^sub>1 +\n                      denote (x1;; x2a) \\<rho>\\<^sub>2", "moreover"], ["proof (state)\nthis:\n  denote x1 (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) =\n  denote x1 \\<rho>\\<^sub>1 + denote x1 \\<rho>\\<^sub>2\n\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<And>\\<rho>\\<^sub>1 \\<rho>\\<^sub>2.\n                \\<lbrakk>well_com x1; \\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n                 \\<rho>\\<^sub>2 \\<in> carrier_mat d d;\n                 partial_density_operator \\<rho>\\<^sub>1;\n                 partial_density_operator \\<rho>\\<^sub>2;\n                 trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) \\<le> 1\\<rbrakk>\n                \\<Longrightarrow> denote x1\n                                   (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) =\n                                  denote x1 \\<rho>\\<^sub>1 +\n                                  denote x1 \\<rho>\\<^sub>2;\n     \\<And>\\<rho>\\<^sub>1 \\<rho>\\<^sub>2.\n        \\<lbrakk>well_com x2a; \\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n         \\<rho>\\<^sub>2 \\<in> carrier_mat d d;\n         partial_density_operator \\<rho>\\<^sub>1;\n         partial_density_operator \\<rho>\\<^sub>2;\n         trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) \\<le> 1\\<rbrakk>\n        \\<Longrightarrow> denote x2a (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) =\n                          denote x2a \\<rho>\\<^sub>1 +\n                          denote x2a \\<rho>\\<^sub>2;\n     well_com (x1;; x2a); \\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n     \\<rho>\\<^sub>2 \\<in> carrier_mat d d;\n     partial_density_operator \\<rho>\\<^sub>1;\n     partial_density_operator \\<rho>\\<^sub>2;\n     trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) \\<le> 1\\<rbrakk>\n    \\<Longrightarrow> denote (x1;; x2a) (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) =\n                      denote (x1;; x2a) \\<rho>\\<^sub>1 +\n                      denote (x1;; x2a) \\<rho>\\<^sub>2", "have \"partial_density_operator (denote x1 \\<rho>\\<^sub>1)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. partial_density_operator (denote x1 \\<rho>\\<^sub>1)", "using denote_partial_density_operator Seq"], ["proof (prove)\nusing this:\n  \\<lbrakk>well_com ?S; partial_density_operator ?\\<rho>;\n   ?\\<rho> \\<in> carrier_mat d d\\<rbrakk>\n  \\<Longrightarrow> partial_density_operator (denote ?S ?\\<rho>)\n  \\<lbrakk>well_com x1; ?\\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n   ?\\<rho>\\<^sub>2 \\<in> carrier_mat d d;\n   partial_density_operator ?\\<rho>\\<^sub>1;\n   partial_density_operator ?\\<rho>\\<^sub>2;\n   trace (?\\<rho>\\<^sub>1 + ?\\<rho>\\<^sub>2) \\<le> 1\\<rbrakk>\n  \\<Longrightarrow> denote x1 (?\\<rho>\\<^sub>1 + ?\\<rho>\\<^sub>2) =\n                    denote x1 ?\\<rho>\\<^sub>1 + denote x1 ?\\<rho>\\<^sub>2\n  \\<lbrakk>well_com x2a; ?\\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n   ?\\<rho>\\<^sub>2 \\<in> carrier_mat d d;\n   partial_density_operator ?\\<rho>\\<^sub>1;\n   partial_density_operator ?\\<rho>\\<^sub>2;\n   trace (?\\<rho>\\<^sub>1 + ?\\<rho>\\<^sub>2) \\<le> 1\\<rbrakk>\n  \\<Longrightarrow> denote x2a (?\\<rho>\\<^sub>1 + ?\\<rho>\\<^sub>2) =\n                    denote x2a ?\\<rho>\\<^sub>1 + denote x2a ?\\<rho>\\<^sub>2\n  well_com (x1;; x2a)\n  \\<rho>\\<^sub>1 \\<in> carrier_mat d d\n  \\<rho>\\<^sub>2 \\<in> carrier_mat d d\n  partial_density_operator \\<rho>\\<^sub>1\n  partial_density_operator \\<rho>\\<^sub>2\n  trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) \\<le> 1\n\ngoal (1 subgoal):\n 1. partial_density_operator (denote x1 \\<rho>\\<^sub>1)", "by auto"], ["proof (state)\nthis:\n  partial_density_operator (denote x1 \\<rho>\\<^sub>1)\n\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<And>\\<rho>\\<^sub>1 \\<rho>\\<^sub>2.\n                \\<lbrakk>well_com x1; \\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n                 \\<rho>\\<^sub>2 \\<in> carrier_mat d d;\n                 partial_density_operator \\<rho>\\<^sub>1;\n                 partial_density_operator \\<rho>\\<^sub>2;\n                 trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) \\<le> 1\\<rbrakk>\n                \\<Longrightarrow> denote x1\n                                   (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) =\n                                  denote x1 \\<rho>\\<^sub>1 +\n                                  denote x1 \\<rho>\\<^sub>2;\n     \\<And>\\<rho>\\<^sub>1 \\<rho>\\<^sub>2.\n        \\<lbrakk>well_com x2a; \\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n         \\<rho>\\<^sub>2 \\<in> carrier_mat d d;\n         partial_density_operator \\<rho>\\<^sub>1;\n         partial_density_operator \\<rho>\\<^sub>2;\n         trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) \\<le> 1\\<rbrakk>\n        \\<Longrightarrow> denote x2a (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) =\n                          denote x2a \\<rho>\\<^sub>1 +\n                          denote x2a \\<rho>\\<^sub>2;\n     well_com (x1;; x2a); \\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n     \\<rho>\\<^sub>2 \\<in> carrier_mat d d;\n     partial_density_operator \\<rho>\\<^sub>1;\n     partial_density_operator \\<rho>\\<^sub>2;\n     trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) \\<le> 1\\<rbrakk>\n    \\<Longrightarrow> denote (x1;; x2a) (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) =\n                      denote (x1;; x2a) \\<rho>\\<^sub>1 +\n                      denote (x1;; x2a) \\<rho>\\<^sub>2", "moreover"], ["proof (state)\nthis:\n  partial_density_operator (denote x1 \\<rho>\\<^sub>1)\n\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<And>\\<rho>\\<^sub>1 \\<rho>\\<^sub>2.\n                \\<lbrakk>well_com x1; \\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n                 \\<rho>\\<^sub>2 \\<in> carrier_mat d d;\n                 partial_density_operator \\<rho>\\<^sub>1;\n                 partial_density_operator \\<rho>\\<^sub>2;\n                 trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) \\<le> 1\\<rbrakk>\n                \\<Longrightarrow> denote x1\n                                   (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) =\n                                  denote x1 \\<rho>\\<^sub>1 +\n                                  denote x1 \\<rho>\\<^sub>2;\n     \\<And>\\<rho>\\<^sub>1 \\<rho>\\<^sub>2.\n        \\<lbrakk>well_com x2a; \\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n         \\<rho>\\<^sub>2 \\<in> carrier_mat d d;\n         partial_density_operator \\<rho>\\<^sub>1;\n         partial_density_operator \\<rho>\\<^sub>2;\n         trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) \\<le> 1\\<rbrakk>\n        \\<Longrightarrow> denote x2a (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) =\n                          denote x2a \\<rho>\\<^sub>1 +\n                          denote x2a \\<rho>\\<^sub>2;\n     well_com (x1;; x2a); \\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n     \\<rho>\\<^sub>2 \\<in> carrier_mat d d;\n     partial_density_operator \\<rho>\\<^sub>1;\n     partial_density_operator \\<rho>\\<^sub>2;\n     trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) \\<le> 1\\<rbrakk>\n    \\<Longrightarrow> denote (x1;; x2a) (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) =\n                      denote (x1;; x2a) \\<rho>\\<^sub>1 +\n                      denote (x1;; x2a) \\<rho>\\<^sub>2", "have \"partial_density_operator (denote x1 \\<rho>\\<^sub>2)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. partial_density_operator (denote x1 \\<rho>\\<^sub>2)", "using denote_partial_density_operator Seq"], ["proof (prove)\nusing this:\n  \\<lbrakk>well_com ?S; partial_density_operator ?\\<rho>;\n   ?\\<rho> \\<in> carrier_mat d d\\<rbrakk>\n  \\<Longrightarrow> partial_density_operator (denote ?S ?\\<rho>)\n  \\<lbrakk>well_com x1; ?\\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n   ?\\<rho>\\<^sub>2 \\<in> carrier_mat d d;\n   partial_density_operator ?\\<rho>\\<^sub>1;\n   partial_density_operator ?\\<rho>\\<^sub>2;\n   trace (?\\<rho>\\<^sub>1 + ?\\<rho>\\<^sub>2) \\<le> 1\\<rbrakk>\n  \\<Longrightarrow> denote x1 (?\\<rho>\\<^sub>1 + ?\\<rho>\\<^sub>2) =\n                    denote x1 ?\\<rho>\\<^sub>1 + denote x1 ?\\<rho>\\<^sub>2\n  \\<lbrakk>well_com x2a; ?\\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n   ?\\<rho>\\<^sub>2 \\<in> carrier_mat d d;\n   partial_density_operator ?\\<rho>\\<^sub>1;\n   partial_density_operator ?\\<rho>\\<^sub>2;\n   trace (?\\<rho>\\<^sub>1 + ?\\<rho>\\<^sub>2) \\<le> 1\\<rbrakk>\n  \\<Longrightarrow> denote x2a (?\\<rho>\\<^sub>1 + ?\\<rho>\\<^sub>2) =\n                    denote x2a ?\\<rho>\\<^sub>1 + denote x2a ?\\<rho>\\<^sub>2\n  well_com (x1;; x2a)\n  \\<rho>\\<^sub>1 \\<in> carrier_mat d d\n  \\<rho>\\<^sub>2 \\<in> carrier_mat d d\n  partial_density_operator \\<rho>\\<^sub>1\n  partial_density_operator \\<rho>\\<^sub>2\n  trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) \\<le> 1\n\ngoal (1 subgoal):\n 1. partial_density_operator (denote x1 \\<rho>\\<^sub>2)", "by auto"], ["proof (state)\nthis:\n  partial_density_operator (denote x1 \\<rho>\\<^sub>2)\n\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<And>\\<rho>\\<^sub>1 \\<rho>\\<^sub>2.\n                \\<lbrakk>well_com x1; \\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n                 \\<rho>\\<^sub>2 \\<in> carrier_mat d d;\n                 partial_density_operator \\<rho>\\<^sub>1;\n                 partial_density_operator \\<rho>\\<^sub>2;\n                 trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) \\<le> 1\\<rbrakk>\n                \\<Longrightarrow> denote x1\n                                   (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) =\n                                  denote x1 \\<rho>\\<^sub>1 +\n                                  denote x1 \\<rho>\\<^sub>2;\n     \\<And>\\<rho>\\<^sub>1 \\<rho>\\<^sub>2.\n        \\<lbrakk>well_com x2a; \\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n         \\<rho>\\<^sub>2 \\<in> carrier_mat d d;\n         partial_density_operator \\<rho>\\<^sub>1;\n         partial_density_operator \\<rho>\\<^sub>2;\n         trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) \\<le> 1\\<rbrakk>\n        \\<Longrightarrow> denote x2a (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) =\n                          denote x2a \\<rho>\\<^sub>1 +\n                          denote x2a \\<rho>\\<^sub>2;\n     well_com (x1;; x2a); \\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n     \\<rho>\\<^sub>2 \\<in> carrier_mat d d;\n     partial_density_operator \\<rho>\\<^sub>1;\n     partial_density_operator \\<rho>\\<^sub>2;\n     trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) \\<le> 1\\<rbrakk>\n    \\<Longrightarrow> denote (x1;; x2a) (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) =\n                      denote (x1;; x2a) \\<rho>\\<^sub>1 +\n                      denote (x1;; x2a) \\<rho>\\<^sub>2", "ultimately"], ["proof (chain)\npicking this:\n  denote (x1;; x2a) (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) =\n  denote x2a (denote x1 (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2))\n  denote x1 (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) =\n  denote x1 \\<rho>\\<^sub>1 + denote x1 \\<rho>\\<^sub>2\n  partial_density_operator (denote x1 \\<rho>\\<^sub>1)\n  partial_density_operator (denote x1 \\<rho>\\<^sub>2)", "show ?thesis"], ["proof (prove)\nusing this:\n  denote (x1;; x2a) (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) =\n  denote x2a (denote x1 (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2))\n  denote x1 (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) =\n  denote x1 \\<rho>\\<^sub>1 + denote x1 \\<rho>\\<^sub>2\n  partial_density_operator (denote x1 \\<rho>\\<^sub>1)\n  partial_density_operator (denote x1 \\<rho>\\<^sub>2)\n\ngoal (1 subgoal):\n 1. denote (x1;; x2a) (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) =\n    denote (x1;; x2a) \\<rho>\\<^sub>1 + denote (x1;; x2a) \\<rho>\\<^sub>2", "using Seq dim1 dim2 tr"], ["proof (prove)\nusing this:\n  denote (x1;; x2a) (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) =\n  denote x2a (denote x1 (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2))\n  denote x1 (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) =\n  denote x1 \\<rho>\\<^sub>1 + denote x1 \\<rho>\\<^sub>2\n  partial_density_operator (denote x1 \\<rho>\\<^sub>1)\n  partial_density_operator (denote x1 \\<rho>\\<^sub>2)\n  \\<lbrakk>well_com x1; ?\\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n   ?\\<rho>\\<^sub>2 \\<in> carrier_mat d d;\n   partial_density_operator ?\\<rho>\\<^sub>1;\n   partial_density_operator ?\\<rho>\\<^sub>2;\n   trace (?\\<rho>\\<^sub>1 + ?\\<rho>\\<^sub>2) \\<le> 1\\<rbrakk>\n  \\<Longrightarrow> denote x1 (?\\<rho>\\<^sub>1 + ?\\<rho>\\<^sub>2) =\n                    denote x1 ?\\<rho>\\<^sub>1 + denote x1 ?\\<rho>\\<^sub>2\n  \\<lbrakk>well_com x2a; ?\\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n   ?\\<rho>\\<^sub>2 \\<in> carrier_mat d d;\n   partial_density_operator ?\\<rho>\\<^sub>1;\n   partial_density_operator ?\\<rho>\\<^sub>2;\n   trace (?\\<rho>\\<^sub>1 + ?\\<rho>\\<^sub>2) \\<le> 1\\<rbrakk>\n  \\<Longrightarrow> denote x2a (?\\<rho>\\<^sub>1 + ?\\<rho>\\<^sub>2) =\n                    denote x2a ?\\<rho>\\<^sub>1 + denote x2a ?\\<rho>\\<^sub>2\n  well_com (x1;; x2a)\n  \\<rho>\\<^sub>1 \\<in> carrier_mat d d\n  \\<rho>\\<^sub>2 \\<in> carrier_mat d d\n  partial_density_operator \\<rho>\\<^sub>1\n  partial_density_operator \\<rho>\\<^sub>2\n  trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) \\<le> 1\n  denote x1 \\<rho>\\<^sub>1 \\<in> carrier_mat d d\n  denote x1 \\<rho>\\<^sub>2 \\<in> carrier_mat d d\n  trace (denote x1 \\<rho>\\<^sub>1 + denote x1 \\<rho>\\<^sub>2) \\<le> 1\n\ngoal (1 subgoal):\n 1. denote (x1;; x2a) (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) =\n    denote (x1;; x2a) \\<rho>\\<^sub>1 + denote (x1;; x2a) \\<rho>\\<^sub>2", "by auto"], ["proof (state)\nthis:\n  denote (x1;; x2a) (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) =\n  denote (x1;; x2a) \\<rho>\\<^sub>1 + denote (x1;; x2a) \\<rho>\\<^sub>2\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  denote (x1;; x2a) (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) =\n  denote (x1;; x2a) \\<rho>\\<^sub>1 + denote (x1;; x2a) \\<rho>\\<^sub>2\n\ngoal (2 subgoals):\n 1. \\<And>x1 x2a x3 \\<rho>\\<^sub>1 \\<rho>\\<^sub>2.\n       \\<lbrakk>\\<And>x3a \\<rho>\\<^sub>1 \\<rho>\\<^sub>2.\n                   \\<lbrakk>x3a \\<in> set x3; well_com x3a;\n                    \\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n                    \\<rho>\\<^sub>2 \\<in> carrier_mat d d;\n                    partial_density_operator \\<rho>\\<^sub>1;\n                    partial_density_operator \\<rho>\\<^sub>2;\n                    trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) \\<le> 1\\<rbrakk>\n                   \\<Longrightarrow> denote x3a\n(\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) =\n                                     denote x3a \\<rho>\\<^sub>1 +\n                                     denote x3a \\<rho>\\<^sub>2;\n        well_com (Measure x1 x2a x3); \\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n        \\<rho>\\<^sub>2 \\<in> carrier_mat d d;\n        partial_density_operator \\<rho>\\<^sub>1;\n        partial_density_operator \\<rho>\\<^sub>2;\n        trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) \\<le> 1\\<rbrakk>\n       \\<Longrightarrow> denote (Measure x1 x2a x3)\n                          (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) =\n                         denote (Measure x1 x2a x3) \\<rho>\\<^sub>1 +\n                         denote (Measure x1 x2a x3) \\<rho>\\<^sub>2\n 2. \\<And>x1 x2a \\<rho>\\<^sub>1 \\<rho>\\<^sub>2.\n       \\<lbrakk>\\<And>\\<rho>\\<^sub>1 \\<rho>\\<^sub>2.\n                   \\<lbrakk>well_com x2a;\n                    \\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n                    \\<rho>\\<^sub>2 \\<in> carrier_mat d d;\n                    partial_density_operator \\<rho>\\<^sub>1;\n                    partial_density_operator \\<rho>\\<^sub>2;\n                    trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) \\<le> 1\\<rbrakk>\n                   \\<Longrightarrow> denote x2a\n(\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) =\n                                     denote x2a \\<rho>\\<^sub>1 +\n                                     denote x2a \\<rho>\\<^sub>2;\n        well_com (While x1 x2a); \\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n        \\<rho>\\<^sub>2 \\<in> carrier_mat d d;\n        partial_density_operator \\<rho>\\<^sub>1;\n        partial_density_operator \\<rho>\\<^sub>2;\n        trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) \\<le> 1\\<rbrakk>\n       \\<Longrightarrow> denote (While x1 x2a)\n                          (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) =\n                         denote (While x1 x2a) \\<rho>\\<^sub>1 +\n                         denote (While x1 x2a) \\<rho>\\<^sub>2", "next"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>x1 x2a x3 \\<rho>\\<^sub>1 \\<rho>\\<^sub>2.\n       \\<lbrakk>\\<And>x3a \\<rho>\\<^sub>1 \\<rho>\\<^sub>2.\n                   \\<lbrakk>x3a \\<in> set x3; well_com x3a;\n                    \\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n                    \\<rho>\\<^sub>2 \\<in> carrier_mat d d;\n                    partial_density_operator \\<rho>\\<^sub>1;\n                    partial_density_operator \\<rho>\\<^sub>2;\n                    trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) \\<le> 1\\<rbrakk>\n                   \\<Longrightarrow> denote x3a\n(\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) =\n                                     denote x3a \\<rho>\\<^sub>1 +\n                                     denote x3a \\<rho>\\<^sub>2;\n        well_com (Measure x1 x2a x3); \\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n        \\<rho>\\<^sub>2 \\<in> carrier_mat d d;\n        partial_density_operator \\<rho>\\<^sub>1;\n        partial_density_operator \\<rho>\\<^sub>2;\n        trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) \\<le> 1\\<rbrakk>\n       \\<Longrightarrow> denote (Measure x1 x2a x3)\n                          (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) =\n                         denote (Measure x1 x2a x3) \\<rho>\\<^sub>1 +\n                         denote (Measure x1 x2a x3) \\<rho>\\<^sub>2\n 2. \\<And>x1 x2a \\<rho>\\<^sub>1 \\<rho>\\<^sub>2.\n       \\<lbrakk>\\<And>\\<rho>\\<^sub>1 \\<rho>\\<^sub>2.\n                   \\<lbrakk>well_com x2a;\n                    \\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n                    \\<rho>\\<^sub>2 \\<in> carrier_mat d d;\n                    partial_density_operator \\<rho>\\<^sub>1;\n                    partial_density_operator \\<rho>\\<^sub>2;\n                    trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) \\<le> 1\\<rbrakk>\n                   \\<Longrightarrow> denote x2a\n(\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) =\n                                     denote x2a \\<rho>\\<^sub>1 +\n                                     denote x2a \\<rho>\\<^sub>2;\n        well_com (While x1 x2a); \\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n        \\<rho>\\<^sub>2 \\<in> carrier_mat d d;\n        partial_density_operator \\<rho>\\<^sub>1;\n        partial_density_operator \\<rho>\\<^sub>2;\n        trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) \\<le> 1\\<rbrakk>\n       \\<Longrightarrow> denote (While x1 x2a)\n                          (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) =\n                         denote (While x1 x2a) \\<rho>\\<^sub>1 +\n                         denote (While x1 x2a) \\<rho>\\<^sub>2", "case (Measure x1 x2a x3a)"], ["proof (state)\nthis:\n  \\<lbrakk>?x3a \\<in> set x3a; well_com ?x3a;\n   ?\\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n   ?\\<rho>\\<^sub>2 \\<in> carrier_mat d d;\n   partial_density_operator ?\\<rho>\\<^sub>1;\n   partial_density_operator ?\\<rho>\\<^sub>2;\n   trace (?\\<rho>\\<^sub>1 + ?\\<rho>\\<^sub>2) \\<le> 1\\<rbrakk>\n  \\<Longrightarrow> denote ?x3a (?\\<rho>\\<^sub>1 + ?\\<rho>\\<^sub>2) =\n                    denote ?x3a ?\\<rho>\\<^sub>1 +\n                    denote ?x3a ?\\<rho>\\<^sub>2\n  well_com (Measure x1 x2a x3a)\n  \\<rho>\\<^sub>1 \\<in> carrier_mat d d\n  \\<rho>\\<^sub>2 \\<in> carrier_mat d d\n  partial_density_operator \\<rho>\\<^sub>1\n  partial_density_operator \\<rho>\\<^sub>2\n  trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) \\<le> 1\n\ngoal (2 subgoals):\n 1. \\<And>x1 x2a x3 \\<rho>\\<^sub>1 \\<rho>\\<^sub>2.\n       \\<lbrakk>\\<And>x3a \\<rho>\\<^sub>1 \\<rho>\\<^sub>2.\n                   \\<lbrakk>x3a \\<in> set x3; well_com x3a;\n                    \\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n                    \\<rho>\\<^sub>2 \\<in> carrier_mat d d;\n                    partial_density_operator \\<rho>\\<^sub>1;\n                    partial_density_operator \\<rho>\\<^sub>2;\n                    trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) \\<le> 1\\<rbrakk>\n                   \\<Longrightarrow> denote x3a\n(\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) =\n                                     denote x3a \\<rho>\\<^sub>1 +\n                                     denote x3a \\<rho>\\<^sub>2;\n        well_com (Measure x1 x2a x3); \\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n        \\<rho>\\<^sub>2 \\<in> carrier_mat d d;\n        partial_density_operator \\<rho>\\<^sub>1;\n        partial_density_operator \\<rho>\\<^sub>2;\n        trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) \\<le> 1\\<rbrakk>\n       \\<Longrightarrow> denote (Measure x1 x2a x3)\n                          (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) =\n                         denote (Measure x1 x2a x3) \\<rho>\\<^sub>1 +\n                         denote (Measure x1 x2a x3) \\<rho>\\<^sub>2\n 2. \\<And>x1 x2a \\<rho>\\<^sub>1 \\<rho>\\<^sub>2.\n       \\<lbrakk>\\<And>\\<rho>\\<^sub>1 \\<rho>\\<^sub>2.\n                   \\<lbrakk>well_com x2a;\n                    \\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n                    \\<rho>\\<^sub>2 \\<in> carrier_mat d d;\n                    partial_density_operator \\<rho>\\<^sub>1;\n                    partial_density_operator \\<rho>\\<^sub>2;\n                    trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) \\<le> 1\\<rbrakk>\n                   \\<Longrightarrow> denote x2a\n(\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) =\n                                     denote x2a \\<rho>\\<^sub>1 +\n                                     denote x2a \\<rho>\\<^sub>2;\n        well_com (While x1 x2a); \\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n        \\<rho>\\<^sub>2 \\<in> carrier_mat d d;\n        partial_density_operator \\<rho>\\<^sub>1;\n        partial_density_operator \\<rho>\\<^sub>2;\n        trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) \\<le> 1\\<rbrakk>\n       \\<Longrightarrow> denote (While x1 x2a)\n                          (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) =\n                         denote (While x1 x2a) \\<rho>\\<^sub>1 +\n                         denote (While x1 x2a) \\<rho>\\<^sub>2", "then"], ["proof (chain)\npicking this:\n  \\<lbrakk>?x3a \\<in> set x3a; well_com ?x3a;\n   ?\\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n   ?\\<rho>\\<^sub>2 \\<in> carrier_mat d d;\n   partial_density_operator ?\\<rho>\\<^sub>1;\n   partial_density_operator ?\\<rho>\\<^sub>2;\n   trace (?\\<rho>\\<^sub>1 + ?\\<rho>\\<^sub>2) \\<le> 1\\<rbrakk>\n  \\<Longrightarrow> denote ?x3a (?\\<rho>\\<^sub>1 + ?\\<rho>\\<^sub>2) =\n                    denote ?x3a ?\\<rho>\\<^sub>1 +\n                    denote ?x3a ?\\<rho>\\<^sub>2\n  well_com (Measure x1 x2a x3a)\n  \\<rho>\\<^sub>1 \\<in> carrier_mat d d\n  \\<rho>\\<^sub>2 \\<in> carrier_mat d d\n  partial_density_operator \\<rho>\\<^sub>1\n  partial_density_operator \\<rho>\\<^sub>2\n  trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) \\<le> 1", "show ?case"], ["proof (prove)\nusing this:\n  \\<lbrakk>?x3a \\<in> set x3a; well_com ?x3a;\n   ?\\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n   ?\\<rho>\\<^sub>2 \\<in> carrier_mat d d;\n   partial_density_operator ?\\<rho>\\<^sub>1;\n   partial_density_operator ?\\<rho>\\<^sub>2;\n   trace (?\\<rho>\\<^sub>1 + ?\\<rho>\\<^sub>2) \\<le> 1\\<rbrakk>\n  \\<Longrightarrow> denote ?x3a (?\\<rho>\\<^sub>1 + ?\\<rho>\\<^sub>2) =\n                    denote ?x3a ?\\<rho>\\<^sub>1 +\n                    denote ?x3a ?\\<rho>\\<^sub>2\n  well_com (Measure x1 x2a x3a)\n  \\<rho>\\<^sub>1 \\<in> carrier_mat d d\n  \\<rho>\\<^sub>2 \\<in> carrier_mat d d\n  partial_density_operator \\<rho>\\<^sub>1\n  partial_density_operator \\<rho>\\<^sub>2\n  trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) \\<le> 1\n\ngoal (1 subgoal):\n 1. denote (Measure x1 x2a x3a) (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) =\n    denote (Measure x1 x2a x3a) \\<rho>\\<^sub>1 +\n    denote (Measure x1 x2a x3a) \\<rho>\\<^sub>2", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<And>x3aa \\<rho>\\<^sub>1 \\<rho>\\<^sub>2.\n                \\<lbrakk>x3aa \\<in> set x3a; well_com x3aa;\n                 \\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n                 \\<rho>\\<^sub>2 \\<in> carrier_mat d d;\n                 partial_density_operator \\<rho>\\<^sub>1;\n                 partial_density_operator \\<rho>\\<^sub>2;\n                 trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) \\<le> 1\\<rbrakk>\n                \\<Longrightarrow> denote x3aa\n                                   (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) =\n                                  denote x3aa \\<rho>\\<^sub>1 +\n                                  denote x3aa \\<rho>\\<^sub>2;\n     well_com (Measure x1 x2a x3a); \\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n     \\<rho>\\<^sub>2 \\<in> carrier_mat d d;\n     partial_density_operator \\<rho>\\<^sub>1;\n     partial_density_operator \\<rho>\\<^sub>2;\n     trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) \\<le> 1\\<rbrakk>\n    \\<Longrightarrow> denote (Measure x1 x2a x3a)\n                       (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) =\n                      denote (Measure x1 x2a x3a) \\<rho>\\<^sub>1 +\n                      denote (Measure x1 x2a x3a) \\<rho>\\<^sub>2", "have ptc: \"\\<And>x3aa \\<rho>. x3aa \\<in> set x3a \\<Longrightarrow> well_com x3aa \\<Longrightarrow> \\<rho> \\<in> carrier_mat d d \\<Longrightarrow> partial_density_operator \\<rho> \n      \\<Longrightarrow> positive (denote x3aa \\<rho>) \\<and> trace (denote x3aa \\<rho>) \\<le> trace \\<rho> \\<and> denote x3aa \\<rho> \\<in> carrier_mat d d\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>x3aa \\<rho>.\n       \\<lbrakk>x3aa \\<in> set x3a; well_com x3aa;\n        \\<rho> \\<in> carrier_mat d d;\n        partial_density_operator \\<rho>\\<rbrakk>\n       \\<Longrightarrow> positive (denote x3aa \\<rho>) \\<and>\n                         trace (denote x3aa \\<rho>)\n                         \\<le> trace \\<rho> \\<and>\n                         denote x3aa \\<rho> \\<in> carrier_mat d d", "using denote_positive_trace_dim Measure"], ["proof (prove)\nusing this:\n  \\<lbrakk>well_com ?S; ?\\<rho> \\<in> carrier_mat d d;\n   partial_density_operator ?\\<rho>\\<rbrakk>\n  \\<Longrightarrow> positive (denote ?S ?\\<rho>) \\<and>\n                    trace (denote ?S ?\\<rho>) \\<le> trace ?\\<rho> \\<and>\n                    denote ?S ?\\<rho> \\<in> carrier_mat d d\n  \\<lbrakk>?x3a \\<in> set x3a; well_com ?x3a;\n   ?\\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n   ?\\<rho>\\<^sub>2 \\<in> carrier_mat d d;\n   partial_density_operator ?\\<rho>\\<^sub>1;\n   partial_density_operator ?\\<rho>\\<^sub>2;\n   trace (?\\<rho>\\<^sub>1 + ?\\<rho>\\<^sub>2) \\<le> 1\\<rbrakk>\n  \\<Longrightarrow> denote ?x3a (?\\<rho>\\<^sub>1 + ?\\<rho>\\<^sub>2) =\n                    denote ?x3a ?\\<rho>\\<^sub>1 +\n                    denote ?x3a ?\\<rho>\\<^sub>2\n  well_com (Measure x1 x2a x3a)\n  \\<rho>\\<^sub>1 \\<in> carrier_mat d d\n  \\<rho>\\<^sub>2 \\<in> carrier_mat d d\n  partial_density_operator \\<rho>\\<^sub>1\n  partial_density_operator \\<rho>\\<^sub>2\n  trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) \\<le> 1\n\ngoal (1 subgoal):\n 1. \\<And>x3aa \\<rho>.\n       \\<lbrakk>x3aa \\<in> set x3a; well_com x3aa;\n        \\<rho> \\<in> carrier_mat d d;\n        partial_density_operator \\<rho>\\<rbrakk>\n       \\<Longrightarrow> positive (denote x3aa \\<rho>) \\<and>\n                         trace (denote x3aa \\<rho>)\n                         \\<le> trace \\<rho> \\<and>\n                         denote x3aa \\<rho> \\<in> carrier_mat d d", "by auto"], ["proof (state)\nthis:\n  \\<lbrakk>?x3aa \\<in> set x3a; well_com ?x3aa;\n   ?\\<rho> \\<in> carrier_mat d d; partial_density_operator ?\\<rho>\\<rbrakk>\n  \\<Longrightarrow> positive (denote ?x3aa ?\\<rho>) \\<and>\n                    trace (denote ?x3aa ?\\<rho>) \\<le> trace ?\\<rho> \\<and>\n                    denote ?x3aa ?\\<rho> \\<in> carrier_mat d d\n\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<And>x3aa \\<rho>\\<^sub>1 \\<rho>\\<^sub>2.\n                \\<lbrakk>x3aa \\<in> set x3a; well_com x3aa;\n                 \\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n                 \\<rho>\\<^sub>2 \\<in> carrier_mat d d;\n                 partial_density_operator \\<rho>\\<^sub>1;\n                 partial_density_operator \\<rho>\\<^sub>2;\n                 trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) \\<le> 1\\<rbrakk>\n                \\<Longrightarrow> denote x3aa\n                                   (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) =\n                                  denote x3aa \\<rho>\\<^sub>1 +\n                                  denote x3aa \\<rho>\\<^sub>2;\n     well_com (Measure x1 x2a x3a); \\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n     \\<rho>\\<^sub>2 \\<in> carrier_mat d d;\n     partial_density_operator \\<rho>\\<^sub>1;\n     partial_density_operator \\<rho>\\<^sub>2;\n     trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) \\<le> 1\\<rbrakk>\n    \\<Longrightarrow> denote (Measure x1 x2a x3a)\n                       (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) =\n                      denote (Measure x1 x2a x3a) \\<rho>\\<^sub>1 +\n                      denote (Measure x1 x2a x3a) \\<rho>\\<^sub>2", "then"], ["proof (chain)\npicking this:\n  \\<lbrakk>?x3aa \\<in> set x3a; well_com ?x3aa;\n   ?\\<rho> \\<in> carrier_mat d d; partial_density_operator ?\\<rho>\\<rbrakk>\n  \\<Longrightarrow> positive (denote ?x3aa ?\\<rho>) \\<and>\n                    trace (denote ?x3aa ?\\<rho>) \\<le> trace ?\\<rho> \\<and>\n                    denote ?x3aa ?\\<rho> \\<in> carrier_mat d d", "have map:\"\\<And>\\<rho>. \\<rho> \\<in> carrier_mat d d \\<Longrightarrow> partial_density_operator \\<rho> \\<Longrightarrow> \\<forall> k < x1. positive ((map denote x3a ! k) (x2a k * \\<rho> * adjoint (x2a k))) \n               \\<and> ((map denote x3a ! k) (x2a k * \\<rho> * adjoint (x2a k))) \\<in> carrier_mat d d\n               \\<and> trace ((map denote x3a ! k) (x2a k * \\<rho> * adjoint (x2a k))) \\<le> trace (x2a k * \\<rho> * adjoint (x2a k))\""], ["proof (prove)\nusing this:\n  \\<lbrakk>?x3aa \\<in> set x3a; well_com ?x3aa;\n   ?\\<rho> \\<in> carrier_mat d d; partial_density_operator ?\\<rho>\\<rbrakk>\n  \\<Longrightarrow> positive (denote ?x3aa ?\\<rho>) \\<and>\n                    trace (denote ?x3aa ?\\<rho>) \\<le> trace ?\\<rho> \\<and>\n                    denote ?x3aa ?\\<rho> \\<in> carrier_mat d d\n\ngoal (1 subgoal):\n 1. \\<And>\\<rho>.\n       \\<lbrakk>\\<rho> \\<in> carrier_mat d d;\n        partial_density_operator \\<rho>\\<rbrakk>\n       \\<Longrightarrow> \\<forall>k<x1.\n                            positive\n                             ((map denote x3a ! k)\n                               (x2a k * \\<rho> * adjoint (x2a k))) \\<and>\n                            (map denote x3a ! k)\n                             (x2a k * \\<rho> * adjoint (x2a k))\n                            \\<in> carrier_mat d d \\<and>\n                            trace\n                             ((map denote x3a ! k)\n                               (x2a k * \\<rho> * adjoint (x2a k)))\n                            \\<le> trace (x2a k * \\<rho> * adjoint (x2a k))", "using Measure map_denote_positive_trace_dim"], ["proof (prove)\nusing this:\n  \\<lbrakk>?x3aa \\<in> set x3a; well_com ?x3aa;\n   ?\\<rho> \\<in> carrier_mat d d; partial_density_operator ?\\<rho>\\<rbrakk>\n  \\<Longrightarrow> positive (denote ?x3aa ?\\<rho>) \\<and>\n                    trace (denote ?x3aa ?\\<rho>) \\<le> trace ?\\<rho> \\<and>\n                    denote ?x3aa ?\\<rho> \\<in> carrier_mat d d\n  \\<lbrakk>?x3a \\<in> set x3a; well_com ?x3a;\n   ?\\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n   ?\\<rho>\\<^sub>2 \\<in> carrier_mat d d;\n   partial_density_operator ?\\<rho>\\<^sub>1;\n   partial_density_operator ?\\<rho>\\<^sub>2;\n   trace (?\\<rho>\\<^sub>1 + ?\\<rho>\\<^sub>2) \\<le> 1\\<rbrakk>\n  \\<Longrightarrow> denote ?x3a (?\\<rho>\\<^sub>1 + ?\\<rho>\\<^sub>2) =\n                    denote ?x3a ?\\<rho>\\<^sub>1 +\n                    denote ?x3a ?\\<rho>\\<^sub>2\n  well_com (Measure x1 x2a x3a)\n  \\<rho>\\<^sub>1 \\<in> carrier_mat d d\n  \\<rho>\\<^sub>2 \\<in> carrier_mat d d\n  partial_density_operator \\<rho>\\<^sub>1\n  partial_density_operator \\<rho>\\<^sub>2\n  trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) \\<le> 1\n  \\<lbrakk>well_com (Measure ?x1.0 ?x2a ?x3a); ?x4.0 \\<in> carrier_mat d d;\n   partial_density_operator ?x4.0;\n   \\<And>x3aa \\<rho>.\n      \\<lbrakk>x3aa \\<in> set ?x3a; well_com x3aa;\n       \\<rho> \\<in> carrier_mat d d;\n       partial_density_operator \\<rho>\\<rbrakk>\n      \\<Longrightarrow> positive (denote x3aa \\<rho>) \\<and>\n                        trace (denote x3aa \\<rho>) \\<le> trace \\<rho> \\<and>\n                        denote x3aa \\<rho> \\<in> carrier_mat d d\\<rbrakk>\n  \\<Longrightarrow> \\<forall>k<?x1.0.\n                       positive\n                        ((map denote ?x3a ! k)\n                          (?x2a k * ?x4.0 * adjoint (?x2a k))) \\<and>\n                       (map denote ?x3a ! k)\n                        (?x2a k * ?x4.0 * adjoint (?x2a k))\n                       \\<in> carrier_mat d d \\<and>\n                       trace\n                        ((map denote ?x3a ! k)\n                          (?x2a k * ?x4.0 * adjoint (?x2a k)))\n                       \\<le> trace (?x2a k * ?x4.0 * adjoint (?x2a k))\n\ngoal (1 subgoal):\n 1. \\<And>\\<rho>.\n       \\<lbrakk>\\<rho> \\<in> carrier_mat d d;\n        partial_density_operator \\<rho>\\<rbrakk>\n       \\<Longrightarrow> \\<forall>k<x1.\n                            positive\n                             ((map denote x3a ! k)\n                               (x2a k * \\<rho> * adjoint (x2a k))) \\<and>\n                            (map denote x3a ! k)\n                             (x2a k * \\<rho> * adjoint (x2a k))\n                            \\<in> carrier_mat d d \\<and>\n                            trace\n                             ((map denote x3a ! k)\n                               (x2a k * \\<rho> * adjoint (x2a k)))\n                            \\<le> trace (x2a k * \\<rho> * adjoint (x2a k))", "by auto"], ["proof (state)\nthis:\n  \\<lbrakk>?\\<rho> \\<in> carrier_mat d d;\n   partial_density_operator ?\\<rho>\\<rbrakk>\n  \\<Longrightarrow> \\<forall>k<x1.\n                       positive\n                        ((map denote x3a ! k)\n                          (x2a k * ?\\<rho> * adjoint (x2a k))) \\<and>\n                       (map denote x3a ! k)\n                        (x2a k * ?\\<rho> * adjoint (x2a k))\n                       \\<in> carrier_mat d d \\<and>\n                       trace\n                        ((map denote x3a ! k)\n                          (x2a k * ?\\<rho> * adjoint (x2a k)))\n                       \\<le> trace (x2a k * ?\\<rho> * adjoint (x2a k))\n\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<And>x3aa \\<rho>\\<^sub>1 \\<rho>\\<^sub>2.\n                \\<lbrakk>x3aa \\<in> set x3a; well_com x3aa;\n                 \\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n                 \\<rho>\\<^sub>2 \\<in> carrier_mat d d;\n                 partial_density_operator \\<rho>\\<^sub>1;\n                 partial_density_operator \\<rho>\\<^sub>2;\n                 trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) \\<le> 1\\<rbrakk>\n                \\<Longrightarrow> denote x3aa\n                                   (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) =\n                                  denote x3aa \\<rho>\\<^sub>1 +\n                                  denote x3aa \\<rho>\\<^sub>2;\n     well_com (Measure x1 x2a x3a); \\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n     \\<rho>\\<^sub>2 \\<in> carrier_mat d d;\n     partial_density_operator \\<rho>\\<^sub>1;\n     partial_density_operator \\<rho>\\<^sub>2;\n     trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) \\<le> 1\\<rbrakk>\n    \\<Longrightarrow> denote (Measure x1 x2a x3a)\n                       (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) =\n                      denote (Measure x1 x2a x3a) \\<rho>\\<^sub>1 +\n                      denote (Measure x1 x2a x3a) \\<rho>\\<^sub>2", "from map"], ["proof (chain)\npicking this:\n  \\<lbrakk>?\\<rho> \\<in> carrier_mat d d;\n   partial_density_operator ?\\<rho>\\<rbrakk>\n  \\<Longrightarrow> \\<forall>k<x1.\n                       positive\n                        ((map denote x3a ! k)\n                          (x2a k * ?\\<rho> * adjoint (x2a k))) \\<and>\n                       (map denote x3a ! k)\n                        (x2a k * ?\\<rho> * adjoint (x2a k))\n                       \\<in> carrier_mat d d \\<and>\n                       trace\n                        ((map denote x3a ! k)\n                          (x2a k * ?\\<rho> * adjoint (x2a k)))\n                       \\<le> trace (x2a k * ?\\<rho> * adjoint (x2a k))", "have mapd1: \"\\<And>k. k < x1 \\<Longrightarrow> (map denote x3a ! k) (x2a k * \\<rho>\\<^sub>1 * adjoint (x2a k)) \\<in> carrier_mat d d\""], ["proof (prove)\nusing this:\n  \\<lbrakk>?\\<rho> \\<in> carrier_mat d d;\n   partial_density_operator ?\\<rho>\\<rbrakk>\n  \\<Longrightarrow> \\<forall>k<x1.\n                       positive\n                        ((map denote x3a ! k)\n                          (x2a k * ?\\<rho> * adjoint (x2a k))) \\<and>\n                       (map denote x3a ! k)\n                        (x2a k * ?\\<rho> * adjoint (x2a k))\n                       \\<in> carrier_mat d d \\<and>\n                       trace\n                        ((map denote x3a ! k)\n                          (x2a k * ?\\<rho> * adjoint (x2a k)))\n                       \\<le> trace (x2a k * ?\\<rho> * adjoint (x2a k))\n\ngoal (1 subgoal):\n 1. \\<And>k.\n       k < x1 \\<Longrightarrow>\n       (map denote x3a ! k) (x2a k * \\<rho>\\<^sub>1 * adjoint (x2a k))\n       \\<in> carrier_mat d d", "using Measure"], ["proof (prove)\nusing this:\n  \\<lbrakk>?\\<rho> \\<in> carrier_mat d d;\n   partial_density_operator ?\\<rho>\\<rbrakk>\n  \\<Longrightarrow> \\<forall>k<x1.\n                       positive\n                        ((map denote x3a ! k)\n                          (x2a k * ?\\<rho> * adjoint (x2a k))) \\<and>\n                       (map denote x3a ! k)\n                        (x2a k * ?\\<rho> * adjoint (x2a k))\n                       \\<in> carrier_mat d d \\<and>\n                       trace\n                        ((map denote x3a ! k)\n                          (x2a k * ?\\<rho> * adjoint (x2a k)))\n                       \\<le> trace (x2a k * ?\\<rho> * adjoint (x2a k))\n  \\<lbrakk>?x3a \\<in> set x3a; well_com ?x3a;\n   ?\\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n   ?\\<rho>\\<^sub>2 \\<in> carrier_mat d d;\n   partial_density_operator ?\\<rho>\\<^sub>1;\n   partial_density_operator ?\\<rho>\\<^sub>2;\n   trace (?\\<rho>\\<^sub>1 + ?\\<rho>\\<^sub>2) \\<le> 1\\<rbrakk>\n  \\<Longrightarrow> denote ?x3a (?\\<rho>\\<^sub>1 + ?\\<rho>\\<^sub>2) =\n                    denote ?x3a ?\\<rho>\\<^sub>1 +\n                    denote ?x3a ?\\<rho>\\<^sub>2\n  well_com (Measure x1 x2a x3a)\n  \\<rho>\\<^sub>1 \\<in> carrier_mat d d\n  \\<rho>\\<^sub>2 \\<in> carrier_mat d d\n  partial_density_operator \\<rho>\\<^sub>1\n  partial_density_operator \\<rho>\\<^sub>2\n  trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) \\<le> 1\n\ngoal (1 subgoal):\n 1. \\<And>k.\n       k < x1 \\<Longrightarrow>\n       (map denote x3a ! k) (x2a k * \\<rho>\\<^sub>1 * adjoint (x2a k))\n       \\<in> carrier_mat d d", "by auto"], ["proof (state)\nthis:\n  ?k < x1 \\<Longrightarrow>\n  (map denote x3a ! ?k) (x2a ?k * \\<rho>\\<^sub>1 * adjoint (x2a ?k))\n  \\<in> carrier_mat d d\n\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<And>x3aa \\<rho>\\<^sub>1 \\<rho>\\<^sub>2.\n                \\<lbrakk>x3aa \\<in> set x3a; well_com x3aa;\n                 \\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n                 \\<rho>\\<^sub>2 \\<in> carrier_mat d d;\n                 partial_density_operator \\<rho>\\<^sub>1;\n                 partial_density_operator \\<rho>\\<^sub>2;\n                 trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) \\<le> 1\\<rbrakk>\n                \\<Longrightarrow> denote x3aa\n                                   (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) =\n                                  denote x3aa \\<rho>\\<^sub>1 +\n                                  denote x3aa \\<rho>\\<^sub>2;\n     well_com (Measure x1 x2a x3a); \\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n     \\<rho>\\<^sub>2 \\<in> carrier_mat d d;\n     partial_density_operator \\<rho>\\<^sub>1;\n     partial_density_operator \\<rho>\\<^sub>2;\n     trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) \\<le> 1\\<rbrakk>\n    \\<Longrightarrow> denote (Measure x1 x2a x3a)\n                       (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) =\n                      denote (Measure x1 x2a x3a) \\<rho>\\<^sub>1 +\n                      denote (Measure x1 x2a x3a) \\<rho>\\<^sub>2", "from map"], ["proof (chain)\npicking this:\n  \\<lbrakk>?\\<rho> \\<in> carrier_mat d d;\n   partial_density_operator ?\\<rho>\\<rbrakk>\n  \\<Longrightarrow> \\<forall>k<x1.\n                       positive\n                        ((map denote x3a ! k)\n                          (x2a k * ?\\<rho> * adjoint (x2a k))) \\<and>\n                       (map denote x3a ! k)\n                        (x2a k * ?\\<rho> * adjoint (x2a k))\n                       \\<in> carrier_mat d d \\<and>\n                       trace\n                        ((map denote x3a ! k)\n                          (x2a k * ?\\<rho> * adjoint (x2a k)))\n                       \\<le> trace (x2a k * ?\\<rho> * adjoint (x2a k))", "have mapd2: \"\\<And>k. k < x1 \\<Longrightarrow> (map denote x3a ! k) (x2a k * \\<rho>\\<^sub>2 * adjoint (x2a k)) \\<in> carrier_mat d d\""], ["proof (prove)\nusing this:\n  \\<lbrakk>?\\<rho> \\<in> carrier_mat d d;\n   partial_density_operator ?\\<rho>\\<rbrakk>\n  \\<Longrightarrow> \\<forall>k<x1.\n                       positive\n                        ((map denote x3a ! k)\n                          (x2a k * ?\\<rho> * adjoint (x2a k))) \\<and>\n                       (map denote x3a ! k)\n                        (x2a k * ?\\<rho> * adjoint (x2a k))\n                       \\<in> carrier_mat d d \\<and>\n                       trace\n                        ((map denote x3a ! k)\n                          (x2a k * ?\\<rho> * adjoint (x2a k)))\n                       \\<le> trace (x2a k * ?\\<rho> * adjoint (x2a k))\n\ngoal (1 subgoal):\n 1. \\<And>k.\n       k < x1 \\<Longrightarrow>\n       (map denote x3a ! k) (x2a k * \\<rho>\\<^sub>2 * adjoint (x2a k))\n       \\<in> carrier_mat d d", "using Measure"], ["proof (prove)\nusing this:\n  \\<lbrakk>?\\<rho> \\<in> carrier_mat d d;\n   partial_density_operator ?\\<rho>\\<rbrakk>\n  \\<Longrightarrow> \\<forall>k<x1.\n                       positive\n                        ((map denote x3a ! k)\n                          (x2a k * ?\\<rho> * adjoint (x2a k))) \\<and>\n                       (map denote x3a ! k)\n                        (x2a k * ?\\<rho> * adjoint (x2a k))\n                       \\<in> carrier_mat d d \\<and>\n                       trace\n                        ((map denote x3a ! k)\n                          (x2a k * ?\\<rho> * adjoint (x2a k)))\n                       \\<le> trace (x2a k * ?\\<rho> * adjoint (x2a k))\n  \\<lbrakk>?x3a \\<in> set x3a; well_com ?x3a;\n   ?\\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n   ?\\<rho>\\<^sub>2 \\<in> carrier_mat d d;\n   partial_density_operator ?\\<rho>\\<^sub>1;\n   partial_density_operator ?\\<rho>\\<^sub>2;\n   trace (?\\<rho>\\<^sub>1 + ?\\<rho>\\<^sub>2) \\<le> 1\\<rbrakk>\n  \\<Longrightarrow> denote ?x3a (?\\<rho>\\<^sub>1 + ?\\<rho>\\<^sub>2) =\n                    denote ?x3a ?\\<rho>\\<^sub>1 +\n                    denote ?x3a ?\\<rho>\\<^sub>2\n  well_com (Measure x1 x2a x3a)\n  \\<rho>\\<^sub>1 \\<in> carrier_mat d d\n  \\<rho>\\<^sub>2 \\<in> carrier_mat d d\n  partial_density_operator \\<rho>\\<^sub>1\n  partial_density_operator \\<rho>\\<^sub>2\n  trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) \\<le> 1\n\ngoal (1 subgoal):\n 1. \\<And>k.\n       k < x1 \\<Longrightarrow>\n       (map denote x3a ! k) (x2a k * \\<rho>\\<^sub>2 * adjoint (x2a k))\n       \\<in> carrier_mat d d", "by auto"], ["proof (state)\nthis:\n  ?k < x1 \\<Longrightarrow>\n  (map denote x3a ! ?k) (x2a ?k * \\<rho>\\<^sub>2 * adjoint (x2a ?k))\n  \\<in> carrier_mat d d\n\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<And>x3aa \\<rho>\\<^sub>1 \\<rho>\\<^sub>2.\n                \\<lbrakk>x3aa \\<in> set x3a; well_com x3aa;\n                 \\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n                 \\<rho>\\<^sub>2 \\<in> carrier_mat d d;\n                 partial_density_operator \\<rho>\\<^sub>1;\n                 partial_density_operator \\<rho>\\<^sub>2;\n                 trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) \\<le> 1\\<rbrakk>\n                \\<Longrightarrow> denote x3aa\n                                   (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) =\n                                  denote x3aa \\<rho>\\<^sub>1 +\n                                  denote x3aa \\<rho>\\<^sub>2;\n     well_com (Measure x1 x2a x3a); \\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n     \\<rho>\\<^sub>2 \\<in> carrier_mat d d;\n     partial_density_operator \\<rho>\\<^sub>1;\n     partial_density_operator \\<rho>\\<^sub>2;\n     trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) \\<le> 1\\<rbrakk>\n    \\<Longrightarrow> denote (Measure x1 x2a x3a)\n                       (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) =\n                      denote (Measure x1 x2a x3a) \\<rho>\\<^sub>1 +\n                      denote (Measure x1 x2a x3a) \\<rho>\\<^sub>2", "have dim1:\"\\<And>k. k < x1 \\<Longrightarrow> x2a k * \\<rho>\\<^sub>1 * adjoint (x2a k) \\<in> carrier_mat d d\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>k.\n       k < x1 \\<Longrightarrow>\n       x2a k * \\<rho>\\<^sub>1 * adjoint (x2a k) \\<in> carrier_mat d d", "using well_com.simps(5) measurement_dim Measure"], ["proof (prove)\nusing this:\n  well_com (While ?M ?S) = (measurement d 2 ?M \\<and> well_com ?S)\n  \\<lbrakk>measurement ?d ?n ?M; ?k < ?n\\<rbrakk>\n  \\<Longrightarrow> ?M ?k \\<in> carrier_mat ?d ?d\n  \\<lbrakk>?x3a \\<in> set x3a; well_com ?x3a;\n   ?\\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n   ?\\<rho>\\<^sub>2 \\<in> carrier_mat d d;\n   partial_density_operator ?\\<rho>\\<^sub>1;\n   partial_density_operator ?\\<rho>\\<^sub>2;\n   trace (?\\<rho>\\<^sub>1 + ?\\<rho>\\<^sub>2) \\<le> 1\\<rbrakk>\n  \\<Longrightarrow> denote ?x3a (?\\<rho>\\<^sub>1 + ?\\<rho>\\<^sub>2) =\n                    denote ?x3a ?\\<rho>\\<^sub>1 +\n                    denote ?x3a ?\\<rho>\\<^sub>2\n  well_com (Measure x1 x2a x3a)\n  \\<rho>\\<^sub>1 \\<in> carrier_mat d d\n  \\<rho>\\<^sub>2 \\<in> carrier_mat d d\n  partial_density_operator \\<rho>\\<^sub>1\n  partial_density_operator \\<rho>\\<^sub>2\n  trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) \\<le> 1\n\ngoal (1 subgoal):\n 1. \\<And>k.\n       k < x1 \\<Longrightarrow>\n       x2a k * \\<rho>\\<^sub>1 * adjoint (x2a k) \\<in> carrier_mat d d", "by fastforce"], ["proof (state)\nthis:\n  ?k < x1 \\<Longrightarrow>\n  x2a ?k * \\<rho>\\<^sub>1 * adjoint (x2a ?k) \\<in> carrier_mat d d\n\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<And>x3aa \\<rho>\\<^sub>1 \\<rho>\\<^sub>2.\n                \\<lbrakk>x3aa \\<in> set x3a; well_com x3aa;\n                 \\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n                 \\<rho>\\<^sub>2 \\<in> carrier_mat d d;\n                 partial_density_operator \\<rho>\\<^sub>1;\n                 partial_density_operator \\<rho>\\<^sub>2;\n                 trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) \\<le> 1\\<rbrakk>\n                \\<Longrightarrow> denote x3aa\n                                   (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) =\n                                  denote x3aa \\<rho>\\<^sub>1 +\n                                  denote x3aa \\<rho>\\<^sub>2;\n     well_com (Measure x1 x2a x3a); \\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n     \\<rho>\\<^sub>2 \\<in> carrier_mat d d;\n     partial_density_operator \\<rho>\\<^sub>1;\n     partial_density_operator \\<rho>\\<^sub>2;\n     trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) \\<le> 1\\<rbrakk>\n    \\<Longrightarrow> denote (Measure x1 x2a x3a)\n                       (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) =\n                      denote (Measure x1 x2a x3a) \\<rho>\\<^sub>1 +\n                      denote (Measure x1 x2a x3a) \\<rho>\\<^sub>2", "have dim2: \"\\<And>k. k < x1 \\<Longrightarrow> x2a k * \\<rho>\\<^sub>2 * adjoint (x2a k) \\<in> carrier_mat d d\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>k.\n       k < x1 \\<Longrightarrow>\n       x2a k * \\<rho>\\<^sub>2 * adjoint (x2a k) \\<in> carrier_mat d d", "using well_com.simps(5) measurement_dim Measure"], ["proof (prove)\nusing this:\n  well_com (While ?M ?S) = (measurement d 2 ?M \\<and> well_com ?S)\n  \\<lbrakk>measurement ?d ?n ?M; ?k < ?n\\<rbrakk>\n  \\<Longrightarrow> ?M ?k \\<in> carrier_mat ?d ?d\n  \\<lbrakk>?x3a \\<in> set x3a; well_com ?x3a;\n   ?\\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n   ?\\<rho>\\<^sub>2 \\<in> carrier_mat d d;\n   partial_density_operator ?\\<rho>\\<^sub>1;\n   partial_density_operator ?\\<rho>\\<^sub>2;\n   trace (?\\<rho>\\<^sub>1 + ?\\<rho>\\<^sub>2) \\<le> 1\\<rbrakk>\n  \\<Longrightarrow> denote ?x3a (?\\<rho>\\<^sub>1 + ?\\<rho>\\<^sub>2) =\n                    denote ?x3a ?\\<rho>\\<^sub>1 +\n                    denote ?x3a ?\\<rho>\\<^sub>2\n  well_com (Measure x1 x2a x3a)\n  \\<rho>\\<^sub>1 \\<in> carrier_mat d d\n  \\<rho>\\<^sub>2 \\<in> carrier_mat d d\n  partial_density_operator \\<rho>\\<^sub>1\n  partial_density_operator \\<rho>\\<^sub>2\n  trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) \\<le> 1\n\ngoal (1 subgoal):\n 1. \\<And>k.\n       k < x1 \\<Longrightarrow>\n       x2a k * \\<rho>\\<^sub>2 * adjoint (x2a k) \\<in> carrier_mat d d", "by fastforce"], ["proof (state)\nthis:\n  ?k < x1 \\<Longrightarrow>\n  x2a ?k * \\<rho>\\<^sub>2 * adjoint (x2a ?k) \\<in> carrier_mat d d\n\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<And>x3aa \\<rho>\\<^sub>1 \\<rho>\\<^sub>2.\n                \\<lbrakk>x3aa \\<in> set x3a; well_com x3aa;\n                 \\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n                 \\<rho>\\<^sub>2 \\<in> carrier_mat d d;\n                 partial_density_operator \\<rho>\\<^sub>1;\n                 partial_density_operator \\<rho>\\<^sub>2;\n                 trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) \\<le> 1\\<rbrakk>\n                \\<Longrightarrow> denote x3aa\n                                   (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) =\n                                  denote x3aa \\<rho>\\<^sub>1 +\n                                  denote x3aa \\<rho>\\<^sub>2;\n     well_com (Measure x1 x2a x3a); \\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n     \\<rho>\\<^sub>2 \\<in> carrier_mat d d;\n     partial_density_operator \\<rho>\\<^sub>1;\n     partial_density_operator \\<rho>\\<^sub>2;\n     trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) \\<le> 1\\<rbrakk>\n    \\<Longrightarrow> denote (Measure x1 x2a x3a)\n                       (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) =\n                      denote (Measure x1 x2a x3a) \\<rho>\\<^sub>1 +\n                      denote (Measure x1 x2a x3a) \\<rho>\\<^sub>2", "have \"\\<And>k. k < x1 \\<Longrightarrow> (x2a k * (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) * adjoint (x2a k)) \\<in> carrier_mat d d\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>k.\n       k < x1 \\<Longrightarrow>\n       x2a k * (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) * adjoint (x2a k)\n       \\<in> carrier_mat d d", "using well_com.simps(5) measurement_dim Measure"], ["proof (prove)\nusing this:\n  well_com (While ?M ?S) = (measurement d 2 ?M \\<and> well_com ?S)\n  \\<lbrakk>measurement ?d ?n ?M; ?k < ?n\\<rbrakk>\n  \\<Longrightarrow> ?M ?k \\<in> carrier_mat ?d ?d\n  \\<lbrakk>?x3a \\<in> set x3a; well_com ?x3a;\n   ?\\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n   ?\\<rho>\\<^sub>2 \\<in> carrier_mat d d;\n   partial_density_operator ?\\<rho>\\<^sub>1;\n   partial_density_operator ?\\<rho>\\<^sub>2;\n   trace (?\\<rho>\\<^sub>1 + ?\\<rho>\\<^sub>2) \\<le> 1\\<rbrakk>\n  \\<Longrightarrow> denote ?x3a (?\\<rho>\\<^sub>1 + ?\\<rho>\\<^sub>2) =\n                    denote ?x3a ?\\<rho>\\<^sub>1 +\n                    denote ?x3a ?\\<rho>\\<^sub>2\n  well_com (Measure x1 x2a x3a)\n  \\<rho>\\<^sub>1 \\<in> carrier_mat d d\n  \\<rho>\\<^sub>2 \\<in> carrier_mat d d\n  partial_density_operator \\<rho>\\<^sub>1\n  partial_density_operator \\<rho>\\<^sub>2\n  trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) \\<le> 1\n\ngoal (1 subgoal):\n 1. \\<And>k.\n       k < x1 \\<Longrightarrow>\n       x2a k * (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) * adjoint (x2a k)\n       \\<in> carrier_mat d d", "by fastforce"], ["proof (state)\nthis:\n  ?k < x1 \\<Longrightarrow>\n  x2a ?k * (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) * adjoint (x2a ?k)\n  \\<in> carrier_mat d d\n\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<And>x3aa \\<rho>\\<^sub>1 \\<rho>\\<^sub>2.\n                \\<lbrakk>x3aa \\<in> set x3a; well_com x3aa;\n                 \\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n                 \\<rho>\\<^sub>2 \\<in> carrier_mat d d;\n                 partial_density_operator \\<rho>\\<^sub>1;\n                 partial_density_operator \\<rho>\\<^sub>2;\n                 trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) \\<le> 1\\<rbrakk>\n                \\<Longrightarrow> denote x3aa\n                                   (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) =\n                                  denote x3aa \\<rho>\\<^sub>1 +\n                                  denote x3aa \\<rho>\\<^sub>2;\n     well_com (Measure x1 x2a x3a); \\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n     \\<rho>\\<^sub>2 \\<in> carrier_mat d d;\n     partial_density_operator \\<rho>\\<^sub>1;\n     partial_density_operator \\<rho>\\<^sub>2;\n     trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) \\<le> 1\\<rbrakk>\n    \\<Longrightarrow> denote (Measure x1 x2a x3a)\n                       (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) =\n                      denote (Measure x1 x2a x3a) \\<rho>\\<^sub>1 +\n                      denote (Measure x1 x2a x3a) \\<rho>\\<^sub>2", "have lea: \"\\<And>k. k < x1 \\<Longrightarrow> adjoint (x2a k) * x2a k \\<le>\\<^sub>L 1\\<^sub>m d\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>k.\n       k < x1 \\<Longrightarrow>\n       adjoint (x2a k) * x2a k \\<le>\\<^sub>L 1\\<^sub>m d", "using measurement_le_one_mat Measure"], ["proof (prove)\nusing this:\n  \\<lbrakk>measurement ?d ?n ?f; ?j < ?n\\<rbrakk>\n  \\<Longrightarrow> adjoint (?f ?j) * ?f ?j \\<le>\\<^sub>L 1\\<^sub>m ?d\n  \\<lbrakk>?x3a \\<in> set x3a; well_com ?x3a;\n   ?\\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n   ?\\<rho>\\<^sub>2 \\<in> carrier_mat d d;\n   partial_density_operator ?\\<rho>\\<^sub>1;\n   partial_density_operator ?\\<rho>\\<^sub>2;\n   trace (?\\<rho>\\<^sub>1 + ?\\<rho>\\<^sub>2) \\<le> 1\\<rbrakk>\n  \\<Longrightarrow> denote ?x3a (?\\<rho>\\<^sub>1 + ?\\<rho>\\<^sub>2) =\n                    denote ?x3a ?\\<rho>\\<^sub>1 +\n                    denote ?x3a ?\\<rho>\\<^sub>2\n  well_com (Measure x1 x2a x3a)\n  \\<rho>\\<^sub>1 \\<in> carrier_mat d d\n  \\<rho>\\<^sub>2 \\<in> carrier_mat d d\n  partial_density_operator \\<rho>\\<^sub>1\n  partial_density_operator \\<rho>\\<^sub>2\n  trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) \\<le> 1\n\ngoal (1 subgoal):\n 1. \\<And>k.\n       k < x1 \\<Longrightarrow>\n       adjoint (x2a k) * x2a k \\<le>\\<^sub>L 1\\<^sub>m d", "by auto"], ["proof (state)\nthis:\n  ?k < x1 \\<Longrightarrow>\n  adjoint (x2a ?k) * x2a ?k \\<le>\\<^sub>L 1\\<^sub>m d\n\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<And>x3aa \\<rho>\\<^sub>1 \\<rho>\\<^sub>2.\n                \\<lbrakk>x3aa \\<in> set x3a; well_com x3aa;\n                 \\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n                 \\<rho>\\<^sub>2 \\<in> carrier_mat d d;\n                 partial_density_operator \\<rho>\\<^sub>1;\n                 partial_density_operator \\<rho>\\<^sub>2;\n                 trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) \\<le> 1\\<rbrakk>\n                \\<Longrightarrow> denote x3aa\n                                   (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) =\n                                  denote x3aa \\<rho>\\<^sub>1 +\n                                  denote x3aa \\<rho>\\<^sub>2;\n     well_com (Measure x1 x2a x3a); \\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n     \\<rho>\\<^sub>2 \\<in> carrier_mat d d;\n     partial_density_operator \\<rho>\\<^sub>1;\n     partial_density_operator \\<rho>\\<^sub>2;\n     trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) \\<le> 1\\<rbrakk>\n    \\<Longrightarrow> denote (Measure x1 x2a x3a)\n                       (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) =\n                      denote (Measure x1 x2a x3a) \\<rho>\\<^sub>1 +\n                      denote (Measure x1 x2a x3a) \\<rho>\\<^sub>2", "moreover"], ["proof (state)\nthis:\n  ?k < x1 \\<Longrightarrow>\n  adjoint (x2a ?k) * x2a ?k \\<le>\\<^sub>L 1\\<^sub>m d\n\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<And>x3aa \\<rho>\\<^sub>1 \\<rho>\\<^sub>2.\n                \\<lbrakk>x3aa \\<in> set x3a; well_com x3aa;\n                 \\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n                 \\<rho>\\<^sub>2 \\<in> carrier_mat d d;\n                 partial_density_operator \\<rho>\\<^sub>1;\n                 partial_density_operator \\<rho>\\<^sub>2;\n                 trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) \\<le> 1\\<rbrakk>\n                \\<Longrightarrow> denote x3aa\n                                   (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) =\n                                  denote x3aa \\<rho>\\<^sub>1 +\n                                  denote x3aa \\<rho>\\<^sub>2;\n     well_com (Measure x1 x2a x3a); \\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n     \\<rho>\\<^sub>2 \\<in> carrier_mat d d;\n     partial_density_operator \\<rho>\\<^sub>1;\n     partial_density_operator \\<rho>\\<^sub>2;\n     trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) \\<le> 1\\<rbrakk>\n    \\<Longrightarrow> denote (Measure x1 x2a x3a)\n                       (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) =\n                      denote (Measure x1 x2a x3a) \\<rho>\\<^sub>1 +\n                      denote (Measure x1 x2a x3a) \\<rho>\\<^sub>2", "have dimx: \"\\<And>k. k < x1 \\<Longrightarrow> x2a k \\<in> carrier_mat d d\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>k. k < x1 \\<Longrightarrow> x2a k \\<in> carrier_mat d d", "using Measure measurement_dim"], ["proof (prove)\nusing this:\n  \\<lbrakk>?x3a \\<in> set x3a; well_com ?x3a;\n   ?\\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n   ?\\<rho>\\<^sub>2 \\<in> carrier_mat d d;\n   partial_density_operator ?\\<rho>\\<^sub>1;\n   partial_density_operator ?\\<rho>\\<^sub>2;\n   trace (?\\<rho>\\<^sub>1 + ?\\<rho>\\<^sub>2) \\<le> 1\\<rbrakk>\n  \\<Longrightarrow> denote ?x3a (?\\<rho>\\<^sub>1 + ?\\<rho>\\<^sub>2) =\n                    denote ?x3a ?\\<rho>\\<^sub>1 +\n                    denote ?x3a ?\\<rho>\\<^sub>2\n  well_com (Measure x1 x2a x3a)\n  \\<rho>\\<^sub>1 \\<in> carrier_mat d d\n  \\<rho>\\<^sub>2 \\<in> carrier_mat d d\n  partial_density_operator \\<rho>\\<^sub>1\n  partial_density_operator \\<rho>\\<^sub>2\n  trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) \\<le> 1\n  \\<lbrakk>measurement ?d ?n ?M; ?k < ?n\\<rbrakk>\n  \\<Longrightarrow> ?M ?k \\<in> carrier_mat ?d ?d\n\ngoal (1 subgoal):\n 1. \\<And>k. k < x1 \\<Longrightarrow> x2a k \\<in> carrier_mat d d", "by auto"], ["proof (state)\nthis:\n  ?k < x1 \\<Longrightarrow> x2a ?k \\<in> carrier_mat d d\n\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<And>x3aa \\<rho>\\<^sub>1 \\<rho>\\<^sub>2.\n                \\<lbrakk>x3aa \\<in> set x3a; well_com x3aa;\n                 \\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n                 \\<rho>\\<^sub>2 \\<in> carrier_mat d d;\n                 partial_density_operator \\<rho>\\<^sub>1;\n                 partial_density_operator \\<rho>\\<^sub>2;\n                 trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) \\<le> 1\\<rbrakk>\n                \\<Longrightarrow> denote x3aa\n                                   (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) =\n                                  denote x3aa \\<rho>\\<^sub>1 +\n                                  denote x3aa \\<rho>\\<^sub>2;\n     well_com (Measure x1 x2a x3a); \\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n     \\<rho>\\<^sub>2 \\<in> carrier_mat d d;\n     partial_density_operator \\<rho>\\<^sub>1;\n     partial_density_operator \\<rho>\\<^sub>2;\n     trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) \\<le> 1\\<rbrakk>\n    \\<Longrightarrow> denote (Measure x1 x2a x3a)\n                       (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) =\n                      denote (Measure x1 x2a x3a) \\<rho>\\<^sub>1 +\n                      denote (Measure x1 x2a x3a) \\<rho>\\<^sub>2", "ultimately"], ["proof (chain)\npicking this:\n  ?k < x1 \\<Longrightarrow>\n  adjoint (x2a ?k) * x2a ?k \\<le>\\<^sub>L 1\\<^sub>m d\n  ?k < x1 \\<Longrightarrow> x2a ?k \\<in> carrier_mat d d", "have pdo12:\"\\<And>k. k < x1 \\<Longrightarrow> partial_density_operator (x2a k * \\<rho>\\<^sub>1 * adjoint (x2a k)) \\<and> partial_density_operator (x2a k * \\<rho>\\<^sub>2 * adjoint (x2a k))\""], ["proof (prove)\nusing this:\n  ?k < x1 \\<Longrightarrow>\n  adjoint (x2a ?k) * x2a ?k \\<le>\\<^sub>L 1\\<^sub>m d\n  ?k < x1 \\<Longrightarrow> x2a ?k \\<in> carrier_mat d d\n\ngoal (1 subgoal):\n 1. \\<And>k.\n       k < x1 \\<Longrightarrow>\n       partial_density_operator\n        (x2a k * \\<rho>\\<^sub>1 * adjoint (x2a k)) \\<and>\n       partial_density_operator (x2a k * \\<rho>\\<^sub>2 * adjoint (x2a k))", "using pdo_close_under_measurement Measure measurement_dim"], ["proof (prove)\nusing this:\n  ?k < x1 \\<Longrightarrow>\n  adjoint (x2a ?k) * x2a ?k \\<le>\\<^sub>L 1\\<^sub>m d\n  ?k < x1 \\<Longrightarrow> x2a ?k \\<in> carrier_mat d d\n  \\<lbrakk>?M \\<in> carrier_mat ?n ?n; ?\\<rho> \\<in> carrier_mat ?n ?n;\n   partial_density_operator ?\\<rho>;\n   adjoint ?M * ?M \\<le>\\<^sub>L 1\\<^sub>m ?n\\<rbrakk>\n  \\<Longrightarrow> partial_density_operator (?M * ?\\<rho> * adjoint ?M)\n  \\<lbrakk>?x3a \\<in> set x3a; well_com ?x3a;\n   ?\\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n   ?\\<rho>\\<^sub>2 \\<in> carrier_mat d d;\n   partial_density_operator ?\\<rho>\\<^sub>1;\n   partial_density_operator ?\\<rho>\\<^sub>2;\n   trace (?\\<rho>\\<^sub>1 + ?\\<rho>\\<^sub>2) \\<le> 1\\<rbrakk>\n  \\<Longrightarrow> denote ?x3a (?\\<rho>\\<^sub>1 + ?\\<rho>\\<^sub>2) =\n                    denote ?x3a ?\\<rho>\\<^sub>1 +\n                    denote ?x3a ?\\<rho>\\<^sub>2\n  well_com (Measure x1 x2a x3a)\n  \\<rho>\\<^sub>1 \\<in> carrier_mat d d\n  \\<rho>\\<^sub>2 \\<in> carrier_mat d d\n  partial_density_operator \\<rho>\\<^sub>1\n  partial_density_operator \\<rho>\\<^sub>2\n  trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) \\<le> 1\n  \\<lbrakk>measurement ?d ?n ?M; ?k < ?n\\<rbrakk>\n  \\<Longrightarrow> ?M ?k \\<in> carrier_mat ?d ?d\n\ngoal (1 subgoal):\n 1. \\<And>k.\n       k < x1 \\<Longrightarrow>\n       partial_density_operator\n        (x2a k * \\<rho>\\<^sub>1 * adjoint (x2a k)) \\<and>\n       partial_density_operator (x2a k * \\<rho>\\<^sub>2 * adjoint (x2a k))", "by blast"], ["proof (state)\nthis:\n  ?k < x1 \\<Longrightarrow>\n  partial_density_operator\n   (x2a ?k * \\<rho>\\<^sub>1 * adjoint (x2a ?k)) \\<and>\n  partial_density_operator (x2a ?k * \\<rho>\\<^sub>2 * adjoint (x2a ?k))\n\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<And>x3aa \\<rho>\\<^sub>1 \\<rho>\\<^sub>2.\n                \\<lbrakk>x3aa \\<in> set x3a; well_com x3aa;\n                 \\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n                 \\<rho>\\<^sub>2 \\<in> carrier_mat d d;\n                 partial_density_operator \\<rho>\\<^sub>1;\n                 partial_density_operator \\<rho>\\<^sub>2;\n                 trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) \\<le> 1\\<rbrakk>\n                \\<Longrightarrow> denote x3aa\n                                   (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) =\n                                  denote x3aa \\<rho>\\<^sub>1 +\n                                  denote x3aa \\<rho>\\<^sub>2;\n     well_com (Measure x1 x2a x3a); \\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n     \\<rho>\\<^sub>2 \\<in> carrier_mat d d;\n     partial_density_operator \\<rho>\\<^sub>1;\n     partial_density_operator \\<rho>\\<^sub>2;\n     trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) \\<le> 1\\<rbrakk>\n    \\<Longrightarrow> denote (Measure x1 x2a x3a)\n                       (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) =\n                      denote (Measure x1 x2a x3a) \\<rho>\\<^sub>1 +\n                      denote (Measure x1 x2a x3a) \\<rho>\\<^sub>2", "have trless: \"trace (x2a k * \\<rho>\\<^sub>1 * adjoint (x2a k) + x2a k * \\<rho>\\<^sub>2 * adjoint (x2a k)) \\<le> 1\"\n      if k: \"k < x1\" for k"], ["proof (prove)\ngoal (1 subgoal):\n 1. trace\n     (x2a k * \\<rho>\\<^sub>1 * adjoint (x2a k) +\n      x2a k * \\<rho>\\<^sub>2 * adjoint (x2a k))\n    \\<le> 1", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. trace\n     (x2a k * \\<rho>\\<^sub>1 * adjoint (x2a k) +\n      x2a k * \\<rho>\\<^sub>2 * adjoint (x2a k))\n    \\<le> 1", "have \"trace (x2a k * \\<rho>\\<^sub>1 * adjoint (x2a k)) \\<le> trace \\<rho>\\<^sub>1\""], ["proof (prove)\ngoal (1 subgoal):\n 1. trace (x2a k * \\<rho>\\<^sub>1 * adjoint (x2a k))\n    \\<le> trace \\<rho>\\<^sub>1", "using trace_decrease_mul_adj dimx Measure lea k"], ["proof (prove)\nusing this:\n  \\<lbrakk>partial_density_operator ?\\<rho>; ?\\<rho> \\<in> carrier_mat d d;\n   ?x \\<in> carrier_mat d d;\n   adjoint ?x * ?x \\<le>\\<^sub>L 1\\<^sub>m d\\<rbrakk>\n  \\<Longrightarrow> trace (?x * ?\\<rho> * adjoint ?x) \\<le> trace ?\\<rho>\n  ?k < x1 \\<Longrightarrow> x2a ?k \\<in> carrier_mat d d\n  \\<lbrakk>?x3a \\<in> set x3a; well_com ?x3a;\n   ?\\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n   ?\\<rho>\\<^sub>2 \\<in> carrier_mat d d;\n   partial_density_operator ?\\<rho>\\<^sub>1;\n   partial_density_operator ?\\<rho>\\<^sub>2;\n   trace (?\\<rho>\\<^sub>1 + ?\\<rho>\\<^sub>2) \\<le> 1\\<rbrakk>\n  \\<Longrightarrow> denote ?x3a (?\\<rho>\\<^sub>1 + ?\\<rho>\\<^sub>2) =\n                    denote ?x3a ?\\<rho>\\<^sub>1 +\n                    denote ?x3a ?\\<rho>\\<^sub>2\n  well_com (Measure x1 x2a x3a)\n  \\<rho>\\<^sub>1 \\<in> carrier_mat d d\n  \\<rho>\\<^sub>2 \\<in> carrier_mat d d\n  partial_density_operator \\<rho>\\<^sub>1\n  partial_density_operator \\<rho>\\<^sub>2\n  trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) \\<le> 1\n  ?k < x1 \\<Longrightarrow>\n  adjoint (x2a ?k) * x2a ?k \\<le>\\<^sub>L 1\\<^sub>m d\n  k < x1\n\ngoal (1 subgoal):\n 1. trace (x2a k * \\<rho>\\<^sub>1 * adjoint (x2a k))\n    \\<le> trace \\<rho>\\<^sub>1", "by auto"], ["proof (state)\nthis:\n  trace (x2a k * \\<rho>\\<^sub>1 * adjoint (x2a k))\n  \\<le> trace \\<rho>\\<^sub>1\n\ngoal (1 subgoal):\n 1. trace\n     (x2a k * \\<rho>\\<^sub>1 * adjoint (x2a k) +\n      x2a k * \\<rho>\\<^sub>2 * adjoint (x2a k))\n    \\<le> 1", "moreover"], ["proof (state)\nthis:\n  trace (x2a k * \\<rho>\\<^sub>1 * adjoint (x2a k))\n  \\<le> trace \\<rho>\\<^sub>1\n\ngoal (1 subgoal):\n 1. trace\n     (x2a k * \\<rho>\\<^sub>1 * adjoint (x2a k) +\n      x2a k * \\<rho>\\<^sub>2 * adjoint (x2a k))\n    \\<le> 1", "have \"trace (x2a k * \\<rho>\\<^sub>2 * adjoint (x2a k)) \\<le> trace \\<rho>\\<^sub>2\""], ["proof (prove)\ngoal (1 subgoal):\n 1. trace (x2a k * \\<rho>\\<^sub>2 * adjoint (x2a k))\n    \\<le> trace \\<rho>\\<^sub>2", "using trace_decrease_mul_adj dimx Measure lea k"], ["proof (prove)\nusing this:\n  \\<lbrakk>partial_density_operator ?\\<rho>; ?\\<rho> \\<in> carrier_mat d d;\n   ?x \\<in> carrier_mat d d;\n   adjoint ?x * ?x \\<le>\\<^sub>L 1\\<^sub>m d\\<rbrakk>\n  \\<Longrightarrow> trace (?x * ?\\<rho> * adjoint ?x) \\<le> trace ?\\<rho>\n  ?k < x1 \\<Longrightarrow> x2a ?k \\<in> carrier_mat d d\n  \\<lbrakk>?x3a \\<in> set x3a; well_com ?x3a;\n   ?\\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n   ?\\<rho>\\<^sub>2 \\<in> carrier_mat d d;\n   partial_density_operator ?\\<rho>\\<^sub>1;\n   partial_density_operator ?\\<rho>\\<^sub>2;\n   trace (?\\<rho>\\<^sub>1 + ?\\<rho>\\<^sub>2) \\<le> 1\\<rbrakk>\n  \\<Longrightarrow> denote ?x3a (?\\<rho>\\<^sub>1 + ?\\<rho>\\<^sub>2) =\n                    denote ?x3a ?\\<rho>\\<^sub>1 +\n                    denote ?x3a ?\\<rho>\\<^sub>2\n  well_com (Measure x1 x2a x3a)\n  \\<rho>\\<^sub>1 \\<in> carrier_mat d d\n  \\<rho>\\<^sub>2 \\<in> carrier_mat d d\n  partial_density_operator \\<rho>\\<^sub>1\n  partial_density_operator \\<rho>\\<^sub>2\n  trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) \\<le> 1\n  ?k < x1 \\<Longrightarrow>\n  adjoint (x2a ?k) * x2a ?k \\<le>\\<^sub>L 1\\<^sub>m d\n  k < x1\n\ngoal (1 subgoal):\n 1. trace (x2a k * \\<rho>\\<^sub>2 * adjoint (x2a k))\n    \\<le> trace \\<rho>\\<^sub>2", "by auto"], ["proof (state)\nthis:\n  trace (x2a k * \\<rho>\\<^sub>2 * adjoint (x2a k))\n  \\<le> trace \\<rho>\\<^sub>2\n\ngoal (1 subgoal):\n 1. trace\n     (x2a k * \\<rho>\\<^sub>1 * adjoint (x2a k) +\n      x2a k * \\<rho>\\<^sub>2 * adjoint (x2a k))\n    \\<le> 1", "ultimately"], ["proof (chain)\npicking this:\n  trace (x2a k * \\<rho>\\<^sub>1 * adjoint (x2a k))\n  \\<le> trace \\<rho>\\<^sub>1\n  trace (x2a k * \\<rho>\\<^sub>2 * adjoint (x2a k))\n  \\<le> trace \\<rho>\\<^sub>2", "have \"trace (x2a k * \\<rho>\\<^sub>1 * adjoint (x2a k) + x2a k * \\<rho>\\<^sub>2 * adjoint (x2a k)) \\<le> trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2)\""], ["proof (prove)\nusing this:\n  trace (x2a k * \\<rho>\\<^sub>1 * adjoint (x2a k))\n  \\<le> trace \\<rho>\\<^sub>1\n  trace (x2a k * \\<rho>\\<^sub>2 * adjoint (x2a k))\n  \\<le> trace \\<rho>\\<^sub>2\n\ngoal (1 subgoal):\n 1. trace\n     (x2a k * \\<rho>\\<^sub>1 * adjoint (x2a k) +\n      x2a k * \\<rho>\\<^sub>2 * adjoint (x2a k))\n    \\<le> trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2)", "using trace_add_linear dim1 dim2 Measure k"], ["proof (prove)\nusing this:\n  trace (x2a k * \\<rho>\\<^sub>1 * adjoint (x2a k))\n  \\<le> trace \\<rho>\\<^sub>1\n  trace (x2a k * \\<rho>\\<^sub>2 * adjoint (x2a k))\n  \\<le> trace \\<rho>\\<^sub>2\n  \\<lbrakk>?A \\<in> carrier_mat ?n ?n; ?B \\<in> carrier_mat ?n ?n\\<rbrakk>\n  \\<Longrightarrow> trace (?A + ?B) = trace ?A + trace ?B\n  ?k < x1 \\<Longrightarrow>\n  x2a ?k * \\<rho>\\<^sub>1 * adjoint (x2a ?k) \\<in> carrier_mat d d\n  ?k < x1 \\<Longrightarrow>\n  x2a ?k * \\<rho>\\<^sub>2 * adjoint (x2a ?k) \\<in> carrier_mat d d\n  \\<lbrakk>?x3a \\<in> set x3a; well_com ?x3a;\n   ?\\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n   ?\\<rho>\\<^sub>2 \\<in> carrier_mat d d;\n   partial_density_operator ?\\<rho>\\<^sub>1;\n   partial_density_operator ?\\<rho>\\<^sub>2;\n   trace (?\\<rho>\\<^sub>1 + ?\\<rho>\\<^sub>2) \\<le> 1\\<rbrakk>\n  \\<Longrightarrow> denote ?x3a (?\\<rho>\\<^sub>1 + ?\\<rho>\\<^sub>2) =\n                    denote ?x3a ?\\<rho>\\<^sub>1 +\n                    denote ?x3a ?\\<rho>\\<^sub>2\n  well_com (Measure x1 x2a x3a)\n  \\<rho>\\<^sub>1 \\<in> carrier_mat d d\n  \\<rho>\\<^sub>2 \\<in> carrier_mat d d\n  partial_density_operator \\<rho>\\<^sub>1\n  partial_density_operator \\<rho>\\<^sub>2\n  trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) \\<le> 1\n  k < x1\n\ngoal (1 subgoal):\n 1. trace\n     (x2a k * \\<rho>\\<^sub>1 * adjoint (x2a k) +\n      x2a k * \\<rho>\\<^sub>2 * adjoint (x2a k))\n    \\<le> trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2)", "by (metis add_mono_thms_linordered_semiring(1))"], ["proof (state)\nthis:\n  trace\n   (x2a k * \\<rho>\\<^sub>1 * adjoint (x2a k) +\n    x2a k * \\<rho>\\<^sub>2 * adjoint (x2a k))\n  \\<le> trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2)\n\ngoal (1 subgoal):\n 1. trace\n     (x2a k * \\<rho>\\<^sub>1 * adjoint (x2a k) +\n      x2a k * \\<rho>\\<^sub>2 * adjoint (x2a k))\n    \\<le> 1", "then"], ["proof (chain)\npicking this:\n  trace\n   (x2a k * \\<rho>\\<^sub>1 * adjoint (x2a k) +\n    x2a k * \\<rho>\\<^sub>2 * adjoint (x2a k))\n  \\<le> trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2)", "show ?thesis"], ["proof (prove)\nusing this:\n  trace\n   (x2a k * \\<rho>\\<^sub>1 * adjoint (x2a k) +\n    x2a k * \\<rho>\\<^sub>2 * adjoint (x2a k))\n  \\<le> trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2)\n\ngoal (1 subgoal):\n 1. trace\n     (x2a k * \\<rho>\\<^sub>1 * adjoint (x2a k) +\n      x2a k * \\<rho>\\<^sub>2 * adjoint (x2a k))\n    \\<le> 1", "using Measure(7)"], ["proof (prove)\nusing this:\n  trace\n   (x2a k * \\<rho>\\<^sub>1 * adjoint (x2a k) +\n    x2a k * \\<rho>\\<^sub>2 * adjoint (x2a k))\n  \\<le> trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2)\n  trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) \\<le> 1\n\ngoal (1 subgoal):\n 1. trace\n     (x2a k * \\<rho>\\<^sub>1 * adjoint (x2a k) +\n      x2a k * \\<rho>\\<^sub>2 * adjoint (x2a k))\n    \\<le> 1", "by auto"], ["proof (state)\nthis:\n  trace\n   (x2a k * \\<rho>\\<^sub>1 * adjoint (x2a k) +\n    x2a k * \\<rho>\\<^sub>2 * adjoint (x2a k))\n  \\<le> 1\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  ?k < x1 \\<Longrightarrow>\n  trace\n   (x2a ?k * \\<rho>\\<^sub>1 * adjoint (x2a ?k) +\n    x2a ?k * \\<rho>\\<^sub>2 * adjoint (x2a ?k))\n  \\<le> 1\n\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<And>x3aa \\<rho>\\<^sub>1 \\<rho>\\<^sub>2.\n                \\<lbrakk>x3aa \\<in> set x3a; well_com x3aa;\n                 \\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n                 \\<rho>\\<^sub>2 \\<in> carrier_mat d d;\n                 partial_density_operator \\<rho>\\<^sub>1;\n                 partial_density_operator \\<rho>\\<^sub>2;\n                 trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) \\<le> 1\\<rbrakk>\n                \\<Longrightarrow> denote x3aa\n                                   (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) =\n                                  denote x3aa \\<rho>\\<^sub>1 +\n                                  denote x3aa \\<rho>\\<^sub>2;\n     well_com (Measure x1 x2a x3a); \\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n     \\<rho>\\<^sub>2 \\<in> carrier_mat d d;\n     partial_density_operator \\<rho>\\<^sub>1;\n     partial_density_operator \\<rho>\\<^sub>2;\n     trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) \\<le> 1\\<rbrakk>\n    \\<Longrightarrow> denote (Measure x1 x2a x3a)\n                       (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) =\n                      denote (Measure x1 x2a x3a) \\<rho>\\<^sub>1 +\n                      denote (Measure x1 x2a x3a) \\<rho>\\<^sub>2", "have dist: \"(x2a k * (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) * adjoint (x2a k)) = (x2a k * \\<rho>\\<^sub>1 * adjoint (x2a k)) + (x2a k * \\<rho>\\<^sub>2 * adjoint (x2a k))\"\n      if k: \"k < x1\" for k"], ["proof (prove)\ngoal (1 subgoal):\n 1. x2a k * (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) * adjoint (x2a k) =\n    x2a k * \\<rho>\\<^sub>1 * adjoint (x2a k) +\n    x2a k * \\<rho>\\<^sub>2 * adjoint (x2a k)", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. x2a k * (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) * adjoint (x2a k) =\n    x2a k * \\<rho>\\<^sub>1 * adjoint (x2a k) +\n    x2a k * \\<rho>\\<^sub>2 * adjoint (x2a k)", "have \"(x2a k * (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) * adjoint (x2a k)) = ((x2a k * \\<rho>\\<^sub>1 + x2a k * \\<rho>\\<^sub>2) * adjoint (x2a k))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. x2a k * (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) * adjoint (x2a k) =\n    (x2a k * \\<rho>\\<^sub>1 + x2a k * \\<rho>\\<^sub>2) * adjoint (x2a k)", "using mult_add_distrib_mat Measure well_com.simps(4) measurement_dim"], ["proof (prove)\nusing this:\n  \\<lbrakk>?A \\<in> carrier_mat ?nr ?n; ?B \\<in> carrier_mat ?n ?nc;\n   ?C \\<in> carrier_mat ?n ?nc\\<rbrakk>\n  \\<Longrightarrow> ?A * (?B + ?C) = ?A * ?B + ?A * ?C\n  \\<lbrakk>?x3a \\<in> set x3a; well_com ?x3a;\n   ?\\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n   ?\\<rho>\\<^sub>2 \\<in> carrier_mat d d;\n   partial_density_operator ?\\<rho>\\<^sub>1;\n   partial_density_operator ?\\<rho>\\<^sub>2;\n   trace (?\\<rho>\\<^sub>1 + ?\\<rho>\\<^sub>2) \\<le> 1\\<rbrakk>\n  \\<Longrightarrow> denote ?x3a (?\\<rho>\\<^sub>1 + ?\\<rho>\\<^sub>2) =\n                    denote ?x3a ?\\<rho>\\<^sub>1 +\n                    denote ?x3a ?\\<rho>\\<^sub>2\n  well_com (Measure x1 x2a x3a)\n  \\<rho>\\<^sub>1 \\<in> carrier_mat d d\n  \\<rho>\\<^sub>2 \\<in> carrier_mat d d\n  partial_density_operator \\<rho>\\<^sub>1\n  partial_density_operator \\<rho>\\<^sub>2\n  trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) \\<le> 1\n  well_com (Measure ?n ?M ?S) =\n  (measurement d ?n ?M \\<and> length ?S = ?n \\<and> list_all well_com ?S)\n  \\<lbrakk>measurement ?d ?n ?M; ?k < ?n\\<rbrakk>\n  \\<Longrightarrow> ?M ?k \\<in> carrier_mat ?d ?d\n\ngoal (1 subgoal):\n 1. x2a k * (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) * adjoint (x2a k) =\n    (x2a k * \\<rho>\\<^sub>1 + x2a k * \\<rho>\\<^sub>2) * adjoint (x2a k)", "by (metis k)"], ["proof (state)\nthis:\n  x2a k * (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) * adjoint (x2a k) =\n  (x2a k * \\<rho>\\<^sub>1 + x2a k * \\<rho>\\<^sub>2) * adjoint (x2a k)\n\ngoal (1 subgoal):\n 1. x2a k * (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) * adjoint (x2a k) =\n    x2a k * \\<rho>\\<^sub>1 * adjoint (x2a k) +\n    x2a k * \\<rho>\\<^sub>2 * adjoint (x2a k)", "also"], ["proof (state)\nthis:\n  x2a k * (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) * adjoint (x2a k) =\n  (x2a k * \\<rho>\\<^sub>1 + x2a k * \\<rho>\\<^sub>2) * adjoint (x2a k)\n\ngoal (1 subgoal):\n 1. x2a k * (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) * adjoint (x2a k) =\n    x2a k * \\<rho>\\<^sub>1 * adjoint (x2a k) +\n    x2a k * \\<rho>\\<^sub>2 * adjoint (x2a k)", "have \"\\<dots> = (x2a k * \\<rho>\\<^sub>1 * adjoint (x2a k)) + (x2a k * \\<rho>\\<^sub>2 * adjoint (x2a k))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (x2a k * \\<rho>\\<^sub>1 + x2a k * \\<rho>\\<^sub>2) * adjoint (x2a k) =\n    x2a k * \\<rho>\\<^sub>1 * adjoint (x2a k) +\n    x2a k * \\<rho>\\<^sub>2 * adjoint (x2a k)", "apply (mat_assoc d)"], ["proof (prove)\ngoal (3 subgoals):\n 1. x2a k \\<in> carrier_mat d d\n 2. \\<rho>\\<^sub>2 \\<in> carrier_mat d d\n 3. \\<rho>\\<^sub>1 \\<in> carrier_mat d d", "using Measure k well_com.simps(4) measurement_dim"], ["proof (prove)\nusing this:\n  \\<lbrakk>?x3a \\<in> set x3a; well_com ?x3a;\n   ?\\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n   ?\\<rho>\\<^sub>2 \\<in> carrier_mat d d;\n   partial_density_operator ?\\<rho>\\<^sub>1;\n   partial_density_operator ?\\<rho>\\<^sub>2;\n   trace (?\\<rho>\\<^sub>1 + ?\\<rho>\\<^sub>2) \\<le> 1\\<rbrakk>\n  \\<Longrightarrow> denote ?x3a (?\\<rho>\\<^sub>1 + ?\\<rho>\\<^sub>2) =\n                    denote ?x3a ?\\<rho>\\<^sub>1 +\n                    denote ?x3a ?\\<rho>\\<^sub>2\n  well_com (Measure x1 x2a x3a)\n  \\<rho>\\<^sub>1 \\<in> carrier_mat d d\n  \\<rho>\\<^sub>2 \\<in> carrier_mat d d\n  partial_density_operator \\<rho>\\<^sub>1\n  partial_density_operator \\<rho>\\<^sub>2\n  trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) \\<le> 1\n  k < x1\n  well_com (Measure ?n ?M ?S) =\n  (measurement d ?n ?M \\<and> length ?S = ?n \\<and> list_all well_com ?S)\n  \\<lbrakk>measurement ?d ?n ?M; ?k < ?n\\<rbrakk>\n  \\<Longrightarrow> ?M ?k \\<in> carrier_mat ?d ?d\n\ngoal (3 subgoals):\n 1. x2a k \\<in> carrier_mat d d\n 2. \\<rho>\\<^sub>2 \\<in> carrier_mat d d\n 3. \\<rho>\\<^sub>1 \\<in> carrier_mat d d", "by auto"], ["proof (state)\nthis:\n  (x2a k * \\<rho>\\<^sub>1 + x2a k * \\<rho>\\<^sub>2) * adjoint (x2a k) =\n  x2a k * \\<rho>\\<^sub>1 * adjoint (x2a k) +\n  x2a k * \\<rho>\\<^sub>2 * adjoint (x2a k)\n\ngoal (1 subgoal):\n 1. x2a k * (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) * adjoint (x2a k) =\n    x2a k * \\<rho>\\<^sub>1 * adjoint (x2a k) +\n    x2a k * \\<rho>\\<^sub>2 * adjoint (x2a k)", "finally"], ["proof (chain)\npicking this:\n  x2a k * (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) * adjoint (x2a k) =\n  x2a k * \\<rho>\\<^sub>1 * adjoint (x2a k) +\n  x2a k * \\<rho>\\<^sub>2 * adjoint (x2a k)", "show ?thesis"], ["proof (prove)\nusing this:\n  x2a k * (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) * adjoint (x2a k) =\n  x2a k * \\<rho>\\<^sub>1 * adjoint (x2a k) +\n  x2a k * \\<rho>\\<^sub>2 * adjoint (x2a k)\n\ngoal (1 subgoal):\n 1. x2a k * (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) * adjoint (x2a k) =\n    x2a k * \\<rho>\\<^sub>1 * adjoint (x2a k) +\n    x2a k * \\<rho>\\<^sub>2 * adjoint (x2a k)", "by auto"], ["proof (state)\nthis:\n  x2a k * (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) * adjoint (x2a k) =\n  x2a k * \\<rho>\\<^sub>1 * adjoint (x2a k) +\n  x2a k * \\<rho>\\<^sub>2 * adjoint (x2a k)\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  ?k < x1 \\<Longrightarrow>\n  x2a ?k * (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) * adjoint (x2a ?k) =\n  x2a ?k * \\<rho>\\<^sub>1 * adjoint (x2a ?k) +\n  x2a ?k * \\<rho>\\<^sub>2 * adjoint (x2a ?k)\n\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<And>x3aa \\<rho>\\<^sub>1 \\<rho>\\<^sub>2.\n                \\<lbrakk>x3aa \\<in> set x3a; well_com x3aa;\n                 \\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n                 \\<rho>\\<^sub>2 \\<in> carrier_mat d d;\n                 partial_density_operator \\<rho>\\<^sub>1;\n                 partial_density_operator \\<rho>\\<^sub>2;\n                 trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) \\<le> 1\\<rbrakk>\n                \\<Longrightarrow> denote x3aa\n                                   (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) =\n                                  denote x3aa \\<rho>\\<^sub>1 +\n                                  denote x3aa \\<rho>\\<^sub>2;\n     well_com (Measure x1 x2a x3a); \\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n     \\<rho>\\<^sub>2 \\<in> carrier_mat d d;\n     partial_density_operator \\<rho>\\<^sub>1;\n     partial_density_operator \\<rho>\\<^sub>2;\n     trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) \\<le> 1\\<rbrakk>\n    \\<Longrightarrow> denote (Measure x1 x2a x3a)\n                       (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) =\n                      denote (Measure x1 x2a x3a) \\<rho>\\<^sub>1 +\n                      denote (Measure x1 x2a x3a) \\<rho>\\<^sub>2", "have mapadd: \"(map denote x3a ! k) (x2a k * (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) * adjoint (x2a k)) =\n        (map denote x3a ! k) (x2a k * \\<rho>\\<^sub>1 * adjoint (x2a k)) + (map denote x3a ! k) (x2a k * \\<rho>\\<^sub>2 * adjoint (x2a k))\"\n      if k: \"k < x1\" for k"], ["proof (prove)\ngoal (1 subgoal):\n 1. (map denote x3a ! k)\n     (x2a k * (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) * adjoint (x2a k)) =\n    (map denote x3a ! k) (x2a k * \\<rho>\\<^sub>1 * adjoint (x2a k)) +\n    (map denote x3a ! k) (x2a k * \\<rho>\\<^sub>2 * adjoint (x2a k))", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. (map denote x3a ! k)\n     (x2a k * (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) * adjoint (x2a k)) =\n    (map denote x3a ! k) (x2a k * \\<rho>\\<^sub>1 * adjoint (x2a k)) +\n    (map denote x3a ! k) (x2a k * \\<rho>\\<^sub>2 * adjoint (x2a k))", "have \"(map denote x3a ! k) (x2a k * (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) * adjoint (x2a k)) = denote (x3a ! k) (x2a k * (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) * adjoint (x2a k))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (map denote x3a ! k)\n     (x2a k * (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) * adjoint (x2a k)) =\n    denote (x3a ! k)\n     (x2a k * (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) * adjoint (x2a k))", "using Measure.prems(1) k"], ["proof (prove)\nusing this:\n  well_com (Measure x1 x2a x3a)\n  k < x1\n\ngoal (1 subgoal):\n 1. (map denote x3a ! k)\n     (x2a k * (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) * adjoint (x2a k)) =\n    denote (x3a ! k)\n     (x2a k * (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) * adjoint (x2a k))", "by auto"], ["proof (state)\nthis:\n  (map denote x3a ! k)\n   (x2a k * (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) * adjoint (x2a k)) =\n  denote (x3a ! k)\n   (x2a k * (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) * adjoint (x2a k))\n\ngoal (1 subgoal):\n 1. (map denote x3a ! k)\n     (x2a k * (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) * adjoint (x2a k)) =\n    (map denote x3a ! k) (x2a k * \\<rho>\\<^sub>1 * adjoint (x2a k)) +\n    (map denote x3a ! k) (x2a k * \\<rho>\\<^sub>2 * adjoint (x2a k))", "then"], ["proof (chain)\npicking this:\n  (map denote x3a ! k)\n   (x2a k * (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) * adjoint (x2a k)) =\n  denote (x3a ! k)\n   (x2a k * (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) * adjoint (x2a k))", "have mapx: \"(map denote x3a ! k) (x2a k * (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) * adjoint (x2a k)) =  denote (x3a ! k) ((x2a k * \\<rho>\\<^sub>1 * adjoint (x2a k)) + (x2a k * \\<rho>\\<^sub>2 * adjoint (x2a k)))\""], ["proof (prove)\nusing this:\n  (map denote x3a ! k)\n   (x2a k * (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) * adjoint (x2a k)) =\n  denote (x3a ! k)\n   (x2a k * (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) * adjoint (x2a k))\n\ngoal (1 subgoal):\n 1. (map denote x3a ! k)\n     (x2a k * (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) * adjoint (x2a k)) =\n    denote (x3a ! k)\n     (x2a k * \\<rho>\\<^sub>1 * adjoint (x2a k) +\n      x2a k * \\<rho>\\<^sub>2 * adjoint (x2a k))", "using dist k"], ["proof (prove)\nusing this:\n  (map denote x3a ! k)\n   (x2a k * (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) * adjoint (x2a k)) =\n  denote (x3a ! k)\n   (x2a k * (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) * adjoint (x2a k))\n  ?k < x1 \\<Longrightarrow>\n  x2a ?k * (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) * adjoint (x2a ?k) =\n  x2a ?k * \\<rho>\\<^sub>1 * adjoint (x2a ?k) +\n  x2a ?k * \\<rho>\\<^sub>2 * adjoint (x2a ?k)\n  k < x1\n\ngoal (1 subgoal):\n 1. (map denote x3a ! k)\n     (x2a k * (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) * adjoint (x2a k)) =\n    denote (x3a ! k)\n     (x2a k * \\<rho>\\<^sub>1 * adjoint (x2a k) +\n      x2a k * \\<rho>\\<^sub>2 * adjoint (x2a k))", "by auto"], ["proof (state)\nthis:\n  (map denote x3a ! k)\n   (x2a k * (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) * adjoint (x2a k)) =\n  denote (x3a ! k)\n   (x2a k * \\<rho>\\<^sub>1 * adjoint (x2a k) +\n    x2a k * \\<rho>\\<^sub>2 * adjoint (x2a k))\n\ngoal (1 subgoal):\n 1. (map denote x3a ! k)\n     (x2a k * (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) * adjoint (x2a k)) =\n    (map denote x3a ! k) (x2a k * \\<rho>\\<^sub>1 * adjoint (x2a k)) +\n    (map denote x3a ! k) (x2a k * \\<rho>\\<^sub>2 * adjoint (x2a k))", "have \"denote (x3a ! k) ((x2a k * \\<rho>\\<^sub>1 * adjoint (x2a k)) + (x2a k * \\<rho>\\<^sub>2 * adjoint (x2a k))) \n           = denote (x3a ! k) (x2a k * \\<rho>\\<^sub>1 * adjoint (x2a k)) + denote (x3a ! k) (x2a k * \\<rho>\\<^sub>2  * adjoint (x2a k))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. denote (x3a ! k)\n     (x2a k * \\<rho>\\<^sub>1 * adjoint (x2a k) +\n      x2a k * \\<rho>\\<^sub>2 * adjoint (x2a k)) =\n    denote (x3a ! k) (x2a k * \\<rho>\\<^sub>1 * adjoint (x2a k)) +\n    denote (x3a ! k) (x2a k * \\<rho>\\<^sub>2 * adjoint (x2a k))", "using Measure(1,2) dim1 dim2 pdo12 trless k"], ["proof (prove)\nusing this:\n  \\<lbrakk>?x3a \\<in> set x3a; well_com ?x3a;\n   ?\\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n   ?\\<rho>\\<^sub>2 \\<in> carrier_mat d d;\n   partial_density_operator ?\\<rho>\\<^sub>1;\n   partial_density_operator ?\\<rho>\\<^sub>2;\n   trace (?\\<rho>\\<^sub>1 + ?\\<rho>\\<^sub>2) \\<le> 1\\<rbrakk>\n  \\<Longrightarrow> denote ?x3a (?\\<rho>\\<^sub>1 + ?\\<rho>\\<^sub>2) =\n                    denote ?x3a ?\\<rho>\\<^sub>1 +\n                    denote ?x3a ?\\<rho>\\<^sub>2\n  well_com (Measure x1 x2a x3a)\n  ?k < x1 \\<Longrightarrow>\n  x2a ?k * \\<rho>\\<^sub>1 * adjoint (x2a ?k) \\<in> carrier_mat d d\n  ?k < x1 \\<Longrightarrow>\n  x2a ?k * \\<rho>\\<^sub>2 * adjoint (x2a ?k) \\<in> carrier_mat d d\n  ?k < x1 \\<Longrightarrow>\n  partial_density_operator\n   (x2a ?k * \\<rho>\\<^sub>1 * adjoint (x2a ?k)) \\<and>\n  partial_density_operator (x2a ?k * \\<rho>\\<^sub>2 * adjoint (x2a ?k))\n  ?k < x1 \\<Longrightarrow>\n  trace\n   (x2a ?k * \\<rho>\\<^sub>1 * adjoint (x2a ?k) +\n    x2a ?k * \\<rho>\\<^sub>2 * adjoint (x2a ?k))\n  \\<le> 1\n  k < x1\n\ngoal (1 subgoal):\n 1. denote (x3a ! k)\n     (x2a k * \\<rho>\\<^sub>1 * adjoint (x2a k) +\n      x2a k * \\<rho>\\<^sub>2 * adjoint (x2a k)) =\n    denote (x3a ! k) (x2a k * \\<rho>\\<^sub>1 * adjoint (x2a k)) +\n    denote (x3a ! k) (x2a k * \\<rho>\\<^sub>2 * adjoint (x2a k))", "by (simp add: list_all_length)"], ["proof (state)\nthis:\n  denote (x3a ! k)\n   (x2a k * \\<rho>\\<^sub>1 * adjoint (x2a k) +\n    x2a k * \\<rho>\\<^sub>2 * adjoint (x2a k)) =\n  denote (x3a ! k) (x2a k * \\<rho>\\<^sub>1 * adjoint (x2a k)) +\n  denote (x3a ! k) (x2a k * \\<rho>\\<^sub>2 * adjoint (x2a k))\n\ngoal (1 subgoal):\n 1. (map denote x3a ! k)\n     (x2a k * (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) * adjoint (x2a k)) =\n    (map denote x3a ! k) (x2a k * \\<rho>\\<^sub>1 * adjoint (x2a k)) +\n    (map denote x3a ! k) (x2a k * \\<rho>\\<^sub>2 * adjoint (x2a k))", "then"], ["proof (chain)\npicking this:\n  denote (x3a ! k)\n   (x2a k * \\<rho>\\<^sub>1 * adjoint (x2a k) +\n    x2a k * \\<rho>\\<^sub>2 * adjoint (x2a k)) =\n  denote (x3a ! k) (x2a k * \\<rho>\\<^sub>1 * adjoint (x2a k)) +\n  denote (x3a ! k) (x2a k * \\<rho>\\<^sub>2 * adjoint (x2a k))", "show ?thesis"], ["proof (prove)\nusing this:\n  denote (x3a ! k)\n   (x2a k * \\<rho>\\<^sub>1 * adjoint (x2a k) +\n    x2a k * \\<rho>\\<^sub>2 * adjoint (x2a k)) =\n  denote (x3a ! k) (x2a k * \\<rho>\\<^sub>1 * adjoint (x2a k)) +\n  denote (x3a ! k) (x2a k * \\<rho>\\<^sub>2 * adjoint (x2a k))\n\ngoal (1 subgoal):\n 1. (map denote x3a ! k)\n     (x2a k * (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) * adjoint (x2a k)) =\n    (map denote x3a ! k) (x2a k * \\<rho>\\<^sub>1 * adjoint (x2a k)) +\n    (map denote x3a ! k) (x2a k * \\<rho>\\<^sub>2 * adjoint (x2a k))", "using Measure.prems(1) mapx k"], ["proof (prove)\nusing this:\n  denote (x3a ! k)\n   (x2a k * \\<rho>\\<^sub>1 * adjoint (x2a k) +\n    x2a k * \\<rho>\\<^sub>2 * adjoint (x2a k)) =\n  denote (x3a ! k) (x2a k * \\<rho>\\<^sub>1 * adjoint (x2a k)) +\n  denote (x3a ! k) (x2a k * \\<rho>\\<^sub>2 * adjoint (x2a k))\n  well_com (Measure x1 x2a x3a)\n  (map denote x3a ! k)\n   (x2a k * (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) * adjoint (x2a k)) =\n  denote (x3a ! k)\n   (x2a k * \\<rho>\\<^sub>1 * adjoint (x2a k) +\n    x2a k * \\<rho>\\<^sub>2 * adjoint (x2a k))\n  k < x1\n\ngoal (1 subgoal):\n 1. (map denote x3a ! k)\n     (x2a k * (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) * adjoint (x2a k)) =\n    (map denote x3a ! k) (x2a k * \\<rho>\\<^sub>1 * adjoint (x2a k)) +\n    (map denote x3a ! k) (x2a k * \\<rho>\\<^sub>2 * adjoint (x2a k))", "by auto"], ["proof (state)\nthis:\n  (map denote x3a ! k)\n   (x2a k * (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) * adjoint (x2a k)) =\n  (map denote x3a ! k) (x2a k * \\<rho>\\<^sub>1 * adjoint (x2a k)) +\n  (map denote x3a ! k) (x2a k * \\<rho>\\<^sub>2 * adjoint (x2a k))\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  ?k < x1 \\<Longrightarrow>\n  (map denote x3a ! ?k)\n   (x2a ?k * (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) * adjoint (x2a ?k)) =\n  (map denote x3a ! ?k) (x2a ?k * \\<rho>\\<^sub>1 * adjoint (x2a ?k)) +\n  (map denote x3a ! ?k) (x2a ?k * \\<rho>\\<^sub>2 * adjoint (x2a ?k))\n\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<And>x3aa \\<rho>\\<^sub>1 \\<rho>\\<^sub>2.\n                \\<lbrakk>x3aa \\<in> set x3a; well_com x3aa;\n                 \\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n                 \\<rho>\\<^sub>2 \\<in> carrier_mat d d;\n                 partial_density_operator \\<rho>\\<^sub>1;\n                 partial_density_operator \\<rho>\\<^sub>2;\n                 trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) \\<le> 1\\<rbrakk>\n                \\<Longrightarrow> denote x3aa\n                                   (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) =\n                                  denote x3aa \\<rho>\\<^sub>1 +\n                                  denote x3aa \\<rho>\\<^sub>2;\n     well_com (Measure x1 x2a x3a); \\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n     \\<rho>\\<^sub>2 \\<in> carrier_mat d d;\n     partial_density_operator \\<rho>\\<^sub>1;\n     partial_density_operator \\<rho>\\<^sub>2;\n     trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) \\<le> 1\\<rbrakk>\n    \\<Longrightarrow> denote (Measure x1 x2a x3a)\n                       (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) =\n                      denote (Measure x1 x2a x3a) \\<rho>\\<^sub>1 +\n                      denote (Measure x1 x2a x3a) \\<rho>\\<^sub>2", "then"], ["proof (chain)\npicking this:\n  ?k < x1 \\<Longrightarrow>\n  (map denote x3a ! ?k)\n   (x2a ?k * (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) * adjoint (x2a ?k)) =\n  (map denote x3a ! ?k) (x2a ?k * \\<rho>\\<^sub>1 * adjoint (x2a ?k)) +\n  (map denote x3a ! ?k) (x2a ?k * \\<rho>\\<^sub>2 * adjoint (x2a ?k))", "have mapd12:\"(\\<And>k. k < x1 \\<Longrightarrow> (map denote x3a ! k) (x2a k * (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) * adjoint (x2a k)) \\<in> carrier_mat d d)\""], ["proof (prove)\nusing this:\n  ?k < x1 \\<Longrightarrow>\n  (map denote x3a ! ?k)\n   (x2a ?k * (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) * adjoint (x2a ?k)) =\n  (map denote x3a ! ?k) (x2a ?k * \\<rho>\\<^sub>1 * adjoint (x2a ?k)) +\n  (map denote x3a ! ?k) (x2a ?k * \\<rho>\\<^sub>2 * adjoint (x2a ?k))\n\ngoal (1 subgoal):\n 1. \\<And>k.\n       k < x1 \\<Longrightarrow>\n       (map denote x3a ! k)\n        (x2a k * (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) * adjoint (x2a k))\n       \\<in> carrier_mat d d", "using mapd1 mapd2"], ["proof (prove)\nusing this:\n  ?k < x1 \\<Longrightarrow>\n  (map denote x3a ! ?k)\n   (x2a ?k * (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) * adjoint (x2a ?k)) =\n  (map denote x3a ! ?k) (x2a ?k * \\<rho>\\<^sub>1 * adjoint (x2a ?k)) +\n  (map denote x3a ! ?k) (x2a ?k * \\<rho>\\<^sub>2 * adjoint (x2a ?k))\n  ?k < x1 \\<Longrightarrow>\n  (map denote x3a ! ?k) (x2a ?k * \\<rho>\\<^sub>1 * adjoint (x2a ?k))\n  \\<in> carrier_mat d d\n  ?k < x1 \\<Longrightarrow>\n  (map denote x3a ! ?k) (x2a ?k * \\<rho>\\<^sub>2 * adjoint (x2a ?k))\n  \\<in> carrier_mat d d\n\ngoal (1 subgoal):\n 1. \\<And>k.\n       k < x1 \\<Longrightarrow>\n       (map denote x3a ! k)\n        (x2a k * (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) * adjoint (x2a k))\n       \\<in> carrier_mat d d", "by auto"], ["proof (state)\nthis:\n  ?k < x1 \\<Longrightarrow>\n  (map denote x3a ! ?k)\n   (x2a ?k * (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) * adjoint (x2a ?k))\n  \\<in> carrier_mat d d\n\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<And>x3aa \\<rho>\\<^sub>1 \\<rho>\\<^sub>2.\n                \\<lbrakk>x3aa \\<in> set x3a; well_com x3aa;\n                 \\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n                 \\<rho>\\<^sub>2 \\<in> carrier_mat d d;\n                 partial_density_operator \\<rho>\\<^sub>1;\n                 partial_density_operator \\<rho>\\<^sub>2;\n                 trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) \\<le> 1\\<rbrakk>\n                \\<Longrightarrow> denote x3aa\n                                   (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) =\n                                  denote x3aa \\<rho>\\<^sub>1 +\n                                  denote x3aa \\<rho>\\<^sub>2;\n     well_com (Measure x1 x2a x3a); \\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n     \\<rho>\\<^sub>2 \\<in> carrier_mat d d;\n     partial_density_operator \\<rho>\\<^sub>1;\n     partial_density_operator \\<rho>\\<^sub>2;\n     trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) \\<le> 1\\<rbrakk>\n    \\<Longrightarrow> denote (Measure x1 x2a x3a)\n                       (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) =\n                      denote (Measure x1 x2a x3a) \\<rho>\\<^sub>1 +\n                      denote (Measure x1 x2a x3a) \\<rho>\\<^sub>2", "have \"matrix_sum d (\\<lambda>k. (map denote x3a ! k) (x2a k * (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) * adjoint (x2a k))) x1 =\n          matrix_sum d (\\<lambda>k. (map denote x3a ! k) (x2a k * \\<rho>\\<^sub>1 * adjoint (x2a k))) x1 + \n          matrix_sum d (\\<lambda>k. (map denote x3a ! k) (x2a k * \\<rho>\\<^sub>2 * adjoint (x2a k))) x1\""], ["proof (prove)\ngoal (1 subgoal):\n 1. matrix_sum d\n     (\\<lambda>k.\n         (map denote x3a ! k)\n          (x2a k * (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) * adjoint (x2a k)))\n     x1 =\n    matrix_sum d\n     (\\<lambda>k.\n         (map denote x3a ! k) (x2a k * \\<rho>\\<^sub>1 * adjoint (x2a k)))\n     x1 +\n    matrix_sum d\n     (\\<lambda>k.\n         (map denote x3a ! k) (x2a k * \\<rho>\\<^sub>2 * adjoint (x2a k)))\n     x1", "using matrix_sum_add[of x1 \"(\\<lambda>k. (map denote x3a ! k) (x2a k * (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) * adjoint (x2a k)))\" d \"(\\<lambda>k. (map denote x3a ! k) (x2a k * \\<rho>\\<^sub>1 * adjoint (x2a k)))\" \"(\\<lambda>k. (map denote x3a ! k) (x2a k * \\<rho>\\<^sub>2 * adjoint (x2a k)))\"]"], ["proof (prove)\nusing this:\n  \\<lbrakk>\\<And>k.\n              k < x1 \\<Longrightarrow>\n              (map denote x3a ! k)\n               (x2a k * (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) * adjoint (x2a k))\n              \\<in> carrier_mat d d;\n   \\<And>k.\n      k < x1 \\<Longrightarrow>\n      (map denote x3a ! k) (x2a k * \\<rho>\\<^sub>1 * adjoint (x2a k))\n      \\<in> carrier_mat d d;\n   \\<And>k.\n      k < x1 \\<Longrightarrow>\n      (map denote x3a ! k) (x2a k * \\<rho>\\<^sub>2 * adjoint (x2a k))\n      \\<in> carrier_mat d d;\n   \\<And>k.\n      k < x1 \\<Longrightarrow>\n      (map denote x3a ! k)\n       (x2a k * (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) * adjoint (x2a k)) =\n      (map denote x3a ! k) (x2a k * \\<rho>\\<^sub>1 * adjoint (x2a k)) +\n      (map denote x3a ! k)\n       (x2a k * \\<rho>\\<^sub>2 * adjoint (x2a k))\\<rbrakk>\n  \\<Longrightarrow> matrix_sum d\n                     (\\<lambda>k.\n                         (map denote x3a ! k)\n                          (x2a k * (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) *\n                           adjoint (x2a k)))\n                     x1 =\n                    matrix_sum d\n                     (\\<lambda>k.\n                         (map denote x3a ! k)\n                          (x2a k * \\<rho>\\<^sub>1 * adjoint (x2a k)))\n                     x1 +\n                    matrix_sum d\n                     (\\<lambda>k.\n                         (map denote x3a ! k)\n                          (x2a k * \\<rho>\\<^sub>2 * adjoint (x2a k)))\n                     x1\n\ngoal (1 subgoal):\n 1. matrix_sum d\n     (\\<lambda>k.\n         (map denote x3a ! k)\n          (x2a k * (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) * adjoint (x2a k)))\n     x1 =\n    matrix_sum d\n     (\\<lambda>k.\n         (map denote x3a ! k) (x2a k * \\<rho>\\<^sub>1 * adjoint (x2a k)))\n     x1 +\n    matrix_sum d\n     (\\<lambda>k.\n         (map denote x3a ! k) (x2a k * \\<rho>\\<^sub>2 * adjoint (x2a k)))\n     x1", "using mapd12 mapd1 mapd2 mapadd"], ["proof (prove)\nusing this:\n  \\<lbrakk>\\<And>k.\n              k < x1 \\<Longrightarrow>\n              (map denote x3a ! k)\n               (x2a k * (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) * adjoint (x2a k))\n              \\<in> carrier_mat d d;\n   \\<And>k.\n      k < x1 \\<Longrightarrow>\n      (map denote x3a ! k) (x2a k * \\<rho>\\<^sub>1 * adjoint (x2a k))\n      \\<in> carrier_mat d d;\n   \\<And>k.\n      k < x1 \\<Longrightarrow>\n      (map denote x3a ! k) (x2a k * \\<rho>\\<^sub>2 * adjoint (x2a k))\n      \\<in> carrier_mat d d;\n   \\<And>k.\n      k < x1 \\<Longrightarrow>\n      (map denote x3a ! k)\n       (x2a k * (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) * adjoint (x2a k)) =\n      (map denote x3a ! k) (x2a k * \\<rho>\\<^sub>1 * adjoint (x2a k)) +\n      (map denote x3a ! k)\n       (x2a k * \\<rho>\\<^sub>2 * adjoint (x2a k))\\<rbrakk>\n  \\<Longrightarrow> matrix_sum d\n                     (\\<lambda>k.\n                         (map denote x3a ! k)\n                          (x2a k * (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) *\n                           adjoint (x2a k)))\n                     x1 =\n                    matrix_sum d\n                     (\\<lambda>k.\n                         (map denote x3a ! k)\n                          (x2a k * \\<rho>\\<^sub>1 * adjoint (x2a k)))\n                     x1 +\n                    matrix_sum d\n                     (\\<lambda>k.\n                         (map denote x3a ! k)\n                          (x2a k * \\<rho>\\<^sub>2 * adjoint (x2a k)))\n                     x1\n  ?k < x1 \\<Longrightarrow>\n  (map denote x3a ! ?k)\n   (x2a ?k * (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) * adjoint (x2a ?k))\n  \\<in> carrier_mat d d\n  ?k < x1 \\<Longrightarrow>\n  (map denote x3a ! ?k) (x2a ?k * \\<rho>\\<^sub>1 * adjoint (x2a ?k))\n  \\<in> carrier_mat d d\n  ?k < x1 \\<Longrightarrow>\n  (map denote x3a ! ?k) (x2a ?k * \\<rho>\\<^sub>2 * adjoint (x2a ?k))\n  \\<in> carrier_mat d d\n  ?k < x1 \\<Longrightarrow>\n  (map denote x3a ! ?k)\n   (x2a ?k * (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) * adjoint (x2a ?k)) =\n  (map denote x3a ! ?k) (x2a ?k * \\<rho>\\<^sub>1 * adjoint (x2a ?k)) +\n  (map denote x3a ! ?k) (x2a ?k * \\<rho>\\<^sub>2 * adjoint (x2a ?k))\n\ngoal (1 subgoal):\n 1. matrix_sum d\n     (\\<lambda>k.\n         (map denote x3a ! k)\n          (x2a k * (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) * adjoint (x2a k)))\n     x1 =\n    matrix_sum d\n     (\\<lambda>k.\n         (map denote x3a ! k) (x2a k * \\<rho>\\<^sub>1 * adjoint (x2a k)))\n     x1 +\n    matrix_sum d\n     (\\<lambda>k.\n         (map denote x3a ! k) (x2a k * \\<rho>\\<^sub>2 * adjoint (x2a k)))\n     x1", "by auto"], ["proof (state)\nthis:\n  matrix_sum d\n   (\\<lambda>k.\n       (map denote x3a ! k)\n        (x2a k * (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) * adjoint (x2a k)))\n   x1 =\n  matrix_sum d\n   (\\<lambda>k.\n       (map denote x3a ! k) (x2a k * \\<rho>\\<^sub>1 * adjoint (x2a k)))\n   x1 +\n  matrix_sum d\n   (\\<lambda>k.\n       (map denote x3a ! k) (x2a k * \\<rho>\\<^sub>2 * adjoint (x2a k)))\n   x1\n\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<And>x3aa \\<rho>\\<^sub>1 \\<rho>\\<^sub>2.\n                \\<lbrakk>x3aa \\<in> set x3a; well_com x3aa;\n                 \\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n                 \\<rho>\\<^sub>2 \\<in> carrier_mat d d;\n                 partial_density_operator \\<rho>\\<^sub>1;\n                 partial_density_operator \\<rho>\\<^sub>2;\n                 trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) \\<le> 1\\<rbrakk>\n                \\<Longrightarrow> denote x3aa\n                                   (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) =\n                                  denote x3aa \\<rho>\\<^sub>1 +\n                                  denote x3aa \\<rho>\\<^sub>2;\n     well_com (Measure x1 x2a x3a); \\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n     \\<rho>\\<^sub>2 \\<in> carrier_mat d d;\n     partial_density_operator \\<rho>\\<^sub>1;\n     partial_density_operator \\<rho>\\<^sub>2;\n     trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) \\<le> 1\\<rbrakk>\n    \\<Longrightarrow> denote (Measure x1 x2a x3a)\n                       (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) =\n                      denote (Measure x1 x2a x3a) \\<rho>\\<^sub>1 +\n                      denote (Measure x1 x2a x3a) \\<rho>\\<^sub>2", "then"], ["proof (chain)\npicking this:\n  matrix_sum d\n   (\\<lambda>k.\n       (map denote x3a ! k)\n        (x2a k * (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) * adjoint (x2a k)))\n   x1 =\n  matrix_sum d\n   (\\<lambda>k.\n       (map denote x3a ! k) (x2a k * \\<rho>\\<^sub>1 * adjoint (x2a k)))\n   x1 +\n  matrix_sum d\n   (\\<lambda>k.\n       (map denote x3a ! k) (x2a k * \\<rho>\\<^sub>2 * adjoint (x2a k)))\n   x1", "show ?thesis"], ["proof (prove)\nusing this:\n  matrix_sum d\n   (\\<lambda>k.\n       (map denote x3a ! k)\n        (x2a k * (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) * adjoint (x2a k)))\n   x1 =\n  matrix_sum d\n   (\\<lambda>k.\n       (map denote x3a ! k) (x2a k * \\<rho>\\<^sub>1 * adjoint (x2a k)))\n   x1 +\n  matrix_sum d\n   (\\<lambda>k.\n       (map denote x3a ! k) (x2a k * \\<rho>\\<^sub>2 * adjoint (x2a k)))\n   x1\n\ngoal (1 subgoal):\n 1. denote (Measure x1 x2a x3a) (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) =\n    denote (Measure x1 x2a x3a) \\<rho>\\<^sub>1 +\n    denote (Measure x1 x2a x3a) \\<rho>\\<^sub>2", "using denote.simps(4)"], ["proof (prove)\nusing this:\n  matrix_sum d\n   (\\<lambda>k.\n       (map denote x3a ! k)\n        (x2a k * (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) * adjoint (x2a k)))\n   x1 =\n  matrix_sum d\n   (\\<lambda>k.\n       (map denote x3a ! k) (x2a k * \\<rho>\\<^sub>1 * adjoint (x2a k)))\n   x1 +\n  matrix_sum d\n   (\\<lambda>k.\n       (map denote x3a ! k) (x2a k * \\<rho>\\<^sub>2 * adjoint (x2a k)))\n   x1\n  denote (Measure ?n ?M ?S) ?\\<rho> =\n  denote_measure ?n ?M (map denote ?S) ?\\<rho>\n\ngoal (1 subgoal):\n 1. denote (Measure x1 x2a x3a) (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) =\n    denote (Measure x1 x2a x3a) \\<rho>\\<^sub>1 +\n    denote (Measure x1 x2a x3a) \\<rho>\\<^sub>2", "unfolding denote_measure_def"], ["proof (prove)\nusing this:\n  matrix_sum d\n   (\\<lambda>k.\n       (map denote x3a ! k)\n        (x2a k * (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) * adjoint (x2a k)))\n   x1 =\n  matrix_sum d\n   (\\<lambda>k.\n       (map denote x3a ! k) (x2a k * \\<rho>\\<^sub>1 * adjoint (x2a k)))\n   x1 +\n  matrix_sum d\n   (\\<lambda>k.\n       (map denote x3a ! k) (x2a k * \\<rho>\\<^sub>2 * adjoint (x2a k)))\n   x1\n  denote (Measure ?n ?M ?S) ?\\<rho> =\n  matrix_sum d\n   (\\<lambda>k. (map denote ?S ! k) (?M k * ?\\<rho> * adjoint (?M k))) ?n\n\ngoal (1 subgoal):\n 1. denote (Measure x1 x2a x3a) (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) =\n    denote (Measure x1 x2a x3a) \\<rho>\\<^sub>1 +\n    denote (Measure x1 x2a x3a) \\<rho>\\<^sub>2", "by auto"], ["proof (state)\nthis:\n  denote (Measure x1 x2a x3a) (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) =\n  denote (Measure x1 x2a x3a) \\<rho>\\<^sub>1 +\n  denote (Measure x1 x2a x3a) \\<rho>\\<^sub>2\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  denote (Measure x1 x2a x3a) (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) =\n  denote (Measure x1 x2a x3a) \\<rho>\\<^sub>1 +\n  denote (Measure x1 x2a x3a) \\<rho>\\<^sub>2\n\ngoal (1 subgoal):\n 1. \\<And>x1 x2a \\<rho>\\<^sub>1 \\<rho>\\<^sub>2.\n       \\<lbrakk>\\<And>\\<rho>\\<^sub>1 \\<rho>\\<^sub>2.\n                   \\<lbrakk>well_com x2a;\n                    \\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n                    \\<rho>\\<^sub>2 \\<in> carrier_mat d d;\n                    partial_density_operator \\<rho>\\<^sub>1;\n                    partial_density_operator \\<rho>\\<^sub>2;\n                    trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) \\<le> 1\\<rbrakk>\n                   \\<Longrightarrow> denote x2a\n(\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) =\n                                     denote x2a \\<rho>\\<^sub>1 +\n                                     denote x2a \\<rho>\\<^sub>2;\n        well_com (While x1 x2a); \\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n        \\<rho>\\<^sub>2 \\<in> carrier_mat d d;\n        partial_density_operator \\<rho>\\<^sub>1;\n        partial_density_operator \\<rho>\\<^sub>2;\n        trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) \\<le> 1\\<rbrakk>\n       \\<Longrightarrow> denote (While x1 x2a)\n                          (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) =\n                         denote (While x1 x2a) \\<rho>\\<^sub>1 +\n                         denote (While x1 x2a) \\<rho>\\<^sub>2", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x1 x2a \\<rho>\\<^sub>1 \\<rho>\\<^sub>2.\n       \\<lbrakk>\\<And>\\<rho>\\<^sub>1 \\<rho>\\<^sub>2.\n                   \\<lbrakk>well_com x2a;\n                    \\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n                    \\<rho>\\<^sub>2 \\<in> carrier_mat d d;\n                    partial_density_operator \\<rho>\\<^sub>1;\n                    partial_density_operator \\<rho>\\<^sub>2;\n                    trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) \\<le> 1\\<rbrakk>\n                   \\<Longrightarrow> denote x2a\n(\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) =\n                                     denote x2a \\<rho>\\<^sub>1 +\n                                     denote x2a \\<rho>\\<^sub>2;\n        well_com (While x1 x2a); \\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n        \\<rho>\\<^sub>2 \\<in> carrier_mat d d;\n        partial_density_operator \\<rho>\\<^sub>1;\n        partial_density_operator \\<rho>\\<^sub>2;\n        trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) \\<le> 1\\<rbrakk>\n       \\<Longrightarrow> denote (While x1 x2a)\n                          (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) =\n                         denote (While x1 x2a) \\<rho>\\<^sub>1 +\n                         denote (While x1 x2a) \\<rho>\\<^sub>2", "case (While x1 x2)"], ["proof (state)\nthis:\n  \\<lbrakk>well_com x2; ?\\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n   ?\\<rho>\\<^sub>2 \\<in> carrier_mat d d;\n   partial_density_operator ?\\<rho>\\<^sub>1;\n   partial_density_operator ?\\<rho>\\<^sub>2;\n   trace (?\\<rho>\\<^sub>1 + ?\\<rho>\\<^sub>2) \\<le> 1\\<rbrakk>\n  \\<Longrightarrow> denote x2 (?\\<rho>\\<^sub>1 + ?\\<rho>\\<^sub>2) =\n                    denote x2 ?\\<rho>\\<^sub>1 + denote x2 ?\\<rho>\\<^sub>2\n  well_com (While x1 x2)\n  \\<rho>\\<^sub>1 \\<in> carrier_mat d d\n  \\<rho>\\<^sub>2 \\<in> carrier_mat d d\n  partial_density_operator \\<rho>\\<^sub>1\n  partial_density_operator \\<rho>\\<^sub>2\n  trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) \\<le> 1\n\ngoal (1 subgoal):\n 1. \\<And>x1 x2a \\<rho>\\<^sub>1 \\<rho>\\<^sub>2.\n       \\<lbrakk>\\<And>\\<rho>\\<^sub>1 \\<rho>\\<^sub>2.\n                   \\<lbrakk>well_com x2a;\n                    \\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n                    \\<rho>\\<^sub>2 \\<in> carrier_mat d d;\n                    partial_density_operator \\<rho>\\<^sub>1;\n                    partial_density_operator \\<rho>\\<^sub>2;\n                    trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) \\<le> 1\\<rbrakk>\n                   \\<Longrightarrow> denote x2a\n(\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) =\n                                     denote x2a \\<rho>\\<^sub>1 +\n                                     denote x2a \\<rho>\\<^sub>2;\n        well_com (While x1 x2a); \\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n        \\<rho>\\<^sub>2 \\<in> carrier_mat d d;\n        partial_density_operator \\<rho>\\<^sub>1;\n        partial_density_operator \\<rho>\\<^sub>2;\n        trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) \\<le> 1\\<rbrakk>\n       \\<Longrightarrow> denote (While x1 x2a)\n                          (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) =\n                         denote (While x1 x2a) \\<rho>\\<^sub>1 +\n                         denote (While x1 x2a) \\<rho>\\<^sub>2", "then"], ["proof (chain)\npicking this:\n  \\<lbrakk>well_com x2; ?\\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n   ?\\<rho>\\<^sub>2 \\<in> carrier_mat d d;\n   partial_density_operator ?\\<rho>\\<^sub>1;\n   partial_density_operator ?\\<rho>\\<^sub>2;\n   trace (?\\<rho>\\<^sub>1 + ?\\<rho>\\<^sub>2) \\<le> 1\\<rbrakk>\n  \\<Longrightarrow> denote x2 (?\\<rho>\\<^sub>1 + ?\\<rho>\\<^sub>2) =\n                    denote x2 ?\\<rho>\\<^sub>1 + denote x2 ?\\<rho>\\<^sub>2\n  well_com (While x1 x2)\n  \\<rho>\\<^sub>1 \\<in> carrier_mat d d\n  \\<rho>\\<^sub>2 \\<in> carrier_mat d d\n  partial_density_operator \\<rho>\\<^sub>1\n  partial_density_operator \\<rho>\\<^sub>2\n  trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) \\<le> 1", "show ?case"], ["proof (prove)\nusing this:\n  \\<lbrakk>well_com x2; ?\\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n   ?\\<rho>\\<^sub>2 \\<in> carrier_mat d d;\n   partial_density_operator ?\\<rho>\\<^sub>1;\n   partial_density_operator ?\\<rho>\\<^sub>2;\n   trace (?\\<rho>\\<^sub>1 + ?\\<rho>\\<^sub>2) \\<le> 1\\<rbrakk>\n  \\<Longrightarrow> denote x2 (?\\<rho>\\<^sub>1 + ?\\<rho>\\<^sub>2) =\n                    denote x2 ?\\<rho>\\<^sub>1 + denote x2 ?\\<rho>\\<^sub>2\n  well_com (While x1 x2)\n  \\<rho>\\<^sub>1 \\<in> carrier_mat d d\n  \\<rho>\\<^sub>2 \\<in> carrier_mat d d\n  partial_density_operator \\<rho>\\<^sub>1\n  partial_density_operator \\<rho>\\<^sub>2\n  trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) \\<le> 1\n\ngoal (1 subgoal):\n 1. denote (While x1 x2) (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) =\n    denote (While x1 x2) \\<rho>\\<^sub>1 +\n    denote (While x1 x2) \\<rho>\\<^sub>2", "apply auto"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<And>\\<rho>\\<^sub>1 \\<rho>\\<^sub>2.\n                \\<lbrakk>\\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n                 \\<rho>\\<^sub>2 \\<in> carrier_mat d d;\n                 partial_density_operator \\<rho>\\<^sub>1;\n                 partial_density_operator \\<rho>\\<^sub>2;\n                 Im (trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2)) = 0 \\<and>\n                 Re (trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2))\n                 \\<le> 1\\<rbrakk>\n                \\<Longrightarrow> denote x2\n                                   (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) =\n                                  denote x2 \\<rho>\\<^sub>1 +\n                                  denote x2 \\<rho>\\<^sub>2;\n     \\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n     \\<rho>\\<^sub>2 \\<in> carrier_mat d d;\n     partial_density_operator \\<rho>\\<^sub>1;\n     partial_density_operator \\<rho>\\<^sub>2; measurement d 2 x1;\n     well_com x2; Im (trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2)) = 0;\n     Re (trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2)) \\<le> 1\\<rbrakk>\n    \\<Longrightarrow> denote_while (x1 0) (x1 (Suc 0)) (denote x2)\n                       (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) =\n                      denote_while (x1 0) (x1 (Suc 0)) (denote x2)\n                       \\<rho>\\<^sub>1 +\n                      denote_while (x1 0) (x1 (Suc 0)) (denote x2)\n                       \\<rho>\\<^sub>2", "using denote_while_add measurement_dim"], ["proof (prove)\nusing this:\n  \\<lbrakk>?\\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n   ?\\<rho>\\<^sub>2 \\<in> carrier_mat d d; ?x1.0 0 \\<in> carrier_mat d d;\n   ?x1.0 1 \\<in> carrier_mat d d; partial_density_operator ?\\<rho>\\<^sub>1;\n   partial_density_operator ?\\<rho>\\<^sub>2;\n   trace (?\\<rho>\\<^sub>1 + ?\\<rho>\\<^sub>2) \\<le> 1; well_com ?x2.0;\n   measurement d 2 ?x1.0;\n   \\<And>\\<rho>\\<^sub>1 \\<rho>\\<^sub>2.\n      \\<lbrakk>\\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n       \\<rho>\\<^sub>2 \\<in> carrier_mat d d;\n       partial_density_operator \\<rho>\\<^sub>1;\n       partial_density_operator \\<rho>\\<^sub>2;\n       trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) \\<le> 1\\<rbrakk>\n      \\<Longrightarrow> denote ?x2.0 (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) =\n                        denote ?x2.0 \\<rho>\\<^sub>1 +\n                        denote ?x2.0 \\<rho>\\<^sub>2\\<rbrakk>\n  \\<Longrightarrow> denote_while (?x1.0 0) (?x1.0 1) (denote ?x2.0)\n                     (?\\<rho>\\<^sub>1 + ?\\<rho>\\<^sub>2) =\n                    denote_while (?x1.0 0) (?x1.0 1) (denote ?x2.0)\n                     ?\\<rho>\\<^sub>1 +\n                    denote_while (?x1.0 0) (?x1.0 1) (denote ?x2.0)\n                     ?\\<rho>\\<^sub>2\n  \\<lbrakk>measurement ?d ?n ?M; ?k < ?n\\<rbrakk>\n  \\<Longrightarrow> ?M ?k \\<in> carrier_mat ?d ?d\n\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<And>\\<rho>\\<^sub>1 \\<rho>\\<^sub>2.\n                \\<lbrakk>\\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n                 \\<rho>\\<^sub>2 \\<in> carrier_mat d d;\n                 partial_density_operator \\<rho>\\<^sub>1;\n                 partial_density_operator \\<rho>\\<^sub>2;\n                 Im (trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2)) = 0 \\<and>\n                 Re (trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2))\n                 \\<le> 1\\<rbrakk>\n                \\<Longrightarrow> denote x2\n                                   (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) =\n                                  denote x2 \\<rho>\\<^sub>1 +\n                                  denote x2 \\<rho>\\<^sub>2;\n     \\<rho>\\<^sub>1 \\<in> carrier_mat d d;\n     \\<rho>\\<^sub>2 \\<in> carrier_mat d d;\n     partial_density_operator \\<rho>\\<^sub>1;\n     partial_density_operator \\<rho>\\<^sub>2; measurement d 2 x1;\n     well_com x2; Im (trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2)) = 0;\n     Re (trace (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2)) \\<le> 1\\<rbrakk>\n    \\<Longrightarrow> denote_while (x1 0) (x1 (Suc 0)) (denote x2)\n                       (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) =\n                      denote_while (x1 0) (x1 (Suc 0)) (denote x2)\n                       \\<rho>\\<^sub>1 +\n                      denote_while (x1 0) (x1 (Suc 0)) (denote x2)\n                       \\<rho>\\<^sub>2", "by auto"], ["proof (state)\nthis:\n  denote (While x1 x2) (\\<rho>\\<^sub>1 + \\<rho>\\<^sub>2) =\n  denote (While x1 x2) \\<rho>\\<^sub>1 + denote (While x1 x2) \\<rho>\\<^sub>2\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma mulfact:\n  fixes c:: real and a:: complex and b:: complex\n  assumes \"c\\<ge>0\" \"a \\<le> b\"\n  shows \"c * a \\<le> c * b\""], ["proof (prove)\ngoal (1 subgoal):\n 1. complex_of_real c * a \\<le> complex_of_real c * b", "using assms mult_le_cancel_iff2"], ["proof (prove)\nusing this:\n  0 \\<le> c\n  a \\<le> b\n  (0::?'a) < ?z \\<Longrightarrow> (?z * ?x \\<le> ?z * ?y) = (?x \\<le> ?y)\n\ngoal (1 subgoal):\n 1. complex_of_real c * a \\<le> complex_of_real c * b", "by force"], ["", "lemma denote_while_n_scale:\n  fixes c:: real\n  assumes \"c\\<ge>0\"\n    \"measurement d 2 x1\" \"well_com x2\"\n    \"(\\<And>\\<rho>. \\<rho> \\<in> carrier_mat d d \\<Longrightarrow> partial_density_operator \\<rho> \\<Longrightarrow> trace (c \\<cdot>\\<^sub>m \\<rho>) \\<le> 1 \\<Longrightarrow> \n      denote x2 (c \\<cdot>\\<^sub>m \\<rho>) =  c \\<cdot>\\<^sub>m denote x2 \\<rho>)\"\n  shows \"\\<rho> \\<in> carrier_mat d d \\<Longrightarrow> partial_density_operator \\<rho> \\<Longrightarrow> trace (c \\<cdot>\\<^sub>m \\<rho>) \\<le> 1 \\<Longrightarrow> \n    denote_while_n (x1 0) (x1 1) (denote x2) n (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) = c \\<cdot>\\<^sub>m (denote_while_n (x1 0) (x1 1) (denote x2) n \\<rho>)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<rho> \\<in> carrier_mat d d; partial_density_operator \\<rho>;\n     trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) \\<le> 1\\<rbrakk>\n    \\<Longrightarrow> denote_while_n (x1 0) (x1 1) (denote x2) n\n                       (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) =\n                      complex_of_real c \\<cdot>\\<^sub>m\n                      denote_while_n (x1 0) (x1 1) (denote x2) n \\<rho>", "proof (auto, induct n arbitrary: \\<rho>)"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>\\<rho>.\n       \\<lbrakk>\\<rho> \\<in> carrier_mat d d;\n        partial_density_operator \\<rho>;\n        Im (trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>)) = 0;\n        Re (trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>))\n        \\<le> 1\\<rbrakk>\n       \\<Longrightarrow> x1 0 *\n                         denote_while_n_iter (x1 0) (x1 (Suc 0)) (denote x2)\n                          0 (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) *\n                         adjoint (x1 0) =\n                         complex_of_real c \\<cdot>\\<^sub>m\n                         (x1 0 *\n                          denote_while_n_iter (x1 0) (x1 (Suc 0))\n                           (denote x2) 0 \\<rho> *\n                          adjoint (x1 0))\n 2. \\<And>n \\<rho>.\n       \\<lbrakk>\\<And>\\<rho>.\n                   \\<lbrakk>\\<rho> \\<in> carrier_mat d d;\n                    partial_density_operator \\<rho>;\n                    Im (trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>)) =\n                    0;\n                    Re (trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>))\n                    \\<le> 1\\<rbrakk>\n                   \\<Longrightarrow> x1 0 *\n                                     denote_while_n_iter (x1 0) (x1 (Suc 0))\n(denote x2) n (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) *\n                                     adjoint (x1 0) =\n                                     complex_of_real c \\<cdot>\\<^sub>m\n                                     (x1 0 *\ndenote_while_n_iter (x1 0) (x1 (Suc 0)) (denote x2) n \\<rho> *\nadjoint (x1 0));\n        \\<rho> \\<in> carrier_mat d d; partial_density_operator \\<rho>;\n        Im (trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>)) = 0;\n        Re (trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>))\n        \\<le> 1\\<rbrakk>\n       \\<Longrightarrow> x1 0 *\n                         denote_while_n_iter (x1 0) (x1 (Suc 0)) (denote x2)\n                          (Suc n)\n                          (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) *\n                         adjoint (x1 0) =\n                         complex_of_real c \\<cdot>\\<^sub>m\n                         (x1 0 *\n                          denote_while_n_iter (x1 0) (x1 (Suc 0))\n                           (denote x2) (Suc n) \\<rho> *\n                          adjoint (x1 0))", "case 0"], ["proof (state)\nthis:\n  \\<rho> \\<in> carrier_mat d d\n  partial_density_operator \\<rho>\n  Im (trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>)) = 0\n  Re (trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>)) \\<le> 1\n\ngoal (2 subgoals):\n 1. \\<And>\\<rho>.\n       \\<lbrakk>\\<rho> \\<in> carrier_mat d d;\n        partial_density_operator \\<rho>;\n        Im (trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>)) = 0;\n        Re (trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>))\n        \\<le> 1\\<rbrakk>\n       \\<Longrightarrow> x1 0 *\n                         denote_while_n_iter (x1 0) (x1 (Suc 0)) (denote x2)\n                          0 (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) *\n                         adjoint (x1 0) =\n                         complex_of_real c \\<cdot>\\<^sub>m\n                         (x1 0 *\n                          denote_while_n_iter (x1 0) (x1 (Suc 0))\n                           (denote x2) 0 \\<rho> *\n                          adjoint (x1 0))\n 2. \\<And>n \\<rho>.\n       \\<lbrakk>\\<And>\\<rho>.\n                   \\<lbrakk>\\<rho> \\<in> carrier_mat d d;\n                    partial_density_operator \\<rho>;\n                    Im (trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>)) =\n                    0;\n                    Re (trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>))\n                    \\<le> 1\\<rbrakk>\n                   \\<Longrightarrow> x1 0 *\n                                     denote_while_n_iter (x1 0) (x1 (Suc 0))\n(denote x2) n (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) *\n                                     adjoint (x1 0) =\n                                     complex_of_real c \\<cdot>\\<^sub>m\n                                     (x1 0 *\ndenote_while_n_iter (x1 0) (x1 (Suc 0)) (denote x2) n \\<rho> *\nadjoint (x1 0));\n        \\<rho> \\<in> carrier_mat d d; partial_density_operator \\<rho>;\n        Im (trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>)) = 0;\n        Re (trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>))\n        \\<le> 1\\<rbrakk>\n       \\<Longrightarrow> x1 0 *\n                         denote_while_n_iter (x1 0) (x1 (Suc 0)) (denote x2)\n                          (Suc n)\n                          (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) *\n                         adjoint (x1 0) =\n                         complex_of_real c \\<cdot>\\<^sub>m\n                         (x1 0 *\n                          denote_while_n_iter (x1 0) (x1 (Suc 0))\n                           (denote x2) (Suc n) \\<rho> *\n                          adjoint (x1 0))", "then"], ["proof (chain)\npicking this:\n  \\<rho> \\<in> carrier_mat d d\n  partial_density_operator \\<rho>\n  Im (trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>)) = 0\n  Re (trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>)) \\<le> 1", "show ?case"], ["proof (prove)\nusing this:\n  \\<rho> \\<in> carrier_mat d d\n  partial_density_operator \\<rho>\n  Im (trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>)) = 0\n  Re (trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>)) \\<le> 1\n\ngoal (1 subgoal):\n 1. x1 0 *\n    denote_while_n_iter (x1 0) (x1 (Suc 0)) (denote x2) 0\n     (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) *\n    adjoint (x1 0) =\n    complex_of_real c \\<cdot>\\<^sub>m\n    (x1 0 * denote_while_n_iter (x1 0) (x1 (Suc 0)) (denote x2) 0 \\<rho> *\n     adjoint (x1 0))", "apply auto"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<rho> \\<in> carrier_mat d d; partial_density_operator \\<rho>;\n     Im (trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>)) = 0;\n     Re (trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>)) \\<le> 1\\<rbrakk>\n    \\<Longrightarrow> x1 0 * (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) *\n                      adjoint (x1 0) =\n                      complex_of_real c \\<cdot>\\<^sub>m\n                      (x1 0 * \\<rho> * adjoint (x1 0))", "apply (mat_assoc d)"], ["proof (prove)\ngoal (1 subgoal):\n 1. x1 0 \\<in> carrier_mat d d", "using assms measurement_dim"], ["proof (prove)\nusing this:\n  0 \\<le> c\n  measurement d 2 x1\n  well_com x2\n  \\<lbrakk>?\\<rho> \\<in> carrier_mat d d; partial_density_operator ?\\<rho>;\n   trace (complex_of_real c \\<cdot>\\<^sub>m ?\\<rho>) \\<le> 1\\<rbrakk>\n  \\<Longrightarrow> denote x2 (complex_of_real c \\<cdot>\\<^sub>m ?\\<rho>) =\n                    complex_of_real c \\<cdot>\\<^sub>m denote x2 ?\\<rho>\n  \\<lbrakk>measurement ?d ?n ?M; ?k < ?n\\<rbrakk>\n  \\<Longrightarrow> ?M ?k \\<in> carrier_mat ?d ?d\n\ngoal (1 subgoal):\n 1. x1 0 \\<in> carrier_mat d d", "by auto"], ["proof (state)\nthis:\n  x1 0 *\n  denote_while_n_iter (x1 0) (x1 (Suc 0)) (denote x2) 0\n   (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) *\n  adjoint (x1 0) =\n  complex_of_real c \\<cdot>\\<^sub>m\n  (x1 0 * denote_while_n_iter (x1 0) (x1 (Suc 0)) (denote x2) 0 \\<rho> *\n   adjoint (x1 0))\n\ngoal (1 subgoal):\n 1. \\<And>n \\<rho>.\n       \\<lbrakk>\\<And>\\<rho>.\n                   \\<lbrakk>\\<rho> \\<in> carrier_mat d d;\n                    partial_density_operator \\<rho>;\n                    Im (trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>)) =\n                    0;\n                    Re (trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>))\n                    \\<le> 1\\<rbrakk>\n                   \\<Longrightarrow> x1 0 *\n                                     denote_while_n_iter (x1 0) (x1 (Suc 0))\n(denote x2) n (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) *\n                                     adjoint (x1 0) =\n                                     complex_of_real c \\<cdot>\\<^sub>m\n                                     (x1 0 *\ndenote_while_n_iter (x1 0) (x1 (Suc 0)) (denote x2) n \\<rho> *\nadjoint (x1 0));\n        \\<rho> \\<in> carrier_mat d d; partial_density_operator \\<rho>;\n        Im (trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>)) = 0;\n        Re (trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>))\n        \\<le> 1\\<rbrakk>\n       \\<Longrightarrow> x1 0 *\n                         denote_while_n_iter (x1 0) (x1 (Suc 0)) (denote x2)\n                          (Suc n)\n                          (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) *\n                         adjoint (x1 0) =\n                         complex_of_real c \\<cdot>\\<^sub>m\n                         (x1 0 *\n                          denote_while_n_iter (x1 0) (x1 (Suc 0))\n                           (denote x2) (Suc n) \\<rho> *\n                          adjoint (x1 0))", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>n \\<rho>.\n       \\<lbrakk>\\<And>\\<rho>.\n                   \\<lbrakk>\\<rho> \\<in> carrier_mat d d;\n                    partial_density_operator \\<rho>;\n                    Im (trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>)) =\n                    0;\n                    Re (trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>))\n                    \\<le> 1\\<rbrakk>\n                   \\<Longrightarrow> x1 0 *\n                                     denote_while_n_iter (x1 0) (x1 (Suc 0))\n(denote x2) n (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) *\n                                     adjoint (x1 0) =\n                                     complex_of_real c \\<cdot>\\<^sub>m\n                                     (x1 0 *\ndenote_while_n_iter (x1 0) (x1 (Suc 0)) (denote x2) n \\<rho> *\nadjoint (x1 0));\n        \\<rho> \\<in> carrier_mat d d; partial_density_operator \\<rho>;\n        Im (trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>)) = 0;\n        Re (trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>))\n        \\<le> 1\\<rbrakk>\n       \\<Longrightarrow> x1 0 *\n                         denote_while_n_iter (x1 0) (x1 (Suc 0)) (denote x2)\n                          (Suc n)\n                          (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) *\n                         adjoint (x1 0) =\n                         complex_of_real c \\<cdot>\\<^sub>m\n                         (x1 0 *\n                          denote_while_n_iter (x1 0) (x1 (Suc 0))\n                           (denote x2) (Suc n) \\<rho> *\n                          adjoint (x1 0))", "case (Suc n)"], ["proof (state)\nthis:\n  \\<lbrakk>?\\<rho> \\<in> carrier_mat d d; partial_density_operator ?\\<rho>;\n   Im (trace (complex_of_real c \\<cdot>\\<^sub>m ?\\<rho>)) = 0;\n   Re (trace (complex_of_real c \\<cdot>\\<^sub>m ?\\<rho>)) \\<le> 1\\<rbrakk>\n  \\<Longrightarrow> x1 0 *\n                    denote_while_n_iter (x1 0) (x1 (Suc 0)) (denote x2) n\n                     (complex_of_real c \\<cdot>\\<^sub>m ?\\<rho>) *\n                    adjoint (x1 0) =\n                    complex_of_real c \\<cdot>\\<^sub>m\n                    (x1 0 *\n                     denote_while_n_iter (x1 0) (x1 (Suc 0)) (denote x2) n\n                      ?\\<rho> *\n                     adjoint (x1 0))\n  \\<rho> \\<in> carrier_mat d d\n  partial_density_operator \\<rho>\n  Im (trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>)) = 0\n  Re (trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>)) \\<le> 1\n\ngoal (1 subgoal):\n 1. \\<And>n \\<rho>.\n       \\<lbrakk>\\<And>\\<rho>.\n                   \\<lbrakk>\\<rho> \\<in> carrier_mat d d;\n                    partial_density_operator \\<rho>;\n                    Im (trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>)) =\n                    0;\n                    Re (trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>))\n                    \\<le> 1\\<rbrakk>\n                   \\<Longrightarrow> x1 0 *\n                                     denote_while_n_iter (x1 0) (x1 (Suc 0))\n(denote x2) n (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) *\n                                     adjoint (x1 0) =\n                                     complex_of_real c \\<cdot>\\<^sub>m\n                                     (x1 0 *\ndenote_while_n_iter (x1 0) (x1 (Suc 0)) (denote x2) n \\<rho> *\nadjoint (x1 0));\n        \\<rho> \\<in> carrier_mat d d; partial_density_operator \\<rho>;\n        Im (trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>)) = 0;\n        Re (trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>))\n        \\<le> 1\\<rbrakk>\n       \\<Longrightarrow> x1 0 *\n                         denote_while_n_iter (x1 0) (x1 (Suc 0)) (denote x2)\n                          (Suc n)\n                          (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) *\n                         adjoint (x1 0) =\n                         complex_of_real c \\<cdot>\\<^sub>m\n                         (x1 0 *\n                          denote_while_n_iter (x1 0) (x1 (Suc 0))\n                           (denote x2) (Suc n) \\<rho> *\n                          adjoint (x1 0))", "then"], ["proof (chain)\npicking this:\n  \\<lbrakk>?\\<rho> \\<in> carrier_mat d d; partial_density_operator ?\\<rho>;\n   Im (trace (complex_of_real c \\<cdot>\\<^sub>m ?\\<rho>)) = 0;\n   Re (trace (complex_of_real c \\<cdot>\\<^sub>m ?\\<rho>)) \\<le> 1\\<rbrakk>\n  \\<Longrightarrow> x1 0 *\n                    denote_while_n_iter (x1 0) (x1 (Suc 0)) (denote x2) n\n                     (complex_of_real c \\<cdot>\\<^sub>m ?\\<rho>) *\n                    adjoint (x1 0) =\n                    complex_of_real c \\<cdot>\\<^sub>m\n                    (x1 0 *\n                     denote_while_n_iter (x1 0) (x1 (Suc 0)) (denote x2) n\n                      ?\\<rho> *\n                     adjoint (x1 0))\n  \\<rho> \\<in> carrier_mat d d\n  partial_density_operator \\<rho>\n  Im (trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>)) = 0\n  Re (trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>)) \\<le> 1", "show ?case"], ["proof (prove)\nusing this:\n  \\<lbrakk>?\\<rho> \\<in> carrier_mat d d; partial_density_operator ?\\<rho>;\n   Im (trace (complex_of_real c \\<cdot>\\<^sub>m ?\\<rho>)) = 0;\n   Re (trace (complex_of_real c \\<cdot>\\<^sub>m ?\\<rho>)) \\<le> 1\\<rbrakk>\n  \\<Longrightarrow> x1 0 *\n                    denote_while_n_iter (x1 0) (x1 (Suc 0)) (denote x2) n\n                     (complex_of_real c \\<cdot>\\<^sub>m ?\\<rho>) *\n                    adjoint (x1 0) =\n                    complex_of_real c \\<cdot>\\<^sub>m\n                    (x1 0 *\n                     denote_while_n_iter (x1 0) (x1 (Suc 0)) (denote x2) n\n                      ?\\<rho> *\n                     adjoint (x1 0))\n  \\<rho> \\<in> carrier_mat d d\n  partial_density_operator \\<rho>\n  Im (trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>)) = 0\n  Re (trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>)) \\<le> 1\n\ngoal (1 subgoal):\n 1. x1 0 *\n    denote_while_n_iter (x1 0) (x1 (Suc 0)) (denote x2) (Suc n)\n     (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) *\n    adjoint (x1 0) =\n    complex_of_real c \\<cdot>\\<^sub>m\n    (x1 0 *\n     denote_while_n_iter (x1 0) (x1 (Suc 0)) (denote x2) (Suc n) \\<rho> *\n     adjoint (x1 0))", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<And>\\<rho>.\n                \\<lbrakk>\\<rho> \\<in> carrier_mat d d;\n                 partial_density_operator \\<rho>;\n                 Im (trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>)) = 0;\n                 Re (trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>))\n                 \\<le> 1\\<rbrakk>\n                \\<Longrightarrow> x1 0 *\n                                  denote_while_n_iter (x1 0) (x1 (Suc 0))\n                                   (denote x2) n\n                                   (complex_of_real c \\<cdot>\\<^sub>m\n                                    \\<rho>) *\n                                  adjoint (x1 0) =\n                                  complex_of_real c \\<cdot>\\<^sub>m\n                                  (x1 0 *\n                                   denote_while_n_iter (x1 0) (x1 (Suc 0))\n                                    (denote x2) n \\<rho> *\n                                   adjoint (x1 0));\n     \\<rho> \\<in> carrier_mat d d; partial_density_operator \\<rho>;\n     Im (trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>)) = 0;\n     Re (trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>)) \\<le> 1\\<rbrakk>\n    \\<Longrightarrow> x1 0 *\n                      denote_while_n_iter (x1 0) (x1 (Suc 0)) (denote x2)\n                       (Suc n) (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) *\n                      adjoint (x1 0) =\n                      complex_of_real c \\<cdot>\\<^sub>m\n                      (x1 0 *\n                       denote_while_n_iter (x1 0) (x1 (Suc 0)) (denote x2)\n                        (Suc n) \\<rho> *\n                       adjoint (x1 0))", "let ?A = \"x1 0\" and ?B = \"x1 1\""], ["proof (state)\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<And>\\<rho>.\n                \\<lbrakk>\\<rho> \\<in> carrier_mat d d;\n                 partial_density_operator \\<rho>;\n                 Im (trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>)) = 0;\n                 Re (trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>))\n                 \\<le> 1\\<rbrakk>\n                \\<Longrightarrow> x1 0 *\n                                  denote_while_n_iter (x1 0) (x1 (Suc 0))\n                                   (denote x2) n\n                                   (complex_of_real c \\<cdot>\\<^sub>m\n                                    \\<rho>) *\n                                  adjoint (x1 0) =\n                                  complex_of_real c \\<cdot>\\<^sub>m\n                                  (x1 0 *\n                                   denote_while_n_iter (x1 0) (x1 (Suc 0))\n                                    (denote x2) n \\<rho> *\n                                   adjoint (x1 0));\n     \\<rho> \\<in> carrier_mat d d; partial_density_operator \\<rho>;\n     Im (trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>)) = 0;\n     Re (trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>)) \\<le> 1\\<rbrakk>\n    \\<Longrightarrow> x1 0 *\n                      denote_while_n_iter (x1 0) (x1 (Suc 0)) (denote x2)\n                       (Suc n) (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) *\n                      adjoint (x1 0) =\n                      complex_of_real c \\<cdot>\\<^sub>m\n                      (x1 0 *\n                       denote_while_n_iter (x1 0) (x1 (Suc 0)) (denote x2)\n                        (Suc n) \\<rho> *\n                       adjoint (x1 0))", "have dx2:\"(\\<And>\\<rho>. \\<rho> \\<in> carrier_mat d d \\<Longrightarrow> partial_density_operator \\<rho> \\<Longrightarrow> positive ((denote x2) \\<rho>) \\<and> trace ((denote x2) \\<rho>) \\<le> trace \\<rho> \\<and> (denote x2) \\<rho> \\<in> carrier_mat d d) \""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>\\<rho>.\n       \\<lbrakk>\\<rho> \\<in> carrier_mat d d;\n        partial_density_operator \\<rho>\\<rbrakk>\n       \\<Longrightarrow> positive (denote x2 \\<rho>) \\<and>\n                         trace (denote x2 \\<rho>) \\<le> trace \\<rho> \\<and>\n                         denote x2 \\<rho> \\<in> carrier_mat d d", "using denote_positive_trace_dim assms"], ["proof (prove)\nusing this:\n  \\<lbrakk>well_com ?S; ?\\<rho> \\<in> carrier_mat d d;\n   partial_density_operator ?\\<rho>\\<rbrakk>\n  \\<Longrightarrow> positive (denote ?S ?\\<rho>) \\<and>\n                    trace (denote ?S ?\\<rho>) \\<le> trace ?\\<rho> \\<and>\n                    denote ?S ?\\<rho> \\<in> carrier_mat d d\n  0 \\<le> c\n  measurement d 2 x1\n  well_com x2\n  \\<lbrakk>?\\<rho> \\<in> carrier_mat d d; partial_density_operator ?\\<rho>;\n   trace (complex_of_real c \\<cdot>\\<^sub>m ?\\<rho>) \\<le> 1\\<rbrakk>\n  \\<Longrightarrow> denote x2 (complex_of_real c \\<cdot>\\<^sub>m ?\\<rho>) =\n                    complex_of_real c \\<cdot>\\<^sub>m denote x2 ?\\<rho>\n\ngoal (1 subgoal):\n 1. \\<And>\\<rho>.\n       \\<lbrakk>\\<rho> \\<in> carrier_mat d d;\n        partial_density_operator \\<rho>\\<rbrakk>\n       \\<Longrightarrow> positive (denote x2 \\<rho>) \\<and>\n                         trace (denote x2 \\<rho>) \\<le> trace \\<rho> \\<and>\n                         denote x2 \\<rho> \\<in> carrier_mat d d", "by auto"], ["proof (state)\nthis:\n  \\<lbrakk>?\\<rho> \\<in> carrier_mat d d;\n   partial_density_operator ?\\<rho>\\<rbrakk>\n  \\<Longrightarrow> positive (denote x2 ?\\<rho>) \\<and>\n                    trace (denote x2 ?\\<rho>) \\<le> trace ?\\<rho> \\<and>\n                    denote x2 ?\\<rho> \\<in> carrier_mat d d\n\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<And>\\<rho>.\n                \\<lbrakk>\\<rho> \\<in> carrier_mat d d;\n                 partial_density_operator \\<rho>;\n                 Im (trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>)) = 0;\n                 Re (trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>))\n                 \\<le> 1\\<rbrakk>\n                \\<Longrightarrow> x1 0 *\n                                  denote_while_n_iter (x1 0) (x1 (Suc 0))\n                                   (denote x2) n\n                                   (complex_of_real c \\<cdot>\\<^sub>m\n                                    \\<rho>) *\n                                  adjoint (x1 0) =\n                                  complex_of_real c \\<cdot>\\<^sub>m\n                                  (x1 0 *\n                                   denote_while_n_iter (x1 0) (x1 (Suc 0))\n                                    (denote x2) n \\<rho> *\n                                   adjoint (x1 0));\n     \\<rho> \\<in> carrier_mat d d; partial_density_operator \\<rho>;\n     Im (trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>)) = 0;\n     Re (trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>)) \\<le> 1\\<rbrakk>\n    \\<Longrightarrow> x1 0 *\n                      denote_while_n_iter (x1 0) (x1 (Suc 0)) (denote x2)\n                       (Suc n) (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) *\n                      adjoint (x1 0) =\n                      complex_of_real c \\<cdot>\\<^sub>m\n                      (x1 0 *\n                       denote_while_n_iter (x1 0) (x1 (Suc 0)) (denote x2)\n                        (Suc n) \\<rho> *\n                       adjoint (x1 0))", "have lo1: \"adjoint ?B * ?B \\<le>\\<^sub>L 1\\<^sub>m d\""], ["proof (prove)\ngoal (1 subgoal):\n 1. adjoint (x1 1) * x1 1 \\<le>\\<^sub>L 1\\<^sub>m d", "using measurement_le_one_mat assms"], ["proof (prove)\nusing this:\n  \\<lbrakk>measurement ?d ?n ?f; ?j < ?n\\<rbrakk>\n  \\<Longrightarrow> adjoint (?f ?j) * ?f ?j \\<le>\\<^sub>L 1\\<^sub>m ?d\n  0 \\<le> c\n  measurement d 2 x1\n  well_com x2\n  \\<lbrakk>?\\<rho> \\<in> carrier_mat d d; partial_density_operator ?\\<rho>;\n   trace (complex_of_real c \\<cdot>\\<^sub>m ?\\<rho>) \\<le> 1\\<rbrakk>\n  \\<Longrightarrow> denote x2 (complex_of_real c \\<cdot>\\<^sub>m ?\\<rho>) =\n                    complex_of_real c \\<cdot>\\<^sub>m denote x2 ?\\<rho>\n\ngoal (1 subgoal):\n 1. adjoint (x1 1) * x1 1 \\<le>\\<^sub>L 1\\<^sub>m d", "by auto"], ["proof (state)\nthis:\n  adjoint (x1 1) * x1 1 \\<le>\\<^sub>L 1\\<^sub>m d\n\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<And>\\<rho>.\n                \\<lbrakk>\\<rho> \\<in> carrier_mat d d;\n                 partial_density_operator \\<rho>;\n                 Im (trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>)) = 0;\n                 Re (trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>))\n                 \\<le> 1\\<rbrakk>\n                \\<Longrightarrow> x1 0 *\n                                  denote_while_n_iter (x1 0) (x1 (Suc 0))\n                                   (denote x2) n\n                                   (complex_of_real c \\<cdot>\\<^sub>m\n                                    \\<rho>) *\n                                  adjoint (x1 0) =\n                                  complex_of_real c \\<cdot>\\<^sub>m\n                                  (x1 0 *\n                                   denote_while_n_iter (x1 0) (x1 (Suc 0))\n                                    (denote x2) n \\<rho> *\n                                   adjoint (x1 0));\n     \\<rho> \\<in> carrier_mat d d; partial_density_operator \\<rho>;\n     Im (trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>)) = 0;\n     Re (trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>)) \\<le> 1\\<rbrakk>\n    \\<Longrightarrow> x1 0 *\n                      denote_while_n_iter (x1 0) (x1 (Suc 0)) (denote x2)\n                       (Suc n) (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) *\n                      adjoint (x1 0) =\n                      complex_of_real c \\<cdot>\\<^sub>m\n                      (x1 0 *\n                       denote_while_n_iter (x1 0) (x1 (Suc 0)) (denote x2)\n                        (Suc n) \\<rho> *\n                       adjoint (x1 0))", "have dim1: \"x1 1 * \\<rho> * adjoint (x1 1) \\<in> carrier_mat d d\""], ["proof (prove)\ngoal (1 subgoal):\n 1. x1 1 * \\<rho> * adjoint (x1 1) \\<in> carrier_mat d d", "using assms(2) Suc(2) measurement_dim"], ["proof (prove)\nusing this:\n  measurement d 2 x1\n  \\<rho> \\<in> carrier_mat d d\n  \\<lbrakk>measurement ?d ?n ?M; ?k < ?n\\<rbrakk>\n  \\<Longrightarrow> ?M ?k \\<in> carrier_mat ?d ?d\n\ngoal (1 subgoal):\n 1. x1 1 * \\<rho> * adjoint (x1 1) \\<in> carrier_mat d d", "by (meson adjoint_dim mult_carrier_mat one_less_numeral_iff semiring_norm(76))"], ["proof (state)\nthis:\n  x1 1 * \\<rho> * adjoint (x1 1) \\<in> carrier_mat d d\n\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<And>\\<rho>.\n                \\<lbrakk>\\<rho> \\<in> carrier_mat d d;\n                 partial_density_operator \\<rho>;\n                 Im (trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>)) = 0;\n                 Re (trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>))\n                 \\<le> 1\\<rbrakk>\n                \\<Longrightarrow> x1 0 *\n                                  denote_while_n_iter (x1 0) (x1 (Suc 0))\n                                   (denote x2) n\n                                   (complex_of_real c \\<cdot>\\<^sub>m\n                                    \\<rho>) *\n                                  adjoint (x1 0) =\n                                  complex_of_real c \\<cdot>\\<^sub>m\n                                  (x1 0 *\n                                   denote_while_n_iter (x1 0) (x1 (Suc 0))\n                                    (denote x2) n \\<rho> *\n                                   adjoint (x1 0));\n     \\<rho> \\<in> carrier_mat d d; partial_density_operator \\<rho>;\n     Im (trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>)) = 0;\n     Re (trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>)) \\<le> 1\\<rbrakk>\n    \\<Longrightarrow> x1 0 *\n                      denote_while_n_iter (x1 0) (x1 (Suc 0)) (denote x2)\n                       (Suc n) (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) *\n                      adjoint (x1 0) =\n                      complex_of_real c \\<cdot>\\<^sub>m\n                      (x1 0 *\n                       denote_while_n_iter (x1 0) (x1 (Suc 0)) (denote x2)\n                        (Suc n) \\<rho> *\n                       adjoint (x1 0))", "moreover"], ["proof (state)\nthis:\n  x1 1 * \\<rho> * adjoint (x1 1) \\<in> carrier_mat d d\n\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<And>\\<rho>.\n                \\<lbrakk>\\<rho> \\<in> carrier_mat d d;\n                 partial_density_operator \\<rho>;\n                 Im (trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>)) = 0;\n                 Re (trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>))\n                 \\<le> 1\\<rbrakk>\n                \\<Longrightarrow> x1 0 *\n                                  denote_while_n_iter (x1 0) (x1 (Suc 0))\n                                   (denote x2) n\n                                   (complex_of_real c \\<cdot>\\<^sub>m\n                                    \\<rho>) *\n                                  adjoint (x1 0) =\n                                  complex_of_real c \\<cdot>\\<^sub>m\n                                  (x1 0 *\n                                   denote_while_n_iter (x1 0) (x1 (Suc 0))\n                                    (denote x2) n \\<rho> *\n                                   adjoint (x1 0));\n     \\<rho> \\<in> carrier_mat d d; partial_density_operator \\<rho>;\n     Im (trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>)) = 0;\n     Re (trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>)) \\<le> 1\\<rbrakk>\n    \\<Longrightarrow> x1 0 *\n                      denote_while_n_iter (x1 0) (x1 (Suc 0)) (denote x2)\n                       (Suc n) (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) *\n                      adjoint (x1 0) =\n                      complex_of_real c \\<cdot>\\<^sub>m\n                      (x1 0 *\n                       denote_while_n_iter (x1 0) (x1 (Suc 0)) (denote x2)\n                        (Suc n) \\<rho> *\n                       adjoint (x1 0))", "have pdo1: \"partial_density_operator (x1 1 * \\<rho> * adjoint (x1 1))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. partial_density_operator (x1 1 * \\<rho> * adjoint (x1 1))", "using pdo_close_under_measurement assms  Suc lo1 measurement_dim"], ["proof (prove)\nusing this:\n  \\<lbrakk>?M \\<in> carrier_mat ?n ?n; ?\\<rho> \\<in> carrier_mat ?n ?n;\n   partial_density_operator ?\\<rho>;\n   adjoint ?M * ?M \\<le>\\<^sub>L 1\\<^sub>m ?n\\<rbrakk>\n  \\<Longrightarrow> partial_density_operator (?M * ?\\<rho> * adjoint ?M)\n  0 \\<le> c\n  measurement d 2 x1\n  well_com x2\n  \\<lbrakk>?\\<rho> \\<in> carrier_mat d d; partial_density_operator ?\\<rho>;\n   trace (complex_of_real c \\<cdot>\\<^sub>m ?\\<rho>) \\<le> 1\\<rbrakk>\n  \\<Longrightarrow> denote x2 (complex_of_real c \\<cdot>\\<^sub>m ?\\<rho>) =\n                    complex_of_real c \\<cdot>\\<^sub>m denote x2 ?\\<rho>\n  \\<lbrakk>?\\<rho> \\<in> carrier_mat d d; partial_density_operator ?\\<rho>;\n   Im (trace (complex_of_real c \\<cdot>\\<^sub>m ?\\<rho>)) = 0;\n   Re (trace (complex_of_real c \\<cdot>\\<^sub>m ?\\<rho>)) \\<le> 1\\<rbrakk>\n  \\<Longrightarrow> x1 0 *\n                    denote_while_n_iter (x1 0) (x1 (Suc 0)) (denote x2) n\n                     (complex_of_real c \\<cdot>\\<^sub>m ?\\<rho>) *\n                    adjoint (x1 0) =\n                    complex_of_real c \\<cdot>\\<^sub>m\n                    (x1 0 *\n                     denote_while_n_iter (x1 0) (x1 (Suc 0)) (denote x2) n\n                      ?\\<rho> *\n                     adjoint (x1 0))\n  \\<rho> \\<in> carrier_mat d d\n  partial_density_operator \\<rho>\n  Im (trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>)) = 0\n  Re (trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>)) \\<le> 1\n  adjoint (x1 1) * x1 1 \\<le>\\<^sub>L 1\\<^sub>m d\n  \\<lbrakk>measurement ?d ?n ?M; ?k < ?n\\<rbrakk>\n  \\<Longrightarrow> ?M ?k \\<in> carrier_mat ?d ?d\n\ngoal (1 subgoal):\n 1. partial_density_operator (x1 1 * \\<rho> * adjoint (x1 1))", "by (metis One_nat_def lessI numeral_2_eq_2)"], ["proof (state)\nthis:\n  partial_density_operator (x1 1 * \\<rho> * adjoint (x1 1))\n\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<And>\\<rho>.\n                \\<lbrakk>\\<rho> \\<in> carrier_mat d d;\n                 partial_density_operator \\<rho>;\n                 Im (trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>)) = 0;\n                 Re (trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>))\n                 \\<le> 1\\<rbrakk>\n                \\<Longrightarrow> x1 0 *\n                                  denote_while_n_iter (x1 0) (x1 (Suc 0))\n                                   (denote x2) n\n                                   (complex_of_real c \\<cdot>\\<^sub>m\n                                    \\<rho>) *\n                                  adjoint (x1 0) =\n                                  complex_of_real c \\<cdot>\\<^sub>m\n                                  (x1 0 *\n                                   denote_while_n_iter (x1 0) (x1 (Suc 0))\n                                    (denote x2) n \\<rho> *\n                                   adjoint (x1 0));\n     \\<rho> \\<in> carrier_mat d d; partial_density_operator \\<rho>;\n     Im (trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>)) = 0;\n     Re (trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>)) \\<le> 1\\<rbrakk>\n    \\<Longrightarrow> x1 0 *\n                      denote_while_n_iter (x1 0) (x1 (Suc 0)) (denote x2)\n                       (Suc n) (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) *\n                      adjoint (x1 0) =\n                      complex_of_real c \\<cdot>\\<^sub>m\n                      (x1 0 *\n                       denote_while_n_iter (x1 0) (x1 (Suc 0)) (denote x2)\n                        (Suc n) \\<rho> *\n                       adjoint (x1 0))", "ultimately"], ["proof (chain)\npicking this:\n  x1 1 * \\<rho> * adjoint (x1 1) \\<in> carrier_mat d d\n  partial_density_operator (x1 1 * \\<rho> * adjoint (x1 1))", "have dimr: \"denote x2 (x1 1 * \\<rho> * adjoint (x1 1)) \\<in> carrier_mat d d\""], ["proof (prove)\nusing this:\n  x1 1 * \\<rho> * adjoint (x1 1) \\<in> carrier_mat d d\n  partial_density_operator (x1 1 * \\<rho> * adjoint (x1 1))\n\ngoal (1 subgoal):\n 1. denote x2 (x1 1 * \\<rho> * adjoint (x1 1)) \\<in> carrier_mat d d", "using dx2"], ["proof (prove)\nusing this:\n  x1 1 * \\<rho> * adjoint (x1 1) \\<in> carrier_mat d d\n  partial_density_operator (x1 1 * \\<rho> * adjoint (x1 1))\n  \\<lbrakk>?\\<rho> \\<in> carrier_mat d d;\n   partial_density_operator ?\\<rho>\\<rbrakk>\n  \\<Longrightarrow> positive (denote x2 ?\\<rho>) \\<and>\n                    trace (denote x2 ?\\<rho>) \\<le> trace ?\\<rho> \\<and>\n                    denote x2 ?\\<rho> \\<in> carrier_mat d d\n\ngoal (1 subgoal):\n 1. denote x2 (x1 1 * \\<rho> * adjoint (x1 1)) \\<in> carrier_mat d d", "by auto"], ["proof (state)\nthis:\n  denote x2 (x1 1 * \\<rho> * adjoint (x1 1)) \\<in> carrier_mat d d\n\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<And>\\<rho>.\n                \\<lbrakk>\\<rho> \\<in> carrier_mat d d;\n                 partial_density_operator \\<rho>;\n                 Im (trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>)) = 0;\n                 Re (trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>))\n                 \\<le> 1\\<rbrakk>\n                \\<Longrightarrow> x1 0 *\n                                  denote_while_n_iter (x1 0) (x1 (Suc 0))\n                                   (denote x2) n\n                                   (complex_of_real c \\<cdot>\\<^sub>m\n                                    \\<rho>) *\n                                  adjoint (x1 0) =\n                                  complex_of_real c \\<cdot>\\<^sub>m\n                                  (x1 0 *\n                                   denote_while_n_iter (x1 0) (x1 (Suc 0))\n                                    (denote x2) n \\<rho> *\n                                   adjoint (x1 0));\n     \\<rho> \\<in> carrier_mat d d; partial_density_operator \\<rho>;\n     Im (trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>)) = 0;\n     Re (trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>)) \\<le> 1\\<rbrakk>\n    \\<Longrightarrow> x1 0 *\n                      denote_while_n_iter (x1 0) (x1 (Suc 0)) (denote x2)\n                       (Suc n) (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) *\n                      adjoint (x1 0) =\n                      complex_of_real c \\<cdot>\\<^sub>m\n                      (x1 0 *\n                       denote_while_n_iter (x1 0) (x1 (Suc 0)) (denote x2)\n                        (Suc n) \\<rho> *\n                       adjoint (x1 0))", "have pdor: \"partial_density_operator (denote x2 (x1 1 * \\<rho> * adjoint (x1 1)))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. partial_density_operator (denote x2 (x1 1 * \\<rho> * adjoint (x1 1)))", "using denote_partial_density_operator assms dim1 pdo1"], ["proof (prove)\nusing this:\n  \\<lbrakk>well_com ?S; partial_density_operator ?\\<rho>;\n   ?\\<rho> \\<in> carrier_mat d d\\<rbrakk>\n  \\<Longrightarrow> partial_density_operator (denote ?S ?\\<rho>)\n  0 \\<le> c\n  measurement d 2 x1\n  well_com x2\n  \\<lbrakk>?\\<rho> \\<in> carrier_mat d d; partial_density_operator ?\\<rho>;\n   trace (complex_of_real c \\<cdot>\\<^sub>m ?\\<rho>) \\<le> 1\\<rbrakk>\n  \\<Longrightarrow> denote x2 (complex_of_real c \\<cdot>\\<^sub>m ?\\<rho>) =\n                    complex_of_real c \\<cdot>\\<^sub>m denote x2 ?\\<rho>\n  x1 1 * \\<rho> * adjoint (x1 1) \\<in> carrier_mat d d\n  partial_density_operator (x1 1 * \\<rho> * adjoint (x1 1))\n\ngoal (1 subgoal):\n 1. partial_density_operator (denote x2 (x1 1 * \\<rho> * adjoint (x1 1)))", "by auto"], ["proof (state)\nthis:\n  partial_density_operator (denote x2 (x1 1 * \\<rho> * adjoint (x1 1)))\n\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<And>\\<rho>.\n                \\<lbrakk>\\<rho> \\<in> carrier_mat d d;\n                 partial_density_operator \\<rho>;\n                 Im (trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>)) = 0;\n                 Re (trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>))\n                 \\<le> 1\\<rbrakk>\n                \\<Longrightarrow> x1 0 *\n                                  denote_while_n_iter (x1 0) (x1 (Suc 0))\n                                   (denote x2) n\n                                   (complex_of_real c \\<cdot>\\<^sub>m\n                                    \\<rho>) *\n                                  adjoint (x1 0) =\n                                  complex_of_real c \\<cdot>\\<^sub>m\n                                  (x1 0 *\n                                   denote_while_n_iter (x1 0) (x1 (Suc 0))\n                                    (denote x2) n \\<rho> *\n                                   adjoint (x1 0));\n     \\<rho> \\<in> carrier_mat d d; partial_density_operator \\<rho>;\n     Im (trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>)) = 0;\n     Re (trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>)) \\<le> 1\\<rbrakk>\n    \\<Longrightarrow> x1 0 *\n                      denote_while_n_iter (x1 0) (x1 (Suc 0)) (denote x2)\n                       (Suc n) (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) *\n                      adjoint (x1 0) =\n                      complex_of_real c \\<cdot>\\<^sub>m\n                      (x1 0 *\n                       denote_while_n_iter (x1 0) (x1 (Suc 0)) (denote x2)\n                        (Suc n) \\<rho> *\n                       adjoint (x1 0))", "have \"trace (denote x2 (x1 1 * \\<rho> * adjoint (x1 1))) \\<le> trace (x1 1 * \\<rho> * adjoint (x1 1))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. trace (denote x2 (x1 1 * \\<rho> * adjoint (x1 1)))\n    \\<le> trace (x1 1 * \\<rho> * adjoint (x1 1))", "using dx2 dim1 pdo1"], ["proof (prove)\nusing this:\n  \\<lbrakk>?\\<rho> \\<in> carrier_mat d d;\n   partial_density_operator ?\\<rho>\\<rbrakk>\n  \\<Longrightarrow> positive (denote x2 ?\\<rho>) \\<and>\n                    trace (denote x2 ?\\<rho>) \\<le> trace ?\\<rho> \\<and>\n                    denote x2 ?\\<rho> \\<in> carrier_mat d d\n  x1 1 * \\<rho> * adjoint (x1 1) \\<in> carrier_mat d d\n  partial_density_operator (x1 1 * \\<rho> * adjoint (x1 1))\n\ngoal (1 subgoal):\n 1. trace (denote x2 (x1 1 * \\<rho> * adjoint (x1 1)))\n    \\<le> trace (x1 1 * \\<rho> * adjoint (x1 1))", "by auto"], ["proof (state)\nthis:\n  trace (denote x2 (x1 1 * \\<rho> * adjoint (x1 1)))\n  \\<le> trace (x1 1 * \\<rho> * adjoint (x1 1))\n\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<And>\\<rho>.\n                \\<lbrakk>\\<rho> \\<in> carrier_mat d d;\n                 partial_density_operator \\<rho>;\n                 Im (trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>)) = 0;\n                 Re (trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>))\n                 \\<le> 1\\<rbrakk>\n                \\<Longrightarrow> x1 0 *\n                                  denote_while_n_iter (x1 0) (x1 (Suc 0))\n                                   (denote x2) n\n                                   (complex_of_real c \\<cdot>\\<^sub>m\n                                    \\<rho>) *\n                                  adjoint (x1 0) =\n                                  complex_of_real c \\<cdot>\\<^sub>m\n                                  (x1 0 *\n                                   denote_while_n_iter (x1 0) (x1 (Suc 0))\n                                    (denote x2) n \\<rho> *\n                                   adjoint (x1 0));\n     \\<rho> \\<in> carrier_mat d d; partial_density_operator \\<rho>;\n     Im (trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>)) = 0;\n     Re (trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>)) \\<le> 1\\<rbrakk>\n    \\<Longrightarrow> x1 0 *\n                      denote_while_n_iter (x1 0) (x1 (Suc 0)) (denote x2)\n                       (Suc n) (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) *\n                      adjoint (x1 0) =\n                      complex_of_real c \\<cdot>\\<^sub>m\n                      (x1 0 *\n                       denote_while_n_iter (x1 0) (x1 (Suc 0)) (denote x2)\n                        (Suc n) \\<rho> *\n                       adjoint (x1 0))", "also"], ["proof (state)\nthis:\n  trace (denote x2 (x1 1 * \\<rho> * adjoint (x1 1)))\n  \\<le> trace (x1 1 * \\<rho> * adjoint (x1 1))\n\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<And>\\<rho>.\n                \\<lbrakk>\\<rho> \\<in> carrier_mat d d;\n                 partial_density_operator \\<rho>;\n                 Im (trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>)) = 0;\n                 Re (trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>))\n                 \\<le> 1\\<rbrakk>\n                \\<Longrightarrow> x1 0 *\n                                  denote_while_n_iter (x1 0) (x1 (Suc 0))\n                                   (denote x2) n\n                                   (complex_of_real c \\<cdot>\\<^sub>m\n                                    \\<rho>) *\n                                  adjoint (x1 0) =\n                                  complex_of_real c \\<cdot>\\<^sub>m\n                                  (x1 0 *\n                                   denote_while_n_iter (x1 0) (x1 (Suc 0))\n                                    (denote x2) n \\<rho> *\n                                   adjoint (x1 0));\n     \\<rho> \\<in> carrier_mat d d; partial_density_operator \\<rho>;\n     Im (trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>)) = 0;\n     Re (trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>)) \\<le> 1\\<rbrakk>\n    \\<Longrightarrow> x1 0 *\n                      denote_while_n_iter (x1 0) (x1 (Suc 0)) (denote x2)\n                       (Suc n) (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) *\n                      adjoint (x1 0) =\n                      complex_of_real c \\<cdot>\\<^sub>m\n                      (x1 0 *\n                       denote_while_n_iter (x1 0) (x1 (Suc 0)) (denote x2)\n                        (Suc n) \\<rho> *\n                       adjoint (x1 0))", "have trr1: \"\\<dots> \\<le> trace \\<rho>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. trace (x1 1 * \\<rho> * adjoint (x1 1)) \\<le> trace \\<rho>", "using trace_decrease_mul_adj assms Suc lo1 measurement_dim"], ["proof (prove)\nusing this:\n  \\<lbrakk>partial_density_operator ?\\<rho>; ?\\<rho> \\<in> carrier_mat d d;\n   ?x \\<in> carrier_mat d d;\n   adjoint ?x * ?x \\<le>\\<^sub>L 1\\<^sub>m d\\<rbrakk>\n  \\<Longrightarrow> trace (?x * ?\\<rho> * adjoint ?x) \\<le> trace ?\\<rho>\n  0 \\<le> c\n  measurement d 2 x1\n  well_com x2\n  \\<lbrakk>?\\<rho> \\<in> carrier_mat d d; partial_density_operator ?\\<rho>;\n   trace (complex_of_real c \\<cdot>\\<^sub>m ?\\<rho>) \\<le> 1\\<rbrakk>\n  \\<Longrightarrow> denote x2 (complex_of_real c \\<cdot>\\<^sub>m ?\\<rho>) =\n                    complex_of_real c \\<cdot>\\<^sub>m denote x2 ?\\<rho>\n  \\<lbrakk>?\\<rho> \\<in> carrier_mat d d; partial_density_operator ?\\<rho>;\n   Im (trace (complex_of_real c \\<cdot>\\<^sub>m ?\\<rho>)) = 0;\n   Re (trace (complex_of_real c \\<cdot>\\<^sub>m ?\\<rho>)) \\<le> 1\\<rbrakk>\n  \\<Longrightarrow> x1 0 *\n                    denote_while_n_iter (x1 0) (x1 (Suc 0)) (denote x2) n\n                     (complex_of_real c \\<cdot>\\<^sub>m ?\\<rho>) *\n                    adjoint (x1 0) =\n                    complex_of_real c \\<cdot>\\<^sub>m\n                    (x1 0 *\n                     denote_while_n_iter (x1 0) (x1 (Suc 0)) (denote x2) n\n                      ?\\<rho> *\n                     adjoint (x1 0))\n  \\<rho> \\<in> carrier_mat d d\n  partial_density_operator \\<rho>\n  Im (trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>)) = 0\n  Re (trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>)) \\<le> 1\n  adjoint (x1 1) * x1 1 \\<le>\\<^sub>L 1\\<^sub>m d\n  \\<lbrakk>measurement ?d ?n ?M; ?k < ?n\\<rbrakk>\n  \\<Longrightarrow> ?M ?k \\<in> carrier_mat ?d ?d\n\ngoal (1 subgoal):\n 1. trace (x1 1 * \\<rho> * adjoint (x1 1)) \\<le> trace \\<rho>", "by auto"], ["proof (state)\nthis:\n  trace (x1 1 * \\<rho> * adjoint (x1 1)) \\<le> trace \\<rho>\n\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<And>\\<rho>.\n                \\<lbrakk>\\<rho> \\<in> carrier_mat d d;\n                 partial_density_operator \\<rho>;\n                 Im (trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>)) = 0;\n                 Re (trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>))\n                 \\<le> 1\\<rbrakk>\n                \\<Longrightarrow> x1 0 *\n                                  denote_while_n_iter (x1 0) (x1 (Suc 0))\n                                   (denote x2) n\n                                   (complex_of_real c \\<cdot>\\<^sub>m\n                                    \\<rho>) *\n                                  adjoint (x1 0) =\n                                  complex_of_real c \\<cdot>\\<^sub>m\n                                  (x1 0 *\n                                   denote_while_n_iter (x1 0) (x1 (Suc 0))\n                                    (denote x2) n \\<rho> *\n                                   adjoint (x1 0));\n     \\<rho> \\<in> carrier_mat d d; partial_density_operator \\<rho>;\n     Im (trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>)) = 0;\n     Re (trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>)) \\<le> 1\\<rbrakk>\n    \\<Longrightarrow> x1 0 *\n                      denote_while_n_iter (x1 0) (x1 (Suc 0)) (denote x2)\n                       (Suc n) (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) *\n                      adjoint (x1 0) =\n                      complex_of_real c \\<cdot>\\<^sub>m\n                      (x1 0 *\n                       denote_while_n_iter (x1 0) (x1 (Suc 0)) (denote x2)\n                        (Suc n) \\<rho> *\n                       adjoint (x1 0))", "finally"], ["proof (chain)\npicking this:\n  trace (denote x2 (x1 1 * \\<rho> * adjoint (x1 1))) \\<le> trace \\<rho>", "have trr: \"trace (denote x2 (x1 1 * \\<rho> * adjoint (x1 1))) \\<le> trace \\<rho>\""], ["proof (prove)\nusing this:\n  trace (denote x2 (x1 1 * \\<rho> * adjoint (x1 1))) \\<le> trace \\<rho>\n\ngoal (1 subgoal):\n 1. trace (denote x2 (x1 1 * \\<rho> * adjoint (x1 1))) \\<le> trace \\<rho>", "by auto"], ["proof (state)\nthis:\n  trace (denote x2 (x1 1 * \\<rho> * adjoint (x1 1))) \\<le> trace \\<rho>\n\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<And>\\<rho>.\n                \\<lbrakk>\\<rho> \\<in> carrier_mat d d;\n                 partial_density_operator \\<rho>;\n                 Im (trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>)) = 0;\n                 Re (trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>))\n                 \\<le> 1\\<rbrakk>\n                \\<Longrightarrow> x1 0 *\n                                  denote_while_n_iter (x1 0) (x1 (Suc 0))\n                                   (denote x2) n\n                                   (complex_of_real c \\<cdot>\\<^sub>m\n                                    \\<rho>) *\n                                  adjoint (x1 0) =\n                                  complex_of_real c \\<cdot>\\<^sub>m\n                                  (x1 0 *\n                                   denote_while_n_iter (x1 0) (x1 (Suc 0))\n                                    (denote x2) n \\<rho> *\n                                   adjoint (x1 0));\n     \\<rho> \\<in> carrier_mat d d; partial_density_operator \\<rho>;\n     Im (trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>)) = 0;\n     Re (trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>)) \\<le> 1\\<rbrakk>\n    \\<Longrightarrow> x1 0 *\n                      denote_while_n_iter (x1 0) (x1 (Suc 0)) (denote x2)\n                       (Suc n) (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) *\n                      adjoint (x1 0) =\n                      complex_of_real c \\<cdot>\\<^sub>m\n                      (x1 0 *\n                       denote_while_n_iter (x1 0) (x1 (Suc 0)) (denote x2)\n                        (Suc n) \\<rho> *\n                       adjoint (x1 0))", "moreover"], ["proof (state)\nthis:\n  trace (denote x2 (x1 1 * \\<rho> * adjoint (x1 1))) \\<le> trace \\<rho>\n\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<And>\\<rho>.\n                \\<lbrakk>\\<rho> \\<in> carrier_mat d d;\n                 partial_density_operator \\<rho>;\n                 Im (trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>)) = 0;\n                 Re (trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>))\n                 \\<le> 1\\<rbrakk>\n                \\<Longrightarrow> x1 0 *\n                                  denote_while_n_iter (x1 0) (x1 (Suc 0))\n                                   (denote x2) n\n                                   (complex_of_real c \\<cdot>\\<^sub>m\n                                    \\<rho>) *\n                                  adjoint (x1 0) =\n                                  complex_of_real c \\<cdot>\\<^sub>m\n                                  (x1 0 *\n                                   denote_while_n_iter (x1 0) (x1 (Suc 0))\n                                    (denote x2) n \\<rho> *\n                                   adjoint (x1 0));\n     \\<rho> \\<in> carrier_mat d d; partial_density_operator \\<rho>;\n     Im (trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>)) = 0;\n     Re (trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>)) \\<le> 1\\<rbrakk>\n    \\<Longrightarrow> x1 0 *\n                      denote_while_n_iter (x1 0) (x1 (Suc 0)) (denote x2)\n                       (Suc n) (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) *\n                      adjoint (x1 0) =\n                      complex_of_real c \\<cdot>\\<^sub>m\n                      (x1 0 *\n                       denote_while_n_iter (x1 0) (x1 (Suc 0)) (denote x2)\n                        (Suc n) \\<rho> *\n                       adjoint (x1 0))", "have \"trace (c \\<cdot>\\<^sub>m denote x2 (x1 1 * \\<rho> * adjoint (x1 1))) = c * trace (denote x2 (x1 1 * \\<rho> * adjoint (x1 1)))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. trace\n     (complex_of_real c \\<cdot>\\<^sub>m\n      denote x2 (x1 1 * \\<rho> * adjoint (x1 1))) =\n    complex_of_real c * trace (denote x2 (x1 1 * \\<rho> * adjoint (x1 1)))", "using trace_smult dimr"], ["proof (prove)\nusing this:\n  ?A \\<in> carrier_mat ?n ?n \\<Longrightarrow>\n  trace (?c \\<cdot>\\<^sub>m ?A) = ?c * trace ?A\n  denote x2 (x1 1 * \\<rho> * adjoint (x1 1)) \\<in> carrier_mat d d\n\ngoal (1 subgoal):\n 1. trace\n     (complex_of_real c \\<cdot>\\<^sub>m\n      denote x2 (x1 1 * \\<rho> * adjoint (x1 1))) =\n    complex_of_real c * trace (denote x2 (x1 1 * \\<rho> * adjoint (x1 1)))", "by auto"], ["proof (state)\nthis:\n  trace\n   (complex_of_real c \\<cdot>\\<^sub>m\n    denote x2 (x1 1 * \\<rho> * adjoint (x1 1))) =\n  complex_of_real c * trace (denote x2 (x1 1 * \\<rho> * adjoint (x1 1)))\n\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<And>\\<rho>.\n                \\<lbrakk>\\<rho> \\<in> carrier_mat d d;\n                 partial_density_operator \\<rho>;\n                 Im (trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>)) = 0;\n                 Re (trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>))\n                 \\<le> 1\\<rbrakk>\n                \\<Longrightarrow> x1 0 *\n                                  denote_while_n_iter (x1 0) (x1 (Suc 0))\n                                   (denote x2) n\n                                   (complex_of_real c \\<cdot>\\<^sub>m\n                                    \\<rho>) *\n                                  adjoint (x1 0) =\n                                  complex_of_real c \\<cdot>\\<^sub>m\n                                  (x1 0 *\n                                   denote_while_n_iter (x1 0) (x1 (Suc 0))\n                                    (denote x2) n \\<rho> *\n                                   adjoint (x1 0));\n     \\<rho> \\<in> carrier_mat d d; partial_density_operator \\<rho>;\n     Im (trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>)) = 0;\n     Re (trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>)) \\<le> 1\\<rbrakk>\n    \\<Longrightarrow> x1 0 *\n                      denote_while_n_iter (x1 0) (x1 (Suc 0)) (denote x2)\n                       (Suc n) (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) *\n                      adjoint (x1 0) =\n                      complex_of_real c \\<cdot>\\<^sub>m\n                      (x1 0 *\n                       denote_while_n_iter (x1 0) (x1 (Suc 0)) (denote x2)\n                        (Suc n) \\<rho> *\n                       adjoint (x1 0))", "moreover"], ["proof (state)\nthis:\n  trace\n   (complex_of_real c \\<cdot>\\<^sub>m\n    denote x2 (x1 1 * \\<rho> * adjoint (x1 1))) =\n  complex_of_real c * trace (denote x2 (x1 1 * \\<rho> * adjoint (x1 1)))\n\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<And>\\<rho>.\n                \\<lbrakk>\\<rho> \\<in> carrier_mat d d;\n                 partial_density_operator \\<rho>;\n                 Im (trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>)) = 0;\n                 Re (trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>))\n                 \\<le> 1\\<rbrakk>\n                \\<Longrightarrow> x1 0 *\n                                  denote_while_n_iter (x1 0) (x1 (Suc 0))\n                                   (denote x2) n\n                                   (complex_of_real c \\<cdot>\\<^sub>m\n                                    \\<rho>) *\n                                  adjoint (x1 0) =\n                                  complex_of_real c \\<cdot>\\<^sub>m\n                                  (x1 0 *\n                                   denote_while_n_iter (x1 0) (x1 (Suc 0))\n                                    (denote x2) n \\<rho> *\n                                   adjoint (x1 0));\n     \\<rho> \\<in> carrier_mat d d; partial_density_operator \\<rho>;\n     Im (trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>)) = 0;\n     Re (trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>)) \\<le> 1\\<rbrakk>\n    \\<Longrightarrow> x1 0 *\n                      denote_while_n_iter (x1 0) (x1 (Suc 0)) (denote x2)\n                       (Suc n) (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) *\n                      adjoint (x1 0) =\n                      complex_of_real c \\<cdot>\\<^sub>m\n                      (x1 0 *\n                       denote_while_n_iter (x1 0) (x1 (Suc 0)) (denote x2)\n                        (Suc n) \\<rho> *\n                       adjoint (x1 0))", "have trcr: \"trace (c \\<cdot>\\<^sub>m \\<rho>) = c * trace \\<rho>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) =\n    complex_of_real c * trace \\<rho>", "using trace_smult Suc"], ["proof (prove)\nusing this:\n  ?A \\<in> carrier_mat ?n ?n \\<Longrightarrow>\n  trace (?c \\<cdot>\\<^sub>m ?A) = ?c * trace ?A\n  \\<lbrakk>?\\<rho> \\<in> carrier_mat d d; partial_density_operator ?\\<rho>;\n   Im (trace (complex_of_real c \\<cdot>\\<^sub>m ?\\<rho>)) = 0;\n   Re (trace (complex_of_real c \\<cdot>\\<^sub>m ?\\<rho>)) \\<le> 1\\<rbrakk>\n  \\<Longrightarrow> x1 0 *\n                    denote_while_n_iter (x1 0) (x1 (Suc 0)) (denote x2) n\n                     (complex_of_real c \\<cdot>\\<^sub>m ?\\<rho>) *\n                    adjoint (x1 0) =\n                    complex_of_real c \\<cdot>\\<^sub>m\n                    (x1 0 *\n                     denote_while_n_iter (x1 0) (x1 (Suc 0)) (denote x2) n\n                      ?\\<rho> *\n                     adjoint (x1 0))\n  \\<rho> \\<in> carrier_mat d d\n  partial_density_operator \\<rho>\n  Im (trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>)) = 0\n  Re (trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>)) \\<le> 1\n\ngoal (1 subgoal):\n 1. trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) =\n    complex_of_real c * trace \\<rho>", "by auto"], ["proof (state)\nthis:\n  trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) =\n  complex_of_real c * trace \\<rho>\n\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<And>\\<rho>.\n                \\<lbrakk>\\<rho> \\<in> carrier_mat d d;\n                 partial_density_operator \\<rho>;\n                 Im (trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>)) = 0;\n                 Re (trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>))\n                 \\<le> 1\\<rbrakk>\n                \\<Longrightarrow> x1 0 *\n                                  denote_while_n_iter (x1 0) (x1 (Suc 0))\n                                   (denote x2) n\n                                   (complex_of_real c \\<cdot>\\<^sub>m\n                                    \\<rho>) *\n                                  adjoint (x1 0) =\n                                  complex_of_real c \\<cdot>\\<^sub>m\n                                  (x1 0 *\n                                   denote_while_n_iter (x1 0) (x1 (Suc 0))\n                                    (denote x2) n \\<rho> *\n                                   adjoint (x1 0));\n     \\<rho> \\<in> carrier_mat d d; partial_density_operator \\<rho>;\n     Im (trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>)) = 0;\n     Re (trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>)) \\<le> 1\\<rbrakk>\n    \\<Longrightarrow> x1 0 *\n                      denote_while_n_iter (x1 0) (x1 (Suc 0)) (denote x2)\n                       (Suc n) (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) *\n                      adjoint (x1 0) =\n                      complex_of_real c \\<cdot>\\<^sub>m\n                      (x1 0 *\n                       denote_while_n_iter (x1 0) (x1 (Suc 0)) (denote x2)\n                        (Suc n) \\<rho> *\n                       adjoint (x1 0))", "ultimately"], ["proof (chain)\npicking this:\n  trace (denote x2 (x1 1 * \\<rho> * adjoint (x1 1))) \\<le> trace \\<rho>\n  trace\n   (complex_of_real c \\<cdot>\\<^sub>m\n    denote x2 (x1 1 * \\<rho> * adjoint (x1 1))) =\n  complex_of_real c * trace (denote x2 (x1 1 * \\<rho> * adjoint (x1 1)))\n  trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) =\n  complex_of_real c * trace \\<rho>", "have \"trace (c \\<cdot>\\<^sub>m denote x2 (x1 1 * \\<rho> * adjoint (x1 1))) \\<le> trace (c \\<cdot>\\<^sub>m \\<rho>)\""], ["proof (prove)\nusing this:\n  trace (denote x2 (x1 1 * \\<rho> * adjoint (x1 1))) \\<le> trace \\<rho>\n  trace\n   (complex_of_real c \\<cdot>\\<^sub>m\n    denote x2 (x1 1 * \\<rho> * adjoint (x1 1))) =\n  complex_of_real c * trace (denote x2 (x1 1 * \\<rho> * adjoint (x1 1)))\n  trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) =\n  complex_of_real c * trace \\<rho>\n\ngoal (1 subgoal):\n 1. trace\n     (complex_of_real c \\<cdot>\\<^sub>m\n      denote x2 (x1 1 * \\<rho> * adjoint (x1 1)))\n    \\<le> trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>)", "using assms(1) state_sig.mulfact"], ["proof (prove)\nusing this:\n  trace (denote x2 (x1 1 * \\<rho> * adjoint (x1 1))) \\<le> trace \\<rho>\n  trace\n   (complex_of_real c \\<cdot>\\<^sub>m\n    denote x2 (x1 1 * \\<rho> * adjoint (x1 1))) =\n  complex_of_real c * trace (denote x2 (x1 1 * \\<rho> * adjoint (x1 1)))\n  trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) =\n  complex_of_real c * trace \\<rho>\n  0 \\<le> c\n  \\<lbrakk>0 \\<le> ?c; ?a \\<le> ?b\\<rbrakk>\n  \\<Longrightarrow> complex_of_real ?c * ?a \\<le> complex_of_real ?c * ?b\n\ngoal (1 subgoal):\n 1. trace\n     (complex_of_real c \\<cdot>\\<^sub>m\n      denote x2 (x1 1 * \\<rho> * adjoint (x1 1)))\n    \\<le> trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>)", "by auto"], ["proof (state)\nthis:\n  trace\n   (complex_of_real c \\<cdot>\\<^sub>m\n    denote x2 (x1 1 * \\<rho> * adjoint (x1 1)))\n  \\<le> trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>)\n\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<And>\\<rho>.\n                \\<lbrakk>\\<rho> \\<in> carrier_mat d d;\n                 partial_density_operator \\<rho>;\n                 Im (trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>)) = 0;\n                 Re (trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>))\n                 \\<le> 1\\<rbrakk>\n                \\<Longrightarrow> x1 0 *\n                                  denote_while_n_iter (x1 0) (x1 (Suc 0))\n                                   (denote x2) n\n                                   (complex_of_real c \\<cdot>\\<^sub>m\n                                    \\<rho>) *\n                                  adjoint (x1 0) =\n                                  complex_of_real c \\<cdot>\\<^sub>m\n                                  (x1 0 *\n                                   denote_while_n_iter (x1 0) (x1 (Suc 0))\n                                    (denote x2) n \\<rho> *\n                                   adjoint (x1 0));\n     \\<rho> \\<in> carrier_mat d d; partial_density_operator \\<rho>;\n     Im (trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>)) = 0;\n     Re (trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>)) \\<le> 1\\<rbrakk>\n    \\<Longrightarrow> x1 0 *\n                      denote_while_n_iter (x1 0) (x1 (Suc 0)) (denote x2)\n                       (Suc n) (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) *\n                      adjoint (x1 0) =\n                      complex_of_real c \\<cdot>\\<^sub>m\n                      (x1 0 *\n                       denote_while_n_iter (x1 0) (x1 (Suc 0)) (denote x2)\n                        (Suc n) \\<rho> *\n                       adjoint (x1 0))", "then"], ["proof (chain)\npicking this:\n  trace\n   (complex_of_real c \\<cdot>\\<^sub>m\n    denote x2 (x1 1 * \\<rho> * adjoint (x1 1)))\n  \\<le> trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>)", "have trrc: \"trace (c \\<cdot>\\<^sub>m denote x2 (x1 1 * \\<rho> * adjoint (x1 1))) \\<le>  1\""], ["proof (prove)\nusing this:\n  trace\n   (complex_of_real c \\<cdot>\\<^sub>m\n    denote x2 (x1 1 * \\<rho> * adjoint (x1 1)))\n  \\<le> trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>)\n\ngoal (1 subgoal):\n 1. trace\n     (complex_of_real c \\<cdot>\\<^sub>m\n      denote x2 (x1 1 * \\<rho> * adjoint (x1 1)))\n    \\<le> 1", "using Suc"], ["proof (prove)\nusing this:\n  trace\n   (complex_of_real c \\<cdot>\\<^sub>m\n    denote x2 (x1 1 * \\<rho> * adjoint (x1 1)))\n  \\<le> trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>)\n  \\<lbrakk>?\\<rho> \\<in> carrier_mat d d; partial_density_operator ?\\<rho>;\n   Im (trace (complex_of_real c \\<cdot>\\<^sub>m ?\\<rho>)) = 0;\n   Re (trace (complex_of_real c \\<cdot>\\<^sub>m ?\\<rho>)) \\<le> 1\\<rbrakk>\n  \\<Longrightarrow> x1 0 *\n                    denote_while_n_iter (x1 0) (x1 (Suc 0)) (denote x2) n\n                     (complex_of_real c \\<cdot>\\<^sub>m ?\\<rho>) *\n                    adjoint (x1 0) =\n                    complex_of_real c \\<cdot>\\<^sub>m\n                    (x1 0 *\n                     denote_while_n_iter (x1 0) (x1 (Suc 0)) (denote x2) n\n                      ?\\<rho> *\n                     adjoint (x1 0))\n  \\<rho> \\<in> carrier_mat d d\n  partial_density_operator \\<rho>\n  Im (trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>)) = 0\n  Re (trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>)) \\<le> 1\n\ngoal (1 subgoal):\n 1. trace\n     (complex_of_real c \\<cdot>\\<^sub>m\n      denote x2 (x1 1 * \\<rho> * adjoint (x1 1)))\n    \\<le> 1", "by auto"], ["proof (state)\nthis:\n  trace\n   (complex_of_real c \\<cdot>\\<^sub>m\n    denote x2 (x1 1 * \\<rho> * adjoint (x1 1)))\n  \\<le> 1\n\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<And>\\<rho>.\n                \\<lbrakk>\\<rho> \\<in> carrier_mat d d;\n                 partial_density_operator \\<rho>;\n                 Im (trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>)) = 0;\n                 Re (trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>))\n                 \\<le> 1\\<rbrakk>\n                \\<Longrightarrow> x1 0 *\n                                  denote_while_n_iter (x1 0) (x1 (Suc 0))\n                                   (denote x2) n\n                                   (complex_of_real c \\<cdot>\\<^sub>m\n                                    \\<rho>) *\n                                  adjoint (x1 0) =\n                                  complex_of_real c \\<cdot>\\<^sub>m\n                                  (x1 0 *\n                                   denote_while_n_iter (x1 0) (x1 (Suc 0))\n                                    (denote x2) n \\<rho> *\n                                   adjoint (x1 0));\n     \\<rho> \\<in> carrier_mat d d; partial_density_operator \\<rho>;\n     Im (trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>)) = 0;\n     Re (trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>)) \\<le> 1\\<rbrakk>\n    \\<Longrightarrow> x1 0 *\n                      denote_while_n_iter (x1 0) (x1 (Suc 0)) (denote x2)\n                       (Suc n) (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) *\n                      adjoint (x1 0) =\n                      complex_of_real c \\<cdot>\\<^sub>m\n                      (x1 0 *\n                       denote_while_n_iter (x1 0) (x1 (Suc 0)) (denote x2)\n                        (Suc n) \\<rho> *\n                       adjoint (x1 0))", "have \"trace (c \\<cdot>\\<^sub>m (x1 1 * \\<rho> * adjoint (x1 1))) = c * trace (x1 1 * \\<rho> * adjoint (x1 1))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. trace\n     (complex_of_real c \\<cdot>\\<^sub>m (x1 1 * \\<rho> * adjoint (x1 1))) =\n    complex_of_real c * trace (x1 1 * \\<rho> * adjoint (x1 1))", "using trace_smult dim1"], ["proof (prove)\nusing this:\n  ?A \\<in> carrier_mat ?n ?n \\<Longrightarrow>\n  trace (?c \\<cdot>\\<^sub>m ?A) = ?c * trace ?A\n  x1 1 * \\<rho> * adjoint (x1 1) \\<in> carrier_mat d d\n\ngoal (1 subgoal):\n 1. trace\n     (complex_of_real c \\<cdot>\\<^sub>m (x1 1 * \\<rho> * adjoint (x1 1))) =\n    complex_of_real c * trace (x1 1 * \\<rho> * adjoint (x1 1))", "by auto"], ["proof (state)\nthis:\n  trace\n   (complex_of_real c \\<cdot>\\<^sub>m (x1 1 * \\<rho> * adjoint (x1 1))) =\n  complex_of_real c * trace (x1 1 * \\<rho> * adjoint (x1 1))\n\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<And>\\<rho>.\n                \\<lbrakk>\\<rho> \\<in> carrier_mat d d;\n                 partial_density_operator \\<rho>;\n                 Im (trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>)) = 0;\n                 Re (trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>))\n                 \\<le> 1\\<rbrakk>\n                \\<Longrightarrow> x1 0 *\n                                  denote_while_n_iter (x1 0) (x1 (Suc 0))\n                                   (denote x2) n\n                                   (complex_of_real c \\<cdot>\\<^sub>m\n                                    \\<rho>) *\n                                  adjoint (x1 0) =\n                                  complex_of_real c \\<cdot>\\<^sub>m\n                                  (x1 0 *\n                                   denote_while_n_iter (x1 0) (x1 (Suc 0))\n                                    (denote x2) n \\<rho> *\n                                   adjoint (x1 0));\n     \\<rho> \\<in> carrier_mat d d; partial_density_operator \\<rho>;\n     Im (trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>)) = 0;\n     Re (trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>)) \\<le> 1\\<rbrakk>\n    \\<Longrightarrow> x1 0 *\n                      denote_while_n_iter (x1 0) (x1 (Suc 0)) (denote x2)\n                       (Suc n) (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) *\n                      adjoint (x1 0) =\n                      complex_of_real c \\<cdot>\\<^sub>m\n                      (x1 0 *\n                       denote_while_n_iter (x1 0) (x1 (Suc 0)) (denote x2)\n                        (Suc n) \\<rho> *\n                       adjoint (x1 0))", "then"], ["proof (chain)\npicking this:\n  trace\n   (complex_of_real c \\<cdot>\\<^sub>m (x1 1 * \\<rho> * adjoint (x1 1))) =\n  complex_of_real c * trace (x1 1 * \\<rho> * adjoint (x1 1))", "have \"trace (c \\<cdot>\\<^sub>m (x1 1 * \\<rho> * adjoint (x1 1))) \\<le> trace (c \\<cdot>\\<^sub>m \\<rho>)\""], ["proof (prove)\nusing this:\n  trace\n   (complex_of_real c \\<cdot>\\<^sub>m (x1 1 * \\<rho> * adjoint (x1 1))) =\n  complex_of_real c * trace (x1 1 * \\<rho> * adjoint (x1 1))\n\ngoal (1 subgoal):\n 1. trace\n     (complex_of_real c \\<cdot>\\<^sub>m (x1 1 * \\<rho> * adjoint (x1 1)))\n    \\<le> trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>)", "using trcr trr1 assms(1)"], ["proof (prove)\nusing this:\n  trace\n   (complex_of_real c \\<cdot>\\<^sub>m (x1 1 * \\<rho> * adjoint (x1 1))) =\n  complex_of_real c * trace (x1 1 * \\<rho> * adjoint (x1 1))\n  trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) =\n  complex_of_real c * trace \\<rho>\n  trace (x1 1 * \\<rho> * adjoint (x1 1)) \\<le> trace \\<rho>\n  0 \\<le> c\n\ngoal (1 subgoal):\n 1. trace\n     (complex_of_real c \\<cdot>\\<^sub>m (x1 1 * \\<rho> * adjoint (x1 1)))\n    \\<le> trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>)", "using state_sig.mulfact"], ["proof (prove)\nusing this:\n  trace\n   (complex_of_real c \\<cdot>\\<^sub>m (x1 1 * \\<rho> * adjoint (x1 1))) =\n  complex_of_real c * trace (x1 1 * \\<rho> * adjoint (x1 1))\n  trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) =\n  complex_of_real c * trace \\<rho>\n  trace (x1 1 * \\<rho> * adjoint (x1 1)) \\<le> trace \\<rho>\n  0 \\<le> c\n  \\<lbrakk>0 \\<le> ?c; ?a \\<le> ?b\\<rbrakk>\n  \\<Longrightarrow> complex_of_real ?c * ?a \\<le> complex_of_real ?c * ?b\n\ngoal (1 subgoal):\n 1. trace\n     (complex_of_real c \\<cdot>\\<^sub>m (x1 1 * \\<rho> * adjoint (x1 1)))\n    \\<le> trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>)", "by auto"], ["proof (state)\nthis:\n  trace (complex_of_real c \\<cdot>\\<^sub>m (x1 1 * \\<rho> * adjoint (x1 1)))\n  \\<le> trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>)\n\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<And>\\<rho>.\n                \\<lbrakk>\\<rho> \\<in> carrier_mat d d;\n                 partial_density_operator \\<rho>;\n                 Im (trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>)) = 0;\n                 Re (trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>))\n                 \\<le> 1\\<rbrakk>\n                \\<Longrightarrow> x1 0 *\n                                  denote_while_n_iter (x1 0) (x1 (Suc 0))\n                                   (denote x2) n\n                                   (complex_of_real c \\<cdot>\\<^sub>m\n                                    \\<rho>) *\n                                  adjoint (x1 0) =\n                                  complex_of_real c \\<cdot>\\<^sub>m\n                                  (x1 0 *\n                                   denote_while_n_iter (x1 0) (x1 (Suc 0))\n                                    (denote x2) n \\<rho> *\n                                   adjoint (x1 0));\n     \\<rho> \\<in> carrier_mat d d; partial_density_operator \\<rho>;\n     Im (trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>)) = 0;\n     Re (trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>)) \\<le> 1\\<rbrakk>\n    \\<Longrightarrow> x1 0 *\n                      denote_while_n_iter (x1 0) (x1 (Suc 0)) (denote x2)\n                       (Suc n) (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) *\n                      adjoint (x1 0) =\n                      complex_of_real c \\<cdot>\\<^sub>m\n                      (x1 0 *\n                       denote_while_n_iter (x1 0) (x1 (Suc 0)) (denote x2)\n                        (Suc n) \\<rho> *\n                       adjoint (x1 0))", "then"], ["proof (chain)\npicking this:\n  trace (complex_of_real c \\<cdot>\\<^sub>m (x1 1 * \\<rho> * adjoint (x1 1)))\n  \\<le> trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>)", "have trrle: \"trace (c \\<cdot>\\<^sub>m (x1 1 * \\<rho> * adjoint (x1 1))) \\<le> 1\""], ["proof (prove)\nusing this:\n  trace (complex_of_real c \\<cdot>\\<^sub>m (x1 1 * \\<rho> * adjoint (x1 1)))\n  \\<le> trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>)\n\ngoal (1 subgoal):\n 1. trace\n     (complex_of_real c \\<cdot>\\<^sub>m (x1 1 * \\<rho> * adjoint (x1 1)))\n    \\<le> 1", "using Suc"], ["proof (prove)\nusing this:\n  trace (complex_of_real c \\<cdot>\\<^sub>m (x1 1 * \\<rho> * adjoint (x1 1)))\n  \\<le> trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>)\n  \\<lbrakk>?\\<rho> \\<in> carrier_mat d d; partial_density_operator ?\\<rho>;\n   Im (trace (complex_of_real c \\<cdot>\\<^sub>m ?\\<rho>)) = 0;\n   Re (trace (complex_of_real c \\<cdot>\\<^sub>m ?\\<rho>)) \\<le> 1\\<rbrakk>\n  \\<Longrightarrow> x1 0 *\n                    denote_while_n_iter (x1 0) (x1 (Suc 0)) (denote x2) n\n                     (complex_of_real c \\<cdot>\\<^sub>m ?\\<rho>) *\n                    adjoint (x1 0) =\n                    complex_of_real c \\<cdot>\\<^sub>m\n                    (x1 0 *\n                     denote_while_n_iter (x1 0) (x1 (Suc 0)) (denote x2) n\n                      ?\\<rho> *\n                     adjoint (x1 0))\n  \\<rho> \\<in> carrier_mat d d\n  partial_density_operator \\<rho>\n  Im (trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>)) = 0\n  Re (trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>)) \\<le> 1\n\ngoal (1 subgoal):\n 1. trace\n     (complex_of_real c \\<cdot>\\<^sub>m (x1 1 * \\<rho> * adjoint (x1 1)))\n    \\<le> 1", "by auto"], ["proof (state)\nthis:\n  trace (complex_of_real c \\<cdot>\\<^sub>m (x1 1 * \\<rho> * adjoint (x1 1)))\n  \\<le> 1\n\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<And>\\<rho>.\n                \\<lbrakk>\\<rho> \\<in> carrier_mat d d;\n                 partial_density_operator \\<rho>;\n                 Im (trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>)) = 0;\n                 Re (trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>))\n                 \\<le> 1\\<rbrakk>\n                \\<Longrightarrow> x1 0 *\n                                  denote_while_n_iter (x1 0) (x1 (Suc 0))\n                                   (denote x2) n\n                                   (complex_of_real c \\<cdot>\\<^sub>m\n                                    \\<rho>) *\n                                  adjoint (x1 0) =\n                                  complex_of_real c \\<cdot>\\<^sub>m\n                                  (x1 0 *\n                                   denote_while_n_iter (x1 0) (x1 (Suc 0))\n                                    (denote x2) n \\<rho> *\n                                   adjoint (x1 0));\n     \\<rho> \\<in> carrier_mat d d; partial_density_operator \\<rho>;\n     Im (trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>)) = 0;\n     Re (trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>)) \\<le> 1\\<rbrakk>\n    \\<Longrightarrow> x1 0 *\n                      denote_while_n_iter (x1 0) (x1 (Suc 0)) (denote x2)\n                       (Suc n) (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) *\n                      adjoint (x1 0) =\n                      complex_of_real c \\<cdot>\\<^sub>m\n                      (x1 0 *\n                       denote_while_n_iter (x1 0) (x1 (Suc 0)) (denote x2)\n                        (Suc n) \\<rho> *\n                       adjoint (x1 0))", "have \"x1 1 * (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) * adjoint (x1 1) = complex_of_real c \\<cdot>\\<^sub>m (x1 1 * \\<rho> * adjoint (x1 1))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. x1 1 * (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) * adjoint (x1 1) =\n    complex_of_real c \\<cdot>\\<^sub>m (x1 1 * \\<rho> * adjoint (x1 1))", "apply (mat_assoc d)"], ["proof (prove)\ngoal (2 subgoals):\n 1. x1 1 \\<in> carrier_mat d d\n 2. \\<rho> \\<in> carrier_mat d d", "using Suc.prems(1) assms measurement_dim"], ["proof (prove)\nusing this:\n  \\<rho> \\<in> carrier_mat d d\n  0 \\<le> c\n  measurement d 2 x1\n  well_com x2\n  \\<lbrakk>?\\<rho> \\<in> carrier_mat d d; partial_density_operator ?\\<rho>;\n   trace (complex_of_real c \\<cdot>\\<^sub>m ?\\<rho>) \\<le> 1\\<rbrakk>\n  \\<Longrightarrow> denote x2 (complex_of_real c \\<cdot>\\<^sub>m ?\\<rho>) =\n                    complex_of_real c \\<cdot>\\<^sub>m denote x2 ?\\<rho>\n  \\<lbrakk>measurement ?d ?n ?M; ?k < ?n\\<rbrakk>\n  \\<Longrightarrow> ?M ?k \\<in> carrier_mat ?d ?d\n\ngoal (2 subgoals):\n 1. x1 1 \\<in> carrier_mat d d\n 2. \\<rho> \\<in> carrier_mat d d", "by auto"], ["proof (state)\nthis:\n  x1 1 * (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) * adjoint (x1 1) =\n  complex_of_real c \\<cdot>\\<^sub>m (x1 1 * \\<rho> * adjoint (x1 1))\n\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<And>\\<rho>.\n                \\<lbrakk>\\<rho> \\<in> carrier_mat d d;\n                 partial_density_operator \\<rho>;\n                 Im (trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>)) = 0;\n                 Re (trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>))\n                 \\<le> 1\\<rbrakk>\n                \\<Longrightarrow> x1 0 *\n                                  denote_while_n_iter (x1 0) (x1 (Suc 0))\n                                   (denote x2) n\n                                   (complex_of_real c \\<cdot>\\<^sub>m\n                                    \\<rho>) *\n                                  adjoint (x1 0) =\n                                  complex_of_real c \\<cdot>\\<^sub>m\n                                  (x1 0 *\n                                   denote_while_n_iter (x1 0) (x1 (Suc 0))\n                                    (denote x2) n \\<rho> *\n                                   adjoint (x1 0));\n     \\<rho> \\<in> carrier_mat d d; partial_density_operator \\<rho>;\n     Im (trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>)) = 0;\n     Re (trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>)) \\<le> 1\\<rbrakk>\n    \\<Longrightarrow> x1 0 *\n                      denote_while_n_iter (x1 0) (x1 (Suc 0)) (denote x2)\n                       (Suc n) (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) *\n                      adjoint (x1 0) =\n                      complex_of_real c \\<cdot>\\<^sub>m\n                      (x1 0 *\n                       denote_while_n_iter (x1 0) (x1 (Suc 0)) (denote x2)\n                        (Suc n) \\<rho> *\n                       adjoint (x1 0))", "then"], ["proof (chain)\npicking this:\n  x1 1 * (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) * adjoint (x1 1) =\n  complex_of_real c \\<cdot>\\<^sub>m (x1 1 * \\<rho> * adjoint (x1 1))", "have \"denote x2 (x1 1 * (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) * adjoint (x1 1)) =  (denote x2 (c \\<cdot>\\<^sub>m (x1 1 * (\\<rho>) * adjoint (x1 1))))\""], ["proof (prove)\nusing this:\n  x1 1 * (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) * adjoint (x1 1) =\n  complex_of_real c \\<cdot>\\<^sub>m (x1 1 * \\<rho> * adjoint (x1 1))\n\ngoal (1 subgoal):\n 1. denote x2\n     (x1 1 * (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) * adjoint (x1 1)) =\n    denote x2\n     (complex_of_real c \\<cdot>\\<^sub>m (x1 1 * \\<rho> * adjoint (x1 1)))", "by auto"], ["proof (state)\nthis:\n  denote x2\n   (x1 1 * (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) * adjoint (x1 1)) =\n  denote x2\n   (complex_of_real c \\<cdot>\\<^sub>m (x1 1 * \\<rho> * adjoint (x1 1)))\n\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<And>\\<rho>.\n                \\<lbrakk>\\<rho> \\<in> carrier_mat d d;\n                 partial_density_operator \\<rho>;\n                 Im (trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>)) = 0;\n                 Re (trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>))\n                 \\<le> 1\\<rbrakk>\n                \\<Longrightarrow> x1 0 *\n                                  denote_while_n_iter (x1 0) (x1 (Suc 0))\n                                   (denote x2) n\n                                   (complex_of_real c \\<cdot>\\<^sub>m\n                                    \\<rho>) *\n                                  adjoint (x1 0) =\n                                  complex_of_real c \\<cdot>\\<^sub>m\n                                  (x1 0 *\n                                   denote_while_n_iter (x1 0) (x1 (Suc 0))\n                                    (denote x2) n \\<rho> *\n                                   adjoint (x1 0));\n     \\<rho> \\<in> carrier_mat d d; partial_density_operator \\<rho>;\n     Im (trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>)) = 0;\n     Re (trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>)) \\<le> 1\\<rbrakk>\n    \\<Longrightarrow> x1 0 *\n                      denote_while_n_iter (x1 0) (x1 (Suc 0)) (denote x2)\n                       (Suc n) (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) *\n                      adjoint (x1 0) =\n                      complex_of_real c \\<cdot>\\<^sub>m\n                      (x1 0 *\n                       denote_while_n_iter (x1 0) (x1 (Suc 0)) (denote x2)\n                        (Suc n) \\<rho> *\n                       adjoint (x1 0))", "moreover"], ["proof (state)\nthis:\n  denote x2\n   (x1 1 * (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) * adjoint (x1 1)) =\n  denote x2\n   (complex_of_real c \\<cdot>\\<^sub>m (x1 1 * \\<rho> * adjoint (x1 1)))\n\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<And>\\<rho>.\n                \\<lbrakk>\\<rho> \\<in> carrier_mat d d;\n                 partial_density_operator \\<rho>;\n                 Im (trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>)) = 0;\n                 Re (trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>))\n                 \\<le> 1\\<rbrakk>\n                \\<Longrightarrow> x1 0 *\n                                  denote_while_n_iter (x1 0) (x1 (Suc 0))\n                                   (denote x2) n\n                                   (complex_of_real c \\<cdot>\\<^sub>m\n                                    \\<rho>) *\n                                  adjoint (x1 0) =\n                                  complex_of_real c \\<cdot>\\<^sub>m\n                                  (x1 0 *\n                                   denote_while_n_iter (x1 0) (x1 (Suc 0))\n                                    (denote x2) n \\<rho> *\n                                   adjoint (x1 0));\n     \\<rho> \\<in> carrier_mat d d; partial_density_operator \\<rho>;\n     Im (trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>)) = 0;\n     Re (trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>)) \\<le> 1\\<rbrakk>\n    \\<Longrightarrow> x1 0 *\n                      denote_while_n_iter (x1 0) (x1 (Suc 0)) (denote x2)\n                       (Suc n) (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) *\n                      adjoint (x1 0) =\n                      complex_of_real c \\<cdot>\\<^sub>m\n                      (x1 0 *\n                       denote_while_n_iter (x1 0) (x1 (Suc 0)) (denote x2)\n                        (Suc n) \\<rho> *\n                       adjoint (x1 0))", "have \"denote x2 (c \\<cdot>\\<^sub>m (x1 1 * \\<rho> * adjoint (x1 1))) = c \\<cdot>\\<^sub>m denote x2 (x1 1 * \\<rho> * adjoint (x1 1))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. denote x2\n     (complex_of_real c \\<cdot>\\<^sub>m (x1 1 * \\<rho> * adjoint (x1 1))) =\n    complex_of_real c \\<cdot>\\<^sub>m\n    denote x2 (x1 1 * \\<rho> * adjoint (x1 1))", "using assms(4) dim1 pdo1 trrle"], ["proof (prove)\nusing this:\n  \\<lbrakk>?\\<rho> \\<in> carrier_mat d d; partial_density_operator ?\\<rho>;\n   trace (complex_of_real c \\<cdot>\\<^sub>m ?\\<rho>) \\<le> 1\\<rbrakk>\n  \\<Longrightarrow> denote x2 (complex_of_real c \\<cdot>\\<^sub>m ?\\<rho>) =\n                    complex_of_real c \\<cdot>\\<^sub>m denote x2 ?\\<rho>\n  x1 1 * \\<rho> * adjoint (x1 1) \\<in> carrier_mat d d\n  partial_density_operator (x1 1 * \\<rho> * adjoint (x1 1))\n  trace (complex_of_real c \\<cdot>\\<^sub>m (x1 1 * \\<rho> * adjoint (x1 1)))\n  \\<le> 1\n\ngoal (1 subgoal):\n 1. denote x2\n     (complex_of_real c \\<cdot>\\<^sub>m (x1 1 * \\<rho> * adjoint (x1 1))) =\n    complex_of_real c \\<cdot>\\<^sub>m\n    denote x2 (x1 1 * \\<rho> * adjoint (x1 1))", "by auto"], ["proof (state)\nthis:\n  denote x2\n   (complex_of_real c \\<cdot>\\<^sub>m (x1 1 * \\<rho> * adjoint (x1 1))) =\n  complex_of_real c \\<cdot>\\<^sub>m\n  denote x2 (x1 1 * \\<rho> * adjoint (x1 1))\n\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<And>\\<rho>.\n                \\<lbrakk>\\<rho> \\<in> carrier_mat d d;\n                 partial_density_operator \\<rho>;\n                 Im (trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>)) = 0;\n                 Re (trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>))\n                 \\<le> 1\\<rbrakk>\n                \\<Longrightarrow> x1 0 *\n                                  denote_while_n_iter (x1 0) (x1 (Suc 0))\n                                   (denote x2) n\n                                   (complex_of_real c \\<cdot>\\<^sub>m\n                                    \\<rho>) *\n                                  adjoint (x1 0) =\n                                  complex_of_real c \\<cdot>\\<^sub>m\n                                  (x1 0 *\n                                   denote_while_n_iter (x1 0) (x1 (Suc 0))\n                                    (denote x2) n \\<rho> *\n                                   adjoint (x1 0));\n     \\<rho> \\<in> carrier_mat d d; partial_density_operator \\<rho>;\n     Im (trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>)) = 0;\n     Re (trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>)) \\<le> 1\\<rbrakk>\n    \\<Longrightarrow> x1 0 *\n                      denote_while_n_iter (x1 0) (x1 (Suc 0)) (denote x2)\n                       (Suc n) (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) *\n                      adjoint (x1 0) =\n                      complex_of_real c \\<cdot>\\<^sub>m\n                      (x1 0 *\n                       denote_while_n_iter (x1 0) (x1 (Suc 0)) (denote x2)\n                        (Suc n) \\<rho> *\n                       adjoint (x1 0))", "ultimately"], ["proof (chain)\npicking this:\n  denote x2\n   (x1 1 * (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) * adjoint (x1 1)) =\n  denote x2\n   (complex_of_real c \\<cdot>\\<^sub>m (x1 1 * \\<rho> * adjoint (x1 1)))\n  denote x2\n   (complex_of_real c \\<cdot>\\<^sub>m (x1 1 * \\<rho> * adjoint (x1 1))) =\n  complex_of_real c \\<cdot>\\<^sub>m\n  denote x2 (x1 1 * \\<rho> * adjoint (x1 1))", "have \"denote x2 (x1 1 * (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) * adjoint (x1 1)) = c \\<cdot>\\<^sub>m denote x2 (x1 1 * \\<rho> * adjoint (x1 1))\""], ["proof (prove)\nusing this:\n  denote x2\n   (x1 1 * (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) * adjoint (x1 1)) =\n  denote x2\n   (complex_of_real c \\<cdot>\\<^sub>m (x1 1 * \\<rho> * adjoint (x1 1)))\n  denote x2\n   (complex_of_real c \\<cdot>\\<^sub>m (x1 1 * \\<rho> * adjoint (x1 1))) =\n  complex_of_real c \\<cdot>\\<^sub>m\n  denote x2 (x1 1 * \\<rho> * adjoint (x1 1))\n\ngoal (1 subgoal):\n 1. denote x2\n     (x1 1 * (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) * adjoint (x1 1)) =\n    complex_of_real c \\<cdot>\\<^sub>m\n    denote x2 (x1 1 * \\<rho> * adjoint (x1 1))", "using assms"], ["proof (prove)\nusing this:\n  denote x2\n   (x1 1 * (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) * adjoint (x1 1)) =\n  denote x2\n   (complex_of_real c \\<cdot>\\<^sub>m (x1 1 * \\<rho> * adjoint (x1 1)))\n  denote x2\n   (complex_of_real c \\<cdot>\\<^sub>m (x1 1 * \\<rho> * adjoint (x1 1))) =\n  complex_of_real c \\<cdot>\\<^sub>m\n  denote x2 (x1 1 * \\<rho> * adjoint (x1 1))\n  0 \\<le> c\n  measurement d 2 x1\n  well_com x2\n  \\<lbrakk>?\\<rho> \\<in> carrier_mat d d; partial_density_operator ?\\<rho>;\n   trace (complex_of_real c \\<cdot>\\<^sub>m ?\\<rho>) \\<le> 1\\<rbrakk>\n  \\<Longrightarrow> denote x2 (complex_of_real c \\<cdot>\\<^sub>m ?\\<rho>) =\n                    complex_of_real c \\<cdot>\\<^sub>m denote x2 ?\\<rho>\n\ngoal (1 subgoal):\n 1. denote x2\n     (x1 1 * (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) * adjoint (x1 1)) =\n    complex_of_real c \\<cdot>\\<^sub>m\n    denote x2 (x1 1 * \\<rho> * adjoint (x1 1))", "by auto"], ["proof (state)\nthis:\n  denote x2\n   (x1 1 * (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) * adjoint (x1 1)) =\n  complex_of_real c \\<cdot>\\<^sub>m\n  denote x2 (x1 1 * \\<rho> * adjoint (x1 1))\n\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<And>\\<rho>.\n                \\<lbrakk>\\<rho> \\<in> carrier_mat d d;\n                 partial_density_operator \\<rho>;\n                 Im (trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>)) = 0;\n                 Re (trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>))\n                 \\<le> 1\\<rbrakk>\n                \\<Longrightarrow> x1 0 *\n                                  denote_while_n_iter (x1 0) (x1 (Suc 0))\n                                   (denote x2) n\n                                   (complex_of_real c \\<cdot>\\<^sub>m\n                                    \\<rho>) *\n                                  adjoint (x1 0) =\n                                  complex_of_real c \\<cdot>\\<^sub>m\n                                  (x1 0 *\n                                   denote_while_n_iter (x1 0) (x1 (Suc 0))\n                                    (denote x2) n \\<rho> *\n                                   adjoint (x1 0));\n     \\<rho> \\<in> carrier_mat d d; partial_density_operator \\<rho>;\n     Im (trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>)) = 0;\n     Re (trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>)) \\<le> 1\\<rbrakk>\n    \\<Longrightarrow> x1 0 *\n                      denote_while_n_iter (x1 0) (x1 (Suc 0)) (denote x2)\n                       (Suc n) (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) *\n                      adjoint (x1 0) =\n                      complex_of_real c \\<cdot>\\<^sub>m\n                      (x1 0 *\n                       denote_while_n_iter (x1 0) (x1 (Suc 0)) (denote x2)\n                        (Suc n) \\<rho> *\n                       adjoint (x1 0))", "then"], ["proof (chain)\npicking this:\n  denote x2\n   (x1 1 * (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) * adjoint (x1 1)) =\n  complex_of_real c \\<cdot>\\<^sub>m\n  denote x2 (x1 1 * \\<rho> * adjoint (x1 1))", "show ?thesis"], ["proof (prove)\nusing this:\n  denote x2\n   (x1 1 * (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) * adjoint (x1 1)) =\n  complex_of_real c \\<cdot>\\<^sub>m\n  denote x2 (x1 1 * \\<rho> * adjoint (x1 1))\n\ngoal (1 subgoal):\n 1. x1 0 *\n    denote_while_n_iter (x1 0) (x1 (Suc 0)) (denote x2) (Suc n)\n     (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) *\n    adjoint (x1 0) =\n    complex_of_real c \\<cdot>\\<^sub>m\n    (x1 0 *\n     denote_while_n_iter (x1 0) (x1 (Suc 0)) (denote x2) (Suc n) \\<rho> *\n     adjoint (x1 0))", "using Suc dimr pdor trrc"], ["proof (prove)\nusing this:\n  denote x2\n   (x1 1 * (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) * adjoint (x1 1)) =\n  complex_of_real c \\<cdot>\\<^sub>m\n  denote x2 (x1 1 * \\<rho> * adjoint (x1 1))\n  \\<lbrakk>?\\<rho> \\<in> carrier_mat d d; partial_density_operator ?\\<rho>;\n   Im (trace (complex_of_real c \\<cdot>\\<^sub>m ?\\<rho>)) = 0;\n   Re (trace (complex_of_real c \\<cdot>\\<^sub>m ?\\<rho>)) \\<le> 1\\<rbrakk>\n  \\<Longrightarrow> x1 0 *\n                    denote_while_n_iter (x1 0) (x1 (Suc 0)) (denote x2) n\n                     (complex_of_real c \\<cdot>\\<^sub>m ?\\<rho>) *\n                    adjoint (x1 0) =\n                    complex_of_real c \\<cdot>\\<^sub>m\n                    (x1 0 *\n                     denote_while_n_iter (x1 0) (x1 (Suc 0)) (denote x2) n\n                      ?\\<rho> *\n                     adjoint (x1 0))\n  \\<rho> \\<in> carrier_mat d d\n  partial_density_operator \\<rho>\n  Im (trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>)) = 0\n  Re (trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>)) \\<le> 1\n  denote x2 (x1 1 * \\<rho> * adjoint (x1 1)) \\<in> carrier_mat d d\n  partial_density_operator (denote x2 (x1 1 * \\<rho> * adjoint (x1 1)))\n  trace\n   (complex_of_real c \\<cdot>\\<^sub>m\n    denote x2 (x1 1 * \\<rho> * adjoint (x1 1)))\n  \\<le> 1\n\ngoal (1 subgoal):\n 1. x1 0 *\n    denote_while_n_iter (x1 0) (x1 (Suc 0)) (denote x2) (Suc n)\n     (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) *\n    adjoint (x1 0) =\n    complex_of_real c \\<cdot>\\<^sub>m\n    (x1 0 *\n     denote_while_n_iter (x1 0) (x1 (Suc 0)) (denote x2) (Suc n) \\<rho> *\n     adjoint (x1 0))", "by auto"], ["proof (state)\nthis:\n  x1 0 *\n  denote_while_n_iter (x1 0) (x1 (Suc 0)) (denote x2) (Suc n)\n   (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) *\n  adjoint (x1 0) =\n  complex_of_real c \\<cdot>\\<^sub>m\n  (x1 0 *\n   denote_while_n_iter (x1 0) (x1 (Suc 0)) (denote x2) (Suc n) \\<rho> *\n   adjoint (x1 0))\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  x1 0 *\n  denote_while_n_iter (x1 0) (x1 (Suc 0)) (denote x2) (Suc n)\n   (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) *\n  adjoint (x1 0) =\n  complex_of_real c \\<cdot>\\<^sub>m\n  (x1 0 *\n   denote_while_n_iter (x1 0) (x1 (Suc 0)) (denote x2) (Suc n) \\<rho> *\n   adjoint (x1 0))\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma denote_while_scale:\n  fixes c:: real\n  assumes \"\\<rho> \\<in> carrier_mat d d\"\n    \"partial_density_operator \\<rho>\"\n    \"trace (c \\<cdot>\\<^sub>m \\<rho>) \\<le> 1\" \"c \\<ge> 0\"\n    \"measurement d 2 x1\" \"well_com x2\"\n    \"(\\<And>\\<rho>. \\<rho> \\<in> carrier_mat d d \\<Longrightarrow> partial_density_operator \\<rho> \\<Longrightarrow> trace (c \\<cdot>\\<^sub>m \\<rho>) \\<le> 1 \\<Longrightarrow> \n      denote x2 (c \\<cdot>\\<^sub>m \\<rho>) =  c \\<cdot>\\<^sub>m denote x2 \\<rho>)\"\n  shows \"denote_while (x1 0) (x1 1) (denote x2) (c \\<cdot>\\<^sub>m \\<rho>) = c \\<cdot>\\<^sub>m denote_while (x1 0) (x1 1) (denote x2) \\<rho>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. denote_while (x1 0) (x1 1) (denote x2)\n     (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) =\n    complex_of_real c \\<cdot>\\<^sub>m\n    denote_while (x1 0) (x1 1) (denote x2) \\<rho>", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. denote_while (x1 0) (x1 1) (denote x2)\n     (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) =\n    complex_of_real c \\<cdot>\\<^sub>m\n    denote_while (x1 0) (x1 1) (denote x2) \\<rho>", "let ?A = \"x1 0\" and ?B = \"x1 1\""], ["proof (state)\ngoal (1 subgoal):\n 1. denote_while (x1 0) (x1 1) (denote x2)\n     (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) =\n    complex_of_real c \\<cdot>\\<^sub>m\n    denote_while (x1 0) (x1 1) (denote x2) \\<rho>", "have dx2:\"(\\<And>\\<rho>. \\<rho> \\<in> carrier_mat d d \\<Longrightarrow> partial_density_operator \\<rho> \\<Longrightarrow> positive ((denote x2) \\<rho>) \\<and> trace ((denote x2) \\<rho>) \\<le> trace \\<rho> \\<and> (denote x2) \\<rho> \\<in> carrier_mat d d) \""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>\\<rho>.\n       \\<lbrakk>\\<rho> \\<in> carrier_mat d d;\n        partial_density_operator \\<rho>\\<rbrakk>\n       \\<Longrightarrow> positive (denote x2 \\<rho>) \\<and>\n                         trace (denote x2 \\<rho>) \\<le> trace \\<rho> \\<and>\n                         denote x2 \\<rho> \\<in> carrier_mat d d", "using denote_positive_trace_dim assms"], ["proof (prove)\nusing this:\n  \\<lbrakk>well_com ?S; ?\\<rho> \\<in> carrier_mat d d;\n   partial_density_operator ?\\<rho>\\<rbrakk>\n  \\<Longrightarrow> positive (denote ?S ?\\<rho>) \\<and>\n                    trace (denote ?S ?\\<rho>) \\<le> trace ?\\<rho> \\<and>\n                    denote ?S ?\\<rho> \\<in> carrier_mat d d\n  \\<rho> \\<in> carrier_mat d d\n  partial_density_operator \\<rho>\n  trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) \\<le> 1\n  0 \\<le> c\n  measurement d 2 x1\n  well_com x2\n  \\<lbrakk>?\\<rho> \\<in> carrier_mat d d; partial_density_operator ?\\<rho>;\n   trace (complex_of_real c \\<cdot>\\<^sub>m ?\\<rho>) \\<le> 1\\<rbrakk>\n  \\<Longrightarrow> denote x2 (complex_of_real c \\<cdot>\\<^sub>m ?\\<rho>) =\n                    complex_of_real c \\<cdot>\\<^sub>m denote x2 ?\\<rho>\n\ngoal (1 subgoal):\n 1. \\<And>\\<rho>.\n       \\<lbrakk>\\<rho> \\<in> carrier_mat d d;\n        partial_density_operator \\<rho>\\<rbrakk>\n       \\<Longrightarrow> positive (denote x2 \\<rho>) \\<and>\n                         trace (denote x2 \\<rho>) \\<le> trace \\<rho> \\<and>\n                         denote x2 \\<rho> \\<in> carrier_mat d d", "by auto"], ["proof (state)\nthis:\n  \\<lbrakk>?\\<rho> \\<in> carrier_mat d d;\n   partial_density_operator ?\\<rho>\\<rbrakk>\n  \\<Longrightarrow> positive (denote x2 ?\\<rho>) \\<and>\n                    trace (denote x2 ?\\<rho>) \\<le> trace ?\\<rho> \\<and>\n                    denote x2 ?\\<rho> \\<in> carrier_mat d d\n\ngoal (1 subgoal):\n 1. denote_while (x1 0) (x1 1) (denote x2)\n     (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) =\n    complex_of_real c \\<cdot>\\<^sub>m\n    denote_while (x1 0) (x1 1) (denote x2) \\<rho>", "have lo1: \"adjoint ?A * ?A + adjoint ?B * ?B = 1\\<^sub>m d\""], ["proof (prove)\ngoal (1 subgoal):\n 1. adjoint (x1 0) * x1 0 + adjoint (x1 1) * x1 1 = 1\\<^sub>m d", "using measurement_id2 assms"], ["proof (prove)\nusing this:\n  measurement ?d 2 ?M \\<Longrightarrow>\n  adjoint (?M 0) * ?M 0 + adjoint (?M 1) * ?M 1 = 1\\<^sub>m ?d\n  \\<rho> \\<in> carrier_mat d d\n  partial_density_operator \\<rho>\n  trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) \\<le> 1\n  0 \\<le> c\n  measurement d 2 x1\n  well_com x2\n  \\<lbrakk>?\\<rho> \\<in> carrier_mat d d; partial_density_operator ?\\<rho>;\n   trace (complex_of_real c \\<cdot>\\<^sub>m ?\\<rho>) \\<le> 1\\<rbrakk>\n  \\<Longrightarrow> denote x2 (complex_of_real c \\<cdot>\\<^sub>m ?\\<rho>) =\n                    complex_of_real c \\<cdot>\\<^sub>m denote x2 ?\\<rho>\n\ngoal (1 subgoal):\n 1. adjoint (x1 0) * x1 0 + adjoint (x1 1) * x1 1 = 1\\<^sub>m d", "by auto"], ["proof (state)\nthis:\n  adjoint (x1 0) * x1 0 + adjoint (x1 1) * x1 1 = 1\\<^sub>m d\n\ngoal (1 subgoal):\n 1. denote_while (x1 0) (x1 1) (denote x2)\n     (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) =\n    complex_of_real c \\<cdot>\\<^sub>m\n    denote_while (x1 0) (x1 1) (denote x2) \\<rho>", "have ms: \"matrix_seq d (matrix_sum d (\\<lambda>n. denote_while_n ?A ?B (denote x2) n \\<rho>))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. matrix_seq d\n     (matrix_sum d\n       (\\<lambda>n. denote_while_n (x1 0) (x1 1) (denote x2) n \\<rho>))", "using denote_while_n_sum_mat_seq assms measurement_dim"], ["proof (prove)\nusing this:\n  \\<lbrakk>?\\<rho> \\<in> carrier_mat d d; ?x1.0 0 \\<in> carrier_mat d d;\n   ?x1.0 1 \\<in> carrier_mat d d; partial_density_operator ?\\<rho>;\n   well_com ?x2.0; measurement d 2 ?x1.0\\<rbrakk>\n  \\<Longrightarrow> matrix_seq d\n                     (matrix_sum d\n                       (\\<lambda>n.\n                           denote_while_n (?x1.0 0) (?x1.0 1) (denote ?x2.0)\n                            n ?\\<rho>))\n  \\<rho> \\<in> carrier_mat d d\n  partial_density_operator \\<rho>\n  trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) \\<le> 1\n  0 \\<le> c\n  measurement d 2 x1\n  well_com x2\n  \\<lbrakk>?\\<rho> \\<in> carrier_mat d d; partial_density_operator ?\\<rho>;\n   trace (complex_of_real c \\<cdot>\\<^sub>m ?\\<rho>) \\<le> 1\\<rbrakk>\n  \\<Longrightarrow> denote x2 (complex_of_real c \\<cdot>\\<^sub>m ?\\<rho>) =\n                    complex_of_real c \\<cdot>\\<^sub>m denote x2 ?\\<rho>\n  \\<lbrakk>measurement ?d ?n ?M; ?k < ?n\\<rbrakk>\n  \\<Longrightarrow> ?M ?k \\<in> carrier_mat ?d ?d\n\ngoal (1 subgoal):\n 1. matrix_seq d\n     (matrix_sum d\n       (\\<lambda>n. denote_while_n (x1 0) (x1 1) (denote x2) n \\<rho>))", "by auto"], ["proof (state)\nthis:\n  matrix_seq d\n   (matrix_sum d\n     (\\<lambda>n. denote_while_n (x1 0) (x1 1) (denote x2) n \\<rho>))\n\ngoal (1 subgoal):\n 1. denote_while (x1 0) (x1 1) (denote x2)\n     (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) =\n    complex_of_real c \\<cdot>\\<^sub>m\n    denote_while (x1 0) (x1 1) (denote x2) \\<rho>", "have trcless: \"trace (c \\<cdot>\\<^sub>m matrix_sum d (\\<lambda>n. denote_while_n (x1 0) (x1 1) (denote x2) n \\<rho>) n) \\<le> 1\" for n"], ["proof (prove)\ngoal (1 subgoal):\n 1. trace\n     (complex_of_real c \\<cdot>\\<^sub>m\n      matrix_sum d\n       (\\<lambda>n. denote_while_n (x1 0) (x1 1) (denote x2) n \\<rho>) n)\n    \\<le> 1", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. trace\n     (complex_of_real c \\<cdot>\\<^sub>m\n      matrix_sum d\n       (\\<lambda>n. denote_while_n (x1 0) (x1 1) (denote x2) n \\<rho>) n)\n    \\<le> 1", "have dimr: \"matrix_sum d (\\<lambda>n. denote_while_n (x1 0) (x1 1) (denote x2) n \\<rho>) n \\<in> carrier_mat d d\""], ["proof (prove)\ngoal (1 subgoal):\n 1. matrix_sum d\n     (\\<lambda>n. denote_while_n (x1 0) (x1 1) (denote x2) n \\<rho>) n\n    \\<in> carrier_mat d d", "using assms dx2 denote_while_n_dim matrix_sum_dim"], ["proof (prove)\nusing this:\n  \\<rho> \\<in> carrier_mat d d\n  partial_density_operator \\<rho>\n  trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) \\<le> 1\n  0 \\<le> c\n  measurement d 2 x1\n  well_com x2\n  \\<lbrakk>?\\<rho> \\<in> carrier_mat d d; partial_density_operator ?\\<rho>;\n   trace (complex_of_real c \\<cdot>\\<^sub>m ?\\<rho>) \\<le> 1\\<rbrakk>\n  \\<Longrightarrow> denote x2 (complex_of_real c \\<cdot>\\<^sub>m ?\\<rho>) =\n                    complex_of_real c \\<cdot>\\<^sub>m denote x2 ?\\<rho>\n  \\<lbrakk>?\\<rho> \\<in> carrier_mat d d;\n   partial_density_operator ?\\<rho>\\<rbrakk>\n  \\<Longrightarrow> positive (denote x2 ?\\<rho>) \\<and>\n                    trace (denote x2 ?\\<rho>) \\<le> trace ?\\<rho> \\<and>\n                    denote x2 ?\\<rho> \\<in> carrier_mat d d\n  \\<lbrakk>?\\<rho> \\<in> carrier_mat d d; ?M0.0 \\<in> carrier_mat d d;\n   ?M1.0 \\<in> carrier_mat d d; partial_density_operator ?\\<rho>;\n   \\<And>\\<rho>'.\n      \\<lbrakk>\\<rho>' \\<in> carrier_mat d d;\n       partial_density_operator \\<rho>'\\<rbrakk>\n      \\<Longrightarrow> positive (?DS \\<rho>') \\<and>\n                        trace (?DS \\<rho>') \\<le> trace \\<rho>' \\<and>\n                        ?DS \\<rho>' \\<in> carrier_mat d d\\<rbrakk>\n  \\<Longrightarrow> denote_while_n ?M0.0 ?M1.0 ?DS ?n ?\\<rho>\n                    \\<in> carrier_mat d d\n  (\\<And>k.\n      k < ?n \\<Longrightarrow>\n      ?f k \\<in> carrier_mat ?d ?d) \\<Longrightarrow>\n  matrix_sum ?d ?f ?n \\<in> carrier_mat ?d ?d\n\ngoal (1 subgoal):\n 1. matrix_sum d\n     (\\<lambda>n. denote_while_n (x1 0) (x1 1) (denote x2) n \\<rho>) n\n    \\<in> carrier_mat d d", "using matrix_seq.dim ms"], ["proof (prove)\nusing this:\n  \\<rho> \\<in> carrier_mat d d\n  partial_density_operator \\<rho>\n  trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) \\<le> 1\n  0 \\<le> c\n  measurement d 2 x1\n  well_com x2\n  \\<lbrakk>?\\<rho> \\<in> carrier_mat d d; partial_density_operator ?\\<rho>;\n   trace (complex_of_real c \\<cdot>\\<^sub>m ?\\<rho>) \\<le> 1\\<rbrakk>\n  \\<Longrightarrow> denote x2 (complex_of_real c \\<cdot>\\<^sub>m ?\\<rho>) =\n                    complex_of_real c \\<cdot>\\<^sub>m denote x2 ?\\<rho>\n  \\<lbrakk>?\\<rho> \\<in> carrier_mat d d;\n   partial_density_operator ?\\<rho>\\<rbrakk>\n  \\<Longrightarrow> positive (denote x2 ?\\<rho>) \\<and>\n                    trace (denote x2 ?\\<rho>) \\<le> trace ?\\<rho> \\<and>\n                    denote x2 ?\\<rho> \\<in> carrier_mat d d\n  \\<lbrakk>?\\<rho> \\<in> carrier_mat d d; ?M0.0 \\<in> carrier_mat d d;\n   ?M1.0 \\<in> carrier_mat d d; partial_density_operator ?\\<rho>;\n   \\<And>\\<rho>'.\n      \\<lbrakk>\\<rho>' \\<in> carrier_mat d d;\n       partial_density_operator \\<rho>'\\<rbrakk>\n      \\<Longrightarrow> positive (?DS \\<rho>') \\<and>\n                        trace (?DS \\<rho>') \\<le> trace \\<rho>' \\<and>\n                        ?DS \\<rho>' \\<in> carrier_mat d d\\<rbrakk>\n  \\<Longrightarrow> denote_while_n ?M0.0 ?M1.0 ?DS ?n ?\\<rho>\n                    \\<in> carrier_mat d d\n  (\\<And>k.\n      k < ?n \\<Longrightarrow>\n      ?f k \\<in> carrier_mat ?d ?d) \\<Longrightarrow>\n  matrix_sum ?d ?f ?n \\<in> carrier_mat ?d ?d\n  matrix_seq ?dim ?f \\<Longrightarrow> ?f ?n \\<in> carrier_mat ?dim ?dim\n  matrix_seq d\n   (matrix_sum d\n     (\\<lambda>n. denote_while_n (x1 0) (x1 1) (denote x2) n \\<rho>))\n\ngoal (1 subgoal):\n 1. matrix_sum d\n     (\\<lambda>n. denote_while_n (x1 0) (x1 1) (denote x2) n \\<rho>) n\n    \\<in> carrier_mat d d", "by auto"], ["proof (state)\nthis:\n  matrix_sum d\n   (\\<lambda>n. denote_while_n (x1 0) (x1 1) (denote x2) n \\<rho>) n\n  \\<in> carrier_mat d d\n\ngoal (1 subgoal):\n 1. trace\n     (complex_of_real c \\<cdot>\\<^sub>m\n      matrix_sum d\n       (\\<lambda>n. denote_while_n (x1 0) (x1 1) (denote x2) n \\<rho>) n)\n    \\<le> 1", "have \"trace (matrix_sum d (\\<lambda>n. denote_while_n ?A ?B (denote x2) n \\<rho>) n) \\<le> trace \\<rho>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. trace\n     (matrix_sum d\n       (\\<lambda>n. denote_while_n (x1 0) (x1 1) (denote x2) n \\<rho>) n)\n    \\<le> trace \\<rho>", "using denote_while_n_sum_trace dx2 lo1 assms measurement_dim"], ["proof (prove)\nusing this:\n  \\<lbrakk>?M0.0 \\<in> carrier_mat d d; ?M1.0 \\<in> carrier_mat d d;\n   adjoint ?M0.0 * ?M0.0 + adjoint ?M1.0 * ?M1.0 = 1\\<^sub>m d;\n   \\<And>\\<rho>.\n      \\<lbrakk>\\<rho> \\<in> carrier_mat d d;\n       partial_density_operator \\<rho>\\<rbrakk>\n      \\<Longrightarrow> positive (?DS \\<rho>) \\<and>\n                        trace (?DS \\<rho>) \\<le> trace \\<rho> \\<and>\n                        ?DS \\<rho> \\<in> carrier_mat d d;\n   ?\\<rho> \\<in> carrier_mat d d; partial_density_operator ?\\<rho>\\<rbrakk>\n  \\<Longrightarrow> trace\n                     (matrix_sum d\n                       (\\<lambda>n.\n                           denote_while_n ?M0.0 ?M1.0 ?DS n ?\\<rho>)\n                       ?n)\n                    \\<le> trace ?\\<rho>\n  \\<lbrakk>?\\<rho> \\<in> carrier_mat d d;\n   partial_density_operator ?\\<rho>\\<rbrakk>\n  \\<Longrightarrow> positive (denote x2 ?\\<rho>) \\<and>\n                    trace (denote x2 ?\\<rho>) \\<le> trace ?\\<rho> \\<and>\n                    denote x2 ?\\<rho> \\<in> carrier_mat d d\n  adjoint (x1 0) * x1 0 + adjoint (x1 1) * x1 1 = 1\\<^sub>m d\n  \\<rho> \\<in> carrier_mat d d\n  partial_density_operator \\<rho>\n  trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) \\<le> 1\n  0 \\<le> c\n  measurement d 2 x1\n  well_com x2\n  \\<lbrakk>?\\<rho> \\<in> carrier_mat d d; partial_density_operator ?\\<rho>;\n   trace (complex_of_real c \\<cdot>\\<^sub>m ?\\<rho>) \\<le> 1\\<rbrakk>\n  \\<Longrightarrow> denote x2 (complex_of_real c \\<cdot>\\<^sub>m ?\\<rho>) =\n                    complex_of_real c \\<cdot>\\<^sub>m denote x2 ?\\<rho>\n  \\<lbrakk>measurement ?d ?n ?M; ?k < ?n\\<rbrakk>\n  \\<Longrightarrow> ?M ?k \\<in> carrier_mat ?d ?d\n\ngoal (1 subgoal):\n 1. trace\n     (matrix_sum d\n       (\\<lambda>n. denote_while_n (x1 0) (x1 1) (denote x2) n \\<rho>) n)\n    \\<le> trace \\<rho>", "by auto"], ["proof (state)\nthis:\n  trace\n   (matrix_sum d\n     (\\<lambda>n. denote_while_n (x1 0) (x1 1) (denote x2) n \\<rho>) n)\n  \\<le> trace \\<rho>\n\ngoal (1 subgoal):\n 1. trace\n     (complex_of_real c \\<cdot>\\<^sub>m\n      matrix_sum d\n       (\\<lambda>n. denote_while_n (x1 0) (x1 1) (denote x2) n \\<rho>) n)\n    \\<le> 1", "moreover"], ["proof (state)\nthis:\n  trace\n   (matrix_sum d\n     (\\<lambda>n. denote_while_n (x1 0) (x1 1) (denote x2) n \\<rho>) n)\n  \\<le> trace \\<rho>\n\ngoal (1 subgoal):\n 1. trace\n     (complex_of_real c \\<cdot>\\<^sub>m\n      matrix_sum d\n       (\\<lambda>n. denote_while_n (x1 0) (x1 1) (denote x2) n \\<rho>) n)\n    \\<le> 1", "have \"trace (c \\<cdot>\\<^sub>m matrix_sum d (\\<lambda>n. denote_while_n (x1 0) (x1 1) (denote x2) n \\<rho>) n) = c * trace (matrix_sum d (\\<lambda>n. denote_while_n (x1 0) (x1 1) (denote x2) n \\<rho>) n)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. trace\n     (complex_of_real c \\<cdot>\\<^sub>m\n      matrix_sum d\n       (\\<lambda>n. denote_while_n (x1 0) (x1 1) (denote x2) n \\<rho>) n) =\n    complex_of_real c *\n    trace\n     (matrix_sum d\n       (\\<lambda>n. denote_while_n (x1 0) (x1 1) (denote x2) n \\<rho>) n)", "using trace_smult dimr"], ["proof (prove)\nusing this:\n  ?A \\<in> carrier_mat ?n ?n \\<Longrightarrow>\n  trace (?c \\<cdot>\\<^sub>m ?A) = ?c * trace ?A\n  matrix_sum d\n   (\\<lambda>n. denote_while_n (x1 0) (x1 1) (denote x2) n \\<rho>) n\n  \\<in> carrier_mat d d\n\ngoal (1 subgoal):\n 1. trace\n     (complex_of_real c \\<cdot>\\<^sub>m\n      matrix_sum d\n       (\\<lambda>n. denote_while_n (x1 0) (x1 1) (denote x2) n \\<rho>) n) =\n    complex_of_real c *\n    trace\n     (matrix_sum d\n       (\\<lambda>n. denote_while_n (x1 0) (x1 1) (denote x2) n \\<rho>) n)", "by auto"], ["proof (state)\nthis:\n  trace\n   (complex_of_real c \\<cdot>\\<^sub>m\n    matrix_sum d\n     (\\<lambda>n. denote_while_n (x1 0) (x1 1) (denote x2) n \\<rho>) n) =\n  complex_of_real c *\n  trace\n   (matrix_sum d\n     (\\<lambda>n. denote_while_n (x1 0) (x1 1) (denote x2) n \\<rho>) n)\n\ngoal (1 subgoal):\n 1. trace\n     (complex_of_real c \\<cdot>\\<^sub>m\n      matrix_sum d\n       (\\<lambda>n. denote_while_n (x1 0) (x1 1) (denote x2) n \\<rho>) n)\n    \\<le> 1", "moreover"], ["proof (state)\nthis:\n  trace\n   (complex_of_real c \\<cdot>\\<^sub>m\n    matrix_sum d\n     (\\<lambda>n. denote_while_n (x1 0) (x1 1) (denote x2) n \\<rho>) n) =\n  complex_of_real c *\n  trace\n   (matrix_sum d\n     (\\<lambda>n. denote_while_n (x1 0) (x1 1) (denote x2) n \\<rho>) n)\n\ngoal (1 subgoal):\n 1. trace\n     (complex_of_real c \\<cdot>\\<^sub>m\n      matrix_sum d\n       (\\<lambda>n. denote_while_n (x1 0) (x1 1) (denote x2) n \\<rho>) n)\n    \\<le> 1", "have \"trace (c \\<cdot>\\<^sub>m \\<rho>) =  c * trace \\<rho>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) =\n    complex_of_real c * trace \\<rho>", "using trace_smult assms"], ["proof (prove)\nusing this:\n  ?A \\<in> carrier_mat ?n ?n \\<Longrightarrow>\n  trace (?c \\<cdot>\\<^sub>m ?A) = ?c * trace ?A\n  \\<rho> \\<in> carrier_mat d d\n  partial_density_operator \\<rho>\n  trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) \\<le> 1\n  0 \\<le> c\n  measurement d 2 x1\n  well_com x2\n  \\<lbrakk>?\\<rho> \\<in> carrier_mat d d; partial_density_operator ?\\<rho>;\n   trace (complex_of_real c \\<cdot>\\<^sub>m ?\\<rho>) \\<le> 1\\<rbrakk>\n  \\<Longrightarrow> denote x2 (complex_of_real c \\<cdot>\\<^sub>m ?\\<rho>) =\n                    complex_of_real c \\<cdot>\\<^sub>m denote x2 ?\\<rho>\n\ngoal (1 subgoal):\n 1. trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) =\n    complex_of_real c * trace \\<rho>", "by auto"], ["proof (state)\nthis:\n  trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) =\n  complex_of_real c * trace \\<rho>\n\ngoal (1 subgoal):\n 1. trace\n     (complex_of_real c \\<cdot>\\<^sub>m\n      matrix_sum d\n       (\\<lambda>n. denote_while_n (x1 0) (x1 1) (denote x2) n \\<rho>) n)\n    \\<le> 1", "ultimately"], ["proof (chain)\npicking this:\n  trace\n   (matrix_sum d\n     (\\<lambda>n. denote_while_n (x1 0) (x1 1) (denote x2) n \\<rho>) n)\n  \\<le> trace \\<rho>\n  trace\n   (complex_of_real c \\<cdot>\\<^sub>m\n    matrix_sum d\n     (\\<lambda>n. denote_while_n (x1 0) (x1 1) (denote x2) n \\<rho>) n) =\n  complex_of_real c *\n  trace\n   (matrix_sum d\n     (\\<lambda>n. denote_while_n (x1 0) (x1 1) (denote x2) n \\<rho>) n)\n  trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) =\n  complex_of_real c * trace \\<rho>", "have \"trace (c \\<cdot>\\<^sub>m matrix_sum d (\\<lambda>n. denote_while_n (x1 0) (x1 1) (denote x2) n \\<rho>) n) \\<le> trace (c \\<cdot>\\<^sub>m \\<rho>)\""], ["proof (prove)\nusing this:\n  trace\n   (matrix_sum d\n     (\\<lambda>n. denote_while_n (x1 0) (x1 1) (denote x2) n \\<rho>) n)\n  \\<le> trace \\<rho>\n  trace\n   (complex_of_real c \\<cdot>\\<^sub>m\n    matrix_sum d\n     (\\<lambda>n. denote_while_n (x1 0) (x1 1) (denote x2) n \\<rho>) n) =\n  complex_of_real c *\n  trace\n   (matrix_sum d\n     (\\<lambda>n. denote_while_n (x1 0) (x1 1) (denote x2) n \\<rho>) n)\n  trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) =\n  complex_of_real c * trace \\<rho>\n\ngoal (1 subgoal):\n 1. trace\n     (complex_of_real c \\<cdot>\\<^sub>m\n      matrix_sum d\n       (\\<lambda>n. denote_while_n (x1 0) (x1 1) (denote x2) n \\<rho>) n)\n    \\<le> trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>)", "using  assms(4)"], ["proof (prove)\nusing this:\n  trace\n   (matrix_sum d\n     (\\<lambda>n. denote_while_n (x1 0) (x1 1) (denote x2) n \\<rho>) n)\n  \\<le> trace \\<rho>\n  trace\n   (complex_of_real c \\<cdot>\\<^sub>m\n    matrix_sum d\n     (\\<lambda>n. denote_while_n (x1 0) (x1 1) (denote x2) n \\<rho>) n) =\n  complex_of_real c *\n  trace\n   (matrix_sum d\n     (\\<lambda>n. denote_while_n (x1 0) (x1 1) (denote x2) n \\<rho>) n)\n  trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) =\n  complex_of_real c * trace \\<rho>\n  0 \\<le> c\n\ngoal (1 subgoal):\n 1. trace\n     (complex_of_real c \\<cdot>\\<^sub>m\n      matrix_sum d\n       (\\<lambda>n. denote_while_n (x1 0) (x1 1) (denote x2) n \\<rho>) n)\n    \\<le> trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>)", "by (simp add: ordered_comm_semiring_class.comm_mult_left_mono)"], ["proof (state)\nthis:\n  trace\n   (complex_of_real c \\<cdot>\\<^sub>m\n    matrix_sum d\n     (\\<lambda>n. denote_while_n (x1 0) (x1 1) (denote x2) n \\<rho>) n)\n  \\<le> trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>)\n\ngoal (1 subgoal):\n 1. trace\n     (complex_of_real c \\<cdot>\\<^sub>m\n      matrix_sum d\n       (\\<lambda>n. denote_while_n (x1 0) (x1 1) (denote x2) n \\<rho>) n)\n    \\<le> 1", "then"], ["proof (chain)\npicking this:\n  trace\n   (complex_of_real c \\<cdot>\\<^sub>m\n    matrix_sum d\n     (\\<lambda>n. denote_while_n (x1 0) (x1 1) (denote x2) n \\<rho>) n)\n  \\<le> trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>)", "show ?thesis"], ["proof (prove)\nusing this:\n  trace\n   (complex_of_real c \\<cdot>\\<^sub>m\n    matrix_sum d\n     (\\<lambda>n. denote_while_n (x1 0) (x1 1) (denote x2) n \\<rho>) n)\n  \\<le> trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>)\n\ngoal (1 subgoal):\n 1. trace\n     (complex_of_real c \\<cdot>\\<^sub>m\n      matrix_sum d\n       (\\<lambda>n. denote_while_n (x1 0) (x1 1) (denote x2) n \\<rho>) n)\n    \\<le> 1", "using assms"], ["proof (prove)\nusing this:\n  trace\n   (complex_of_real c \\<cdot>\\<^sub>m\n    matrix_sum d\n     (\\<lambda>n. denote_while_n (x1 0) (x1 1) (denote x2) n \\<rho>) n)\n  \\<le> trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>)\n  \\<rho> \\<in> carrier_mat d d\n  partial_density_operator \\<rho>\n  trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) \\<le> 1\n  0 \\<le> c\n  measurement d 2 x1\n  well_com x2\n  \\<lbrakk>?\\<rho> \\<in> carrier_mat d d; partial_density_operator ?\\<rho>;\n   trace (complex_of_real c \\<cdot>\\<^sub>m ?\\<rho>) \\<le> 1\\<rbrakk>\n  \\<Longrightarrow> denote x2 (complex_of_real c \\<cdot>\\<^sub>m ?\\<rho>) =\n                    complex_of_real c \\<cdot>\\<^sub>m denote x2 ?\\<rho>\n\ngoal (1 subgoal):\n 1. trace\n     (complex_of_real c \\<cdot>\\<^sub>m\n      matrix_sum d\n       (\\<lambda>n. denote_while_n (x1 0) (x1 1) (denote x2) n \\<rho>) n)\n    \\<le> 1", "by auto"], ["proof (state)\nthis:\n  trace\n   (complex_of_real c \\<cdot>\\<^sub>m\n    matrix_sum d\n     (\\<lambda>n. denote_while_n (x1 0) (x1 1) (denote x2) n \\<rho>) n)\n  \\<le> 1\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  trace\n   (complex_of_real c \\<cdot>\\<^sub>m\n    matrix_sum d\n     (\\<lambda>n. denote_while_n (x1 0) (x1 1) (denote x2) n \\<rho>) ?n)\n  \\<le> 1\n\ngoal (1 subgoal):\n 1. denote_while (x1 0) (x1 1) (denote x2)\n     (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) =\n    complex_of_real c \\<cdot>\\<^sub>m\n    denote_while (x1 0) (x1 1) (denote x2) \\<rho>", "have llscale: \"matrix_seq.lowner_lub  (\\<lambda>n. c \\<cdot>\\<^sub>m (matrix_sum d (\\<lambda>n. denote_while_n ?A ?B (denote x2) n \\<rho>)) n) \n    = c \\<cdot>\\<^sub>m matrix_seq.lowner_lub (matrix_sum d (\\<lambda>n. denote_while_n ?A ?B (denote x2) n \\<rho>))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. matrix_seq.lowner_lub\n     (\\<lambda>n.\n         complex_of_real c \\<cdot>\\<^sub>m\n         matrix_sum d\n          (\\<lambda>n. denote_while_n (x1 0) (x1 1) (denote x2) n \\<rho>)\n          n) =\n    complex_of_real c \\<cdot>\\<^sub>m\n    matrix_seq.lowner_lub\n     (matrix_sum d\n       (\\<lambda>n. denote_while_n (x1 0) (x1 1) (denote x2) n \\<rho>))", "using lowner_lub_scale[of d \"(matrix_sum d (\\<lambda>n. denote_while_n (x1 0) (x1 1) (denote x2) n \\<rho>))\" c] ms trcless assms(4)"], ["proof (prove)\nusing this:\n  \\<lbrakk>matrix_seq d\n            (matrix_sum d\n              (\\<lambda>n.\n                  denote_while_n (x1 0) (x1 1) (denote x2) n \\<rho>));\n   \\<forall>n.\n      trace\n       (complex_of_real c \\<cdot>\\<^sub>m\n        matrix_sum d\n         (\\<lambda>n. denote_while_n (x1 0) (x1 1) (denote x2) n \\<rho>) n)\n      \\<le> 1;\n   0 \\<le> c\\<rbrakk>\n  \\<Longrightarrow> matrix_seq.lowner_lub\n                     (\\<lambda>n.\n                         complex_of_real c \\<cdot>\\<^sub>m\n                         matrix_sum d\n                          (\\<lambda>n.\n                              denote_while_n (x1 0) (x1 1) (denote x2) n\n                               \\<rho>)\n                          n) =\n                    complex_of_real c \\<cdot>\\<^sub>m\n                    matrix_seq.lowner_lub\n                     (matrix_sum d\n                       (\\<lambda>n.\n                           denote_while_n (x1 0) (x1 1) (denote x2) n\n                            \\<rho>))\n  matrix_seq d\n   (matrix_sum d\n     (\\<lambda>n. denote_while_n (x1 0) (x1 1) (denote x2) n \\<rho>))\n  trace\n   (complex_of_real c \\<cdot>\\<^sub>m\n    matrix_sum d\n     (\\<lambda>n. denote_while_n (x1 0) (x1 1) (denote x2) n \\<rho>) ?n)\n  \\<le> 1\n  0 \\<le> c\n\ngoal (1 subgoal):\n 1. matrix_seq.lowner_lub\n     (\\<lambda>n.\n         complex_of_real c \\<cdot>\\<^sub>m\n         matrix_sum d\n          (\\<lambda>n. denote_while_n (x1 0) (x1 1) (denote x2) n \\<rho>)\n          n) =\n    complex_of_real c \\<cdot>\\<^sub>m\n    matrix_seq.lowner_lub\n     (matrix_sum d\n       (\\<lambda>n. denote_while_n (x1 0) (x1 1) (denote x2) n \\<rho>))", "by auto"], ["proof (state)\nthis:\n  matrix_seq.lowner_lub\n   (\\<lambda>n.\n       complex_of_real c \\<cdot>\\<^sub>m\n       matrix_sum d\n        (\\<lambda>n. denote_while_n (x1 0) (x1 1) (denote x2) n \\<rho>) n) =\n  complex_of_real c \\<cdot>\\<^sub>m\n  matrix_seq.lowner_lub\n   (matrix_sum d\n     (\\<lambda>n. denote_while_n (x1 0) (x1 1) (denote x2) n \\<rho>))\n\ngoal (1 subgoal):\n 1. denote_while (x1 0) (x1 1) (denote x2)\n     (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) =\n    complex_of_real c \\<cdot>\\<^sub>m\n    denote_while (x1 0) (x1 1) (denote x2) \\<rho>", "have \"matrix_sum d (\\<lambda>n. denote_while_n (x1 0) (x1 1) (denote x2) n (complex_of_real c \\<cdot>\\<^sub>m \\<rho>)) m \n    = c \\<cdot>\\<^sub>m (matrix_sum d (\\<lambda>n. denote_while_n ?A ?B (denote x2) n \\<rho>)) m\"\n    for m"], ["proof (prove)\ngoal (1 subgoal):\n 1. matrix_sum d\n     (\\<lambda>n.\n         denote_while_n (x1 0) (x1 1) (denote x2) n\n          (complex_of_real c \\<cdot>\\<^sub>m \\<rho>))\n     m =\n    complex_of_real c \\<cdot>\\<^sub>m\n    matrix_sum d\n     (\\<lambda>n. denote_while_n (x1 0) (x1 1) (denote x2) n \\<rho>) m", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. matrix_sum d\n     (\\<lambda>n.\n         denote_while_n (x1 0) (x1 1) (denote x2) n\n          (complex_of_real c \\<cdot>\\<^sub>m \\<rho>))\n     m =\n    complex_of_real c \\<cdot>\\<^sub>m\n    matrix_sum d\n     (\\<lambda>n. denote_while_n (x1 0) (x1 1) (denote x2) n \\<rho>) m", "have  dim:\"(\\<And>k. k < m \\<Longrightarrow> denote_while_n (x1 0) (x1 1) (denote x2) k \\<rho> \\<in> carrier_mat d d)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>k.\n       k < m \\<Longrightarrow>\n       denote_while_n (x1 0) (x1 1) (denote x2) k \\<rho>\n       \\<in> carrier_mat d d", "using denote_while_n_dim dx2  assms measurement_dim"], ["proof (prove)\nusing this:\n  \\<lbrakk>?\\<rho> \\<in> carrier_mat d d; ?M0.0 \\<in> carrier_mat d d;\n   ?M1.0 \\<in> carrier_mat d d; partial_density_operator ?\\<rho>;\n   \\<And>\\<rho>'.\n      \\<lbrakk>\\<rho>' \\<in> carrier_mat d d;\n       partial_density_operator \\<rho>'\\<rbrakk>\n      \\<Longrightarrow> positive (?DS \\<rho>') \\<and>\n                        trace (?DS \\<rho>') \\<le> trace \\<rho>' \\<and>\n                        ?DS \\<rho>' \\<in> carrier_mat d d\\<rbrakk>\n  \\<Longrightarrow> denote_while_n ?M0.0 ?M1.0 ?DS ?n ?\\<rho>\n                    \\<in> carrier_mat d d\n  \\<lbrakk>?\\<rho> \\<in> carrier_mat d d;\n   partial_density_operator ?\\<rho>\\<rbrakk>\n  \\<Longrightarrow> positive (denote x2 ?\\<rho>) \\<and>\n                    trace (denote x2 ?\\<rho>) \\<le> trace ?\\<rho> \\<and>\n                    denote x2 ?\\<rho> \\<in> carrier_mat d d\n  \\<rho> \\<in> carrier_mat d d\n  partial_density_operator \\<rho>\n  trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) \\<le> 1\n  0 \\<le> c\n  measurement d 2 x1\n  well_com x2\n  \\<lbrakk>?\\<rho> \\<in> carrier_mat d d; partial_density_operator ?\\<rho>;\n   trace (complex_of_real c \\<cdot>\\<^sub>m ?\\<rho>) \\<le> 1\\<rbrakk>\n  \\<Longrightarrow> denote x2 (complex_of_real c \\<cdot>\\<^sub>m ?\\<rho>) =\n                    complex_of_real c \\<cdot>\\<^sub>m denote x2 ?\\<rho>\n  \\<lbrakk>measurement ?d ?n ?M; ?k < ?n\\<rbrakk>\n  \\<Longrightarrow> ?M ?k \\<in> carrier_mat ?d ?d\n\ngoal (1 subgoal):\n 1. \\<And>k.\n       k < m \\<Longrightarrow>\n       denote_while_n (x1 0) (x1 1) (denote x2) k \\<rho>\n       \\<in> carrier_mat d d", "by auto"], ["proof (state)\nthis:\n  ?k < m \\<Longrightarrow>\n  denote_while_n (x1 0) (x1 1) (denote x2) ?k \\<rho> \\<in> carrier_mat d d\n\ngoal (1 subgoal):\n 1. matrix_sum d\n     (\\<lambda>n.\n         denote_while_n (x1 0) (x1 1) (denote x2) n\n          (complex_of_real c \\<cdot>\\<^sub>m \\<rho>))\n     m =\n    complex_of_real c \\<cdot>\\<^sub>m\n    matrix_sum d\n     (\\<lambda>n. denote_while_n (x1 0) (x1 1) (denote x2) n \\<rho>) m", "then"], ["proof (chain)\npicking this:\n  ?k < m \\<Longrightarrow>\n  denote_while_n (x1 0) (x1 1) (denote x2) ?k \\<rho> \\<in> carrier_mat d d", "have dimr: \"(\\<And>k. k < m \\<Longrightarrow> c \\<cdot>\\<^sub>m denote_while_n (x1 0) (x1 1) (denote x2) k \\<rho> \\<in> carrier_mat d d)\""], ["proof (prove)\nusing this:\n  ?k < m \\<Longrightarrow>\n  denote_while_n (x1 0) (x1 1) (denote x2) ?k \\<rho> \\<in> carrier_mat d d\n\ngoal (1 subgoal):\n 1. \\<And>k.\n       k < m \\<Longrightarrow>\n       complex_of_real c \\<cdot>\\<^sub>m\n       denote_while_n (x1 0) (x1 1) (denote x2) k \\<rho>\n       \\<in> carrier_mat d d", "using smult_carrier_mat"], ["proof (prove)\nusing this:\n  ?k < m \\<Longrightarrow>\n  denote_while_n (x1 0) (x1 1) (denote x2) ?k \\<rho> \\<in> carrier_mat d d\n  ?A \\<in> carrier_mat ?nr ?nc \\<Longrightarrow>\n  ?k \\<cdot>\\<^sub>m ?A \\<in> carrier_mat ?nr ?nc\n\ngoal (1 subgoal):\n 1. \\<And>k.\n       k < m \\<Longrightarrow>\n       complex_of_real c \\<cdot>\\<^sub>m\n       denote_while_n (x1 0) (x1 1) (denote x2) k \\<rho>\n       \\<in> carrier_mat d d", "by auto"], ["proof (state)\nthis:\n  ?k < m \\<Longrightarrow>\n  complex_of_real c \\<cdot>\\<^sub>m\n  denote_while_n (x1 0) (x1 1) (denote x2) ?k \\<rho>\n  \\<in> carrier_mat d d\n\ngoal (1 subgoal):\n 1. matrix_sum d\n     (\\<lambda>n.\n         denote_while_n (x1 0) (x1 1) (denote x2) n\n          (complex_of_real c \\<cdot>\\<^sub>m \\<rho>))\n     m =\n    complex_of_real c \\<cdot>\\<^sub>m\n    matrix_sum d\n     (\\<lambda>n. denote_while_n (x1 0) (x1 1) (denote x2) n \\<rho>) m", "have \"\\<forall> n<m. denote_while_n (x1 0) (x1 1) (denote x2) n (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) = c \\<cdot>\\<^sub>m (denote_while_n (x1 0) (x1 1) (denote x2) n \\<rho>)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>n<m.\n       denote_while_n (x1 0) (x1 1) (denote x2) n\n        (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) =\n       complex_of_real c \\<cdot>\\<^sub>m\n       denote_while_n (x1 0) (x1 1) (denote x2) n \\<rho>", "using denote_while_n_scale assms"], ["proof (prove)\nusing this:\n  \\<lbrakk>0 \\<le> ?c; measurement d 2 ?x1.0; well_com ?x2.0;\n   \\<And>\\<rho>.\n      \\<lbrakk>\\<rho> \\<in> carrier_mat d d;\n       partial_density_operator \\<rho>;\n       trace (complex_of_real ?c \\<cdot>\\<^sub>m \\<rho>) \\<le> 1\\<rbrakk>\n      \\<Longrightarrow> denote ?x2.0\n                         (complex_of_real ?c \\<cdot>\\<^sub>m \\<rho>) =\n                        complex_of_real ?c \\<cdot>\\<^sub>m\n                        denote ?x2.0 \\<rho>;\n   ?\\<rho> \\<in> carrier_mat d d; partial_density_operator ?\\<rho>;\n   trace (complex_of_real ?c \\<cdot>\\<^sub>m ?\\<rho>) \\<le> 1\\<rbrakk>\n  \\<Longrightarrow> denote_while_n (?x1.0 0) (?x1.0 1) (denote ?x2.0) ?n\n                     (complex_of_real ?c \\<cdot>\\<^sub>m ?\\<rho>) =\n                    complex_of_real ?c \\<cdot>\\<^sub>m\n                    denote_while_n (?x1.0 0) (?x1.0 1) (denote ?x2.0) ?n\n                     ?\\<rho>\n  \\<rho> \\<in> carrier_mat d d\n  partial_density_operator \\<rho>\n  trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) \\<le> 1\n  0 \\<le> c\n  measurement d 2 x1\n  well_com x2\n  \\<lbrakk>?\\<rho> \\<in> carrier_mat d d; partial_density_operator ?\\<rho>;\n   trace (complex_of_real c \\<cdot>\\<^sub>m ?\\<rho>) \\<le> 1\\<rbrakk>\n  \\<Longrightarrow> denote x2 (complex_of_real c \\<cdot>\\<^sub>m ?\\<rho>) =\n                    complex_of_real c \\<cdot>\\<^sub>m denote x2 ?\\<rho>\n\ngoal (1 subgoal):\n 1. \\<forall>n<m.\n       denote_while_n (x1 0) (x1 1) (denote x2) n\n        (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) =\n       complex_of_real c \\<cdot>\\<^sub>m\n       denote_while_n (x1 0) (x1 1) (denote x2) n \\<rho>", "by auto"], ["proof (state)\nthis:\n  \\<forall>n<m.\n     denote_while_n (x1 0) (x1 1) (denote x2) n\n      (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) =\n     complex_of_real c \\<cdot>\\<^sub>m\n     denote_while_n (x1 0) (x1 1) (denote x2) n \\<rho>\n\ngoal (1 subgoal):\n 1. matrix_sum d\n     (\\<lambda>n.\n         denote_while_n (x1 0) (x1 1) (denote x2) n\n          (complex_of_real c \\<cdot>\\<^sub>m \\<rho>))\n     m =\n    complex_of_real c \\<cdot>\\<^sub>m\n    matrix_sum d\n     (\\<lambda>n. denote_while_n (x1 0) (x1 1) (denote x2) n \\<rho>) m", "then"], ["proof (chain)\npicking this:\n  \\<forall>n<m.\n     denote_while_n (x1 0) (x1 1) (denote x2) n\n      (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) =\n     complex_of_real c \\<cdot>\\<^sub>m\n     denote_while_n (x1 0) (x1 1) (denote x2) n \\<rho>", "have \"(matrix_sum d (\\<lambda>n. c \\<cdot>\\<^sub>m denote_while_n ?A ?B (denote x2) n \\<rho>)) m = \n      matrix_sum d (\\<lambda>n. denote_while_n (x1 0) (x1 1) (denote x2) n (complex_of_real c \\<cdot>\\<^sub>m \\<rho>)) m \""], ["proof (prove)\nusing this:\n  \\<forall>n<m.\n     denote_while_n (x1 0) (x1 1) (denote x2) n\n      (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) =\n     complex_of_real c \\<cdot>\\<^sub>m\n     denote_while_n (x1 0) (x1 1) (denote x2) n \\<rho>\n\ngoal (1 subgoal):\n 1. matrix_sum d\n     (\\<lambda>n.\n         complex_of_real c \\<cdot>\\<^sub>m\n         denote_while_n (x1 0) (x1 1) (denote x2) n \\<rho>)\n     m =\n    matrix_sum d\n     (\\<lambda>n.\n         denote_while_n (x1 0) (x1 1) (denote x2) n\n          (complex_of_real c \\<cdot>\\<^sub>m \\<rho>))\n     m", "using matrix_sum_cong[of m \"\\<lambda>n. complex_of_real c \\<cdot>\\<^sub>m denote_while_n (x1 0) (x1 1) (denote x2) n \\<rho>\"] dimr"], ["proof (prove)\nusing this:\n  \\<forall>n<m.\n     denote_while_n (x1 0) (x1 1) (denote x2) n\n      (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) =\n     complex_of_real c \\<cdot>\\<^sub>m\n     denote_while_n (x1 0) (x1 1) (denote x2) n \\<rho>\n  (\\<And>k.\n      k < m \\<Longrightarrow>\n      complex_of_real c \\<cdot>\\<^sub>m\n      denote_while_n (x1 0) (x1 1) (denote x2) k \\<rho> =\n      ?f' k) \\<Longrightarrow>\n  matrix_sum ?d\n   (\\<lambda>n.\n       complex_of_real c \\<cdot>\\<^sub>m\n       denote_while_n (x1 0) (x1 1) (denote x2) n \\<rho>)\n   m =\n  matrix_sum ?d ?f' m\n  ?k < m \\<Longrightarrow>\n  complex_of_real c \\<cdot>\\<^sub>m\n  denote_while_n (x1 0) (x1 1) (denote x2) ?k \\<rho>\n  \\<in> carrier_mat d d\n\ngoal (1 subgoal):\n 1. matrix_sum d\n     (\\<lambda>n.\n         complex_of_real c \\<cdot>\\<^sub>m\n         denote_while_n (x1 0) (x1 1) (denote x2) n \\<rho>)\n     m =\n    matrix_sum d\n     (\\<lambda>n.\n         denote_while_n (x1 0) (x1 1) (denote x2) n\n          (complex_of_real c \\<cdot>\\<^sub>m \\<rho>))\n     m", "by fastforce"], ["proof (state)\nthis:\n  matrix_sum d\n   (\\<lambda>n.\n       complex_of_real c \\<cdot>\\<^sub>m\n       denote_while_n (x1 0) (x1 1) (denote x2) n \\<rho>)\n   m =\n  matrix_sum d\n   (\\<lambda>n.\n       denote_while_n (x1 0) (x1 1) (denote x2) n\n        (complex_of_real c \\<cdot>\\<^sub>m \\<rho>))\n   m\n\ngoal (1 subgoal):\n 1. matrix_sum d\n     (\\<lambda>n.\n         denote_while_n (x1 0) (x1 1) (denote x2) n\n          (complex_of_real c \\<cdot>\\<^sub>m \\<rho>))\n     m =\n    complex_of_real c \\<cdot>\\<^sub>m\n    matrix_sum d\n     (\\<lambda>n. denote_while_n (x1 0) (x1 1) (denote x2) n \\<rho>) m", "moreover"], ["proof (state)\nthis:\n  matrix_sum d\n   (\\<lambda>n.\n       complex_of_real c \\<cdot>\\<^sub>m\n       denote_while_n (x1 0) (x1 1) (denote x2) n \\<rho>)\n   m =\n  matrix_sum d\n   (\\<lambda>n.\n       denote_while_n (x1 0) (x1 1) (denote x2) n\n        (complex_of_real c \\<cdot>\\<^sub>m \\<rho>))\n   m\n\ngoal (1 subgoal):\n 1. matrix_sum d\n     (\\<lambda>n.\n         denote_while_n (x1 0) (x1 1) (denote x2) n\n          (complex_of_real c \\<cdot>\\<^sub>m \\<rho>))\n     m =\n    complex_of_real c \\<cdot>\\<^sub>m\n    matrix_sum d\n     (\\<lambda>n. denote_while_n (x1 0) (x1 1) (denote x2) n \\<rho>) m", "have \"(matrix_sum d (\\<lambda>n. c \\<cdot>\\<^sub>m denote_while_n ?A ?B (denote x2) n \\<rho>)) m = c \\<cdot>\\<^sub>m (matrix_sum d (\\<lambda>n. denote_while_n ?A ?B (denote x2) n \\<rho>)) m\""], ["proof (prove)\ngoal (1 subgoal):\n 1. matrix_sum d\n     (\\<lambda>n.\n         complex_of_real c \\<cdot>\\<^sub>m\n         denote_while_n (x1 0) (x1 1) (denote x2) n \\<rho>)\n     m =\n    complex_of_real c \\<cdot>\\<^sub>m\n    matrix_sum d\n     (\\<lambda>n. denote_while_n (x1 0) (x1 1) (denote x2) n \\<rho>) m", "using matrix_sum_smult[of m \"(\\<lambda>n. denote_while_n (x1 0) (x1 1) (denote x2) n \\<rho>)\" d c] dim"], ["proof (prove)\nusing this:\n  (\\<And>k.\n      k < m \\<Longrightarrow>\n      denote_while_n (x1 0) (x1 1) (denote x2) k \\<rho>\n      \\<in> carrier_mat d d) \\<Longrightarrow>\n  matrix_sum d\n   (\\<lambda>k.\n       complex_of_real c \\<cdot>\\<^sub>m\n       denote_while_n (x1 0) (x1 1) (denote x2) k \\<rho>)\n   m =\n  complex_of_real c \\<cdot>\\<^sub>m\n  matrix_sum d\n   (\\<lambda>n. denote_while_n (x1 0) (x1 1) (denote x2) n \\<rho>) m\n  ?k < m \\<Longrightarrow>\n  denote_while_n (x1 0) (x1 1) (denote x2) ?k \\<rho> \\<in> carrier_mat d d\n\ngoal (1 subgoal):\n 1. matrix_sum d\n     (\\<lambda>n.\n         complex_of_real c \\<cdot>\\<^sub>m\n         denote_while_n (x1 0) (x1 1) (denote x2) n \\<rho>)\n     m =\n    complex_of_real c \\<cdot>\\<^sub>m\n    matrix_sum d\n     (\\<lambda>n. denote_while_n (x1 0) (x1 1) (denote x2) n \\<rho>) m", "by auto"], ["proof (state)\nthis:\n  matrix_sum d\n   (\\<lambda>n.\n       complex_of_real c \\<cdot>\\<^sub>m\n       denote_while_n (x1 0) (x1 1) (denote x2) n \\<rho>)\n   m =\n  complex_of_real c \\<cdot>\\<^sub>m\n  matrix_sum d\n   (\\<lambda>n. denote_while_n (x1 0) (x1 1) (denote x2) n \\<rho>) m\n\ngoal (1 subgoal):\n 1. matrix_sum d\n     (\\<lambda>n.\n         denote_while_n (x1 0) (x1 1) (denote x2) n\n          (complex_of_real c \\<cdot>\\<^sub>m \\<rho>))\n     m =\n    complex_of_real c \\<cdot>\\<^sub>m\n    matrix_sum d\n     (\\<lambda>n. denote_while_n (x1 0) (x1 1) (denote x2) n \\<rho>) m", "ultimately"], ["proof (chain)\npicking this:\n  matrix_sum d\n   (\\<lambda>n.\n       complex_of_real c \\<cdot>\\<^sub>m\n       denote_while_n (x1 0) (x1 1) (denote x2) n \\<rho>)\n   m =\n  matrix_sum d\n   (\\<lambda>n.\n       denote_while_n (x1 0) (x1 1) (denote x2) n\n        (complex_of_real c \\<cdot>\\<^sub>m \\<rho>))\n   m\n  matrix_sum d\n   (\\<lambda>n.\n       complex_of_real c \\<cdot>\\<^sub>m\n       denote_while_n (x1 0) (x1 1) (denote x2) n \\<rho>)\n   m =\n  complex_of_real c \\<cdot>\\<^sub>m\n  matrix_sum d\n   (\\<lambda>n. denote_while_n (x1 0) (x1 1) (denote x2) n \\<rho>) m", "show ?thesis"], ["proof (prove)\nusing this:\n  matrix_sum d\n   (\\<lambda>n.\n       complex_of_real c \\<cdot>\\<^sub>m\n       denote_while_n (x1 0) (x1 1) (denote x2) n \\<rho>)\n   m =\n  matrix_sum d\n   (\\<lambda>n.\n       denote_while_n (x1 0) (x1 1) (denote x2) n\n        (complex_of_real c \\<cdot>\\<^sub>m \\<rho>))\n   m\n  matrix_sum d\n   (\\<lambda>n.\n       complex_of_real c \\<cdot>\\<^sub>m\n       denote_while_n (x1 0) (x1 1) (denote x2) n \\<rho>)\n   m =\n  complex_of_real c \\<cdot>\\<^sub>m\n  matrix_sum d\n   (\\<lambda>n. denote_while_n (x1 0) (x1 1) (denote x2) n \\<rho>) m\n\ngoal (1 subgoal):\n 1. matrix_sum d\n     (\\<lambda>n.\n         denote_while_n (x1 0) (x1 1) (denote x2) n\n          (complex_of_real c \\<cdot>\\<^sub>m \\<rho>))\n     m =\n    complex_of_real c \\<cdot>\\<^sub>m\n    matrix_sum d\n     (\\<lambda>n. denote_while_n (x1 0) (x1 1) (denote x2) n \\<rho>) m", "by auto"], ["proof (state)\nthis:\n  matrix_sum d\n   (\\<lambda>n.\n       denote_while_n (x1 0) (x1 1) (denote x2) n\n        (complex_of_real c \\<cdot>\\<^sub>m \\<rho>))\n   m =\n  complex_of_real c \\<cdot>\\<^sub>m\n  matrix_sum d\n   (\\<lambda>n. denote_while_n (x1 0) (x1 1) (denote x2) n \\<rho>) m\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  matrix_sum d\n   (\\<lambda>n.\n       denote_while_n (x1 0) (x1 1) (denote x2) n\n        (complex_of_real c \\<cdot>\\<^sub>m \\<rho>))\n   ?m =\n  complex_of_real c \\<cdot>\\<^sub>m\n  matrix_sum d\n   (\\<lambda>n. denote_while_n (x1 0) (x1 1) (denote x2) n \\<rho>) ?m\n\ngoal (1 subgoal):\n 1. denote_while (x1 0) (x1 1) (denote x2)\n     (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) =\n    complex_of_real c \\<cdot>\\<^sub>m\n    denote_while (x1 0) (x1 1) (denote x2) \\<rho>", "then"], ["proof (chain)\npicking this:\n  matrix_sum d\n   (\\<lambda>n.\n       denote_while_n (x1 0) (x1 1) (denote x2) n\n        (complex_of_real c \\<cdot>\\<^sub>m \\<rho>))\n   ?m =\n  complex_of_real c \\<cdot>\\<^sub>m\n  matrix_sum d\n   (\\<lambda>n. denote_while_n (x1 0) (x1 1) (denote x2) n \\<rho>) ?m", "have \"matrix_seq.lowner_lub (matrix_sum d (\\<lambda>n. denote_while_n (x1 0) (x1 1) (denote x2) n (complex_of_real c \\<cdot>\\<^sub>m \\<rho>))) =\n    matrix_seq.lowner_lub (\\<lambda>n. c \\<cdot>\\<^sub>m (matrix_sum d (\\<lambda>n. denote_while_n ?A ?B (denote x2) n \\<rho>)) n)\""], ["proof (prove)\nusing this:\n  matrix_sum d\n   (\\<lambda>n.\n       denote_while_n (x1 0) (x1 1) (denote x2) n\n        (complex_of_real c \\<cdot>\\<^sub>m \\<rho>))\n   ?m =\n  complex_of_real c \\<cdot>\\<^sub>m\n  matrix_sum d\n   (\\<lambda>n. denote_while_n (x1 0) (x1 1) (denote x2) n \\<rho>) ?m\n\ngoal (1 subgoal):\n 1. matrix_seq.lowner_lub\n     (matrix_sum d\n       (\\<lambda>n.\n           denote_while_n (x1 0) (x1 1) (denote x2) n\n            (complex_of_real c \\<cdot>\\<^sub>m \\<rho>))) =\n    matrix_seq.lowner_lub\n     (\\<lambda>n.\n         complex_of_real c \\<cdot>\\<^sub>m\n         matrix_sum d\n          (\\<lambda>n. denote_while_n (x1 0) (x1 1) (denote x2) n \\<rho>) n)", "by meson"], ["proof (state)\nthis:\n  matrix_seq.lowner_lub\n   (matrix_sum d\n     (\\<lambda>n.\n         denote_while_n (x1 0) (x1 1) (denote x2) n\n          (complex_of_real c \\<cdot>\\<^sub>m \\<rho>))) =\n  matrix_seq.lowner_lub\n   (\\<lambda>n.\n       complex_of_real c \\<cdot>\\<^sub>m\n       matrix_sum d\n        (\\<lambda>n. denote_while_n (x1 0) (x1 1) (denote x2) n \\<rho>) n)\n\ngoal (1 subgoal):\n 1. denote_while (x1 0) (x1 1) (denote x2)\n     (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) =\n    complex_of_real c \\<cdot>\\<^sub>m\n    denote_while (x1 0) (x1 1) (denote x2) \\<rho>", "then"], ["proof (chain)\npicking this:\n  matrix_seq.lowner_lub\n   (matrix_sum d\n     (\\<lambda>n.\n         denote_while_n (x1 0) (x1 1) (denote x2) n\n          (complex_of_real c \\<cdot>\\<^sub>m \\<rho>))) =\n  matrix_seq.lowner_lub\n   (\\<lambda>n.\n       complex_of_real c \\<cdot>\\<^sub>m\n       matrix_sum d\n        (\\<lambda>n. denote_while_n (x1 0) (x1 1) (denote x2) n \\<rho>) n)", "show ?thesis"], ["proof (prove)\nusing this:\n  matrix_seq.lowner_lub\n   (matrix_sum d\n     (\\<lambda>n.\n         denote_while_n (x1 0) (x1 1) (denote x2) n\n          (complex_of_real c \\<cdot>\\<^sub>m \\<rho>))) =\n  matrix_seq.lowner_lub\n   (\\<lambda>n.\n       complex_of_real c \\<cdot>\\<^sub>m\n       matrix_sum d\n        (\\<lambda>n. denote_while_n (x1 0) (x1 1) (denote x2) n \\<rho>) n)\n\ngoal (1 subgoal):\n 1. denote_while (x1 0) (x1 1) (denote x2)\n     (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) =\n    complex_of_real c \\<cdot>\\<^sub>m\n    denote_while (x1 0) (x1 1) (denote x2) \\<rho>", "unfolding denote_while_def matrix_inf_sum_def"], ["proof (prove)\nusing this:\n  matrix_seq.lowner_lub\n   (matrix_sum d\n     (\\<lambda>n.\n         denote_while_n (x1 0) (x1 1) (denote x2) n\n          (complex_of_real c \\<cdot>\\<^sub>m \\<rho>))) =\n  matrix_seq.lowner_lub\n   (\\<lambda>n.\n       complex_of_real c \\<cdot>\\<^sub>m\n       matrix_sum d\n        (\\<lambda>n. denote_while_n (x1 0) (x1 1) (denote x2) n \\<rho>) n)\n\ngoal (1 subgoal):\n 1. matrix_seq.lowner_lub\n     (matrix_sum d\n       (\\<lambda>n.\n           denote_while_n (x1 0) (x1 1) (denote x2) n\n            (complex_of_real c \\<cdot>\\<^sub>m \\<rho>))) =\n    complex_of_real c \\<cdot>\\<^sub>m\n    matrix_seq.lowner_lub\n     (matrix_sum d\n       (\\<lambda>n. denote_while_n (x1 0) (x1 1) (denote x2) n \\<rho>))", "using llscale"], ["proof (prove)\nusing this:\n  matrix_seq.lowner_lub\n   (matrix_sum d\n     (\\<lambda>n.\n         denote_while_n (x1 0) (x1 1) (denote x2) n\n          (complex_of_real c \\<cdot>\\<^sub>m \\<rho>))) =\n  matrix_seq.lowner_lub\n   (\\<lambda>n.\n       complex_of_real c \\<cdot>\\<^sub>m\n       matrix_sum d\n        (\\<lambda>n. denote_while_n (x1 0) (x1 1) (denote x2) n \\<rho>) n)\n  matrix_seq.lowner_lub\n   (\\<lambda>n.\n       complex_of_real c \\<cdot>\\<^sub>m\n       matrix_sum d\n        (\\<lambda>n. denote_while_n (x1 0) (x1 1) (denote x2) n \\<rho>) n) =\n  complex_of_real c \\<cdot>\\<^sub>m\n  matrix_seq.lowner_lub\n   (matrix_sum d\n     (\\<lambda>n. denote_while_n (x1 0) (x1 1) (denote x2) n \\<rho>))\n\ngoal (1 subgoal):\n 1. matrix_seq.lowner_lub\n     (matrix_sum d\n       (\\<lambda>n.\n           denote_while_n (x1 0) (x1 1) (denote x2) n\n            (complex_of_real c \\<cdot>\\<^sub>m \\<rho>))) =\n    complex_of_real c \\<cdot>\\<^sub>m\n    matrix_seq.lowner_lub\n     (matrix_sum d\n       (\\<lambda>n. denote_while_n (x1 0) (x1 1) (denote x2) n \\<rho>))", "by auto"], ["proof (state)\nthis:\n  denote_while (x1 0) (x1 1) (denote x2)\n   (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) =\n  complex_of_real c \\<cdot>\\<^sub>m\n  denote_while (x1 0) (x1 1) (denote x2) \\<rho>\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma denote_scale:\n  fixes c :: real\n  assumes \"c\\<ge>0\"\n  shows \"well_com S \\<Longrightarrow> \\<rho> \\<in> carrier_mat d d \\<Longrightarrow> partial_density_operator \\<rho> \\<Longrightarrow>\n         trace (c  \\<cdot>\\<^sub>m \\<rho>) \\<le> 1 \\<Longrightarrow> denote S (c  \\<cdot>\\<^sub>m \\<rho>) = c  \\<cdot>\\<^sub>m denote S \\<rho>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>well_com S; \\<rho> \\<in> carrier_mat d d;\n     partial_density_operator \\<rho>;\n     trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) \\<le> 1\\<rbrakk>\n    \\<Longrightarrow> denote S (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) =\n                      complex_of_real c \\<cdot>\\<^sub>m denote S \\<rho>", "proof (induction arbitrary: \\<rho>)"], ["proof (state)\ngoal (5 subgoals):\n 1. \\<And>\\<rho>.\n       \\<lbrakk>well_com SKIP; \\<rho> \\<in> carrier_mat d d;\n        partial_density_operator \\<rho>;\n        trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) \\<le> 1\\<rbrakk>\n       \\<Longrightarrow> denote SKIP\n                          (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) =\n                         complex_of_real c \\<cdot>\\<^sub>m\n                         denote SKIP \\<rho>\n 2. \\<And>x \\<rho>.\n       \\<lbrakk>well_com (Utrans x); \\<rho> \\<in> carrier_mat d d;\n        partial_density_operator \\<rho>;\n        trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) \\<le> 1\\<rbrakk>\n       \\<Longrightarrow> denote (Utrans x)\n                          (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) =\n                         complex_of_real c \\<cdot>\\<^sub>m\n                         denote (Utrans x) \\<rho>\n 3. \\<And>x1 x2a \\<rho>.\n       \\<lbrakk>\\<And>\\<rho>.\n                   \\<lbrakk>well_com x1; \\<rho> \\<in> carrier_mat d d;\n                    partial_density_operator \\<rho>;\n                    trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>)\n                    \\<le> 1\\<rbrakk>\n                   \\<Longrightarrow> denote x1\n(complex_of_real c \\<cdot>\\<^sub>m \\<rho>) =\n                                     complex_of_real c \\<cdot>\\<^sub>m\n                                     denote x1 \\<rho>;\n        \\<And>\\<rho>.\n           \\<lbrakk>well_com x2a; \\<rho> \\<in> carrier_mat d d;\n            partial_density_operator \\<rho>;\n            trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>)\n            \\<le> 1\\<rbrakk>\n           \\<Longrightarrow> denote x2a\n                              (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) =\n                             complex_of_real c \\<cdot>\\<^sub>m\n                             denote x2a \\<rho>;\n        well_com (x1;; x2a); \\<rho> \\<in> carrier_mat d d;\n        partial_density_operator \\<rho>;\n        trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) \\<le> 1\\<rbrakk>\n       \\<Longrightarrow> denote (x1;; x2a)\n                          (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) =\n                         complex_of_real c \\<cdot>\\<^sub>m\n                         denote (x1;; x2a) \\<rho>\n 4. \\<And>x1 x2a x3 \\<rho>.\n       \\<lbrakk>\\<And>x3a \\<rho>.\n                   \\<lbrakk>x3a \\<in> set x3; well_com x3a;\n                    \\<rho> \\<in> carrier_mat d d;\n                    partial_density_operator \\<rho>;\n                    trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>)\n                    \\<le> 1\\<rbrakk>\n                   \\<Longrightarrow> denote x3a\n(complex_of_real c \\<cdot>\\<^sub>m \\<rho>) =\n                                     complex_of_real c \\<cdot>\\<^sub>m\n                                     denote x3a \\<rho>;\n        well_com (Measure x1 x2a x3); \\<rho> \\<in> carrier_mat d d;\n        partial_density_operator \\<rho>;\n        trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) \\<le> 1\\<rbrakk>\n       \\<Longrightarrow> denote (Measure x1 x2a x3)\n                          (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) =\n                         complex_of_real c \\<cdot>\\<^sub>m\n                         denote (Measure x1 x2a x3) \\<rho>\n 5. \\<And>x1 x2a \\<rho>.\n       \\<lbrakk>\\<And>\\<rho>.\n                   \\<lbrakk>well_com x2a; \\<rho> \\<in> carrier_mat d d;\n                    partial_density_operator \\<rho>;\n                    trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>)\n                    \\<le> 1\\<rbrakk>\n                   \\<Longrightarrow> denote x2a\n(complex_of_real c \\<cdot>\\<^sub>m \\<rho>) =\n                                     complex_of_real c \\<cdot>\\<^sub>m\n                                     denote x2a \\<rho>;\n        well_com (While x1 x2a); \\<rho> \\<in> carrier_mat d d;\n        partial_density_operator \\<rho>;\n        trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) \\<le> 1\\<rbrakk>\n       \\<Longrightarrow> denote (While x1 x2a)\n                          (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) =\n                         complex_of_real c \\<cdot>\\<^sub>m\n                         denote (While x1 x2a) \\<rho>", "case SKIP"], ["proof (state)\nthis:\n  well_com SKIP\n  \\<rho> \\<in> carrier_mat d d\n  partial_density_operator \\<rho>\n  trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) \\<le> 1\n\ngoal (5 subgoals):\n 1. \\<And>\\<rho>.\n       \\<lbrakk>well_com SKIP; \\<rho> \\<in> carrier_mat d d;\n        partial_density_operator \\<rho>;\n        trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) \\<le> 1\\<rbrakk>\n       \\<Longrightarrow> denote SKIP\n                          (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) =\n                         complex_of_real c \\<cdot>\\<^sub>m\n                         denote SKIP \\<rho>\n 2. \\<And>x \\<rho>.\n       \\<lbrakk>well_com (Utrans x); \\<rho> \\<in> carrier_mat d d;\n        partial_density_operator \\<rho>;\n        trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) \\<le> 1\\<rbrakk>\n       \\<Longrightarrow> denote (Utrans x)\n                          (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) =\n                         complex_of_real c \\<cdot>\\<^sub>m\n                         denote (Utrans x) \\<rho>\n 3. \\<And>x1 x2a \\<rho>.\n       \\<lbrakk>\\<And>\\<rho>.\n                   \\<lbrakk>well_com x1; \\<rho> \\<in> carrier_mat d d;\n                    partial_density_operator \\<rho>;\n                    trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>)\n                    \\<le> 1\\<rbrakk>\n                   \\<Longrightarrow> denote x1\n(complex_of_real c \\<cdot>\\<^sub>m \\<rho>) =\n                                     complex_of_real c \\<cdot>\\<^sub>m\n                                     denote x1 \\<rho>;\n        \\<And>\\<rho>.\n           \\<lbrakk>well_com x2a; \\<rho> \\<in> carrier_mat d d;\n            partial_density_operator \\<rho>;\n            trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>)\n            \\<le> 1\\<rbrakk>\n           \\<Longrightarrow> denote x2a\n                              (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) =\n                             complex_of_real c \\<cdot>\\<^sub>m\n                             denote x2a \\<rho>;\n        well_com (x1;; x2a); \\<rho> \\<in> carrier_mat d d;\n        partial_density_operator \\<rho>;\n        trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) \\<le> 1\\<rbrakk>\n       \\<Longrightarrow> denote (x1;; x2a)\n                          (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) =\n                         complex_of_real c \\<cdot>\\<^sub>m\n                         denote (x1;; x2a) \\<rho>\n 4. \\<And>x1 x2a x3 \\<rho>.\n       \\<lbrakk>\\<And>x3a \\<rho>.\n                   \\<lbrakk>x3a \\<in> set x3; well_com x3a;\n                    \\<rho> \\<in> carrier_mat d d;\n                    partial_density_operator \\<rho>;\n                    trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>)\n                    \\<le> 1\\<rbrakk>\n                   \\<Longrightarrow> denote x3a\n(complex_of_real c \\<cdot>\\<^sub>m \\<rho>) =\n                                     complex_of_real c \\<cdot>\\<^sub>m\n                                     denote x3a \\<rho>;\n        well_com (Measure x1 x2a x3); \\<rho> \\<in> carrier_mat d d;\n        partial_density_operator \\<rho>;\n        trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) \\<le> 1\\<rbrakk>\n       \\<Longrightarrow> denote (Measure x1 x2a x3)\n                          (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) =\n                         complex_of_real c \\<cdot>\\<^sub>m\n                         denote (Measure x1 x2a x3) \\<rho>\n 5. \\<And>x1 x2a \\<rho>.\n       \\<lbrakk>\\<And>\\<rho>.\n                   \\<lbrakk>well_com x2a; \\<rho> \\<in> carrier_mat d d;\n                    partial_density_operator \\<rho>;\n                    trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>)\n                    \\<le> 1\\<rbrakk>\n                   \\<Longrightarrow> denote x2a\n(complex_of_real c \\<cdot>\\<^sub>m \\<rho>) =\n                                     complex_of_real c \\<cdot>\\<^sub>m\n                                     denote x2a \\<rho>;\n        well_com (While x1 x2a); \\<rho> \\<in> carrier_mat d d;\n        partial_density_operator \\<rho>;\n        trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) \\<le> 1\\<rbrakk>\n       \\<Longrightarrow> denote (While x1 x2a)\n                          (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) =\n                         complex_of_real c \\<cdot>\\<^sub>m\n                         denote (While x1 x2a) \\<rho>", "then"], ["proof (chain)\npicking this:\n  well_com SKIP\n  \\<rho> \\<in> carrier_mat d d\n  partial_density_operator \\<rho>\n  trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) \\<le> 1", "show ?case"], ["proof (prove)\nusing this:\n  well_com SKIP\n  \\<rho> \\<in> carrier_mat d d\n  partial_density_operator \\<rho>\n  trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) \\<le> 1\n\ngoal (1 subgoal):\n 1. denote SKIP (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) =\n    complex_of_real c \\<cdot>\\<^sub>m denote SKIP \\<rho>", "by auto"], ["proof (state)\nthis:\n  denote SKIP (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) =\n  complex_of_real c \\<cdot>\\<^sub>m denote SKIP \\<rho>\n\ngoal (4 subgoals):\n 1. \\<And>x \\<rho>.\n       \\<lbrakk>well_com (Utrans x); \\<rho> \\<in> carrier_mat d d;\n        partial_density_operator \\<rho>;\n        trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) \\<le> 1\\<rbrakk>\n       \\<Longrightarrow> denote (Utrans x)\n                          (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) =\n                         complex_of_real c \\<cdot>\\<^sub>m\n                         denote (Utrans x) \\<rho>\n 2. \\<And>x1 x2a \\<rho>.\n       \\<lbrakk>\\<And>\\<rho>.\n                   \\<lbrakk>well_com x1; \\<rho> \\<in> carrier_mat d d;\n                    partial_density_operator \\<rho>;\n                    trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>)\n                    \\<le> 1\\<rbrakk>\n                   \\<Longrightarrow> denote x1\n(complex_of_real c \\<cdot>\\<^sub>m \\<rho>) =\n                                     complex_of_real c \\<cdot>\\<^sub>m\n                                     denote x1 \\<rho>;\n        \\<And>\\<rho>.\n           \\<lbrakk>well_com x2a; \\<rho> \\<in> carrier_mat d d;\n            partial_density_operator \\<rho>;\n            trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>)\n            \\<le> 1\\<rbrakk>\n           \\<Longrightarrow> denote x2a\n                              (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) =\n                             complex_of_real c \\<cdot>\\<^sub>m\n                             denote x2a \\<rho>;\n        well_com (x1;; x2a); \\<rho> \\<in> carrier_mat d d;\n        partial_density_operator \\<rho>;\n        trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) \\<le> 1\\<rbrakk>\n       \\<Longrightarrow> denote (x1;; x2a)\n                          (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) =\n                         complex_of_real c \\<cdot>\\<^sub>m\n                         denote (x1;; x2a) \\<rho>\n 3. \\<And>x1 x2a x3 \\<rho>.\n       \\<lbrakk>\\<And>x3a \\<rho>.\n                   \\<lbrakk>x3a \\<in> set x3; well_com x3a;\n                    \\<rho> \\<in> carrier_mat d d;\n                    partial_density_operator \\<rho>;\n                    trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>)\n                    \\<le> 1\\<rbrakk>\n                   \\<Longrightarrow> denote x3a\n(complex_of_real c \\<cdot>\\<^sub>m \\<rho>) =\n                                     complex_of_real c \\<cdot>\\<^sub>m\n                                     denote x3a \\<rho>;\n        well_com (Measure x1 x2a x3); \\<rho> \\<in> carrier_mat d d;\n        partial_density_operator \\<rho>;\n        trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) \\<le> 1\\<rbrakk>\n       \\<Longrightarrow> denote (Measure x1 x2a x3)\n                          (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) =\n                         complex_of_real c \\<cdot>\\<^sub>m\n                         denote (Measure x1 x2a x3) \\<rho>\n 4. \\<And>x1 x2a \\<rho>.\n       \\<lbrakk>\\<And>\\<rho>.\n                   \\<lbrakk>well_com x2a; \\<rho> \\<in> carrier_mat d d;\n                    partial_density_operator \\<rho>;\n                    trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>)\n                    \\<le> 1\\<rbrakk>\n                   \\<Longrightarrow> denote x2a\n(complex_of_real c \\<cdot>\\<^sub>m \\<rho>) =\n                                     complex_of_real c \\<cdot>\\<^sub>m\n                                     denote x2a \\<rho>;\n        well_com (While x1 x2a); \\<rho> \\<in> carrier_mat d d;\n        partial_density_operator \\<rho>;\n        trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) \\<le> 1\\<rbrakk>\n       \\<Longrightarrow> denote (While x1 x2a)\n                          (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) =\n                         complex_of_real c \\<cdot>\\<^sub>m\n                         denote (While x1 x2a) \\<rho>", "next"], ["proof (state)\ngoal (4 subgoals):\n 1. \\<And>x \\<rho>.\n       \\<lbrakk>well_com (Utrans x); \\<rho> \\<in> carrier_mat d d;\n        partial_density_operator \\<rho>;\n        trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) \\<le> 1\\<rbrakk>\n       \\<Longrightarrow> denote (Utrans x)\n                          (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) =\n                         complex_of_real c \\<cdot>\\<^sub>m\n                         denote (Utrans x) \\<rho>\n 2. \\<And>x1 x2a \\<rho>.\n       \\<lbrakk>\\<And>\\<rho>.\n                   \\<lbrakk>well_com x1; \\<rho> \\<in> carrier_mat d d;\n                    partial_density_operator \\<rho>;\n                    trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>)\n                    \\<le> 1\\<rbrakk>\n                   \\<Longrightarrow> denote x1\n(complex_of_real c \\<cdot>\\<^sub>m \\<rho>) =\n                                     complex_of_real c \\<cdot>\\<^sub>m\n                                     denote x1 \\<rho>;\n        \\<And>\\<rho>.\n           \\<lbrakk>well_com x2a; \\<rho> \\<in> carrier_mat d d;\n            partial_density_operator \\<rho>;\n            trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>)\n            \\<le> 1\\<rbrakk>\n           \\<Longrightarrow> denote x2a\n                              (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) =\n                             complex_of_real c \\<cdot>\\<^sub>m\n                             denote x2a \\<rho>;\n        well_com (x1;; x2a); \\<rho> \\<in> carrier_mat d d;\n        partial_density_operator \\<rho>;\n        trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) \\<le> 1\\<rbrakk>\n       \\<Longrightarrow> denote (x1;; x2a)\n                          (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) =\n                         complex_of_real c \\<cdot>\\<^sub>m\n                         denote (x1;; x2a) \\<rho>\n 3. \\<And>x1 x2a x3 \\<rho>.\n       \\<lbrakk>\\<And>x3a \\<rho>.\n                   \\<lbrakk>x3a \\<in> set x3; well_com x3a;\n                    \\<rho> \\<in> carrier_mat d d;\n                    partial_density_operator \\<rho>;\n                    trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>)\n                    \\<le> 1\\<rbrakk>\n                   \\<Longrightarrow> denote x3a\n(complex_of_real c \\<cdot>\\<^sub>m \\<rho>) =\n                                     complex_of_real c \\<cdot>\\<^sub>m\n                                     denote x3a \\<rho>;\n        well_com (Measure x1 x2a x3); \\<rho> \\<in> carrier_mat d d;\n        partial_density_operator \\<rho>;\n        trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) \\<le> 1\\<rbrakk>\n       \\<Longrightarrow> denote (Measure x1 x2a x3)\n                          (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) =\n                         complex_of_real c \\<cdot>\\<^sub>m\n                         denote (Measure x1 x2a x3) \\<rho>\n 4. \\<And>x1 x2a \\<rho>.\n       \\<lbrakk>\\<And>\\<rho>.\n                   \\<lbrakk>well_com x2a; \\<rho> \\<in> carrier_mat d d;\n                    partial_density_operator \\<rho>;\n                    trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>)\n                    \\<le> 1\\<rbrakk>\n                   \\<Longrightarrow> denote x2a\n(complex_of_real c \\<cdot>\\<^sub>m \\<rho>) =\n                                     complex_of_real c \\<cdot>\\<^sub>m\n                                     denote x2a \\<rho>;\n        well_com (While x1 x2a); \\<rho> \\<in> carrier_mat d d;\n        partial_density_operator \\<rho>;\n        trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) \\<le> 1\\<rbrakk>\n       \\<Longrightarrow> denote (While x1 x2a)\n                          (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) =\n                         complex_of_real c \\<cdot>\\<^sub>m\n                         denote (While x1 x2a) \\<rho>", "case (Utrans x)"], ["proof (state)\nthis:\n  well_com (Utrans x)\n  \\<rho> \\<in> carrier_mat d d\n  partial_density_operator \\<rho>\n  trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) \\<le> 1\n\ngoal (4 subgoals):\n 1. \\<And>x \\<rho>.\n       \\<lbrakk>well_com (Utrans x); \\<rho> \\<in> carrier_mat d d;\n        partial_density_operator \\<rho>;\n        trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) \\<le> 1\\<rbrakk>\n       \\<Longrightarrow> denote (Utrans x)\n                          (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) =\n                         complex_of_real c \\<cdot>\\<^sub>m\n                         denote (Utrans x) \\<rho>\n 2. \\<And>x1 x2a \\<rho>.\n       \\<lbrakk>\\<And>\\<rho>.\n                   \\<lbrakk>well_com x1; \\<rho> \\<in> carrier_mat d d;\n                    partial_density_operator \\<rho>;\n                    trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>)\n                    \\<le> 1\\<rbrakk>\n                   \\<Longrightarrow> denote x1\n(complex_of_real c \\<cdot>\\<^sub>m \\<rho>) =\n                                     complex_of_real c \\<cdot>\\<^sub>m\n                                     denote x1 \\<rho>;\n        \\<And>\\<rho>.\n           \\<lbrakk>well_com x2a; \\<rho> \\<in> carrier_mat d d;\n            partial_density_operator \\<rho>;\n            trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>)\n            \\<le> 1\\<rbrakk>\n           \\<Longrightarrow> denote x2a\n                              (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) =\n                             complex_of_real c \\<cdot>\\<^sub>m\n                             denote x2a \\<rho>;\n        well_com (x1;; x2a); \\<rho> \\<in> carrier_mat d d;\n        partial_density_operator \\<rho>;\n        trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) \\<le> 1\\<rbrakk>\n       \\<Longrightarrow> denote (x1;; x2a)\n                          (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) =\n                         complex_of_real c \\<cdot>\\<^sub>m\n                         denote (x1;; x2a) \\<rho>\n 3. \\<And>x1 x2a x3 \\<rho>.\n       \\<lbrakk>\\<And>x3a \\<rho>.\n                   \\<lbrakk>x3a \\<in> set x3; well_com x3a;\n                    \\<rho> \\<in> carrier_mat d d;\n                    partial_density_operator \\<rho>;\n                    trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>)\n                    \\<le> 1\\<rbrakk>\n                   \\<Longrightarrow> denote x3a\n(complex_of_real c \\<cdot>\\<^sub>m \\<rho>) =\n                                     complex_of_real c \\<cdot>\\<^sub>m\n                                     denote x3a \\<rho>;\n        well_com (Measure x1 x2a x3); \\<rho> \\<in> carrier_mat d d;\n        partial_density_operator \\<rho>;\n        trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) \\<le> 1\\<rbrakk>\n       \\<Longrightarrow> denote (Measure x1 x2a x3)\n                          (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) =\n                         complex_of_real c \\<cdot>\\<^sub>m\n                         denote (Measure x1 x2a x3) \\<rho>\n 4. \\<And>x1 x2a \\<rho>.\n       \\<lbrakk>\\<And>\\<rho>.\n                   \\<lbrakk>well_com x2a; \\<rho> \\<in> carrier_mat d d;\n                    partial_density_operator \\<rho>;\n                    trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>)\n                    \\<le> 1\\<rbrakk>\n                   \\<Longrightarrow> denote x2a\n(complex_of_real c \\<cdot>\\<^sub>m \\<rho>) =\n                                     complex_of_real c \\<cdot>\\<^sub>m\n                                     denote x2a \\<rho>;\n        well_com (While x1 x2a); \\<rho> \\<in> carrier_mat d d;\n        partial_density_operator \\<rho>;\n        trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) \\<le> 1\\<rbrakk>\n       \\<Longrightarrow> denote (While x1 x2a)\n                          (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) =\n                         complex_of_real c \\<cdot>\\<^sub>m\n                         denote (While x1 x2a) \\<rho>", "then"], ["proof (chain)\npicking this:\n  well_com (Utrans x)\n  \\<rho> \\<in> carrier_mat d d\n  partial_density_operator \\<rho>\n  trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) \\<le> 1", "show ?case"], ["proof (prove)\nusing this:\n  well_com (Utrans x)\n  \\<rho> \\<in> carrier_mat d d\n  partial_density_operator \\<rho>\n  trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) \\<le> 1\n\ngoal (1 subgoal):\n 1. denote (Utrans x) (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) =\n    complex_of_real c \\<cdot>\\<^sub>m denote (Utrans x) \\<rho>", "unfolding denote.simps"], ["proof (prove)\nusing this:\n  well_com (Utrans x)\n  \\<rho> \\<in> carrier_mat d d\n  partial_density_operator \\<rho>\n  trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) \\<le> 1\n\ngoal (1 subgoal):\n 1. x * (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) * adjoint x =\n    complex_of_real c \\<cdot>\\<^sub>m (x * \\<rho> * adjoint x)", "apply (mat_assoc d)"], ["proof (prove)\ngoal (1 subgoal):\n 1. x \\<in> carrier_mat d d", "using Utrans"], ["proof (prove)\nusing this:\n  well_com (Utrans x)\n  \\<rho> \\<in> carrier_mat d d\n  partial_density_operator \\<rho>\n  trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) \\<le> 1\n\ngoal (1 subgoal):\n 1. x \\<in> carrier_mat d d", "by auto"], ["proof (state)\nthis:\n  denote (Utrans x) (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) =\n  complex_of_real c \\<cdot>\\<^sub>m denote (Utrans x) \\<rho>\n\ngoal (3 subgoals):\n 1. \\<And>x1 x2a \\<rho>.\n       \\<lbrakk>\\<And>\\<rho>.\n                   \\<lbrakk>well_com x1; \\<rho> \\<in> carrier_mat d d;\n                    partial_density_operator \\<rho>;\n                    trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>)\n                    \\<le> 1\\<rbrakk>\n                   \\<Longrightarrow> denote x1\n(complex_of_real c \\<cdot>\\<^sub>m \\<rho>) =\n                                     complex_of_real c \\<cdot>\\<^sub>m\n                                     denote x1 \\<rho>;\n        \\<And>\\<rho>.\n           \\<lbrakk>well_com x2a; \\<rho> \\<in> carrier_mat d d;\n            partial_density_operator \\<rho>;\n            trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>)\n            \\<le> 1\\<rbrakk>\n           \\<Longrightarrow> denote x2a\n                              (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) =\n                             complex_of_real c \\<cdot>\\<^sub>m\n                             denote x2a \\<rho>;\n        well_com (x1;; x2a); \\<rho> \\<in> carrier_mat d d;\n        partial_density_operator \\<rho>;\n        trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) \\<le> 1\\<rbrakk>\n       \\<Longrightarrow> denote (x1;; x2a)\n                          (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) =\n                         complex_of_real c \\<cdot>\\<^sub>m\n                         denote (x1;; x2a) \\<rho>\n 2. \\<And>x1 x2a x3 \\<rho>.\n       \\<lbrakk>\\<And>x3a \\<rho>.\n                   \\<lbrakk>x3a \\<in> set x3; well_com x3a;\n                    \\<rho> \\<in> carrier_mat d d;\n                    partial_density_operator \\<rho>;\n                    trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>)\n                    \\<le> 1\\<rbrakk>\n                   \\<Longrightarrow> denote x3a\n(complex_of_real c \\<cdot>\\<^sub>m \\<rho>) =\n                                     complex_of_real c \\<cdot>\\<^sub>m\n                                     denote x3a \\<rho>;\n        well_com (Measure x1 x2a x3); \\<rho> \\<in> carrier_mat d d;\n        partial_density_operator \\<rho>;\n        trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) \\<le> 1\\<rbrakk>\n       \\<Longrightarrow> denote (Measure x1 x2a x3)\n                          (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) =\n                         complex_of_real c \\<cdot>\\<^sub>m\n                         denote (Measure x1 x2a x3) \\<rho>\n 3. \\<And>x1 x2a \\<rho>.\n       \\<lbrakk>\\<And>\\<rho>.\n                   \\<lbrakk>well_com x2a; \\<rho> \\<in> carrier_mat d d;\n                    partial_density_operator \\<rho>;\n                    trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>)\n                    \\<le> 1\\<rbrakk>\n                   \\<Longrightarrow> denote x2a\n(complex_of_real c \\<cdot>\\<^sub>m \\<rho>) =\n                                     complex_of_real c \\<cdot>\\<^sub>m\n                                     denote x2a \\<rho>;\n        well_com (While x1 x2a); \\<rho> \\<in> carrier_mat d d;\n        partial_density_operator \\<rho>;\n        trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) \\<le> 1\\<rbrakk>\n       \\<Longrightarrow> denote (While x1 x2a)\n                          (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) =\n                         complex_of_real c \\<cdot>\\<^sub>m\n                         denote (While x1 x2a) \\<rho>", "next"], ["proof (state)\ngoal (3 subgoals):\n 1. \\<And>x1 x2a \\<rho>.\n       \\<lbrakk>\\<And>\\<rho>.\n                   \\<lbrakk>well_com x1; \\<rho> \\<in> carrier_mat d d;\n                    partial_density_operator \\<rho>;\n                    trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>)\n                    \\<le> 1\\<rbrakk>\n                   \\<Longrightarrow> denote x1\n(complex_of_real c \\<cdot>\\<^sub>m \\<rho>) =\n                                     complex_of_real c \\<cdot>\\<^sub>m\n                                     denote x1 \\<rho>;\n        \\<And>\\<rho>.\n           \\<lbrakk>well_com x2a; \\<rho> \\<in> carrier_mat d d;\n            partial_density_operator \\<rho>;\n            trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>)\n            \\<le> 1\\<rbrakk>\n           \\<Longrightarrow> denote x2a\n                              (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) =\n                             complex_of_real c \\<cdot>\\<^sub>m\n                             denote x2a \\<rho>;\n        well_com (x1;; x2a); \\<rho> \\<in> carrier_mat d d;\n        partial_density_operator \\<rho>;\n        trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) \\<le> 1\\<rbrakk>\n       \\<Longrightarrow> denote (x1;; x2a)\n                          (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) =\n                         complex_of_real c \\<cdot>\\<^sub>m\n                         denote (x1;; x2a) \\<rho>\n 2. \\<And>x1 x2a x3 \\<rho>.\n       \\<lbrakk>\\<And>x3a \\<rho>.\n                   \\<lbrakk>x3a \\<in> set x3; well_com x3a;\n                    \\<rho> \\<in> carrier_mat d d;\n                    partial_density_operator \\<rho>;\n                    trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>)\n                    \\<le> 1\\<rbrakk>\n                   \\<Longrightarrow> denote x3a\n(complex_of_real c \\<cdot>\\<^sub>m \\<rho>) =\n                                     complex_of_real c \\<cdot>\\<^sub>m\n                                     denote x3a \\<rho>;\n        well_com (Measure x1 x2a x3); \\<rho> \\<in> carrier_mat d d;\n        partial_density_operator \\<rho>;\n        trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) \\<le> 1\\<rbrakk>\n       \\<Longrightarrow> denote (Measure x1 x2a x3)\n                          (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) =\n                         complex_of_real c \\<cdot>\\<^sub>m\n                         denote (Measure x1 x2a x3) \\<rho>\n 3. \\<And>x1 x2a \\<rho>.\n       \\<lbrakk>\\<And>\\<rho>.\n                   \\<lbrakk>well_com x2a; \\<rho> \\<in> carrier_mat d d;\n                    partial_density_operator \\<rho>;\n                    trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>)\n                    \\<le> 1\\<rbrakk>\n                   \\<Longrightarrow> denote x2a\n(complex_of_real c \\<cdot>\\<^sub>m \\<rho>) =\n                                     complex_of_real c \\<cdot>\\<^sub>m\n                                     denote x2a \\<rho>;\n        well_com (While x1 x2a); \\<rho> \\<in> carrier_mat d d;\n        partial_density_operator \\<rho>;\n        trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) \\<le> 1\\<rbrakk>\n       \\<Longrightarrow> denote (While x1 x2a)\n                          (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) =\n                         complex_of_real c \\<cdot>\\<^sub>m\n                         denote (While x1 x2a) \\<rho>", "case (Seq x1 x2a)"], ["proof (state)\nthis:\n  \\<lbrakk>well_com x1; ?\\<rho> \\<in> carrier_mat d d;\n   partial_density_operator ?\\<rho>;\n   trace (complex_of_real c \\<cdot>\\<^sub>m ?\\<rho>) \\<le> 1\\<rbrakk>\n  \\<Longrightarrow> denote x1 (complex_of_real c \\<cdot>\\<^sub>m ?\\<rho>) =\n                    complex_of_real c \\<cdot>\\<^sub>m denote x1 ?\\<rho>\n  \\<lbrakk>well_com x2a; ?\\<rho> \\<in> carrier_mat d d;\n   partial_density_operator ?\\<rho>;\n   trace (complex_of_real c \\<cdot>\\<^sub>m ?\\<rho>) \\<le> 1\\<rbrakk>\n  \\<Longrightarrow> denote x2a (complex_of_real c \\<cdot>\\<^sub>m ?\\<rho>) =\n                    complex_of_real c \\<cdot>\\<^sub>m denote x2a ?\\<rho>\n  well_com (x1;; x2a)\n  \\<rho> \\<in> carrier_mat d d\n  partial_density_operator \\<rho>\n  trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) \\<le> 1\n\ngoal (3 subgoals):\n 1. \\<And>x1 x2a \\<rho>.\n       \\<lbrakk>\\<And>\\<rho>.\n                   \\<lbrakk>well_com x1; \\<rho> \\<in> carrier_mat d d;\n                    partial_density_operator \\<rho>;\n                    trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>)\n                    \\<le> 1\\<rbrakk>\n                   \\<Longrightarrow> denote x1\n(complex_of_real c \\<cdot>\\<^sub>m \\<rho>) =\n                                     complex_of_real c \\<cdot>\\<^sub>m\n                                     denote x1 \\<rho>;\n        \\<And>\\<rho>.\n           \\<lbrakk>well_com x2a; \\<rho> \\<in> carrier_mat d d;\n            partial_density_operator \\<rho>;\n            trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>)\n            \\<le> 1\\<rbrakk>\n           \\<Longrightarrow> denote x2a\n                              (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) =\n                             complex_of_real c \\<cdot>\\<^sub>m\n                             denote x2a \\<rho>;\n        well_com (x1;; x2a); \\<rho> \\<in> carrier_mat d d;\n        partial_density_operator \\<rho>;\n        trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) \\<le> 1\\<rbrakk>\n       \\<Longrightarrow> denote (x1;; x2a)\n                          (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) =\n                         complex_of_real c \\<cdot>\\<^sub>m\n                         denote (x1;; x2a) \\<rho>\n 2. \\<And>x1 x2a x3 \\<rho>.\n       \\<lbrakk>\\<And>x3a \\<rho>.\n                   \\<lbrakk>x3a \\<in> set x3; well_com x3a;\n                    \\<rho> \\<in> carrier_mat d d;\n                    partial_density_operator \\<rho>;\n                    trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>)\n                    \\<le> 1\\<rbrakk>\n                   \\<Longrightarrow> denote x3a\n(complex_of_real c \\<cdot>\\<^sub>m \\<rho>) =\n                                     complex_of_real c \\<cdot>\\<^sub>m\n                                     denote x3a \\<rho>;\n        well_com (Measure x1 x2a x3); \\<rho> \\<in> carrier_mat d d;\n        partial_density_operator \\<rho>;\n        trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) \\<le> 1\\<rbrakk>\n       \\<Longrightarrow> denote (Measure x1 x2a x3)\n                          (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) =\n                         complex_of_real c \\<cdot>\\<^sub>m\n                         denote (Measure x1 x2a x3) \\<rho>\n 3. \\<And>x1 x2a \\<rho>.\n       \\<lbrakk>\\<And>\\<rho>.\n                   \\<lbrakk>well_com x2a; \\<rho> \\<in> carrier_mat d d;\n                    partial_density_operator \\<rho>;\n                    trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>)\n                    \\<le> 1\\<rbrakk>\n                   \\<Longrightarrow> denote x2a\n(complex_of_real c \\<cdot>\\<^sub>m \\<rho>) =\n                                     complex_of_real c \\<cdot>\\<^sub>m\n                                     denote x2a \\<rho>;\n        well_com (While x1 x2a); \\<rho> \\<in> carrier_mat d d;\n        partial_density_operator \\<rho>;\n        trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) \\<le> 1\\<rbrakk>\n       \\<Longrightarrow> denote (While x1 x2a)\n                          (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) =\n                         complex_of_real c \\<cdot>\\<^sub>m\n                         denote (While x1 x2a) \\<rho>", "then"], ["proof (chain)\npicking this:\n  \\<lbrakk>well_com x1; ?\\<rho> \\<in> carrier_mat d d;\n   partial_density_operator ?\\<rho>;\n   trace (complex_of_real c \\<cdot>\\<^sub>m ?\\<rho>) \\<le> 1\\<rbrakk>\n  \\<Longrightarrow> denote x1 (complex_of_real c \\<cdot>\\<^sub>m ?\\<rho>) =\n                    complex_of_real c \\<cdot>\\<^sub>m denote x1 ?\\<rho>\n  \\<lbrakk>well_com x2a; ?\\<rho> \\<in> carrier_mat d d;\n   partial_density_operator ?\\<rho>;\n   trace (complex_of_real c \\<cdot>\\<^sub>m ?\\<rho>) \\<le> 1\\<rbrakk>\n  \\<Longrightarrow> denote x2a (complex_of_real c \\<cdot>\\<^sub>m ?\\<rho>) =\n                    complex_of_real c \\<cdot>\\<^sub>m denote x2a ?\\<rho>\n  well_com (x1;; x2a)\n  \\<rho> \\<in> carrier_mat d d\n  partial_density_operator \\<rho>\n  trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) \\<le> 1", "show ?case"], ["proof (prove)\nusing this:\n  \\<lbrakk>well_com x1; ?\\<rho> \\<in> carrier_mat d d;\n   partial_density_operator ?\\<rho>;\n   trace (complex_of_real c \\<cdot>\\<^sub>m ?\\<rho>) \\<le> 1\\<rbrakk>\n  \\<Longrightarrow> denote x1 (complex_of_real c \\<cdot>\\<^sub>m ?\\<rho>) =\n                    complex_of_real c \\<cdot>\\<^sub>m denote x1 ?\\<rho>\n  \\<lbrakk>well_com x2a; ?\\<rho> \\<in> carrier_mat d d;\n   partial_density_operator ?\\<rho>;\n   trace (complex_of_real c \\<cdot>\\<^sub>m ?\\<rho>) \\<le> 1\\<rbrakk>\n  \\<Longrightarrow> denote x2a (complex_of_real c \\<cdot>\\<^sub>m ?\\<rho>) =\n                    complex_of_real c \\<cdot>\\<^sub>m denote x2a ?\\<rho>\n  well_com (x1;; x2a)\n  \\<rho> \\<in> carrier_mat d d\n  partial_density_operator \\<rho>\n  trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) \\<le> 1\n\ngoal (1 subgoal):\n 1. denote (x1;; x2a) (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) =\n    complex_of_real c \\<cdot>\\<^sub>m denote (x1;; x2a) \\<rho>", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<And>\\<rho>.\n                \\<lbrakk>well_com x1; \\<rho> \\<in> carrier_mat d d;\n                 partial_density_operator \\<rho>;\n                 trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>)\n                 \\<le> 1\\<rbrakk>\n                \\<Longrightarrow> denote x1\n                                   (complex_of_real c \\<cdot>\\<^sub>m\n                                    \\<rho>) =\n                                  complex_of_real c \\<cdot>\\<^sub>m\n                                  denote x1 \\<rho>;\n     \\<And>\\<rho>.\n        \\<lbrakk>well_com x2a; \\<rho> \\<in> carrier_mat d d;\n         partial_density_operator \\<rho>;\n         trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) \\<le> 1\\<rbrakk>\n        \\<Longrightarrow> denote x2a\n                           (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) =\n                          complex_of_real c \\<cdot>\\<^sub>m\n                          denote x2a \\<rho>;\n     well_com (x1;; x2a); \\<rho> \\<in> carrier_mat d d;\n     partial_density_operator \\<rho>;\n     trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) \\<le> 1\\<rbrakk>\n    \\<Longrightarrow> denote (x1;; x2a)\n                       (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) =\n                      complex_of_real c \\<cdot>\\<^sub>m\n                      denote (x1;; x2a) \\<rho>", "have cd: \"denote x1 (c \\<cdot>\\<^sub>m \\<rho>) = c \\<cdot>\\<^sub>m denote x1 \\<rho>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. denote x1 (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) =\n    complex_of_real c \\<cdot>\\<^sub>m denote x1 \\<rho>", "using Seq"], ["proof (prove)\nusing this:\n  \\<lbrakk>well_com x1; ?\\<rho> \\<in> carrier_mat d d;\n   partial_density_operator ?\\<rho>;\n   trace (complex_of_real c \\<cdot>\\<^sub>m ?\\<rho>) \\<le> 1\\<rbrakk>\n  \\<Longrightarrow> denote x1 (complex_of_real c \\<cdot>\\<^sub>m ?\\<rho>) =\n                    complex_of_real c \\<cdot>\\<^sub>m denote x1 ?\\<rho>\n  \\<lbrakk>well_com x2a; ?\\<rho> \\<in> carrier_mat d d;\n   partial_density_operator ?\\<rho>;\n   trace (complex_of_real c \\<cdot>\\<^sub>m ?\\<rho>) \\<le> 1\\<rbrakk>\n  \\<Longrightarrow> denote x2a (complex_of_real c \\<cdot>\\<^sub>m ?\\<rho>) =\n                    complex_of_real c \\<cdot>\\<^sub>m denote x2a ?\\<rho>\n  well_com (x1;; x2a)\n  \\<rho> \\<in> carrier_mat d d\n  partial_density_operator \\<rho>\n  trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) \\<le> 1\n\ngoal (1 subgoal):\n 1. denote x1 (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) =\n    complex_of_real c \\<cdot>\\<^sub>m denote x1 \\<rho>", "by auto"], ["proof (state)\nthis:\n  denote x1 (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) =\n  complex_of_real c \\<cdot>\\<^sub>m denote x1 \\<rho>\n\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<And>\\<rho>.\n                \\<lbrakk>well_com x1; \\<rho> \\<in> carrier_mat d d;\n                 partial_density_operator \\<rho>;\n                 trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>)\n                 \\<le> 1\\<rbrakk>\n                \\<Longrightarrow> denote x1\n                                   (complex_of_real c \\<cdot>\\<^sub>m\n                                    \\<rho>) =\n                                  complex_of_real c \\<cdot>\\<^sub>m\n                                  denote x1 \\<rho>;\n     \\<And>\\<rho>.\n        \\<lbrakk>well_com x2a; \\<rho> \\<in> carrier_mat d d;\n         partial_density_operator \\<rho>;\n         trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) \\<le> 1\\<rbrakk>\n        \\<Longrightarrow> denote x2a\n                           (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) =\n                          complex_of_real c \\<cdot>\\<^sub>m\n                          denote x2a \\<rho>;\n     well_com (x1;; x2a); \\<rho> \\<in> carrier_mat d d;\n     partial_density_operator \\<rho>;\n     trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) \\<le> 1\\<rbrakk>\n    \\<Longrightarrow> denote (x1;; x2a)\n                       (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) =\n                      complex_of_real c \\<cdot>\\<^sub>m\n                      denote (x1;; x2a) \\<rho>", "have x1: \"denote x1 \\<rho> \\<in> carrier_mat d d \\<and> partial_density_operator (denote x1 \\<rho>) \\<and> trace (denote x1 \\<rho>) \\<le> trace \\<rho>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. denote x1 \\<rho> \\<in> carrier_mat d d \\<and>\n    partial_density_operator (denote x1 \\<rho>) \\<and>\n    trace (denote x1 \\<rho>) \\<le> trace \\<rho>", "using denote_positive_trace_dim Seq denote_partial_density_operator"], ["proof (prove)\nusing this:\n  \\<lbrakk>well_com ?S; ?\\<rho> \\<in> carrier_mat d d;\n   partial_density_operator ?\\<rho>\\<rbrakk>\n  \\<Longrightarrow> positive (denote ?S ?\\<rho>) \\<and>\n                    trace (denote ?S ?\\<rho>) \\<le> trace ?\\<rho> \\<and>\n                    denote ?S ?\\<rho> \\<in> carrier_mat d d\n  \\<lbrakk>well_com x1; ?\\<rho> \\<in> carrier_mat d d;\n   partial_density_operator ?\\<rho>;\n   trace (complex_of_real c \\<cdot>\\<^sub>m ?\\<rho>) \\<le> 1\\<rbrakk>\n  \\<Longrightarrow> denote x1 (complex_of_real c \\<cdot>\\<^sub>m ?\\<rho>) =\n                    complex_of_real c \\<cdot>\\<^sub>m denote x1 ?\\<rho>\n  \\<lbrakk>well_com x2a; ?\\<rho> \\<in> carrier_mat d d;\n   partial_density_operator ?\\<rho>;\n   trace (complex_of_real c \\<cdot>\\<^sub>m ?\\<rho>) \\<le> 1\\<rbrakk>\n  \\<Longrightarrow> denote x2a (complex_of_real c \\<cdot>\\<^sub>m ?\\<rho>) =\n                    complex_of_real c \\<cdot>\\<^sub>m denote x2a ?\\<rho>\n  well_com (x1;; x2a)\n  \\<rho> \\<in> carrier_mat d d\n  partial_density_operator \\<rho>\n  trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) \\<le> 1\n  \\<lbrakk>well_com ?S; partial_density_operator ?\\<rho>;\n   ?\\<rho> \\<in> carrier_mat d d\\<rbrakk>\n  \\<Longrightarrow> partial_density_operator (denote ?S ?\\<rho>)\n\ngoal (1 subgoal):\n 1. denote x1 \\<rho> \\<in> carrier_mat d d \\<and>\n    partial_density_operator (denote x1 \\<rho>) \\<and>\n    trace (denote x1 \\<rho>) \\<le> trace \\<rho>", "by auto"], ["proof (state)\nthis:\n  denote x1 \\<rho> \\<in> carrier_mat d d \\<and>\n  partial_density_operator (denote x1 \\<rho>) \\<and>\n  trace (denote x1 \\<rho>) \\<le> trace \\<rho>\n\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<And>\\<rho>.\n                \\<lbrakk>well_com x1; \\<rho> \\<in> carrier_mat d d;\n                 partial_density_operator \\<rho>;\n                 trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>)\n                 \\<le> 1\\<rbrakk>\n                \\<Longrightarrow> denote x1\n                                   (complex_of_real c \\<cdot>\\<^sub>m\n                                    \\<rho>) =\n                                  complex_of_real c \\<cdot>\\<^sub>m\n                                  denote x1 \\<rho>;\n     \\<And>\\<rho>.\n        \\<lbrakk>well_com x2a; \\<rho> \\<in> carrier_mat d d;\n         partial_density_operator \\<rho>;\n         trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) \\<le> 1\\<rbrakk>\n        \\<Longrightarrow> denote x2a\n                           (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) =\n                          complex_of_real c \\<cdot>\\<^sub>m\n                          denote x2a \\<rho>;\n     well_com (x1;; x2a); \\<rho> \\<in> carrier_mat d d;\n     partial_density_operator \\<rho>;\n     trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) \\<le> 1\\<rbrakk>\n    \\<Longrightarrow> denote (x1;; x2a)\n                       (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) =\n                      complex_of_real c \\<cdot>\\<^sub>m\n                      denote (x1;; x2a) \\<rho>", "have \"trace (c \\<cdot>\\<^sub>m denote x1 \\<rho>) = c * trace (denote x1 \\<rho>)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. trace (complex_of_real c \\<cdot>\\<^sub>m denote x1 \\<rho>) =\n    complex_of_real c * trace (denote x1 \\<rho>)", "using trace_smult x1"], ["proof (prove)\nusing this:\n  ?A \\<in> carrier_mat ?n ?n \\<Longrightarrow>\n  trace (?c \\<cdot>\\<^sub>m ?A) = ?c * trace ?A\n  denote x1 \\<rho> \\<in> carrier_mat d d \\<and>\n  partial_density_operator (denote x1 \\<rho>) \\<and>\n  trace (denote x1 \\<rho>) \\<le> trace \\<rho>\n\ngoal (1 subgoal):\n 1. trace (complex_of_real c \\<cdot>\\<^sub>m denote x1 \\<rho>) =\n    complex_of_real c * trace (denote x1 \\<rho>)", "by auto"], ["proof (state)\nthis:\n  trace (complex_of_real c \\<cdot>\\<^sub>m denote x1 \\<rho>) =\n  complex_of_real c * trace (denote x1 \\<rho>)\n\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<And>\\<rho>.\n                \\<lbrakk>well_com x1; \\<rho> \\<in> carrier_mat d d;\n                 partial_density_operator \\<rho>;\n                 trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>)\n                 \\<le> 1\\<rbrakk>\n                \\<Longrightarrow> denote x1\n                                   (complex_of_real c \\<cdot>\\<^sub>m\n                                    \\<rho>) =\n                                  complex_of_real c \\<cdot>\\<^sub>m\n                                  denote x1 \\<rho>;\n     \\<And>\\<rho>.\n        \\<lbrakk>well_com x2a; \\<rho> \\<in> carrier_mat d d;\n         partial_density_operator \\<rho>;\n         trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) \\<le> 1\\<rbrakk>\n        \\<Longrightarrow> denote x2a\n                           (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) =\n                          complex_of_real c \\<cdot>\\<^sub>m\n                          denote x2a \\<rho>;\n     well_com (x1;; x2a); \\<rho> \\<in> carrier_mat d d;\n     partial_density_operator \\<rho>;\n     trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) \\<le> 1\\<rbrakk>\n    \\<Longrightarrow> denote (x1;; x2a)\n                       (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) =\n                      complex_of_real c \\<cdot>\\<^sub>m\n                      denote (x1;; x2a) \\<rho>", "also"], ["proof (state)\nthis:\n  trace (complex_of_real c \\<cdot>\\<^sub>m denote x1 \\<rho>) =\n  complex_of_real c * trace (denote x1 \\<rho>)\n\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<And>\\<rho>.\n                \\<lbrakk>well_com x1; \\<rho> \\<in> carrier_mat d d;\n                 partial_density_operator \\<rho>;\n                 trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>)\n                 \\<le> 1\\<rbrakk>\n                \\<Longrightarrow> denote x1\n                                   (complex_of_real c \\<cdot>\\<^sub>m\n                                    \\<rho>) =\n                                  complex_of_real c \\<cdot>\\<^sub>m\n                                  denote x1 \\<rho>;\n     \\<And>\\<rho>.\n        \\<lbrakk>well_com x2a; \\<rho> \\<in> carrier_mat d d;\n         partial_density_operator \\<rho>;\n         trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) \\<le> 1\\<rbrakk>\n        \\<Longrightarrow> denote x2a\n                           (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) =\n                          complex_of_real c \\<cdot>\\<^sub>m\n                          denote x2a \\<rho>;\n     well_com (x1;; x2a); \\<rho> \\<in> carrier_mat d d;\n     partial_density_operator \\<rho>;\n     trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) \\<le> 1\\<rbrakk>\n    \\<Longrightarrow> denote (x1;; x2a)\n                       (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) =\n                      complex_of_real c \\<cdot>\\<^sub>m\n                      denote (x1;; x2a) \\<rho>", "have \"\\<dots> \\<le> c * trace \\<rho>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. complex_of_real c * trace (denote x1 \\<rho>)\n    \\<le> complex_of_real c * trace \\<rho>", "using x1 assms"], ["proof (prove)\nusing this:\n  denote x1 \\<rho> \\<in> carrier_mat d d \\<and>\n  partial_density_operator (denote x1 \\<rho>) \\<and>\n  trace (denote x1 \\<rho>) \\<le> trace \\<rho>\n  0 \\<le> c\n\ngoal (1 subgoal):\n 1. complex_of_real c * trace (denote x1 \\<rho>)\n    \\<le> complex_of_real c * trace \\<rho>", "by (metis Seq.prems cd denote_positive_trace_dim partial_density_operator_def positive_scale smult_carrier_mat trace_smult well_com.simps(3))"], ["proof (state)\nthis:\n  complex_of_real c * trace (denote x1 \\<rho>)\n  \\<le> complex_of_real c * trace \\<rho>\n\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<And>\\<rho>.\n                \\<lbrakk>well_com x1; \\<rho> \\<in> carrier_mat d d;\n                 partial_density_operator \\<rho>;\n                 trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>)\n                 \\<le> 1\\<rbrakk>\n                \\<Longrightarrow> denote x1\n                                   (complex_of_real c \\<cdot>\\<^sub>m\n                                    \\<rho>) =\n                                  complex_of_real c \\<cdot>\\<^sub>m\n                                  denote x1 \\<rho>;\n     \\<And>\\<rho>.\n        \\<lbrakk>well_com x2a; \\<rho> \\<in> carrier_mat d d;\n         partial_density_operator \\<rho>;\n         trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) \\<le> 1\\<rbrakk>\n        \\<Longrightarrow> denote x2a\n                           (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) =\n                          complex_of_real c \\<cdot>\\<^sub>m\n                          denote x2a \\<rho>;\n     well_com (x1;; x2a); \\<rho> \\<in> carrier_mat d d;\n     partial_density_operator \\<rho>;\n     trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) \\<le> 1\\<rbrakk>\n    \\<Longrightarrow> denote (x1;; x2a)\n                       (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) =\n                      complex_of_real c \\<cdot>\\<^sub>m\n                      denote (x1;; x2a) \\<rho>", "also"], ["proof (state)\nthis:\n  complex_of_real c * trace (denote x1 \\<rho>)\n  \\<le> complex_of_real c * trace \\<rho>\n\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<And>\\<rho>.\n                \\<lbrakk>well_com x1; \\<rho> \\<in> carrier_mat d d;\n                 partial_density_operator \\<rho>;\n                 trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>)\n                 \\<le> 1\\<rbrakk>\n                \\<Longrightarrow> denote x1\n                                   (complex_of_real c \\<cdot>\\<^sub>m\n                                    \\<rho>) =\n                                  complex_of_real c \\<cdot>\\<^sub>m\n                                  denote x1 \\<rho>;\n     \\<And>\\<rho>.\n        \\<lbrakk>well_com x2a; \\<rho> \\<in> carrier_mat d d;\n         partial_density_operator \\<rho>;\n         trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) \\<le> 1\\<rbrakk>\n        \\<Longrightarrow> denote x2a\n                           (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) =\n                          complex_of_real c \\<cdot>\\<^sub>m\n                          denote x2a \\<rho>;\n     well_com (x1;; x2a); \\<rho> \\<in> carrier_mat d d;\n     partial_density_operator \\<rho>;\n     trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) \\<le> 1\\<rbrakk>\n    \\<Longrightarrow> denote (x1;; x2a)\n                       (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) =\n                      complex_of_real c \\<cdot>\\<^sub>m\n                      denote (x1;; x2a) \\<rho>", "have \"\\<dots> \\<le> 1\""], ["proof (prove)\ngoal (1 subgoal):\n 1. complex_of_real c * trace \\<rho> \\<le> 1", "using Seq(6) trace_smult Seq(4)"], ["proof (prove)\nusing this:\n  trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) \\<le> 1\n  ?A \\<in> carrier_mat ?n ?n \\<Longrightarrow>\n  trace (?c \\<cdot>\\<^sub>m ?A) = ?c * trace ?A\n  \\<rho> \\<in> carrier_mat d d\n\ngoal (1 subgoal):\n 1. complex_of_real c * trace \\<rho> \\<le> 1", "by (simp add: trace_smult)"], ["proof (state)\nthis:\n  complex_of_real c * trace \\<rho> \\<le> 1\n\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<And>\\<rho>.\n                \\<lbrakk>well_com x1; \\<rho> \\<in> carrier_mat d d;\n                 partial_density_operator \\<rho>;\n                 trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>)\n                 \\<le> 1\\<rbrakk>\n                \\<Longrightarrow> denote x1\n                                   (complex_of_real c \\<cdot>\\<^sub>m\n                                    \\<rho>) =\n                                  complex_of_real c \\<cdot>\\<^sub>m\n                                  denote x1 \\<rho>;\n     \\<And>\\<rho>.\n        \\<lbrakk>well_com x2a; \\<rho> \\<in> carrier_mat d d;\n         partial_density_operator \\<rho>;\n         trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) \\<le> 1\\<rbrakk>\n        \\<Longrightarrow> denote x2a\n                           (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) =\n                          complex_of_real c \\<cdot>\\<^sub>m\n                          denote x2a \\<rho>;\n     well_com (x1;; x2a); \\<rho> \\<in> carrier_mat d d;\n     partial_density_operator \\<rho>;\n     trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) \\<le> 1\\<rbrakk>\n    \\<Longrightarrow> denote (x1;; x2a)\n                       (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) =\n                      complex_of_real c \\<cdot>\\<^sub>m\n                      denote (x1;; x2a) \\<rho>", "finally"], ["proof (chain)\npicking this:\n  trace (complex_of_real c \\<cdot>\\<^sub>m denote x1 \\<rho>) \\<le> 1", "have \"trace (c \\<cdot>\\<^sub>m denote x1 \\<rho>) \\<le>1\""], ["proof (prove)\nusing this:\n  trace (complex_of_real c \\<cdot>\\<^sub>m denote x1 \\<rho>) \\<le> 1\n\ngoal (1 subgoal):\n 1. trace (complex_of_real c \\<cdot>\\<^sub>m denote x1 \\<rho>) \\<le> 1", "by auto"], ["proof (state)\nthis:\n  trace (complex_of_real c \\<cdot>\\<^sub>m denote x1 \\<rho>) \\<le> 1\n\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<And>\\<rho>.\n                \\<lbrakk>well_com x1; \\<rho> \\<in> carrier_mat d d;\n                 partial_density_operator \\<rho>;\n                 trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>)\n                 \\<le> 1\\<rbrakk>\n                \\<Longrightarrow> denote x1\n                                   (complex_of_real c \\<cdot>\\<^sub>m\n                                    \\<rho>) =\n                                  complex_of_real c \\<cdot>\\<^sub>m\n                                  denote x1 \\<rho>;\n     \\<And>\\<rho>.\n        \\<lbrakk>well_com x2a; \\<rho> \\<in> carrier_mat d d;\n         partial_density_operator \\<rho>;\n         trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) \\<le> 1\\<rbrakk>\n        \\<Longrightarrow> denote x2a\n                           (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) =\n                          complex_of_real c \\<cdot>\\<^sub>m\n                          denote x2a \\<rho>;\n     well_com (x1;; x2a); \\<rho> \\<in> carrier_mat d d;\n     partial_density_operator \\<rho>;\n     trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) \\<le> 1\\<rbrakk>\n    \\<Longrightarrow> denote (x1;; x2a)\n                       (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) =\n                      complex_of_real c \\<cdot>\\<^sub>m\n                      denote (x1;; x2a) \\<rho>", "then"], ["proof (chain)\npicking this:\n  trace (complex_of_real c \\<cdot>\\<^sub>m denote x1 \\<rho>) \\<le> 1", "have \"denote x2a (c \\<cdot>\\<^sub>m denote x1 \\<rho>) = c \\<cdot>\\<^sub>m denote x2a ( denote x1 \\<rho>)\""], ["proof (prove)\nusing this:\n  trace (complex_of_real c \\<cdot>\\<^sub>m denote x1 \\<rho>) \\<le> 1\n\ngoal (1 subgoal):\n 1. denote x2a (complex_of_real c \\<cdot>\\<^sub>m denote x1 \\<rho>) =\n    complex_of_real c \\<cdot>\\<^sub>m denote x2a (denote x1 \\<rho>)", "using x1 Seq"], ["proof (prove)\nusing this:\n  trace (complex_of_real c \\<cdot>\\<^sub>m denote x1 \\<rho>) \\<le> 1\n  denote x1 \\<rho> \\<in> carrier_mat d d \\<and>\n  partial_density_operator (denote x1 \\<rho>) \\<and>\n  trace (denote x1 \\<rho>) \\<le> trace \\<rho>\n  \\<lbrakk>well_com x1; ?\\<rho> \\<in> carrier_mat d d;\n   partial_density_operator ?\\<rho>;\n   trace (complex_of_real c \\<cdot>\\<^sub>m ?\\<rho>) \\<le> 1\\<rbrakk>\n  \\<Longrightarrow> denote x1 (complex_of_real c \\<cdot>\\<^sub>m ?\\<rho>) =\n                    complex_of_real c \\<cdot>\\<^sub>m denote x1 ?\\<rho>\n  \\<lbrakk>well_com x2a; ?\\<rho> \\<in> carrier_mat d d;\n   partial_density_operator ?\\<rho>;\n   trace (complex_of_real c \\<cdot>\\<^sub>m ?\\<rho>) \\<le> 1\\<rbrakk>\n  \\<Longrightarrow> denote x2a (complex_of_real c \\<cdot>\\<^sub>m ?\\<rho>) =\n                    complex_of_real c \\<cdot>\\<^sub>m denote x2a ?\\<rho>\n  well_com (x1;; x2a)\n  \\<rho> \\<in> carrier_mat d d\n  partial_density_operator \\<rho>\n  trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) \\<le> 1\n\ngoal (1 subgoal):\n 1. denote x2a (complex_of_real c \\<cdot>\\<^sub>m denote x1 \\<rho>) =\n    complex_of_real c \\<cdot>\\<^sub>m denote x2a (denote x1 \\<rho>)", "by auto"], ["proof (state)\nthis:\n  denote x2a (complex_of_real c \\<cdot>\\<^sub>m denote x1 \\<rho>) =\n  complex_of_real c \\<cdot>\\<^sub>m denote x2a (denote x1 \\<rho>)\n\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<And>\\<rho>.\n                \\<lbrakk>well_com x1; \\<rho> \\<in> carrier_mat d d;\n                 partial_density_operator \\<rho>;\n                 trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>)\n                 \\<le> 1\\<rbrakk>\n                \\<Longrightarrow> denote x1\n                                   (complex_of_real c \\<cdot>\\<^sub>m\n                                    \\<rho>) =\n                                  complex_of_real c \\<cdot>\\<^sub>m\n                                  denote x1 \\<rho>;\n     \\<And>\\<rho>.\n        \\<lbrakk>well_com x2a; \\<rho> \\<in> carrier_mat d d;\n         partial_density_operator \\<rho>;\n         trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) \\<le> 1\\<rbrakk>\n        \\<Longrightarrow> denote x2a\n                           (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) =\n                          complex_of_real c \\<cdot>\\<^sub>m\n                          denote x2a \\<rho>;\n     well_com (x1;; x2a); \\<rho> \\<in> carrier_mat d d;\n     partial_density_operator \\<rho>;\n     trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) \\<le> 1\\<rbrakk>\n    \\<Longrightarrow> denote (x1;; x2a)\n                       (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) =\n                      complex_of_real c \\<cdot>\\<^sub>m\n                      denote (x1;; x2a) \\<rho>", "then"], ["proof (chain)\npicking this:\n  denote x2a (complex_of_real c \\<cdot>\\<^sub>m denote x1 \\<rho>) =\n  complex_of_real c \\<cdot>\\<^sub>m denote x2a (denote x1 \\<rho>)", "show ?thesis"], ["proof (prove)\nusing this:\n  denote x2a (complex_of_real c \\<cdot>\\<^sub>m denote x1 \\<rho>) =\n  complex_of_real c \\<cdot>\\<^sub>m denote x2a (denote x1 \\<rho>)\n\ngoal (1 subgoal):\n 1. denote (x1;; x2a) (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) =\n    complex_of_real c \\<cdot>\\<^sub>m denote (x1;; x2a) \\<rho>", "using denote.simps(4) cd"], ["proof (prove)\nusing this:\n  denote x2a (complex_of_real c \\<cdot>\\<^sub>m denote x1 \\<rho>) =\n  complex_of_real c \\<cdot>\\<^sub>m denote x2a (denote x1 \\<rho>)\n  denote (Measure ?n ?M ?S) ?\\<rho> =\n  denote_measure ?n ?M (map denote ?S) ?\\<rho>\n  denote x1 (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) =\n  complex_of_real c \\<cdot>\\<^sub>m denote x1 \\<rho>\n\ngoal (1 subgoal):\n 1. denote (x1;; x2a) (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) =\n    complex_of_real c \\<cdot>\\<^sub>m denote (x1;; x2a) \\<rho>", "by auto"], ["proof (state)\nthis:\n  denote (x1;; x2a) (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) =\n  complex_of_real c \\<cdot>\\<^sub>m denote (x1;; x2a) \\<rho>\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  denote (x1;; x2a) (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) =\n  complex_of_real c \\<cdot>\\<^sub>m denote (x1;; x2a) \\<rho>\n\ngoal (2 subgoals):\n 1. \\<And>x1 x2a x3 \\<rho>.\n       \\<lbrakk>\\<And>x3a \\<rho>.\n                   \\<lbrakk>x3a \\<in> set x3; well_com x3a;\n                    \\<rho> \\<in> carrier_mat d d;\n                    partial_density_operator \\<rho>;\n                    trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>)\n                    \\<le> 1\\<rbrakk>\n                   \\<Longrightarrow> denote x3a\n(complex_of_real c \\<cdot>\\<^sub>m \\<rho>) =\n                                     complex_of_real c \\<cdot>\\<^sub>m\n                                     denote x3a \\<rho>;\n        well_com (Measure x1 x2a x3); \\<rho> \\<in> carrier_mat d d;\n        partial_density_operator \\<rho>;\n        trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) \\<le> 1\\<rbrakk>\n       \\<Longrightarrow> denote (Measure x1 x2a x3)\n                          (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) =\n                         complex_of_real c \\<cdot>\\<^sub>m\n                         denote (Measure x1 x2a x3) \\<rho>\n 2. \\<And>x1 x2a \\<rho>.\n       \\<lbrakk>\\<And>\\<rho>.\n                   \\<lbrakk>well_com x2a; \\<rho> \\<in> carrier_mat d d;\n                    partial_density_operator \\<rho>;\n                    trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>)\n                    \\<le> 1\\<rbrakk>\n                   \\<Longrightarrow> denote x2a\n(complex_of_real c \\<cdot>\\<^sub>m \\<rho>) =\n                                     complex_of_real c \\<cdot>\\<^sub>m\n                                     denote x2a \\<rho>;\n        well_com (While x1 x2a); \\<rho> \\<in> carrier_mat d d;\n        partial_density_operator \\<rho>;\n        trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) \\<le> 1\\<rbrakk>\n       \\<Longrightarrow> denote (While x1 x2a)\n                          (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) =\n                         complex_of_real c \\<cdot>\\<^sub>m\n                         denote (While x1 x2a) \\<rho>", "next"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>x1 x2a x3 \\<rho>.\n       \\<lbrakk>\\<And>x3a \\<rho>.\n                   \\<lbrakk>x3a \\<in> set x3; well_com x3a;\n                    \\<rho> \\<in> carrier_mat d d;\n                    partial_density_operator \\<rho>;\n                    trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>)\n                    \\<le> 1\\<rbrakk>\n                   \\<Longrightarrow> denote x3a\n(complex_of_real c \\<cdot>\\<^sub>m \\<rho>) =\n                                     complex_of_real c \\<cdot>\\<^sub>m\n                                     denote x3a \\<rho>;\n        well_com (Measure x1 x2a x3); \\<rho> \\<in> carrier_mat d d;\n        partial_density_operator \\<rho>;\n        trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) \\<le> 1\\<rbrakk>\n       \\<Longrightarrow> denote (Measure x1 x2a x3)\n                          (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) =\n                         complex_of_real c \\<cdot>\\<^sub>m\n                         denote (Measure x1 x2a x3) \\<rho>\n 2. \\<And>x1 x2a \\<rho>.\n       \\<lbrakk>\\<And>\\<rho>.\n                   \\<lbrakk>well_com x2a; \\<rho> \\<in> carrier_mat d d;\n                    partial_density_operator \\<rho>;\n                    trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>)\n                    \\<le> 1\\<rbrakk>\n                   \\<Longrightarrow> denote x2a\n(complex_of_real c \\<cdot>\\<^sub>m \\<rho>) =\n                                     complex_of_real c \\<cdot>\\<^sub>m\n                                     denote x2a \\<rho>;\n        well_com (While x1 x2a); \\<rho> \\<in> carrier_mat d d;\n        partial_density_operator \\<rho>;\n        trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) \\<le> 1\\<rbrakk>\n       \\<Longrightarrow> denote (While x1 x2a)\n                          (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) =\n                         complex_of_real c \\<cdot>\\<^sub>m\n                         denote (While x1 x2a) \\<rho>", "case (Measure x1 x2a x3a)"], ["proof (state)\nthis:\n  \\<lbrakk>?x3a \\<in> set x3a; well_com ?x3a; ?\\<rho> \\<in> carrier_mat d d;\n   partial_density_operator ?\\<rho>;\n   trace (complex_of_real c \\<cdot>\\<^sub>m ?\\<rho>) \\<le> 1\\<rbrakk>\n  \\<Longrightarrow> denote ?x3a\n                     (complex_of_real c \\<cdot>\\<^sub>m ?\\<rho>) =\n                    complex_of_real c \\<cdot>\\<^sub>m denote ?x3a ?\\<rho>\n  well_com (Measure x1 x2a x3a)\n  \\<rho> \\<in> carrier_mat d d\n  partial_density_operator \\<rho>\n  trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) \\<le> 1\n\ngoal (2 subgoals):\n 1. \\<And>x1 x2a x3 \\<rho>.\n       \\<lbrakk>\\<And>x3a \\<rho>.\n                   \\<lbrakk>x3a \\<in> set x3; well_com x3a;\n                    \\<rho> \\<in> carrier_mat d d;\n                    partial_density_operator \\<rho>;\n                    trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>)\n                    \\<le> 1\\<rbrakk>\n                   \\<Longrightarrow> denote x3a\n(complex_of_real c \\<cdot>\\<^sub>m \\<rho>) =\n                                     complex_of_real c \\<cdot>\\<^sub>m\n                                     denote x3a \\<rho>;\n        well_com (Measure x1 x2a x3); \\<rho> \\<in> carrier_mat d d;\n        partial_density_operator \\<rho>;\n        trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) \\<le> 1\\<rbrakk>\n       \\<Longrightarrow> denote (Measure x1 x2a x3)\n                          (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) =\n                         complex_of_real c \\<cdot>\\<^sub>m\n                         denote (Measure x1 x2a x3) \\<rho>\n 2. \\<And>x1 x2a \\<rho>.\n       \\<lbrakk>\\<And>\\<rho>.\n                   \\<lbrakk>well_com x2a; \\<rho> \\<in> carrier_mat d d;\n                    partial_density_operator \\<rho>;\n                    trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>)\n                    \\<le> 1\\<rbrakk>\n                   \\<Longrightarrow> denote x2a\n(complex_of_real c \\<cdot>\\<^sub>m \\<rho>) =\n                                     complex_of_real c \\<cdot>\\<^sub>m\n                                     denote x2a \\<rho>;\n        well_com (While x1 x2a); \\<rho> \\<in> carrier_mat d d;\n        partial_density_operator \\<rho>;\n        trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) \\<le> 1\\<rbrakk>\n       \\<Longrightarrow> denote (While x1 x2a)\n                          (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) =\n                         complex_of_real c \\<cdot>\\<^sub>m\n                         denote (While x1 x2a) \\<rho>", "then"], ["proof (chain)\npicking this:\n  \\<lbrakk>?x3a \\<in> set x3a; well_com ?x3a; ?\\<rho> \\<in> carrier_mat d d;\n   partial_density_operator ?\\<rho>;\n   trace (complex_of_real c \\<cdot>\\<^sub>m ?\\<rho>) \\<le> 1\\<rbrakk>\n  \\<Longrightarrow> denote ?x3a\n                     (complex_of_real c \\<cdot>\\<^sub>m ?\\<rho>) =\n                    complex_of_real c \\<cdot>\\<^sub>m denote ?x3a ?\\<rho>\n  well_com (Measure x1 x2a x3a)\n  \\<rho> \\<in> carrier_mat d d\n  partial_density_operator \\<rho>\n  trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) \\<le> 1", "show ?case"], ["proof (prove)\nusing this:\n  \\<lbrakk>?x3a \\<in> set x3a; well_com ?x3a; ?\\<rho> \\<in> carrier_mat d d;\n   partial_density_operator ?\\<rho>;\n   trace (complex_of_real c \\<cdot>\\<^sub>m ?\\<rho>) \\<le> 1\\<rbrakk>\n  \\<Longrightarrow> denote ?x3a\n                     (complex_of_real c \\<cdot>\\<^sub>m ?\\<rho>) =\n                    complex_of_real c \\<cdot>\\<^sub>m denote ?x3a ?\\<rho>\n  well_com (Measure x1 x2a x3a)\n  \\<rho> \\<in> carrier_mat d d\n  partial_density_operator \\<rho>\n  trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) \\<le> 1\n\ngoal (1 subgoal):\n 1. denote (Measure x1 x2a x3a) (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) =\n    complex_of_real c \\<cdot>\\<^sub>m denote (Measure x1 x2a x3a) \\<rho>", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<And>x3aa \\<rho>.\n                \\<lbrakk>x3aa \\<in> set x3a; well_com x3aa;\n                 \\<rho> \\<in> carrier_mat d d;\n                 partial_density_operator \\<rho>;\n                 trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>)\n                 \\<le> 1\\<rbrakk>\n                \\<Longrightarrow> denote x3aa\n                                   (complex_of_real c \\<cdot>\\<^sub>m\n                                    \\<rho>) =\n                                  complex_of_real c \\<cdot>\\<^sub>m\n                                  denote x3aa \\<rho>;\n     well_com (Measure x1 x2a x3a); \\<rho> \\<in> carrier_mat d d;\n     partial_density_operator \\<rho>;\n     trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) \\<le> 1\\<rbrakk>\n    \\<Longrightarrow> denote (Measure x1 x2a x3a)\n                       (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) =\n                      complex_of_real c \\<cdot>\\<^sub>m\n                      denote (Measure x1 x2a x3a) \\<rho>", "have ptc: \"\\<And>x3aa \\<rho>. x3aa \\<in> set x3a \\<Longrightarrow> well_com x3aa \\<Longrightarrow> \\<rho> \\<in> carrier_mat d d \\<Longrightarrow> partial_density_operator \\<rho> \n      \\<Longrightarrow> positive (denote x3aa \\<rho>) \\<and> trace (denote x3aa \\<rho>) \\<le> trace \\<rho> \\<and> denote x3aa \\<rho> \\<in> carrier_mat d d\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>x3aa \\<rho>.\n       \\<lbrakk>x3aa \\<in> set x3a; well_com x3aa;\n        \\<rho> \\<in> carrier_mat d d;\n        partial_density_operator \\<rho>\\<rbrakk>\n       \\<Longrightarrow> positive (denote x3aa \\<rho>) \\<and>\n                         trace (denote x3aa \\<rho>)\n                         \\<le> trace \\<rho> \\<and>\n                         denote x3aa \\<rho> \\<in> carrier_mat d d", "using denote_positive_trace_dim Measure"], ["proof (prove)\nusing this:\n  \\<lbrakk>well_com ?S; ?\\<rho> \\<in> carrier_mat d d;\n   partial_density_operator ?\\<rho>\\<rbrakk>\n  \\<Longrightarrow> positive (denote ?S ?\\<rho>) \\<and>\n                    trace (denote ?S ?\\<rho>) \\<le> trace ?\\<rho> \\<and>\n                    denote ?S ?\\<rho> \\<in> carrier_mat d d\n  \\<lbrakk>?x3a \\<in> set x3a; well_com ?x3a; ?\\<rho> \\<in> carrier_mat d d;\n   partial_density_operator ?\\<rho>;\n   trace (complex_of_real c \\<cdot>\\<^sub>m ?\\<rho>) \\<le> 1\\<rbrakk>\n  \\<Longrightarrow> denote ?x3a\n                     (complex_of_real c \\<cdot>\\<^sub>m ?\\<rho>) =\n                    complex_of_real c \\<cdot>\\<^sub>m denote ?x3a ?\\<rho>\n  well_com (Measure x1 x2a x3a)\n  \\<rho> \\<in> carrier_mat d d\n  partial_density_operator \\<rho>\n  trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) \\<le> 1\n\ngoal (1 subgoal):\n 1. \\<And>x3aa \\<rho>.\n       \\<lbrakk>x3aa \\<in> set x3a; well_com x3aa;\n        \\<rho> \\<in> carrier_mat d d;\n        partial_density_operator \\<rho>\\<rbrakk>\n       \\<Longrightarrow> positive (denote x3aa \\<rho>) \\<and>\n                         trace (denote x3aa \\<rho>)\n                         \\<le> trace \\<rho> \\<and>\n                         denote x3aa \\<rho> \\<in> carrier_mat d d", "by auto"], ["proof (state)\nthis:\n  \\<lbrakk>?x3aa \\<in> set x3a; well_com ?x3aa;\n   ?\\<rho> \\<in> carrier_mat d d; partial_density_operator ?\\<rho>\\<rbrakk>\n  \\<Longrightarrow> positive (denote ?x3aa ?\\<rho>) \\<and>\n                    trace (denote ?x3aa ?\\<rho>) \\<le> trace ?\\<rho> \\<and>\n                    denote ?x3aa ?\\<rho> \\<in> carrier_mat d d\n\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<And>x3aa \\<rho>.\n                \\<lbrakk>x3aa \\<in> set x3a; well_com x3aa;\n                 \\<rho> \\<in> carrier_mat d d;\n                 partial_density_operator \\<rho>;\n                 trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>)\n                 \\<le> 1\\<rbrakk>\n                \\<Longrightarrow> denote x3aa\n                                   (complex_of_real c \\<cdot>\\<^sub>m\n                                    \\<rho>) =\n                                  complex_of_real c \\<cdot>\\<^sub>m\n                                  denote x3aa \\<rho>;\n     well_com (Measure x1 x2a x3a); \\<rho> \\<in> carrier_mat d d;\n     partial_density_operator \\<rho>;\n     trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) \\<le> 1\\<rbrakk>\n    \\<Longrightarrow> denote (Measure x1 x2a x3a)\n                       (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) =\n                      complex_of_real c \\<cdot>\\<^sub>m\n                      denote (Measure x1 x2a x3a) \\<rho>", "have cad: \"x2a k * (c \\<cdot>\\<^sub>m \\<rho>) * adjoint (x2a k) = c \\<cdot>\\<^sub>m (x2a k * \\<rho> * adjoint (x2a k))\"\n      if k: \"k < x1\" for k"], ["proof (prove)\ngoal (1 subgoal):\n 1. x2a k * (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) * adjoint (x2a k) =\n    complex_of_real c \\<cdot>\\<^sub>m (x2a k * \\<rho> * adjoint (x2a k))", "apply (mat_assoc d)"], ["proof (prove)\ngoal (2 subgoals):\n 1. x2a k \\<in> carrier_mat d d\n 2. \\<rho> \\<in> carrier_mat d d", "using well_com.simps Measure measurement_dim k"], ["proof (prove)\nusing this:\n  well_com SKIP = True\n  well_com (Utrans ?U) = (?U \\<in> carrier_mat d d \\<and> unitary ?U)\n  well_com (?S1.0;; ?S2.0) = (well_com ?S1.0 \\<and> well_com ?S2.0)\n  well_com (Measure ?n ?M ?S) =\n  (measurement d ?n ?M \\<and> length ?S = ?n \\<and> list_all well_com ?S)\n  well_com (While ?M ?S) = (measurement d 2 ?M \\<and> well_com ?S)\n  \\<lbrakk>?x3a \\<in> set x3a; well_com ?x3a; ?\\<rho> \\<in> carrier_mat d d;\n   partial_density_operator ?\\<rho>;\n   trace (complex_of_real c \\<cdot>\\<^sub>m ?\\<rho>) \\<le> 1\\<rbrakk>\n  \\<Longrightarrow> denote ?x3a\n                     (complex_of_real c \\<cdot>\\<^sub>m ?\\<rho>) =\n                    complex_of_real c \\<cdot>\\<^sub>m denote ?x3a ?\\<rho>\n  well_com (Measure x1 x2a x3a)\n  \\<rho> \\<in> carrier_mat d d\n  partial_density_operator \\<rho>\n  trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) \\<le> 1\n  \\<lbrakk>measurement ?d ?n ?M; ?k < ?n\\<rbrakk>\n  \\<Longrightarrow> ?M ?k \\<in> carrier_mat ?d ?d\n  k < x1\n\ngoal (2 subgoals):\n 1. x2a k \\<in> carrier_mat d d\n 2. \\<rho> \\<in> carrier_mat d d", "by auto"], ["proof (state)\nthis:\n  ?k < x1 \\<Longrightarrow>\n  x2a ?k * (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) * adjoint (x2a ?k) =\n  complex_of_real c \\<cdot>\\<^sub>m (x2a ?k * \\<rho> * adjoint (x2a ?k))\n\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<And>x3aa \\<rho>.\n                \\<lbrakk>x3aa \\<in> set x3a; well_com x3aa;\n                 \\<rho> \\<in> carrier_mat d d;\n                 partial_density_operator \\<rho>;\n                 trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>)\n                 \\<le> 1\\<rbrakk>\n                \\<Longrightarrow> denote x3aa\n                                   (complex_of_real c \\<cdot>\\<^sub>m\n                                    \\<rho>) =\n                                  complex_of_real c \\<cdot>\\<^sub>m\n                                  denote x3aa \\<rho>;\n     well_com (Measure x1 x2a x3a); \\<rho> \\<in> carrier_mat d d;\n     partial_density_operator \\<rho>;\n     trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) \\<le> 1\\<rbrakk>\n    \\<Longrightarrow> denote (Measure x1 x2a x3a)\n                       (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) =\n                      complex_of_real c \\<cdot>\\<^sub>m\n                      denote (Measure x1 x2a x3a) \\<rho>", "have \"\\<forall>k<x1. x2a k * \\<rho> * adjoint (x2a k) \\<in> carrier_mat d d\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>k<x1. x2a k * \\<rho> * adjoint (x2a k) \\<in> carrier_mat d d", "using Measure(2) measurement_dim Measure(3)"], ["proof (prove)\nusing this:\n  well_com (Measure x1 x2a x3a)\n  \\<lbrakk>measurement ?d ?n ?M; ?k < ?n\\<rbrakk>\n  \\<Longrightarrow> ?M ?k \\<in> carrier_mat ?d ?d\n  \\<rho> \\<in> carrier_mat d d\n\ngoal (1 subgoal):\n 1. \\<forall>k<x1. x2a k * \\<rho> * adjoint (x2a k) \\<in> carrier_mat d d", "by fastforce"], ["proof (state)\nthis:\n  \\<forall>k<x1. x2a k * \\<rho> * adjoint (x2a k) \\<in> carrier_mat d d\n\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<And>x3aa \\<rho>.\n                \\<lbrakk>x3aa \\<in> set x3a; well_com x3aa;\n                 \\<rho> \\<in> carrier_mat d d;\n                 partial_density_operator \\<rho>;\n                 trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>)\n                 \\<le> 1\\<rbrakk>\n                \\<Longrightarrow> denote x3aa\n                                   (complex_of_real c \\<cdot>\\<^sub>m\n                                    \\<rho>) =\n                                  complex_of_real c \\<cdot>\\<^sub>m\n                                  denote x3aa \\<rho>;\n     well_com (Measure x1 x2a x3a); \\<rho> \\<in> carrier_mat d d;\n     partial_density_operator \\<rho>;\n     trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) \\<le> 1\\<rbrakk>\n    \\<Longrightarrow> denote (Measure x1 x2a x3a)\n                       (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) =\n                      complex_of_real c \\<cdot>\\<^sub>m\n                      denote (Measure x1 x2a x3a) \\<rho>", "have lea: \"\\<forall>k<x1. adjoint (x2a k) * x2a k \\<le>\\<^sub>L 1\\<^sub>m d\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>k<x1. adjoint (x2a k) * x2a k \\<le>\\<^sub>L 1\\<^sub>m d", "using measurement_le_one_mat Measure(2)"], ["proof (prove)\nusing this:\n  \\<lbrakk>measurement ?d ?n ?f; ?j < ?n\\<rbrakk>\n  \\<Longrightarrow> adjoint (?f ?j) * ?f ?j \\<le>\\<^sub>L 1\\<^sub>m ?d\n  well_com (Measure x1 x2a x3a)\n\ngoal (1 subgoal):\n 1. \\<forall>k<x1. adjoint (x2a k) * x2a k \\<le>\\<^sub>L 1\\<^sub>m d", "by auto"], ["proof (state)\nthis:\n  \\<forall>k<x1. adjoint (x2a k) * x2a k \\<le>\\<^sub>L 1\\<^sub>m d\n\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<And>x3aa \\<rho>.\n                \\<lbrakk>x3aa \\<in> set x3a; well_com x3aa;\n                 \\<rho> \\<in> carrier_mat d d;\n                 partial_density_operator \\<rho>;\n                 trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>)\n                 \\<le> 1\\<rbrakk>\n                \\<Longrightarrow> denote x3aa\n                                   (complex_of_real c \\<cdot>\\<^sub>m\n                                    \\<rho>) =\n                                  complex_of_real c \\<cdot>\\<^sub>m\n                                  denote x3aa \\<rho>;\n     well_com (Measure x1 x2a x3a); \\<rho> \\<in> carrier_mat d d;\n     partial_density_operator \\<rho>;\n     trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) \\<le> 1\\<rbrakk>\n    \\<Longrightarrow> denote (Measure x1 x2a x3a)\n                       (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) =\n                      complex_of_real c \\<cdot>\\<^sub>m\n                      denote (Measure x1 x2a x3a) \\<rho>", "then"], ["proof (chain)\npicking this:\n  \\<forall>k<x1. adjoint (x2a k) * x2a k \\<le>\\<^sub>L 1\\<^sub>m d", "have pdox: \"\\<forall> k<x1. partial_density_operator (x2a k * \\<rho> * adjoint (x2a k))\""], ["proof (prove)\nusing this:\n  \\<forall>k<x1. adjoint (x2a k) * x2a k \\<le>\\<^sub>L 1\\<^sub>m d\n\ngoal (1 subgoal):\n 1. \\<forall>k<x1.\n       partial_density_operator (x2a k * \\<rho> * adjoint (x2a k))", "using pdo_close_under_measurement Measure(2,3,4) measurement_dim"], ["proof (prove)\nusing this:\n  \\<forall>k<x1. adjoint (x2a k) * x2a k \\<le>\\<^sub>L 1\\<^sub>m d\n  \\<lbrakk>?M \\<in> carrier_mat ?n ?n; ?\\<rho> \\<in> carrier_mat ?n ?n;\n   partial_density_operator ?\\<rho>;\n   adjoint ?M * ?M \\<le>\\<^sub>L 1\\<^sub>m ?n\\<rbrakk>\n  \\<Longrightarrow> partial_density_operator (?M * ?\\<rho> * adjoint ?M)\n  well_com (Measure x1 x2a x3a)\n  \\<rho> \\<in> carrier_mat d d\n  partial_density_operator \\<rho>\n  \\<lbrakk>measurement ?d ?n ?M; ?k < ?n\\<rbrakk>\n  \\<Longrightarrow> ?M ?k \\<in> carrier_mat ?d ?d\n\ngoal (1 subgoal):\n 1. \\<forall>k<x1.\n       partial_density_operator (x2a k * \\<rho> * adjoint (x2a k))", "by (meson state_sig.well_com.simps(4))"], ["proof (state)\nthis:\n  \\<forall>k<x1. partial_density_operator (x2a k * \\<rho> * adjoint (x2a k))\n\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<And>x3aa \\<rho>.\n                \\<lbrakk>x3aa \\<in> set x3a; well_com x3aa;\n                 \\<rho> \\<in> carrier_mat d d;\n                 partial_density_operator \\<rho>;\n                 trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>)\n                 \\<le> 1\\<rbrakk>\n                \\<Longrightarrow> denote x3aa\n                                   (complex_of_real c \\<cdot>\\<^sub>m\n                                    \\<rho>) =\n                                  complex_of_real c \\<cdot>\\<^sub>m\n                                  denote x3aa \\<rho>;\n     well_com (Measure x1 x2a x3a); \\<rho> \\<in> carrier_mat d d;\n     partial_density_operator \\<rho>;\n     trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) \\<le> 1\\<rbrakk>\n    \\<Longrightarrow> denote (Measure x1 x2a x3a)\n                       (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) =\n                      complex_of_real c \\<cdot>\\<^sub>m\n                      denote (Measure x1 x2a x3a) \\<rho>", "have x2aa:\"\\<forall> k < x1. (x2a k * \\<rho> * adjoint (x2a k)) \\<in> carrier_mat d d\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>k<x1. x2a k * \\<rho> * adjoint (x2a k) \\<in> carrier_mat d d", "using Measure(2,3) measurement_dim"], ["proof (prove)\nusing this:\n  well_com (Measure x1 x2a x3a)\n  \\<rho> \\<in> carrier_mat d d\n  \\<lbrakk>measurement ?d ?n ?M; ?k < ?n\\<rbrakk>\n  \\<Longrightarrow> ?M ?k \\<in> carrier_mat ?d ?d\n\ngoal (1 subgoal):\n 1. \\<forall>k<x1. x2a k * \\<rho> * adjoint (x2a k) \\<in> carrier_mat d d", "by fastforce"], ["proof (state)\nthis:\n  \\<forall>k<x1. x2a k * \\<rho> * adjoint (x2a k) \\<in> carrier_mat d d\n\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<And>x3aa \\<rho>.\n                \\<lbrakk>x3aa \\<in> set x3a; well_com x3aa;\n                 \\<rho> \\<in> carrier_mat d d;\n                 partial_density_operator \\<rho>;\n                 trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>)\n                 \\<le> 1\\<rbrakk>\n                \\<Longrightarrow> denote x3aa\n                                   (complex_of_real c \\<cdot>\\<^sub>m\n                                    \\<rho>) =\n                                  complex_of_real c \\<cdot>\\<^sub>m\n                                  denote x3aa \\<rho>;\n     well_com (Measure x1 x2a x3a); \\<rho> \\<in> carrier_mat d d;\n     partial_density_operator \\<rho>;\n     trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) \\<le> 1\\<rbrakk>\n    \\<Longrightarrow> denote (Measure x1 x2a x3a)\n                       (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) =\n                      complex_of_real c \\<cdot>\\<^sub>m\n                      denote (Measure x1 x2a x3a) \\<rho>", "have dimm: \"(\\<And>k. k < x1 \\<Longrightarrow> (map denote x3a ! k) (x2a k * \\<rho> * adjoint (x2a k)) \\<in> carrier_mat d d)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>k.\n       k < x1 \\<Longrightarrow>\n       (map denote x3a ! k) (x2a k * \\<rho> * adjoint (x2a k))\n       \\<in> carrier_mat d d", "using map_denote_positive_trace_dim Measure(2,3,4) ptc"], ["proof (prove)\nusing this:\n  \\<lbrakk>well_com (Measure ?x1.0 ?x2a ?x3a); ?x4.0 \\<in> carrier_mat d d;\n   partial_density_operator ?x4.0;\n   \\<And>x3aa \\<rho>.\n      \\<lbrakk>x3aa \\<in> set ?x3a; well_com x3aa;\n       \\<rho> \\<in> carrier_mat d d;\n       partial_density_operator \\<rho>\\<rbrakk>\n      \\<Longrightarrow> positive (denote x3aa \\<rho>) \\<and>\n                        trace (denote x3aa \\<rho>) \\<le> trace \\<rho> \\<and>\n                        denote x3aa \\<rho> \\<in> carrier_mat d d\\<rbrakk>\n  \\<Longrightarrow> \\<forall>k<?x1.0.\n                       positive\n                        ((map denote ?x3a ! k)\n                          (?x2a k * ?x4.0 * adjoint (?x2a k))) \\<and>\n                       (map denote ?x3a ! k)\n                        (?x2a k * ?x4.0 * adjoint (?x2a k))\n                       \\<in> carrier_mat d d \\<and>\n                       trace\n                        ((map denote ?x3a ! k)\n                          (?x2a k * ?x4.0 * adjoint (?x2a k)))\n                       \\<le> trace (?x2a k * ?x4.0 * adjoint (?x2a k))\n  well_com (Measure x1 x2a x3a)\n  \\<rho> \\<in> carrier_mat d d\n  partial_density_operator \\<rho>\n  \\<lbrakk>?x3aa \\<in> set x3a; well_com ?x3aa;\n   ?\\<rho> \\<in> carrier_mat d d; partial_density_operator ?\\<rho>\\<rbrakk>\n  \\<Longrightarrow> positive (denote ?x3aa ?\\<rho>) \\<and>\n                    trace (denote ?x3aa ?\\<rho>) \\<le> trace ?\\<rho> \\<and>\n                    denote ?x3aa ?\\<rho> \\<in> carrier_mat d d\n\ngoal (1 subgoal):\n 1. \\<And>k.\n       k < x1 \\<Longrightarrow>\n       (map denote x3a ! k) (x2a k * \\<rho> * adjoint (x2a k))\n       \\<in> carrier_mat d d", "by auto"], ["proof (state)\nthis:\n  ?k < x1 \\<Longrightarrow>\n  (map denote x3a ! ?k) (x2a ?k * \\<rho> * adjoint (x2a ?k))\n  \\<in> carrier_mat d d\n\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<And>x3aa \\<rho>.\n                \\<lbrakk>x3aa \\<in> set x3a; well_com x3aa;\n                 \\<rho> \\<in> carrier_mat d d;\n                 partial_density_operator \\<rho>;\n                 trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>)\n                 \\<le> 1\\<rbrakk>\n                \\<Longrightarrow> denote x3aa\n                                   (complex_of_real c \\<cdot>\\<^sub>m\n                                    \\<rho>) =\n                                  complex_of_real c \\<cdot>\\<^sub>m\n                                  denote x3aa \\<rho>;\n     well_com (Measure x1 x2a x3a); \\<rho> \\<in> carrier_mat d d;\n     partial_density_operator \\<rho>;\n     trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) \\<le> 1\\<rbrakk>\n    \\<Longrightarrow> denote (Measure x1 x2a x3a)\n                       (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) =\n                      complex_of_real c \\<cdot>\\<^sub>m\n                      denote (Measure x1 x2a x3a) \\<rho>", "then"], ["proof (chain)\npicking this:\n  ?k < x1 \\<Longrightarrow>\n  (map denote x3a ! ?k) (x2a ?k * \\<rho> * adjoint (x2a ?k))\n  \\<in> carrier_mat d d", "have dimcm: \"(\\<And>k. k < x1 \\<Longrightarrow> c \\<cdot>\\<^sub>m (map denote x3a ! k) (x2a k * \\<rho> * adjoint (x2a k)) \\<in> carrier_mat d d)\""], ["proof (prove)\nusing this:\n  ?k < x1 \\<Longrightarrow>\n  (map denote x3a ! ?k) (x2a ?k * \\<rho> * adjoint (x2a ?k))\n  \\<in> carrier_mat d d\n\ngoal (1 subgoal):\n 1. \\<And>k.\n       k < x1 \\<Longrightarrow>\n       complex_of_real c \\<cdot>\\<^sub>m\n       (map denote x3a ! k) (x2a k * \\<rho> * adjoint (x2a k))\n       \\<in> carrier_mat d d", "using smult_carrier_mat"], ["proof (prove)\nusing this:\n  ?k < x1 \\<Longrightarrow>\n  (map denote x3a ! ?k) (x2a ?k * \\<rho> * adjoint (x2a ?k))\n  \\<in> carrier_mat d d\n  ?A \\<in> carrier_mat ?nr ?nc \\<Longrightarrow>\n  ?k \\<cdot>\\<^sub>m ?A \\<in> carrier_mat ?nr ?nc\n\ngoal (1 subgoal):\n 1. \\<And>k.\n       k < x1 \\<Longrightarrow>\n       complex_of_real c \\<cdot>\\<^sub>m\n       (map denote x3a ! k) (x2a k * \\<rho> * adjoint (x2a k))\n       \\<in> carrier_mat d d", "by auto"], ["proof (state)\nthis:\n  ?k < x1 \\<Longrightarrow>\n  complex_of_real c \\<cdot>\\<^sub>m\n  (map denote x3a ! ?k) (x2a ?k * \\<rho> * adjoint (x2a ?k))\n  \\<in> carrier_mat d d\n\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<And>x3aa \\<rho>.\n                \\<lbrakk>x3aa \\<in> set x3a; well_com x3aa;\n                 \\<rho> \\<in> carrier_mat d d;\n                 partial_density_operator \\<rho>;\n                 trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>)\n                 \\<le> 1\\<rbrakk>\n                \\<Longrightarrow> denote x3aa\n                                   (complex_of_real c \\<cdot>\\<^sub>m\n                                    \\<rho>) =\n                                  complex_of_real c \\<cdot>\\<^sub>m\n                                  denote x3aa \\<rho>;\n     well_com (Measure x1 x2a x3a); \\<rho> \\<in> carrier_mat d d;\n     partial_density_operator \\<rho>;\n     trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) \\<le> 1\\<rbrakk>\n    \\<Longrightarrow> denote (Measure x1 x2a x3a)\n                       (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) =\n                      complex_of_real c \\<cdot>\\<^sub>m\n                      denote (Measure x1 x2a x3a) \\<rho>", "have tra: \"\\<forall> k < x1. trace ((x2a k * \\<rho> * adjoint (x2a k))) \\<le> trace \\<rho>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>k<x1.\n       trace (x2a k * \\<rho> * adjoint (x2a k)) \\<le> trace \\<rho>", "using trace_decrease_mul_adj Measure lea measurement_dim"], ["proof (prove)\nusing this:\n  \\<lbrakk>partial_density_operator ?\\<rho>; ?\\<rho> \\<in> carrier_mat d d;\n   ?x \\<in> carrier_mat d d;\n   adjoint ?x * ?x \\<le>\\<^sub>L 1\\<^sub>m d\\<rbrakk>\n  \\<Longrightarrow> trace (?x * ?\\<rho> * adjoint ?x) \\<le> trace ?\\<rho>\n  \\<lbrakk>?x3a \\<in> set x3a; well_com ?x3a; ?\\<rho> \\<in> carrier_mat d d;\n   partial_density_operator ?\\<rho>;\n   trace (complex_of_real c \\<cdot>\\<^sub>m ?\\<rho>) \\<le> 1\\<rbrakk>\n  \\<Longrightarrow> denote ?x3a\n                     (complex_of_real c \\<cdot>\\<^sub>m ?\\<rho>) =\n                    complex_of_real c \\<cdot>\\<^sub>m denote ?x3a ?\\<rho>\n  well_com (Measure x1 x2a x3a)\n  \\<rho> \\<in> carrier_mat d d\n  partial_density_operator \\<rho>\n  trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) \\<le> 1\n  \\<forall>k<x1. adjoint (x2a k) * x2a k \\<le>\\<^sub>L 1\\<^sub>m d\n  \\<lbrakk>measurement ?d ?n ?M; ?k < ?n\\<rbrakk>\n  \\<Longrightarrow> ?M ?k \\<in> carrier_mat ?d ?d\n\ngoal (1 subgoal):\n 1. \\<forall>k<x1.\n       trace (x2a k * \\<rho> * adjoint (x2a k)) \\<le> trace \\<rho>", "by auto"], ["proof (state)\nthis:\n  \\<forall>k<x1. trace (x2a k * \\<rho> * adjoint (x2a k)) \\<le> trace \\<rho>\n\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<And>x3aa \\<rho>.\n                \\<lbrakk>x3aa \\<in> set x3a; well_com x3aa;\n                 \\<rho> \\<in> carrier_mat d d;\n                 partial_density_operator \\<rho>;\n                 trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>)\n                 \\<le> 1\\<rbrakk>\n                \\<Longrightarrow> denote x3aa\n                                   (complex_of_real c \\<cdot>\\<^sub>m\n                                    \\<rho>) =\n                                  complex_of_real c \\<cdot>\\<^sub>m\n                                  denote x3aa \\<rho>;\n     well_com (Measure x1 x2a x3a); \\<rho> \\<in> carrier_mat d d;\n     partial_density_operator \\<rho>;\n     trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) \\<le> 1\\<rbrakk>\n    \\<Longrightarrow> denote (Measure x1 x2a x3a)\n                       (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) =\n                      complex_of_real c \\<cdot>\\<^sub>m\n                      denote (Measure x1 x2a x3a) \\<rho>", "have tra1: \"trace (c \\<cdot>\\<^sub>m (x2a k * \\<rho> * adjoint (x2a k))) \\<le> 1\" if k: \"k < x1\" for k"], ["proof (prove)\ngoal (1 subgoal):\n 1. trace\n     (complex_of_real c \\<cdot>\\<^sub>m (x2a k * \\<rho> * adjoint (x2a k)))\n    \\<le> 1", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. trace\n     (complex_of_real c \\<cdot>\\<^sub>m (x2a k * \\<rho> * adjoint (x2a k)))\n    \\<le> 1", "have trle: \"trace (x2a k * \\<rho> * adjoint (x2a k)) \\<le> trace \\<rho>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. trace (x2a k * \\<rho> * adjoint (x2a k)) \\<le> trace \\<rho>", "using tra k"], ["proof (prove)\nusing this:\n  \\<forall>k<x1. trace (x2a k * \\<rho> * adjoint (x2a k)) \\<le> trace \\<rho>\n  k < x1\n\ngoal (1 subgoal):\n 1. trace (x2a k * \\<rho> * adjoint (x2a k)) \\<le> trace \\<rho>", "by auto"], ["proof (state)\nthis:\n  trace (x2a k * \\<rho> * adjoint (x2a k)) \\<le> trace \\<rho>\n\ngoal (1 subgoal):\n 1. trace\n     (complex_of_real c \\<cdot>\\<^sub>m (x2a k * \\<rho> * adjoint (x2a k)))\n    \\<le> 1", "have \"trace (c \\<cdot>\\<^sub>m (x2a k * \\<rho> * adjoint (x2a k))) = c * trace ((x2a k * \\<rho> * adjoint (x2a k)))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. trace\n     (complex_of_real c \\<cdot>\\<^sub>m\n      (x2a k * \\<rho> * adjoint (x2a k))) =\n    complex_of_real c * trace (x2a k * \\<rho> * adjoint (x2a k))", "using trace_smult x2aa k"], ["proof (prove)\nusing this:\n  ?A \\<in> carrier_mat ?n ?n \\<Longrightarrow>\n  trace (?c \\<cdot>\\<^sub>m ?A) = ?c * trace ?A\n  \\<forall>k<x1. x2a k * \\<rho> * adjoint (x2a k) \\<in> carrier_mat d d\n  k < x1\n\ngoal (1 subgoal):\n 1. trace\n     (complex_of_real c \\<cdot>\\<^sub>m\n      (x2a k * \\<rho> * adjoint (x2a k))) =\n    complex_of_real c * trace (x2a k * \\<rho> * adjoint (x2a k))", "by auto"], ["proof (state)\nthis:\n  trace\n   (complex_of_real c \\<cdot>\\<^sub>m (x2a k * \\<rho> * adjoint (x2a k))) =\n  complex_of_real c * trace (x2a k * \\<rho> * adjoint (x2a k))\n\ngoal (1 subgoal):\n 1. trace\n     (complex_of_real c \\<cdot>\\<^sub>m (x2a k * \\<rho> * adjoint (x2a k)))\n    \\<le> 1", "also"], ["proof (state)\nthis:\n  trace\n   (complex_of_real c \\<cdot>\\<^sub>m (x2a k * \\<rho> * adjoint (x2a k))) =\n  complex_of_real c * trace (x2a k * \\<rho> * adjoint (x2a k))\n\ngoal (1 subgoal):\n 1. trace\n     (complex_of_real c \\<cdot>\\<^sub>m (x2a k * \\<rho> * adjoint (x2a k)))\n    \\<le> 1", "have \"\\<dots> \\<le> c * trace \\<rho>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. complex_of_real c * trace (x2a k * \\<rho> * adjoint (x2a k))\n    \\<le> complex_of_real c * trace \\<rho>", "using trle assms mulfact"], ["proof (prove)\nusing this:\n  trace (x2a k * \\<rho> * adjoint (x2a k)) \\<le> trace \\<rho>\n  0 \\<le> c\n  \\<lbrakk>0 \\<le> ?c; ?a \\<le> ?b\\<rbrakk>\n  \\<Longrightarrow> complex_of_real ?c * ?a \\<le> complex_of_real ?c * ?b\n\ngoal (1 subgoal):\n 1. complex_of_real c * trace (x2a k * \\<rho> * adjoint (x2a k))\n    \\<le> complex_of_real c * trace \\<rho>", "by auto"], ["proof (state)\nthis:\n  complex_of_real c * trace (x2a k * \\<rho> * adjoint (x2a k))\n  \\<le> complex_of_real c * trace \\<rho>\n\ngoal (1 subgoal):\n 1. trace\n     (complex_of_real c \\<cdot>\\<^sub>m (x2a k * \\<rho> * adjoint (x2a k)))\n    \\<le> 1", "also"], ["proof (state)\nthis:\n  complex_of_real c * trace (x2a k * \\<rho> * adjoint (x2a k))\n  \\<le> complex_of_real c * trace \\<rho>\n\ngoal (1 subgoal):\n 1. trace\n     (complex_of_real c \\<cdot>\\<^sub>m (x2a k * \\<rho> * adjoint (x2a k)))\n    \\<le> 1", "have \"\\<dots> \\<le> 1\""], ["proof (prove)\ngoal (1 subgoal):\n 1. complex_of_real c * trace \\<rho> \\<le> 1", "using Measure(3,5) trace_smult"], ["proof (prove)\nusing this:\n  \\<rho> \\<in> carrier_mat d d\n  trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) \\<le> 1\n  ?A \\<in> carrier_mat ?n ?n \\<Longrightarrow>\n  trace (?c \\<cdot>\\<^sub>m ?A) = ?c * trace ?A\n\ngoal (1 subgoal):\n 1. complex_of_real c * trace \\<rho> \\<le> 1", "by metis"], ["proof (state)\nthis:\n  complex_of_real c * trace \\<rho> \\<le> 1\n\ngoal (1 subgoal):\n 1. trace\n     (complex_of_real c \\<cdot>\\<^sub>m (x2a k * \\<rho> * adjoint (x2a k)))\n    \\<le> 1", "finally"], ["proof (chain)\npicking this:\n  trace\n   (complex_of_real c \\<cdot>\\<^sub>m (x2a k * \\<rho> * adjoint (x2a k)))\n  \\<le> 1", "show ?thesis"], ["proof (prove)\nusing this:\n  trace\n   (complex_of_real c \\<cdot>\\<^sub>m (x2a k * \\<rho> * adjoint (x2a k)))\n  \\<le> 1\n\ngoal (1 subgoal):\n 1. trace\n     (complex_of_real c \\<cdot>\\<^sub>m (x2a k * \\<rho> * adjoint (x2a k)))\n    \\<le> 1", "by auto"], ["proof (state)\nthis:\n  trace\n   (complex_of_real c \\<cdot>\\<^sub>m (x2a k * \\<rho> * adjoint (x2a k)))\n  \\<le> 1\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  ?k < x1 \\<Longrightarrow>\n  trace\n   (complex_of_real c \\<cdot>\\<^sub>m (x2a ?k * \\<rho> * adjoint (x2a ?k)))\n  \\<le> 1\n\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<And>x3aa \\<rho>.\n                \\<lbrakk>x3aa \\<in> set x3a; well_com x3aa;\n                 \\<rho> \\<in> carrier_mat d d;\n                 partial_density_operator \\<rho>;\n                 trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>)\n                 \\<le> 1\\<rbrakk>\n                \\<Longrightarrow> denote x3aa\n                                   (complex_of_real c \\<cdot>\\<^sub>m\n                                    \\<rho>) =\n                                  complex_of_real c \\<cdot>\\<^sub>m\n                                  denote x3aa \\<rho>;\n     well_com (Measure x1 x2a x3a); \\<rho> \\<in> carrier_mat d d;\n     partial_density_operator \\<rho>;\n     trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) \\<le> 1\\<rbrakk>\n    \\<Longrightarrow> denote (Measure x1 x2a x3a)\n                       (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) =\n                      complex_of_real c \\<cdot>\\<^sub>m\n                      denote (Measure x1 x2a x3a) \\<rho>", "have \"(map denote x3a ! k) (x2a k * (c \\<cdot>\\<^sub>m \\<rho>) * adjoint (x2a k)) \n        = c \\<cdot>\\<^sub>m (map denote x3a ! k) (x2a k * \\<rho> * adjoint (x2a k))\" if k: \"k < x1\" for k"], ["proof (prove)\ngoal (1 subgoal):\n 1. (map denote x3a ! k)\n     (x2a k * (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) *\n      adjoint (x2a k)) =\n    complex_of_real c \\<cdot>\\<^sub>m\n    (map denote x3a ! k) (x2a k * \\<rho> * adjoint (x2a k))", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. (map denote x3a ! k)\n     (x2a k * (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) *\n      adjoint (x2a k)) =\n    complex_of_real c \\<cdot>\\<^sub>m\n    (map denote x3a ! k) (x2a k * \\<rho> * adjoint (x2a k))", "have \"denote (x3a ! k) (x2a k * (c \\<cdot>\\<^sub>m \\<rho>) * adjoint (x2a k)) = denote (x3a ! k) (c \\<cdot>\\<^sub>m (x2a k * \\<rho> * adjoint (x2a k)))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. denote (x3a ! k)\n     (x2a k * (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) *\n      adjoint (x2a k)) =\n    denote (x3a ! k)\n     (complex_of_real c \\<cdot>\\<^sub>m (x2a k * \\<rho> * adjoint (x2a k)))", "using cad k"], ["proof (prove)\nusing this:\n  ?k < x1 \\<Longrightarrow>\n  x2a ?k * (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) * adjoint (x2a ?k) =\n  complex_of_real c \\<cdot>\\<^sub>m (x2a ?k * \\<rho> * adjoint (x2a ?k))\n  k < x1\n\ngoal (1 subgoal):\n 1. denote (x3a ! k)\n     (x2a k * (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) *\n      adjoint (x2a k)) =\n    denote (x3a ! k)\n     (complex_of_real c \\<cdot>\\<^sub>m (x2a k * \\<rho> * adjoint (x2a k)))", "by auto"], ["proof (state)\nthis:\n  denote (x3a ! k)\n   (x2a k * (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) * adjoint (x2a k)) =\n  denote (x3a ! k)\n   (complex_of_real c \\<cdot>\\<^sub>m (x2a k * \\<rho> * adjoint (x2a k)))\n\ngoal (1 subgoal):\n 1. (map denote x3a ! k)\n     (x2a k * (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) *\n      adjoint (x2a k)) =\n    complex_of_real c \\<cdot>\\<^sub>m\n    (map denote x3a ! k) (x2a k * \\<rho> * adjoint (x2a k))", "also"], ["proof (state)\nthis:\n  denote (x3a ! k)\n   (x2a k * (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) * adjoint (x2a k)) =\n  denote (x3a ! k)\n   (complex_of_real c \\<cdot>\\<^sub>m (x2a k * \\<rho> * adjoint (x2a k)))\n\ngoal (1 subgoal):\n 1. (map denote x3a ! k)\n     (x2a k * (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) *\n      adjoint (x2a k)) =\n    complex_of_real c \\<cdot>\\<^sub>m\n    (map denote x3a ! k) (x2a k * \\<rho> * adjoint (x2a k))", "have \"\\<dots> = c \\<cdot>\\<^sub>m denote (x3a ! k) ( (x2a k * \\<rho> * adjoint (x2a k)))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. denote (x3a ! k)\n     (complex_of_real c \\<cdot>\\<^sub>m\n      (x2a k * \\<rho> * adjoint (x2a k))) =\n    complex_of_real c \\<cdot>\\<^sub>m\n    denote (x3a ! k) (x2a k * \\<rho> * adjoint (x2a k))", "using Measure(1,2) pdox x2aa tra1 k"], ["proof (prove)\nusing this:\n  \\<lbrakk>?x3a \\<in> set x3a; well_com ?x3a; ?\\<rho> \\<in> carrier_mat d d;\n   partial_density_operator ?\\<rho>;\n   trace (complex_of_real c \\<cdot>\\<^sub>m ?\\<rho>) \\<le> 1\\<rbrakk>\n  \\<Longrightarrow> denote ?x3a\n                     (complex_of_real c \\<cdot>\\<^sub>m ?\\<rho>) =\n                    complex_of_real c \\<cdot>\\<^sub>m denote ?x3a ?\\<rho>\n  well_com (Measure x1 x2a x3a)\n  \\<forall>k<x1. partial_density_operator (x2a k * \\<rho> * adjoint (x2a k))\n  \\<forall>k<x1. x2a k * \\<rho> * adjoint (x2a k) \\<in> carrier_mat d d\n  ?k < x1 \\<Longrightarrow>\n  trace\n   (complex_of_real c \\<cdot>\\<^sub>m (x2a ?k * \\<rho> * adjoint (x2a ?k)))\n  \\<le> 1\n  k < x1\n\ngoal (1 subgoal):\n 1. denote (x3a ! k)\n     (complex_of_real c \\<cdot>\\<^sub>m\n      (x2a k * \\<rho> * adjoint (x2a k))) =\n    complex_of_real c \\<cdot>\\<^sub>m\n    denote (x3a ! k) (x2a k * \\<rho> * adjoint (x2a k))", "using measure_well_com"], ["proof (prove)\nusing this:\n  \\<lbrakk>?x3a \\<in> set x3a; well_com ?x3a; ?\\<rho> \\<in> carrier_mat d d;\n   partial_density_operator ?\\<rho>;\n   trace (complex_of_real c \\<cdot>\\<^sub>m ?\\<rho>) \\<le> 1\\<rbrakk>\n  \\<Longrightarrow> denote ?x3a\n                     (complex_of_real c \\<cdot>\\<^sub>m ?\\<rho>) =\n                    complex_of_real c \\<cdot>\\<^sub>m denote ?x3a ?\\<rho>\n  well_com (Measure x1 x2a x3a)\n  \\<forall>k<x1. partial_density_operator (x2a k * \\<rho> * adjoint (x2a k))\n  \\<forall>k<x1. x2a k * \\<rho> * adjoint (x2a k) \\<in> carrier_mat d d\n  ?k < x1 \\<Longrightarrow>\n  trace\n   (complex_of_real c \\<cdot>\\<^sub>m (x2a ?k * \\<rho> * adjoint (x2a ?k)))\n  \\<le> 1\n  k < x1\n  \\<lbrakk>well_com (Measure ?n ?M ?S); ?k < ?n\\<rbrakk>\n  \\<Longrightarrow> well_com (?S ! ?k)\n\ngoal (1 subgoal):\n 1. denote (x3a ! k)\n     (complex_of_real c \\<cdot>\\<^sub>m\n      (x2a k * \\<rho> * adjoint (x2a k))) =\n    complex_of_real c \\<cdot>\\<^sub>m\n    denote (x3a ! k) (x2a k * \\<rho> * adjoint (x2a k))", "by auto"], ["proof (state)\nthis:\n  denote (x3a ! k)\n   (complex_of_real c \\<cdot>\\<^sub>m (x2a k * \\<rho> * adjoint (x2a k))) =\n  complex_of_real c \\<cdot>\\<^sub>m\n  denote (x3a ! k) (x2a k * \\<rho> * adjoint (x2a k))\n\ngoal (1 subgoal):\n 1. (map denote x3a ! k)\n     (x2a k * (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) *\n      adjoint (x2a k)) =\n    complex_of_real c \\<cdot>\\<^sub>m\n    (map denote x3a ! k) (x2a k * \\<rho> * adjoint (x2a k))", "finally"], ["proof (chain)\npicking this:\n  denote (x3a ! k)\n   (x2a k * (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) * adjoint (x2a k)) =\n  complex_of_real c \\<cdot>\\<^sub>m\n  denote (x3a ! k) (x2a k * \\<rho> * adjoint (x2a k))", "have \"denote (x3a ! k) (x2a k * (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) * adjoint (x2a k)) = complex_of_real c \\<cdot>\\<^sub>m denote (x3a ! k) (x2a k * \\<rho> * adjoint (x2a k))\""], ["proof (prove)\nusing this:\n  denote (x3a ! k)\n   (x2a k * (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) * adjoint (x2a k)) =\n  complex_of_real c \\<cdot>\\<^sub>m\n  denote (x3a ! k) (x2a k * \\<rho> * adjoint (x2a k))\n\ngoal (1 subgoal):\n 1. denote (x3a ! k)\n     (x2a k * (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) *\n      adjoint (x2a k)) =\n    complex_of_real c \\<cdot>\\<^sub>m\n    denote (x3a ! k) (x2a k * \\<rho> * adjoint (x2a k))", "by auto"], ["proof (state)\nthis:\n  denote (x3a ! k)\n   (x2a k * (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) * adjoint (x2a k)) =\n  complex_of_real c \\<cdot>\\<^sub>m\n  denote (x3a ! k) (x2a k * \\<rho> * adjoint (x2a k))\n\ngoal (1 subgoal):\n 1. (map denote x3a ! k)\n     (x2a k * (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) *\n      adjoint (x2a k)) =\n    complex_of_real c \\<cdot>\\<^sub>m\n    (map denote x3a ! k) (x2a k * \\<rho> * adjoint (x2a k))", "then"], ["proof (chain)\npicking this:\n  denote (x3a ! k)\n   (x2a k * (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) * adjoint (x2a k)) =\n  complex_of_real c \\<cdot>\\<^sub>m\n  denote (x3a ! k) (x2a k * \\<rho> * adjoint (x2a k))", "show ?thesis"], ["proof (prove)\nusing this:\n  denote (x3a ! k)\n   (x2a k * (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) * adjoint (x2a k)) =\n  complex_of_real c \\<cdot>\\<^sub>m\n  denote (x3a ! k) (x2a k * \\<rho> * adjoint (x2a k))\n\ngoal (1 subgoal):\n 1. (map denote x3a ! k)\n     (x2a k * (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) *\n      adjoint (x2a k)) =\n    complex_of_real c \\<cdot>\\<^sub>m\n    (map denote x3a ! k) (x2a k * \\<rho> * adjoint (x2a k))", "using Measure.prems(1) k"], ["proof (prove)\nusing this:\n  denote (x3a ! k)\n   (x2a k * (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) * adjoint (x2a k)) =\n  complex_of_real c \\<cdot>\\<^sub>m\n  denote (x3a ! k) (x2a k * \\<rho> * adjoint (x2a k))\n  well_com (Measure x1 x2a x3a)\n  k < x1\n\ngoal (1 subgoal):\n 1. (map denote x3a ! k)\n     (x2a k * (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) *\n      adjoint (x2a k)) =\n    complex_of_real c \\<cdot>\\<^sub>m\n    (map denote x3a ! k) (x2a k * \\<rho> * adjoint (x2a k))", "by auto"], ["proof (state)\nthis:\n  (map denote x3a ! k)\n   (x2a k * (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) * adjoint (x2a k)) =\n  complex_of_real c \\<cdot>\\<^sub>m\n  (map denote x3a ! k) (x2a k * \\<rho> * adjoint (x2a k))\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  ?k < x1 \\<Longrightarrow>\n  (map denote x3a ! ?k)\n   (x2a ?k * (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) *\n    adjoint (x2a ?k)) =\n  complex_of_real c \\<cdot>\\<^sub>m\n  (map denote x3a ! ?k) (x2a ?k * \\<rho> * adjoint (x2a ?k))\n\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<And>x3aa \\<rho>.\n                \\<lbrakk>x3aa \\<in> set x3a; well_com x3aa;\n                 \\<rho> \\<in> carrier_mat d d;\n                 partial_density_operator \\<rho>;\n                 trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>)\n                 \\<le> 1\\<rbrakk>\n                \\<Longrightarrow> denote x3aa\n                                   (complex_of_real c \\<cdot>\\<^sub>m\n                                    \\<rho>) =\n                                  complex_of_real c \\<cdot>\\<^sub>m\n                                  denote x3aa \\<rho>;\n     well_com (Measure x1 x2a x3a); \\<rho> \\<in> carrier_mat d d;\n     partial_density_operator \\<rho>;\n     trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) \\<le> 1\\<rbrakk>\n    \\<Longrightarrow> denote (Measure x1 x2a x3a)\n                       (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) =\n                      complex_of_real c \\<cdot>\\<^sub>m\n                      denote (Measure x1 x2a x3a) \\<rho>", "then"], ["proof (chain)\npicking this:\n  ?k < x1 \\<Longrightarrow>\n  (map denote x3a ! ?k)\n   (x2a ?k * (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) *\n    adjoint (x2a ?k)) =\n  complex_of_real c \\<cdot>\\<^sub>m\n  (map denote x3a ! ?k) (x2a ?k * \\<rho> * adjoint (x2a ?k))", "have \"matrix_sum d (\\<lambda>k. c \\<cdot>\\<^sub>m (map denote x3a ! k) (x2a k * \\<rho> * adjoint (x2a k))) x1 =\n      matrix_sum d (\\<lambda>k. (map denote x3a ! k) (x2a k * (c \\<cdot>\\<^sub>m \\<rho>) * adjoint (x2a k))) x1\""], ["proof (prove)\nusing this:\n  ?k < x1 \\<Longrightarrow>\n  (map denote x3a ! ?k)\n   (x2a ?k * (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) *\n    adjoint (x2a ?k)) =\n  complex_of_real c \\<cdot>\\<^sub>m\n  (map denote x3a ! ?k) (x2a ?k * \\<rho> * adjoint (x2a ?k))\n\ngoal (1 subgoal):\n 1. matrix_sum d\n     (\\<lambda>k.\n         complex_of_real c \\<cdot>\\<^sub>m\n         (map denote x3a ! k) (x2a k * \\<rho> * adjoint (x2a k)))\n     x1 =\n    matrix_sum d\n     (\\<lambda>k.\n         (map denote x3a ! k)\n          (x2a k * (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) *\n           adjoint (x2a k)))\n     x1", "using matrix_sum_cong[of x1 \"(\\<lambda>k. complex_of_real c \\<cdot>\\<^sub>m (map denote x3a ! k) (x2a k * \\<rho> * adjoint (x2a k)))\" \n        \"(\\<lambda>k. (map denote x3a ! k) (x2a k * (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) * adjoint (x2a k)))\"] dimcm"], ["proof (prove)\nusing this:\n  ?k < x1 \\<Longrightarrow>\n  (map denote x3a ! ?k)\n   (x2a ?k * (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) *\n    adjoint (x2a ?k)) =\n  complex_of_real c \\<cdot>\\<^sub>m\n  (map denote x3a ! ?k) (x2a ?k * \\<rho> * adjoint (x2a ?k))\n  (\\<And>k.\n      k < x1 \\<Longrightarrow>\n      complex_of_real c \\<cdot>\\<^sub>m\n      (map denote x3a ! k) (x2a k * \\<rho> * adjoint (x2a k)) =\n      (map denote x3a ! k)\n       (x2a k * (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) *\n        adjoint (x2a k))) \\<Longrightarrow>\n  matrix_sum ?d\n   (\\<lambda>k.\n       complex_of_real c \\<cdot>\\<^sub>m\n       (map denote x3a ! k) (x2a k * \\<rho> * adjoint (x2a k)))\n   x1 =\n  matrix_sum ?d\n   (\\<lambda>k.\n       (map denote x3a ! k)\n        (x2a k * (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) *\n         adjoint (x2a k)))\n   x1\n  ?k < x1 \\<Longrightarrow>\n  complex_of_real c \\<cdot>\\<^sub>m\n  (map denote x3a ! ?k) (x2a ?k * \\<rho> * adjoint (x2a ?k))\n  \\<in> carrier_mat d d\n\ngoal (1 subgoal):\n 1. matrix_sum d\n     (\\<lambda>k.\n         complex_of_real c \\<cdot>\\<^sub>m\n         (map denote x3a ! k) (x2a k * \\<rho> * adjoint (x2a k)))\n     x1 =\n    matrix_sum d\n     (\\<lambda>k.\n         (map denote x3a ! k)\n          (x2a k * (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) *\n           adjoint (x2a k)))\n     x1", "by auto"], ["proof (state)\nthis:\n  matrix_sum d\n   (\\<lambda>k.\n       complex_of_real c \\<cdot>\\<^sub>m\n       (map denote x3a ! k) (x2a k * \\<rho> * adjoint (x2a k)))\n   x1 =\n  matrix_sum d\n   (\\<lambda>k.\n       (map denote x3a ! k)\n        (x2a k * (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) *\n         adjoint (x2a k)))\n   x1\n\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<And>x3aa \\<rho>.\n                \\<lbrakk>x3aa \\<in> set x3a; well_com x3aa;\n                 \\<rho> \\<in> carrier_mat d d;\n                 partial_density_operator \\<rho>;\n                 trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>)\n                 \\<le> 1\\<rbrakk>\n                \\<Longrightarrow> denote x3aa\n                                   (complex_of_real c \\<cdot>\\<^sub>m\n                                    \\<rho>) =\n                                  complex_of_real c \\<cdot>\\<^sub>m\n                                  denote x3aa \\<rho>;\n     well_com (Measure x1 x2a x3a); \\<rho> \\<in> carrier_mat d d;\n     partial_density_operator \\<rho>;\n     trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) \\<le> 1\\<rbrakk>\n    \\<Longrightarrow> denote (Measure x1 x2a x3a)\n                       (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) =\n                      complex_of_real c \\<cdot>\\<^sub>m\n                      denote (Measure x1 x2a x3a) \\<rho>", "then"], ["proof (chain)\npicking this:\n  matrix_sum d\n   (\\<lambda>k.\n       complex_of_real c \\<cdot>\\<^sub>m\n       (map denote x3a ! k) (x2a k * \\<rho> * adjoint (x2a k)))\n   x1 =\n  matrix_sum d\n   (\\<lambda>k.\n       (map denote x3a ! k)\n        (x2a k * (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) *\n         adjoint (x2a k)))\n   x1", "have \"matrix_sum d (\\<lambda>k. (map denote x3a ! k) (x2a k * (c \\<cdot>\\<^sub>m \\<rho>) * adjoint (x2a k))) x1 =\n       c \\<cdot>\\<^sub>m matrix_sum d (\\<lambda>k. (map denote x3a ! k) (x2a k * \\<rho> * adjoint (x2a k))) x1\""], ["proof (prove)\nusing this:\n  matrix_sum d\n   (\\<lambda>k.\n       complex_of_real c \\<cdot>\\<^sub>m\n       (map denote x3a ! k) (x2a k * \\<rho> * adjoint (x2a k)))\n   x1 =\n  matrix_sum d\n   (\\<lambda>k.\n       (map denote x3a ! k)\n        (x2a k * (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) *\n         adjoint (x2a k)))\n   x1\n\ngoal (1 subgoal):\n 1. matrix_sum d\n     (\\<lambda>k.\n         (map denote x3a ! k)\n          (x2a k * (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) *\n           adjoint (x2a k)))\n     x1 =\n    complex_of_real c \\<cdot>\\<^sub>m\n    matrix_sum d\n     (\\<lambda>k. (map denote x3a ! k) (x2a k * \\<rho> * adjoint (x2a k)))\n     x1", "using matrix_sum_smult[of x1 \"(\\<lambda>k. (map denote x3a ! k) (x2a k * \\<rho> * adjoint (x2a k)))\" d c] dimm"], ["proof (prove)\nusing this:\n  matrix_sum d\n   (\\<lambda>k.\n       complex_of_real c \\<cdot>\\<^sub>m\n       (map denote x3a ! k) (x2a k * \\<rho> * adjoint (x2a k)))\n   x1 =\n  matrix_sum d\n   (\\<lambda>k.\n       (map denote x3a ! k)\n        (x2a k * (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) *\n         adjoint (x2a k)))\n   x1\n  (\\<And>k.\n      k < x1 \\<Longrightarrow>\n      (map denote x3a ! k) (x2a k * \\<rho> * adjoint (x2a k))\n      \\<in> carrier_mat d d) \\<Longrightarrow>\n  matrix_sum d\n   (\\<lambda>k.\n       complex_of_real c \\<cdot>\\<^sub>m\n       (map denote x3a ! k) (x2a k * \\<rho> * adjoint (x2a k)))\n   x1 =\n  complex_of_real c \\<cdot>\\<^sub>m\n  matrix_sum d\n   (\\<lambda>k. (map denote x3a ! k) (x2a k * \\<rho> * adjoint (x2a k))) x1\n  ?k < x1 \\<Longrightarrow>\n  (map denote x3a ! ?k) (x2a ?k * \\<rho> * adjoint (x2a ?k))\n  \\<in> carrier_mat d d\n\ngoal (1 subgoal):\n 1. matrix_sum d\n     (\\<lambda>k.\n         (map denote x3a ! k)\n          (x2a k * (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) *\n           adjoint (x2a k)))\n     x1 =\n    complex_of_real c \\<cdot>\\<^sub>m\n    matrix_sum d\n     (\\<lambda>k. (map denote x3a ! k) (x2a k * \\<rho> * adjoint (x2a k)))\n     x1", "by auto"], ["proof (state)\nthis:\n  matrix_sum d\n   (\\<lambda>k.\n       (map denote x3a ! k)\n        (x2a k * (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) *\n         adjoint (x2a k)))\n   x1 =\n  complex_of_real c \\<cdot>\\<^sub>m\n  matrix_sum d\n   (\\<lambda>k. (map denote x3a ! k) (x2a k * \\<rho> * adjoint (x2a k))) x1\n\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<And>x3aa \\<rho>.\n                \\<lbrakk>x3aa \\<in> set x3a; well_com x3aa;\n                 \\<rho> \\<in> carrier_mat d d;\n                 partial_density_operator \\<rho>;\n                 trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>)\n                 \\<le> 1\\<rbrakk>\n                \\<Longrightarrow> denote x3aa\n                                   (complex_of_real c \\<cdot>\\<^sub>m\n                                    \\<rho>) =\n                                  complex_of_real c \\<cdot>\\<^sub>m\n                                  denote x3aa \\<rho>;\n     well_com (Measure x1 x2a x3a); \\<rho> \\<in> carrier_mat d d;\n     partial_density_operator \\<rho>;\n     trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) \\<le> 1\\<rbrakk>\n    \\<Longrightarrow> denote (Measure x1 x2a x3a)\n                       (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) =\n                      complex_of_real c \\<cdot>\\<^sub>m\n                      denote (Measure x1 x2a x3a) \\<rho>", "then"], ["proof (chain)\npicking this:\n  matrix_sum d\n   (\\<lambda>k.\n       (map denote x3a ! k)\n        (x2a k * (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) *\n         adjoint (x2a k)))\n   x1 =\n  complex_of_real c \\<cdot>\\<^sub>m\n  matrix_sum d\n   (\\<lambda>k. (map denote x3a ! k) (x2a k * \\<rho> * adjoint (x2a k))) x1", "have \"denote (Measure x1 x2a x3a) (c \\<cdot>\\<^sub>m \\<rho>) = c \\<cdot>\\<^sub>m denote (Measure x1 x2a x3a) \\<rho>\""], ["proof (prove)\nusing this:\n  matrix_sum d\n   (\\<lambda>k.\n       (map denote x3a ! k)\n        (x2a k * (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) *\n         adjoint (x2a k)))\n   x1 =\n  complex_of_real c \\<cdot>\\<^sub>m\n  matrix_sum d\n   (\\<lambda>k. (map denote x3a ! k) (x2a k * \\<rho> * adjoint (x2a k))) x1\n\ngoal (1 subgoal):\n 1. denote (Measure x1 x2a x3a) (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) =\n    complex_of_real c \\<cdot>\\<^sub>m denote (Measure x1 x2a x3a) \\<rho>", "using denote.simps(4)[of x1 x2a x3a \"c \\<cdot>\\<^sub>m \\<rho>\"]"], ["proof (prove)\nusing this:\n  matrix_sum d\n   (\\<lambda>k.\n       (map denote x3a ! k)\n        (x2a k * (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) *\n         adjoint (x2a k)))\n   x1 =\n  complex_of_real c \\<cdot>\\<^sub>m\n  matrix_sum d\n   (\\<lambda>k. (map denote x3a ! k) (x2a k * \\<rho> * adjoint (x2a k))) x1\n  denote (Measure x1 x2a x3a) (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) =\n  denote_measure x1 x2a (map denote x3a)\n   (complex_of_real c \\<cdot>\\<^sub>m \\<rho>)\n\ngoal (1 subgoal):\n 1. denote (Measure x1 x2a x3a) (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) =\n    complex_of_real c \\<cdot>\\<^sub>m denote (Measure x1 x2a x3a) \\<rho>", "using denote.simps(4)[of x1 x2a x3a \"\\<rho>\"]"], ["proof (prove)\nusing this:\n  matrix_sum d\n   (\\<lambda>k.\n       (map denote x3a ! k)\n        (x2a k * (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) *\n         adjoint (x2a k)))\n   x1 =\n  complex_of_real c \\<cdot>\\<^sub>m\n  matrix_sum d\n   (\\<lambda>k. (map denote x3a ! k) (x2a k * \\<rho> * adjoint (x2a k))) x1\n  denote (Measure x1 x2a x3a) (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) =\n  denote_measure x1 x2a (map denote x3a)\n   (complex_of_real c \\<cdot>\\<^sub>m \\<rho>)\n  denote (Measure x1 x2a x3a) \\<rho> =\n  denote_measure x1 x2a (map denote x3a) \\<rho>\n\ngoal (1 subgoal):\n 1. denote (Measure x1 x2a x3a) (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) =\n    complex_of_real c \\<cdot>\\<^sub>m denote (Measure x1 x2a x3a) \\<rho>", "unfolding denote_measure_def"], ["proof (prove)\nusing this:\n  matrix_sum d\n   (\\<lambda>k.\n       (map denote x3a ! k)\n        (x2a k * (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) *\n         adjoint (x2a k)))\n   x1 =\n  complex_of_real c \\<cdot>\\<^sub>m\n  matrix_sum d\n   (\\<lambda>k. (map denote x3a ! k) (x2a k * \\<rho> * adjoint (x2a k))) x1\n  denote (Measure x1 x2a x3a) (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) =\n  matrix_sum d\n   (\\<lambda>k.\n       (map denote x3a ! k)\n        (x2a k * (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) *\n         adjoint (x2a k)))\n   x1\n  denote (Measure x1 x2a x3a) \\<rho> =\n  matrix_sum d\n   (\\<lambda>k. (map denote x3a ! k) (x2a k * \\<rho> * adjoint (x2a k))) x1\n\ngoal (1 subgoal):\n 1. denote (Measure x1 x2a x3a) (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) =\n    complex_of_real c \\<cdot>\\<^sub>m denote (Measure x1 x2a x3a) \\<rho>", "by auto"], ["proof (state)\nthis:\n  denote (Measure x1 x2a x3a) (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) =\n  complex_of_real c \\<cdot>\\<^sub>m denote (Measure x1 x2a x3a) \\<rho>\n\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<And>x3aa \\<rho>.\n                \\<lbrakk>x3aa \\<in> set x3a; well_com x3aa;\n                 \\<rho> \\<in> carrier_mat d d;\n                 partial_density_operator \\<rho>;\n                 trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>)\n                 \\<le> 1\\<rbrakk>\n                \\<Longrightarrow> denote x3aa\n                                   (complex_of_real c \\<cdot>\\<^sub>m\n                                    \\<rho>) =\n                                  complex_of_real c \\<cdot>\\<^sub>m\n                                  denote x3aa \\<rho>;\n     well_com (Measure x1 x2a x3a); \\<rho> \\<in> carrier_mat d d;\n     partial_density_operator \\<rho>;\n     trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) \\<le> 1\\<rbrakk>\n    \\<Longrightarrow> denote (Measure x1 x2a x3a)\n                       (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) =\n                      complex_of_real c \\<cdot>\\<^sub>m\n                      denote (Measure x1 x2a x3a) \\<rho>", "then"], ["proof (chain)\npicking this:\n  denote (Measure x1 x2a x3a) (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) =\n  complex_of_real c \\<cdot>\\<^sub>m denote (Measure x1 x2a x3a) \\<rho>", "show ?thesis"], ["proof (prove)\nusing this:\n  denote (Measure x1 x2a x3a) (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) =\n  complex_of_real c \\<cdot>\\<^sub>m denote (Measure x1 x2a x3a) \\<rho>\n\ngoal (1 subgoal):\n 1. denote (Measure x1 x2a x3a) (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) =\n    complex_of_real c \\<cdot>\\<^sub>m denote (Measure x1 x2a x3a) \\<rho>", "by auto"], ["proof (state)\nthis:\n  denote (Measure x1 x2a x3a) (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) =\n  complex_of_real c \\<cdot>\\<^sub>m denote (Measure x1 x2a x3a) \\<rho>\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  denote (Measure x1 x2a x3a) (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) =\n  complex_of_real c \\<cdot>\\<^sub>m denote (Measure x1 x2a x3a) \\<rho>\n\ngoal (1 subgoal):\n 1. \\<And>x1 x2a \\<rho>.\n       \\<lbrakk>\\<And>\\<rho>.\n                   \\<lbrakk>well_com x2a; \\<rho> \\<in> carrier_mat d d;\n                    partial_density_operator \\<rho>;\n                    trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>)\n                    \\<le> 1\\<rbrakk>\n                   \\<Longrightarrow> denote x2a\n(complex_of_real c \\<cdot>\\<^sub>m \\<rho>) =\n                                     complex_of_real c \\<cdot>\\<^sub>m\n                                     denote x2a \\<rho>;\n        well_com (While x1 x2a); \\<rho> \\<in> carrier_mat d d;\n        partial_density_operator \\<rho>;\n        trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) \\<le> 1\\<rbrakk>\n       \\<Longrightarrow> denote (While x1 x2a)\n                          (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) =\n                         complex_of_real c \\<cdot>\\<^sub>m\n                         denote (While x1 x2a) \\<rho>", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x1 x2a \\<rho>.\n       \\<lbrakk>\\<And>\\<rho>.\n                   \\<lbrakk>well_com x2a; \\<rho> \\<in> carrier_mat d d;\n                    partial_density_operator \\<rho>;\n                    trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>)\n                    \\<le> 1\\<rbrakk>\n                   \\<Longrightarrow> denote x2a\n(complex_of_real c \\<cdot>\\<^sub>m \\<rho>) =\n                                     complex_of_real c \\<cdot>\\<^sub>m\n                                     denote x2a \\<rho>;\n        well_com (While x1 x2a); \\<rho> \\<in> carrier_mat d d;\n        partial_density_operator \\<rho>;\n        trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) \\<le> 1\\<rbrakk>\n       \\<Longrightarrow> denote (While x1 x2a)\n                          (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) =\n                         complex_of_real c \\<cdot>\\<^sub>m\n                         denote (While x1 x2a) \\<rho>", "case (While x1 x2a)"], ["proof (state)\nthis:\n  \\<lbrakk>well_com x2a; ?\\<rho> \\<in> carrier_mat d d;\n   partial_density_operator ?\\<rho>;\n   trace (complex_of_real c \\<cdot>\\<^sub>m ?\\<rho>) \\<le> 1\\<rbrakk>\n  \\<Longrightarrow> denote x2a (complex_of_real c \\<cdot>\\<^sub>m ?\\<rho>) =\n                    complex_of_real c \\<cdot>\\<^sub>m denote x2a ?\\<rho>\n  well_com (While x1 x2a)\n  \\<rho> \\<in> carrier_mat d d\n  partial_density_operator \\<rho>\n  trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) \\<le> 1\n\ngoal (1 subgoal):\n 1. \\<And>x1 x2a \\<rho>.\n       \\<lbrakk>\\<And>\\<rho>.\n                   \\<lbrakk>well_com x2a; \\<rho> \\<in> carrier_mat d d;\n                    partial_density_operator \\<rho>;\n                    trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>)\n                    \\<le> 1\\<rbrakk>\n                   \\<Longrightarrow> denote x2a\n(complex_of_real c \\<cdot>\\<^sub>m \\<rho>) =\n                                     complex_of_real c \\<cdot>\\<^sub>m\n                                     denote x2a \\<rho>;\n        well_com (While x1 x2a); \\<rho> \\<in> carrier_mat d d;\n        partial_density_operator \\<rho>;\n        trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) \\<le> 1\\<rbrakk>\n       \\<Longrightarrow> denote (While x1 x2a)\n                          (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) =\n                         complex_of_real c \\<cdot>\\<^sub>m\n                         denote (While x1 x2a) \\<rho>", "then"], ["proof (chain)\npicking this:\n  \\<lbrakk>well_com x2a; ?\\<rho> \\<in> carrier_mat d d;\n   partial_density_operator ?\\<rho>;\n   trace (complex_of_real c \\<cdot>\\<^sub>m ?\\<rho>) \\<le> 1\\<rbrakk>\n  \\<Longrightarrow> denote x2a (complex_of_real c \\<cdot>\\<^sub>m ?\\<rho>) =\n                    complex_of_real c \\<cdot>\\<^sub>m denote x2a ?\\<rho>\n  well_com (While x1 x2a)\n  \\<rho> \\<in> carrier_mat d d\n  partial_density_operator \\<rho>\n  trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) \\<le> 1", "show ?case"], ["proof (prove)\nusing this:\n  \\<lbrakk>well_com x2a; ?\\<rho> \\<in> carrier_mat d d;\n   partial_density_operator ?\\<rho>;\n   trace (complex_of_real c \\<cdot>\\<^sub>m ?\\<rho>) \\<le> 1\\<rbrakk>\n  \\<Longrightarrow> denote x2a (complex_of_real c \\<cdot>\\<^sub>m ?\\<rho>) =\n                    complex_of_real c \\<cdot>\\<^sub>m denote x2a ?\\<rho>\n  well_com (While x1 x2a)\n  \\<rho> \\<in> carrier_mat d d\n  partial_density_operator \\<rho>\n  trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) \\<le> 1\n\ngoal (1 subgoal):\n 1. denote (While x1 x2a) (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) =\n    complex_of_real c \\<cdot>\\<^sub>m denote (While x1 x2a) \\<rho>", "apply auto"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<And>\\<rho>.\n                \\<lbrakk>\\<rho> \\<in> carrier_mat d d;\n                 partial_density_operator \\<rho>;\n                 Im (trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>)) =\n                 0 \\<and>\n                 Re (trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>))\n                 \\<le> 1\\<rbrakk>\n                \\<Longrightarrow> denote x2a\n                                   (complex_of_real c \\<cdot>\\<^sub>m\n                                    \\<rho>) =\n                                  complex_of_real c \\<cdot>\\<^sub>m\n                                  denote x2a \\<rho>;\n     \\<rho> \\<in> carrier_mat d d; partial_density_operator \\<rho>;\n     measurement d 2 x1; well_com x2a;\n     Im (trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>)) = 0;\n     Re (trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>)) \\<le> 1\\<rbrakk>\n    \\<Longrightarrow> denote_while (x1 0) (x1 (Suc 0)) (denote x2a)\n                       (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) =\n                      complex_of_real c \\<cdot>\\<^sub>m\n                      denote_while (x1 0) (x1 (Suc 0)) (denote x2a) \\<rho>", "using denote_while_scale assms"], ["proof (prove)\nusing this:\n  \\<lbrakk>?\\<rho> \\<in> carrier_mat d d; partial_density_operator ?\\<rho>;\n   trace (complex_of_real ?c \\<cdot>\\<^sub>m ?\\<rho>) \\<le> 1; 0 \\<le> ?c;\n   measurement d 2 ?x1.0; well_com ?x2.0;\n   \\<And>\\<rho>.\n      \\<lbrakk>\\<rho> \\<in> carrier_mat d d;\n       partial_density_operator \\<rho>;\n       trace (complex_of_real ?c \\<cdot>\\<^sub>m \\<rho>) \\<le> 1\\<rbrakk>\n      \\<Longrightarrow> denote ?x2.0\n                         (complex_of_real ?c \\<cdot>\\<^sub>m \\<rho>) =\n                        complex_of_real ?c \\<cdot>\\<^sub>m\n                        denote ?x2.0 \\<rho>\\<rbrakk>\n  \\<Longrightarrow> denote_while (?x1.0 0) (?x1.0 1) (denote ?x2.0)\n                     (complex_of_real ?c \\<cdot>\\<^sub>m ?\\<rho>) =\n                    complex_of_real ?c \\<cdot>\\<^sub>m\n                    denote_while (?x1.0 0) (?x1.0 1) (denote ?x2.0) ?\\<rho>\n  0 \\<le> c\n\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<And>\\<rho>.\n                \\<lbrakk>\\<rho> \\<in> carrier_mat d d;\n                 partial_density_operator \\<rho>;\n                 Im (trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>)) =\n                 0 \\<and>\n                 Re (trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>))\n                 \\<le> 1\\<rbrakk>\n                \\<Longrightarrow> denote x2a\n                                   (complex_of_real c \\<cdot>\\<^sub>m\n                                    \\<rho>) =\n                                  complex_of_real c \\<cdot>\\<^sub>m\n                                  denote x2a \\<rho>;\n     \\<rho> \\<in> carrier_mat d d; partial_density_operator \\<rho>;\n     measurement d 2 x1; well_com x2a;\n     Im (trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>)) = 0;\n     Re (trace (complex_of_real c \\<cdot>\\<^sub>m \\<rho>)) \\<le> 1\\<rbrakk>\n    \\<Longrightarrow> denote_while (x1 0) (x1 (Suc 0)) (denote x2a)\n                       (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) =\n                      complex_of_real c \\<cdot>\\<^sub>m\n                      denote_while (x1 0) (x1 (Suc 0)) (denote x2a) \\<rho>", "by auto"], ["proof (state)\nthis:\n  denote (While x1 x2a) (complex_of_real c \\<cdot>\\<^sub>m \\<rho>) =\n  complex_of_real c \\<cdot>\\<^sub>m denote (While x1 x2a) \\<rho>\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma limit_mat_denote_while_n:\n  assumes wc: \"well_com (While M S)\" and dr: \"\\<rho> \\<in> carrier_mat d d\" and pdor: \"partial_density_operator \\<rho>\"\n  shows \"limit_mat (matrix_sum d (\\<lambda>k. denote_while_n (M 0) (M 1) (denote S) k \\<rho>)) (denote (While M S) \\<rho>) d\""], ["proof (prove)\ngoal (1 subgoal):\n 1. limit_mat\n     (matrix_sum d\n       (\\<lambda>k. denote_while_n (M 0) (M 1) (denote S) k \\<rho>))\n     (denote (While M S) \\<rho>) d", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. limit_mat\n     (matrix_sum d\n       (\\<lambda>k. denote_while_n (M 0) (M 1) (denote S) k \\<rho>))\n     (denote (While M S) \\<rho>) d", "have m: \"measurement d 2 M\""], ["proof (prove)\ngoal (1 subgoal):\n 1. measurement d 2 M", "using wc"], ["proof (prove)\nusing this:\n  well_com (While M S)\n\ngoal (1 subgoal):\n 1. measurement d 2 M", "by auto"], ["proof (state)\nthis:\n  measurement d 2 M\n\ngoal (1 subgoal):\n 1. limit_mat\n     (matrix_sum d\n       (\\<lambda>k. denote_while_n (M 0) (M 1) (denote S) k \\<rho>))\n     (denote (While M S) \\<rho>) d", "then"], ["proof (chain)\npicking this:\n  measurement d 2 M", "have dM0: \"M 0 \\<in> carrier_mat d d\" and dM1: \"M 1 \\<in> carrier_mat d d\" and id: \"adjoint (M 0) * (M 0) + adjoint (M 1) * (M 1) = 1\\<^sub>m d\""], ["proof (prove)\nusing this:\n  measurement d 2 M\n\ngoal (1 subgoal):\n 1. M 0 \\<in> carrier_mat d d &&&\n    M 1 \\<in> carrier_mat d d &&&\n    adjoint (M 0) * M 0 + adjoint (M 1) * M 1 = 1\\<^sub>m d", "using measurement_id2 m measurement_def"], ["proof (prove)\nusing this:\n  measurement d 2 M\n  measurement ?d 2 ?M \\<Longrightarrow>\n  adjoint (?M 0) * ?M 0 + adjoint (?M 1) * ?M 1 = 1\\<^sub>m ?d\n  measurement d 2 M\n  measurement ?d ?n ?M =\n  ((\\<forall>j<?n. ?M j \\<in> carrier_mat ?d ?d) \\<and>\n   matrix_sum ?d (\\<lambda>j. adjoint (?M j) * ?M j) ?n = 1\\<^sub>m ?d)\n\ngoal (1 subgoal):\n 1. M 0 \\<in> carrier_mat d d &&&\n    M 1 \\<in> carrier_mat d d &&&\n    adjoint (M 0) * M 0 + adjoint (M 1) * M 1 = 1\\<^sub>m d", "by auto"], ["proof (state)\nthis:\n  M 0 \\<in> carrier_mat d d\n  M 1 \\<in> carrier_mat d d\n  adjoint (M 0) * M 0 + adjoint (M 1) * M 1 = 1\\<^sub>m d\n\ngoal (1 subgoal):\n 1. limit_mat\n     (matrix_sum d\n       (\\<lambda>k. denote_while_n (M 0) (M 1) (denote S) k \\<rho>))\n     (denote (While M S) \\<rho>) d", "have wcs: \"well_com S\""], ["proof (prove)\ngoal (1 subgoal):\n 1. well_com S", "using wc"], ["proof (prove)\nusing this:\n  well_com (While M S)\n\ngoal (1 subgoal):\n 1. well_com S", "by auto"], ["proof (state)\nthis:\n  well_com S\n\ngoal (1 subgoal):\n 1. limit_mat\n     (matrix_sum d\n       (\\<lambda>k. denote_while_n (M 0) (M 1) (denote S) k \\<rho>))\n     (denote (While M S) \\<rho>) d", "have DS: \"positive (denote S \\<rho>) \\<and> trace (denote S \\<rho>) \\<le> trace \\<rho> \\<and> denote S \\<rho> \\<in> carrier_mat d d\" \n    if \"\\<rho> \\<in> carrier_mat d d\" and \"partial_density_operator \\<rho>\" for \\<rho>"], ["proof (prove)\ngoal (1 subgoal):\n 1. positive (denote S \\<rho>) \\<and>\n    trace (denote S \\<rho>) \\<le> trace \\<rho> \\<and>\n    denote S \\<rho> \\<in> carrier_mat d d", "using wcs that denote_positive_trace_dim"], ["proof (prove)\nusing this:\n  well_com S\n  \\<rho> \\<in> carrier_mat d d\n  partial_density_operator \\<rho>\n  \\<lbrakk>well_com ?S; ?\\<rho> \\<in> carrier_mat d d;\n   partial_density_operator ?\\<rho>\\<rbrakk>\n  \\<Longrightarrow> positive (denote ?S ?\\<rho>) \\<and>\n                    trace (denote ?S ?\\<rho>) \\<le> trace ?\\<rho> \\<and>\n                    denote ?S ?\\<rho> \\<in> carrier_mat d d\n\ngoal (1 subgoal):\n 1. positive (denote S \\<rho>) \\<and>\n    trace (denote S \\<rho>) \\<le> trace \\<rho> \\<and>\n    denote S \\<rho> \\<in> carrier_mat d d", "by auto"], ["proof (state)\nthis:\n  \\<lbrakk>?\\<rho> \\<in> carrier_mat d d;\n   partial_density_operator ?\\<rho>\\<rbrakk>\n  \\<Longrightarrow> positive (denote S ?\\<rho>) \\<and>\n                    trace (denote S ?\\<rho>) \\<le> trace ?\\<rho> \\<and>\n                    denote S ?\\<rho> \\<in> carrier_mat d d\n\ngoal (1 subgoal):\n 1. limit_mat\n     (matrix_sum d\n       (\\<lambda>k. denote_while_n (M 0) (M 1) (denote S) k \\<rho>))\n     (denote (While M S) \\<rho>) d", "have sumdd: \"(\\<forall>n. matrix_sum d (\\<lambda>n. denote_while_n (M 0) (M 1) (denote S) n \\<rho>) n \\<in> carrier_mat d d)\" \n    if \"\\<rho> \\<in> carrier_mat d d\" and \"partial_density_operator \\<rho>\" for \\<rho>"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>n.\n       matrix_sum d\n        (\\<lambda>n. denote_while_n (M 0) (M 1) (denote S) n \\<rho>) n\n       \\<in> carrier_mat d d", "using denote_while_n_sum_dim dM0 dM1 DS that"], ["proof (prove)\nusing this:\n  \\<lbrakk>?\\<rho> \\<in> carrier_mat d d; ?M0.0 \\<in> carrier_mat d d;\n   ?M1.0 \\<in> carrier_mat d d; partial_density_operator ?\\<rho>;\n   \\<And>\\<rho>'.\n      \\<lbrakk>\\<rho>' \\<in> carrier_mat d d;\n       partial_density_operator \\<rho>'\\<rbrakk>\n      \\<Longrightarrow> positive (?DS \\<rho>') \\<and>\n                        trace (?DS \\<rho>') \\<le> trace \\<rho>' \\<and>\n                        ?DS \\<rho>' \\<in> carrier_mat d d\\<rbrakk>\n  \\<Longrightarrow> matrix_sum d\n                     (\\<lambda>n. denote_while_n ?M0.0 ?M1.0 ?DS n ?\\<rho>)\n                     ?n\n                    \\<in> carrier_mat d d\n  M 0 \\<in> carrier_mat d d\n  M 1 \\<in> carrier_mat d d\n  \\<lbrakk>?\\<rho> \\<in> carrier_mat d d;\n   partial_density_operator ?\\<rho>\\<rbrakk>\n  \\<Longrightarrow> positive (denote S ?\\<rho>) \\<and>\n                    trace (denote S ?\\<rho>) \\<le> trace ?\\<rho> \\<and>\n                    denote S ?\\<rho> \\<in> carrier_mat d d\n  \\<rho> \\<in> carrier_mat d d\n  partial_density_operator \\<rho>\n\ngoal (1 subgoal):\n 1. \\<forall>n.\n       matrix_sum d\n        (\\<lambda>n. denote_while_n (M 0) (M 1) (denote S) n \\<rho>) n\n       \\<in> carrier_mat d d", "by auto"], ["proof (state)\nthis:\n  \\<lbrakk>?\\<rho> \\<in> carrier_mat d d;\n   partial_density_operator ?\\<rho>\\<rbrakk>\n  \\<Longrightarrow> \\<forall>n.\n                       matrix_sum d\n                        (\\<lambda>n.\n                            denote_while_n (M 0) (M 1) (denote S) n ?\\<rho>)\n                        n\n                       \\<in> carrier_mat d d\n\ngoal (1 subgoal):\n 1. limit_mat\n     (matrix_sum d\n       (\\<lambda>k. denote_while_n (M 0) (M 1) (denote S) k \\<rho>))\n     (denote (While M S) \\<rho>) d", "have sumtr: \"\\<forall> n. trace (matrix_sum d (\\<lambda>n. denote_while_n (M 0) (M 1) (denote S) n \\<rho>) n) \\<le> trace \\<rho>\"\n    if \"\\<rho> \\<in> carrier_mat d d\" and \"partial_density_operator \\<rho>\" for \\<rho>"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>n.\n       trace\n        (matrix_sum d\n          (\\<lambda>n. denote_while_n (M 0) (M 1) (denote S) n \\<rho>) n)\n       \\<le> trace \\<rho>", "using denote_while_n_sum_trace[OF dM0 dM1 id DS] that"], ["proof (prove)\nusing this:\n  \\<lbrakk>\\<And>\\<rho>.\n              \\<lbrakk>\\<rho> \\<in> carrier_mat d d;\n               partial_density_operator \\<rho>\\<rbrakk>\n              \\<Longrightarrow> \\<rho> \\<in> carrier_mat d d;\n   \\<And>\\<rho>.\n      \\<lbrakk>\\<rho> \\<in> carrier_mat d d;\n       partial_density_operator \\<rho>\\<rbrakk>\n      \\<Longrightarrow> partial_density_operator \\<rho>;\n   ?\\<rho> \\<in> carrier_mat d d; partial_density_operator ?\\<rho>\\<rbrakk>\n  \\<Longrightarrow> trace\n                     (matrix_sum d\n                       (\\<lambda>n.\n                           denote_while_n (M 0) (M 1) (denote S) n ?\\<rho>)\n                       ?n)\n                    \\<le> trace ?\\<rho>\n  \\<rho> \\<in> carrier_mat d d\n  partial_density_operator \\<rho>\n\ngoal (1 subgoal):\n 1. \\<forall>n.\n       trace\n        (matrix_sum d\n          (\\<lambda>n. denote_while_n (M 0) (M 1) (denote S) n \\<rho>) n)\n       \\<le> trace \\<rho>", "by auto"], ["proof (state)\nthis:\n  \\<lbrakk>?\\<rho> \\<in> carrier_mat d d;\n   partial_density_operator ?\\<rho>\\<rbrakk>\n  \\<Longrightarrow> \\<forall>n.\n                       trace\n                        (matrix_sum d\n                          (\\<lambda>n.\n                              denote_while_n (M 0) (M 1) (denote S) n\n                               ?\\<rho>)\n                          n)\n                       \\<le> trace ?\\<rho>\n\ngoal (1 subgoal):\n 1. limit_mat\n     (matrix_sum d\n       (\\<lambda>k. denote_while_n (M 0) (M 1) (denote S) k \\<rho>))\n     (denote (While M S) \\<rho>) d", "have sumpar: \"(\\<forall>n. partial_density_operator (matrix_sum d (\\<lambda>n. denote_while_n (M 0) (M 1) (denote S) n \\<rho>) n))\"\n    if \"\\<rho> \\<in> carrier_mat d d\" and \"partial_density_operator \\<rho>\" for \\<rho>"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>n.\n       partial_density_operator\n        (matrix_sum d\n          (\\<lambda>n. denote_while_n (M 0) (M 1) (denote S) n \\<rho>) n)", "using denote_while_n_sum_partial_density[OF dM0 dM1 id DS] that"], ["proof (prove)\nusing this:\n  \\<lbrakk>\\<And>\\<rho>.\n              \\<lbrakk>\\<rho> \\<in> carrier_mat d d;\n               partial_density_operator \\<rho>\\<rbrakk>\n              \\<Longrightarrow> \\<rho> \\<in> carrier_mat d d;\n   \\<And>\\<rho>.\n      \\<lbrakk>\\<rho> \\<in> carrier_mat d d;\n       partial_density_operator \\<rho>\\<rbrakk>\n      \\<Longrightarrow> partial_density_operator \\<rho>;\n   partial_density_operator ?\\<rho>; ?\\<rho> \\<in> carrier_mat d d\\<rbrakk>\n  \\<Longrightarrow> partial_density_operator\n                     (matrix_sum d\n                       (\\<lambda>n.\n                           denote_while_n (M 0) (M 1) (denote S) n ?\\<rho>)\n                       ?n)\n  \\<rho> \\<in> carrier_mat d d\n  partial_density_operator \\<rho>\n\ngoal (1 subgoal):\n 1. \\<forall>n.\n       partial_density_operator\n        (matrix_sum d\n          (\\<lambda>n. denote_while_n (M 0) (M 1) (denote S) n \\<rho>) n)", "by auto"], ["proof (state)\nthis:\n  \\<lbrakk>?\\<rho> \\<in> carrier_mat d d;\n   partial_density_operator ?\\<rho>\\<rbrakk>\n  \\<Longrightarrow> \\<forall>n.\n                       partial_density_operator\n                        (matrix_sum d\n                          (\\<lambda>n.\n                              denote_while_n (M 0) (M 1) (denote S) n\n                               ?\\<rho>)\n                          n)\n\ngoal (1 subgoal):\n 1. limit_mat\n     (matrix_sum d\n       (\\<lambda>k. denote_while_n (M 0) (M 1) (denote S) k \\<rho>))\n     (denote (While M S) \\<rho>) d", "have sumle:\"(\\<forall>n. matrix_sum d (\\<lambda>n. denote_while_n (M 0) (M 1) (denote S) n \\<rho>) n \\<le>\\<^sub>L matrix_sum d (\\<lambda>n. denote_while_n (M 0) (M 1) (denote S) n \\<rho>) (Suc n))\"\n    if \"\\<rho> \\<in> carrier_mat d d\" and \"partial_density_operator \\<rho>\" for \\<rho>"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>n.\n       matrix_sum d\n        (\\<lambda>n. denote_while_n (M 0) (M 1) (denote S) n \\<rho>)\n        n \\<le>\\<^sub>L\n       matrix_sum d\n        (\\<lambda>n. denote_while_n (M 0) (M 1) (denote S) n \\<rho>) (Suc n)", "using denote_while_n_sum_lowner_le[OF dM0 dM1 id DS] that"], ["proof (prove)\nusing this:\n  \\<lbrakk>\\<And>\\<rho>.\n              \\<lbrakk>\\<rho> \\<in> carrier_mat d d;\n               partial_density_operator \\<rho>\\<rbrakk>\n              \\<Longrightarrow> \\<rho> \\<in> carrier_mat d d;\n   \\<And>\\<rho>.\n      \\<lbrakk>\\<rho> \\<in> carrier_mat d d;\n       partial_density_operator \\<rho>\\<rbrakk>\n      \\<Longrightarrow> partial_density_operator \\<rho>;\n   partial_density_operator ?\\<rho>; ?\\<rho> \\<in> carrier_mat d d\\<rbrakk>\n  \\<Longrightarrow> matrix_sum d\n                     (\\<lambda>n.\n                         denote_while_n (M 0) (M 1) (denote S) n ?\\<rho>)\n                     ?n \\<le>\\<^sub>L\n                    matrix_sum d\n                     (\\<lambda>n.\n                         denote_while_n (M 0) (M 1) (denote S) n ?\\<rho>)\n                     (Suc ?n)\n  \\<rho> \\<in> carrier_mat d d\n  partial_density_operator \\<rho>\n\ngoal (1 subgoal):\n 1. \\<forall>n.\n       matrix_sum d\n        (\\<lambda>n. denote_while_n (M 0) (M 1) (denote S) n \\<rho>)\n        n \\<le>\\<^sub>L\n       matrix_sum d\n        (\\<lambda>n. denote_while_n (M 0) (M 1) (denote S) n \\<rho>) (Suc n)", "by auto"], ["proof (state)\nthis:\n  \\<lbrakk>?\\<rho> \\<in> carrier_mat d d;\n   partial_density_operator ?\\<rho>\\<rbrakk>\n  \\<Longrightarrow> \\<forall>n.\n                       matrix_sum d\n                        (\\<lambda>n.\n                            denote_while_n (M 0) (M 1) (denote S) n ?\\<rho>)\n                        n \\<le>\\<^sub>L\n                       matrix_sum d\n                        (\\<lambda>n.\n                            denote_while_n (M 0) (M 1) (denote S) n ?\\<rho>)\n                        (Suc n)\n\ngoal (1 subgoal):\n 1. limit_mat\n     (matrix_sum d\n       (\\<lambda>k. denote_while_n (M 0) (M 1) (denote S) k \\<rho>))\n     (denote (While M S) \\<rho>) d", "have seqd: \"matrix_seq d (matrix_sum d (\\<lambda>n. denote_while_n (M 0) (M 1) (denote S) n \\<rho>))\"\n    if \"\\<rho> \\<in> carrier_mat d d\" and \"partial_density_operator \\<rho>\" for \\<rho>"], ["proof (prove)\ngoal (1 subgoal):\n 1. matrix_seq d\n     (matrix_sum d\n       (\\<lambda>n. denote_while_n (M 0) (M 1) (denote S) n \\<rho>))", "using matrix_seq_def sumdd sumpar sumle that"], ["proof (prove)\nusing this:\n  matrix_seq ?dim ?f \\<equiv>\n  (\\<forall>n. ?f n \\<in> carrier_mat ?dim ?dim) \\<and>\n  (\\<forall>n. partial_density_operator (?f n)) \\<and>\n  (\\<forall>n. ?f n \\<le>\\<^sub>L ?f (Suc n))\n  \\<lbrakk>?\\<rho> \\<in> carrier_mat d d;\n   partial_density_operator ?\\<rho>\\<rbrakk>\n  \\<Longrightarrow> \\<forall>n.\n                       matrix_sum d\n                        (\\<lambda>n.\n                            denote_while_n (M 0) (M 1) (denote S) n ?\\<rho>)\n                        n\n                       \\<in> carrier_mat d d\n  \\<lbrakk>?\\<rho> \\<in> carrier_mat d d;\n   partial_density_operator ?\\<rho>\\<rbrakk>\n  \\<Longrightarrow> \\<forall>n.\n                       partial_density_operator\n                        (matrix_sum d\n                          (\\<lambda>n.\n                              denote_while_n (M 0) (M 1) (denote S) n\n                               ?\\<rho>)\n                          n)\n  \\<lbrakk>?\\<rho> \\<in> carrier_mat d d;\n   partial_density_operator ?\\<rho>\\<rbrakk>\n  \\<Longrightarrow> \\<forall>n.\n                       matrix_sum d\n                        (\\<lambda>n.\n                            denote_while_n (M 0) (M 1) (denote S) n ?\\<rho>)\n                        n \\<le>\\<^sub>L\n                       matrix_sum d\n                        (\\<lambda>n.\n                            denote_while_n (M 0) (M 1) (denote S) n ?\\<rho>)\n                        (Suc n)\n  \\<rho> \\<in> carrier_mat d d\n  partial_density_operator \\<rho>\n\ngoal (1 subgoal):\n 1. matrix_seq d\n     (matrix_sum d\n       (\\<lambda>n. denote_while_n (M 0) (M 1) (denote S) n \\<rho>))", "by auto"], ["proof (state)\nthis:\n  \\<lbrakk>?\\<rho> \\<in> carrier_mat d d;\n   partial_density_operator ?\\<rho>\\<rbrakk>\n  \\<Longrightarrow> matrix_seq d\n                     (matrix_sum d\n                       (\\<lambda>n.\n                           denote_while_n (M 0) (M 1) (denote S) n ?\\<rho>))\n\ngoal (1 subgoal):\n 1. limit_mat\n     (matrix_sum d\n       (\\<lambda>k. denote_while_n (M 0) (M 1) (denote S) k \\<rho>))\n     (denote (While M S) \\<rho>) d", "have \"matrix_seq.lowner_is_lub (matrix_sum d (\\<lambda>n. denote_while_n (M 0) (M 1) (denote S) n \\<rho>))\n    (matrix_seq.lowner_lub (matrix_sum d (\\<lambda>n. denote_while_n (M 0) (M 1) (denote S) n \\<rho>)))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. matrix_seq.lowner_is_lub\n     (matrix_sum d\n       (\\<lambda>n. denote_while_n (M 0) (M 1) (denote S) n \\<rho>))\n     (matrix_seq.lowner_lub\n       (matrix_sum d\n         (\\<lambda>n. denote_while_n (M 0) (M 1) (denote S) n \\<rho>)))", "using DS lowner_is_lub_matrix_sum dM0 dM1 id pdor dr"], ["proof (prove)\nusing this:\n  \\<lbrakk>?\\<rho> \\<in> carrier_mat d d;\n   partial_density_operator ?\\<rho>\\<rbrakk>\n  \\<Longrightarrow> positive (denote S ?\\<rho>) \\<and>\n                    trace (denote S ?\\<rho>) \\<le> trace ?\\<rho> \\<and>\n                    denote S ?\\<rho> \\<in> carrier_mat d d\n  \\<lbrakk>?M0.0 \\<in> carrier_mat d d; ?M1.0 \\<in> carrier_mat d d;\n   adjoint ?M0.0 * ?M0.0 + adjoint ?M1.0 * ?M1.0 = 1\\<^sub>m d;\n   \\<And>\\<rho>.\n      \\<lbrakk>\\<rho> \\<in> carrier_mat d d;\n       partial_density_operator \\<rho>\\<rbrakk>\n      \\<Longrightarrow> positive (?DS \\<rho>) \\<and>\n                        trace (?DS \\<rho>) \\<le> trace \\<rho> \\<and>\n                        ?DS \\<rho> \\<in> carrier_mat d d;\n   partial_density_operator ?\\<rho>; ?\\<rho> \\<in> carrier_mat d d\\<rbrakk>\n  \\<Longrightarrow> matrix_seq.lowner_is_lub\n                     (matrix_sum d\n                       (\\<lambda>n.\n                           denote_while_n ?M0.0 ?M1.0 ?DS n ?\\<rho>))\n                     (matrix_seq.lowner_lub\n                       (matrix_sum d\n                         (\\<lambda>n.\n                             denote_while_n ?M0.0 ?M1.0 ?DS n ?\\<rho>)))\n  M 0 \\<in> carrier_mat d d\n  M 1 \\<in> carrier_mat d d\n  adjoint (M 0) * M 0 + adjoint (M 1) * M 1 = 1\\<^sub>m d\n  partial_density_operator \\<rho>\n  \\<rho> \\<in> carrier_mat d d\n\ngoal (1 subgoal):\n 1. matrix_seq.lowner_is_lub\n     (matrix_sum d\n       (\\<lambda>n. denote_while_n (M 0) (M 1) (denote S) n \\<rho>))\n     (matrix_seq.lowner_lub\n       (matrix_sum d\n         (\\<lambda>n. denote_while_n (M 0) (M 1) (denote S) n \\<rho>)))", "by auto"], ["proof (state)\nthis:\n  matrix_seq.lowner_is_lub\n   (matrix_sum d\n     (\\<lambda>n. denote_while_n (M 0) (M 1) (denote S) n \\<rho>))\n   (matrix_seq.lowner_lub\n     (matrix_sum d\n       (\\<lambda>n. denote_while_n (M 0) (M 1) (denote S) n \\<rho>)))\n\ngoal (1 subgoal):\n 1. limit_mat\n     (matrix_sum d\n       (\\<lambda>k. denote_while_n (M 0) (M 1) (denote S) k \\<rho>))\n     (denote (While M S) \\<rho>) d", "then"], ["proof (chain)\npicking this:\n  matrix_seq.lowner_is_lub\n   (matrix_sum d\n     (\\<lambda>n. denote_while_n (M 0) (M 1) (denote S) n \\<rho>))\n   (matrix_seq.lowner_lub\n     (matrix_sum d\n       (\\<lambda>n. denote_while_n (M 0) (M 1) (denote S) n \\<rho>)))", "show \"limit_mat (matrix_sum d (\\<lambda>k. denote_while_n (M 0) (M 1) (denote S) k \\<rho>)) (denote (While M S) \\<rho>) d\""], ["proof (prove)\nusing this:\n  matrix_seq.lowner_is_lub\n   (matrix_sum d\n     (\\<lambda>n. denote_while_n (M 0) (M 1) (denote S) n \\<rho>))\n   (matrix_seq.lowner_lub\n     (matrix_sum d\n       (\\<lambda>n. denote_while_n (M 0) (M 1) (denote S) n \\<rho>)))\n\ngoal (1 subgoal):\n 1. limit_mat\n     (matrix_sum d\n       (\\<lambda>k. denote_while_n (M 0) (M 1) (denote S) k \\<rho>))\n     (denote (While M S) \\<rho>) d", "unfolding denote.simps denote_while_def matrix_inf_sum_def"], ["proof (prove)\nusing this:\n  matrix_seq.lowner_is_lub\n   (matrix_sum d\n     (\\<lambda>n. denote_while_n (M 0) (M 1) (denote S) n \\<rho>))\n   (matrix_seq.lowner_lub\n     (matrix_sum d\n       (\\<lambda>n. denote_while_n (M 0) (M 1) (denote S) n \\<rho>)))\n\ngoal (1 subgoal):\n 1. limit_mat\n     (matrix_sum d\n       (\\<lambda>k. denote_while_n (M 0) (M 1) (denote S) k \\<rho>))\n     (matrix_seq.lowner_lub\n       (matrix_sum d\n         (\\<lambda>n. denote_while_n (M 0) (M 1) (denote S) n \\<rho>)))\n     d", "using matrix_seq.lowner_lub_is_limit[OF seqd[OF dr pdor]]"], ["proof (prove)\nusing this:\n  matrix_seq.lowner_is_lub\n   (matrix_sum d\n     (\\<lambda>n. denote_while_n (M 0) (M 1) (denote S) n \\<rho>))\n   (matrix_seq.lowner_lub\n     (matrix_sum d\n       (\\<lambda>n. denote_while_n (M 0) (M 1) (denote S) n \\<rho>)))\n  limit_mat\n   (matrix_sum d\n     (\\<lambda>n. denote_while_n (M 0) (M 1) (denote S) n \\<rho>))\n   (matrix_seq.lowner_lub\n     (matrix_sum d\n       (\\<lambda>n. denote_while_n (M 0) (M 1) (denote S) n \\<rho>)))\n   d\n\ngoal (1 subgoal):\n 1. limit_mat\n     (matrix_sum d\n       (\\<lambda>k. denote_while_n (M 0) (M 1) (denote S) k \\<rho>))\n     (matrix_seq.lowner_lub\n       (matrix_sum d\n         (\\<lambda>n. denote_while_n (M 0) (M 1) (denote S) n \\<rho>)))\n     d", "by auto"], ["proof (state)\nthis:\n  limit_mat\n   (matrix_sum d\n     (\\<lambda>k. denote_while_n (M 0) (M 1) (denote S) k \\<rho>))\n   (denote (While M S) \\<rho>) d\n\ngoal:\nNo subgoals!", "qed"], ["", "end"], ["", "end"]]}