{"file_name": "/home/qj213/afp-2021-10-22/thys/POPLmark-deBruijn/POPLmarkRecordCtxt.thy", "working_directory": "/home/qj213/afp-2021-10-22/thys/POPLmark-deBruijn", "problem_names": ["lemmas rctxt_induct = ctxt_rctxt.inducts(2)\n  [of _ \"\\<lambda>x. True\", simplified True_simps, consumes 1, case_names C_hd C_tl]", "lemma rctxt_labels:\n  assumes H: \"E \\<in> rctxt\"\n  shows \"E t\\<langle>l\\<rangle>\\<^sub>? = \\<bottom> \\<Longrightarrow> E t'\\<langle>l\\<rangle>\\<^sub>? = \\<bottom>\"", "lemma context_typing: \\<comment> \\<open>A.18\\<close>\n  \"\\<Gamma> \\<turnstile> u : T \\<Longrightarrow> E \\<in> ctxt \\<Longrightarrow> u = E t \\<Longrightarrow>\n     (\\<And>T\\<^sub>0. \\<Gamma> \\<turnstile> t : T\\<^sub>0 \\<Longrightarrow> \\<Gamma> \\<turnstile> t' : T\\<^sub>0) \\<Longrightarrow> \\<Gamma> \\<turnstile> E t' : T\"\n  \"\\<Gamma> \\<turnstile> fs [:] fTs \\<Longrightarrow> E\\<^sub>r \\<in> rctxt \\<Longrightarrow> fs = E\\<^sub>r t \\<Longrightarrow>\n     (\\<And>T\\<^sub>0. \\<Gamma> \\<turnstile> t : T\\<^sub>0 \\<Longrightarrow> \\<Gamma> \\<turnstile> t' : T\\<^sub>0) \\<Longrightarrow> \\<Gamma> \\<turnstile> E\\<^sub>r t' [:] fTs\"", "theorem Abs_preservation: \\<comment> \\<open>A.19(1)\\<close>\n  assumes H: \"\\<Gamma> \\<turnstile> (\\<lambda>:T\\<^sub>1\\<^sub>1. t\\<^sub>1\\<^sub>2) \\<bullet> t\\<^sub>2 : T\"\n  shows \"\\<Gamma> \\<turnstile> t\\<^sub>1\\<^sub>2[0 \\<mapsto> t\\<^sub>2] : T\"", "theorem TAbs_preservation: \\<comment> \\<open>A.19(2)\\<close>\n  assumes H: \"\\<Gamma> \\<turnstile> (\\<lambda><:T\\<^sub>1\\<^sub>1. t\\<^sub>1\\<^sub>2) \\<bullet>\\<^sub>\\<tau> T\\<^sub>2 : T\"\n  shows \"\\<Gamma> \\<turnstile> t\\<^sub>1\\<^sub>2[0 \\<mapsto>\\<^sub>\\<tau> T\\<^sub>2] : T\"", "theorem Let_preservation: \\<comment> \\<open>A.19(3)\\<close>\n  assumes H: \"\\<Gamma> \\<turnstile> (LET p = t\\<^sub>1 IN t\\<^sub>2) : T\"\n  shows \"\\<turnstile> p \\<rhd> t\\<^sub>1 \\<Rightarrow> ts \\<Longrightarrow> \\<Gamma> \\<turnstile> t\\<^sub>2[0 \\<mapsto>\\<^sub>s ts] : T\"", "theorem Proj_preservation: \\<comment> \\<open>A.19(4)\\<close>\n  assumes H: \"\\<Gamma> \\<turnstile> Rcd fs..l : T\"\n  shows \"fs\\<langle>l\\<rangle>\\<^sub>? = \\<lfloor>v\\<rfloor> \\<Longrightarrow> \\<Gamma> \\<turnstile> v : T\"", "theorem preservation: \\<comment> \\<open>A.20\\<close>\n  assumes H: \"t \\<longmapsto>\\<^sub>c t'\"\n  shows \"\\<Gamma> \\<turnstile> t : T \\<Longrightarrow> \\<Gamma> \\<turnstile> t' : T\"", "theorem context_decomp: \\<comment> \\<open>A.15\\<close>\n  \"[] \\<turnstile> t : T \\<Longrightarrow> \n     t \\<in> value \\<or> (\\<exists>E t\\<^sub>0 t\\<^sub>0'. E \\<in> ctxt \\<and> t = E t\\<^sub>0 \\<and> t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')\"\n  \"[] \\<turnstile> fs [:] fTs \\<Longrightarrow>\n     (\\<forall>(l, t) \\<in> set fs. t \\<in> value) \\<or> (\\<exists>E t\\<^sub>0 t\\<^sub>0'. E \\<in> rctxt \\<and> fs = E t\\<^sub>0 \\<and> t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')\"", "theorem progress: \\<comment> \\<open>A.16\\<close>\n  assumes H: \"[] \\<turnstile> t : T\"\n  shows \"t \\<in> value \\<or> (\\<exists>t'. t \\<longmapsto>\\<^sub>c t')\"", "lemma ctxt_imp_eval:\n  \"E \\<in> ctxt \\<Longrightarrow> t \\<longmapsto> t' \\<Longrightarrow> E t \\<longmapsto> E t'\"\n  \"E\\<^sub>r \\<in> rctxt \\<Longrightarrow> t \\<longmapsto> t' \\<Longrightarrow> E\\<^sub>r t [\\<longmapsto>] E\\<^sub>r t'\"", "lemma eval_evalc_eq: \"(t \\<longmapsto> t') = (t \\<longmapsto>\\<^sub>c t')\""], "translations": [["", "lemmas rctxt_induct = ctxt_rctxt.inducts(2)\n  [of _ \"\\<lambda>x. True\", simplified True_simps, consumes 1, case_names C_hd C_tl]"], ["", "lemma rctxt_labels:\n  assumes H: \"E \\<in> rctxt\"\n  shows \"E t\\<langle>l\\<rangle>\\<^sub>? = \\<bottom> \\<Longrightarrow> E t'\\<langle>l\\<rangle>\\<^sub>? = \\<bottom>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. E t\\<langle>l\\<rangle>\\<^sub>? = \\<bottom> \\<Longrightarrow>\n    E t'\\<langle>l\\<rangle>\\<^sub>? = \\<bottom>", "using H"], ["proof (prove)\nusing this:\n  E \\<in> rctxt\n\ngoal (1 subgoal):\n 1. E t\\<langle>l\\<rangle>\\<^sub>? = \\<bottom> \\<Longrightarrow>\n    E t'\\<langle>l\\<rangle>\\<^sub>? = \\<bottom>", "by (induct rule: rctxt_induct) auto"], ["", "text \\<open>\nThe evaluation relation \\<open>t \\<longmapsto>\\<^sub>c t'\\<close> is now characterized by the rule \\<open>E_Ctxt\\<close>,\nwhich allows reductions in arbitrary contexts, as well as the rules \\<open>E_Abs\\<close>,\n\\<open>E_TAbs\\<close>, \\<open>E_LetV\\<close>, and \\<open>E_ProjRcd\\<close> describing the ``immediate''\nreductions, which have already been presented in \\secref{sec:evaluation} and\n\\secref{sec:evaluation-rcd}.\n\\<close>"], ["", "inductive\n  eval :: \"trm \\<Rightarrow> trm \\<Rightarrow> bool\"  (infixl \"\\<longmapsto>\\<^sub>c\" 50)\nwhere\n  E_Ctxt: \"t \\<longmapsto>\\<^sub>c t' \\<Longrightarrow> E \\<in> ctxt \\<Longrightarrow> E t \\<longmapsto>\\<^sub>c E t'\"\n| E_Abs: \"v\\<^sub>2 \\<in> value \\<Longrightarrow> (\\<lambda>:T\\<^sub>1\\<^sub>1. t\\<^sub>1\\<^sub>2) \\<bullet> v\\<^sub>2 \\<longmapsto>\\<^sub>c t\\<^sub>1\\<^sub>2[0 \\<mapsto> v\\<^sub>2]\"\n| E_TAbs: \"(\\<lambda><:T\\<^sub>1\\<^sub>1. t\\<^sub>1\\<^sub>2) \\<bullet>\\<^sub>\\<tau> T\\<^sub>2 \\<longmapsto>\\<^sub>c t\\<^sub>1\\<^sub>2[0 \\<mapsto>\\<^sub>\\<tau> T\\<^sub>2]\"\n| E_LetV: \"v \\<in> value \\<Longrightarrow> \\<turnstile> p \\<rhd> v \\<Rightarrow> ts \\<Longrightarrow> (LET p = v IN t) \\<longmapsto>\\<^sub>c t[0 \\<mapsto>\\<^sub>s ts]\"\n| E_ProjRcd: \"fs\\<langle>l\\<rangle>\\<^sub>? = \\<lfloor>v\\<rfloor> \\<Longrightarrow> v \\<in> value \\<Longrightarrow> Rcd fs..l \\<longmapsto>\\<^sub>c v\""], ["", "text \\<open>\nIn the proof of the preservation theorem, the case corresponding to the rule \\<open>E_Ctxt\\<close>\nrequires a lemma stating that replacing\na term @{term t} in a well-typed term of the form @{term \"E t\"}, where @{term E} is\na context, by a term @{term t'} of the same type does not change the type of the\nresulting term @{term \"E t'\"}.\nThe proof is by mutual induction on the typing derivations for terms and records.\n\\<close>"], ["", "lemma context_typing: \\<comment> \\<open>A.18\\<close>\n  \"\\<Gamma> \\<turnstile> u : T \\<Longrightarrow> E \\<in> ctxt \\<Longrightarrow> u = E t \\<Longrightarrow>\n     (\\<And>T\\<^sub>0. \\<Gamma> \\<turnstile> t : T\\<^sub>0 \\<Longrightarrow> \\<Gamma> \\<turnstile> t' : T\\<^sub>0) \\<Longrightarrow> \\<Gamma> \\<turnstile> E t' : T\"\n  \"\\<Gamma> \\<turnstile> fs [:] fTs \\<Longrightarrow> E\\<^sub>r \\<in> rctxt \\<Longrightarrow> fs = E\\<^sub>r t \\<Longrightarrow>\n     (\\<And>T\\<^sub>0. \\<Gamma> \\<turnstile> t : T\\<^sub>0 \\<Longrightarrow> \\<Gamma> \\<turnstile> t' : T\\<^sub>0) \\<Longrightarrow> \\<Gamma> \\<turnstile> E\\<^sub>r t' [:] fTs\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lbrakk>\\<Gamma> \\<turnstile> u : T; E \\<in> ctxt; u = E t;\n      \\<And>T\\<^sub>0.\n         \\<Gamma> \\<turnstile> t : T\\<^sub>0 \\<Longrightarrow>\n         \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n     \\<Longrightarrow> \\<Gamma> \\<turnstile> E t' : T) &&&\n    (\\<lbrakk>\\<Gamma> \\<turnstile> fs [:] fTs; E\\<^sub>r \\<in> rctxt;\n      fs = E\\<^sub>r t;\n      \\<And>T\\<^sub>0.\n         \\<Gamma> \\<turnstile> t : T\\<^sub>0 \\<Longrightarrow>\n         \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n     \\<Longrightarrow> \\<Gamma> \\<turnstile> E\\<^sub>r t' [:] fTs)", "proof (induct arbitrary: E t t' and E\\<^sub>r t t' set: typing typings)"], ["proof (state)\ngoal (11 subgoals):\n 1. \\<And>\\<Gamma> i U T E t t'.\n       \\<lbrakk>\\<Gamma> \\<turnstile>\\<^sub>w\\<^sub>f;\n        \\<Gamma>\\<langle>i\\<rangle> = \\<lfloor>VarB U\\<rfloor>;\n        T = \\<up>\\<^sub>\\<tau> (Suc i) 0 U; E \\<in> ctxt; Var i = E t;\n        \\<And>T\\<^sub>0.\n           \\<Gamma> \\<turnstile> t : T\\<^sub>0 \\<Longrightarrow>\n           \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> E t' : T\n 2. \\<And>T\\<^sub>1 \\<Gamma> t\\<^sub>2 T\\<^sub>2 E t t'.\n       \\<lbrakk>VarB T\\<^sub>1 \\<Colon>\n                \\<Gamma> \\<turnstile> t\\<^sub>2 : T\\<^sub>2;\n        \\<And>E t t'.\n           \\<lbrakk>E \\<in> ctxt; t\\<^sub>2 = E t;\n            \\<And>T\\<^sub>0.\n               VarB T\\<^sub>1 \\<Colon>\n               \\<Gamma> \\<turnstile> t : T\\<^sub>0 \\<Longrightarrow>\n               VarB T\\<^sub>1 \\<Colon>\n               \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n           \\<Longrightarrow> VarB T\\<^sub>1 \\<Colon>\n                             \\<Gamma> \\<turnstile> E t' : T\\<^sub>2;\n        E \\<in> ctxt; (\\<lambda>:T\\<^sub>1. t\\<^sub>2) = E t;\n        \\<And>T\\<^sub>0.\n           \\<Gamma> \\<turnstile> t : T\\<^sub>0 \\<Longrightarrow>\n           \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> E\n          t' : T\\<^sub>1 \\<rightarrow> \\<down>\\<^sub>\\<tau> 1 0 T\\<^sub>2\n 3. \\<And>\\<Gamma> t\\<^sub>1 T\\<^sub>1\\<^sub>1 T\\<^sub>1\\<^sub>2 t\\<^sub>2 E\n       t t'.\n       \\<lbrakk>\\<Gamma> \\<turnstile> t\\<^sub>1 : T\\<^sub>1\\<^sub>1 \\<rightarrow>\n            T\\<^sub>1\\<^sub>2;\n        \\<And>E t t'.\n           \\<lbrakk>E \\<in> ctxt; t\\<^sub>1 = E t;\n            \\<And>T\\<^sub>0.\n               \\<Gamma> \\<turnstile> t : T\\<^sub>0 \\<Longrightarrow>\n               \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n           \\<Longrightarrow> \\<Gamma> \\<turnstile> E\n              t' : T\\<^sub>1\\<^sub>1 \\<rightarrow> T\\<^sub>1\\<^sub>2;\n        \\<Gamma> \\<turnstile> t\\<^sub>2 : T\\<^sub>1\\<^sub>1;\n        \\<And>E t t'.\n           \\<lbrakk>E \\<in> ctxt; t\\<^sub>2 = E t;\n            \\<And>T\\<^sub>0.\n               \\<Gamma> \\<turnstile> t : T\\<^sub>0 \\<Longrightarrow>\n               \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n           \\<Longrightarrow> \\<Gamma> \\<turnstile> E t' : T\\<^sub>1\\<^sub>1;\n        E \\<in> ctxt; t\\<^sub>1 \\<bullet> t\\<^sub>2 = E t;\n        \\<And>T\\<^sub>0.\n           \\<Gamma> \\<turnstile> t : T\\<^sub>0 \\<Longrightarrow>\n           \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> E t' : T\\<^sub>1\\<^sub>2\n 4. \\<And>T\\<^sub>1 \\<Gamma> t\\<^sub>2 T\\<^sub>2 E t t'.\n       \\<lbrakk>TVarB T\\<^sub>1 \\<Colon>\n                \\<Gamma> \\<turnstile> t\\<^sub>2 : T\\<^sub>2;\n        \\<And>E t t'.\n           \\<lbrakk>E \\<in> ctxt; t\\<^sub>2 = E t;\n            \\<And>T\\<^sub>0.\n               TVarB T\\<^sub>1 \\<Colon>\n               \\<Gamma> \\<turnstile> t : T\\<^sub>0 \\<Longrightarrow>\n               TVarB T\\<^sub>1 \\<Colon>\n               \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n           \\<Longrightarrow> TVarB T\\<^sub>1 \\<Colon>\n                             \\<Gamma> \\<turnstile> E t' : T\\<^sub>2;\n        E \\<in> ctxt; (\\<lambda><:T\\<^sub>1. t\\<^sub>2) = E t;\n        \\<And>T\\<^sub>0.\n           \\<Gamma> \\<turnstile> t : T\\<^sub>0 \\<Longrightarrow>\n           \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> E\n          t' : (\\<forall><:T\\<^sub>1. T\\<^sub>2)\n 5. \\<And>\\<Gamma> t\\<^sub>1 T\\<^sub>1\\<^sub>1 T\\<^sub>1\\<^sub>2 T\\<^sub>2 E\n       t t'.\n       \\<lbrakk>\\<Gamma> \\<turnstile> t\\<^sub>1 : (\\<forall><:T\\<^sub>1\\<^sub>1.\n                T\\<^sub>1\\<^sub>2);\n        \\<And>E t t'.\n           \\<lbrakk>E \\<in> ctxt; t\\<^sub>1 = E t;\n            \\<And>T\\<^sub>0.\n               \\<Gamma> \\<turnstile> t : T\\<^sub>0 \\<Longrightarrow>\n               \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n           \\<Longrightarrow> \\<Gamma> \\<turnstile> E\n              t' : (\\<forall><:T\\<^sub>1\\<^sub>1. T\\<^sub>1\\<^sub>2);\n        \\<Gamma> \\<turnstile> T\\<^sub>2 <: T\\<^sub>1\\<^sub>1; E \\<in> ctxt;\n        t\\<^sub>1 \\<bullet>\\<^sub>\\<tau> T\\<^sub>2 = E t;\n        \\<And>T\\<^sub>0.\n           \\<Gamma> \\<turnstile> t : T\\<^sub>0 \\<Longrightarrow>\n           \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> E\n          t' : T\\<^sub>1\\<^sub>2[0 \\<mapsto>\\<^sub>\\<tau> T\\<^sub>2]\\<^sub>\\<tau>\n 6. \\<And>\\<Gamma> t S T E ta t'.\n       \\<lbrakk>\\<Gamma> \\<turnstile> t : S;\n        \\<And>E ta t'.\n           \\<lbrakk>E \\<in> ctxt; t = E ta;\n            \\<And>T\\<^sub>0.\n               \\<Gamma> \\<turnstile> ta : T\\<^sub>0 \\<Longrightarrow>\n               \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n           \\<Longrightarrow> \\<Gamma> \\<turnstile> E t' : S;\n        \\<Gamma> \\<turnstile> S <: T; E \\<in> ctxt; t = E ta;\n        \\<And>T\\<^sub>0.\n           \\<Gamma> \\<turnstile> ta : T\\<^sub>0 \\<Longrightarrow>\n           \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> E t' : T\n 7. \\<And>\\<Gamma> t\\<^sub>1 T\\<^sub>1 p \\<Delta> t\\<^sub>2 T\\<^sub>2 E t\n       t'.\n       \\<lbrakk>\\<Gamma> \\<turnstile> t\\<^sub>1 : T\\<^sub>1;\n        \\<And>E t t'.\n           \\<lbrakk>E \\<in> ctxt; t\\<^sub>1 = E t;\n            \\<And>T\\<^sub>0.\n               \\<Gamma> \\<turnstile> t : T\\<^sub>0 \\<Longrightarrow>\n               \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n           \\<Longrightarrow> \\<Gamma> \\<turnstile> E t' : T\\<^sub>1;\n        \\<turnstile> p : T\\<^sub>1 \\<Rightarrow> \\<Delta>;\n        \\<Delta> @ \\<Gamma> \\<turnstile> t\\<^sub>2 : T\\<^sub>2;\n        \\<And>E t t'.\n           \\<lbrakk>E \\<in> ctxt; t\\<^sub>2 = E t;\n            \\<And>T\\<^sub>0.\n               \\<Delta> @\n               \\<Gamma> \\<turnstile> t : T\\<^sub>0 \\<Longrightarrow>\n               \\<Delta> @ \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n           \\<Longrightarrow> \\<Delta> @\n                             \\<Gamma> \\<turnstile> E t' : T\\<^sub>2;\n        E \\<in> ctxt; (LET p = t\\<^sub>1 IN t\\<^sub>2) = E t;\n        \\<And>T\\<^sub>0.\n           \\<Gamma> \\<turnstile> t : T\\<^sub>0 \\<Longrightarrow>\n           \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> E\n          t' : \\<down>\\<^sub>\\<tau> \\<parallel>\\<Delta>\\<parallel> 0\n                T\\<^sub>2\n 8. \\<And>\\<Gamma> fs fTs E t t'.\n       \\<lbrakk>\\<Gamma> \\<turnstile> fs [:] fTs;\n        \\<And>E\\<^sub>r t t'.\n           \\<lbrakk>E\\<^sub>r \\<in> rctxt; fs = E\\<^sub>r t;\n            \\<And>T\\<^sub>0.\n               \\<Gamma> \\<turnstile> t : T\\<^sub>0 \\<Longrightarrow>\n               \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n           \\<Longrightarrow> \\<Gamma> \\<turnstile> E\\<^sub>r t' [:] fTs;\n        E \\<in> ctxt; Rcd fs = E t;\n        \\<And>T\\<^sub>0.\n           \\<Gamma> \\<turnstile> t : T\\<^sub>0 \\<Longrightarrow>\n           \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> E t' : RcdT fTs\n 9. \\<And>\\<Gamma> t fTs l T E ta t'.\n       \\<lbrakk>\\<Gamma> \\<turnstile> t : RcdT fTs;\n        \\<And>E ta t'.\n           \\<lbrakk>E \\<in> ctxt; t = E ta;\n            \\<And>T\\<^sub>0.\n               \\<Gamma> \\<turnstile> ta : T\\<^sub>0 \\<Longrightarrow>\n               \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n           \\<Longrightarrow> \\<Gamma> \\<turnstile> E t' : RcdT fTs;\n        fTs\\<langle>l\\<rangle>\\<^sub>? = \\<lfloor>T\\<rfloor>; E \\<in> ctxt;\n        t..l = E ta;\n        \\<And>T\\<^sub>0.\n           \\<Gamma> \\<turnstile> ta : T\\<^sub>0 \\<Longrightarrow>\n           \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> E t' : T\n 10. \\<And>\\<Gamma> E\\<^sub>r t t'.\n        \\<lbrakk>\\<Gamma> \\<turnstile>\\<^sub>w\\<^sub>f;\n         E\\<^sub>r \\<in> rctxt; [] = E\\<^sub>r t;\n         \\<And>T\\<^sub>0.\n            \\<Gamma> \\<turnstile> t : T\\<^sub>0 \\<Longrightarrow>\n            \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n        \\<Longrightarrow> \\<Gamma> \\<turnstile> E\\<^sub>r t' [:] []\nA total of 11 subgoals...", "case (T_Var \\<Gamma> i U T E t t')"], ["proof (state)\nthis:\n  \\<Gamma> \\<turnstile>\\<^sub>w\\<^sub>f\n  \\<Gamma>\\<langle>i\\<rangle> = \\<lfloor>VarB U\\<rfloor>\n  T = \\<up>\\<^sub>\\<tau> (Suc i) 0 U\n  E \\<in> ctxt\n  Var i = E t\n  \\<Gamma> \\<turnstile> t : ?T\\<^sub>0 \\<Longrightarrow>\n  \\<Gamma> \\<turnstile> t' : ?T\\<^sub>0\n\ngoal (11 subgoals):\n 1. \\<And>\\<Gamma> i U T E t t'.\n       \\<lbrakk>\\<Gamma> \\<turnstile>\\<^sub>w\\<^sub>f;\n        \\<Gamma>\\<langle>i\\<rangle> = \\<lfloor>VarB U\\<rfloor>;\n        T = \\<up>\\<^sub>\\<tau> (Suc i) 0 U; E \\<in> ctxt; Var i = E t;\n        \\<And>T\\<^sub>0.\n           \\<Gamma> \\<turnstile> t : T\\<^sub>0 \\<Longrightarrow>\n           \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> E t' : T\n 2. \\<And>T\\<^sub>1 \\<Gamma> t\\<^sub>2 T\\<^sub>2 E t t'.\n       \\<lbrakk>VarB T\\<^sub>1 \\<Colon>\n                \\<Gamma> \\<turnstile> t\\<^sub>2 : T\\<^sub>2;\n        \\<And>E t t'.\n           \\<lbrakk>E \\<in> ctxt; t\\<^sub>2 = E t;\n            \\<And>T\\<^sub>0.\n               VarB T\\<^sub>1 \\<Colon>\n               \\<Gamma> \\<turnstile> t : T\\<^sub>0 \\<Longrightarrow>\n               VarB T\\<^sub>1 \\<Colon>\n               \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n           \\<Longrightarrow> VarB T\\<^sub>1 \\<Colon>\n                             \\<Gamma> \\<turnstile> E t' : T\\<^sub>2;\n        E \\<in> ctxt; (\\<lambda>:T\\<^sub>1. t\\<^sub>2) = E t;\n        \\<And>T\\<^sub>0.\n           \\<Gamma> \\<turnstile> t : T\\<^sub>0 \\<Longrightarrow>\n           \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> E\n          t' : T\\<^sub>1 \\<rightarrow> \\<down>\\<^sub>\\<tau> 1 0 T\\<^sub>2\n 3. \\<And>\\<Gamma> t\\<^sub>1 T\\<^sub>1\\<^sub>1 T\\<^sub>1\\<^sub>2 t\\<^sub>2 E\n       t t'.\n       \\<lbrakk>\\<Gamma> \\<turnstile> t\\<^sub>1 : T\\<^sub>1\\<^sub>1 \\<rightarrow>\n            T\\<^sub>1\\<^sub>2;\n        \\<And>E t t'.\n           \\<lbrakk>E \\<in> ctxt; t\\<^sub>1 = E t;\n            \\<And>T\\<^sub>0.\n               \\<Gamma> \\<turnstile> t : T\\<^sub>0 \\<Longrightarrow>\n               \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n           \\<Longrightarrow> \\<Gamma> \\<turnstile> E\n              t' : T\\<^sub>1\\<^sub>1 \\<rightarrow> T\\<^sub>1\\<^sub>2;\n        \\<Gamma> \\<turnstile> t\\<^sub>2 : T\\<^sub>1\\<^sub>1;\n        \\<And>E t t'.\n           \\<lbrakk>E \\<in> ctxt; t\\<^sub>2 = E t;\n            \\<And>T\\<^sub>0.\n               \\<Gamma> \\<turnstile> t : T\\<^sub>0 \\<Longrightarrow>\n               \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n           \\<Longrightarrow> \\<Gamma> \\<turnstile> E t' : T\\<^sub>1\\<^sub>1;\n        E \\<in> ctxt; t\\<^sub>1 \\<bullet> t\\<^sub>2 = E t;\n        \\<And>T\\<^sub>0.\n           \\<Gamma> \\<turnstile> t : T\\<^sub>0 \\<Longrightarrow>\n           \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> E t' : T\\<^sub>1\\<^sub>2\n 4. \\<And>T\\<^sub>1 \\<Gamma> t\\<^sub>2 T\\<^sub>2 E t t'.\n       \\<lbrakk>TVarB T\\<^sub>1 \\<Colon>\n                \\<Gamma> \\<turnstile> t\\<^sub>2 : T\\<^sub>2;\n        \\<And>E t t'.\n           \\<lbrakk>E \\<in> ctxt; t\\<^sub>2 = E t;\n            \\<And>T\\<^sub>0.\n               TVarB T\\<^sub>1 \\<Colon>\n               \\<Gamma> \\<turnstile> t : T\\<^sub>0 \\<Longrightarrow>\n               TVarB T\\<^sub>1 \\<Colon>\n               \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n           \\<Longrightarrow> TVarB T\\<^sub>1 \\<Colon>\n                             \\<Gamma> \\<turnstile> E t' : T\\<^sub>2;\n        E \\<in> ctxt; (\\<lambda><:T\\<^sub>1. t\\<^sub>2) = E t;\n        \\<And>T\\<^sub>0.\n           \\<Gamma> \\<turnstile> t : T\\<^sub>0 \\<Longrightarrow>\n           \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> E\n          t' : (\\<forall><:T\\<^sub>1. T\\<^sub>2)\n 5. \\<And>\\<Gamma> t\\<^sub>1 T\\<^sub>1\\<^sub>1 T\\<^sub>1\\<^sub>2 T\\<^sub>2 E\n       t t'.\n       \\<lbrakk>\\<Gamma> \\<turnstile> t\\<^sub>1 : (\\<forall><:T\\<^sub>1\\<^sub>1.\n                T\\<^sub>1\\<^sub>2);\n        \\<And>E t t'.\n           \\<lbrakk>E \\<in> ctxt; t\\<^sub>1 = E t;\n            \\<And>T\\<^sub>0.\n               \\<Gamma> \\<turnstile> t : T\\<^sub>0 \\<Longrightarrow>\n               \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n           \\<Longrightarrow> \\<Gamma> \\<turnstile> E\n              t' : (\\<forall><:T\\<^sub>1\\<^sub>1. T\\<^sub>1\\<^sub>2);\n        \\<Gamma> \\<turnstile> T\\<^sub>2 <: T\\<^sub>1\\<^sub>1; E \\<in> ctxt;\n        t\\<^sub>1 \\<bullet>\\<^sub>\\<tau> T\\<^sub>2 = E t;\n        \\<And>T\\<^sub>0.\n           \\<Gamma> \\<turnstile> t : T\\<^sub>0 \\<Longrightarrow>\n           \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> E\n          t' : T\\<^sub>1\\<^sub>2[0 \\<mapsto>\\<^sub>\\<tau> T\\<^sub>2]\\<^sub>\\<tau>\n 6. \\<And>\\<Gamma> t S T E ta t'.\n       \\<lbrakk>\\<Gamma> \\<turnstile> t : S;\n        \\<And>E ta t'.\n           \\<lbrakk>E \\<in> ctxt; t = E ta;\n            \\<And>T\\<^sub>0.\n               \\<Gamma> \\<turnstile> ta : T\\<^sub>0 \\<Longrightarrow>\n               \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n           \\<Longrightarrow> \\<Gamma> \\<turnstile> E t' : S;\n        \\<Gamma> \\<turnstile> S <: T; E \\<in> ctxt; t = E ta;\n        \\<And>T\\<^sub>0.\n           \\<Gamma> \\<turnstile> ta : T\\<^sub>0 \\<Longrightarrow>\n           \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> E t' : T\n 7. \\<And>\\<Gamma> t\\<^sub>1 T\\<^sub>1 p \\<Delta> t\\<^sub>2 T\\<^sub>2 E t\n       t'.\n       \\<lbrakk>\\<Gamma> \\<turnstile> t\\<^sub>1 : T\\<^sub>1;\n        \\<And>E t t'.\n           \\<lbrakk>E \\<in> ctxt; t\\<^sub>1 = E t;\n            \\<And>T\\<^sub>0.\n               \\<Gamma> \\<turnstile> t : T\\<^sub>0 \\<Longrightarrow>\n               \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n           \\<Longrightarrow> \\<Gamma> \\<turnstile> E t' : T\\<^sub>1;\n        \\<turnstile> p : T\\<^sub>1 \\<Rightarrow> \\<Delta>;\n        \\<Delta> @ \\<Gamma> \\<turnstile> t\\<^sub>2 : T\\<^sub>2;\n        \\<And>E t t'.\n           \\<lbrakk>E \\<in> ctxt; t\\<^sub>2 = E t;\n            \\<And>T\\<^sub>0.\n               \\<Delta> @\n               \\<Gamma> \\<turnstile> t : T\\<^sub>0 \\<Longrightarrow>\n               \\<Delta> @ \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n           \\<Longrightarrow> \\<Delta> @\n                             \\<Gamma> \\<turnstile> E t' : T\\<^sub>2;\n        E \\<in> ctxt; (LET p = t\\<^sub>1 IN t\\<^sub>2) = E t;\n        \\<And>T\\<^sub>0.\n           \\<Gamma> \\<turnstile> t : T\\<^sub>0 \\<Longrightarrow>\n           \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> E\n          t' : \\<down>\\<^sub>\\<tau> \\<parallel>\\<Delta>\\<parallel> 0\n                T\\<^sub>2\n 8. \\<And>\\<Gamma> fs fTs E t t'.\n       \\<lbrakk>\\<Gamma> \\<turnstile> fs [:] fTs;\n        \\<And>E\\<^sub>r t t'.\n           \\<lbrakk>E\\<^sub>r \\<in> rctxt; fs = E\\<^sub>r t;\n            \\<And>T\\<^sub>0.\n               \\<Gamma> \\<turnstile> t : T\\<^sub>0 \\<Longrightarrow>\n               \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n           \\<Longrightarrow> \\<Gamma> \\<turnstile> E\\<^sub>r t' [:] fTs;\n        E \\<in> ctxt; Rcd fs = E t;\n        \\<And>T\\<^sub>0.\n           \\<Gamma> \\<turnstile> t : T\\<^sub>0 \\<Longrightarrow>\n           \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> E t' : RcdT fTs\n 9. \\<And>\\<Gamma> t fTs l T E ta t'.\n       \\<lbrakk>\\<Gamma> \\<turnstile> t : RcdT fTs;\n        \\<And>E ta t'.\n           \\<lbrakk>E \\<in> ctxt; t = E ta;\n            \\<And>T\\<^sub>0.\n               \\<Gamma> \\<turnstile> ta : T\\<^sub>0 \\<Longrightarrow>\n               \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n           \\<Longrightarrow> \\<Gamma> \\<turnstile> E t' : RcdT fTs;\n        fTs\\<langle>l\\<rangle>\\<^sub>? = \\<lfloor>T\\<rfloor>; E \\<in> ctxt;\n        t..l = E ta;\n        \\<And>T\\<^sub>0.\n           \\<Gamma> \\<turnstile> ta : T\\<^sub>0 \\<Longrightarrow>\n           \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> E t' : T\n 10. \\<And>\\<Gamma> E\\<^sub>r t t'.\n        \\<lbrakk>\\<Gamma> \\<turnstile>\\<^sub>w\\<^sub>f;\n         E\\<^sub>r \\<in> rctxt; [] = E\\<^sub>r t;\n         \\<And>T\\<^sub>0.\n            \\<Gamma> \\<turnstile> t : T\\<^sub>0 \\<Longrightarrow>\n            \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n        \\<Longrightarrow> \\<Gamma> \\<turnstile> E\\<^sub>r t' [:] []\nA total of 11 subgoals...", "from \\<open>E \\<in> ctxt\\<close>"], ["proof (chain)\npicking this:\n  E \\<in> ctxt", "have \"E = (\\<lambda>t. t)\""], ["proof (prove)\nusing this:\n  E \\<in> ctxt\n\ngoal (1 subgoal):\n 1. E = (\\<lambda>t. t)", "using T_Var"], ["proof (prove)\nusing this:\n  E \\<in> ctxt\n  \\<Gamma> \\<turnstile>\\<^sub>w\\<^sub>f\n  \\<Gamma>\\<langle>i\\<rangle> = \\<lfloor>VarB U\\<rfloor>\n  T = \\<up>\\<^sub>\\<tau> (Suc i) 0 U\n  E \\<in> ctxt\n  Var i = E t\n  \\<Gamma> \\<turnstile> t : ?T\\<^sub>0 \\<Longrightarrow>\n  \\<Gamma> \\<turnstile> t' : ?T\\<^sub>0\n\ngoal (1 subgoal):\n 1. E = (\\<lambda>t. t)", "by cases simp_all"], ["proof (state)\nthis:\n  E = (\\<lambda>t. t)\n\ngoal (11 subgoals):\n 1. \\<And>\\<Gamma> i U T E t t'.\n       \\<lbrakk>\\<Gamma> \\<turnstile>\\<^sub>w\\<^sub>f;\n        \\<Gamma>\\<langle>i\\<rangle> = \\<lfloor>VarB U\\<rfloor>;\n        T = \\<up>\\<^sub>\\<tau> (Suc i) 0 U; E \\<in> ctxt; Var i = E t;\n        \\<And>T\\<^sub>0.\n           \\<Gamma> \\<turnstile> t : T\\<^sub>0 \\<Longrightarrow>\n           \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> E t' : T\n 2. \\<And>T\\<^sub>1 \\<Gamma> t\\<^sub>2 T\\<^sub>2 E t t'.\n       \\<lbrakk>VarB T\\<^sub>1 \\<Colon>\n                \\<Gamma> \\<turnstile> t\\<^sub>2 : T\\<^sub>2;\n        \\<And>E t t'.\n           \\<lbrakk>E \\<in> ctxt; t\\<^sub>2 = E t;\n            \\<And>T\\<^sub>0.\n               VarB T\\<^sub>1 \\<Colon>\n               \\<Gamma> \\<turnstile> t : T\\<^sub>0 \\<Longrightarrow>\n               VarB T\\<^sub>1 \\<Colon>\n               \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n           \\<Longrightarrow> VarB T\\<^sub>1 \\<Colon>\n                             \\<Gamma> \\<turnstile> E t' : T\\<^sub>2;\n        E \\<in> ctxt; (\\<lambda>:T\\<^sub>1. t\\<^sub>2) = E t;\n        \\<And>T\\<^sub>0.\n           \\<Gamma> \\<turnstile> t : T\\<^sub>0 \\<Longrightarrow>\n           \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> E\n          t' : T\\<^sub>1 \\<rightarrow> \\<down>\\<^sub>\\<tau> 1 0 T\\<^sub>2\n 3. \\<And>\\<Gamma> t\\<^sub>1 T\\<^sub>1\\<^sub>1 T\\<^sub>1\\<^sub>2 t\\<^sub>2 E\n       t t'.\n       \\<lbrakk>\\<Gamma> \\<turnstile> t\\<^sub>1 : T\\<^sub>1\\<^sub>1 \\<rightarrow>\n            T\\<^sub>1\\<^sub>2;\n        \\<And>E t t'.\n           \\<lbrakk>E \\<in> ctxt; t\\<^sub>1 = E t;\n            \\<And>T\\<^sub>0.\n               \\<Gamma> \\<turnstile> t : T\\<^sub>0 \\<Longrightarrow>\n               \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n           \\<Longrightarrow> \\<Gamma> \\<turnstile> E\n              t' : T\\<^sub>1\\<^sub>1 \\<rightarrow> T\\<^sub>1\\<^sub>2;\n        \\<Gamma> \\<turnstile> t\\<^sub>2 : T\\<^sub>1\\<^sub>1;\n        \\<And>E t t'.\n           \\<lbrakk>E \\<in> ctxt; t\\<^sub>2 = E t;\n            \\<And>T\\<^sub>0.\n               \\<Gamma> \\<turnstile> t : T\\<^sub>0 \\<Longrightarrow>\n               \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n           \\<Longrightarrow> \\<Gamma> \\<turnstile> E t' : T\\<^sub>1\\<^sub>1;\n        E \\<in> ctxt; t\\<^sub>1 \\<bullet> t\\<^sub>2 = E t;\n        \\<And>T\\<^sub>0.\n           \\<Gamma> \\<turnstile> t : T\\<^sub>0 \\<Longrightarrow>\n           \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> E t' : T\\<^sub>1\\<^sub>2\n 4. \\<And>T\\<^sub>1 \\<Gamma> t\\<^sub>2 T\\<^sub>2 E t t'.\n       \\<lbrakk>TVarB T\\<^sub>1 \\<Colon>\n                \\<Gamma> \\<turnstile> t\\<^sub>2 : T\\<^sub>2;\n        \\<And>E t t'.\n           \\<lbrakk>E \\<in> ctxt; t\\<^sub>2 = E t;\n            \\<And>T\\<^sub>0.\n               TVarB T\\<^sub>1 \\<Colon>\n               \\<Gamma> \\<turnstile> t : T\\<^sub>0 \\<Longrightarrow>\n               TVarB T\\<^sub>1 \\<Colon>\n               \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n           \\<Longrightarrow> TVarB T\\<^sub>1 \\<Colon>\n                             \\<Gamma> \\<turnstile> E t' : T\\<^sub>2;\n        E \\<in> ctxt; (\\<lambda><:T\\<^sub>1. t\\<^sub>2) = E t;\n        \\<And>T\\<^sub>0.\n           \\<Gamma> \\<turnstile> t : T\\<^sub>0 \\<Longrightarrow>\n           \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> E\n          t' : (\\<forall><:T\\<^sub>1. T\\<^sub>2)\n 5. \\<And>\\<Gamma> t\\<^sub>1 T\\<^sub>1\\<^sub>1 T\\<^sub>1\\<^sub>2 T\\<^sub>2 E\n       t t'.\n       \\<lbrakk>\\<Gamma> \\<turnstile> t\\<^sub>1 : (\\<forall><:T\\<^sub>1\\<^sub>1.\n                T\\<^sub>1\\<^sub>2);\n        \\<And>E t t'.\n           \\<lbrakk>E \\<in> ctxt; t\\<^sub>1 = E t;\n            \\<And>T\\<^sub>0.\n               \\<Gamma> \\<turnstile> t : T\\<^sub>0 \\<Longrightarrow>\n               \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n           \\<Longrightarrow> \\<Gamma> \\<turnstile> E\n              t' : (\\<forall><:T\\<^sub>1\\<^sub>1. T\\<^sub>1\\<^sub>2);\n        \\<Gamma> \\<turnstile> T\\<^sub>2 <: T\\<^sub>1\\<^sub>1; E \\<in> ctxt;\n        t\\<^sub>1 \\<bullet>\\<^sub>\\<tau> T\\<^sub>2 = E t;\n        \\<And>T\\<^sub>0.\n           \\<Gamma> \\<turnstile> t : T\\<^sub>0 \\<Longrightarrow>\n           \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> E\n          t' : T\\<^sub>1\\<^sub>2[0 \\<mapsto>\\<^sub>\\<tau> T\\<^sub>2]\\<^sub>\\<tau>\n 6. \\<And>\\<Gamma> t S T E ta t'.\n       \\<lbrakk>\\<Gamma> \\<turnstile> t : S;\n        \\<And>E ta t'.\n           \\<lbrakk>E \\<in> ctxt; t = E ta;\n            \\<And>T\\<^sub>0.\n               \\<Gamma> \\<turnstile> ta : T\\<^sub>0 \\<Longrightarrow>\n               \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n           \\<Longrightarrow> \\<Gamma> \\<turnstile> E t' : S;\n        \\<Gamma> \\<turnstile> S <: T; E \\<in> ctxt; t = E ta;\n        \\<And>T\\<^sub>0.\n           \\<Gamma> \\<turnstile> ta : T\\<^sub>0 \\<Longrightarrow>\n           \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> E t' : T\n 7. \\<And>\\<Gamma> t\\<^sub>1 T\\<^sub>1 p \\<Delta> t\\<^sub>2 T\\<^sub>2 E t\n       t'.\n       \\<lbrakk>\\<Gamma> \\<turnstile> t\\<^sub>1 : T\\<^sub>1;\n        \\<And>E t t'.\n           \\<lbrakk>E \\<in> ctxt; t\\<^sub>1 = E t;\n            \\<And>T\\<^sub>0.\n               \\<Gamma> \\<turnstile> t : T\\<^sub>0 \\<Longrightarrow>\n               \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n           \\<Longrightarrow> \\<Gamma> \\<turnstile> E t' : T\\<^sub>1;\n        \\<turnstile> p : T\\<^sub>1 \\<Rightarrow> \\<Delta>;\n        \\<Delta> @ \\<Gamma> \\<turnstile> t\\<^sub>2 : T\\<^sub>2;\n        \\<And>E t t'.\n           \\<lbrakk>E \\<in> ctxt; t\\<^sub>2 = E t;\n            \\<And>T\\<^sub>0.\n               \\<Delta> @\n               \\<Gamma> \\<turnstile> t : T\\<^sub>0 \\<Longrightarrow>\n               \\<Delta> @ \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n           \\<Longrightarrow> \\<Delta> @\n                             \\<Gamma> \\<turnstile> E t' : T\\<^sub>2;\n        E \\<in> ctxt; (LET p = t\\<^sub>1 IN t\\<^sub>2) = E t;\n        \\<And>T\\<^sub>0.\n           \\<Gamma> \\<turnstile> t : T\\<^sub>0 \\<Longrightarrow>\n           \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> E\n          t' : \\<down>\\<^sub>\\<tau> \\<parallel>\\<Delta>\\<parallel> 0\n                T\\<^sub>2\n 8. \\<And>\\<Gamma> fs fTs E t t'.\n       \\<lbrakk>\\<Gamma> \\<turnstile> fs [:] fTs;\n        \\<And>E\\<^sub>r t t'.\n           \\<lbrakk>E\\<^sub>r \\<in> rctxt; fs = E\\<^sub>r t;\n            \\<And>T\\<^sub>0.\n               \\<Gamma> \\<turnstile> t : T\\<^sub>0 \\<Longrightarrow>\n               \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n           \\<Longrightarrow> \\<Gamma> \\<turnstile> E\\<^sub>r t' [:] fTs;\n        E \\<in> ctxt; Rcd fs = E t;\n        \\<And>T\\<^sub>0.\n           \\<Gamma> \\<turnstile> t : T\\<^sub>0 \\<Longrightarrow>\n           \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> E t' : RcdT fTs\n 9. \\<And>\\<Gamma> t fTs l T E ta t'.\n       \\<lbrakk>\\<Gamma> \\<turnstile> t : RcdT fTs;\n        \\<And>E ta t'.\n           \\<lbrakk>E \\<in> ctxt; t = E ta;\n            \\<And>T\\<^sub>0.\n               \\<Gamma> \\<turnstile> ta : T\\<^sub>0 \\<Longrightarrow>\n               \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n           \\<Longrightarrow> \\<Gamma> \\<turnstile> E t' : RcdT fTs;\n        fTs\\<langle>l\\<rangle>\\<^sub>? = \\<lfloor>T\\<rfloor>; E \\<in> ctxt;\n        t..l = E ta;\n        \\<And>T\\<^sub>0.\n           \\<Gamma> \\<turnstile> ta : T\\<^sub>0 \\<Longrightarrow>\n           \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> E t' : T\n 10. \\<And>\\<Gamma> E\\<^sub>r t t'.\n        \\<lbrakk>\\<Gamma> \\<turnstile>\\<^sub>w\\<^sub>f;\n         E\\<^sub>r \\<in> rctxt; [] = E\\<^sub>r t;\n         \\<And>T\\<^sub>0.\n            \\<Gamma> \\<turnstile> t : T\\<^sub>0 \\<Longrightarrow>\n            \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n        \\<Longrightarrow> \\<Gamma> \\<turnstile> E\\<^sub>r t' [:] []\nA total of 11 subgoals...", "with T_Var"], ["proof (chain)\npicking this:\n  \\<Gamma> \\<turnstile>\\<^sub>w\\<^sub>f\n  \\<Gamma>\\<langle>i\\<rangle> = \\<lfloor>VarB U\\<rfloor>\n  T = \\<up>\\<^sub>\\<tau> (Suc i) 0 U\n  E \\<in> ctxt\n  Var i = E t\n  \\<Gamma> \\<turnstile> t : ?T\\<^sub>0 \\<Longrightarrow>\n  \\<Gamma> \\<turnstile> t' : ?T\\<^sub>0\n  E = (\\<lambda>t. t)", "show ?case"], ["proof (prove)\nusing this:\n  \\<Gamma> \\<turnstile>\\<^sub>w\\<^sub>f\n  \\<Gamma>\\<langle>i\\<rangle> = \\<lfloor>VarB U\\<rfloor>\n  T = \\<up>\\<^sub>\\<tau> (Suc i) 0 U\n  E \\<in> ctxt\n  Var i = E t\n  \\<Gamma> \\<turnstile> t : ?T\\<^sub>0 \\<Longrightarrow>\n  \\<Gamma> \\<turnstile> t' : ?T\\<^sub>0\n  E = (\\<lambda>t. t)\n\ngoal (1 subgoal):\n 1. \\<Gamma> \\<turnstile> E t' : T", "by (blast intro: typing_typings.intros)"], ["proof (state)\nthis:\n  \\<Gamma> \\<turnstile> E t' : T\n\ngoal (10 subgoals):\n 1. \\<And>T\\<^sub>1 \\<Gamma> t\\<^sub>2 T\\<^sub>2 E t t'.\n       \\<lbrakk>VarB T\\<^sub>1 \\<Colon>\n                \\<Gamma> \\<turnstile> t\\<^sub>2 : T\\<^sub>2;\n        \\<And>E t t'.\n           \\<lbrakk>E \\<in> ctxt; t\\<^sub>2 = E t;\n            \\<And>T\\<^sub>0.\n               VarB T\\<^sub>1 \\<Colon>\n               \\<Gamma> \\<turnstile> t : T\\<^sub>0 \\<Longrightarrow>\n               VarB T\\<^sub>1 \\<Colon>\n               \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n           \\<Longrightarrow> VarB T\\<^sub>1 \\<Colon>\n                             \\<Gamma> \\<turnstile> E t' : T\\<^sub>2;\n        E \\<in> ctxt; (\\<lambda>:T\\<^sub>1. t\\<^sub>2) = E t;\n        \\<And>T\\<^sub>0.\n           \\<Gamma> \\<turnstile> t : T\\<^sub>0 \\<Longrightarrow>\n           \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> E\n          t' : T\\<^sub>1 \\<rightarrow> \\<down>\\<^sub>\\<tau> 1 0 T\\<^sub>2\n 2. \\<And>\\<Gamma> t\\<^sub>1 T\\<^sub>1\\<^sub>1 T\\<^sub>1\\<^sub>2 t\\<^sub>2 E\n       t t'.\n       \\<lbrakk>\\<Gamma> \\<turnstile> t\\<^sub>1 : T\\<^sub>1\\<^sub>1 \\<rightarrow>\n            T\\<^sub>1\\<^sub>2;\n        \\<And>E t t'.\n           \\<lbrakk>E \\<in> ctxt; t\\<^sub>1 = E t;\n            \\<And>T\\<^sub>0.\n               \\<Gamma> \\<turnstile> t : T\\<^sub>0 \\<Longrightarrow>\n               \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n           \\<Longrightarrow> \\<Gamma> \\<turnstile> E\n              t' : T\\<^sub>1\\<^sub>1 \\<rightarrow> T\\<^sub>1\\<^sub>2;\n        \\<Gamma> \\<turnstile> t\\<^sub>2 : T\\<^sub>1\\<^sub>1;\n        \\<And>E t t'.\n           \\<lbrakk>E \\<in> ctxt; t\\<^sub>2 = E t;\n            \\<And>T\\<^sub>0.\n               \\<Gamma> \\<turnstile> t : T\\<^sub>0 \\<Longrightarrow>\n               \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n           \\<Longrightarrow> \\<Gamma> \\<turnstile> E t' : T\\<^sub>1\\<^sub>1;\n        E \\<in> ctxt; t\\<^sub>1 \\<bullet> t\\<^sub>2 = E t;\n        \\<And>T\\<^sub>0.\n           \\<Gamma> \\<turnstile> t : T\\<^sub>0 \\<Longrightarrow>\n           \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> E t' : T\\<^sub>1\\<^sub>2\n 3. \\<And>T\\<^sub>1 \\<Gamma> t\\<^sub>2 T\\<^sub>2 E t t'.\n       \\<lbrakk>TVarB T\\<^sub>1 \\<Colon>\n                \\<Gamma> \\<turnstile> t\\<^sub>2 : T\\<^sub>2;\n        \\<And>E t t'.\n           \\<lbrakk>E \\<in> ctxt; t\\<^sub>2 = E t;\n            \\<And>T\\<^sub>0.\n               TVarB T\\<^sub>1 \\<Colon>\n               \\<Gamma> \\<turnstile> t : T\\<^sub>0 \\<Longrightarrow>\n               TVarB T\\<^sub>1 \\<Colon>\n               \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n           \\<Longrightarrow> TVarB T\\<^sub>1 \\<Colon>\n                             \\<Gamma> \\<turnstile> E t' : T\\<^sub>2;\n        E \\<in> ctxt; (\\<lambda><:T\\<^sub>1. t\\<^sub>2) = E t;\n        \\<And>T\\<^sub>0.\n           \\<Gamma> \\<turnstile> t : T\\<^sub>0 \\<Longrightarrow>\n           \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> E\n          t' : (\\<forall><:T\\<^sub>1. T\\<^sub>2)\n 4. \\<And>\\<Gamma> t\\<^sub>1 T\\<^sub>1\\<^sub>1 T\\<^sub>1\\<^sub>2 T\\<^sub>2 E\n       t t'.\n       \\<lbrakk>\\<Gamma> \\<turnstile> t\\<^sub>1 : (\\<forall><:T\\<^sub>1\\<^sub>1.\n                T\\<^sub>1\\<^sub>2);\n        \\<And>E t t'.\n           \\<lbrakk>E \\<in> ctxt; t\\<^sub>1 = E t;\n            \\<And>T\\<^sub>0.\n               \\<Gamma> \\<turnstile> t : T\\<^sub>0 \\<Longrightarrow>\n               \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n           \\<Longrightarrow> \\<Gamma> \\<turnstile> E\n              t' : (\\<forall><:T\\<^sub>1\\<^sub>1. T\\<^sub>1\\<^sub>2);\n        \\<Gamma> \\<turnstile> T\\<^sub>2 <: T\\<^sub>1\\<^sub>1; E \\<in> ctxt;\n        t\\<^sub>1 \\<bullet>\\<^sub>\\<tau> T\\<^sub>2 = E t;\n        \\<And>T\\<^sub>0.\n           \\<Gamma> \\<turnstile> t : T\\<^sub>0 \\<Longrightarrow>\n           \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> E\n          t' : T\\<^sub>1\\<^sub>2[0 \\<mapsto>\\<^sub>\\<tau> T\\<^sub>2]\\<^sub>\\<tau>\n 5. \\<And>\\<Gamma> t S T E ta t'.\n       \\<lbrakk>\\<Gamma> \\<turnstile> t : S;\n        \\<And>E ta t'.\n           \\<lbrakk>E \\<in> ctxt; t = E ta;\n            \\<And>T\\<^sub>0.\n               \\<Gamma> \\<turnstile> ta : T\\<^sub>0 \\<Longrightarrow>\n               \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n           \\<Longrightarrow> \\<Gamma> \\<turnstile> E t' : S;\n        \\<Gamma> \\<turnstile> S <: T; E \\<in> ctxt; t = E ta;\n        \\<And>T\\<^sub>0.\n           \\<Gamma> \\<turnstile> ta : T\\<^sub>0 \\<Longrightarrow>\n           \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> E t' : T\n 6. \\<And>\\<Gamma> t\\<^sub>1 T\\<^sub>1 p \\<Delta> t\\<^sub>2 T\\<^sub>2 E t\n       t'.\n       \\<lbrakk>\\<Gamma> \\<turnstile> t\\<^sub>1 : T\\<^sub>1;\n        \\<And>E t t'.\n           \\<lbrakk>E \\<in> ctxt; t\\<^sub>1 = E t;\n            \\<And>T\\<^sub>0.\n               \\<Gamma> \\<turnstile> t : T\\<^sub>0 \\<Longrightarrow>\n               \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n           \\<Longrightarrow> \\<Gamma> \\<turnstile> E t' : T\\<^sub>1;\n        \\<turnstile> p : T\\<^sub>1 \\<Rightarrow> \\<Delta>;\n        \\<Delta> @ \\<Gamma> \\<turnstile> t\\<^sub>2 : T\\<^sub>2;\n        \\<And>E t t'.\n           \\<lbrakk>E \\<in> ctxt; t\\<^sub>2 = E t;\n            \\<And>T\\<^sub>0.\n               \\<Delta> @\n               \\<Gamma> \\<turnstile> t : T\\<^sub>0 \\<Longrightarrow>\n               \\<Delta> @ \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n           \\<Longrightarrow> \\<Delta> @\n                             \\<Gamma> \\<turnstile> E t' : T\\<^sub>2;\n        E \\<in> ctxt; (LET p = t\\<^sub>1 IN t\\<^sub>2) = E t;\n        \\<And>T\\<^sub>0.\n           \\<Gamma> \\<turnstile> t : T\\<^sub>0 \\<Longrightarrow>\n           \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> E\n          t' : \\<down>\\<^sub>\\<tau> \\<parallel>\\<Delta>\\<parallel> 0\n                T\\<^sub>2\n 7. \\<And>\\<Gamma> fs fTs E t t'.\n       \\<lbrakk>\\<Gamma> \\<turnstile> fs [:] fTs;\n        \\<And>E\\<^sub>r t t'.\n           \\<lbrakk>E\\<^sub>r \\<in> rctxt; fs = E\\<^sub>r t;\n            \\<And>T\\<^sub>0.\n               \\<Gamma> \\<turnstile> t : T\\<^sub>0 \\<Longrightarrow>\n               \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n           \\<Longrightarrow> \\<Gamma> \\<turnstile> E\\<^sub>r t' [:] fTs;\n        E \\<in> ctxt; Rcd fs = E t;\n        \\<And>T\\<^sub>0.\n           \\<Gamma> \\<turnstile> t : T\\<^sub>0 \\<Longrightarrow>\n           \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> E t' : RcdT fTs\n 8. \\<And>\\<Gamma> t fTs l T E ta t'.\n       \\<lbrakk>\\<Gamma> \\<turnstile> t : RcdT fTs;\n        \\<And>E ta t'.\n           \\<lbrakk>E \\<in> ctxt; t = E ta;\n            \\<And>T\\<^sub>0.\n               \\<Gamma> \\<turnstile> ta : T\\<^sub>0 \\<Longrightarrow>\n               \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n           \\<Longrightarrow> \\<Gamma> \\<turnstile> E t' : RcdT fTs;\n        fTs\\<langle>l\\<rangle>\\<^sub>? = \\<lfloor>T\\<rfloor>; E \\<in> ctxt;\n        t..l = E ta;\n        \\<And>T\\<^sub>0.\n           \\<Gamma> \\<turnstile> ta : T\\<^sub>0 \\<Longrightarrow>\n           \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> E t' : T\n 9. \\<And>\\<Gamma> E\\<^sub>r t t'.\n       \\<lbrakk>\\<Gamma> \\<turnstile>\\<^sub>w\\<^sub>f;\n        E\\<^sub>r \\<in> rctxt; [] = E\\<^sub>r t;\n        \\<And>T\\<^sub>0.\n           \\<Gamma> \\<turnstile> t : T\\<^sub>0 \\<Longrightarrow>\n           \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> E\\<^sub>r t' [:] []\n 10. \\<And>\\<Gamma> t T fs fTs l E\\<^sub>r ta t'.\n        \\<lbrakk>\\<Gamma> \\<turnstile> t : T;\n         \\<And>E ta t'.\n            \\<lbrakk>E \\<in> ctxt; t = E ta;\n             \\<And>T\\<^sub>0.\n                \\<Gamma> \\<turnstile> ta : T\\<^sub>0 \\<Longrightarrow>\n                \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n            \\<Longrightarrow> \\<Gamma> \\<turnstile> E t' : T;\n         \\<Gamma> \\<turnstile> fs [:] fTs;\n         \\<And>E\\<^sub>r t t'.\n            \\<lbrakk>E\\<^sub>r \\<in> rctxt; fs = E\\<^sub>r t;\n             \\<And>T\\<^sub>0.\n                \\<Gamma> \\<turnstile> t : T\\<^sub>0 \\<Longrightarrow>\n                \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n            \\<Longrightarrow> \\<Gamma> \\<turnstile> E\\<^sub>r t' [:] fTs;\n         fs\\<langle>l\\<rangle>\\<^sub>? = \\<bottom>; E\\<^sub>r \\<in> rctxt;\n         (l, t) \\<Colon> fs = E\\<^sub>r ta;\n         \\<And>T\\<^sub>0.\n            \\<Gamma> \\<turnstile> ta : T\\<^sub>0 \\<Longrightarrow>\n            \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n        \\<Longrightarrow> \\<Gamma> \\<turnstile> E\\<^sub>r\n           t' [:] (l, T) \\<Colon>\n                          fTs", "next"], ["proof (state)\ngoal (10 subgoals):\n 1. \\<And>T\\<^sub>1 \\<Gamma> t\\<^sub>2 T\\<^sub>2 E t t'.\n       \\<lbrakk>VarB T\\<^sub>1 \\<Colon>\n                \\<Gamma> \\<turnstile> t\\<^sub>2 : T\\<^sub>2;\n        \\<And>E t t'.\n           \\<lbrakk>E \\<in> ctxt; t\\<^sub>2 = E t;\n            \\<And>T\\<^sub>0.\n               VarB T\\<^sub>1 \\<Colon>\n               \\<Gamma> \\<turnstile> t : T\\<^sub>0 \\<Longrightarrow>\n               VarB T\\<^sub>1 \\<Colon>\n               \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n           \\<Longrightarrow> VarB T\\<^sub>1 \\<Colon>\n                             \\<Gamma> \\<turnstile> E t' : T\\<^sub>2;\n        E \\<in> ctxt; (\\<lambda>:T\\<^sub>1. t\\<^sub>2) = E t;\n        \\<And>T\\<^sub>0.\n           \\<Gamma> \\<turnstile> t : T\\<^sub>0 \\<Longrightarrow>\n           \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> E\n          t' : T\\<^sub>1 \\<rightarrow> \\<down>\\<^sub>\\<tau> 1 0 T\\<^sub>2\n 2. \\<And>\\<Gamma> t\\<^sub>1 T\\<^sub>1\\<^sub>1 T\\<^sub>1\\<^sub>2 t\\<^sub>2 E\n       t t'.\n       \\<lbrakk>\\<Gamma> \\<turnstile> t\\<^sub>1 : T\\<^sub>1\\<^sub>1 \\<rightarrow>\n            T\\<^sub>1\\<^sub>2;\n        \\<And>E t t'.\n           \\<lbrakk>E \\<in> ctxt; t\\<^sub>1 = E t;\n            \\<And>T\\<^sub>0.\n               \\<Gamma> \\<turnstile> t : T\\<^sub>0 \\<Longrightarrow>\n               \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n           \\<Longrightarrow> \\<Gamma> \\<turnstile> E\n              t' : T\\<^sub>1\\<^sub>1 \\<rightarrow> T\\<^sub>1\\<^sub>2;\n        \\<Gamma> \\<turnstile> t\\<^sub>2 : T\\<^sub>1\\<^sub>1;\n        \\<And>E t t'.\n           \\<lbrakk>E \\<in> ctxt; t\\<^sub>2 = E t;\n            \\<And>T\\<^sub>0.\n               \\<Gamma> \\<turnstile> t : T\\<^sub>0 \\<Longrightarrow>\n               \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n           \\<Longrightarrow> \\<Gamma> \\<turnstile> E t' : T\\<^sub>1\\<^sub>1;\n        E \\<in> ctxt; t\\<^sub>1 \\<bullet> t\\<^sub>2 = E t;\n        \\<And>T\\<^sub>0.\n           \\<Gamma> \\<turnstile> t : T\\<^sub>0 \\<Longrightarrow>\n           \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> E t' : T\\<^sub>1\\<^sub>2\n 3. \\<And>T\\<^sub>1 \\<Gamma> t\\<^sub>2 T\\<^sub>2 E t t'.\n       \\<lbrakk>TVarB T\\<^sub>1 \\<Colon>\n                \\<Gamma> \\<turnstile> t\\<^sub>2 : T\\<^sub>2;\n        \\<And>E t t'.\n           \\<lbrakk>E \\<in> ctxt; t\\<^sub>2 = E t;\n            \\<And>T\\<^sub>0.\n               TVarB T\\<^sub>1 \\<Colon>\n               \\<Gamma> \\<turnstile> t : T\\<^sub>0 \\<Longrightarrow>\n               TVarB T\\<^sub>1 \\<Colon>\n               \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n           \\<Longrightarrow> TVarB T\\<^sub>1 \\<Colon>\n                             \\<Gamma> \\<turnstile> E t' : T\\<^sub>2;\n        E \\<in> ctxt; (\\<lambda><:T\\<^sub>1. t\\<^sub>2) = E t;\n        \\<And>T\\<^sub>0.\n           \\<Gamma> \\<turnstile> t : T\\<^sub>0 \\<Longrightarrow>\n           \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> E\n          t' : (\\<forall><:T\\<^sub>1. T\\<^sub>2)\n 4. \\<And>\\<Gamma> t\\<^sub>1 T\\<^sub>1\\<^sub>1 T\\<^sub>1\\<^sub>2 T\\<^sub>2 E\n       t t'.\n       \\<lbrakk>\\<Gamma> \\<turnstile> t\\<^sub>1 : (\\<forall><:T\\<^sub>1\\<^sub>1.\n                T\\<^sub>1\\<^sub>2);\n        \\<And>E t t'.\n           \\<lbrakk>E \\<in> ctxt; t\\<^sub>1 = E t;\n            \\<And>T\\<^sub>0.\n               \\<Gamma> \\<turnstile> t : T\\<^sub>0 \\<Longrightarrow>\n               \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n           \\<Longrightarrow> \\<Gamma> \\<turnstile> E\n              t' : (\\<forall><:T\\<^sub>1\\<^sub>1. T\\<^sub>1\\<^sub>2);\n        \\<Gamma> \\<turnstile> T\\<^sub>2 <: T\\<^sub>1\\<^sub>1; E \\<in> ctxt;\n        t\\<^sub>1 \\<bullet>\\<^sub>\\<tau> T\\<^sub>2 = E t;\n        \\<And>T\\<^sub>0.\n           \\<Gamma> \\<turnstile> t : T\\<^sub>0 \\<Longrightarrow>\n           \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> E\n          t' : T\\<^sub>1\\<^sub>2[0 \\<mapsto>\\<^sub>\\<tau> T\\<^sub>2]\\<^sub>\\<tau>\n 5. \\<And>\\<Gamma> t S T E ta t'.\n       \\<lbrakk>\\<Gamma> \\<turnstile> t : S;\n        \\<And>E ta t'.\n           \\<lbrakk>E \\<in> ctxt; t = E ta;\n            \\<And>T\\<^sub>0.\n               \\<Gamma> \\<turnstile> ta : T\\<^sub>0 \\<Longrightarrow>\n               \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n           \\<Longrightarrow> \\<Gamma> \\<turnstile> E t' : S;\n        \\<Gamma> \\<turnstile> S <: T; E \\<in> ctxt; t = E ta;\n        \\<And>T\\<^sub>0.\n           \\<Gamma> \\<turnstile> ta : T\\<^sub>0 \\<Longrightarrow>\n           \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> E t' : T\n 6. \\<And>\\<Gamma> t\\<^sub>1 T\\<^sub>1 p \\<Delta> t\\<^sub>2 T\\<^sub>2 E t\n       t'.\n       \\<lbrakk>\\<Gamma> \\<turnstile> t\\<^sub>1 : T\\<^sub>1;\n        \\<And>E t t'.\n           \\<lbrakk>E \\<in> ctxt; t\\<^sub>1 = E t;\n            \\<And>T\\<^sub>0.\n               \\<Gamma> \\<turnstile> t : T\\<^sub>0 \\<Longrightarrow>\n               \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n           \\<Longrightarrow> \\<Gamma> \\<turnstile> E t' : T\\<^sub>1;\n        \\<turnstile> p : T\\<^sub>1 \\<Rightarrow> \\<Delta>;\n        \\<Delta> @ \\<Gamma> \\<turnstile> t\\<^sub>2 : T\\<^sub>2;\n        \\<And>E t t'.\n           \\<lbrakk>E \\<in> ctxt; t\\<^sub>2 = E t;\n            \\<And>T\\<^sub>0.\n               \\<Delta> @\n               \\<Gamma> \\<turnstile> t : T\\<^sub>0 \\<Longrightarrow>\n               \\<Delta> @ \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n           \\<Longrightarrow> \\<Delta> @\n                             \\<Gamma> \\<turnstile> E t' : T\\<^sub>2;\n        E \\<in> ctxt; (LET p = t\\<^sub>1 IN t\\<^sub>2) = E t;\n        \\<And>T\\<^sub>0.\n           \\<Gamma> \\<turnstile> t : T\\<^sub>0 \\<Longrightarrow>\n           \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> E\n          t' : \\<down>\\<^sub>\\<tau> \\<parallel>\\<Delta>\\<parallel> 0\n                T\\<^sub>2\n 7. \\<And>\\<Gamma> fs fTs E t t'.\n       \\<lbrakk>\\<Gamma> \\<turnstile> fs [:] fTs;\n        \\<And>E\\<^sub>r t t'.\n           \\<lbrakk>E\\<^sub>r \\<in> rctxt; fs = E\\<^sub>r t;\n            \\<And>T\\<^sub>0.\n               \\<Gamma> \\<turnstile> t : T\\<^sub>0 \\<Longrightarrow>\n               \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n           \\<Longrightarrow> \\<Gamma> \\<turnstile> E\\<^sub>r t' [:] fTs;\n        E \\<in> ctxt; Rcd fs = E t;\n        \\<And>T\\<^sub>0.\n           \\<Gamma> \\<turnstile> t : T\\<^sub>0 \\<Longrightarrow>\n           \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> E t' : RcdT fTs\n 8. \\<And>\\<Gamma> t fTs l T E ta t'.\n       \\<lbrakk>\\<Gamma> \\<turnstile> t : RcdT fTs;\n        \\<And>E ta t'.\n           \\<lbrakk>E \\<in> ctxt; t = E ta;\n            \\<And>T\\<^sub>0.\n               \\<Gamma> \\<turnstile> ta : T\\<^sub>0 \\<Longrightarrow>\n               \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n           \\<Longrightarrow> \\<Gamma> \\<turnstile> E t' : RcdT fTs;\n        fTs\\<langle>l\\<rangle>\\<^sub>? = \\<lfloor>T\\<rfloor>; E \\<in> ctxt;\n        t..l = E ta;\n        \\<And>T\\<^sub>0.\n           \\<Gamma> \\<turnstile> ta : T\\<^sub>0 \\<Longrightarrow>\n           \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> E t' : T\n 9. \\<And>\\<Gamma> E\\<^sub>r t t'.\n       \\<lbrakk>\\<Gamma> \\<turnstile>\\<^sub>w\\<^sub>f;\n        E\\<^sub>r \\<in> rctxt; [] = E\\<^sub>r t;\n        \\<And>T\\<^sub>0.\n           \\<Gamma> \\<turnstile> t : T\\<^sub>0 \\<Longrightarrow>\n           \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> E\\<^sub>r t' [:] []\n 10. \\<And>\\<Gamma> t T fs fTs l E\\<^sub>r ta t'.\n        \\<lbrakk>\\<Gamma> \\<turnstile> t : T;\n         \\<And>E ta t'.\n            \\<lbrakk>E \\<in> ctxt; t = E ta;\n             \\<And>T\\<^sub>0.\n                \\<Gamma> \\<turnstile> ta : T\\<^sub>0 \\<Longrightarrow>\n                \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n            \\<Longrightarrow> \\<Gamma> \\<turnstile> E t' : T;\n         \\<Gamma> \\<turnstile> fs [:] fTs;\n         \\<And>E\\<^sub>r t t'.\n            \\<lbrakk>E\\<^sub>r \\<in> rctxt; fs = E\\<^sub>r t;\n             \\<And>T\\<^sub>0.\n                \\<Gamma> \\<turnstile> t : T\\<^sub>0 \\<Longrightarrow>\n                \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n            \\<Longrightarrow> \\<Gamma> \\<turnstile> E\\<^sub>r t' [:] fTs;\n         fs\\<langle>l\\<rangle>\\<^sub>? = \\<bottom>; E\\<^sub>r \\<in> rctxt;\n         (l, t) \\<Colon> fs = E\\<^sub>r ta;\n         \\<And>T\\<^sub>0.\n            \\<Gamma> \\<turnstile> ta : T\\<^sub>0 \\<Longrightarrow>\n            \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n        \\<Longrightarrow> \\<Gamma> \\<turnstile> E\\<^sub>r\n           t' [:] (l, T) \\<Colon>\n                          fTs", "case (T_Abs T\\<^sub>1 T\\<^sub>2 \\<Gamma> t\\<^sub>2 E t t')"], ["proof (state)\nthis:\n  VarB T\\<^sub>1 \\<Colon> T\\<^sub>2 \\<turnstile> \\<Gamma> : t\\<^sub>2\n  \\<lbrakk>?E \\<in> ctxt; \\<Gamma> = ?E ?t;\n   \\<And>T\\<^sub>0.\n      VarB T\\<^sub>1 \\<Colon>\n      T\\<^sub>2 \\<turnstile> ?t : T\\<^sub>0 \\<Longrightarrow>\n      VarB T\\<^sub>1 \\<Colon>\n      T\\<^sub>2 \\<turnstile> ?t' : T\\<^sub>0\\<rbrakk>\n  \\<Longrightarrow> VarB T\\<^sub>1 \\<Colon>\n                    T\\<^sub>2 \\<turnstile> ?E ?t' : t\\<^sub>2\n  E \\<in> ctxt\n  (\\<lambda>:T\\<^sub>1. \\<Gamma>) = E t\n  T\\<^sub>2 \\<turnstile> t : ?T\\<^sub>0 \\<Longrightarrow>\n  T\\<^sub>2 \\<turnstile> t' : ?T\\<^sub>0\n\ngoal (10 subgoals):\n 1. \\<And>T\\<^sub>1 \\<Gamma> t\\<^sub>2 T\\<^sub>2 E t t'.\n       \\<lbrakk>VarB T\\<^sub>1 \\<Colon>\n                \\<Gamma> \\<turnstile> t\\<^sub>2 : T\\<^sub>2;\n        \\<And>E t t'.\n           \\<lbrakk>E \\<in> ctxt; t\\<^sub>2 = E t;\n            \\<And>T\\<^sub>0.\n               VarB T\\<^sub>1 \\<Colon>\n               \\<Gamma> \\<turnstile> t : T\\<^sub>0 \\<Longrightarrow>\n               VarB T\\<^sub>1 \\<Colon>\n               \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n           \\<Longrightarrow> VarB T\\<^sub>1 \\<Colon>\n                             \\<Gamma> \\<turnstile> E t' : T\\<^sub>2;\n        E \\<in> ctxt; (\\<lambda>:T\\<^sub>1. t\\<^sub>2) = E t;\n        \\<And>T\\<^sub>0.\n           \\<Gamma> \\<turnstile> t : T\\<^sub>0 \\<Longrightarrow>\n           \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> E\n          t' : T\\<^sub>1 \\<rightarrow> \\<down>\\<^sub>\\<tau> 1 0 T\\<^sub>2\n 2. \\<And>\\<Gamma> t\\<^sub>1 T\\<^sub>1\\<^sub>1 T\\<^sub>1\\<^sub>2 t\\<^sub>2 E\n       t t'.\n       \\<lbrakk>\\<Gamma> \\<turnstile> t\\<^sub>1 : T\\<^sub>1\\<^sub>1 \\<rightarrow>\n            T\\<^sub>1\\<^sub>2;\n        \\<And>E t t'.\n           \\<lbrakk>E \\<in> ctxt; t\\<^sub>1 = E t;\n            \\<And>T\\<^sub>0.\n               \\<Gamma> \\<turnstile> t : T\\<^sub>0 \\<Longrightarrow>\n               \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n           \\<Longrightarrow> \\<Gamma> \\<turnstile> E\n              t' : T\\<^sub>1\\<^sub>1 \\<rightarrow> T\\<^sub>1\\<^sub>2;\n        \\<Gamma> \\<turnstile> t\\<^sub>2 : T\\<^sub>1\\<^sub>1;\n        \\<And>E t t'.\n           \\<lbrakk>E \\<in> ctxt; t\\<^sub>2 = E t;\n            \\<And>T\\<^sub>0.\n               \\<Gamma> \\<turnstile> t : T\\<^sub>0 \\<Longrightarrow>\n               \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n           \\<Longrightarrow> \\<Gamma> \\<turnstile> E t' : T\\<^sub>1\\<^sub>1;\n        E \\<in> ctxt; t\\<^sub>1 \\<bullet> t\\<^sub>2 = E t;\n        \\<And>T\\<^sub>0.\n           \\<Gamma> \\<turnstile> t : T\\<^sub>0 \\<Longrightarrow>\n           \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> E t' : T\\<^sub>1\\<^sub>2\n 3. \\<And>T\\<^sub>1 \\<Gamma> t\\<^sub>2 T\\<^sub>2 E t t'.\n       \\<lbrakk>TVarB T\\<^sub>1 \\<Colon>\n                \\<Gamma> \\<turnstile> t\\<^sub>2 : T\\<^sub>2;\n        \\<And>E t t'.\n           \\<lbrakk>E \\<in> ctxt; t\\<^sub>2 = E t;\n            \\<And>T\\<^sub>0.\n               TVarB T\\<^sub>1 \\<Colon>\n               \\<Gamma> \\<turnstile> t : T\\<^sub>0 \\<Longrightarrow>\n               TVarB T\\<^sub>1 \\<Colon>\n               \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n           \\<Longrightarrow> TVarB T\\<^sub>1 \\<Colon>\n                             \\<Gamma> \\<turnstile> E t' : T\\<^sub>2;\n        E \\<in> ctxt; (\\<lambda><:T\\<^sub>1. t\\<^sub>2) = E t;\n        \\<And>T\\<^sub>0.\n           \\<Gamma> \\<turnstile> t : T\\<^sub>0 \\<Longrightarrow>\n           \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> E\n          t' : (\\<forall><:T\\<^sub>1. T\\<^sub>2)\n 4. \\<And>\\<Gamma> t\\<^sub>1 T\\<^sub>1\\<^sub>1 T\\<^sub>1\\<^sub>2 T\\<^sub>2 E\n       t t'.\n       \\<lbrakk>\\<Gamma> \\<turnstile> t\\<^sub>1 : (\\<forall><:T\\<^sub>1\\<^sub>1.\n                T\\<^sub>1\\<^sub>2);\n        \\<And>E t t'.\n           \\<lbrakk>E \\<in> ctxt; t\\<^sub>1 = E t;\n            \\<And>T\\<^sub>0.\n               \\<Gamma> \\<turnstile> t : T\\<^sub>0 \\<Longrightarrow>\n               \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n           \\<Longrightarrow> \\<Gamma> \\<turnstile> E\n              t' : (\\<forall><:T\\<^sub>1\\<^sub>1. T\\<^sub>1\\<^sub>2);\n        \\<Gamma> \\<turnstile> T\\<^sub>2 <: T\\<^sub>1\\<^sub>1; E \\<in> ctxt;\n        t\\<^sub>1 \\<bullet>\\<^sub>\\<tau> T\\<^sub>2 = E t;\n        \\<And>T\\<^sub>0.\n           \\<Gamma> \\<turnstile> t : T\\<^sub>0 \\<Longrightarrow>\n           \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> E\n          t' : T\\<^sub>1\\<^sub>2[0 \\<mapsto>\\<^sub>\\<tau> T\\<^sub>2]\\<^sub>\\<tau>\n 5. \\<And>\\<Gamma> t S T E ta t'.\n       \\<lbrakk>\\<Gamma> \\<turnstile> t : S;\n        \\<And>E ta t'.\n           \\<lbrakk>E \\<in> ctxt; t = E ta;\n            \\<And>T\\<^sub>0.\n               \\<Gamma> \\<turnstile> ta : T\\<^sub>0 \\<Longrightarrow>\n               \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n           \\<Longrightarrow> \\<Gamma> \\<turnstile> E t' : S;\n        \\<Gamma> \\<turnstile> S <: T; E \\<in> ctxt; t = E ta;\n        \\<And>T\\<^sub>0.\n           \\<Gamma> \\<turnstile> ta : T\\<^sub>0 \\<Longrightarrow>\n           \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> E t' : T\n 6. \\<And>\\<Gamma> t\\<^sub>1 T\\<^sub>1 p \\<Delta> t\\<^sub>2 T\\<^sub>2 E t\n       t'.\n       \\<lbrakk>\\<Gamma> \\<turnstile> t\\<^sub>1 : T\\<^sub>1;\n        \\<And>E t t'.\n           \\<lbrakk>E \\<in> ctxt; t\\<^sub>1 = E t;\n            \\<And>T\\<^sub>0.\n               \\<Gamma> \\<turnstile> t : T\\<^sub>0 \\<Longrightarrow>\n               \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n           \\<Longrightarrow> \\<Gamma> \\<turnstile> E t' : T\\<^sub>1;\n        \\<turnstile> p : T\\<^sub>1 \\<Rightarrow> \\<Delta>;\n        \\<Delta> @ \\<Gamma> \\<turnstile> t\\<^sub>2 : T\\<^sub>2;\n        \\<And>E t t'.\n           \\<lbrakk>E \\<in> ctxt; t\\<^sub>2 = E t;\n            \\<And>T\\<^sub>0.\n               \\<Delta> @\n               \\<Gamma> \\<turnstile> t : T\\<^sub>0 \\<Longrightarrow>\n               \\<Delta> @ \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n           \\<Longrightarrow> \\<Delta> @\n                             \\<Gamma> \\<turnstile> E t' : T\\<^sub>2;\n        E \\<in> ctxt; (LET p = t\\<^sub>1 IN t\\<^sub>2) = E t;\n        \\<And>T\\<^sub>0.\n           \\<Gamma> \\<turnstile> t : T\\<^sub>0 \\<Longrightarrow>\n           \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> E\n          t' : \\<down>\\<^sub>\\<tau> \\<parallel>\\<Delta>\\<parallel> 0\n                T\\<^sub>2\n 7. \\<And>\\<Gamma> fs fTs E t t'.\n       \\<lbrakk>\\<Gamma> \\<turnstile> fs [:] fTs;\n        \\<And>E\\<^sub>r t t'.\n           \\<lbrakk>E\\<^sub>r \\<in> rctxt; fs = E\\<^sub>r t;\n            \\<And>T\\<^sub>0.\n               \\<Gamma> \\<turnstile> t : T\\<^sub>0 \\<Longrightarrow>\n               \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n           \\<Longrightarrow> \\<Gamma> \\<turnstile> E\\<^sub>r t' [:] fTs;\n        E \\<in> ctxt; Rcd fs = E t;\n        \\<And>T\\<^sub>0.\n           \\<Gamma> \\<turnstile> t : T\\<^sub>0 \\<Longrightarrow>\n           \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> E t' : RcdT fTs\n 8. \\<And>\\<Gamma> t fTs l T E ta t'.\n       \\<lbrakk>\\<Gamma> \\<turnstile> t : RcdT fTs;\n        \\<And>E ta t'.\n           \\<lbrakk>E \\<in> ctxt; t = E ta;\n            \\<And>T\\<^sub>0.\n               \\<Gamma> \\<turnstile> ta : T\\<^sub>0 \\<Longrightarrow>\n               \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n           \\<Longrightarrow> \\<Gamma> \\<turnstile> E t' : RcdT fTs;\n        fTs\\<langle>l\\<rangle>\\<^sub>? = \\<lfloor>T\\<rfloor>; E \\<in> ctxt;\n        t..l = E ta;\n        \\<And>T\\<^sub>0.\n           \\<Gamma> \\<turnstile> ta : T\\<^sub>0 \\<Longrightarrow>\n           \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> E t' : T\n 9. \\<And>\\<Gamma> E\\<^sub>r t t'.\n       \\<lbrakk>\\<Gamma> \\<turnstile>\\<^sub>w\\<^sub>f;\n        E\\<^sub>r \\<in> rctxt; [] = E\\<^sub>r t;\n        \\<And>T\\<^sub>0.\n           \\<Gamma> \\<turnstile> t : T\\<^sub>0 \\<Longrightarrow>\n           \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> E\\<^sub>r t' [:] []\n 10. \\<And>\\<Gamma> t T fs fTs l E\\<^sub>r ta t'.\n        \\<lbrakk>\\<Gamma> \\<turnstile> t : T;\n         \\<And>E ta t'.\n            \\<lbrakk>E \\<in> ctxt; t = E ta;\n             \\<And>T\\<^sub>0.\n                \\<Gamma> \\<turnstile> ta : T\\<^sub>0 \\<Longrightarrow>\n                \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n            \\<Longrightarrow> \\<Gamma> \\<turnstile> E t' : T;\n         \\<Gamma> \\<turnstile> fs [:] fTs;\n         \\<And>E\\<^sub>r t t'.\n            \\<lbrakk>E\\<^sub>r \\<in> rctxt; fs = E\\<^sub>r t;\n             \\<And>T\\<^sub>0.\n                \\<Gamma> \\<turnstile> t : T\\<^sub>0 \\<Longrightarrow>\n                \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n            \\<Longrightarrow> \\<Gamma> \\<turnstile> E\\<^sub>r t' [:] fTs;\n         fs\\<langle>l\\<rangle>\\<^sub>? = \\<bottom>; E\\<^sub>r \\<in> rctxt;\n         (l, t) \\<Colon> fs = E\\<^sub>r ta;\n         \\<And>T\\<^sub>0.\n            \\<Gamma> \\<turnstile> ta : T\\<^sub>0 \\<Longrightarrow>\n            \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n        \\<Longrightarrow> \\<Gamma> \\<turnstile> E\\<^sub>r\n           t' [:] (l, T) \\<Colon>\n                          fTs", "from \\<open>E \\<in> ctxt\\<close>"], ["proof (chain)\npicking this:\n  E \\<in> ctxt", "have \"E = (\\<lambda>t. t)\""], ["proof (prove)\nusing this:\n  E \\<in> ctxt\n\ngoal (1 subgoal):\n 1. E = (\\<lambda>t. t)", "using T_Abs"], ["proof (prove)\nusing this:\n  E \\<in> ctxt\n  VarB T\\<^sub>1 \\<Colon> T\\<^sub>2 \\<turnstile> \\<Gamma> : t\\<^sub>2\n  \\<lbrakk>?E \\<in> ctxt; \\<Gamma> = ?E ?t;\n   \\<And>T\\<^sub>0.\n      VarB T\\<^sub>1 \\<Colon>\n      T\\<^sub>2 \\<turnstile> ?t : T\\<^sub>0 \\<Longrightarrow>\n      VarB T\\<^sub>1 \\<Colon>\n      T\\<^sub>2 \\<turnstile> ?t' : T\\<^sub>0\\<rbrakk>\n  \\<Longrightarrow> VarB T\\<^sub>1 \\<Colon>\n                    T\\<^sub>2 \\<turnstile> ?E ?t' : t\\<^sub>2\n  E \\<in> ctxt\n  (\\<lambda>:T\\<^sub>1. \\<Gamma>) = E t\n  T\\<^sub>2 \\<turnstile> t : ?T\\<^sub>0 \\<Longrightarrow>\n  T\\<^sub>2 \\<turnstile> t' : ?T\\<^sub>0\n\ngoal (1 subgoal):\n 1. E = (\\<lambda>t. t)", "by cases simp_all"], ["proof (state)\nthis:\n  E = (\\<lambda>t. t)\n\ngoal (10 subgoals):\n 1. \\<And>T\\<^sub>1 \\<Gamma> t\\<^sub>2 T\\<^sub>2 E t t'.\n       \\<lbrakk>VarB T\\<^sub>1 \\<Colon>\n                \\<Gamma> \\<turnstile> t\\<^sub>2 : T\\<^sub>2;\n        \\<And>E t t'.\n           \\<lbrakk>E \\<in> ctxt; t\\<^sub>2 = E t;\n            \\<And>T\\<^sub>0.\n               VarB T\\<^sub>1 \\<Colon>\n               \\<Gamma> \\<turnstile> t : T\\<^sub>0 \\<Longrightarrow>\n               VarB T\\<^sub>1 \\<Colon>\n               \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n           \\<Longrightarrow> VarB T\\<^sub>1 \\<Colon>\n                             \\<Gamma> \\<turnstile> E t' : T\\<^sub>2;\n        E \\<in> ctxt; (\\<lambda>:T\\<^sub>1. t\\<^sub>2) = E t;\n        \\<And>T\\<^sub>0.\n           \\<Gamma> \\<turnstile> t : T\\<^sub>0 \\<Longrightarrow>\n           \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> E\n          t' : T\\<^sub>1 \\<rightarrow> \\<down>\\<^sub>\\<tau> 1 0 T\\<^sub>2\n 2. \\<And>\\<Gamma> t\\<^sub>1 T\\<^sub>1\\<^sub>1 T\\<^sub>1\\<^sub>2 t\\<^sub>2 E\n       t t'.\n       \\<lbrakk>\\<Gamma> \\<turnstile> t\\<^sub>1 : T\\<^sub>1\\<^sub>1 \\<rightarrow>\n            T\\<^sub>1\\<^sub>2;\n        \\<And>E t t'.\n           \\<lbrakk>E \\<in> ctxt; t\\<^sub>1 = E t;\n            \\<And>T\\<^sub>0.\n               \\<Gamma> \\<turnstile> t : T\\<^sub>0 \\<Longrightarrow>\n               \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n           \\<Longrightarrow> \\<Gamma> \\<turnstile> E\n              t' : T\\<^sub>1\\<^sub>1 \\<rightarrow> T\\<^sub>1\\<^sub>2;\n        \\<Gamma> \\<turnstile> t\\<^sub>2 : T\\<^sub>1\\<^sub>1;\n        \\<And>E t t'.\n           \\<lbrakk>E \\<in> ctxt; t\\<^sub>2 = E t;\n            \\<And>T\\<^sub>0.\n               \\<Gamma> \\<turnstile> t : T\\<^sub>0 \\<Longrightarrow>\n               \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n           \\<Longrightarrow> \\<Gamma> \\<turnstile> E t' : T\\<^sub>1\\<^sub>1;\n        E \\<in> ctxt; t\\<^sub>1 \\<bullet> t\\<^sub>2 = E t;\n        \\<And>T\\<^sub>0.\n           \\<Gamma> \\<turnstile> t : T\\<^sub>0 \\<Longrightarrow>\n           \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> E t' : T\\<^sub>1\\<^sub>2\n 3. \\<And>T\\<^sub>1 \\<Gamma> t\\<^sub>2 T\\<^sub>2 E t t'.\n       \\<lbrakk>TVarB T\\<^sub>1 \\<Colon>\n                \\<Gamma> \\<turnstile> t\\<^sub>2 : T\\<^sub>2;\n        \\<And>E t t'.\n           \\<lbrakk>E \\<in> ctxt; t\\<^sub>2 = E t;\n            \\<And>T\\<^sub>0.\n               TVarB T\\<^sub>1 \\<Colon>\n               \\<Gamma> \\<turnstile> t : T\\<^sub>0 \\<Longrightarrow>\n               TVarB T\\<^sub>1 \\<Colon>\n               \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n           \\<Longrightarrow> TVarB T\\<^sub>1 \\<Colon>\n                             \\<Gamma> \\<turnstile> E t' : T\\<^sub>2;\n        E \\<in> ctxt; (\\<lambda><:T\\<^sub>1. t\\<^sub>2) = E t;\n        \\<And>T\\<^sub>0.\n           \\<Gamma> \\<turnstile> t : T\\<^sub>0 \\<Longrightarrow>\n           \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> E\n          t' : (\\<forall><:T\\<^sub>1. T\\<^sub>2)\n 4. \\<And>\\<Gamma> t\\<^sub>1 T\\<^sub>1\\<^sub>1 T\\<^sub>1\\<^sub>2 T\\<^sub>2 E\n       t t'.\n       \\<lbrakk>\\<Gamma> \\<turnstile> t\\<^sub>1 : (\\<forall><:T\\<^sub>1\\<^sub>1.\n                T\\<^sub>1\\<^sub>2);\n        \\<And>E t t'.\n           \\<lbrakk>E \\<in> ctxt; t\\<^sub>1 = E t;\n            \\<And>T\\<^sub>0.\n               \\<Gamma> \\<turnstile> t : T\\<^sub>0 \\<Longrightarrow>\n               \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n           \\<Longrightarrow> \\<Gamma> \\<turnstile> E\n              t' : (\\<forall><:T\\<^sub>1\\<^sub>1. T\\<^sub>1\\<^sub>2);\n        \\<Gamma> \\<turnstile> T\\<^sub>2 <: T\\<^sub>1\\<^sub>1; E \\<in> ctxt;\n        t\\<^sub>1 \\<bullet>\\<^sub>\\<tau> T\\<^sub>2 = E t;\n        \\<And>T\\<^sub>0.\n           \\<Gamma> \\<turnstile> t : T\\<^sub>0 \\<Longrightarrow>\n           \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> E\n          t' : T\\<^sub>1\\<^sub>2[0 \\<mapsto>\\<^sub>\\<tau> T\\<^sub>2]\\<^sub>\\<tau>\n 5. \\<And>\\<Gamma> t S T E ta t'.\n       \\<lbrakk>\\<Gamma> \\<turnstile> t : S;\n        \\<And>E ta t'.\n           \\<lbrakk>E \\<in> ctxt; t = E ta;\n            \\<And>T\\<^sub>0.\n               \\<Gamma> \\<turnstile> ta : T\\<^sub>0 \\<Longrightarrow>\n               \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n           \\<Longrightarrow> \\<Gamma> \\<turnstile> E t' : S;\n        \\<Gamma> \\<turnstile> S <: T; E \\<in> ctxt; t = E ta;\n        \\<And>T\\<^sub>0.\n           \\<Gamma> \\<turnstile> ta : T\\<^sub>0 \\<Longrightarrow>\n           \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> E t' : T\n 6. \\<And>\\<Gamma> t\\<^sub>1 T\\<^sub>1 p \\<Delta> t\\<^sub>2 T\\<^sub>2 E t\n       t'.\n       \\<lbrakk>\\<Gamma> \\<turnstile> t\\<^sub>1 : T\\<^sub>1;\n        \\<And>E t t'.\n           \\<lbrakk>E \\<in> ctxt; t\\<^sub>1 = E t;\n            \\<And>T\\<^sub>0.\n               \\<Gamma> \\<turnstile> t : T\\<^sub>0 \\<Longrightarrow>\n               \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n           \\<Longrightarrow> \\<Gamma> \\<turnstile> E t' : T\\<^sub>1;\n        \\<turnstile> p : T\\<^sub>1 \\<Rightarrow> \\<Delta>;\n        \\<Delta> @ \\<Gamma> \\<turnstile> t\\<^sub>2 : T\\<^sub>2;\n        \\<And>E t t'.\n           \\<lbrakk>E \\<in> ctxt; t\\<^sub>2 = E t;\n            \\<And>T\\<^sub>0.\n               \\<Delta> @\n               \\<Gamma> \\<turnstile> t : T\\<^sub>0 \\<Longrightarrow>\n               \\<Delta> @ \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n           \\<Longrightarrow> \\<Delta> @\n                             \\<Gamma> \\<turnstile> E t' : T\\<^sub>2;\n        E \\<in> ctxt; (LET p = t\\<^sub>1 IN t\\<^sub>2) = E t;\n        \\<And>T\\<^sub>0.\n           \\<Gamma> \\<turnstile> t : T\\<^sub>0 \\<Longrightarrow>\n           \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> E\n          t' : \\<down>\\<^sub>\\<tau> \\<parallel>\\<Delta>\\<parallel> 0\n                T\\<^sub>2\n 7. \\<And>\\<Gamma> fs fTs E t t'.\n       \\<lbrakk>\\<Gamma> \\<turnstile> fs [:] fTs;\n        \\<And>E\\<^sub>r t t'.\n           \\<lbrakk>E\\<^sub>r \\<in> rctxt; fs = E\\<^sub>r t;\n            \\<And>T\\<^sub>0.\n               \\<Gamma> \\<turnstile> t : T\\<^sub>0 \\<Longrightarrow>\n               \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n           \\<Longrightarrow> \\<Gamma> \\<turnstile> E\\<^sub>r t' [:] fTs;\n        E \\<in> ctxt; Rcd fs = E t;\n        \\<And>T\\<^sub>0.\n           \\<Gamma> \\<turnstile> t : T\\<^sub>0 \\<Longrightarrow>\n           \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> E t' : RcdT fTs\n 8. \\<And>\\<Gamma> t fTs l T E ta t'.\n       \\<lbrakk>\\<Gamma> \\<turnstile> t : RcdT fTs;\n        \\<And>E ta t'.\n           \\<lbrakk>E \\<in> ctxt; t = E ta;\n            \\<And>T\\<^sub>0.\n               \\<Gamma> \\<turnstile> ta : T\\<^sub>0 \\<Longrightarrow>\n               \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n           \\<Longrightarrow> \\<Gamma> \\<turnstile> E t' : RcdT fTs;\n        fTs\\<langle>l\\<rangle>\\<^sub>? = \\<lfloor>T\\<rfloor>; E \\<in> ctxt;\n        t..l = E ta;\n        \\<And>T\\<^sub>0.\n           \\<Gamma> \\<turnstile> ta : T\\<^sub>0 \\<Longrightarrow>\n           \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> E t' : T\n 9. \\<And>\\<Gamma> E\\<^sub>r t t'.\n       \\<lbrakk>\\<Gamma> \\<turnstile>\\<^sub>w\\<^sub>f;\n        E\\<^sub>r \\<in> rctxt; [] = E\\<^sub>r t;\n        \\<And>T\\<^sub>0.\n           \\<Gamma> \\<turnstile> t : T\\<^sub>0 \\<Longrightarrow>\n           \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> E\\<^sub>r t' [:] []\n 10. \\<And>\\<Gamma> t T fs fTs l E\\<^sub>r ta t'.\n        \\<lbrakk>\\<Gamma> \\<turnstile> t : T;\n         \\<And>E ta t'.\n            \\<lbrakk>E \\<in> ctxt; t = E ta;\n             \\<And>T\\<^sub>0.\n                \\<Gamma> \\<turnstile> ta : T\\<^sub>0 \\<Longrightarrow>\n                \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n            \\<Longrightarrow> \\<Gamma> \\<turnstile> E t' : T;\n         \\<Gamma> \\<turnstile> fs [:] fTs;\n         \\<And>E\\<^sub>r t t'.\n            \\<lbrakk>E\\<^sub>r \\<in> rctxt; fs = E\\<^sub>r t;\n             \\<And>T\\<^sub>0.\n                \\<Gamma> \\<turnstile> t : T\\<^sub>0 \\<Longrightarrow>\n                \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n            \\<Longrightarrow> \\<Gamma> \\<turnstile> E\\<^sub>r t' [:] fTs;\n         fs\\<langle>l\\<rangle>\\<^sub>? = \\<bottom>; E\\<^sub>r \\<in> rctxt;\n         (l, t) \\<Colon> fs = E\\<^sub>r ta;\n         \\<And>T\\<^sub>0.\n            \\<Gamma> \\<turnstile> ta : T\\<^sub>0 \\<Longrightarrow>\n            \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n        \\<Longrightarrow> \\<Gamma> \\<turnstile> E\\<^sub>r\n           t' [:] (l, T) \\<Colon>\n                          fTs", "with T_Abs"], ["proof (chain)\npicking this:\n  VarB T\\<^sub>1 \\<Colon> T\\<^sub>2 \\<turnstile> \\<Gamma> : t\\<^sub>2\n  \\<lbrakk>?E \\<in> ctxt; \\<Gamma> = ?E ?t;\n   \\<And>T\\<^sub>0.\n      VarB T\\<^sub>1 \\<Colon>\n      T\\<^sub>2 \\<turnstile> ?t : T\\<^sub>0 \\<Longrightarrow>\n      VarB T\\<^sub>1 \\<Colon>\n      T\\<^sub>2 \\<turnstile> ?t' : T\\<^sub>0\\<rbrakk>\n  \\<Longrightarrow> VarB T\\<^sub>1 \\<Colon>\n                    T\\<^sub>2 \\<turnstile> ?E ?t' : t\\<^sub>2\n  E \\<in> ctxt\n  (\\<lambda>:T\\<^sub>1. \\<Gamma>) = E t\n  T\\<^sub>2 \\<turnstile> t : ?T\\<^sub>0 \\<Longrightarrow>\n  T\\<^sub>2 \\<turnstile> t' : ?T\\<^sub>0\n  E = (\\<lambda>t. t)", "show ?case"], ["proof (prove)\nusing this:\n  VarB T\\<^sub>1 \\<Colon> T\\<^sub>2 \\<turnstile> \\<Gamma> : t\\<^sub>2\n  \\<lbrakk>?E \\<in> ctxt; \\<Gamma> = ?E ?t;\n   \\<And>T\\<^sub>0.\n      VarB T\\<^sub>1 \\<Colon>\n      T\\<^sub>2 \\<turnstile> ?t : T\\<^sub>0 \\<Longrightarrow>\n      VarB T\\<^sub>1 \\<Colon>\n      T\\<^sub>2 \\<turnstile> ?t' : T\\<^sub>0\\<rbrakk>\n  \\<Longrightarrow> VarB T\\<^sub>1 \\<Colon>\n                    T\\<^sub>2 \\<turnstile> ?E ?t' : t\\<^sub>2\n  E \\<in> ctxt\n  (\\<lambda>:T\\<^sub>1. \\<Gamma>) = E t\n  T\\<^sub>2 \\<turnstile> t : ?T\\<^sub>0 \\<Longrightarrow>\n  T\\<^sub>2 \\<turnstile> t' : ?T\\<^sub>0\n  E = (\\<lambda>t. t)\n\ngoal (1 subgoal):\n 1. T\\<^sub>2 \\<turnstile> E t' : T\\<^sub>1 \\<rightarrow>\n                                  \\<down>\\<^sub>\\<tau> 1 0 t\\<^sub>2", "by (blast intro: typing_typings.intros)"], ["proof (state)\nthis:\n  T\\<^sub>2 \\<turnstile> E t' : T\\<^sub>1 \\<rightarrow>\n                                \\<down>\\<^sub>\\<tau> 1 0 t\\<^sub>2\n\ngoal (9 subgoals):\n 1. \\<And>\\<Gamma> t\\<^sub>1 T\\<^sub>1\\<^sub>1 T\\<^sub>1\\<^sub>2 t\\<^sub>2 E\n       t t'.\n       \\<lbrakk>\\<Gamma> \\<turnstile> t\\<^sub>1 : T\\<^sub>1\\<^sub>1 \\<rightarrow>\n            T\\<^sub>1\\<^sub>2;\n        \\<And>E t t'.\n           \\<lbrakk>E \\<in> ctxt; t\\<^sub>1 = E t;\n            \\<And>T\\<^sub>0.\n               \\<Gamma> \\<turnstile> t : T\\<^sub>0 \\<Longrightarrow>\n               \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n           \\<Longrightarrow> \\<Gamma> \\<turnstile> E\n              t' : T\\<^sub>1\\<^sub>1 \\<rightarrow> T\\<^sub>1\\<^sub>2;\n        \\<Gamma> \\<turnstile> t\\<^sub>2 : T\\<^sub>1\\<^sub>1;\n        \\<And>E t t'.\n           \\<lbrakk>E \\<in> ctxt; t\\<^sub>2 = E t;\n            \\<And>T\\<^sub>0.\n               \\<Gamma> \\<turnstile> t : T\\<^sub>0 \\<Longrightarrow>\n               \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n           \\<Longrightarrow> \\<Gamma> \\<turnstile> E t' : T\\<^sub>1\\<^sub>1;\n        E \\<in> ctxt; t\\<^sub>1 \\<bullet> t\\<^sub>2 = E t;\n        \\<And>T\\<^sub>0.\n           \\<Gamma> \\<turnstile> t : T\\<^sub>0 \\<Longrightarrow>\n           \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> E t' : T\\<^sub>1\\<^sub>2\n 2. \\<And>T\\<^sub>1 \\<Gamma> t\\<^sub>2 T\\<^sub>2 E t t'.\n       \\<lbrakk>TVarB T\\<^sub>1 \\<Colon>\n                \\<Gamma> \\<turnstile> t\\<^sub>2 : T\\<^sub>2;\n        \\<And>E t t'.\n           \\<lbrakk>E \\<in> ctxt; t\\<^sub>2 = E t;\n            \\<And>T\\<^sub>0.\n               TVarB T\\<^sub>1 \\<Colon>\n               \\<Gamma> \\<turnstile> t : T\\<^sub>0 \\<Longrightarrow>\n               TVarB T\\<^sub>1 \\<Colon>\n               \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n           \\<Longrightarrow> TVarB T\\<^sub>1 \\<Colon>\n                             \\<Gamma> \\<turnstile> E t' : T\\<^sub>2;\n        E \\<in> ctxt; (\\<lambda><:T\\<^sub>1. t\\<^sub>2) = E t;\n        \\<And>T\\<^sub>0.\n           \\<Gamma> \\<turnstile> t : T\\<^sub>0 \\<Longrightarrow>\n           \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> E\n          t' : (\\<forall><:T\\<^sub>1. T\\<^sub>2)\n 3. \\<And>\\<Gamma> t\\<^sub>1 T\\<^sub>1\\<^sub>1 T\\<^sub>1\\<^sub>2 T\\<^sub>2 E\n       t t'.\n       \\<lbrakk>\\<Gamma> \\<turnstile> t\\<^sub>1 : (\\<forall><:T\\<^sub>1\\<^sub>1.\n                T\\<^sub>1\\<^sub>2);\n        \\<And>E t t'.\n           \\<lbrakk>E \\<in> ctxt; t\\<^sub>1 = E t;\n            \\<And>T\\<^sub>0.\n               \\<Gamma> \\<turnstile> t : T\\<^sub>0 \\<Longrightarrow>\n               \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n           \\<Longrightarrow> \\<Gamma> \\<turnstile> E\n              t' : (\\<forall><:T\\<^sub>1\\<^sub>1. T\\<^sub>1\\<^sub>2);\n        \\<Gamma> \\<turnstile> T\\<^sub>2 <: T\\<^sub>1\\<^sub>1; E \\<in> ctxt;\n        t\\<^sub>1 \\<bullet>\\<^sub>\\<tau> T\\<^sub>2 = E t;\n        \\<And>T\\<^sub>0.\n           \\<Gamma> \\<turnstile> t : T\\<^sub>0 \\<Longrightarrow>\n           \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> E\n          t' : T\\<^sub>1\\<^sub>2[0 \\<mapsto>\\<^sub>\\<tau> T\\<^sub>2]\\<^sub>\\<tau>\n 4. \\<And>\\<Gamma> t S T E ta t'.\n       \\<lbrakk>\\<Gamma> \\<turnstile> t : S;\n        \\<And>E ta t'.\n           \\<lbrakk>E \\<in> ctxt; t = E ta;\n            \\<And>T\\<^sub>0.\n               \\<Gamma> \\<turnstile> ta : T\\<^sub>0 \\<Longrightarrow>\n               \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n           \\<Longrightarrow> \\<Gamma> \\<turnstile> E t' : S;\n        \\<Gamma> \\<turnstile> S <: T; E \\<in> ctxt; t = E ta;\n        \\<And>T\\<^sub>0.\n           \\<Gamma> \\<turnstile> ta : T\\<^sub>0 \\<Longrightarrow>\n           \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> E t' : T\n 5. \\<And>\\<Gamma> t\\<^sub>1 T\\<^sub>1 p \\<Delta> t\\<^sub>2 T\\<^sub>2 E t\n       t'.\n       \\<lbrakk>\\<Gamma> \\<turnstile> t\\<^sub>1 : T\\<^sub>1;\n        \\<And>E t t'.\n           \\<lbrakk>E \\<in> ctxt; t\\<^sub>1 = E t;\n            \\<And>T\\<^sub>0.\n               \\<Gamma> \\<turnstile> t : T\\<^sub>0 \\<Longrightarrow>\n               \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n           \\<Longrightarrow> \\<Gamma> \\<turnstile> E t' : T\\<^sub>1;\n        \\<turnstile> p : T\\<^sub>1 \\<Rightarrow> \\<Delta>;\n        \\<Delta> @ \\<Gamma> \\<turnstile> t\\<^sub>2 : T\\<^sub>2;\n        \\<And>E t t'.\n           \\<lbrakk>E \\<in> ctxt; t\\<^sub>2 = E t;\n            \\<And>T\\<^sub>0.\n               \\<Delta> @\n               \\<Gamma> \\<turnstile> t : T\\<^sub>0 \\<Longrightarrow>\n               \\<Delta> @ \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n           \\<Longrightarrow> \\<Delta> @\n                             \\<Gamma> \\<turnstile> E t' : T\\<^sub>2;\n        E \\<in> ctxt; (LET p = t\\<^sub>1 IN t\\<^sub>2) = E t;\n        \\<And>T\\<^sub>0.\n           \\<Gamma> \\<turnstile> t : T\\<^sub>0 \\<Longrightarrow>\n           \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> E\n          t' : \\<down>\\<^sub>\\<tau> \\<parallel>\\<Delta>\\<parallel> 0\n                T\\<^sub>2\n 6. \\<And>\\<Gamma> fs fTs E t t'.\n       \\<lbrakk>\\<Gamma> \\<turnstile> fs [:] fTs;\n        \\<And>E\\<^sub>r t t'.\n           \\<lbrakk>E\\<^sub>r \\<in> rctxt; fs = E\\<^sub>r t;\n            \\<And>T\\<^sub>0.\n               \\<Gamma> \\<turnstile> t : T\\<^sub>0 \\<Longrightarrow>\n               \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n           \\<Longrightarrow> \\<Gamma> \\<turnstile> E\\<^sub>r t' [:] fTs;\n        E \\<in> ctxt; Rcd fs = E t;\n        \\<And>T\\<^sub>0.\n           \\<Gamma> \\<turnstile> t : T\\<^sub>0 \\<Longrightarrow>\n           \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> E t' : RcdT fTs\n 7. \\<And>\\<Gamma> t fTs l T E ta t'.\n       \\<lbrakk>\\<Gamma> \\<turnstile> t : RcdT fTs;\n        \\<And>E ta t'.\n           \\<lbrakk>E \\<in> ctxt; t = E ta;\n            \\<And>T\\<^sub>0.\n               \\<Gamma> \\<turnstile> ta : T\\<^sub>0 \\<Longrightarrow>\n               \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n           \\<Longrightarrow> \\<Gamma> \\<turnstile> E t' : RcdT fTs;\n        fTs\\<langle>l\\<rangle>\\<^sub>? = \\<lfloor>T\\<rfloor>; E \\<in> ctxt;\n        t..l = E ta;\n        \\<And>T\\<^sub>0.\n           \\<Gamma> \\<turnstile> ta : T\\<^sub>0 \\<Longrightarrow>\n           \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> E t' : T\n 8. \\<And>\\<Gamma> E\\<^sub>r t t'.\n       \\<lbrakk>\\<Gamma> \\<turnstile>\\<^sub>w\\<^sub>f;\n        E\\<^sub>r \\<in> rctxt; [] = E\\<^sub>r t;\n        \\<And>T\\<^sub>0.\n           \\<Gamma> \\<turnstile> t : T\\<^sub>0 \\<Longrightarrow>\n           \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> E\\<^sub>r t' [:] []\n 9. \\<And>\\<Gamma> t T fs fTs l E\\<^sub>r ta t'.\n       \\<lbrakk>\\<Gamma> \\<turnstile> t : T;\n        \\<And>E ta t'.\n           \\<lbrakk>E \\<in> ctxt; t = E ta;\n            \\<And>T\\<^sub>0.\n               \\<Gamma> \\<turnstile> ta : T\\<^sub>0 \\<Longrightarrow>\n               \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n           \\<Longrightarrow> \\<Gamma> \\<turnstile> E t' : T;\n        \\<Gamma> \\<turnstile> fs [:] fTs;\n        \\<And>E\\<^sub>r t t'.\n           \\<lbrakk>E\\<^sub>r \\<in> rctxt; fs = E\\<^sub>r t;\n            \\<And>T\\<^sub>0.\n               \\<Gamma> \\<turnstile> t : T\\<^sub>0 \\<Longrightarrow>\n               \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n           \\<Longrightarrow> \\<Gamma> \\<turnstile> E\\<^sub>r t' [:] fTs;\n        fs\\<langle>l\\<rangle>\\<^sub>? = \\<bottom>; E\\<^sub>r \\<in> rctxt;\n        (l, t) \\<Colon> fs = E\\<^sub>r ta;\n        \\<And>T\\<^sub>0.\n           \\<Gamma> \\<turnstile> ta : T\\<^sub>0 \\<Longrightarrow>\n           \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> E\\<^sub>r\n          t' [:] (l, T) \\<Colon>\n                         fTs", "next"], ["proof (state)\ngoal (9 subgoals):\n 1. \\<And>\\<Gamma> t\\<^sub>1 T\\<^sub>1\\<^sub>1 T\\<^sub>1\\<^sub>2 t\\<^sub>2 E\n       t t'.\n       \\<lbrakk>\\<Gamma> \\<turnstile> t\\<^sub>1 : T\\<^sub>1\\<^sub>1 \\<rightarrow>\n            T\\<^sub>1\\<^sub>2;\n        \\<And>E t t'.\n           \\<lbrakk>E \\<in> ctxt; t\\<^sub>1 = E t;\n            \\<And>T\\<^sub>0.\n               \\<Gamma> \\<turnstile> t : T\\<^sub>0 \\<Longrightarrow>\n               \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n           \\<Longrightarrow> \\<Gamma> \\<turnstile> E\n              t' : T\\<^sub>1\\<^sub>1 \\<rightarrow> T\\<^sub>1\\<^sub>2;\n        \\<Gamma> \\<turnstile> t\\<^sub>2 : T\\<^sub>1\\<^sub>1;\n        \\<And>E t t'.\n           \\<lbrakk>E \\<in> ctxt; t\\<^sub>2 = E t;\n            \\<And>T\\<^sub>0.\n               \\<Gamma> \\<turnstile> t : T\\<^sub>0 \\<Longrightarrow>\n               \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n           \\<Longrightarrow> \\<Gamma> \\<turnstile> E t' : T\\<^sub>1\\<^sub>1;\n        E \\<in> ctxt; t\\<^sub>1 \\<bullet> t\\<^sub>2 = E t;\n        \\<And>T\\<^sub>0.\n           \\<Gamma> \\<turnstile> t : T\\<^sub>0 \\<Longrightarrow>\n           \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> E t' : T\\<^sub>1\\<^sub>2\n 2. \\<And>T\\<^sub>1 \\<Gamma> t\\<^sub>2 T\\<^sub>2 E t t'.\n       \\<lbrakk>TVarB T\\<^sub>1 \\<Colon>\n                \\<Gamma> \\<turnstile> t\\<^sub>2 : T\\<^sub>2;\n        \\<And>E t t'.\n           \\<lbrakk>E \\<in> ctxt; t\\<^sub>2 = E t;\n            \\<And>T\\<^sub>0.\n               TVarB T\\<^sub>1 \\<Colon>\n               \\<Gamma> \\<turnstile> t : T\\<^sub>0 \\<Longrightarrow>\n               TVarB T\\<^sub>1 \\<Colon>\n               \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n           \\<Longrightarrow> TVarB T\\<^sub>1 \\<Colon>\n                             \\<Gamma> \\<turnstile> E t' : T\\<^sub>2;\n        E \\<in> ctxt; (\\<lambda><:T\\<^sub>1. t\\<^sub>2) = E t;\n        \\<And>T\\<^sub>0.\n           \\<Gamma> \\<turnstile> t : T\\<^sub>0 \\<Longrightarrow>\n           \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> E\n          t' : (\\<forall><:T\\<^sub>1. T\\<^sub>2)\n 3. \\<And>\\<Gamma> t\\<^sub>1 T\\<^sub>1\\<^sub>1 T\\<^sub>1\\<^sub>2 T\\<^sub>2 E\n       t t'.\n       \\<lbrakk>\\<Gamma> \\<turnstile> t\\<^sub>1 : (\\<forall><:T\\<^sub>1\\<^sub>1.\n                T\\<^sub>1\\<^sub>2);\n        \\<And>E t t'.\n           \\<lbrakk>E \\<in> ctxt; t\\<^sub>1 = E t;\n            \\<And>T\\<^sub>0.\n               \\<Gamma> \\<turnstile> t : T\\<^sub>0 \\<Longrightarrow>\n               \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n           \\<Longrightarrow> \\<Gamma> \\<turnstile> E\n              t' : (\\<forall><:T\\<^sub>1\\<^sub>1. T\\<^sub>1\\<^sub>2);\n        \\<Gamma> \\<turnstile> T\\<^sub>2 <: T\\<^sub>1\\<^sub>1; E \\<in> ctxt;\n        t\\<^sub>1 \\<bullet>\\<^sub>\\<tau> T\\<^sub>2 = E t;\n        \\<And>T\\<^sub>0.\n           \\<Gamma> \\<turnstile> t : T\\<^sub>0 \\<Longrightarrow>\n           \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> E\n          t' : T\\<^sub>1\\<^sub>2[0 \\<mapsto>\\<^sub>\\<tau> T\\<^sub>2]\\<^sub>\\<tau>\n 4. \\<And>\\<Gamma> t S T E ta t'.\n       \\<lbrakk>\\<Gamma> \\<turnstile> t : S;\n        \\<And>E ta t'.\n           \\<lbrakk>E \\<in> ctxt; t = E ta;\n            \\<And>T\\<^sub>0.\n               \\<Gamma> \\<turnstile> ta : T\\<^sub>0 \\<Longrightarrow>\n               \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n           \\<Longrightarrow> \\<Gamma> \\<turnstile> E t' : S;\n        \\<Gamma> \\<turnstile> S <: T; E \\<in> ctxt; t = E ta;\n        \\<And>T\\<^sub>0.\n           \\<Gamma> \\<turnstile> ta : T\\<^sub>0 \\<Longrightarrow>\n           \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> E t' : T\n 5. \\<And>\\<Gamma> t\\<^sub>1 T\\<^sub>1 p \\<Delta> t\\<^sub>2 T\\<^sub>2 E t\n       t'.\n       \\<lbrakk>\\<Gamma> \\<turnstile> t\\<^sub>1 : T\\<^sub>1;\n        \\<And>E t t'.\n           \\<lbrakk>E \\<in> ctxt; t\\<^sub>1 = E t;\n            \\<And>T\\<^sub>0.\n               \\<Gamma> \\<turnstile> t : T\\<^sub>0 \\<Longrightarrow>\n               \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n           \\<Longrightarrow> \\<Gamma> \\<turnstile> E t' : T\\<^sub>1;\n        \\<turnstile> p : T\\<^sub>1 \\<Rightarrow> \\<Delta>;\n        \\<Delta> @ \\<Gamma> \\<turnstile> t\\<^sub>2 : T\\<^sub>2;\n        \\<And>E t t'.\n           \\<lbrakk>E \\<in> ctxt; t\\<^sub>2 = E t;\n            \\<And>T\\<^sub>0.\n               \\<Delta> @\n               \\<Gamma> \\<turnstile> t : T\\<^sub>0 \\<Longrightarrow>\n               \\<Delta> @ \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n           \\<Longrightarrow> \\<Delta> @\n                             \\<Gamma> \\<turnstile> E t' : T\\<^sub>2;\n        E \\<in> ctxt; (LET p = t\\<^sub>1 IN t\\<^sub>2) = E t;\n        \\<And>T\\<^sub>0.\n           \\<Gamma> \\<turnstile> t : T\\<^sub>0 \\<Longrightarrow>\n           \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> E\n          t' : \\<down>\\<^sub>\\<tau> \\<parallel>\\<Delta>\\<parallel> 0\n                T\\<^sub>2\n 6. \\<And>\\<Gamma> fs fTs E t t'.\n       \\<lbrakk>\\<Gamma> \\<turnstile> fs [:] fTs;\n        \\<And>E\\<^sub>r t t'.\n           \\<lbrakk>E\\<^sub>r \\<in> rctxt; fs = E\\<^sub>r t;\n            \\<And>T\\<^sub>0.\n               \\<Gamma> \\<turnstile> t : T\\<^sub>0 \\<Longrightarrow>\n               \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n           \\<Longrightarrow> \\<Gamma> \\<turnstile> E\\<^sub>r t' [:] fTs;\n        E \\<in> ctxt; Rcd fs = E t;\n        \\<And>T\\<^sub>0.\n           \\<Gamma> \\<turnstile> t : T\\<^sub>0 \\<Longrightarrow>\n           \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> E t' : RcdT fTs\n 7. \\<And>\\<Gamma> t fTs l T E ta t'.\n       \\<lbrakk>\\<Gamma> \\<turnstile> t : RcdT fTs;\n        \\<And>E ta t'.\n           \\<lbrakk>E \\<in> ctxt; t = E ta;\n            \\<And>T\\<^sub>0.\n               \\<Gamma> \\<turnstile> ta : T\\<^sub>0 \\<Longrightarrow>\n               \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n           \\<Longrightarrow> \\<Gamma> \\<turnstile> E t' : RcdT fTs;\n        fTs\\<langle>l\\<rangle>\\<^sub>? = \\<lfloor>T\\<rfloor>; E \\<in> ctxt;\n        t..l = E ta;\n        \\<And>T\\<^sub>0.\n           \\<Gamma> \\<turnstile> ta : T\\<^sub>0 \\<Longrightarrow>\n           \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> E t' : T\n 8. \\<And>\\<Gamma> E\\<^sub>r t t'.\n       \\<lbrakk>\\<Gamma> \\<turnstile>\\<^sub>w\\<^sub>f;\n        E\\<^sub>r \\<in> rctxt; [] = E\\<^sub>r t;\n        \\<And>T\\<^sub>0.\n           \\<Gamma> \\<turnstile> t : T\\<^sub>0 \\<Longrightarrow>\n           \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> E\\<^sub>r t' [:] []\n 9. \\<And>\\<Gamma> t T fs fTs l E\\<^sub>r ta t'.\n       \\<lbrakk>\\<Gamma> \\<turnstile> t : T;\n        \\<And>E ta t'.\n           \\<lbrakk>E \\<in> ctxt; t = E ta;\n            \\<And>T\\<^sub>0.\n               \\<Gamma> \\<turnstile> ta : T\\<^sub>0 \\<Longrightarrow>\n               \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n           \\<Longrightarrow> \\<Gamma> \\<turnstile> E t' : T;\n        \\<Gamma> \\<turnstile> fs [:] fTs;\n        \\<And>E\\<^sub>r t t'.\n           \\<lbrakk>E\\<^sub>r \\<in> rctxt; fs = E\\<^sub>r t;\n            \\<And>T\\<^sub>0.\n               \\<Gamma> \\<turnstile> t : T\\<^sub>0 \\<Longrightarrow>\n               \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n           \\<Longrightarrow> \\<Gamma> \\<turnstile> E\\<^sub>r t' [:] fTs;\n        fs\\<langle>l\\<rangle>\\<^sub>? = \\<bottom>; E\\<^sub>r \\<in> rctxt;\n        (l, t) \\<Colon> fs = E\\<^sub>r ta;\n        \\<And>T\\<^sub>0.\n           \\<Gamma> \\<turnstile> ta : T\\<^sub>0 \\<Longrightarrow>\n           \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> E\\<^sub>r\n          t' [:] (l, T) \\<Colon>\n                         fTs", "case (T_App \\<Gamma> t\\<^sub>1 T\\<^sub>1\\<^sub>1 T\\<^sub>1\\<^sub>2 t\\<^sub>2 E t t')"], ["proof (state)\nthis:\n  \\<Gamma> \\<turnstile> t\\<^sub>1 : T\\<^sub>1\\<^sub>1 \\<rightarrow>\n                                    T\\<^sub>1\\<^sub>2\n  \\<lbrakk>?E \\<in> ctxt; t\\<^sub>1 = ?E ?t;\n   \\<And>T\\<^sub>0.\n      \\<Gamma> \\<turnstile> ?t : T\\<^sub>0 \\<Longrightarrow>\n      \\<Gamma> \\<turnstile> ?t' : T\\<^sub>0\\<rbrakk>\n  \\<Longrightarrow> \\<Gamma> \\<turnstile> ?E\n     ?t' : T\\<^sub>1\\<^sub>1 \\<rightarrow> T\\<^sub>1\\<^sub>2\n  \\<Gamma> \\<turnstile> t\\<^sub>2 : T\\<^sub>1\\<^sub>1\n  \\<lbrakk>?E \\<in> ctxt; t\\<^sub>2 = ?E ?t;\n   \\<And>T\\<^sub>0.\n      \\<Gamma> \\<turnstile> ?t : T\\<^sub>0 \\<Longrightarrow>\n      \\<Gamma> \\<turnstile> ?t' : T\\<^sub>0\\<rbrakk>\n  \\<Longrightarrow> \\<Gamma> \\<turnstile> ?E ?t' : T\\<^sub>1\\<^sub>1\n  E \\<in> ctxt\n  t\\<^sub>1 \\<bullet> t\\<^sub>2 = E t\n  \\<Gamma> \\<turnstile> t : ?T\\<^sub>0 \\<Longrightarrow>\n  \\<Gamma> \\<turnstile> t' : ?T\\<^sub>0\n\ngoal (9 subgoals):\n 1. \\<And>\\<Gamma> t\\<^sub>1 T\\<^sub>1\\<^sub>1 T\\<^sub>1\\<^sub>2 t\\<^sub>2 E\n       t t'.\n       \\<lbrakk>\\<Gamma> \\<turnstile> t\\<^sub>1 : T\\<^sub>1\\<^sub>1 \\<rightarrow>\n            T\\<^sub>1\\<^sub>2;\n        \\<And>E t t'.\n           \\<lbrakk>E \\<in> ctxt; t\\<^sub>1 = E t;\n            \\<And>T\\<^sub>0.\n               \\<Gamma> \\<turnstile> t : T\\<^sub>0 \\<Longrightarrow>\n               \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n           \\<Longrightarrow> \\<Gamma> \\<turnstile> E\n              t' : T\\<^sub>1\\<^sub>1 \\<rightarrow> T\\<^sub>1\\<^sub>2;\n        \\<Gamma> \\<turnstile> t\\<^sub>2 : T\\<^sub>1\\<^sub>1;\n        \\<And>E t t'.\n           \\<lbrakk>E \\<in> ctxt; t\\<^sub>2 = E t;\n            \\<And>T\\<^sub>0.\n               \\<Gamma> \\<turnstile> t : T\\<^sub>0 \\<Longrightarrow>\n               \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n           \\<Longrightarrow> \\<Gamma> \\<turnstile> E t' : T\\<^sub>1\\<^sub>1;\n        E \\<in> ctxt; t\\<^sub>1 \\<bullet> t\\<^sub>2 = E t;\n        \\<And>T\\<^sub>0.\n           \\<Gamma> \\<turnstile> t : T\\<^sub>0 \\<Longrightarrow>\n           \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> E t' : T\\<^sub>1\\<^sub>2\n 2. \\<And>T\\<^sub>1 \\<Gamma> t\\<^sub>2 T\\<^sub>2 E t t'.\n       \\<lbrakk>TVarB T\\<^sub>1 \\<Colon>\n                \\<Gamma> \\<turnstile> t\\<^sub>2 : T\\<^sub>2;\n        \\<And>E t t'.\n           \\<lbrakk>E \\<in> ctxt; t\\<^sub>2 = E t;\n            \\<And>T\\<^sub>0.\n               TVarB T\\<^sub>1 \\<Colon>\n               \\<Gamma> \\<turnstile> t : T\\<^sub>0 \\<Longrightarrow>\n               TVarB T\\<^sub>1 \\<Colon>\n               \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n           \\<Longrightarrow> TVarB T\\<^sub>1 \\<Colon>\n                             \\<Gamma> \\<turnstile> E t' : T\\<^sub>2;\n        E \\<in> ctxt; (\\<lambda><:T\\<^sub>1. t\\<^sub>2) = E t;\n        \\<And>T\\<^sub>0.\n           \\<Gamma> \\<turnstile> t : T\\<^sub>0 \\<Longrightarrow>\n           \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> E\n          t' : (\\<forall><:T\\<^sub>1. T\\<^sub>2)\n 3. \\<And>\\<Gamma> t\\<^sub>1 T\\<^sub>1\\<^sub>1 T\\<^sub>1\\<^sub>2 T\\<^sub>2 E\n       t t'.\n       \\<lbrakk>\\<Gamma> \\<turnstile> t\\<^sub>1 : (\\<forall><:T\\<^sub>1\\<^sub>1.\n                T\\<^sub>1\\<^sub>2);\n        \\<And>E t t'.\n           \\<lbrakk>E \\<in> ctxt; t\\<^sub>1 = E t;\n            \\<And>T\\<^sub>0.\n               \\<Gamma> \\<turnstile> t : T\\<^sub>0 \\<Longrightarrow>\n               \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n           \\<Longrightarrow> \\<Gamma> \\<turnstile> E\n              t' : (\\<forall><:T\\<^sub>1\\<^sub>1. T\\<^sub>1\\<^sub>2);\n        \\<Gamma> \\<turnstile> T\\<^sub>2 <: T\\<^sub>1\\<^sub>1; E \\<in> ctxt;\n        t\\<^sub>1 \\<bullet>\\<^sub>\\<tau> T\\<^sub>2 = E t;\n        \\<And>T\\<^sub>0.\n           \\<Gamma> \\<turnstile> t : T\\<^sub>0 \\<Longrightarrow>\n           \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> E\n          t' : T\\<^sub>1\\<^sub>2[0 \\<mapsto>\\<^sub>\\<tau> T\\<^sub>2]\\<^sub>\\<tau>\n 4. \\<And>\\<Gamma> t S T E ta t'.\n       \\<lbrakk>\\<Gamma> \\<turnstile> t : S;\n        \\<And>E ta t'.\n           \\<lbrakk>E \\<in> ctxt; t = E ta;\n            \\<And>T\\<^sub>0.\n               \\<Gamma> \\<turnstile> ta : T\\<^sub>0 \\<Longrightarrow>\n               \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n           \\<Longrightarrow> \\<Gamma> \\<turnstile> E t' : S;\n        \\<Gamma> \\<turnstile> S <: T; E \\<in> ctxt; t = E ta;\n        \\<And>T\\<^sub>0.\n           \\<Gamma> \\<turnstile> ta : T\\<^sub>0 \\<Longrightarrow>\n           \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> E t' : T\n 5. \\<And>\\<Gamma> t\\<^sub>1 T\\<^sub>1 p \\<Delta> t\\<^sub>2 T\\<^sub>2 E t\n       t'.\n       \\<lbrakk>\\<Gamma> \\<turnstile> t\\<^sub>1 : T\\<^sub>1;\n        \\<And>E t t'.\n           \\<lbrakk>E \\<in> ctxt; t\\<^sub>1 = E t;\n            \\<And>T\\<^sub>0.\n               \\<Gamma> \\<turnstile> t : T\\<^sub>0 \\<Longrightarrow>\n               \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n           \\<Longrightarrow> \\<Gamma> \\<turnstile> E t' : T\\<^sub>1;\n        \\<turnstile> p : T\\<^sub>1 \\<Rightarrow> \\<Delta>;\n        \\<Delta> @ \\<Gamma> \\<turnstile> t\\<^sub>2 : T\\<^sub>2;\n        \\<And>E t t'.\n           \\<lbrakk>E \\<in> ctxt; t\\<^sub>2 = E t;\n            \\<And>T\\<^sub>0.\n               \\<Delta> @\n               \\<Gamma> \\<turnstile> t : T\\<^sub>0 \\<Longrightarrow>\n               \\<Delta> @ \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n           \\<Longrightarrow> \\<Delta> @\n                             \\<Gamma> \\<turnstile> E t' : T\\<^sub>2;\n        E \\<in> ctxt; (LET p = t\\<^sub>1 IN t\\<^sub>2) = E t;\n        \\<And>T\\<^sub>0.\n           \\<Gamma> \\<turnstile> t : T\\<^sub>0 \\<Longrightarrow>\n           \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> E\n          t' : \\<down>\\<^sub>\\<tau> \\<parallel>\\<Delta>\\<parallel> 0\n                T\\<^sub>2\n 6. \\<And>\\<Gamma> fs fTs E t t'.\n       \\<lbrakk>\\<Gamma> \\<turnstile> fs [:] fTs;\n        \\<And>E\\<^sub>r t t'.\n           \\<lbrakk>E\\<^sub>r \\<in> rctxt; fs = E\\<^sub>r t;\n            \\<And>T\\<^sub>0.\n               \\<Gamma> \\<turnstile> t : T\\<^sub>0 \\<Longrightarrow>\n               \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n           \\<Longrightarrow> \\<Gamma> \\<turnstile> E\\<^sub>r t' [:] fTs;\n        E \\<in> ctxt; Rcd fs = E t;\n        \\<And>T\\<^sub>0.\n           \\<Gamma> \\<turnstile> t : T\\<^sub>0 \\<Longrightarrow>\n           \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> E t' : RcdT fTs\n 7. \\<And>\\<Gamma> t fTs l T E ta t'.\n       \\<lbrakk>\\<Gamma> \\<turnstile> t : RcdT fTs;\n        \\<And>E ta t'.\n           \\<lbrakk>E \\<in> ctxt; t = E ta;\n            \\<And>T\\<^sub>0.\n               \\<Gamma> \\<turnstile> ta : T\\<^sub>0 \\<Longrightarrow>\n               \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n           \\<Longrightarrow> \\<Gamma> \\<turnstile> E t' : RcdT fTs;\n        fTs\\<langle>l\\<rangle>\\<^sub>? = \\<lfloor>T\\<rfloor>; E \\<in> ctxt;\n        t..l = E ta;\n        \\<And>T\\<^sub>0.\n           \\<Gamma> \\<turnstile> ta : T\\<^sub>0 \\<Longrightarrow>\n           \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> E t' : T\n 8. \\<And>\\<Gamma> E\\<^sub>r t t'.\n       \\<lbrakk>\\<Gamma> \\<turnstile>\\<^sub>w\\<^sub>f;\n        E\\<^sub>r \\<in> rctxt; [] = E\\<^sub>r t;\n        \\<And>T\\<^sub>0.\n           \\<Gamma> \\<turnstile> t : T\\<^sub>0 \\<Longrightarrow>\n           \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> E\\<^sub>r t' [:] []\n 9. \\<And>\\<Gamma> t T fs fTs l E\\<^sub>r ta t'.\n       \\<lbrakk>\\<Gamma> \\<turnstile> t : T;\n        \\<And>E ta t'.\n           \\<lbrakk>E \\<in> ctxt; t = E ta;\n            \\<And>T\\<^sub>0.\n               \\<Gamma> \\<turnstile> ta : T\\<^sub>0 \\<Longrightarrow>\n               \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n           \\<Longrightarrow> \\<Gamma> \\<turnstile> E t' : T;\n        \\<Gamma> \\<turnstile> fs [:] fTs;\n        \\<And>E\\<^sub>r t t'.\n           \\<lbrakk>E\\<^sub>r \\<in> rctxt; fs = E\\<^sub>r t;\n            \\<And>T\\<^sub>0.\n               \\<Gamma> \\<turnstile> t : T\\<^sub>0 \\<Longrightarrow>\n               \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n           \\<Longrightarrow> \\<Gamma> \\<turnstile> E\\<^sub>r t' [:] fTs;\n        fs\\<langle>l\\<rangle>\\<^sub>? = \\<bottom>; E\\<^sub>r \\<in> rctxt;\n        (l, t) \\<Colon> fs = E\\<^sub>r ta;\n        \\<And>T\\<^sub>0.\n           \\<Gamma> \\<turnstile> ta : T\\<^sub>0 \\<Longrightarrow>\n           \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> E\\<^sub>r\n          t' [:] (l, T) \\<Colon>\n                         fTs", "from \\<open>E \\<in> ctxt\\<close>"], ["proof (chain)\npicking this:\n  E \\<in> ctxt", "show ?case"], ["proof (prove)\nusing this:\n  E \\<in> ctxt\n\ngoal (1 subgoal):\n 1. \\<Gamma> \\<turnstile> E t' : T\\<^sub>1\\<^sub>2", "using T_App"], ["proof (prove)\nusing this:\n  E \\<in> ctxt\n  \\<Gamma> \\<turnstile> t\\<^sub>1 : T\\<^sub>1\\<^sub>1 \\<rightarrow>\n                                    T\\<^sub>1\\<^sub>2\n  \\<lbrakk>?E \\<in> ctxt; t\\<^sub>1 = ?E ?t;\n   \\<And>T\\<^sub>0.\n      \\<Gamma> \\<turnstile> ?t : T\\<^sub>0 \\<Longrightarrow>\n      \\<Gamma> \\<turnstile> ?t' : T\\<^sub>0\\<rbrakk>\n  \\<Longrightarrow> \\<Gamma> \\<turnstile> ?E\n     ?t' : T\\<^sub>1\\<^sub>1 \\<rightarrow> T\\<^sub>1\\<^sub>2\n  \\<Gamma> \\<turnstile> t\\<^sub>2 : T\\<^sub>1\\<^sub>1\n  \\<lbrakk>?E \\<in> ctxt; t\\<^sub>2 = ?E ?t;\n   \\<And>T\\<^sub>0.\n      \\<Gamma> \\<turnstile> ?t : T\\<^sub>0 \\<Longrightarrow>\n      \\<Gamma> \\<turnstile> ?t' : T\\<^sub>0\\<rbrakk>\n  \\<Longrightarrow> \\<Gamma> \\<turnstile> ?E ?t' : T\\<^sub>1\\<^sub>1\n  E \\<in> ctxt\n  t\\<^sub>1 \\<bullet> t\\<^sub>2 = E t\n  \\<Gamma> \\<turnstile> t : ?T\\<^sub>0 \\<Longrightarrow>\n  \\<Gamma> \\<turnstile> t' : ?T\\<^sub>0\n\ngoal (1 subgoal):\n 1. \\<Gamma> \\<turnstile> E t' : T\\<^sub>1\\<^sub>2", "by cases (simp_all, (blast intro: typing_typings.intros)+)"], ["proof (state)\nthis:\n  \\<Gamma> \\<turnstile> E t' : T\\<^sub>1\\<^sub>2\n\ngoal (8 subgoals):\n 1. \\<And>T\\<^sub>1 \\<Gamma> t\\<^sub>2 T\\<^sub>2 E t t'.\n       \\<lbrakk>TVarB T\\<^sub>1 \\<Colon>\n                \\<Gamma> \\<turnstile> t\\<^sub>2 : T\\<^sub>2;\n        \\<And>E t t'.\n           \\<lbrakk>E \\<in> ctxt; t\\<^sub>2 = E t;\n            \\<And>T\\<^sub>0.\n               TVarB T\\<^sub>1 \\<Colon>\n               \\<Gamma> \\<turnstile> t : T\\<^sub>0 \\<Longrightarrow>\n               TVarB T\\<^sub>1 \\<Colon>\n               \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n           \\<Longrightarrow> TVarB T\\<^sub>1 \\<Colon>\n                             \\<Gamma> \\<turnstile> E t' : T\\<^sub>2;\n        E \\<in> ctxt; (\\<lambda><:T\\<^sub>1. t\\<^sub>2) = E t;\n        \\<And>T\\<^sub>0.\n           \\<Gamma> \\<turnstile> t : T\\<^sub>0 \\<Longrightarrow>\n           \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> E\n          t' : (\\<forall><:T\\<^sub>1. T\\<^sub>2)\n 2. \\<And>\\<Gamma> t\\<^sub>1 T\\<^sub>1\\<^sub>1 T\\<^sub>1\\<^sub>2 T\\<^sub>2 E\n       t t'.\n       \\<lbrakk>\\<Gamma> \\<turnstile> t\\<^sub>1 : (\\<forall><:T\\<^sub>1\\<^sub>1.\n                T\\<^sub>1\\<^sub>2);\n        \\<And>E t t'.\n           \\<lbrakk>E \\<in> ctxt; t\\<^sub>1 = E t;\n            \\<And>T\\<^sub>0.\n               \\<Gamma> \\<turnstile> t : T\\<^sub>0 \\<Longrightarrow>\n               \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n           \\<Longrightarrow> \\<Gamma> \\<turnstile> E\n              t' : (\\<forall><:T\\<^sub>1\\<^sub>1. T\\<^sub>1\\<^sub>2);\n        \\<Gamma> \\<turnstile> T\\<^sub>2 <: T\\<^sub>1\\<^sub>1; E \\<in> ctxt;\n        t\\<^sub>1 \\<bullet>\\<^sub>\\<tau> T\\<^sub>2 = E t;\n        \\<And>T\\<^sub>0.\n           \\<Gamma> \\<turnstile> t : T\\<^sub>0 \\<Longrightarrow>\n           \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> E\n          t' : T\\<^sub>1\\<^sub>2[0 \\<mapsto>\\<^sub>\\<tau> T\\<^sub>2]\\<^sub>\\<tau>\n 3. \\<And>\\<Gamma> t S T E ta t'.\n       \\<lbrakk>\\<Gamma> \\<turnstile> t : S;\n        \\<And>E ta t'.\n           \\<lbrakk>E \\<in> ctxt; t = E ta;\n            \\<And>T\\<^sub>0.\n               \\<Gamma> \\<turnstile> ta : T\\<^sub>0 \\<Longrightarrow>\n               \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n           \\<Longrightarrow> \\<Gamma> \\<turnstile> E t' : S;\n        \\<Gamma> \\<turnstile> S <: T; E \\<in> ctxt; t = E ta;\n        \\<And>T\\<^sub>0.\n           \\<Gamma> \\<turnstile> ta : T\\<^sub>0 \\<Longrightarrow>\n           \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> E t' : T\n 4. \\<And>\\<Gamma> t\\<^sub>1 T\\<^sub>1 p \\<Delta> t\\<^sub>2 T\\<^sub>2 E t\n       t'.\n       \\<lbrakk>\\<Gamma> \\<turnstile> t\\<^sub>1 : T\\<^sub>1;\n        \\<And>E t t'.\n           \\<lbrakk>E \\<in> ctxt; t\\<^sub>1 = E t;\n            \\<And>T\\<^sub>0.\n               \\<Gamma> \\<turnstile> t : T\\<^sub>0 \\<Longrightarrow>\n               \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n           \\<Longrightarrow> \\<Gamma> \\<turnstile> E t' : T\\<^sub>1;\n        \\<turnstile> p : T\\<^sub>1 \\<Rightarrow> \\<Delta>;\n        \\<Delta> @ \\<Gamma> \\<turnstile> t\\<^sub>2 : T\\<^sub>2;\n        \\<And>E t t'.\n           \\<lbrakk>E \\<in> ctxt; t\\<^sub>2 = E t;\n            \\<And>T\\<^sub>0.\n               \\<Delta> @\n               \\<Gamma> \\<turnstile> t : T\\<^sub>0 \\<Longrightarrow>\n               \\<Delta> @ \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n           \\<Longrightarrow> \\<Delta> @\n                             \\<Gamma> \\<turnstile> E t' : T\\<^sub>2;\n        E \\<in> ctxt; (LET p = t\\<^sub>1 IN t\\<^sub>2) = E t;\n        \\<And>T\\<^sub>0.\n           \\<Gamma> \\<turnstile> t : T\\<^sub>0 \\<Longrightarrow>\n           \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> E\n          t' : \\<down>\\<^sub>\\<tau> \\<parallel>\\<Delta>\\<parallel> 0\n                T\\<^sub>2\n 5. \\<And>\\<Gamma> fs fTs E t t'.\n       \\<lbrakk>\\<Gamma> \\<turnstile> fs [:] fTs;\n        \\<And>E\\<^sub>r t t'.\n           \\<lbrakk>E\\<^sub>r \\<in> rctxt; fs = E\\<^sub>r t;\n            \\<And>T\\<^sub>0.\n               \\<Gamma> \\<turnstile> t : T\\<^sub>0 \\<Longrightarrow>\n               \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n           \\<Longrightarrow> \\<Gamma> \\<turnstile> E\\<^sub>r t' [:] fTs;\n        E \\<in> ctxt; Rcd fs = E t;\n        \\<And>T\\<^sub>0.\n           \\<Gamma> \\<turnstile> t : T\\<^sub>0 \\<Longrightarrow>\n           \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> E t' : RcdT fTs\n 6. \\<And>\\<Gamma> t fTs l T E ta t'.\n       \\<lbrakk>\\<Gamma> \\<turnstile> t : RcdT fTs;\n        \\<And>E ta t'.\n           \\<lbrakk>E \\<in> ctxt; t = E ta;\n            \\<And>T\\<^sub>0.\n               \\<Gamma> \\<turnstile> ta : T\\<^sub>0 \\<Longrightarrow>\n               \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n           \\<Longrightarrow> \\<Gamma> \\<turnstile> E t' : RcdT fTs;\n        fTs\\<langle>l\\<rangle>\\<^sub>? = \\<lfloor>T\\<rfloor>; E \\<in> ctxt;\n        t..l = E ta;\n        \\<And>T\\<^sub>0.\n           \\<Gamma> \\<turnstile> ta : T\\<^sub>0 \\<Longrightarrow>\n           \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> E t' : T\n 7. \\<And>\\<Gamma> E\\<^sub>r t t'.\n       \\<lbrakk>\\<Gamma> \\<turnstile>\\<^sub>w\\<^sub>f;\n        E\\<^sub>r \\<in> rctxt; [] = E\\<^sub>r t;\n        \\<And>T\\<^sub>0.\n           \\<Gamma> \\<turnstile> t : T\\<^sub>0 \\<Longrightarrow>\n           \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> E\\<^sub>r t' [:] []\n 8. \\<And>\\<Gamma> t T fs fTs l E\\<^sub>r ta t'.\n       \\<lbrakk>\\<Gamma> \\<turnstile> t : T;\n        \\<And>E ta t'.\n           \\<lbrakk>E \\<in> ctxt; t = E ta;\n            \\<And>T\\<^sub>0.\n               \\<Gamma> \\<turnstile> ta : T\\<^sub>0 \\<Longrightarrow>\n               \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n           \\<Longrightarrow> \\<Gamma> \\<turnstile> E t' : T;\n        \\<Gamma> \\<turnstile> fs [:] fTs;\n        \\<And>E\\<^sub>r t t'.\n           \\<lbrakk>E\\<^sub>r \\<in> rctxt; fs = E\\<^sub>r t;\n            \\<And>T\\<^sub>0.\n               \\<Gamma> \\<turnstile> t : T\\<^sub>0 \\<Longrightarrow>\n               \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n           \\<Longrightarrow> \\<Gamma> \\<turnstile> E\\<^sub>r t' [:] fTs;\n        fs\\<langle>l\\<rangle>\\<^sub>? = \\<bottom>; E\\<^sub>r \\<in> rctxt;\n        (l, t) \\<Colon> fs = E\\<^sub>r ta;\n        \\<And>T\\<^sub>0.\n           \\<Gamma> \\<turnstile> ta : T\\<^sub>0 \\<Longrightarrow>\n           \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> E\\<^sub>r\n          t' [:] (l, T) \\<Colon>\n                         fTs", "next"], ["proof (state)\ngoal (8 subgoals):\n 1. \\<And>T\\<^sub>1 \\<Gamma> t\\<^sub>2 T\\<^sub>2 E t t'.\n       \\<lbrakk>TVarB T\\<^sub>1 \\<Colon>\n                \\<Gamma> \\<turnstile> t\\<^sub>2 : T\\<^sub>2;\n        \\<And>E t t'.\n           \\<lbrakk>E \\<in> ctxt; t\\<^sub>2 = E t;\n            \\<And>T\\<^sub>0.\n               TVarB T\\<^sub>1 \\<Colon>\n               \\<Gamma> \\<turnstile> t : T\\<^sub>0 \\<Longrightarrow>\n               TVarB T\\<^sub>1 \\<Colon>\n               \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n           \\<Longrightarrow> TVarB T\\<^sub>1 \\<Colon>\n                             \\<Gamma> \\<turnstile> E t' : T\\<^sub>2;\n        E \\<in> ctxt; (\\<lambda><:T\\<^sub>1. t\\<^sub>2) = E t;\n        \\<And>T\\<^sub>0.\n           \\<Gamma> \\<turnstile> t : T\\<^sub>0 \\<Longrightarrow>\n           \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> E\n          t' : (\\<forall><:T\\<^sub>1. T\\<^sub>2)\n 2. \\<And>\\<Gamma> t\\<^sub>1 T\\<^sub>1\\<^sub>1 T\\<^sub>1\\<^sub>2 T\\<^sub>2 E\n       t t'.\n       \\<lbrakk>\\<Gamma> \\<turnstile> t\\<^sub>1 : (\\<forall><:T\\<^sub>1\\<^sub>1.\n                T\\<^sub>1\\<^sub>2);\n        \\<And>E t t'.\n           \\<lbrakk>E \\<in> ctxt; t\\<^sub>1 = E t;\n            \\<And>T\\<^sub>0.\n               \\<Gamma> \\<turnstile> t : T\\<^sub>0 \\<Longrightarrow>\n               \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n           \\<Longrightarrow> \\<Gamma> \\<turnstile> E\n              t' : (\\<forall><:T\\<^sub>1\\<^sub>1. T\\<^sub>1\\<^sub>2);\n        \\<Gamma> \\<turnstile> T\\<^sub>2 <: T\\<^sub>1\\<^sub>1; E \\<in> ctxt;\n        t\\<^sub>1 \\<bullet>\\<^sub>\\<tau> T\\<^sub>2 = E t;\n        \\<And>T\\<^sub>0.\n           \\<Gamma> \\<turnstile> t : T\\<^sub>0 \\<Longrightarrow>\n           \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> E\n          t' : T\\<^sub>1\\<^sub>2[0 \\<mapsto>\\<^sub>\\<tau> T\\<^sub>2]\\<^sub>\\<tau>\n 3. \\<And>\\<Gamma> t S T E ta t'.\n       \\<lbrakk>\\<Gamma> \\<turnstile> t : S;\n        \\<And>E ta t'.\n           \\<lbrakk>E \\<in> ctxt; t = E ta;\n            \\<And>T\\<^sub>0.\n               \\<Gamma> \\<turnstile> ta : T\\<^sub>0 \\<Longrightarrow>\n               \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n           \\<Longrightarrow> \\<Gamma> \\<turnstile> E t' : S;\n        \\<Gamma> \\<turnstile> S <: T; E \\<in> ctxt; t = E ta;\n        \\<And>T\\<^sub>0.\n           \\<Gamma> \\<turnstile> ta : T\\<^sub>0 \\<Longrightarrow>\n           \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> E t' : T\n 4. \\<And>\\<Gamma> t\\<^sub>1 T\\<^sub>1 p \\<Delta> t\\<^sub>2 T\\<^sub>2 E t\n       t'.\n       \\<lbrakk>\\<Gamma> \\<turnstile> t\\<^sub>1 : T\\<^sub>1;\n        \\<And>E t t'.\n           \\<lbrakk>E \\<in> ctxt; t\\<^sub>1 = E t;\n            \\<And>T\\<^sub>0.\n               \\<Gamma> \\<turnstile> t : T\\<^sub>0 \\<Longrightarrow>\n               \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n           \\<Longrightarrow> \\<Gamma> \\<turnstile> E t' : T\\<^sub>1;\n        \\<turnstile> p : T\\<^sub>1 \\<Rightarrow> \\<Delta>;\n        \\<Delta> @ \\<Gamma> \\<turnstile> t\\<^sub>2 : T\\<^sub>2;\n        \\<And>E t t'.\n           \\<lbrakk>E \\<in> ctxt; t\\<^sub>2 = E t;\n            \\<And>T\\<^sub>0.\n               \\<Delta> @\n               \\<Gamma> \\<turnstile> t : T\\<^sub>0 \\<Longrightarrow>\n               \\<Delta> @ \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n           \\<Longrightarrow> \\<Delta> @\n                             \\<Gamma> \\<turnstile> E t' : T\\<^sub>2;\n        E \\<in> ctxt; (LET p = t\\<^sub>1 IN t\\<^sub>2) = E t;\n        \\<And>T\\<^sub>0.\n           \\<Gamma> \\<turnstile> t : T\\<^sub>0 \\<Longrightarrow>\n           \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> E\n          t' : \\<down>\\<^sub>\\<tau> \\<parallel>\\<Delta>\\<parallel> 0\n                T\\<^sub>2\n 5. \\<And>\\<Gamma> fs fTs E t t'.\n       \\<lbrakk>\\<Gamma> \\<turnstile> fs [:] fTs;\n        \\<And>E\\<^sub>r t t'.\n           \\<lbrakk>E\\<^sub>r \\<in> rctxt; fs = E\\<^sub>r t;\n            \\<And>T\\<^sub>0.\n               \\<Gamma> \\<turnstile> t : T\\<^sub>0 \\<Longrightarrow>\n               \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n           \\<Longrightarrow> \\<Gamma> \\<turnstile> E\\<^sub>r t' [:] fTs;\n        E \\<in> ctxt; Rcd fs = E t;\n        \\<And>T\\<^sub>0.\n           \\<Gamma> \\<turnstile> t : T\\<^sub>0 \\<Longrightarrow>\n           \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> E t' : RcdT fTs\n 6. \\<And>\\<Gamma> t fTs l T E ta t'.\n       \\<lbrakk>\\<Gamma> \\<turnstile> t : RcdT fTs;\n        \\<And>E ta t'.\n           \\<lbrakk>E \\<in> ctxt; t = E ta;\n            \\<And>T\\<^sub>0.\n               \\<Gamma> \\<turnstile> ta : T\\<^sub>0 \\<Longrightarrow>\n               \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n           \\<Longrightarrow> \\<Gamma> \\<turnstile> E t' : RcdT fTs;\n        fTs\\<langle>l\\<rangle>\\<^sub>? = \\<lfloor>T\\<rfloor>; E \\<in> ctxt;\n        t..l = E ta;\n        \\<And>T\\<^sub>0.\n           \\<Gamma> \\<turnstile> ta : T\\<^sub>0 \\<Longrightarrow>\n           \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> E t' : T\n 7. \\<And>\\<Gamma> E\\<^sub>r t t'.\n       \\<lbrakk>\\<Gamma> \\<turnstile>\\<^sub>w\\<^sub>f;\n        E\\<^sub>r \\<in> rctxt; [] = E\\<^sub>r t;\n        \\<And>T\\<^sub>0.\n           \\<Gamma> \\<turnstile> t : T\\<^sub>0 \\<Longrightarrow>\n           \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> E\\<^sub>r t' [:] []\n 8. \\<And>\\<Gamma> t T fs fTs l E\\<^sub>r ta t'.\n       \\<lbrakk>\\<Gamma> \\<turnstile> t : T;\n        \\<And>E ta t'.\n           \\<lbrakk>E \\<in> ctxt; t = E ta;\n            \\<And>T\\<^sub>0.\n               \\<Gamma> \\<turnstile> ta : T\\<^sub>0 \\<Longrightarrow>\n               \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n           \\<Longrightarrow> \\<Gamma> \\<turnstile> E t' : T;\n        \\<Gamma> \\<turnstile> fs [:] fTs;\n        \\<And>E\\<^sub>r t t'.\n           \\<lbrakk>E\\<^sub>r \\<in> rctxt; fs = E\\<^sub>r t;\n            \\<And>T\\<^sub>0.\n               \\<Gamma> \\<turnstile> t : T\\<^sub>0 \\<Longrightarrow>\n               \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n           \\<Longrightarrow> \\<Gamma> \\<turnstile> E\\<^sub>r t' [:] fTs;\n        fs\\<langle>l\\<rangle>\\<^sub>? = \\<bottom>; E\\<^sub>r \\<in> rctxt;\n        (l, t) \\<Colon> fs = E\\<^sub>r ta;\n        \\<And>T\\<^sub>0.\n           \\<Gamma> \\<turnstile> ta : T\\<^sub>0 \\<Longrightarrow>\n           \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> E\\<^sub>r\n          t' [:] (l, T) \\<Colon>\n                         fTs", "case (T_TAbs T\\<^sub>1 \\<Gamma> t\\<^sub>2 T\\<^sub>2 E t t')"], ["proof (state)\nthis:\n  TVarB T\\<^sub>1 \\<Colon> \\<Gamma> \\<turnstile> t\\<^sub>2 : T\\<^sub>2\n  \\<lbrakk>?E \\<in> ctxt; t\\<^sub>2 = ?E ?t;\n   \\<And>T\\<^sub>0.\n      TVarB T\\<^sub>1 \\<Colon>\n      \\<Gamma> \\<turnstile> ?t : T\\<^sub>0 \\<Longrightarrow>\n      TVarB T\\<^sub>1 \\<Colon>\n      \\<Gamma> \\<turnstile> ?t' : T\\<^sub>0\\<rbrakk>\n  \\<Longrightarrow> TVarB T\\<^sub>1 \\<Colon>\n                    \\<Gamma> \\<turnstile> ?E ?t' : T\\<^sub>2\n  E \\<in> ctxt\n  (\\<lambda><:T\\<^sub>1. t\\<^sub>2) = E t\n  \\<Gamma> \\<turnstile> t : ?T\\<^sub>0 \\<Longrightarrow>\n  \\<Gamma> \\<turnstile> t' : ?T\\<^sub>0\n\ngoal (8 subgoals):\n 1. \\<And>T\\<^sub>1 \\<Gamma> t\\<^sub>2 T\\<^sub>2 E t t'.\n       \\<lbrakk>TVarB T\\<^sub>1 \\<Colon>\n                \\<Gamma> \\<turnstile> t\\<^sub>2 : T\\<^sub>2;\n        \\<And>E t t'.\n           \\<lbrakk>E \\<in> ctxt; t\\<^sub>2 = E t;\n            \\<And>T\\<^sub>0.\n               TVarB T\\<^sub>1 \\<Colon>\n               \\<Gamma> \\<turnstile> t : T\\<^sub>0 \\<Longrightarrow>\n               TVarB T\\<^sub>1 \\<Colon>\n               \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n           \\<Longrightarrow> TVarB T\\<^sub>1 \\<Colon>\n                             \\<Gamma> \\<turnstile> E t' : T\\<^sub>2;\n        E \\<in> ctxt; (\\<lambda><:T\\<^sub>1. t\\<^sub>2) = E t;\n        \\<And>T\\<^sub>0.\n           \\<Gamma> \\<turnstile> t : T\\<^sub>0 \\<Longrightarrow>\n           \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> E\n          t' : (\\<forall><:T\\<^sub>1. T\\<^sub>2)\n 2. \\<And>\\<Gamma> t\\<^sub>1 T\\<^sub>1\\<^sub>1 T\\<^sub>1\\<^sub>2 T\\<^sub>2 E\n       t t'.\n       \\<lbrakk>\\<Gamma> \\<turnstile> t\\<^sub>1 : (\\<forall><:T\\<^sub>1\\<^sub>1.\n                T\\<^sub>1\\<^sub>2);\n        \\<And>E t t'.\n           \\<lbrakk>E \\<in> ctxt; t\\<^sub>1 = E t;\n            \\<And>T\\<^sub>0.\n               \\<Gamma> \\<turnstile> t : T\\<^sub>0 \\<Longrightarrow>\n               \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n           \\<Longrightarrow> \\<Gamma> \\<turnstile> E\n              t' : (\\<forall><:T\\<^sub>1\\<^sub>1. T\\<^sub>1\\<^sub>2);\n        \\<Gamma> \\<turnstile> T\\<^sub>2 <: T\\<^sub>1\\<^sub>1; E \\<in> ctxt;\n        t\\<^sub>1 \\<bullet>\\<^sub>\\<tau> T\\<^sub>2 = E t;\n        \\<And>T\\<^sub>0.\n           \\<Gamma> \\<turnstile> t : T\\<^sub>0 \\<Longrightarrow>\n           \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> E\n          t' : T\\<^sub>1\\<^sub>2[0 \\<mapsto>\\<^sub>\\<tau> T\\<^sub>2]\\<^sub>\\<tau>\n 3. \\<And>\\<Gamma> t S T E ta t'.\n       \\<lbrakk>\\<Gamma> \\<turnstile> t : S;\n        \\<And>E ta t'.\n           \\<lbrakk>E \\<in> ctxt; t = E ta;\n            \\<And>T\\<^sub>0.\n               \\<Gamma> \\<turnstile> ta : T\\<^sub>0 \\<Longrightarrow>\n               \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n           \\<Longrightarrow> \\<Gamma> \\<turnstile> E t' : S;\n        \\<Gamma> \\<turnstile> S <: T; E \\<in> ctxt; t = E ta;\n        \\<And>T\\<^sub>0.\n           \\<Gamma> \\<turnstile> ta : T\\<^sub>0 \\<Longrightarrow>\n           \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> E t' : T\n 4. \\<And>\\<Gamma> t\\<^sub>1 T\\<^sub>1 p \\<Delta> t\\<^sub>2 T\\<^sub>2 E t\n       t'.\n       \\<lbrakk>\\<Gamma> \\<turnstile> t\\<^sub>1 : T\\<^sub>1;\n        \\<And>E t t'.\n           \\<lbrakk>E \\<in> ctxt; t\\<^sub>1 = E t;\n            \\<And>T\\<^sub>0.\n               \\<Gamma> \\<turnstile> t : T\\<^sub>0 \\<Longrightarrow>\n               \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n           \\<Longrightarrow> \\<Gamma> \\<turnstile> E t' : T\\<^sub>1;\n        \\<turnstile> p : T\\<^sub>1 \\<Rightarrow> \\<Delta>;\n        \\<Delta> @ \\<Gamma> \\<turnstile> t\\<^sub>2 : T\\<^sub>2;\n        \\<And>E t t'.\n           \\<lbrakk>E \\<in> ctxt; t\\<^sub>2 = E t;\n            \\<And>T\\<^sub>0.\n               \\<Delta> @\n               \\<Gamma> \\<turnstile> t : T\\<^sub>0 \\<Longrightarrow>\n               \\<Delta> @ \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n           \\<Longrightarrow> \\<Delta> @\n                             \\<Gamma> \\<turnstile> E t' : T\\<^sub>2;\n        E \\<in> ctxt; (LET p = t\\<^sub>1 IN t\\<^sub>2) = E t;\n        \\<And>T\\<^sub>0.\n           \\<Gamma> \\<turnstile> t : T\\<^sub>0 \\<Longrightarrow>\n           \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> E\n          t' : \\<down>\\<^sub>\\<tau> \\<parallel>\\<Delta>\\<parallel> 0\n                T\\<^sub>2\n 5. \\<And>\\<Gamma> fs fTs E t t'.\n       \\<lbrakk>\\<Gamma> \\<turnstile> fs [:] fTs;\n        \\<And>E\\<^sub>r t t'.\n           \\<lbrakk>E\\<^sub>r \\<in> rctxt; fs = E\\<^sub>r t;\n            \\<And>T\\<^sub>0.\n               \\<Gamma> \\<turnstile> t : T\\<^sub>0 \\<Longrightarrow>\n               \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n           \\<Longrightarrow> \\<Gamma> \\<turnstile> E\\<^sub>r t' [:] fTs;\n        E \\<in> ctxt; Rcd fs = E t;\n        \\<And>T\\<^sub>0.\n           \\<Gamma> \\<turnstile> t : T\\<^sub>0 \\<Longrightarrow>\n           \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> E t' : RcdT fTs\n 6. \\<And>\\<Gamma> t fTs l T E ta t'.\n       \\<lbrakk>\\<Gamma> \\<turnstile> t : RcdT fTs;\n        \\<And>E ta t'.\n           \\<lbrakk>E \\<in> ctxt; t = E ta;\n            \\<And>T\\<^sub>0.\n               \\<Gamma> \\<turnstile> ta : T\\<^sub>0 \\<Longrightarrow>\n               \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n           \\<Longrightarrow> \\<Gamma> \\<turnstile> E t' : RcdT fTs;\n        fTs\\<langle>l\\<rangle>\\<^sub>? = \\<lfloor>T\\<rfloor>; E \\<in> ctxt;\n        t..l = E ta;\n        \\<And>T\\<^sub>0.\n           \\<Gamma> \\<turnstile> ta : T\\<^sub>0 \\<Longrightarrow>\n           \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> E t' : T\n 7. \\<And>\\<Gamma> E\\<^sub>r t t'.\n       \\<lbrakk>\\<Gamma> \\<turnstile>\\<^sub>w\\<^sub>f;\n        E\\<^sub>r \\<in> rctxt; [] = E\\<^sub>r t;\n        \\<And>T\\<^sub>0.\n           \\<Gamma> \\<turnstile> t : T\\<^sub>0 \\<Longrightarrow>\n           \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> E\\<^sub>r t' [:] []\n 8. \\<And>\\<Gamma> t T fs fTs l E\\<^sub>r ta t'.\n       \\<lbrakk>\\<Gamma> \\<turnstile> t : T;\n        \\<And>E ta t'.\n           \\<lbrakk>E \\<in> ctxt; t = E ta;\n            \\<And>T\\<^sub>0.\n               \\<Gamma> \\<turnstile> ta : T\\<^sub>0 \\<Longrightarrow>\n               \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n           \\<Longrightarrow> \\<Gamma> \\<turnstile> E t' : T;\n        \\<Gamma> \\<turnstile> fs [:] fTs;\n        \\<And>E\\<^sub>r t t'.\n           \\<lbrakk>E\\<^sub>r \\<in> rctxt; fs = E\\<^sub>r t;\n            \\<And>T\\<^sub>0.\n               \\<Gamma> \\<turnstile> t : T\\<^sub>0 \\<Longrightarrow>\n               \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n           \\<Longrightarrow> \\<Gamma> \\<turnstile> E\\<^sub>r t' [:] fTs;\n        fs\\<langle>l\\<rangle>\\<^sub>? = \\<bottom>; E\\<^sub>r \\<in> rctxt;\n        (l, t) \\<Colon> fs = E\\<^sub>r ta;\n        \\<And>T\\<^sub>0.\n           \\<Gamma> \\<turnstile> ta : T\\<^sub>0 \\<Longrightarrow>\n           \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> E\\<^sub>r\n          t' [:] (l, T) \\<Colon>\n                         fTs", "from \\<open>E \\<in> ctxt\\<close>"], ["proof (chain)\npicking this:\n  E \\<in> ctxt", "have \"E = (\\<lambda>t. t)\""], ["proof (prove)\nusing this:\n  E \\<in> ctxt\n\ngoal (1 subgoal):\n 1. E = (\\<lambda>t. t)", "using T_TAbs"], ["proof (prove)\nusing this:\n  E \\<in> ctxt\n  TVarB T\\<^sub>1 \\<Colon> \\<Gamma> \\<turnstile> t\\<^sub>2 : T\\<^sub>2\n  \\<lbrakk>?E \\<in> ctxt; t\\<^sub>2 = ?E ?t;\n   \\<And>T\\<^sub>0.\n      TVarB T\\<^sub>1 \\<Colon>\n      \\<Gamma> \\<turnstile> ?t : T\\<^sub>0 \\<Longrightarrow>\n      TVarB T\\<^sub>1 \\<Colon>\n      \\<Gamma> \\<turnstile> ?t' : T\\<^sub>0\\<rbrakk>\n  \\<Longrightarrow> TVarB T\\<^sub>1 \\<Colon>\n                    \\<Gamma> \\<turnstile> ?E ?t' : T\\<^sub>2\n  E \\<in> ctxt\n  (\\<lambda><:T\\<^sub>1. t\\<^sub>2) = E t\n  \\<Gamma> \\<turnstile> t : ?T\\<^sub>0 \\<Longrightarrow>\n  \\<Gamma> \\<turnstile> t' : ?T\\<^sub>0\n\ngoal (1 subgoal):\n 1. E = (\\<lambda>t. t)", "by cases simp_all"], ["proof (state)\nthis:\n  E = (\\<lambda>t. t)\n\ngoal (8 subgoals):\n 1. \\<And>T\\<^sub>1 \\<Gamma> t\\<^sub>2 T\\<^sub>2 E t t'.\n       \\<lbrakk>TVarB T\\<^sub>1 \\<Colon>\n                \\<Gamma> \\<turnstile> t\\<^sub>2 : T\\<^sub>2;\n        \\<And>E t t'.\n           \\<lbrakk>E \\<in> ctxt; t\\<^sub>2 = E t;\n            \\<And>T\\<^sub>0.\n               TVarB T\\<^sub>1 \\<Colon>\n               \\<Gamma> \\<turnstile> t : T\\<^sub>0 \\<Longrightarrow>\n               TVarB T\\<^sub>1 \\<Colon>\n               \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n           \\<Longrightarrow> TVarB T\\<^sub>1 \\<Colon>\n                             \\<Gamma> \\<turnstile> E t' : T\\<^sub>2;\n        E \\<in> ctxt; (\\<lambda><:T\\<^sub>1. t\\<^sub>2) = E t;\n        \\<And>T\\<^sub>0.\n           \\<Gamma> \\<turnstile> t : T\\<^sub>0 \\<Longrightarrow>\n           \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> E\n          t' : (\\<forall><:T\\<^sub>1. T\\<^sub>2)\n 2. \\<And>\\<Gamma> t\\<^sub>1 T\\<^sub>1\\<^sub>1 T\\<^sub>1\\<^sub>2 T\\<^sub>2 E\n       t t'.\n       \\<lbrakk>\\<Gamma> \\<turnstile> t\\<^sub>1 : (\\<forall><:T\\<^sub>1\\<^sub>1.\n                T\\<^sub>1\\<^sub>2);\n        \\<And>E t t'.\n           \\<lbrakk>E \\<in> ctxt; t\\<^sub>1 = E t;\n            \\<And>T\\<^sub>0.\n               \\<Gamma> \\<turnstile> t : T\\<^sub>0 \\<Longrightarrow>\n               \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n           \\<Longrightarrow> \\<Gamma> \\<turnstile> E\n              t' : (\\<forall><:T\\<^sub>1\\<^sub>1. T\\<^sub>1\\<^sub>2);\n        \\<Gamma> \\<turnstile> T\\<^sub>2 <: T\\<^sub>1\\<^sub>1; E \\<in> ctxt;\n        t\\<^sub>1 \\<bullet>\\<^sub>\\<tau> T\\<^sub>2 = E t;\n        \\<And>T\\<^sub>0.\n           \\<Gamma> \\<turnstile> t : T\\<^sub>0 \\<Longrightarrow>\n           \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> E\n          t' : T\\<^sub>1\\<^sub>2[0 \\<mapsto>\\<^sub>\\<tau> T\\<^sub>2]\\<^sub>\\<tau>\n 3. \\<And>\\<Gamma> t S T E ta t'.\n       \\<lbrakk>\\<Gamma> \\<turnstile> t : S;\n        \\<And>E ta t'.\n           \\<lbrakk>E \\<in> ctxt; t = E ta;\n            \\<And>T\\<^sub>0.\n               \\<Gamma> \\<turnstile> ta : T\\<^sub>0 \\<Longrightarrow>\n               \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n           \\<Longrightarrow> \\<Gamma> \\<turnstile> E t' : S;\n        \\<Gamma> \\<turnstile> S <: T; E \\<in> ctxt; t = E ta;\n        \\<And>T\\<^sub>0.\n           \\<Gamma> \\<turnstile> ta : T\\<^sub>0 \\<Longrightarrow>\n           \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> E t' : T\n 4. \\<And>\\<Gamma> t\\<^sub>1 T\\<^sub>1 p \\<Delta> t\\<^sub>2 T\\<^sub>2 E t\n       t'.\n       \\<lbrakk>\\<Gamma> \\<turnstile> t\\<^sub>1 : T\\<^sub>1;\n        \\<And>E t t'.\n           \\<lbrakk>E \\<in> ctxt; t\\<^sub>1 = E t;\n            \\<And>T\\<^sub>0.\n               \\<Gamma> \\<turnstile> t : T\\<^sub>0 \\<Longrightarrow>\n               \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n           \\<Longrightarrow> \\<Gamma> \\<turnstile> E t' : T\\<^sub>1;\n        \\<turnstile> p : T\\<^sub>1 \\<Rightarrow> \\<Delta>;\n        \\<Delta> @ \\<Gamma> \\<turnstile> t\\<^sub>2 : T\\<^sub>2;\n        \\<And>E t t'.\n           \\<lbrakk>E \\<in> ctxt; t\\<^sub>2 = E t;\n            \\<And>T\\<^sub>0.\n               \\<Delta> @\n               \\<Gamma> \\<turnstile> t : T\\<^sub>0 \\<Longrightarrow>\n               \\<Delta> @ \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n           \\<Longrightarrow> \\<Delta> @\n                             \\<Gamma> \\<turnstile> E t' : T\\<^sub>2;\n        E \\<in> ctxt; (LET p = t\\<^sub>1 IN t\\<^sub>2) = E t;\n        \\<And>T\\<^sub>0.\n           \\<Gamma> \\<turnstile> t : T\\<^sub>0 \\<Longrightarrow>\n           \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> E\n          t' : \\<down>\\<^sub>\\<tau> \\<parallel>\\<Delta>\\<parallel> 0\n                T\\<^sub>2\n 5. \\<And>\\<Gamma> fs fTs E t t'.\n       \\<lbrakk>\\<Gamma> \\<turnstile> fs [:] fTs;\n        \\<And>E\\<^sub>r t t'.\n           \\<lbrakk>E\\<^sub>r \\<in> rctxt; fs = E\\<^sub>r t;\n            \\<And>T\\<^sub>0.\n               \\<Gamma> \\<turnstile> t : T\\<^sub>0 \\<Longrightarrow>\n               \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n           \\<Longrightarrow> \\<Gamma> \\<turnstile> E\\<^sub>r t' [:] fTs;\n        E \\<in> ctxt; Rcd fs = E t;\n        \\<And>T\\<^sub>0.\n           \\<Gamma> \\<turnstile> t : T\\<^sub>0 \\<Longrightarrow>\n           \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> E t' : RcdT fTs\n 6. \\<And>\\<Gamma> t fTs l T E ta t'.\n       \\<lbrakk>\\<Gamma> \\<turnstile> t : RcdT fTs;\n        \\<And>E ta t'.\n           \\<lbrakk>E \\<in> ctxt; t = E ta;\n            \\<And>T\\<^sub>0.\n               \\<Gamma> \\<turnstile> ta : T\\<^sub>0 \\<Longrightarrow>\n               \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n           \\<Longrightarrow> \\<Gamma> \\<turnstile> E t' : RcdT fTs;\n        fTs\\<langle>l\\<rangle>\\<^sub>? = \\<lfloor>T\\<rfloor>; E \\<in> ctxt;\n        t..l = E ta;\n        \\<And>T\\<^sub>0.\n           \\<Gamma> \\<turnstile> ta : T\\<^sub>0 \\<Longrightarrow>\n           \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> E t' : T\n 7. \\<And>\\<Gamma> E\\<^sub>r t t'.\n       \\<lbrakk>\\<Gamma> \\<turnstile>\\<^sub>w\\<^sub>f;\n        E\\<^sub>r \\<in> rctxt; [] = E\\<^sub>r t;\n        \\<And>T\\<^sub>0.\n           \\<Gamma> \\<turnstile> t : T\\<^sub>0 \\<Longrightarrow>\n           \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> E\\<^sub>r t' [:] []\n 8. \\<And>\\<Gamma> t T fs fTs l E\\<^sub>r ta t'.\n       \\<lbrakk>\\<Gamma> \\<turnstile> t : T;\n        \\<And>E ta t'.\n           \\<lbrakk>E \\<in> ctxt; t = E ta;\n            \\<And>T\\<^sub>0.\n               \\<Gamma> \\<turnstile> ta : T\\<^sub>0 \\<Longrightarrow>\n               \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n           \\<Longrightarrow> \\<Gamma> \\<turnstile> E t' : T;\n        \\<Gamma> \\<turnstile> fs [:] fTs;\n        \\<And>E\\<^sub>r t t'.\n           \\<lbrakk>E\\<^sub>r \\<in> rctxt; fs = E\\<^sub>r t;\n            \\<And>T\\<^sub>0.\n               \\<Gamma> \\<turnstile> t : T\\<^sub>0 \\<Longrightarrow>\n               \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n           \\<Longrightarrow> \\<Gamma> \\<turnstile> E\\<^sub>r t' [:] fTs;\n        fs\\<langle>l\\<rangle>\\<^sub>? = \\<bottom>; E\\<^sub>r \\<in> rctxt;\n        (l, t) \\<Colon> fs = E\\<^sub>r ta;\n        \\<And>T\\<^sub>0.\n           \\<Gamma> \\<turnstile> ta : T\\<^sub>0 \\<Longrightarrow>\n           \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> E\\<^sub>r\n          t' [:] (l, T) \\<Colon>\n                         fTs", "with T_TAbs"], ["proof (chain)\npicking this:\n  TVarB T\\<^sub>1 \\<Colon> \\<Gamma> \\<turnstile> t\\<^sub>2 : T\\<^sub>2\n  \\<lbrakk>?E \\<in> ctxt; t\\<^sub>2 = ?E ?t;\n   \\<And>T\\<^sub>0.\n      TVarB T\\<^sub>1 \\<Colon>\n      \\<Gamma> \\<turnstile> ?t : T\\<^sub>0 \\<Longrightarrow>\n      TVarB T\\<^sub>1 \\<Colon>\n      \\<Gamma> \\<turnstile> ?t' : T\\<^sub>0\\<rbrakk>\n  \\<Longrightarrow> TVarB T\\<^sub>1 \\<Colon>\n                    \\<Gamma> \\<turnstile> ?E ?t' : T\\<^sub>2\n  E \\<in> ctxt\n  (\\<lambda><:T\\<^sub>1. t\\<^sub>2) = E t\n  \\<Gamma> \\<turnstile> t : ?T\\<^sub>0 \\<Longrightarrow>\n  \\<Gamma> \\<turnstile> t' : ?T\\<^sub>0\n  E = (\\<lambda>t. t)", "show ?case"], ["proof (prove)\nusing this:\n  TVarB T\\<^sub>1 \\<Colon> \\<Gamma> \\<turnstile> t\\<^sub>2 : T\\<^sub>2\n  \\<lbrakk>?E \\<in> ctxt; t\\<^sub>2 = ?E ?t;\n   \\<And>T\\<^sub>0.\n      TVarB T\\<^sub>1 \\<Colon>\n      \\<Gamma> \\<turnstile> ?t : T\\<^sub>0 \\<Longrightarrow>\n      TVarB T\\<^sub>1 \\<Colon>\n      \\<Gamma> \\<turnstile> ?t' : T\\<^sub>0\\<rbrakk>\n  \\<Longrightarrow> TVarB T\\<^sub>1 \\<Colon>\n                    \\<Gamma> \\<turnstile> ?E ?t' : T\\<^sub>2\n  E \\<in> ctxt\n  (\\<lambda><:T\\<^sub>1. t\\<^sub>2) = E t\n  \\<Gamma> \\<turnstile> t : ?T\\<^sub>0 \\<Longrightarrow>\n  \\<Gamma> \\<turnstile> t' : ?T\\<^sub>0\n  E = (\\<lambda>t. t)\n\ngoal (1 subgoal):\n 1. \\<Gamma> \\<turnstile> E t' : (\\<forall><:T\\<^sub>1. T\\<^sub>2)", "by (blast intro: typing_typings.intros)"], ["proof (state)\nthis:\n  \\<Gamma> \\<turnstile> E t' : (\\<forall><:T\\<^sub>1. T\\<^sub>2)\n\ngoal (7 subgoals):\n 1. \\<And>\\<Gamma> t\\<^sub>1 T\\<^sub>1\\<^sub>1 T\\<^sub>1\\<^sub>2 T\\<^sub>2 E\n       t t'.\n       \\<lbrakk>\\<Gamma> \\<turnstile> t\\<^sub>1 : (\\<forall><:T\\<^sub>1\\<^sub>1.\n                T\\<^sub>1\\<^sub>2);\n        \\<And>E t t'.\n           \\<lbrakk>E \\<in> ctxt; t\\<^sub>1 = E t;\n            \\<And>T\\<^sub>0.\n               \\<Gamma> \\<turnstile> t : T\\<^sub>0 \\<Longrightarrow>\n               \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n           \\<Longrightarrow> \\<Gamma> \\<turnstile> E\n              t' : (\\<forall><:T\\<^sub>1\\<^sub>1. T\\<^sub>1\\<^sub>2);\n        \\<Gamma> \\<turnstile> T\\<^sub>2 <: T\\<^sub>1\\<^sub>1; E \\<in> ctxt;\n        t\\<^sub>1 \\<bullet>\\<^sub>\\<tau> T\\<^sub>2 = E t;\n        \\<And>T\\<^sub>0.\n           \\<Gamma> \\<turnstile> t : T\\<^sub>0 \\<Longrightarrow>\n           \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> E\n          t' : T\\<^sub>1\\<^sub>2[0 \\<mapsto>\\<^sub>\\<tau> T\\<^sub>2]\\<^sub>\\<tau>\n 2. \\<And>\\<Gamma> t S T E ta t'.\n       \\<lbrakk>\\<Gamma> \\<turnstile> t : S;\n        \\<And>E ta t'.\n           \\<lbrakk>E \\<in> ctxt; t = E ta;\n            \\<And>T\\<^sub>0.\n               \\<Gamma> \\<turnstile> ta : T\\<^sub>0 \\<Longrightarrow>\n               \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n           \\<Longrightarrow> \\<Gamma> \\<turnstile> E t' : S;\n        \\<Gamma> \\<turnstile> S <: T; E \\<in> ctxt; t = E ta;\n        \\<And>T\\<^sub>0.\n           \\<Gamma> \\<turnstile> ta : T\\<^sub>0 \\<Longrightarrow>\n           \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> E t' : T\n 3. \\<And>\\<Gamma> t\\<^sub>1 T\\<^sub>1 p \\<Delta> t\\<^sub>2 T\\<^sub>2 E t\n       t'.\n       \\<lbrakk>\\<Gamma> \\<turnstile> t\\<^sub>1 : T\\<^sub>1;\n        \\<And>E t t'.\n           \\<lbrakk>E \\<in> ctxt; t\\<^sub>1 = E t;\n            \\<And>T\\<^sub>0.\n               \\<Gamma> \\<turnstile> t : T\\<^sub>0 \\<Longrightarrow>\n               \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n           \\<Longrightarrow> \\<Gamma> \\<turnstile> E t' : T\\<^sub>1;\n        \\<turnstile> p : T\\<^sub>1 \\<Rightarrow> \\<Delta>;\n        \\<Delta> @ \\<Gamma> \\<turnstile> t\\<^sub>2 : T\\<^sub>2;\n        \\<And>E t t'.\n           \\<lbrakk>E \\<in> ctxt; t\\<^sub>2 = E t;\n            \\<And>T\\<^sub>0.\n               \\<Delta> @\n               \\<Gamma> \\<turnstile> t : T\\<^sub>0 \\<Longrightarrow>\n               \\<Delta> @ \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n           \\<Longrightarrow> \\<Delta> @\n                             \\<Gamma> \\<turnstile> E t' : T\\<^sub>2;\n        E \\<in> ctxt; (LET p = t\\<^sub>1 IN t\\<^sub>2) = E t;\n        \\<And>T\\<^sub>0.\n           \\<Gamma> \\<turnstile> t : T\\<^sub>0 \\<Longrightarrow>\n           \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> E\n          t' : \\<down>\\<^sub>\\<tau> \\<parallel>\\<Delta>\\<parallel> 0\n                T\\<^sub>2\n 4. \\<And>\\<Gamma> fs fTs E t t'.\n       \\<lbrakk>\\<Gamma> \\<turnstile> fs [:] fTs;\n        \\<And>E\\<^sub>r t t'.\n           \\<lbrakk>E\\<^sub>r \\<in> rctxt; fs = E\\<^sub>r t;\n            \\<And>T\\<^sub>0.\n               \\<Gamma> \\<turnstile> t : T\\<^sub>0 \\<Longrightarrow>\n               \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n           \\<Longrightarrow> \\<Gamma> \\<turnstile> E\\<^sub>r t' [:] fTs;\n        E \\<in> ctxt; Rcd fs = E t;\n        \\<And>T\\<^sub>0.\n           \\<Gamma> \\<turnstile> t : T\\<^sub>0 \\<Longrightarrow>\n           \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> E t' : RcdT fTs\n 5. \\<And>\\<Gamma> t fTs l T E ta t'.\n       \\<lbrakk>\\<Gamma> \\<turnstile> t : RcdT fTs;\n        \\<And>E ta t'.\n           \\<lbrakk>E \\<in> ctxt; t = E ta;\n            \\<And>T\\<^sub>0.\n               \\<Gamma> \\<turnstile> ta : T\\<^sub>0 \\<Longrightarrow>\n               \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n           \\<Longrightarrow> \\<Gamma> \\<turnstile> E t' : RcdT fTs;\n        fTs\\<langle>l\\<rangle>\\<^sub>? = \\<lfloor>T\\<rfloor>; E \\<in> ctxt;\n        t..l = E ta;\n        \\<And>T\\<^sub>0.\n           \\<Gamma> \\<turnstile> ta : T\\<^sub>0 \\<Longrightarrow>\n           \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> E t' : T\n 6. \\<And>\\<Gamma> E\\<^sub>r t t'.\n       \\<lbrakk>\\<Gamma> \\<turnstile>\\<^sub>w\\<^sub>f;\n        E\\<^sub>r \\<in> rctxt; [] = E\\<^sub>r t;\n        \\<And>T\\<^sub>0.\n           \\<Gamma> \\<turnstile> t : T\\<^sub>0 \\<Longrightarrow>\n           \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> E\\<^sub>r t' [:] []\n 7. \\<And>\\<Gamma> t T fs fTs l E\\<^sub>r ta t'.\n       \\<lbrakk>\\<Gamma> \\<turnstile> t : T;\n        \\<And>E ta t'.\n           \\<lbrakk>E \\<in> ctxt; t = E ta;\n            \\<And>T\\<^sub>0.\n               \\<Gamma> \\<turnstile> ta : T\\<^sub>0 \\<Longrightarrow>\n               \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n           \\<Longrightarrow> \\<Gamma> \\<turnstile> E t' : T;\n        \\<Gamma> \\<turnstile> fs [:] fTs;\n        \\<And>E\\<^sub>r t t'.\n           \\<lbrakk>E\\<^sub>r \\<in> rctxt; fs = E\\<^sub>r t;\n            \\<And>T\\<^sub>0.\n               \\<Gamma> \\<turnstile> t : T\\<^sub>0 \\<Longrightarrow>\n               \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n           \\<Longrightarrow> \\<Gamma> \\<turnstile> E\\<^sub>r t' [:] fTs;\n        fs\\<langle>l\\<rangle>\\<^sub>? = \\<bottom>; E\\<^sub>r \\<in> rctxt;\n        (l, t) \\<Colon> fs = E\\<^sub>r ta;\n        \\<And>T\\<^sub>0.\n           \\<Gamma> \\<turnstile> ta : T\\<^sub>0 \\<Longrightarrow>\n           \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> E\\<^sub>r\n          t' [:] (l, T) \\<Colon>\n                         fTs", "next"], ["proof (state)\ngoal (7 subgoals):\n 1. \\<And>\\<Gamma> t\\<^sub>1 T\\<^sub>1\\<^sub>1 T\\<^sub>1\\<^sub>2 T\\<^sub>2 E\n       t t'.\n       \\<lbrakk>\\<Gamma> \\<turnstile> t\\<^sub>1 : (\\<forall><:T\\<^sub>1\\<^sub>1.\n                T\\<^sub>1\\<^sub>2);\n        \\<And>E t t'.\n           \\<lbrakk>E \\<in> ctxt; t\\<^sub>1 = E t;\n            \\<And>T\\<^sub>0.\n               \\<Gamma> \\<turnstile> t : T\\<^sub>0 \\<Longrightarrow>\n               \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n           \\<Longrightarrow> \\<Gamma> \\<turnstile> E\n              t' : (\\<forall><:T\\<^sub>1\\<^sub>1. T\\<^sub>1\\<^sub>2);\n        \\<Gamma> \\<turnstile> T\\<^sub>2 <: T\\<^sub>1\\<^sub>1; E \\<in> ctxt;\n        t\\<^sub>1 \\<bullet>\\<^sub>\\<tau> T\\<^sub>2 = E t;\n        \\<And>T\\<^sub>0.\n           \\<Gamma> \\<turnstile> t : T\\<^sub>0 \\<Longrightarrow>\n           \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> E\n          t' : T\\<^sub>1\\<^sub>2[0 \\<mapsto>\\<^sub>\\<tau> T\\<^sub>2]\\<^sub>\\<tau>\n 2. \\<And>\\<Gamma> t S T E ta t'.\n       \\<lbrakk>\\<Gamma> \\<turnstile> t : S;\n        \\<And>E ta t'.\n           \\<lbrakk>E \\<in> ctxt; t = E ta;\n            \\<And>T\\<^sub>0.\n               \\<Gamma> \\<turnstile> ta : T\\<^sub>0 \\<Longrightarrow>\n               \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n           \\<Longrightarrow> \\<Gamma> \\<turnstile> E t' : S;\n        \\<Gamma> \\<turnstile> S <: T; E \\<in> ctxt; t = E ta;\n        \\<And>T\\<^sub>0.\n           \\<Gamma> \\<turnstile> ta : T\\<^sub>0 \\<Longrightarrow>\n           \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> E t' : T\n 3. \\<And>\\<Gamma> t\\<^sub>1 T\\<^sub>1 p \\<Delta> t\\<^sub>2 T\\<^sub>2 E t\n       t'.\n       \\<lbrakk>\\<Gamma> \\<turnstile> t\\<^sub>1 : T\\<^sub>1;\n        \\<And>E t t'.\n           \\<lbrakk>E \\<in> ctxt; t\\<^sub>1 = E t;\n            \\<And>T\\<^sub>0.\n               \\<Gamma> \\<turnstile> t : T\\<^sub>0 \\<Longrightarrow>\n               \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n           \\<Longrightarrow> \\<Gamma> \\<turnstile> E t' : T\\<^sub>1;\n        \\<turnstile> p : T\\<^sub>1 \\<Rightarrow> \\<Delta>;\n        \\<Delta> @ \\<Gamma> \\<turnstile> t\\<^sub>2 : T\\<^sub>2;\n        \\<And>E t t'.\n           \\<lbrakk>E \\<in> ctxt; t\\<^sub>2 = E t;\n            \\<And>T\\<^sub>0.\n               \\<Delta> @\n               \\<Gamma> \\<turnstile> t : T\\<^sub>0 \\<Longrightarrow>\n               \\<Delta> @ \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n           \\<Longrightarrow> \\<Delta> @\n                             \\<Gamma> \\<turnstile> E t' : T\\<^sub>2;\n        E \\<in> ctxt; (LET p = t\\<^sub>1 IN t\\<^sub>2) = E t;\n        \\<And>T\\<^sub>0.\n           \\<Gamma> \\<turnstile> t : T\\<^sub>0 \\<Longrightarrow>\n           \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> E\n          t' : \\<down>\\<^sub>\\<tau> \\<parallel>\\<Delta>\\<parallel> 0\n                T\\<^sub>2\n 4. \\<And>\\<Gamma> fs fTs E t t'.\n       \\<lbrakk>\\<Gamma> \\<turnstile> fs [:] fTs;\n        \\<And>E\\<^sub>r t t'.\n           \\<lbrakk>E\\<^sub>r \\<in> rctxt; fs = E\\<^sub>r t;\n            \\<And>T\\<^sub>0.\n               \\<Gamma> \\<turnstile> t : T\\<^sub>0 \\<Longrightarrow>\n               \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n           \\<Longrightarrow> \\<Gamma> \\<turnstile> E\\<^sub>r t' [:] fTs;\n        E \\<in> ctxt; Rcd fs = E t;\n        \\<And>T\\<^sub>0.\n           \\<Gamma> \\<turnstile> t : T\\<^sub>0 \\<Longrightarrow>\n           \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> E t' : RcdT fTs\n 5. \\<And>\\<Gamma> t fTs l T E ta t'.\n       \\<lbrakk>\\<Gamma> \\<turnstile> t : RcdT fTs;\n        \\<And>E ta t'.\n           \\<lbrakk>E \\<in> ctxt; t = E ta;\n            \\<And>T\\<^sub>0.\n               \\<Gamma> \\<turnstile> ta : T\\<^sub>0 \\<Longrightarrow>\n               \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n           \\<Longrightarrow> \\<Gamma> \\<turnstile> E t' : RcdT fTs;\n        fTs\\<langle>l\\<rangle>\\<^sub>? = \\<lfloor>T\\<rfloor>; E \\<in> ctxt;\n        t..l = E ta;\n        \\<And>T\\<^sub>0.\n           \\<Gamma> \\<turnstile> ta : T\\<^sub>0 \\<Longrightarrow>\n           \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> E t' : T\n 6. \\<And>\\<Gamma> E\\<^sub>r t t'.\n       \\<lbrakk>\\<Gamma> \\<turnstile>\\<^sub>w\\<^sub>f;\n        E\\<^sub>r \\<in> rctxt; [] = E\\<^sub>r t;\n        \\<And>T\\<^sub>0.\n           \\<Gamma> \\<turnstile> t : T\\<^sub>0 \\<Longrightarrow>\n           \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> E\\<^sub>r t' [:] []\n 7. \\<And>\\<Gamma> t T fs fTs l E\\<^sub>r ta t'.\n       \\<lbrakk>\\<Gamma> \\<turnstile> t : T;\n        \\<And>E ta t'.\n           \\<lbrakk>E \\<in> ctxt; t = E ta;\n            \\<And>T\\<^sub>0.\n               \\<Gamma> \\<turnstile> ta : T\\<^sub>0 \\<Longrightarrow>\n               \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n           \\<Longrightarrow> \\<Gamma> \\<turnstile> E t' : T;\n        \\<Gamma> \\<turnstile> fs [:] fTs;\n        \\<And>E\\<^sub>r t t'.\n           \\<lbrakk>E\\<^sub>r \\<in> rctxt; fs = E\\<^sub>r t;\n            \\<And>T\\<^sub>0.\n               \\<Gamma> \\<turnstile> t : T\\<^sub>0 \\<Longrightarrow>\n               \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n           \\<Longrightarrow> \\<Gamma> \\<turnstile> E\\<^sub>r t' [:] fTs;\n        fs\\<langle>l\\<rangle>\\<^sub>? = \\<bottom>; E\\<^sub>r \\<in> rctxt;\n        (l, t) \\<Colon> fs = E\\<^sub>r ta;\n        \\<And>T\\<^sub>0.\n           \\<Gamma> \\<turnstile> ta : T\\<^sub>0 \\<Longrightarrow>\n           \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> E\\<^sub>r\n          t' [:] (l, T) \\<Colon>\n                         fTs", "case (T_TApp \\<Gamma> t\\<^sub>1 T\\<^sub>1\\<^sub>1 T\\<^sub>1\\<^sub>2 T\\<^sub>2 E t t')"], ["proof (state)\nthis:\n  \\<Gamma> \\<turnstile> t\\<^sub>1 : (\\<forall><:T\\<^sub>1\\<^sub>1.\n  T\\<^sub>1\\<^sub>2)\n  \\<lbrakk>?E \\<in> ctxt; t\\<^sub>1 = ?E ?t;\n   \\<And>T\\<^sub>0.\n      \\<Gamma> \\<turnstile> ?t : T\\<^sub>0 \\<Longrightarrow>\n      \\<Gamma> \\<turnstile> ?t' : T\\<^sub>0\\<rbrakk>\n  \\<Longrightarrow> \\<Gamma> \\<turnstile> ?E\n     ?t' : (\\<forall><:T\\<^sub>1\\<^sub>1. T\\<^sub>1\\<^sub>2)\n  \\<Gamma> \\<turnstile> T\\<^sub>2 <: T\\<^sub>1\\<^sub>1\n  E \\<in> ctxt\n  t\\<^sub>1 \\<bullet>\\<^sub>\\<tau> T\\<^sub>2 = E t\n  \\<Gamma> \\<turnstile> t : ?T\\<^sub>0 \\<Longrightarrow>\n  \\<Gamma> \\<turnstile> t' : ?T\\<^sub>0\n\ngoal (7 subgoals):\n 1. \\<And>\\<Gamma> t\\<^sub>1 T\\<^sub>1\\<^sub>1 T\\<^sub>1\\<^sub>2 T\\<^sub>2 E\n       t t'.\n       \\<lbrakk>\\<Gamma> \\<turnstile> t\\<^sub>1 : (\\<forall><:T\\<^sub>1\\<^sub>1.\n                T\\<^sub>1\\<^sub>2);\n        \\<And>E t t'.\n           \\<lbrakk>E \\<in> ctxt; t\\<^sub>1 = E t;\n            \\<And>T\\<^sub>0.\n               \\<Gamma> \\<turnstile> t : T\\<^sub>0 \\<Longrightarrow>\n               \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n           \\<Longrightarrow> \\<Gamma> \\<turnstile> E\n              t' : (\\<forall><:T\\<^sub>1\\<^sub>1. T\\<^sub>1\\<^sub>2);\n        \\<Gamma> \\<turnstile> T\\<^sub>2 <: T\\<^sub>1\\<^sub>1; E \\<in> ctxt;\n        t\\<^sub>1 \\<bullet>\\<^sub>\\<tau> T\\<^sub>2 = E t;\n        \\<And>T\\<^sub>0.\n           \\<Gamma> \\<turnstile> t : T\\<^sub>0 \\<Longrightarrow>\n           \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> E\n          t' : T\\<^sub>1\\<^sub>2[0 \\<mapsto>\\<^sub>\\<tau> T\\<^sub>2]\\<^sub>\\<tau>\n 2. \\<And>\\<Gamma> t S T E ta t'.\n       \\<lbrakk>\\<Gamma> \\<turnstile> t : S;\n        \\<And>E ta t'.\n           \\<lbrakk>E \\<in> ctxt; t = E ta;\n            \\<And>T\\<^sub>0.\n               \\<Gamma> \\<turnstile> ta : T\\<^sub>0 \\<Longrightarrow>\n               \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n           \\<Longrightarrow> \\<Gamma> \\<turnstile> E t' : S;\n        \\<Gamma> \\<turnstile> S <: T; E \\<in> ctxt; t = E ta;\n        \\<And>T\\<^sub>0.\n           \\<Gamma> \\<turnstile> ta : T\\<^sub>0 \\<Longrightarrow>\n           \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> E t' : T\n 3. \\<And>\\<Gamma> t\\<^sub>1 T\\<^sub>1 p \\<Delta> t\\<^sub>2 T\\<^sub>2 E t\n       t'.\n       \\<lbrakk>\\<Gamma> \\<turnstile> t\\<^sub>1 : T\\<^sub>1;\n        \\<And>E t t'.\n           \\<lbrakk>E \\<in> ctxt; t\\<^sub>1 = E t;\n            \\<And>T\\<^sub>0.\n               \\<Gamma> \\<turnstile> t : T\\<^sub>0 \\<Longrightarrow>\n               \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n           \\<Longrightarrow> \\<Gamma> \\<turnstile> E t' : T\\<^sub>1;\n        \\<turnstile> p : T\\<^sub>1 \\<Rightarrow> \\<Delta>;\n        \\<Delta> @ \\<Gamma> \\<turnstile> t\\<^sub>2 : T\\<^sub>2;\n        \\<And>E t t'.\n           \\<lbrakk>E \\<in> ctxt; t\\<^sub>2 = E t;\n            \\<And>T\\<^sub>0.\n               \\<Delta> @\n               \\<Gamma> \\<turnstile> t : T\\<^sub>0 \\<Longrightarrow>\n               \\<Delta> @ \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n           \\<Longrightarrow> \\<Delta> @\n                             \\<Gamma> \\<turnstile> E t' : T\\<^sub>2;\n        E \\<in> ctxt; (LET p = t\\<^sub>1 IN t\\<^sub>2) = E t;\n        \\<And>T\\<^sub>0.\n           \\<Gamma> \\<turnstile> t : T\\<^sub>0 \\<Longrightarrow>\n           \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> E\n          t' : \\<down>\\<^sub>\\<tau> \\<parallel>\\<Delta>\\<parallel> 0\n                T\\<^sub>2\n 4. \\<And>\\<Gamma> fs fTs E t t'.\n       \\<lbrakk>\\<Gamma> \\<turnstile> fs [:] fTs;\n        \\<And>E\\<^sub>r t t'.\n           \\<lbrakk>E\\<^sub>r \\<in> rctxt; fs = E\\<^sub>r t;\n            \\<And>T\\<^sub>0.\n               \\<Gamma> \\<turnstile> t : T\\<^sub>0 \\<Longrightarrow>\n               \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n           \\<Longrightarrow> \\<Gamma> \\<turnstile> E\\<^sub>r t' [:] fTs;\n        E \\<in> ctxt; Rcd fs = E t;\n        \\<And>T\\<^sub>0.\n           \\<Gamma> \\<turnstile> t : T\\<^sub>0 \\<Longrightarrow>\n           \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> E t' : RcdT fTs\n 5. \\<And>\\<Gamma> t fTs l T E ta t'.\n       \\<lbrakk>\\<Gamma> \\<turnstile> t : RcdT fTs;\n        \\<And>E ta t'.\n           \\<lbrakk>E \\<in> ctxt; t = E ta;\n            \\<And>T\\<^sub>0.\n               \\<Gamma> \\<turnstile> ta : T\\<^sub>0 \\<Longrightarrow>\n               \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n           \\<Longrightarrow> \\<Gamma> \\<turnstile> E t' : RcdT fTs;\n        fTs\\<langle>l\\<rangle>\\<^sub>? = \\<lfloor>T\\<rfloor>; E \\<in> ctxt;\n        t..l = E ta;\n        \\<And>T\\<^sub>0.\n           \\<Gamma> \\<turnstile> ta : T\\<^sub>0 \\<Longrightarrow>\n           \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> E t' : T\n 6. \\<And>\\<Gamma> E\\<^sub>r t t'.\n       \\<lbrakk>\\<Gamma> \\<turnstile>\\<^sub>w\\<^sub>f;\n        E\\<^sub>r \\<in> rctxt; [] = E\\<^sub>r t;\n        \\<And>T\\<^sub>0.\n           \\<Gamma> \\<turnstile> t : T\\<^sub>0 \\<Longrightarrow>\n           \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> E\\<^sub>r t' [:] []\n 7. \\<And>\\<Gamma> t T fs fTs l E\\<^sub>r ta t'.\n       \\<lbrakk>\\<Gamma> \\<turnstile> t : T;\n        \\<And>E ta t'.\n           \\<lbrakk>E \\<in> ctxt; t = E ta;\n            \\<And>T\\<^sub>0.\n               \\<Gamma> \\<turnstile> ta : T\\<^sub>0 \\<Longrightarrow>\n               \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n           \\<Longrightarrow> \\<Gamma> \\<turnstile> E t' : T;\n        \\<Gamma> \\<turnstile> fs [:] fTs;\n        \\<And>E\\<^sub>r t t'.\n           \\<lbrakk>E\\<^sub>r \\<in> rctxt; fs = E\\<^sub>r t;\n            \\<And>T\\<^sub>0.\n               \\<Gamma> \\<turnstile> t : T\\<^sub>0 \\<Longrightarrow>\n               \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n           \\<Longrightarrow> \\<Gamma> \\<turnstile> E\\<^sub>r t' [:] fTs;\n        fs\\<langle>l\\<rangle>\\<^sub>? = \\<bottom>; E\\<^sub>r \\<in> rctxt;\n        (l, t) \\<Colon> fs = E\\<^sub>r ta;\n        \\<And>T\\<^sub>0.\n           \\<Gamma> \\<turnstile> ta : T\\<^sub>0 \\<Longrightarrow>\n           \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> E\\<^sub>r\n          t' [:] (l, T) \\<Colon>\n                         fTs", "from \\<open>E \\<in> ctxt\\<close>"], ["proof (chain)\npicking this:\n  E \\<in> ctxt", "show ?case"], ["proof (prove)\nusing this:\n  E \\<in> ctxt\n\ngoal (1 subgoal):\n 1. \\<Gamma> \\<turnstile> E t' : T\\<^sub>1\\<^sub>2[0 \\<mapsto>\\<^sub>\\<tau> T\\<^sub>2]\\<^sub>\\<tau>", "using T_TApp"], ["proof (prove)\nusing this:\n  E \\<in> ctxt\n  \\<Gamma> \\<turnstile> t\\<^sub>1 : (\\<forall><:T\\<^sub>1\\<^sub>1.\n  T\\<^sub>1\\<^sub>2)\n  \\<lbrakk>?E \\<in> ctxt; t\\<^sub>1 = ?E ?t;\n   \\<And>T\\<^sub>0.\n      \\<Gamma> \\<turnstile> ?t : T\\<^sub>0 \\<Longrightarrow>\n      \\<Gamma> \\<turnstile> ?t' : T\\<^sub>0\\<rbrakk>\n  \\<Longrightarrow> \\<Gamma> \\<turnstile> ?E\n     ?t' : (\\<forall><:T\\<^sub>1\\<^sub>1. T\\<^sub>1\\<^sub>2)\n  \\<Gamma> \\<turnstile> T\\<^sub>2 <: T\\<^sub>1\\<^sub>1\n  E \\<in> ctxt\n  t\\<^sub>1 \\<bullet>\\<^sub>\\<tau> T\\<^sub>2 = E t\n  \\<Gamma> \\<turnstile> t : ?T\\<^sub>0 \\<Longrightarrow>\n  \\<Gamma> \\<turnstile> t' : ?T\\<^sub>0\n\ngoal (1 subgoal):\n 1. \\<Gamma> \\<turnstile> E t' : T\\<^sub>1\\<^sub>2[0 \\<mapsto>\\<^sub>\\<tau> T\\<^sub>2]\\<^sub>\\<tau>", "by cases (simp_all, (blast intro: typing_typings.intros)+)"], ["proof (state)\nthis:\n  \\<Gamma> \\<turnstile> E t' : T\\<^sub>1\\<^sub>2[0 \\<mapsto>\\<^sub>\\<tau> T\\<^sub>2]\\<^sub>\\<tau>\n\ngoal (6 subgoals):\n 1. \\<And>\\<Gamma> t S T E ta t'.\n       \\<lbrakk>\\<Gamma> \\<turnstile> t : S;\n        \\<And>E ta t'.\n           \\<lbrakk>E \\<in> ctxt; t = E ta;\n            \\<And>T\\<^sub>0.\n               \\<Gamma> \\<turnstile> ta : T\\<^sub>0 \\<Longrightarrow>\n               \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n           \\<Longrightarrow> \\<Gamma> \\<turnstile> E t' : S;\n        \\<Gamma> \\<turnstile> S <: T; E \\<in> ctxt; t = E ta;\n        \\<And>T\\<^sub>0.\n           \\<Gamma> \\<turnstile> ta : T\\<^sub>0 \\<Longrightarrow>\n           \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> E t' : T\n 2. \\<And>\\<Gamma> t\\<^sub>1 T\\<^sub>1 p \\<Delta> t\\<^sub>2 T\\<^sub>2 E t\n       t'.\n       \\<lbrakk>\\<Gamma> \\<turnstile> t\\<^sub>1 : T\\<^sub>1;\n        \\<And>E t t'.\n           \\<lbrakk>E \\<in> ctxt; t\\<^sub>1 = E t;\n            \\<And>T\\<^sub>0.\n               \\<Gamma> \\<turnstile> t : T\\<^sub>0 \\<Longrightarrow>\n               \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n           \\<Longrightarrow> \\<Gamma> \\<turnstile> E t' : T\\<^sub>1;\n        \\<turnstile> p : T\\<^sub>1 \\<Rightarrow> \\<Delta>;\n        \\<Delta> @ \\<Gamma> \\<turnstile> t\\<^sub>2 : T\\<^sub>2;\n        \\<And>E t t'.\n           \\<lbrakk>E \\<in> ctxt; t\\<^sub>2 = E t;\n            \\<And>T\\<^sub>0.\n               \\<Delta> @\n               \\<Gamma> \\<turnstile> t : T\\<^sub>0 \\<Longrightarrow>\n               \\<Delta> @ \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n           \\<Longrightarrow> \\<Delta> @\n                             \\<Gamma> \\<turnstile> E t' : T\\<^sub>2;\n        E \\<in> ctxt; (LET p = t\\<^sub>1 IN t\\<^sub>2) = E t;\n        \\<And>T\\<^sub>0.\n           \\<Gamma> \\<turnstile> t : T\\<^sub>0 \\<Longrightarrow>\n           \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> E\n          t' : \\<down>\\<^sub>\\<tau> \\<parallel>\\<Delta>\\<parallel> 0\n                T\\<^sub>2\n 3. \\<And>\\<Gamma> fs fTs E t t'.\n       \\<lbrakk>\\<Gamma> \\<turnstile> fs [:] fTs;\n        \\<And>E\\<^sub>r t t'.\n           \\<lbrakk>E\\<^sub>r \\<in> rctxt; fs = E\\<^sub>r t;\n            \\<And>T\\<^sub>0.\n               \\<Gamma> \\<turnstile> t : T\\<^sub>0 \\<Longrightarrow>\n               \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n           \\<Longrightarrow> \\<Gamma> \\<turnstile> E\\<^sub>r t' [:] fTs;\n        E \\<in> ctxt; Rcd fs = E t;\n        \\<And>T\\<^sub>0.\n           \\<Gamma> \\<turnstile> t : T\\<^sub>0 \\<Longrightarrow>\n           \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> E t' : RcdT fTs\n 4. \\<And>\\<Gamma> t fTs l T E ta t'.\n       \\<lbrakk>\\<Gamma> \\<turnstile> t : RcdT fTs;\n        \\<And>E ta t'.\n           \\<lbrakk>E \\<in> ctxt; t = E ta;\n            \\<And>T\\<^sub>0.\n               \\<Gamma> \\<turnstile> ta : T\\<^sub>0 \\<Longrightarrow>\n               \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n           \\<Longrightarrow> \\<Gamma> \\<turnstile> E t' : RcdT fTs;\n        fTs\\<langle>l\\<rangle>\\<^sub>? = \\<lfloor>T\\<rfloor>; E \\<in> ctxt;\n        t..l = E ta;\n        \\<And>T\\<^sub>0.\n           \\<Gamma> \\<turnstile> ta : T\\<^sub>0 \\<Longrightarrow>\n           \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> E t' : T\n 5. \\<And>\\<Gamma> E\\<^sub>r t t'.\n       \\<lbrakk>\\<Gamma> \\<turnstile>\\<^sub>w\\<^sub>f;\n        E\\<^sub>r \\<in> rctxt; [] = E\\<^sub>r t;\n        \\<And>T\\<^sub>0.\n           \\<Gamma> \\<turnstile> t : T\\<^sub>0 \\<Longrightarrow>\n           \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> E\\<^sub>r t' [:] []\n 6. \\<And>\\<Gamma> t T fs fTs l E\\<^sub>r ta t'.\n       \\<lbrakk>\\<Gamma> \\<turnstile> t : T;\n        \\<And>E ta t'.\n           \\<lbrakk>E \\<in> ctxt; t = E ta;\n            \\<And>T\\<^sub>0.\n               \\<Gamma> \\<turnstile> ta : T\\<^sub>0 \\<Longrightarrow>\n               \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n           \\<Longrightarrow> \\<Gamma> \\<turnstile> E t' : T;\n        \\<Gamma> \\<turnstile> fs [:] fTs;\n        \\<And>E\\<^sub>r t t'.\n           \\<lbrakk>E\\<^sub>r \\<in> rctxt; fs = E\\<^sub>r t;\n            \\<And>T\\<^sub>0.\n               \\<Gamma> \\<turnstile> t : T\\<^sub>0 \\<Longrightarrow>\n               \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n           \\<Longrightarrow> \\<Gamma> \\<turnstile> E\\<^sub>r t' [:] fTs;\n        fs\\<langle>l\\<rangle>\\<^sub>? = \\<bottom>; E\\<^sub>r \\<in> rctxt;\n        (l, t) \\<Colon> fs = E\\<^sub>r ta;\n        \\<And>T\\<^sub>0.\n           \\<Gamma> \\<turnstile> ta : T\\<^sub>0 \\<Longrightarrow>\n           \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> E\\<^sub>r\n          t' [:] (l, T) \\<Colon>\n                         fTs", "next"], ["proof (state)\ngoal (6 subgoals):\n 1. \\<And>\\<Gamma> t S T E ta t'.\n       \\<lbrakk>\\<Gamma> \\<turnstile> t : S;\n        \\<And>E ta t'.\n           \\<lbrakk>E \\<in> ctxt; t = E ta;\n            \\<And>T\\<^sub>0.\n               \\<Gamma> \\<turnstile> ta : T\\<^sub>0 \\<Longrightarrow>\n               \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n           \\<Longrightarrow> \\<Gamma> \\<turnstile> E t' : S;\n        \\<Gamma> \\<turnstile> S <: T; E \\<in> ctxt; t = E ta;\n        \\<And>T\\<^sub>0.\n           \\<Gamma> \\<turnstile> ta : T\\<^sub>0 \\<Longrightarrow>\n           \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> E t' : T\n 2. \\<And>\\<Gamma> t\\<^sub>1 T\\<^sub>1 p \\<Delta> t\\<^sub>2 T\\<^sub>2 E t\n       t'.\n       \\<lbrakk>\\<Gamma> \\<turnstile> t\\<^sub>1 : T\\<^sub>1;\n        \\<And>E t t'.\n           \\<lbrakk>E \\<in> ctxt; t\\<^sub>1 = E t;\n            \\<And>T\\<^sub>0.\n               \\<Gamma> \\<turnstile> t : T\\<^sub>0 \\<Longrightarrow>\n               \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n           \\<Longrightarrow> \\<Gamma> \\<turnstile> E t' : T\\<^sub>1;\n        \\<turnstile> p : T\\<^sub>1 \\<Rightarrow> \\<Delta>;\n        \\<Delta> @ \\<Gamma> \\<turnstile> t\\<^sub>2 : T\\<^sub>2;\n        \\<And>E t t'.\n           \\<lbrakk>E \\<in> ctxt; t\\<^sub>2 = E t;\n            \\<And>T\\<^sub>0.\n               \\<Delta> @\n               \\<Gamma> \\<turnstile> t : T\\<^sub>0 \\<Longrightarrow>\n               \\<Delta> @ \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n           \\<Longrightarrow> \\<Delta> @\n                             \\<Gamma> \\<turnstile> E t' : T\\<^sub>2;\n        E \\<in> ctxt; (LET p = t\\<^sub>1 IN t\\<^sub>2) = E t;\n        \\<And>T\\<^sub>0.\n           \\<Gamma> \\<turnstile> t : T\\<^sub>0 \\<Longrightarrow>\n           \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> E\n          t' : \\<down>\\<^sub>\\<tau> \\<parallel>\\<Delta>\\<parallel> 0\n                T\\<^sub>2\n 3. \\<And>\\<Gamma> fs fTs E t t'.\n       \\<lbrakk>\\<Gamma> \\<turnstile> fs [:] fTs;\n        \\<And>E\\<^sub>r t t'.\n           \\<lbrakk>E\\<^sub>r \\<in> rctxt; fs = E\\<^sub>r t;\n            \\<And>T\\<^sub>0.\n               \\<Gamma> \\<turnstile> t : T\\<^sub>0 \\<Longrightarrow>\n               \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n           \\<Longrightarrow> \\<Gamma> \\<turnstile> E\\<^sub>r t' [:] fTs;\n        E \\<in> ctxt; Rcd fs = E t;\n        \\<And>T\\<^sub>0.\n           \\<Gamma> \\<turnstile> t : T\\<^sub>0 \\<Longrightarrow>\n           \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> E t' : RcdT fTs\n 4. \\<And>\\<Gamma> t fTs l T E ta t'.\n       \\<lbrakk>\\<Gamma> \\<turnstile> t : RcdT fTs;\n        \\<And>E ta t'.\n           \\<lbrakk>E \\<in> ctxt; t = E ta;\n            \\<And>T\\<^sub>0.\n               \\<Gamma> \\<turnstile> ta : T\\<^sub>0 \\<Longrightarrow>\n               \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n           \\<Longrightarrow> \\<Gamma> \\<turnstile> E t' : RcdT fTs;\n        fTs\\<langle>l\\<rangle>\\<^sub>? = \\<lfloor>T\\<rfloor>; E \\<in> ctxt;\n        t..l = E ta;\n        \\<And>T\\<^sub>0.\n           \\<Gamma> \\<turnstile> ta : T\\<^sub>0 \\<Longrightarrow>\n           \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> E t' : T\n 5. \\<And>\\<Gamma> E\\<^sub>r t t'.\n       \\<lbrakk>\\<Gamma> \\<turnstile>\\<^sub>w\\<^sub>f;\n        E\\<^sub>r \\<in> rctxt; [] = E\\<^sub>r t;\n        \\<And>T\\<^sub>0.\n           \\<Gamma> \\<turnstile> t : T\\<^sub>0 \\<Longrightarrow>\n           \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> E\\<^sub>r t' [:] []\n 6. \\<And>\\<Gamma> t T fs fTs l E\\<^sub>r ta t'.\n       \\<lbrakk>\\<Gamma> \\<turnstile> t : T;\n        \\<And>E ta t'.\n           \\<lbrakk>E \\<in> ctxt; t = E ta;\n            \\<And>T\\<^sub>0.\n               \\<Gamma> \\<turnstile> ta : T\\<^sub>0 \\<Longrightarrow>\n               \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n           \\<Longrightarrow> \\<Gamma> \\<turnstile> E t' : T;\n        \\<Gamma> \\<turnstile> fs [:] fTs;\n        \\<And>E\\<^sub>r t t'.\n           \\<lbrakk>E\\<^sub>r \\<in> rctxt; fs = E\\<^sub>r t;\n            \\<And>T\\<^sub>0.\n               \\<Gamma> \\<turnstile> t : T\\<^sub>0 \\<Longrightarrow>\n               \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n           \\<Longrightarrow> \\<Gamma> \\<turnstile> E\\<^sub>r t' [:] fTs;\n        fs\\<langle>l\\<rangle>\\<^sub>? = \\<bottom>; E\\<^sub>r \\<in> rctxt;\n        (l, t) \\<Colon> fs = E\\<^sub>r ta;\n        \\<And>T\\<^sub>0.\n           \\<Gamma> \\<turnstile> ta : T\\<^sub>0 \\<Longrightarrow>\n           \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> E\\<^sub>r\n          t' [:] (l, T) \\<Colon>\n                         fTs", "case (T_Sub \\<Gamma> t S T E ta t')"], ["proof (state)\nthis:\n  \\<Gamma> \\<turnstile> t : S\n  \\<lbrakk>?E \\<in> ctxt; t = ?E ?t;\n   \\<And>T\\<^sub>0.\n      \\<Gamma> \\<turnstile> ?t : T\\<^sub>0 \\<Longrightarrow>\n      \\<Gamma> \\<turnstile> ?t' : T\\<^sub>0\\<rbrakk>\n  \\<Longrightarrow> \\<Gamma> \\<turnstile> ?E ?t' : S\n  \\<Gamma> \\<turnstile> S <: T\n  E \\<in> ctxt\n  t = E ta\n  \\<Gamma> \\<turnstile> ta : ?T\\<^sub>0 \\<Longrightarrow>\n  \\<Gamma> \\<turnstile> t' : ?T\\<^sub>0\n\ngoal (6 subgoals):\n 1. \\<And>\\<Gamma> t S T E ta t'.\n       \\<lbrakk>\\<Gamma> \\<turnstile> t : S;\n        \\<And>E ta t'.\n           \\<lbrakk>E \\<in> ctxt; t = E ta;\n            \\<And>T\\<^sub>0.\n               \\<Gamma> \\<turnstile> ta : T\\<^sub>0 \\<Longrightarrow>\n               \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n           \\<Longrightarrow> \\<Gamma> \\<turnstile> E t' : S;\n        \\<Gamma> \\<turnstile> S <: T; E \\<in> ctxt; t = E ta;\n        \\<And>T\\<^sub>0.\n           \\<Gamma> \\<turnstile> ta : T\\<^sub>0 \\<Longrightarrow>\n           \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> E t' : T\n 2. \\<And>\\<Gamma> t\\<^sub>1 T\\<^sub>1 p \\<Delta> t\\<^sub>2 T\\<^sub>2 E t\n       t'.\n       \\<lbrakk>\\<Gamma> \\<turnstile> t\\<^sub>1 : T\\<^sub>1;\n        \\<And>E t t'.\n           \\<lbrakk>E \\<in> ctxt; t\\<^sub>1 = E t;\n            \\<And>T\\<^sub>0.\n               \\<Gamma> \\<turnstile> t : T\\<^sub>0 \\<Longrightarrow>\n               \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n           \\<Longrightarrow> \\<Gamma> \\<turnstile> E t' : T\\<^sub>1;\n        \\<turnstile> p : T\\<^sub>1 \\<Rightarrow> \\<Delta>;\n        \\<Delta> @ \\<Gamma> \\<turnstile> t\\<^sub>2 : T\\<^sub>2;\n        \\<And>E t t'.\n           \\<lbrakk>E \\<in> ctxt; t\\<^sub>2 = E t;\n            \\<And>T\\<^sub>0.\n               \\<Delta> @\n               \\<Gamma> \\<turnstile> t : T\\<^sub>0 \\<Longrightarrow>\n               \\<Delta> @ \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n           \\<Longrightarrow> \\<Delta> @\n                             \\<Gamma> \\<turnstile> E t' : T\\<^sub>2;\n        E \\<in> ctxt; (LET p = t\\<^sub>1 IN t\\<^sub>2) = E t;\n        \\<And>T\\<^sub>0.\n           \\<Gamma> \\<turnstile> t : T\\<^sub>0 \\<Longrightarrow>\n           \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> E\n          t' : \\<down>\\<^sub>\\<tau> \\<parallel>\\<Delta>\\<parallel> 0\n                T\\<^sub>2\n 3. \\<And>\\<Gamma> fs fTs E t t'.\n       \\<lbrakk>\\<Gamma> \\<turnstile> fs [:] fTs;\n        \\<And>E\\<^sub>r t t'.\n           \\<lbrakk>E\\<^sub>r \\<in> rctxt; fs = E\\<^sub>r t;\n            \\<And>T\\<^sub>0.\n               \\<Gamma> \\<turnstile> t : T\\<^sub>0 \\<Longrightarrow>\n               \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n           \\<Longrightarrow> \\<Gamma> \\<turnstile> E\\<^sub>r t' [:] fTs;\n        E \\<in> ctxt; Rcd fs = E t;\n        \\<And>T\\<^sub>0.\n           \\<Gamma> \\<turnstile> t : T\\<^sub>0 \\<Longrightarrow>\n           \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> E t' : RcdT fTs\n 4. \\<And>\\<Gamma> t fTs l T E ta t'.\n       \\<lbrakk>\\<Gamma> \\<turnstile> t : RcdT fTs;\n        \\<And>E ta t'.\n           \\<lbrakk>E \\<in> ctxt; t = E ta;\n            \\<And>T\\<^sub>0.\n               \\<Gamma> \\<turnstile> ta : T\\<^sub>0 \\<Longrightarrow>\n               \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n           \\<Longrightarrow> \\<Gamma> \\<turnstile> E t' : RcdT fTs;\n        fTs\\<langle>l\\<rangle>\\<^sub>? = \\<lfloor>T\\<rfloor>; E \\<in> ctxt;\n        t..l = E ta;\n        \\<And>T\\<^sub>0.\n           \\<Gamma> \\<turnstile> ta : T\\<^sub>0 \\<Longrightarrow>\n           \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> E t' : T\n 5. \\<And>\\<Gamma> E\\<^sub>r t t'.\n       \\<lbrakk>\\<Gamma> \\<turnstile>\\<^sub>w\\<^sub>f;\n        E\\<^sub>r \\<in> rctxt; [] = E\\<^sub>r t;\n        \\<And>T\\<^sub>0.\n           \\<Gamma> \\<turnstile> t : T\\<^sub>0 \\<Longrightarrow>\n           \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> E\\<^sub>r t' [:] []\n 6. \\<And>\\<Gamma> t T fs fTs l E\\<^sub>r ta t'.\n       \\<lbrakk>\\<Gamma> \\<turnstile> t : T;\n        \\<And>E ta t'.\n           \\<lbrakk>E \\<in> ctxt; t = E ta;\n            \\<And>T\\<^sub>0.\n               \\<Gamma> \\<turnstile> ta : T\\<^sub>0 \\<Longrightarrow>\n               \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n           \\<Longrightarrow> \\<Gamma> \\<turnstile> E t' : T;\n        \\<Gamma> \\<turnstile> fs [:] fTs;\n        \\<And>E\\<^sub>r t t'.\n           \\<lbrakk>E\\<^sub>r \\<in> rctxt; fs = E\\<^sub>r t;\n            \\<And>T\\<^sub>0.\n               \\<Gamma> \\<turnstile> t : T\\<^sub>0 \\<Longrightarrow>\n               \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n           \\<Longrightarrow> \\<Gamma> \\<turnstile> E\\<^sub>r t' [:] fTs;\n        fs\\<langle>l\\<rangle>\\<^sub>? = \\<bottom>; E\\<^sub>r \\<in> rctxt;\n        (l, t) \\<Colon> fs = E\\<^sub>r ta;\n        \\<And>T\\<^sub>0.\n           \\<Gamma> \\<turnstile> ta : T\\<^sub>0 \\<Longrightarrow>\n           \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> E\\<^sub>r\n          t' [:] (l, T) \\<Colon>\n                         fTs", "thus ?case"], ["proof (prove)\nusing this:\n  \\<Gamma> \\<turnstile> t : S\n  \\<lbrakk>?E \\<in> ctxt; t = ?E ?t;\n   \\<And>T\\<^sub>0.\n      \\<Gamma> \\<turnstile> ?t : T\\<^sub>0 \\<Longrightarrow>\n      \\<Gamma> \\<turnstile> ?t' : T\\<^sub>0\\<rbrakk>\n  \\<Longrightarrow> \\<Gamma> \\<turnstile> ?E ?t' : S\n  \\<Gamma> \\<turnstile> S <: T\n  E \\<in> ctxt\n  t = E ta\n  \\<Gamma> \\<turnstile> ta : ?T\\<^sub>0 \\<Longrightarrow>\n  \\<Gamma> \\<turnstile> t' : ?T\\<^sub>0\n\ngoal (1 subgoal):\n 1. \\<Gamma> \\<turnstile> E t' : T", "by (blast intro: typing_typings.intros)"], ["proof (state)\nthis:\n  \\<Gamma> \\<turnstile> E t' : T\n\ngoal (5 subgoals):\n 1. \\<And>\\<Gamma> t\\<^sub>1 T\\<^sub>1 p \\<Delta> t\\<^sub>2 T\\<^sub>2 E t\n       t'.\n       \\<lbrakk>\\<Gamma> \\<turnstile> t\\<^sub>1 : T\\<^sub>1;\n        \\<And>E t t'.\n           \\<lbrakk>E \\<in> ctxt; t\\<^sub>1 = E t;\n            \\<And>T\\<^sub>0.\n               \\<Gamma> \\<turnstile> t : T\\<^sub>0 \\<Longrightarrow>\n               \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n           \\<Longrightarrow> \\<Gamma> \\<turnstile> E t' : T\\<^sub>1;\n        \\<turnstile> p : T\\<^sub>1 \\<Rightarrow> \\<Delta>;\n        \\<Delta> @ \\<Gamma> \\<turnstile> t\\<^sub>2 : T\\<^sub>2;\n        \\<And>E t t'.\n           \\<lbrakk>E \\<in> ctxt; t\\<^sub>2 = E t;\n            \\<And>T\\<^sub>0.\n               \\<Delta> @\n               \\<Gamma> \\<turnstile> t : T\\<^sub>0 \\<Longrightarrow>\n               \\<Delta> @ \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n           \\<Longrightarrow> \\<Delta> @\n                             \\<Gamma> \\<turnstile> E t' : T\\<^sub>2;\n        E \\<in> ctxt; (LET p = t\\<^sub>1 IN t\\<^sub>2) = E t;\n        \\<And>T\\<^sub>0.\n           \\<Gamma> \\<turnstile> t : T\\<^sub>0 \\<Longrightarrow>\n           \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> E\n          t' : \\<down>\\<^sub>\\<tau> \\<parallel>\\<Delta>\\<parallel> 0\n                T\\<^sub>2\n 2. \\<And>\\<Gamma> fs fTs E t t'.\n       \\<lbrakk>\\<Gamma> \\<turnstile> fs [:] fTs;\n        \\<And>E\\<^sub>r t t'.\n           \\<lbrakk>E\\<^sub>r \\<in> rctxt; fs = E\\<^sub>r t;\n            \\<And>T\\<^sub>0.\n               \\<Gamma> \\<turnstile> t : T\\<^sub>0 \\<Longrightarrow>\n               \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n           \\<Longrightarrow> \\<Gamma> \\<turnstile> E\\<^sub>r t' [:] fTs;\n        E \\<in> ctxt; Rcd fs = E t;\n        \\<And>T\\<^sub>0.\n           \\<Gamma> \\<turnstile> t : T\\<^sub>0 \\<Longrightarrow>\n           \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> E t' : RcdT fTs\n 3. \\<And>\\<Gamma> t fTs l T E ta t'.\n       \\<lbrakk>\\<Gamma> \\<turnstile> t : RcdT fTs;\n        \\<And>E ta t'.\n           \\<lbrakk>E \\<in> ctxt; t = E ta;\n            \\<And>T\\<^sub>0.\n               \\<Gamma> \\<turnstile> ta : T\\<^sub>0 \\<Longrightarrow>\n               \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n           \\<Longrightarrow> \\<Gamma> \\<turnstile> E t' : RcdT fTs;\n        fTs\\<langle>l\\<rangle>\\<^sub>? = \\<lfloor>T\\<rfloor>; E \\<in> ctxt;\n        t..l = E ta;\n        \\<And>T\\<^sub>0.\n           \\<Gamma> \\<turnstile> ta : T\\<^sub>0 \\<Longrightarrow>\n           \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> E t' : T\n 4. \\<And>\\<Gamma> E\\<^sub>r t t'.\n       \\<lbrakk>\\<Gamma> \\<turnstile>\\<^sub>w\\<^sub>f;\n        E\\<^sub>r \\<in> rctxt; [] = E\\<^sub>r t;\n        \\<And>T\\<^sub>0.\n           \\<Gamma> \\<turnstile> t : T\\<^sub>0 \\<Longrightarrow>\n           \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> E\\<^sub>r t' [:] []\n 5. \\<And>\\<Gamma> t T fs fTs l E\\<^sub>r ta t'.\n       \\<lbrakk>\\<Gamma> \\<turnstile> t : T;\n        \\<And>E ta t'.\n           \\<lbrakk>E \\<in> ctxt; t = E ta;\n            \\<And>T\\<^sub>0.\n               \\<Gamma> \\<turnstile> ta : T\\<^sub>0 \\<Longrightarrow>\n               \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n           \\<Longrightarrow> \\<Gamma> \\<turnstile> E t' : T;\n        \\<Gamma> \\<turnstile> fs [:] fTs;\n        \\<And>E\\<^sub>r t t'.\n           \\<lbrakk>E\\<^sub>r \\<in> rctxt; fs = E\\<^sub>r t;\n            \\<And>T\\<^sub>0.\n               \\<Gamma> \\<turnstile> t : T\\<^sub>0 \\<Longrightarrow>\n               \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n           \\<Longrightarrow> \\<Gamma> \\<turnstile> E\\<^sub>r t' [:] fTs;\n        fs\\<langle>l\\<rangle>\\<^sub>? = \\<bottom>; E\\<^sub>r \\<in> rctxt;\n        (l, t) \\<Colon> fs = E\\<^sub>r ta;\n        \\<And>T\\<^sub>0.\n           \\<Gamma> \\<turnstile> ta : T\\<^sub>0 \\<Longrightarrow>\n           \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> E\\<^sub>r\n          t' [:] (l, T) \\<Colon>\n                         fTs", "next"], ["proof (state)\ngoal (5 subgoals):\n 1. \\<And>\\<Gamma> t\\<^sub>1 T\\<^sub>1 p \\<Delta> t\\<^sub>2 T\\<^sub>2 E t\n       t'.\n       \\<lbrakk>\\<Gamma> \\<turnstile> t\\<^sub>1 : T\\<^sub>1;\n        \\<And>E t t'.\n           \\<lbrakk>E \\<in> ctxt; t\\<^sub>1 = E t;\n            \\<And>T\\<^sub>0.\n               \\<Gamma> \\<turnstile> t : T\\<^sub>0 \\<Longrightarrow>\n               \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n           \\<Longrightarrow> \\<Gamma> \\<turnstile> E t' : T\\<^sub>1;\n        \\<turnstile> p : T\\<^sub>1 \\<Rightarrow> \\<Delta>;\n        \\<Delta> @ \\<Gamma> \\<turnstile> t\\<^sub>2 : T\\<^sub>2;\n        \\<And>E t t'.\n           \\<lbrakk>E \\<in> ctxt; t\\<^sub>2 = E t;\n            \\<And>T\\<^sub>0.\n               \\<Delta> @\n               \\<Gamma> \\<turnstile> t : T\\<^sub>0 \\<Longrightarrow>\n               \\<Delta> @ \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n           \\<Longrightarrow> \\<Delta> @\n                             \\<Gamma> \\<turnstile> E t' : T\\<^sub>2;\n        E \\<in> ctxt; (LET p = t\\<^sub>1 IN t\\<^sub>2) = E t;\n        \\<And>T\\<^sub>0.\n           \\<Gamma> \\<turnstile> t : T\\<^sub>0 \\<Longrightarrow>\n           \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> E\n          t' : \\<down>\\<^sub>\\<tau> \\<parallel>\\<Delta>\\<parallel> 0\n                T\\<^sub>2\n 2. \\<And>\\<Gamma> fs fTs E t t'.\n       \\<lbrakk>\\<Gamma> \\<turnstile> fs [:] fTs;\n        \\<And>E\\<^sub>r t t'.\n           \\<lbrakk>E\\<^sub>r \\<in> rctxt; fs = E\\<^sub>r t;\n            \\<And>T\\<^sub>0.\n               \\<Gamma> \\<turnstile> t : T\\<^sub>0 \\<Longrightarrow>\n               \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n           \\<Longrightarrow> \\<Gamma> \\<turnstile> E\\<^sub>r t' [:] fTs;\n        E \\<in> ctxt; Rcd fs = E t;\n        \\<And>T\\<^sub>0.\n           \\<Gamma> \\<turnstile> t : T\\<^sub>0 \\<Longrightarrow>\n           \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> E t' : RcdT fTs\n 3. \\<And>\\<Gamma> t fTs l T E ta t'.\n       \\<lbrakk>\\<Gamma> \\<turnstile> t : RcdT fTs;\n        \\<And>E ta t'.\n           \\<lbrakk>E \\<in> ctxt; t = E ta;\n            \\<And>T\\<^sub>0.\n               \\<Gamma> \\<turnstile> ta : T\\<^sub>0 \\<Longrightarrow>\n               \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n           \\<Longrightarrow> \\<Gamma> \\<turnstile> E t' : RcdT fTs;\n        fTs\\<langle>l\\<rangle>\\<^sub>? = \\<lfloor>T\\<rfloor>; E \\<in> ctxt;\n        t..l = E ta;\n        \\<And>T\\<^sub>0.\n           \\<Gamma> \\<turnstile> ta : T\\<^sub>0 \\<Longrightarrow>\n           \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> E t' : T\n 4. \\<And>\\<Gamma> E\\<^sub>r t t'.\n       \\<lbrakk>\\<Gamma> \\<turnstile>\\<^sub>w\\<^sub>f;\n        E\\<^sub>r \\<in> rctxt; [] = E\\<^sub>r t;\n        \\<And>T\\<^sub>0.\n           \\<Gamma> \\<turnstile> t : T\\<^sub>0 \\<Longrightarrow>\n           \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> E\\<^sub>r t' [:] []\n 5. \\<And>\\<Gamma> t T fs fTs l E\\<^sub>r ta t'.\n       \\<lbrakk>\\<Gamma> \\<turnstile> t : T;\n        \\<And>E ta t'.\n           \\<lbrakk>E \\<in> ctxt; t = E ta;\n            \\<And>T\\<^sub>0.\n               \\<Gamma> \\<turnstile> ta : T\\<^sub>0 \\<Longrightarrow>\n               \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n           \\<Longrightarrow> \\<Gamma> \\<turnstile> E t' : T;\n        \\<Gamma> \\<turnstile> fs [:] fTs;\n        \\<And>E\\<^sub>r t t'.\n           \\<lbrakk>E\\<^sub>r \\<in> rctxt; fs = E\\<^sub>r t;\n            \\<And>T\\<^sub>0.\n               \\<Gamma> \\<turnstile> t : T\\<^sub>0 \\<Longrightarrow>\n               \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n           \\<Longrightarrow> \\<Gamma> \\<turnstile> E\\<^sub>r t' [:] fTs;\n        fs\\<langle>l\\<rangle>\\<^sub>? = \\<bottom>; E\\<^sub>r \\<in> rctxt;\n        (l, t) \\<Colon> fs = E\\<^sub>r ta;\n        \\<And>T\\<^sub>0.\n           \\<Gamma> \\<turnstile> ta : T\\<^sub>0 \\<Longrightarrow>\n           \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> E\\<^sub>r\n          t' [:] (l, T) \\<Colon>\n                         fTs", "case (T_Let \\<Gamma> t\\<^sub>1 T\\<^sub>1 p \\<Delta> t\\<^sub>2 T\\<^sub>2 E t t')"], ["proof (state)\nthis:\n  \\<Gamma> \\<turnstile> t\\<^sub>1 : T\\<^sub>1\n  \\<lbrakk>?E \\<in> ctxt; t\\<^sub>1 = ?E ?t;\n   \\<And>T\\<^sub>0.\n      \\<Gamma> \\<turnstile> ?t : T\\<^sub>0 \\<Longrightarrow>\n      \\<Gamma> \\<turnstile> ?t' : T\\<^sub>0\\<rbrakk>\n  \\<Longrightarrow> \\<Gamma> \\<turnstile> ?E ?t' : T\\<^sub>1\n  \\<turnstile> p : T\\<^sub>1 \\<Rightarrow> \\<Delta>\n  \\<Delta> @ \\<Gamma> \\<turnstile> t\\<^sub>2 : T\\<^sub>2\n  \\<lbrakk>?E \\<in> ctxt; t\\<^sub>2 = ?E ?t;\n   \\<And>T\\<^sub>0.\n      \\<Delta> @ \\<Gamma> \\<turnstile> ?t : T\\<^sub>0 \\<Longrightarrow>\n      \\<Delta> @ \\<Gamma> \\<turnstile> ?t' : T\\<^sub>0\\<rbrakk>\n  \\<Longrightarrow> \\<Delta> @ \\<Gamma> \\<turnstile> ?E ?t' : T\\<^sub>2\n  E \\<in> ctxt\n  (LET p = t\\<^sub>1 IN t\\<^sub>2) = E t\n  \\<Gamma> \\<turnstile> t : ?T\\<^sub>0 \\<Longrightarrow>\n  \\<Gamma> \\<turnstile> t' : ?T\\<^sub>0\n\ngoal (5 subgoals):\n 1. \\<And>\\<Gamma> t\\<^sub>1 T\\<^sub>1 p \\<Delta> t\\<^sub>2 T\\<^sub>2 E t\n       t'.\n       \\<lbrakk>\\<Gamma> \\<turnstile> t\\<^sub>1 : T\\<^sub>1;\n        \\<And>E t t'.\n           \\<lbrakk>E \\<in> ctxt; t\\<^sub>1 = E t;\n            \\<And>T\\<^sub>0.\n               \\<Gamma> \\<turnstile> t : T\\<^sub>0 \\<Longrightarrow>\n               \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n           \\<Longrightarrow> \\<Gamma> \\<turnstile> E t' : T\\<^sub>1;\n        \\<turnstile> p : T\\<^sub>1 \\<Rightarrow> \\<Delta>;\n        \\<Delta> @ \\<Gamma> \\<turnstile> t\\<^sub>2 : T\\<^sub>2;\n        \\<And>E t t'.\n           \\<lbrakk>E \\<in> ctxt; t\\<^sub>2 = E t;\n            \\<And>T\\<^sub>0.\n               \\<Delta> @\n               \\<Gamma> \\<turnstile> t : T\\<^sub>0 \\<Longrightarrow>\n               \\<Delta> @ \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n           \\<Longrightarrow> \\<Delta> @\n                             \\<Gamma> \\<turnstile> E t' : T\\<^sub>2;\n        E \\<in> ctxt; (LET p = t\\<^sub>1 IN t\\<^sub>2) = E t;\n        \\<And>T\\<^sub>0.\n           \\<Gamma> \\<turnstile> t : T\\<^sub>0 \\<Longrightarrow>\n           \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> E\n          t' : \\<down>\\<^sub>\\<tau> \\<parallel>\\<Delta>\\<parallel> 0\n                T\\<^sub>2\n 2. \\<And>\\<Gamma> fs fTs E t t'.\n       \\<lbrakk>\\<Gamma> \\<turnstile> fs [:] fTs;\n        \\<And>E\\<^sub>r t t'.\n           \\<lbrakk>E\\<^sub>r \\<in> rctxt; fs = E\\<^sub>r t;\n            \\<And>T\\<^sub>0.\n               \\<Gamma> \\<turnstile> t : T\\<^sub>0 \\<Longrightarrow>\n               \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n           \\<Longrightarrow> \\<Gamma> \\<turnstile> E\\<^sub>r t' [:] fTs;\n        E \\<in> ctxt; Rcd fs = E t;\n        \\<And>T\\<^sub>0.\n           \\<Gamma> \\<turnstile> t : T\\<^sub>0 \\<Longrightarrow>\n           \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> E t' : RcdT fTs\n 3. \\<And>\\<Gamma> t fTs l T E ta t'.\n       \\<lbrakk>\\<Gamma> \\<turnstile> t : RcdT fTs;\n        \\<And>E ta t'.\n           \\<lbrakk>E \\<in> ctxt; t = E ta;\n            \\<And>T\\<^sub>0.\n               \\<Gamma> \\<turnstile> ta : T\\<^sub>0 \\<Longrightarrow>\n               \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n           \\<Longrightarrow> \\<Gamma> \\<turnstile> E t' : RcdT fTs;\n        fTs\\<langle>l\\<rangle>\\<^sub>? = \\<lfloor>T\\<rfloor>; E \\<in> ctxt;\n        t..l = E ta;\n        \\<And>T\\<^sub>0.\n           \\<Gamma> \\<turnstile> ta : T\\<^sub>0 \\<Longrightarrow>\n           \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> E t' : T\n 4. \\<And>\\<Gamma> E\\<^sub>r t t'.\n       \\<lbrakk>\\<Gamma> \\<turnstile>\\<^sub>w\\<^sub>f;\n        E\\<^sub>r \\<in> rctxt; [] = E\\<^sub>r t;\n        \\<And>T\\<^sub>0.\n           \\<Gamma> \\<turnstile> t : T\\<^sub>0 \\<Longrightarrow>\n           \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> E\\<^sub>r t' [:] []\n 5. \\<And>\\<Gamma> t T fs fTs l E\\<^sub>r ta t'.\n       \\<lbrakk>\\<Gamma> \\<turnstile> t : T;\n        \\<And>E ta t'.\n           \\<lbrakk>E \\<in> ctxt; t = E ta;\n            \\<And>T\\<^sub>0.\n               \\<Gamma> \\<turnstile> ta : T\\<^sub>0 \\<Longrightarrow>\n               \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n           \\<Longrightarrow> \\<Gamma> \\<turnstile> E t' : T;\n        \\<Gamma> \\<turnstile> fs [:] fTs;\n        \\<And>E\\<^sub>r t t'.\n           \\<lbrakk>E\\<^sub>r \\<in> rctxt; fs = E\\<^sub>r t;\n            \\<And>T\\<^sub>0.\n               \\<Gamma> \\<turnstile> t : T\\<^sub>0 \\<Longrightarrow>\n               \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n           \\<Longrightarrow> \\<Gamma> \\<turnstile> E\\<^sub>r t' [:] fTs;\n        fs\\<langle>l\\<rangle>\\<^sub>? = \\<bottom>; E\\<^sub>r \\<in> rctxt;\n        (l, t) \\<Colon> fs = E\\<^sub>r ta;\n        \\<And>T\\<^sub>0.\n           \\<Gamma> \\<turnstile> ta : T\\<^sub>0 \\<Longrightarrow>\n           \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> E\\<^sub>r\n          t' [:] (l, T) \\<Colon>\n                         fTs", "from \\<open>E \\<in> ctxt\\<close>"], ["proof (chain)\npicking this:\n  E \\<in> ctxt", "show ?case"], ["proof (prove)\nusing this:\n  E \\<in> ctxt\n\ngoal (1 subgoal):\n 1. \\<Gamma> \\<turnstile> E t' : \\<down>\\<^sub>\\<tau>\n                                  \\<parallel>\\<Delta>\\<parallel> 0 T\\<^sub>2", "using T_Let"], ["proof (prove)\nusing this:\n  E \\<in> ctxt\n  \\<Gamma> \\<turnstile> t\\<^sub>1 : T\\<^sub>1\n  \\<lbrakk>?E \\<in> ctxt; t\\<^sub>1 = ?E ?t;\n   \\<And>T\\<^sub>0.\n      \\<Gamma> \\<turnstile> ?t : T\\<^sub>0 \\<Longrightarrow>\n      \\<Gamma> \\<turnstile> ?t' : T\\<^sub>0\\<rbrakk>\n  \\<Longrightarrow> \\<Gamma> \\<turnstile> ?E ?t' : T\\<^sub>1\n  \\<turnstile> p : T\\<^sub>1 \\<Rightarrow> \\<Delta>\n  \\<Delta> @ \\<Gamma> \\<turnstile> t\\<^sub>2 : T\\<^sub>2\n  \\<lbrakk>?E \\<in> ctxt; t\\<^sub>2 = ?E ?t;\n   \\<And>T\\<^sub>0.\n      \\<Delta> @ \\<Gamma> \\<turnstile> ?t : T\\<^sub>0 \\<Longrightarrow>\n      \\<Delta> @ \\<Gamma> \\<turnstile> ?t' : T\\<^sub>0\\<rbrakk>\n  \\<Longrightarrow> \\<Delta> @ \\<Gamma> \\<turnstile> ?E ?t' : T\\<^sub>2\n  E \\<in> ctxt\n  (LET p = t\\<^sub>1 IN t\\<^sub>2) = E t\n  \\<Gamma> \\<turnstile> t : ?T\\<^sub>0 \\<Longrightarrow>\n  \\<Gamma> \\<turnstile> t' : ?T\\<^sub>0\n\ngoal (1 subgoal):\n 1. \\<Gamma> \\<turnstile> E t' : \\<down>\\<^sub>\\<tau>\n                                  \\<parallel>\\<Delta>\\<parallel> 0 T\\<^sub>2", "by cases (simp_all, (blast intro: typing_typings.intros)+)"], ["proof (state)\nthis:\n  \\<Gamma> \\<turnstile> E t' : \\<down>\\<^sub>\\<tau>\n                                \\<parallel>\\<Delta>\\<parallel> 0 T\\<^sub>2\n\ngoal (4 subgoals):\n 1. \\<And>\\<Gamma> fs fTs E t t'.\n       \\<lbrakk>\\<Gamma> \\<turnstile> fs [:] fTs;\n        \\<And>E\\<^sub>r t t'.\n           \\<lbrakk>E\\<^sub>r \\<in> rctxt; fs = E\\<^sub>r t;\n            \\<And>T\\<^sub>0.\n               \\<Gamma> \\<turnstile> t : T\\<^sub>0 \\<Longrightarrow>\n               \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n           \\<Longrightarrow> \\<Gamma> \\<turnstile> E\\<^sub>r t' [:] fTs;\n        E \\<in> ctxt; Rcd fs = E t;\n        \\<And>T\\<^sub>0.\n           \\<Gamma> \\<turnstile> t : T\\<^sub>0 \\<Longrightarrow>\n           \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> E t' : RcdT fTs\n 2. \\<And>\\<Gamma> t fTs l T E ta t'.\n       \\<lbrakk>\\<Gamma> \\<turnstile> t : RcdT fTs;\n        \\<And>E ta t'.\n           \\<lbrakk>E \\<in> ctxt; t = E ta;\n            \\<And>T\\<^sub>0.\n               \\<Gamma> \\<turnstile> ta : T\\<^sub>0 \\<Longrightarrow>\n               \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n           \\<Longrightarrow> \\<Gamma> \\<turnstile> E t' : RcdT fTs;\n        fTs\\<langle>l\\<rangle>\\<^sub>? = \\<lfloor>T\\<rfloor>; E \\<in> ctxt;\n        t..l = E ta;\n        \\<And>T\\<^sub>0.\n           \\<Gamma> \\<turnstile> ta : T\\<^sub>0 \\<Longrightarrow>\n           \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> E t' : T\n 3. \\<And>\\<Gamma> E\\<^sub>r t t'.\n       \\<lbrakk>\\<Gamma> \\<turnstile>\\<^sub>w\\<^sub>f;\n        E\\<^sub>r \\<in> rctxt; [] = E\\<^sub>r t;\n        \\<And>T\\<^sub>0.\n           \\<Gamma> \\<turnstile> t : T\\<^sub>0 \\<Longrightarrow>\n           \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> E\\<^sub>r t' [:] []\n 4. \\<And>\\<Gamma> t T fs fTs l E\\<^sub>r ta t'.\n       \\<lbrakk>\\<Gamma> \\<turnstile> t : T;\n        \\<And>E ta t'.\n           \\<lbrakk>E \\<in> ctxt; t = E ta;\n            \\<And>T\\<^sub>0.\n               \\<Gamma> \\<turnstile> ta : T\\<^sub>0 \\<Longrightarrow>\n               \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n           \\<Longrightarrow> \\<Gamma> \\<turnstile> E t' : T;\n        \\<Gamma> \\<turnstile> fs [:] fTs;\n        \\<And>E\\<^sub>r t t'.\n           \\<lbrakk>E\\<^sub>r \\<in> rctxt; fs = E\\<^sub>r t;\n            \\<And>T\\<^sub>0.\n               \\<Gamma> \\<turnstile> t : T\\<^sub>0 \\<Longrightarrow>\n               \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n           \\<Longrightarrow> \\<Gamma> \\<turnstile> E\\<^sub>r t' [:] fTs;\n        fs\\<langle>l\\<rangle>\\<^sub>? = \\<bottom>; E\\<^sub>r \\<in> rctxt;\n        (l, t) \\<Colon> fs = E\\<^sub>r ta;\n        \\<And>T\\<^sub>0.\n           \\<Gamma> \\<turnstile> ta : T\\<^sub>0 \\<Longrightarrow>\n           \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> E\\<^sub>r\n          t' [:] (l, T) \\<Colon>\n                         fTs", "next"], ["proof (state)\ngoal (4 subgoals):\n 1. \\<And>\\<Gamma> fs fTs E t t'.\n       \\<lbrakk>\\<Gamma> \\<turnstile> fs [:] fTs;\n        \\<And>E\\<^sub>r t t'.\n           \\<lbrakk>E\\<^sub>r \\<in> rctxt; fs = E\\<^sub>r t;\n            \\<And>T\\<^sub>0.\n               \\<Gamma> \\<turnstile> t : T\\<^sub>0 \\<Longrightarrow>\n               \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n           \\<Longrightarrow> \\<Gamma> \\<turnstile> E\\<^sub>r t' [:] fTs;\n        E \\<in> ctxt; Rcd fs = E t;\n        \\<And>T\\<^sub>0.\n           \\<Gamma> \\<turnstile> t : T\\<^sub>0 \\<Longrightarrow>\n           \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> E t' : RcdT fTs\n 2. \\<And>\\<Gamma> t fTs l T E ta t'.\n       \\<lbrakk>\\<Gamma> \\<turnstile> t : RcdT fTs;\n        \\<And>E ta t'.\n           \\<lbrakk>E \\<in> ctxt; t = E ta;\n            \\<And>T\\<^sub>0.\n               \\<Gamma> \\<turnstile> ta : T\\<^sub>0 \\<Longrightarrow>\n               \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n           \\<Longrightarrow> \\<Gamma> \\<turnstile> E t' : RcdT fTs;\n        fTs\\<langle>l\\<rangle>\\<^sub>? = \\<lfloor>T\\<rfloor>; E \\<in> ctxt;\n        t..l = E ta;\n        \\<And>T\\<^sub>0.\n           \\<Gamma> \\<turnstile> ta : T\\<^sub>0 \\<Longrightarrow>\n           \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> E t' : T\n 3. \\<And>\\<Gamma> E\\<^sub>r t t'.\n       \\<lbrakk>\\<Gamma> \\<turnstile>\\<^sub>w\\<^sub>f;\n        E\\<^sub>r \\<in> rctxt; [] = E\\<^sub>r t;\n        \\<And>T\\<^sub>0.\n           \\<Gamma> \\<turnstile> t : T\\<^sub>0 \\<Longrightarrow>\n           \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> E\\<^sub>r t' [:] []\n 4. \\<And>\\<Gamma> t T fs fTs l E\\<^sub>r ta t'.\n       \\<lbrakk>\\<Gamma> \\<turnstile> t : T;\n        \\<And>E ta t'.\n           \\<lbrakk>E \\<in> ctxt; t = E ta;\n            \\<And>T\\<^sub>0.\n               \\<Gamma> \\<turnstile> ta : T\\<^sub>0 \\<Longrightarrow>\n               \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n           \\<Longrightarrow> \\<Gamma> \\<turnstile> E t' : T;\n        \\<Gamma> \\<turnstile> fs [:] fTs;\n        \\<And>E\\<^sub>r t t'.\n           \\<lbrakk>E\\<^sub>r \\<in> rctxt; fs = E\\<^sub>r t;\n            \\<And>T\\<^sub>0.\n               \\<Gamma> \\<turnstile> t : T\\<^sub>0 \\<Longrightarrow>\n               \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n           \\<Longrightarrow> \\<Gamma> \\<turnstile> E\\<^sub>r t' [:] fTs;\n        fs\\<langle>l\\<rangle>\\<^sub>? = \\<bottom>; E\\<^sub>r \\<in> rctxt;\n        (l, t) \\<Colon> fs = E\\<^sub>r ta;\n        \\<And>T\\<^sub>0.\n           \\<Gamma> \\<turnstile> ta : T\\<^sub>0 \\<Longrightarrow>\n           \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> E\\<^sub>r\n          t' [:] (l, T) \\<Colon>\n                         fTs", "case (T_Rcd \\<Gamma> fs fTs E t t')"], ["proof (state)\nthis:\n  \\<Gamma> \\<turnstile> fs [:] fTs\n  \\<lbrakk>?E\\<^sub>r \\<in> rctxt; fs = ?E\\<^sub>r ?t;\n   \\<And>T\\<^sub>0.\n      \\<Gamma> \\<turnstile> ?t : T\\<^sub>0 \\<Longrightarrow>\n      \\<Gamma> \\<turnstile> ?t' : T\\<^sub>0\\<rbrakk>\n  \\<Longrightarrow> \\<Gamma> \\<turnstile> ?E\\<^sub>r ?t' [:] fTs\n  E \\<in> ctxt\n  Rcd fs = E t\n  \\<Gamma> \\<turnstile> t : ?T\\<^sub>0 \\<Longrightarrow>\n  \\<Gamma> \\<turnstile> t' : ?T\\<^sub>0\n\ngoal (4 subgoals):\n 1. \\<And>\\<Gamma> fs fTs E t t'.\n       \\<lbrakk>\\<Gamma> \\<turnstile> fs [:] fTs;\n        \\<And>E\\<^sub>r t t'.\n           \\<lbrakk>E\\<^sub>r \\<in> rctxt; fs = E\\<^sub>r t;\n            \\<And>T\\<^sub>0.\n               \\<Gamma> \\<turnstile> t : T\\<^sub>0 \\<Longrightarrow>\n               \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n           \\<Longrightarrow> \\<Gamma> \\<turnstile> E\\<^sub>r t' [:] fTs;\n        E \\<in> ctxt; Rcd fs = E t;\n        \\<And>T\\<^sub>0.\n           \\<Gamma> \\<turnstile> t : T\\<^sub>0 \\<Longrightarrow>\n           \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> E t' : RcdT fTs\n 2. \\<And>\\<Gamma> t fTs l T E ta t'.\n       \\<lbrakk>\\<Gamma> \\<turnstile> t : RcdT fTs;\n        \\<And>E ta t'.\n           \\<lbrakk>E \\<in> ctxt; t = E ta;\n            \\<And>T\\<^sub>0.\n               \\<Gamma> \\<turnstile> ta : T\\<^sub>0 \\<Longrightarrow>\n               \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n           \\<Longrightarrow> \\<Gamma> \\<turnstile> E t' : RcdT fTs;\n        fTs\\<langle>l\\<rangle>\\<^sub>? = \\<lfloor>T\\<rfloor>; E \\<in> ctxt;\n        t..l = E ta;\n        \\<And>T\\<^sub>0.\n           \\<Gamma> \\<turnstile> ta : T\\<^sub>0 \\<Longrightarrow>\n           \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> E t' : T\n 3. \\<And>\\<Gamma> E\\<^sub>r t t'.\n       \\<lbrakk>\\<Gamma> \\<turnstile>\\<^sub>w\\<^sub>f;\n        E\\<^sub>r \\<in> rctxt; [] = E\\<^sub>r t;\n        \\<And>T\\<^sub>0.\n           \\<Gamma> \\<turnstile> t : T\\<^sub>0 \\<Longrightarrow>\n           \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> E\\<^sub>r t' [:] []\n 4. \\<And>\\<Gamma> t T fs fTs l E\\<^sub>r ta t'.\n       \\<lbrakk>\\<Gamma> \\<turnstile> t : T;\n        \\<And>E ta t'.\n           \\<lbrakk>E \\<in> ctxt; t = E ta;\n            \\<And>T\\<^sub>0.\n               \\<Gamma> \\<turnstile> ta : T\\<^sub>0 \\<Longrightarrow>\n               \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n           \\<Longrightarrow> \\<Gamma> \\<turnstile> E t' : T;\n        \\<Gamma> \\<turnstile> fs [:] fTs;\n        \\<And>E\\<^sub>r t t'.\n           \\<lbrakk>E\\<^sub>r \\<in> rctxt; fs = E\\<^sub>r t;\n            \\<And>T\\<^sub>0.\n               \\<Gamma> \\<turnstile> t : T\\<^sub>0 \\<Longrightarrow>\n               \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n           \\<Longrightarrow> \\<Gamma> \\<turnstile> E\\<^sub>r t' [:] fTs;\n        fs\\<langle>l\\<rangle>\\<^sub>? = \\<bottom>; E\\<^sub>r \\<in> rctxt;\n        (l, t) \\<Colon> fs = E\\<^sub>r ta;\n        \\<And>T\\<^sub>0.\n           \\<Gamma> \\<turnstile> ta : T\\<^sub>0 \\<Longrightarrow>\n           \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> E\\<^sub>r\n          t' [:] (l, T) \\<Colon>\n                         fTs", "from \\<open>E \\<in> ctxt\\<close>"], ["proof (chain)\npicking this:\n  E \\<in> ctxt", "show ?case"], ["proof (prove)\nusing this:\n  E \\<in> ctxt\n\ngoal (1 subgoal):\n 1. \\<Gamma> \\<turnstile> E t' : RcdT fTs", "using T_Rcd"], ["proof (prove)\nusing this:\n  E \\<in> ctxt\n  \\<Gamma> \\<turnstile> fs [:] fTs\n  \\<lbrakk>?E\\<^sub>r \\<in> rctxt; fs = ?E\\<^sub>r ?t;\n   \\<And>T\\<^sub>0.\n      \\<Gamma> \\<turnstile> ?t : T\\<^sub>0 \\<Longrightarrow>\n      \\<Gamma> \\<turnstile> ?t' : T\\<^sub>0\\<rbrakk>\n  \\<Longrightarrow> \\<Gamma> \\<turnstile> ?E\\<^sub>r ?t' [:] fTs\n  E \\<in> ctxt\n  Rcd fs = E t\n  \\<Gamma> \\<turnstile> t : ?T\\<^sub>0 \\<Longrightarrow>\n  \\<Gamma> \\<turnstile> t' : ?T\\<^sub>0\n\ngoal (1 subgoal):\n 1. \\<Gamma> \\<turnstile> E t' : RcdT fTs", "by cases (simp_all, (blast intro: typing_typings.intros)+)"], ["proof (state)\nthis:\n  \\<Gamma> \\<turnstile> E t' : RcdT fTs\n\ngoal (3 subgoals):\n 1. \\<And>\\<Gamma> t fTs l T E ta t'.\n       \\<lbrakk>\\<Gamma> \\<turnstile> t : RcdT fTs;\n        \\<And>E ta t'.\n           \\<lbrakk>E \\<in> ctxt; t = E ta;\n            \\<And>T\\<^sub>0.\n               \\<Gamma> \\<turnstile> ta : T\\<^sub>0 \\<Longrightarrow>\n               \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n           \\<Longrightarrow> \\<Gamma> \\<turnstile> E t' : RcdT fTs;\n        fTs\\<langle>l\\<rangle>\\<^sub>? = \\<lfloor>T\\<rfloor>; E \\<in> ctxt;\n        t..l = E ta;\n        \\<And>T\\<^sub>0.\n           \\<Gamma> \\<turnstile> ta : T\\<^sub>0 \\<Longrightarrow>\n           \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> E t' : T\n 2. \\<And>\\<Gamma> E\\<^sub>r t t'.\n       \\<lbrakk>\\<Gamma> \\<turnstile>\\<^sub>w\\<^sub>f;\n        E\\<^sub>r \\<in> rctxt; [] = E\\<^sub>r t;\n        \\<And>T\\<^sub>0.\n           \\<Gamma> \\<turnstile> t : T\\<^sub>0 \\<Longrightarrow>\n           \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> E\\<^sub>r t' [:] []\n 3. \\<And>\\<Gamma> t T fs fTs l E\\<^sub>r ta t'.\n       \\<lbrakk>\\<Gamma> \\<turnstile> t : T;\n        \\<And>E ta t'.\n           \\<lbrakk>E \\<in> ctxt; t = E ta;\n            \\<And>T\\<^sub>0.\n               \\<Gamma> \\<turnstile> ta : T\\<^sub>0 \\<Longrightarrow>\n               \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n           \\<Longrightarrow> \\<Gamma> \\<turnstile> E t' : T;\n        \\<Gamma> \\<turnstile> fs [:] fTs;\n        \\<And>E\\<^sub>r t t'.\n           \\<lbrakk>E\\<^sub>r \\<in> rctxt; fs = E\\<^sub>r t;\n            \\<And>T\\<^sub>0.\n               \\<Gamma> \\<turnstile> t : T\\<^sub>0 \\<Longrightarrow>\n               \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n           \\<Longrightarrow> \\<Gamma> \\<turnstile> E\\<^sub>r t' [:] fTs;\n        fs\\<langle>l\\<rangle>\\<^sub>? = \\<bottom>; E\\<^sub>r \\<in> rctxt;\n        (l, t) \\<Colon> fs = E\\<^sub>r ta;\n        \\<And>T\\<^sub>0.\n           \\<Gamma> \\<turnstile> ta : T\\<^sub>0 \\<Longrightarrow>\n           \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> E\\<^sub>r\n          t' [:] (l, T) \\<Colon>\n                         fTs", "next"], ["proof (state)\ngoal (3 subgoals):\n 1. \\<And>\\<Gamma> t fTs l T E ta t'.\n       \\<lbrakk>\\<Gamma> \\<turnstile> t : RcdT fTs;\n        \\<And>E ta t'.\n           \\<lbrakk>E \\<in> ctxt; t = E ta;\n            \\<And>T\\<^sub>0.\n               \\<Gamma> \\<turnstile> ta : T\\<^sub>0 \\<Longrightarrow>\n               \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n           \\<Longrightarrow> \\<Gamma> \\<turnstile> E t' : RcdT fTs;\n        fTs\\<langle>l\\<rangle>\\<^sub>? = \\<lfloor>T\\<rfloor>; E \\<in> ctxt;\n        t..l = E ta;\n        \\<And>T\\<^sub>0.\n           \\<Gamma> \\<turnstile> ta : T\\<^sub>0 \\<Longrightarrow>\n           \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> E t' : T\n 2. \\<And>\\<Gamma> E\\<^sub>r t t'.\n       \\<lbrakk>\\<Gamma> \\<turnstile>\\<^sub>w\\<^sub>f;\n        E\\<^sub>r \\<in> rctxt; [] = E\\<^sub>r t;\n        \\<And>T\\<^sub>0.\n           \\<Gamma> \\<turnstile> t : T\\<^sub>0 \\<Longrightarrow>\n           \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> E\\<^sub>r t' [:] []\n 3. \\<And>\\<Gamma> t T fs fTs l E\\<^sub>r ta t'.\n       \\<lbrakk>\\<Gamma> \\<turnstile> t : T;\n        \\<And>E ta t'.\n           \\<lbrakk>E \\<in> ctxt; t = E ta;\n            \\<And>T\\<^sub>0.\n               \\<Gamma> \\<turnstile> ta : T\\<^sub>0 \\<Longrightarrow>\n               \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n           \\<Longrightarrow> \\<Gamma> \\<turnstile> E t' : T;\n        \\<Gamma> \\<turnstile> fs [:] fTs;\n        \\<And>E\\<^sub>r t t'.\n           \\<lbrakk>E\\<^sub>r \\<in> rctxt; fs = E\\<^sub>r t;\n            \\<And>T\\<^sub>0.\n               \\<Gamma> \\<turnstile> t : T\\<^sub>0 \\<Longrightarrow>\n               \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n           \\<Longrightarrow> \\<Gamma> \\<turnstile> E\\<^sub>r t' [:] fTs;\n        fs\\<langle>l\\<rangle>\\<^sub>? = \\<bottom>; E\\<^sub>r \\<in> rctxt;\n        (l, t) \\<Colon> fs = E\\<^sub>r ta;\n        \\<And>T\\<^sub>0.\n           \\<Gamma> \\<turnstile> ta : T\\<^sub>0 \\<Longrightarrow>\n           \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> E\\<^sub>r\n          t' [:] (l, T) \\<Colon>\n                         fTs", "case (T_Proj \\<Gamma> t fTs l T E ta t')"], ["proof (state)\nthis:\n  \\<Gamma> \\<turnstile> t : RcdT fTs\n  \\<lbrakk>?E \\<in> ctxt; t = ?E ?t;\n   \\<And>T\\<^sub>0.\n      \\<Gamma> \\<turnstile> ?t : T\\<^sub>0 \\<Longrightarrow>\n      \\<Gamma> \\<turnstile> ?t' : T\\<^sub>0\\<rbrakk>\n  \\<Longrightarrow> \\<Gamma> \\<turnstile> ?E ?t' : RcdT fTs\n  fTs\\<langle>l\\<rangle>\\<^sub>? = \\<lfloor>T\\<rfloor>\n  E \\<in> ctxt\n  t..l = E ta\n  \\<Gamma> \\<turnstile> ta : ?T\\<^sub>0 \\<Longrightarrow>\n  \\<Gamma> \\<turnstile> t' : ?T\\<^sub>0\n\ngoal (3 subgoals):\n 1. \\<And>\\<Gamma> t fTs l T E ta t'.\n       \\<lbrakk>\\<Gamma> \\<turnstile> t : RcdT fTs;\n        \\<And>E ta t'.\n           \\<lbrakk>E \\<in> ctxt; t = E ta;\n            \\<And>T\\<^sub>0.\n               \\<Gamma> \\<turnstile> ta : T\\<^sub>0 \\<Longrightarrow>\n               \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n           \\<Longrightarrow> \\<Gamma> \\<turnstile> E t' : RcdT fTs;\n        fTs\\<langle>l\\<rangle>\\<^sub>? = \\<lfloor>T\\<rfloor>; E \\<in> ctxt;\n        t..l = E ta;\n        \\<And>T\\<^sub>0.\n           \\<Gamma> \\<turnstile> ta : T\\<^sub>0 \\<Longrightarrow>\n           \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> E t' : T\n 2. \\<And>\\<Gamma> E\\<^sub>r t t'.\n       \\<lbrakk>\\<Gamma> \\<turnstile>\\<^sub>w\\<^sub>f;\n        E\\<^sub>r \\<in> rctxt; [] = E\\<^sub>r t;\n        \\<And>T\\<^sub>0.\n           \\<Gamma> \\<turnstile> t : T\\<^sub>0 \\<Longrightarrow>\n           \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> E\\<^sub>r t' [:] []\n 3. \\<And>\\<Gamma> t T fs fTs l E\\<^sub>r ta t'.\n       \\<lbrakk>\\<Gamma> \\<turnstile> t : T;\n        \\<And>E ta t'.\n           \\<lbrakk>E \\<in> ctxt; t = E ta;\n            \\<And>T\\<^sub>0.\n               \\<Gamma> \\<turnstile> ta : T\\<^sub>0 \\<Longrightarrow>\n               \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n           \\<Longrightarrow> \\<Gamma> \\<turnstile> E t' : T;\n        \\<Gamma> \\<turnstile> fs [:] fTs;\n        \\<And>E\\<^sub>r t t'.\n           \\<lbrakk>E\\<^sub>r \\<in> rctxt; fs = E\\<^sub>r t;\n            \\<And>T\\<^sub>0.\n               \\<Gamma> \\<turnstile> t : T\\<^sub>0 \\<Longrightarrow>\n               \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n           \\<Longrightarrow> \\<Gamma> \\<turnstile> E\\<^sub>r t' [:] fTs;\n        fs\\<langle>l\\<rangle>\\<^sub>? = \\<bottom>; E\\<^sub>r \\<in> rctxt;\n        (l, t) \\<Colon> fs = E\\<^sub>r ta;\n        \\<And>T\\<^sub>0.\n           \\<Gamma> \\<turnstile> ta : T\\<^sub>0 \\<Longrightarrow>\n           \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> E\\<^sub>r\n          t' [:] (l, T) \\<Colon>\n                         fTs", "from \\<open>E \\<in> ctxt\\<close>"], ["proof (chain)\npicking this:\n  E \\<in> ctxt", "show ?case"], ["proof (prove)\nusing this:\n  E \\<in> ctxt\n\ngoal (1 subgoal):\n 1. \\<Gamma> \\<turnstile> E t' : T", "using T_Proj"], ["proof (prove)\nusing this:\n  E \\<in> ctxt\n  \\<Gamma> \\<turnstile> t : RcdT fTs\n  \\<lbrakk>?E \\<in> ctxt; t = ?E ?t;\n   \\<And>T\\<^sub>0.\n      \\<Gamma> \\<turnstile> ?t : T\\<^sub>0 \\<Longrightarrow>\n      \\<Gamma> \\<turnstile> ?t' : T\\<^sub>0\\<rbrakk>\n  \\<Longrightarrow> \\<Gamma> \\<turnstile> ?E ?t' : RcdT fTs\n  fTs\\<langle>l\\<rangle>\\<^sub>? = \\<lfloor>T\\<rfloor>\n  E \\<in> ctxt\n  t..l = E ta\n  \\<Gamma> \\<turnstile> ta : ?T\\<^sub>0 \\<Longrightarrow>\n  \\<Gamma> \\<turnstile> t' : ?T\\<^sub>0\n\ngoal (1 subgoal):\n 1. \\<Gamma> \\<turnstile> E t' : T", "by cases (simp_all, (blast intro: typing_typings.intros)+)"], ["proof (state)\nthis:\n  \\<Gamma> \\<turnstile> E t' : T\n\ngoal (2 subgoals):\n 1. \\<And>\\<Gamma> E\\<^sub>r t t'.\n       \\<lbrakk>\\<Gamma> \\<turnstile>\\<^sub>w\\<^sub>f;\n        E\\<^sub>r \\<in> rctxt; [] = E\\<^sub>r t;\n        \\<And>T\\<^sub>0.\n           \\<Gamma> \\<turnstile> t : T\\<^sub>0 \\<Longrightarrow>\n           \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> E\\<^sub>r t' [:] []\n 2. \\<And>\\<Gamma> t T fs fTs l E\\<^sub>r ta t'.\n       \\<lbrakk>\\<Gamma> \\<turnstile> t : T;\n        \\<And>E ta t'.\n           \\<lbrakk>E \\<in> ctxt; t = E ta;\n            \\<And>T\\<^sub>0.\n               \\<Gamma> \\<turnstile> ta : T\\<^sub>0 \\<Longrightarrow>\n               \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n           \\<Longrightarrow> \\<Gamma> \\<turnstile> E t' : T;\n        \\<Gamma> \\<turnstile> fs [:] fTs;\n        \\<And>E\\<^sub>r t t'.\n           \\<lbrakk>E\\<^sub>r \\<in> rctxt; fs = E\\<^sub>r t;\n            \\<And>T\\<^sub>0.\n               \\<Gamma> \\<turnstile> t : T\\<^sub>0 \\<Longrightarrow>\n               \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n           \\<Longrightarrow> \\<Gamma> \\<turnstile> E\\<^sub>r t' [:] fTs;\n        fs\\<langle>l\\<rangle>\\<^sub>? = \\<bottom>; E\\<^sub>r \\<in> rctxt;\n        (l, t) \\<Colon> fs = E\\<^sub>r ta;\n        \\<And>T\\<^sub>0.\n           \\<Gamma> \\<turnstile> ta : T\\<^sub>0 \\<Longrightarrow>\n           \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> E\\<^sub>r\n          t' [:] (l, T) \\<Colon>\n                         fTs", "next"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>\\<Gamma> E\\<^sub>r t t'.\n       \\<lbrakk>\\<Gamma> \\<turnstile>\\<^sub>w\\<^sub>f;\n        E\\<^sub>r \\<in> rctxt; [] = E\\<^sub>r t;\n        \\<And>T\\<^sub>0.\n           \\<Gamma> \\<turnstile> t : T\\<^sub>0 \\<Longrightarrow>\n           \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> E\\<^sub>r t' [:] []\n 2. \\<And>\\<Gamma> t T fs fTs l E\\<^sub>r ta t'.\n       \\<lbrakk>\\<Gamma> \\<turnstile> t : T;\n        \\<And>E ta t'.\n           \\<lbrakk>E \\<in> ctxt; t = E ta;\n            \\<And>T\\<^sub>0.\n               \\<Gamma> \\<turnstile> ta : T\\<^sub>0 \\<Longrightarrow>\n               \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n           \\<Longrightarrow> \\<Gamma> \\<turnstile> E t' : T;\n        \\<Gamma> \\<turnstile> fs [:] fTs;\n        \\<And>E\\<^sub>r t t'.\n           \\<lbrakk>E\\<^sub>r \\<in> rctxt; fs = E\\<^sub>r t;\n            \\<And>T\\<^sub>0.\n               \\<Gamma> \\<turnstile> t : T\\<^sub>0 \\<Longrightarrow>\n               \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n           \\<Longrightarrow> \\<Gamma> \\<turnstile> E\\<^sub>r t' [:] fTs;\n        fs\\<langle>l\\<rangle>\\<^sub>? = \\<bottom>; E\\<^sub>r \\<in> rctxt;\n        (l, t) \\<Colon> fs = E\\<^sub>r ta;\n        \\<And>T\\<^sub>0.\n           \\<Gamma> \\<turnstile> ta : T\\<^sub>0 \\<Longrightarrow>\n           \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> E\\<^sub>r\n          t' [:] (l, T) \\<Colon>\n                         fTs", "case (T_Nil \\<Gamma> E t t')"], ["proof (state)\nthis:\n  \\<Gamma> \\<turnstile>\\<^sub>w\\<^sub>f\n  E \\<in> rctxt\n  [] = E t\n  \\<Gamma> \\<turnstile> t : ?T\\<^sub>0 \\<Longrightarrow>\n  \\<Gamma> \\<turnstile> t' : ?T\\<^sub>0\n\ngoal (2 subgoals):\n 1. \\<And>\\<Gamma> E\\<^sub>r t t'.\n       \\<lbrakk>\\<Gamma> \\<turnstile>\\<^sub>w\\<^sub>f;\n        E\\<^sub>r \\<in> rctxt; [] = E\\<^sub>r t;\n        \\<And>T\\<^sub>0.\n           \\<Gamma> \\<turnstile> t : T\\<^sub>0 \\<Longrightarrow>\n           \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> E\\<^sub>r t' [:] []\n 2. \\<And>\\<Gamma> t T fs fTs l E\\<^sub>r ta t'.\n       \\<lbrakk>\\<Gamma> \\<turnstile> t : T;\n        \\<And>E ta t'.\n           \\<lbrakk>E \\<in> ctxt; t = E ta;\n            \\<And>T\\<^sub>0.\n               \\<Gamma> \\<turnstile> ta : T\\<^sub>0 \\<Longrightarrow>\n               \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n           \\<Longrightarrow> \\<Gamma> \\<turnstile> E t' : T;\n        \\<Gamma> \\<turnstile> fs [:] fTs;\n        \\<And>E\\<^sub>r t t'.\n           \\<lbrakk>E\\<^sub>r \\<in> rctxt; fs = E\\<^sub>r t;\n            \\<And>T\\<^sub>0.\n               \\<Gamma> \\<turnstile> t : T\\<^sub>0 \\<Longrightarrow>\n               \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n           \\<Longrightarrow> \\<Gamma> \\<turnstile> E\\<^sub>r t' [:] fTs;\n        fs\\<langle>l\\<rangle>\\<^sub>? = \\<bottom>; E\\<^sub>r \\<in> rctxt;\n        (l, t) \\<Colon> fs = E\\<^sub>r ta;\n        \\<And>T\\<^sub>0.\n           \\<Gamma> \\<turnstile> ta : T\\<^sub>0 \\<Longrightarrow>\n           \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> E\\<^sub>r\n          t' [:] (l, T) \\<Colon>\n                         fTs", "from \\<open>E \\<in> rctxt\\<close>"], ["proof (chain)\npicking this:\n  E \\<in> rctxt", "show ?case"], ["proof (prove)\nusing this:\n  E \\<in> rctxt\n\ngoal (1 subgoal):\n 1. \\<Gamma> \\<turnstile> E t' [:] []", "using T_Nil"], ["proof (prove)\nusing this:\n  E \\<in> rctxt\n  \\<Gamma> \\<turnstile>\\<^sub>w\\<^sub>f\n  E \\<in> rctxt\n  [] = E t\n  \\<Gamma> \\<turnstile> t : ?T\\<^sub>0 \\<Longrightarrow>\n  \\<Gamma> \\<turnstile> t' : ?T\\<^sub>0\n\ngoal (1 subgoal):\n 1. \\<Gamma> \\<turnstile> E t' [:] []", "by cases simp_all"], ["proof (state)\nthis:\n  \\<Gamma> \\<turnstile> E t' [:] []\n\ngoal (1 subgoal):\n 1. \\<And>\\<Gamma> t T fs fTs l E\\<^sub>r ta t'.\n       \\<lbrakk>\\<Gamma> \\<turnstile> t : T;\n        \\<And>E ta t'.\n           \\<lbrakk>E \\<in> ctxt; t = E ta;\n            \\<And>T\\<^sub>0.\n               \\<Gamma> \\<turnstile> ta : T\\<^sub>0 \\<Longrightarrow>\n               \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n           \\<Longrightarrow> \\<Gamma> \\<turnstile> E t' : T;\n        \\<Gamma> \\<turnstile> fs [:] fTs;\n        \\<And>E\\<^sub>r t t'.\n           \\<lbrakk>E\\<^sub>r \\<in> rctxt; fs = E\\<^sub>r t;\n            \\<And>T\\<^sub>0.\n               \\<Gamma> \\<turnstile> t : T\\<^sub>0 \\<Longrightarrow>\n               \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n           \\<Longrightarrow> \\<Gamma> \\<turnstile> E\\<^sub>r t' [:] fTs;\n        fs\\<langle>l\\<rangle>\\<^sub>? = \\<bottom>; E\\<^sub>r \\<in> rctxt;\n        (l, t) \\<Colon> fs = E\\<^sub>r ta;\n        \\<And>T\\<^sub>0.\n           \\<Gamma> \\<turnstile> ta : T\\<^sub>0 \\<Longrightarrow>\n           \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> E\\<^sub>r\n          t' [:] (l, T) \\<Colon>\n                         fTs", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>\\<Gamma> t T fs fTs l E\\<^sub>r ta t'.\n       \\<lbrakk>\\<Gamma> \\<turnstile> t : T;\n        \\<And>E ta t'.\n           \\<lbrakk>E \\<in> ctxt; t = E ta;\n            \\<And>T\\<^sub>0.\n               \\<Gamma> \\<turnstile> ta : T\\<^sub>0 \\<Longrightarrow>\n               \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n           \\<Longrightarrow> \\<Gamma> \\<turnstile> E t' : T;\n        \\<Gamma> \\<turnstile> fs [:] fTs;\n        \\<And>E\\<^sub>r t t'.\n           \\<lbrakk>E\\<^sub>r \\<in> rctxt; fs = E\\<^sub>r t;\n            \\<And>T\\<^sub>0.\n               \\<Gamma> \\<turnstile> t : T\\<^sub>0 \\<Longrightarrow>\n               \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n           \\<Longrightarrow> \\<Gamma> \\<turnstile> E\\<^sub>r t' [:] fTs;\n        fs\\<langle>l\\<rangle>\\<^sub>? = \\<bottom>; E\\<^sub>r \\<in> rctxt;\n        (l, t) \\<Colon> fs = E\\<^sub>r ta;\n        \\<And>T\\<^sub>0.\n           \\<Gamma> \\<turnstile> ta : T\\<^sub>0 \\<Longrightarrow>\n           \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> E\\<^sub>r\n          t' [:] (l, T) \\<Colon>\n                         fTs", "case (T_Cons \\<Gamma> t T fs fTs l E ta t')"], ["proof (state)\nthis:\n  \\<Gamma> \\<turnstile> t : T\n  \\<lbrakk>?E \\<in> ctxt; t = ?E ?t;\n   \\<And>T\\<^sub>0.\n      \\<Gamma> \\<turnstile> ?t : T\\<^sub>0 \\<Longrightarrow>\n      \\<Gamma> \\<turnstile> ?t' : T\\<^sub>0\\<rbrakk>\n  \\<Longrightarrow> \\<Gamma> \\<turnstile> ?E ?t' : T\n  \\<Gamma> \\<turnstile> fs [:] fTs\n  \\<lbrakk>?E\\<^sub>r \\<in> rctxt; fs = ?E\\<^sub>r ?t;\n   \\<And>T\\<^sub>0.\n      \\<Gamma> \\<turnstile> ?t : T\\<^sub>0 \\<Longrightarrow>\n      \\<Gamma> \\<turnstile> ?t' : T\\<^sub>0\\<rbrakk>\n  \\<Longrightarrow> \\<Gamma> \\<turnstile> ?E\\<^sub>r ?t' [:] fTs\n  fs\\<langle>l\\<rangle>\\<^sub>? = \\<bottom>\n  E \\<in> rctxt\n  (l, t) \\<Colon> fs = E ta\n  \\<Gamma> \\<turnstile> ta : ?T\\<^sub>0 \\<Longrightarrow>\n  \\<Gamma> \\<turnstile> t' : ?T\\<^sub>0\n\ngoal (1 subgoal):\n 1. \\<And>\\<Gamma> t T fs fTs l E\\<^sub>r ta t'.\n       \\<lbrakk>\\<Gamma> \\<turnstile> t : T;\n        \\<And>E ta t'.\n           \\<lbrakk>E \\<in> ctxt; t = E ta;\n            \\<And>T\\<^sub>0.\n               \\<Gamma> \\<turnstile> ta : T\\<^sub>0 \\<Longrightarrow>\n               \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n           \\<Longrightarrow> \\<Gamma> \\<turnstile> E t' : T;\n        \\<Gamma> \\<turnstile> fs [:] fTs;\n        \\<And>E\\<^sub>r t t'.\n           \\<lbrakk>E\\<^sub>r \\<in> rctxt; fs = E\\<^sub>r t;\n            \\<And>T\\<^sub>0.\n               \\<Gamma> \\<turnstile> t : T\\<^sub>0 \\<Longrightarrow>\n               \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n           \\<Longrightarrow> \\<Gamma> \\<turnstile> E\\<^sub>r t' [:] fTs;\n        fs\\<langle>l\\<rangle>\\<^sub>? = \\<bottom>; E\\<^sub>r \\<in> rctxt;\n        (l, t) \\<Colon> fs = E\\<^sub>r ta;\n        \\<And>T\\<^sub>0.\n           \\<Gamma> \\<turnstile> ta : T\\<^sub>0 \\<Longrightarrow>\n           \\<Gamma> \\<turnstile> t' : T\\<^sub>0\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> E\\<^sub>r\n          t' [:] (l, T) \\<Colon>\n                         fTs", "from \\<open>E \\<in> rctxt\\<close>"], ["proof (chain)\npicking this:\n  E \\<in> rctxt", "show ?case"], ["proof (prove)\nusing this:\n  E \\<in> rctxt\n\ngoal (1 subgoal):\n 1. \\<Gamma> \\<turnstile> E t' [:] (l, T) \\<Colon> fTs", "using T_Cons"], ["proof (prove)\nusing this:\n  E \\<in> rctxt\n  \\<Gamma> \\<turnstile> t : T\n  \\<lbrakk>?E \\<in> ctxt; t = ?E ?t;\n   \\<And>T\\<^sub>0.\n      \\<Gamma> \\<turnstile> ?t : T\\<^sub>0 \\<Longrightarrow>\n      \\<Gamma> \\<turnstile> ?t' : T\\<^sub>0\\<rbrakk>\n  \\<Longrightarrow> \\<Gamma> \\<turnstile> ?E ?t' : T\n  \\<Gamma> \\<turnstile> fs [:] fTs\n  \\<lbrakk>?E\\<^sub>r \\<in> rctxt; fs = ?E\\<^sub>r ?t;\n   \\<And>T\\<^sub>0.\n      \\<Gamma> \\<turnstile> ?t : T\\<^sub>0 \\<Longrightarrow>\n      \\<Gamma> \\<turnstile> ?t' : T\\<^sub>0\\<rbrakk>\n  \\<Longrightarrow> \\<Gamma> \\<turnstile> ?E\\<^sub>r ?t' [:] fTs\n  fs\\<langle>l\\<rangle>\\<^sub>? = \\<bottom>\n  E \\<in> rctxt\n  (l, t) \\<Colon> fs = E ta\n  \\<Gamma> \\<turnstile> ta : ?T\\<^sub>0 \\<Longrightarrow>\n  \\<Gamma> \\<turnstile> t' : ?T\\<^sub>0\n\ngoal (1 subgoal):\n 1. \\<Gamma> \\<turnstile> E t' [:] (l, T) \\<Colon> fTs", "by cases (blast intro: typing_typings.intros rctxt_labels)+"], ["proof (state)\nthis:\n  \\<Gamma> \\<turnstile> E t' [:] (l, T) \\<Colon> fTs\n\ngoal:\nNo subgoals!", "qed"], ["", "text \\<open>\nThe fact that immediate reduction preserves the types of terms is\nproved in several parts. The proof of each statement is by induction\non the typing derivation.\n\\<close>"], ["", "theorem Abs_preservation: \\<comment> \\<open>A.19(1)\\<close>\n  assumes H: \"\\<Gamma> \\<turnstile> (\\<lambda>:T\\<^sub>1\\<^sub>1. t\\<^sub>1\\<^sub>2) \\<bullet> t\\<^sub>2 : T\"\n  shows \"\\<Gamma> \\<turnstile> t\\<^sub>1\\<^sub>2[0 \\<mapsto> t\\<^sub>2] : T\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<Gamma> \\<turnstile> t\\<^sub>1\\<^sub>2[0 \\<mapsto> t\\<^sub>2] : T", "using H"], ["proof (prove)\nusing this:\n  \\<Gamma> \\<turnstile> (\\<lambda>:T\\<^sub>1\\<^sub>1.\n                            t\\<^sub>1\\<^sub>2) \\<bullet>\n                        t\\<^sub>2 : T\n\ngoal (1 subgoal):\n 1. \\<Gamma> \\<turnstile> t\\<^sub>1\\<^sub>2[0 \\<mapsto> t\\<^sub>2] : T", "proof (induct \\<Gamma> \"(\\<lambda>:T\\<^sub>1\\<^sub>1. t\\<^sub>1\\<^sub>2) \\<bullet> t\\<^sub>2\" T arbitrary: T\\<^sub>1\\<^sub>1 t\\<^sub>1\\<^sub>2 t\\<^sub>2 rule: typing_induct)"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>\\<Gamma> T\\<^sub>1\\<^sub>1 T\\<^sub>1\\<^sub>2 t\\<^sub>2\n       T\\<^sub>1\\<^sub>1' t\\<^sub>1\\<^sub>2.\n       \\<lbrakk>\\<Gamma> \\<turnstile> (\\<lambda>:T\\<^sub>1\\<^sub>1'.\n    t\\<^sub>1\\<^sub>2) : T\\<^sub>1\\<^sub>1 \\<rightarrow> T\\<^sub>1\\<^sub>2;\n        \\<Gamma> \\<turnstile> t\\<^sub>2 : T\\<^sub>1\\<^sub>1;\n        \\<And>T\\<^sub>1\\<^sub>1' t\\<^sub>1\\<^sub>2 t\\<^sub>2'.\n           t\\<^sub>2 =\n           (\\<lambda>:T\\<^sub>1\\<^sub>1'. t\\<^sub>1\\<^sub>2) \\<bullet>\n           t\\<^sub>2' \\<Longrightarrow>\n           \\<Gamma> \\<turnstile> t\\<^sub>1\\<^sub>2[0 \\<mapsto> t\\<^sub>2'] : T\\<^sub>1\\<^sub>1\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> t\\<^sub>1\\<^sub>2[0 \\<mapsto> t\\<^sub>2] : T\\<^sub>1\\<^sub>2\n 2. \\<And>\\<Gamma> S T T\\<^sub>1\\<^sub>1 t\\<^sub>1\\<^sub>2 t\\<^sub>2.\n       \\<lbrakk>\\<Gamma> \\<turnstile> (\\<lambda>:T\\<^sub>1\\<^sub>1.\n    t\\<^sub>1\\<^sub>2) \\<bullet>\nt\\<^sub>2 : S;\n        \\<Gamma> \\<turnstile> t\\<^sub>1\\<^sub>2[0 \\<mapsto> t\\<^sub>2] : S;\n        \\<Gamma> \\<turnstile> S <: T\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> t\\<^sub>1\\<^sub>2[0 \\<mapsto> t\\<^sub>2] : T", "case (T_App \\<Gamma> T\\<^sub>1\\<^sub>1 T\\<^sub>1\\<^sub>2 t\\<^sub>2 T\\<^sub>1\\<^sub>1' t\\<^sub>1\\<^sub>2)"], ["proof (state)\nthis:\n  \\<Gamma> \\<turnstile> (\\<lambda>:T\\<^sub>1\\<^sub>1'.\n                            t\\<^sub>1\\<^sub>2) : T\\<^sub>1\\<^sub>1 \\<rightarrow>\n           T\\<^sub>1\\<^sub>2\n  \\<Gamma> \\<turnstile> t\\<^sub>2 : T\\<^sub>1\\<^sub>1\n  t\\<^sub>2 =\n  (\\<lambda>:?T\\<^sub>1\\<^sub>1. ?t\\<^sub>1\\<^sub>2) \\<bullet>\n  ?t\\<^sub>2 \\<Longrightarrow>\n  \\<Gamma> \\<turnstile> ?t\\<^sub>1\\<^sub>2[0 \\<mapsto> ?t\\<^sub>2] : T\\<^sub>1\\<^sub>1\n\ngoal (2 subgoals):\n 1. \\<And>\\<Gamma> T\\<^sub>1\\<^sub>1 T\\<^sub>1\\<^sub>2 t\\<^sub>2\n       T\\<^sub>1\\<^sub>1' t\\<^sub>1\\<^sub>2.\n       \\<lbrakk>\\<Gamma> \\<turnstile> (\\<lambda>:T\\<^sub>1\\<^sub>1'.\n    t\\<^sub>1\\<^sub>2) : T\\<^sub>1\\<^sub>1 \\<rightarrow> T\\<^sub>1\\<^sub>2;\n        \\<Gamma> \\<turnstile> t\\<^sub>2 : T\\<^sub>1\\<^sub>1;\n        \\<And>T\\<^sub>1\\<^sub>1' t\\<^sub>1\\<^sub>2 t\\<^sub>2'.\n           t\\<^sub>2 =\n           (\\<lambda>:T\\<^sub>1\\<^sub>1'. t\\<^sub>1\\<^sub>2) \\<bullet>\n           t\\<^sub>2' \\<Longrightarrow>\n           \\<Gamma> \\<turnstile> t\\<^sub>1\\<^sub>2[0 \\<mapsto> t\\<^sub>2'] : T\\<^sub>1\\<^sub>1\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> t\\<^sub>1\\<^sub>2[0 \\<mapsto> t\\<^sub>2] : T\\<^sub>1\\<^sub>2\n 2. \\<And>\\<Gamma> S T T\\<^sub>1\\<^sub>1 t\\<^sub>1\\<^sub>2 t\\<^sub>2.\n       \\<lbrakk>\\<Gamma> \\<turnstile> (\\<lambda>:T\\<^sub>1\\<^sub>1.\n    t\\<^sub>1\\<^sub>2) \\<bullet>\nt\\<^sub>2 : S;\n        \\<Gamma> \\<turnstile> t\\<^sub>1\\<^sub>2[0 \\<mapsto> t\\<^sub>2] : S;\n        \\<Gamma> \\<turnstile> S <: T\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> t\\<^sub>1\\<^sub>2[0 \\<mapsto> t\\<^sub>2] : T", "from \\<open>\\<Gamma> \\<turnstile> (\\<lambda>:T\\<^sub>1\\<^sub>1'. t\\<^sub>1\\<^sub>2) : T\\<^sub>1\\<^sub>1 \\<rightarrow> T\\<^sub>1\\<^sub>2\\<close>"], ["proof (chain)\npicking this:\n  \\<Gamma> \\<turnstile> (\\<lambda>:T\\<^sub>1\\<^sub>1'.\n                            t\\<^sub>1\\<^sub>2) : T\\<^sub>1\\<^sub>1 \\<rightarrow>\n           T\\<^sub>1\\<^sub>2", "obtain S'\n    where T\\<^sub>1\\<^sub>1: \"\\<Gamma> \\<turnstile> T\\<^sub>1\\<^sub>1 <: T\\<^sub>1\\<^sub>1'\"\n    and t\\<^sub>1\\<^sub>2: \"VarB T\\<^sub>1\\<^sub>1' \\<Colon> \\<Gamma> \\<turnstile> t\\<^sub>1\\<^sub>2 : S'\"\n    and S': \"\\<Gamma> \\<turnstile> S'[0 \\<mapsto>\\<^sub>\\<tau> Top]\\<^sub>\\<tau> <: T\\<^sub>1\\<^sub>2\""], ["proof (prove)\nusing this:\n  \\<Gamma> \\<turnstile> (\\<lambda>:T\\<^sub>1\\<^sub>1'.\n                            t\\<^sub>1\\<^sub>2) : T\\<^sub>1\\<^sub>1 \\<rightarrow>\n           T\\<^sub>1\\<^sub>2\n\ngoal (1 subgoal):\n 1. (\\<And>S'.\n        \\<lbrakk>\\<Gamma> \\<turnstile> T\\<^sub>1\\<^sub>1 <: T\\<^sub>1\\<^sub>1';\n         VarB T\\<^sub>1\\<^sub>1' \\<Colon>\n         \\<Gamma> \\<turnstile> t\\<^sub>1\\<^sub>2 : S';\n         \\<Gamma> \\<turnstile> S'[0 \\<mapsto>\\<^sub>\\<tau> Top]\\<^sub>\\<tau> <: T\\<^sub>1\\<^sub>2\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by (rule Abs_type' [simplified]) blast"], ["proof (state)\nthis:\n  \\<Gamma> \\<turnstile> T\\<^sub>1\\<^sub>1 <: T\\<^sub>1\\<^sub>1'\n  VarB T\\<^sub>1\\<^sub>1' \\<Colon>\n  \\<Gamma> \\<turnstile> t\\<^sub>1\\<^sub>2 : S'\n  \\<Gamma> \\<turnstile> S'[0 \\<mapsto>\\<^sub>\\<tau> Top]\\<^sub>\\<tau> <: T\\<^sub>1\\<^sub>2\n\ngoal (2 subgoals):\n 1. \\<And>\\<Gamma> T\\<^sub>1\\<^sub>1 T\\<^sub>1\\<^sub>2 t\\<^sub>2\n       T\\<^sub>1\\<^sub>1' t\\<^sub>1\\<^sub>2.\n       \\<lbrakk>\\<Gamma> \\<turnstile> (\\<lambda>:T\\<^sub>1\\<^sub>1'.\n    t\\<^sub>1\\<^sub>2) : T\\<^sub>1\\<^sub>1 \\<rightarrow> T\\<^sub>1\\<^sub>2;\n        \\<Gamma> \\<turnstile> t\\<^sub>2 : T\\<^sub>1\\<^sub>1;\n        \\<And>T\\<^sub>1\\<^sub>1' t\\<^sub>1\\<^sub>2 t\\<^sub>2'.\n           t\\<^sub>2 =\n           (\\<lambda>:T\\<^sub>1\\<^sub>1'. t\\<^sub>1\\<^sub>2) \\<bullet>\n           t\\<^sub>2' \\<Longrightarrow>\n           \\<Gamma> \\<turnstile> t\\<^sub>1\\<^sub>2[0 \\<mapsto> t\\<^sub>2'] : T\\<^sub>1\\<^sub>1\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> t\\<^sub>1\\<^sub>2[0 \\<mapsto> t\\<^sub>2] : T\\<^sub>1\\<^sub>2\n 2. \\<And>\\<Gamma> S T T\\<^sub>1\\<^sub>1 t\\<^sub>1\\<^sub>2 t\\<^sub>2.\n       \\<lbrakk>\\<Gamma> \\<turnstile> (\\<lambda>:T\\<^sub>1\\<^sub>1.\n    t\\<^sub>1\\<^sub>2) \\<bullet>\nt\\<^sub>2 : S;\n        \\<Gamma> \\<turnstile> t\\<^sub>1\\<^sub>2[0 \\<mapsto> t\\<^sub>2] : S;\n        \\<Gamma> \\<turnstile> S <: T\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> t\\<^sub>1\\<^sub>2[0 \\<mapsto> t\\<^sub>2] : T", "from \\<open>\\<Gamma> \\<turnstile> t\\<^sub>2 : T\\<^sub>1\\<^sub>1\\<close>"], ["proof (chain)\npicking this:\n  \\<Gamma> \\<turnstile> t\\<^sub>2 : T\\<^sub>1\\<^sub>1", "have \"\\<Gamma> \\<turnstile> t\\<^sub>2 : T\\<^sub>1\\<^sub>1'\""], ["proof (prove)\nusing this:\n  \\<Gamma> \\<turnstile> t\\<^sub>2 : T\\<^sub>1\\<^sub>1\n\ngoal (1 subgoal):\n 1. \\<Gamma> \\<turnstile> t\\<^sub>2 : T\\<^sub>1\\<^sub>1'", "using T\\<^sub>1\\<^sub>1"], ["proof (prove)\nusing this:\n  \\<Gamma> \\<turnstile> t\\<^sub>2 : T\\<^sub>1\\<^sub>1\n  \\<Gamma> \\<turnstile> T\\<^sub>1\\<^sub>1 <: T\\<^sub>1\\<^sub>1'\n\ngoal (1 subgoal):\n 1. \\<Gamma> \\<turnstile> t\\<^sub>2 : T\\<^sub>1\\<^sub>1'", "by (rule T_Sub)"], ["proof (state)\nthis:\n  \\<Gamma> \\<turnstile> t\\<^sub>2 : T\\<^sub>1\\<^sub>1'\n\ngoal (2 subgoals):\n 1. \\<And>\\<Gamma> T\\<^sub>1\\<^sub>1 T\\<^sub>1\\<^sub>2 t\\<^sub>2\n       T\\<^sub>1\\<^sub>1' t\\<^sub>1\\<^sub>2.\n       \\<lbrakk>\\<Gamma> \\<turnstile> (\\<lambda>:T\\<^sub>1\\<^sub>1'.\n    t\\<^sub>1\\<^sub>2) : T\\<^sub>1\\<^sub>1 \\<rightarrow> T\\<^sub>1\\<^sub>2;\n        \\<Gamma> \\<turnstile> t\\<^sub>2 : T\\<^sub>1\\<^sub>1;\n        \\<And>T\\<^sub>1\\<^sub>1' t\\<^sub>1\\<^sub>2 t\\<^sub>2'.\n           t\\<^sub>2 =\n           (\\<lambda>:T\\<^sub>1\\<^sub>1'. t\\<^sub>1\\<^sub>2) \\<bullet>\n           t\\<^sub>2' \\<Longrightarrow>\n           \\<Gamma> \\<turnstile> t\\<^sub>1\\<^sub>2[0 \\<mapsto> t\\<^sub>2'] : T\\<^sub>1\\<^sub>1\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> t\\<^sub>1\\<^sub>2[0 \\<mapsto> t\\<^sub>2] : T\\<^sub>1\\<^sub>2\n 2. \\<And>\\<Gamma> S T T\\<^sub>1\\<^sub>1 t\\<^sub>1\\<^sub>2 t\\<^sub>2.\n       \\<lbrakk>\\<Gamma> \\<turnstile> (\\<lambda>:T\\<^sub>1\\<^sub>1.\n    t\\<^sub>1\\<^sub>2) \\<bullet>\nt\\<^sub>2 : S;\n        \\<Gamma> \\<turnstile> t\\<^sub>1\\<^sub>2[0 \\<mapsto> t\\<^sub>2] : S;\n        \\<Gamma> \\<turnstile> S <: T\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> t\\<^sub>1\\<^sub>2[0 \\<mapsto> t\\<^sub>2] : T", "with t\\<^sub>1\\<^sub>2"], ["proof (chain)\npicking this:\n  VarB T\\<^sub>1\\<^sub>1' \\<Colon>\n  \\<Gamma> \\<turnstile> t\\<^sub>1\\<^sub>2 : S'\n  \\<Gamma> \\<turnstile> t\\<^sub>2 : T\\<^sub>1\\<^sub>1'", "have \"\\<Gamma> \\<turnstile> t\\<^sub>1\\<^sub>2[0 \\<mapsto> t\\<^sub>2] : S'[0 \\<mapsto>\\<^sub>\\<tau> Top]\\<^sub>\\<tau>\""], ["proof (prove)\nusing this:\n  VarB T\\<^sub>1\\<^sub>1' \\<Colon>\n  \\<Gamma> \\<turnstile> t\\<^sub>1\\<^sub>2 : S'\n  \\<Gamma> \\<turnstile> t\\<^sub>2 : T\\<^sub>1\\<^sub>1'\n\ngoal (1 subgoal):\n 1. \\<Gamma> \\<turnstile> t\\<^sub>1\\<^sub>2[0 \\<mapsto> t\\<^sub>2] : S'[0 \\<mapsto>\\<^sub>\\<tau> Top]\\<^sub>\\<tau>", "by (rule subst_type [where \\<Delta>=\"[]\", simplified])"], ["proof (state)\nthis:\n  \\<Gamma> \\<turnstile> t\\<^sub>1\\<^sub>2[0 \\<mapsto> t\\<^sub>2] : S'[0 \\<mapsto>\\<^sub>\\<tau> Top]\\<^sub>\\<tau>\n\ngoal (2 subgoals):\n 1. \\<And>\\<Gamma> T\\<^sub>1\\<^sub>1 T\\<^sub>1\\<^sub>2 t\\<^sub>2\n       T\\<^sub>1\\<^sub>1' t\\<^sub>1\\<^sub>2.\n       \\<lbrakk>\\<Gamma> \\<turnstile> (\\<lambda>:T\\<^sub>1\\<^sub>1'.\n    t\\<^sub>1\\<^sub>2) : T\\<^sub>1\\<^sub>1 \\<rightarrow> T\\<^sub>1\\<^sub>2;\n        \\<Gamma> \\<turnstile> t\\<^sub>2 : T\\<^sub>1\\<^sub>1;\n        \\<And>T\\<^sub>1\\<^sub>1' t\\<^sub>1\\<^sub>2 t\\<^sub>2'.\n           t\\<^sub>2 =\n           (\\<lambda>:T\\<^sub>1\\<^sub>1'. t\\<^sub>1\\<^sub>2) \\<bullet>\n           t\\<^sub>2' \\<Longrightarrow>\n           \\<Gamma> \\<turnstile> t\\<^sub>1\\<^sub>2[0 \\<mapsto> t\\<^sub>2'] : T\\<^sub>1\\<^sub>1\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> t\\<^sub>1\\<^sub>2[0 \\<mapsto> t\\<^sub>2] : T\\<^sub>1\\<^sub>2\n 2. \\<And>\\<Gamma> S T T\\<^sub>1\\<^sub>1 t\\<^sub>1\\<^sub>2 t\\<^sub>2.\n       \\<lbrakk>\\<Gamma> \\<turnstile> (\\<lambda>:T\\<^sub>1\\<^sub>1.\n    t\\<^sub>1\\<^sub>2) \\<bullet>\nt\\<^sub>2 : S;\n        \\<Gamma> \\<turnstile> t\\<^sub>1\\<^sub>2[0 \\<mapsto> t\\<^sub>2] : S;\n        \\<Gamma> \\<turnstile> S <: T\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> t\\<^sub>1\\<^sub>2[0 \\<mapsto> t\\<^sub>2] : T", "then"], ["proof (chain)\npicking this:\n  \\<Gamma> \\<turnstile> t\\<^sub>1\\<^sub>2[0 \\<mapsto> t\\<^sub>2] : S'[0 \\<mapsto>\\<^sub>\\<tau> Top]\\<^sub>\\<tau>", "show ?case"], ["proof (prove)\nusing this:\n  \\<Gamma> \\<turnstile> t\\<^sub>1\\<^sub>2[0 \\<mapsto> t\\<^sub>2] : S'[0 \\<mapsto>\\<^sub>\\<tau> Top]\\<^sub>\\<tau>\n\ngoal (1 subgoal):\n 1. \\<Gamma> \\<turnstile> t\\<^sub>1\\<^sub>2[0 \\<mapsto> t\\<^sub>2] : T\\<^sub>1\\<^sub>2", "using S'"], ["proof (prove)\nusing this:\n  \\<Gamma> \\<turnstile> t\\<^sub>1\\<^sub>2[0 \\<mapsto> t\\<^sub>2] : S'[0 \\<mapsto>\\<^sub>\\<tau> Top]\\<^sub>\\<tau>\n  \\<Gamma> \\<turnstile> S'[0 \\<mapsto>\\<^sub>\\<tau> Top]\\<^sub>\\<tau> <: T\\<^sub>1\\<^sub>2\n\ngoal (1 subgoal):\n 1. \\<Gamma> \\<turnstile> t\\<^sub>1\\<^sub>2[0 \\<mapsto> t\\<^sub>2] : T\\<^sub>1\\<^sub>2", "by (rule T_Sub)"], ["proof (state)\nthis:\n  \\<Gamma> \\<turnstile> t\\<^sub>1\\<^sub>2[0 \\<mapsto> t\\<^sub>2] : T\\<^sub>1\\<^sub>2\n\ngoal (1 subgoal):\n 1. \\<And>\\<Gamma> S T T\\<^sub>1\\<^sub>1 t\\<^sub>1\\<^sub>2 t\\<^sub>2.\n       \\<lbrakk>\\<Gamma> \\<turnstile> (\\<lambda>:T\\<^sub>1\\<^sub>1.\n    t\\<^sub>1\\<^sub>2) \\<bullet>\nt\\<^sub>2 : S;\n        \\<Gamma> \\<turnstile> t\\<^sub>1\\<^sub>2[0 \\<mapsto> t\\<^sub>2] : S;\n        \\<Gamma> \\<turnstile> S <: T\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> t\\<^sub>1\\<^sub>2[0 \\<mapsto> t\\<^sub>2] : T", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>\\<Gamma> S T T\\<^sub>1\\<^sub>1 t\\<^sub>1\\<^sub>2 t\\<^sub>2.\n       \\<lbrakk>\\<Gamma> \\<turnstile> (\\<lambda>:T\\<^sub>1\\<^sub>1.\n    t\\<^sub>1\\<^sub>2) \\<bullet>\nt\\<^sub>2 : S;\n        \\<Gamma> \\<turnstile> t\\<^sub>1\\<^sub>2[0 \\<mapsto> t\\<^sub>2] : S;\n        \\<Gamma> \\<turnstile> S <: T\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> t\\<^sub>1\\<^sub>2[0 \\<mapsto> t\\<^sub>2] : T", "case T_Sub"], ["proof (state)\nthis:\n  \\<Gamma>_ \\<turnstile> (\\<lambda>:T\\<^sub>1\\<^sub>1.\n                             t\\<^sub>1\\<^sub>2) \\<bullet>\n                         t\\<^sub>2 : S_\n  \\<Gamma>_ \\<turnstile> t\\<^sub>1\\<^sub>2[0 \\<mapsto> t\\<^sub>2] : S_\n  \\<Gamma>_ \\<turnstile> S_ <: T_\n\ngoal (1 subgoal):\n 1. \\<And>\\<Gamma> S T T\\<^sub>1\\<^sub>1 t\\<^sub>1\\<^sub>2 t\\<^sub>2.\n       \\<lbrakk>\\<Gamma> \\<turnstile> (\\<lambda>:T\\<^sub>1\\<^sub>1.\n    t\\<^sub>1\\<^sub>2) \\<bullet>\nt\\<^sub>2 : S;\n        \\<Gamma> \\<turnstile> t\\<^sub>1\\<^sub>2[0 \\<mapsto> t\\<^sub>2] : S;\n        \\<Gamma> \\<turnstile> S <: T\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> t\\<^sub>1\\<^sub>2[0 \\<mapsto> t\\<^sub>2] : T", "thus ?case"], ["proof (prove)\nusing this:\n  \\<Gamma>_ \\<turnstile> (\\<lambda>:T\\<^sub>1\\<^sub>1.\n                             t\\<^sub>1\\<^sub>2) \\<bullet>\n                         t\\<^sub>2 : S_\n  \\<Gamma>_ \\<turnstile> t\\<^sub>1\\<^sub>2[0 \\<mapsto> t\\<^sub>2] : S_\n  \\<Gamma>_ \\<turnstile> S_ <: T_\n\ngoal (1 subgoal):\n 1. \\<Gamma>_ \\<turnstile> t\\<^sub>1\\<^sub>2[0 \\<mapsto> t\\<^sub>2] : T_", "by (blast intro: typing_typings.intros)"], ["proof (state)\nthis:\n  \\<Gamma>_ \\<turnstile> t\\<^sub>1\\<^sub>2[0 \\<mapsto> t\\<^sub>2] : T_\n\ngoal:\nNo subgoals!", "qed"], ["", "theorem TAbs_preservation: \\<comment> \\<open>A.19(2)\\<close>\n  assumes H: \"\\<Gamma> \\<turnstile> (\\<lambda><:T\\<^sub>1\\<^sub>1. t\\<^sub>1\\<^sub>2) \\<bullet>\\<^sub>\\<tau> T\\<^sub>2 : T\"\n  shows \"\\<Gamma> \\<turnstile> t\\<^sub>1\\<^sub>2[0 \\<mapsto>\\<^sub>\\<tau> T\\<^sub>2] : T\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<Gamma> \\<turnstile> t\\<^sub>1\\<^sub>2[0 \\<mapsto>\\<^sub>\\<tau> T\\<^sub>2] : T", "using H"], ["proof (prove)\nusing this:\n  \\<Gamma> \\<turnstile> (\\<lambda><:T\\<^sub>1\\<^sub>1.\n                            t\\<^sub>1\\<^sub>2) \\<bullet>\\<^sub>\\<tau>\n                        T\\<^sub>2 : T\n\ngoal (1 subgoal):\n 1. \\<Gamma> \\<turnstile> t\\<^sub>1\\<^sub>2[0 \\<mapsto>\\<^sub>\\<tau> T\\<^sub>2] : T", "proof (induct \\<Gamma> \"(\\<lambda><:T\\<^sub>1\\<^sub>1. t\\<^sub>1\\<^sub>2) \\<bullet>\\<^sub>\\<tau> T\\<^sub>2\" T arbitrary: T\\<^sub>1\\<^sub>1 t\\<^sub>1\\<^sub>2 T\\<^sub>2 rule: typing_induct)"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>\\<Gamma> T\\<^sub>1\\<^sub>1 T\\<^sub>1\\<^sub>2 T\\<^sub>2\n       T\\<^sub>1\\<^sub>1' t\\<^sub>1\\<^sub>2.\n       \\<lbrakk>\\<Gamma> \\<turnstile> (\\<lambda><:T\\<^sub>1\\<^sub>1'.\n    t\\<^sub>1\\<^sub>2) : (\\<forall><:T\\<^sub>1\\<^sub>1. T\\<^sub>1\\<^sub>2);\n        \\<Gamma> \\<turnstile> T\\<^sub>2 <: T\\<^sub>1\\<^sub>1\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> t\\<^sub>1\\<^sub>2[0 \\<mapsto>\\<^sub>\\<tau> T\\<^sub>2] : T\\<^sub>1\\<^sub>2[0 \\<mapsto>\\<^sub>\\<tau> T\\<^sub>2]\\<^sub>\\<tau>\n 2. \\<And>\\<Gamma> S T T\\<^sub>1\\<^sub>1 t\\<^sub>1\\<^sub>2 T\\<^sub>2.\n       \\<lbrakk>\\<Gamma> \\<turnstile> (\\<lambda><:T\\<^sub>1\\<^sub>1.\n    t\\<^sub>1\\<^sub>2) \\<bullet>\\<^sub>\\<tau>\nT\\<^sub>2 : S;\n        \\<Gamma> \\<turnstile> t\\<^sub>1\\<^sub>2[0 \\<mapsto>\\<^sub>\\<tau> T\\<^sub>2] : S;\n        \\<Gamma> \\<turnstile> S <: T\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> t\\<^sub>1\\<^sub>2[0 \\<mapsto>\\<^sub>\\<tau> T\\<^sub>2] : T", "case (T_TApp \\<Gamma> T\\<^sub>1\\<^sub>1 T\\<^sub>1\\<^sub>2 T\\<^sub>2 T\\<^sub>1\\<^sub>1' t\\<^sub>1\\<^sub>2)"], ["proof (state)\nthis:\n  \\<Gamma> \\<turnstile> (\\<lambda><:T\\<^sub>1\\<^sub>1'.\n                            t\\<^sub>1\\<^sub>2) : (\\<forall><:T\\<^sub>1\\<^sub>1.\n               T\\<^sub>1\\<^sub>2)\n  \\<Gamma> \\<turnstile> T\\<^sub>2 <: T\\<^sub>1\\<^sub>1\n\ngoal (2 subgoals):\n 1. \\<And>\\<Gamma> T\\<^sub>1\\<^sub>1 T\\<^sub>1\\<^sub>2 T\\<^sub>2\n       T\\<^sub>1\\<^sub>1' t\\<^sub>1\\<^sub>2.\n       \\<lbrakk>\\<Gamma> \\<turnstile> (\\<lambda><:T\\<^sub>1\\<^sub>1'.\n    t\\<^sub>1\\<^sub>2) : (\\<forall><:T\\<^sub>1\\<^sub>1. T\\<^sub>1\\<^sub>2);\n        \\<Gamma> \\<turnstile> T\\<^sub>2 <: T\\<^sub>1\\<^sub>1\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> t\\<^sub>1\\<^sub>2[0 \\<mapsto>\\<^sub>\\<tau> T\\<^sub>2] : T\\<^sub>1\\<^sub>2[0 \\<mapsto>\\<^sub>\\<tau> T\\<^sub>2]\\<^sub>\\<tau>\n 2. \\<And>\\<Gamma> S T T\\<^sub>1\\<^sub>1 t\\<^sub>1\\<^sub>2 T\\<^sub>2.\n       \\<lbrakk>\\<Gamma> \\<turnstile> (\\<lambda><:T\\<^sub>1\\<^sub>1.\n    t\\<^sub>1\\<^sub>2) \\<bullet>\\<^sub>\\<tau>\nT\\<^sub>2 : S;\n        \\<Gamma> \\<turnstile> t\\<^sub>1\\<^sub>2[0 \\<mapsto>\\<^sub>\\<tau> T\\<^sub>2] : S;\n        \\<Gamma> \\<turnstile> S <: T\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> t\\<^sub>1\\<^sub>2[0 \\<mapsto>\\<^sub>\\<tau> T\\<^sub>2] : T", "from \\<open>\\<Gamma> \\<turnstile> (\\<lambda><:T\\<^sub>1\\<^sub>1'. t\\<^sub>1\\<^sub>2) : (\\<forall><:T\\<^sub>1\\<^sub>1. T\\<^sub>1\\<^sub>2)\\<close>"], ["proof (chain)\npicking this:\n  \\<Gamma> \\<turnstile> (\\<lambda><:T\\<^sub>1\\<^sub>1'.\n                            t\\<^sub>1\\<^sub>2) : (\\<forall><:T\\<^sub>1\\<^sub>1.\n               T\\<^sub>1\\<^sub>2)", "obtain S'\n    where \"TVarB T\\<^sub>1\\<^sub>1 \\<Colon> \\<Gamma> \\<turnstile> t\\<^sub>1\\<^sub>2 : S'\"\n    and \"TVarB T\\<^sub>1\\<^sub>1 \\<Colon> \\<Gamma> \\<turnstile> S' <: T\\<^sub>1\\<^sub>2\""], ["proof (prove)\nusing this:\n  \\<Gamma> \\<turnstile> (\\<lambda><:T\\<^sub>1\\<^sub>1'.\n                            t\\<^sub>1\\<^sub>2) : (\\<forall><:T\\<^sub>1\\<^sub>1.\n               T\\<^sub>1\\<^sub>2)\n\ngoal (1 subgoal):\n 1. (\\<And>S'.\n        \\<lbrakk>TVarB T\\<^sub>1\\<^sub>1 \\<Colon>\n                 \\<Gamma> \\<turnstile> t\\<^sub>1\\<^sub>2 : S';\n         TVarB T\\<^sub>1\\<^sub>1 \\<Colon>\n         \\<Gamma> \\<turnstile> S' <: T\\<^sub>1\\<^sub>2\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by (rule TAbs_type') blast"], ["proof (state)\nthis:\n  TVarB T\\<^sub>1\\<^sub>1 \\<Colon>\n  \\<Gamma> \\<turnstile> t\\<^sub>1\\<^sub>2 : S'\n  TVarB T\\<^sub>1\\<^sub>1 \\<Colon>\n  \\<Gamma> \\<turnstile> S' <: T\\<^sub>1\\<^sub>2\n\ngoal (2 subgoals):\n 1. \\<And>\\<Gamma> T\\<^sub>1\\<^sub>1 T\\<^sub>1\\<^sub>2 T\\<^sub>2\n       T\\<^sub>1\\<^sub>1' t\\<^sub>1\\<^sub>2.\n       \\<lbrakk>\\<Gamma> \\<turnstile> (\\<lambda><:T\\<^sub>1\\<^sub>1'.\n    t\\<^sub>1\\<^sub>2) : (\\<forall><:T\\<^sub>1\\<^sub>1. T\\<^sub>1\\<^sub>2);\n        \\<Gamma> \\<turnstile> T\\<^sub>2 <: T\\<^sub>1\\<^sub>1\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> t\\<^sub>1\\<^sub>2[0 \\<mapsto>\\<^sub>\\<tau> T\\<^sub>2] : T\\<^sub>1\\<^sub>2[0 \\<mapsto>\\<^sub>\\<tau> T\\<^sub>2]\\<^sub>\\<tau>\n 2. \\<And>\\<Gamma> S T T\\<^sub>1\\<^sub>1 t\\<^sub>1\\<^sub>2 T\\<^sub>2.\n       \\<lbrakk>\\<Gamma> \\<turnstile> (\\<lambda><:T\\<^sub>1\\<^sub>1.\n    t\\<^sub>1\\<^sub>2) \\<bullet>\\<^sub>\\<tau>\nT\\<^sub>2 : S;\n        \\<Gamma> \\<turnstile> t\\<^sub>1\\<^sub>2[0 \\<mapsto>\\<^sub>\\<tau> T\\<^sub>2] : S;\n        \\<Gamma> \\<turnstile> S <: T\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> t\\<^sub>1\\<^sub>2[0 \\<mapsto>\\<^sub>\\<tau> T\\<^sub>2] : T", "hence \"TVarB T\\<^sub>1\\<^sub>1 \\<Colon> \\<Gamma> \\<turnstile> t\\<^sub>1\\<^sub>2 : T\\<^sub>1\\<^sub>2\""], ["proof (prove)\nusing this:\n  TVarB T\\<^sub>1\\<^sub>1 \\<Colon>\n  \\<Gamma> \\<turnstile> t\\<^sub>1\\<^sub>2 : S'\n  TVarB T\\<^sub>1\\<^sub>1 \\<Colon>\n  \\<Gamma> \\<turnstile> S' <: T\\<^sub>1\\<^sub>2\n\ngoal (1 subgoal):\n 1. TVarB T\\<^sub>1\\<^sub>1 \\<Colon>\n    \\<Gamma> \\<turnstile> t\\<^sub>1\\<^sub>2 : T\\<^sub>1\\<^sub>2", "by (rule T_Sub)"], ["proof (state)\nthis:\n  TVarB T\\<^sub>1\\<^sub>1 \\<Colon>\n  \\<Gamma> \\<turnstile> t\\<^sub>1\\<^sub>2 : T\\<^sub>1\\<^sub>2\n\ngoal (2 subgoals):\n 1. \\<And>\\<Gamma> T\\<^sub>1\\<^sub>1 T\\<^sub>1\\<^sub>2 T\\<^sub>2\n       T\\<^sub>1\\<^sub>1' t\\<^sub>1\\<^sub>2.\n       \\<lbrakk>\\<Gamma> \\<turnstile> (\\<lambda><:T\\<^sub>1\\<^sub>1'.\n    t\\<^sub>1\\<^sub>2) : (\\<forall><:T\\<^sub>1\\<^sub>1. T\\<^sub>1\\<^sub>2);\n        \\<Gamma> \\<turnstile> T\\<^sub>2 <: T\\<^sub>1\\<^sub>1\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> t\\<^sub>1\\<^sub>2[0 \\<mapsto>\\<^sub>\\<tau> T\\<^sub>2] : T\\<^sub>1\\<^sub>2[0 \\<mapsto>\\<^sub>\\<tau> T\\<^sub>2]\\<^sub>\\<tau>\n 2. \\<And>\\<Gamma> S T T\\<^sub>1\\<^sub>1 t\\<^sub>1\\<^sub>2 T\\<^sub>2.\n       \\<lbrakk>\\<Gamma> \\<turnstile> (\\<lambda><:T\\<^sub>1\\<^sub>1.\n    t\\<^sub>1\\<^sub>2) \\<bullet>\\<^sub>\\<tau>\nT\\<^sub>2 : S;\n        \\<Gamma> \\<turnstile> t\\<^sub>1\\<^sub>2[0 \\<mapsto>\\<^sub>\\<tau> T\\<^sub>2] : S;\n        \\<Gamma> \\<turnstile> S <: T\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> t\\<^sub>1\\<^sub>2[0 \\<mapsto>\\<^sub>\\<tau> T\\<^sub>2] : T", "then"], ["proof (chain)\npicking this:\n  TVarB T\\<^sub>1\\<^sub>1 \\<Colon>\n  \\<Gamma> \\<turnstile> t\\<^sub>1\\<^sub>2 : T\\<^sub>1\\<^sub>2", "show ?case"], ["proof (prove)\nusing this:\n  TVarB T\\<^sub>1\\<^sub>1 \\<Colon>\n  \\<Gamma> \\<turnstile> t\\<^sub>1\\<^sub>2 : T\\<^sub>1\\<^sub>2\n\ngoal (1 subgoal):\n 1. \\<Gamma> \\<turnstile> t\\<^sub>1\\<^sub>2[0 \\<mapsto>\\<^sub>\\<tau> T\\<^sub>2] : T\\<^sub>1\\<^sub>2[0 \\<mapsto>\\<^sub>\\<tau> T\\<^sub>2]\\<^sub>\\<tau>", "using \\<open>\\<Gamma> \\<turnstile> T\\<^sub>2 <: T\\<^sub>1\\<^sub>1\\<close>"], ["proof (prove)\nusing this:\n  TVarB T\\<^sub>1\\<^sub>1 \\<Colon>\n  \\<Gamma> \\<turnstile> t\\<^sub>1\\<^sub>2 : T\\<^sub>1\\<^sub>2\n  \\<Gamma> \\<turnstile> T\\<^sub>2 <: T\\<^sub>1\\<^sub>1\n\ngoal (1 subgoal):\n 1. \\<Gamma> \\<turnstile> t\\<^sub>1\\<^sub>2[0 \\<mapsto>\\<^sub>\\<tau> T\\<^sub>2] : T\\<^sub>1\\<^sub>2[0 \\<mapsto>\\<^sub>\\<tau> T\\<^sub>2]\\<^sub>\\<tau>", "by (rule substT_type [where \\<Delta>=\"[]\", simplified])"], ["proof (state)\nthis:\n  \\<Gamma> \\<turnstile> t\\<^sub>1\\<^sub>2[0 \\<mapsto>\\<^sub>\\<tau> T\\<^sub>2] : T\\<^sub>1\\<^sub>2[0 \\<mapsto>\\<^sub>\\<tau> T\\<^sub>2]\\<^sub>\\<tau>\n\ngoal (1 subgoal):\n 1. \\<And>\\<Gamma> S T T\\<^sub>1\\<^sub>1 t\\<^sub>1\\<^sub>2 T\\<^sub>2.\n       \\<lbrakk>\\<Gamma> \\<turnstile> (\\<lambda><:T\\<^sub>1\\<^sub>1.\n    t\\<^sub>1\\<^sub>2) \\<bullet>\\<^sub>\\<tau>\nT\\<^sub>2 : S;\n        \\<Gamma> \\<turnstile> t\\<^sub>1\\<^sub>2[0 \\<mapsto>\\<^sub>\\<tau> T\\<^sub>2] : S;\n        \\<Gamma> \\<turnstile> S <: T\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> t\\<^sub>1\\<^sub>2[0 \\<mapsto>\\<^sub>\\<tau> T\\<^sub>2] : T", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>\\<Gamma> S T T\\<^sub>1\\<^sub>1 t\\<^sub>1\\<^sub>2 T\\<^sub>2.\n       \\<lbrakk>\\<Gamma> \\<turnstile> (\\<lambda><:T\\<^sub>1\\<^sub>1.\n    t\\<^sub>1\\<^sub>2) \\<bullet>\\<^sub>\\<tau>\nT\\<^sub>2 : S;\n        \\<Gamma> \\<turnstile> t\\<^sub>1\\<^sub>2[0 \\<mapsto>\\<^sub>\\<tau> T\\<^sub>2] : S;\n        \\<Gamma> \\<turnstile> S <: T\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> t\\<^sub>1\\<^sub>2[0 \\<mapsto>\\<^sub>\\<tau> T\\<^sub>2] : T", "case T_Sub"], ["proof (state)\nthis:\n  \\<Gamma>_ \\<turnstile> (\\<lambda><:T\\<^sub>1\\<^sub>1.\n                             t\\<^sub>1\\<^sub>2) \\<bullet>\\<^sub>\\<tau>\n                         T\\<^sub>2 : S_\n  \\<Gamma>_ \\<turnstile> t\\<^sub>1\\<^sub>2[0 \\<mapsto>\\<^sub>\\<tau> T\\<^sub>2] : S_\n  \\<Gamma>_ \\<turnstile> S_ <: T_\n\ngoal (1 subgoal):\n 1. \\<And>\\<Gamma> S T T\\<^sub>1\\<^sub>1 t\\<^sub>1\\<^sub>2 T\\<^sub>2.\n       \\<lbrakk>\\<Gamma> \\<turnstile> (\\<lambda><:T\\<^sub>1\\<^sub>1.\n    t\\<^sub>1\\<^sub>2) \\<bullet>\\<^sub>\\<tau>\nT\\<^sub>2 : S;\n        \\<Gamma> \\<turnstile> t\\<^sub>1\\<^sub>2[0 \\<mapsto>\\<^sub>\\<tau> T\\<^sub>2] : S;\n        \\<Gamma> \\<turnstile> S <: T\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> t\\<^sub>1\\<^sub>2[0 \\<mapsto>\\<^sub>\\<tau> T\\<^sub>2] : T", "thus ?case"], ["proof (prove)\nusing this:\n  \\<Gamma>_ \\<turnstile> (\\<lambda><:T\\<^sub>1\\<^sub>1.\n                             t\\<^sub>1\\<^sub>2) \\<bullet>\\<^sub>\\<tau>\n                         T\\<^sub>2 : S_\n  \\<Gamma>_ \\<turnstile> t\\<^sub>1\\<^sub>2[0 \\<mapsto>\\<^sub>\\<tau> T\\<^sub>2] : S_\n  \\<Gamma>_ \\<turnstile> S_ <: T_\n\ngoal (1 subgoal):\n 1. \\<Gamma>_ \\<turnstile> t\\<^sub>1\\<^sub>2[0 \\<mapsto>\\<^sub>\\<tau> T\\<^sub>2] : T_", "by (blast intro: typing_typings.intros)"], ["proof (state)\nthis:\n  \\<Gamma>_ \\<turnstile> t\\<^sub>1\\<^sub>2[0 \\<mapsto>\\<^sub>\\<tau> T\\<^sub>2] : T_\n\ngoal:\nNo subgoals!", "qed"], ["", "theorem Let_preservation: \\<comment> \\<open>A.19(3)\\<close>\n  assumes H: \"\\<Gamma> \\<turnstile> (LET p = t\\<^sub>1 IN t\\<^sub>2) : T\"\n  shows \"\\<turnstile> p \\<rhd> t\\<^sub>1 \\<Rightarrow> ts \\<Longrightarrow> \\<Gamma> \\<turnstile> t\\<^sub>2[0 \\<mapsto>\\<^sub>s ts] : T\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<turnstile> p \\<rhd> t\\<^sub>1 \\<Rightarrow> ts \\<Longrightarrow>\n    \\<Gamma> \\<turnstile> t\\<^sub>2[0 \\<mapsto>\\<^sub>s ts] : T", "using H"], ["proof (prove)\nusing this:\n  \\<Gamma> \\<turnstile> (LET p = t\\<^sub>1 IN t\\<^sub>2) : T\n\ngoal (1 subgoal):\n 1. \\<turnstile> p \\<rhd> t\\<^sub>1 \\<Rightarrow> ts \\<Longrightarrow>\n    \\<Gamma> \\<turnstile> t\\<^sub>2[0 \\<mapsto>\\<^sub>s ts] : T", "proof (induct \\<Gamma> \"LET p = t\\<^sub>1 IN t\\<^sub>2\" T arbitrary: p t\\<^sub>1 t\\<^sub>2 ts rule: typing_induct)"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>\\<Gamma> S T p t\\<^sub>1 t\\<^sub>2 ts.\n       \\<lbrakk>\\<Gamma> \\<turnstile> (LET p = t\\<^sub>1 IN t\\<^sub>2) : S;\n        \\<And>ts.\n           \\<turnstile> p \\<rhd> t\\<^sub>1 \\<Rightarrow> ts \\<Longrightarrow>\n           \\<Gamma> \\<turnstile> t\\<^sub>2[0 \\<mapsto>\\<^sub>s ts] : S;\n        \\<Gamma> \\<turnstile> S <: T;\n        \\<turnstile> p \\<rhd> t\\<^sub>1 \\<Rightarrow> ts\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> t\\<^sub>2[0 \\<mapsto>\\<^sub>s ts] : T\n 2. \\<And>\\<Gamma> t\\<^sub>1 T\\<^sub>1 p \\<Delta> t\\<^sub>2 T\\<^sub>2 ts.\n       \\<lbrakk>\\<Gamma> \\<turnstile> t\\<^sub>1 : T\\<^sub>1;\n        \\<And>p t\\<^sub>1' t\\<^sub>2 ts.\n           \\<lbrakk>t\\<^sub>1 = (LET p = t\\<^sub>1' IN t\\<^sub>2);\n            \\<turnstile> p \\<rhd> t\\<^sub>1' \\<Rightarrow> ts\\<rbrakk>\n           \\<Longrightarrow> \\<Gamma> \\<turnstile> t\\<^sub>2[0 \\<mapsto>\\<^sub>s ts] : T\\<^sub>1;\n        \\<turnstile> p : T\\<^sub>1 \\<Rightarrow> \\<Delta>;\n        \\<Delta> @ \\<Gamma> \\<turnstile> t\\<^sub>2 : T\\<^sub>2;\n        \\<And>p t\\<^sub>1 t\\<^sub>2' ts.\n           \\<lbrakk>t\\<^sub>2 = (LET p = t\\<^sub>1 IN t\\<^sub>2');\n            \\<turnstile> p \\<rhd> t\\<^sub>1 \\<Rightarrow> ts\\<rbrakk>\n           \\<Longrightarrow> \\<Delta> @\n                             \\<Gamma> \\<turnstile> t\\<^sub>2'[0 \\<mapsto>\\<^sub>s ts] : T\\<^sub>2;\n        \\<turnstile> p \\<rhd> t\\<^sub>1 \\<Rightarrow> ts\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> t\\<^sub>2[0 \\<mapsto>\\<^sub>s ts] : \\<down>\\<^sub>\\<tau>\n        \\<parallel>\\<Delta>\\<parallel> 0 T\\<^sub>2", "case (T_Let \\<Gamma> t\\<^sub>1 T\\<^sub>1 p \\<Delta> t\\<^sub>2 T\\<^sub>2 ts)"], ["proof (state)\nthis:\n  \\<Gamma> \\<turnstile> t\\<^sub>1 : T\\<^sub>1\n  \\<lbrakk>t\\<^sub>1 = (LET ?p = ?t\\<^sub>1 IN ?t\\<^sub>2);\n   \\<turnstile> ?p \\<rhd> ?t\\<^sub>1 \\<Rightarrow> ?ts\\<rbrakk>\n  \\<Longrightarrow> \\<Gamma> \\<turnstile> ?t\\<^sub>2[0 \\<mapsto>\\<^sub>s ?ts] : T\\<^sub>1\n  \\<turnstile> p : T\\<^sub>1 \\<Rightarrow> \\<Delta>\n  \\<Delta> @ \\<Gamma> \\<turnstile> t\\<^sub>2 : T\\<^sub>2\n  \\<lbrakk>t\\<^sub>2 = (LET ?p = ?t\\<^sub>1 IN ?t\\<^sub>2);\n   \\<turnstile> ?p \\<rhd> ?t\\<^sub>1 \\<Rightarrow> ?ts\\<rbrakk>\n  \\<Longrightarrow> \\<Delta> @\n                    \\<Gamma> \\<turnstile> ?t\\<^sub>2[0 \\<mapsto>\\<^sub>s ?ts] : T\\<^sub>2\n  \\<turnstile> p \\<rhd> t\\<^sub>1 \\<Rightarrow> ts\n\ngoal (2 subgoals):\n 1. \\<And>\\<Gamma> S T p t\\<^sub>1 t\\<^sub>2 ts.\n       \\<lbrakk>\\<Gamma> \\<turnstile> (LET p = t\\<^sub>1 IN t\\<^sub>2) : S;\n        \\<And>ts.\n           \\<turnstile> p \\<rhd> t\\<^sub>1 \\<Rightarrow> ts \\<Longrightarrow>\n           \\<Gamma> \\<turnstile> t\\<^sub>2[0 \\<mapsto>\\<^sub>s ts] : S;\n        \\<Gamma> \\<turnstile> S <: T;\n        \\<turnstile> p \\<rhd> t\\<^sub>1 \\<Rightarrow> ts\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> t\\<^sub>2[0 \\<mapsto>\\<^sub>s ts] : T\n 2. \\<And>\\<Gamma> t\\<^sub>1 T\\<^sub>1 p \\<Delta> t\\<^sub>2 T\\<^sub>2 ts.\n       \\<lbrakk>\\<Gamma> \\<turnstile> t\\<^sub>1 : T\\<^sub>1;\n        \\<And>p t\\<^sub>1' t\\<^sub>2 ts.\n           \\<lbrakk>t\\<^sub>1 = (LET p = t\\<^sub>1' IN t\\<^sub>2);\n            \\<turnstile> p \\<rhd> t\\<^sub>1' \\<Rightarrow> ts\\<rbrakk>\n           \\<Longrightarrow> \\<Gamma> \\<turnstile> t\\<^sub>2[0 \\<mapsto>\\<^sub>s ts] : T\\<^sub>1;\n        \\<turnstile> p : T\\<^sub>1 \\<Rightarrow> \\<Delta>;\n        \\<Delta> @ \\<Gamma> \\<turnstile> t\\<^sub>2 : T\\<^sub>2;\n        \\<And>p t\\<^sub>1 t\\<^sub>2' ts.\n           \\<lbrakk>t\\<^sub>2 = (LET p = t\\<^sub>1 IN t\\<^sub>2');\n            \\<turnstile> p \\<rhd> t\\<^sub>1 \\<Rightarrow> ts\\<rbrakk>\n           \\<Longrightarrow> \\<Delta> @\n                             \\<Gamma> \\<turnstile> t\\<^sub>2'[0 \\<mapsto>\\<^sub>s ts] : T\\<^sub>2;\n        \\<turnstile> p \\<rhd> t\\<^sub>1 \\<Rightarrow> ts\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> t\\<^sub>2[0 \\<mapsto>\\<^sub>s ts] : \\<down>\\<^sub>\\<tau>\n        \\<parallel>\\<Delta>\\<parallel> 0 T\\<^sub>2", "from \\<open>\\<turnstile> p : T\\<^sub>1 \\<Rightarrow> \\<Delta>\\<close> \\<open>\\<Gamma> \\<turnstile> t\\<^sub>1 : T\\<^sub>1\\<close> \\<open>\\<Delta> @ \\<Gamma> \\<turnstile> t\\<^sub>2 : T\\<^sub>2\\<close> \\<open>\\<turnstile> p \\<rhd> t\\<^sub>1 \\<Rightarrow> ts\\<close>"], ["proof (chain)\npicking this:\n  \\<turnstile> p : T\\<^sub>1 \\<Rightarrow> \\<Delta>\n  \\<Gamma> \\<turnstile> t\\<^sub>1 : T\\<^sub>1\n  \\<Delta> @ \\<Gamma> \\<turnstile> t\\<^sub>2 : T\\<^sub>2\n  \\<turnstile> p \\<rhd> t\\<^sub>1 \\<Rightarrow> ts", "show ?case"], ["proof (prove)\nusing this:\n  \\<turnstile> p : T\\<^sub>1 \\<Rightarrow> \\<Delta>\n  \\<Gamma> \\<turnstile> t\\<^sub>1 : T\\<^sub>1\n  \\<Delta> @ \\<Gamma> \\<turnstile> t\\<^sub>2 : T\\<^sub>2\n  \\<turnstile> p \\<rhd> t\\<^sub>1 \\<Rightarrow> ts\n\ngoal (1 subgoal):\n 1. \\<Gamma> \\<turnstile> t\\<^sub>2[0 \\<mapsto>\\<^sub>s ts] : \\<down>\\<^sub>\\<tau>\n                         \\<parallel>\\<Delta>\\<parallel> 0 T\\<^sub>2", "by (rule match_type(1) [of _ _ _ _ _ \"[]\", simplified])"], ["proof (state)\nthis:\n  \\<Gamma> \\<turnstile> t\\<^sub>2[0 \\<mapsto>\\<^sub>s ts] : \\<down>\\<^sub>\\<tau>\n                       \\<parallel>\\<Delta>\\<parallel> 0 T\\<^sub>2\n\ngoal (1 subgoal):\n 1. \\<And>\\<Gamma> S T p t\\<^sub>1 t\\<^sub>2 ts.\n       \\<lbrakk>\\<Gamma> \\<turnstile> (LET p = t\\<^sub>1 IN t\\<^sub>2) : S;\n        \\<And>ts.\n           \\<turnstile> p \\<rhd> t\\<^sub>1 \\<Rightarrow> ts \\<Longrightarrow>\n           \\<Gamma> \\<turnstile> t\\<^sub>2[0 \\<mapsto>\\<^sub>s ts] : S;\n        \\<Gamma> \\<turnstile> S <: T;\n        \\<turnstile> p \\<rhd> t\\<^sub>1 \\<Rightarrow> ts\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> t\\<^sub>2[0 \\<mapsto>\\<^sub>s ts] : T", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>\\<Gamma> S T p t\\<^sub>1 t\\<^sub>2 ts.\n       \\<lbrakk>\\<Gamma> \\<turnstile> (LET p = t\\<^sub>1 IN t\\<^sub>2) : S;\n        \\<And>ts.\n           \\<turnstile> p \\<rhd> t\\<^sub>1 \\<Rightarrow> ts \\<Longrightarrow>\n           \\<Gamma> \\<turnstile> t\\<^sub>2[0 \\<mapsto>\\<^sub>s ts] : S;\n        \\<Gamma> \\<turnstile> S <: T;\n        \\<turnstile> p \\<rhd> t\\<^sub>1 \\<Rightarrow> ts\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> t\\<^sub>2[0 \\<mapsto>\\<^sub>s ts] : T", "case T_Sub"], ["proof (state)\nthis:\n  \\<Gamma>_ \\<turnstile> (LET p = t\\<^sub>1 IN t\\<^sub>2) : S_\n  \\<turnstile> p \\<rhd> t\\<^sub>1 \\<Rightarrow> ?ts \\<Longrightarrow>\n  \\<Gamma>_ \\<turnstile> t\\<^sub>2[0 \\<mapsto>\\<^sub>s ?ts] : S_\n  \\<Gamma>_ \\<turnstile> S_ <: T_\n  \\<turnstile> p \\<rhd> t\\<^sub>1 \\<Rightarrow> ts\n\ngoal (1 subgoal):\n 1. \\<And>\\<Gamma> S T p t\\<^sub>1 t\\<^sub>2 ts.\n       \\<lbrakk>\\<Gamma> \\<turnstile> (LET p = t\\<^sub>1 IN t\\<^sub>2) : S;\n        \\<And>ts.\n           \\<turnstile> p \\<rhd> t\\<^sub>1 \\<Rightarrow> ts \\<Longrightarrow>\n           \\<Gamma> \\<turnstile> t\\<^sub>2[0 \\<mapsto>\\<^sub>s ts] : S;\n        \\<Gamma> \\<turnstile> S <: T;\n        \\<turnstile> p \\<rhd> t\\<^sub>1 \\<Rightarrow> ts\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> t\\<^sub>2[0 \\<mapsto>\\<^sub>s ts] : T", "thus ?case"], ["proof (prove)\nusing this:\n  \\<Gamma>_ \\<turnstile> (LET p = t\\<^sub>1 IN t\\<^sub>2) : S_\n  \\<turnstile> p \\<rhd> t\\<^sub>1 \\<Rightarrow> ?ts \\<Longrightarrow>\n  \\<Gamma>_ \\<turnstile> t\\<^sub>2[0 \\<mapsto>\\<^sub>s ?ts] : S_\n  \\<Gamma>_ \\<turnstile> S_ <: T_\n  \\<turnstile> p \\<rhd> t\\<^sub>1 \\<Rightarrow> ts\n\ngoal (1 subgoal):\n 1. \\<Gamma>_ \\<turnstile> t\\<^sub>2[0 \\<mapsto>\\<^sub>s ts] : T_", "by (blast intro: typing_typings.intros)"], ["proof (state)\nthis:\n  \\<Gamma>_ \\<turnstile> t\\<^sub>2[0 \\<mapsto>\\<^sub>s ts] : T_\n\ngoal:\nNo subgoals!", "qed"], ["", "theorem Proj_preservation: \\<comment> \\<open>A.19(4)\\<close>\n  assumes H: \"\\<Gamma> \\<turnstile> Rcd fs..l : T\"\n  shows \"fs\\<langle>l\\<rangle>\\<^sub>? = \\<lfloor>v\\<rfloor> \\<Longrightarrow> \\<Gamma> \\<turnstile> v : T\""], ["proof (prove)\ngoal (1 subgoal):\n 1. fs\\<langle>l\\<rangle>\\<^sub>? = \\<lfloor>v\\<rfloor> \\<Longrightarrow>\n    \\<Gamma> \\<turnstile> v : T", "using H"], ["proof (prove)\nusing this:\n  \\<Gamma> \\<turnstile> Rcd fs..l : T\n\ngoal (1 subgoal):\n 1. fs\\<langle>l\\<rangle>\\<^sub>? = \\<lfloor>v\\<rfloor> \\<Longrightarrow>\n    \\<Gamma> \\<turnstile> v : T", "proof (induct \\<Gamma> \"Rcd fs..l\" T arbitrary: fs l v rule: typing_induct)"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>\\<Gamma> S T fs l v.\n       \\<lbrakk>\\<Gamma> \\<turnstile> Rcd fs..l : S;\n        \\<And>v.\n           fs\\<langle>l\\<rangle>\\<^sub>? =\n           \\<lfloor>v\\<rfloor> \\<Longrightarrow>\n           \\<Gamma> \\<turnstile> v : S;\n        \\<Gamma> \\<turnstile> S <: T;\n        fs\\<langle>l\\<rangle>\\<^sub>? = \\<lfloor>v\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> v : T\n 2. \\<And>\\<Gamma> fTs l T fs v.\n       \\<lbrakk>\\<Gamma> \\<turnstile> Rcd fs : RcdT fTs;\n        fTs\\<langle>l\\<rangle>\\<^sub>? = \\<lfloor>T\\<rfloor>;\n        fs\\<langle>l\\<rangle>\\<^sub>? = \\<lfloor>v\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> v : T", "case (T_Proj \\<Gamma> fTs l T fs v)"], ["proof (state)\nthis:\n  \\<Gamma> \\<turnstile> Rcd fs : RcdT fTs\n  fTs\\<langle>l\\<rangle>\\<^sub>? = \\<lfloor>T\\<rfloor>\n  fs\\<langle>l\\<rangle>\\<^sub>? = \\<lfloor>v\\<rfloor>\n\ngoal (2 subgoals):\n 1. \\<And>\\<Gamma> S T fs l v.\n       \\<lbrakk>\\<Gamma> \\<turnstile> Rcd fs..l : S;\n        \\<And>v.\n           fs\\<langle>l\\<rangle>\\<^sub>? =\n           \\<lfloor>v\\<rfloor> \\<Longrightarrow>\n           \\<Gamma> \\<turnstile> v : S;\n        \\<Gamma> \\<turnstile> S <: T;\n        fs\\<langle>l\\<rangle>\\<^sub>? = \\<lfloor>v\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> v : T\n 2. \\<And>\\<Gamma> fTs l T fs v.\n       \\<lbrakk>\\<Gamma> \\<turnstile> Rcd fs : RcdT fTs;\n        fTs\\<langle>l\\<rangle>\\<^sub>? = \\<lfloor>T\\<rfloor>;\n        fs\\<langle>l\\<rangle>\\<^sub>? = \\<lfloor>v\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> v : T", "from \\<open>\\<Gamma> \\<turnstile> Rcd fs : RcdT fTs\\<close>"], ["proof (chain)\npicking this:\n  \\<Gamma> \\<turnstile> Rcd fs : RcdT fTs", "have \"\\<forall>(l, U)\\<in>set fTs. \\<exists>u. fs\\<langle>l\\<rangle>\\<^sub>? = \\<lfloor>u\\<rfloor> \\<and> \\<Gamma> \\<turnstile> u : U\""], ["proof (prove)\nusing this:\n  \\<Gamma> \\<turnstile> Rcd fs : RcdT fTs\n\ngoal (1 subgoal):\n 1. \\<forall>(l, U)\\<in>set fTs.\n       \\<exists>u.\n          fs\\<langle>l\\<rangle>\\<^sub>? = \\<lfloor>u\\<rfloor> \\<and>\n          \\<Gamma> \\<turnstile> u : U", "by (rule Rcd_type1')"], ["proof (state)\nthis:\n  \\<forall>(l, U)\\<in>set fTs.\n     \\<exists>u.\n        fs\\<langle>l\\<rangle>\\<^sub>? = \\<lfloor>u\\<rfloor> \\<and>\n        \\<Gamma> \\<turnstile> u : U\n\ngoal (2 subgoals):\n 1. \\<And>\\<Gamma> S T fs l v.\n       \\<lbrakk>\\<Gamma> \\<turnstile> Rcd fs..l : S;\n        \\<And>v.\n           fs\\<langle>l\\<rangle>\\<^sub>? =\n           \\<lfloor>v\\<rfloor> \\<Longrightarrow>\n           \\<Gamma> \\<turnstile> v : S;\n        \\<Gamma> \\<turnstile> S <: T;\n        fs\\<langle>l\\<rangle>\\<^sub>? = \\<lfloor>v\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> v : T\n 2. \\<And>\\<Gamma> fTs l T fs v.\n       \\<lbrakk>\\<Gamma> \\<turnstile> Rcd fs : RcdT fTs;\n        fTs\\<langle>l\\<rangle>\\<^sub>? = \\<lfloor>T\\<rfloor>;\n        fs\\<langle>l\\<rangle>\\<^sub>? = \\<lfloor>v\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> v : T", "with T_Proj"], ["proof (chain)\npicking this:\n  \\<Gamma> \\<turnstile> Rcd fs : RcdT fTs\n  fTs\\<langle>l\\<rangle>\\<^sub>? = \\<lfloor>T\\<rfloor>\n  fs\\<langle>l\\<rangle>\\<^sub>? = \\<lfloor>v\\<rfloor>\n  \\<forall>(l, U)\\<in>set fTs.\n     \\<exists>u.\n        fs\\<langle>l\\<rangle>\\<^sub>? = \\<lfloor>u\\<rfloor> \\<and>\n        \\<Gamma> \\<turnstile> u : U", "show ?case"], ["proof (prove)\nusing this:\n  \\<Gamma> \\<turnstile> Rcd fs : RcdT fTs\n  fTs\\<langle>l\\<rangle>\\<^sub>? = \\<lfloor>T\\<rfloor>\n  fs\\<langle>l\\<rangle>\\<^sub>? = \\<lfloor>v\\<rfloor>\n  \\<forall>(l, U)\\<in>set fTs.\n     \\<exists>u.\n        fs\\<langle>l\\<rangle>\\<^sub>? = \\<lfloor>u\\<rfloor> \\<and>\n        \\<Gamma> \\<turnstile> u : U\n\ngoal (1 subgoal):\n 1. \\<Gamma> \\<turnstile> v : T", "by (fastforce dest: assoc_set)"], ["proof (state)\nthis:\n  \\<Gamma> \\<turnstile> v : T\n\ngoal (1 subgoal):\n 1. \\<And>\\<Gamma> S T fs l v.\n       \\<lbrakk>\\<Gamma> \\<turnstile> Rcd fs..l : S;\n        \\<And>v.\n           fs\\<langle>l\\<rangle>\\<^sub>? =\n           \\<lfloor>v\\<rfloor> \\<Longrightarrow>\n           \\<Gamma> \\<turnstile> v : S;\n        \\<Gamma> \\<turnstile> S <: T;\n        fs\\<langle>l\\<rangle>\\<^sub>? = \\<lfloor>v\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> v : T", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>\\<Gamma> S T fs l v.\n       \\<lbrakk>\\<Gamma> \\<turnstile> Rcd fs..l : S;\n        \\<And>v.\n           fs\\<langle>l\\<rangle>\\<^sub>? =\n           \\<lfloor>v\\<rfloor> \\<Longrightarrow>\n           \\<Gamma> \\<turnstile> v : S;\n        \\<Gamma> \\<turnstile> S <: T;\n        fs\\<langle>l\\<rangle>\\<^sub>? = \\<lfloor>v\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> v : T", "case T_Sub"], ["proof (state)\nthis:\n  \\<Gamma>_ \\<turnstile> Rcd fs..l : S_\n  fs\\<langle>l\\<rangle>\\<^sub>? = \\<lfloor>?v\\<rfloor> \\<Longrightarrow>\n  \\<Gamma>_ \\<turnstile> ?v : S_\n  \\<Gamma>_ \\<turnstile> S_ <: T_\n  fs\\<langle>l\\<rangle>\\<^sub>? = \\<lfloor>v\\<rfloor>\n\ngoal (1 subgoal):\n 1. \\<And>\\<Gamma> S T fs l v.\n       \\<lbrakk>\\<Gamma> \\<turnstile> Rcd fs..l : S;\n        \\<And>v.\n           fs\\<langle>l\\<rangle>\\<^sub>? =\n           \\<lfloor>v\\<rfloor> \\<Longrightarrow>\n           \\<Gamma> \\<turnstile> v : S;\n        \\<Gamma> \\<turnstile> S <: T;\n        fs\\<langle>l\\<rangle>\\<^sub>? = \\<lfloor>v\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> v : T", "thus ?case"], ["proof (prove)\nusing this:\n  \\<Gamma>_ \\<turnstile> Rcd fs..l : S_\n  fs\\<langle>l\\<rangle>\\<^sub>? = \\<lfloor>?v\\<rfloor> \\<Longrightarrow>\n  \\<Gamma>_ \\<turnstile> ?v : S_\n  \\<Gamma>_ \\<turnstile> S_ <: T_\n  fs\\<langle>l\\<rangle>\\<^sub>? = \\<lfloor>v\\<rfloor>\n\ngoal (1 subgoal):\n 1. \\<Gamma>_ \\<turnstile> v : T_", "by (blast intro: typing_typings.intros)"], ["proof (state)\nthis:\n  \\<Gamma>_ \\<turnstile> v : T_\n\ngoal:\nNo subgoals!", "qed"], ["", "theorem preservation: \\<comment> \\<open>A.20\\<close>\n  assumes H: \"t \\<longmapsto>\\<^sub>c t'\"\n  shows \"\\<Gamma> \\<turnstile> t : T \\<Longrightarrow> \\<Gamma> \\<turnstile> t' : T\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<Gamma> \\<turnstile> t : T \\<Longrightarrow>\n    \\<Gamma> \\<turnstile> t' : T", "using H"], ["proof (prove)\nusing this:\n  t \\<longmapsto>\\<^sub>c t'\n\ngoal (1 subgoal):\n 1. \\<Gamma> \\<turnstile> t : T \\<Longrightarrow>\n    \\<Gamma> \\<turnstile> t' : T", "proof (induct arbitrary: \\<Gamma> T)"], ["proof (state)\ngoal (5 subgoals):\n 1. \\<And>t t' E \\<Gamma> T.\n       \\<lbrakk>t \\<longmapsto>\\<^sub>c t';\n        \\<And>\\<Gamma> T.\n           \\<Gamma> \\<turnstile> t : T \\<Longrightarrow>\n           \\<Gamma> \\<turnstile> t' : T;\n        E \\<in> ctxt; \\<Gamma> \\<turnstile> E t : T\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> E t' : T\n 2. \\<And>v\\<^sub>2 T\\<^sub>1\\<^sub>1 t\\<^sub>1\\<^sub>2 \\<Gamma> T.\n       \\<lbrakk>v\\<^sub>2 \\<in> value;\n        \\<Gamma> \\<turnstile> (\\<lambda>:T\\<^sub>1\\<^sub>1.\n                                  t\\<^sub>1\\<^sub>2) \\<bullet>\n                              v\\<^sub>2 : T\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> t\\<^sub>1\\<^sub>2[0 \\<mapsto> v\\<^sub>2] : T\n 3. \\<And>T\\<^sub>1\\<^sub>1 t\\<^sub>1\\<^sub>2 T\\<^sub>2 \\<Gamma> T.\n       \\<Gamma> \\<turnstile> (\\<lambda><:T\\<^sub>1\\<^sub>1.\n                                 t\\<^sub>1\\<^sub>2) \\<bullet>\\<^sub>\\<tau>\n                             T\\<^sub>2 : T \\<Longrightarrow>\n       \\<Gamma> \\<turnstile> t\\<^sub>1\\<^sub>2[0 \\<mapsto>\\<^sub>\\<tau> T\\<^sub>2] : T\n 4. \\<And>v p ts t \\<Gamma> T.\n       \\<lbrakk>v \\<in> value; \\<turnstile> p \\<rhd> v \\<Rightarrow> ts;\n        \\<Gamma> \\<turnstile> (LET p = v IN t) : T\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> t[0 \\<mapsto>\\<^sub>s ts] : T\n 5. \\<And>fs l v \\<Gamma> T.\n       \\<lbrakk>fs\\<langle>l\\<rangle>\\<^sub>? = \\<lfloor>v\\<rfloor>;\n        v \\<in> value; \\<Gamma> \\<turnstile> Rcd fs..l : T\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> v : T", "case (E_Ctxt t t' E \\<Gamma> T)"], ["proof (state)\nthis:\n  t \\<longmapsto>\\<^sub>c t'\n  ?\\<Gamma> \\<turnstile> t : ?T \\<Longrightarrow>\n  ?\\<Gamma> \\<turnstile> t' : ?T\n  E \\<in> ctxt\n  \\<Gamma> \\<turnstile> E t : T\n\ngoal (5 subgoals):\n 1. \\<And>t t' E \\<Gamma> T.\n       \\<lbrakk>t \\<longmapsto>\\<^sub>c t';\n        \\<And>\\<Gamma> T.\n           \\<Gamma> \\<turnstile> t : T \\<Longrightarrow>\n           \\<Gamma> \\<turnstile> t' : T;\n        E \\<in> ctxt; \\<Gamma> \\<turnstile> E t : T\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> E t' : T\n 2. \\<And>v\\<^sub>2 T\\<^sub>1\\<^sub>1 t\\<^sub>1\\<^sub>2 \\<Gamma> T.\n       \\<lbrakk>v\\<^sub>2 \\<in> value;\n        \\<Gamma> \\<turnstile> (\\<lambda>:T\\<^sub>1\\<^sub>1.\n                                  t\\<^sub>1\\<^sub>2) \\<bullet>\n                              v\\<^sub>2 : T\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> t\\<^sub>1\\<^sub>2[0 \\<mapsto> v\\<^sub>2] : T\n 3. \\<And>T\\<^sub>1\\<^sub>1 t\\<^sub>1\\<^sub>2 T\\<^sub>2 \\<Gamma> T.\n       \\<Gamma> \\<turnstile> (\\<lambda><:T\\<^sub>1\\<^sub>1.\n                                 t\\<^sub>1\\<^sub>2) \\<bullet>\\<^sub>\\<tau>\n                             T\\<^sub>2 : T \\<Longrightarrow>\n       \\<Gamma> \\<turnstile> t\\<^sub>1\\<^sub>2[0 \\<mapsto>\\<^sub>\\<tau> T\\<^sub>2] : T\n 4. \\<And>v p ts t \\<Gamma> T.\n       \\<lbrakk>v \\<in> value; \\<turnstile> p \\<rhd> v \\<Rightarrow> ts;\n        \\<Gamma> \\<turnstile> (LET p = v IN t) : T\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> t[0 \\<mapsto>\\<^sub>s ts] : T\n 5. \\<And>fs l v \\<Gamma> T.\n       \\<lbrakk>fs\\<langle>l\\<rangle>\\<^sub>? = \\<lfloor>v\\<rfloor>;\n        v \\<in> value; \\<Gamma> \\<turnstile> Rcd fs..l : T\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> v : T", "from E_Ctxt(4,3) refl E_Ctxt(2)"], ["proof (chain)\npicking this:\n  \\<Gamma> \\<turnstile> E t : T\n  E \\<in> ctxt\n  ?t = ?t\n  ?\\<Gamma> \\<turnstile> t : ?T \\<Longrightarrow>\n  ?\\<Gamma> \\<turnstile> t' : ?T", "show ?case"], ["proof (prove)\nusing this:\n  \\<Gamma> \\<turnstile> E t : T\n  E \\<in> ctxt\n  ?t = ?t\n  ?\\<Gamma> \\<turnstile> t : ?T \\<Longrightarrow>\n  ?\\<Gamma> \\<turnstile> t' : ?T\n\ngoal (1 subgoal):\n 1. \\<Gamma> \\<turnstile> E t' : T", "by (rule context_typing)"], ["proof (state)\nthis:\n  \\<Gamma> \\<turnstile> E t' : T\n\ngoal (4 subgoals):\n 1. \\<And>v\\<^sub>2 T\\<^sub>1\\<^sub>1 t\\<^sub>1\\<^sub>2 \\<Gamma> T.\n       \\<lbrakk>v\\<^sub>2 \\<in> value;\n        \\<Gamma> \\<turnstile> (\\<lambda>:T\\<^sub>1\\<^sub>1.\n                                  t\\<^sub>1\\<^sub>2) \\<bullet>\n                              v\\<^sub>2 : T\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> t\\<^sub>1\\<^sub>2[0 \\<mapsto> v\\<^sub>2] : T\n 2. \\<And>T\\<^sub>1\\<^sub>1 t\\<^sub>1\\<^sub>2 T\\<^sub>2 \\<Gamma> T.\n       \\<Gamma> \\<turnstile> (\\<lambda><:T\\<^sub>1\\<^sub>1.\n                                 t\\<^sub>1\\<^sub>2) \\<bullet>\\<^sub>\\<tau>\n                             T\\<^sub>2 : T \\<Longrightarrow>\n       \\<Gamma> \\<turnstile> t\\<^sub>1\\<^sub>2[0 \\<mapsto>\\<^sub>\\<tau> T\\<^sub>2] : T\n 3. \\<And>v p ts t \\<Gamma> T.\n       \\<lbrakk>v \\<in> value; \\<turnstile> p \\<rhd> v \\<Rightarrow> ts;\n        \\<Gamma> \\<turnstile> (LET p = v IN t) : T\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> t[0 \\<mapsto>\\<^sub>s ts] : T\n 4. \\<And>fs l v \\<Gamma> T.\n       \\<lbrakk>fs\\<langle>l\\<rangle>\\<^sub>? = \\<lfloor>v\\<rfloor>;\n        v \\<in> value; \\<Gamma> \\<turnstile> Rcd fs..l : T\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> v : T", "next"], ["proof (state)\ngoal (4 subgoals):\n 1. \\<And>v\\<^sub>2 T\\<^sub>1\\<^sub>1 t\\<^sub>1\\<^sub>2 \\<Gamma> T.\n       \\<lbrakk>v\\<^sub>2 \\<in> value;\n        \\<Gamma> \\<turnstile> (\\<lambda>:T\\<^sub>1\\<^sub>1.\n                                  t\\<^sub>1\\<^sub>2) \\<bullet>\n                              v\\<^sub>2 : T\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> t\\<^sub>1\\<^sub>2[0 \\<mapsto> v\\<^sub>2] : T\n 2. \\<And>T\\<^sub>1\\<^sub>1 t\\<^sub>1\\<^sub>2 T\\<^sub>2 \\<Gamma> T.\n       \\<Gamma> \\<turnstile> (\\<lambda><:T\\<^sub>1\\<^sub>1.\n                                 t\\<^sub>1\\<^sub>2) \\<bullet>\\<^sub>\\<tau>\n                             T\\<^sub>2 : T \\<Longrightarrow>\n       \\<Gamma> \\<turnstile> t\\<^sub>1\\<^sub>2[0 \\<mapsto>\\<^sub>\\<tau> T\\<^sub>2] : T\n 3. \\<And>v p ts t \\<Gamma> T.\n       \\<lbrakk>v \\<in> value; \\<turnstile> p \\<rhd> v \\<Rightarrow> ts;\n        \\<Gamma> \\<turnstile> (LET p = v IN t) : T\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> t[0 \\<mapsto>\\<^sub>s ts] : T\n 4. \\<And>fs l v \\<Gamma> T.\n       \\<lbrakk>fs\\<langle>l\\<rangle>\\<^sub>? = \\<lfloor>v\\<rfloor>;\n        v \\<in> value; \\<Gamma> \\<turnstile> Rcd fs..l : T\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> v : T", "case (E_Abs v\\<^sub>2 T\\<^sub>1\\<^sub>1 t\\<^sub>1\\<^sub>2 \\<Gamma> T)"], ["proof (state)\nthis:\n  v\\<^sub>2 \\<in> value\n  \\<Gamma> \\<turnstile> (\\<lambda>:T\\<^sub>1\\<^sub>1.\n                            t\\<^sub>1\\<^sub>2) \\<bullet>\n                        v\\<^sub>2 : T\n\ngoal (4 subgoals):\n 1. \\<And>v\\<^sub>2 T\\<^sub>1\\<^sub>1 t\\<^sub>1\\<^sub>2 \\<Gamma> T.\n       \\<lbrakk>v\\<^sub>2 \\<in> value;\n        \\<Gamma> \\<turnstile> (\\<lambda>:T\\<^sub>1\\<^sub>1.\n                                  t\\<^sub>1\\<^sub>2) \\<bullet>\n                              v\\<^sub>2 : T\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> t\\<^sub>1\\<^sub>2[0 \\<mapsto> v\\<^sub>2] : T\n 2. \\<And>T\\<^sub>1\\<^sub>1 t\\<^sub>1\\<^sub>2 T\\<^sub>2 \\<Gamma> T.\n       \\<Gamma> \\<turnstile> (\\<lambda><:T\\<^sub>1\\<^sub>1.\n                                 t\\<^sub>1\\<^sub>2) \\<bullet>\\<^sub>\\<tau>\n                             T\\<^sub>2 : T \\<Longrightarrow>\n       \\<Gamma> \\<turnstile> t\\<^sub>1\\<^sub>2[0 \\<mapsto>\\<^sub>\\<tau> T\\<^sub>2] : T\n 3. \\<And>v p ts t \\<Gamma> T.\n       \\<lbrakk>v \\<in> value; \\<turnstile> p \\<rhd> v \\<Rightarrow> ts;\n        \\<Gamma> \\<turnstile> (LET p = v IN t) : T\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> t[0 \\<mapsto>\\<^sub>s ts] : T\n 4. \\<And>fs l v \\<Gamma> T.\n       \\<lbrakk>fs\\<langle>l\\<rangle>\\<^sub>? = \\<lfloor>v\\<rfloor>;\n        v \\<in> value; \\<Gamma> \\<turnstile> Rcd fs..l : T\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> v : T", "from E_Abs(2)"], ["proof (chain)\npicking this:\n  \\<Gamma> \\<turnstile> (\\<lambda>:T\\<^sub>1\\<^sub>1.\n                            t\\<^sub>1\\<^sub>2) \\<bullet>\n                        v\\<^sub>2 : T", "show ?case"], ["proof (prove)\nusing this:\n  \\<Gamma> \\<turnstile> (\\<lambda>:T\\<^sub>1\\<^sub>1.\n                            t\\<^sub>1\\<^sub>2) \\<bullet>\n                        v\\<^sub>2 : T\n\ngoal (1 subgoal):\n 1. \\<Gamma> \\<turnstile> t\\<^sub>1\\<^sub>2[0 \\<mapsto> v\\<^sub>2] : T", "by (rule Abs_preservation)"], ["proof (state)\nthis:\n  \\<Gamma> \\<turnstile> t\\<^sub>1\\<^sub>2[0 \\<mapsto> v\\<^sub>2] : T\n\ngoal (3 subgoals):\n 1. \\<And>T\\<^sub>1\\<^sub>1 t\\<^sub>1\\<^sub>2 T\\<^sub>2 \\<Gamma> T.\n       \\<Gamma> \\<turnstile> (\\<lambda><:T\\<^sub>1\\<^sub>1.\n                                 t\\<^sub>1\\<^sub>2) \\<bullet>\\<^sub>\\<tau>\n                             T\\<^sub>2 : T \\<Longrightarrow>\n       \\<Gamma> \\<turnstile> t\\<^sub>1\\<^sub>2[0 \\<mapsto>\\<^sub>\\<tau> T\\<^sub>2] : T\n 2. \\<And>v p ts t \\<Gamma> T.\n       \\<lbrakk>v \\<in> value; \\<turnstile> p \\<rhd> v \\<Rightarrow> ts;\n        \\<Gamma> \\<turnstile> (LET p = v IN t) : T\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> t[0 \\<mapsto>\\<^sub>s ts] : T\n 3. \\<And>fs l v \\<Gamma> T.\n       \\<lbrakk>fs\\<langle>l\\<rangle>\\<^sub>? = \\<lfloor>v\\<rfloor>;\n        v \\<in> value; \\<Gamma> \\<turnstile> Rcd fs..l : T\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> v : T", "next"], ["proof (state)\ngoal (3 subgoals):\n 1. \\<And>T\\<^sub>1\\<^sub>1 t\\<^sub>1\\<^sub>2 T\\<^sub>2 \\<Gamma> T.\n       \\<Gamma> \\<turnstile> (\\<lambda><:T\\<^sub>1\\<^sub>1.\n                                 t\\<^sub>1\\<^sub>2) \\<bullet>\\<^sub>\\<tau>\n                             T\\<^sub>2 : T \\<Longrightarrow>\n       \\<Gamma> \\<turnstile> t\\<^sub>1\\<^sub>2[0 \\<mapsto>\\<^sub>\\<tau> T\\<^sub>2] : T\n 2. \\<And>v p ts t \\<Gamma> T.\n       \\<lbrakk>v \\<in> value; \\<turnstile> p \\<rhd> v \\<Rightarrow> ts;\n        \\<Gamma> \\<turnstile> (LET p = v IN t) : T\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> t[0 \\<mapsto>\\<^sub>s ts] : T\n 3. \\<And>fs l v \\<Gamma> T.\n       \\<lbrakk>fs\\<langle>l\\<rangle>\\<^sub>? = \\<lfloor>v\\<rfloor>;\n        v \\<in> value; \\<Gamma> \\<turnstile> Rcd fs..l : T\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> v : T", "case (E_TAbs T\\<^sub>1\\<^sub>1 t\\<^sub>1\\<^sub>2 T\\<^sub>2 \\<Gamma> T)"], ["proof (state)\nthis:\n  \\<Gamma> \\<turnstile> (\\<lambda><:T\\<^sub>1\\<^sub>1.\n                            t\\<^sub>1\\<^sub>2) \\<bullet>\\<^sub>\\<tau>\n                        T\\<^sub>2 : T\n\ngoal (3 subgoals):\n 1. \\<And>T\\<^sub>1\\<^sub>1 t\\<^sub>1\\<^sub>2 T\\<^sub>2 \\<Gamma> T.\n       \\<Gamma> \\<turnstile> (\\<lambda><:T\\<^sub>1\\<^sub>1.\n                                 t\\<^sub>1\\<^sub>2) \\<bullet>\\<^sub>\\<tau>\n                             T\\<^sub>2 : T \\<Longrightarrow>\n       \\<Gamma> \\<turnstile> t\\<^sub>1\\<^sub>2[0 \\<mapsto>\\<^sub>\\<tau> T\\<^sub>2] : T\n 2. \\<And>v p ts t \\<Gamma> T.\n       \\<lbrakk>v \\<in> value; \\<turnstile> p \\<rhd> v \\<Rightarrow> ts;\n        \\<Gamma> \\<turnstile> (LET p = v IN t) : T\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> t[0 \\<mapsto>\\<^sub>s ts] : T\n 3. \\<And>fs l v \\<Gamma> T.\n       \\<lbrakk>fs\\<langle>l\\<rangle>\\<^sub>? = \\<lfloor>v\\<rfloor>;\n        v \\<in> value; \\<Gamma> \\<turnstile> Rcd fs..l : T\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> v : T", "thus ?case"], ["proof (prove)\nusing this:\n  \\<Gamma> \\<turnstile> (\\<lambda><:T\\<^sub>1\\<^sub>1.\n                            t\\<^sub>1\\<^sub>2) \\<bullet>\\<^sub>\\<tau>\n                        T\\<^sub>2 : T\n\ngoal (1 subgoal):\n 1. \\<Gamma> \\<turnstile> t\\<^sub>1\\<^sub>2[0 \\<mapsto>\\<^sub>\\<tau> T\\<^sub>2] : T", "by (rule TAbs_preservation)"], ["proof (state)\nthis:\n  \\<Gamma> \\<turnstile> t\\<^sub>1\\<^sub>2[0 \\<mapsto>\\<^sub>\\<tau> T\\<^sub>2] : T\n\ngoal (2 subgoals):\n 1. \\<And>v p ts t \\<Gamma> T.\n       \\<lbrakk>v \\<in> value; \\<turnstile> p \\<rhd> v \\<Rightarrow> ts;\n        \\<Gamma> \\<turnstile> (LET p = v IN t) : T\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> t[0 \\<mapsto>\\<^sub>s ts] : T\n 2. \\<And>fs l v \\<Gamma> T.\n       \\<lbrakk>fs\\<langle>l\\<rangle>\\<^sub>? = \\<lfloor>v\\<rfloor>;\n        v \\<in> value; \\<Gamma> \\<turnstile> Rcd fs..l : T\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> v : T", "next"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>v p ts t \\<Gamma> T.\n       \\<lbrakk>v \\<in> value; \\<turnstile> p \\<rhd> v \\<Rightarrow> ts;\n        \\<Gamma> \\<turnstile> (LET p = v IN t) : T\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> t[0 \\<mapsto>\\<^sub>s ts] : T\n 2. \\<And>fs l v \\<Gamma> T.\n       \\<lbrakk>fs\\<langle>l\\<rangle>\\<^sub>? = \\<lfloor>v\\<rfloor>;\n        v \\<in> value; \\<Gamma> \\<turnstile> Rcd fs..l : T\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> v : T", "case (E_LetV v p ts t \\<Gamma> T)"], ["proof (state)\nthis:\n  v \\<in> value\n  \\<turnstile> p \\<rhd> v \\<Rightarrow> ts\n  \\<Gamma> \\<turnstile> (LET p = v IN t) : T\n\ngoal (2 subgoals):\n 1. \\<And>v p ts t \\<Gamma> T.\n       \\<lbrakk>v \\<in> value; \\<turnstile> p \\<rhd> v \\<Rightarrow> ts;\n        \\<Gamma> \\<turnstile> (LET p = v IN t) : T\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> t[0 \\<mapsto>\\<^sub>s ts] : T\n 2. \\<And>fs l v \\<Gamma> T.\n       \\<lbrakk>fs\\<langle>l\\<rangle>\\<^sub>? = \\<lfloor>v\\<rfloor>;\n        v \\<in> value; \\<Gamma> \\<turnstile> Rcd fs..l : T\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> v : T", "from E_LetV(3,2)"], ["proof (chain)\npicking this:\n  \\<Gamma> \\<turnstile> (LET p = v IN t) : T\n  \\<turnstile> p \\<rhd> v \\<Rightarrow> ts", "show ?case"], ["proof (prove)\nusing this:\n  \\<Gamma> \\<turnstile> (LET p = v IN t) : T\n  \\<turnstile> p \\<rhd> v \\<Rightarrow> ts\n\ngoal (1 subgoal):\n 1. \\<Gamma> \\<turnstile> t[0 \\<mapsto>\\<^sub>s ts] : T", "by (rule Let_preservation)"], ["proof (state)\nthis:\n  \\<Gamma> \\<turnstile> t[0 \\<mapsto>\\<^sub>s ts] : T\n\ngoal (1 subgoal):\n 1. \\<And>fs l v \\<Gamma> T.\n       \\<lbrakk>fs\\<langle>l\\<rangle>\\<^sub>? = \\<lfloor>v\\<rfloor>;\n        v \\<in> value; \\<Gamma> \\<turnstile> Rcd fs..l : T\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> v : T", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>fs l v \\<Gamma> T.\n       \\<lbrakk>fs\\<langle>l\\<rangle>\\<^sub>? = \\<lfloor>v\\<rfloor>;\n        v \\<in> value; \\<Gamma> \\<turnstile> Rcd fs..l : T\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> v : T", "case (E_ProjRcd fs l v \\<Gamma> T)"], ["proof (state)\nthis:\n  fs\\<langle>l\\<rangle>\\<^sub>? = \\<lfloor>v\\<rfloor>\n  v \\<in> value\n  \\<Gamma> \\<turnstile> Rcd fs..l : T\n\ngoal (1 subgoal):\n 1. \\<And>fs l v \\<Gamma> T.\n       \\<lbrakk>fs\\<langle>l\\<rangle>\\<^sub>? = \\<lfloor>v\\<rfloor>;\n        v \\<in> value; \\<Gamma> \\<turnstile> Rcd fs..l : T\\<rbrakk>\n       \\<Longrightarrow> \\<Gamma> \\<turnstile> v : T", "from E_ProjRcd(3,1)"], ["proof (chain)\npicking this:\n  \\<Gamma> \\<turnstile> Rcd fs..l : T\n  fs\\<langle>l\\<rangle>\\<^sub>? = \\<lfloor>v\\<rfloor>", "show ?case"], ["proof (prove)\nusing this:\n  \\<Gamma> \\<turnstile> Rcd fs..l : T\n  fs\\<langle>l\\<rangle>\\<^sub>? = \\<lfloor>v\\<rfloor>\n\ngoal (1 subgoal):\n 1. \\<Gamma> \\<turnstile> v : T", "by (rule Proj_preservation)"], ["proof (state)\nthis:\n  \\<Gamma> \\<turnstile> v : T\n\ngoal:\nNo subgoals!", "qed"], ["", "text \\<open>\nFor the proof of the progress theorem, we need a lemma stating that each well-typed,\nclosed term @{term t} is either a canonical value, or can be decomposed into an\nevaluation context @{term E} and a term @{term \"t\\<^sub>0\"} such that @{term \"t\\<^sub>0\"} is a redex.\nThe proof of this result, which is called the {\\it decomposition lemma}, is again\nby induction on the typing derivation.\nA similar property is also needed for records.\n\\<close>"], ["", "theorem context_decomp: \\<comment> \\<open>A.15\\<close>\n  \"[] \\<turnstile> t : T \\<Longrightarrow> \n     t \\<in> value \\<or> (\\<exists>E t\\<^sub>0 t\\<^sub>0'. E \\<in> ctxt \\<and> t = E t\\<^sub>0 \\<and> t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')\"\n  \"[] \\<turnstile> fs [:] fTs \\<Longrightarrow>\n     (\\<forall>(l, t) \\<in> set fs. t \\<in> value) \\<or> (\\<exists>E t\\<^sub>0 t\\<^sub>0'. E \\<in> rctxt \\<and> fs = E t\\<^sub>0 \\<and> t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')\""], ["proof (prove)\ngoal (1 subgoal):\n 1. ([] \\<turnstile> t : T \\<Longrightarrow>\n     t \\<in> value \\<or>\n     (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n         E \\<in> ctxt \\<and>\n         t = E t\\<^sub>0 \\<and>\n         t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')) &&&\n    ([] \\<turnstile> fs [:] fTs \\<Longrightarrow>\n     (\\<forall>(l, t)\\<in>set fs. t \\<in> value) \\<or>\n     (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n         E \\<in> rctxt \\<and>\n         fs = E t\\<^sub>0 \\<and>\n         t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0'))", "proof (induct \"[]::env\" t T and \"[]::env\" fs fTs set: typing typings)"], ["proof (state)\ngoal (11 subgoals):\n 1. \\<And>i U T.\n       \\<lbrakk>[] \\<turnstile>\\<^sub>w\\<^sub>f;\n        []\\<langle>i\\<rangle> = \\<lfloor>VarB U\\<rfloor>;\n        T = \\<up>\\<^sub>\\<tau> (Suc i) 0 U\\<rbrakk>\n       \\<Longrightarrow> Var i \\<in> value \\<or>\n                         (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n                             E \\<in> ctxt \\<and>\n                             Var i = E t\\<^sub>0 \\<and>\n                             t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')\n 2. \\<And>T\\<^sub>1 t\\<^sub>2 T\\<^sub>2.\n       [VarB T\\<^sub>1] \\<turnstile> t\\<^sub>2 : T\\<^sub>2 \\<Longrightarrow>\n       (\\<lambda>:T\\<^sub>1. t\\<^sub>2) \\<in> value \\<or>\n       (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n           E \\<in> ctxt \\<and>\n           (\\<lambda>:T\\<^sub>1. t\\<^sub>2) = E t\\<^sub>0 \\<and>\n           t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')\n 3. \\<And>t\\<^sub>1 T\\<^sub>1\\<^sub>1 T\\<^sub>1\\<^sub>2 t\\<^sub>2.\n       \\<lbrakk>[] \\<turnstile> t\\<^sub>1 : T\\<^sub>1\\<^sub>1 \\<rightarrow>\n      T\\<^sub>1\\<^sub>2;\n        t\\<^sub>1 \\<in> value \\<or>\n        (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n            E \\<in> ctxt \\<and>\n            t\\<^sub>1 = E t\\<^sub>0 \\<and>\n            t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0');\n        [] \\<turnstile> t\\<^sub>2 : T\\<^sub>1\\<^sub>1;\n        t\\<^sub>2 \\<in> value \\<or>\n        (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n            E \\<in> ctxt \\<and>\n            t\\<^sub>2 = E t\\<^sub>0 \\<and>\n            t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')\\<rbrakk>\n       \\<Longrightarrow> t\\<^sub>1 \\<bullet> t\\<^sub>2 \\<in> value \\<or>\n                         (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n                             E \\<in> ctxt \\<and>\n                             t\\<^sub>1 \\<bullet> t\\<^sub>2 =\n                             E t\\<^sub>0 \\<and>\n                             t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')\n 4. \\<And>T\\<^sub>1 t\\<^sub>2 T\\<^sub>2.\n       [TVarB\n         T\\<^sub>1] \\<turnstile> t\\<^sub>2 : T\\<^sub>2 \\<Longrightarrow>\n       (\\<lambda><:T\\<^sub>1. t\\<^sub>2) \\<in> value \\<or>\n       (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n           E \\<in> ctxt \\<and>\n           (\\<lambda><:T\\<^sub>1. t\\<^sub>2) = E t\\<^sub>0 \\<and>\n           t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')\n 5. \\<And>t\\<^sub>1 T\\<^sub>1\\<^sub>1 T\\<^sub>1\\<^sub>2 T\\<^sub>2.\n       \\<lbrakk>[] \\<turnstile> t\\<^sub>1 : (\\<forall><:T\\<^sub>1\\<^sub>1.\n          T\\<^sub>1\\<^sub>2);\n        t\\<^sub>1 \\<in> value \\<or>\n        (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n            E \\<in> ctxt \\<and>\n            t\\<^sub>1 = E t\\<^sub>0 \\<and>\n            t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0');\n        [] \\<turnstile> T\\<^sub>2 <: T\\<^sub>1\\<^sub>1\\<rbrakk>\n       \\<Longrightarrow> t\\<^sub>1 \\<bullet>\\<^sub>\\<tau> T\\<^sub>2\n                         \\<in> value \\<or>\n                         (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n                             E \\<in> ctxt \\<and>\n                             t\\<^sub>1 \\<bullet>\\<^sub>\\<tau> T\\<^sub>2 =\n                             E t\\<^sub>0 \\<and>\n                             t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')\n 6. \\<And>t S T.\n       \\<lbrakk>[] \\<turnstile> t : S;\n        t \\<in> value \\<or>\n        (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n            E \\<in> ctxt \\<and>\n            t = E t\\<^sub>0 \\<and>\n            t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0');\n        [] \\<turnstile> S <: T\\<rbrakk>\n       \\<Longrightarrow> t \\<in> value \\<or>\n                         (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n                             E \\<in> ctxt \\<and>\n                             t = E t\\<^sub>0 \\<and>\n                             t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')\n 7. \\<And>t\\<^sub>1 T\\<^sub>1 p \\<Delta> t\\<^sub>2 T\\<^sub>2.\n       \\<lbrakk>[] \\<turnstile> t\\<^sub>1 : T\\<^sub>1;\n        t\\<^sub>1 \\<in> value \\<or>\n        (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n            E \\<in> ctxt \\<and>\n            t\\<^sub>1 = E t\\<^sub>0 \\<and>\n            t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0');\n        \\<turnstile> p : T\\<^sub>1 \\<Rightarrow> \\<Delta>;\n        \\<Delta> @ [] \\<turnstile> t\\<^sub>2 : T\\<^sub>2;\n        \\<Delta> @ [] = [] \\<Longrightarrow>\n        t\\<^sub>2 \\<in> value \\<or>\n        (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n            E \\<in> ctxt \\<and>\n            t\\<^sub>2 = E t\\<^sub>0 \\<and>\n            t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')\\<rbrakk>\n       \\<Longrightarrow> (LET p = t\\<^sub>1 IN t\\<^sub>2) \\<in> value \\<or>\n                         (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n                             E \\<in> ctxt \\<and>\n                             (LET p = t\\<^sub>1 IN t\\<^sub>2) =\n                             E t\\<^sub>0 \\<and>\n                             t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')\n 8. \\<And>fs fTs.\n       \\<lbrakk>[] \\<turnstile> fs [:] fTs;\n        (\\<forall>(l, t)\\<in>set fs. t \\<in> value) \\<or>\n        (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n            E \\<in> rctxt \\<and>\n            fs = E t\\<^sub>0 \\<and>\n            t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')\\<rbrakk>\n       \\<Longrightarrow> Rcd fs \\<in> value \\<or>\n                         (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n                             E \\<in> ctxt \\<and>\n                             Rcd fs = E t\\<^sub>0 \\<and>\n                             t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')\n 9. \\<And>t fTs l T.\n       \\<lbrakk>[] \\<turnstile> t : RcdT fTs;\n        t \\<in> value \\<or>\n        (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n            E \\<in> ctxt \\<and>\n            t = E t\\<^sub>0 \\<and>\n            t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0');\n        fTs\\<langle>l\\<rangle>\\<^sub>? = \\<lfloor>T\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> t..l \\<in> value \\<or>\n                         (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n                             E \\<in> ctxt \\<and>\n                             t..l = E t\\<^sub>0 \\<and>\n                             t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')\n 10. [] \\<turnstile>\\<^sub>w\\<^sub>f \\<Longrightarrow>\n     (\\<forall>(l, t)\\<in>set []. t \\<in> value) \\<or>\n     (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n         E \\<in> rctxt \\<and>\n         [] = E t\\<^sub>0 \\<and> t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')\nA total of 11 subgoals...", "case T_Var"], ["proof (state)\nthis:\n  [] \\<turnstile>\\<^sub>w\\<^sub>f\n  []\\<langle>i_\\<rangle> = \\<lfloor>VarB U_\\<rfloor>\n  T_ = \\<up>\\<^sub>\\<tau> (Suc i_) 0 U_\n\ngoal (11 subgoals):\n 1. \\<And>i U T.\n       \\<lbrakk>[] \\<turnstile>\\<^sub>w\\<^sub>f;\n        []\\<langle>i\\<rangle> = \\<lfloor>VarB U\\<rfloor>;\n        T = \\<up>\\<^sub>\\<tau> (Suc i) 0 U\\<rbrakk>\n       \\<Longrightarrow> Var i \\<in> value \\<or>\n                         (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n                             E \\<in> ctxt \\<and>\n                             Var i = E t\\<^sub>0 \\<and>\n                             t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')\n 2. \\<And>T\\<^sub>1 t\\<^sub>2 T\\<^sub>2.\n       [VarB T\\<^sub>1] \\<turnstile> t\\<^sub>2 : T\\<^sub>2 \\<Longrightarrow>\n       (\\<lambda>:T\\<^sub>1. t\\<^sub>2) \\<in> value \\<or>\n       (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n           E \\<in> ctxt \\<and>\n           (\\<lambda>:T\\<^sub>1. t\\<^sub>2) = E t\\<^sub>0 \\<and>\n           t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')\n 3. \\<And>t\\<^sub>1 T\\<^sub>1\\<^sub>1 T\\<^sub>1\\<^sub>2 t\\<^sub>2.\n       \\<lbrakk>[] \\<turnstile> t\\<^sub>1 : T\\<^sub>1\\<^sub>1 \\<rightarrow>\n      T\\<^sub>1\\<^sub>2;\n        t\\<^sub>1 \\<in> value \\<or>\n        (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n            E \\<in> ctxt \\<and>\n            t\\<^sub>1 = E t\\<^sub>0 \\<and>\n            t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0');\n        [] \\<turnstile> t\\<^sub>2 : T\\<^sub>1\\<^sub>1;\n        t\\<^sub>2 \\<in> value \\<or>\n        (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n            E \\<in> ctxt \\<and>\n            t\\<^sub>2 = E t\\<^sub>0 \\<and>\n            t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')\\<rbrakk>\n       \\<Longrightarrow> t\\<^sub>1 \\<bullet> t\\<^sub>2 \\<in> value \\<or>\n                         (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n                             E \\<in> ctxt \\<and>\n                             t\\<^sub>1 \\<bullet> t\\<^sub>2 =\n                             E t\\<^sub>0 \\<and>\n                             t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')\n 4. \\<And>T\\<^sub>1 t\\<^sub>2 T\\<^sub>2.\n       [TVarB\n         T\\<^sub>1] \\<turnstile> t\\<^sub>2 : T\\<^sub>2 \\<Longrightarrow>\n       (\\<lambda><:T\\<^sub>1. t\\<^sub>2) \\<in> value \\<or>\n       (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n           E \\<in> ctxt \\<and>\n           (\\<lambda><:T\\<^sub>1. t\\<^sub>2) = E t\\<^sub>0 \\<and>\n           t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')\n 5. \\<And>t\\<^sub>1 T\\<^sub>1\\<^sub>1 T\\<^sub>1\\<^sub>2 T\\<^sub>2.\n       \\<lbrakk>[] \\<turnstile> t\\<^sub>1 : (\\<forall><:T\\<^sub>1\\<^sub>1.\n          T\\<^sub>1\\<^sub>2);\n        t\\<^sub>1 \\<in> value \\<or>\n        (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n            E \\<in> ctxt \\<and>\n            t\\<^sub>1 = E t\\<^sub>0 \\<and>\n            t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0');\n        [] \\<turnstile> T\\<^sub>2 <: T\\<^sub>1\\<^sub>1\\<rbrakk>\n       \\<Longrightarrow> t\\<^sub>1 \\<bullet>\\<^sub>\\<tau> T\\<^sub>2\n                         \\<in> value \\<or>\n                         (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n                             E \\<in> ctxt \\<and>\n                             t\\<^sub>1 \\<bullet>\\<^sub>\\<tau> T\\<^sub>2 =\n                             E t\\<^sub>0 \\<and>\n                             t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')\n 6. \\<And>t S T.\n       \\<lbrakk>[] \\<turnstile> t : S;\n        t \\<in> value \\<or>\n        (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n            E \\<in> ctxt \\<and>\n            t = E t\\<^sub>0 \\<and>\n            t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0');\n        [] \\<turnstile> S <: T\\<rbrakk>\n       \\<Longrightarrow> t \\<in> value \\<or>\n                         (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n                             E \\<in> ctxt \\<and>\n                             t = E t\\<^sub>0 \\<and>\n                             t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')\n 7. \\<And>t\\<^sub>1 T\\<^sub>1 p \\<Delta> t\\<^sub>2 T\\<^sub>2.\n       \\<lbrakk>[] \\<turnstile> t\\<^sub>1 : T\\<^sub>1;\n        t\\<^sub>1 \\<in> value \\<or>\n        (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n            E \\<in> ctxt \\<and>\n            t\\<^sub>1 = E t\\<^sub>0 \\<and>\n            t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0');\n        \\<turnstile> p : T\\<^sub>1 \\<Rightarrow> \\<Delta>;\n        \\<Delta> @ [] \\<turnstile> t\\<^sub>2 : T\\<^sub>2;\n        \\<Delta> @ [] = [] \\<Longrightarrow>\n        t\\<^sub>2 \\<in> value \\<or>\n        (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n            E \\<in> ctxt \\<and>\n            t\\<^sub>2 = E t\\<^sub>0 \\<and>\n            t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')\\<rbrakk>\n       \\<Longrightarrow> (LET p = t\\<^sub>1 IN t\\<^sub>2) \\<in> value \\<or>\n                         (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n                             E \\<in> ctxt \\<and>\n                             (LET p = t\\<^sub>1 IN t\\<^sub>2) =\n                             E t\\<^sub>0 \\<and>\n                             t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')\n 8. \\<And>fs fTs.\n       \\<lbrakk>[] \\<turnstile> fs [:] fTs;\n        (\\<forall>(l, t)\\<in>set fs. t \\<in> value) \\<or>\n        (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n            E \\<in> rctxt \\<and>\n            fs = E t\\<^sub>0 \\<and>\n            t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')\\<rbrakk>\n       \\<Longrightarrow> Rcd fs \\<in> value \\<or>\n                         (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n                             E \\<in> ctxt \\<and>\n                             Rcd fs = E t\\<^sub>0 \\<and>\n                             t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')\n 9. \\<And>t fTs l T.\n       \\<lbrakk>[] \\<turnstile> t : RcdT fTs;\n        t \\<in> value \\<or>\n        (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n            E \\<in> ctxt \\<and>\n            t = E t\\<^sub>0 \\<and>\n            t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0');\n        fTs\\<langle>l\\<rangle>\\<^sub>? = \\<lfloor>T\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> t..l \\<in> value \\<or>\n                         (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n                             E \\<in> ctxt \\<and>\n                             t..l = E t\\<^sub>0 \\<and>\n                             t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')\n 10. [] \\<turnstile>\\<^sub>w\\<^sub>f \\<Longrightarrow>\n     (\\<forall>(l, t)\\<in>set []. t \\<in> value) \\<or>\n     (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n         E \\<in> rctxt \\<and>\n         [] = E t\\<^sub>0 \\<and> t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')\nA total of 11 subgoals...", "thus ?case"], ["proof (prove)\nusing this:\n  [] \\<turnstile>\\<^sub>w\\<^sub>f\n  []\\<langle>i_\\<rangle> = \\<lfloor>VarB U_\\<rfloor>\n  T_ = \\<up>\\<^sub>\\<tau> (Suc i_) 0 U_\n\ngoal (1 subgoal):\n 1. Var i_ \\<in> value \\<or>\n    (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n        E \\<in> ctxt \\<and>\n        Var i_ = E t\\<^sub>0 \\<and>\n        t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')", "by simp"], ["proof (state)\nthis:\n  Var i_ \\<in> value \\<or>\n  (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n      E \\<in> ctxt \\<and>\n      Var i_ = E t\\<^sub>0 \\<and>\n      t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')\n\ngoal (10 subgoals):\n 1. \\<And>T\\<^sub>1 t\\<^sub>2 T\\<^sub>2.\n       [VarB T\\<^sub>1] \\<turnstile> t\\<^sub>2 : T\\<^sub>2 \\<Longrightarrow>\n       (\\<lambda>:T\\<^sub>1. t\\<^sub>2) \\<in> value \\<or>\n       (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n           E \\<in> ctxt \\<and>\n           (\\<lambda>:T\\<^sub>1. t\\<^sub>2) = E t\\<^sub>0 \\<and>\n           t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')\n 2. \\<And>t\\<^sub>1 T\\<^sub>1\\<^sub>1 T\\<^sub>1\\<^sub>2 t\\<^sub>2.\n       \\<lbrakk>[] \\<turnstile> t\\<^sub>1 : T\\<^sub>1\\<^sub>1 \\<rightarrow>\n      T\\<^sub>1\\<^sub>2;\n        t\\<^sub>1 \\<in> value \\<or>\n        (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n            E \\<in> ctxt \\<and>\n            t\\<^sub>1 = E t\\<^sub>0 \\<and>\n            t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0');\n        [] \\<turnstile> t\\<^sub>2 : T\\<^sub>1\\<^sub>1;\n        t\\<^sub>2 \\<in> value \\<or>\n        (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n            E \\<in> ctxt \\<and>\n            t\\<^sub>2 = E t\\<^sub>0 \\<and>\n            t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')\\<rbrakk>\n       \\<Longrightarrow> t\\<^sub>1 \\<bullet> t\\<^sub>2 \\<in> value \\<or>\n                         (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n                             E \\<in> ctxt \\<and>\n                             t\\<^sub>1 \\<bullet> t\\<^sub>2 =\n                             E t\\<^sub>0 \\<and>\n                             t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')\n 3. \\<And>T\\<^sub>1 t\\<^sub>2 T\\<^sub>2.\n       [TVarB\n         T\\<^sub>1] \\<turnstile> t\\<^sub>2 : T\\<^sub>2 \\<Longrightarrow>\n       (\\<lambda><:T\\<^sub>1. t\\<^sub>2) \\<in> value \\<or>\n       (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n           E \\<in> ctxt \\<and>\n           (\\<lambda><:T\\<^sub>1. t\\<^sub>2) = E t\\<^sub>0 \\<and>\n           t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')\n 4. \\<And>t\\<^sub>1 T\\<^sub>1\\<^sub>1 T\\<^sub>1\\<^sub>2 T\\<^sub>2.\n       \\<lbrakk>[] \\<turnstile> t\\<^sub>1 : (\\<forall><:T\\<^sub>1\\<^sub>1.\n          T\\<^sub>1\\<^sub>2);\n        t\\<^sub>1 \\<in> value \\<or>\n        (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n            E \\<in> ctxt \\<and>\n            t\\<^sub>1 = E t\\<^sub>0 \\<and>\n            t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0');\n        [] \\<turnstile> T\\<^sub>2 <: T\\<^sub>1\\<^sub>1\\<rbrakk>\n       \\<Longrightarrow> t\\<^sub>1 \\<bullet>\\<^sub>\\<tau> T\\<^sub>2\n                         \\<in> value \\<or>\n                         (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n                             E \\<in> ctxt \\<and>\n                             t\\<^sub>1 \\<bullet>\\<^sub>\\<tau> T\\<^sub>2 =\n                             E t\\<^sub>0 \\<and>\n                             t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')\n 5. \\<And>t S T.\n       \\<lbrakk>[] \\<turnstile> t : S;\n        t \\<in> value \\<or>\n        (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n            E \\<in> ctxt \\<and>\n            t = E t\\<^sub>0 \\<and>\n            t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0');\n        [] \\<turnstile> S <: T\\<rbrakk>\n       \\<Longrightarrow> t \\<in> value \\<or>\n                         (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n                             E \\<in> ctxt \\<and>\n                             t = E t\\<^sub>0 \\<and>\n                             t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')\n 6. \\<And>t\\<^sub>1 T\\<^sub>1 p \\<Delta> t\\<^sub>2 T\\<^sub>2.\n       \\<lbrakk>[] \\<turnstile> t\\<^sub>1 : T\\<^sub>1;\n        t\\<^sub>1 \\<in> value \\<or>\n        (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n            E \\<in> ctxt \\<and>\n            t\\<^sub>1 = E t\\<^sub>0 \\<and>\n            t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0');\n        \\<turnstile> p : T\\<^sub>1 \\<Rightarrow> \\<Delta>;\n        \\<Delta> @ [] \\<turnstile> t\\<^sub>2 : T\\<^sub>2;\n        \\<Delta> @ [] = [] \\<Longrightarrow>\n        t\\<^sub>2 \\<in> value \\<or>\n        (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n            E \\<in> ctxt \\<and>\n            t\\<^sub>2 = E t\\<^sub>0 \\<and>\n            t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')\\<rbrakk>\n       \\<Longrightarrow> (LET p = t\\<^sub>1 IN t\\<^sub>2) \\<in> value \\<or>\n                         (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n                             E \\<in> ctxt \\<and>\n                             (LET p = t\\<^sub>1 IN t\\<^sub>2) =\n                             E t\\<^sub>0 \\<and>\n                             t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')\n 7. \\<And>fs fTs.\n       \\<lbrakk>[] \\<turnstile> fs [:] fTs;\n        (\\<forall>(l, t)\\<in>set fs. t \\<in> value) \\<or>\n        (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n            E \\<in> rctxt \\<and>\n            fs = E t\\<^sub>0 \\<and>\n            t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')\\<rbrakk>\n       \\<Longrightarrow> Rcd fs \\<in> value \\<or>\n                         (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n                             E \\<in> ctxt \\<and>\n                             Rcd fs = E t\\<^sub>0 \\<and>\n                             t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')\n 8. \\<And>t fTs l T.\n       \\<lbrakk>[] \\<turnstile> t : RcdT fTs;\n        t \\<in> value \\<or>\n        (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n            E \\<in> ctxt \\<and>\n            t = E t\\<^sub>0 \\<and>\n            t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0');\n        fTs\\<langle>l\\<rangle>\\<^sub>? = \\<lfloor>T\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> t..l \\<in> value \\<or>\n                         (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n                             E \\<in> ctxt \\<and>\n                             t..l = E t\\<^sub>0 \\<and>\n                             t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')\n 9. [] \\<turnstile>\\<^sub>w\\<^sub>f \\<Longrightarrow>\n    (\\<forall>(l, t)\\<in>set []. t \\<in> value) \\<or>\n    (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n        E \\<in> rctxt \\<and>\n        [] = E t\\<^sub>0 \\<and> t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')\n 10. \\<And>t T fs fTs l.\n        \\<lbrakk>[] \\<turnstile> t : T;\n         t \\<in> value \\<or>\n         (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n             E \\<in> ctxt \\<and>\n             t = E t\\<^sub>0 \\<and>\n             t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0');\n         [] \\<turnstile> fs [:] fTs;\n         (\\<forall>(l, t)\\<in>set fs. t \\<in> value) \\<or>\n         (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n             E \\<in> rctxt \\<and>\n             fs = E t\\<^sub>0 \\<and>\n             t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0');\n         fs\\<langle>l\\<rangle>\\<^sub>? = \\<bottom>\\<rbrakk>\n        \\<Longrightarrow> (\\<forall>(l, t)\\<in>set ((l, t) \\<Colon> fs).\n                              t \\<in> value) \\<or>\n                          (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n                              E \\<in> rctxt \\<and>\n                              (l, t) \\<Colon> fs = E t\\<^sub>0 \\<and>\n                              t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')", "next"], ["proof (state)\ngoal (10 subgoals):\n 1. \\<And>T\\<^sub>1 t\\<^sub>2 T\\<^sub>2.\n       [VarB T\\<^sub>1] \\<turnstile> t\\<^sub>2 : T\\<^sub>2 \\<Longrightarrow>\n       (\\<lambda>:T\\<^sub>1. t\\<^sub>2) \\<in> value \\<or>\n       (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n           E \\<in> ctxt \\<and>\n           (\\<lambda>:T\\<^sub>1. t\\<^sub>2) = E t\\<^sub>0 \\<and>\n           t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')\n 2. \\<And>t\\<^sub>1 T\\<^sub>1\\<^sub>1 T\\<^sub>1\\<^sub>2 t\\<^sub>2.\n       \\<lbrakk>[] \\<turnstile> t\\<^sub>1 : T\\<^sub>1\\<^sub>1 \\<rightarrow>\n      T\\<^sub>1\\<^sub>2;\n        t\\<^sub>1 \\<in> value \\<or>\n        (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n            E \\<in> ctxt \\<and>\n            t\\<^sub>1 = E t\\<^sub>0 \\<and>\n            t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0');\n        [] \\<turnstile> t\\<^sub>2 : T\\<^sub>1\\<^sub>1;\n        t\\<^sub>2 \\<in> value \\<or>\n        (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n            E \\<in> ctxt \\<and>\n            t\\<^sub>2 = E t\\<^sub>0 \\<and>\n            t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')\\<rbrakk>\n       \\<Longrightarrow> t\\<^sub>1 \\<bullet> t\\<^sub>2 \\<in> value \\<or>\n                         (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n                             E \\<in> ctxt \\<and>\n                             t\\<^sub>1 \\<bullet> t\\<^sub>2 =\n                             E t\\<^sub>0 \\<and>\n                             t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')\n 3. \\<And>T\\<^sub>1 t\\<^sub>2 T\\<^sub>2.\n       [TVarB\n         T\\<^sub>1] \\<turnstile> t\\<^sub>2 : T\\<^sub>2 \\<Longrightarrow>\n       (\\<lambda><:T\\<^sub>1. t\\<^sub>2) \\<in> value \\<or>\n       (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n           E \\<in> ctxt \\<and>\n           (\\<lambda><:T\\<^sub>1. t\\<^sub>2) = E t\\<^sub>0 \\<and>\n           t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')\n 4. \\<And>t\\<^sub>1 T\\<^sub>1\\<^sub>1 T\\<^sub>1\\<^sub>2 T\\<^sub>2.\n       \\<lbrakk>[] \\<turnstile> t\\<^sub>1 : (\\<forall><:T\\<^sub>1\\<^sub>1.\n          T\\<^sub>1\\<^sub>2);\n        t\\<^sub>1 \\<in> value \\<or>\n        (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n            E \\<in> ctxt \\<and>\n            t\\<^sub>1 = E t\\<^sub>0 \\<and>\n            t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0');\n        [] \\<turnstile> T\\<^sub>2 <: T\\<^sub>1\\<^sub>1\\<rbrakk>\n       \\<Longrightarrow> t\\<^sub>1 \\<bullet>\\<^sub>\\<tau> T\\<^sub>2\n                         \\<in> value \\<or>\n                         (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n                             E \\<in> ctxt \\<and>\n                             t\\<^sub>1 \\<bullet>\\<^sub>\\<tau> T\\<^sub>2 =\n                             E t\\<^sub>0 \\<and>\n                             t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')\n 5. \\<And>t S T.\n       \\<lbrakk>[] \\<turnstile> t : S;\n        t \\<in> value \\<or>\n        (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n            E \\<in> ctxt \\<and>\n            t = E t\\<^sub>0 \\<and>\n            t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0');\n        [] \\<turnstile> S <: T\\<rbrakk>\n       \\<Longrightarrow> t \\<in> value \\<or>\n                         (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n                             E \\<in> ctxt \\<and>\n                             t = E t\\<^sub>0 \\<and>\n                             t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')\n 6. \\<And>t\\<^sub>1 T\\<^sub>1 p \\<Delta> t\\<^sub>2 T\\<^sub>2.\n       \\<lbrakk>[] \\<turnstile> t\\<^sub>1 : T\\<^sub>1;\n        t\\<^sub>1 \\<in> value \\<or>\n        (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n            E \\<in> ctxt \\<and>\n            t\\<^sub>1 = E t\\<^sub>0 \\<and>\n            t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0');\n        \\<turnstile> p : T\\<^sub>1 \\<Rightarrow> \\<Delta>;\n        \\<Delta> @ [] \\<turnstile> t\\<^sub>2 : T\\<^sub>2;\n        \\<Delta> @ [] = [] \\<Longrightarrow>\n        t\\<^sub>2 \\<in> value \\<or>\n        (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n            E \\<in> ctxt \\<and>\n            t\\<^sub>2 = E t\\<^sub>0 \\<and>\n            t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')\\<rbrakk>\n       \\<Longrightarrow> (LET p = t\\<^sub>1 IN t\\<^sub>2) \\<in> value \\<or>\n                         (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n                             E \\<in> ctxt \\<and>\n                             (LET p = t\\<^sub>1 IN t\\<^sub>2) =\n                             E t\\<^sub>0 \\<and>\n                             t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')\n 7. \\<And>fs fTs.\n       \\<lbrakk>[] \\<turnstile> fs [:] fTs;\n        (\\<forall>(l, t)\\<in>set fs. t \\<in> value) \\<or>\n        (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n            E \\<in> rctxt \\<and>\n            fs = E t\\<^sub>0 \\<and>\n            t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')\\<rbrakk>\n       \\<Longrightarrow> Rcd fs \\<in> value \\<or>\n                         (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n                             E \\<in> ctxt \\<and>\n                             Rcd fs = E t\\<^sub>0 \\<and>\n                             t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')\n 8. \\<And>t fTs l T.\n       \\<lbrakk>[] \\<turnstile> t : RcdT fTs;\n        t \\<in> value \\<or>\n        (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n            E \\<in> ctxt \\<and>\n            t = E t\\<^sub>0 \\<and>\n            t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0');\n        fTs\\<langle>l\\<rangle>\\<^sub>? = \\<lfloor>T\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> t..l \\<in> value \\<or>\n                         (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n                             E \\<in> ctxt \\<and>\n                             t..l = E t\\<^sub>0 \\<and>\n                             t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')\n 9. [] \\<turnstile>\\<^sub>w\\<^sub>f \\<Longrightarrow>\n    (\\<forall>(l, t)\\<in>set []. t \\<in> value) \\<or>\n    (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n        E \\<in> rctxt \\<and>\n        [] = E t\\<^sub>0 \\<and> t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')\n 10. \\<And>t T fs fTs l.\n        \\<lbrakk>[] \\<turnstile> t : T;\n         t \\<in> value \\<or>\n         (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n             E \\<in> ctxt \\<and>\n             t = E t\\<^sub>0 \\<and>\n             t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0');\n         [] \\<turnstile> fs [:] fTs;\n         (\\<forall>(l, t)\\<in>set fs. t \\<in> value) \\<or>\n         (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n             E \\<in> rctxt \\<and>\n             fs = E t\\<^sub>0 \\<and>\n             t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0');\n         fs\\<langle>l\\<rangle>\\<^sub>? = \\<bottom>\\<rbrakk>\n        \\<Longrightarrow> (\\<forall>(l, t)\\<in>set ((l, t) \\<Colon> fs).\n                              t \\<in> value) \\<or>\n                          (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n                              E \\<in> rctxt \\<and>\n                              (l, t) \\<Colon> fs = E t\\<^sub>0 \\<and>\n                              t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')", "case T_Abs"], ["proof (state)\nthis:\n  [VarB T\\<^sub>1_] \\<turnstile> t\\<^sub>2_ : T\\<^sub>2_\n\ngoal (10 subgoals):\n 1. \\<And>T\\<^sub>1 t\\<^sub>2 T\\<^sub>2.\n       [VarB T\\<^sub>1] \\<turnstile> t\\<^sub>2 : T\\<^sub>2 \\<Longrightarrow>\n       (\\<lambda>:T\\<^sub>1. t\\<^sub>2) \\<in> value \\<or>\n       (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n           E \\<in> ctxt \\<and>\n           (\\<lambda>:T\\<^sub>1. t\\<^sub>2) = E t\\<^sub>0 \\<and>\n           t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')\n 2. \\<And>t\\<^sub>1 T\\<^sub>1\\<^sub>1 T\\<^sub>1\\<^sub>2 t\\<^sub>2.\n       \\<lbrakk>[] \\<turnstile> t\\<^sub>1 : T\\<^sub>1\\<^sub>1 \\<rightarrow>\n      T\\<^sub>1\\<^sub>2;\n        t\\<^sub>1 \\<in> value \\<or>\n        (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n            E \\<in> ctxt \\<and>\n            t\\<^sub>1 = E t\\<^sub>0 \\<and>\n            t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0');\n        [] \\<turnstile> t\\<^sub>2 : T\\<^sub>1\\<^sub>1;\n        t\\<^sub>2 \\<in> value \\<or>\n        (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n            E \\<in> ctxt \\<and>\n            t\\<^sub>2 = E t\\<^sub>0 \\<and>\n            t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')\\<rbrakk>\n       \\<Longrightarrow> t\\<^sub>1 \\<bullet> t\\<^sub>2 \\<in> value \\<or>\n                         (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n                             E \\<in> ctxt \\<and>\n                             t\\<^sub>1 \\<bullet> t\\<^sub>2 =\n                             E t\\<^sub>0 \\<and>\n                             t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')\n 3. \\<And>T\\<^sub>1 t\\<^sub>2 T\\<^sub>2.\n       [TVarB\n         T\\<^sub>1] \\<turnstile> t\\<^sub>2 : T\\<^sub>2 \\<Longrightarrow>\n       (\\<lambda><:T\\<^sub>1. t\\<^sub>2) \\<in> value \\<or>\n       (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n           E \\<in> ctxt \\<and>\n           (\\<lambda><:T\\<^sub>1. t\\<^sub>2) = E t\\<^sub>0 \\<and>\n           t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')\n 4. \\<And>t\\<^sub>1 T\\<^sub>1\\<^sub>1 T\\<^sub>1\\<^sub>2 T\\<^sub>2.\n       \\<lbrakk>[] \\<turnstile> t\\<^sub>1 : (\\<forall><:T\\<^sub>1\\<^sub>1.\n          T\\<^sub>1\\<^sub>2);\n        t\\<^sub>1 \\<in> value \\<or>\n        (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n            E \\<in> ctxt \\<and>\n            t\\<^sub>1 = E t\\<^sub>0 \\<and>\n            t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0');\n        [] \\<turnstile> T\\<^sub>2 <: T\\<^sub>1\\<^sub>1\\<rbrakk>\n       \\<Longrightarrow> t\\<^sub>1 \\<bullet>\\<^sub>\\<tau> T\\<^sub>2\n                         \\<in> value \\<or>\n                         (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n                             E \\<in> ctxt \\<and>\n                             t\\<^sub>1 \\<bullet>\\<^sub>\\<tau> T\\<^sub>2 =\n                             E t\\<^sub>0 \\<and>\n                             t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')\n 5. \\<And>t S T.\n       \\<lbrakk>[] \\<turnstile> t : S;\n        t \\<in> value \\<or>\n        (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n            E \\<in> ctxt \\<and>\n            t = E t\\<^sub>0 \\<and>\n            t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0');\n        [] \\<turnstile> S <: T\\<rbrakk>\n       \\<Longrightarrow> t \\<in> value \\<or>\n                         (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n                             E \\<in> ctxt \\<and>\n                             t = E t\\<^sub>0 \\<and>\n                             t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')\n 6. \\<And>t\\<^sub>1 T\\<^sub>1 p \\<Delta> t\\<^sub>2 T\\<^sub>2.\n       \\<lbrakk>[] \\<turnstile> t\\<^sub>1 : T\\<^sub>1;\n        t\\<^sub>1 \\<in> value \\<or>\n        (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n            E \\<in> ctxt \\<and>\n            t\\<^sub>1 = E t\\<^sub>0 \\<and>\n            t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0');\n        \\<turnstile> p : T\\<^sub>1 \\<Rightarrow> \\<Delta>;\n        \\<Delta> @ [] \\<turnstile> t\\<^sub>2 : T\\<^sub>2;\n        \\<Delta> @ [] = [] \\<Longrightarrow>\n        t\\<^sub>2 \\<in> value \\<or>\n        (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n            E \\<in> ctxt \\<and>\n            t\\<^sub>2 = E t\\<^sub>0 \\<and>\n            t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')\\<rbrakk>\n       \\<Longrightarrow> (LET p = t\\<^sub>1 IN t\\<^sub>2) \\<in> value \\<or>\n                         (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n                             E \\<in> ctxt \\<and>\n                             (LET p = t\\<^sub>1 IN t\\<^sub>2) =\n                             E t\\<^sub>0 \\<and>\n                             t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')\n 7. \\<And>fs fTs.\n       \\<lbrakk>[] \\<turnstile> fs [:] fTs;\n        (\\<forall>(l, t)\\<in>set fs. t \\<in> value) \\<or>\n        (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n            E \\<in> rctxt \\<and>\n            fs = E t\\<^sub>0 \\<and>\n            t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')\\<rbrakk>\n       \\<Longrightarrow> Rcd fs \\<in> value \\<or>\n                         (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n                             E \\<in> ctxt \\<and>\n                             Rcd fs = E t\\<^sub>0 \\<and>\n                             t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')\n 8. \\<And>t fTs l T.\n       \\<lbrakk>[] \\<turnstile> t : RcdT fTs;\n        t \\<in> value \\<or>\n        (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n            E \\<in> ctxt \\<and>\n            t = E t\\<^sub>0 \\<and>\n            t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0');\n        fTs\\<langle>l\\<rangle>\\<^sub>? = \\<lfloor>T\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> t..l \\<in> value \\<or>\n                         (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n                             E \\<in> ctxt \\<and>\n                             t..l = E t\\<^sub>0 \\<and>\n                             t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')\n 9. [] \\<turnstile>\\<^sub>w\\<^sub>f \\<Longrightarrow>\n    (\\<forall>(l, t)\\<in>set []. t \\<in> value) \\<or>\n    (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n        E \\<in> rctxt \\<and>\n        [] = E t\\<^sub>0 \\<and> t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')\n 10. \\<And>t T fs fTs l.\n        \\<lbrakk>[] \\<turnstile> t : T;\n         t \\<in> value \\<or>\n         (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n             E \\<in> ctxt \\<and>\n             t = E t\\<^sub>0 \\<and>\n             t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0');\n         [] \\<turnstile> fs [:] fTs;\n         (\\<forall>(l, t)\\<in>set fs. t \\<in> value) \\<or>\n         (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n             E \\<in> rctxt \\<and>\n             fs = E t\\<^sub>0 \\<and>\n             t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0');\n         fs\\<langle>l\\<rangle>\\<^sub>? = \\<bottom>\\<rbrakk>\n        \\<Longrightarrow> (\\<forall>(l, t)\\<in>set ((l, t) \\<Colon> fs).\n                              t \\<in> value) \\<or>\n                          (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n                              E \\<in> rctxt \\<and>\n                              (l, t) \\<Colon> fs = E t\\<^sub>0 \\<and>\n                              t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')", "from value.Abs"], ["proof (chain)\npicking this:\n  (\\<lambda>:?T. ?t) \\<in> value", "show ?case"], ["proof (prove)\nusing this:\n  (\\<lambda>:?T. ?t) \\<in> value\n\ngoal (1 subgoal):\n 1. (\\<lambda>:T\\<^sub>1_. t\\<^sub>2_) \\<in> value \\<or>\n    (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n        E \\<in> ctxt \\<and>\n        (\\<lambda>:T\\<^sub>1_. t\\<^sub>2_) = E t\\<^sub>0 \\<and>\n        t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')", ".."], ["proof (state)\nthis:\n  (\\<lambda>:T\\<^sub>1_. t\\<^sub>2_) \\<in> value \\<or>\n  (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n      E \\<in> ctxt \\<and>\n      (\\<lambda>:T\\<^sub>1_. t\\<^sub>2_) = E t\\<^sub>0 \\<and>\n      t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')\n\ngoal (9 subgoals):\n 1. \\<And>t\\<^sub>1 T\\<^sub>1\\<^sub>1 T\\<^sub>1\\<^sub>2 t\\<^sub>2.\n       \\<lbrakk>[] \\<turnstile> t\\<^sub>1 : T\\<^sub>1\\<^sub>1 \\<rightarrow>\n      T\\<^sub>1\\<^sub>2;\n        t\\<^sub>1 \\<in> value \\<or>\n        (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n            E \\<in> ctxt \\<and>\n            t\\<^sub>1 = E t\\<^sub>0 \\<and>\n            t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0');\n        [] \\<turnstile> t\\<^sub>2 : T\\<^sub>1\\<^sub>1;\n        t\\<^sub>2 \\<in> value \\<or>\n        (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n            E \\<in> ctxt \\<and>\n            t\\<^sub>2 = E t\\<^sub>0 \\<and>\n            t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')\\<rbrakk>\n       \\<Longrightarrow> t\\<^sub>1 \\<bullet> t\\<^sub>2 \\<in> value \\<or>\n                         (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n                             E \\<in> ctxt \\<and>\n                             t\\<^sub>1 \\<bullet> t\\<^sub>2 =\n                             E t\\<^sub>0 \\<and>\n                             t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')\n 2. \\<And>T\\<^sub>1 t\\<^sub>2 T\\<^sub>2.\n       [TVarB\n         T\\<^sub>1] \\<turnstile> t\\<^sub>2 : T\\<^sub>2 \\<Longrightarrow>\n       (\\<lambda><:T\\<^sub>1. t\\<^sub>2) \\<in> value \\<or>\n       (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n           E \\<in> ctxt \\<and>\n           (\\<lambda><:T\\<^sub>1. t\\<^sub>2) = E t\\<^sub>0 \\<and>\n           t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')\n 3. \\<And>t\\<^sub>1 T\\<^sub>1\\<^sub>1 T\\<^sub>1\\<^sub>2 T\\<^sub>2.\n       \\<lbrakk>[] \\<turnstile> t\\<^sub>1 : (\\<forall><:T\\<^sub>1\\<^sub>1.\n          T\\<^sub>1\\<^sub>2);\n        t\\<^sub>1 \\<in> value \\<or>\n        (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n            E \\<in> ctxt \\<and>\n            t\\<^sub>1 = E t\\<^sub>0 \\<and>\n            t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0');\n        [] \\<turnstile> T\\<^sub>2 <: T\\<^sub>1\\<^sub>1\\<rbrakk>\n       \\<Longrightarrow> t\\<^sub>1 \\<bullet>\\<^sub>\\<tau> T\\<^sub>2\n                         \\<in> value \\<or>\n                         (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n                             E \\<in> ctxt \\<and>\n                             t\\<^sub>1 \\<bullet>\\<^sub>\\<tau> T\\<^sub>2 =\n                             E t\\<^sub>0 \\<and>\n                             t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')\n 4. \\<And>t S T.\n       \\<lbrakk>[] \\<turnstile> t : S;\n        t \\<in> value \\<or>\n        (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n            E \\<in> ctxt \\<and>\n            t = E t\\<^sub>0 \\<and>\n            t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0');\n        [] \\<turnstile> S <: T\\<rbrakk>\n       \\<Longrightarrow> t \\<in> value \\<or>\n                         (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n                             E \\<in> ctxt \\<and>\n                             t = E t\\<^sub>0 \\<and>\n                             t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')\n 5. \\<And>t\\<^sub>1 T\\<^sub>1 p \\<Delta> t\\<^sub>2 T\\<^sub>2.\n       \\<lbrakk>[] \\<turnstile> t\\<^sub>1 : T\\<^sub>1;\n        t\\<^sub>1 \\<in> value \\<or>\n        (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n            E \\<in> ctxt \\<and>\n            t\\<^sub>1 = E t\\<^sub>0 \\<and>\n            t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0');\n        \\<turnstile> p : T\\<^sub>1 \\<Rightarrow> \\<Delta>;\n        \\<Delta> @ [] \\<turnstile> t\\<^sub>2 : T\\<^sub>2;\n        \\<Delta> @ [] = [] \\<Longrightarrow>\n        t\\<^sub>2 \\<in> value \\<or>\n        (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n            E \\<in> ctxt \\<and>\n            t\\<^sub>2 = E t\\<^sub>0 \\<and>\n            t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')\\<rbrakk>\n       \\<Longrightarrow> (LET p = t\\<^sub>1 IN t\\<^sub>2) \\<in> value \\<or>\n                         (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n                             E \\<in> ctxt \\<and>\n                             (LET p = t\\<^sub>1 IN t\\<^sub>2) =\n                             E t\\<^sub>0 \\<and>\n                             t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')\n 6. \\<And>fs fTs.\n       \\<lbrakk>[] \\<turnstile> fs [:] fTs;\n        (\\<forall>(l, t)\\<in>set fs. t \\<in> value) \\<or>\n        (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n            E \\<in> rctxt \\<and>\n            fs = E t\\<^sub>0 \\<and>\n            t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')\\<rbrakk>\n       \\<Longrightarrow> Rcd fs \\<in> value \\<or>\n                         (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n                             E \\<in> ctxt \\<and>\n                             Rcd fs = E t\\<^sub>0 \\<and>\n                             t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')\n 7. \\<And>t fTs l T.\n       \\<lbrakk>[] \\<turnstile> t : RcdT fTs;\n        t \\<in> value \\<or>\n        (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n            E \\<in> ctxt \\<and>\n            t = E t\\<^sub>0 \\<and>\n            t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0');\n        fTs\\<langle>l\\<rangle>\\<^sub>? = \\<lfloor>T\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> t..l \\<in> value \\<or>\n                         (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n                             E \\<in> ctxt \\<and>\n                             t..l = E t\\<^sub>0 \\<and>\n                             t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')\n 8. [] \\<turnstile>\\<^sub>w\\<^sub>f \\<Longrightarrow>\n    (\\<forall>(l, t)\\<in>set []. t \\<in> value) \\<or>\n    (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n        E \\<in> rctxt \\<and>\n        [] = E t\\<^sub>0 \\<and> t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')\n 9. \\<And>t T fs fTs l.\n       \\<lbrakk>[] \\<turnstile> t : T;\n        t \\<in> value \\<or>\n        (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n            E \\<in> ctxt \\<and>\n            t = E t\\<^sub>0 \\<and>\n            t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0');\n        [] \\<turnstile> fs [:] fTs;\n        (\\<forall>(l, t)\\<in>set fs. t \\<in> value) \\<or>\n        (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n            E \\<in> rctxt \\<and>\n            fs = E t\\<^sub>0 \\<and>\n            t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0');\n        fs\\<langle>l\\<rangle>\\<^sub>? = \\<bottom>\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>(l, t)\\<in>set ((l, t) \\<Colon> fs).\n                             t \\<in> value) \\<or>\n                         (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n                             E \\<in> rctxt \\<and>\n                             (l, t) \\<Colon> fs = E t\\<^sub>0 \\<and>\n                             t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')", "next"], ["proof (state)\ngoal (9 subgoals):\n 1. \\<And>t\\<^sub>1 T\\<^sub>1\\<^sub>1 T\\<^sub>1\\<^sub>2 t\\<^sub>2.\n       \\<lbrakk>[] \\<turnstile> t\\<^sub>1 : T\\<^sub>1\\<^sub>1 \\<rightarrow>\n      T\\<^sub>1\\<^sub>2;\n        t\\<^sub>1 \\<in> value \\<or>\n        (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n            E \\<in> ctxt \\<and>\n            t\\<^sub>1 = E t\\<^sub>0 \\<and>\n            t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0');\n        [] \\<turnstile> t\\<^sub>2 : T\\<^sub>1\\<^sub>1;\n        t\\<^sub>2 \\<in> value \\<or>\n        (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n            E \\<in> ctxt \\<and>\n            t\\<^sub>2 = E t\\<^sub>0 \\<and>\n            t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')\\<rbrakk>\n       \\<Longrightarrow> t\\<^sub>1 \\<bullet> t\\<^sub>2 \\<in> value \\<or>\n                         (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n                             E \\<in> ctxt \\<and>\n                             t\\<^sub>1 \\<bullet> t\\<^sub>2 =\n                             E t\\<^sub>0 \\<and>\n                             t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')\n 2. \\<And>T\\<^sub>1 t\\<^sub>2 T\\<^sub>2.\n       [TVarB\n         T\\<^sub>1] \\<turnstile> t\\<^sub>2 : T\\<^sub>2 \\<Longrightarrow>\n       (\\<lambda><:T\\<^sub>1. t\\<^sub>2) \\<in> value \\<or>\n       (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n           E \\<in> ctxt \\<and>\n           (\\<lambda><:T\\<^sub>1. t\\<^sub>2) = E t\\<^sub>0 \\<and>\n           t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')\n 3. \\<And>t\\<^sub>1 T\\<^sub>1\\<^sub>1 T\\<^sub>1\\<^sub>2 T\\<^sub>2.\n       \\<lbrakk>[] \\<turnstile> t\\<^sub>1 : (\\<forall><:T\\<^sub>1\\<^sub>1.\n          T\\<^sub>1\\<^sub>2);\n        t\\<^sub>1 \\<in> value \\<or>\n        (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n            E \\<in> ctxt \\<and>\n            t\\<^sub>1 = E t\\<^sub>0 \\<and>\n            t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0');\n        [] \\<turnstile> T\\<^sub>2 <: T\\<^sub>1\\<^sub>1\\<rbrakk>\n       \\<Longrightarrow> t\\<^sub>1 \\<bullet>\\<^sub>\\<tau> T\\<^sub>2\n                         \\<in> value \\<or>\n                         (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n                             E \\<in> ctxt \\<and>\n                             t\\<^sub>1 \\<bullet>\\<^sub>\\<tau> T\\<^sub>2 =\n                             E t\\<^sub>0 \\<and>\n                             t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')\n 4. \\<And>t S T.\n       \\<lbrakk>[] \\<turnstile> t : S;\n        t \\<in> value \\<or>\n        (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n            E \\<in> ctxt \\<and>\n            t = E t\\<^sub>0 \\<and>\n            t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0');\n        [] \\<turnstile> S <: T\\<rbrakk>\n       \\<Longrightarrow> t \\<in> value \\<or>\n                         (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n                             E \\<in> ctxt \\<and>\n                             t = E t\\<^sub>0 \\<and>\n                             t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')\n 5. \\<And>t\\<^sub>1 T\\<^sub>1 p \\<Delta> t\\<^sub>2 T\\<^sub>2.\n       \\<lbrakk>[] \\<turnstile> t\\<^sub>1 : T\\<^sub>1;\n        t\\<^sub>1 \\<in> value \\<or>\n        (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n            E \\<in> ctxt \\<and>\n            t\\<^sub>1 = E t\\<^sub>0 \\<and>\n            t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0');\n        \\<turnstile> p : T\\<^sub>1 \\<Rightarrow> \\<Delta>;\n        \\<Delta> @ [] \\<turnstile> t\\<^sub>2 : T\\<^sub>2;\n        \\<Delta> @ [] = [] \\<Longrightarrow>\n        t\\<^sub>2 \\<in> value \\<or>\n        (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n            E \\<in> ctxt \\<and>\n            t\\<^sub>2 = E t\\<^sub>0 \\<and>\n            t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')\\<rbrakk>\n       \\<Longrightarrow> (LET p = t\\<^sub>1 IN t\\<^sub>2) \\<in> value \\<or>\n                         (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n                             E \\<in> ctxt \\<and>\n                             (LET p = t\\<^sub>1 IN t\\<^sub>2) =\n                             E t\\<^sub>0 \\<and>\n                             t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')\n 6. \\<And>fs fTs.\n       \\<lbrakk>[] \\<turnstile> fs [:] fTs;\n        (\\<forall>(l, t)\\<in>set fs. t \\<in> value) \\<or>\n        (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n            E \\<in> rctxt \\<and>\n            fs = E t\\<^sub>0 \\<and>\n            t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')\\<rbrakk>\n       \\<Longrightarrow> Rcd fs \\<in> value \\<or>\n                         (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n                             E \\<in> ctxt \\<and>\n                             Rcd fs = E t\\<^sub>0 \\<and>\n                             t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')\n 7. \\<And>t fTs l T.\n       \\<lbrakk>[] \\<turnstile> t : RcdT fTs;\n        t \\<in> value \\<or>\n        (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n            E \\<in> ctxt \\<and>\n            t = E t\\<^sub>0 \\<and>\n            t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0');\n        fTs\\<langle>l\\<rangle>\\<^sub>? = \\<lfloor>T\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> t..l \\<in> value \\<or>\n                         (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n                             E \\<in> ctxt \\<and>\n                             t..l = E t\\<^sub>0 \\<and>\n                             t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')\n 8. [] \\<turnstile>\\<^sub>w\\<^sub>f \\<Longrightarrow>\n    (\\<forall>(l, t)\\<in>set []. t \\<in> value) \\<or>\n    (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n        E \\<in> rctxt \\<and>\n        [] = E t\\<^sub>0 \\<and> t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')\n 9. \\<And>t T fs fTs l.\n       \\<lbrakk>[] \\<turnstile> t : T;\n        t \\<in> value \\<or>\n        (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n            E \\<in> ctxt \\<and>\n            t = E t\\<^sub>0 \\<and>\n            t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0');\n        [] \\<turnstile> fs [:] fTs;\n        (\\<forall>(l, t)\\<in>set fs. t \\<in> value) \\<or>\n        (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n            E \\<in> rctxt \\<and>\n            fs = E t\\<^sub>0 \\<and>\n            t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0');\n        fs\\<langle>l\\<rangle>\\<^sub>? = \\<bottom>\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>(l, t)\\<in>set ((l, t) \\<Colon> fs).\n                             t \\<in> value) \\<or>\n                         (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n                             E \\<in> rctxt \\<and>\n                             (l, t) \\<Colon> fs = E t\\<^sub>0 \\<and>\n                             t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')", "case (T_App t\\<^sub>1 T\\<^sub>1\\<^sub>1 T\\<^sub>1\\<^sub>2 t\\<^sub>2)"], ["proof (state)\nthis:\n  [] \\<turnstile> t\\<^sub>1 : T\\<^sub>1\\<^sub>1 \\<rightarrow>\n                              T\\<^sub>1\\<^sub>2\n  t\\<^sub>1 \\<in> value \\<or>\n  (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n      E \\<in> ctxt \\<and>\n      t\\<^sub>1 = E t\\<^sub>0 \\<and>\n      t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')\n  [] \\<turnstile> t\\<^sub>2 : T\\<^sub>1\\<^sub>1\n  t\\<^sub>2 \\<in> value \\<or>\n  (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n      E \\<in> ctxt \\<and>\n      t\\<^sub>2 = E t\\<^sub>0 \\<and>\n      t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')\n\ngoal (9 subgoals):\n 1. \\<And>t\\<^sub>1 T\\<^sub>1\\<^sub>1 T\\<^sub>1\\<^sub>2 t\\<^sub>2.\n       \\<lbrakk>[] \\<turnstile> t\\<^sub>1 : T\\<^sub>1\\<^sub>1 \\<rightarrow>\n      T\\<^sub>1\\<^sub>2;\n        t\\<^sub>1 \\<in> value \\<or>\n        (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n            E \\<in> ctxt \\<and>\n            t\\<^sub>1 = E t\\<^sub>0 \\<and>\n            t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0');\n        [] \\<turnstile> t\\<^sub>2 : T\\<^sub>1\\<^sub>1;\n        t\\<^sub>2 \\<in> value \\<or>\n        (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n            E \\<in> ctxt \\<and>\n            t\\<^sub>2 = E t\\<^sub>0 \\<and>\n            t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')\\<rbrakk>\n       \\<Longrightarrow> t\\<^sub>1 \\<bullet> t\\<^sub>2 \\<in> value \\<or>\n                         (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n                             E \\<in> ctxt \\<and>\n                             t\\<^sub>1 \\<bullet> t\\<^sub>2 =\n                             E t\\<^sub>0 \\<and>\n                             t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')\n 2. \\<And>T\\<^sub>1 t\\<^sub>2 T\\<^sub>2.\n       [TVarB\n         T\\<^sub>1] \\<turnstile> t\\<^sub>2 : T\\<^sub>2 \\<Longrightarrow>\n       (\\<lambda><:T\\<^sub>1. t\\<^sub>2) \\<in> value \\<or>\n       (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n           E \\<in> ctxt \\<and>\n           (\\<lambda><:T\\<^sub>1. t\\<^sub>2) = E t\\<^sub>0 \\<and>\n           t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')\n 3. \\<And>t\\<^sub>1 T\\<^sub>1\\<^sub>1 T\\<^sub>1\\<^sub>2 T\\<^sub>2.\n       \\<lbrakk>[] \\<turnstile> t\\<^sub>1 : (\\<forall><:T\\<^sub>1\\<^sub>1.\n          T\\<^sub>1\\<^sub>2);\n        t\\<^sub>1 \\<in> value \\<or>\n        (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n            E \\<in> ctxt \\<and>\n            t\\<^sub>1 = E t\\<^sub>0 \\<and>\n            t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0');\n        [] \\<turnstile> T\\<^sub>2 <: T\\<^sub>1\\<^sub>1\\<rbrakk>\n       \\<Longrightarrow> t\\<^sub>1 \\<bullet>\\<^sub>\\<tau> T\\<^sub>2\n                         \\<in> value \\<or>\n                         (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n                             E \\<in> ctxt \\<and>\n                             t\\<^sub>1 \\<bullet>\\<^sub>\\<tau> T\\<^sub>2 =\n                             E t\\<^sub>0 \\<and>\n                             t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')\n 4. \\<And>t S T.\n       \\<lbrakk>[] \\<turnstile> t : S;\n        t \\<in> value \\<or>\n        (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n            E \\<in> ctxt \\<and>\n            t = E t\\<^sub>0 \\<and>\n            t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0');\n        [] \\<turnstile> S <: T\\<rbrakk>\n       \\<Longrightarrow> t \\<in> value \\<or>\n                         (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n                             E \\<in> ctxt \\<and>\n                             t = E t\\<^sub>0 \\<and>\n                             t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')\n 5. \\<And>t\\<^sub>1 T\\<^sub>1 p \\<Delta> t\\<^sub>2 T\\<^sub>2.\n       \\<lbrakk>[] \\<turnstile> t\\<^sub>1 : T\\<^sub>1;\n        t\\<^sub>1 \\<in> value \\<or>\n        (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n            E \\<in> ctxt \\<and>\n            t\\<^sub>1 = E t\\<^sub>0 \\<and>\n            t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0');\n        \\<turnstile> p : T\\<^sub>1 \\<Rightarrow> \\<Delta>;\n        \\<Delta> @ [] \\<turnstile> t\\<^sub>2 : T\\<^sub>2;\n        \\<Delta> @ [] = [] \\<Longrightarrow>\n        t\\<^sub>2 \\<in> value \\<or>\n        (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n            E \\<in> ctxt \\<and>\n            t\\<^sub>2 = E t\\<^sub>0 \\<and>\n            t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')\\<rbrakk>\n       \\<Longrightarrow> (LET p = t\\<^sub>1 IN t\\<^sub>2) \\<in> value \\<or>\n                         (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n                             E \\<in> ctxt \\<and>\n                             (LET p = t\\<^sub>1 IN t\\<^sub>2) =\n                             E t\\<^sub>0 \\<and>\n                             t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')\n 6. \\<And>fs fTs.\n       \\<lbrakk>[] \\<turnstile> fs [:] fTs;\n        (\\<forall>(l, t)\\<in>set fs. t \\<in> value) \\<or>\n        (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n            E \\<in> rctxt \\<and>\n            fs = E t\\<^sub>0 \\<and>\n            t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')\\<rbrakk>\n       \\<Longrightarrow> Rcd fs \\<in> value \\<or>\n                         (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n                             E \\<in> ctxt \\<and>\n                             Rcd fs = E t\\<^sub>0 \\<and>\n                             t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')\n 7. \\<And>t fTs l T.\n       \\<lbrakk>[] \\<turnstile> t : RcdT fTs;\n        t \\<in> value \\<or>\n        (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n            E \\<in> ctxt \\<and>\n            t = E t\\<^sub>0 \\<and>\n            t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0');\n        fTs\\<langle>l\\<rangle>\\<^sub>? = \\<lfloor>T\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> t..l \\<in> value \\<or>\n                         (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n                             E \\<in> ctxt \\<and>\n                             t..l = E t\\<^sub>0 \\<and>\n                             t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')\n 8. [] \\<turnstile>\\<^sub>w\\<^sub>f \\<Longrightarrow>\n    (\\<forall>(l, t)\\<in>set []. t \\<in> value) \\<or>\n    (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n        E \\<in> rctxt \\<and>\n        [] = E t\\<^sub>0 \\<and> t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')\n 9. \\<And>t T fs fTs l.\n       \\<lbrakk>[] \\<turnstile> t : T;\n        t \\<in> value \\<or>\n        (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n            E \\<in> ctxt \\<and>\n            t = E t\\<^sub>0 \\<and>\n            t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0');\n        [] \\<turnstile> fs [:] fTs;\n        (\\<forall>(l, t)\\<in>set fs. t \\<in> value) \\<or>\n        (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n            E \\<in> rctxt \\<and>\n            fs = E t\\<^sub>0 \\<and>\n            t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0');\n        fs\\<langle>l\\<rangle>\\<^sub>? = \\<bottom>\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>(l, t)\\<in>set ((l, t) \\<Colon> fs).\n                             t \\<in> value) \\<or>\n                         (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n                             E \\<in> rctxt \\<and>\n                             (l, t) \\<Colon> fs = E t\\<^sub>0 \\<and>\n                             t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')", "from \\<open>t\\<^sub>1 \\<in> value \\<or> (\\<exists>E t\\<^sub>0 t\\<^sub>0'. E \\<in> ctxt \\<and> t\\<^sub>1 = E t\\<^sub>0 \\<and> t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')\\<close>"], ["proof (chain)\npicking this:\n  t\\<^sub>1 \\<in> value \\<or>\n  (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n      E \\<in> ctxt \\<and>\n      t\\<^sub>1 = E t\\<^sub>0 \\<and>\n      t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')", "show ?case"], ["proof (prove)\nusing this:\n  t\\<^sub>1 \\<in> value \\<or>\n  (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n      E \\<in> ctxt \\<and>\n      t\\<^sub>1 = E t\\<^sub>0 \\<and>\n      t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')\n\ngoal (1 subgoal):\n 1. t\\<^sub>1 \\<bullet> t\\<^sub>2 \\<in> value \\<or>\n    (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n        E \\<in> ctxt \\<and>\n        t\\<^sub>1 \\<bullet> t\\<^sub>2 = E t\\<^sub>0 \\<and>\n        t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')", "proof"], ["proof (state)\ngoal (2 subgoals):\n 1. t\\<^sub>1 \\<in> value \\<Longrightarrow>\n    t\\<^sub>1 \\<bullet> t\\<^sub>2 \\<in> value \\<or>\n    (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n        E \\<in> ctxt \\<and>\n        t\\<^sub>1 \\<bullet> t\\<^sub>2 = E t\\<^sub>0 \\<and>\n        t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')\n 2. \\<exists>E t\\<^sub>0 t\\<^sub>0'.\n       E \\<in> ctxt \\<and>\n       t\\<^sub>1 = E t\\<^sub>0 \\<and>\n       t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0' \\<Longrightarrow>\n    t\\<^sub>1 \\<bullet> t\\<^sub>2 \\<in> value \\<or>\n    (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n        E \\<in> ctxt \\<and>\n        t\\<^sub>1 \\<bullet> t\\<^sub>2 = E t\\<^sub>0 \\<and>\n        t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')", "assume t\\<^sub>1_val: \"t\\<^sub>1 \\<in> value\""], ["proof (state)\nthis:\n  t\\<^sub>1 \\<in> value\n\ngoal (2 subgoals):\n 1. t\\<^sub>1 \\<in> value \\<Longrightarrow>\n    t\\<^sub>1 \\<bullet> t\\<^sub>2 \\<in> value \\<or>\n    (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n        E \\<in> ctxt \\<and>\n        t\\<^sub>1 \\<bullet> t\\<^sub>2 = E t\\<^sub>0 \\<and>\n        t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')\n 2. \\<exists>E t\\<^sub>0 t\\<^sub>0'.\n       E \\<in> ctxt \\<and>\n       t\\<^sub>1 = E t\\<^sub>0 \\<and>\n       t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0' \\<Longrightarrow>\n    t\\<^sub>1 \\<bullet> t\\<^sub>2 \\<in> value \\<or>\n    (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n        E \\<in> ctxt \\<and>\n        t\\<^sub>1 \\<bullet> t\\<^sub>2 = E t\\<^sub>0 \\<and>\n        t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')", "with T_App"], ["proof (chain)\npicking this:\n  [] \\<turnstile> t\\<^sub>1 : T\\<^sub>1\\<^sub>1 \\<rightarrow>\n                              T\\<^sub>1\\<^sub>2\n  t\\<^sub>1 \\<in> value \\<or>\n  (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n      E \\<in> ctxt \\<and>\n      t\\<^sub>1 = E t\\<^sub>0 \\<and>\n      t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')\n  [] \\<turnstile> t\\<^sub>2 : T\\<^sub>1\\<^sub>1\n  t\\<^sub>2 \\<in> value \\<or>\n  (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n      E \\<in> ctxt \\<and>\n      t\\<^sub>2 = E t\\<^sub>0 \\<and>\n      t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')\n  t\\<^sub>1 \\<in> value", "obtain t S where t\\<^sub>1: \"t\\<^sub>1 = (\\<lambda>:S. t)\""], ["proof (prove)\nusing this:\n  [] \\<turnstile> t\\<^sub>1 : T\\<^sub>1\\<^sub>1 \\<rightarrow>\n                              T\\<^sub>1\\<^sub>2\n  t\\<^sub>1 \\<in> value \\<or>\n  (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n      E \\<in> ctxt \\<and>\n      t\\<^sub>1 = E t\\<^sub>0 \\<and>\n      t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')\n  [] \\<turnstile> t\\<^sub>2 : T\\<^sub>1\\<^sub>1\n  t\\<^sub>2 \\<in> value \\<or>\n  (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n      E \\<in> ctxt \\<and>\n      t\\<^sub>2 = E t\\<^sub>0 \\<and>\n      t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')\n  t\\<^sub>1 \\<in> value\n\ngoal (1 subgoal):\n 1. (\\<And>S t.\n        t\\<^sub>1 = (\\<lambda>:S. t) \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by (auto dest!: Fun_canonical)"], ["proof (state)\nthis:\n  t\\<^sub>1 = (\\<lambda>:S. t)\n\ngoal (2 subgoals):\n 1. t\\<^sub>1 \\<in> value \\<Longrightarrow>\n    t\\<^sub>1 \\<bullet> t\\<^sub>2 \\<in> value \\<or>\n    (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n        E \\<in> ctxt \\<and>\n        t\\<^sub>1 \\<bullet> t\\<^sub>2 = E t\\<^sub>0 \\<and>\n        t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')\n 2. \\<exists>E t\\<^sub>0 t\\<^sub>0'.\n       E \\<in> ctxt \\<and>\n       t\\<^sub>1 = E t\\<^sub>0 \\<and>\n       t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0' \\<Longrightarrow>\n    t\\<^sub>1 \\<bullet> t\\<^sub>2 \\<in> value \\<or>\n    (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n        E \\<in> ctxt \\<and>\n        t\\<^sub>1 \\<bullet> t\\<^sub>2 = E t\\<^sub>0 \\<and>\n        t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')", "from \\<open>t\\<^sub>2 \\<in> value \\<or> (\\<exists>E t\\<^sub>0 t\\<^sub>0'. E \\<in> ctxt \\<and> t\\<^sub>2 = E t\\<^sub>0 \\<and> t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')\\<close>"], ["proof (chain)\npicking this:\n  t\\<^sub>2 \\<in> value \\<or>\n  (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n      E \\<in> ctxt \\<and>\n      t\\<^sub>2 = E t\\<^sub>0 \\<and>\n      t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')", "show ?thesis"], ["proof (prove)\nusing this:\n  t\\<^sub>2 \\<in> value \\<or>\n  (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n      E \\<in> ctxt \\<and>\n      t\\<^sub>2 = E t\\<^sub>0 \\<and>\n      t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')\n\ngoal (1 subgoal):\n 1. t\\<^sub>1 \\<bullet> t\\<^sub>2 \\<in> value \\<or>\n    (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n        E \\<in> ctxt \\<and>\n        t\\<^sub>1 \\<bullet> t\\<^sub>2 = E t\\<^sub>0 \\<and>\n        t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')", "proof"], ["proof (state)\ngoal (2 subgoals):\n 1. t\\<^sub>2 \\<in> value \\<Longrightarrow>\n    t\\<^sub>1 \\<bullet> t\\<^sub>2 \\<in> value \\<or>\n    (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n        E \\<in> ctxt \\<and>\n        t\\<^sub>1 \\<bullet> t\\<^sub>2 = E t\\<^sub>0 \\<and>\n        t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')\n 2. \\<exists>E t\\<^sub>0 t\\<^sub>0'.\n       E \\<in> ctxt \\<and>\n       t\\<^sub>2 = E t\\<^sub>0 \\<and>\n       t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0' \\<Longrightarrow>\n    t\\<^sub>1 \\<bullet> t\\<^sub>2 \\<in> value \\<or>\n    (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n        E \\<in> ctxt \\<and>\n        t\\<^sub>1 \\<bullet> t\\<^sub>2 = E t\\<^sub>0 \\<and>\n        t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')", "assume \"t\\<^sub>2 \\<in> value\""], ["proof (state)\nthis:\n  t\\<^sub>2 \\<in> value\n\ngoal (2 subgoals):\n 1. t\\<^sub>2 \\<in> value \\<Longrightarrow>\n    t\\<^sub>1 \\<bullet> t\\<^sub>2 \\<in> value \\<or>\n    (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n        E \\<in> ctxt \\<and>\n        t\\<^sub>1 \\<bullet> t\\<^sub>2 = E t\\<^sub>0 \\<and>\n        t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')\n 2. \\<exists>E t\\<^sub>0 t\\<^sub>0'.\n       E \\<in> ctxt \\<and>\n       t\\<^sub>2 = E t\\<^sub>0 \\<and>\n       t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0' \\<Longrightarrow>\n    t\\<^sub>1 \\<bullet> t\\<^sub>2 \\<in> value \\<or>\n    (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n        E \\<in> ctxt \\<and>\n        t\\<^sub>1 \\<bullet> t\\<^sub>2 = E t\\<^sub>0 \\<and>\n        t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')", "with t\\<^sub>1"], ["proof (chain)\npicking this:\n  t\\<^sub>1 = (\\<lambda>:S. t)\n  t\\<^sub>2 \\<in> value", "have \"t\\<^sub>1 \\<bullet> t\\<^sub>2 \\<longmapsto>\\<^sub>c t[0 \\<mapsto> t\\<^sub>2]\""], ["proof (prove)\nusing this:\n  t\\<^sub>1 = (\\<lambda>:S. t)\n  t\\<^sub>2 \\<in> value\n\ngoal (1 subgoal):\n 1. t\\<^sub>1 \\<bullet> t\\<^sub>2 \\<longmapsto>\\<^sub>c\n    t[0 \\<mapsto> t\\<^sub>2]", "by simp (rule eval.intros)"], ["proof (state)\nthis:\n  t\\<^sub>1 \\<bullet> t\\<^sub>2 \\<longmapsto>\\<^sub>c\n  t[0 \\<mapsto> t\\<^sub>2]\n\ngoal (2 subgoals):\n 1. t\\<^sub>2 \\<in> value \\<Longrightarrow>\n    t\\<^sub>1 \\<bullet> t\\<^sub>2 \\<in> value \\<or>\n    (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n        E \\<in> ctxt \\<and>\n        t\\<^sub>1 \\<bullet> t\\<^sub>2 = E t\\<^sub>0 \\<and>\n        t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')\n 2. \\<exists>E t\\<^sub>0 t\\<^sub>0'.\n       E \\<in> ctxt \\<and>\n       t\\<^sub>2 = E t\\<^sub>0 \\<and>\n       t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0' \\<Longrightarrow>\n    t\\<^sub>1 \\<bullet> t\\<^sub>2 \\<in> value \\<or>\n    (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n        E \\<in> ctxt \\<and>\n        t\\<^sub>1 \\<bullet> t\\<^sub>2 = E t\\<^sub>0 \\<and>\n        t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')", "thus ?thesis"], ["proof (prove)\nusing this:\n  t\\<^sub>1 \\<bullet> t\\<^sub>2 \\<longmapsto>\\<^sub>c\n  t[0 \\<mapsto> t\\<^sub>2]\n\ngoal (1 subgoal):\n 1. t\\<^sub>1 \\<bullet> t\\<^sub>2 \\<in> value \\<or>\n    (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n        E \\<in> ctxt \\<and>\n        t\\<^sub>1 \\<bullet> t\\<^sub>2 = E t\\<^sub>0 \\<and>\n        t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')", "by (iprover intro: C_Hole)"], ["proof (state)\nthis:\n  t\\<^sub>1 \\<bullet> t\\<^sub>2 \\<in> value \\<or>\n  (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n      E \\<in> ctxt \\<and>\n      t\\<^sub>1 \\<bullet> t\\<^sub>2 = E t\\<^sub>0 \\<and>\n      t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')\n\ngoal (1 subgoal):\n 1. \\<exists>E t\\<^sub>0 t\\<^sub>0'.\n       E \\<in> ctxt \\<and>\n       t\\<^sub>2 = E t\\<^sub>0 \\<and>\n       t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0' \\<Longrightarrow>\n    t\\<^sub>1 \\<bullet> t\\<^sub>2 \\<in> value \\<or>\n    (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n        E \\<in> ctxt \\<and>\n        t\\<^sub>1 \\<bullet> t\\<^sub>2 = E t\\<^sub>0 \\<and>\n        t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<exists>E t\\<^sub>0 t\\<^sub>0'.\n       E \\<in> ctxt \\<and>\n       t\\<^sub>2 = E t\\<^sub>0 \\<and>\n       t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0' \\<Longrightarrow>\n    t\\<^sub>1 \\<bullet> t\\<^sub>2 \\<in> value \\<or>\n    (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n        E \\<in> ctxt \\<and>\n        t\\<^sub>1 \\<bullet> t\\<^sub>2 = E t\\<^sub>0 \\<and>\n        t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')", "assume \"\\<exists>E t\\<^sub>0 t\\<^sub>0'. E \\<in> ctxt \\<and> t\\<^sub>2 = E t\\<^sub>0 \\<and> t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0'\""], ["proof (state)\nthis:\n  \\<exists>E t\\<^sub>0 t\\<^sub>0'.\n     E \\<in> ctxt \\<and>\n     t\\<^sub>2 = E t\\<^sub>0 \\<and>\n     t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0'\n\ngoal (1 subgoal):\n 1. \\<exists>E t\\<^sub>0 t\\<^sub>0'.\n       E \\<in> ctxt \\<and>\n       t\\<^sub>2 = E t\\<^sub>0 \\<and>\n       t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0' \\<Longrightarrow>\n    t\\<^sub>1 \\<bullet> t\\<^sub>2 \\<in> value \\<or>\n    (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n        E \\<in> ctxt \\<and>\n        t\\<^sub>1 \\<bullet> t\\<^sub>2 = E t\\<^sub>0 \\<and>\n        t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')", "with t\\<^sub>1_val"], ["proof (chain)\npicking this:\n  t\\<^sub>1 \\<in> value\n  \\<exists>E t\\<^sub>0 t\\<^sub>0'.\n     E \\<in> ctxt \\<and>\n     t\\<^sub>2 = E t\\<^sub>0 \\<and>\n     t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0'", "show ?thesis"], ["proof (prove)\nusing this:\n  t\\<^sub>1 \\<in> value\n  \\<exists>E t\\<^sub>0 t\\<^sub>0'.\n     E \\<in> ctxt \\<and>\n     t\\<^sub>2 = E t\\<^sub>0 \\<and>\n     t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0'\n\ngoal (1 subgoal):\n 1. t\\<^sub>1 \\<bullet> t\\<^sub>2 \\<in> value \\<or>\n    (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n        E \\<in> ctxt \\<and>\n        t\\<^sub>1 \\<bullet> t\\<^sub>2 = E t\\<^sub>0 \\<and>\n        t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')", "by (iprover intro: ctxt_rctxt.intros)"], ["proof (state)\nthis:\n  t\\<^sub>1 \\<bullet> t\\<^sub>2 \\<in> value \\<or>\n  (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n      E \\<in> ctxt \\<and>\n      t\\<^sub>1 \\<bullet> t\\<^sub>2 = E t\\<^sub>0 \\<and>\n      t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  t\\<^sub>1 \\<bullet> t\\<^sub>2 \\<in> value \\<or>\n  (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n      E \\<in> ctxt \\<and>\n      t\\<^sub>1 \\<bullet> t\\<^sub>2 = E t\\<^sub>0 \\<and>\n      t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')\n\ngoal (1 subgoal):\n 1. \\<exists>E t\\<^sub>0 t\\<^sub>0'.\n       E \\<in> ctxt \\<and>\n       t\\<^sub>1 = E t\\<^sub>0 \\<and>\n       t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0' \\<Longrightarrow>\n    t\\<^sub>1 \\<bullet> t\\<^sub>2 \\<in> value \\<or>\n    (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n        E \\<in> ctxt \\<and>\n        t\\<^sub>1 \\<bullet> t\\<^sub>2 = E t\\<^sub>0 \\<and>\n        t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<exists>E t\\<^sub>0 t\\<^sub>0'.\n       E \\<in> ctxt \\<and>\n       t\\<^sub>1 = E t\\<^sub>0 \\<and>\n       t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0' \\<Longrightarrow>\n    t\\<^sub>1 \\<bullet> t\\<^sub>2 \\<in> value \\<or>\n    (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n        E \\<in> ctxt \\<and>\n        t\\<^sub>1 \\<bullet> t\\<^sub>2 = E t\\<^sub>0 \\<and>\n        t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')", "assume \"\\<exists>E t\\<^sub>0 t\\<^sub>0'. E \\<in> ctxt \\<and> t\\<^sub>1 = E t\\<^sub>0 \\<and> t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0'\""], ["proof (state)\nthis:\n  \\<exists>E t\\<^sub>0 t\\<^sub>0'.\n     E \\<in> ctxt \\<and>\n     t\\<^sub>1 = E t\\<^sub>0 \\<and>\n     t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0'\n\ngoal (1 subgoal):\n 1. \\<exists>E t\\<^sub>0 t\\<^sub>0'.\n       E \\<in> ctxt \\<and>\n       t\\<^sub>1 = E t\\<^sub>0 \\<and>\n       t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0' \\<Longrightarrow>\n    t\\<^sub>1 \\<bullet> t\\<^sub>2 \\<in> value \\<or>\n    (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n        E \\<in> ctxt \\<and>\n        t\\<^sub>1 \\<bullet> t\\<^sub>2 = E t\\<^sub>0 \\<and>\n        t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')", "thus ?thesis"], ["proof (prove)\nusing this:\n  \\<exists>E t\\<^sub>0 t\\<^sub>0'.\n     E \\<in> ctxt \\<and>\n     t\\<^sub>1 = E t\\<^sub>0 \\<and>\n     t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0'\n\ngoal (1 subgoal):\n 1. t\\<^sub>1 \\<bullet> t\\<^sub>2 \\<in> value \\<or>\n    (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n        E \\<in> ctxt \\<and>\n        t\\<^sub>1 \\<bullet> t\\<^sub>2 = E t\\<^sub>0 \\<and>\n        t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')", "by (iprover intro: ctxt_rctxt.intros)"], ["proof (state)\nthis:\n  t\\<^sub>1 \\<bullet> t\\<^sub>2 \\<in> value \\<or>\n  (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n      E \\<in> ctxt \\<and>\n      t\\<^sub>1 \\<bullet> t\\<^sub>2 = E t\\<^sub>0 \\<and>\n      t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  t\\<^sub>1 \\<bullet> t\\<^sub>2 \\<in> value \\<or>\n  (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n      E \\<in> ctxt \\<and>\n      t\\<^sub>1 \\<bullet> t\\<^sub>2 = E t\\<^sub>0 \\<and>\n      t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')\n\ngoal (8 subgoals):\n 1. \\<And>T\\<^sub>1 t\\<^sub>2 T\\<^sub>2.\n       [TVarB\n         T\\<^sub>1] \\<turnstile> t\\<^sub>2 : T\\<^sub>2 \\<Longrightarrow>\n       (\\<lambda><:T\\<^sub>1. t\\<^sub>2) \\<in> value \\<or>\n       (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n           E \\<in> ctxt \\<and>\n           (\\<lambda><:T\\<^sub>1. t\\<^sub>2) = E t\\<^sub>0 \\<and>\n           t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')\n 2. \\<And>t\\<^sub>1 T\\<^sub>1\\<^sub>1 T\\<^sub>1\\<^sub>2 T\\<^sub>2.\n       \\<lbrakk>[] \\<turnstile> t\\<^sub>1 : (\\<forall><:T\\<^sub>1\\<^sub>1.\n          T\\<^sub>1\\<^sub>2);\n        t\\<^sub>1 \\<in> value \\<or>\n        (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n            E \\<in> ctxt \\<and>\n            t\\<^sub>1 = E t\\<^sub>0 \\<and>\n            t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0');\n        [] \\<turnstile> T\\<^sub>2 <: T\\<^sub>1\\<^sub>1\\<rbrakk>\n       \\<Longrightarrow> t\\<^sub>1 \\<bullet>\\<^sub>\\<tau> T\\<^sub>2\n                         \\<in> value \\<or>\n                         (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n                             E \\<in> ctxt \\<and>\n                             t\\<^sub>1 \\<bullet>\\<^sub>\\<tau> T\\<^sub>2 =\n                             E t\\<^sub>0 \\<and>\n                             t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')\n 3. \\<And>t S T.\n       \\<lbrakk>[] \\<turnstile> t : S;\n        t \\<in> value \\<or>\n        (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n            E \\<in> ctxt \\<and>\n            t = E t\\<^sub>0 \\<and>\n            t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0');\n        [] \\<turnstile> S <: T\\<rbrakk>\n       \\<Longrightarrow> t \\<in> value \\<or>\n                         (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n                             E \\<in> ctxt \\<and>\n                             t = E t\\<^sub>0 \\<and>\n                             t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')\n 4. \\<And>t\\<^sub>1 T\\<^sub>1 p \\<Delta> t\\<^sub>2 T\\<^sub>2.\n       \\<lbrakk>[] \\<turnstile> t\\<^sub>1 : T\\<^sub>1;\n        t\\<^sub>1 \\<in> value \\<or>\n        (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n            E \\<in> ctxt \\<and>\n            t\\<^sub>1 = E t\\<^sub>0 \\<and>\n            t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0');\n        \\<turnstile> p : T\\<^sub>1 \\<Rightarrow> \\<Delta>;\n        \\<Delta> @ [] \\<turnstile> t\\<^sub>2 : T\\<^sub>2;\n        \\<Delta> @ [] = [] \\<Longrightarrow>\n        t\\<^sub>2 \\<in> value \\<or>\n        (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n            E \\<in> ctxt \\<and>\n            t\\<^sub>2 = E t\\<^sub>0 \\<and>\n            t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')\\<rbrakk>\n       \\<Longrightarrow> (LET p = t\\<^sub>1 IN t\\<^sub>2) \\<in> value \\<or>\n                         (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n                             E \\<in> ctxt \\<and>\n                             (LET p = t\\<^sub>1 IN t\\<^sub>2) =\n                             E t\\<^sub>0 \\<and>\n                             t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')\n 5. \\<And>fs fTs.\n       \\<lbrakk>[] \\<turnstile> fs [:] fTs;\n        (\\<forall>(l, t)\\<in>set fs. t \\<in> value) \\<or>\n        (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n            E \\<in> rctxt \\<and>\n            fs = E t\\<^sub>0 \\<and>\n            t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')\\<rbrakk>\n       \\<Longrightarrow> Rcd fs \\<in> value \\<or>\n                         (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n                             E \\<in> ctxt \\<and>\n                             Rcd fs = E t\\<^sub>0 \\<and>\n                             t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')\n 6. \\<And>t fTs l T.\n       \\<lbrakk>[] \\<turnstile> t : RcdT fTs;\n        t \\<in> value \\<or>\n        (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n            E \\<in> ctxt \\<and>\n            t = E t\\<^sub>0 \\<and>\n            t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0');\n        fTs\\<langle>l\\<rangle>\\<^sub>? = \\<lfloor>T\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> t..l \\<in> value \\<or>\n                         (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n                             E \\<in> ctxt \\<and>\n                             t..l = E t\\<^sub>0 \\<and>\n                             t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')\n 7. [] \\<turnstile>\\<^sub>w\\<^sub>f \\<Longrightarrow>\n    (\\<forall>(l, t)\\<in>set []. t \\<in> value) \\<or>\n    (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n        E \\<in> rctxt \\<and>\n        [] = E t\\<^sub>0 \\<and> t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')\n 8. \\<And>t T fs fTs l.\n       \\<lbrakk>[] \\<turnstile> t : T;\n        t \\<in> value \\<or>\n        (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n            E \\<in> ctxt \\<and>\n            t = E t\\<^sub>0 \\<and>\n            t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0');\n        [] \\<turnstile> fs [:] fTs;\n        (\\<forall>(l, t)\\<in>set fs. t \\<in> value) \\<or>\n        (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n            E \\<in> rctxt \\<and>\n            fs = E t\\<^sub>0 \\<and>\n            t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0');\n        fs\\<langle>l\\<rangle>\\<^sub>? = \\<bottom>\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>(l, t)\\<in>set ((l, t) \\<Colon> fs).\n                             t \\<in> value) \\<or>\n                         (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n                             E \\<in> rctxt \\<and>\n                             (l, t) \\<Colon> fs = E t\\<^sub>0 \\<and>\n                             t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')", "next"], ["proof (state)\ngoal (8 subgoals):\n 1. \\<And>T\\<^sub>1 t\\<^sub>2 T\\<^sub>2.\n       [TVarB\n         T\\<^sub>1] \\<turnstile> t\\<^sub>2 : T\\<^sub>2 \\<Longrightarrow>\n       (\\<lambda><:T\\<^sub>1. t\\<^sub>2) \\<in> value \\<or>\n       (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n           E \\<in> ctxt \\<and>\n           (\\<lambda><:T\\<^sub>1. t\\<^sub>2) = E t\\<^sub>0 \\<and>\n           t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')\n 2. \\<And>t\\<^sub>1 T\\<^sub>1\\<^sub>1 T\\<^sub>1\\<^sub>2 T\\<^sub>2.\n       \\<lbrakk>[] \\<turnstile> t\\<^sub>1 : (\\<forall><:T\\<^sub>1\\<^sub>1.\n          T\\<^sub>1\\<^sub>2);\n        t\\<^sub>1 \\<in> value \\<or>\n        (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n            E \\<in> ctxt \\<and>\n            t\\<^sub>1 = E t\\<^sub>0 \\<and>\n            t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0');\n        [] \\<turnstile> T\\<^sub>2 <: T\\<^sub>1\\<^sub>1\\<rbrakk>\n       \\<Longrightarrow> t\\<^sub>1 \\<bullet>\\<^sub>\\<tau> T\\<^sub>2\n                         \\<in> value \\<or>\n                         (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n                             E \\<in> ctxt \\<and>\n                             t\\<^sub>1 \\<bullet>\\<^sub>\\<tau> T\\<^sub>2 =\n                             E t\\<^sub>0 \\<and>\n                             t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')\n 3. \\<And>t S T.\n       \\<lbrakk>[] \\<turnstile> t : S;\n        t \\<in> value \\<or>\n        (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n            E \\<in> ctxt \\<and>\n            t = E t\\<^sub>0 \\<and>\n            t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0');\n        [] \\<turnstile> S <: T\\<rbrakk>\n       \\<Longrightarrow> t \\<in> value \\<or>\n                         (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n                             E \\<in> ctxt \\<and>\n                             t = E t\\<^sub>0 \\<and>\n                             t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')\n 4. \\<And>t\\<^sub>1 T\\<^sub>1 p \\<Delta> t\\<^sub>2 T\\<^sub>2.\n       \\<lbrakk>[] \\<turnstile> t\\<^sub>1 : T\\<^sub>1;\n        t\\<^sub>1 \\<in> value \\<or>\n        (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n            E \\<in> ctxt \\<and>\n            t\\<^sub>1 = E t\\<^sub>0 \\<and>\n            t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0');\n        \\<turnstile> p : T\\<^sub>1 \\<Rightarrow> \\<Delta>;\n        \\<Delta> @ [] \\<turnstile> t\\<^sub>2 : T\\<^sub>2;\n        \\<Delta> @ [] = [] \\<Longrightarrow>\n        t\\<^sub>2 \\<in> value \\<or>\n        (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n            E \\<in> ctxt \\<and>\n            t\\<^sub>2 = E t\\<^sub>0 \\<and>\n            t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')\\<rbrakk>\n       \\<Longrightarrow> (LET p = t\\<^sub>1 IN t\\<^sub>2) \\<in> value \\<or>\n                         (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n                             E \\<in> ctxt \\<and>\n                             (LET p = t\\<^sub>1 IN t\\<^sub>2) =\n                             E t\\<^sub>0 \\<and>\n                             t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')\n 5. \\<And>fs fTs.\n       \\<lbrakk>[] \\<turnstile> fs [:] fTs;\n        (\\<forall>(l, t)\\<in>set fs. t \\<in> value) \\<or>\n        (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n            E \\<in> rctxt \\<and>\n            fs = E t\\<^sub>0 \\<and>\n            t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')\\<rbrakk>\n       \\<Longrightarrow> Rcd fs \\<in> value \\<or>\n                         (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n                             E \\<in> ctxt \\<and>\n                             Rcd fs = E t\\<^sub>0 \\<and>\n                             t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')\n 6. \\<And>t fTs l T.\n       \\<lbrakk>[] \\<turnstile> t : RcdT fTs;\n        t \\<in> value \\<or>\n        (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n            E \\<in> ctxt \\<and>\n            t = E t\\<^sub>0 \\<and>\n            t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0');\n        fTs\\<langle>l\\<rangle>\\<^sub>? = \\<lfloor>T\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> t..l \\<in> value \\<or>\n                         (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n                             E \\<in> ctxt \\<and>\n                             t..l = E t\\<^sub>0 \\<and>\n                             t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')\n 7. [] \\<turnstile>\\<^sub>w\\<^sub>f \\<Longrightarrow>\n    (\\<forall>(l, t)\\<in>set []. t \\<in> value) \\<or>\n    (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n        E \\<in> rctxt \\<and>\n        [] = E t\\<^sub>0 \\<and> t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')\n 8. \\<And>t T fs fTs l.\n       \\<lbrakk>[] \\<turnstile> t : T;\n        t \\<in> value \\<or>\n        (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n            E \\<in> ctxt \\<and>\n            t = E t\\<^sub>0 \\<and>\n            t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0');\n        [] \\<turnstile> fs [:] fTs;\n        (\\<forall>(l, t)\\<in>set fs. t \\<in> value) \\<or>\n        (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n            E \\<in> rctxt \\<and>\n            fs = E t\\<^sub>0 \\<and>\n            t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0');\n        fs\\<langle>l\\<rangle>\\<^sub>? = \\<bottom>\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>(l, t)\\<in>set ((l, t) \\<Colon> fs).\n                             t \\<in> value) \\<or>\n                         (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n                             E \\<in> rctxt \\<and>\n                             (l, t) \\<Colon> fs = E t\\<^sub>0 \\<and>\n                             t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')", "case T_TAbs"], ["proof (state)\nthis:\n  [TVarB T\\<^sub>1_] \\<turnstile> t\\<^sub>2_ : T\\<^sub>2_\n\ngoal (8 subgoals):\n 1. \\<And>T\\<^sub>1 t\\<^sub>2 T\\<^sub>2.\n       [TVarB\n         T\\<^sub>1] \\<turnstile> t\\<^sub>2 : T\\<^sub>2 \\<Longrightarrow>\n       (\\<lambda><:T\\<^sub>1. t\\<^sub>2) \\<in> value \\<or>\n       (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n           E \\<in> ctxt \\<and>\n           (\\<lambda><:T\\<^sub>1. t\\<^sub>2) = E t\\<^sub>0 \\<and>\n           t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')\n 2. \\<And>t\\<^sub>1 T\\<^sub>1\\<^sub>1 T\\<^sub>1\\<^sub>2 T\\<^sub>2.\n       \\<lbrakk>[] \\<turnstile> t\\<^sub>1 : (\\<forall><:T\\<^sub>1\\<^sub>1.\n          T\\<^sub>1\\<^sub>2);\n        t\\<^sub>1 \\<in> value \\<or>\n        (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n            E \\<in> ctxt \\<and>\n            t\\<^sub>1 = E t\\<^sub>0 \\<and>\n            t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0');\n        [] \\<turnstile> T\\<^sub>2 <: T\\<^sub>1\\<^sub>1\\<rbrakk>\n       \\<Longrightarrow> t\\<^sub>1 \\<bullet>\\<^sub>\\<tau> T\\<^sub>2\n                         \\<in> value \\<or>\n                         (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n                             E \\<in> ctxt \\<and>\n                             t\\<^sub>1 \\<bullet>\\<^sub>\\<tau> T\\<^sub>2 =\n                             E t\\<^sub>0 \\<and>\n                             t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')\n 3. \\<And>t S T.\n       \\<lbrakk>[] \\<turnstile> t : S;\n        t \\<in> value \\<or>\n        (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n            E \\<in> ctxt \\<and>\n            t = E t\\<^sub>0 \\<and>\n            t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0');\n        [] \\<turnstile> S <: T\\<rbrakk>\n       \\<Longrightarrow> t \\<in> value \\<or>\n                         (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n                             E \\<in> ctxt \\<and>\n                             t = E t\\<^sub>0 \\<and>\n                             t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')\n 4. \\<And>t\\<^sub>1 T\\<^sub>1 p \\<Delta> t\\<^sub>2 T\\<^sub>2.\n       \\<lbrakk>[] \\<turnstile> t\\<^sub>1 : T\\<^sub>1;\n        t\\<^sub>1 \\<in> value \\<or>\n        (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n            E \\<in> ctxt \\<and>\n            t\\<^sub>1 = E t\\<^sub>0 \\<and>\n            t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0');\n        \\<turnstile> p : T\\<^sub>1 \\<Rightarrow> \\<Delta>;\n        \\<Delta> @ [] \\<turnstile> t\\<^sub>2 : T\\<^sub>2;\n        \\<Delta> @ [] = [] \\<Longrightarrow>\n        t\\<^sub>2 \\<in> value \\<or>\n        (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n            E \\<in> ctxt \\<and>\n            t\\<^sub>2 = E t\\<^sub>0 \\<and>\n            t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')\\<rbrakk>\n       \\<Longrightarrow> (LET p = t\\<^sub>1 IN t\\<^sub>2) \\<in> value \\<or>\n                         (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n                             E \\<in> ctxt \\<and>\n                             (LET p = t\\<^sub>1 IN t\\<^sub>2) =\n                             E t\\<^sub>0 \\<and>\n                             t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')\n 5. \\<And>fs fTs.\n       \\<lbrakk>[] \\<turnstile> fs [:] fTs;\n        (\\<forall>(l, t)\\<in>set fs. t \\<in> value) \\<or>\n        (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n            E \\<in> rctxt \\<and>\n            fs = E t\\<^sub>0 \\<and>\n            t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')\\<rbrakk>\n       \\<Longrightarrow> Rcd fs \\<in> value \\<or>\n                         (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n                             E \\<in> ctxt \\<and>\n                             Rcd fs = E t\\<^sub>0 \\<and>\n                             t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')\n 6. \\<And>t fTs l T.\n       \\<lbrakk>[] \\<turnstile> t : RcdT fTs;\n        t \\<in> value \\<or>\n        (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n            E \\<in> ctxt \\<and>\n            t = E t\\<^sub>0 \\<and>\n            t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0');\n        fTs\\<langle>l\\<rangle>\\<^sub>? = \\<lfloor>T\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> t..l \\<in> value \\<or>\n                         (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n                             E \\<in> ctxt \\<and>\n                             t..l = E t\\<^sub>0 \\<and>\n                             t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')\n 7. [] \\<turnstile>\\<^sub>w\\<^sub>f \\<Longrightarrow>\n    (\\<forall>(l, t)\\<in>set []. t \\<in> value) \\<or>\n    (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n        E \\<in> rctxt \\<and>\n        [] = E t\\<^sub>0 \\<and> t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')\n 8. \\<And>t T fs fTs l.\n       \\<lbrakk>[] \\<turnstile> t : T;\n        t \\<in> value \\<or>\n        (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n            E \\<in> ctxt \\<and>\n            t = E t\\<^sub>0 \\<and>\n            t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0');\n        [] \\<turnstile> fs [:] fTs;\n        (\\<forall>(l, t)\\<in>set fs. t \\<in> value) \\<or>\n        (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n            E \\<in> rctxt \\<and>\n            fs = E t\\<^sub>0 \\<and>\n            t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0');\n        fs\\<langle>l\\<rangle>\\<^sub>? = \\<bottom>\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>(l, t)\\<in>set ((l, t) \\<Colon> fs).\n                             t \\<in> value) \\<or>\n                         (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n                             E \\<in> rctxt \\<and>\n                             (l, t) \\<Colon> fs = E t\\<^sub>0 \\<and>\n                             t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')", "from value.TAbs"], ["proof (chain)\npicking this:\n  (\\<lambda><:?T. ?t) \\<in> value", "show ?case"], ["proof (prove)\nusing this:\n  (\\<lambda><:?T. ?t) \\<in> value\n\ngoal (1 subgoal):\n 1. (\\<lambda><:T\\<^sub>1_. t\\<^sub>2_) \\<in> value \\<or>\n    (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n        E \\<in> ctxt \\<and>\n        (\\<lambda><:T\\<^sub>1_. t\\<^sub>2_) = E t\\<^sub>0 \\<and>\n        t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')", ".."], ["proof (state)\nthis:\n  (\\<lambda><:T\\<^sub>1_. t\\<^sub>2_) \\<in> value \\<or>\n  (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n      E \\<in> ctxt \\<and>\n      (\\<lambda><:T\\<^sub>1_. t\\<^sub>2_) = E t\\<^sub>0 \\<and>\n      t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')\n\ngoal (7 subgoals):\n 1. \\<And>t\\<^sub>1 T\\<^sub>1\\<^sub>1 T\\<^sub>1\\<^sub>2 T\\<^sub>2.\n       \\<lbrakk>[] \\<turnstile> t\\<^sub>1 : (\\<forall><:T\\<^sub>1\\<^sub>1.\n          T\\<^sub>1\\<^sub>2);\n        t\\<^sub>1 \\<in> value \\<or>\n        (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n            E \\<in> ctxt \\<and>\n            t\\<^sub>1 = E t\\<^sub>0 \\<and>\n            t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0');\n        [] \\<turnstile> T\\<^sub>2 <: T\\<^sub>1\\<^sub>1\\<rbrakk>\n       \\<Longrightarrow> t\\<^sub>1 \\<bullet>\\<^sub>\\<tau> T\\<^sub>2\n                         \\<in> value \\<or>\n                         (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n                             E \\<in> ctxt \\<and>\n                             t\\<^sub>1 \\<bullet>\\<^sub>\\<tau> T\\<^sub>2 =\n                             E t\\<^sub>0 \\<and>\n                             t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')\n 2. \\<And>t S T.\n       \\<lbrakk>[] \\<turnstile> t : S;\n        t \\<in> value \\<or>\n        (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n            E \\<in> ctxt \\<and>\n            t = E t\\<^sub>0 \\<and>\n            t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0');\n        [] \\<turnstile> S <: T\\<rbrakk>\n       \\<Longrightarrow> t \\<in> value \\<or>\n                         (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n                             E \\<in> ctxt \\<and>\n                             t = E t\\<^sub>0 \\<and>\n                             t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')\n 3. \\<And>t\\<^sub>1 T\\<^sub>1 p \\<Delta> t\\<^sub>2 T\\<^sub>2.\n       \\<lbrakk>[] \\<turnstile> t\\<^sub>1 : T\\<^sub>1;\n        t\\<^sub>1 \\<in> value \\<or>\n        (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n            E \\<in> ctxt \\<and>\n            t\\<^sub>1 = E t\\<^sub>0 \\<and>\n            t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0');\n        \\<turnstile> p : T\\<^sub>1 \\<Rightarrow> \\<Delta>;\n        \\<Delta> @ [] \\<turnstile> t\\<^sub>2 : T\\<^sub>2;\n        \\<Delta> @ [] = [] \\<Longrightarrow>\n        t\\<^sub>2 \\<in> value \\<or>\n        (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n            E \\<in> ctxt \\<and>\n            t\\<^sub>2 = E t\\<^sub>0 \\<and>\n            t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')\\<rbrakk>\n       \\<Longrightarrow> (LET p = t\\<^sub>1 IN t\\<^sub>2) \\<in> value \\<or>\n                         (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n                             E \\<in> ctxt \\<and>\n                             (LET p = t\\<^sub>1 IN t\\<^sub>2) =\n                             E t\\<^sub>0 \\<and>\n                             t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')\n 4. \\<And>fs fTs.\n       \\<lbrakk>[] \\<turnstile> fs [:] fTs;\n        (\\<forall>(l, t)\\<in>set fs. t \\<in> value) \\<or>\n        (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n            E \\<in> rctxt \\<and>\n            fs = E t\\<^sub>0 \\<and>\n            t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')\\<rbrakk>\n       \\<Longrightarrow> Rcd fs \\<in> value \\<or>\n                         (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n                             E \\<in> ctxt \\<and>\n                             Rcd fs = E t\\<^sub>0 \\<and>\n                             t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')\n 5. \\<And>t fTs l T.\n       \\<lbrakk>[] \\<turnstile> t : RcdT fTs;\n        t \\<in> value \\<or>\n        (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n            E \\<in> ctxt \\<and>\n            t = E t\\<^sub>0 \\<and>\n            t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0');\n        fTs\\<langle>l\\<rangle>\\<^sub>? = \\<lfloor>T\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> t..l \\<in> value \\<or>\n                         (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n                             E \\<in> ctxt \\<and>\n                             t..l = E t\\<^sub>0 \\<and>\n                             t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')\n 6. [] \\<turnstile>\\<^sub>w\\<^sub>f \\<Longrightarrow>\n    (\\<forall>(l, t)\\<in>set []. t \\<in> value) \\<or>\n    (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n        E \\<in> rctxt \\<and>\n        [] = E t\\<^sub>0 \\<and> t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')\n 7. \\<And>t T fs fTs l.\n       \\<lbrakk>[] \\<turnstile> t : T;\n        t \\<in> value \\<or>\n        (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n            E \\<in> ctxt \\<and>\n            t = E t\\<^sub>0 \\<and>\n            t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0');\n        [] \\<turnstile> fs [:] fTs;\n        (\\<forall>(l, t)\\<in>set fs. t \\<in> value) \\<or>\n        (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n            E \\<in> rctxt \\<and>\n            fs = E t\\<^sub>0 \\<and>\n            t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0');\n        fs\\<langle>l\\<rangle>\\<^sub>? = \\<bottom>\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>(l, t)\\<in>set ((l, t) \\<Colon> fs).\n                             t \\<in> value) \\<or>\n                         (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n                             E \\<in> rctxt \\<and>\n                             (l, t) \\<Colon> fs = E t\\<^sub>0 \\<and>\n                             t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')", "next"], ["proof (state)\ngoal (7 subgoals):\n 1. \\<And>t\\<^sub>1 T\\<^sub>1\\<^sub>1 T\\<^sub>1\\<^sub>2 T\\<^sub>2.\n       \\<lbrakk>[] \\<turnstile> t\\<^sub>1 : (\\<forall><:T\\<^sub>1\\<^sub>1.\n          T\\<^sub>1\\<^sub>2);\n        t\\<^sub>1 \\<in> value \\<or>\n        (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n            E \\<in> ctxt \\<and>\n            t\\<^sub>1 = E t\\<^sub>0 \\<and>\n            t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0');\n        [] \\<turnstile> T\\<^sub>2 <: T\\<^sub>1\\<^sub>1\\<rbrakk>\n       \\<Longrightarrow> t\\<^sub>1 \\<bullet>\\<^sub>\\<tau> T\\<^sub>2\n                         \\<in> value \\<or>\n                         (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n                             E \\<in> ctxt \\<and>\n                             t\\<^sub>1 \\<bullet>\\<^sub>\\<tau> T\\<^sub>2 =\n                             E t\\<^sub>0 \\<and>\n                             t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')\n 2. \\<And>t S T.\n       \\<lbrakk>[] \\<turnstile> t : S;\n        t \\<in> value \\<or>\n        (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n            E \\<in> ctxt \\<and>\n            t = E t\\<^sub>0 \\<and>\n            t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0');\n        [] \\<turnstile> S <: T\\<rbrakk>\n       \\<Longrightarrow> t \\<in> value \\<or>\n                         (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n                             E \\<in> ctxt \\<and>\n                             t = E t\\<^sub>0 \\<and>\n                             t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')\n 3. \\<And>t\\<^sub>1 T\\<^sub>1 p \\<Delta> t\\<^sub>2 T\\<^sub>2.\n       \\<lbrakk>[] \\<turnstile> t\\<^sub>1 : T\\<^sub>1;\n        t\\<^sub>1 \\<in> value \\<or>\n        (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n            E \\<in> ctxt \\<and>\n            t\\<^sub>1 = E t\\<^sub>0 \\<and>\n            t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0');\n        \\<turnstile> p : T\\<^sub>1 \\<Rightarrow> \\<Delta>;\n        \\<Delta> @ [] \\<turnstile> t\\<^sub>2 : T\\<^sub>2;\n        \\<Delta> @ [] = [] \\<Longrightarrow>\n        t\\<^sub>2 \\<in> value \\<or>\n        (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n            E \\<in> ctxt \\<and>\n            t\\<^sub>2 = E t\\<^sub>0 \\<and>\n            t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')\\<rbrakk>\n       \\<Longrightarrow> (LET p = t\\<^sub>1 IN t\\<^sub>2) \\<in> value \\<or>\n                         (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n                             E \\<in> ctxt \\<and>\n                             (LET p = t\\<^sub>1 IN t\\<^sub>2) =\n                             E t\\<^sub>0 \\<and>\n                             t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')\n 4. \\<And>fs fTs.\n       \\<lbrakk>[] \\<turnstile> fs [:] fTs;\n        (\\<forall>(l, t)\\<in>set fs. t \\<in> value) \\<or>\n        (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n            E \\<in> rctxt \\<and>\n            fs = E t\\<^sub>0 \\<and>\n            t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')\\<rbrakk>\n       \\<Longrightarrow> Rcd fs \\<in> value \\<or>\n                         (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n                             E \\<in> ctxt \\<and>\n                             Rcd fs = E t\\<^sub>0 \\<and>\n                             t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')\n 5. \\<And>t fTs l T.\n       \\<lbrakk>[] \\<turnstile> t : RcdT fTs;\n        t \\<in> value \\<or>\n        (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n            E \\<in> ctxt \\<and>\n            t = E t\\<^sub>0 \\<and>\n            t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0');\n        fTs\\<langle>l\\<rangle>\\<^sub>? = \\<lfloor>T\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> t..l \\<in> value \\<or>\n                         (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n                             E \\<in> ctxt \\<and>\n                             t..l = E t\\<^sub>0 \\<and>\n                             t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')\n 6. [] \\<turnstile>\\<^sub>w\\<^sub>f \\<Longrightarrow>\n    (\\<forall>(l, t)\\<in>set []. t \\<in> value) \\<or>\n    (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n        E \\<in> rctxt \\<and>\n        [] = E t\\<^sub>0 \\<and> t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')\n 7. \\<And>t T fs fTs l.\n       \\<lbrakk>[] \\<turnstile> t : T;\n        t \\<in> value \\<or>\n        (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n            E \\<in> ctxt \\<and>\n            t = E t\\<^sub>0 \\<and>\n            t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0');\n        [] \\<turnstile> fs [:] fTs;\n        (\\<forall>(l, t)\\<in>set fs. t \\<in> value) \\<or>\n        (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n            E \\<in> rctxt \\<and>\n            fs = E t\\<^sub>0 \\<and>\n            t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0');\n        fs\\<langle>l\\<rangle>\\<^sub>? = \\<bottom>\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>(l, t)\\<in>set ((l, t) \\<Colon> fs).\n                             t \\<in> value) \\<or>\n                         (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n                             E \\<in> rctxt \\<and>\n                             (l, t) \\<Colon> fs = E t\\<^sub>0 \\<and>\n                             t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')", "case (T_TApp t\\<^sub>1 T\\<^sub>1\\<^sub>1 T\\<^sub>1\\<^sub>2 T\\<^sub>2)"], ["proof (state)\nthis:\n  [] \\<turnstile> t\\<^sub>1 : (\\<forall><:T\\<^sub>1\\<^sub>1.\n                                  T\\<^sub>1\\<^sub>2)\n  t\\<^sub>1 \\<in> value \\<or>\n  (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n      E \\<in> ctxt \\<and>\n      t\\<^sub>1 = E t\\<^sub>0 \\<and>\n      t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')\n  [] \\<turnstile> T\\<^sub>2 <: T\\<^sub>1\\<^sub>1\n\ngoal (7 subgoals):\n 1. \\<And>t\\<^sub>1 T\\<^sub>1\\<^sub>1 T\\<^sub>1\\<^sub>2 T\\<^sub>2.\n       \\<lbrakk>[] \\<turnstile> t\\<^sub>1 : (\\<forall><:T\\<^sub>1\\<^sub>1.\n          T\\<^sub>1\\<^sub>2);\n        t\\<^sub>1 \\<in> value \\<or>\n        (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n            E \\<in> ctxt \\<and>\n            t\\<^sub>1 = E t\\<^sub>0 \\<and>\n            t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0');\n        [] \\<turnstile> T\\<^sub>2 <: T\\<^sub>1\\<^sub>1\\<rbrakk>\n       \\<Longrightarrow> t\\<^sub>1 \\<bullet>\\<^sub>\\<tau> T\\<^sub>2\n                         \\<in> value \\<or>\n                         (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n                             E \\<in> ctxt \\<and>\n                             t\\<^sub>1 \\<bullet>\\<^sub>\\<tau> T\\<^sub>2 =\n                             E t\\<^sub>0 \\<and>\n                             t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')\n 2. \\<And>t S T.\n       \\<lbrakk>[] \\<turnstile> t : S;\n        t \\<in> value \\<or>\n        (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n            E \\<in> ctxt \\<and>\n            t = E t\\<^sub>0 \\<and>\n            t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0');\n        [] \\<turnstile> S <: T\\<rbrakk>\n       \\<Longrightarrow> t \\<in> value \\<or>\n                         (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n                             E \\<in> ctxt \\<and>\n                             t = E t\\<^sub>0 \\<and>\n                             t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')\n 3. \\<And>t\\<^sub>1 T\\<^sub>1 p \\<Delta> t\\<^sub>2 T\\<^sub>2.\n       \\<lbrakk>[] \\<turnstile> t\\<^sub>1 : T\\<^sub>1;\n        t\\<^sub>1 \\<in> value \\<or>\n        (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n            E \\<in> ctxt \\<and>\n            t\\<^sub>1 = E t\\<^sub>0 \\<and>\n            t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0');\n        \\<turnstile> p : T\\<^sub>1 \\<Rightarrow> \\<Delta>;\n        \\<Delta> @ [] \\<turnstile> t\\<^sub>2 : T\\<^sub>2;\n        \\<Delta> @ [] = [] \\<Longrightarrow>\n        t\\<^sub>2 \\<in> value \\<or>\n        (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n            E \\<in> ctxt \\<and>\n            t\\<^sub>2 = E t\\<^sub>0 \\<and>\n            t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')\\<rbrakk>\n       \\<Longrightarrow> (LET p = t\\<^sub>1 IN t\\<^sub>2) \\<in> value \\<or>\n                         (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n                             E \\<in> ctxt \\<and>\n                             (LET p = t\\<^sub>1 IN t\\<^sub>2) =\n                             E t\\<^sub>0 \\<and>\n                             t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')\n 4. \\<And>fs fTs.\n       \\<lbrakk>[] \\<turnstile> fs [:] fTs;\n        (\\<forall>(l, t)\\<in>set fs. t \\<in> value) \\<or>\n        (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n            E \\<in> rctxt \\<and>\n            fs = E t\\<^sub>0 \\<and>\n            t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')\\<rbrakk>\n       \\<Longrightarrow> Rcd fs \\<in> value \\<or>\n                         (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n                             E \\<in> ctxt \\<and>\n                             Rcd fs = E t\\<^sub>0 \\<and>\n                             t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')\n 5. \\<And>t fTs l T.\n       \\<lbrakk>[] \\<turnstile> t : RcdT fTs;\n        t \\<in> value \\<or>\n        (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n            E \\<in> ctxt \\<and>\n            t = E t\\<^sub>0 \\<and>\n            t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0');\n        fTs\\<langle>l\\<rangle>\\<^sub>? = \\<lfloor>T\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> t..l \\<in> value \\<or>\n                         (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n                             E \\<in> ctxt \\<and>\n                             t..l = E t\\<^sub>0 \\<and>\n                             t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')\n 6. [] \\<turnstile>\\<^sub>w\\<^sub>f \\<Longrightarrow>\n    (\\<forall>(l, t)\\<in>set []. t \\<in> value) \\<or>\n    (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n        E \\<in> rctxt \\<and>\n        [] = E t\\<^sub>0 \\<and> t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')\n 7. \\<And>t T fs fTs l.\n       \\<lbrakk>[] \\<turnstile> t : T;\n        t \\<in> value \\<or>\n        (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n            E \\<in> ctxt \\<and>\n            t = E t\\<^sub>0 \\<and>\n            t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0');\n        [] \\<turnstile> fs [:] fTs;\n        (\\<forall>(l, t)\\<in>set fs. t \\<in> value) \\<or>\n        (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n            E \\<in> rctxt \\<and>\n            fs = E t\\<^sub>0 \\<and>\n            t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0');\n        fs\\<langle>l\\<rangle>\\<^sub>? = \\<bottom>\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>(l, t)\\<in>set ((l, t) \\<Colon> fs).\n                             t \\<in> value) \\<or>\n                         (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n                             E \\<in> rctxt \\<and>\n                             (l, t) \\<Colon> fs = E t\\<^sub>0 \\<and>\n                             t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')", "from \\<open>t\\<^sub>1 \\<in> value \\<or> (\\<exists>E t\\<^sub>0 t\\<^sub>0'. E \\<in> ctxt \\<and> t\\<^sub>1 = E t\\<^sub>0 \\<and> t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')\\<close>"], ["proof (chain)\npicking this:\n  t\\<^sub>1 \\<in> value \\<or>\n  (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n      E \\<in> ctxt \\<and>\n      t\\<^sub>1 = E t\\<^sub>0 \\<and>\n      t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')", "show ?case"], ["proof (prove)\nusing this:\n  t\\<^sub>1 \\<in> value \\<or>\n  (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n      E \\<in> ctxt \\<and>\n      t\\<^sub>1 = E t\\<^sub>0 \\<and>\n      t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')\n\ngoal (1 subgoal):\n 1. t\\<^sub>1 \\<bullet>\\<^sub>\\<tau> T\\<^sub>2 \\<in> value \\<or>\n    (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n        E \\<in> ctxt \\<and>\n        t\\<^sub>1 \\<bullet>\\<^sub>\\<tau> T\\<^sub>2 = E t\\<^sub>0 \\<and>\n        t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')", "proof"], ["proof (state)\ngoal (2 subgoals):\n 1. t\\<^sub>1 \\<in> value \\<Longrightarrow>\n    t\\<^sub>1 \\<bullet>\\<^sub>\\<tau> T\\<^sub>2 \\<in> value \\<or>\n    (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n        E \\<in> ctxt \\<and>\n        t\\<^sub>1 \\<bullet>\\<^sub>\\<tau> T\\<^sub>2 = E t\\<^sub>0 \\<and>\n        t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')\n 2. \\<exists>E t\\<^sub>0 t\\<^sub>0'.\n       E \\<in> ctxt \\<and>\n       t\\<^sub>1 = E t\\<^sub>0 \\<and>\n       t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0' \\<Longrightarrow>\n    t\\<^sub>1 \\<bullet>\\<^sub>\\<tau> T\\<^sub>2 \\<in> value \\<or>\n    (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n        E \\<in> ctxt \\<and>\n        t\\<^sub>1 \\<bullet>\\<^sub>\\<tau> T\\<^sub>2 = E t\\<^sub>0 \\<and>\n        t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')", "assume \"t\\<^sub>1 \\<in> value\""], ["proof (state)\nthis:\n  t\\<^sub>1 \\<in> value\n\ngoal (2 subgoals):\n 1. t\\<^sub>1 \\<in> value \\<Longrightarrow>\n    t\\<^sub>1 \\<bullet>\\<^sub>\\<tau> T\\<^sub>2 \\<in> value \\<or>\n    (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n        E \\<in> ctxt \\<and>\n        t\\<^sub>1 \\<bullet>\\<^sub>\\<tau> T\\<^sub>2 = E t\\<^sub>0 \\<and>\n        t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')\n 2. \\<exists>E t\\<^sub>0 t\\<^sub>0'.\n       E \\<in> ctxt \\<and>\n       t\\<^sub>1 = E t\\<^sub>0 \\<and>\n       t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0' \\<Longrightarrow>\n    t\\<^sub>1 \\<bullet>\\<^sub>\\<tau> T\\<^sub>2 \\<in> value \\<or>\n    (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n        E \\<in> ctxt \\<and>\n        t\\<^sub>1 \\<bullet>\\<^sub>\\<tau> T\\<^sub>2 = E t\\<^sub>0 \\<and>\n        t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')", "with T_TApp"], ["proof (chain)\npicking this:\n  [] \\<turnstile> t\\<^sub>1 : (\\<forall><:T\\<^sub>1\\<^sub>1.\n                                  T\\<^sub>1\\<^sub>2)\n  t\\<^sub>1 \\<in> value \\<or>\n  (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n      E \\<in> ctxt \\<and>\n      t\\<^sub>1 = E t\\<^sub>0 \\<and>\n      t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')\n  [] \\<turnstile> T\\<^sub>2 <: T\\<^sub>1\\<^sub>1\n  t\\<^sub>1 \\<in> value", "obtain t S where \"t\\<^sub>1 = (\\<lambda><:S. t)\""], ["proof (prove)\nusing this:\n  [] \\<turnstile> t\\<^sub>1 : (\\<forall><:T\\<^sub>1\\<^sub>1.\n                                  T\\<^sub>1\\<^sub>2)\n  t\\<^sub>1 \\<in> value \\<or>\n  (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n      E \\<in> ctxt \\<and>\n      t\\<^sub>1 = E t\\<^sub>0 \\<and>\n      t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')\n  [] \\<turnstile> T\\<^sub>2 <: T\\<^sub>1\\<^sub>1\n  t\\<^sub>1 \\<in> value\n\ngoal (1 subgoal):\n 1. (\\<And>S t.\n        t\\<^sub>1 = (\\<lambda><:S. t) \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by (auto dest!: TyAll_canonical)"], ["proof (state)\nthis:\n  t\\<^sub>1 = (\\<lambda><:S. t)\n\ngoal (2 subgoals):\n 1. t\\<^sub>1 \\<in> value \\<Longrightarrow>\n    t\\<^sub>1 \\<bullet>\\<^sub>\\<tau> T\\<^sub>2 \\<in> value \\<or>\n    (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n        E \\<in> ctxt \\<and>\n        t\\<^sub>1 \\<bullet>\\<^sub>\\<tau> T\\<^sub>2 = E t\\<^sub>0 \\<and>\n        t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')\n 2. \\<exists>E t\\<^sub>0 t\\<^sub>0'.\n       E \\<in> ctxt \\<and>\n       t\\<^sub>1 = E t\\<^sub>0 \\<and>\n       t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0' \\<Longrightarrow>\n    t\\<^sub>1 \\<bullet>\\<^sub>\\<tau> T\\<^sub>2 \\<in> value \\<or>\n    (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n        E \\<in> ctxt \\<and>\n        t\\<^sub>1 \\<bullet>\\<^sub>\\<tau> T\\<^sub>2 = E t\\<^sub>0 \\<and>\n        t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')", "hence \"t\\<^sub>1 \\<bullet>\\<^sub>\\<tau> T\\<^sub>2 \\<longmapsto>\\<^sub>c t[0 \\<mapsto>\\<^sub>\\<tau> T\\<^sub>2]\""], ["proof (prove)\nusing this:\n  t\\<^sub>1 = (\\<lambda><:S. t)\n\ngoal (1 subgoal):\n 1. t\\<^sub>1 \\<bullet>\\<^sub>\\<tau> T\\<^sub>2 \\<longmapsto>\\<^sub>c\n    t[0 \\<mapsto>\\<^sub>\\<tau> T\\<^sub>2]", "by simp (rule eval.intros)"], ["proof (state)\nthis:\n  t\\<^sub>1 \\<bullet>\\<^sub>\\<tau> T\\<^sub>2 \\<longmapsto>\\<^sub>c\n  t[0 \\<mapsto>\\<^sub>\\<tau> T\\<^sub>2]\n\ngoal (2 subgoals):\n 1. t\\<^sub>1 \\<in> value \\<Longrightarrow>\n    t\\<^sub>1 \\<bullet>\\<^sub>\\<tau> T\\<^sub>2 \\<in> value \\<or>\n    (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n        E \\<in> ctxt \\<and>\n        t\\<^sub>1 \\<bullet>\\<^sub>\\<tau> T\\<^sub>2 = E t\\<^sub>0 \\<and>\n        t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')\n 2. \\<exists>E t\\<^sub>0 t\\<^sub>0'.\n       E \\<in> ctxt \\<and>\n       t\\<^sub>1 = E t\\<^sub>0 \\<and>\n       t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0' \\<Longrightarrow>\n    t\\<^sub>1 \\<bullet>\\<^sub>\\<tau> T\\<^sub>2 \\<in> value \\<or>\n    (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n        E \\<in> ctxt \\<and>\n        t\\<^sub>1 \\<bullet>\\<^sub>\\<tau> T\\<^sub>2 = E t\\<^sub>0 \\<and>\n        t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')", "thus ?thesis"], ["proof (prove)\nusing this:\n  t\\<^sub>1 \\<bullet>\\<^sub>\\<tau> T\\<^sub>2 \\<longmapsto>\\<^sub>c\n  t[0 \\<mapsto>\\<^sub>\\<tau> T\\<^sub>2]\n\ngoal (1 subgoal):\n 1. t\\<^sub>1 \\<bullet>\\<^sub>\\<tau> T\\<^sub>2 \\<in> value \\<or>\n    (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n        E \\<in> ctxt \\<and>\n        t\\<^sub>1 \\<bullet>\\<^sub>\\<tau> T\\<^sub>2 = E t\\<^sub>0 \\<and>\n        t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')", "by (iprover intro: C_Hole)"], ["proof (state)\nthis:\n  t\\<^sub>1 \\<bullet>\\<^sub>\\<tau> T\\<^sub>2 \\<in> value \\<or>\n  (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n      E \\<in> ctxt \\<and>\n      t\\<^sub>1 \\<bullet>\\<^sub>\\<tau> T\\<^sub>2 = E t\\<^sub>0 \\<and>\n      t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')\n\ngoal (1 subgoal):\n 1. \\<exists>E t\\<^sub>0 t\\<^sub>0'.\n       E \\<in> ctxt \\<and>\n       t\\<^sub>1 = E t\\<^sub>0 \\<and>\n       t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0' \\<Longrightarrow>\n    t\\<^sub>1 \\<bullet>\\<^sub>\\<tau> T\\<^sub>2 \\<in> value \\<or>\n    (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n        E \\<in> ctxt \\<and>\n        t\\<^sub>1 \\<bullet>\\<^sub>\\<tau> T\\<^sub>2 = E t\\<^sub>0 \\<and>\n        t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<exists>E t\\<^sub>0 t\\<^sub>0'.\n       E \\<in> ctxt \\<and>\n       t\\<^sub>1 = E t\\<^sub>0 \\<and>\n       t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0' \\<Longrightarrow>\n    t\\<^sub>1 \\<bullet>\\<^sub>\\<tau> T\\<^sub>2 \\<in> value \\<or>\n    (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n        E \\<in> ctxt \\<and>\n        t\\<^sub>1 \\<bullet>\\<^sub>\\<tau> T\\<^sub>2 = E t\\<^sub>0 \\<and>\n        t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')", "assume \"\\<exists>E t\\<^sub>0 t\\<^sub>0'. E \\<in> ctxt \\<and> t\\<^sub>1 = E t\\<^sub>0 \\<and> t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0'\""], ["proof (state)\nthis:\n  \\<exists>E t\\<^sub>0 t\\<^sub>0'.\n     E \\<in> ctxt \\<and>\n     t\\<^sub>1 = E t\\<^sub>0 \\<and>\n     t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0'\n\ngoal (1 subgoal):\n 1. \\<exists>E t\\<^sub>0 t\\<^sub>0'.\n       E \\<in> ctxt \\<and>\n       t\\<^sub>1 = E t\\<^sub>0 \\<and>\n       t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0' \\<Longrightarrow>\n    t\\<^sub>1 \\<bullet>\\<^sub>\\<tau> T\\<^sub>2 \\<in> value \\<or>\n    (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n        E \\<in> ctxt \\<and>\n        t\\<^sub>1 \\<bullet>\\<^sub>\\<tau> T\\<^sub>2 = E t\\<^sub>0 \\<and>\n        t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')", "thus ?thesis"], ["proof (prove)\nusing this:\n  \\<exists>E t\\<^sub>0 t\\<^sub>0'.\n     E \\<in> ctxt \\<and>\n     t\\<^sub>1 = E t\\<^sub>0 \\<and>\n     t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0'\n\ngoal (1 subgoal):\n 1. t\\<^sub>1 \\<bullet>\\<^sub>\\<tau> T\\<^sub>2 \\<in> value \\<or>\n    (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n        E \\<in> ctxt \\<and>\n        t\\<^sub>1 \\<bullet>\\<^sub>\\<tau> T\\<^sub>2 = E t\\<^sub>0 \\<and>\n        t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')", "by (iprover intro: ctxt_rctxt.intros)"], ["proof (state)\nthis:\n  t\\<^sub>1 \\<bullet>\\<^sub>\\<tau> T\\<^sub>2 \\<in> value \\<or>\n  (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n      E \\<in> ctxt \\<and>\n      t\\<^sub>1 \\<bullet>\\<^sub>\\<tau> T\\<^sub>2 = E t\\<^sub>0 \\<and>\n      t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  t\\<^sub>1 \\<bullet>\\<^sub>\\<tau> T\\<^sub>2 \\<in> value \\<or>\n  (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n      E \\<in> ctxt \\<and>\n      t\\<^sub>1 \\<bullet>\\<^sub>\\<tau> T\\<^sub>2 = E t\\<^sub>0 \\<and>\n      t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')\n\ngoal (6 subgoals):\n 1. \\<And>t S T.\n       \\<lbrakk>[] \\<turnstile> t : S;\n        t \\<in> value \\<or>\n        (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n            E \\<in> ctxt \\<and>\n            t = E t\\<^sub>0 \\<and>\n            t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0');\n        [] \\<turnstile> S <: T\\<rbrakk>\n       \\<Longrightarrow> t \\<in> value \\<or>\n                         (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n                             E \\<in> ctxt \\<and>\n                             t = E t\\<^sub>0 \\<and>\n                             t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')\n 2. \\<And>t\\<^sub>1 T\\<^sub>1 p \\<Delta> t\\<^sub>2 T\\<^sub>2.\n       \\<lbrakk>[] \\<turnstile> t\\<^sub>1 : T\\<^sub>1;\n        t\\<^sub>1 \\<in> value \\<or>\n        (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n            E \\<in> ctxt \\<and>\n            t\\<^sub>1 = E t\\<^sub>0 \\<and>\n            t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0');\n        \\<turnstile> p : T\\<^sub>1 \\<Rightarrow> \\<Delta>;\n        \\<Delta> @ [] \\<turnstile> t\\<^sub>2 : T\\<^sub>2;\n        \\<Delta> @ [] = [] \\<Longrightarrow>\n        t\\<^sub>2 \\<in> value \\<or>\n        (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n            E \\<in> ctxt \\<and>\n            t\\<^sub>2 = E t\\<^sub>0 \\<and>\n            t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')\\<rbrakk>\n       \\<Longrightarrow> (LET p = t\\<^sub>1 IN t\\<^sub>2) \\<in> value \\<or>\n                         (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n                             E \\<in> ctxt \\<and>\n                             (LET p = t\\<^sub>1 IN t\\<^sub>2) =\n                             E t\\<^sub>0 \\<and>\n                             t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')\n 3. \\<And>fs fTs.\n       \\<lbrakk>[] \\<turnstile> fs [:] fTs;\n        (\\<forall>(l, t)\\<in>set fs. t \\<in> value) \\<or>\n        (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n            E \\<in> rctxt \\<and>\n            fs = E t\\<^sub>0 \\<and>\n            t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')\\<rbrakk>\n       \\<Longrightarrow> Rcd fs \\<in> value \\<or>\n                         (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n                             E \\<in> ctxt \\<and>\n                             Rcd fs = E t\\<^sub>0 \\<and>\n                             t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')\n 4. \\<And>t fTs l T.\n       \\<lbrakk>[] \\<turnstile> t : RcdT fTs;\n        t \\<in> value \\<or>\n        (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n            E \\<in> ctxt \\<and>\n            t = E t\\<^sub>0 \\<and>\n            t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0');\n        fTs\\<langle>l\\<rangle>\\<^sub>? = \\<lfloor>T\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> t..l \\<in> value \\<or>\n                         (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n                             E \\<in> ctxt \\<and>\n                             t..l = E t\\<^sub>0 \\<and>\n                             t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')\n 5. [] \\<turnstile>\\<^sub>w\\<^sub>f \\<Longrightarrow>\n    (\\<forall>(l, t)\\<in>set []. t \\<in> value) \\<or>\n    (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n        E \\<in> rctxt \\<and>\n        [] = E t\\<^sub>0 \\<and> t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')\n 6. \\<And>t T fs fTs l.\n       \\<lbrakk>[] \\<turnstile> t : T;\n        t \\<in> value \\<or>\n        (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n            E \\<in> ctxt \\<and>\n            t = E t\\<^sub>0 \\<and>\n            t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0');\n        [] \\<turnstile> fs [:] fTs;\n        (\\<forall>(l, t)\\<in>set fs. t \\<in> value) \\<or>\n        (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n            E \\<in> rctxt \\<and>\n            fs = E t\\<^sub>0 \\<and>\n            t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0');\n        fs\\<langle>l\\<rangle>\\<^sub>? = \\<bottom>\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>(l, t)\\<in>set ((l, t) \\<Colon> fs).\n                             t \\<in> value) \\<or>\n                         (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n                             E \\<in> rctxt \\<and>\n                             (l, t) \\<Colon> fs = E t\\<^sub>0 \\<and>\n                             t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')", "next"], ["proof (state)\ngoal (6 subgoals):\n 1. \\<And>t S T.\n       \\<lbrakk>[] \\<turnstile> t : S;\n        t \\<in> value \\<or>\n        (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n            E \\<in> ctxt \\<and>\n            t = E t\\<^sub>0 \\<and>\n            t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0');\n        [] \\<turnstile> S <: T\\<rbrakk>\n       \\<Longrightarrow> t \\<in> value \\<or>\n                         (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n                             E \\<in> ctxt \\<and>\n                             t = E t\\<^sub>0 \\<and>\n                             t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')\n 2. \\<And>t\\<^sub>1 T\\<^sub>1 p \\<Delta> t\\<^sub>2 T\\<^sub>2.\n       \\<lbrakk>[] \\<turnstile> t\\<^sub>1 : T\\<^sub>1;\n        t\\<^sub>1 \\<in> value \\<or>\n        (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n            E \\<in> ctxt \\<and>\n            t\\<^sub>1 = E t\\<^sub>0 \\<and>\n            t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0');\n        \\<turnstile> p : T\\<^sub>1 \\<Rightarrow> \\<Delta>;\n        \\<Delta> @ [] \\<turnstile> t\\<^sub>2 : T\\<^sub>2;\n        \\<Delta> @ [] = [] \\<Longrightarrow>\n        t\\<^sub>2 \\<in> value \\<or>\n        (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n            E \\<in> ctxt \\<and>\n            t\\<^sub>2 = E t\\<^sub>0 \\<and>\n            t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')\\<rbrakk>\n       \\<Longrightarrow> (LET p = t\\<^sub>1 IN t\\<^sub>2) \\<in> value \\<or>\n                         (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n                             E \\<in> ctxt \\<and>\n                             (LET p = t\\<^sub>1 IN t\\<^sub>2) =\n                             E t\\<^sub>0 \\<and>\n                             t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')\n 3. \\<And>fs fTs.\n       \\<lbrakk>[] \\<turnstile> fs [:] fTs;\n        (\\<forall>(l, t)\\<in>set fs. t \\<in> value) \\<or>\n        (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n            E \\<in> rctxt \\<and>\n            fs = E t\\<^sub>0 \\<and>\n            t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')\\<rbrakk>\n       \\<Longrightarrow> Rcd fs \\<in> value \\<or>\n                         (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n                             E \\<in> ctxt \\<and>\n                             Rcd fs = E t\\<^sub>0 \\<and>\n                             t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')\n 4. \\<And>t fTs l T.\n       \\<lbrakk>[] \\<turnstile> t : RcdT fTs;\n        t \\<in> value \\<or>\n        (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n            E \\<in> ctxt \\<and>\n            t = E t\\<^sub>0 \\<and>\n            t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0');\n        fTs\\<langle>l\\<rangle>\\<^sub>? = \\<lfloor>T\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> t..l \\<in> value \\<or>\n                         (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n                             E \\<in> ctxt \\<and>\n                             t..l = E t\\<^sub>0 \\<and>\n                             t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')\n 5. [] \\<turnstile>\\<^sub>w\\<^sub>f \\<Longrightarrow>\n    (\\<forall>(l, t)\\<in>set []. t \\<in> value) \\<or>\n    (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n        E \\<in> rctxt \\<and>\n        [] = E t\\<^sub>0 \\<and> t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')\n 6. \\<And>t T fs fTs l.\n       \\<lbrakk>[] \\<turnstile> t : T;\n        t \\<in> value \\<or>\n        (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n            E \\<in> ctxt \\<and>\n            t = E t\\<^sub>0 \\<and>\n            t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0');\n        [] \\<turnstile> fs [:] fTs;\n        (\\<forall>(l, t)\\<in>set fs. t \\<in> value) \\<or>\n        (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n            E \\<in> rctxt \\<and>\n            fs = E t\\<^sub>0 \\<and>\n            t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0');\n        fs\\<langle>l\\<rangle>\\<^sub>? = \\<bottom>\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>(l, t)\\<in>set ((l, t) \\<Colon> fs).\n                             t \\<in> value) \\<or>\n                         (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n                             E \\<in> rctxt \\<and>\n                             (l, t) \\<Colon> fs = E t\\<^sub>0 \\<and>\n                             t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')", "case (T_Sub t S T)"], ["proof (state)\nthis:\n  [] \\<turnstile> t : S\n  t \\<in> value \\<or>\n  (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n      E \\<in> ctxt \\<and>\n      t = E t\\<^sub>0 \\<and> t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')\n  [] \\<turnstile> S <: T\n\ngoal (6 subgoals):\n 1. \\<And>t S T.\n       \\<lbrakk>[] \\<turnstile> t : S;\n        t \\<in> value \\<or>\n        (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n            E \\<in> ctxt \\<and>\n            t = E t\\<^sub>0 \\<and>\n            t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0');\n        [] \\<turnstile> S <: T\\<rbrakk>\n       \\<Longrightarrow> t \\<in> value \\<or>\n                         (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n                             E \\<in> ctxt \\<and>\n                             t = E t\\<^sub>0 \\<and>\n                             t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')\n 2. \\<And>t\\<^sub>1 T\\<^sub>1 p \\<Delta> t\\<^sub>2 T\\<^sub>2.\n       \\<lbrakk>[] \\<turnstile> t\\<^sub>1 : T\\<^sub>1;\n        t\\<^sub>1 \\<in> value \\<or>\n        (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n            E \\<in> ctxt \\<and>\n            t\\<^sub>1 = E t\\<^sub>0 \\<and>\n            t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0');\n        \\<turnstile> p : T\\<^sub>1 \\<Rightarrow> \\<Delta>;\n        \\<Delta> @ [] \\<turnstile> t\\<^sub>2 : T\\<^sub>2;\n        \\<Delta> @ [] = [] \\<Longrightarrow>\n        t\\<^sub>2 \\<in> value \\<or>\n        (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n            E \\<in> ctxt \\<and>\n            t\\<^sub>2 = E t\\<^sub>0 \\<and>\n            t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')\\<rbrakk>\n       \\<Longrightarrow> (LET p = t\\<^sub>1 IN t\\<^sub>2) \\<in> value \\<or>\n                         (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n                             E \\<in> ctxt \\<and>\n                             (LET p = t\\<^sub>1 IN t\\<^sub>2) =\n                             E t\\<^sub>0 \\<and>\n                             t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')\n 3. \\<And>fs fTs.\n       \\<lbrakk>[] \\<turnstile> fs [:] fTs;\n        (\\<forall>(l, t)\\<in>set fs. t \\<in> value) \\<or>\n        (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n            E \\<in> rctxt \\<and>\n            fs = E t\\<^sub>0 \\<and>\n            t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')\\<rbrakk>\n       \\<Longrightarrow> Rcd fs \\<in> value \\<or>\n                         (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n                             E \\<in> ctxt \\<and>\n                             Rcd fs = E t\\<^sub>0 \\<and>\n                             t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')\n 4. \\<And>t fTs l T.\n       \\<lbrakk>[] \\<turnstile> t : RcdT fTs;\n        t \\<in> value \\<or>\n        (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n            E \\<in> ctxt \\<and>\n            t = E t\\<^sub>0 \\<and>\n            t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0');\n        fTs\\<langle>l\\<rangle>\\<^sub>? = \\<lfloor>T\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> t..l \\<in> value \\<or>\n                         (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n                             E \\<in> ctxt \\<and>\n                             t..l = E t\\<^sub>0 \\<and>\n                             t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')\n 5. [] \\<turnstile>\\<^sub>w\\<^sub>f \\<Longrightarrow>\n    (\\<forall>(l, t)\\<in>set []. t \\<in> value) \\<or>\n    (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n        E \\<in> rctxt \\<and>\n        [] = E t\\<^sub>0 \\<and> t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')\n 6. \\<And>t T fs fTs l.\n       \\<lbrakk>[] \\<turnstile> t : T;\n        t \\<in> value \\<or>\n        (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n            E \\<in> ctxt \\<and>\n            t = E t\\<^sub>0 \\<and>\n            t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0');\n        [] \\<turnstile> fs [:] fTs;\n        (\\<forall>(l, t)\\<in>set fs. t \\<in> value) \\<or>\n        (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n            E \\<in> rctxt \\<and>\n            fs = E t\\<^sub>0 \\<and>\n            t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0');\n        fs\\<langle>l\\<rangle>\\<^sub>? = \\<bottom>\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>(l, t)\\<in>set ((l, t) \\<Colon> fs).\n                             t \\<in> value) \\<or>\n                         (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n                             E \\<in> rctxt \\<and>\n                             (l, t) \\<Colon> fs = E t\\<^sub>0 \\<and>\n                             t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')", "show ?case"], ["proof (prove)\ngoal (1 subgoal):\n 1. t \\<in> value \\<or>\n    (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n        E \\<in> ctxt \\<and>\n        t = E t\\<^sub>0 \\<and> t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')", "by (rule T_Sub)"], ["proof (state)\nthis:\n  t \\<in> value \\<or>\n  (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n      E \\<in> ctxt \\<and>\n      t = E t\\<^sub>0 \\<and> t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')\n\ngoal (5 subgoals):\n 1. \\<And>t\\<^sub>1 T\\<^sub>1 p \\<Delta> t\\<^sub>2 T\\<^sub>2.\n       \\<lbrakk>[] \\<turnstile> t\\<^sub>1 : T\\<^sub>1;\n        t\\<^sub>1 \\<in> value \\<or>\n        (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n            E \\<in> ctxt \\<and>\n            t\\<^sub>1 = E t\\<^sub>0 \\<and>\n            t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0');\n        \\<turnstile> p : T\\<^sub>1 \\<Rightarrow> \\<Delta>;\n        \\<Delta> @ [] \\<turnstile> t\\<^sub>2 : T\\<^sub>2;\n        \\<Delta> @ [] = [] \\<Longrightarrow>\n        t\\<^sub>2 \\<in> value \\<or>\n        (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n            E \\<in> ctxt \\<and>\n            t\\<^sub>2 = E t\\<^sub>0 \\<and>\n            t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')\\<rbrakk>\n       \\<Longrightarrow> (LET p = t\\<^sub>1 IN t\\<^sub>2) \\<in> value \\<or>\n                         (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n                             E \\<in> ctxt \\<and>\n                             (LET p = t\\<^sub>1 IN t\\<^sub>2) =\n                             E t\\<^sub>0 \\<and>\n                             t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')\n 2. \\<And>fs fTs.\n       \\<lbrakk>[] \\<turnstile> fs [:] fTs;\n        (\\<forall>(l, t)\\<in>set fs. t \\<in> value) \\<or>\n        (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n            E \\<in> rctxt \\<and>\n            fs = E t\\<^sub>0 \\<and>\n            t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')\\<rbrakk>\n       \\<Longrightarrow> Rcd fs \\<in> value \\<or>\n                         (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n                             E \\<in> ctxt \\<and>\n                             Rcd fs = E t\\<^sub>0 \\<and>\n                             t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')\n 3. \\<And>t fTs l T.\n       \\<lbrakk>[] \\<turnstile> t : RcdT fTs;\n        t \\<in> value \\<or>\n        (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n            E \\<in> ctxt \\<and>\n            t = E t\\<^sub>0 \\<and>\n            t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0');\n        fTs\\<langle>l\\<rangle>\\<^sub>? = \\<lfloor>T\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> t..l \\<in> value \\<or>\n                         (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n                             E \\<in> ctxt \\<and>\n                             t..l = E t\\<^sub>0 \\<and>\n                             t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')\n 4. [] \\<turnstile>\\<^sub>w\\<^sub>f \\<Longrightarrow>\n    (\\<forall>(l, t)\\<in>set []. t \\<in> value) \\<or>\n    (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n        E \\<in> rctxt \\<and>\n        [] = E t\\<^sub>0 \\<and> t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')\n 5. \\<And>t T fs fTs l.\n       \\<lbrakk>[] \\<turnstile> t : T;\n        t \\<in> value \\<or>\n        (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n            E \\<in> ctxt \\<and>\n            t = E t\\<^sub>0 \\<and>\n            t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0');\n        [] \\<turnstile> fs [:] fTs;\n        (\\<forall>(l, t)\\<in>set fs. t \\<in> value) \\<or>\n        (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n            E \\<in> rctxt \\<and>\n            fs = E t\\<^sub>0 \\<and>\n            t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0');\n        fs\\<langle>l\\<rangle>\\<^sub>? = \\<bottom>\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>(l, t)\\<in>set ((l, t) \\<Colon> fs).\n                             t \\<in> value) \\<or>\n                         (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n                             E \\<in> rctxt \\<and>\n                             (l, t) \\<Colon> fs = E t\\<^sub>0 \\<and>\n                             t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')", "next"], ["proof (state)\ngoal (5 subgoals):\n 1. \\<And>t\\<^sub>1 T\\<^sub>1 p \\<Delta> t\\<^sub>2 T\\<^sub>2.\n       \\<lbrakk>[] \\<turnstile> t\\<^sub>1 : T\\<^sub>1;\n        t\\<^sub>1 \\<in> value \\<or>\n        (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n            E \\<in> ctxt \\<and>\n            t\\<^sub>1 = E t\\<^sub>0 \\<and>\n            t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0');\n        \\<turnstile> p : T\\<^sub>1 \\<Rightarrow> \\<Delta>;\n        \\<Delta> @ [] \\<turnstile> t\\<^sub>2 : T\\<^sub>2;\n        \\<Delta> @ [] = [] \\<Longrightarrow>\n        t\\<^sub>2 \\<in> value \\<or>\n        (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n            E \\<in> ctxt \\<and>\n            t\\<^sub>2 = E t\\<^sub>0 \\<and>\n            t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')\\<rbrakk>\n       \\<Longrightarrow> (LET p = t\\<^sub>1 IN t\\<^sub>2) \\<in> value \\<or>\n                         (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n                             E \\<in> ctxt \\<and>\n                             (LET p = t\\<^sub>1 IN t\\<^sub>2) =\n                             E t\\<^sub>0 \\<and>\n                             t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')\n 2. \\<And>fs fTs.\n       \\<lbrakk>[] \\<turnstile> fs [:] fTs;\n        (\\<forall>(l, t)\\<in>set fs. t \\<in> value) \\<or>\n        (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n            E \\<in> rctxt \\<and>\n            fs = E t\\<^sub>0 \\<and>\n            t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')\\<rbrakk>\n       \\<Longrightarrow> Rcd fs \\<in> value \\<or>\n                         (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n                             E \\<in> ctxt \\<and>\n                             Rcd fs = E t\\<^sub>0 \\<and>\n                             t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')\n 3. \\<And>t fTs l T.\n       \\<lbrakk>[] \\<turnstile> t : RcdT fTs;\n        t \\<in> value \\<or>\n        (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n            E \\<in> ctxt \\<and>\n            t = E t\\<^sub>0 \\<and>\n            t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0');\n        fTs\\<langle>l\\<rangle>\\<^sub>? = \\<lfloor>T\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> t..l \\<in> value \\<or>\n                         (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n                             E \\<in> ctxt \\<and>\n                             t..l = E t\\<^sub>0 \\<and>\n                             t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')\n 4. [] \\<turnstile>\\<^sub>w\\<^sub>f \\<Longrightarrow>\n    (\\<forall>(l, t)\\<in>set []. t \\<in> value) \\<or>\n    (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n        E \\<in> rctxt \\<and>\n        [] = E t\\<^sub>0 \\<and> t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')\n 5. \\<And>t T fs fTs l.\n       \\<lbrakk>[] \\<turnstile> t : T;\n        t \\<in> value \\<or>\n        (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n            E \\<in> ctxt \\<and>\n            t = E t\\<^sub>0 \\<and>\n            t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0');\n        [] \\<turnstile> fs [:] fTs;\n        (\\<forall>(l, t)\\<in>set fs. t \\<in> value) \\<or>\n        (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n            E \\<in> rctxt \\<and>\n            fs = E t\\<^sub>0 \\<and>\n            t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0');\n        fs\\<langle>l\\<rangle>\\<^sub>? = \\<bottom>\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>(l, t)\\<in>set ((l, t) \\<Colon> fs).\n                             t \\<in> value) \\<or>\n                         (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n                             E \\<in> rctxt \\<and>\n                             (l, t) \\<Colon> fs = E t\\<^sub>0 \\<and>\n                             t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')", "case (T_Let t\\<^sub>1 T\\<^sub>1 p \\<Delta> t\\<^sub>2 T\\<^sub>2)"], ["proof (state)\nthis:\n  [] \\<turnstile> t\\<^sub>1 : T\\<^sub>1\n  t\\<^sub>1 \\<in> value \\<or>\n  (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n      E \\<in> ctxt \\<and>\n      t\\<^sub>1 = E t\\<^sub>0 \\<and>\n      t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')\n  \\<turnstile> p : T\\<^sub>1 \\<Rightarrow> \\<Delta>\n  \\<Delta> @ [] \\<turnstile> t\\<^sub>2 : T\\<^sub>2\n  \\<Delta> @ [] = [] \\<Longrightarrow>\n  t\\<^sub>2 \\<in> value \\<or>\n  (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n      E \\<in> ctxt \\<and>\n      t\\<^sub>2 = E t\\<^sub>0 \\<and>\n      t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')\n\ngoal (5 subgoals):\n 1. \\<And>t\\<^sub>1 T\\<^sub>1 p \\<Delta> t\\<^sub>2 T\\<^sub>2.\n       \\<lbrakk>[] \\<turnstile> t\\<^sub>1 : T\\<^sub>1;\n        t\\<^sub>1 \\<in> value \\<or>\n        (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n            E \\<in> ctxt \\<and>\n            t\\<^sub>1 = E t\\<^sub>0 \\<and>\n            t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0');\n        \\<turnstile> p : T\\<^sub>1 \\<Rightarrow> \\<Delta>;\n        \\<Delta> @ [] \\<turnstile> t\\<^sub>2 : T\\<^sub>2;\n        \\<Delta> @ [] = [] \\<Longrightarrow>\n        t\\<^sub>2 \\<in> value \\<or>\n        (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n            E \\<in> ctxt \\<and>\n            t\\<^sub>2 = E t\\<^sub>0 \\<and>\n            t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')\\<rbrakk>\n       \\<Longrightarrow> (LET p = t\\<^sub>1 IN t\\<^sub>2) \\<in> value \\<or>\n                         (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n                             E \\<in> ctxt \\<and>\n                             (LET p = t\\<^sub>1 IN t\\<^sub>2) =\n                             E t\\<^sub>0 \\<and>\n                             t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')\n 2. \\<And>fs fTs.\n       \\<lbrakk>[] \\<turnstile> fs [:] fTs;\n        (\\<forall>(l, t)\\<in>set fs. t \\<in> value) \\<or>\n        (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n            E \\<in> rctxt \\<and>\n            fs = E t\\<^sub>0 \\<and>\n            t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')\\<rbrakk>\n       \\<Longrightarrow> Rcd fs \\<in> value \\<or>\n                         (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n                             E \\<in> ctxt \\<and>\n                             Rcd fs = E t\\<^sub>0 \\<and>\n                             t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')\n 3. \\<And>t fTs l T.\n       \\<lbrakk>[] \\<turnstile> t : RcdT fTs;\n        t \\<in> value \\<or>\n        (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n            E \\<in> ctxt \\<and>\n            t = E t\\<^sub>0 \\<and>\n            t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0');\n        fTs\\<langle>l\\<rangle>\\<^sub>? = \\<lfloor>T\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> t..l \\<in> value \\<or>\n                         (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n                             E \\<in> ctxt \\<and>\n                             t..l = E t\\<^sub>0 \\<and>\n                             t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')\n 4. [] \\<turnstile>\\<^sub>w\\<^sub>f \\<Longrightarrow>\n    (\\<forall>(l, t)\\<in>set []. t \\<in> value) \\<or>\n    (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n        E \\<in> rctxt \\<and>\n        [] = E t\\<^sub>0 \\<and> t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')\n 5. \\<And>t T fs fTs l.\n       \\<lbrakk>[] \\<turnstile> t : T;\n        t \\<in> value \\<or>\n        (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n            E \\<in> ctxt \\<and>\n            t = E t\\<^sub>0 \\<and>\n            t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0');\n        [] \\<turnstile> fs [:] fTs;\n        (\\<forall>(l, t)\\<in>set fs. t \\<in> value) \\<or>\n        (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n            E \\<in> rctxt \\<and>\n            fs = E t\\<^sub>0 \\<and>\n            t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0');\n        fs\\<langle>l\\<rangle>\\<^sub>? = \\<bottom>\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>(l, t)\\<in>set ((l, t) \\<Colon> fs).\n                             t \\<in> value) \\<or>\n                         (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n                             E \\<in> rctxt \\<and>\n                             (l, t) \\<Colon> fs = E t\\<^sub>0 \\<and>\n                             t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')", "from \\<open>t\\<^sub>1 \\<in> value \\<or> (\\<exists>E t\\<^sub>0 t\\<^sub>0'. E \\<in> ctxt \\<and> t\\<^sub>1 = E t\\<^sub>0 \\<and> t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')\\<close>"], ["proof (chain)\npicking this:\n  t\\<^sub>1 \\<in> value \\<or>\n  (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n      E \\<in> ctxt \\<and>\n      t\\<^sub>1 = E t\\<^sub>0 \\<and>\n      t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')", "show ?case"], ["proof (prove)\nusing this:\n  t\\<^sub>1 \\<in> value \\<or>\n  (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n      E \\<in> ctxt \\<and>\n      t\\<^sub>1 = E t\\<^sub>0 \\<and>\n      t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')\n\ngoal (1 subgoal):\n 1. (LET p = t\\<^sub>1 IN t\\<^sub>2) \\<in> value \\<or>\n    (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n        E \\<in> ctxt \\<and>\n        (LET p = t\\<^sub>1 IN t\\<^sub>2) = E t\\<^sub>0 \\<and>\n        t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')", "proof"], ["proof (state)\ngoal (2 subgoals):\n 1. t\\<^sub>1 \\<in> value \\<Longrightarrow>\n    (LET p = t\\<^sub>1 IN t\\<^sub>2) \\<in> value \\<or>\n    (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n        E \\<in> ctxt \\<and>\n        (LET p = t\\<^sub>1 IN t\\<^sub>2) = E t\\<^sub>0 \\<and>\n        t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')\n 2. \\<exists>E t\\<^sub>0 t\\<^sub>0'.\n       E \\<in> ctxt \\<and>\n       t\\<^sub>1 = E t\\<^sub>0 \\<and>\n       t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0' \\<Longrightarrow>\n    (LET p = t\\<^sub>1 IN t\\<^sub>2) \\<in> value \\<or>\n    (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n        E \\<in> ctxt \\<and>\n        (LET p = t\\<^sub>1 IN t\\<^sub>2) = E t\\<^sub>0 \\<and>\n        t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')", "assume t\\<^sub>1: \"t\\<^sub>1 \\<in> value\""], ["proof (state)\nthis:\n  t\\<^sub>1 \\<in> value\n\ngoal (2 subgoals):\n 1. t\\<^sub>1 \\<in> value \\<Longrightarrow>\n    (LET p = t\\<^sub>1 IN t\\<^sub>2) \\<in> value \\<or>\n    (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n        E \\<in> ctxt \\<and>\n        (LET p = t\\<^sub>1 IN t\\<^sub>2) = E t\\<^sub>0 \\<and>\n        t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')\n 2. \\<exists>E t\\<^sub>0 t\\<^sub>0'.\n       E \\<in> ctxt \\<and>\n       t\\<^sub>1 = E t\\<^sub>0 \\<and>\n       t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0' \\<Longrightarrow>\n    (LET p = t\\<^sub>1 IN t\\<^sub>2) \\<in> value \\<or>\n    (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n        E \\<in> ctxt \\<and>\n        (LET p = t\\<^sub>1 IN t\\<^sub>2) = E t\\<^sub>0 \\<and>\n        t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')", "with T_Let"], ["proof (chain)\npicking this:\n  [] \\<turnstile> t\\<^sub>1 : T\\<^sub>1\n  t\\<^sub>1 \\<in> value \\<or>\n  (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n      E \\<in> ctxt \\<and>\n      t\\<^sub>1 = E t\\<^sub>0 \\<and>\n      t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')\n  \\<turnstile> p : T\\<^sub>1 \\<Rightarrow> \\<Delta>\n  \\<Delta> @ [] \\<turnstile> t\\<^sub>2 : T\\<^sub>2\n  \\<Delta> @ [] = [] \\<Longrightarrow>\n  t\\<^sub>2 \\<in> value \\<or>\n  (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n      E \\<in> ctxt \\<and>\n      t\\<^sub>2 = E t\\<^sub>0 \\<and>\n      t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')\n  t\\<^sub>1 \\<in> value", "have \"\\<exists>ts. \\<turnstile> p \\<rhd> t\\<^sub>1 \\<Rightarrow> ts\""], ["proof (prove)\nusing this:\n  [] \\<turnstile> t\\<^sub>1 : T\\<^sub>1\n  t\\<^sub>1 \\<in> value \\<or>\n  (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n      E \\<in> ctxt \\<and>\n      t\\<^sub>1 = E t\\<^sub>0 \\<and>\n      t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')\n  \\<turnstile> p : T\\<^sub>1 \\<Rightarrow> \\<Delta>\n  \\<Delta> @ [] \\<turnstile> t\\<^sub>2 : T\\<^sub>2\n  \\<Delta> @ [] = [] \\<Longrightarrow>\n  t\\<^sub>2 \\<in> value \\<or>\n  (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n      E \\<in> ctxt \\<and>\n      t\\<^sub>2 = E t\\<^sub>0 \\<and>\n      t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')\n  t\\<^sub>1 \\<in> value\n\ngoal (1 subgoal):\n 1. \\<exists>ts. \\<turnstile> p \\<rhd> t\\<^sub>1 \\<Rightarrow> ts", "by (auto intro: ptyping_match)"], ["proof (state)\nthis:\n  \\<exists>ts. \\<turnstile> p \\<rhd> t\\<^sub>1 \\<Rightarrow> ts\n\ngoal (2 subgoals):\n 1. t\\<^sub>1 \\<in> value \\<Longrightarrow>\n    (LET p = t\\<^sub>1 IN t\\<^sub>2) \\<in> value \\<or>\n    (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n        E \\<in> ctxt \\<and>\n        (LET p = t\\<^sub>1 IN t\\<^sub>2) = E t\\<^sub>0 \\<and>\n        t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')\n 2. \\<exists>E t\\<^sub>0 t\\<^sub>0'.\n       E \\<in> ctxt \\<and>\n       t\\<^sub>1 = E t\\<^sub>0 \\<and>\n       t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0' \\<Longrightarrow>\n    (LET p = t\\<^sub>1 IN t\\<^sub>2) \\<in> value \\<or>\n    (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n        E \\<in> ctxt \\<and>\n        (LET p = t\\<^sub>1 IN t\\<^sub>2) = E t\\<^sub>0 \\<and>\n        t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')", "with t\\<^sub>1"], ["proof (chain)\npicking this:\n  t\\<^sub>1 \\<in> value\n  \\<exists>ts. \\<turnstile> p \\<rhd> t\\<^sub>1 \\<Rightarrow> ts", "show ?thesis"], ["proof (prove)\nusing this:\n  t\\<^sub>1 \\<in> value\n  \\<exists>ts. \\<turnstile> p \\<rhd> t\\<^sub>1 \\<Rightarrow> ts\n\ngoal (1 subgoal):\n 1. (LET p = t\\<^sub>1 IN t\\<^sub>2) \\<in> value \\<or>\n    (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n        E \\<in> ctxt \\<and>\n        (LET p = t\\<^sub>1 IN t\\<^sub>2) = E t\\<^sub>0 \\<and>\n        t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')", "by (iprover intro: eval.intros C_Hole)"], ["proof (state)\nthis:\n  (LET p = t\\<^sub>1 IN t\\<^sub>2) \\<in> value \\<or>\n  (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n      E \\<in> ctxt \\<and>\n      (LET p = t\\<^sub>1 IN t\\<^sub>2) = E t\\<^sub>0 \\<and>\n      t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')\n\ngoal (1 subgoal):\n 1. \\<exists>E t\\<^sub>0 t\\<^sub>0'.\n       E \\<in> ctxt \\<and>\n       t\\<^sub>1 = E t\\<^sub>0 \\<and>\n       t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0' \\<Longrightarrow>\n    (LET p = t\\<^sub>1 IN t\\<^sub>2) \\<in> value \\<or>\n    (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n        E \\<in> ctxt \\<and>\n        (LET p = t\\<^sub>1 IN t\\<^sub>2) = E t\\<^sub>0 \\<and>\n        t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<exists>E t\\<^sub>0 t\\<^sub>0'.\n       E \\<in> ctxt \\<and>\n       t\\<^sub>1 = E t\\<^sub>0 \\<and>\n       t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0' \\<Longrightarrow>\n    (LET p = t\\<^sub>1 IN t\\<^sub>2) \\<in> value \\<or>\n    (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n        E \\<in> ctxt \\<and>\n        (LET p = t\\<^sub>1 IN t\\<^sub>2) = E t\\<^sub>0 \\<and>\n        t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')", "assume \"\\<exists>E t\\<^sub>0 t\\<^sub>0'. E \\<in> ctxt \\<and> t\\<^sub>1 = E t\\<^sub>0 \\<and> t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0'\""], ["proof (state)\nthis:\n  \\<exists>E t\\<^sub>0 t\\<^sub>0'.\n     E \\<in> ctxt \\<and>\n     t\\<^sub>1 = E t\\<^sub>0 \\<and>\n     t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0'\n\ngoal (1 subgoal):\n 1. \\<exists>E t\\<^sub>0 t\\<^sub>0'.\n       E \\<in> ctxt \\<and>\n       t\\<^sub>1 = E t\\<^sub>0 \\<and>\n       t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0' \\<Longrightarrow>\n    (LET p = t\\<^sub>1 IN t\\<^sub>2) \\<in> value \\<or>\n    (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n        E \\<in> ctxt \\<and>\n        (LET p = t\\<^sub>1 IN t\\<^sub>2) = E t\\<^sub>0 \\<and>\n        t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')", "thus ?thesis"], ["proof (prove)\nusing this:\n  \\<exists>E t\\<^sub>0 t\\<^sub>0'.\n     E \\<in> ctxt \\<and>\n     t\\<^sub>1 = E t\\<^sub>0 \\<and>\n     t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0'\n\ngoal (1 subgoal):\n 1. (LET p = t\\<^sub>1 IN t\\<^sub>2) \\<in> value \\<or>\n    (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n        E \\<in> ctxt \\<and>\n        (LET p = t\\<^sub>1 IN t\\<^sub>2) = E t\\<^sub>0 \\<and>\n        t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')", "by (iprover intro: ctxt_rctxt.intros)"], ["proof (state)\nthis:\n  (LET p = t\\<^sub>1 IN t\\<^sub>2) \\<in> value \\<or>\n  (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n      E \\<in> ctxt \\<and>\n      (LET p = t\\<^sub>1 IN t\\<^sub>2) = E t\\<^sub>0 \\<and>\n      t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  (LET p = t\\<^sub>1 IN t\\<^sub>2) \\<in> value \\<or>\n  (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n      E \\<in> ctxt \\<and>\n      (LET p = t\\<^sub>1 IN t\\<^sub>2) = E t\\<^sub>0 \\<and>\n      t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')\n\ngoal (4 subgoals):\n 1. \\<And>fs fTs.\n       \\<lbrakk>[] \\<turnstile> fs [:] fTs;\n        (\\<forall>(l, t)\\<in>set fs. t \\<in> value) \\<or>\n        (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n            E \\<in> rctxt \\<and>\n            fs = E t\\<^sub>0 \\<and>\n            t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')\\<rbrakk>\n       \\<Longrightarrow> Rcd fs \\<in> value \\<or>\n                         (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n                             E \\<in> ctxt \\<and>\n                             Rcd fs = E t\\<^sub>0 \\<and>\n                             t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')\n 2. \\<And>t fTs l T.\n       \\<lbrakk>[] \\<turnstile> t : RcdT fTs;\n        t \\<in> value \\<or>\n        (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n            E \\<in> ctxt \\<and>\n            t = E t\\<^sub>0 \\<and>\n            t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0');\n        fTs\\<langle>l\\<rangle>\\<^sub>? = \\<lfloor>T\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> t..l \\<in> value \\<or>\n                         (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n                             E \\<in> ctxt \\<and>\n                             t..l = E t\\<^sub>0 \\<and>\n                             t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')\n 3. [] \\<turnstile>\\<^sub>w\\<^sub>f \\<Longrightarrow>\n    (\\<forall>(l, t)\\<in>set []. t \\<in> value) \\<or>\n    (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n        E \\<in> rctxt \\<and>\n        [] = E t\\<^sub>0 \\<and> t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')\n 4. \\<And>t T fs fTs l.\n       \\<lbrakk>[] \\<turnstile> t : T;\n        t \\<in> value \\<or>\n        (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n            E \\<in> ctxt \\<and>\n            t = E t\\<^sub>0 \\<and>\n            t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0');\n        [] \\<turnstile> fs [:] fTs;\n        (\\<forall>(l, t)\\<in>set fs. t \\<in> value) \\<or>\n        (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n            E \\<in> rctxt \\<and>\n            fs = E t\\<^sub>0 \\<and>\n            t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0');\n        fs\\<langle>l\\<rangle>\\<^sub>? = \\<bottom>\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>(l, t)\\<in>set ((l, t) \\<Colon> fs).\n                             t \\<in> value) \\<or>\n                         (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n                             E \\<in> rctxt \\<and>\n                             (l, t) \\<Colon> fs = E t\\<^sub>0 \\<and>\n                             t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')", "next"], ["proof (state)\ngoal (4 subgoals):\n 1. \\<And>fs fTs.\n       \\<lbrakk>[] \\<turnstile> fs [:] fTs;\n        (\\<forall>(l, t)\\<in>set fs. t \\<in> value) \\<or>\n        (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n            E \\<in> rctxt \\<and>\n            fs = E t\\<^sub>0 \\<and>\n            t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')\\<rbrakk>\n       \\<Longrightarrow> Rcd fs \\<in> value \\<or>\n                         (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n                             E \\<in> ctxt \\<and>\n                             Rcd fs = E t\\<^sub>0 \\<and>\n                             t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')\n 2. \\<And>t fTs l T.\n       \\<lbrakk>[] \\<turnstile> t : RcdT fTs;\n        t \\<in> value \\<or>\n        (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n            E \\<in> ctxt \\<and>\n            t = E t\\<^sub>0 \\<and>\n            t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0');\n        fTs\\<langle>l\\<rangle>\\<^sub>? = \\<lfloor>T\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> t..l \\<in> value \\<or>\n                         (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n                             E \\<in> ctxt \\<and>\n                             t..l = E t\\<^sub>0 \\<and>\n                             t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')\n 3. [] \\<turnstile>\\<^sub>w\\<^sub>f \\<Longrightarrow>\n    (\\<forall>(l, t)\\<in>set []. t \\<in> value) \\<or>\n    (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n        E \\<in> rctxt \\<and>\n        [] = E t\\<^sub>0 \\<and> t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')\n 4. \\<And>t T fs fTs l.\n       \\<lbrakk>[] \\<turnstile> t : T;\n        t \\<in> value \\<or>\n        (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n            E \\<in> ctxt \\<and>\n            t = E t\\<^sub>0 \\<and>\n            t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0');\n        [] \\<turnstile> fs [:] fTs;\n        (\\<forall>(l, t)\\<in>set fs. t \\<in> value) \\<or>\n        (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n            E \\<in> rctxt \\<and>\n            fs = E t\\<^sub>0 \\<and>\n            t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0');\n        fs\\<langle>l\\<rangle>\\<^sub>? = \\<bottom>\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>(l, t)\\<in>set ((l, t) \\<Colon> fs).\n                             t \\<in> value) \\<or>\n                         (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n                             E \\<in> rctxt \\<and>\n                             (l, t) \\<Colon> fs = E t\\<^sub>0 \\<and>\n                             t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')", "case (T_Rcd fs fTs)"], ["proof (state)\nthis:\n  [] \\<turnstile> fs [:] fTs\n  (\\<forall>(l, t)\\<in>set fs. t \\<in> value) \\<or>\n  (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n      E \\<in> rctxt \\<and>\n      fs = E t\\<^sub>0 \\<and> t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')\n\ngoal (4 subgoals):\n 1. \\<And>fs fTs.\n       \\<lbrakk>[] \\<turnstile> fs [:] fTs;\n        (\\<forall>(l, t)\\<in>set fs. t \\<in> value) \\<or>\n        (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n            E \\<in> rctxt \\<and>\n            fs = E t\\<^sub>0 \\<and>\n            t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')\\<rbrakk>\n       \\<Longrightarrow> Rcd fs \\<in> value \\<or>\n                         (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n                             E \\<in> ctxt \\<and>\n                             Rcd fs = E t\\<^sub>0 \\<and>\n                             t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')\n 2. \\<And>t fTs l T.\n       \\<lbrakk>[] \\<turnstile> t : RcdT fTs;\n        t \\<in> value \\<or>\n        (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n            E \\<in> ctxt \\<and>\n            t = E t\\<^sub>0 \\<and>\n            t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0');\n        fTs\\<langle>l\\<rangle>\\<^sub>? = \\<lfloor>T\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> t..l \\<in> value \\<or>\n                         (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n                             E \\<in> ctxt \\<and>\n                             t..l = E t\\<^sub>0 \\<and>\n                             t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')\n 3. [] \\<turnstile>\\<^sub>w\\<^sub>f \\<Longrightarrow>\n    (\\<forall>(l, t)\\<in>set []. t \\<in> value) \\<or>\n    (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n        E \\<in> rctxt \\<and>\n        [] = E t\\<^sub>0 \\<and> t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')\n 4. \\<And>t T fs fTs l.\n       \\<lbrakk>[] \\<turnstile> t : T;\n        t \\<in> value \\<or>\n        (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n            E \\<in> ctxt \\<and>\n            t = E t\\<^sub>0 \\<and>\n            t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0');\n        [] \\<turnstile> fs [:] fTs;\n        (\\<forall>(l, t)\\<in>set fs. t \\<in> value) \\<or>\n        (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n            E \\<in> rctxt \\<and>\n            fs = E t\\<^sub>0 \\<and>\n            t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0');\n        fs\\<langle>l\\<rangle>\\<^sub>? = \\<bottom>\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>(l, t)\\<in>set ((l, t) \\<Colon> fs).\n                             t \\<in> value) \\<or>\n                         (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n                             E \\<in> rctxt \\<and>\n                             (l, t) \\<Colon> fs = E t\\<^sub>0 \\<and>\n                             t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')", "thus ?case"], ["proof (prove)\nusing this:\n  [] \\<turnstile> fs [:] fTs\n  (\\<forall>(l, t)\\<in>set fs. t \\<in> value) \\<or>\n  (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n      E \\<in> rctxt \\<and>\n      fs = E t\\<^sub>0 \\<and> t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')\n\ngoal (1 subgoal):\n 1. Rcd fs \\<in> value \\<or>\n    (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n        E \\<in> ctxt \\<and>\n        Rcd fs = E t\\<^sub>0 \\<and>\n        t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')", "by (blast intro: value.intros eval.intros ctxt_rctxt.intros)"], ["proof (state)\nthis:\n  Rcd fs \\<in> value \\<or>\n  (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n      E \\<in> ctxt \\<and>\n      Rcd fs = E t\\<^sub>0 \\<and>\n      t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')\n\ngoal (3 subgoals):\n 1. \\<And>t fTs l T.\n       \\<lbrakk>[] \\<turnstile> t : RcdT fTs;\n        t \\<in> value \\<or>\n        (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n            E \\<in> ctxt \\<and>\n            t = E t\\<^sub>0 \\<and>\n            t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0');\n        fTs\\<langle>l\\<rangle>\\<^sub>? = \\<lfloor>T\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> t..l \\<in> value \\<or>\n                         (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n                             E \\<in> ctxt \\<and>\n                             t..l = E t\\<^sub>0 \\<and>\n                             t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')\n 2. [] \\<turnstile>\\<^sub>w\\<^sub>f \\<Longrightarrow>\n    (\\<forall>(l, t)\\<in>set []. t \\<in> value) \\<or>\n    (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n        E \\<in> rctxt \\<and>\n        [] = E t\\<^sub>0 \\<and> t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')\n 3. \\<And>t T fs fTs l.\n       \\<lbrakk>[] \\<turnstile> t : T;\n        t \\<in> value \\<or>\n        (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n            E \\<in> ctxt \\<and>\n            t = E t\\<^sub>0 \\<and>\n            t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0');\n        [] \\<turnstile> fs [:] fTs;\n        (\\<forall>(l, t)\\<in>set fs. t \\<in> value) \\<or>\n        (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n            E \\<in> rctxt \\<and>\n            fs = E t\\<^sub>0 \\<and>\n            t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0');\n        fs\\<langle>l\\<rangle>\\<^sub>? = \\<bottom>\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>(l, t)\\<in>set ((l, t) \\<Colon> fs).\n                             t \\<in> value) \\<or>\n                         (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n                             E \\<in> rctxt \\<and>\n                             (l, t) \\<Colon> fs = E t\\<^sub>0 \\<and>\n                             t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')", "next"], ["proof (state)\ngoal (3 subgoals):\n 1. \\<And>t fTs l T.\n       \\<lbrakk>[] \\<turnstile> t : RcdT fTs;\n        t \\<in> value \\<or>\n        (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n            E \\<in> ctxt \\<and>\n            t = E t\\<^sub>0 \\<and>\n            t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0');\n        fTs\\<langle>l\\<rangle>\\<^sub>? = \\<lfloor>T\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> t..l \\<in> value \\<or>\n                         (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n                             E \\<in> ctxt \\<and>\n                             t..l = E t\\<^sub>0 \\<and>\n                             t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')\n 2. [] \\<turnstile>\\<^sub>w\\<^sub>f \\<Longrightarrow>\n    (\\<forall>(l, t)\\<in>set []. t \\<in> value) \\<or>\n    (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n        E \\<in> rctxt \\<and>\n        [] = E t\\<^sub>0 \\<and> t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')\n 3. \\<And>t T fs fTs l.\n       \\<lbrakk>[] \\<turnstile> t : T;\n        t \\<in> value \\<or>\n        (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n            E \\<in> ctxt \\<and>\n            t = E t\\<^sub>0 \\<and>\n            t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0');\n        [] \\<turnstile> fs [:] fTs;\n        (\\<forall>(l, t)\\<in>set fs. t \\<in> value) \\<or>\n        (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n            E \\<in> rctxt \\<and>\n            fs = E t\\<^sub>0 \\<and>\n            t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0');\n        fs\\<langle>l\\<rangle>\\<^sub>? = \\<bottom>\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>(l, t)\\<in>set ((l, t) \\<Colon> fs).\n                             t \\<in> value) \\<or>\n                         (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n                             E \\<in> rctxt \\<and>\n                             (l, t) \\<Colon> fs = E t\\<^sub>0 \\<and>\n                             t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')", "case (T_Proj t fTs l T)"], ["proof (state)\nthis:\n  [] \\<turnstile> t : RcdT fTs\n  t \\<in> value \\<or>\n  (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n      E \\<in> ctxt \\<and>\n      t = E t\\<^sub>0 \\<and> t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')\n  fTs\\<langle>l\\<rangle>\\<^sub>? = \\<lfloor>T\\<rfloor>\n\ngoal (3 subgoals):\n 1. \\<And>t fTs l T.\n       \\<lbrakk>[] \\<turnstile> t : RcdT fTs;\n        t \\<in> value \\<or>\n        (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n            E \\<in> ctxt \\<and>\n            t = E t\\<^sub>0 \\<and>\n            t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0');\n        fTs\\<langle>l\\<rangle>\\<^sub>? = \\<lfloor>T\\<rfloor>\\<rbrakk>\n       \\<Longrightarrow> t..l \\<in> value \\<or>\n                         (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n                             E \\<in> ctxt \\<and>\n                             t..l = E t\\<^sub>0 \\<and>\n                             t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')\n 2. [] \\<turnstile>\\<^sub>w\\<^sub>f \\<Longrightarrow>\n    (\\<forall>(l, t)\\<in>set []. t \\<in> value) \\<or>\n    (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n        E \\<in> rctxt \\<and>\n        [] = E t\\<^sub>0 \\<and> t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')\n 3. \\<And>t T fs fTs l.\n       \\<lbrakk>[] \\<turnstile> t : T;\n        t \\<in> value \\<or>\n        (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n            E \\<in> ctxt \\<and>\n            t = E t\\<^sub>0 \\<and>\n            t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0');\n        [] \\<turnstile> fs [:] fTs;\n        (\\<forall>(l, t)\\<in>set fs. t \\<in> value) \\<or>\n        (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n            E \\<in> rctxt \\<and>\n            fs = E t\\<^sub>0 \\<and>\n            t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0');\n        fs\\<langle>l\\<rangle>\\<^sub>? = \\<bottom>\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>(l, t)\\<in>set ((l, t) \\<Colon> fs).\n                             t \\<in> value) \\<or>\n                         (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n                             E \\<in> rctxt \\<and>\n                             (l, t) \\<Colon> fs = E t\\<^sub>0 \\<and>\n                             t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')", "from \\<open>t \\<in> value \\<or> (\\<exists>E t\\<^sub>0 t\\<^sub>0'. E \\<in> ctxt \\<and> t = E t\\<^sub>0 \\<and> t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')\\<close>"], ["proof (chain)\npicking this:\n  t \\<in> value \\<or>\n  (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n      E \\<in> ctxt \\<and>\n      t = E t\\<^sub>0 \\<and> t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')", "show ?case"], ["proof (prove)\nusing this:\n  t \\<in> value \\<or>\n  (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n      E \\<in> ctxt \\<and>\n      t = E t\\<^sub>0 \\<and> t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')\n\ngoal (1 subgoal):\n 1. t..l \\<in> value \\<or>\n    (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n        E \\<in> ctxt \\<and>\n        t..l = E t\\<^sub>0 \\<and>\n        t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')", "proof"], ["proof (state)\ngoal (2 subgoals):\n 1. t \\<in> value \\<Longrightarrow>\n    t..l \\<in> value \\<or>\n    (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n        E \\<in> ctxt \\<and>\n        t..l = E t\\<^sub>0 \\<and>\n        t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')\n 2. \\<exists>E t\\<^sub>0 t\\<^sub>0'.\n       E \\<in> ctxt \\<and>\n       t = E t\\<^sub>0 \\<and>\n       t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0' \\<Longrightarrow>\n    t..l \\<in> value \\<or>\n    (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n        E \\<in> ctxt \\<and>\n        t..l = E t\\<^sub>0 \\<and>\n        t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')", "assume tv: \"t \\<in> value\""], ["proof (state)\nthis:\n  t \\<in> value\n\ngoal (2 subgoals):\n 1. t \\<in> value \\<Longrightarrow>\n    t..l \\<in> value \\<or>\n    (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n        E \\<in> ctxt \\<and>\n        t..l = E t\\<^sub>0 \\<and>\n        t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')\n 2. \\<exists>E t\\<^sub>0 t\\<^sub>0'.\n       E \\<in> ctxt \\<and>\n       t = E t\\<^sub>0 \\<and>\n       t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0' \\<Longrightarrow>\n    t..l \\<in> value \\<or>\n    (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n        E \\<in> ctxt \\<and>\n        t..l = E t\\<^sub>0 \\<and>\n        t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')", "with T_Proj"], ["proof (chain)\npicking this:\n  [] \\<turnstile> t : RcdT fTs\n  t \\<in> value \\<or>\n  (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n      E \\<in> ctxt \\<and>\n      t = E t\\<^sub>0 \\<and> t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')\n  fTs\\<langle>l\\<rangle>\\<^sub>? = \\<lfloor>T\\<rfloor>\n  t \\<in> value", "obtain fs where\n      t: \"t = Rcd fs\" and fs: \"\\<forall>(l, t) \\<in> set fs. t \\<in> value\""], ["proof (prove)\nusing this:\n  [] \\<turnstile> t : RcdT fTs\n  t \\<in> value \\<or>\n  (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n      E \\<in> ctxt \\<and>\n      t = E t\\<^sub>0 \\<and> t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')\n  fTs\\<langle>l\\<rangle>\\<^sub>? = \\<lfloor>T\\<rfloor>\n  t \\<in> value\n\ngoal (1 subgoal):\n 1. (\\<And>fs.\n        \\<lbrakk>t = Rcd fs;\n         \\<forall>(l, t)\\<in>set fs. t \\<in> value\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by (auto dest: RcdT_canonical)"], ["proof (state)\nthis:\n  t = Rcd fs\n  \\<forall>(l, t)\\<in>set fs. t \\<in> value\n\ngoal (2 subgoals):\n 1. t \\<in> value \\<Longrightarrow>\n    t..l \\<in> value \\<or>\n    (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n        E \\<in> ctxt \\<and>\n        t..l = E t\\<^sub>0 \\<and>\n        t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')\n 2. \\<exists>E t\\<^sub>0 t\\<^sub>0'.\n       E \\<in> ctxt \\<and>\n       t = E t\\<^sub>0 \\<and>\n       t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0' \\<Longrightarrow>\n    t..l \\<in> value \\<or>\n    (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n        E \\<in> ctxt \\<and>\n        t..l = E t\\<^sub>0 \\<and>\n        t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')", "with T_Proj"], ["proof (chain)\npicking this:\n  [] \\<turnstile> t : RcdT fTs\n  t \\<in> value \\<or>\n  (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n      E \\<in> ctxt \\<and>\n      t = E t\\<^sub>0 \\<and> t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')\n  fTs\\<langle>l\\<rangle>\\<^sub>? = \\<lfloor>T\\<rfloor>\n  t = Rcd fs\n  \\<forall>(l, t)\\<in>set fs. t \\<in> value", "have \"[] \\<turnstile> Rcd fs : RcdT fTs\""], ["proof (prove)\nusing this:\n  [] \\<turnstile> t : RcdT fTs\n  t \\<in> value \\<or>\n  (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n      E \\<in> ctxt \\<and>\n      t = E t\\<^sub>0 \\<and> t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')\n  fTs\\<langle>l\\<rangle>\\<^sub>? = \\<lfloor>T\\<rfloor>\n  t = Rcd fs\n  \\<forall>(l, t)\\<in>set fs. t \\<in> value\n\ngoal (1 subgoal):\n 1. [] \\<turnstile> Rcd fs : RcdT fTs", "by simp"], ["proof (state)\nthis:\n  [] \\<turnstile> Rcd fs : RcdT fTs\n\ngoal (2 subgoals):\n 1. t \\<in> value \\<Longrightarrow>\n    t..l \\<in> value \\<or>\n    (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n        E \\<in> ctxt \\<and>\n        t..l = E t\\<^sub>0 \\<and>\n        t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')\n 2. \\<exists>E t\\<^sub>0 t\\<^sub>0'.\n       E \\<in> ctxt \\<and>\n       t = E t\\<^sub>0 \\<and>\n       t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0' \\<Longrightarrow>\n    t..l \\<in> value \\<or>\n    (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n        E \\<in> ctxt \\<and>\n        t..l = E t\\<^sub>0 \\<and>\n        t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')", "hence \"\\<forall>(l, U)\\<in>set fTs. \\<exists>u. fs\\<langle>l\\<rangle>\\<^sub>? = \\<lfloor>u\\<rfloor> \\<and> [] \\<turnstile> u : U\""], ["proof (prove)\nusing this:\n  [] \\<turnstile> Rcd fs : RcdT fTs\n\ngoal (1 subgoal):\n 1. \\<forall>(l, U)\\<in>set fTs.\n       \\<exists>u.\n          fs\\<langle>l\\<rangle>\\<^sub>? = \\<lfloor>u\\<rfloor> \\<and>\n          [] \\<turnstile> u : U", "by (rule Rcd_type1')"], ["proof (state)\nthis:\n  \\<forall>(l, U)\\<in>set fTs.\n     \\<exists>u.\n        fs\\<langle>l\\<rangle>\\<^sub>? = \\<lfloor>u\\<rfloor> \\<and>\n        [] \\<turnstile> u : U\n\ngoal (2 subgoals):\n 1. t \\<in> value \\<Longrightarrow>\n    t..l \\<in> value \\<or>\n    (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n        E \\<in> ctxt \\<and>\n        t..l = E t\\<^sub>0 \\<and>\n        t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')\n 2. \\<exists>E t\\<^sub>0 t\\<^sub>0'.\n       E \\<in> ctxt \\<and>\n       t = E t\\<^sub>0 \\<and>\n       t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0' \\<Longrightarrow>\n    t..l \\<in> value \\<or>\n    (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n        E \\<in> ctxt \\<and>\n        t..l = E t\\<^sub>0 \\<and>\n        t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')", "with T_Proj"], ["proof (chain)\npicking this:\n  [] \\<turnstile> t : RcdT fTs\n  t \\<in> value \\<or>\n  (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n      E \\<in> ctxt \\<and>\n      t = E t\\<^sub>0 \\<and> t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')\n  fTs\\<langle>l\\<rangle>\\<^sub>? = \\<lfloor>T\\<rfloor>\n  \\<forall>(l, U)\\<in>set fTs.\n     \\<exists>u.\n        fs\\<langle>l\\<rangle>\\<^sub>? = \\<lfloor>u\\<rfloor> \\<and>\n        [] \\<turnstile> u : U", "obtain u where u: \"fs\\<langle>l\\<rangle>\\<^sub>? = \\<lfloor>u\\<rfloor>\""], ["proof (prove)\nusing this:\n  [] \\<turnstile> t : RcdT fTs\n  t \\<in> value \\<or>\n  (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n      E \\<in> ctxt \\<and>\n      t = E t\\<^sub>0 \\<and> t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')\n  fTs\\<langle>l\\<rangle>\\<^sub>? = \\<lfloor>T\\<rfloor>\n  \\<forall>(l, U)\\<in>set fTs.\n     \\<exists>u.\n        fs\\<langle>l\\<rangle>\\<^sub>? = \\<lfloor>u\\<rfloor> \\<and>\n        [] \\<turnstile> u : U\n\ngoal (1 subgoal):\n 1. (\\<And>u.\n        fs\\<langle>l\\<rangle>\\<^sub>? =\n        \\<lfloor>u\\<rfloor> \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by (blast dest: assoc_set)"], ["proof (state)\nthis:\n  fs\\<langle>l\\<rangle>\\<^sub>? = \\<lfloor>u\\<rfloor>\n\ngoal (2 subgoals):\n 1. t \\<in> value \\<Longrightarrow>\n    t..l \\<in> value \\<or>\n    (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n        E \\<in> ctxt \\<and>\n        t..l = E t\\<^sub>0 \\<and>\n        t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')\n 2. \\<exists>E t\\<^sub>0 t\\<^sub>0'.\n       E \\<in> ctxt \\<and>\n       t = E t\\<^sub>0 \\<and>\n       t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0' \\<Longrightarrow>\n    t..l \\<in> value \\<or>\n    (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n        E \\<in> ctxt \\<and>\n        t..l = E t\\<^sub>0 \\<and>\n        t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')", "with fs"], ["proof (chain)\npicking this:\n  \\<forall>(l, t)\\<in>set fs. t \\<in> value\n  fs\\<langle>l\\<rangle>\\<^sub>? = \\<lfloor>u\\<rfloor>", "have \"u \\<in> value\""], ["proof (prove)\nusing this:\n  \\<forall>(l, t)\\<in>set fs. t \\<in> value\n  fs\\<langle>l\\<rangle>\\<^sub>? = \\<lfloor>u\\<rfloor>\n\ngoal (1 subgoal):\n 1. u \\<in> value", "by (blast dest: assoc_set)"], ["proof (state)\nthis:\n  u \\<in> value\n\ngoal (2 subgoals):\n 1. t \\<in> value \\<Longrightarrow>\n    t..l \\<in> value \\<or>\n    (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n        E \\<in> ctxt \\<and>\n        t..l = E t\\<^sub>0 \\<and>\n        t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')\n 2. \\<exists>E t\\<^sub>0 t\\<^sub>0'.\n       E \\<in> ctxt \\<and>\n       t = E t\\<^sub>0 \\<and>\n       t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0' \\<Longrightarrow>\n    t..l \\<in> value \\<or>\n    (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n        E \\<in> ctxt \\<and>\n        t..l = E t\\<^sub>0 \\<and>\n        t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')", "with u t"], ["proof (chain)\npicking this:\n  fs\\<langle>l\\<rangle>\\<^sub>? = \\<lfloor>u\\<rfloor>\n  t = Rcd fs\n  u \\<in> value", "show ?thesis"], ["proof (prove)\nusing this:\n  fs\\<langle>l\\<rangle>\\<^sub>? = \\<lfloor>u\\<rfloor>\n  t = Rcd fs\n  u \\<in> value\n\ngoal (1 subgoal):\n 1. t..l \\<in> value \\<or>\n    (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n        E \\<in> ctxt \\<and>\n        t..l = E t\\<^sub>0 \\<and>\n        t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')", "by (iprover intro: eval.intros C_Hole)"], ["proof (state)\nthis:\n  t..l \\<in> value \\<or>\n  (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n      E \\<in> ctxt \\<and>\n      t..l = E t\\<^sub>0 \\<and> t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')\n\ngoal (1 subgoal):\n 1. \\<exists>E t\\<^sub>0 t\\<^sub>0'.\n       E \\<in> ctxt \\<and>\n       t = E t\\<^sub>0 \\<and>\n       t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0' \\<Longrightarrow>\n    t..l \\<in> value \\<or>\n    (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n        E \\<in> ctxt \\<and>\n        t..l = E t\\<^sub>0 \\<and>\n        t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<exists>E t\\<^sub>0 t\\<^sub>0'.\n       E \\<in> ctxt \\<and>\n       t = E t\\<^sub>0 \\<and>\n       t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0' \\<Longrightarrow>\n    t..l \\<in> value \\<or>\n    (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n        E \\<in> ctxt \\<and>\n        t..l = E t\\<^sub>0 \\<and>\n        t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')", "assume \"\\<exists>E t\\<^sub>0 t\\<^sub>0'. E \\<in> ctxt \\<and> t = E t\\<^sub>0 \\<and> t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0'\""], ["proof (state)\nthis:\n  \\<exists>E t\\<^sub>0 t\\<^sub>0'.\n     E \\<in> ctxt \\<and>\n     t = E t\\<^sub>0 \\<and> t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0'\n\ngoal (1 subgoal):\n 1. \\<exists>E t\\<^sub>0 t\\<^sub>0'.\n       E \\<in> ctxt \\<and>\n       t = E t\\<^sub>0 \\<and>\n       t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0' \\<Longrightarrow>\n    t..l \\<in> value \\<or>\n    (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n        E \\<in> ctxt \\<and>\n        t..l = E t\\<^sub>0 \\<and>\n        t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')", "thus ?case"], ["proof (prove)\nusing this:\n  \\<exists>E t\\<^sub>0 t\\<^sub>0'.\n     E \\<in> ctxt \\<and>\n     t = E t\\<^sub>0 \\<and> t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0'\n\ngoal (1 subgoal):\n 1. t..l \\<in> value \\<or>\n    (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n        E \\<in> ctxt \\<and>\n        t..l = E t\\<^sub>0 \\<and>\n        t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')", "by (iprover intro: ctxt_rctxt.intros)"], ["proof (state)\nthis:\n  t..l \\<in> value \\<or>\n  (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n      E \\<in> ctxt \\<and>\n      t..l = E t\\<^sub>0 \\<and> t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  t..l \\<in> value \\<or>\n  (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n      E \\<in> ctxt \\<and>\n      t..l = E t\\<^sub>0 \\<and> t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')\n\ngoal (2 subgoals):\n 1. [] \\<turnstile>\\<^sub>w\\<^sub>f \\<Longrightarrow>\n    (\\<forall>(l, t)\\<in>set []. t \\<in> value) \\<or>\n    (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n        E \\<in> rctxt \\<and>\n        [] = E t\\<^sub>0 \\<and> t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')\n 2. \\<And>t T fs fTs l.\n       \\<lbrakk>[] \\<turnstile> t : T;\n        t \\<in> value \\<or>\n        (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n            E \\<in> ctxt \\<and>\n            t = E t\\<^sub>0 \\<and>\n            t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0');\n        [] \\<turnstile> fs [:] fTs;\n        (\\<forall>(l, t)\\<in>set fs. t \\<in> value) \\<or>\n        (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n            E \\<in> rctxt \\<and>\n            fs = E t\\<^sub>0 \\<and>\n            t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0');\n        fs\\<langle>l\\<rangle>\\<^sub>? = \\<bottom>\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>(l, t)\\<in>set ((l, t) \\<Colon> fs).\n                             t \\<in> value) \\<or>\n                         (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n                             E \\<in> rctxt \\<and>\n                             (l, t) \\<Colon> fs = E t\\<^sub>0 \\<and>\n                             t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')", "next"], ["proof (state)\ngoal (2 subgoals):\n 1. [] \\<turnstile>\\<^sub>w\\<^sub>f \\<Longrightarrow>\n    (\\<forall>(l, t)\\<in>set []. t \\<in> value) \\<or>\n    (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n        E \\<in> rctxt \\<and>\n        [] = E t\\<^sub>0 \\<and> t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')\n 2. \\<And>t T fs fTs l.\n       \\<lbrakk>[] \\<turnstile> t : T;\n        t \\<in> value \\<or>\n        (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n            E \\<in> ctxt \\<and>\n            t = E t\\<^sub>0 \\<and>\n            t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0');\n        [] \\<turnstile> fs [:] fTs;\n        (\\<forall>(l, t)\\<in>set fs. t \\<in> value) \\<or>\n        (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n            E \\<in> rctxt \\<and>\n            fs = E t\\<^sub>0 \\<and>\n            t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0');\n        fs\\<langle>l\\<rangle>\\<^sub>? = \\<bottom>\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>(l, t)\\<in>set ((l, t) \\<Colon> fs).\n                             t \\<in> value) \\<or>\n                         (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n                             E \\<in> rctxt \\<and>\n                             (l, t) \\<Colon> fs = E t\\<^sub>0 \\<and>\n                             t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')", "case T_Nil"], ["proof (state)\nthis:\n  [] \\<turnstile>\\<^sub>w\\<^sub>f\n\ngoal (2 subgoals):\n 1. [] \\<turnstile>\\<^sub>w\\<^sub>f \\<Longrightarrow>\n    (\\<forall>(l, t)\\<in>set []. t \\<in> value) \\<or>\n    (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n        E \\<in> rctxt \\<and>\n        [] = E t\\<^sub>0 \\<and> t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')\n 2. \\<And>t T fs fTs l.\n       \\<lbrakk>[] \\<turnstile> t : T;\n        t \\<in> value \\<or>\n        (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n            E \\<in> ctxt \\<and>\n            t = E t\\<^sub>0 \\<and>\n            t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0');\n        [] \\<turnstile> fs [:] fTs;\n        (\\<forall>(l, t)\\<in>set fs. t \\<in> value) \\<or>\n        (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n            E \\<in> rctxt \\<and>\n            fs = E t\\<^sub>0 \\<and>\n            t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0');\n        fs\\<langle>l\\<rangle>\\<^sub>? = \\<bottom>\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>(l, t)\\<in>set ((l, t) \\<Colon> fs).\n                             t \\<in> value) \\<or>\n                         (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n                             E \\<in> rctxt \\<and>\n                             (l, t) \\<Colon> fs = E t\\<^sub>0 \\<and>\n                             t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')", "show ?case"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<forall>(l, t)\\<in>set []. t \\<in> value) \\<or>\n    (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n        E \\<in> rctxt \\<and>\n        [] = E t\\<^sub>0 \\<and> t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')", "by simp"], ["proof (state)\nthis:\n  (\\<forall>(l, t)\\<in>set []. t \\<in> value) \\<or>\n  (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n      E \\<in> rctxt \\<and>\n      [] = E t\\<^sub>0 \\<and> t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')\n\ngoal (1 subgoal):\n 1. \\<And>t T fs fTs l.\n       \\<lbrakk>[] \\<turnstile> t : T;\n        t \\<in> value \\<or>\n        (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n            E \\<in> ctxt \\<and>\n            t = E t\\<^sub>0 \\<and>\n            t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0');\n        [] \\<turnstile> fs [:] fTs;\n        (\\<forall>(l, t)\\<in>set fs. t \\<in> value) \\<or>\n        (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n            E \\<in> rctxt \\<and>\n            fs = E t\\<^sub>0 \\<and>\n            t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0');\n        fs\\<langle>l\\<rangle>\\<^sub>? = \\<bottom>\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>(l, t)\\<in>set ((l, t) \\<Colon> fs).\n                             t \\<in> value) \\<or>\n                         (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n                             E \\<in> rctxt \\<and>\n                             (l, t) \\<Colon> fs = E t\\<^sub>0 \\<and>\n                             t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>t T fs fTs l.\n       \\<lbrakk>[] \\<turnstile> t : T;\n        t \\<in> value \\<or>\n        (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n            E \\<in> ctxt \\<and>\n            t = E t\\<^sub>0 \\<and>\n            t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0');\n        [] \\<turnstile> fs [:] fTs;\n        (\\<forall>(l, t)\\<in>set fs. t \\<in> value) \\<or>\n        (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n            E \\<in> rctxt \\<and>\n            fs = E t\\<^sub>0 \\<and>\n            t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0');\n        fs\\<langle>l\\<rangle>\\<^sub>? = \\<bottom>\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>(l, t)\\<in>set ((l, t) \\<Colon> fs).\n                             t \\<in> value) \\<or>\n                         (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n                             E \\<in> rctxt \\<and>\n                             (l, t) \\<Colon> fs = E t\\<^sub>0 \\<and>\n                             t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')", "case (T_Cons t T fs fTs l)"], ["proof (state)\nthis:\n  [] \\<turnstile> t : T\n  t \\<in> value \\<or>\n  (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n      E \\<in> ctxt \\<and>\n      t = E t\\<^sub>0 \\<and> t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')\n  [] \\<turnstile> fs [:] fTs\n  (\\<forall>(l, t)\\<in>set fs. t \\<in> value) \\<or>\n  (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n      E \\<in> rctxt \\<and>\n      fs = E t\\<^sub>0 \\<and> t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')\n  fs\\<langle>l\\<rangle>\\<^sub>? = \\<bottom>\n\ngoal (1 subgoal):\n 1. \\<And>t T fs fTs l.\n       \\<lbrakk>[] \\<turnstile> t : T;\n        t \\<in> value \\<or>\n        (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n            E \\<in> ctxt \\<and>\n            t = E t\\<^sub>0 \\<and>\n            t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0');\n        [] \\<turnstile> fs [:] fTs;\n        (\\<forall>(l, t)\\<in>set fs. t \\<in> value) \\<or>\n        (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n            E \\<in> rctxt \\<and>\n            fs = E t\\<^sub>0 \\<and>\n            t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0');\n        fs\\<langle>l\\<rangle>\\<^sub>? = \\<bottom>\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>(l, t)\\<in>set ((l, t) \\<Colon> fs).\n                             t \\<in> value) \\<or>\n                         (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n                             E \\<in> rctxt \\<and>\n                             (l, t) \\<Colon> fs = E t\\<^sub>0 \\<and>\n                             t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')", "thus ?case"], ["proof (prove)\nusing this:\n  [] \\<turnstile> t : T\n  t \\<in> value \\<or>\n  (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n      E \\<in> ctxt \\<and>\n      t = E t\\<^sub>0 \\<and> t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')\n  [] \\<turnstile> fs [:] fTs\n  (\\<forall>(l, t)\\<in>set fs. t \\<in> value) \\<or>\n  (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n      E \\<in> rctxt \\<and>\n      fs = E t\\<^sub>0 \\<and> t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')\n  fs\\<langle>l\\<rangle>\\<^sub>? = \\<bottom>\n\ngoal (1 subgoal):\n 1. (\\<forall>(l, t)\\<in>set ((l, t) \\<Colon> fs). t \\<in> value) \\<or>\n    (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n        E \\<in> rctxt \\<and>\n        (l, t) \\<Colon> fs = E t\\<^sub>0 \\<and>\n        t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')", "by (auto intro: ctxt_rctxt.intros)"], ["proof (state)\nthis:\n  (\\<forall>(l, t)\\<in>set ((l, t) \\<Colon> fs). t \\<in> value) \\<or>\n  (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n      E \\<in> rctxt \\<and>\n      (l, t) \\<Colon> fs = E t\\<^sub>0 \\<and>\n      t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')\n\ngoal:\nNo subgoals!", "qed"], ["", "theorem progress: \\<comment> \\<open>A.16\\<close>\n  assumes H: \"[] \\<turnstile> t : T\"\n  shows \"t \\<in> value \\<or> (\\<exists>t'. t \\<longmapsto>\\<^sub>c t')\""], ["proof (prove)\ngoal (1 subgoal):\n 1. t \\<in> value \\<or> (\\<exists>t'. t \\<longmapsto>\\<^sub>c t')", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. t \\<in> value \\<or> (\\<exists>t'. t \\<longmapsto>\\<^sub>c t')", "from H"], ["proof (chain)\npicking this:\n  [] \\<turnstile> t : T", "have \"t \\<in> value \\<or> (\\<exists>E t\\<^sub>0 t\\<^sub>0'. E \\<in> ctxt \\<and> t = E t\\<^sub>0 \\<and> t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')\""], ["proof (prove)\nusing this:\n  [] \\<turnstile> t : T\n\ngoal (1 subgoal):\n 1. t \\<in> value \\<or>\n    (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n        E \\<in> ctxt \\<and>\n        t = E t\\<^sub>0 \\<and> t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')", "by (rule context_decomp)"], ["proof (state)\nthis:\n  t \\<in> value \\<or>\n  (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n      E \\<in> ctxt \\<and>\n      t = E t\\<^sub>0 \\<and> t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')\n\ngoal (1 subgoal):\n 1. t \\<in> value \\<or> (\\<exists>t'. t \\<longmapsto>\\<^sub>c t')", "thus ?thesis"], ["proof (prove)\nusing this:\n  t \\<in> value \\<or>\n  (\\<exists>E t\\<^sub>0 t\\<^sub>0'.\n      E \\<in> ctxt \\<and>\n      t = E t\\<^sub>0 \\<and> t\\<^sub>0 \\<longmapsto>\\<^sub>c t\\<^sub>0')\n\ngoal (1 subgoal):\n 1. t \\<in> value \\<or> (\\<exists>t'. t \\<longmapsto>\\<^sub>c t')", "by (iprover intro: eval.intros)"], ["proof (state)\nthis:\n  t \\<in> value \\<or> (\\<exists>t'. t \\<longmapsto>\\<^sub>c t')\n\ngoal:\nNo subgoals!", "qed"], ["", "text \\<open>\nFinally, we prove that the two definitions of the evaluation relation\nare equivalent. The proof that @{term \"t \\<longmapsto>\\<^sub>c t'\"} implies @{term \"t \\<longmapsto> t'\"}\nrequires a lemma stating that \\<open>\\<longmapsto>\\<close> is compatible with evaluation contexts.\n\\<close>"], ["", "lemma ctxt_imp_eval:\n  \"E \\<in> ctxt \\<Longrightarrow> t \\<longmapsto> t' \\<Longrightarrow> E t \\<longmapsto> E t'\"\n  \"E\\<^sub>r \\<in> rctxt \\<Longrightarrow> t \\<longmapsto> t' \\<Longrightarrow> E\\<^sub>r t [\\<longmapsto>] E\\<^sub>r t'\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lbrakk>E \\<in> ctxt; t \\<longmapsto> t'\\<rbrakk>\n     \\<Longrightarrow> E t \\<longmapsto> E t') &&&\n    (\\<lbrakk>E\\<^sub>r \\<in> rctxt; t \\<longmapsto> t'\\<rbrakk>\n     \\<Longrightarrow> E\\<^sub>r t [\\<longmapsto>] E\\<^sub>r t')", "by (induct rule: ctxt_rctxt.inducts) (auto intro: eval_evals.intros)"], ["", "lemma eval_evalc_eq: \"(t \\<longmapsto> t') = (t \\<longmapsto>\\<^sub>c t')\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (t \\<longmapsto> t') = (t \\<longmapsto>\\<^sub>c t')", "proof"], ["proof (state)\ngoal (2 subgoals):\n 1. t \\<longmapsto> t' \\<Longrightarrow> t \\<longmapsto>\\<^sub>c t'\n 2. t \\<longmapsto>\\<^sub>c t' \\<Longrightarrow> t \\<longmapsto> t'", "fix ts ts'"], ["proof (state)\ngoal (2 subgoals):\n 1. t \\<longmapsto> t' \\<Longrightarrow> t \\<longmapsto>\\<^sub>c t'\n 2. t \\<longmapsto>\\<^sub>c t' \\<Longrightarrow> t \\<longmapsto> t'", "have r: \"t \\<longmapsto> t' \\<Longrightarrow> t \\<longmapsto>\\<^sub>c t'\" and\n    \"ts [\\<longmapsto>] ts' \\<Longrightarrow> \\<exists>E t t'. E \\<in> rctxt \\<and> ts = E t \\<and> ts' = E t' \\<and> t \\<longmapsto>\\<^sub>c t'\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (t \\<longmapsto> t' \\<Longrightarrow> t \\<longmapsto>\\<^sub>c t') &&&\n    (ts [\\<longmapsto>] ts' \\<Longrightarrow>\n     \\<exists>E t t'.\n        E \\<in> rctxt \\<and>\n        ts = E t \\<and> ts' = E t' \\<and> t \\<longmapsto>\\<^sub>c t')", "by (induct rule: eval_evals.inducts) (iprover intro: ctxt_rctxt.intros eval.intros)+"], ["proof (state)\nthis:\n  t \\<longmapsto> t' \\<Longrightarrow> t \\<longmapsto>\\<^sub>c t'\n  ts [\\<longmapsto>] ts' \\<Longrightarrow>\n  \\<exists>E t t'.\n     E \\<in> rctxt \\<and>\n     ts = E t \\<and> ts' = E t' \\<and> t \\<longmapsto>\\<^sub>c t'\n\ngoal (2 subgoals):\n 1. t \\<longmapsto> t' \\<Longrightarrow> t \\<longmapsto>\\<^sub>c t'\n 2. t \\<longmapsto>\\<^sub>c t' \\<Longrightarrow> t \\<longmapsto> t'", "assume \"t \\<longmapsto> t'\""], ["proof (state)\nthis:\n  t \\<longmapsto> t'\n\ngoal (2 subgoals):\n 1. t \\<longmapsto> t' \\<Longrightarrow> t \\<longmapsto>\\<^sub>c t'\n 2. t \\<longmapsto>\\<^sub>c t' \\<Longrightarrow> t \\<longmapsto> t'", "thus \"t \\<longmapsto>\\<^sub>c t'\""], ["proof (prove)\nusing this:\n  t \\<longmapsto> t'\n\ngoal (1 subgoal):\n 1. t \\<longmapsto>\\<^sub>c t'", "by (rule r)"], ["proof (state)\nthis:\n  t \\<longmapsto>\\<^sub>c t'\n\ngoal (1 subgoal):\n 1. t \\<longmapsto>\\<^sub>c t' \\<Longrightarrow> t \\<longmapsto> t'", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. t \\<longmapsto>\\<^sub>c t' \\<Longrightarrow> t \\<longmapsto> t'", "assume \"t \\<longmapsto>\\<^sub>c t'\""], ["proof (state)\nthis:\n  t \\<longmapsto>\\<^sub>c t'\n\ngoal (1 subgoal):\n 1. t \\<longmapsto>\\<^sub>c t' \\<Longrightarrow> t \\<longmapsto> t'", "thus \"t \\<longmapsto> t'\""], ["proof (prove)\nusing this:\n  t \\<longmapsto>\\<^sub>c t'\n\ngoal (1 subgoal):\n 1. t \\<longmapsto> t'", "by induct (auto intro: eval_evals.intros ctxt_imp_eval)"], ["proof (state)\nthis:\n  t \\<longmapsto> t'\n\ngoal:\nNo subgoals!", "qed"], ["", "end"]]}