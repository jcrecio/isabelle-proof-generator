{"file_name": "/home/qj213/afp-2021-10-22/thys/IMO2019/IMO2019_Q1.thy", "working_directory": "/home/qj213/afp-2021-10-22/thys/IMO2019", "problem_names": ["lemma f_eq': \"f x = m * x + f 0\"", "lemma f_eq'_aux [simp]: \"NO_MATCH 0 x \\<Longrightarrow> f x = m * x + f 0\"", "lemma f_classification: \"(\\<forall>x. f x = 0) \\<or> (\\<forall>x. f x = 2 * x + f 0)\"", "theorem\n  fixes f :: \"int \\<Rightarrow> int\"\n  shows \"(\\<forall>a b. f (2 * a) + 2 * f b = f (f (a + b))) \\<longleftrightarrow>\n           (\\<forall>x. f x = 0) \\<or> (\\<forall>x. f x = 2 * x + f 0)\" (is \"?lhs \\<longleftrightarrow> ?rhs\")"], "translations": [["", "lemma f_eq': \"f x = m * x + f 0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. f x = m * x + f 0", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. f x = m * x + f 0", "have rec: \"f (b + 1) = f b + m\" for b"], ["proof (prove)\ngoal (1 subgoal):\n 1. f (b + 1) = f b + m", "using f_eq[of 0 b] f_eq[of \"-1\" \"b + 1\"]"], ["proof (prove)\nusing this:\n  f (2 * 0) + 2 * f b = f (f (0 + b))\n  f (2 * - 1) + 2 * f (b + 1) = f (f (- 1 + (b + 1)))\n\ngoal (1 subgoal):\n 1. f (b + 1) = f b + m", "by (simp add: m_def)"], ["proof (state)\nthis:\n  f (?b + 1) = f ?b + m\n\ngoal (1 subgoal):\n 1. f x = m * x + f 0", "moreover"], ["proof (state)\nthis:\n  f (?b + 1) = f ?b + m\n\ngoal (1 subgoal):\n 1. f x = m * x + f 0", "have \"f (b - 1) = f b - m\" for b"], ["proof (prove)\ngoal (1 subgoal):\n 1. f (b - 1) = f b - m", "using rec[of \"b - 1\"]"], ["proof (prove)\nusing this:\n  f (b - 1 + 1) = f (b - 1) + m\n\ngoal (1 subgoal):\n 1. f (b - 1) = f b - m", "by simp"], ["proof (state)\nthis:\n  f (?b - 1) = f ?b - m\n\ngoal (1 subgoal):\n 1. f x = m * x + f 0", "ultimately"], ["proof (chain)\npicking this:\n  f (?b + 1) = f ?b + m\n  f (?b - 1) = f ?b - m", "show ?thesis"], ["proof (prove)\nusing this:\n  f (?b + 1) = f ?b + m\n  f (?b - 1) = f ?b - m\n\ngoal (1 subgoal):\n 1. f x = m * x + f 0", "by (induction x rule: int_induct[of _ 0]) (auto simp: algebra_simps)"], ["proof (state)\nthis:\n  f x = m * x + f 0\n\ngoal:\nNo subgoals!", "qed"], ["", "text \\<open>\n  This version is better for the simplifier because it prevents it from looping.\n\\<close>"], ["", "lemma f_eq'_aux [simp]: \"NO_MATCH 0 x \\<Longrightarrow> f x = m * x + f 0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. NO_MATCH (0::'a) x \\<Longrightarrow> f x = m * x + f 0", "by (rule f_eq')"], ["", "text \\<open>\n  Plugging in \\<open>(0, 0)\\<close> and \\<open>(0, 1)\\<close>.\n\\<close>"], ["", "lemma f_classification: \"(\\<forall>x. f x = 0) \\<or> (\\<forall>x. f x = 2 * x + f 0)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<forall>x. f x = 0) \\<or> (\\<forall>x. f x = 2 * x + f 0)", "using f_eq[of 0 0] f_eq[of 0 1]"], ["proof (prove)\nusing this:\n  f (2 * 0) + 2 * f 0 = f (f (0 + 0))\n  f (2 * 0) + 2 * f 1 = f (f (0 + 1))\n\ngoal (1 subgoal):\n 1. (\\<forall>x. f x = 0) \\<or> (\\<forall>x. f x = 2 * x + f 0)", "by auto"], ["", "end"], ["", "text \\<open>\n  It is now easy to derive the full characterisation of the functions we considered:\n\\<close>"], ["", "theorem\n  fixes f :: \"int \\<Rightarrow> int\"\n  shows \"(\\<forall>a b. f (2 * a) + 2 * f b = f (f (a + b))) \\<longleftrightarrow>\n           (\\<forall>x. f x = 0) \\<or> (\\<forall>x. f x = 2 * x + f 0)\" (is \"?lhs \\<longleftrightarrow> ?rhs\")"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<forall>a b. f (2 * a) + 2 * f b = f (f (a + b))) =\n    ((\\<forall>x. f x = 0) \\<or> (\\<forall>x. f x = 2 * x + f 0))", "proof"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<forall>a b. f (2 * a) + 2 * f b = f (f (a + b)) \\<Longrightarrow>\n    (\\<forall>x. f x = 0) \\<or> (\\<forall>x. f x = 2 * x + f 0)\n 2. (\\<forall>x. f x = 0) \\<or>\n    (\\<forall>x. f x = 2 * x + f 0) \\<Longrightarrow>\n    \\<forall>a b. f (2 * a) + 2 * f b = f (f (a + b))", "assume ?lhs"], ["proof (state)\nthis:\n  \\<forall>a b. f (2 * a) + 2 * f b = f (f (a + b))\n\ngoal (2 subgoals):\n 1. \\<forall>a b. f (2 * a) + 2 * f b = f (f (a + b)) \\<Longrightarrow>\n    (\\<forall>x. f x = 0) \\<or> (\\<forall>x. f x = 2 * x + f 0)\n 2. (\\<forall>x. f x = 0) \\<or>\n    (\\<forall>x. f x = 2 * x + f 0) \\<Longrightarrow>\n    \\<forall>a b. f (2 * a) + 2 * f b = f (f (a + b))", "thus ?rhs"], ["proof (prove)\nusing this:\n  \\<forall>a b. f (2 * a) + 2 * f b = f (f (a + b))\n\ngoal (1 subgoal):\n 1. (\\<forall>x. f x = 0) \\<or> (\\<forall>x. f x = 2 * x + f 0)", "using f_classification[of f]"], ["proof (prove)\nusing this:\n  \\<forall>a b. f (2 * a) + 2 * f b = f (f (a + b))\n  (\\<And>a b. f (2 * a) + 2 * f b = f (f (a + b))) \\<Longrightarrow>\n  (\\<forall>x. f x = 0) \\<or> (\\<forall>x. f x = 2 * x + f 0)\n\ngoal (1 subgoal):\n 1. (\\<forall>x. f x = 0) \\<or> (\\<forall>x. f x = 2 * x + f 0)", "by blast"], ["proof (state)\nthis:\n  (\\<forall>x. f x = 0) \\<or> (\\<forall>x. f x = 2 * x + f 0)\n\ngoal (1 subgoal):\n 1. (\\<forall>x. f x = 0) \\<or>\n    (\\<forall>x. f x = 2 * x + f 0) \\<Longrightarrow>\n    \\<forall>a b. f (2 * a) + 2 * f b = f (f (a + b))", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. (\\<forall>x. f x = 0) \\<or>\n    (\\<forall>x. f x = 2 * x + f 0) \\<Longrightarrow>\n    \\<forall>a b. f (2 * a) + 2 * f b = f (f (a + b))", "assume ?rhs"], ["proof (state)\nthis:\n  (\\<forall>x. f x = 0) \\<or> (\\<forall>x. f x = 2 * x + f 0)\n\ngoal (1 subgoal):\n 1. (\\<forall>x. f x = 0) \\<or>\n    (\\<forall>x. f x = 2 * x + f 0) \\<Longrightarrow>\n    \\<forall>a b. f (2 * a) + 2 * f b = f (f (a + b))", "thus ?lhs"], ["proof (prove)\nusing this:\n  (\\<forall>x. f x = 0) \\<or> (\\<forall>x. f x = 2 * x + f 0)\n\ngoal (1 subgoal):\n 1. \\<forall>a b. f (2 * a) + 2 * f b = f (f (a + b))", "by smt"], ["proof (state)\nthis:\n  \\<forall>a b. f (2 * a) + 2 * f b = f (f (a + b))\n\ngoal:\nNo subgoals!", "qed"], ["", "end"]]}