{"file_name": "/home/qj213/afp-2021-10-22/thys/Green/Derivs.thy", "working_directory": "/home/qj213/afp-2021-10-22/thys/Green", "problem_names": ["lemma field_simp_has_vector_derivative [derivative_intros]:\n  \"(f has_field_derivative y) F \\<Longrightarrow> (f has_vector_derivative y) F\"", "lemma continuous_on_cases_empty [continuous_intros]:\n  \"\\<lbrakk>closed S; continuous_on S f; \\<And>x. \\<lbrakk>x \\<in> S; \\<not> P x\\<rbrakk> \\<Longrightarrow> f x = g x\\<rbrakk> \\<Longrightarrow>\n    continuous_on S (\\<lambda>x. if P x then f x else g x)\"", "lemma inj_on_cases:\n  assumes \"inj_on f (Collect P \\<inter> S)\" \"inj_on g (Collect (Not \\<circ> P) \\<inter> S)\"\n    \"f ` (Collect P \\<inter> S) \\<inter> g ` (Collect (Not \\<circ> P) \\<inter> S) = {}\"\n  shows \"inj_on (\\<lambda>x. if P x then f x else g x) S\"", "lemma inj_on_arccos: \"S \\<subseteq> {-1..1} \\<Longrightarrow> inj_on arccos S\"", "lemma has_vector_derivative_componentwise_within:\n  \"(f has_vector_derivative f') (at a within S) \\<longleftrightarrow>\n    (\\<forall>i \\<in> Basis. ((\\<lambda>x. f x \\<bullet> i) has_vector_derivative (f' \\<bullet> i)) (at a within S))\"", "lemma has_vector_derivative_pair_within:\n  fixes f :: \"real \\<Rightarrow> 'a::euclidean_space\" and g :: \"real \\<Rightarrow> 'b::euclidean_space\"\n  assumes \"\\<And>u. u \\<in> Basis \\<Longrightarrow> ((\\<lambda>x. f x \\<bullet> u) has_vector_derivative f' \\<bullet> u) (at x within S)\"\n    \"\\<And>u. u \\<in> Basis \\<Longrightarrow> ((\\<lambda>x. g x \\<bullet> u) has_vector_derivative g' \\<bullet> u) (at x within S)\"\n  shows \"((\\<lambda>x. (f x, g x)) has_vector_derivative (f',g')) (at x within S)\"", "lemma piecewise_C1_differentiable_const:\n  shows \"(\\<lambda>x. c) piecewise_C1_differentiable_on s\"", "lemma piecewise_C1_differentiable_on_ident [simp, derivative_intros]:\n  fixes f :: \"real \\<Rightarrow> 'a::real_normed_vector\"\n  shows \"(\\<lambda>x. x) piecewise_C1_differentiable_on S\"", "lemma piecewise_C1_differentiable_on_mult [simp, derivative_intros]:\n  fixes f :: \"real \\<Rightarrow> 'a::real_normed_algebra\"\n  assumes \"f piecewise_C1_differentiable_on S\" \"g piecewise_C1_differentiable_on S\"\n  shows \"(\\<lambda>x. f x * g x) piecewise_C1_differentiable_on S\"", "lemma C1_differentiable_on_cdiv [simp, derivative_intros]:\n  fixes f :: \"real \\<Rightarrow> 'a :: real_normed_field\"\n  shows \"f C1_differentiable_on S \\<Longrightarrow> (\\<lambda>x. f x / c) C1_differentiable_on S\"", "lemma piecewise_C1_differentiable_on_cdiv [simp, derivative_intros]:\n  fixes f :: \"real \\<Rightarrow> 'a::real_normed_field\"\n  assumes \"f piecewise_C1_differentiable_on S\"\n  shows \"(\\<lambda>x. f x / c) piecewise_C1_differentiable_on S\"", "lemma sqrt_C1_differentiable [simp, derivative_intros]:\n  assumes f: \"f C1_differentiable_on S\" and fim: \"f ` S \\<subseteq> {0<..}\"\n  shows \"(\\<lambda>x. sqrt (f x)) C1_differentiable_on S\"", "lemma sqrt_piecewise_C1_differentiable [simp, derivative_intros]:\n  assumes f: \"f piecewise_C1_differentiable_on S\" and fim: \"f ` S \\<subseteq> {0<..}\"\n  shows \"(\\<lambda>x. sqrt (f x)) piecewise_C1_differentiable_on S\"", "lemma\n  fixes f :: \"real \\<Rightarrow> 'a::{banach,real_normed_field}\"\n  assumes f: \"f C1_differentiable_on S\"\n  shows sin_C1_differentiable [simp, derivative_intros]: \"(\\<lambda>x. sin (f x)) C1_differentiable_on S\"\n  and   cos_C1_differentiable [simp, derivative_intros]: \"(\\<lambda>x. cos (f x)) C1_differentiable_on S\"", "lemma has_derivative_abs:\n  fixes a::real\n  assumes \"a \\<noteq> 0\"\n  shows \"(abs has_derivative ((*) (sgn a))) (at a)\"", "lemma abs_C1_differentiable [simp, derivative_intros]:\n  fixes f :: \"real \\<Rightarrow> real\"\n  assumes f: \"f C1_differentiable_on S\" and \"0 \\<notin> f ` S\"\n  shows \"(\\<lambda>x. abs (f x)) C1_differentiable_on S\"", "lemma C1_differentiable_on_pair [simp, derivative_intros]:\n  fixes f :: \"real \\<Rightarrow> 'a::euclidean_space\" and g :: \"real \\<Rightarrow> 'b::euclidean_space\"\n  assumes \"f C1_differentiable_on S\" \"g C1_differentiable_on S\"\n  shows \"(\\<lambda>x. (f x, g x)) C1_differentiable_on S\"", "lemma piecewise_C1_differentiable_on_pair [simp, derivative_intros]:\n  fixes f :: \"real \\<Rightarrow> 'a::euclidean_space\" and g :: \"real \\<Rightarrow> 'b::euclidean_space\"\n  assumes \"f piecewise_C1_differentiable_on S\" \"g piecewise_C1_differentiable_on S\"\n  shows \"(\\<lambda>x. (f x, g x)) piecewise_C1_differentiable_on S\"", "lemma test2:\n  assumes s: \"\\<And>x. x \\<in> {0..1} - s \\<Longrightarrow> g differentiable at x\"\n    and fs: \"finite s\" and uv: \"u \\<in> {0..1}\" \"v \\<in> {0..1}\" \"u \\<le> v\"\n    and \"x \\<in> {0..1}\" \"x \\<notin> (\\<lambda>t. (v-u) *\\<^sub>R t + u) -` s\"\n  shows \"vector_derivative (\\<lambda>x. g ((v-u) * x + u)) (at x within {0..1}) = (v-u) *\\<^sub>R vector_derivative g (at ((v-u) * x + u) within{0..1})\"", "lemma C1_differentiable_on_components:\n  assumes \"\\<And>i. i \\<in> Basis \\<Longrightarrow> (\\<lambda>x. f x \\<bullet> i) C1_differentiable_on s\"\n  shows \"f C1_differentiable_on s\"", "lemma piecewise_C1_differentiable_on_components:\n  assumes \"finite t\"\n    \"\\<And>i. i \\<in> Basis \\<Longrightarrow> (\\<lambda>x. f x \\<bullet> i) C1_differentiable_on s - t\"\n    \"\\<And>i. i \\<in> Basis \\<Longrightarrow> continuous_on s (\\<lambda>x. f x \\<bullet> i)\"\n  shows \"f piecewise_C1_differentiable_on s\"", "lemma all_components_smooth_one_pw_smooth_is_pw_smooth:\n  assumes \"\\<And>i. i \\<in> Basis - {j} \\<Longrightarrow> (\\<lambda>x. f x \\<bullet> i) C1_differentiable_on s\"\n  assumes \"(\\<lambda>x. f x \\<bullet> j) piecewise_C1_differentiable_on s\"\n  shows \"f piecewise_C1_differentiable_on s\"", "lemma derivative_component_fun_component:\n  fixes i::\"'a::euclidean_space\"\n  assumes \"f differentiable (at x)\"\n  shows \"((vector_derivative f (at x)) \\<bullet> i) = ((vector_derivative (\\<lambda>x. (f x) \\<bullet> i) (at x)) )\"", "lemma gamma_deriv_at_within:\n  assumes a_leq_b: \"a < b\"  and\n    x_within_bounds: \"x \\<in> {a..b}\" and\n    gamma_differentiable: \"\\<forall>x \\<in> {a .. b}. \\<gamma> differentiable at x\"\n  shows  \"vector_derivative \\<gamma> (at x within {a..b}) =  vector_derivative \\<gamma> (at x)\"", "lemma islimpt_diff_finite:\n  assumes \"finite (t::'a::t1_space set)\"\n  shows \"x islimpt s - t = x islimpt s\"", "lemma ivl_limpt_diff:\n  assumes \"finite s\" \"a < b\"  \"(x::real) \\<in> {a..b} - s\"\n  shows \"x islimpt {a..b} - s\"", "lemma ivl_closure_diff_del:\n  assumes \"finite s\" \"a < b\"  \"(x::real) \\<in> {a..b} - s\"\n  shows \"x \\<in> closure (({a..b} - s) - {x})\"", "lemma ivl_not_trivial_limit_within:\n  assumes \"finite s\"\n    \"a < b\"\n    \"(x::real) \\<in> {a..b} - s\"\n  shows \"at x within {a..b} - s \\<noteq> bot\"", "lemma vector_derivative_at_within_non_trivial_limit:\n  \"at x within s \\<noteq> bot \\<and> (f has_vector_derivative f') (at x) \\<Longrightarrow>\n     vector_derivative f (at x within s) = f'\"", "lemma vector_derivative_at_within_ivl_diff:\n  \"finite s \\<and> a < b \\<and> (x::real) \\<in> {a..b} - s \\<and> (f has_vector_derivative f') (at x) \\<Longrightarrow>\n     vector_derivative f (at x within {a..b} - s) = f'\"", "lemma gamma_deriv_at_within_diff:\n  assumes a_leq_b: \"a < b\"  and\n    x_within_bounds: \"x \\<in> {a..b} - s\" and\n    gamma_differentiable: \"\\<forall>x \\<in> {a .. b} - s. \\<gamma> differentiable at x\" and\n    s_subset: \"s \\<subseteq> {a..b}\" and\n    finite_s: \"finite s\"\n  shows \"vector_derivative \\<gamma> (at x within {a..b} - s)\n                           =  vector_derivative \\<gamma> (at x)\"", "lemma gamma_deriv_at_within_gen:\n  assumes a_leq_b: \"a < b\"  and\n    x_within_bounds: \"x \\<in> s\" and\n    s_subset: \"s \\<subseteq> {a..b}\" and\n    gamma_differentiable: \"\\<forall>x \\<in> s. \\<gamma> differentiable at x\"\n  shows \"vector_derivative \\<gamma> (at x within ({a..b})) =  vector_derivative \\<gamma> (at x)\"", "lemma derivative_component_fun_component_at_within_gen:\n  assumes gamma_differentiable: \"\\<forall>x \\<in> s. \\<gamma> differentiable at x\" and s_subset: \"s \\<subseteq> {0..1}\"\n  shows \"\\<forall>x \\<in> s. vector_derivative (\\<lambda>x. \\<gamma> x) (at x within {0..1}) \\<bullet> (i::'a:: euclidean_space)\n           =  vector_derivative (\\<lambda>x. \\<gamma> x \\<bullet> i) (at x within {0..1})\"", "lemma derivative_component_fun_component_at_within:\n  assumes gamma_differentiable: \"\\<forall>x \\<in> {0 .. 1}. \\<gamma> differentiable at x\"\n  shows \"\\<forall>x \\<in> {0..1}. vector_derivative (\\<lambda>x. \\<gamma> x) (at x within {0..1}) \\<bullet> (i::'a:: euclidean_space)\n                                       =  vector_derivative (\\<lambda>x. \\<gamma> x \\<bullet> i) (at x within {0..1})\"", "lemma straight_path_diffrentiable_x:\n  fixes b :: \"real\" and y1 ::\"real\"\n  assumes gamma_def: \"\\<gamma> = (\\<lambda>x. (b, y2 + y1 * x))\"\n  shows \"\\<forall>x. \\<gamma> differentiable at x\"", "lemma straight_path_diffrentiable_y:\n  fixes b :: \"real\" and\n    y1 y2 ::\"real\"\n  assumes gamma_def: \"\\<gamma> = (\\<lambda>x. (y2 + y1 * x , b))\"\n  shows \"\\<forall>x. \\<gamma> differentiable at x\"", "lemma piecewise_C1_differentiable_on_imp_continuous_on:\n  assumes \"f piecewise_C1_differentiable_on s\"\n  shows \"continuous_on s f\"", "lemma boring_lemma1:\n  fixes f :: \"real\\<Rightarrow>real\"\n  assumes \"(f has_vector_derivative D) (at x)\"\n  shows \"((\\<lambda>x. (f x, 0)) has_vector_derivative ((D,0::real))) (at x)\"", "lemma boring_lemma2:\n  fixes f :: \"real\\<Rightarrow>real\"\n  assumes \"(f has_vector_derivative D) (at x)\"\n  shows \"((\\<lambda>x. (0, f x)) has_vector_derivative (0, D)) (at x)\"", "lemma pair_prod_smooth_pw_smooth:\n  assumes \"(f::real\\<Rightarrow>real) C1_differentiable_on s\" \"(g::real\\<Rightarrow>real) piecewise_C1_differentiable_on s\"\n  shows \"(\\<lambda>x. (f x, g x)) piecewise_C1_differentiable_on s\"", "lemma scale_shift_smooth:\n  shows \"(\\<lambda>x. a + b * x) C1_differentiable_on s\"", "lemma open_diff:\n  assumes \"finite (t::'a::t1_space set)\"\n    \"open (s::'a set)\"\n  shows \"open (s -t)\"", "lemma has_derivative_transform_within:\n  assumes \"0 < d\"\n    and \"x \\<in> s\"\n    and \"\\<forall>x'\\<in>s. dist x' x < d \\<longrightarrow> f x' = g x'\"\n    and \"(f has_derivative f') (at x within s)\"\n  shows \"(g has_derivative f') (at x within s)\"", "lemma has_derivative_transform_within_ivl:\n  assumes \"(0::real) < b\"\n    and     \"\\<forall>x\\<in>{a..b} -s. f x = g x\"\n    and \"x \\<in> {a..b} -s\"\n    and \"(f has_derivative f') (at x within {a..b} - s)\"\n  shows \"(g has_derivative f') (at x within {a..b} - s)\"", "lemma has_vector_derivative_transform_within_ivl:\n  assumes \"(0::real) < b\"\n    and     \"\\<forall>x\\<in>{a..b} -s . f x = g x\"\n    and \"x \\<in> {a..b} - s\"\n    and \"(f has_vector_derivative f') (at x within {a..b} - s)\"\n  shows \"(g has_vector_derivative f') (at x within {a..b} - s)\"", "lemma has_derivative_transform_at:\n  assumes \"0 < d\"\n    and \"\\<forall>x'. dist x' x < d \\<longrightarrow> f x' = g x'\"\n    and \"(f has_derivative f') (at x)\"\n  shows \"(g has_derivative f') (at x)\"", "lemma has_vector_derivative_transform_at:\n  assumes \"0 < d\"\n    and \"\\<forall>x'. dist x' x < d \\<longrightarrow> f x' = g x'\"\n    and \"(f has_vector_derivative f') (at x)\"\n  shows \"(g has_vector_derivative f') (at x)\"", "lemma C1_diff_components_2:\n  assumes \"b \\<in> Basis\"\n  assumes \"f C1_differentiable_on s\"\n  shows \"(\\<lambda>x. f x \\<bullet> b) C1_differentiable_on s\"", "lemma eq_smooth:\n  assumes \"0 < d\"\n    \"\\<forall>x\\<in>s. \\<forall>y. dist x y < d \\<longrightarrow> f y = g y\" (*This crappy condition cannot be loosened :( *)\n    \"f C1_differentiable_on s\"\n  shows \"g C1_differentiable_on s\"", "lemma eq_pw_smooth:\n  assumes \"0 < d\"\n    \"\\<forall>x\\<in>s. \\<forall>y. dist x y < d \\<longrightarrow> f y = g y\" (*This crappy condition cannot be loosened :( *)\n    \"\\<forall>x\\<in>s. f x = g x\"\n    \"f piecewise_C1_differentiable_on s\"\n  shows \"g piecewise_C1_differentiable_on s\"", "lemma scale_piecewise_C1_differentiable_on:\n  assumes \"f piecewise_C1_differentiable_on s\"\n  shows \"(\\<lambda>x. (c::real) * (f x)) piecewise_C1_differentiable_on s\"", "lemma eq_smooth_gen:\n  assumes \"f C1_differentiable_on s\"\n    \"\\<forall>x. f x = g x\"\n  shows \"g C1_differentiable_on s\"", "lemma subpath_compose:\n  shows \"(subpath a b \\<gamma>) = \\<gamma> o (\\<lambda>x.  (b - a) * x + a)\"", "lemma subpath_smooth:\n  assumes \"\\<gamma> C1_differentiable_on {0..1}\" \"0 \\<le> a\" \"a < b\" \"b \\<le> 1\"\n  shows \"(subpath a b \\<gamma>) C1_differentiable_on {0..1}\"", "lemma has_vector_derivative_divide[derivative_intros]:\n  fixes a :: \"'a::real_normed_field\"\n  shows \"(f has_vector_derivative x) F \\<Longrightarrow> ((\\<lambda>x. f x / a) has_vector_derivative (x / a)) F\""], "translations": [["", "lemma field_simp_has_vector_derivative [derivative_intros]:\n  \"(f has_field_derivative y) F \\<Longrightarrow> (f has_vector_derivative y) F\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (f has_real_derivative y) F \\<Longrightarrow>\n    (f has_vector_derivative y) F", "by (simp add: has_field_derivative_iff_has_vector_derivative)"], ["", "lemma continuous_on_cases_empty [continuous_intros]:\n  \"\\<lbrakk>closed S; continuous_on S f; \\<And>x. \\<lbrakk>x \\<in> S; \\<not> P x\\<rbrakk> \\<Longrightarrow> f x = g x\\<rbrakk> \\<Longrightarrow>\n    continuous_on S (\\<lambda>x. if P x then f x else g x)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>closed S; continuous_on S f;\n     \\<And>x.\n        \\<lbrakk>x \\<in> S; \\<not> P x\\<rbrakk>\n        \\<Longrightarrow> f x = g x\\<rbrakk>\n    \\<Longrightarrow> continuous_on S (\\<lambda>x. if P x then f x else g x)", "using continuous_on_cases [of _ \"{}\"]"], ["proof (prove)\nusing this:\n  \\<lbrakk>closed ?s; closed {}; continuous_on ?s ?f; continuous_on {} ?g;\n   \\<forall>x.\n      x \\<in> ?s \\<and> \\<not> ?P x \\<or>\n      x \\<in> {} \\<and> ?P x \\<longrightarrow>\n      ?f x = ?g x\\<rbrakk>\n  \\<Longrightarrow> continuous_on (?s \\<union> {})\n                     (\\<lambda>x. if ?P x then ?f x else ?g x)\n\ngoal (1 subgoal):\n 1. \\<lbrakk>closed S; continuous_on S f;\n     \\<And>x.\n        \\<lbrakk>x \\<in> S; \\<not> P x\\<rbrakk>\n        \\<Longrightarrow> f x = g x\\<rbrakk>\n    \\<Longrightarrow> continuous_on S (\\<lambda>x. if P x then f x else g x)", "by force"], ["", "lemma inj_on_cases:\n  assumes \"inj_on f (Collect P \\<inter> S)\" \"inj_on g (Collect (Not \\<circ> P) \\<inter> S)\"\n    \"f ` (Collect P \\<inter> S) \\<inter> g ` (Collect (Not \\<circ> P) \\<inter> S) = {}\"\n  shows \"inj_on (\\<lambda>x. if P x then f x else g x) S\""], ["proof (prove)\ngoal (1 subgoal):\n 1. inj_on (\\<lambda>x. if P x then f x else g x) S", "using assms"], ["proof (prove)\nusing this:\n  inj_on f (Collect P \\<inter> S)\n  inj_on g (Collect (Not \\<circ> P) \\<inter> S)\n  f ` (Collect P \\<inter> S) \\<inter>\n  g ` (Collect (Not \\<circ> P) \\<inter> S) =\n  {}\n\ngoal (1 subgoal):\n 1. inj_on (\\<lambda>x. if P x then f x else g x) S", "by (force simp: inj_on_def)"], ["", "lemma inj_on_arccos: \"S \\<subseteq> {-1..1} \\<Longrightarrow> inj_on arccos S\""], ["proof (prove)\ngoal (1 subgoal):\n 1. S \\<subseteq> {- 1..1} \\<Longrightarrow> inj_on arccos S", "by (metis atLeastAtMost_iff cos_arccos inj_onI subsetCE)"], ["", "lemma has_vector_derivative_componentwise_within:\n  \"(f has_vector_derivative f') (at a within S) \\<longleftrightarrow>\n    (\\<forall>i \\<in> Basis. ((\\<lambda>x. f x \\<bullet> i) has_vector_derivative (f' \\<bullet> i)) (at a within S))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (f has_vector_derivative f') (at a within S) =\n    (\\<forall>i\\<in>Basis.\n        ((\\<lambda>x. f x \\<bullet> i) has_vector_derivative f' \\<bullet> i)\n         (at a within S))", "apply (simp add: has_vector_derivative_def)"], ["proof (prove)\ngoal (1 subgoal):\n 1. (f has_derivative (\\<lambda>x. x *\\<^sub>R f')) (at a within S) =\n    (\\<forall>i\\<in>Basis.\n        ((\\<lambda>x. f x \\<bullet> i) has_derivative\n         (\\<lambda>x. x * (f' \\<bullet> i)))\n         (at a within S))", "apply (subst has_derivative_componentwise_within)"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<forall>i\\<in>Basis.\n        ((\\<lambda>x. f x \\<bullet> i) has_derivative\n         (\\<lambda>x. x *\\<^sub>R f' \\<bullet> i))\n         (at a within S)) =\n    (\\<forall>i\\<in>Basis.\n        ((\\<lambda>x. f x \\<bullet> i) has_derivative\n         (\\<lambda>x. x * (f' \\<bullet> i)))\n         (at a within S))", "apply simp"], ["proof (prove)\ngoal:\nNo subgoals!", "done"], ["", "lemma has_vector_derivative_pair_within:\n  fixes f :: \"real \\<Rightarrow> 'a::euclidean_space\" and g :: \"real \\<Rightarrow> 'b::euclidean_space\"\n  assumes \"\\<And>u. u \\<in> Basis \\<Longrightarrow> ((\\<lambda>x. f x \\<bullet> u) has_vector_derivative f' \\<bullet> u) (at x within S)\"\n    \"\\<And>u. u \\<in> Basis \\<Longrightarrow> ((\\<lambda>x. g x \\<bullet> u) has_vector_derivative g' \\<bullet> u) (at x within S)\"\n  shows \"((\\<lambda>x. (f x, g x)) has_vector_derivative (f',g')) (at x within S)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. ((\\<lambda>x. (f x, g x)) has_vector_derivative (f', g'))\n     (at x within S)", "apply (subst has_vector_derivative_componentwise_within)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>i\\<in>Basis.\n       ((\\<lambda>x. (f x, g x) \\<bullet> i) has_vector_derivative\n        (f', g') \\<bullet> i)\n        (at x within S)", "apply (auto simp: assms Basis_prod_def)"], ["proof (prove)\ngoal:\nNo subgoals!", "done"], ["", "lemma piecewise_C1_differentiable_const:\n  shows \"(\\<lambda>x. c) piecewise_C1_differentiable_on s\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>x. c) piecewise_C1_differentiable_on s", "using continuous_on_const"], ["proof (prove)\nusing this:\n  continuous_on ?s (\\<lambda>x. ?c)\n\ngoal (1 subgoal):\n 1. (\\<lambda>x. c) piecewise_C1_differentiable_on s", "by (auto simp add: piecewise_C1_differentiable_on_def)"], ["", "declare piecewise_C1_differentiable_const [simp, derivative_intros]"], ["", "declare piecewise_C1_differentiable_neg [simp, derivative_intros]"], ["", "declare piecewise_C1_differentiable_add [simp, derivative_intros]"], ["", "declare piecewise_C1_differentiable_diff [simp, derivative_intros]"], ["", "(*move to Derivative*)"], ["", "lemma piecewise_C1_differentiable_on_ident [simp, derivative_intros]:\n  fixes f :: \"real \\<Rightarrow> 'a::real_normed_vector\"\n  shows \"(\\<lambda>x. x) piecewise_C1_differentiable_on S\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>x. x) piecewise_C1_differentiable_on S", "unfolding piecewise_C1_differentiable_on_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. continuous_on S (\\<lambda>x. x) \\<and>\n    (\\<exists>Sa.\n        finite Sa \\<and> (\\<lambda>x. x) C1_differentiable_on S - Sa)", "using C1_differentiable_on_ident"], ["proof (prove)\nusing this:\n  (\\<lambda>x. x) C1_differentiable_on ?S\n\ngoal (1 subgoal):\n 1. continuous_on S (\\<lambda>x. x) \\<and>\n    (\\<exists>Sa.\n        finite Sa \\<and> (\\<lambda>x. x) C1_differentiable_on S - Sa)", "by (blast intro: continuous_on_id C1_differentiable_on_ident)"], ["", "lemma piecewise_C1_differentiable_on_mult [simp, derivative_intros]:\n  fixes f :: \"real \\<Rightarrow> 'a::real_normed_algebra\"\n  assumes \"f piecewise_C1_differentiable_on S\" \"g piecewise_C1_differentiable_on S\"\n  shows \"(\\<lambda>x. f x * g x) piecewise_C1_differentiable_on S\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>x. f x * g x) piecewise_C1_differentiable_on S", "using assms"], ["proof (prove)\nusing this:\n  f piecewise_C1_differentiable_on S\n  g piecewise_C1_differentiable_on S\n\ngoal (1 subgoal):\n 1. (\\<lambda>x. f x * g x) piecewise_C1_differentiable_on S", "unfolding piecewise_C1_differentiable_on_def"], ["proof (prove)\nusing this:\n  continuous_on S f \\<and>\n  (\\<exists>Sa. finite Sa \\<and> f C1_differentiable_on S - Sa)\n  continuous_on S g \\<and>\n  (\\<exists>Sa. finite Sa \\<and> g C1_differentiable_on S - Sa)\n\ngoal (1 subgoal):\n 1. continuous_on S (\\<lambda>x. f x * g x) \\<and>\n    (\\<exists>Sa.\n        finite Sa \\<and>\n        (\\<lambda>x. f x * g x) C1_differentiable_on S - Sa)", "apply safe"], ["proof (prove)\ngoal (2 subgoals):\n 1. \\<And>Sa Saa.\n       \\<lbrakk>continuous_on S f; continuous_on S g; finite Sa;\n        f C1_differentiable_on S - Sa; finite Saa;\n        g C1_differentiable_on S - Saa\\<rbrakk>\n       \\<Longrightarrow> continuous_on S (\\<lambda>x. f x * g x)\n 2. \\<And>Sa Saa.\n       \\<lbrakk>continuous_on S f; continuous_on S g; finite Sa;\n        f C1_differentiable_on S - Sa; finite Saa;\n        g C1_differentiable_on S - Saa\\<rbrakk>\n       \\<Longrightarrow> \\<exists>Sa.\n                            finite Sa \\<and>\n                            (\\<lambda>x. f x * g x) C1_differentiable_on\n                            S - Sa", "apply (blast intro: continuous_intros)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>Sa Saa.\n       \\<lbrakk>continuous_on S f; continuous_on S g; finite Sa;\n        f C1_differentiable_on S - Sa; finite Saa;\n        g C1_differentiable_on S - Saa\\<rbrakk>\n       \\<Longrightarrow> \\<exists>Sa.\n                            finite Sa \\<and>\n                            (\\<lambda>x. f x * g x) C1_differentiable_on\n                            S - Sa", "apply (rename_tac A B)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>A B.\n       \\<lbrakk>continuous_on S f; continuous_on S g; finite A;\n        f C1_differentiable_on S - A; finite B;\n        g C1_differentiable_on S - B\\<rbrakk>\n       \\<Longrightarrow> \\<exists>Sa.\n                            finite Sa \\<and>\n                            (\\<lambda>x. f x * g x) C1_differentiable_on\n                            S - Sa", "apply (rule_tac x=\"A \\<union> B\" in exI)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>A B.\n       \\<lbrakk>continuous_on S f; continuous_on S g; finite A;\n        f C1_differentiable_on S - A; finite B;\n        g C1_differentiable_on S - B\\<rbrakk>\n       \\<Longrightarrow> finite (A \\<union> B) \\<and>\n                         (\\<lambda>x. f x * g x) C1_differentiable_on\n                         S - (A \\<union> B)", "apply (auto intro: C1_differentiable_on_mult C1_differentiable_on_subset)"], ["proof (prove)\ngoal:\nNo subgoals!", "done"], ["", "lemma C1_differentiable_on_cdiv [simp, derivative_intros]:\n  fixes f :: \"real \\<Rightarrow> 'a :: real_normed_field\"\n  shows \"f C1_differentiable_on S \\<Longrightarrow> (\\<lambda>x. f x / c) C1_differentiable_on S\""], ["proof (prove)\ngoal (1 subgoal):\n 1. f C1_differentiable_on S \\<Longrightarrow>\n    (\\<lambda>x. f x / c) C1_differentiable_on S", "by (simp add: divide_inverse)"], ["", "lemma piecewise_C1_differentiable_on_cdiv [simp, derivative_intros]:\n  fixes f :: \"real \\<Rightarrow> 'a::real_normed_field\"\n  assumes \"f piecewise_C1_differentiable_on S\"\n  shows \"(\\<lambda>x. f x / c) piecewise_C1_differentiable_on S\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>x. f x / c) piecewise_C1_differentiable_on S", "by (simp add: divide_inverse piecewise_C1_differentiable_const piecewise_C1_differentiable_on_mult assms)"], ["", "lemma sqrt_C1_differentiable [simp, derivative_intros]:\n  assumes f: \"f C1_differentiable_on S\" and fim: \"f ` S \\<subseteq> {0<..}\"\n  shows \"(\\<lambda>x. sqrt (f x)) C1_differentiable_on S\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>x. sqrt (f x)) C1_differentiable_on S", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. (\\<lambda>x. sqrt (f x)) C1_differentiable_on S", "have contf: \"continuous_on S f\""], ["proof (prove)\ngoal (1 subgoal):\n 1. continuous_on S f", "by (simp add: C1_differentiable_imp_continuous_on f)"], ["proof (state)\nthis:\n  continuous_on S f\n\ngoal (1 subgoal):\n 1. (\\<lambda>x. sqrt (f x)) C1_differentiable_on S", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>x. sqrt (f x)) C1_differentiable_on S", "using assms"], ["proof (prove)\nusing this:\n  f C1_differentiable_on S\n  f ` S \\<subseteq> {0<..}\n\ngoal (1 subgoal):\n 1. (\\<lambda>x. sqrt (f x)) C1_differentiable_on S", "unfolding C1_differentiable_on_def has_field_derivative_iff_has_vector_derivative [symmetric]"], ["proof (prove)\nusing this:\n  \\<exists>D.\n     (\\<forall>x\\<in>S. (f has_real_derivative D x) (at x)) \\<and>\n     continuous_on S D\n  f ` S \\<subseteq> {0<..}\n\ngoal (1 subgoal):\n 1. \\<exists>D.\n       (\\<forall>x\\<in>S.\n           ((\\<lambda>x. sqrt (f x)) has_real_derivative D x) (at x)) \\<and>\n       continuous_on S D", "by (fastforce intro!: contf continuous_intros derivative_intros)"], ["proof (state)\nthis:\n  (\\<lambda>x. sqrt (f x)) C1_differentiable_on S\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma sqrt_piecewise_C1_differentiable [simp, derivative_intros]:\n  assumes f: \"f piecewise_C1_differentiable_on S\" and fim: \"f ` S \\<subseteq> {0<..}\"\n  shows \"(\\<lambda>x. sqrt (f x)) piecewise_C1_differentiable_on S\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>x. sqrt (f x)) piecewise_C1_differentiable_on S", "using assms"], ["proof (prove)\nusing this:\n  f piecewise_C1_differentiable_on S\n  f ` S \\<subseteq> {0<..}\n\ngoal (1 subgoal):\n 1. (\\<lambda>x. sqrt (f x)) piecewise_C1_differentiable_on S", "unfolding piecewise_C1_differentiable_on_def"], ["proof (prove)\nusing this:\n  continuous_on S f \\<and>\n  (\\<exists>Sa. finite Sa \\<and> f C1_differentiable_on S - Sa)\n  f ` S \\<subseteq> {0<..}\n\ngoal (1 subgoal):\n 1. continuous_on S (\\<lambda>x. sqrt (f x)) \\<and>\n    (\\<exists>Sa.\n        finite Sa \\<and>\n        (\\<lambda>x. sqrt (f x)) C1_differentiable_on S - Sa)", "by (fastforce intro!: continuous_intros derivative_intros)"], ["", "lemma\n  fixes f :: \"real \\<Rightarrow> 'a::{banach,real_normed_field}\"\n  assumes f: \"f C1_differentiable_on S\"\n  shows sin_C1_differentiable [simp, derivative_intros]: \"(\\<lambda>x. sin (f x)) C1_differentiable_on S\"\n  and   cos_C1_differentiable [simp, derivative_intros]: \"(\\<lambda>x. cos (f x)) C1_differentiable_on S\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>x. sin (f x)) C1_differentiable_on S &&&\n    (\\<lambda>x. cos (f x)) C1_differentiable_on S", "proof -"], ["proof (state)\ngoal (2 subgoals):\n 1. (\\<lambda>x. sin (f x)) C1_differentiable_on S\n 2. (\\<lambda>x. cos (f x)) C1_differentiable_on S", "have contf: \"continuous_on S f\""], ["proof (prove)\ngoal (1 subgoal):\n 1. continuous_on S f", "by (simp add: C1_differentiable_imp_continuous_on f)"], ["proof (state)\nthis:\n  continuous_on S f\n\ngoal (2 subgoals):\n 1. (\\<lambda>x. sin (f x)) C1_differentiable_on S\n 2. (\\<lambda>x. cos (f x)) C1_differentiable_on S", "note df_sin = field_vector_diff_chain_at [where g=sin, unfolded o_def]"], ["proof (state)\nthis:\n  \\<lbrakk>(?f has_vector_derivative ?f') (at ?x);\n   (sin has_field_derivative ?g') (at (?f ?x))\\<rbrakk>\n  \\<Longrightarrow> ((\\<lambda>x. sin (?f x)) has_vector_derivative\n                     ?f' * ?g')\n                     (at ?x)\n\ngoal (2 subgoals):\n 1. (\\<lambda>x. sin (f x)) C1_differentiable_on S\n 2. (\\<lambda>x. cos (f x)) C1_differentiable_on S", "note df_cos = field_vector_diff_chain_at [where g=cos, unfolded o_def]"], ["proof (state)\nthis:\n  \\<lbrakk>(?f has_vector_derivative ?f') (at ?x);\n   (cos has_field_derivative ?g') (at (?f ?x))\\<rbrakk>\n  \\<Longrightarrow> ((\\<lambda>x. cos (?f x)) has_vector_derivative\n                     ?f' * ?g')\n                     (at ?x)\n\ngoal (2 subgoals):\n 1. (\\<lambda>x. sin (f x)) C1_differentiable_on S\n 2. (\\<lambda>x. cos (f x)) C1_differentiable_on S", "show  \"(\\<lambda>x. sin (f x)) C1_differentiable_on S\" \"(\\<lambda>x. cos (f x)) C1_differentiable_on S\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>x. sin (f x)) C1_differentiable_on S &&&\n    (\\<lambda>x. cos (f x)) C1_differentiable_on S", "using assms"], ["proof (prove)\nusing this:\n  f C1_differentiable_on S\n\ngoal (1 subgoal):\n 1. (\\<lambda>x. sin (f x)) C1_differentiable_on S &&&\n    (\\<lambda>x. cos (f x)) C1_differentiable_on S", "unfolding C1_differentiable_on_def has_field_derivative_iff_has_vector_derivative [symmetric]"], ["proof (prove)\nusing this:\n  \\<exists>D.\n     (\\<forall>x\\<in>S. (f has_vector_derivative D x) (at x)) \\<and>\n     continuous_on S D\n\ngoal (1 subgoal):\n 1. \\<exists>D.\n       (\\<forall>x\\<in>S.\n           ((\\<lambda>x. sin (f x)) has_vector_derivative D x)\n            (at x)) \\<and>\n       continuous_on S D &&&\n    \\<exists>D.\n       (\\<forall>x\\<in>S.\n           ((\\<lambda>x. cos (f x)) has_vector_derivative D x)\n            (at x)) \\<and>\n       continuous_on S D", "apply auto"], ["proof (prove)\ngoal (2 subgoals):\n 1. \\<And>D.\n       \\<lbrakk>\\<forall>x\\<in>S. (f has_vector_derivative D x) (at x);\n        continuous_on S D\\<rbrakk>\n       \\<Longrightarrow> \\<exists>D.\n                            (\\<forall>x\\<in>S.\n                                ((\\<lambda>x.\n                                     sin (f x)) has_vector_derivative\n                                 D x)\n                                 (at x)) \\<and>\n                            continuous_on S D\n 2. \\<And>D.\n       \\<lbrakk>\\<forall>x\\<in>S. (f has_vector_derivative D x) (at x);\n        continuous_on S D\\<rbrakk>\n       \\<Longrightarrow> \\<exists>D.\n                            (\\<forall>x\\<in>S.\n                                ((\\<lambda>x.\n                                     cos (f x)) has_vector_derivative\n                                 D x)\n                                 (at x)) \\<and>\n                            continuous_on S D", "by (rule contf continuous_intros df_sin df_cos derivative_intros exI conjI ballI | force)+"], ["proof (state)\nthis:\n  (\\<lambda>x. sin (f x)) C1_differentiable_on S\n  (\\<lambda>x. cos (f x)) C1_differentiable_on S\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma has_derivative_abs:\n  fixes a::real\n  assumes \"a \\<noteq> 0\"\n  shows \"(abs has_derivative ((*) (sgn a))) (at a)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (abs has_derivative (*) (sgn a)) (at a)", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. (abs has_derivative (*) (sgn a)) (at a)", "have [simp]: \"norm = abs\""], ["proof (prove)\ngoal (1 subgoal):\n 1. norm = abs", "using real_norm_def"], ["proof (prove)\nusing this:\n  norm ?r = \\<bar>?r\\<bar>\n\ngoal (1 subgoal):\n 1. norm = abs", "by force"], ["proof (state)\nthis:\n  norm = abs\n\ngoal (1 subgoal):\n 1. (abs has_derivative (*) (sgn a)) (at a)", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. (abs has_derivative (*) (sgn a)) (at a)", "using has_derivative_norm [where 'a=real, simplified] assms"], ["proof (prove)\nusing this:\n  ?x \\<noteq> 0 \\<Longrightarrow>\n  (abs has_derivative (\\<lambda>h. h * sgn ?x)) (at ?x)\n  a \\<noteq> 0\n\ngoal (1 subgoal):\n 1. (abs has_derivative (*) (sgn a)) (at a)", "by (simp add: mult_commute_abs)"], ["proof (state)\nthis:\n  (abs has_derivative (*) (sgn a)) (at a)\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma abs_C1_differentiable [simp, derivative_intros]:\n  fixes f :: \"real \\<Rightarrow> real\"\n  assumes f: \"f C1_differentiable_on S\" and \"0 \\<notin> f ` S\"\n  shows \"(\\<lambda>x. abs (f x)) C1_differentiable_on S\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>x. \\<bar>f x\\<bar>) C1_differentiable_on S", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. (\\<lambda>x. \\<bar>f x\\<bar>) C1_differentiable_on S", "have contf: \"continuous_on S f\""], ["proof (prove)\ngoal (1 subgoal):\n 1. continuous_on S f", "by (simp add: C1_differentiable_imp_continuous_on f)"], ["proof (state)\nthis:\n  continuous_on S f\n\ngoal (1 subgoal):\n 1. (\\<lambda>x. \\<bar>f x\\<bar>) C1_differentiable_on S", "note df = DERIV_chain [where f=abs and g=f, unfolded o_def]"], ["proof (state)\nthis:\n  \\<lbrakk>(abs has_real_derivative ?Da) (at (f ?x));\n   (f has_real_derivative ?Db) (at ?x within ?s)\\<rbrakk>\n  \\<Longrightarrow> ((\\<lambda>x. \\<bar>f x\\<bar>) has_real_derivative\n                     ?Da * ?Db)\n                     (at ?x within ?s)\n\ngoal (1 subgoal):\n 1. (\\<lambda>x. \\<bar>f x\\<bar>) C1_differentiable_on S", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>x. \\<bar>f x\\<bar>) C1_differentiable_on S", "using assms"], ["proof (prove)\nusing this:\n  f C1_differentiable_on S\n  0 \\<notin> f ` S\n\ngoal (1 subgoal):\n 1. (\\<lambda>x. \\<bar>f x\\<bar>) C1_differentiable_on S", "unfolding C1_differentiable_on_def has_field_derivative_iff_has_vector_derivative [symmetric]"], ["proof (prove)\nusing this:\n  \\<exists>D.\n     (\\<forall>x\\<in>S. (f has_real_derivative D x) (at x)) \\<and>\n     continuous_on S D\n  0 \\<notin> f ` S\n\ngoal (1 subgoal):\n 1. \\<exists>D.\n       (\\<forall>x\\<in>S.\n           ((\\<lambda>x. \\<bar>f x\\<bar>) has_real_derivative D x)\n            (at x)) \\<and>\n       continuous_on S D", "apply clarify"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>D.\n       \\<lbrakk>0 \\<notin> f ` S;\n        \\<forall>x\\<in>S. (f has_real_derivative D x) (at x);\n        continuous_on S D\\<rbrakk>\n       \\<Longrightarrow> \\<exists>D.\n                            (\\<forall>x\\<in>S.\n                                ((\\<lambda>x.\n                                     \\<bar>f x\\<bar>) has_real_derivative\n                                 D x)\n                                 (at x)) \\<and>\n                            continuous_on S D", "apply (rule df exI conjI ballI)+"], ["proof (prove)\ngoal (3 subgoals):\n 1. \\<And>D x.\n       \\<lbrakk>0 \\<notin> f ` S;\n        \\<forall>x\\<in>S. (f has_real_derivative D x) (at x);\n        continuous_on S D; x \\<in> S\\<rbrakk>\n       \\<Longrightarrow> (abs has_real_derivative ?Da11 D x) (at (f x))\n 2. \\<And>D x.\n       \\<lbrakk>0 \\<notin> f ` S;\n        \\<forall>x\\<in>S. (f has_real_derivative D x) (at x);\n        continuous_on S D; x \\<in> S\\<rbrakk>\n       \\<Longrightarrow> (f has_real_derivative ?Db11 D x) (at x)\n 3. \\<And>D.\n       \\<lbrakk>0 \\<notin> f ` S;\n        \\<forall>x\\<in>S. (f has_real_derivative D x) (at x);\n        continuous_on S D\\<rbrakk>\n       \\<Longrightarrow> continuous_on S (\\<lambda>x. ?Da11 D x * ?Db11 D x)", "apply (force simp: has_field_derivative_def intro: has_derivative_abs continuous_intros contf)+"], ["proof (prove)\ngoal:\nNo subgoals!", "done"], ["proof (state)\nthis:\n  (\\<lambda>x. \\<bar>f x\\<bar>) C1_differentiable_on S\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma C1_differentiable_on_pair [simp, derivative_intros]:\n  fixes f :: \"real \\<Rightarrow> 'a::euclidean_space\" and g :: \"real \\<Rightarrow> 'b::euclidean_space\"\n  assumes \"f C1_differentiable_on S\" \"g C1_differentiable_on S\"\n  shows \"(\\<lambda>x. (f x, g x)) C1_differentiable_on S\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>x. (f x, g x)) C1_differentiable_on S", "using assms"], ["proof (prove)\nusing this:\n  f C1_differentiable_on S\n  g C1_differentiable_on S\n\ngoal (1 subgoal):\n 1. (\\<lambda>x. (f x, g x)) C1_differentiable_on S", "unfolding C1_differentiable_on_def"], ["proof (prove)\nusing this:\n  \\<exists>D.\n     (\\<forall>x\\<in>S. (f has_vector_derivative D x) (at x)) \\<and>\n     continuous_on S D\n  \\<exists>D.\n     (\\<forall>x\\<in>S. (g has_vector_derivative D x) (at x)) \\<and>\n     continuous_on S D\n\ngoal (1 subgoal):\n 1. \\<exists>D.\n       (\\<forall>x\\<in>S.\n           ((\\<lambda>x. (f x, g x)) has_vector_derivative D x)\n            (at x)) \\<and>\n       continuous_on S D", "apply safe"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>D Da.\n       \\<lbrakk>\\<forall>x\\<in>S. (f has_vector_derivative D x) (at x);\n        continuous_on S D;\n        \\<forall>x\\<in>S. (g has_vector_derivative Da x) (at x);\n        continuous_on S Da\\<rbrakk>\n       \\<Longrightarrow> \\<exists>D.\n                            (\\<forall>x\\<in>S.\n                                ((\\<lambda>x.\n                                     (f x, g x)) has_vector_derivative\n                                 D x)\n                                 (at x)) \\<and>\n                            continuous_on S D", "apply (rename_tac A B)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>A B.\n       \\<lbrakk>\\<forall>x\\<in>S. (f has_vector_derivative A x) (at x);\n        continuous_on S A;\n        \\<forall>x\\<in>S. (g has_vector_derivative B x) (at x);\n        continuous_on S B\\<rbrakk>\n       \\<Longrightarrow> \\<exists>D.\n                            (\\<forall>x\\<in>S.\n                                ((\\<lambda>x.\n                                     (f x, g x)) has_vector_derivative\n                                 D x)\n                                 (at x)) \\<and>\n                            continuous_on S D", "apply (intro exI ballI conjI)"], ["proof (prove)\ngoal (2 subgoals):\n 1. \\<And>A B x.\n       \\<lbrakk>\\<forall>x\\<in>S. (f has_vector_derivative A x) (at x);\n        continuous_on S A;\n        \\<forall>x\\<in>S. (g has_vector_derivative B x) (at x);\n        continuous_on S B; x \\<in> S\\<rbrakk>\n       \\<Longrightarrow> ((\\<lambda>x. (f x, g x)) has_vector_derivative\n                          ?D6 A B x)\n                          (at x)\n 2. \\<And>A B.\n       \\<lbrakk>\\<forall>x\\<in>S. (f has_vector_derivative A x) (at x);\n        continuous_on S A;\n        \\<forall>x\\<in>S. (g has_vector_derivative B x) (at x);\n        continuous_on S B\\<rbrakk>\n       \\<Longrightarrow> continuous_on S (?D6 A B)", "apply (rule_tac f'=\"A x\" and g'=\"B x\" in has_vector_derivative_pair_within)"], ["proof (prove)\ngoal (3 subgoals):\n 1. \\<And>A B x u.\n       \\<lbrakk>\\<forall>x\\<in>S. (f has_vector_derivative A x) (at x);\n        continuous_on S A;\n        \\<forall>x\\<in>S. (g has_vector_derivative B x) (at x);\n        continuous_on S B; x \\<in> S; u \\<in> Basis\\<rbrakk>\n       \\<Longrightarrow> ((\\<lambda>x.\n                              f x \\<bullet> u) has_vector_derivative\n                          A x \\<bullet> u)\n                          (at x)\n 2. \\<And>A B x u.\n       \\<lbrakk>\\<forall>x\\<in>S. (f has_vector_derivative A x) (at x);\n        continuous_on S A;\n        \\<forall>x\\<in>S. (g has_vector_derivative B x) (at x);\n        continuous_on S B; x \\<in> S; u \\<in> Basis\\<rbrakk>\n       \\<Longrightarrow> ((\\<lambda>x.\n                              g x \\<bullet> u) has_vector_derivative\n                          B x \\<bullet> u)\n                          (at x)\n 3. \\<And>A B.\n       \\<lbrakk>\\<forall>x\\<in>S. (f has_vector_derivative A x) (at x);\n        continuous_on S A;\n        \\<forall>x\\<in>S. (g has_vector_derivative B x) (at x);\n        continuous_on S B\\<rbrakk>\n       \\<Longrightarrow> continuous_on S (\\<lambda>x. (A x, B x))", "using  has_vector_derivative_componentwise_within"], ["proof (prove)\nusing this:\n  (?f has_vector_derivative ?f') (at ?a within ?S) =\n  (\\<forall>i\\<in>Basis.\n      ((\\<lambda>x. ?f x \\<bullet> i) has_vector_derivative ?f' \\<bullet> i)\n       (at ?a within ?S))\n\ngoal (3 subgoals):\n 1. \\<And>A B x u.\n       \\<lbrakk>\\<forall>x\\<in>S. (f has_vector_derivative A x) (at x);\n        continuous_on S A;\n        \\<forall>x\\<in>S. (g has_vector_derivative B x) (at x);\n        continuous_on S B; x \\<in> S; u \\<in> Basis\\<rbrakk>\n       \\<Longrightarrow> ((\\<lambda>x.\n                              f x \\<bullet> u) has_vector_derivative\n                          A x \\<bullet> u)\n                          (at x)\n 2. \\<And>A B x u.\n       \\<lbrakk>\\<forall>x\\<in>S. (f has_vector_derivative A x) (at x);\n        continuous_on S A;\n        \\<forall>x\\<in>S. (g has_vector_derivative B x) (at x);\n        continuous_on S B; x \\<in> S; u \\<in> Basis\\<rbrakk>\n       \\<Longrightarrow> ((\\<lambda>x.\n                              g x \\<bullet> u) has_vector_derivative\n                          B x \\<bullet> u)\n                          (at x)\n 3. \\<And>A B.\n       \\<lbrakk>\\<forall>x\\<in>S. (f has_vector_derivative A x) (at x);\n        continuous_on S A;\n        \\<forall>x\\<in>S. (g has_vector_derivative B x) (at x);\n        continuous_on S B\\<rbrakk>\n       \\<Longrightarrow> continuous_on S (\\<lambda>x. (A x, B x))", "by (blast intro: continuous_on_Pair)+"], ["", "lemma piecewise_C1_differentiable_on_pair [simp, derivative_intros]:\n  fixes f :: \"real \\<Rightarrow> 'a::euclidean_space\" and g :: \"real \\<Rightarrow> 'b::euclidean_space\"\n  assumes \"f piecewise_C1_differentiable_on S\" \"g piecewise_C1_differentiable_on S\"\n  shows \"(\\<lambda>x. (f x, g x)) piecewise_C1_differentiable_on S\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>x. (f x, g x)) piecewise_C1_differentiable_on S", "using assms"], ["proof (prove)\nusing this:\n  f piecewise_C1_differentiable_on S\n  g piecewise_C1_differentiable_on S\n\ngoal (1 subgoal):\n 1. (\\<lambda>x. (f x, g x)) piecewise_C1_differentiable_on S", "unfolding piecewise_C1_differentiable_on_def"], ["proof (prove)\nusing this:\n  continuous_on S f \\<and>\n  (\\<exists>Sa. finite Sa \\<and> f C1_differentiable_on S - Sa)\n  continuous_on S g \\<and>\n  (\\<exists>Sa. finite Sa \\<and> g C1_differentiable_on S - Sa)\n\ngoal (1 subgoal):\n 1. continuous_on S (\\<lambda>x. (f x, g x)) \\<and>\n    (\\<exists>Sa.\n        finite Sa \\<and>\n        (\\<lambda>x. (f x, g x)) C1_differentiable_on S - Sa)", "by (blast intro!: continuous_intros C1_differentiable_on_pair del: continuous_on_discrete\n      intro: C1_differentiable_on_subset)"], ["", "lemma test2:\n  assumes s: \"\\<And>x. x \\<in> {0..1} - s \\<Longrightarrow> g differentiable at x\"\n    and fs: \"finite s\" and uv: \"u \\<in> {0..1}\" \"v \\<in> {0..1}\" \"u \\<le> v\"\n    and \"x \\<in> {0..1}\" \"x \\<notin> (\\<lambda>t. (v-u) *\\<^sub>R t + u) -` s\"\n  shows \"vector_derivative (\\<lambda>x. g ((v-u) * x + u)) (at x within {0..1}) = (v-u) *\\<^sub>R vector_derivative g (at ((v-u) * x + u) within{0..1})\""], ["proof (prove)\ngoal (1 subgoal):\n 1. vector_derivative (\\<lambda>x. g ((v - u) * x + u))\n     (at x within {0..1}) =\n    (v - u) *\\<^sub>R\n    vector_derivative g (at ((v - u) * x + u) within {0..1})", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. vector_derivative (\\<lambda>x. g ((v - u) * x + u))\n     (at x within {0..1}) =\n    (v - u) *\\<^sub>R\n    vector_derivative g (at ((v - u) * x + u) within {0..1})", "have i:\"(g has_vector_derivative vector_derivative g (at ((v - u) * x + u))) (at ((v-u) * x + u))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (g has_vector_derivative vector_derivative g (at ((v - u) * x + u)))\n     (at ((v - u) * x + u))", "using assms s [of \"(v - u) * x + u\"] uv mult_left_le [of x \"v-u\"]"], ["proof (prove)\nusing this:\n  ?x \\<in> {0..1} - s \\<Longrightarrow> g differentiable at ?x\n  finite s\n  u \\<in> {0..1}\n  v \\<in> {0..1}\n  u \\<le> v\n  x \\<in> {0..1}\n  x \\<notin> (\\<lambda>t. (v - u) *\\<^sub>R t + u) -` s\n  (v - u) * x + u \\<in> {0..1} - s \\<Longrightarrow>\n  g differentiable at ((v - u) * x + u)\n  u \\<in> {0..1}\n  v \\<in> {0..1}\n  u \\<le> v\n  \\<lbrakk>x \\<le> 1; 0 \\<le> v - u\\<rbrakk>\n  \\<Longrightarrow> (v - u) * x \\<le> v - u\n\ngoal (1 subgoal):\n 1. (g has_vector_derivative vector_derivative g (at ((v - u) * x + u)))\n     (at ((v - u) * x + u))", "by (auto simp:  vector_derivative_works)"], ["proof (state)\nthis:\n  (g has_vector_derivative vector_derivative g (at ((v - u) * x + u)))\n   (at ((v - u) * x + u))\n\ngoal (1 subgoal):\n 1. vector_derivative (\\<lambda>x. g ((v - u) * x + u))\n     (at x within {0..1}) =\n    (v - u) *\\<^sub>R\n    vector_derivative g (at ((v - u) * x + u) within {0..1})", "have ii:\"((\\<lambda>x. g ((v - u) * x + u)) has_vector_derivative (v - u) *\\<^sub>R vector_derivative g (at ((v - u) * x + u))) (at x)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. ((\\<lambda>x. g ((v - u) * x + u)) has_vector_derivative\n     (v - u) *\\<^sub>R vector_derivative g (at ((v - u) * x + u)))\n     (at x)", "by (intro vector_diff_chain_at [simplified o_def] derivative_eq_intros | simp add: i)+"], ["proof (state)\nthis:\n  ((\\<lambda>x. g ((v - u) * x + u)) has_vector_derivative\n   (v - u) *\\<^sub>R vector_derivative g (at ((v - u) * x + u)))\n   (at x)\n\ngoal (1 subgoal):\n 1. vector_derivative (\\<lambda>x. g ((v - u) * x + u))\n     (at x within {0..1}) =\n    (v - u) *\\<^sub>R\n    vector_derivative g (at ((v - u) * x + u) within {0..1})", "have 0: \"0 \\<le> (v - u) * x + u\""], ["proof (prove)\ngoal (1 subgoal):\n 1. 0 \\<le> (v - u) * x + u", "using assms uv"], ["proof (prove)\nusing this:\n  ?x \\<in> {0..1} - s \\<Longrightarrow> g differentiable at ?x\n  finite s\n  u \\<in> {0..1}\n  v \\<in> {0..1}\n  u \\<le> v\n  x \\<in> {0..1}\n  x \\<notin> (\\<lambda>t. (v - u) *\\<^sub>R t + u) -` s\n  u \\<in> {0..1}\n  v \\<in> {0..1}\n  u \\<le> v\n\ngoal (1 subgoal):\n 1. 0 \\<le> (v - u) * x + u", "by auto"], ["proof (state)\nthis:\n  0 \\<le> (v - u) * x + u\n\ngoal (1 subgoal):\n 1. vector_derivative (\\<lambda>x. g ((v - u) * x + u))\n     (at x within {0..1}) =\n    (v - u) *\\<^sub>R\n    vector_derivative g (at ((v - u) * x + u) within {0..1})", "have 1: \"(v - u) * x + u \\<le> 1\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (v - u) * x + u \\<le> 1", "using assms uv"], ["proof (prove)\nusing this:\n  ?x \\<in> {0..1} - s \\<Longrightarrow> g differentiable at ?x\n  finite s\n  u \\<in> {0..1}\n  v \\<in> {0..1}\n  u \\<le> v\n  x \\<in> {0..1}\n  x \\<notin> (\\<lambda>t. (v - u) *\\<^sub>R t + u) -` s\n  u \\<in> {0..1}\n  v \\<in> {0..1}\n  u \\<le> v\n\ngoal (1 subgoal):\n 1. (v - u) * x + u \\<le> 1", "by simp (metis add.commute atLeastAtMost_iff atLeastatMost_empty_iff diff_ge_0_iff_ge empty_iff le_diff_eq mult_left_le)"], ["proof (state)\nthis:\n  (v - u) * x + u \\<le> 1\n\ngoal (1 subgoal):\n 1. vector_derivative (\\<lambda>x. g ((v - u) * x + u))\n     (at x within {0..1}) =\n    (v - u) *\\<^sub>R\n    vector_derivative g (at ((v - u) * x + u) within {0..1})", "have iii: \"vector_derivative g (at ((v - u) * x + u) within {0..1}) = vector_derivative g (at ((v - u) * x + u))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. vector_derivative g (at ((v - u) * x + u) within {0..1}) =\n    vector_derivative g (at ((v - u) * x + u))", "using Derivative.vector_derivative_at_within_ivl[OF i, of \"0\" \"1\", OF 0 1]"], ["proof (prove)\nusing this:\n  0 < 1 \\<Longrightarrow>\n  vector_derivative g (at ((v - u) * x + u) within {0..1}) =\n  vector_derivative g (at ((v - u) * x + u))\n\ngoal (1 subgoal):\n 1. vector_derivative g (at ((v - u) * x + u) within {0..1}) =\n    vector_derivative g (at ((v - u) * x + u))", "by auto"], ["proof (state)\nthis:\n  vector_derivative g (at ((v - u) * x + u) within {0..1}) =\n  vector_derivative g (at ((v - u) * x + u))\n\ngoal (1 subgoal):\n 1. vector_derivative (\\<lambda>x. g ((v - u) * x + u))\n     (at x within {0..1}) =\n    (v - u) *\\<^sub>R\n    vector_derivative g (at ((v - u) * x + u) within {0..1})", "have iv: \"vector_derivative (\\<lambda>x. g ((v - u) * x + u)) (at x within {0..1}) = (v - u) *\\<^sub>R vector_derivative g (at ((v - u) * x + u))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. vector_derivative (\\<lambda>x. g ((v - u) * x + u))\n     (at x within {0..1}) =\n    (v - u) *\\<^sub>R vector_derivative g (at ((v - u) * x + u))", "using Derivative.vector_derivative_at_within_ivl[OF ii, of \"0\" \"1\"] assms"], ["proof (prove)\nusing this:\n  \\<lbrakk>0 \\<le> x; x \\<le> 1; 0 < 1\\<rbrakk>\n  \\<Longrightarrow> vector_derivative (\\<lambda>x. g ((v - u) * x + u))\n                     (at x within {0..1}) =\n                    (v - u) *\\<^sub>R\n                    vector_derivative g (at ((v - u) * x + u))\n  ?x \\<in> {0..1} - s \\<Longrightarrow> g differentiable at ?x\n  finite s\n  u \\<in> {0..1}\n  v \\<in> {0..1}\n  u \\<le> v\n  x \\<in> {0..1}\n  x \\<notin> (\\<lambda>t. (v - u) *\\<^sub>R t + u) -` s\n\ngoal (1 subgoal):\n 1. vector_derivative (\\<lambda>x. g ((v - u) * x + u))\n     (at x within {0..1}) =\n    (v - u) *\\<^sub>R vector_derivative g (at ((v - u) * x + u))", "by auto"], ["proof (state)\nthis:\n  vector_derivative (\\<lambda>x. g ((v - u) * x + u)) (at x within {0..1}) =\n  (v - u) *\\<^sub>R vector_derivative g (at ((v - u) * x + u))\n\ngoal (1 subgoal):\n 1. vector_derivative (\\<lambda>x. g ((v - u) * x + u))\n     (at x within {0..1}) =\n    (v - u) *\\<^sub>R\n    vector_derivative g (at ((v - u) * x + u) within {0..1})", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. vector_derivative (\\<lambda>x. g ((v - u) * x + u))\n     (at x within {0..1}) =\n    (v - u) *\\<^sub>R\n    vector_derivative g (at ((v - u) * x + u) within {0..1})", "using iii iv"], ["proof (prove)\nusing this:\n  vector_derivative g (at ((v - u) * x + u) within {0..1}) =\n  vector_derivative g (at ((v - u) * x + u))\n  vector_derivative (\\<lambda>x. g ((v - u) * x + u)) (at x within {0..1}) =\n  (v - u) *\\<^sub>R vector_derivative g (at ((v - u) * x + u))\n\ngoal (1 subgoal):\n 1. vector_derivative (\\<lambda>x. g ((v - u) * x + u))\n     (at x within {0..1}) =\n    (v - u) *\\<^sub>R\n    vector_derivative g (at ((v - u) * x + u) within {0..1})", "by auto"], ["proof (state)\nthis:\n  vector_derivative (\\<lambda>x. g ((v - u) * x + u)) (at x within {0..1}) =\n  (v - u) *\\<^sub>R vector_derivative g (at ((v - u) * x + u) within {0..1})\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma C1_differentiable_on_components:\n  assumes \"\\<And>i. i \\<in> Basis \\<Longrightarrow> (\\<lambda>x. f x \\<bullet> i) C1_differentiable_on s\"\n  shows \"f C1_differentiable_on s\""], ["proof (prove)\ngoal (1 subgoal):\n 1. f C1_differentiable_on s", "proof (clarsimp simp add: C1_differentiable_on_def has_vector_derivative_def)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<exists>D.\n       (\\<forall>x\\<in>s.\n           (f has_derivative (\\<lambda>xa. xa *\\<^sub>R D x)) (at x)) \\<and>\n       continuous_on s D", "have *:\"\\<forall>f i x. x *\\<^sub>R (f \\<bullet> i) = (x *\\<^sub>R f) \\<bullet> i\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>f i x. x *\\<^sub>R (f \\<bullet> i) = x *\\<^sub>R f \\<bullet> i", "by auto"], ["proof (state)\nthis:\n  \\<forall>f i x. x *\\<^sub>R (f \\<bullet> i) = x *\\<^sub>R f \\<bullet> i\n\ngoal (1 subgoal):\n 1. \\<exists>D.\n       (\\<forall>x\\<in>s.\n           (f has_derivative (\\<lambda>xa. xa *\\<^sub>R D x)) (at x)) \\<and>\n       continuous_on s D", "have \"\\<exists>f'. \\<forall>i\\<in>Basis. \\<forall>x\\<in>s. ((\\<lambda>x. f x \\<bullet> i) has_derivative (\\<lambda>z. z *\\<^sub>R f' x \\<bullet> i)) (at x) \\<and> continuous_on s f'\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>f'.\n       \\<forall>i\\<in>Basis.\n          \\<forall>x\\<in>s.\n             ((\\<lambda>x. f x \\<bullet> i) has_derivative\n              (\\<lambda>z. z *\\<^sub>R f' x \\<bullet> i))\n              (at x) \\<and>\n             continuous_on s f'", "using assms lambda_skolem_euclidean[of \"\\<lambda>i D. (\\<forall>x\\<in>s. ((\\<lambda>x. f x \\<bullet> i) has_derivative (\\<lambda>z. z *\\<^sub>R D x)) (at x)) \\<and> continuous_on s D\"]"], ["proof (prove)\nusing this:\n  ?i \\<in> Basis \\<Longrightarrow>\n  (\\<lambda>x. f x \\<bullet> ?i) C1_differentiable_on s\n  (\\<forall>i\\<in>Basis.\n      \\<exists>f'.\n         (\\<forall>x\\<in>s.\n             ((\\<lambda>x. f x \\<bullet> i) has_derivative\n              (\\<lambda>z. z *\\<^sub>R f' x))\n              (at x)) \\<and>\n         continuous_on s f') =\n  (\\<exists>f'.\n      \\<forall>i\\<in>Basis.\n         (\\<forall>x\\<in>s.\n             ((\\<lambda>x. f x \\<bullet> i) has_derivative\n              (\\<lambda>z. z *\\<^sub>R (f' x \\<bullet> i)))\n              (at x)) \\<and>\n         continuous_on s (\\<lambda>x. f' x \\<bullet> i))\n\ngoal (1 subgoal):\n 1. \\<exists>f'.\n       \\<forall>i\\<in>Basis.\n          \\<forall>x\\<in>s.\n             ((\\<lambda>x. f x \\<bullet> i) has_derivative\n              (\\<lambda>z. z *\\<^sub>R f' x \\<bullet> i))\n              (at x) \\<and>\n             continuous_on s f'", "apply (simp only: C1_differentiable_on_def has_vector_derivative_def *)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<And>i.\n                i \\<in> Basis \\<Longrightarrow>\n                \\<exists>D.\n                   (\\<forall>x\\<in>s.\n                       ((\\<lambda>x. f x \\<bullet> i) has_derivative\n                        (\\<lambda>xa. xa *\\<^sub>R D x))\n                        (at x)) \\<and>\n                   continuous_on s D;\n     (\\<forall>i\\<in>Basis.\n         \\<exists>f'.\n            (\\<forall>x\\<in>s.\n                ((\\<lambda>x. f x \\<bullet> i) has_derivative\n                 (\\<lambda>z. z *\\<^sub>R f' x))\n                 (at x)) \\<and>\n            continuous_on s f') =\n     (\\<exists>f'.\n         \\<forall>i\\<in>Basis.\n            (\\<forall>x\\<in>s.\n                ((\\<lambda>x. f x \\<bullet> i) has_derivative\n                 (\\<lambda>z. z *\\<^sub>R f' x \\<bullet> i))\n                 (at x)) \\<and>\n            continuous_on s (\\<lambda>x. f' x \\<bullet> i))\\<rbrakk>\n    \\<Longrightarrow> \\<exists>f'.\n                         \\<forall>i\\<in>Basis.\n                            \\<forall>x\\<in>s.\n                               ((\\<lambda>x. f x \\<bullet> i) has_derivative\n                                (\\<lambda>z. z *\\<^sub>R f' x \\<bullet> i))\n                                (at x) \\<and>\n                               continuous_on s f'", "using continuous_on_componentwise[of \"s\"]"], ["proof (prove)\nusing this:\n  continuous_on s ?f =\n  (\\<forall>i\\<in>Basis. continuous_on s (\\<lambda>x. ?f x \\<bullet> i))\n\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<And>i.\n                i \\<in> Basis \\<Longrightarrow>\n                \\<exists>D.\n                   (\\<forall>x\\<in>s.\n                       ((\\<lambda>x. f x \\<bullet> i) has_derivative\n                        (\\<lambda>xa. xa *\\<^sub>R D x))\n                        (at x)) \\<and>\n                   continuous_on s D;\n     (\\<forall>i\\<in>Basis.\n         \\<exists>f'.\n            (\\<forall>x\\<in>s.\n                ((\\<lambda>x. f x \\<bullet> i) has_derivative\n                 (\\<lambda>z. z *\\<^sub>R f' x))\n                 (at x)) \\<and>\n            continuous_on s f') =\n     (\\<exists>f'.\n         \\<forall>i\\<in>Basis.\n            (\\<forall>x\\<in>s.\n                ((\\<lambda>x. f x \\<bullet> i) has_derivative\n                 (\\<lambda>z. z *\\<^sub>R f' x \\<bullet> i))\n                 (at x)) \\<and>\n            continuous_on s (\\<lambda>x. f' x \\<bullet> i))\\<rbrakk>\n    \\<Longrightarrow> \\<exists>f'.\n                         \\<forall>i\\<in>Basis.\n                            \\<forall>x\\<in>s.\n                               ((\\<lambda>x. f x \\<bullet> i) has_derivative\n                                (\\<lambda>z. z *\\<^sub>R f' x \\<bullet> i))\n                                (at x) \\<and>\n                               continuous_on s f'", "by metis"], ["proof (state)\nthis:\n  \\<exists>f'.\n     \\<forall>i\\<in>Basis.\n        \\<forall>x\\<in>s.\n           ((\\<lambda>x. f x \\<bullet> i) has_derivative\n            (\\<lambda>z. z *\\<^sub>R f' x \\<bullet> i))\n            (at x) \\<and>\n           continuous_on s f'\n\ngoal (1 subgoal):\n 1. \\<exists>D.\n       (\\<forall>x\\<in>s.\n           (f has_derivative (\\<lambda>xa. xa *\\<^sub>R D x)) (at x)) \\<and>\n       continuous_on s D", "then"], ["proof (chain)\npicking this:\n  \\<exists>f'.\n     \\<forall>i\\<in>Basis.\n        \\<forall>x\\<in>s.\n           ((\\<lambda>x. f x \\<bullet> i) has_derivative\n            (\\<lambda>z. z *\\<^sub>R f' x \\<bullet> i))\n            (at x) \\<and>\n           continuous_on s f'", "obtain f' where f': \"\\<forall>i\\<in>Basis. \\<forall>x\\<in>s. ((\\<lambda>x. f x \\<bullet> i) has_derivative (\\<lambda>z. z *\\<^sub>R f' x \\<bullet> i)) (at x) \\<and> continuous_on s f'\""], ["proof (prove)\nusing this:\n  \\<exists>f'.\n     \\<forall>i\\<in>Basis.\n        \\<forall>x\\<in>s.\n           ((\\<lambda>x. f x \\<bullet> i) has_derivative\n            (\\<lambda>z. z *\\<^sub>R f' x \\<bullet> i))\n            (at x) \\<and>\n           continuous_on s f'\n\ngoal (1 subgoal):\n 1. (\\<And>f'.\n        \\<forall>i\\<in>Basis.\n           \\<forall>x\\<in>s.\n              ((\\<lambda>x. f x \\<bullet> i) has_derivative\n               (\\<lambda>z. z *\\<^sub>R f' x \\<bullet> i))\n               (at x) \\<and>\n              continuous_on s f' \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  \\<forall>i\\<in>Basis.\n     \\<forall>x\\<in>s.\n        ((\\<lambda>x. f x \\<bullet> i) has_derivative\n         (\\<lambda>z. z *\\<^sub>R f' x \\<bullet> i))\n         (at x) \\<and>\n        continuous_on s f'\n\ngoal (1 subgoal):\n 1. \\<exists>D.\n       (\\<forall>x\\<in>s.\n           (f has_derivative (\\<lambda>xa. xa *\\<^sub>R D x)) (at x)) \\<and>\n       continuous_on s D", "then"], ["proof (chain)\npicking this:\n  \\<forall>i\\<in>Basis.\n     \\<forall>x\\<in>s.\n        ((\\<lambda>x. f x \\<bullet> i) has_derivative\n         (\\<lambda>z. z *\\<^sub>R f' x \\<bullet> i))\n         (at x) \\<and>\n        continuous_on s f'", "have 0: \"(\\<forall>x\\<in>s. (f has_derivative (\\<lambda>z. z *\\<^sub>R f' x)) (at x)) \\<and> continuous_on s f'\""], ["proof (prove)\nusing this:\n  \\<forall>i\\<in>Basis.\n     \\<forall>x\\<in>s.\n        ((\\<lambda>x. f x \\<bullet> i) has_derivative\n         (\\<lambda>z. z *\\<^sub>R f' x \\<bullet> i))\n         (at x) \\<and>\n        continuous_on s f'\n\ngoal (1 subgoal):\n 1. (\\<forall>x\\<in>s.\n        (f has_derivative (\\<lambda>z. z *\\<^sub>R f' x)) (at x)) \\<and>\n    continuous_on s f'", "using f' has_derivative_componentwise_within[of \"f\", where S= UNIV]"], ["proof (prove)\nusing this:\n  \\<forall>i\\<in>Basis.\n     \\<forall>x\\<in>s.\n        ((\\<lambda>x. f x \\<bullet> i) has_derivative\n         (\\<lambda>z. z *\\<^sub>R f' x \\<bullet> i))\n         (at x) \\<and>\n        continuous_on s f'\n  \\<forall>i\\<in>Basis.\n     \\<forall>x\\<in>s.\n        ((\\<lambda>x. f x \\<bullet> i) has_derivative\n         (\\<lambda>z. z *\\<^sub>R f' x \\<bullet> i))\n         (at x) \\<and>\n        continuous_on s f'\n  (f has_derivative ?f') (at ?a) =\n  (\\<forall>i\\<in>Basis.\n      ((\\<lambda>x. f x \\<bullet> i) has_derivative\n       (\\<lambda>x. ?f' x \\<bullet> i))\n       (at ?a))\n\ngoal (1 subgoal):\n 1. (\\<forall>x\\<in>s.\n        (f has_derivative (\\<lambda>z. z *\\<^sub>R f' x)) (at x)) \\<and>\n    continuous_on s f'", "by auto"], ["proof (state)\nthis:\n  (\\<forall>x\\<in>s.\n      (f has_derivative (\\<lambda>z. z *\\<^sub>R f' x)) (at x)) \\<and>\n  continuous_on s f'\n\ngoal (1 subgoal):\n 1. \\<exists>D.\n       (\\<forall>x\\<in>s.\n           (f has_derivative (\\<lambda>xa. xa *\\<^sub>R D x)) (at x)) \\<and>\n       continuous_on s D", "then"], ["proof (chain)\npicking this:\n  (\\<forall>x\\<in>s.\n      (f has_derivative (\\<lambda>z. z *\\<^sub>R f' x)) (at x)) \\<and>\n  continuous_on s f'", "show \"\\<exists>D. (\\<forall>x\\<in>s. (f has_derivative (\\<lambda>z. z *\\<^sub>R D x)) (at x)) \\<and> continuous_on s D\""], ["proof (prove)\nusing this:\n  (\\<forall>x\\<in>s.\n      (f has_derivative (\\<lambda>z. z *\\<^sub>R f' x)) (at x)) \\<and>\n  continuous_on s f'\n\ngoal (1 subgoal):\n 1. \\<exists>D.\n       (\\<forall>x\\<in>s.\n           (f has_derivative (\\<lambda>z. z *\\<^sub>R D x)) (at x)) \\<and>\n       continuous_on s D", "by metis"], ["proof (state)\nthis:\n  \\<exists>D.\n     (\\<forall>x\\<in>s.\n         (f has_derivative (\\<lambda>z. z *\\<^sub>R D x)) (at x)) \\<and>\n     continuous_on s D\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma piecewise_C1_differentiable_on_components:\n  assumes \"finite t\"\n    \"\\<And>i. i \\<in> Basis \\<Longrightarrow> (\\<lambda>x. f x \\<bullet> i) C1_differentiable_on s - t\"\n    \"\\<And>i. i \\<in> Basis \\<Longrightarrow> continuous_on s (\\<lambda>x. f x \\<bullet> i)\"\n  shows \"f piecewise_C1_differentiable_on s\""], ["proof (prove)\ngoal (1 subgoal):\n 1. f piecewise_C1_differentiable_on s", "using C1_differentiable_on_components assms continuous_on_componentwise piecewise_C1_differentiable_on_def"], ["proof (prove)\nusing this:\n  (\\<And>i.\n      i \\<in> Basis \\<Longrightarrow>\n      (\\<lambda>x. ?f x \\<bullet> i) C1_differentiable_on\n      ?s) \\<Longrightarrow>\n  ?f C1_differentiable_on ?s\n  finite t\n  ?i \\<in> Basis \\<Longrightarrow>\n  (\\<lambda>x. f x \\<bullet> ?i) C1_differentiable_on s - t\n  ?i \\<in> Basis \\<Longrightarrow>\n  continuous_on s (\\<lambda>x. f x \\<bullet> ?i)\n  continuous_on ?S ?f =\n  (\\<forall>i\\<in>Basis. continuous_on ?S (\\<lambda>x. ?f x \\<bullet> i))\n  ?f piecewise_C1_differentiable_on ?i \\<equiv>\n  continuous_on ?i ?f \\<and>\n  (\\<exists>S. finite S \\<and> ?f C1_differentiable_on ?i - S)\n\ngoal (1 subgoal):\n 1. f piecewise_C1_differentiable_on s", "by blast"], ["", "lemma all_components_smooth_one_pw_smooth_is_pw_smooth:\n  assumes \"\\<And>i. i \\<in> Basis - {j} \\<Longrightarrow> (\\<lambda>x. f x \\<bullet> i) C1_differentiable_on s\"\n  assumes \"(\\<lambda>x. f x \\<bullet> j) piecewise_C1_differentiable_on s\"\n  shows \"f piecewise_C1_differentiable_on s\""], ["proof (prove)\ngoal (1 subgoal):\n 1. f piecewise_C1_differentiable_on s", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. f piecewise_C1_differentiable_on s", "have is_cont: \"\\<forall>i\\<in>Basis. continuous_on s (\\<lambda>x. f x \\<bullet> i)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>i\\<in>Basis. continuous_on s (\\<lambda>x. f x \\<bullet> i)", "using assms C1_differentiable_imp_continuous_on piecewise_C1_differentiable_on_def"], ["proof (prove)\nusing this:\n  ?i \\<in> Basis - {j} \\<Longrightarrow>\n  (\\<lambda>x. f x \\<bullet> ?i) C1_differentiable_on s\n  (\\<lambda>x. f x \\<bullet> j) piecewise_C1_differentiable_on s\n  ?f C1_differentiable_on ?S \\<Longrightarrow> continuous_on ?S ?f\n  ?f piecewise_C1_differentiable_on ?i \\<equiv>\n  continuous_on ?i ?f \\<and>\n  (\\<exists>S. finite S \\<and> ?f C1_differentiable_on ?i - S)\n\ngoal (1 subgoal):\n 1. \\<forall>i\\<in>Basis. continuous_on s (\\<lambda>x. f x \\<bullet> i)", "by fastforce"], ["proof (state)\nthis:\n  \\<forall>i\\<in>Basis. continuous_on s (\\<lambda>x. f x \\<bullet> i)\n\ngoal (1 subgoal):\n 1. f piecewise_C1_differentiable_on s", "obtain t where t:\"(finite t \\<and> (\\<lambda>x. f x \\<bullet> j) C1_differentiable_on s - t)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>t.\n        finite t \\<and>\n        (\\<lambda>x. f x \\<bullet> j) C1_differentiable_on\n        s - t \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "using assms(2) piecewise_C1_differentiable_on_def"], ["proof (prove)\nusing this:\n  (\\<lambda>x. f x \\<bullet> j) piecewise_C1_differentiable_on s\n  ?f piecewise_C1_differentiable_on ?i \\<equiv>\n  continuous_on ?i ?f \\<and>\n  (\\<exists>S. finite S \\<and> ?f C1_differentiable_on ?i - S)\n\ngoal (1 subgoal):\n 1. (\\<And>t.\n        finite t \\<and>\n        (\\<lambda>x. f x \\<bullet> j) C1_differentiable_on\n        s - t \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  finite t \\<and> (\\<lambda>x. f x \\<bullet> j) C1_differentiable_on s - t\n\ngoal (1 subgoal):\n 1. f piecewise_C1_differentiable_on s", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. f piecewise_C1_differentiable_on s", "using piecewise_C1_differentiable_on_components[where ?f = \"f\"]"], ["proof (prove)\nusing this:\n  \\<lbrakk>finite ?t;\n   \\<And>i.\n      i \\<in> Basis \\<Longrightarrow>\n      (\\<lambda>x. f x \\<bullet> i) C1_differentiable_on ?s - ?t;\n   \\<And>i.\n      i \\<in> Basis \\<Longrightarrow>\n      continuous_on ?s (\\<lambda>x. f x \\<bullet> i)\\<rbrakk>\n  \\<Longrightarrow> f piecewise_C1_differentiable_on ?s\n\ngoal (1 subgoal):\n 1. f piecewise_C1_differentiable_on s", "using assms(2) piecewise_C1_differentiable_on_def\n      C1_differentiable_on_subset[OF assms(1) Diff_subset, where ?B1 =\"t\"] t is_cont"], ["proof (prove)\nusing this:\n  \\<lbrakk>finite ?t;\n   \\<And>i.\n      i \\<in> Basis \\<Longrightarrow>\n      (\\<lambda>x. f x \\<bullet> i) C1_differentiable_on ?s - ?t;\n   \\<And>i.\n      i \\<in> Basis \\<Longrightarrow>\n      continuous_on ?s (\\<lambda>x. f x \\<bullet> i)\\<rbrakk>\n  \\<Longrightarrow> f piecewise_C1_differentiable_on ?s\n  (\\<lambda>x. f x \\<bullet> j) piecewise_C1_differentiable_on s\n  ?f piecewise_C1_differentiable_on ?i \\<equiv>\n  continuous_on ?i ?f \\<and>\n  (\\<exists>S. finite S \\<and> ?f C1_differentiable_on ?i - S)\n  ?i2 \\<in> Basis - {j} \\<Longrightarrow>\n  (\\<lambda>x. f x \\<bullet> ?i2) C1_differentiable_on s - t\n  finite t \\<and> (\\<lambda>x. f x \\<bullet> j) C1_differentiable_on s - t\n  \\<forall>i\\<in>Basis. continuous_on s (\\<lambda>x. f x \\<bullet> i)\n\ngoal (1 subgoal):\n 1. f piecewise_C1_differentiable_on s", "by fastforce"], ["proof (state)\nthis:\n  f piecewise_C1_differentiable_on s\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma derivative_component_fun_component:\n  fixes i::\"'a::euclidean_space\"\n  assumes \"f differentiable (at x)\"\n  shows \"((vector_derivative f (at x)) \\<bullet> i) = ((vector_derivative (\\<lambda>x. (f x) \\<bullet> i) (at x)) )\""], ["proof (prove)\ngoal (1 subgoal):\n 1. vector_derivative f (at x) \\<bullet> i =\n    vector_derivative (\\<lambda>x. f x \\<bullet> i) (at x)", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. vector_derivative f (at x) \\<bullet> i =\n    vector_derivative (\\<lambda>x. f x \\<bullet> i) (at x)", "have \"((\\<lambda>x. f x \\<bullet> i) has_vector_derivative vector_derivative f (at x) \\<bullet> i) (at x)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. ((\\<lambda>x. f x \\<bullet> i) has_vector_derivative\n     vector_derivative f (at x) \\<bullet> i)\n     (at x)", "using assms and bounded_linear.has_vector_derivative[of \"(\\<lambda>x. x \\<bullet> i)\" \"f\" \"(vector_derivative f (at x))\" \"(at x)\"] and\n      bounded_linear_inner_left[of \"i\"] and vector_derivative_works[of \"f\" \"(at x)\"]"], ["proof (prove)\nusing this:\n  f differentiable at x\n  \\<lbrakk>bounded_linear (\\<lambda>x. x \\<bullet> i);\n   (f has_vector_derivative vector_derivative f (at x)) (at x)\\<rbrakk>\n  \\<Longrightarrow> ((\\<lambda>x. f x \\<bullet> i) has_vector_derivative\n                     vector_derivative f (at x) \\<bullet> i)\n                     (at x)\n  bounded_linear (\\<lambda>a. a \\<bullet> i)\n  (f differentiable at x) =\n  (f has_vector_derivative vector_derivative f (at x)) (at x)\n\ngoal (1 subgoal):\n 1. ((\\<lambda>x. f x \\<bullet> i) has_vector_derivative\n     vector_derivative f (at x) \\<bullet> i)\n     (at x)", "by blast"], ["proof (state)\nthis:\n  ((\\<lambda>x. f x \\<bullet> i) has_vector_derivative\n   vector_derivative f (at x) \\<bullet> i)\n   (at x)\n\ngoal (1 subgoal):\n 1. vector_derivative f (at x) \\<bullet> i =\n    vector_derivative (\\<lambda>x. f x \\<bullet> i) (at x)", "then"], ["proof (chain)\npicking this:\n  ((\\<lambda>x. f x \\<bullet> i) has_vector_derivative\n   vector_derivative f (at x) \\<bullet> i)\n   (at x)", "show \"((vector_derivative f (at x)) \\<bullet> i) = ((vector_derivative (\\<lambda>x. (f x) \\<bullet> i) (at x)) )\""], ["proof (prove)\nusing this:\n  ((\\<lambda>x. f x \\<bullet> i) has_vector_derivative\n   vector_derivative f (at x) \\<bullet> i)\n   (at x)\n\ngoal (1 subgoal):\n 1. vector_derivative f (at x) \\<bullet> i =\n    vector_derivative (\\<lambda>x. f x \\<bullet> i) (at x)", "using vector_derivative_works[of \"(\\<lambda>x. (f x) \\<bullet> i)\" \"(at x)\"] and\n      differentiableI_vector[of \"(\\<lambda>x. (f x) \\<bullet> i)\" \"(vector_derivative f (at x) \\<bullet> i)\" \"(at x)\"] and\n      Derivative.vector_derivative_at"], ["proof (prove)\nusing this:\n  ((\\<lambda>x. f x \\<bullet> i) has_vector_derivative\n   vector_derivative f (at x) \\<bullet> i)\n   (at x)\n  ((\\<lambda>x. f x \\<bullet> i) differentiable at x) =\n  ((\\<lambda>x. f x \\<bullet> i) has_vector_derivative\n   vector_derivative (\\<lambda>x. f x \\<bullet> i) (at x))\n   (at x)\n  ((\\<lambda>x. f x \\<bullet> i) has_vector_derivative\n   vector_derivative f (at x) \\<bullet> i)\n   (at x) \\<Longrightarrow>\n  (\\<lambda>x. f x \\<bullet> i) differentiable at x\n  (?f has_vector_derivative ?f') (at ?x) \\<Longrightarrow>\n  vector_derivative ?f (at ?x) = ?f'\n\ngoal (1 subgoal):\n 1. vector_derivative f (at x) \\<bullet> i =\n    vector_derivative (\\<lambda>x. f x \\<bullet> i) (at x)", "by force"], ["proof (state)\nthis:\n  vector_derivative f (at x) \\<bullet> i =\n  vector_derivative (\\<lambda>x. f x \\<bullet> i) (at x)\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma gamma_deriv_at_within:\n  assumes a_leq_b: \"a < b\"  and\n    x_within_bounds: \"x \\<in> {a..b}\" and\n    gamma_differentiable: \"\\<forall>x \\<in> {a .. b}. \\<gamma> differentiable at x\"\n  shows  \"vector_derivative \\<gamma> (at x within {a..b}) =  vector_derivative \\<gamma> (at x)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. vector_derivative \\<gamma> (at x within {a..b}) =\n    vector_derivative \\<gamma> (at x)", "using Derivative.vector_derivative_at_within_ivl[of \"\\<gamma>\" \"vector_derivative \\<gamma> (at x)\" \"x\" \"a\" \"b\"]\n    gamma_differentiable x_within_bounds a_leq_b"], ["proof (prove)\nusing this:\n  \\<lbrakk>(\\<gamma> has_vector_derivative\n            vector_derivative \\<gamma> (at x))\n            (at x);\n   a \\<le> x; x \\<le> b; a < b\\<rbrakk>\n  \\<Longrightarrow> vector_derivative \\<gamma> (at x within {a..b}) =\n                    vector_derivative \\<gamma> (at x)\n  \\<forall>x\\<in>{a..b}. \\<gamma> differentiable at x\n  x \\<in> {a..b}\n  a < b\n\ngoal (1 subgoal):\n 1. vector_derivative \\<gamma> (at x within {a..b}) =\n    vector_derivative \\<gamma> (at x)", "by (auto simp add: vector_derivative_works)"], ["", "lemma islimpt_diff_finite:\n  assumes \"finite (t::'a::t1_space set)\"\n  shows \"x islimpt s - t = x islimpt s\""], ["proof (prove)\ngoal (1 subgoal):\n 1. x islimpt s - t = x islimpt s", "proof-"], ["proof (state)\ngoal (1 subgoal):\n 1. x islimpt s - t = x islimpt s", "have iii: \"s - t = s - (t \\<inter> s)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. s - t = s - t \\<inter> s", "by auto"], ["proof (state)\nthis:\n  s - t = s - t \\<inter> s\n\ngoal (1 subgoal):\n 1. x islimpt s - t = x islimpt s", "have \"(t \\<inter> s) \\<subseteq> s\""], ["proof (prove)\ngoal (1 subgoal):\n 1. t \\<inter> s \\<subseteq> s", "by auto"], ["proof (state)\nthis:\n  t \\<inter> s \\<subseteq> s\n\ngoal (1 subgoal):\n 1. x islimpt s - t = x islimpt s", "have ii:\"finite (t \\<inter> s)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. finite (t \\<inter> s)", "using assms(1)"], ["proof (prove)\nusing this:\n  finite t\n\ngoal (1 subgoal):\n 1. finite (t \\<inter> s)", "by auto"], ["proof (state)\nthis:\n  finite (t \\<inter> s)\n\ngoal (1 subgoal):\n 1. x islimpt s - t = x islimpt s", "have i: \"(t \\<inter> s) \\<union> (s - (t \\<inter> s)) = ( s)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. t \\<inter> s \\<union> (s - t \\<inter> s) = s", "using assms"], ["proof (prove)\nusing this:\n  finite t\n\ngoal (1 subgoal):\n 1. t \\<inter> s \\<union> (s - t \\<inter> s) = s", "by auto"], ["proof (state)\nthis:\n  t \\<inter> s \\<union> (s - t \\<inter> s) = s\n\ngoal (1 subgoal):\n 1. x islimpt s - t = x islimpt s", "then"], ["proof (chain)\npicking this:\n  t \\<inter> s \\<union> (s - t \\<inter> s) = s", "have \"x islimpt s - (t \\<inter> s) = x islimpt s\""], ["proof (prove)\nusing this:\n  t \\<inter> s \\<union> (s - t \\<inter> s) = s\n\ngoal (1 subgoal):\n 1. x islimpt s - t \\<inter> s = x islimpt s", "using islimpt_Un_finite[OF ii,where ?t = \"s - (t \\<inter> s)\"] i assms(1)"], ["proof (prove)\nusing this:\n  t \\<inter> s \\<union> (s - t \\<inter> s) = s\n  ?x islimpt t \\<inter> s \\<union> (s - t \\<inter> s) =\n  ?x islimpt s - t \\<inter> s\n  t \\<inter> s \\<union> (s - t \\<inter> s) = s\n  finite t\n\ngoal (1 subgoal):\n 1. x islimpt s - t \\<inter> s = x islimpt s", "by force"], ["proof (state)\nthis:\n  x islimpt s - t \\<inter> s = x islimpt s\n\ngoal (1 subgoal):\n 1. x islimpt s - t = x islimpt s", "then"], ["proof (chain)\npicking this:\n  x islimpt s - t \\<inter> s = x islimpt s", "show ?thesis"], ["proof (prove)\nusing this:\n  x islimpt s - t \\<inter> s = x islimpt s\n\ngoal (1 subgoal):\n 1. x islimpt s - t = x islimpt s", "using iii"], ["proof (prove)\nusing this:\n  x islimpt s - t \\<inter> s = x islimpt s\n  s - t = s - t \\<inter> s\n\ngoal (1 subgoal):\n 1. x islimpt s - t = x islimpt s", "by auto"], ["proof (state)\nthis:\n  x islimpt s - t = x islimpt s\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma ivl_limpt_diff:\n  assumes \"finite s\" \"a < b\"  \"(x::real) \\<in> {a..b} - s\"\n  shows \"x islimpt {a..b} - s\""], ["proof (prove)\ngoal (1 subgoal):\n 1. x islimpt {a..b} - s", "proof-"], ["proof (state)\ngoal (1 subgoal):\n 1. x islimpt {a..b} - s", "have \"x islimpt {a..b}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. x islimpt {a..b}", "proof (cases \"x \\<in>{a,b}\")"], ["proof (state)\ngoal (2 subgoals):\n 1. x \\<in> {a, b} \\<Longrightarrow> x islimpt {a..b}\n 2. x \\<notin> {a, b} \\<Longrightarrow> x islimpt {a..b}", "have i: \"finite {a,b}\" and ii:  \"{a, b} \\<union> {a<..<b} = {a..b}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. finite {a, b} &&& {a, b} \\<union> {a<..<b} = {a..b}", "using assms"], ["proof (prove)\nusing this:\n  finite s\n  a < b\n  x \\<in> {a..b} - s\n\ngoal (1 subgoal):\n 1. finite {a, b} &&& {a, b} \\<union> {a<..<b} = {a..b}", "by auto"], ["proof (state)\nthis:\n  finite {a, b}\n  {a, b} \\<union> {a<..<b} = {a..b}\n\ngoal (2 subgoals):\n 1. x \\<in> {a, b} \\<Longrightarrow> x islimpt {a..b}\n 2. x \\<notin> {a, b} \\<Longrightarrow> x islimpt {a..b}", "assume \"x \\<in>{a,b}\""], ["proof (state)\nthis:\n  x \\<in> {a, b}\n\ngoal (2 subgoals):\n 1. x \\<in> {a, b} \\<Longrightarrow> x islimpt {a..b}\n 2. x \\<notin> {a, b} \\<Longrightarrow> x islimpt {a..b}", "then"], ["proof (chain)\npicking this:\n  x \\<in> {a, b}", "show ?thesis"], ["proof (prove)\nusing this:\n  x \\<in> {a, b}\n\ngoal (1 subgoal):\n 1. x islimpt {a..b}", "using islimpt_Un_finite[OF i, where ?t= \"{a<..<b}\"]"], ["proof (prove)\nusing this:\n  x \\<in> {a, b}\n  ?x islimpt {a, b} \\<union> {a<..<b} = ?x islimpt {a<..<b}\n\ngoal (1 subgoal):\n 1. x islimpt {a..b}", "by (metis assms(2) empty_iff ii insert_iff islimpt_greaterThanLessThan1 islimpt_greaterThanLessThan2)"], ["proof (state)\nthis:\n  x islimpt {a..b}\n\ngoal (1 subgoal):\n 1. x \\<notin> {a, b} \\<Longrightarrow> x islimpt {a..b}", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. x \\<notin> {a, b} \\<Longrightarrow> x islimpt {a..b}", "assume \"x \\<notin>{a,b}\""], ["proof (state)\nthis:\n  x \\<notin> {a, b}\n\ngoal (1 subgoal):\n 1. x \\<notin> {a, b} \\<Longrightarrow> x islimpt {a..b}", "then"], ["proof (chain)\npicking this:\n  x \\<notin> {a, b}", "show \"x islimpt {a..b}\""], ["proof (prove)\nusing this:\n  x \\<notin> {a, b}\n\ngoal (1 subgoal):\n 1. x islimpt {a..b}", "using assms"], ["proof (prove)\nusing this:\n  x \\<notin> {a, b}\n  finite s\n  a < b\n  x \\<in> {a..b} - s\n\ngoal (1 subgoal):\n 1. x islimpt {a..b}", "by auto"], ["proof (state)\nthis:\n  x islimpt {a..b}\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  x islimpt {a..b}\n\ngoal (1 subgoal):\n 1. x islimpt {a..b} - s", "then"], ["proof (chain)\npicking this:\n  x islimpt {a..b}", "show \"x islimpt {a..b} - s\""], ["proof (prove)\nusing this:\n  x islimpt {a..b}\n\ngoal (1 subgoal):\n 1. x islimpt {a..b} - s", "using islimpt_diff_finite[OF assms(1)] assms"], ["proof (prove)\nusing this:\n  x islimpt {a..b}\n  ?x islimpt ?s - s = ?x islimpt ?s\n  finite s\n  a < b\n  x \\<in> {a..b} - s\n\ngoal (1 subgoal):\n 1. x islimpt {a..b} - s", "by fastforce"], ["proof (state)\nthis:\n  x islimpt {a..b} - s\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma ivl_closure_diff_del:\n  assumes \"finite s\" \"a < b\"  \"(x::real) \\<in> {a..b} - s\"\n  shows \"x \\<in> closure (({a..b} - s) - {x})\""], ["proof (prove)\ngoal (1 subgoal):\n 1. x \\<in> closure ({a..b} - s - {x})", "using ivl_limpt_diff islimpt_in_closure assms"], ["proof (prove)\nusing this:\n  \\<lbrakk>finite ?s; ?a < ?b; ?x \\<in> {?a..?b} - ?s\\<rbrakk>\n  \\<Longrightarrow> ?x islimpt {?a..?b} - ?s\n  ?x islimpt ?S = (?x \\<in> closure (?S - {?x}))\n  finite s\n  a < b\n  x \\<in> {a..b} - s\n\ngoal (1 subgoal):\n 1. x \\<in> closure ({a..b} - s - {x})", "by blast"], ["", "lemma ivl_not_trivial_limit_within:\n  assumes \"finite s\"\n    \"a < b\"\n    \"(x::real) \\<in> {a..b} - s\"\n  shows \"at x within {a..b} - s \\<noteq> bot\""], ["proof (prove)\ngoal (1 subgoal):\n 1. at x within {a..b} - s \\<noteq> bot", "using assms ivl_closure_diff_del not_trivial_limit_within"], ["proof (prove)\nusing this:\n  finite s\n  a < b\n  x \\<in> {a..b} - s\n  \\<lbrakk>finite ?s; ?a < ?b; ?x \\<in> {?a..?b} - ?s\\<rbrakk>\n  \\<Longrightarrow> ?x \\<in> closure ({?a..?b} - ?s - {?x})\n  (at ?x within ?S = bot) \\<noteq> (?x \\<in> closure (?S - {?x}))\n\ngoal (1 subgoal):\n 1. at x within {a..b} - s \\<noteq> bot", "by blast"], ["", "lemma vector_derivative_at_within_non_trivial_limit:\n  \"at x within s \\<noteq> bot \\<and> (f has_vector_derivative f') (at x) \\<Longrightarrow>\n     vector_derivative f (at x within s) = f'\""], ["proof (prove)\ngoal (1 subgoal):\n 1. at x within s \\<noteq> bot \\<and>\n    (f has_vector_derivative f') (at x) \\<Longrightarrow>\n    vector_derivative f (at x within s) = f'", "using has_vector_derivative_at_within vector_derivative_within"], ["proof (prove)\nusing this:\n  (?f has_vector_derivative ?f') (at ?x) \\<Longrightarrow>\n  (?f has_vector_derivative ?f') (at ?x within ?S)\n  \\<lbrakk>at ?x within ?S \\<noteq> bot;\n   (?f has_vector_derivative ?y) (at ?x within ?S)\\<rbrakk>\n  \\<Longrightarrow> vector_derivative ?f (at ?x within ?S) = ?y\n\ngoal (1 subgoal):\n 1. at x within s \\<noteq> bot \\<and>\n    (f has_vector_derivative f') (at x) \\<Longrightarrow>\n    vector_derivative f (at x within s) = f'", "by fastforce"], ["", "lemma vector_derivative_at_within_ivl_diff:\n  \"finite s \\<and> a < b \\<and> (x::real) \\<in> {a..b} - s \\<and> (f has_vector_derivative f') (at x) \\<Longrightarrow>\n     vector_derivative f (at x within {a..b} - s) = f'\""], ["proof (prove)\ngoal (1 subgoal):\n 1. finite s \\<and>\n    a < b \\<and>\n    x \\<in> {a..b} - s \\<and>\n    (f has_vector_derivative f') (at x) \\<Longrightarrow>\n    vector_derivative f (at x within {a..b} - s) = f'", "using vector_derivative_at_within_non_trivial_limit ivl_not_trivial_limit_within"], ["proof (prove)\nusing this:\n  at ?x within ?s \\<noteq> bot \\<and>\n  (?f has_vector_derivative ?f') (at ?x) \\<Longrightarrow>\n  vector_derivative ?f (at ?x within ?s) = ?f'\n  \\<lbrakk>finite ?s; ?a < ?b; ?x \\<in> {?a..?b} - ?s\\<rbrakk>\n  \\<Longrightarrow> at ?x within {?a..?b} - ?s \\<noteq> bot\n\ngoal (1 subgoal):\n 1. finite s \\<and>\n    a < b \\<and>\n    x \\<in> {a..b} - s \\<and>\n    (f has_vector_derivative f') (at x) \\<Longrightarrow>\n    vector_derivative f (at x within {a..b} - s) = f'", "by fastforce"], ["", "lemma gamma_deriv_at_within_diff:\n  assumes a_leq_b: \"a < b\"  and\n    x_within_bounds: \"x \\<in> {a..b} - s\" and\n    gamma_differentiable: \"\\<forall>x \\<in> {a .. b} - s. \\<gamma> differentiable at x\" and\n    s_subset: \"s \\<subseteq> {a..b}\" and\n    finite_s: \"finite s\"\n  shows \"vector_derivative \\<gamma> (at x within {a..b} - s)\n                           =  vector_derivative \\<gamma> (at x)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. vector_derivative \\<gamma> (at x within {a..b} - s) =\n    vector_derivative \\<gamma> (at x)", "using vector_derivative_at_within_ivl_diff [of \"s\" \"a\" \"b\" \"x\" \"\\<gamma>\" \"vector_derivative \\<gamma> (at x)\"]\n    gamma_differentiable\n    x_within_bounds a_leq_b s_subset finite_s"], ["proof (prove)\nusing this:\n  finite s \\<and>\n  a < b \\<and>\n  x \\<in> {a..b} - s \\<and>\n  (\\<gamma> has_vector_derivative vector_derivative \\<gamma> (at x))\n   (at x) \\<Longrightarrow>\n  vector_derivative \\<gamma> (at x within {a..b} - s) =\n  vector_derivative \\<gamma> (at x)\n  \\<forall>x\\<in>{a..b} - s. \\<gamma> differentiable at x\n  x \\<in> {a..b} - s\n  a < b\n  s \\<subseteq> {a..b}\n  finite s\n\ngoal (1 subgoal):\n 1. vector_derivative \\<gamma> (at x within {a..b} - s) =\n    vector_derivative \\<gamma> (at x)", "by (auto simp add: vector_derivative_works)"], ["", "lemma gamma_deriv_at_within_gen:\n  assumes a_leq_b: \"a < b\"  and\n    x_within_bounds: \"x \\<in> s\" and\n    s_subset: \"s \\<subseteq> {a..b}\" and\n    gamma_differentiable: \"\\<forall>x \\<in> s. \\<gamma> differentiable at x\"\n  shows \"vector_derivative \\<gamma> (at x within ({a..b})) =  vector_derivative \\<gamma> (at x)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. vector_derivative \\<gamma> (at x within {a..b}) =\n    vector_derivative \\<gamma> (at x)", "using Derivative.vector_derivative_at_within_ivl[of \"\\<gamma>\" \"vector_derivative \\<gamma> (at x)\" \"x\" \"a\" \"b\"]\n    gamma_differentiable  x_within_bounds a_leq_b s_subset"], ["proof (prove)\nusing this:\n  \\<lbrakk>(\\<gamma> has_vector_derivative\n            vector_derivative \\<gamma> (at x))\n            (at x);\n   a \\<le> x; x \\<le> b; a < b\\<rbrakk>\n  \\<Longrightarrow> vector_derivative \\<gamma> (at x within {a..b}) =\n                    vector_derivative \\<gamma> (at x)\n  \\<forall>x\\<in>s. \\<gamma> differentiable at x\n  x \\<in> s\n  a < b\n  s \\<subseteq> {a..b}\n\ngoal (1 subgoal):\n 1. vector_derivative \\<gamma> (at x within {a..b}) =\n    vector_derivative \\<gamma> (at x)", "by (auto simp add: vector_derivative_works)"], ["", "lemma derivative_component_fun_component_at_within_gen:\n  assumes gamma_differentiable: \"\\<forall>x \\<in> s. \\<gamma> differentiable at x\" and s_subset: \"s \\<subseteq> {0..1}\"\n  shows \"\\<forall>x \\<in> s. vector_derivative (\\<lambda>x. \\<gamma> x) (at x within {0..1}) \\<bullet> (i::'a:: euclidean_space)\n           =  vector_derivative (\\<lambda>x. \\<gamma> x \\<bullet> i) (at x within {0..1})\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>s.\n       vector_derivative \\<gamma> (at x within {0..1}) \\<bullet> i =\n       vector_derivative (\\<lambda>x. \\<gamma> x \\<bullet> i)\n        (at x within {0..1})", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>s.\n       vector_derivative \\<gamma> (at x within {0..1}) \\<bullet> i =\n       vector_derivative (\\<lambda>x. \\<gamma> x \\<bullet> i)\n        (at x within {0..1})", "have gamma_i_component_smooth:\n    \"\\<forall>x \\<in> s. (\\<lambda>x. \\<gamma> x \\<bullet> i) differentiable at x\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>s.\n       (\\<lambda>x. \\<gamma> x \\<bullet> i) differentiable at x", "using gamma_differentiable"], ["proof (prove)\nusing this:\n  \\<forall>x\\<in>s. \\<gamma> differentiable at x\n\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>s.\n       (\\<lambda>x. \\<gamma> x \\<bullet> i) differentiable at x", "by auto"], ["proof (state)\nthis:\n  \\<forall>x\\<in>s. (\\<lambda>x. \\<gamma> x \\<bullet> i) differentiable at x\n\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>s.\n       vector_derivative \\<gamma> (at x within {0..1}) \\<bullet> i =\n       vector_derivative (\\<lambda>x. \\<gamma> x \\<bullet> i)\n        (at x within {0..1})", "show \"\\<forall>x \\<in> s. vector_derivative (\\<lambda>x. \\<gamma> x) (at x within {0..1}) \\<bullet> i\n                                  =  vector_derivative (\\<lambda>x. \\<gamma> x \\<bullet> i) (at x within {0..1})\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>s.\n       vector_derivative \\<gamma> (at x within {0..1}) \\<bullet> i =\n       vector_derivative (\\<lambda>x. \\<gamma> x \\<bullet> i)\n        (at x within {0..1})", "proof"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> s \\<Longrightarrow>\n       vector_derivative \\<gamma> (at x within {0..1}) \\<bullet> i =\n       vector_derivative (\\<lambda>x. \\<gamma> x \\<bullet> i)\n        (at x within {0..1})", "fix x::real"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> s \\<Longrightarrow>\n       vector_derivative \\<gamma> (at x within {0..1}) \\<bullet> i =\n       vector_derivative (\\<lambda>x. \\<gamma> x \\<bullet> i)\n        (at x within {0..1})", "assume x_within_bounds: \"x \\<in> s\""], ["proof (state)\nthis:\n  x \\<in> s\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> s \\<Longrightarrow>\n       vector_derivative \\<gamma> (at x within {0..1}) \\<bullet> i =\n       vector_derivative (\\<lambda>x. \\<gamma> x \\<bullet> i)\n        (at x within {0..1})", "have gamma_deriv_at_within:\n        \"vector_derivative (\\<lambda>x. \\<gamma> x) (at x within {0..1}) = vector_derivative (\\<lambda>x. \\<gamma> x) (at x)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. vector_derivative \\<gamma> (at x within {0..1}) =\n    vector_derivative \\<gamma> (at x)", "using gamma_deriv_at_within_gen[of \"0\" \"1\"] x_within_bounds\n        gamma_differentiable s_subset"], ["proof (prove)\nusing this:\n  \\<lbrakk>0 < 1; ?x \\<in> ?s; ?s \\<subseteq> {0..1};\n   \\<forall>x\\<in>?s. ?\\<gamma> differentiable at x\\<rbrakk>\n  \\<Longrightarrow> vector_derivative ?\\<gamma> (at ?x within {0..1}) =\n                    vector_derivative ?\\<gamma> (at ?x)\n  x \\<in> s\n  \\<forall>x\\<in>s. \\<gamma> differentiable at x\n  s \\<subseteq> {0..1}\n\ngoal (1 subgoal):\n 1. vector_derivative \\<gamma> (at x within {0..1}) =\n    vector_derivative \\<gamma> (at x)", "by (auto simp add: vector_derivative_works)"], ["proof (state)\nthis:\n  vector_derivative \\<gamma> (at x within {0..1}) =\n  vector_derivative \\<gamma> (at x)\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> s \\<Longrightarrow>\n       vector_derivative \\<gamma> (at x within {0..1}) \\<bullet> i =\n       vector_derivative (\\<lambda>x. \\<gamma> x \\<bullet> i)\n        (at x within {0..1})", "then"], ["proof (chain)\npicking this:\n  vector_derivative \\<gamma> (at x within {0..1}) =\n  vector_derivative \\<gamma> (at x)", "have gamma_component_deriv_at_within:\n      \"vector_derivative (\\<lambda>x. \\<gamma> x \\<bullet> i) (at x)\n       = vector_derivative (\\<lambda>x. \\<gamma> x \\<bullet> i) (at x within {0..1})\""], ["proof (prove)\nusing this:\n  vector_derivative \\<gamma> (at x within {0..1}) =\n  vector_derivative \\<gamma> (at x)\n\ngoal (1 subgoal):\n 1. vector_derivative (\\<lambda>x. \\<gamma> x \\<bullet> i) (at x) =\n    vector_derivative (\\<lambda>x. \\<gamma> x \\<bullet> i)\n     (at x within {0..1})", "using gamma_deriv_at_within_gen[of \"0\" \"1\", where \\<gamma> = \"(\\<lambda>x. \\<gamma> x \\<bullet> i)\"] x_within_bounds\n        gamma_i_component_smooth s_subset"], ["proof (prove)\nusing this:\n  vector_derivative \\<gamma> (at x within {0..1}) =\n  vector_derivative \\<gamma> (at x)\n  \\<lbrakk>0 < 1; ?x \\<in> ?s; ?s \\<subseteq> {0..1};\n   \\<forall>x\\<in>?s.\n      (\\<lambda>x. \\<gamma> x \\<bullet> i) differentiable at x\\<rbrakk>\n  \\<Longrightarrow> vector_derivative (\\<lambda>x. \\<gamma> x \\<bullet> i)\n                     (at ?x within {0..1}) =\n                    vector_derivative (\\<lambda>x. \\<gamma> x \\<bullet> i)\n                     (at ?x)\n  x \\<in> s\n  \\<forall>x\\<in>s. (\\<lambda>x. \\<gamma> x \\<bullet> i) differentiable at x\n  s \\<subseteq> {0..1}\n\ngoal (1 subgoal):\n 1. vector_derivative (\\<lambda>x. \\<gamma> x \\<bullet> i) (at x) =\n    vector_derivative (\\<lambda>x. \\<gamma> x \\<bullet> i)\n     (at x within {0..1})", "by (auto simp add: vector_derivative_works)"], ["proof (state)\nthis:\n  vector_derivative (\\<lambda>x. \\<gamma> x \\<bullet> i) (at x) =\n  vector_derivative (\\<lambda>x. \\<gamma> x \\<bullet> i)\n   (at x within {0..1})\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> s \\<Longrightarrow>\n       vector_derivative \\<gamma> (at x within {0..1}) \\<bullet> i =\n       vector_derivative (\\<lambda>x. \\<gamma> x \\<bullet> i)\n        (at x within {0..1})", "have gamma_component_deriv_eq_gamma_deriv_component:\n      \"vector_derivative (\\<lambda>x. \\<gamma> x \\<bullet> i) (at x) = vector_derivative (\\<lambda>x. \\<gamma> x) (at x) \\<bullet> i\""], ["proof (prove)\ngoal (1 subgoal):\n 1. vector_derivative (\\<lambda>x. \\<gamma> x \\<bullet> i) (at x) =\n    vector_derivative \\<gamma> (at x) \\<bullet> i", "using derivative_component_fun_component[of \"\\<gamma>\" \"x\" \"i\"] gamma_differentiable x_within_bounds"], ["proof (prove)\nusing this:\n  \\<gamma> differentiable at x \\<Longrightarrow>\n  vector_derivative \\<gamma> (at x) \\<bullet> i =\n  vector_derivative (\\<lambda>x. \\<gamma> x \\<bullet> i) (at x)\n  \\<forall>x\\<in>s. \\<gamma> differentiable at x\n  x \\<in> s\n\ngoal (1 subgoal):\n 1. vector_derivative (\\<lambda>x. \\<gamma> x \\<bullet> i) (at x) =\n    vector_derivative \\<gamma> (at x) \\<bullet> i", "by auto"], ["proof (state)\nthis:\n  vector_derivative (\\<lambda>x. \\<gamma> x \\<bullet> i) (at x) =\n  vector_derivative \\<gamma> (at x) \\<bullet> i\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> s \\<Longrightarrow>\n       vector_derivative \\<gamma> (at x within {0..1}) \\<bullet> i =\n       vector_derivative (\\<lambda>x. \\<gamma> x \\<bullet> i)\n        (at x within {0..1})", "show \"vector_derivative \\<gamma> (at x within {0..1}) \\<bullet> i = vector_derivative (\\<lambda>x. \\<gamma> x \\<bullet> i) (at x within {0..1})\""], ["proof (prove)\ngoal (1 subgoal):\n 1. vector_derivative \\<gamma> (at x within {0..1}) \\<bullet> i =\n    vector_derivative (\\<lambda>x. \\<gamma> x \\<bullet> i)\n     (at x within {0..1})", "using gamma_component_deriv_eq_gamma_deriv_component gamma_component_deriv_at_within gamma_deriv_at_within"], ["proof (prove)\nusing this:\n  vector_derivative (\\<lambda>x. \\<gamma> x \\<bullet> i) (at x) =\n  vector_derivative \\<gamma> (at x) \\<bullet> i\n  vector_derivative (\\<lambda>x. \\<gamma> x \\<bullet> i) (at x) =\n  vector_derivative (\\<lambda>x. \\<gamma> x \\<bullet> i)\n   (at x within {0..1})\n  vector_derivative \\<gamma> (at x within {0..1}) =\n  vector_derivative \\<gamma> (at x)\n\ngoal (1 subgoal):\n 1. vector_derivative \\<gamma> (at x within {0..1}) \\<bullet> i =\n    vector_derivative (\\<lambda>x. \\<gamma> x \\<bullet> i)\n     (at x within {0..1})", "by auto"], ["proof (state)\nthis:\n  vector_derivative \\<gamma> (at x within {0..1}) \\<bullet> i =\n  vector_derivative (\\<lambda>x. \\<gamma> x \\<bullet> i)\n   (at x within {0..1})\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<forall>x\\<in>s.\n     vector_derivative \\<gamma> (at x within {0..1}) \\<bullet> i =\n     vector_derivative (\\<lambda>x. \\<gamma> x \\<bullet> i)\n      (at x within {0..1})\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma derivative_component_fun_component_at_within:\n  assumes gamma_differentiable: \"\\<forall>x \\<in> {0 .. 1}. \\<gamma> differentiable at x\"\n  shows \"\\<forall>x \\<in> {0..1}. vector_derivative (\\<lambda>x. \\<gamma> x) (at x within {0..1}) \\<bullet> (i::'a:: euclidean_space)\n                                       =  vector_derivative (\\<lambda>x. \\<gamma> x \\<bullet> i) (at x within {0..1})\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>{0..1}.\n       vector_derivative \\<gamma> (at x within {0..1}) \\<bullet> i =\n       vector_derivative (\\<lambda>x. \\<gamma> x \\<bullet> i)\n        (at x within {0..1})", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>{0..1}.\n       vector_derivative \\<gamma> (at x within {0..1}) \\<bullet> i =\n       vector_derivative (\\<lambda>x. \\<gamma> x \\<bullet> i)\n        (at x within {0..1})", "have gamma_i_component_smooth:\n    \"\\<forall>x \\<in> {0 .. 1}. (\\<lambda>x. \\<gamma> x \\<bullet> i) differentiable at x\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>{0..1}.\n       (\\<lambda>x. \\<gamma> x \\<bullet> i) differentiable at x", "using gamma_differentiable"], ["proof (prove)\nusing this:\n  \\<forall>x\\<in>{0..1}. \\<gamma> differentiable at x\n\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>{0..1}.\n       (\\<lambda>x. \\<gamma> x \\<bullet> i) differentiable at x", "by auto"], ["proof (state)\nthis:\n  \\<forall>x\\<in>{0..1}.\n     (\\<lambda>x. \\<gamma> x \\<bullet> i) differentiable at x\n\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>{0..1}.\n       vector_derivative \\<gamma> (at x within {0..1}) \\<bullet> i =\n       vector_derivative (\\<lambda>x. \\<gamma> x \\<bullet> i)\n        (at x within {0..1})", "show \"\\<forall>x \\<in> {0..1}. vector_derivative (\\<lambda>x. \\<gamma> x) (at x within {0..1}) \\<bullet> i\n                                  =  vector_derivative (\\<lambda>x. \\<gamma> x \\<bullet> i) (at x within {0..1})\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>{0..1}.\n       vector_derivative \\<gamma> (at x within {0..1}) \\<bullet> i =\n       vector_derivative (\\<lambda>x. \\<gamma> x \\<bullet> i)\n        (at x within {0..1})", "proof"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> {0..1} \\<Longrightarrow>\n       vector_derivative \\<gamma> (at x within {0..1}) \\<bullet> i =\n       vector_derivative (\\<lambda>x. \\<gamma> x \\<bullet> i)\n        (at x within {0..1})", "fix x::real"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> {0..1} \\<Longrightarrow>\n       vector_derivative \\<gamma> (at x within {0..1}) \\<bullet> i =\n       vector_derivative (\\<lambda>x. \\<gamma> x \\<bullet> i)\n        (at x within {0..1})", "assume x_within_bounds: \"x \\<in> {0..1}\""], ["proof (state)\nthis:\n  x \\<in> {0..1}\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> {0..1} \\<Longrightarrow>\n       vector_derivative \\<gamma> (at x within {0..1}) \\<bullet> i =\n       vector_derivative (\\<lambda>x. \\<gamma> x \\<bullet> i)\n        (at x within {0..1})", "have gamma_deriv_at_within:\n      \"vector_derivative (\\<lambda>x. \\<gamma> x) (at x within {0..1}) =  vector_derivative (\\<lambda>x. \\<gamma> x) (at x)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. vector_derivative \\<gamma> (at x within {0..1}) =\n    vector_derivative \\<gamma> (at x)", "using gamma_deriv_at_within[of \"0\" \"1\"] x_within_bounds\n        gamma_differentiable"], ["proof (prove)\nusing this:\n  \\<lbrakk>0 < 1; ?x \\<in> {0..1};\n   \\<forall>x\\<in>{0..1}. ?\\<gamma> differentiable at x\\<rbrakk>\n  \\<Longrightarrow> vector_derivative ?\\<gamma> (at ?x within {0..1}) =\n                    vector_derivative ?\\<gamma> (at ?x)\n  x \\<in> {0..1}\n  \\<forall>x\\<in>{0..1}. \\<gamma> differentiable at x\n\ngoal (1 subgoal):\n 1. vector_derivative \\<gamma> (at x within {0..1}) =\n    vector_derivative \\<gamma> (at x)", "by (auto simp add: vector_derivative_works)"], ["proof (state)\nthis:\n  vector_derivative \\<gamma> (at x within {0..1}) =\n  vector_derivative \\<gamma> (at x)\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> {0..1} \\<Longrightarrow>\n       vector_derivative \\<gamma> (at x within {0..1}) \\<bullet> i =\n       vector_derivative (\\<lambda>x. \\<gamma> x \\<bullet> i)\n        (at x within {0..1})", "have gamma_component_deriv_at_within:\n      \"vector_derivative (\\<lambda>x. \\<gamma> x \\<bullet> i) (at x) = vector_derivative (\\<lambda>x. \\<gamma> x \\<bullet> i) (at x within {0..1})\""], ["proof (prove)\ngoal (1 subgoal):\n 1. vector_derivative (\\<lambda>x. \\<gamma> x \\<bullet> i) (at x) =\n    vector_derivative (\\<lambda>x. \\<gamma> x \\<bullet> i)\n     (at x within {0..1})", "using Derivative.vector_derivative_at_within_ivl[of \"(\\<lambda>x. (\\<gamma> x) \\<bullet> i)\" \"vector_derivative (\\<lambda>x. (\\<gamma> x)  \\<bullet> i) (at x)\" \"x\" \"0\" \"1\"]\n        has_vector_derivative_at_within[of \"(\\<lambda>x. \\<gamma> x \\<bullet> i)\" \"vector_derivative (\\<lambda>x. \\<gamma> x \\<bullet> i) (at x)\" \"x\" \"{0..1}\"]\n        gamma_i_component_smooth x_within_bounds"], ["proof (prove)\nusing this:\n  \\<lbrakk>((\\<lambda>x. \\<gamma> x \\<bullet> i) has_vector_derivative\n            vector_derivative (\\<lambda>x. \\<gamma> x \\<bullet> i) (at x))\n            (at x);\n   0 \\<le> x; x \\<le> 1; 0 < 1\\<rbrakk>\n  \\<Longrightarrow> vector_derivative (\\<lambda>x. \\<gamma> x \\<bullet> i)\n                     (at x within {0..1}) =\n                    vector_derivative (\\<lambda>x. \\<gamma> x \\<bullet> i)\n                     (at x)\n  ((\\<lambda>x. \\<gamma> x \\<bullet> i) has_vector_derivative\n   vector_derivative (\\<lambda>x. \\<gamma> x \\<bullet> i) (at x))\n   (at x) \\<Longrightarrow>\n  ((\\<lambda>x. \\<gamma> x \\<bullet> i) has_vector_derivative\n   vector_derivative (\\<lambda>x. \\<gamma> x \\<bullet> i) (at x))\n   (at x within {0..1})\n  \\<forall>x\\<in>{0..1}.\n     (\\<lambda>x. \\<gamma> x \\<bullet> i) differentiable at x\n  x \\<in> {0..1}\n\ngoal (1 subgoal):\n 1. vector_derivative (\\<lambda>x. \\<gamma> x \\<bullet> i) (at x) =\n    vector_derivative (\\<lambda>x. \\<gamma> x \\<bullet> i)\n     (at x within {0..1})", "by (simp add: vector_derivative_works)"], ["proof (state)\nthis:\n  vector_derivative (\\<lambda>x. \\<gamma> x \\<bullet> i) (at x) =\n  vector_derivative (\\<lambda>x. \\<gamma> x \\<bullet> i)\n   (at x within {0..1})\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> {0..1} \\<Longrightarrow>\n       vector_derivative \\<gamma> (at x within {0..1}) \\<bullet> i =\n       vector_derivative (\\<lambda>x. \\<gamma> x \\<bullet> i)\n        (at x within {0..1})", "have gamma_component_deriv_eq_gamma_deriv_component:\n      \"vector_derivative (\\<lambda>x. \\<gamma> x \\<bullet> i) (at x) = vector_derivative (\\<lambda>x. \\<gamma> x) (at x) \\<bullet> i\""], ["proof (prove)\ngoal (1 subgoal):\n 1. vector_derivative (\\<lambda>x. \\<gamma> x \\<bullet> i) (at x) =\n    vector_derivative \\<gamma> (at x) \\<bullet> i", "using derivative_component_fun_component[of \"\\<gamma>\" \"x\" \"i\"] gamma_differentiable x_within_bounds"], ["proof (prove)\nusing this:\n  \\<gamma> differentiable at x \\<Longrightarrow>\n  vector_derivative \\<gamma> (at x) \\<bullet> i =\n  vector_derivative (\\<lambda>x. \\<gamma> x \\<bullet> i) (at x)\n  \\<forall>x\\<in>{0..1}. \\<gamma> differentiable at x\n  x \\<in> {0..1}\n\ngoal (1 subgoal):\n 1. vector_derivative (\\<lambda>x. \\<gamma> x \\<bullet> i) (at x) =\n    vector_derivative \\<gamma> (at x) \\<bullet> i", "by auto"], ["proof (state)\nthis:\n  vector_derivative (\\<lambda>x. \\<gamma> x \\<bullet> i) (at x) =\n  vector_derivative \\<gamma> (at x) \\<bullet> i\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> {0..1} \\<Longrightarrow>\n       vector_derivative \\<gamma> (at x within {0..1}) \\<bullet> i =\n       vector_derivative (\\<lambda>x. \\<gamma> x \\<bullet> i)\n        (at x within {0..1})", "show \"vector_derivative \\<gamma> (at x within {0..1}) \\<bullet> i = vector_derivative (\\<lambda>x. \\<gamma> x \\<bullet> i) (at x within {0..1})\""], ["proof (prove)\ngoal (1 subgoal):\n 1. vector_derivative \\<gamma> (at x within {0..1}) \\<bullet> i =\n    vector_derivative (\\<lambda>x. \\<gamma> x \\<bullet> i)\n     (at x within {0..1})", "using gamma_component_deriv_eq_gamma_deriv_component gamma_component_deriv_at_within gamma_deriv_at_within"], ["proof (prove)\nusing this:\n  vector_derivative (\\<lambda>x. \\<gamma> x \\<bullet> i) (at x) =\n  vector_derivative \\<gamma> (at x) \\<bullet> i\n  vector_derivative (\\<lambda>x. \\<gamma> x \\<bullet> i) (at x) =\n  vector_derivative (\\<lambda>x. \\<gamma> x \\<bullet> i)\n   (at x within {0..1})\n  vector_derivative \\<gamma> (at x within {0..1}) =\n  vector_derivative \\<gamma> (at x)\n\ngoal (1 subgoal):\n 1. vector_derivative \\<gamma> (at x within {0..1}) \\<bullet> i =\n    vector_derivative (\\<lambda>x. \\<gamma> x \\<bullet> i)\n     (at x within {0..1})", "by auto"], ["proof (state)\nthis:\n  vector_derivative \\<gamma> (at x within {0..1}) \\<bullet> i =\n  vector_derivative (\\<lambda>x. \\<gamma> x \\<bullet> i)\n   (at x within {0..1})\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<forall>x\\<in>{0..1}.\n     vector_derivative \\<gamma> (at x within {0..1}) \\<bullet> i =\n     vector_derivative (\\<lambda>x. \\<gamma> x \\<bullet> i)\n      (at x within {0..1})\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma straight_path_diffrentiable_x:\n  fixes b :: \"real\" and y1 ::\"real\"\n  assumes gamma_def: \"\\<gamma> = (\\<lambda>x. (b, y2 + y1 * x))\"\n  shows \"\\<forall>x. \\<gamma> differentiable at x\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>x. \\<gamma> differentiable at x", "unfolding gamma_def differentiable_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>x.\n       \\<exists>D. ((\\<lambda>x. (b, y2 + y1 * x)) has_derivative D) (at x)", "by (fast intro!: derivative_intros)"], ["", "lemma straight_path_diffrentiable_y:\n  fixes b :: \"real\" and\n    y1 y2 ::\"real\"\n  assumes gamma_def: \"\\<gamma> = (\\<lambda>x. (y2 + y1 * x , b))\"\n  shows \"\\<forall>x. \\<gamma> differentiable at x\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>x. \\<gamma> differentiable at x", "unfolding gamma_def differentiable_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>x.\n       \\<exists>D. ((\\<lambda>x. (y2 + y1 * x, b)) has_derivative D) (at x)", "by (fast intro!: derivative_intros)"], ["", "lemma piecewise_C1_differentiable_on_imp_continuous_on:\n  assumes \"f piecewise_C1_differentiable_on s\"\n  shows \"continuous_on s f\""], ["proof (prove)\ngoal (1 subgoal):\n 1. continuous_on s f", "using assms"], ["proof (prove)\nusing this:\n  f piecewise_C1_differentiable_on s\n\ngoal (1 subgoal):\n 1. continuous_on s f", "by (auto simp add: piecewise_C1_differentiable_on_def)"], ["", "lemma boring_lemma1:\n  fixes f :: \"real\\<Rightarrow>real\"\n  assumes \"(f has_vector_derivative D) (at x)\"\n  shows \"((\\<lambda>x. (f x, 0)) has_vector_derivative ((D,0::real))) (at x)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. ((\\<lambda>x. (f x, 0)) has_vector_derivative (D, 0)) (at x)", "proof-"], ["proof (state)\ngoal (1 subgoal):\n 1. ((\\<lambda>x. (f x, 0)) has_vector_derivative (D, 0)) (at x)", "have *: \"((\\<lambda>x. (f x) *\\<^sub>R (1,0)) has_vector_derivative (D *\\<^sub>R (1,0))) (at x)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. ((\\<lambda>x. f x *\\<^sub>R (1::'a, 0::'b)) has_vector_derivative\n     D *\\<^sub>R (1::'a, 0::'b))\n     (at x)", "using bounded_linear.has_vector_derivative[OF Real_Vector_Spaces.bounded_linear_scaleR_left assms(1),\n        of \"(1,0)\"]"], ["proof (prove)\nusing this:\n  ((\\<lambda>x. f x *\\<^sub>R (1::?'c2, 0::?'d2)) has_vector_derivative\n   D *\\<^sub>R (1::?'c2, 0::?'d2))\n   (at x)\n\ngoal (1 subgoal):\n 1. ((\\<lambda>x. f x *\\<^sub>R (1::'a, 0::'b)) has_vector_derivative\n     D *\\<^sub>R (1::'a, 0::'b))\n     (at x)", "by auto"], ["proof (state)\nthis:\n  ((\\<lambda>x. f x *\\<^sub>R (1::?'a1, 0::?'b1)) has_vector_derivative\n   D *\\<^sub>R (1::?'a1, 0::?'b1))\n   (at x)\n\ngoal (1 subgoal):\n 1. ((\\<lambda>x. (f x, 0)) has_vector_derivative (D, 0)) (at x)", "have \"((\\<lambda>x. (f x) *\\<^sub>R (1,0)) has_vector_derivative (D,0)) (at x)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. ((\\<lambda>x. f x *\\<^sub>R (1, 0::'a)) has_vector_derivative\n     (D, 0::'a))\n     (at x)", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. ((\\<lambda>x. f x *\\<^sub>R (1, 0::'a)) has_vector_derivative\n     (D, 0::'a))\n     (at x)", "have \"(D, 0::'a) = D *\\<^sub>R (1, 0)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (D, 0::'a) = D *\\<^sub>R (1, 0::'a)", "by simp"], ["proof (state)\nthis:\n  (D, 0::'a) = D *\\<^sub>R (1, 0::'a)\n\ngoal (1 subgoal):\n 1. ((\\<lambda>x. f x *\\<^sub>R (1, 0::'a)) has_vector_derivative\n     (D, 0::'a))\n     (at x)", "then"], ["proof (chain)\npicking this:\n  (D, 0::'a) = D *\\<^sub>R (1, 0::'a)", "show ?thesis"], ["proof (prove)\nusing this:\n  (D, 0::'a) = D *\\<^sub>R (1, 0::'a)\n\ngoal (1 subgoal):\n 1. ((\\<lambda>x. f x *\\<^sub>R (1, 0::'a)) has_vector_derivative\n     (D, 0::'a))\n     (at x)", "by (metis (no_types) *)"], ["proof (state)\nthis:\n  ((\\<lambda>x. f x *\\<^sub>R (1, 0::'a)) has_vector_derivative (D, 0::'a))\n   (at x)\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  ((\\<lambda>x. f x *\\<^sub>R (1, 0::?'a2)) has_vector_derivative\n   (D, 0::?'a2))\n   (at x)\n\ngoal (1 subgoal):\n 1. ((\\<lambda>x. (f x, 0)) has_vector_derivative (D, 0)) (at x)", "then"], ["proof (chain)\npicking this:\n  ((\\<lambda>x. f x *\\<^sub>R (1, 0::?'a2)) has_vector_derivative\n   (D, 0::?'a2))\n   (at x)", "show ?thesis"], ["proof (prove)\nusing this:\n  ((\\<lambda>x. f x *\\<^sub>R (1, 0::?'a2)) has_vector_derivative\n   (D, 0::?'a2))\n   (at x)\n\ngoal (1 subgoal):\n 1. ((\\<lambda>x. (f x, 0)) has_vector_derivative (D, 0)) (at x)", "by auto"], ["proof (state)\nthis:\n  ((\\<lambda>x. (f x, 0)) has_vector_derivative (D, 0)) (at x)\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma boring_lemma2:\n  fixes f :: \"real\\<Rightarrow>real\"\n  assumes \"(f has_vector_derivative D) (at x)\"\n  shows \"((\\<lambda>x. (0, f x)) has_vector_derivative (0, D)) (at x)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. ((\\<lambda>x. (0::'a, f x)) has_vector_derivative (0::'a, D)) (at x)", "proof-"], ["proof (state)\ngoal (1 subgoal):\n 1. ((\\<lambda>x. (0::'a, f x)) has_vector_derivative (0::'a, D)) (at x)", "have *: \"((\\<lambda>x. (f x) *\\<^sub>R (0,1)) has_vector_derivative (D *\\<^sub>R (0,1))) (at x)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. ((\\<lambda>x. f x *\\<^sub>R (0::'b, 1::'c)) has_vector_derivative\n     D *\\<^sub>R (0::'b, 1::'c))\n     (at x)", "using bounded_linear.has_vector_derivative[OF Real_Vector_Spaces.bounded_linear_scaleR_left assms(1),\n        of \"(0,1)\"]"], ["proof (prove)\nusing this:\n  ((\\<lambda>x. f x *\\<^sub>R (0::?'d2, 1::?'e2)) has_vector_derivative\n   D *\\<^sub>R (0::?'d2, 1::?'e2))\n   (at x)\n\ngoal (1 subgoal):\n 1. ((\\<lambda>x. f x *\\<^sub>R (0::'b, 1::'c)) has_vector_derivative\n     D *\\<^sub>R (0::'b, 1::'c))\n     (at x)", "by auto"], ["proof (state)\nthis:\n  ((\\<lambda>x. f x *\\<^sub>R (0::?'b1, 1::?'c1)) has_vector_derivative\n   D *\\<^sub>R (0::?'b1, 1::?'c1))\n   (at x)\n\ngoal (1 subgoal):\n 1. ((\\<lambda>x. (0::'a, f x)) has_vector_derivative (0::'a, D)) (at x)", "then"], ["proof (chain)\npicking this:\n  ((\\<lambda>x. f x *\\<^sub>R (0::?'b1, 1::?'c1)) has_vector_derivative\n   D *\\<^sub>R (0::?'b1, 1::?'c1))\n   (at x)", "have \"((\\<lambda>x. (f x) *\\<^sub>R (0,1)) has_vector_derivative ((0,D))) (at x)\""], ["proof (prove)\nusing this:\n  ((\\<lambda>x. f x *\\<^sub>R (0::?'b1, 1::?'c1)) has_vector_derivative\n   D *\\<^sub>R (0::?'b1, 1::?'c1))\n   (at x)\n\ngoal (1 subgoal):\n 1. ((\\<lambda>x. f x *\\<^sub>R (0::'b, 1)) has_vector_derivative\n     (0::'b, D))\n     (at x)", "using scaleR_Pair Real_Vector_Spaces.real_scaleR_def"], ["proof (prove)\nusing this:\n  ((\\<lambda>x. f x *\\<^sub>R (0::?'b1, 1::?'c1)) has_vector_derivative\n   D *\\<^sub>R (0::?'b1, 1::?'c1))\n   (at x)\n  ?r *\\<^sub>R (?a, ?b) = (?r *\\<^sub>R ?a, ?r *\\<^sub>R ?b)\n  ?a *\\<^sub>R ?x = ?a * ?x\n\ngoal (1 subgoal):\n 1. ((\\<lambda>x. f x *\\<^sub>R (0::'b, 1)) has_vector_derivative\n     (0::'b, D))\n     (at x)", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<lbrakk>((\\<lambda>x.\n                  f x *\\<^sub>R (0::?'b1, 1::?'c1)) has_vector_derivative\n              D *\\<^sub>R (0::?'b1, 1::?'c1))\n              (at x);\n     \\<And>r a b. r *\\<^sub>R (a, b) = (r *\\<^sub>R a, r *\\<^sub>R b);\n     \\<And>a x. a *\\<^sub>R x = a * x\\<rbrakk>\n    \\<Longrightarrow> ((\\<lambda>x.\n                           f x *\\<^sub>R (0::'b, 1)) has_vector_derivative\n                       (0::'b, D))\n                       (at x)", "have \"(0::'b, D) = D *\\<^sub>R (0, 1)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (0::'b, D) = D *\\<^sub>R (0::'b, 1)", "by auto"], ["proof (state)\nthis:\n  (0::'b, D) = D *\\<^sub>R (0::'b, 1)\n\ngoal (1 subgoal):\n 1. \\<lbrakk>((\\<lambda>x.\n                  f x *\\<^sub>R (0::?'b1, 1::?'c1)) has_vector_derivative\n              D *\\<^sub>R (0::?'b1, 1::?'c1))\n              (at x);\n     \\<And>r a b. r *\\<^sub>R (a, b) = (r *\\<^sub>R a, r *\\<^sub>R b);\n     \\<And>a x. a *\\<^sub>R x = a * x\\<rbrakk>\n    \\<Longrightarrow> ((\\<lambda>x.\n                           f x *\\<^sub>R (0::'b, 1)) has_vector_derivative\n                       (0::'b, D))\n                       (at x)", "then"], ["proof (chain)\npicking this:\n  (0::'b, D) = D *\\<^sub>R (0::'b, 1)", "show ?thesis"], ["proof (prove)\nusing this:\n  (0::'b, D) = D *\\<^sub>R (0::'b, 1)\n\ngoal (1 subgoal):\n 1. ((\\<lambda>x. f x *\\<^sub>R (0::'b, 1)) has_vector_derivative\n     (0::'b, D))\n     (at x)", "by (metis (no_types) *)"], ["proof (state)\nthis:\n  ((\\<lambda>x. f x *\\<^sub>R (0::'b, 1)) has_vector_derivative (0::'b, D))\n   (at x)\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  ((\\<lambda>x. f x *\\<^sub>R (0::?'b2, 1)) has_vector_derivative\n   (0::?'b2, D))\n   (at x)\n\ngoal (1 subgoal):\n 1. ((\\<lambda>x. (0::'a, f x)) has_vector_derivative (0::'a, D)) (at x)", "then"], ["proof (chain)\npicking this:\n  ((\\<lambda>x. f x *\\<^sub>R (0::?'b2, 1)) has_vector_derivative\n   (0::?'b2, D))\n   (at x)", "show ?thesis"], ["proof (prove)\nusing this:\n  ((\\<lambda>x. f x *\\<^sub>R (0::?'b2, 1)) has_vector_derivative\n   (0::?'b2, D))\n   (at x)\n\ngoal (1 subgoal):\n 1. ((\\<lambda>x. (0::'a, f x)) has_vector_derivative (0::'a, D)) (at x)", "by auto"], ["proof (state)\nthis:\n  ((\\<lambda>x. (0::'a, f x)) has_vector_derivative (0::'a, D)) (at x)\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma pair_prod_smooth_pw_smooth:\n  assumes \"(f::real\\<Rightarrow>real) C1_differentiable_on s\" \"(g::real\\<Rightarrow>real) piecewise_C1_differentiable_on s\"\n  shows \"(\\<lambda>x. (f x, g x)) piecewise_C1_differentiable_on s\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>x. (f x, g x)) piecewise_C1_differentiable_on s", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. (\\<lambda>x. (f x, g x)) piecewise_C1_differentiable_on s", "have f_cont: \"continuous_on s f\""], ["proof (prove)\ngoal (1 subgoal):\n 1. continuous_on s f", "using assms(1) C1_differentiable_imp_continuous_on"], ["proof (prove)\nusing this:\n  f C1_differentiable_on s\n  ?f C1_differentiable_on ?S \\<Longrightarrow> continuous_on ?S ?f\n\ngoal (1 subgoal):\n 1. continuous_on s f", "by fastforce"], ["proof (state)\nthis:\n  continuous_on s f\n\ngoal (1 subgoal):\n 1. (\\<lambda>x. (f x, g x)) piecewise_C1_differentiable_on s", "have g_cont: \"continuous_on s g\""], ["proof (prove)\ngoal (1 subgoal):\n 1. continuous_on s g", "using assms(2)"], ["proof (prove)\nusing this:\n  g piecewise_C1_differentiable_on s\n\ngoal (1 subgoal):\n 1. continuous_on s g", "by (auto simp add: piecewise_C1_differentiable_on_def)"], ["proof (state)\nthis:\n  continuous_on s g\n\ngoal (1 subgoal):\n 1. (\\<lambda>x. (f x, g x)) piecewise_C1_differentiable_on s", "obtain t where t:\"(finite t \\<and> g C1_differentiable_on s - t)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>t.\n        finite t \\<and> g C1_differentiable_on s - t \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "using assms(2) piecewise_C1_differentiable_on_def"], ["proof (prove)\nusing this:\n  g piecewise_C1_differentiable_on s\n  ?f piecewise_C1_differentiable_on ?i \\<equiv>\n  continuous_on ?i ?f \\<and>\n  (\\<exists>S. finite S \\<and> ?f C1_differentiable_on ?i - S)\n\ngoal (1 subgoal):\n 1. (\\<And>t.\n        finite t \\<and> g C1_differentiable_on s - t \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  finite t \\<and> g C1_differentiable_on s - t\n\ngoal (1 subgoal):\n 1. (\\<lambda>x. (f x, g x)) piecewise_C1_differentiable_on s", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>x. (f x, g x)) piecewise_C1_differentiable_on s", "using piecewise_C1_differentiable_on_components[where ?f = \"(\\<lambda>x. (f x, g x))\"]"], ["proof (prove)\nusing this:\n  \\<lbrakk>finite ?t;\n   \\<And>i.\n      i \\<in> Basis \\<Longrightarrow>\n      (\\<lambda>x. (f x, g x) \\<bullet> i) C1_differentiable_on ?s - ?t;\n   \\<And>i.\n      i \\<in> Basis \\<Longrightarrow>\n      continuous_on ?s (\\<lambda>x. (f x, g x) \\<bullet> i)\\<rbrakk>\n  \\<Longrightarrow> (\\<lambda>x. (f x, g x)) piecewise_C1_differentiable_on\n                    ?s\n\ngoal (1 subgoal):\n 1. (\\<lambda>x. (f x, g x)) piecewise_C1_differentiable_on s", "apply (simp add: real_pair_basis)"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>t s.\n        \\<lbrakk>finite t;\n         \\<And>i.\n            i = (1, 0) \\<or> i = (0, 1) \\<Longrightarrow>\n            (\\<lambda>x. (f x, g x) \\<bullet> i) C1_differentiable_on s - t;\n         \\<And>i.\n            i = (1, 0) \\<or> i = (0, 1) \\<Longrightarrow>\n            continuous_on s (\\<lambda>x. (f x, g x) \\<bullet> i)\\<rbrakk>\n        \\<Longrightarrow> (\\<lambda>x.\n                              (f x, g x)) piecewise_C1_differentiable_on\n                          s) \\<Longrightarrow>\n    (\\<lambda>x. (f x, g x)) piecewise_C1_differentiable_on s", "using assms(2) piecewise_C1_differentiable_on_def\n      C1_differentiable_on_subset[OF assms(1) Diff_subset, where ?B1 =\"t\"] t\n      f_cont g_cont"], ["proof (prove)\nusing this:\n  g piecewise_C1_differentiable_on s\n  ?f piecewise_C1_differentiable_on ?i \\<equiv>\n  continuous_on ?i ?f \\<and>\n  (\\<exists>S. finite S \\<and> ?f C1_differentiable_on ?i - S)\n  f C1_differentiable_on s - t\n  finite t \\<and> g C1_differentiable_on s - t\n  continuous_on s f\n  continuous_on s g\n\ngoal (1 subgoal):\n 1. (\\<And>t s.\n        \\<lbrakk>finite t;\n         \\<And>i.\n            i = (1, 0) \\<or> i = (0, 1) \\<Longrightarrow>\n            (\\<lambda>x. (f x, g x) \\<bullet> i) C1_differentiable_on s - t;\n         \\<And>i.\n            i = (1, 0) \\<or> i = (0, 1) \\<Longrightarrow>\n            continuous_on s (\\<lambda>x. (f x, g x) \\<bullet> i)\\<rbrakk>\n        \\<Longrightarrow> (\\<lambda>x.\n                              (f x, g x)) piecewise_C1_differentiable_on\n                          s) \\<Longrightarrow>\n    (\\<lambda>x. (f x, g x)) piecewise_C1_differentiable_on s", "by fastforce"], ["proof (state)\nthis:\n  (\\<lambda>x. (f x, g x)) piecewise_C1_differentiable_on s\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma scale_shift_smooth:\n  shows \"(\\<lambda>x. a + b * x) C1_differentiable_on s\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>x. a + b * x) C1_differentiable_on s", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. (\\<lambda>x. a + b * x) C1_differentiable_on s", "show \"(\\<lambda>x. a + b * x) C1_differentiable_on s\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>x. a + b * x) C1_differentiable_on s", "using C1_differentiable_on_mult C1_differentiable_on_add C1_differentiable_on_const\n          C1_differentiable_on_ident"], ["proof (prove)\nusing this:\n  \\<lbrakk>?f C1_differentiable_on ?S; ?g C1_differentiable_on ?S\\<rbrakk>\n  \\<Longrightarrow> (\\<lambda>x. ?f x * ?g x) C1_differentiable_on ?S\n  \\<lbrakk>?f C1_differentiable_on ?S; ?g C1_differentiable_on ?S\\<rbrakk>\n  \\<Longrightarrow> (\\<lambda>x. ?f x + ?g x) C1_differentiable_on ?S\n  (\\<lambda>z. ?a) C1_differentiable_on ?S\n  (\\<lambda>x. x) C1_differentiable_on ?S\n\ngoal (1 subgoal):\n 1. (\\<lambda>x. a + b * x) C1_differentiable_on s", "by auto"], ["proof (state)\nthis:\n  (\\<lambda>x. a + b * x) C1_differentiable_on s\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma open_diff:\n  assumes \"finite (t::'a::t1_space set)\"\n    \"open (s::'a set)\"\n  shows \"open (s -t)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. open (s - t)", "using assms"], ["proof (prove)\nusing this:\n  finite t\n  open s\n\ngoal (1 subgoal):\n 1. open (s - t)", "proof(induction \"t\")"], ["proof (state)\ngoal (2 subgoals):\n 1. open s \\<Longrightarrow> open (s - {})\n 2. \\<And>x F.\n       \\<lbrakk>finite F; x \\<notin> F;\n        open s \\<Longrightarrow> open (s - F); open s\\<rbrakk>\n       \\<Longrightarrow> open (s - insert x F)", "show \"open s \\<Longrightarrow> open (s - {})\""], ["proof (prove)\ngoal (1 subgoal):\n 1. open s \\<Longrightarrow> open (s - {})", "by auto"], ["proof (state)\nthis:\n  open s \\<Longrightarrow> open (s - {})\n\ngoal (1 subgoal):\n 1. \\<And>x F.\n       \\<lbrakk>finite F; x \\<notin> F;\n        open s \\<Longrightarrow> open (s - F); open s\\<rbrakk>\n       \\<Longrightarrow> open (s - insert x F)", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x F.\n       \\<lbrakk>finite F; x \\<notin> F;\n        open s \\<Longrightarrow> open (s - F); open s\\<rbrakk>\n       \\<Longrightarrow> open (s - insert x F)", "fix x::\"'a::t1_space\""], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x F.\n       \\<lbrakk>finite F; x \\<notin> F;\n        open s \\<Longrightarrow> open (s - F); open s\\<rbrakk>\n       \\<Longrightarrow> open (s - insert x F)", "fix F::\"'a::t1_space set\""], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x F.\n       \\<lbrakk>finite F; x \\<notin> F;\n        open s \\<Longrightarrow> open (s - F); open s\\<rbrakk>\n       \\<Longrightarrow> open (s - insert x F)", "assume step: \"finite F \" \" x \\<notin> F\" \"open s\""], ["proof (state)\nthis:\n  finite F\n  x \\<notin> F\n  open s\n\ngoal (1 subgoal):\n 1. \\<And>x F.\n       \\<lbrakk>finite F; x \\<notin> F;\n        open s \\<Longrightarrow> open (s - F); open s\\<rbrakk>\n       \\<Longrightarrow> open (s - insert x F)", "then"], ["proof (chain)\npicking this:\n  finite F\n  x \\<notin> F\n  open s", "have i: \"(s - insert x F) = (s - F) - {x}\""], ["proof (prove)\nusing this:\n  finite F\n  x \\<notin> F\n  open s\n\ngoal (1 subgoal):\n 1. s - insert x F = s - F - {x}", "by auto"], ["proof (state)\nthis:\n  s - insert x F = s - F - {x}\n\ngoal (1 subgoal):\n 1. \\<And>x F.\n       \\<lbrakk>finite F; x \\<notin> F;\n        open s \\<Longrightarrow> open (s - F); open s\\<rbrakk>\n       \\<Longrightarrow> open (s - insert x F)", "assume ind_hyp: \" (open s \\<Longrightarrow> open (s - F))\""], ["proof (state)\nthis:\n  open s \\<Longrightarrow> open (s - F)\n\ngoal (1 subgoal):\n 1. \\<And>x F.\n       \\<lbrakk>finite F; x \\<notin> F;\n        open s \\<Longrightarrow> open (s - F); open s\\<rbrakk>\n       \\<Longrightarrow> open (s - insert x F)", "show \"open (s - insert x F)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. open (s - insert x F)", "apply (simp only: i)"], ["proof (prove)\ngoal (1 subgoal):\n 1. open (s - F - {x})", "using open_delete[of \"s -F\"] ind_hyp[OF step(3)]"], ["proof (prove)\nusing this:\n  open (s - F) \\<Longrightarrow> open (s - F - {?x})\n  open (s - F)\n\ngoal (1 subgoal):\n 1. open (s - F - {x})", "by auto"], ["proof (state)\nthis:\n  open (s - insert x F)\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma has_derivative_transform_within:\n  assumes \"0 < d\"\n    and \"x \\<in> s\"\n    and \"\\<forall>x'\\<in>s. dist x' x < d \\<longrightarrow> f x' = g x'\"\n    and \"(f has_derivative f') (at x within s)\"\n  shows \"(g has_derivative f') (at x within s)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (g has_derivative f') (at x within s)", "using assms"], ["proof (prove)\nusing this:\n  0 < d\n  x \\<in> s\n  \\<forall>x'\\<in>s. dist x' x < d \\<longrightarrow> f x' = g x'\n  (f has_derivative f') (at x within s)\n\ngoal (1 subgoal):\n 1. (g has_derivative f') (at x within s)", "unfolding has_derivative_within"], ["proof (prove)\nusing this:\n  0 < d\n  x \\<in> s\n  \\<forall>x'\\<in>s. dist x' x < d \\<longrightarrow> f x' = g x'\n  bounded_linear f' \\<and>\n  ((\\<lambda>y.\n       (1 / norm (y - x)) *\\<^sub>R\n       (f y - (f x + f' (y - x)))) \\<longlongrightarrow>\n   (0::'b))\n   (at x within s)\n\ngoal (1 subgoal):\n 1. bounded_linear f' \\<and>\n    ((\\<lambda>y.\n         (1 / norm (y - x)) *\\<^sub>R\n         (g y - (g x + f' (y - x)))) \\<longlongrightarrow>\n     (0::'b))\n     (at x within s)", "by (force simp add: intro: Lim_transform_within)"], ["", "lemma has_derivative_transform_within_ivl:\n  assumes \"(0::real) < b\"\n    and     \"\\<forall>x\\<in>{a..b} -s. f x = g x\"\n    and \"x \\<in> {a..b} -s\"\n    and \"(f has_derivative f') (at x within {a..b} - s)\"\n  shows \"(g has_derivative f') (at x within {a..b} - s)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (g has_derivative f') (at x within {a..b} - s)", "using has_derivative_transform_within[of \"b\" \"x\" \"{a..b} - s\"] assms"], ["proof (prove)\nusing this:\n  \\<lbrakk>0 < b; x \\<in> {a..b} - s;\n   \\<forall>x'\\<in>{a..b} - s.\n      dist x' x < b \\<longrightarrow> ?f x' = ?g x';\n   (?f has_derivative ?f') (at x within {a..b} - s)\\<rbrakk>\n  \\<Longrightarrow> (?g has_derivative ?f') (at x within {a..b} - s)\n  0 < b\n  \\<forall>x\\<in>{a..b} - s. f x = g x\n  x \\<in> {a..b} - s\n  (f has_derivative f') (at x within {a..b} - s)\n\ngoal (1 subgoal):\n 1. (g has_derivative f') (at x within {a..b} - s)", "by auto"], ["", "lemma has_vector_derivative_transform_within_ivl:\n  assumes \"(0::real) < b\"\n    and     \"\\<forall>x\\<in>{a..b} -s . f x = g x\"\n    and \"x \\<in> {a..b} - s\"\n    and \"(f has_vector_derivative f') (at x within {a..b} - s)\"\n  shows \"(g has_vector_derivative f') (at x within {a..b} - s)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (g has_vector_derivative f') (at x within {a..b} - s)", "using assms has_derivative_transform_within_ivl"], ["proof (prove)\nusing this:\n  0 < b\n  \\<forall>x\\<in>{a..b} - s. f x = g x\n  x \\<in> {a..b} - s\n  (f has_vector_derivative f') (at x within {a..b} - s)\n  \\<lbrakk>0 < ?b; \\<forall>x\\<in>{?a..?b} - ?s. ?f x = ?g x;\n   ?x \\<in> {?a..?b} - ?s;\n   (?f has_derivative ?f') (at ?x within {?a..?b} - ?s)\\<rbrakk>\n  \\<Longrightarrow> (?g has_derivative ?f') (at ?x within {?a..?b} - ?s)\n\ngoal (1 subgoal):\n 1. (g has_vector_derivative f') (at x within {a..b} - s)", "apply (auto simp add: has_vector_derivative_def)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>0 < b; \\<forall>x\\<in>{a..b} - s. f x = g x;\n     (f has_derivative (\\<lambda>x. x *\\<^sub>R f'))\n      (at x within {a..b} - s);\n     \\<And>b a s f g x f'.\n        \\<lbrakk>0 < b; \\<forall>x\\<in>{a..b} - s. f x = g x;\n         a \\<le> x \\<and> x \\<le> b \\<and> x \\<notin> s;\n         (f has_derivative f') (at x within {a..b} - s)\\<rbrakk>\n        \\<Longrightarrow> (g has_derivative f') (at x within {a..b} - s);\n     a \\<le> x; x \\<le> b; x \\<notin> s\\<rbrakk>\n    \\<Longrightarrow> (g has_derivative (\\<lambda>x. x *\\<^sub>R f'))\n                       (at x within {a..b} - s)", "by blast"], ["", "lemma has_derivative_transform_at:\n  assumes \"0 < d\"\n    and \"\\<forall>x'. dist x' x < d \\<longrightarrow> f x' = g x'\"\n    and \"(f has_derivative f') (at x)\"\n  shows \"(g has_derivative f') (at x)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (g has_derivative f') (at x)", "using has_derivative_transform_within [of d x UNIV f g f'] assms"], ["proof (prove)\nusing this:\n  \\<lbrakk>0 < d; x \\<in> UNIV;\n   \\<forall>x'\\<in>UNIV. dist x' x < d \\<longrightarrow> f x' = g x';\n   (f has_derivative f') (at x)\\<rbrakk>\n  \\<Longrightarrow> (g has_derivative f') (at x)\n  0 < d\n  \\<forall>x'. dist x' x < d \\<longrightarrow> f x' = g x'\n  (f has_derivative f') (at x)\n\ngoal (1 subgoal):\n 1. (g has_derivative f') (at x)", "by simp"], ["", "lemma has_vector_derivative_transform_at:\n  assumes \"0 < d\"\n    and \"\\<forall>x'. dist x' x < d \\<longrightarrow> f x' = g x'\"\n    and \"(f has_vector_derivative f') (at x)\"\n  shows \"(g has_vector_derivative f') (at x)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (g has_vector_derivative f') (at x)", "using assms"], ["proof (prove)\nusing this:\n  0 < d\n  \\<forall>x'. dist x' x < d \\<longrightarrow> f x' = g x'\n  (f has_vector_derivative f') (at x)\n\ngoal (1 subgoal):\n 1. (g has_vector_derivative f') (at x)", "unfolding has_vector_derivative_def"], ["proof (prove)\nusing this:\n  0 < d\n  \\<forall>x'. dist x' x < d \\<longrightarrow> f x' = g x'\n  (f has_derivative (\\<lambda>x. x *\\<^sub>R f')) (at x)\n\ngoal (1 subgoal):\n 1. (g has_derivative (\\<lambda>x. x *\\<^sub>R f')) (at x)", "by (rule has_derivative_transform_at)"], ["", "lemma C1_diff_components_2:\n  assumes \"b \\<in> Basis\"\n  assumes \"f C1_differentiable_on s\"\n  shows \"(\\<lambda>x. f x \\<bullet> b) C1_differentiable_on s\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>x. f x \\<bullet> b) C1_differentiable_on s", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. (\\<lambda>x. f x \\<bullet> b) C1_differentiable_on s", "obtain D where D:\"(\\<forall>x\\<in>s. (f has_derivative (\\<lambda>z. z *\\<^sub>R D x)) (at x))\" \"continuous_on s D\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>D.\n        \\<lbrakk>\\<forall>x\\<in>s.\n                    (f has_derivative (\\<lambda>z. z *\\<^sub>R D x)) (at x);\n         continuous_on s D\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "using assms(2)"], ["proof (prove)\nusing this:\n  f C1_differentiable_on s\n\ngoal (1 subgoal):\n 1. (\\<And>D.\n        \\<lbrakk>\\<forall>x\\<in>s.\n                    (f has_derivative (\\<lambda>z. z *\\<^sub>R D x)) (at x);\n         continuous_on s D\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by (fastforce simp add: C1_differentiable_on_def has_vector_derivative_def)"], ["proof (state)\nthis:\n  \\<forall>x\\<in>s. (f has_derivative (\\<lambda>z. z *\\<^sub>R D x)) (at x)\n  continuous_on s D\n\ngoal (1 subgoal):\n 1. (\\<lambda>x. f x \\<bullet> b) C1_differentiable_on s", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>x. f x \\<bullet> b) C1_differentiable_on s", "proof (simp add: C1_differentiable_on_def has_vector_derivative_def, intro exI conjI)"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<forall>x\\<in>s.\n       ((\\<lambda>x. f x \\<bullet> b) has_derivative\n        (\\<lambda>xa. xa * ?D6 x))\n        (at x)\n 2. continuous_on s ?D6", "show \"continuous_on s (\\<lambda>x. D x \\<bullet> b)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. continuous_on s (\\<lambda>x. D x \\<bullet> b)", "using D continuous_on_componentwise assms(1)"], ["proof (prove)\nusing this:\n  \\<forall>x\\<in>s. (f has_derivative (\\<lambda>z. z *\\<^sub>R D x)) (at x)\n  continuous_on s D\n  continuous_on ?S ?f =\n  (\\<forall>i\\<in>Basis. continuous_on ?S (\\<lambda>x. ?f x \\<bullet> i))\n  b \\<in> Basis\n\ngoal (1 subgoal):\n 1. continuous_on s (\\<lambda>x. D x \\<bullet> b)", "by fastforce"], ["proof (state)\nthis:\n  continuous_on s (\\<lambda>x. D x \\<bullet> b)\n\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>s.\n       ((\\<lambda>x. f x \\<bullet> b) has_derivative\n        (\\<lambda>xa. xa * (D x \\<bullet> b)))\n        (at x)", "show \"(\\<forall>x\\<in>s. ((\\<lambda>x. f x \\<bullet> b) has_derivative (\\<lambda>y. y * (\\<lambda>x. D x \\<bullet> b) x)) (at x))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>s.\n       ((\\<lambda>x. f x \\<bullet> b) has_derivative\n        (\\<lambda>y. y * (D x \\<bullet> b)))\n        (at x)", "using has_derivative_inner_left D(1)"], ["proof (prove)\nusing this:\n  (?g has_derivative ?g') ?F \\<Longrightarrow>\n  ((\\<lambda>x. ?g x \\<bullet> ?b) has_derivative\n   (\\<lambda>x. ?g' x \\<bullet> ?b))\n   ?F\n  \\<forall>x\\<in>s. (f has_derivative (\\<lambda>z. z *\\<^sub>R D x)) (at x)\n\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>s.\n       ((\\<lambda>x. f x \\<bullet> b) has_derivative\n        (\\<lambda>y. y * (D x \\<bullet> b)))\n        (at x)", "by fastforce"], ["proof (state)\nthis:\n  \\<forall>x\\<in>s.\n     ((\\<lambda>x. f x \\<bullet> b) has_derivative\n      (\\<lambda>y. y * (D x \\<bullet> b)))\n      (at x)\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  (\\<lambda>x. f x \\<bullet> b) C1_differentiable_on s\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma eq_smooth:\n  assumes \"0 < d\"\n    \"\\<forall>x\\<in>s. \\<forall>y. dist x y < d \\<longrightarrow> f y = g y\" (*This crappy condition cannot be loosened :( *)\n    \"f C1_differentiable_on s\"\n  shows \"g C1_differentiable_on s\""], ["proof (prove)\ngoal (1 subgoal):\n 1. g C1_differentiable_on s", "proof (simp add: C1_differentiable_on_def)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<exists>D.\n       (\\<forall>x\\<in>s. (g has_vector_derivative D x) (at x)) \\<and>\n       continuous_on s D", "obtain D where D: \"(\\<forall>x\\<in>s. (f has_vector_derivative D x) (at x)) \\<and> continuous_on s D\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>D.\n        (\\<forall>x\\<in>s. (f has_vector_derivative D x) (at x)) \\<and>\n        continuous_on s D \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "using assms"], ["proof (prove)\nusing this:\n  0 < d\n  \\<forall>x\\<in>s. \\<forall>y. dist x y < d \\<longrightarrow> f y = g y\n  f C1_differentiable_on s\n\ngoal (1 subgoal):\n 1. (\\<And>D.\n        (\\<forall>x\\<in>s. (f has_vector_derivative D x) (at x)) \\<and>\n        continuous_on s D \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by (auto simp add: C1_differentiable_on_def)"], ["proof (state)\nthis:\n  (\\<forall>x\\<in>s. (f has_vector_derivative D x) (at x)) \\<and>\n  continuous_on s D\n\ngoal (1 subgoal):\n 1. \\<exists>D.\n       (\\<forall>x\\<in>s. (g has_vector_derivative D x) (at x)) \\<and>\n       continuous_on s D", "then"], ["proof (chain)\npicking this:\n  (\\<forall>x\\<in>s. (f has_vector_derivative D x) (at x)) \\<and>\n  continuous_on s D", "have f: \"(\\<forall>x\\<in>s. (g has_vector_derivative D x) (at x))\""], ["proof (prove)\nusing this:\n  (\\<forall>x\\<in>s. (f has_vector_derivative D x) (at x)) \\<and>\n  continuous_on s D\n\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>s. (g has_vector_derivative D x) (at x)", "using assms(1-2)"], ["proof (prove)\nusing this:\n  (\\<forall>x\\<in>s. (f has_vector_derivative D x) (at x)) \\<and>\n  continuous_on s D\n  0 < d\n  \\<forall>x\\<in>s. \\<forall>y. dist x y < d \\<longrightarrow> f y = g y\n\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>s. (g has_vector_derivative D x) (at x)", "by (metis dist_commute has_vector_derivative_transform_at)"], ["proof (state)\nthis:\n  \\<forall>x\\<in>s. (g has_vector_derivative D x) (at x)\n\ngoal (1 subgoal):\n 1. \\<exists>D.\n       (\\<forall>x\\<in>s. (g has_vector_derivative D x) (at x)) \\<and>\n       continuous_on s D", "have \"(\\<forall>x\\<in>s. (g has_vector_derivative D x) (at x)) \\<and> continuous_on s D\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<forall>x\\<in>s. (g has_vector_derivative D x) (at x)) \\<and>\n    continuous_on s D", "using D f"], ["proof (prove)\nusing this:\n  (\\<forall>x\\<in>s. (f has_vector_derivative D x) (at x)) \\<and>\n  continuous_on s D\n  \\<forall>x\\<in>s. (g has_vector_derivative D x) (at x)\n\ngoal (1 subgoal):\n 1. (\\<forall>x\\<in>s. (g has_vector_derivative D x) (at x)) \\<and>\n    continuous_on s D", "by auto"], ["proof (state)\nthis:\n  (\\<forall>x\\<in>s. (g has_vector_derivative D x) (at x)) \\<and>\n  continuous_on s D\n\ngoal (1 subgoal):\n 1. \\<exists>D.\n       (\\<forall>x\\<in>s. (g has_vector_derivative D x) (at x)) \\<and>\n       continuous_on s D", "then"], ["proof (chain)\npicking this:\n  (\\<forall>x\\<in>s. (g has_vector_derivative D x) (at x)) \\<and>\n  continuous_on s D", "show \"\\<exists>D. (\\<forall>x\\<in>s. (g has_vector_derivative D x) (at x)) \\<and> continuous_on s D\""], ["proof (prove)\nusing this:\n  (\\<forall>x\\<in>s. (g has_vector_derivative D x) (at x)) \\<and>\n  continuous_on s D\n\ngoal (1 subgoal):\n 1. \\<exists>D.\n       (\\<forall>x\\<in>s. (g has_vector_derivative D x) (at x)) \\<and>\n       continuous_on s D", "by metis"], ["proof (state)\nthis:\n  \\<exists>D.\n     (\\<forall>x\\<in>s. (g has_vector_derivative D x) (at x)) \\<and>\n     continuous_on s D\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma eq_pw_smooth:\n  assumes \"0 < d\"\n    \"\\<forall>x\\<in>s. \\<forall>y. dist x y < d \\<longrightarrow> f y = g y\" (*This crappy condition cannot be loosened :( *)\n    \"\\<forall>x\\<in>s. f x = g x\"\n    \"f piecewise_C1_differentiable_on s\"\n  shows \"g piecewise_C1_differentiable_on s\""], ["proof (prove)\ngoal (1 subgoal):\n 1. g piecewise_C1_differentiable_on s", "proof (simp add: piecewise_C1_differentiable_on_def)"], ["proof (state)\ngoal (1 subgoal):\n 1. continuous_on s g \\<and>\n    (\\<exists>S. finite S \\<and> g C1_differentiable_on s - S)", "have g_cont: \"continuous_on s g\""], ["proof (prove)\ngoal (1 subgoal):\n 1. continuous_on s g", "using assms piecewise_C1_differentiable_const"], ["proof (prove)\nusing this:\n  0 < d\n  \\<forall>x\\<in>s. \\<forall>y. dist x y < d \\<longrightarrow> f y = g y\n  \\<forall>x\\<in>s. f x = g x\n  f piecewise_C1_differentiable_on s\n  (\\<lambda>x. ?c) piecewise_C1_differentiable_on ?s\n\ngoal (1 subgoal):\n 1. continuous_on s g", "by (simp add: piecewise_C1_differentiable_on_def)"], ["proof (state)\nthis:\n  continuous_on s g\n\ngoal (1 subgoal):\n 1. continuous_on s g \\<and>\n    (\\<exists>S. finite S \\<and> g C1_differentiable_on s - S)", "obtain t where t: \"finite t \\<and> f C1_differentiable_on s - t\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>t.\n        finite t \\<and> f C1_differentiable_on s - t \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "using assms"], ["proof (prove)\nusing this:\n  0 < d\n  \\<forall>x\\<in>s. \\<forall>y. dist x y < d \\<longrightarrow> f y = g y\n  \\<forall>x\\<in>s. f x = g x\n  f piecewise_C1_differentiable_on s\n\ngoal (1 subgoal):\n 1. (\\<And>t.\n        finite t \\<and> f C1_differentiable_on s - t \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by (auto simp add: piecewise_C1_differentiable_on_def)"], ["proof (state)\nthis:\n  finite t \\<and> f C1_differentiable_on s - t\n\ngoal (1 subgoal):\n 1. continuous_on s g \\<and>\n    (\\<exists>S. finite S \\<and> g C1_differentiable_on s - S)", "then"], ["proof (chain)\npicking this:\n  finite t \\<and> f C1_differentiable_on s - t", "have \"g C1_differentiable_on s - t\""], ["proof (prove)\nusing this:\n  finite t \\<and> f C1_differentiable_on s - t\n\ngoal (1 subgoal):\n 1. g C1_differentiable_on s - t", "using assms eq_smooth"], ["proof (prove)\nusing this:\n  finite t \\<and> f C1_differentiable_on s - t\n  0 < d\n  \\<forall>x\\<in>s. \\<forall>y. dist x y < d \\<longrightarrow> f y = g y\n  \\<forall>x\\<in>s. f x = g x\n  f piecewise_C1_differentiable_on s\n  \\<lbrakk>0 < ?d;\n   \\<forall>x\\<in>?s.\n      \\<forall>y. dist x y < ?d \\<longrightarrow> ?f y = ?g y;\n   ?f C1_differentiable_on ?s\\<rbrakk>\n  \\<Longrightarrow> ?g C1_differentiable_on ?s\n\ngoal (1 subgoal):\n 1. g C1_differentiable_on s - t", "by blast"], ["proof (state)\nthis:\n  g C1_differentiable_on s - t\n\ngoal (1 subgoal):\n 1. continuous_on s g \\<and>\n    (\\<exists>S. finite S \\<and> g C1_differentiable_on s - S)", "then"], ["proof (chain)\npicking this:\n  g C1_differentiable_on s - t", "show \"continuous_on s g \\<and> (\\<exists>t. finite t \\<and> g C1_differentiable_on s - t)\""], ["proof (prove)\nusing this:\n  g C1_differentiable_on s - t\n\ngoal (1 subgoal):\n 1. continuous_on s g \\<and>\n    (\\<exists>t. finite t \\<and> g C1_differentiable_on s - t)", "using t g_cont"], ["proof (prove)\nusing this:\n  g C1_differentiable_on s - t\n  finite t \\<and> f C1_differentiable_on s - t\n  continuous_on s g\n\ngoal (1 subgoal):\n 1. continuous_on s g \\<and>\n    (\\<exists>t. finite t \\<and> g C1_differentiable_on s - t)", "by metis"], ["proof (state)\nthis:\n  continuous_on s g \\<and>\n  (\\<exists>t. finite t \\<and> g C1_differentiable_on s - t)\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma scale_piecewise_C1_differentiable_on:\n  assumes \"f piecewise_C1_differentiable_on s\"\n  shows \"(\\<lambda>x. (c::real) * (f x)) piecewise_C1_differentiable_on s\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>x. c * f x) piecewise_C1_differentiable_on s", "proof (simp add: piecewise_C1_differentiable_on_def, intro conjI)"], ["proof (state)\ngoal (2 subgoals):\n 1. continuous_on s (\\<lambda>x. c * f x)\n 2. \\<exists>S.\n       finite S \\<and> (\\<lambda>x. c * f x) C1_differentiable_on s - S", "show \"continuous_on s (\\<lambda>x. c * f x)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. continuous_on s (\\<lambda>x. c * f x)", "using assms continuous_on_mult_left"], ["proof (prove)\nusing this:\n  f piecewise_C1_differentiable_on s\n  continuous_on ?s ?f \\<Longrightarrow>\n  continuous_on ?s (\\<lambda>x. ?c * ?f x)\n\ngoal (1 subgoal):\n 1. continuous_on s (\\<lambda>x. c * f x)", "by (auto simp add: piecewise_C1_differentiable_on_def)"], ["proof (state)\nthis:\n  continuous_on s (\\<lambda>x. c * f x)\n\ngoal (1 subgoal):\n 1. \\<exists>S.\n       finite S \\<and> (\\<lambda>x. c * f x) C1_differentiable_on s - S", "show \"\\<exists>t. finite t \\<and> (\\<lambda>x. c * f x) C1_differentiable_on s - t\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>t.\n       finite t \\<and> (\\<lambda>x. c * f x) C1_differentiable_on s - t", "using assms continuous_on_mult_left"], ["proof (prove)\nusing this:\n  f piecewise_C1_differentiable_on s\n  continuous_on ?s ?f \\<Longrightarrow>\n  continuous_on ?s (\\<lambda>x. ?c * ?f x)\n\ngoal (1 subgoal):\n 1. \\<exists>t.\n       finite t \\<and> (\\<lambda>x. c * f x) C1_differentiable_on s - t", "by (auto simp add: piecewise_C1_differentiable_on_def)"], ["proof (state)\nthis:\n  \\<exists>t.\n     finite t \\<and> (\\<lambda>x. c * f x) C1_differentiable_on s - t\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma eq_smooth_gen:\n  assumes \"f C1_differentiable_on s\"\n    \"\\<forall>x. f x = g x\"\n  shows \"g C1_differentiable_on s\""], ["proof (prove)\ngoal (1 subgoal):\n 1. g C1_differentiable_on s", "using assms"], ["proof (prove)\nusing this:\n  f C1_differentiable_on s\n  \\<forall>x. f x = g x\n\ngoal (1 subgoal):\n 1. g C1_differentiable_on s", "unfolding C1_differentiable_on_def"], ["proof (prove)\nusing this:\n  \\<exists>D.\n     (\\<forall>x\\<in>s. (f has_vector_derivative D x) (at x)) \\<and>\n     continuous_on s D\n  \\<forall>x. f x = g x\n\ngoal (1 subgoal):\n 1. \\<exists>D.\n       (\\<forall>x\\<in>s. (g has_vector_derivative D x) (at x)) \\<and>\n       continuous_on s D", "by (metis (no_types, lifting) has_vector_derivative_weaken UNIV_I top_greatest)"], ["", "lemma subpath_compose:\n  shows \"(subpath a b \\<gamma>) = \\<gamma> o (\\<lambda>x.  (b - a) * x + a)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. subpath a b \\<gamma> = \\<gamma> \\<circ> (\\<lambda>x. (b - a) * x + a)", "by (auto simp add: subpath_def)"], ["", "lemma subpath_smooth:\n  assumes \"\\<gamma> C1_differentiable_on {0..1}\" \"0 \\<le> a\" \"a < b\" \"b \\<le> 1\"\n  shows \"(subpath a b \\<gamma>) C1_differentiable_on {0..1}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. subpath a b \\<gamma> C1_differentiable_on {0..1}", "proof-"], ["proof (state)\ngoal (1 subgoal):\n 1. subpath a b \\<gamma> C1_differentiable_on {0..1}", "have \"\\<gamma> C1_differentiable_on {a..b}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<gamma> C1_differentiable_on {a..b}", "apply (rule C1_differentiable_on_subset)"], ["proof (prove)\ngoal (2 subgoals):\n 1. \\<gamma> C1_differentiable_on ?T\n 2. {a..b} \\<subseteq> ?T", "using assms"], ["proof (prove)\nusing this:\n  \\<gamma> C1_differentiable_on {0..1}\n  0 \\<le> a\n  a < b\n  b \\<le> 1\n\ngoal (2 subgoals):\n 1. \\<gamma> C1_differentiable_on ?T\n 2. {a..b} \\<subseteq> ?T", "by auto"], ["proof (state)\nthis:\n  \\<gamma> C1_differentiable_on {a..b}\n\ngoal (1 subgoal):\n 1. subpath a b \\<gamma> C1_differentiable_on {0..1}", "then"], ["proof (chain)\npicking this:\n  \\<gamma> C1_differentiable_on {a..b}", "have \"\\<gamma> C1_differentiable_on (\\<lambda>x. (b - a) * x + a) ` {0..1}\""], ["proof (prove)\nusing this:\n  \\<gamma> C1_differentiable_on {a..b}\n\ngoal (1 subgoal):\n 1. \\<gamma> C1_differentiable_on (\\<lambda>x. (b - a) * x + a) ` {0..1}", "using \\<open>a < b\\<close> closed_segment_eq_real_ivl closed_segment_real_eq"], ["proof (prove)\nusing this:\n  \\<gamma> C1_differentiable_on {a..b}\n  a < b\n  closed_segment ?a ?b = (if ?a \\<le> ?b then {?a..?b} else {?b..?a})\n  closed_segment ?u ?v = (\\<lambda>x. (?v - ?u) * x + ?u) ` {0..1}\n\ngoal (1 subgoal):\n 1. \\<gamma> C1_differentiable_on (\\<lambda>x. (b - a) * x + a) ` {0..1}", "by auto"], ["proof (state)\nthis:\n  \\<gamma> C1_differentiable_on (\\<lambda>x. (b - a) * x + a) ` {0..1}\n\ngoal (1 subgoal):\n 1. subpath a b \\<gamma> C1_differentiable_on {0..1}", "moreover"], ["proof (state)\nthis:\n  \\<gamma> C1_differentiable_on (\\<lambda>x. (b - a) * x + a) ` {0..1}\n\ngoal (1 subgoal):\n 1. subpath a b \\<gamma> C1_differentiable_on {0..1}", "have \"finite ({0..1} \\<inter> (\\<lambda>x. (b - a) * x + a) -` {x})\" for x"], ["proof (prove)\ngoal (1 subgoal):\n 1. finite ({0..1} \\<inter> (\\<lambda>x. (b - a) * x + a) -` {x})", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. finite ({0..1} \\<inter> (\\<lambda>x. (b - a) * x + a) -` {x})", "have \"((\\<lambda>x. (b - a) * x + a) -` {x}) = {(x -a) /(b-a)}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>x. (b - a) * x + a) -` {x} = {(x - a) / (b - a)}", "using assms"], ["proof (prove)\nusing this:\n  \\<gamma> C1_differentiable_on {0..1}\n  0 \\<le> a\n  a < b\n  b \\<le> 1\n\ngoal (1 subgoal):\n 1. (\\<lambda>x. (b - a) * x + a) -` {x} = {(x - a) / (b - a)}", "by (auto simp add: divide_simps)"], ["proof (state)\nthis:\n  (\\<lambda>x. (b - a) * x + a) -` {x} = {(x - a) / (b - a)}\n\ngoal (1 subgoal):\n 1. finite ({0..1} \\<inter> (\\<lambda>x. (b - a) * x + a) -` {x})", "then"], ["proof (chain)\npicking this:\n  (\\<lambda>x. (b - a) * x + a) -` {x} = {(x - a) / (b - a)}", "show ?thesis"], ["proof (prove)\nusing this:\n  (\\<lambda>x. (b - a) * x + a) -` {x} = {(x - a) / (b - a)}\n\ngoal (1 subgoal):\n 1. finite ({0..1} \\<inter> (\\<lambda>x. (b - a) * x + a) -` {x})", "by auto"], ["proof (state)\nthis:\n  finite ({0..1} \\<inter> (\\<lambda>x. (b - a) * x + a) -` {x})\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  finite ({0..1} \\<inter> (\\<lambda>x. (b - a) * x + a) -` {?x})\n\ngoal (1 subgoal):\n 1. subpath a b \\<gamma> C1_differentiable_on {0..1}", "ultimately"], ["proof (chain)\npicking this:\n  \\<gamma> C1_differentiable_on (\\<lambda>x. (b - a) * x + a) ` {0..1}\n  finite ({0..1} \\<inter> (\\<lambda>x. (b - a) * x + a) -` {?x})", "show ?thesis"], ["proof (prove)\nusing this:\n  \\<gamma> C1_differentiable_on (\\<lambda>x. (b - a) * x + a) ` {0..1}\n  finite ({0..1} \\<inter> (\\<lambda>x. (b - a) * x + a) -` {?x})\n\ngoal (1 subgoal):\n 1. subpath a b \\<gamma> C1_differentiable_on {0..1}", "by (force simp add: subpath_compose intro: C1_differentiable_compose derivative_intros)"], ["proof (state)\nthis:\n  subpath a b \\<gamma> C1_differentiable_on {0..1}\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma has_vector_derivative_divide[derivative_intros]:\n  fixes a :: \"'a::real_normed_field\"\n  shows \"(f has_vector_derivative x) F \\<Longrightarrow> ((\\<lambda>x. f x / a) has_vector_derivative (x / a)) F\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (f has_vector_derivative x) F \\<Longrightarrow>\n    ((\\<lambda>x. f x / a) has_vector_derivative x / a) F", "unfolding divide_inverse"], ["proof (prove)\ngoal (1 subgoal):\n 1. (f has_vector_derivative x) F \\<Longrightarrow>\n    ((\\<lambda>x. f x * inverse a) has_vector_derivative x * inverse a) F", "by (fact has_vector_derivative_mult_left)"], ["", "end"]]}