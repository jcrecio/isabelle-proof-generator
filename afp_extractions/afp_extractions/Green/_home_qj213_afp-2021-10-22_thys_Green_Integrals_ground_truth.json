{"file_name": "/home/qj213/afp-2021-10-22/thys/Green/Integrals.thy", "working_directory": "/home/qj213/afp-2021-10-22/thys/Green", "problem_names": ["lemma gauge_integral_Fubini_universe_x:\n  fixes f :: \"('a::euclidean_space * 'b::euclidean_space) \\<Rightarrow> 'c::euclidean_space\"\n  assumes fun_lesbegue_integrable: \"integrable lborel f\" and\n    x_axis_integral_measurable: \"(\\<lambda>x. integral UNIV (\\<lambda>y. f(x, y))) \\<in> borel_measurable lborel\"\n  shows \"integral UNIV f = integral UNIV (\\<lambda>x. integral UNIV (\\<lambda>y. f(x,y)))\"\n    \"(\\<lambda>x. integral UNIV (\\<lambda>y. f(x,y))) integrable_on UNIV\"", "lemma gauge_integral_Fubini_universe_y:\n  fixes f :: \"('a::euclidean_space * 'b::euclidean_space) \\<Rightarrow> 'c::euclidean_space\"\n  assumes fun_lesbegue_integrable: \"integrable lborel f\" and\n    y_axis_integral_measurable: \"(\\<lambda>x. integral UNIV (\\<lambda>y. f(y, x))) \\<in> borel_measurable lborel\"\n  shows \"integral UNIV f = integral UNIV (\\<lambda>x. integral UNIV (\\<lambda>y. f(y, x)))\"\n    \"(\\<lambda>x. integral UNIV (\\<lambda>y. f(y, x))) integrable_on UNIV\"", "lemma gauge_integral_Fubini_curve_bounded_region_x:\n  fixes f g :: \"('a::euclidean_space * 'b::euclidean_space) \\<Rightarrow> 'c::euclidean_space\" and\n    g1 g2:: \"'a \\<Rightarrow> 'b\" and\n    s:: \"('a * 'b) set\"\n  assumes fun_lesbegue_integrable: \"integrable lborel f\" and\n    x_axis_gauge_integrable: \"\\<And>x. (\\<lambda>y. f(x, y)) integrable_on UNIV\" and\n    (*IS THIS redundant? NO IT IS NOT*)\n    x_axis_integral_measurable: \"(\\<lambda>x. integral UNIV (\\<lambda>y. f(x, y))) \\<in> borel_measurable lborel\" and\n    f_is_g_indicator: \"f = (\\<lambda>x. if x \\<in> s then g x else 0)\" and\n    s_is_bounded_by_g1_and_g2: \"s = {(x,y). (\\<forall>i\\<in>Basis. a \\<bullet> i \\<le> x \\<bullet> i \\<and> x \\<bullet> i \\<le> b \\<bullet> i) \\<and>\n                                      (\\<forall>i\\<in>Basis. (g1 x) \\<bullet> i \\<le> y \\<bullet> i \\<and> y \\<bullet> i \\<le> (g2 x) \\<bullet> i)}\"\n  shows \"integral s g = integral (cbox a b) (\\<lambda>x. integral (cbox (g1 x) (g2 x)) (\\<lambda>y. g(x,y)))\"", "lemma gauge_integral_Fubini_curve_bounded_region_y:\n  fixes f g :: \"('a::euclidean_space * 'b::euclidean_space) \\<Rightarrow> 'c::euclidean_space\" and\n    g1 g2:: \"'b \\<Rightarrow> 'a\" and\n    s:: \"('a * 'b) set\"\n  assumes fun_lesbegue_integrable: \"integrable lborel f\" and\n    y_axis_gauge_integrable: \"\\<And>x. (\\<lambda>y. f(y, x)) integrable_on UNIV\" and\n    (*IS THIS redundant? NO IT IS NOT*)\n    y_axis_integral_measurable: \"(\\<lambda>x. integral UNIV (\\<lambda>y. f(y, x))) \\<in> borel_measurable lborel\" and\n    f_is_g_indicator: \"f = (\\<lambda>x. if x \\<in> s then g x else 0)\" and\n    s_is_bounded_by_g1_and_g2: \"s = {(y, x). (\\<forall>i\\<in>Basis. a \\<bullet> i \\<le> x \\<bullet> i \\<and> x \\<bullet> i \\<le> b \\<bullet> i) \\<and>\n                                                   (\\<forall>i\\<in>Basis. (g1 x) \\<bullet> i \\<le> y \\<bullet> i \\<and> y \\<bullet> i \\<le> (g2 x) \\<bullet> i)}\"\n  shows \"integral s g = integral (cbox a b) (\\<lambda>x. integral (cbox (g1 x) (g2 x)) (\\<lambda>y. g(y, x)))\"", "lemma gauge_integral_by_substitution:\n  fixes f::\"(real \\<Rightarrow> real)\" and\n    g::\"(real \\<Rightarrow> real)\" and\n    g'::\"real \\<Rightarrow> real\" and\n    a::\"real\" and\n    b::\"real\"\n  assumes a_le_b: \"a \\<le> b\" and\n    ga_le_gb: \"g a \\<le> g b\" and\n    g'_derivative: \"\\<forall>x \\<in> {a..b}. (g has_vector_derivative (g' x)) (at x within {a..b})\" and\n    g'_continuous: \"continuous_on {a..b} g'\" and\n    f_continuous: \"continuous_on (g ` {a..b}) f\"\n  shows \"integral {g a..g b} (f) = integral {a..b} (\\<lambda>x. f(g x) * (g' x))\"", "lemma frontier_ic:\n  assumes \"a < (b::real)\"\n  shows \"frontier {a<..b}  = {a,b}\"", "lemma frontier_ci:\n  assumes \"a < (b::real)\"\n  shows \"frontier {a<..<b}  = {a,b}\"", "lemma ic_not_closed:\n  assumes \"a < (b::real)\"\n  shows \"\\<not> closed {a<..b}\"", "lemma closure_ic_union_ci:\n  assumes \"a < (b::real)\" \"b < c\"\n  shows \"closure ({a..<b} \\<union> {b<..c})  = {a .. c}\"", "lemma interior_ic_ci_union:\n  assumes \"a < (b::real)\" \"b < c\"\n  shows \"b \\<notin> (interior ({a..<b} \\<union> {b<..c}))\"", "lemma frontier_ic_union_ci:\n  assumes \"a < (b::real)\" \"b < c\"\n  shows \"b \\<in> frontier ({a..<b} \\<union> {b<..c})\"", "lemma ic_union_ci_not_closed:\n  assumes \"a < (b::real)\" \"b < c\"\n  shows \"\\<not> closed ({a..<b} \\<union> {b<..c})\"", "lemma integrable_continuous_:\n  fixes f :: \"'b::euclidean_space \\<Rightarrow> 'a::banach\"\n  assumes \"continuous_on (cbox a b) f\"\n  shows \"f integrable_on cbox a b\"", "lemma removing_singletons_from_div:\n  assumes   \"\\<forall>t\\<in>S. \\<exists>c d::real. c < d \\<and> {c..d} = t\"\n    \"{x} \\<union> \\<Union>S = {a..b}\" \"a < x\" \"x < b\"\n    \"finite S\"\n  shows \"\\<exists>t\\<in>S. x \\<in> t\"", "lemma remove_singleton_from_division_of:(*By Manuel Eberl*)\n  assumes \"A division_of {a::real..b}\" \"a < b\"\n  assumes \"x \\<in> {a..b}\"\n  shows   \"\\<exists>c d. c < d \\<and> {c..d} \\<in> A \\<and> x \\<in> {c..d}\"", "lemma remove_singleton_from_tagged_division_of:\n  assumes \"A tagged_division_of {a::real..b}\" \"a < b\"\n  assumes \"x \\<in> {a..b}\"\n  shows   \"\\<exists>k c d. c < d \\<and> (k, {c..d}) \\<in> A \\<and> x \\<in> {c..d}\"", "lemma tagged_div_wo_singlestons:\n  assumes \"p tagged_division_of {a::real..b}\" \"a < b\"\n  shows \"(p - {xk. \\<exists>x y. xk = (x,{y})}) tagged_division_of cbox a b\"", "lemma tagged_div_wo_empty:\n  assumes \"p tagged_division_of {a::real..b}\" \"a < b\"\n  shows \"(p - {xk. \\<exists>x. xk = (x,{})}) tagged_division_of cbox a b\"", "lemma fine_diff:\n  assumes \"\\<gamma> fine p\"\n  shows \"\\<gamma> fine (p - s)\"", "lemma tagged_div_tage_notin_set:\n  assumes \"finite (s::real set)\"\n    \"p tagged_division_of {a..b}\"\n    \"\\<gamma> fine p\" \"(\\<forall>(x, K)\\<in>p. \\<exists>c d::real. c < d \\<and> K = {c..d})\" \"gauge \\<gamma>\"\n  shows \"\\<exists>p' \\<gamma>'. p' tagged_division_of {a..b} \\<and>\n                  \\<gamma>' fine p' \\<and> (\\<forall>(x, K)\\<in>p'. x \\<notin> s) \\<and> gauge \\<gamma>'\"", "lemma has_integral_bound_spike_finite:\n  fixes f :: \"'a::euclidean_space \\<Rightarrow> 'b::real_normed_vector\"\n  assumes \"0 \\<le> B\" and \"finite S\"\n    and f: \"(f has_integral i) (cbox a b)\"\n    and leB: \"\\<And>x. x \\<in> cbox a b - S \\<Longrightarrow> norm (f x) \\<le> B\"\n  shows \"norm i \\<le> B * content (cbox a b)\"", "lemma has_integral_bound_:\n  fixes f :: \"real \\<Rightarrow> 'a::real_normed_vector\"\n  assumes \"a < b\"\n    and \"0 \\<le> B\"\n    and f: \"(f has_integral i) (cbox a b)\"\n    and \"finite s\"\n    and \"\\<forall>x\\<in>(cbox a b)-s. norm (f x) \\<le> B\"\n  shows \"norm i \\<le> B * content (cbox a b)\"", "lemma integral_has_vector_derivative_continuous_at':\n  fixes f :: \"real \\<Rightarrow> 'a::banach\"\n  assumes \"finite s\"\n    and f: \"f integrable_on {a..b}\"\n    and x: \"x \\<in> {a..b} - s\"\n    and fx: \"continuous (at x within ({a..b} - s)) f\"\n  shows \"((\\<lambda>u. integral {a..u} f) has_vector_derivative f x) (at x within ({a..b} - s))\"", "lemma integral_has_vector_derivative':\n  fixes f :: \"real \\<Rightarrow> 'a::banach\"\n  assumes \"finite s\"\n    \"f integrable_on {a..b}\"\n    \"x \\<in> {a..b} - s\"\n    \"continuous (at x within {a..b} - s) f\"\n  shows \"((\\<lambda>u. integral {a .. u} f) has_vector_derivative f(x)) (at x within {a .. b} - s)\"", "lemma fundamental_theorem_of_calculus_interior_stronger:\n  fixes f :: \"real \\<Rightarrow> 'a::banach\"\n  assumes \"finite S\"\n    and \"a \\<le> b\" \"\\<And>x. x \\<in> {a <..< b} - S \\<Longrightarrow> (f has_vector_derivative f'(x)) (at x)\"\n    and \"continuous_on {a .. b} f\"\n  shows \"(f' has_integral (f b - f a)) {a .. b}\"", "lemma at_within_closed_interval_finite:\n  fixes x::real\n  assumes \"a < x\" \"x < b\" \"x \\<notin> S\" \"finite S\"\n  shows \"(at x within {a..b} - S) = at x\"", "lemma at_within_cbox_finite:\n  assumes \"x \\<in> box a b\" \"x \\<notin> S\" \"finite S\"\n  shows \"(at x within cbox a b - S) = at x\"", "lemma fundamental_theorem_of_calculus_interior_stronger':\n  fixes f :: \"real \\<Rightarrow> 'a::banach\"\n  assumes \"finite S\"\n    and \"a \\<le> b\" \"\\<And>x. x \\<in> {a <..< b} - S \\<Longrightarrow> (f has_vector_derivative f'(x)) (at x within {a..b} - S)\"\n    and \"continuous_on {a .. b} f\"\n  shows \"(f' has_integral (f b - f a)) {a .. b}\"", "lemma has_integral_substitution_general_:\n  fixes f :: \"real \\<Rightarrow> 'a::euclidean_space\" and g :: \"real \\<Rightarrow> real\"\n  assumes s: \"finite s\" and le: \"a \\<le> b\"\n    and subset: \"g ` {a..b} \\<subseteq> {c..d}\"\n    and f: \"f integrable_on {c..d}\" \"continuous_on ({c..d} - (g ` s)) f\"\n    (*and f [continuous_intros]: \"continuous_on {c..d} f\"*)\n    and g : \"continuous_on {a..b} g\" \"inj_on g ({a..b} \\<union> s)\"\n    and deriv [derivative_intros]:\n    \"\\<And>x. x \\<in> {a..b} - s \\<Longrightarrow> (g has_field_derivative g' x) (at x within {a..b})\"\n  shows \"((\\<lambda>x. g' x *\\<^sub>R f (g x)) has_integral (integral {g a..g b} f - integral {g b..g a} f)) {a..b}\"", "lemma has_integral_substitution_general__:\n  fixes f :: \"real \\<Rightarrow> 'a::euclidean_space\" and g :: \"real \\<Rightarrow> real\"\n  assumes s: \"finite s\" and le: \"a \\<le> b\" and s_subset: \"s \\<subseteq> {a..b}\"\n    and subset: \"g ` {a..b} \\<subseteq> {c..d}\"\n    and f: \"f integrable_on {c..d}\" \"continuous_on ({c..d} - (g ` s)) f\"\n    (*and f [continuous_intros]: \"continuous_on {c..d} f\"*)\n    and g : \"continuous_on {a..b} g\" \"inj_on g {a..b}\"\n    and deriv [derivative_intros]:\n    \"\\<And>x. x \\<in> {a..b} - s \\<Longrightarrow> (g has_field_derivative g' x) (at x within {a..b})\"\n  shows \"((\\<lambda>x. g' x *\\<^sub>R f (g x)) has_integral (integral {g a..g b} f - integral {g b..g a} f)) {a..b}\"", "lemma has_integral_substitution_general_':\n  fixes f :: \"real \\<Rightarrow> 'a::euclidean_space\" and g :: \"real \\<Rightarrow> real\"\n  assumes s: \"finite s\" and le: \"a \\<le> b\" and s': \"finite s'\"\n    and subset: \"g ` {a..b} \\<subseteq> {c..d}\"\n    and f: \"f integrable_on {c..d}\" \"continuous_on ({c..d} - s') f\"\n    and g : \"continuous_on {a..b} g\" \"\\<forall>x\\<in>s'. finite (g -` {x})\" \"surj_on s' g\" \"inj_on g ({a..b} \\<union> ((s \\<union> g -` s')))\"\n    and deriv [derivative_intros]:\n    \"\\<And>x. x \\<in> {a..b} - s \\<Longrightarrow> (g has_field_derivative g' x) (at x within {a..b})\"\n  shows \"((\\<lambda>x. g' x *\\<^sub>R f (g x)) has_integral (integral {g a..g b} f - integral {g b..g a} f)) {a..b}\""], "translations": [["", "lemma gauge_integral_Fubini_universe_x:\n  fixes f :: \"('a::euclidean_space * 'b::euclidean_space) \\<Rightarrow> 'c::euclidean_space\"\n  assumes fun_lesbegue_integrable: \"integrable lborel f\" and\n    x_axis_integral_measurable: \"(\\<lambda>x. integral UNIV (\\<lambda>y. f(x, y))) \\<in> borel_measurable lborel\"\n  shows \"integral UNIV f = integral UNIV (\\<lambda>x. integral UNIV (\\<lambda>y. f(x,y)))\"\n    \"(\\<lambda>x. integral UNIV (\\<lambda>y. f(x,y))) integrable_on UNIV\""], ["proof (prove)\ngoal (1 subgoal):\n 1. integral UNIV f =\n    integral UNIV (\\<lambda>x. integral UNIV (\\<lambda>y. f (x, y))) &&&\n    (\\<lambda>x. integral UNIV (\\<lambda>y. f (x, y))) integrable_on UNIV", "proof -"], ["proof (state)\ngoal (2 subgoals):\n 1. integral UNIV f =\n    integral UNIV (\\<lambda>x. integral UNIV (\\<lambda>y. f (x, y)))\n 2. (\\<lambda>x. integral UNIV (\\<lambda>y. f (x, y))) integrable_on UNIV", "have f_is_measurable: \"f \\<in> borel_measurable lborel\""], ["proof (prove)\ngoal (1 subgoal):\n 1. f \\<in> borel_measurable lborel", "using fun_lesbegue_integrable and borel_measurable_integrable"], ["proof (prove)\nusing this:\n  integrable lborel f\n  integrable ?M ?f \\<Longrightarrow> ?f \\<in> borel_measurable ?M\n\ngoal (1 subgoal):\n 1. f \\<in> borel_measurable lborel", "by auto"], ["proof (state)\nthis:\n  f \\<in> borel_measurable lborel\n\ngoal (2 subgoals):\n 1. integral UNIV f =\n    integral UNIV (\\<lambda>x. integral UNIV (\\<lambda>y. f (x, y)))\n 2. (\\<lambda>x. integral UNIV (\\<lambda>y. f (x, y))) integrable_on UNIV", "have fun_lborel_prod_integrable:\n    \"integrable (lborel \\<Otimes>\\<^sub>M lborel) f\""], ["proof (prove)\ngoal (1 subgoal):\n 1. integrable (lborel \\<Otimes>\\<^sub>M lborel) f", "using fun_lesbegue_integrable"], ["proof (prove)\nusing this:\n  integrable lborel f\n\ngoal (1 subgoal):\n 1. integrable (lborel \\<Otimes>\\<^sub>M lborel) f", "by (simp add: lborel_prod)"], ["proof (state)\nthis:\n  integrable (lborel \\<Otimes>\\<^sub>M lborel) f\n\ngoal (2 subgoals):\n 1. integral UNIV f =\n    integral UNIV (\\<lambda>x. integral UNIV (\\<lambda>y. f (x, y)))\n 2. (\\<lambda>x. integral UNIV (\\<lambda>y. f (x, y))) integrable_on UNIV", "then"], ["proof (chain)\npicking this:\n  integrable (lborel \\<Otimes>\\<^sub>M lborel) f", "have region_integral_is_one_twoD_integral:\n    \"LBINT x. LBINT y. f (x, y) = integral\\<^sup>L (lborel \\<Otimes>\\<^sub>M lborel) f\""], ["proof (prove)\nusing this:\n  integrable (lborel \\<Otimes>\\<^sub>M lborel) f\n\ngoal (1 subgoal):\n 1. LBINT x. LBINT y. f (x, y) =\n    integral\\<^sup>L (lborel \\<Otimes>\\<^sub>M lborel) f", "using lborel_pair.integral_fst'"], ["proof (prove)\nusing this:\n  integrable (lborel \\<Otimes>\\<^sub>M lborel) f\n  integrable (lborel \\<Otimes>\\<^sub>M lborel) ?f \\<Longrightarrow>\n  LBINT x. LBINT y. ?f (x, y) =\n  integral\\<^sup>L (lborel \\<Otimes>\\<^sub>M lborel) ?f\n\ngoal (1 subgoal):\n 1. LBINT x. LBINT y. f (x, y) =\n    integral\\<^sup>L (lborel \\<Otimes>\\<^sub>M lborel) f", "by auto"], ["proof (state)\nthis:\n  LBINT x. LBINT y. f (x, y) =\n  integral\\<^sup>L (lborel \\<Otimes>\\<^sub>M lborel) f\n\ngoal (2 subgoals):\n 1. integral UNIV f =\n    integral UNIV (\\<lambda>x. integral UNIV (\\<lambda>y. f (x, y)))\n 2. (\\<lambda>x. integral UNIV (\\<lambda>y. f (x, y))) integrable_on UNIV", "then"], ["proof (chain)\npicking this:\n  LBINT x. LBINT y. f (x, y) =\n  integral\\<^sup>L (lborel \\<Otimes>\\<^sub>M lborel) f", "have AE_one_D_integrals_eq: \"AE x in lborel. LBINT y. f (x, y) = integral UNIV (\\<lambda>y. f(x,y))\""], ["proof (prove)\nusing this:\n  LBINT x. LBINT y. f (x, y) =\n  integral\\<^sup>L (lborel \\<Otimes>\\<^sub>M lborel) f\n\ngoal (1 subgoal):\n 1. AE x in lborel. LBINT y. f (x, y) = integral UNIV (\\<lambda>y. f (x, y))", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. LBINT x. LBINT y. f (x, y) =\n    integral\\<^sup>L (lborel \\<Otimes>\\<^sub>M lborel) f \\<Longrightarrow>\n    AE x in lborel. LBINT y. f (x, y) = integral UNIV (\\<lambda>y. f (x, y))", "have \"AE x in lborel. integrable lborel (\\<lambda>y. f(x,y))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. AE x in lborel. integrable lborel (\\<lambda>y. f (x, y))", "using lborel_pair.AE_integrable_fst' and fun_lborel_prod_integrable"], ["proof (prove)\nusing this:\n  integrable (lborel \\<Otimes>\\<^sub>M lborel) ?f \\<Longrightarrow>\n  AE x in lborel. integrable lborel (\\<lambda>y. ?f (x, y))\n  integrable (lborel \\<Otimes>\\<^sub>M lborel) f\n\ngoal (1 subgoal):\n 1. AE x in lborel. integrable lborel (\\<lambda>y. f (x, y))", "by blast"], ["proof (state)\nthis:\n  AE x in lborel. integrable lborel (\\<lambda>y. f (x, y))\n\ngoal (1 subgoal):\n 1. LBINT x. LBINT y. f (x, y) =\n    integral\\<^sup>L (lborel \\<Otimes>\\<^sub>M lborel) f \\<Longrightarrow>\n    AE x in lborel. LBINT y. f (x, y) = integral UNIV (\\<lambda>y. f (x, y))", "then"], ["proof (chain)\npicking this:\n  AE x in lborel. integrable lborel (\\<lambda>y. f (x, y))", "show ?thesis"], ["proof (prove)\nusing this:\n  AE x in lborel. integrable lborel (\\<lambda>y. f (x, y))\n\ngoal (1 subgoal):\n 1. AE x in lborel. LBINT y. f (x, y) = integral UNIV (\\<lambda>y. f (x, y))", "using integral_lborel  and always_eventually\n        and AE_mp"], ["proof (prove)\nusing this:\n  AE x in lborel. integrable lborel (\\<lambda>y. f (x, y))\n  integrable lborel ?f \\<Longrightarrow>\n  integral UNIV ?f = integral\\<^sup>L lborel ?f\n  \\<forall>x. ?P x \\<Longrightarrow> eventually ?P ?F\n  \\<lbrakk>almost_everywhere ?M ?P;\n   AE x in ?M. ?P x \\<longrightarrow> ?Q x\\<rbrakk>\n  \\<Longrightarrow> almost_everywhere ?M ?Q\n\ngoal (1 subgoal):\n 1. AE x in lborel. LBINT y. f (x, y) = integral UNIV (\\<lambda>y. f (x, y))", "by fastforce"], ["proof (state)\nthis:\n  AE x in lborel. LBINT y. f (x, y) = integral UNIV (\\<lambda>y. f (x, y))\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  AE x in lborel. LBINT y. f (x, y) = integral UNIV (\\<lambda>y. f (x, y))\n\ngoal (2 subgoals):\n 1. integral UNIV f =\n    integral UNIV (\\<lambda>x. integral UNIV (\\<lambda>y. f (x, y)))\n 2. (\\<lambda>x. integral UNIV (\\<lambda>y. f (x, y))) integrable_on UNIV", "have one_D_integral_measurable:\n    \"(\\<lambda>x. LBINT y. f (x, y)) \\<in> borel_measurable lborel\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>x. LBINT y. f (x, y)) \\<in> borel_measurable lborel", "using f_is_measurable and lborel.borel_measurable_lebesgue_integral"], ["proof (prove)\nusing this:\n  f \\<in> borel_measurable lborel\n  (\\<lambda>(x, y). ?f x y)\n  \\<in> borel_measurable (?N \\<Otimes>\\<^sub>M lborel) \\<Longrightarrow>\n  (\\<lambda>x. integral\\<^sup>L lborel (?f x)) \\<in> borel_measurable ?N\n\ngoal (1 subgoal):\n 1. (\\<lambda>x. LBINT y. f (x, y)) \\<in> borel_measurable lborel", "by auto"], ["proof (state)\nthis:\n  (\\<lambda>x. LBINT y. f (x, y)) \\<in> borel_measurable lborel\n\ngoal (2 subgoals):\n 1. integral UNIV f =\n    integral UNIV (\\<lambda>x. integral UNIV (\\<lambda>y. f (x, y)))\n 2. (\\<lambda>x. integral UNIV (\\<lambda>y. f (x, y))) integrable_on UNIV", "then"], ["proof (chain)\npicking this:\n  (\\<lambda>x. LBINT y. f (x, y)) \\<in> borel_measurable lborel", "have second_lesbegue_integral_eq:\n    \"LBINT x. LBINT y. f (x, y) = LBINT x. (integral UNIV (\\<lambda>y. f(x,y)))\""], ["proof (prove)\nusing this:\n  (\\<lambda>x. LBINT y. f (x, y)) \\<in> borel_measurable lborel\n\ngoal (1 subgoal):\n 1. LBINT x. LBINT y. f (x, y) =\n    LBINT x. integral UNIV (\\<lambda>y. f (x, y))", "using x_axis_integral_measurable and integral_cong_AE and AE_one_D_integrals_eq"], ["proof (prove)\nusing this:\n  (\\<lambda>x. LBINT y. f (x, y)) \\<in> borel_measurable lborel\n  (\\<lambda>x. integral UNIV (\\<lambda>y. f (x, y)))\n  \\<in> borel_measurable lborel\n  \\<lbrakk>?f \\<in> borel_measurable ?M; ?g \\<in> borel_measurable ?M;\n   AE x in ?M. ?f x = ?g x\\<rbrakk>\n  \\<Longrightarrow> integral\\<^sup>L ?M ?f = integral\\<^sup>L ?M ?g\n  AE x in lborel. LBINT y. f (x, y) = integral UNIV (\\<lambda>y. f (x, y))\n\ngoal (1 subgoal):\n 1. LBINT x. LBINT y. f (x, y) =\n    LBINT x. integral UNIV (\\<lambda>y. f (x, y))", "by blast"], ["proof (state)\nthis:\n  LBINT x. LBINT y. f (x, y) = LBINT x. integral UNIV (\\<lambda>y. f (x, y))\n\ngoal (2 subgoals):\n 1. integral UNIV f =\n    integral UNIV (\\<lambda>x. integral UNIV (\\<lambda>y. f (x, y)))\n 2. (\\<lambda>x. integral UNIV (\\<lambda>y. f (x, y))) integrable_on UNIV", "have \"integrable lborel (\\<lambda>x. LBINT y. f (x, y))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. integrable lborel (\\<lambda>x. LBINT y. f (x, y))", "using fun_lborel_prod_integrable and lborel_pair.integrable_fst'"], ["proof (prove)\nusing this:\n  integrable (lborel \\<Otimes>\\<^sub>M lborel) f\n  integrable (lborel \\<Otimes>\\<^sub>M lborel) ?f \\<Longrightarrow>\n  integrable lborel (\\<lambda>x. LBINT y. ?f (x, y))\n\ngoal (1 subgoal):\n 1. integrable lborel (\\<lambda>x. LBINT y. f (x, y))", "by auto"], ["proof (state)\nthis:\n  integrable lborel (\\<lambda>x. LBINT y. f (x, y))\n\ngoal (2 subgoals):\n 1. integral UNIV f =\n    integral UNIV (\\<lambda>x. integral UNIV (\\<lambda>y. f (x, y)))\n 2. (\\<lambda>x. integral UNIV (\\<lambda>y. f (x, y))) integrable_on UNIV", "then"], ["proof (chain)\npicking this:\n  integrable lborel (\\<lambda>x. LBINT y. f (x, y))", "have oneD_gauge_integral_lesbegue_integrable:\n    \"integrable lborel (\\<lambda>x. integral UNIV (\\<lambda>y. f(x,y)))\""], ["proof (prove)\nusing this:\n  integrable lborel (\\<lambda>x. LBINT y. f (x, y))\n\ngoal (1 subgoal):\n 1. integrable lborel (\\<lambda>x. integral UNIV (\\<lambda>y. f (x, y)))", "using x_axis_integral_measurable and AE_one_D_integrals_eq and integrable_cong_AE_imp"], ["proof (prove)\nusing this:\n  integrable lborel (\\<lambda>x. LBINT y. f (x, y))\n  (\\<lambda>x. integral UNIV (\\<lambda>y. f (x, y)))\n  \\<in> borel_measurable lborel\n  AE x in lborel. LBINT y. f (x, y) = integral UNIV (\\<lambda>y. f (x, y))\n  \\<lbrakk>integrable ?M ?g; ?f \\<in> borel_measurable ?M;\n   AE x in ?M. ?g x = ?f x\\<rbrakk>\n  \\<Longrightarrow> integrable ?M ?f\n\ngoal (1 subgoal):\n 1. integrable lborel (\\<lambda>x. integral UNIV (\\<lambda>y. f (x, y)))", "by blast"], ["proof (state)\nthis:\n  integrable lborel (\\<lambda>x. integral UNIV (\\<lambda>y. f (x, y)))\n\ngoal (2 subgoals):\n 1. integral UNIV f =\n    integral UNIV (\\<lambda>x. integral UNIV (\\<lambda>y. f (x, y)))\n 2. (\\<lambda>x. integral UNIV (\\<lambda>y. f (x, y))) integrable_on UNIV", "then"], ["proof (chain)\npicking this:\n  integrable lborel (\\<lambda>x. integral UNIV (\\<lambda>y. f (x, y)))", "show one_D_gauge_integral_integrable:\n    \"(\\<lambda>x. integral UNIV (\\<lambda>y. f(x,y))) integrable_on UNIV\""], ["proof (prove)\nusing this:\n  integrable lborel (\\<lambda>x. integral UNIV (\\<lambda>y. f (x, y)))\n\ngoal (1 subgoal):\n 1. (\\<lambda>x. integral UNIV (\\<lambda>y. f (x, y))) integrable_on UNIV", "using integrable_on_lborel"], ["proof (prove)\nusing this:\n  integrable lborel (\\<lambda>x. integral UNIV (\\<lambda>y. f (x, y)))\n  integrable lborel ?f \\<Longrightarrow> ?f integrable_on UNIV\n\ngoal (1 subgoal):\n 1. (\\<lambda>x. integral UNIV (\\<lambda>y. f (x, y))) integrable_on UNIV", "by auto"], ["proof (state)\nthis:\n  (\\<lambda>x. integral UNIV (\\<lambda>y. f (x, y))) integrable_on UNIV\n\ngoal (1 subgoal):\n 1. integral UNIV f =\n    integral UNIV (\\<lambda>x. integral UNIV (\\<lambda>y. f (x, y)))", "have \"LBINT x. (integral UNIV (\\<lambda>y. f(x,y))) = integral UNIV (\\<lambda>x. integral UNIV (\\<lambda>y. f(x, y)))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. LBINT x. integral UNIV (\\<lambda>y. f (x, y)) =\n    integral UNIV (\\<lambda>x. integral UNIV (\\<lambda>y. f (x, y)))", "using integral_lborel oneD_gauge_integral_lesbegue_integrable"], ["proof (prove)\nusing this:\n  integrable lborel ?f \\<Longrightarrow>\n  integral UNIV ?f = integral\\<^sup>L lborel ?f\n  integrable lborel (\\<lambda>x. integral UNIV (\\<lambda>y. f (x, y)))\n\ngoal (1 subgoal):\n 1. LBINT x. integral UNIV (\\<lambda>y. f (x, y)) =\n    integral UNIV (\\<lambda>x. integral UNIV (\\<lambda>y. f (x, y)))", "by fastforce"], ["proof (state)\nthis:\n  LBINT x. integral UNIV (\\<lambda>y. f (x, y)) =\n  integral UNIV (\\<lambda>x. integral UNIV (\\<lambda>y. f (x, y)))\n\ngoal (1 subgoal):\n 1. integral UNIV f =\n    integral UNIV (\\<lambda>x. integral UNIV (\\<lambda>y. f (x, y)))", "then"], ["proof (chain)\npicking this:\n  LBINT x. integral UNIV (\\<lambda>y. f (x, y)) =\n  integral UNIV (\\<lambda>x. integral UNIV (\\<lambda>y. f (x, y)))", "have twoD_lesbeuge_eq_twoD_gauge:\n    \"LBINT x. LBINT y. f (x, y) = integral UNIV (\\<lambda>x. integral UNIV (\\<lambda>y. f(x, y)))\""], ["proof (prove)\nusing this:\n  LBINT x. integral UNIV (\\<lambda>y. f (x, y)) =\n  integral UNIV (\\<lambda>x. integral UNIV (\\<lambda>y. f (x, y)))\n\ngoal (1 subgoal):\n 1. LBINT x. LBINT y. f (x, y) =\n    integral UNIV (\\<lambda>x. integral UNIV (\\<lambda>y. f (x, y)))", "using second_lesbegue_integral_eq"], ["proof (prove)\nusing this:\n  LBINT x. integral UNIV (\\<lambda>y. f (x, y)) =\n  integral UNIV (\\<lambda>x. integral UNIV (\\<lambda>y. f (x, y)))\n  LBINT x. LBINT y. f (x, y) = LBINT x. integral UNIV (\\<lambda>y. f (x, y))\n\ngoal (1 subgoal):\n 1. LBINT x. LBINT y. f (x, y) =\n    integral UNIV (\\<lambda>x. integral UNIV (\\<lambda>y. f (x, y)))", "by auto"], ["proof (state)\nthis:\n  LBINT x. LBINT y. f (x, y) =\n  integral UNIV (\\<lambda>x. integral UNIV (\\<lambda>y. f (x, y)))\n\ngoal (1 subgoal):\n 1. integral UNIV f =\n    integral UNIV (\\<lambda>x. integral UNIV (\\<lambda>y. f (x, y)))", "then"], ["proof (chain)\npicking this:\n  LBINT x. LBINT y. f (x, y) =\n  integral UNIV (\\<lambda>x. integral UNIV (\\<lambda>y. f (x, y)))", "show \"integral UNIV f = integral UNIV (\\<lambda>x. integral UNIV (\\<lambda>y. f(x,y)))\""], ["proof (prove)\nusing this:\n  LBINT x. LBINT y. f (x, y) =\n  integral UNIV (\\<lambda>x. integral UNIV (\\<lambda>y. f (x, y)))\n\ngoal (1 subgoal):\n 1. integral UNIV f =\n    integral UNIV (\\<lambda>x. integral UNIV (\\<lambda>y. f (x, y)))", "using fun_lesbegue_integrable and integral_lborel and region_integral_is_one_twoD_integral"], ["proof (prove)\nusing this:\n  LBINT x. LBINT y. f (x, y) =\n  integral UNIV (\\<lambda>x. integral UNIV (\\<lambda>y. f (x, y)))\n  integrable lborel f\n  integrable lborel ?f \\<Longrightarrow>\n  integral UNIV ?f = integral\\<^sup>L lborel ?f\n  LBINT x. LBINT y. f (x, y) =\n  integral\\<^sup>L (lborel \\<Otimes>\\<^sub>M lborel) f\n\ngoal (1 subgoal):\n 1. integral UNIV f =\n    integral UNIV (\\<lambda>x. integral UNIV (\\<lambda>y. f (x, y)))", "by (metis lborel_prod)"], ["proof (state)\nthis:\n  integral UNIV f =\n  integral UNIV (\\<lambda>x. integral UNIV (\\<lambda>y. f (x, y)))\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma gauge_integral_Fubini_universe_y:\n  fixes f :: \"('a::euclidean_space * 'b::euclidean_space) \\<Rightarrow> 'c::euclidean_space\"\n  assumes fun_lesbegue_integrable: \"integrable lborel f\" and\n    y_axis_integral_measurable: \"(\\<lambda>x. integral UNIV (\\<lambda>y. f(y, x))) \\<in> borel_measurable lborel\"\n  shows \"integral UNIV f = integral UNIV (\\<lambda>x. integral UNIV (\\<lambda>y. f(y, x)))\"\n    \"(\\<lambda>x. integral UNIV (\\<lambda>y. f(y, x))) integrable_on UNIV\""], ["proof (prove)\ngoal (1 subgoal):\n 1. integral UNIV f =\n    integral UNIV (\\<lambda>x. integral UNIV (\\<lambda>y. f (y, x))) &&&\n    (\\<lambda>x. integral UNIV (\\<lambda>y. f (y, x))) integrable_on UNIV", "proof -"], ["proof (state)\ngoal (2 subgoals):\n 1. integral UNIV f =\n    integral UNIV (\\<lambda>x. integral UNIV (\\<lambda>y. f (y, x)))\n 2. (\\<lambda>x. integral UNIV (\\<lambda>y. f (y, x))) integrable_on UNIV", "have f_is_measurable: \"f \\<in> borel_measurable lborel\""], ["proof (prove)\ngoal (1 subgoal):\n 1. f \\<in> borel_measurable lborel", "using fun_lesbegue_integrable and borel_measurable_integrable"], ["proof (prove)\nusing this:\n  integrable lborel f\n  integrable ?M ?f \\<Longrightarrow> ?f \\<in> borel_measurable ?M\n\ngoal (1 subgoal):\n 1. f \\<in> borel_measurable lborel", "by auto"], ["proof (state)\nthis:\n  f \\<in> borel_measurable lborel\n\ngoal (2 subgoals):\n 1. integral UNIV f =\n    integral UNIV (\\<lambda>x. integral UNIV (\\<lambda>y. f (y, x)))\n 2. (\\<lambda>x. integral UNIV (\\<lambda>y. f (y, x))) integrable_on UNIV", "have fun_lborel_prod_integrable:\n    \"integrable (lborel \\<Otimes>\\<^sub>M lborel) f\""], ["proof (prove)\ngoal (1 subgoal):\n 1. integrable (lborel \\<Otimes>\\<^sub>M lborel) f", "using fun_lesbegue_integrable"], ["proof (prove)\nusing this:\n  integrable lborel f\n\ngoal (1 subgoal):\n 1. integrable (lborel \\<Otimes>\\<^sub>M lborel) f", "by (simp add: lborel_prod)"], ["proof (state)\nthis:\n  integrable (lborel \\<Otimes>\\<^sub>M lborel) f\n\ngoal (2 subgoals):\n 1. integral UNIV f =\n    integral UNIV (\\<lambda>x. integral UNIV (\\<lambda>y. f (y, x)))\n 2. (\\<lambda>x. integral UNIV (\\<lambda>y. f (y, x))) integrable_on UNIV", "then"], ["proof (chain)\npicking this:\n  integrable (lborel \\<Otimes>\\<^sub>M lborel) f", "have region_integral_is_one_twoD_integral:\n    \"LBINT x. LBINT y. f (y, x) = integral\\<^sup>L (lborel \\<Otimes>\\<^sub>M lborel) f\""], ["proof (prove)\nusing this:\n  integrable (lborel \\<Otimes>\\<^sub>M lborel) f\n\ngoal (1 subgoal):\n 1. LBINT x. LBINT y. f (y, x) =\n    integral\\<^sup>L (lborel \\<Otimes>\\<^sub>M lborel) f", "using lborel_pair.integral_fst'\n      f_is_measurable lborel_pair.integrable_product_swap lborel_pair.integral_fst lborel_pair.integral_product_swap lborel_prod"], ["proof (prove)\nusing this:\n  integrable (lborel \\<Otimes>\\<^sub>M lborel) f\n  integrable (lborel \\<Otimes>\\<^sub>M lborel) ?f \\<Longrightarrow>\n  LBINT x. LBINT y. ?f (x, y) =\n  integral\\<^sup>L (lborel \\<Otimes>\\<^sub>M lborel) ?f\n  f \\<in> borel_measurable lborel\n  integrable (lborel \\<Otimes>\\<^sub>M lborel) ?f \\<Longrightarrow>\n  integrable (lborel \\<Otimes>\\<^sub>M lborel) (\\<lambda>(x, y). ?f (y, x))\n  integrable (lborel \\<Otimes>\\<^sub>M lborel)\n   (\\<lambda>(x, y). ?f x y) \\<Longrightarrow>\n  LBINT x. integral\\<^sup>L lborel (?f x) =\n  LINT (x, y)|(lborel \\<Otimes>\\<^sub>M lborel). ?f x y\n  ?f \\<in> borel_measurable\n            (lborel \\<Otimes>\\<^sub>M lborel) \\<Longrightarrow>\n  LINT (x, y)|(lborel \\<Otimes>\\<^sub>M lborel). ?f (y, x) =\n  integral\\<^sup>L (lborel \\<Otimes>\\<^sub>M lborel) ?f\n  lborel \\<Otimes>\\<^sub>M lborel = lborel\n\ngoal (1 subgoal):\n 1. LBINT x. LBINT y. f (y, x) =\n    integral\\<^sup>L (lborel \\<Otimes>\\<^sub>M lborel) f", "by force"], ["proof (state)\nthis:\n  LBINT x. LBINT y. f (y, x) =\n  integral\\<^sup>L (lborel \\<Otimes>\\<^sub>M lborel) f\n\ngoal (2 subgoals):\n 1. integral UNIV f =\n    integral UNIV (\\<lambda>x. integral UNIV (\\<lambda>y. f (y, x)))\n 2. (\\<lambda>x. integral UNIV (\\<lambda>y. f (y, x))) integrable_on UNIV", "then"], ["proof (chain)\npicking this:\n  LBINT x. LBINT y. f (y, x) =\n  integral\\<^sup>L (lborel \\<Otimes>\\<^sub>M lborel) f", "have AE_one_D_integrals_eq: \"AE x in lborel. LBINT y. f (y, x) = integral UNIV (\\<lambda>y. f(y,x))\""], ["proof (prove)\nusing this:\n  LBINT x. LBINT y. f (y, x) =\n  integral\\<^sup>L (lborel \\<Otimes>\\<^sub>M lborel) f\n\ngoal (1 subgoal):\n 1. AE x in lborel. LBINT y. f (y, x) = integral UNIV (\\<lambda>y. f (y, x))", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. LBINT x. LBINT y. f (y, x) =\n    integral\\<^sup>L (lborel \\<Otimes>\\<^sub>M lborel) f \\<Longrightarrow>\n    AE x in lborel. LBINT y. f (y, x) = integral UNIV (\\<lambda>y. f (y, x))", "have \"AE x in lborel. integrable lborel (\\<lambda>y. f(y,x))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. AE x in lborel. integrable lborel (\\<lambda>y. f (y, x))", "using lborel_pair.AE_integrable_fst' and fun_lborel_prod_integrable\n        lborel_pair.AE_integrable_fst lborel_pair.integrable_product_swap"], ["proof (prove)\nusing this:\n  integrable (lborel \\<Otimes>\\<^sub>M lborel) ?f \\<Longrightarrow>\n  AE x in lborel. integrable lborel (\\<lambda>y. ?f (x, y))\n  integrable (lborel \\<Otimes>\\<^sub>M lborel) f\n  integrable (lborel \\<Otimes>\\<^sub>M lborel)\n   (\\<lambda>(x, y). ?f x y) \\<Longrightarrow>\n  AE x in lborel. integrable lborel (?f x)\n  integrable (lborel \\<Otimes>\\<^sub>M lborel) ?f \\<Longrightarrow>\n  integrable (lborel \\<Otimes>\\<^sub>M lborel) (\\<lambda>(x, y). ?f (y, x))\n\ngoal (1 subgoal):\n 1. AE x in lborel. integrable lborel (\\<lambda>y. f (y, x))", "by blast"], ["proof (state)\nthis:\n  AE x in lborel. integrable lborel (\\<lambda>y. f (y, x))\n\ngoal (1 subgoal):\n 1. LBINT x. LBINT y. f (y, x) =\n    integral\\<^sup>L (lborel \\<Otimes>\\<^sub>M lborel) f \\<Longrightarrow>\n    AE x in lborel. LBINT y. f (y, x) = integral UNIV (\\<lambda>y. f (y, x))", "then"], ["proof (chain)\npicking this:\n  AE x in lborel. integrable lborel (\\<lambda>y. f (y, x))", "show ?thesis"], ["proof (prove)\nusing this:\n  AE x in lborel. integrable lborel (\\<lambda>y. f (y, x))\n\ngoal (1 subgoal):\n 1. AE x in lborel. LBINT y. f (y, x) = integral UNIV (\\<lambda>y. f (y, x))", "using integral_lborel  and always_eventually\n        and AE_mp"], ["proof (prove)\nusing this:\n  AE x in lborel. integrable lborel (\\<lambda>y. f (y, x))\n  integrable lborel ?f \\<Longrightarrow>\n  integral UNIV ?f = integral\\<^sup>L lborel ?f\n  \\<forall>x. ?P x \\<Longrightarrow> eventually ?P ?F\n  \\<lbrakk>almost_everywhere ?M ?P;\n   AE x in ?M. ?P x \\<longrightarrow> ?Q x\\<rbrakk>\n  \\<Longrightarrow> almost_everywhere ?M ?Q\n\ngoal (1 subgoal):\n 1. AE x in lborel. LBINT y. f (y, x) = integral UNIV (\\<lambda>y. f (y, x))", "by fastforce"], ["proof (state)\nthis:\n  AE x in lborel. LBINT y. f (y, x) = integral UNIV (\\<lambda>y. f (y, x))\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  AE x in lborel. LBINT y. f (y, x) = integral UNIV (\\<lambda>y. f (y, x))\n\ngoal (2 subgoals):\n 1. integral UNIV f =\n    integral UNIV (\\<lambda>x. integral UNIV (\\<lambda>y. f (y, x)))\n 2. (\\<lambda>x. integral UNIV (\\<lambda>y. f (y, x))) integrable_on UNIV", "have one_D_integral_measurable:\n    \"(\\<lambda>x. LBINT y. f (y, x)) \\<in> borel_measurable lborel\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>x. LBINT y. f (y, x)) \\<in> borel_measurable lborel", "using f_is_measurable and lborel.borel_measurable_lebesgue_integral"], ["proof (prove)\nusing this:\n  f \\<in> borel_measurable lborel\n  (\\<lambda>(x, y). ?f x y)\n  \\<in> borel_measurable (?N \\<Otimes>\\<^sub>M lborel) \\<Longrightarrow>\n  (\\<lambda>x. integral\\<^sup>L lborel (?f x)) \\<in> borel_measurable ?N\n\ngoal (1 subgoal):\n 1. (\\<lambda>x. LBINT y. f (y, x)) \\<in> borel_measurable lborel", "by auto"], ["proof (state)\nthis:\n  (\\<lambda>x. LBINT y. f (y, x)) \\<in> borel_measurable lborel\n\ngoal (2 subgoals):\n 1. integral UNIV f =\n    integral UNIV (\\<lambda>x. integral UNIV (\\<lambda>y. f (y, x)))\n 2. (\\<lambda>x. integral UNIV (\\<lambda>y. f (y, x))) integrable_on UNIV", "then"], ["proof (chain)\npicking this:\n  (\\<lambda>x. LBINT y. f (y, x)) \\<in> borel_measurable lborel", "have second_lesbegue_integral_eq:\n    \"LBINT x. LBINT y. f (y, x) = LBINT x. (integral UNIV (\\<lambda>y. f(y, x)))\""], ["proof (prove)\nusing this:\n  (\\<lambda>x. LBINT y. f (y, x)) \\<in> borel_measurable lborel\n\ngoal (1 subgoal):\n 1. LBINT x. LBINT y. f (y, x) =\n    LBINT x. integral UNIV (\\<lambda>y. f (y, x))", "using y_axis_integral_measurable and integral_cong_AE and AE_one_D_integrals_eq"], ["proof (prove)\nusing this:\n  (\\<lambda>x. LBINT y. f (y, x)) \\<in> borel_measurable lborel\n  (\\<lambda>x. integral UNIV (\\<lambda>y. f (y, x)))\n  \\<in> borel_measurable lborel\n  \\<lbrakk>?f \\<in> borel_measurable ?M; ?g \\<in> borel_measurable ?M;\n   AE x in ?M. ?f x = ?g x\\<rbrakk>\n  \\<Longrightarrow> integral\\<^sup>L ?M ?f = integral\\<^sup>L ?M ?g\n  AE x in lborel. LBINT y. f (y, x) = integral UNIV (\\<lambda>y. f (y, x))\n\ngoal (1 subgoal):\n 1. LBINT x. LBINT y. f (y, x) =\n    LBINT x. integral UNIV (\\<lambda>y. f (y, x))", "by blast"], ["proof (state)\nthis:\n  LBINT x. LBINT y. f (y, x) = LBINT x. integral UNIV (\\<lambda>y. f (y, x))\n\ngoal (2 subgoals):\n 1. integral UNIV f =\n    integral UNIV (\\<lambda>x. integral UNIV (\\<lambda>y. f (y, x)))\n 2. (\\<lambda>x. integral UNIV (\\<lambda>y. f (y, x))) integrable_on UNIV", "have \"integrable lborel (\\<lambda>x. LBINT y. f (y, x))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. integrable lborel (\\<lambda>x. LBINT y. f (y, x))", "using fun_lborel_prod_integrable and lborel_pair.integrable_fst'"], ["proof (prove)\nusing this:\n  integrable (lborel \\<Otimes>\\<^sub>M lborel) f\n  integrable (lborel \\<Otimes>\\<^sub>M lborel) ?f \\<Longrightarrow>\n  integrable lborel (\\<lambda>x. LBINT y. ?f (x, y))\n\ngoal (1 subgoal):\n 1. integrable lborel (\\<lambda>x. LBINT y. f (y, x))", "by (simp add: lborel_pair.integrable_fst lborel_pair.integrable_product_swap)"], ["proof (state)\nthis:\n  integrable lborel (\\<lambda>x. LBINT y. f (y, x))\n\ngoal (2 subgoals):\n 1. integral UNIV f =\n    integral UNIV (\\<lambda>x. integral UNIV (\\<lambda>y. f (y, x)))\n 2. (\\<lambda>x. integral UNIV (\\<lambda>y. f (y, x))) integrable_on UNIV", "then"], ["proof (chain)\npicking this:\n  integrable lborel (\\<lambda>x. LBINT y. f (y, x))", "have oneD_gauge_integral_lesbegue_integrable:\n    \"integrable lborel (\\<lambda>x. integral UNIV (\\<lambda>y. f(y, x)))\""], ["proof (prove)\nusing this:\n  integrable lborel (\\<lambda>x. LBINT y. f (y, x))\n\ngoal (1 subgoal):\n 1. integrable lborel (\\<lambda>x. integral UNIV (\\<lambda>y. f (y, x)))", "using y_axis_integral_measurable and AE_one_D_integrals_eq and integrable_cong_AE_imp"], ["proof (prove)\nusing this:\n  integrable lborel (\\<lambda>x. LBINT y. f (y, x))\n  (\\<lambda>x. integral UNIV (\\<lambda>y. f (y, x)))\n  \\<in> borel_measurable lborel\n  AE x in lborel. LBINT y. f (y, x) = integral UNIV (\\<lambda>y. f (y, x))\n  \\<lbrakk>integrable ?M ?g; ?f \\<in> borel_measurable ?M;\n   AE x in ?M. ?g x = ?f x\\<rbrakk>\n  \\<Longrightarrow> integrable ?M ?f\n\ngoal (1 subgoal):\n 1. integrable lborel (\\<lambda>x. integral UNIV (\\<lambda>y. f (y, x)))", "by blast"], ["proof (state)\nthis:\n  integrable lborel (\\<lambda>x. integral UNIV (\\<lambda>y. f (y, x)))\n\ngoal (2 subgoals):\n 1. integral UNIV f =\n    integral UNIV (\\<lambda>x. integral UNIV (\\<lambda>y. f (y, x)))\n 2. (\\<lambda>x. integral UNIV (\\<lambda>y. f (y, x))) integrable_on UNIV", "then"], ["proof (chain)\npicking this:\n  integrable lborel (\\<lambda>x. integral UNIV (\\<lambda>y. f (y, x)))", "show one_D_gauge_integral_integrable:\n    \"(\\<lambda>x. integral UNIV (\\<lambda>y. f(y, x))) integrable_on UNIV\""], ["proof (prove)\nusing this:\n  integrable lborel (\\<lambda>x. integral UNIV (\\<lambda>y. f (y, x)))\n\ngoal (1 subgoal):\n 1. (\\<lambda>x. integral UNIV (\\<lambda>y. f (y, x))) integrable_on UNIV", "using integrable_on_lborel"], ["proof (prove)\nusing this:\n  integrable lborel (\\<lambda>x. integral UNIV (\\<lambda>y. f (y, x)))\n  integrable lborel ?f \\<Longrightarrow> ?f integrable_on UNIV\n\ngoal (1 subgoal):\n 1. (\\<lambda>x. integral UNIV (\\<lambda>y. f (y, x))) integrable_on UNIV", "by auto"], ["proof (state)\nthis:\n  (\\<lambda>x. integral UNIV (\\<lambda>y. f (y, x))) integrable_on UNIV\n\ngoal (1 subgoal):\n 1. integral UNIV f =\n    integral UNIV (\\<lambda>x. integral UNIV (\\<lambda>y. f (y, x)))", "have \"LBINT x. (integral UNIV (\\<lambda>y. f(y, x))) = integral UNIV (\\<lambda>x. integral UNIV (\\<lambda>y. f(y, x)))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. LBINT x. integral UNIV (\\<lambda>y. f (y, x)) =\n    integral UNIV (\\<lambda>x. integral UNIV (\\<lambda>y. f (y, x)))", "using integral_lborel oneD_gauge_integral_lesbegue_integrable"], ["proof (prove)\nusing this:\n  integrable lborel ?f \\<Longrightarrow>\n  integral UNIV ?f = integral\\<^sup>L lborel ?f\n  integrable lborel (\\<lambda>x. integral UNIV (\\<lambda>y. f (y, x)))\n\ngoal (1 subgoal):\n 1. LBINT x. integral UNIV (\\<lambda>y. f (y, x)) =\n    integral UNIV (\\<lambda>x. integral UNIV (\\<lambda>y. f (y, x)))", "by fastforce"], ["proof (state)\nthis:\n  LBINT x. integral UNIV (\\<lambda>y. f (y, x)) =\n  integral UNIV (\\<lambda>x. integral UNIV (\\<lambda>y. f (y, x)))\n\ngoal (1 subgoal):\n 1. integral UNIV f =\n    integral UNIV (\\<lambda>x. integral UNIV (\\<lambda>y. f (y, x)))", "then"], ["proof (chain)\npicking this:\n  LBINT x. integral UNIV (\\<lambda>y. f (y, x)) =\n  integral UNIV (\\<lambda>x. integral UNIV (\\<lambda>y. f (y, x)))", "have twoD_lesbeuge_eq_twoD_gauge:\n    \"LBINT x. LBINT y. f (y, x) = integral UNIV (\\<lambda>x. integral UNIV (\\<lambda>y. f(y, x)))\""], ["proof (prove)\nusing this:\n  LBINT x. integral UNIV (\\<lambda>y. f (y, x)) =\n  integral UNIV (\\<lambda>x. integral UNIV (\\<lambda>y. f (y, x)))\n\ngoal (1 subgoal):\n 1. LBINT x. LBINT y. f (y, x) =\n    integral UNIV (\\<lambda>x. integral UNIV (\\<lambda>y. f (y, x)))", "using second_lesbegue_integral_eq"], ["proof (prove)\nusing this:\n  LBINT x. integral UNIV (\\<lambda>y. f (y, x)) =\n  integral UNIV (\\<lambda>x. integral UNIV (\\<lambda>y. f (y, x)))\n  LBINT x. LBINT y. f (y, x) = LBINT x. integral UNIV (\\<lambda>y. f (y, x))\n\ngoal (1 subgoal):\n 1. LBINT x. LBINT y. f (y, x) =\n    integral UNIV (\\<lambda>x. integral UNIV (\\<lambda>y. f (y, x)))", "by auto"], ["proof (state)\nthis:\n  LBINT x. LBINT y. f (y, x) =\n  integral UNIV (\\<lambda>x. integral UNIV (\\<lambda>y. f (y, x)))\n\ngoal (1 subgoal):\n 1. integral UNIV f =\n    integral UNIV (\\<lambda>x. integral UNIV (\\<lambda>y. f (y, x)))", "then"], ["proof (chain)\npicking this:\n  LBINT x. LBINT y. f (y, x) =\n  integral UNIV (\\<lambda>x. integral UNIV (\\<lambda>y. f (y, x)))", "show \"integral UNIV f = integral UNIV (\\<lambda>x. integral UNIV (\\<lambda>y. f(y, x)))\""], ["proof (prove)\nusing this:\n  LBINT x. LBINT y. f (y, x) =\n  integral UNIV (\\<lambda>x. integral UNIV (\\<lambda>y. f (y, x)))\n\ngoal (1 subgoal):\n 1. integral UNIV f =\n    integral UNIV (\\<lambda>x. integral UNIV (\\<lambda>y. f (y, x)))", "using fun_lesbegue_integrable and integral_lborel and region_integral_is_one_twoD_integral"], ["proof (prove)\nusing this:\n  LBINT x. LBINT y. f (y, x) =\n  integral UNIV (\\<lambda>x. integral UNIV (\\<lambda>y. f (y, x)))\n  integrable lborel f\n  integrable lborel ?f \\<Longrightarrow>\n  integral UNIV ?f = integral\\<^sup>L lborel ?f\n  LBINT x. LBINT y. f (y, x) =\n  integral\\<^sup>L (lborel \\<Otimes>\\<^sub>M lborel) f\n\ngoal (1 subgoal):\n 1. integral UNIV f =\n    integral UNIV (\\<lambda>x. integral UNIV (\\<lambda>y. f (y, x)))", "by (metis lborel_prod)"], ["proof (state)\nthis:\n  integral UNIV f =\n  integral UNIV (\\<lambda>x. integral UNIV (\\<lambda>y. f (y, x)))\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma gauge_integral_Fubini_curve_bounded_region_x:\n  fixes f g :: \"('a::euclidean_space * 'b::euclidean_space) \\<Rightarrow> 'c::euclidean_space\" and\n    g1 g2:: \"'a \\<Rightarrow> 'b\" and\n    s:: \"('a * 'b) set\"\n  assumes fun_lesbegue_integrable: \"integrable lborel f\" and\n    x_axis_gauge_integrable: \"\\<And>x. (\\<lambda>y. f(x, y)) integrable_on UNIV\" and\n    (*IS THIS redundant? NO IT IS NOT*)\n    x_axis_integral_measurable: \"(\\<lambda>x. integral UNIV (\\<lambda>y. f(x, y))) \\<in> borel_measurable lborel\" and\n    f_is_g_indicator: \"f = (\\<lambda>x. if x \\<in> s then g x else 0)\" and\n    s_is_bounded_by_g1_and_g2: \"s = {(x,y). (\\<forall>i\\<in>Basis. a \\<bullet> i \\<le> x \\<bullet> i \\<and> x \\<bullet> i \\<le> b \\<bullet> i) \\<and>\n                                      (\\<forall>i\\<in>Basis. (g1 x) \\<bullet> i \\<le> y \\<bullet> i \\<and> y \\<bullet> i \\<le> (g2 x) \\<bullet> i)}\"\n  shows \"integral s g = integral (cbox a b) (\\<lambda>x. integral (cbox (g1 x) (g2 x)) (\\<lambda>y. g(x,y)))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. integral s g =\n    integral (cbox a b)\n     (\\<lambda>x. integral (cbox (g1 x) (g2 x)) (\\<lambda>y. g (x, y)))", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. integral s g =\n    integral (cbox a b)\n     (\\<lambda>x. integral (cbox (g1 x) (g2 x)) (\\<lambda>y. g (x, y)))", "have two_D_integral_to_one_D: \"integral UNIV f = integral UNIV (\\<lambda>x. integral UNIV (\\<lambda>y. f(x,y)))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. integral UNIV f =\n    integral UNIV (\\<lambda>x. integral UNIV (\\<lambda>y. f (x, y)))", "using gauge_integral_Fubini_universe_x and fun_lesbegue_integrable and x_axis_integral_measurable"], ["proof (prove)\nusing this:\n  \\<lbrakk>integrable lborel ?f;\n   (\\<lambda>x. integral UNIV (\\<lambda>y. ?f (x, y)))\n   \\<in> borel_measurable lborel\\<rbrakk>\n  \\<Longrightarrow> integral UNIV ?f =\n                    integral UNIV\n                     (\\<lambda>x. integral UNIV (\\<lambda>y. ?f (x, y)))\n  \\<lbrakk>integrable lborel ?f;\n   (\\<lambda>x. integral UNIV (\\<lambda>y. ?f (x, y)))\n   \\<in> borel_measurable lborel\\<rbrakk>\n  \\<Longrightarrow> (\\<lambda>x.\n                        integral UNIV (\\<lambda>y. ?f (x, y))) integrable_on\n                    UNIV\n  integrable lborel f\n  (\\<lambda>x. integral UNIV (\\<lambda>y. f (x, y)))\n  \\<in> borel_measurable lborel\n\ngoal (1 subgoal):\n 1. integral UNIV f =\n    integral UNIV (\\<lambda>x. integral UNIV (\\<lambda>y. f (x, y)))", "by auto"], ["proof (state)\nthis:\n  integral UNIV f =\n  integral UNIV (\\<lambda>x. integral UNIV (\\<lambda>y. f (x, y)))\n\ngoal (1 subgoal):\n 1. integral s g =\n    integral (cbox a b)\n     (\\<lambda>x. integral (cbox (g1 x) (g2 x)) (\\<lambda>y. g (x, y)))", "have one_d_integral_integrable: \"(\\<lambda>x. integral UNIV (\\<lambda>y. f(x,y))) integrable_on UNIV\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>x. integral UNIV (\\<lambda>y. f (x, y))) integrable_on UNIV", "using gauge_integral_Fubini_universe_x(2) and assms"], ["proof (prove)\nusing this:\n  \\<lbrakk>integrable lborel ?f;\n   (\\<lambda>x. integral UNIV (\\<lambda>y. ?f (x, y)))\n   \\<in> borel_measurable lborel\\<rbrakk>\n  \\<Longrightarrow> (\\<lambda>x.\n                        integral UNIV (\\<lambda>y. ?f (x, y))) integrable_on\n                    UNIV\n  integrable lborel f\n  (\\<lambda>y. f (?x, y)) integrable_on UNIV\n  (\\<lambda>x. integral UNIV (\\<lambda>y. f (x, y)))\n  \\<in> borel_measurable lborel\n  f = (\\<lambda>x. if x \\<in> s then g x else (0::'c))\n  s =\n  {(x, y).\n   (\\<forall>i\\<in>Basis.\n       a \\<bullet> i \\<le> x \\<bullet> i \\<and>\n       x \\<bullet> i \\<le> b \\<bullet> i) \\<and>\n   (\\<forall>i\\<in>Basis.\n       g1 x \\<bullet> i \\<le> y \\<bullet> i \\<and>\n       y \\<bullet> i \\<le> g2 x \\<bullet> i)}\n\ngoal (1 subgoal):\n 1. (\\<lambda>x. integral UNIV (\\<lambda>y. f (x, y))) integrable_on UNIV", "by blast"], ["proof (state)\nthis:\n  (\\<lambda>x. integral UNIV (\\<lambda>y. f (x, y))) integrable_on UNIV\n\ngoal (1 subgoal):\n 1. integral s g =\n    integral (cbox a b)\n     (\\<lambda>x. integral (cbox (g1 x) (g2 x)) (\\<lambda>y. g (x, y)))", "have case_x_in_range:\n    \"\\<forall> x \\<in> cbox a b. integral (cbox (g1 x) (g2 x)) (\\<lambda>y. g(x,y)) = integral UNIV (\\<lambda>y. f(x,y))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>cbox a b.\n       integral (cbox (g1 x) (g2 x)) (\\<lambda>y. g (x, y)) =\n       integral UNIV (\\<lambda>y. f (x, y))", "proof"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> cbox a b \\<Longrightarrow>\n       integral (cbox (g1 x) (g2 x)) (\\<lambda>y. g (x, y)) =\n       integral UNIV (\\<lambda>y. f (x, y))", "fix x:: 'a"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> cbox a b \\<Longrightarrow>\n       integral (cbox (g1 x) (g2 x)) (\\<lambda>y. g (x, y)) =\n       integral UNIV (\\<lambda>y. f (x, y))", "assume within_range: \"x \\<in> (cbox a b)\""], ["proof (state)\nthis:\n  x \\<in> cbox a b\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> cbox a b \\<Longrightarrow>\n       integral (cbox (g1 x) (g2 x)) (\\<lambda>y. g (x, y)) =\n       integral UNIV (\\<lambda>y. f (x, y))", "let ?f_one_D_spec = \"(\\<lambda>y. if y \\<in> (cbox (g1 x) (g2 x)) then g(x,y) else 0)\""], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> cbox a b \\<Longrightarrow>\n       integral (cbox (g1 x) (g2 x)) (\\<lambda>y. g (x, y)) =\n       integral UNIV (\\<lambda>y. f (x, y))", "have f_one_D_region: \"(\\<lambda>y. f(x,y)) = (\\<lambda>y. if y \\<in> cbox (g1 x) (g2 x) then g(x,y) else 0)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>y. f (x, y)) =\n    (\\<lambda>y. if y \\<in> cbox (g1 x) (g2 x) then g (x, y) else (0::'c))", "proof"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>y.\n       f (x, y) = (if y \\<in> cbox (g1 x) (g2 x) then g (x, y) else (0::'c))", "fix y::'b"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>y.\n       f (x, y) = (if y \\<in> cbox (g1 x) (g2 x) then g (x, y) else (0::'c))", "show \"f (x, y) = (if y \\<in> (cbox (g1 x) (g2 x)) then g (x, y) else 0)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. f (x, y) = (if y \\<in> cbox (g1 x) (g2 x) then g (x, y) else (0::'c))", "apply (simp add: f_is_g_indicator s_is_bounded_by_g1_and_g2)"], ["proof (prove)\ngoal (1 subgoal):\n 1. ((\\<forall>i\\<in>Basis.\n         a \\<bullet> i \\<le> x \\<bullet> i \\<and>\n         x \\<bullet> i \\<le> b \\<bullet> i) \\<and>\n     (\\<forall>i\\<in>Basis.\n         g1 x \\<bullet> i \\<le> y \\<bullet> i \\<and>\n         y \\<bullet> i \\<le> g2 x \\<bullet> i) \\<longrightarrow>\n     y \\<notin> cbox (g1 x) (g2 x) \\<longrightarrow>\n     g (x, y) = (0::'c)) \\<and>\n    ((\\<exists>i\\<in>Basis.\n         a \\<bullet> i \\<le> x \\<bullet> i \\<longrightarrow>\n         \\<not> x \\<bullet> i \\<le> b \\<bullet> i) \\<longrightarrow>\n     y \\<in> cbox (g1 x) (g2 x) \\<longrightarrow> g (x, y) = (0::'c)) \\<and>\n    ((\\<exists>i\\<in>Basis.\n         g1 x \\<bullet> i \\<le> y \\<bullet> i \\<longrightarrow>\n         \\<not> y \\<bullet> i \\<le> g2 x \\<bullet> i) \\<longrightarrow>\n     y \\<in> cbox (g1 x) (g2 x) \\<longrightarrow> g (x, y) = (0::'c))", "using within_range"], ["proof (prove)\nusing this:\n  x \\<in> cbox a b\n\ngoal (1 subgoal):\n 1. ((\\<forall>i\\<in>Basis.\n         a \\<bullet> i \\<le> x \\<bullet> i \\<and>\n         x \\<bullet> i \\<le> b \\<bullet> i) \\<and>\n     (\\<forall>i\\<in>Basis.\n         g1 x \\<bullet> i \\<le> y \\<bullet> i \\<and>\n         y \\<bullet> i \\<le> g2 x \\<bullet> i) \\<longrightarrow>\n     y \\<notin> cbox (g1 x) (g2 x) \\<longrightarrow>\n     g (x, y) = (0::'c)) \\<and>\n    ((\\<exists>i\\<in>Basis.\n         a \\<bullet> i \\<le> x \\<bullet> i \\<longrightarrow>\n         \\<not> x \\<bullet> i \\<le> b \\<bullet> i) \\<longrightarrow>\n     y \\<in> cbox (g1 x) (g2 x) \\<longrightarrow> g (x, y) = (0::'c)) \\<and>\n    ((\\<exists>i\\<in>Basis.\n         g1 x \\<bullet> i \\<le> y \\<bullet> i \\<longrightarrow>\n         \\<not> y \\<bullet> i \\<le> g2 x \\<bullet> i) \\<longrightarrow>\n     y \\<in> cbox (g1 x) (g2 x) \\<longrightarrow> g (x, y) = (0::'c))", "apply (simp add: cbox_def)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>i\\<in>Basis.\n       a \\<bullet> i \\<le> x \\<bullet> i \\<and>\n       x \\<bullet> i \\<le> b \\<bullet> i \\<Longrightarrow>\n    (\\<exists>i\\<in>Basis.\n        g1 x \\<bullet> i \\<le> y \\<bullet> i \\<longrightarrow>\n        \\<not> y \\<bullet> i \\<le> g2 x \\<bullet> i) \\<longrightarrow>\n    (\\<forall>i\\<in>Basis.\n        g1 x \\<bullet> i \\<le> y \\<bullet> i \\<and>\n        y \\<bullet> i \\<le> g2 x \\<bullet> i) \\<longrightarrow>\n    g (x, y) = (0::'c)", "by smt"], ["proof (state)\nthis:\n  f (x, y) = (if y \\<in> cbox (g1 x) (g2 x) then g (x, y) else (0::'c))\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  (\\<lambda>y. f (x, y)) =\n  (\\<lambda>y. if y \\<in> cbox (g1 x) (g2 x) then g (x, y) else (0::'c))\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> cbox a b \\<Longrightarrow>\n       integral (cbox (g1 x) (g2 x)) (\\<lambda>y. g (x, y)) =\n       integral UNIV (\\<lambda>y. f (x, y))", "have zero_out_of_bound: \"\\<forall> y.  y \\<notin> cbox (g1 x) (g2 x) \\<longrightarrow> f (x,y) = 0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>y.\n       y \\<notin> cbox (g1 x) (g2 x) \\<longrightarrow> f (x, y) = (0::'c)", "using f_is_g_indicator and s_is_bounded_by_g1_and_g2"], ["proof (prove)\nusing this:\n  f = (\\<lambda>x. if x \\<in> s then g x else (0::'c))\n  s =\n  {(x, y).\n   (\\<forall>i\\<in>Basis.\n       a \\<bullet> i \\<le> x \\<bullet> i \\<and>\n       x \\<bullet> i \\<le> b \\<bullet> i) \\<and>\n   (\\<forall>i\\<in>Basis.\n       g1 x \\<bullet> i \\<le> y \\<bullet> i \\<and>\n       y \\<bullet> i \\<le> g2 x \\<bullet> i)}\n\ngoal (1 subgoal):\n 1. \\<forall>y.\n       y \\<notin> cbox (g1 x) (g2 x) \\<longrightarrow> f (x, y) = (0::'c)", "by (auto simp add: cbox_def)"], ["proof (state)\nthis:\n  \\<forall>y.\n     y \\<notin> cbox (g1 x) (g2 x) \\<longrightarrow> f (x, y) = (0::'c)\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> cbox a b \\<Longrightarrow>\n       integral (cbox (g1 x) (g2 x)) (\\<lambda>y. g (x, y)) =\n       integral UNIV (\\<lambda>y. f (x, y))", "have \"(\\<lambda>y. f(x,y)) integrable_on cbox (g1 x)  (g2 x)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>y. f (x, y)) integrable_on cbox (g1 x) (g2 x)", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. (\\<lambda>y. f (x, y)) integrable_on cbox (g1 x) (g2 x)", "have \"?f_one_D_spec integrable_on UNIV\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>y.\n        if y \\<in> cbox (g1 x) (g2 x) then g (x, y)\n        else (0::'c)) integrable_on\n    UNIV", "using f_one_D_region and x_axis_gauge_integrable"], ["proof (prove)\nusing this:\n  (\\<lambda>y. f (x, y)) =\n  (\\<lambda>y. if y \\<in> cbox (g1 x) (g2 x) then g (x, y) else (0::'c))\n  (\\<lambda>y. f (?x, y)) integrable_on UNIV\n\ngoal (1 subgoal):\n 1. (\\<lambda>y.\n        if y \\<in> cbox (g1 x) (g2 x) then g (x, y)\n        else (0::'c)) integrable_on\n    UNIV", "by metis"], ["proof (state)\nthis:\n  (\\<lambda>y.\n      if y \\<in> cbox (g1 x) (g2 x) then g (x, y)\n      else (0::'c)) integrable_on\n  UNIV\n\ngoal (1 subgoal):\n 1. (\\<lambda>y. f (x, y)) integrable_on cbox (g1 x) (g2 x)", "then"], ["proof (chain)\npicking this:\n  (\\<lambda>y.\n      if y \\<in> cbox (g1 x) (g2 x) then g (x, y)\n      else (0::'c)) integrable_on\n  UNIV", "have \"?f_one_D_spec integrable_on cbox(g1 x) (g2 x)\""], ["proof (prove)\nusing this:\n  (\\<lambda>y.\n      if y \\<in> cbox (g1 x) (g2 x) then g (x, y)\n      else (0::'c)) integrable_on\n  UNIV\n\ngoal (1 subgoal):\n 1. (\\<lambda>y.\n        if y \\<in> cbox (g1 x) (g2 x) then g (x, y)\n        else (0::'c)) integrable_on\n    cbox (g1 x) (g2 x)", "using integrable_on_subcbox"], ["proof (prove)\nusing this:\n  (\\<lambda>y.\n      if y \\<in> cbox (g1 x) (g2 x) then g (x, y)\n      else (0::'c)) integrable_on\n  UNIV\n  \\<lbrakk>?f integrable_on ?S; cbox ?a ?b \\<subseteq> ?S\\<rbrakk>\n  \\<Longrightarrow> ?f integrable_on cbox ?a ?b\n\ngoal (1 subgoal):\n 1. (\\<lambda>y.\n        if y \\<in> cbox (g1 x) (g2 x) then g (x, y)\n        else (0::'c)) integrable_on\n    cbox (g1 x) (g2 x)", "by blast"], ["proof (state)\nthis:\n  (\\<lambda>y.\n      if y \\<in> cbox (g1 x) (g2 x) then g (x, y)\n      else (0::'c)) integrable_on\n  cbox (g1 x) (g2 x)\n\ngoal (1 subgoal):\n 1. (\\<lambda>y. f (x, y)) integrable_on cbox (g1 x) (g2 x)", "then"], ["proof (chain)\npicking this:\n  (\\<lambda>y.\n      if y \\<in> cbox (g1 x) (g2 x) then g (x, y)\n      else (0::'c)) integrable_on\n  cbox (g1 x) (g2 x)", "show ?thesis"], ["proof (prove)\nusing this:\n  (\\<lambda>y.\n      if y \\<in> cbox (g1 x) (g2 x) then g (x, y)\n      else (0::'c)) integrable_on\n  cbox (g1 x) (g2 x)\n\ngoal (1 subgoal):\n 1. (\\<lambda>y. f (x, y)) integrable_on cbox (g1 x) (g2 x)", "using f_one_D_region"], ["proof (prove)\nusing this:\n  (\\<lambda>y.\n      if y \\<in> cbox (g1 x) (g2 x) then g (x, y)\n      else (0::'c)) integrable_on\n  cbox (g1 x) (g2 x)\n  (\\<lambda>y. f (x, y)) =\n  (\\<lambda>y. if y \\<in> cbox (g1 x) (g2 x) then g (x, y) else (0::'c))\n\ngoal (1 subgoal):\n 1. (\\<lambda>y. f (x, y)) integrable_on cbox (g1 x) (g2 x)", "by auto"], ["proof (state)\nthis:\n  (\\<lambda>y. f (x, y)) integrable_on cbox (g1 x) (g2 x)\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  (\\<lambda>y. f (x, y)) integrable_on cbox (g1 x) (g2 x)\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> cbox a b \\<Longrightarrow>\n       integral (cbox (g1 x) (g2 x)) (\\<lambda>y. g (x, y)) =\n       integral UNIV (\\<lambda>y. f (x, y))", "then"], ["proof (chain)\npicking this:\n  (\\<lambda>y. f (x, y)) integrable_on cbox (g1 x) (g2 x)", "have f_integrale_x: \"((\\<lambda>y. f(x,y)) has_integral (integral (cbox (g1 x) (g2 x)) (\\<lambda>y. f(x,y)))) (cbox (g1 x) (g2 x))\""], ["proof (prove)\nusing this:\n  (\\<lambda>y. f (x, y)) integrable_on cbox (g1 x) (g2 x)\n\ngoal (1 subgoal):\n 1. ((\\<lambda>y. f (x, y)) has_integral\n     integral (cbox (g1 x) (g2 x)) (\\<lambda>y. f (x, y)))\n     (cbox (g1 x) (g2 x))", "using integrable_integral and within_range and x_axis_gauge_integrable"], ["proof (prove)\nusing this:\n  (\\<lambda>y. f (x, y)) integrable_on cbox (g1 x) (g2 x)\n  ?f integrable_on ?i \\<Longrightarrow> (?f has_integral integral ?i ?f) ?i\n  x \\<in> cbox a b\n  (\\<lambda>y. f (?x, y)) integrable_on UNIV\n\ngoal (1 subgoal):\n 1. ((\\<lambda>y. f (x, y)) has_integral\n     integral (cbox (g1 x) (g2 x)) (\\<lambda>y. f (x, y)))\n     (cbox (g1 x) (g2 x))", "by auto"], ["proof (state)\nthis:\n  ((\\<lambda>y. f (x, y)) has_integral\n   integral (cbox (g1 x) (g2 x)) (\\<lambda>y. f (x, y)))\n   (cbox (g1 x) (g2 x))\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> cbox a b \\<Longrightarrow>\n       integral (cbox (g1 x) (g2 x)) (\\<lambda>y. g (x, y)) =\n       integral UNIV (\\<lambda>y. f (x, y))", "have \"integral (cbox (g1 x)  (g2 x)) (\\<lambda>y. f (x, y)) = integral UNIV (\\<lambda>y. f (x, y))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. integral (cbox (g1 x) (g2 x)) (\\<lambda>y. f (x, y)) =\n    integral UNIV (\\<lambda>y. f (x, y))", "using has_integral_on_superset[OF f_integrale_x _ Set.subset_UNIV] zero_out_of_bound"], ["proof (prove)\nusing this:\n  (\\<And>xa.\n      xa \\<notin> cbox (g1 x) (g2 x) \\<Longrightarrow>\n      f (x, xa) = (0::'c)) \\<Longrightarrow>\n  ((\\<lambda>y. f (x, y)) has_integral\n   integral (cbox (g1 x) (g2 x)) (\\<lambda>y. f (x, y)))\n   UNIV\n  \\<forall>y.\n     y \\<notin> cbox (g1 x) (g2 x) \\<longrightarrow> f (x, y) = (0::'c)\n\ngoal (1 subgoal):\n 1. integral (cbox (g1 x) (g2 x)) (\\<lambda>y. f (x, y)) =\n    integral UNIV (\\<lambda>y. f (x, y))", "by (simp add: integral_unique)"], ["proof (state)\nthis:\n  integral (cbox (g1 x) (g2 x)) (\\<lambda>y. f (x, y)) =\n  integral UNIV (\\<lambda>y. f (x, y))\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> cbox a b \\<Longrightarrow>\n       integral (cbox (g1 x) (g2 x)) (\\<lambda>y. g (x, y)) =\n       integral UNIV (\\<lambda>y. f (x, y))", "then"], ["proof (chain)\npicking this:\n  integral (cbox (g1 x) (g2 x)) (\\<lambda>y. f (x, y)) =\n  integral UNIV (\\<lambda>y. f (x, y))", "have \"((\\<lambda>y. f(x, y)) has_integral integral UNIV (\\<lambda>y. f (x, y))) (cbox (g1 x) (g2 x))\""], ["proof (prove)\nusing this:\n  integral (cbox (g1 x) (g2 x)) (\\<lambda>y. f (x, y)) =\n  integral UNIV (\\<lambda>y. f (x, y))\n\ngoal (1 subgoal):\n 1. ((\\<lambda>y. f (x, y)) has_integral\n     integral UNIV (\\<lambda>y. f (x, y)))\n     (cbox (g1 x) (g2 x))", "using f_integrale_x"], ["proof (prove)\nusing this:\n  integral (cbox (g1 x) (g2 x)) (\\<lambda>y. f (x, y)) =\n  integral UNIV (\\<lambda>y. f (x, y))\n  ((\\<lambda>y. f (x, y)) has_integral\n   integral (cbox (g1 x) (g2 x)) (\\<lambda>y. f (x, y)))\n   (cbox (g1 x) (g2 x))\n\ngoal (1 subgoal):\n 1. ((\\<lambda>y. f (x, y)) has_integral\n     integral UNIV (\\<lambda>y. f (x, y)))\n     (cbox (g1 x) (g2 x))", "by simp"], ["proof (state)\nthis:\n  ((\\<lambda>y. f (x, y)) has_integral integral UNIV (\\<lambda>y. f (x, y)))\n   (cbox (g1 x) (g2 x))\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> cbox a b \\<Longrightarrow>\n       integral (cbox (g1 x) (g2 x)) (\\<lambda>y. g (x, y)) =\n       integral UNIV (\\<lambda>y. f (x, y))", "then"], ["proof (chain)\npicking this:\n  ((\\<lambda>y. f (x, y)) has_integral integral UNIV (\\<lambda>y. f (x, y)))\n   (cbox (g1 x) (g2 x))", "have \"((\\<lambda>y. g(x, y)) has_integral integral UNIV (\\<lambda>y. f (x, y))) (cbox (g1 x)(g2 x))\""], ["proof (prove)\nusing this:\n  ((\\<lambda>y. f (x, y)) has_integral integral UNIV (\\<lambda>y. f (x, y)))\n   (cbox (g1 x) (g2 x))\n\ngoal (1 subgoal):\n 1. ((\\<lambda>y. g (x, y)) has_integral\n     integral UNIV (\\<lambda>y. f (x, y)))\n     (cbox (g1 x) (g2 x))", "using  Henstock_Kurzweil_Integration.has_integral_restrict [OF subset_refl ] and\n        f_one_D_region"], ["proof (prove)\nusing this:\n  ((\\<lambda>y. f (x, y)) has_integral integral UNIV (\\<lambda>y. f (x, y)))\n   (cbox (g1 x) (g2 x))\n  ((\\<lambda>x. if x \\<in> ?S then ?f x else (0::?'b)) has_integral ?i) ?S =\n  (?f has_integral ?i) ?S\n  (\\<lambda>y. f (x, y)) =\n  (\\<lambda>y. if y \\<in> cbox (g1 x) (g2 x) then g (x, y) else (0::'c))\n\ngoal (1 subgoal):\n 1. ((\\<lambda>y. g (x, y)) has_integral\n     integral UNIV (\\<lambda>y. f (x, y)))\n     (cbox (g1 x) (g2 x))", "by (smt has_integral_eq)"], ["proof (state)\nthis:\n  ((\\<lambda>y. g (x, y)) has_integral integral UNIV (\\<lambda>y. f (x, y)))\n   (cbox (g1 x) (g2 x))\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> cbox a b \\<Longrightarrow>\n       integral (cbox (g1 x) (g2 x)) (\\<lambda>y. g (x, y)) =\n       integral UNIV (\\<lambda>y. f (x, y))", "then"], ["proof (chain)\npicking this:\n  ((\\<lambda>y. g (x, y)) has_integral integral UNIV (\\<lambda>y. f (x, y)))\n   (cbox (g1 x) (g2 x))", "show \"integral (cbox (g1 x) (g2 x)) (\\<lambda>y. g (x, y)) = integral UNIV (\\<lambda>y. f (x, y))\""], ["proof (prove)\nusing this:\n  ((\\<lambda>y. g (x, y)) has_integral integral UNIV (\\<lambda>y. f (x, y)))\n   (cbox (g1 x) (g2 x))\n\ngoal (1 subgoal):\n 1. integral (cbox (g1 x) (g2 x)) (\\<lambda>y. g (x, y)) =\n    integral UNIV (\\<lambda>y. f (x, y))", "by auto"], ["proof (state)\nthis:\n  integral (cbox (g1 x) (g2 x)) (\\<lambda>y. g (x, y)) =\n  integral UNIV (\\<lambda>y. f (x, y))\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<forall>x\\<in>cbox a b.\n     integral (cbox (g1 x) (g2 x)) (\\<lambda>y. g (x, y)) =\n     integral UNIV (\\<lambda>y. f (x, y))\n\ngoal (1 subgoal):\n 1. integral s g =\n    integral (cbox a b)\n     (\\<lambda>x. integral (cbox (g1 x) (g2 x)) (\\<lambda>y. g (x, y)))", "have case_x_not_in_range:\n    \"\\<forall> x. x \\<notin> cbox a  b \\<longrightarrow> integral UNIV (\\<lambda>y. f(x,y)) = 0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>x.\n       x \\<notin> cbox a b \\<longrightarrow>\n       integral UNIV (\\<lambda>y. f (x, y)) = (0::'c)", "proof"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<notin> cbox a b \\<longrightarrow>\n       integral UNIV (\\<lambda>y. f (x, y)) = (0::'c)", "fix x::'a"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<notin> cbox a b \\<longrightarrow>\n       integral UNIV (\\<lambda>y. f (x, y)) = (0::'c)", "have \"x \\<notin> (cbox a b) \\<longrightarrow> (\\<forall>y. f(x,y) = 0)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. x \\<notin> cbox a b \\<longrightarrow> (\\<forall>y. f (x, y) = (0::'c))", "apply  (simp add: s_is_bounded_by_g1_and_g2 f_is_g_indicator cbox_def)"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<exists>i\\<in>Basis.\n        a \\<bullet> i \\<le> x \\<bullet> i \\<longrightarrow>\n        \\<not> x \\<bullet> i \\<le> b \\<bullet> i) \\<longrightarrow>\n    (\\<forall>y.\n        (\\<forall>i\\<in>Basis.\n            a \\<bullet> i \\<le> x \\<bullet> i \\<and>\n            x \\<bullet> i \\<le> b \\<bullet> i) \\<and>\n        (\\<forall>i\\<in>Basis.\n            g1 x \\<bullet> i \\<le> y \\<bullet> i \\<and>\n            y \\<bullet> i \\<le> g2 x \\<bullet> i) \\<longrightarrow>\n        g (x, y) = (0::'c))", "by auto"], ["proof (state)\nthis:\n  x \\<notin> cbox a b \\<longrightarrow> (\\<forall>y. f (x, y) = (0::'c))\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<notin> cbox a b \\<longrightarrow>\n       integral UNIV (\\<lambda>y. f (x, y)) = (0::'c)", "then"], ["proof (chain)\npicking this:\n  x \\<notin> cbox a b \\<longrightarrow> (\\<forall>y. f (x, y) = (0::'c))", "show \"x \\<notin> cbox a b \\<longrightarrow> integral UNIV (\\<lambda>y. f (x, y)) = 0\""], ["proof (prove)\nusing this:\n  x \\<notin> cbox a b \\<longrightarrow> (\\<forall>y. f (x, y) = (0::'c))\n\ngoal (1 subgoal):\n 1. x \\<notin> cbox a b \\<longrightarrow>\n    integral UNIV (\\<lambda>y. f (x, y)) = (0::'c)", "by (simp)"], ["proof (state)\nthis:\n  x \\<notin> cbox a b \\<longrightarrow>\n  integral UNIV (\\<lambda>y. f (x, y)) = (0::'c)\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<forall>x.\n     x \\<notin> cbox a b \\<longrightarrow>\n     integral UNIV (\\<lambda>y. f (x, y)) = (0::'c)\n\ngoal (1 subgoal):\n 1. integral s g =\n    integral (cbox a b)\n     (\\<lambda>x. integral (cbox (g1 x) (g2 x)) (\\<lambda>y. g (x, y)))", "have RHS: \"integral UNIV (\\<lambda>x. integral UNIV (\\<lambda>y. f(x,y))) = integral (cbox a b) (\\<lambda>x. integral (cbox (g1 x) (g2 x)) (\\<lambda>y. g(x,y)))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. integral UNIV (\\<lambda>x. integral UNIV (\\<lambda>y. f (x, y))) =\n    integral (cbox a b)\n     (\\<lambda>x. integral (cbox (g1 x) (g2 x)) (\\<lambda>y. g (x, y)))", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. integral UNIV (\\<lambda>x. integral UNIV (\\<lambda>y. f (x, y))) =\n    integral (cbox a b)\n     (\\<lambda>x. integral (cbox (g1 x) (g2 x)) (\\<lambda>y. g (x, y)))", "let ?first_integral = \"(\\<lambda>x. integral (cbox (g1 x) (g2 x)) (\\<lambda>y. g(x,y)))\""], ["proof (state)\ngoal (1 subgoal):\n 1. integral UNIV (\\<lambda>x. integral UNIV (\\<lambda>y. f (x, y))) =\n    integral (cbox a b)\n     (\\<lambda>x. integral (cbox (g1 x) (g2 x)) (\\<lambda>y. g (x, y)))", "let ?x_integral_cases = \"(\\<lambda>x. if x \\<in> cbox a b then  ?first_integral x else 0)\""], ["proof (state)\ngoal (1 subgoal):\n 1. integral UNIV (\\<lambda>x. integral UNIV (\\<lambda>y. f (x, y))) =\n    integral (cbox a b)\n     (\\<lambda>x. integral (cbox (g1 x) (g2 x)) (\\<lambda>y. g (x, y)))", "have x_integral_cases_integral: \"(\\<lambda>x. integral UNIV (\\<lambda>y. f(x,y))) = ?x_integral_cases\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>x. integral UNIV (\\<lambda>y. f (x, y))) =\n    (\\<lambda>x.\n        if x \\<in> cbox a b\n        then integral (cbox (g1 x) (g2 x)) (\\<lambda>y. g (x, y))\n        else (0::'c))", "using case_x_in_range and case_x_not_in_range"], ["proof (prove)\nusing this:\n  \\<forall>x\\<in>cbox a b.\n     integral (cbox (g1 x) (g2 x)) (\\<lambda>y. g (x, y)) =\n     integral UNIV (\\<lambda>y. f (x, y))\n  \\<forall>x.\n     x \\<notin> cbox a b \\<longrightarrow>\n     integral UNIV (\\<lambda>y. f (x, y)) = (0::'c)\n\ngoal (1 subgoal):\n 1. (\\<lambda>x. integral UNIV (\\<lambda>y. f (x, y))) =\n    (\\<lambda>x.\n        if x \\<in> cbox a b\n        then integral (cbox (g1 x) (g2 x)) (\\<lambda>y. g (x, y))\n        else (0::'c))", "by auto"], ["proof (state)\nthis:\n  (\\<lambda>x. integral UNIV (\\<lambda>y. f (x, y))) =\n  (\\<lambda>x.\n      if x \\<in> cbox a b\n      then integral (cbox (g1 x) (g2 x)) (\\<lambda>y. g (x, y))\n      else (0::'c))\n\ngoal (1 subgoal):\n 1. integral UNIV (\\<lambda>x. integral UNIV (\\<lambda>y. f (x, y))) =\n    integral (cbox a b)\n     (\\<lambda>x. integral (cbox (g1 x) (g2 x)) (\\<lambda>y. g (x, y)))", "have \"((\\<lambda>x. integral UNIV (\\<lambda>y. f(x,y))) has_integral (integral UNIV f)) UNIV\""], ["proof (prove)\ngoal (1 subgoal):\n 1. ((\\<lambda>x. integral UNIV (\\<lambda>y. f (x, y))) has_integral\n     integral UNIV f)\n     UNIV", "using two_D_integral_to_one_D\n        one_d_integral_integrable"], ["proof (prove)\nusing this:\n  integral UNIV f =\n  integral UNIV (\\<lambda>x. integral UNIV (\\<lambda>y. f (x, y)))\n  (\\<lambda>x. integral UNIV (\\<lambda>y. f (x, y))) integrable_on UNIV\n\ngoal (1 subgoal):\n 1. ((\\<lambda>x. integral UNIV (\\<lambda>y. f (x, y))) has_integral\n     integral UNIV f)\n     UNIV", "by auto"], ["proof (state)\nthis:\n  ((\\<lambda>x. integral UNIV (\\<lambda>y. f (x, y))) has_integral\n   integral UNIV f)\n   UNIV\n\ngoal (1 subgoal):\n 1. integral UNIV (\\<lambda>x. integral UNIV (\\<lambda>y. f (x, y))) =\n    integral (cbox a b)\n     (\\<lambda>x. integral (cbox (g1 x) (g2 x)) (\\<lambda>y. g (x, y)))", "then"], ["proof (chain)\npicking this:\n  ((\\<lambda>x. integral UNIV (\\<lambda>y. f (x, y))) has_integral\n   integral UNIV f)\n   UNIV", "have \"(?x_integral_cases has_integral (integral UNIV f)) UNIV\""], ["proof (prove)\nusing this:\n  ((\\<lambda>x. integral UNIV (\\<lambda>y. f (x, y))) has_integral\n   integral UNIV f)\n   UNIV\n\ngoal (1 subgoal):\n 1. ((\\<lambda>x.\n         if x \\<in> cbox a b\n         then integral (cbox (g1 x) (g2 x)) (\\<lambda>y. g (x, y))\n         else (0::'c)) has_integral\n     integral UNIV f)\n     UNIV", "using x_integral_cases_integral"], ["proof (prove)\nusing this:\n  ((\\<lambda>x. integral UNIV (\\<lambda>y. f (x, y))) has_integral\n   integral UNIV f)\n   UNIV\n  (\\<lambda>x. integral UNIV (\\<lambda>y. f (x, y))) =\n  (\\<lambda>x.\n      if x \\<in> cbox a b\n      then integral (cbox (g1 x) (g2 x)) (\\<lambda>y. g (x, y))\n      else (0::'c))\n\ngoal (1 subgoal):\n 1. ((\\<lambda>x.\n         if x \\<in> cbox a b\n         then integral (cbox (g1 x) (g2 x)) (\\<lambda>y. g (x, y))\n         else (0::'c)) has_integral\n     integral UNIV f)\n     UNIV", "by auto"], ["proof (state)\nthis:\n  ((\\<lambda>x.\n       if x \\<in> cbox a b\n       then integral (cbox (g1 x) (g2 x)) (\\<lambda>y. g (x, y))\n       else (0::'c)) has_integral\n   integral UNIV f)\n   UNIV\n\ngoal (1 subgoal):\n 1. integral UNIV (\\<lambda>x. integral UNIV (\\<lambda>y. f (x, y))) =\n    integral (cbox a b)\n     (\\<lambda>x. integral (cbox (g1 x) (g2 x)) (\\<lambda>y. g (x, y)))", "then"], ["proof (chain)\npicking this:\n  ((\\<lambda>x.\n       if x \\<in> cbox a b\n       then integral (cbox (g1 x) (g2 x)) (\\<lambda>y. g (x, y))\n       else (0::'c)) has_integral\n   integral UNIV f)\n   UNIV", "have \"(?first_integral has_integral (integral UNIV f)) (cbox a b)\""], ["proof (prove)\nusing this:\n  ((\\<lambda>x.\n       if x \\<in> cbox a b\n       then integral (cbox (g1 x) (g2 x)) (\\<lambda>y. g (x, y))\n       else (0::'c)) has_integral\n   integral UNIV f)\n   UNIV\n\ngoal (1 subgoal):\n 1. ((\\<lambda>x.\n         integral (cbox (g1 x) (g2 x)) (\\<lambda>y. g (x, y))) has_integral\n     integral UNIV f)\n     (cbox a b)", "using  has_integral_restrict_UNIV[of \"cbox a b\" \"?first_integral\" \"integral UNIV f\"]"], ["proof (prove)\nusing this:\n  ((\\<lambda>x.\n       if x \\<in> cbox a b\n       then integral (cbox (g1 x) (g2 x)) (\\<lambda>y. g (x, y))\n       else (0::'c)) has_integral\n   integral UNIV f)\n   UNIV\n  ((\\<lambda>x.\n       if x \\<in> cbox a b\n       then integral (cbox (g1 x) (g2 x)) (\\<lambda>y. g (x, y))\n       else (0::'c)) has_integral\n   integral UNIV f)\n   UNIV =\n  ((\\<lambda>x.\n       integral (cbox (g1 x) (g2 x)) (\\<lambda>y. g (x, y))) has_integral\n   integral UNIV f)\n   (cbox a b)\n\ngoal (1 subgoal):\n 1. ((\\<lambda>x.\n         integral (cbox (g1 x) (g2 x)) (\\<lambda>y. g (x, y))) has_integral\n     integral UNIV f)\n     (cbox a b)", "by auto"], ["proof (state)\nthis:\n  ((\\<lambda>x.\n       integral (cbox (g1 x) (g2 x)) (\\<lambda>y. g (x, y))) has_integral\n   integral UNIV f)\n   (cbox a b)\n\ngoal (1 subgoal):\n 1. integral UNIV (\\<lambda>x. integral UNIV (\\<lambda>y. f (x, y))) =\n    integral (cbox a b)\n     (\\<lambda>x. integral (cbox (g1 x) (g2 x)) (\\<lambda>y. g (x, y)))", "then"], ["proof (chain)\npicking this:\n  ((\\<lambda>x.\n       integral (cbox (g1 x) (g2 x)) (\\<lambda>y. g (x, y))) has_integral\n   integral UNIV f)\n   (cbox a b)", "show ?thesis"], ["proof (prove)\nusing this:\n  ((\\<lambda>x.\n       integral (cbox (g1 x) (g2 x)) (\\<lambda>y. g (x, y))) has_integral\n   integral UNIV f)\n   (cbox a b)\n\ngoal (1 subgoal):\n 1. integral UNIV (\\<lambda>x. integral UNIV (\\<lambda>y. f (x, y))) =\n    integral (cbox a b)\n     (\\<lambda>x. integral (cbox (g1 x) (g2 x)) (\\<lambda>y. g (x, y)))", "using two_D_integral_to_one_D"], ["proof (prove)\nusing this:\n  ((\\<lambda>x.\n       integral (cbox (g1 x) (g2 x)) (\\<lambda>y. g (x, y))) has_integral\n   integral UNIV f)\n   (cbox a b)\n  integral UNIV f =\n  integral UNIV (\\<lambda>x. integral UNIV (\\<lambda>y. f (x, y)))\n\ngoal (1 subgoal):\n 1. integral UNIV (\\<lambda>x. integral UNIV (\\<lambda>y. f (x, y))) =\n    integral (cbox a b)\n     (\\<lambda>x. integral (cbox (g1 x) (g2 x)) (\\<lambda>y. g (x, y)))", "by (simp add: integral_unique)"], ["proof (state)\nthis:\n  integral UNIV (\\<lambda>x. integral UNIV (\\<lambda>y. f (x, y))) =\n  integral (cbox a b)\n   (\\<lambda>x. integral (cbox (g1 x) (g2 x)) (\\<lambda>y. g (x, y)))\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  integral UNIV (\\<lambda>x. integral UNIV (\\<lambda>y. f (x, y))) =\n  integral (cbox a b)\n   (\\<lambda>x. integral (cbox (g1 x) (g2 x)) (\\<lambda>y. g (x, y)))\n\ngoal (1 subgoal):\n 1. integral s g =\n    integral (cbox a b)\n     (\\<lambda>x. integral (cbox (g1 x) (g2 x)) (\\<lambda>y. g (x, y)))", "have f_integrable:\"f integrable_on UNIV\""], ["proof (prove)\ngoal (1 subgoal):\n 1. f integrable_on UNIV", "using fun_lesbegue_integrable and integrable_on_lborel"], ["proof (prove)\nusing this:\n  integrable lborel f\n  integrable lborel ?f \\<Longrightarrow> ?f integrable_on UNIV\n\ngoal (1 subgoal):\n 1. f integrable_on UNIV", "by auto"], ["proof (state)\nthis:\n  f integrable_on UNIV\n\ngoal (1 subgoal):\n 1. integral s g =\n    integral (cbox a b)\n     (\\<lambda>x. integral (cbox (g1 x) (g2 x)) (\\<lambda>y. g (x, y)))", "then"], ["proof (chain)\npicking this:\n  f integrable_on UNIV", "have LHS: \"integral UNIV f = integral s g\""], ["proof (prove)\nusing this:\n  f integrable_on UNIV\n\ngoal (1 subgoal):\n 1. integral UNIV f = integral s g", "apply (simp add: f_is_g_indicator)"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>x. if x \\<in> s then g x else (0::'c)) integrable_on\n    UNIV \\<Longrightarrow>\n    integral UNIV (\\<lambda>x. if x \\<in> s then g x else (0::'c)) =\n    integral s g", "using integrable_restrict_UNIV\n      integral_restrict_UNIV"], ["proof (prove)\nusing this:\n  ((\\<lambda>x. if x \\<in> ?s then ?f x else (0::?'a)) integrable_on UNIV) =\n  (?f integrable_on ?s)\n  integral UNIV (\\<lambda>x. if x \\<in> ?S then ?f x else (0::?'a)) =\n  integral ?S ?f\n\ngoal (1 subgoal):\n 1. (\\<lambda>x. if x \\<in> s then g x else (0::'c)) integrable_on\n    UNIV \\<Longrightarrow>\n    integral UNIV (\\<lambda>x. if x \\<in> s then g x else (0::'c)) =\n    integral s g", "by auto"], ["proof (state)\nthis:\n  integral UNIV f = integral s g\n\ngoal (1 subgoal):\n 1. integral s g =\n    integral (cbox a b)\n     (\\<lambda>x. integral (cbox (g1 x) (g2 x)) (\\<lambda>y. g (x, y)))", "then"], ["proof (chain)\npicking this:\n  integral UNIV f = integral s g", "show ?thesis"], ["proof (prove)\nusing this:\n  integral UNIV f = integral s g\n\ngoal (1 subgoal):\n 1. integral s g =\n    integral (cbox a b)\n     (\\<lambda>x. integral (cbox (g1 x) (g2 x)) (\\<lambda>y. g (x, y)))", "using RHS and two_D_integral_to_one_D"], ["proof (prove)\nusing this:\n  integral UNIV f = integral s g\n  integral UNIV (\\<lambda>x. integral UNIV (\\<lambda>y. f (x, y))) =\n  integral (cbox a b)\n   (\\<lambda>x. integral (cbox (g1 x) (g2 x)) (\\<lambda>y. g (x, y)))\n  integral UNIV f =\n  integral UNIV (\\<lambda>x. integral UNIV (\\<lambda>y. f (x, y)))\n\ngoal (1 subgoal):\n 1. integral s g =\n    integral (cbox a b)\n     (\\<lambda>x. integral (cbox (g1 x) (g2 x)) (\\<lambda>y. g (x, y)))", "by auto"], ["proof (state)\nthis:\n  integral s g =\n  integral (cbox a b)\n   (\\<lambda>x. integral (cbox (g1 x) (g2 x)) (\\<lambda>y. g (x, y)))\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma gauge_integral_Fubini_curve_bounded_region_y:\n  fixes f g :: \"('a::euclidean_space * 'b::euclidean_space) \\<Rightarrow> 'c::euclidean_space\" and\n    g1 g2:: \"'b \\<Rightarrow> 'a\" and\n    s:: \"('a * 'b) set\"\n  assumes fun_lesbegue_integrable: \"integrable lborel f\" and\n    y_axis_gauge_integrable: \"\\<And>x. (\\<lambda>y. f(y, x)) integrable_on UNIV\" and\n    (*IS THIS redundant? NO IT IS NOT*)\n    y_axis_integral_measurable: \"(\\<lambda>x. integral UNIV (\\<lambda>y. f(y, x))) \\<in> borel_measurable lborel\" and\n    f_is_g_indicator: \"f = (\\<lambda>x. if x \\<in> s then g x else 0)\" and\n    s_is_bounded_by_g1_and_g2: \"s = {(y, x). (\\<forall>i\\<in>Basis. a \\<bullet> i \\<le> x \\<bullet> i \\<and> x \\<bullet> i \\<le> b \\<bullet> i) \\<and>\n                                                   (\\<forall>i\\<in>Basis. (g1 x) \\<bullet> i \\<le> y \\<bullet> i \\<and> y \\<bullet> i \\<le> (g2 x) \\<bullet> i)}\"\n  shows \"integral s g = integral (cbox a b) (\\<lambda>x. integral (cbox (g1 x) (g2 x)) (\\<lambda>y. g(y, x)))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. integral s g =\n    integral (cbox a b)\n     (\\<lambda>x. integral (cbox (g1 x) (g2 x)) (\\<lambda>y. g (y, x)))", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. integral s g =\n    integral (cbox a b)\n     (\\<lambda>x. integral (cbox (g1 x) (g2 x)) (\\<lambda>y. g (y, x)))", "have two_D_integral_to_one_D: \"integral UNIV f = integral UNIV (\\<lambda>x. integral UNIV (\\<lambda>y. f(y, x)))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. integral UNIV f =\n    integral UNIV (\\<lambda>x. integral UNIV (\\<lambda>y. f (y, x)))", "using gauge_integral_Fubini_universe_y and fun_lesbegue_integrable and y_axis_integral_measurable"], ["proof (prove)\nusing this:\n  \\<lbrakk>integrable lborel ?f;\n   (\\<lambda>x. integral UNIV (\\<lambda>y. ?f (y, x)))\n   \\<in> borel_measurable lborel\\<rbrakk>\n  \\<Longrightarrow> integral UNIV ?f =\n                    integral UNIV\n                     (\\<lambda>x. integral UNIV (\\<lambda>y. ?f (y, x)))\n  \\<lbrakk>integrable lborel ?f;\n   (\\<lambda>x. integral UNIV (\\<lambda>y. ?f (y, x)))\n   \\<in> borel_measurable lborel\\<rbrakk>\n  \\<Longrightarrow> (\\<lambda>x.\n                        integral UNIV (\\<lambda>y. ?f (y, x))) integrable_on\n                    UNIV\n  integrable lborel f\n  (\\<lambda>x. integral UNIV (\\<lambda>y. f (y, x)))\n  \\<in> borel_measurable lborel\n\ngoal (1 subgoal):\n 1. integral UNIV f =\n    integral UNIV (\\<lambda>x. integral UNIV (\\<lambda>y. f (y, x)))", "by auto"], ["proof (state)\nthis:\n  integral UNIV f =\n  integral UNIV (\\<lambda>x. integral UNIV (\\<lambda>y. f (y, x)))\n\ngoal (1 subgoal):\n 1. integral s g =\n    integral (cbox a b)\n     (\\<lambda>x. integral (cbox (g1 x) (g2 x)) (\\<lambda>y. g (y, x)))", "have one_d_integral_integrable: \"(\\<lambda>x. integral UNIV (\\<lambda>y. f(y, x))) integrable_on UNIV\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>x. integral UNIV (\\<lambda>y. f (y, x))) integrable_on UNIV", "using gauge_integral_Fubini_universe_y(2) and assms"], ["proof (prove)\nusing this:\n  \\<lbrakk>integrable lborel ?f;\n   (\\<lambda>x. integral UNIV (\\<lambda>y. ?f (y, x)))\n   \\<in> borel_measurable lborel\\<rbrakk>\n  \\<Longrightarrow> (\\<lambda>x.\n                        integral UNIV (\\<lambda>y. ?f (y, x))) integrable_on\n                    UNIV\n  integrable lborel f\n  (\\<lambda>y. f (y, ?x)) integrable_on UNIV\n  (\\<lambda>x. integral UNIV (\\<lambda>y. f (y, x)))\n  \\<in> borel_measurable lborel\n  f = (\\<lambda>x. if x \\<in> s then g x else (0::'c))\n  s =\n  {(y, x).\n   (\\<forall>i\\<in>Basis.\n       a \\<bullet> i \\<le> x \\<bullet> i \\<and>\n       x \\<bullet> i \\<le> b \\<bullet> i) \\<and>\n   (\\<forall>i\\<in>Basis.\n       g1 x \\<bullet> i \\<le> y \\<bullet> i \\<and>\n       y \\<bullet> i \\<le> g2 x \\<bullet> i)}\n\ngoal (1 subgoal):\n 1. (\\<lambda>x. integral UNIV (\\<lambda>y. f (y, x))) integrable_on UNIV", "by blast"], ["proof (state)\nthis:\n  (\\<lambda>x. integral UNIV (\\<lambda>y. f (y, x))) integrable_on UNIV\n\ngoal (1 subgoal):\n 1. integral s g =\n    integral (cbox a b)\n     (\\<lambda>x. integral (cbox (g1 x) (g2 x)) (\\<lambda>y. g (y, x)))", "have case_y_in_range:\n    \"\\<forall> x \\<in> cbox a b. integral (cbox (g1 x) (g2 x)) (\\<lambda>y. g(y, x)) = integral UNIV (\\<lambda>y. f(y, x))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>cbox a b.\n       integral (cbox (g1 x) (g2 x)) (\\<lambda>y. g (y, x)) =\n       integral UNIV (\\<lambda>y. f (y, x))", "proof"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> cbox a b \\<Longrightarrow>\n       integral (cbox (g1 x) (g2 x)) (\\<lambda>y. g (y, x)) =\n       integral UNIV (\\<lambda>y. f (y, x))", "fix x:: 'b"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> cbox a b \\<Longrightarrow>\n       integral (cbox (g1 x) (g2 x)) (\\<lambda>y. g (y, x)) =\n       integral UNIV (\\<lambda>y. f (y, x))", "assume within_range: \"x \\<in> (cbox a b)\""], ["proof (state)\nthis:\n  x \\<in> cbox a b\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> cbox a b \\<Longrightarrow>\n       integral (cbox (g1 x) (g2 x)) (\\<lambda>y. g (y, x)) =\n       integral UNIV (\\<lambda>y. f (y, x))", "let ?f_one_D_spec = \"(\\<lambda>y. if y \\<in> (cbox (g1 x) (g2 x)) then g(y, x) else 0)\""], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> cbox a b \\<Longrightarrow>\n       integral (cbox (g1 x) (g2 x)) (\\<lambda>y. g (y, x)) =\n       integral UNIV (\\<lambda>y. f (y, x))", "have f_one_D_region: \"(\\<lambda>y. f(y, x)) = (\\<lambda>y. if y \\<in> cbox (g1 x) (g2 x) then g(y, x) else 0)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>y. f (y, x)) =\n    (\\<lambda>y. if y \\<in> cbox (g1 x) (g2 x) then g (y, x) else (0::'c))", "proof"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>y.\n       f (y, x) = (if y \\<in> cbox (g1 x) (g2 x) then g (y, x) else (0::'c))", "fix y::'a"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>y.\n       f (y, x) = (if y \\<in> cbox (g1 x) (g2 x) then g (y, x) else (0::'c))", "show \"f (y, x) = (if y \\<in> (cbox (g1 x) (g2 x)) then g (y, x) else 0)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. f (y, x) = (if y \\<in> cbox (g1 x) (g2 x) then g (y, x) else (0::'c))", "apply (simp add: f_is_g_indicator s_is_bounded_by_g1_and_g2)"], ["proof (prove)\ngoal (1 subgoal):\n 1. ((\\<forall>i\\<in>Basis.\n         a \\<bullet> i \\<le> x \\<bullet> i \\<and>\n         x \\<bullet> i \\<le> b \\<bullet> i) \\<and>\n     (\\<forall>i\\<in>Basis.\n         g1 x \\<bullet> i \\<le> y \\<bullet> i \\<and>\n         y \\<bullet> i \\<le> g2 x \\<bullet> i) \\<longrightarrow>\n     y \\<notin> cbox (g1 x) (g2 x) \\<longrightarrow>\n     g (y, x) = (0::'c)) \\<and>\n    ((\\<exists>i\\<in>Basis.\n         a \\<bullet> i \\<le> x \\<bullet> i \\<longrightarrow>\n         \\<not> x \\<bullet> i \\<le> b \\<bullet> i) \\<longrightarrow>\n     y \\<in> cbox (g1 x) (g2 x) \\<longrightarrow> g (y, x) = (0::'c)) \\<and>\n    ((\\<exists>i\\<in>Basis.\n         g1 x \\<bullet> i \\<le> y \\<bullet> i \\<longrightarrow>\n         \\<not> y \\<bullet> i \\<le> g2 x \\<bullet> i) \\<longrightarrow>\n     y \\<in> cbox (g1 x) (g2 x) \\<longrightarrow> g (y, x) = (0::'c))", "using within_range"], ["proof (prove)\nusing this:\n  x \\<in> cbox a b\n\ngoal (1 subgoal):\n 1. ((\\<forall>i\\<in>Basis.\n         a \\<bullet> i \\<le> x \\<bullet> i \\<and>\n         x \\<bullet> i \\<le> b \\<bullet> i) \\<and>\n     (\\<forall>i\\<in>Basis.\n         g1 x \\<bullet> i \\<le> y \\<bullet> i \\<and>\n         y \\<bullet> i \\<le> g2 x \\<bullet> i) \\<longrightarrow>\n     y \\<notin> cbox (g1 x) (g2 x) \\<longrightarrow>\n     g (y, x) = (0::'c)) \\<and>\n    ((\\<exists>i\\<in>Basis.\n         a \\<bullet> i \\<le> x \\<bullet> i \\<longrightarrow>\n         \\<not> x \\<bullet> i \\<le> b \\<bullet> i) \\<longrightarrow>\n     y \\<in> cbox (g1 x) (g2 x) \\<longrightarrow> g (y, x) = (0::'c)) \\<and>\n    ((\\<exists>i\\<in>Basis.\n         g1 x \\<bullet> i \\<le> y \\<bullet> i \\<longrightarrow>\n         \\<not> y \\<bullet> i \\<le> g2 x \\<bullet> i) \\<longrightarrow>\n     y \\<in> cbox (g1 x) (g2 x) \\<longrightarrow> g (y, x) = (0::'c))", "apply (simp add: cbox_def)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>i\\<in>Basis.\n       a \\<bullet> i \\<le> x \\<bullet> i \\<and>\n       x \\<bullet> i \\<le> b \\<bullet> i \\<Longrightarrow>\n    (\\<exists>i\\<in>Basis.\n        g1 x \\<bullet> i \\<le> y \\<bullet> i \\<longrightarrow>\n        \\<not> y \\<bullet> i \\<le> g2 x \\<bullet> i) \\<longrightarrow>\n    (\\<forall>i\\<in>Basis.\n        g1 x \\<bullet> i \\<le> y \\<bullet> i \\<and>\n        y \\<bullet> i \\<le> g2 x \\<bullet> i) \\<longrightarrow>\n    g (y, x) = (0::'c)", "by smt"], ["proof (state)\nthis:\n  f (y, x) = (if y \\<in> cbox (g1 x) (g2 x) then g (y, x) else (0::'c))\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  (\\<lambda>y. f (y, x)) =\n  (\\<lambda>y. if y \\<in> cbox (g1 x) (g2 x) then g (y, x) else (0::'c))\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> cbox a b \\<Longrightarrow>\n       integral (cbox (g1 x) (g2 x)) (\\<lambda>y. g (y, x)) =\n       integral UNIV (\\<lambda>y. f (y, x))", "have zero_out_of_bound: \"\\<forall> y.  y \\<notin> cbox (g1 x) (g2 x) \\<longrightarrow> f (y, x) = 0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>y.\n       y \\<notin> cbox (g1 x) (g2 x) \\<longrightarrow> f (y, x) = (0::'c)", "using f_is_g_indicator and s_is_bounded_by_g1_and_g2"], ["proof (prove)\nusing this:\n  f = (\\<lambda>x. if x \\<in> s then g x else (0::'c))\n  s =\n  {(y, x).\n   (\\<forall>i\\<in>Basis.\n       a \\<bullet> i \\<le> x \\<bullet> i \\<and>\n       x \\<bullet> i \\<le> b \\<bullet> i) \\<and>\n   (\\<forall>i\\<in>Basis.\n       g1 x \\<bullet> i \\<le> y \\<bullet> i \\<and>\n       y \\<bullet> i \\<le> g2 x \\<bullet> i)}\n\ngoal (1 subgoal):\n 1. \\<forall>y.\n       y \\<notin> cbox (g1 x) (g2 x) \\<longrightarrow> f (y, x) = (0::'c)", "by (auto simp add: cbox_def)"], ["proof (state)\nthis:\n  \\<forall>y.\n     y \\<notin> cbox (g1 x) (g2 x) \\<longrightarrow> f (y, x) = (0::'c)\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> cbox a b \\<Longrightarrow>\n       integral (cbox (g1 x) (g2 x)) (\\<lambda>y. g (y, x)) =\n       integral UNIV (\\<lambda>y. f (y, x))", "have \"(\\<lambda>y. f(y, x)) integrable_on cbox (g1 x)  (g2 x)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>y. f (y, x)) integrable_on cbox (g1 x) (g2 x)", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. (\\<lambda>y. f (y, x)) integrable_on cbox (g1 x) (g2 x)", "have \"?f_one_D_spec integrable_on UNIV\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>y.\n        if y \\<in> cbox (g1 x) (g2 x) then g (y, x)\n        else (0::'c)) integrable_on\n    UNIV", "using f_one_D_region and y_axis_gauge_integrable"], ["proof (prove)\nusing this:\n  (\\<lambda>y. f (y, x)) =\n  (\\<lambda>y. if y \\<in> cbox (g1 x) (g2 x) then g (y, x) else (0::'c))\n  (\\<lambda>y. f (y, ?x)) integrable_on UNIV\n\ngoal (1 subgoal):\n 1. (\\<lambda>y.\n        if y \\<in> cbox (g1 x) (g2 x) then g (y, x)\n        else (0::'c)) integrable_on\n    UNIV", "by metis"], ["proof (state)\nthis:\n  (\\<lambda>y.\n      if y \\<in> cbox (g1 x) (g2 x) then g (y, x)\n      else (0::'c)) integrable_on\n  UNIV\n\ngoal (1 subgoal):\n 1. (\\<lambda>y. f (y, x)) integrable_on cbox (g1 x) (g2 x)", "then"], ["proof (chain)\npicking this:\n  (\\<lambda>y.\n      if y \\<in> cbox (g1 x) (g2 x) then g (y, x)\n      else (0::'c)) integrable_on\n  UNIV", "have \"?f_one_D_spec integrable_on cbox(g1 x) (g2 x)\""], ["proof (prove)\nusing this:\n  (\\<lambda>y.\n      if y \\<in> cbox (g1 x) (g2 x) then g (y, x)\n      else (0::'c)) integrable_on\n  UNIV\n\ngoal (1 subgoal):\n 1. (\\<lambda>y.\n        if y \\<in> cbox (g1 x) (g2 x) then g (y, x)\n        else (0::'c)) integrable_on\n    cbox (g1 x) (g2 x)", "using integrable_on_subcbox"], ["proof (prove)\nusing this:\n  (\\<lambda>y.\n      if y \\<in> cbox (g1 x) (g2 x) then g (y, x)\n      else (0::'c)) integrable_on\n  UNIV\n  \\<lbrakk>?f integrable_on ?S; cbox ?a ?b \\<subseteq> ?S\\<rbrakk>\n  \\<Longrightarrow> ?f integrable_on cbox ?a ?b\n\ngoal (1 subgoal):\n 1. (\\<lambda>y.\n        if y \\<in> cbox (g1 x) (g2 x) then g (y, x)\n        else (0::'c)) integrable_on\n    cbox (g1 x) (g2 x)", "by blast"], ["proof (state)\nthis:\n  (\\<lambda>y.\n      if y \\<in> cbox (g1 x) (g2 x) then g (y, x)\n      else (0::'c)) integrable_on\n  cbox (g1 x) (g2 x)\n\ngoal (1 subgoal):\n 1. (\\<lambda>y. f (y, x)) integrable_on cbox (g1 x) (g2 x)", "then"], ["proof (chain)\npicking this:\n  (\\<lambda>y.\n      if y \\<in> cbox (g1 x) (g2 x) then g (y, x)\n      else (0::'c)) integrable_on\n  cbox (g1 x) (g2 x)", "show ?thesis"], ["proof (prove)\nusing this:\n  (\\<lambda>y.\n      if y \\<in> cbox (g1 x) (g2 x) then g (y, x)\n      else (0::'c)) integrable_on\n  cbox (g1 x) (g2 x)\n\ngoal (1 subgoal):\n 1. (\\<lambda>y. f (y, x)) integrable_on cbox (g1 x) (g2 x)", "using f_one_D_region"], ["proof (prove)\nusing this:\n  (\\<lambda>y.\n      if y \\<in> cbox (g1 x) (g2 x) then g (y, x)\n      else (0::'c)) integrable_on\n  cbox (g1 x) (g2 x)\n  (\\<lambda>y. f (y, x)) =\n  (\\<lambda>y. if y \\<in> cbox (g1 x) (g2 x) then g (y, x) else (0::'c))\n\ngoal (1 subgoal):\n 1. (\\<lambda>y. f (y, x)) integrable_on cbox (g1 x) (g2 x)", "by auto"], ["proof (state)\nthis:\n  (\\<lambda>y. f (y, x)) integrable_on cbox (g1 x) (g2 x)\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  (\\<lambda>y. f (y, x)) integrable_on cbox (g1 x) (g2 x)\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> cbox a b \\<Longrightarrow>\n       integral (cbox (g1 x) (g2 x)) (\\<lambda>y. g (y, x)) =\n       integral UNIV (\\<lambda>y. f (y, x))", "then"], ["proof (chain)\npicking this:\n  (\\<lambda>y. f (y, x)) integrable_on cbox (g1 x) (g2 x)", "have f_integrale_y: \"((\\<lambda>y. f(y, x)) has_integral (integral (cbox (g1 x) (g2 x)) (\\<lambda>y. f(y,x)))) (cbox (g1 x) (g2 x))\""], ["proof (prove)\nusing this:\n  (\\<lambda>y. f (y, x)) integrable_on cbox (g1 x) (g2 x)\n\ngoal (1 subgoal):\n 1. ((\\<lambda>y. f (y, x)) has_integral\n     integral (cbox (g1 x) (g2 x)) (\\<lambda>y. f (y, x)))\n     (cbox (g1 x) (g2 x))", "using integrable_integral and within_range and y_axis_gauge_integrable"], ["proof (prove)\nusing this:\n  (\\<lambda>y. f (y, x)) integrable_on cbox (g1 x) (g2 x)\n  ?f integrable_on ?i \\<Longrightarrow> (?f has_integral integral ?i ?f) ?i\n  x \\<in> cbox a b\n  (\\<lambda>y. f (y, ?x)) integrable_on UNIV\n\ngoal (1 subgoal):\n 1. ((\\<lambda>y. f (y, x)) has_integral\n     integral (cbox (g1 x) (g2 x)) (\\<lambda>y. f (y, x)))\n     (cbox (g1 x) (g2 x))", "by auto"], ["proof (state)\nthis:\n  ((\\<lambda>y. f (y, x)) has_integral\n   integral (cbox (g1 x) (g2 x)) (\\<lambda>y. f (y, x)))\n   (cbox (g1 x) (g2 x))\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> cbox a b \\<Longrightarrow>\n       integral (cbox (g1 x) (g2 x)) (\\<lambda>y. g (y, x)) =\n       integral UNIV (\\<lambda>y. f (y, x))", "have \"integral (cbox (g1 x)  (g2 x)) (\\<lambda>y. f (y, x)) = integral UNIV (\\<lambda>y. f (y, x))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. integral (cbox (g1 x) (g2 x)) (\\<lambda>y. f (y, x)) =\n    integral UNIV (\\<lambda>y. f (y, x))", "using has_integral_on_superset[OF f_integrale_y _ Set.subset_UNIV] zero_out_of_bound"], ["proof (prove)\nusing this:\n  (\\<And>xa.\n      xa \\<notin> cbox (g1 x) (g2 x) \\<Longrightarrow>\n      f (xa, x) = (0::'c)) \\<Longrightarrow>\n  ((\\<lambda>y. f (y, x)) has_integral\n   integral (cbox (g1 x) (g2 x)) (\\<lambda>y. f (y, x)))\n   UNIV\n  \\<forall>y.\n     y \\<notin> cbox (g1 x) (g2 x) \\<longrightarrow> f (y, x) = (0::'c)\n\ngoal (1 subgoal):\n 1. integral (cbox (g1 x) (g2 x)) (\\<lambda>y. f (y, x)) =\n    integral UNIV (\\<lambda>y. f (y, x))", "by (simp add: integral_unique)"], ["proof (state)\nthis:\n  integral (cbox (g1 x) (g2 x)) (\\<lambda>y. f (y, x)) =\n  integral UNIV (\\<lambda>y. f (y, x))\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> cbox a b \\<Longrightarrow>\n       integral (cbox (g1 x) (g2 x)) (\\<lambda>y. g (y, x)) =\n       integral UNIV (\\<lambda>y. f (y, x))", "then"], ["proof (chain)\npicking this:\n  integral (cbox (g1 x) (g2 x)) (\\<lambda>y. f (y, x)) =\n  integral UNIV (\\<lambda>y. f (y, x))", "have \"((\\<lambda>y. f(y, x)) has_integral integral UNIV (\\<lambda>y. f (y, x))) (cbox (g1 x) (g2 x))\""], ["proof (prove)\nusing this:\n  integral (cbox (g1 x) (g2 x)) (\\<lambda>y. f (y, x)) =\n  integral UNIV (\\<lambda>y. f (y, x))\n\ngoal (1 subgoal):\n 1. ((\\<lambda>y. f (y, x)) has_integral\n     integral UNIV (\\<lambda>y. f (y, x)))\n     (cbox (g1 x) (g2 x))", "using f_integrale_y"], ["proof (prove)\nusing this:\n  integral (cbox (g1 x) (g2 x)) (\\<lambda>y. f (y, x)) =\n  integral UNIV (\\<lambda>y. f (y, x))\n  ((\\<lambda>y. f (y, x)) has_integral\n   integral (cbox (g1 x) (g2 x)) (\\<lambda>y. f (y, x)))\n   (cbox (g1 x) (g2 x))\n\ngoal (1 subgoal):\n 1. ((\\<lambda>y. f (y, x)) has_integral\n     integral UNIV (\\<lambda>y. f (y, x)))\n     (cbox (g1 x) (g2 x))", "by simp"], ["proof (state)\nthis:\n  ((\\<lambda>y. f (y, x)) has_integral integral UNIV (\\<lambda>y. f (y, x)))\n   (cbox (g1 x) (g2 x))\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> cbox a b \\<Longrightarrow>\n       integral (cbox (g1 x) (g2 x)) (\\<lambda>y. g (y, x)) =\n       integral UNIV (\\<lambda>y. f (y, x))", "then"], ["proof (chain)\npicking this:\n  ((\\<lambda>y. f (y, x)) has_integral integral UNIV (\\<lambda>y. f (y, x)))\n   (cbox (g1 x) (g2 x))", "have \"((\\<lambda>y. g(y, x)) has_integral integral UNIV (\\<lambda>y. f (y, x))) (cbox (g1 x)(g2 x))\""], ["proof (prove)\nusing this:\n  ((\\<lambda>y. f (y, x)) has_integral integral UNIV (\\<lambda>y. f (y, x)))\n   (cbox (g1 x) (g2 x))\n\ngoal (1 subgoal):\n 1. ((\\<lambda>y. g (y, x)) has_integral\n     integral UNIV (\\<lambda>y. f (y, x)))\n     (cbox (g1 x) (g2 x))", "using  Henstock_Kurzweil_Integration.has_integral_restrict [OF subset_refl ] and\n        f_one_D_region"], ["proof (prove)\nusing this:\n  ((\\<lambda>y. f (y, x)) has_integral integral UNIV (\\<lambda>y. f (y, x)))\n   (cbox (g1 x) (g2 x))\n  ((\\<lambda>x. if x \\<in> ?S then ?f x else (0::?'b)) has_integral ?i) ?S =\n  (?f has_integral ?i) ?S\n  (\\<lambda>y. f (y, x)) =\n  (\\<lambda>y. if y \\<in> cbox (g1 x) (g2 x) then g (y, x) else (0::'c))\n\ngoal (1 subgoal):\n 1. ((\\<lambda>y. g (y, x)) has_integral\n     integral UNIV (\\<lambda>y. f (y, x)))\n     (cbox (g1 x) (g2 x))", "by (smt has_integral_eq)"], ["proof (state)\nthis:\n  ((\\<lambda>y. g (y, x)) has_integral integral UNIV (\\<lambda>y. f (y, x)))\n   (cbox (g1 x) (g2 x))\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> cbox a b \\<Longrightarrow>\n       integral (cbox (g1 x) (g2 x)) (\\<lambda>y. g (y, x)) =\n       integral UNIV (\\<lambda>y. f (y, x))", "then"], ["proof (chain)\npicking this:\n  ((\\<lambda>y. g (y, x)) has_integral integral UNIV (\\<lambda>y. f (y, x)))\n   (cbox (g1 x) (g2 x))", "show \"integral (cbox (g1 x) (g2 x)) (\\<lambda>y. g (y, x)) = integral UNIV (\\<lambda>y. f (y, x))\""], ["proof (prove)\nusing this:\n  ((\\<lambda>y. g (y, x)) has_integral integral UNIV (\\<lambda>y. f (y, x)))\n   (cbox (g1 x) (g2 x))\n\ngoal (1 subgoal):\n 1. integral (cbox (g1 x) (g2 x)) (\\<lambda>y. g (y, x)) =\n    integral UNIV (\\<lambda>y. f (y, x))", "by auto"], ["proof (state)\nthis:\n  integral (cbox (g1 x) (g2 x)) (\\<lambda>y. g (y, x)) =\n  integral UNIV (\\<lambda>y. f (y, x))\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<forall>x\\<in>cbox a b.\n     integral (cbox (g1 x) (g2 x)) (\\<lambda>y. g (y, x)) =\n     integral UNIV (\\<lambda>y. f (y, x))\n\ngoal (1 subgoal):\n 1. integral s g =\n    integral (cbox a b)\n     (\\<lambda>x. integral (cbox (g1 x) (g2 x)) (\\<lambda>y. g (y, x)))", "have case_y_not_in_range:\n    \"\\<forall> x. x \\<notin> cbox a  b \\<longrightarrow> integral UNIV (\\<lambda>y. f(y, x)) = 0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>x.\n       x \\<notin> cbox a b \\<longrightarrow>\n       integral UNIV (\\<lambda>y. f (y, x)) = (0::'c)", "proof"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<notin> cbox a b \\<longrightarrow>\n       integral UNIV (\\<lambda>y. f (y, x)) = (0::'c)", "fix x::'b"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<notin> cbox a b \\<longrightarrow>\n       integral UNIV (\\<lambda>y. f (y, x)) = (0::'c)", "have \"x \\<notin> (cbox a b) \\<longrightarrow> (\\<forall>y. f(y, x) = 0)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. x \\<notin> cbox a b \\<longrightarrow> (\\<forall>y. f (y, x) = (0::'c))", "apply  (simp add: s_is_bounded_by_g1_and_g2 f_is_g_indicator cbox_def)"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<exists>i\\<in>Basis.\n        a \\<bullet> i \\<le> x \\<bullet> i \\<longrightarrow>\n        \\<not> x \\<bullet> i \\<le> b \\<bullet> i) \\<longrightarrow>\n    (\\<forall>y.\n        (\\<forall>i\\<in>Basis.\n            a \\<bullet> i \\<le> x \\<bullet> i \\<and>\n            x \\<bullet> i \\<le> b \\<bullet> i) \\<and>\n        (\\<forall>i\\<in>Basis.\n            g1 x \\<bullet> i \\<le> y \\<bullet> i \\<and>\n            y \\<bullet> i \\<le> g2 x \\<bullet> i) \\<longrightarrow>\n        g (y, x) = (0::'c))", "by auto"], ["proof (state)\nthis:\n  x \\<notin> cbox a b \\<longrightarrow> (\\<forall>y. f (y, x) = (0::'c))\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<notin> cbox a b \\<longrightarrow>\n       integral UNIV (\\<lambda>y. f (y, x)) = (0::'c)", "then"], ["proof (chain)\npicking this:\n  x \\<notin> cbox a b \\<longrightarrow> (\\<forall>y. f (y, x) = (0::'c))", "show \"x \\<notin> cbox a b \\<longrightarrow> integral UNIV (\\<lambda>y. f (y, x)) = 0\""], ["proof (prove)\nusing this:\n  x \\<notin> cbox a b \\<longrightarrow> (\\<forall>y. f (y, x) = (0::'c))\n\ngoal (1 subgoal):\n 1. x \\<notin> cbox a b \\<longrightarrow>\n    integral UNIV (\\<lambda>y. f (y, x)) = (0::'c)", "by (simp)"], ["proof (state)\nthis:\n  x \\<notin> cbox a b \\<longrightarrow>\n  integral UNIV (\\<lambda>y. f (y, x)) = (0::'c)\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<forall>x.\n     x \\<notin> cbox a b \\<longrightarrow>\n     integral UNIV (\\<lambda>y. f (y, x)) = (0::'c)\n\ngoal (1 subgoal):\n 1. integral s g =\n    integral (cbox a b)\n     (\\<lambda>x. integral (cbox (g1 x) (g2 x)) (\\<lambda>y. g (y, x)))", "have RHS: \"integral UNIV (\\<lambda>x. integral UNIV (\\<lambda>y. f(y, x))) = integral (cbox a b) (\\<lambda>x. integral (cbox (g1 x) (g2 x)) (\\<lambda>y. g(y, x)))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. integral UNIV (\\<lambda>x. integral UNIV (\\<lambda>y. f (y, x))) =\n    integral (cbox a b)\n     (\\<lambda>x. integral (cbox (g1 x) (g2 x)) (\\<lambda>y. g (y, x)))", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. integral UNIV (\\<lambda>x. integral UNIV (\\<lambda>y. f (y, x))) =\n    integral (cbox a b)\n     (\\<lambda>x. integral (cbox (g1 x) (g2 x)) (\\<lambda>y. g (y, x)))", "let ?first_integral = \"(\\<lambda>x. integral (cbox (g1 x) (g2 x)) (\\<lambda>y. g(y, x)))\""], ["proof (state)\ngoal (1 subgoal):\n 1. integral UNIV (\\<lambda>x. integral UNIV (\\<lambda>y. f (y, x))) =\n    integral (cbox a b)\n     (\\<lambda>x. integral (cbox (g1 x) (g2 x)) (\\<lambda>y. g (y, x)))", "let ?x_integral_cases = \"(\\<lambda>x. if x \\<in> cbox a b then  ?first_integral x else 0)\""], ["proof (state)\ngoal (1 subgoal):\n 1. integral UNIV (\\<lambda>x. integral UNIV (\\<lambda>y. f (y, x))) =\n    integral (cbox a b)\n     (\\<lambda>x. integral (cbox (g1 x) (g2 x)) (\\<lambda>y. g (y, x)))", "have y_integral_cases_integral: \"(\\<lambda>x. integral UNIV (\\<lambda>y. f(y, x))) = ?x_integral_cases\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>x. integral UNIV (\\<lambda>y. f (y, x))) =\n    (\\<lambda>x.\n        if x \\<in> cbox a b\n        then integral (cbox (g1 x) (g2 x)) (\\<lambda>y. g (y, x))\n        else (0::'c))", "using case_y_in_range and case_y_not_in_range"], ["proof (prove)\nusing this:\n  \\<forall>x\\<in>cbox a b.\n     integral (cbox (g1 x) (g2 x)) (\\<lambda>y. g (y, x)) =\n     integral UNIV (\\<lambda>y. f (y, x))\n  \\<forall>x.\n     x \\<notin> cbox a b \\<longrightarrow>\n     integral UNIV (\\<lambda>y. f (y, x)) = (0::'c)\n\ngoal (1 subgoal):\n 1. (\\<lambda>x. integral UNIV (\\<lambda>y. f (y, x))) =\n    (\\<lambda>x.\n        if x \\<in> cbox a b\n        then integral (cbox (g1 x) (g2 x)) (\\<lambda>y. g (y, x))\n        else (0::'c))", "by auto"], ["proof (state)\nthis:\n  (\\<lambda>x. integral UNIV (\\<lambda>y. f (y, x))) =\n  (\\<lambda>x.\n      if x \\<in> cbox a b\n      then integral (cbox (g1 x) (g2 x)) (\\<lambda>y. g (y, x))\n      else (0::'c))\n\ngoal (1 subgoal):\n 1. integral UNIV (\\<lambda>x. integral UNIV (\\<lambda>y. f (y, x))) =\n    integral (cbox a b)\n     (\\<lambda>x. integral (cbox (g1 x) (g2 x)) (\\<lambda>y. g (y, x)))", "have \"((\\<lambda>x. integral UNIV (\\<lambda>y. f(y, x))) has_integral (integral UNIV f)) UNIV\""], ["proof (prove)\ngoal (1 subgoal):\n 1. ((\\<lambda>x. integral UNIV (\\<lambda>y. f (y, x))) has_integral\n     integral UNIV f)\n     UNIV", "using two_D_integral_to_one_D\n        one_d_integral_integrable"], ["proof (prove)\nusing this:\n  integral UNIV f =\n  integral UNIV (\\<lambda>x. integral UNIV (\\<lambda>y. f (y, x)))\n  (\\<lambda>x. integral UNIV (\\<lambda>y. f (y, x))) integrable_on UNIV\n\ngoal (1 subgoal):\n 1. ((\\<lambda>x. integral UNIV (\\<lambda>y. f (y, x))) has_integral\n     integral UNIV f)\n     UNIV", "by auto"], ["proof (state)\nthis:\n  ((\\<lambda>x. integral UNIV (\\<lambda>y. f (y, x))) has_integral\n   integral UNIV f)\n   UNIV\n\ngoal (1 subgoal):\n 1. integral UNIV (\\<lambda>x. integral UNIV (\\<lambda>y. f (y, x))) =\n    integral (cbox a b)\n     (\\<lambda>x. integral (cbox (g1 x) (g2 x)) (\\<lambda>y. g (y, x)))", "then"], ["proof (chain)\npicking this:\n  ((\\<lambda>x. integral UNIV (\\<lambda>y. f (y, x))) has_integral\n   integral UNIV f)\n   UNIV", "have \"(?x_integral_cases has_integral (integral UNIV f)) UNIV\""], ["proof (prove)\nusing this:\n  ((\\<lambda>x. integral UNIV (\\<lambda>y. f (y, x))) has_integral\n   integral UNIV f)\n   UNIV\n\ngoal (1 subgoal):\n 1. ((\\<lambda>x.\n         if x \\<in> cbox a b\n         then integral (cbox (g1 x) (g2 x)) (\\<lambda>y. g (y, x))\n         else (0::'c)) has_integral\n     integral UNIV f)\n     UNIV", "using y_integral_cases_integral"], ["proof (prove)\nusing this:\n  ((\\<lambda>x. integral UNIV (\\<lambda>y. f (y, x))) has_integral\n   integral UNIV f)\n   UNIV\n  (\\<lambda>x. integral UNIV (\\<lambda>y. f (y, x))) =\n  (\\<lambda>x.\n      if x \\<in> cbox a b\n      then integral (cbox (g1 x) (g2 x)) (\\<lambda>y. g (y, x))\n      else (0::'c))\n\ngoal (1 subgoal):\n 1. ((\\<lambda>x.\n         if x \\<in> cbox a b\n         then integral (cbox (g1 x) (g2 x)) (\\<lambda>y. g (y, x))\n         else (0::'c)) has_integral\n     integral UNIV f)\n     UNIV", "by auto"], ["proof (state)\nthis:\n  ((\\<lambda>x.\n       if x \\<in> cbox a b\n       then integral (cbox (g1 x) (g2 x)) (\\<lambda>y. g (y, x))\n       else (0::'c)) has_integral\n   integral UNIV f)\n   UNIV\n\ngoal (1 subgoal):\n 1. integral UNIV (\\<lambda>x. integral UNIV (\\<lambda>y. f (y, x))) =\n    integral (cbox a b)\n     (\\<lambda>x. integral (cbox (g1 x) (g2 x)) (\\<lambda>y. g (y, x)))", "then"], ["proof (chain)\npicking this:\n  ((\\<lambda>x.\n       if x \\<in> cbox a b\n       then integral (cbox (g1 x) (g2 x)) (\\<lambda>y. g (y, x))\n       else (0::'c)) has_integral\n   integral UNIV f)\n   UNIV", "have \"(?first_integral has_integral (integral UNIV f)) (cbox a b)\""], ["proof (prove)\nusing this:\n  ((\\<lambda>x.\n       if x \\<in> cbox a b\n       then integral (cbox (g1 x) (g2 x)) (\\<lambda>y. g (y, x))\n       else (0::'c)) has_integral\n   integral UNIV f)\n   UNIV\n\ngoal (1 subgoal):\n 1. ((\\<lambda>x.\n         integral (cbox (g1 x) (g2 x)) (\\<lambda>y. g (y, x))) has_integral\n     integral UNIV f)\n     (cbox a b)", "using has_integral_restrict_UNIV[of \"cbox a b\" \"?first_integral\" \"integral UNIV f\"]"], ["proof (prove)\nusing this:\n  ((\\<lambda>x.\n       if x \\<in> cbox a b\n       then integral (cbox (g1 x) (g2 x)) (\\<lambda>y. g (y, x))\n       else (0::'c)) has_integral\n   integral UNIV f)\n   UNIV\n  ((\\<lambda>x.\n       if x \\<in> cbox a b\n       then integral (cbox (g1 x) (g2 x)) (\\<lambda>y. g (y, x))\n       else (0::'c)) has_integral\n   integral UNIV f)\n   UNIV =\n  ((\\<lambda>x.\n       integral (cbox (g1 x) (g2 x)) (\\<lambda>y. g (y, x))) has_integral\n   integral UNIV f)\n   (cbox a b)\n\ngoal (1 subgoal):\n 1. ((\\<lambda>x.\n         integral (cbox (g1 x) (g2 x)) (\\<lambda>y. g (y, x))) has_integral\n     integral UNIV f)\n     (cbox a b)", "by auto"], ["proof (state)\nthis:\n  ((\\<lambda>x.\n       integral (cbox (g1 x) (g2 x)) (\\<lambda>y. g (y, x))) has_integral\n   integral UNIV f)\n   (cbox a b)\n\ngoal (1 subgoal):\n 1. integral UNIV (\\<lambda>x. integral UNIV (\\<lambda>y. f (y, x))) =\n    integral (cbox a b)\n     (\\<lambda>x. integral (cbox (g1 x) (g2 x)) (\\<lambda>y. g (y, x)))", "then"], ["proof (chain)\npicking this:\n  ((\\<lambda>x.\n       integral (cbox (g1 x) (g2 x)) (\\<lambda>y. g (y, x))) has_integral\n   integral UNIV f)\n   (cbox a b)", "show ?thesis"], ["proof (prove)\nusing this:\n  ((\\<lambda>x.\n       integral (cbox (g1 x) (g2 x)) (\\<lambda>y. g (y, x))) has_integral\n   integral UNIV f)\n   (cbox a b)\n\ngoal (1 subgoal):\n 1. integral UNIV (\\<lambda>x. integral UNIV (\\<lambda>y. f (y, x))) =\n    integral (cbox a b)\n     (\\<lambda>x. integral (cbox (g1 x) (g2 x)) (\\<lambda>y. g (y, x)))", "using two_D_integral_to_one_D"], ["proof (prove)\nusing this:\n  ((\\<lambda>x.\n       integral (cbox (g1 x) (g2 x)) (\\<lambda>y. g (y, x))) has_integral\n   integral UNIV f)\n   (cbox a b)\n  integral UNIV f =\n  integral UNIV (\\<lambda>x. integral UNIV (\\<lambda>y. f (y, x)))\n\ngoal (1 subgoal):\n 1. integral UNIV (\\<lambda>x. integral UNIV (\\<lambda>y. f (y, x))) =\n    integral (cbox a b)\n     (\\<lambda>x. integral (cbox (g1 x) (g2 x)) (\\<lambda>y. g (y, x)))", "by (simp add: integral_unique)"], ["proof (state)\nthis:\n  integral UNIV (\\<lambda>x. integral UNIV (\\<lambda>y. f (y, x))) =\n  integral (cbox a b)\n   (\\<lambda>x. integral (cbox (g1 x) (g2 x)) (\\<lambda>y. g (y, x)))\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  integral UNIV (\\<lambda>x. integral UNIV (\\<lambda>y. f (y, x))) =\n  integral (cbox a b)\n   (\\<lambda>x. integral (cbox (g1 x) (g2 x)) (\\<lambda>y. g (y, x)))\n\ngoal (1 subgoal):\n 1. integral s g =\n    integral (cbox a b)\n     (\\<lambda>x. integral (cbox (g1 x) (g2 x)) (\\<lambda>y. g (y, x)))", "have f_integrable:\"f integrable_on UNIV\""], ["proof (prove)\ngoal (1 subgoal):\n 1. f integrable_on UNIV", "using fun_lesbegue_integrable and integrable_on_lborel"], ["proof (prove)\nusing this:\n  integrable lborel f\n  integrable lborel ?f \\<Longrightarrow> ?f integrable_on UNIV\n\ngoal (1 subgoal):\n 1. f integrable_on UNIV", "by auto"], ["proof (state)\nthis:\n  f integrable_on UNIV\n\ngoal (1 subgoal):\n 1. integral s g =\n    integral (cbox a b)\n     (\\<lambda>x. integral (cbox (g1 x) (g2 x)) (\\<lambda>y. g (y, x)))", "then"], ["proof (chain)\npicking this:\n  f integrable_on UNIV", "have LHS: \"integral UNIV f = integral s g\""], ["proof (prove)\nusing this:\n  f integrable_on UNIV\n\ngoal (1 subgoal):\n 1. integral UNIV f = integral s g", "apply (simp add: f_is_g_indicator)"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>x. if x \\<in> s then g x else (0::'c)) integrable_on\n    UNIV \\<Longrightarrow>\n    integral UNIV (\\<lambda>x. if x \\<in> s then g x else (0::'c)) =\n    integral s g", "using integrable_restrict_UNIV\n      integral_restrict_UNIV"], ["proof (prove)\nusing this:\n  ((\\<lambda>x. if x \\<in> ?s then ?f x else (0::?'a)) integrable_on UNIV) =\n  (?f integrable_on ?s)\n  integral UNIV (\\<lambda>x. if x \\<in> ?S then ?f x else (0::?'a)) =\n  integral ?S ?f\n\ngoal (1 subgoal):\n 1. (\\<lambda>x. if x \\<in> s then g x else (0::'c)) integrable_on\n    UNIV \\<Longrightarrow>\n    integral UNIV (\\<lambda>x. if x \\<in> s then g x else (0::'c)) =\n    integral s g", "by auto"], ["proof (state)\nthis:\n  integral UNIV f = integral s g\n\ngoal (1 subgoal):\n 1. integral s g =\n    integral (cbox a b)\n     (\\<lambda>x. integral (cbox (g1 x) (g2 x)) (\\<lambda>y. g (y, x)))", "then"], ["proof (chain)\npicking this:\n  integral UNIV f = integral s g", "show ?thesis"], ["proof (prove)\nusing this:\n  integral UNIV f = integral s g\n\ngoal (1 subgoal):\n 1. integral s g =\n    integral (cbox a b)\n     (\\<lambda>x. integral (cbox (g1 x) (g2 x)) (\\<lambda>y. g (y, x)))", "using RHS and two_D_integral_to_one_D"], ["proof (prove)\nusing this:\n  integral UNIV f = integral s g\n  integral UNIV (\\<lambda>x. integral UNIV (\\<lambda>y. f (y, x))) =\n  integral (cbox a b)\n   (\\<lambda>x. integral (cbox (g1 x) (g2 x)) (\\<lambda>y. g (y, x)))\n  integral UNIV f =\n  integral UNIV (\\<lambda>x. integral UNIV (\\<lambda>y. f (y, x)))\n\ngoal (1 subgoal):\n 1. integral s g =\n    integral (cbox a b)\n     (\\<lambda>x. integral (cbox (g1 x) (g2 x)) (\\<lambda>y. g (y, x)))", "by auto"], ["proof (state)\nthis:\n  integral s g =\n  integral (cbox a b)\n   (\\<lambda>x. integral (cbox (g1 x) (g2 x)) (\\<lambda>y. g (y, x)))\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma gauge_integral_by_substitution:\n  fixes f::\"(real \\<Rightarrow> real)\" and\n    g::\"(real \\<Rightarrow> real)\" and\n    g'::\"real \\<Rightarrow> real\" and\n    a::\"real\" and\n    b::\"real\"\n  assumes a_le_b: \"a \\<le> b\" and\n    ga_le_gb: \"g a \\<le> g b\" and\n    g'_derivative: \"\\<forall>x \\<in> {a..b}. (g has_vector_derivative (g' x)) (at x within {a..b})\" and\n    g'_continuous: \"continuous_on {a..b} g'\" and\n    f_continuous: \"continuous_on (g ` {a..b}) f\"\n  shows \"integral {g a..g b} (f) = integral {a..b} (\\<lambda>x. f(g x) * (g' x))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. integral {g a..g b} f = integral {a..b} (\\<lambda>x. f (g x) * g' x)", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. integral {g a..g b} f = integral {a..b} (\\<lambda>x. f (g x) * g' x)", "have \"\\<forall>x \\<in> {a..b}. (g has_real_derivative (g' x)) (at x within {a..b})\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>{a..b}. (g has_real_derivative g' x) (at x within {a..b})", "using has_field_derivative_iff_has_vector_derivative[of \"g\"] and g'_derivative"], ["proof (prove)\nusing this:\n  (g has_real_derivative ?y) ?F = (g has_vector_derivative ?y) ?F\n  \\<forall>x\\<in>{a..b}. (g has_vector_derivative g' x) (at x within {a..b})\n\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>{a..b}. (g has_real_derivative g' x) (at x within {a..b})", "by auto"], ["proof (state)\nthis:\n  \\<forall>x\\<in>{a..b}. (g has_real_derivative g' x) (at x within {a..b})\n\ngoal (1 subgoal):\n 1. integral {g a..g b} f = integral {a..b} (\\<lambda>x. f (g x) * g' x)", "then"], ["proof (chain)\npicking this:\n  \\<forall>x\\<in>{a..b}. (g has_real_derivative g' x) (at x within {a..b})", "have 2: \"interval_lebesgue_integral lborel (ereal (a)) (ereal (b)) (\\<lambda>x. g' x *\\<^sub>R f (g x))\n                    = interval_lebesgue_integral lborel (ereal (g a)) (ereal (g b)) f\""], ["proof (prove)\nusing this:\n  \\<forall>x\\<in>{a..b}. (g has_real_derivative g' x) (at x within {a..b})\n\ngoal (1 subgoal):\n 1. LBINT x=ereal a..ereal b. g' x *\\<^sub>R f (g x) =\n    interval_lebesgue_integral lborel (ereal (g a)) (ereal (g b)) f", "using interval_integral_substitution_finite[of \"a\" \"b\" \"g\" \"g'\" \"f\"] and g'_continuous and a_le_b and f_continuous"], ["proof (prove)\nusing this:\n  \\<forall>x\\<in>{a..b}. (g has_real_derivative g' x) (at x within {a..b})\n  \\<lbrakk>a \\<le> b;\n   \\<And>x.\n      \\<lbrakk>a \\<le> x; x \\<le> b\\<rbrakk>\n      \\<Longrightarrow> (g has_real_derivative g' x) (at x within {a..b});\n   continuous_on (g ` {a..b}) f; continuous_on {a..b} g'\\<rbrakk>\n  \\<Longrightarrow> LBINT x=ereal a..ereal b. g' x *\\<^sub>R f (g x) =\n                    interval_lebesgue_integral lborel (ereal (g a))\n                     (ereal (g b)) f\n  continuous_on {a..b} g'\n  a \\<le> b\n  continuous_on (g ` {a..b}) f\n\ngoal (1 subgoal):\n 1. LBINT x=ereal a..ereal b. g' x *\\<^sub>R f (g x) =\n    interval_lebesgue_integral lborel (ereal (g a)) (ereal (g b)) f", "by auto"], ["proof (state)\nthis:\n  LBINT x=ereal a..ereal b. g' x *\\<^sub>R f (g x) =\n  interval_lebesgue_integral lborel (ereal (g a)) (ereal (g b)) f\n\ngoal (1 subgoal):\n 1. integral {g a..g b} f = integral {a..b} (\\<lambda>x. f (g x) * g' x)", "have g_continuous: \"continuous_on {a .. b}  g\""], ["proof (prove)\ngoal (1 subgoal):\n 1. continuous_on {a..b} g", "using Derivative.differentiable_imp_continuous_on"], ["proof (prove)\nusing this:\n  ?f differentiable_on ?s \\<Longrightarrow> continuous_on ?s ?f\n\ngoal (1 subgoal):\n 1. continuous_on {a..b} g", "apply (simp add: differentiable_on_def differentiable_def)"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>f s.\n        \\<forall>x\\<in>s.\n           \\<exists>D.\n              (f has_derivative D) (at x within s) \\<Longrightarrow>\n        continuous_on s f) \\<Longrightarrow>\n    continuous_on {a..b} g", "by (metis continuous_on_vector_derivative g'_derivative)"], ["proof (state)\nthis:\n  continuous_on {a..b} g\n\ngoal (1 subgoal):\n 1. integral {g a..g b} f = integral {a..b} (\\<lambda>x. f (g x) * g' x)", "have \"set_integrable lborel {a .. b} (\\<lambda>x. g' x *\\<^sub>R f (g x))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. set_integrable lborel {a..b} (\\<lambda>x. g' x *\\<^sub>R f (g x))", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. set_integrable lborel {a..b} (\\<lambda>x. g' x *\\<^sub>R f (g x))", "have \"continuous_on {a .. b} (\\<lambda>x. g' x *\\<^sub>R f (g x))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. continuous_on {a..b} (\\<lambda>x. g' x *\\<^sub>R f (g x))", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. continuous_on {a..b} (\\<lambda>x. g' x *\\<^sub>R f (g x))", "have \"continuous_on {a .. b} (\\<lambda>x. f (g x))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. continuous_on {a..b} (\\<lambda>x. f (g x))", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. continuous_on {a..b} (\\<lambda>x. f (g x))", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. continuous_on {a..b} (\\<lambda>x. f (g x))", "using Topological_Spaces.continuous_on_compose f_continuous g_continuous"], ["proof (prove)\nusing this:\n  \\<lbrakk>continuous_on ?s ?f; continuous_on (?f ` ?s) ?g\\<rbrakk>\n  \\<Longrightarrow> continuous_on ?s (?g \\<circ> ?f)\n  continuous_on (g ` {a..b}) f\n  continuous_on {a..b} g\n\ngoal (1 subgoal):\n 1. continuous_on {a..b} (\\<lambda>x. f (g x))", "by auto"], ["proof (state)\nthis:\n  continuous_on {a..b} (\\<lambda>x. f (g x))\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  continuous_on {a..b} (\\<lambda>x. f (g x))\n\ngoal (1 subgoal):\n 1. continuous_on {a..b} (\\<lambda>x. g' x *\\<^sub>R f (g x))", "then"], ["proof (chain)\npicking this:\n  continuous_on {a..b} (\\<lambda>x. f (g x))", "show ?thesis"], ["proof (prove)\nusing this:\n  continuous_on {a..b} (\\<lambda>x. f (g x))\n\ngoal (1 subgoal):\n 1. continuous_on {a..b} (\\<lambda>x. g' x *\\<^sub>R f (g x))", "using Limits.continuous_on_mult g'_continuous"], ["proof (prove)\nusing this:\n  continuous_on {a..b} (\\<lambda>x. f (g x))\n  \\<lbrakk>continuous_on ?s ?f; continuous_on ?s ?g\\<rbrakk>\n  \\<Longrightarrow> continuous_on ?s (\\<lambda>x. ?f x * ?g x)\n  continuous_on {a..b} g'\n\ngoal (1 subgoal):\n 1. continuous_on {a..b} (\\<lambda>x. g' x *\\<^sub>R f (g x))", "by auto"], ["proof (state)\nthis:\n  continuous_on {a..b} (\\<lambda>x. g' x *\\<^sub>R f (g x))\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  continuous_on {a..b} (\\<lambda>x. g' x *\\<^sub>R f (g x))\n\ngoal (1 subgoal):\n 1. set_integrable lborel {a..b} (\\<lambda>x. g' x *\\<^sub>R f (g x))", "then"], ["proof (chain)\npicking this:\n  continuous_on {a..b} (\\<lambda>x. g' x *\\<^sub>R f (g x))", "show ?thesis"], ["proof (prove)\nusing this:\n  continuous_on {a..b} (\\<lambda>x. g' x *\\<^sub>R f (g x))\n\ngoal (1 subgoal):\n 1. set_integrable lborel {a..b} (\\<lambda>x. g' x *\\<^sub>R f (g x))", "using borel_integrable_atLeastAtMost'"], ["proof (prove)\nusing this:\n  continuous_on {a..b} (\\<lambda>x. g' x *\\<^sub>R f (g x))\n  continuous_on {?a..?b} ?f \\<Longrightarrow>\n  set_integrable lborel {?a..?b} ?f\n\ngoal (1 subgoal):\n 1. set_integrable lborel {a..b} (\\<lambda>x. g' x *\\<^sub>R f (g x))", "by blast"], ["proof (state)\nthis:\n  set_integrable lborel {a..b} (\\<lambda>x. g' x *\\<^sub>R f (g x))\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  set_integrable lborel {a..b} (\\<lambda>x. g' x *\\<^sub>R f (g x))\n\ngoal (1 subgoal):\n 1. integral {g a..g b} f = integral {a..b} (\\<lambda>x. f (g x) * g' x)", "then"], ["proof (chain)\npicking this:\n  set_integrable lborel {a..b} (\\<lambda>x. g' x *\\<^sub>R f (g x))", "have 0: \"interval_lebesgue_integral lborel (ereal (a)) (ereal (b)) (\\<lambda>x. g' x *\\<^sub>R f (g x))\n                      = integral {a .. b} (\\<lambda>x. g' x *\\<^sub>R f (g x))\""], ["proof (prove)\nusing this:\n  set_integrable lborel {a..b} (\\<lambda>x. g' x *\\<^sub>R f (g x))\n\ngoal (1 subgoal):\n 1. LBINT x=ereal a..ereal b. g' x *\\<^sub>R f (g x) =\n    integral {a..b} (\\<lambda>x. g' x *\\<^sub>R f (g x))", "using a_le_b and interval_integral_eq_integral"], ["proof (prove)\nusing this:\n  set_integrable lborel {a..b} (\\<lambda>x. g' x *\\<^sub>R f (g x))\n  a \\<le> b\n  \\<lbrakk>?a \\<le> ?b; set_integrable lborel {?a..?b} ?f\\<rbrakk>\n  \\<Longrightarrow> interval_lebesgue_integral lborel (ereal ?a) (ereal ?b)\n                     ?f =\n                    integral {?a..?b} ?f\n\ngoal (1 subgoal):\n 1. LBINT x=ereal a..ereal b. g' x *\\<^sub>R f (g x) =\n    integral {a..b} (\\<lambda>x. g' x *\\<^sub>R f (g x))", "by (metis (no_types))"], ["proof (state)\nthis:\n  LBINT x=ereal a..ereal b. g' x *\\<^sub>R f (g x) =\n  integral {a..b} (\\<lambda>x. g' x *\\<^sub>R f (g x))\n\ngoal (1 subgoal):\n 1. integral {g a..g b} f = integral {a..b} (\\<lambda>x. f (g x) * g' x)", "have \"set_integrable lborel {g a .. g b} f\""], ["proof (prove)\ngoal (1 subgoal):\n 1. set_integrable lborel {g a..g b} f", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. set_integrable lborel {g a..g b} f", "have \"continuous_on {g a .. g b} f\""], ["proof (prove)\ngoal (1 subgoal):\n 1. continuous_on {g a..g b} f", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. continuous_on {g a..g b} f", "have \"{g a .. g b} \\<subseteq> g ` {a .. b}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. {g a..g b} \\<subseteq> g ` {a..b}", "using g_continuous"], ["proof (prove)\nusing this:\n  continuous_on {a..b} g\n\ngoal (1 subgoal):\n 1. {g a..g b} \\<subseteq> g ` {a..b}", "by (metis a_le_b atLeastAtMost_iff atLeastatMost_subset_iff continuous_image_closed_interval imageI order_refl)"], ["proof (state)\nthis:\n  {g a..g b} \\<subseteq> g ` {a..b}\n\ngoal (1 subgoal):\n 1. continuous_on {g a..g b} f", "then"], ["proof (chain)\npicking this:\n  {g a..g b} \\<subseteq> g ` {a..b}", "show \"continuous_on {g a .. g b} f\""], ["proof (prove)\nusing this:\n  {g a..g b} \\<subseteq> g ` {a..b}\n\ngoal (1 subgoal):\n 1. continuous_on {g a..g b} f", "using f_continuous continuous_on_subset"], ["proof (prove)\nusing this:\n  {g a..g b} \\<subseteq> g ` {a..b}\n  continuous_on (g ` {a..b}) f\n  \\<lbrakk>continuous_on ?s ?f; ?t \\<subseteq> ?s\\<rbrakk>\n  \\<Longrightarrow> continuous_on ?t ?f\n\ngoal (1 subgoal):\n 1. continuous_on {g a..g b} f", "by blast"], ["proof (state)\nthis:\n  continuous_on {g a..g b} f\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  continuous_on {g a..g b} f\n\ngoal (1 subgoal):\n 1. set_integrable lborel {g a..g b} f", "then"], ["proof (chain)\npicking this:\n  continuous_on {g a..g b} f", "show ?thesis"], ["proof (prove)\nusing this:\n  continuous_on {g a..g b} f\n\ngoal (1 subgoal):\n 1. set_integrable lborel {g a..g b} f", "using borel_integrable_atLeastAtMost'"], ["proof (prove)\nusing this:\n  continuous_on {g a..g b} f\n  continuous_on {?a..?b} ?f \\<Longrightarrow>\n  set_integrable lborel {?a..?b} ?f\n\ngoal (1 subgoal):\n 1. set_integrable lborel {g a..g b} f", "by blast"], ["proof (state)\nthis:\n  set_integrable lborel {g a..g b} f\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  set_integrable lborel {g a..g b} f\n\ngoal (1 subgoal):\n 1. integral {g a..g b} f = integral {a..b} (\\<lambda>x. f (g x) * g' x)", "then"], ["proof (chain)\npicking this:\n  set_integrable lborel {g a..g b} f", "have 1: \"interval_lebesgue_integral lborel (ereal (g a)) (ereal (g b)) f\n                      = integral {g a .. g b} f\""], ["proof (prove)\nusing this:\n  set_integrable lborel {g a..g b} f\n\ngoal (1 subgoal):\n 1. interval_lebesgue_integral lborel (ereal (g a)) (ereal (g b)) f =\n    integral {g a..g b} f", "using ga_le_gb and interval_integral_eq_integral"], ["proof (prove)\nusing this:\n  set_integrable lborel {g a..g b} f\n  g a \\<le> g b\n  \\<lbrakk>?a \\<le> ?b; set_integrable lborel {?a..?b} ?f\\<rbrakk>\n  \\<Longrightarrow> interval_lebesgue_integral lborel (ereal ?a) (ereal ?b)\n                     ?f =\n                    integral {?a..?b} ?f\n\ngoal (1 subgoal):\n 1. interval_lebesgue_integral lborel (ereal (g a)) (ereal (g b)) f =\n    integral {g a..g b} f", "by (metis (no_types))"], ["proof (state)\nthis:\n  interval_lebesgue_integral lborel (ereal (g a)) (ereal (g b)) f =\n  integral {g a..g b} f\n\ngoal (1 subgoal):\n 1. integral {g a..g b} f = integral {a..b} (\\<lambda>x. f (g x) * g' x)", "then"], ["proof (chain)\npicking this:\n  interval_lebesgue_integral lborel (ereal (g a)) (ereal (g b)) f =\n  integral {g a..g b} f", "show ?thesis"], ["proof (prove)\nusing this:\n  interval_lebesgue_integral lborel (ereal (g a)) (ereal (g b)) f =\n  integral {g a..g b} f\n\ngoal (1 subgoal):\n 1. integral {g a..g b} f = integral {a..b} (\\<lambda>x. f (g x) * g' x)", "using 0 and 1 and 2"], ["proof (prove)\nusing this:\n  interval_lebesgue_integral lborel (ereal (g a)) (ereal (g b)) f =\n  integral {g a..g b} f\n  LBINT x=ereal a..ereal b. g' x *\\<^sub>R f (g x) =\n  integral {a..b} (\\<lambda>x. g' x *\\<^sub>R f (g x))\n  interval_lebesgue_integral lborel (ereal (g a)) (ereal (g b)) f =\n  integral {g a..g b} f\n  LBINT x=ereal a..ereal b. g' x *\\<^sub>R f (g x) =\n  interval_lebesgue_integral lborel (ereal (g a)) (ereal (g b)) f\n\ngoal (1 subgoal):\n 1. integral {g a..g b} f = integral {a..b} (\\<lambda>x. f (g x) * g' x)", "by (metis (no_types, lifting)  Henstock_Kurzweil_Integration.integral_cong mult.commute real_scaleR_def)"], ["proof (state)\nthis:\n  integral {g a..g b} f = integral {a..b} (\\<lambda>x. f (g x) * g' x)\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma frontier_ic:\n  assumes \"a < (b::real)\"\n  shows \"frontier {a<..b}  = {a,b}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. frontier {a<..b} = {a, b}", "apply(simp add: frontier_def)"], ["proof (prove)\ngoal (1 subgoal):\n 1. closure {a<..b} - {a<..<b} = {a, b}", "using assms"], ["proof (prove)\nusing this:\n  a < b\n\ngoal (1 subgoal):\n 1. closure {a<..b} - {a<..<b} = {a, b}", "by auto"], ["", "lemma frontier_ci:\n  assumes \"a < (b::real)\"\n  shows \"frontier {a<..<b}  = {a,b}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. frontier {a<..<b} = {a, b}", "apply(simp add: frontier_def)"], ["proof (prove)\ngoal (1 subgoal):\n 1. closure {a<..<b} - {a<..<b} = {a, b}", "using assms"], ["proof (prove)\nusing this:\n  a < b\n\ngoal (1 subgoal):\n 1. closure {a<..<b} - {a<..<b} = {a, b}", "by auto"], ["", "lemma ic_not_closed:\n  assumes \"a < (b::real)\"\n  shows \"\\<not> closed {a<..b}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<not> closed {a<..b}", "using assms frontier_subset_eq frontier_ic greaterThanAtMost_iff"], ["proof (prove)\nusing this:\n  a < b\n  (frontier ?S \\<subseteq> ?S) = closed ?S\n  ?a < ?b \\<Longrightarrow> frontier {?a<..?b} = {?a, ?b}\n  (?i \\<in> {?l<..?u}) = (?l < ?i \\<and> ?i \\<le> ?u)\n\ngoal (1 subgoal):\n 1. \\<not> closed {a<..b}", "by blast"], ["", "lemma closure_ic_union_ci:\n  assumes \"a < (b::real)\" \"b < c\"\n  shows \"closure ({a..<b} \\<union> {b<..c})  = {a .. c}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. closure ({a..<b} \\<union> {b<..c}) = {a..c}", "using frontier_ic[OF assms(1)] frontier_ci[OF assms(2)] closure_Un assms"], ["proof (prove)\nusing this:\n  frontier {a<..b} = {a, b}\n  frontier {b<..<c} = {b, c}\n  closure (?S \\<union> ?T) = closure ?S \\<union> closure ?T\n  a < b\n  b < c\n\ngoal (1 subgoal):\n 1. closure ({a..<b} \\<union> {b<..c}) = {a..c}", "apply(simp add: frontier_def)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>{a..b} - {a<..<b} = {a, b}; {b..c} - {b<..<c} = {b, c}; a < b;\n     b < c\\<rbrakk>\n    \\<Longrightarrow> {a..b} \\<union> {b..c} = {a..c}", "by auto"], ["", "lemma interior_ic_ci_union:\n  assumes \"a < (b::real)\" \"b < c\"\n  shows \"b \\<notin> (interior ({a..<b} \\<union> {b<..c}))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. b \\<notin> interior ({a..<b} \\<union> {b<..c})", "proof-"], ["proof (state)\ngoal (1 subgoal):\n 1. b \\<notin> interior ({a..<b} \\<union> {b<..c})", "have \"b \\<notin> ({a..<b} \\<union> {b<..c})\""], ["proof (prove)\ngoal (1 subgoal):\n 1. b \\<notin> {a..<b} \\<union> {b<..c}", "by auto"], ["proof (state)\nthis:\n  b \\<notin> {a..<b} \\<union> {b<..c}\n\ngoal (1 subgoal):\n 1. b \\<notin> interior ({a..<b} \\<union> {b<..c})", "then"], ["proof (chain)\npicking this:\n  b \\<notin> {a..<b} \\<union> {b<..c}", "show ?thesis"], ["proof (prove)\nusing this:\n  b \\<notin> {a..<b} \\<union> {b<..c}\n\ngoal (1 subgoal):\n 1. b \\<notin> interior ({a..<b} \\<union> {b<..c})", "using interior_subset"], ["proof (prove)\nusing this:\n  b \\<notin> {a..<b} \\<union> {b<..c}\n  interior ?S \\<subseteq> ?S\n\ngoal (1 subgoal):\n 1. b \\<notin> interior ({a..<b} \\<union> {b<..c})", "by blast"], ["proof (state)\nthis:\n  b \\<notin> interior ({a..<b} \\<union> {b<..c})\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma frontier_ic_union_ci:\n  assumes \"a < (b::real)\" \"b < c\"\n  shows \"b \\<in> frontier ({a..<b} \\<union> {b<..c})\""], ["proof (prove)\ngoal (1 subgoal):\n 1. b \\<in> frontier ({a..<b} \\<union> {b<..c})", "using closure_ic_union_ci assms interior_ic_ci_union"], ["proof (prove)\nusing this:\n  \\<lbrakk>?a < ?b; ?b < ?c\\<rbrakk>\n  \\<Longrightarrow> closure ({?a..<?b} \\<union> {?b<..?c}) = {?a..?c}\n  a < b\n  b < c\n  \\<lbrakk>?a < ?b; ?b < ?c\\<rbrakk>\n  \\<Longrightarrow> ?b \\<notin> interior ({?a..<?b} \\<union> {?b<..?c})\n\ngoal (1 subgoal):\n 1. b \\<in> frontier ({a..<b} \\<union> {b<..c})", "by(simp add: frontier_def)"], ["", "lemma ic_union_ci_not_closed:\n  assumes \"a < (b::real)\" \"b < c\"\n  shows \"\\<not> closed ({a..<b} \\<union> {b<..c})\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<not> closed ({a..<b} \\<union> {b<..c})", "proof-"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<not> closed ({a..<b} \\<union> {b<..c})", "have \"b \\<notin> ({a..<b} \\<union> {b<..c})\""], ["proof (prove)\ngoal (1 subgoal):\n 1. b \\<notin> {a..<b} \\<union> {b<..c}", "by auto"], ["proof (state)\nthis:\n  b \\<notin> {a..<b} \\<union> {b<..c}\n\ngoal (1 subgoal):\n 1. \\<not> closed ({a..<b} \\<union> {b<..c})", "then"], ["proof (chain)\npicking this:\n  b \\<notin> {a..<b} \\<union> {b<..c}", "show ?thesis"], ["proof (prove)\nusing this:\n  b \\<notin> {a..<b} \\<union> {b<..c}\n\ngoal (1 subgoal):\n 1. \\<not> closed ({a..<b} \\<union> {b<..c})", "using assms frontier_subset_eq frontier_ic_union_ci[OF assms]"], ["proof (prove)\nusing this:\n  b \\<notin> {a..<b} \\<union> {b<..c}\n  a < b\n  b < c\n  (frontier ?S \\<subseteq> ?S) = closed ?S\n  b \\<in> frontier ({a..<b} \\<union> {b<..c})\n\ngoal (1 subgoal):\n 1. \\<not> closed ({a..<b} \\<union> {b<..c})", "by (auto simp only: subset_iff)"], ["proof (state)\nthis:\n  \\<not> closed ({a..<b} \\<union> {b<..c})\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma integrable_continuous_:\n  fixes f :: \"'b::euclidean_space \\<Rightarrow> 'a::banach\"\n  assumes \"continuous_on (cbox a b) f\"\n  shows \"f integrable_on cbox a b\""], ["proof (prove)\ngoal (1 subgoal):\n 1. f integrable_on cbox a b", "by (simp add: assms integrable_continuous)"], ["", "lemma removing_singletons_from_div:\n  assumes   \"\\<forall>t\\<in>S. \\<exists>c d::real. c < d \\<and> {c..d} = t\"\n    \"{x} \\<union> \\<Union>S = {a..b}\" \"a < x\" \"x < b\"\n    \"finite S\"\n  shows \"\\<exists>t\\<in>S. x \\<in> t\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>t\\<in>S. x \\<in> t", "proof(rule ccontr)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<not> (\\<exists>t\\<in>S. x \\<in> t) \\<Longrightarrow> False", "assume \"\\<not>(\\<exists>t\\<in>S. x \\<in> t)\""], ["proof (state)\nthis:\n  \\<not> (\\<exists>t\\<in>S. x \\<in> t)\n\ngoal (1 subgoal):\n 1. \\<not> (\\<exists>t\\<in>S. x \\<in> t) \\<Longrightarrow> False", "then"], ["proof (chain)\npicking this:\n  \\<not> (\\<exists>t\\<in>S. x \\<in> t)", "have \"\\<forall>t\\<in>S. x \\<notin> t\""], ["proof (prove)\nusing this:\n  \\<not> (\\<exists>t\\<in>S. x \\<in> t)\n\ngoal (1 subgoal):\n 1. \\<forall>t\\<in>S. x \\<notin> t", "by auto"], ["proof (state)\nthis:\n  \\<forall>t\\<in>S. x \\<notin> t\n\ngoal (1 subgoal):\n 1. \\<not> (\\<exists>t\\<in>S. x \\<in> t) \\<Longrightarrow> False", "then"], ["proof (chain)\npicking this:\n  \\<forall>t\\<in>S. x \\<notin> t", "have \"x \\<notin> \\<Union>S\""], ["proof (prove)\nusing this:\n  \\<forall>t\\<in>S. x \\<notin> t\n\ngoal (1 subgoal):\n 1. x \\<notin> \\<Union> S", "by auto"], ["proof (state)\nthis:\n  x \\<notin> \\<Union> S\n\ngoal (1 subgoal):\n 1. \\<not> (\\<exists>t\\<in>S. x \\<in> t) \\<Longrightarrow> False", "then"], ["proof (chain)\npicking this:\n  x \\<notin> \\<Union> S", "have i: \"\\<Union>S = {a..b} - {x}\""], ["proof (prove)\nusing this:\n  x \\<notin> \\<Union> S\n\ngoal (1 subgoal):\n 1. \\<Union> S = {a..b} - {x}", "using assms (2)"], ["proof (prove)\nusing this:\n  x \\<notin> \\<Union> S\n  {x} \\<union> \\<Union> S = {a..b}\n\ngoal (1 subgoal):\n 1. \\<Union> S = {a..b} - {x}", "by auto"], ["proof (state)\nthis:\n  \\<Union> S = {a..b} - {x}\n\ngoal (1 subgoal):\n 1. \\<not> (\\<exists>t\\<in>S. x \\<in> t) \\<Longrightarrow> False", "have \"x \\<in> {a..b}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. x \\<in> {a..b}", "using assms"], ["proof (prove)\nusing this:\n  \\<forall>t\\<in>S. \\<exists>c d. c < d \\<and> {c..d} = t\n  {x} \\<union> \\<Union> S = {a..b}\n  a < x\n  x < b\n  finite S\n\ngoal (1 subgoal):\n 1. x \\<in> {a..b}", "by auto"], ["proof (state)\nthis:\n  x \\<in> {a..b}\n\ngoal (1 subgoal):\n 1. \\<not> (\\<exists>t\\<in>S. x \\<in> t) \\<Longrightarrow> False", "then"], ["proof (chain)\npicking this:\n  x \\<in> {a..b}", "have \"{a .. b} - {x} = {a..<x} \\<union> {x<..b}\""], ["proof (prove)\nusing this:\n  x \\<in> {a..b}\n\ngoal (1 subgoal):\n 1. {a..b} - {x} = {a..<x} \\<union> {x<..b}", "by auto"], ["proof (state)\nthis:\n  {a..b} - {x} = {a..<x} \\<union> {x<..b}\n\ngoal (1 subgoal):\n 1. \\<not> (\\<exists>t\\<in>S. x \\<in> t) \\<Longrightarrow> False", "then"], ["proof (chain)\npicking this:\n  {a..b} - {x} = {a..<x} \\<union> {x<..b}", "have 0: \"\\<Union>S = {a..<x} \\<union> {x<..b}\""], ["proof (prove)\nusing this:\n  {a..b} - {x} = {a..<x} \\<union> {x<..b}\n\ngoal (1 subgoal):\n 1. \\<Union> S = {a..<x} \\<union> {x<..b}", "using i"], ["proof (prove)\nusing this:\n  {a..b} - {x} = {a..<x} \\<union> {x<..b}\n  \\<Union> S = {a..b} - {x}\n\ngoal (1 subgoal):\n 1. \\<Union> S = {a..<x} \\<union> {x<..b}", "by auto"], ["proof (state)\nthis:\n  \\<Union> S = {a..<x} \\<union> {x<..b}\n\ngoal (1 subgoal):\n 1. \\<not> (\\<exists>t\\<in>S. x \\<in> t) \\<Longrightarrow> False", "have 1:\"closed (\\<Union>S)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. closed (\\<Union> S)", "apply(rule closed_Union)"], ["proof (prove)\ngoal (2 subgoals):\n 1. finite S\n 2. \\<forall>T\\<in>S. closed T", "proof-"], ["proof (state)\ngoal (2 subgoals):\n 1. finite S\n 2. \\<forall>T\\<in>S. closed T", "show \"finite S\""], ["proof (prove)\ngoal (1 subgoal):\n 1. finite S", "using assms"], ["proof (prove)\nusing this:\n  \\<forall>t\\<in>S. \\<exists>c d. c < d \\<and> {c..d} = t\n  {x} \\<union> \\<Union> S = {a..b}\n  a < x\n  x < b\n  finite S\n\ngoal (1 subgoal):\n 1. finite S", "by auto"], ["proof (state)\nthis:\n  finite S\n\ngoal (1 subgoal):\n 1. \\<forall>T\\<in>S. closed T", "show \"\\<forall>T\\<in>S. closed T\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>T\\<in>S. closed T", "using assms"], ["proof (prove)\nusing this:\n  \\<forall>t\\<in>S. \\<exists>c d. c < d \\<and> {c..d} = t\n  {x} \\<union> \\<Union> S = {a..b}\n  a < x\n  x < b\n  finite S\n\ngoal (1 subgoal):\n 1. \\<forall>T\\<in>S. closed T", "by auto"], ["proof (state)\nthis:\n  \\<forall>T\\<in>S. closed T\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  closed (\\<Union> S)\n\ngoal (1 subgoal):\n 1. \\<not> (\\<exists>t\\<in>S. x \\<in> t) \\<Longrightarrow> False", "show False"], ["proof (prove)\ngoal (1 subgoal):\n 1. False", "using 0 1 ic_union_ci_not_closed assms"], ["proof (prove)\nusing this:\n  \\<Union> S = {a..<x} \\<union> {x<..b}\n  closed (\\<Union> S)\n  \\<lbrakk>?a < ?b; ?b < ?c\\<rbrakk>\n  \\<Longrightarrow> \\<not> closed ({?a..<?b} \\<union> {?b<..?c})\n  \\<forall>t\\<in>S. \\<exists>c d. c < d \\<and> {c..d} = t\n  {x} \\<union> \\<Union> S = {a..b}\n  a < x\n  x < b\n  finite S\n\ngoal (1 subgoal):\n 1. False", "by auto"], ["proof (state)\nthis:\n  False\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma remove_singleton_from_division_of:(*By Manuel Eberl*)\n  assumes \"A division_of {a::real..b}\" \"a < b\"\n  assumes \"x \\<in> {a..b}\"\n  shows   \"\\<exists>c d. c < d \\<and> {c..d} \\<in> A \\<and> x \\<in> {c..d}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>c d. c < d \\<and> {c..d} \\<in> A \\<and> x \\<in> {c..d}", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<exists>c d. c < d \\<and> {c..d} \\<in> A \\<and> x \\<in> {c..d}", "from assms"], ["proof (chain)\npicking this:\n  A division_of {a..b}\n  a < b\n  x \\<in> {a..b}", "have \"x islimpt {a..b}\""], ["proof (prove)\nusing this:\n  A division_of {a..b}\n  a < b\n  x \\<in> {a..b}\n\ngoal (1 subgoal):\n 1. x islimpt {a..b}", "by (intro connected_imp_perfect) auto"], ["proof (state)\nthis:\n  x islimpt {a..b}\n\ngoal (1 subgoal):\n 1. \\<exists>c d. c < d \\<and> {c..d} \\<in> A \\<and> x \\<in> {c..d}", "also"], ["proof (state)\nthis:\n  x islimpt {a..b}\n\ngoal (1 subgoal):\n 1. \\<exists>c d. c < d \\<and> {c..d} \\<in> A \\<and> x \\<in> {c..d}", "have \"{a..b} = {x. {x..x} \\<in> A} \\<union> ({a..b} - {x. {x..x} \\<in> A})\""], ["proof (prove)\ngoal (1 subgoal):\n 1. {a..b} = {x. {x..x} \\<in> A} \\<union> ({a..b} - {x. {x..x} \\<in> A})", "using assms"], ["proof (prove)\nusing this:\n  A division_of {a..b}\n  a < b\n  x \\<in> {a..b}\n\ngoal (1 subgoal):\n 1. {a..b} = {x. {x..x} \\<in> A} \\<union> ({a..b} - {x. {x..x} \\<in> A})", "by auto"], ["proof (state)\nthis:\n  {a..b} = {x. {x..x} \\<in> A} \\<union> ({a..b} - {x. {x..x} \\<in> A})\n\ngoal (1 subgoal):\n 1. \\<exists>c d. c < d \\<and> {c..d} \\<in> A \\<and> x \\<in> {c..d}", "also"], ["proof (state)\nthis:\n  {a..b} = {x. {x..x} \\<in> A} \\<union> ({a..b} - {x. {x..x} \\<in> A})\n\ngoal (1 subgoal):\n 1. \\<exists>c d. c < d \\<and> {c..d} \\<in> A \\<and> x \\<in> {c..d}", "have \"x islimpt \\<dots> \\<longleftrightarrow> x islimpt {a..b} - {x. {x..x} \\<in> A}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. x islimpt {x. {x..x} \\<in> A} \\<union> ({a..b} - {x. {x..x} \\<in> A}) =\n    x islimpt {a..b} - {x. {x..x} \\<in> A}", "proof (intro islimpt_Un_finite)"], ["proof (state)\ngoal (1 subgoal):\n 1. finite {x. {x..x} \\<in> A}", "have \"{x. {x..x} \\<in> A} \\<subseteq> Inf ` A\""], ["proof (prove)\ngoal (1 subgoal):\n 1. {x. {x..x} \\<in> A} \\<subseteq> Inf ` A", "proof safe"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x. {x..x} \\<in> A \\<Longrightarrow> x \\<in> Inf ` A", "fix x"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x. {x..x} \\<in> A \\<Longrightarrow> x \\<in> Inf ` A", "assume \"{x..x} \\<in> A\""], ["proof (state)\nthis:\n  {x..x} \\<in> A\n\ngoal (1 subgoal):\n 1. \\<And>x. {x..x} \\<in> A \\<Longrightarrow> x \\<in> Inf ` A", "thus \"x \\<in> Inf ` A\""], ["proof (prove)\nusing this:\n  {x..x} \\<in> A\n\ngoal (1 subgoal):\n 1. x \\<in> Inf ` A", "by (auto intro!: bexI[of _ \"{x}\"] simp: image_iff)"], ["proof (state)\nthis:\n  x \\<in> Inf ` A\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  {x. {x..x} \\<in> A} \\<subseteq> Inf ` A\n\ngoal (1 subgoal):\n 1. finite {x. {x..x} \\<in> A}", "moreover"], ["proof (state)\nthis:\n  {x. {x..x} \\<in> A} \\<subseteq> Inf ` A\n\ngoal (1 subgoal):\n 1. finite {x. {x..x} \\<in> A}", "from assms"], ["proof (chain)\npicking this:\n  A division_of {a..b}\n  a < b\n  x \\<in> {a..b}", "have \"finite A\""], ["proof (prove)\nusing this:\n  A division_of {a..b}\n  a < b\n  x \\<in> {a..b}\n\ngoal (1 subgoal):\n 1. finite A", "by (auto simp: division_of_def)"], ["proof (state)\nthis:\n  finite A\n\ngoal (1 subgoal):\n 1. finite {x. {x..x} \\<in> A}", "hence \"finite (Inf ` A)\""], ["proof (prove)\nusing this:\n  finite A\n\ngoal (1 subgoal):\n 1. finite (Inf ` A)", "by auto"], ["proof (state)\nthis:\n  finite (Inf ` A)\n\ngoal (1 subgoal):\n 1. finite {x. {x..x} \\<in> A}", "ultimately"], ["proof (chain)\npicking this:\n  {x. {x..x} \\<in> A} \\<subseteq> Inf ` A\n  finite (Inf ` A)", "show \"finite {x. {x..x} \\<in> A}\""], ["proof (prove)\nusing this:\n  {x. {x..x} \\<in> A} \\<subseteq> Inf ` A\n  finite (Inf ` A)\n\ngoal (1 subgoal):\n 1. finite {x. {x..x} \\<in> A}", "by (rule finite_subset)"], ["proof (state)\nthis:\n  finite {x. {x..x} \\<in> A}\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  x islimpt {x. {x..x} \\<in> A} \\<union> ({a..b} - {x. {x..x} \\<in> A}) =\n  x islimpt {a..b} - {x. {x..x} \\<in> A}\n\ngoal (1 subgoal):\n 1. \\<exists>c d. c < d \\<and> {c..d} \\<in> A \\<and> x \\<in> {c..d}", "also"], ["proof (state)\nthis:\n  x islimpt {x. {x..x} \\<in> A} \\<union> ({a..b} - {x. {x..x} \\<in> A}) =\n  x islimpt {a..b} - {x. {x..x} \\<in> A}\n\ngoal (1 subgoal):\n 1. \\<exists>c d. c < d \\<and> {c..d} \\<in> A \\<and> x \\<in> {c..d}", "have \"{a..b} = \\<Union>A\""], ["proof (prove)\ngoal (1 subgoal):\n 1. {a..b} = \\<Union> A", "using assms"], ["proof (prove)\nusing this:\n  A division_of {a..b}\n  a < b\n  x \\<in> {a..b}\n\ngoal (1 subgoal):\n 1. {a..b} = \\<Union> A", "by (auto simp: division_of_def)"], ["proof (state)\nthis:\n  {a..b} = \\<Union> A\n\ngoal (1 subgoal):\n 1. \\<exists>c d. c < d \\<and> {c..d} \\<in> A \\<and> x \\<in> {c..d}", "finally"], ["proof (chain)\npicking this:\n  x islimpt \\<Union> A - {x. {x..x} \\<in> A}", "have \"x islimpt \\<Union>(A - range (\\<lambda>x. {x..x}))\""], ["proof (prove)\nusing this:\n  x islimpt \\<Union> A - {x. {x..x} \\<in> A}\n\ngoal (1 subgoal):\n 1. x islimpt \\<Union> (A - range (\\<lambda>x. {x..x}))", "by (rule islimpt_subset) auto"], ["proof (state)\nthis:\n  x islimpt \\<Union> (A - range (\\<lambda>x. {x..x}))\n\ngoal (1 subgoal):\n 1. \\<exists>c d. c < d \\<and> {c..d} \\<in> A \\<and> x \\<in> {c..d}", "moreover"], ["proof (state)\nthis:\n  x islimpt \\<Union> (A - range (\\<lambda>x. {x..x}))\n\ngoal (1 subgoal):\n 1. \\<exists>c d. c < d \\<and> {c..d} \\<in> A \\<and> x \\<in> {c..d}", "have \"closed (\\<Union>(A - range (\\<lambda>x. {x..x})))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. closed (\\<Union> (A - range (\\<lambda>x. {x..x})))", "using assms"], ["proof (prove)\nusing this:\n  A division_of {a..b}\n  a < b\n  x \\<in> {a..b}\n\ngoal (1 subgoal):\n 1. closed (\\<Union> (A - range (\\<lambda>x. {x..x})))", "by (intro closed_Union) auto"], ["proof (state)\nthis:\n  closed (\\<Union> (A - range (\\<lambda>x. {x..x})))\n\ngoal (1 subgoal):\n 1. \\<exists>c d. c < d \\<and> {c..d} \\<in> A \\<and> x \\<in> {c..d}", "ultimately"], ["proof (chain)\npicking this:\n  x islimpt \\<Union> (A - range (\\<lambda>x. {x..x}))\n  closed (\\<Union> (A - range (\\<lambda>x. {x..x})))", "have \"x \\<in> (\\<Union>(A - range (\\<lambda>x. {x..x})))\""], ["proof (prove)\nusing this:\n  x islimpt \\<Union> (A - range (\\<lambda>x. {x..x}))\n  closed (\\<Union> (A - range (\\<lambda>x. {x..x})))\n\ngoal (1 subgoal):\n 1. x \\<in> \\<Union> (A - range (\\<lambda>x. {x..x}))", "by (auto simp: closed_limpt)"], ["proof (state)\nthis:\n  x \\<in> \\<Union> (A - range (\\<lambda>x. {x..x}))\n\ngoal (1 subgoal):\n 1. \\<exists>c d. c < d \\<and> {c..d} \\<in> A \\<and> x \\<in> {c..d}", "then"], ["proof (chain)\npicking this:\n  x \\<in> \\<Union> (A - range (\\<lambda>x. {x..x}))", "obtain X where \"x \\<in> X\" \"X \\<in> A\" \"X \\<notin> range (\\<lambda>x. {x..x})\""], ["proof (prove)\nusing this:\n  x \\<in> \\<Union> (A - range (\\<lambda>x. {x..x}))\n\ngoal (1 subgoal):\n 1. (\\<And>X.\n        \\<lbrakk>x \\<in> X; X \\<in> A;\n         X \\<notin> range (\\<lambda>x. {x..x})\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by blast"], ["proof (state)\nthis:\n  x \\<in> X\n  X \\<in> A\n  X \\<notin> range (\\<lambda>x. {x..x})\n\ngoal (1 subgoal):\n 1. \\<exists>c d. c < d \\<and> {c..d} \\<in> A \\<and> x \\<in> {c..d}", "moreover"], ["proof (state)\nthis:\n  x \\<in> X\n  X \\<in> A\n  X \\<notin> range (\\<lambda>x. {x..x})\n\ngoal (1 subgoal):\n 1. \\<exists>c d. c < d \\<and> {c..d} \\<in> A \\<and> x \\<in> {c..d}", "from division_ofD(2)[OF assms(1) this(2)] division_ofD(3)[OF assms(1) this(2)]\n    division_ofD(4)[OF assms(1) this(2)]"], ["proof (chain)\npicking this:\n  X \\<subseteq> {a..b}\n  X \\<noteq> {}\n  \\<exists>a b. X = cbox a b", "obtain c d where \"X = cbox c d\" \"X \\<subseteq> {a..b}\" \"X \\<noteq> {}\""], ["proof (prove)\nusing this:\n  X \\<subseteq> {a..b}\n  X \\<noteq> {}\n  \\<exists>a b. X = cbox a b\n\ngoal (1 subgoal):\n 1. (\\<And>c d.\n        \\<lbrakk>X = cbox c d; X \\<subseteq> {a..b}; X \\<noteq> {}\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by blast"], ["proof (state)\nthis:\n  X = cbox c d\n  X \\<subseteq> {a..b}\n  X \\<noteq> {}\n\ngoal (1 subgoal):\n 1. \\<exists>c d. c < d \\<and> {c..d} \\<in> A \\<and> x \\<in> {c..d}", "ultimately"], ["proof (chain)\npicking this:\n  x \\<in> X\n  X \\<in> A\n  X \\<notin> range (\\<lambda>x. {x..x})\n  X = cbox c d\n  X \\<subseteq> {a..b}\n  X \\<noteq> {}", "have \"c \\<le> d\""], ["proof (prove)\nusing this:\n  x \\<in> X\n  X \\<in> A\n  X \\<notin> range (\\<lambda>x. {x..x})\n  X = cbox c d\n  X \\<subseteq> {a..b}\n  X \\<noteq> {}\n\ngoal (1 subgoal):\n 1. c \\<le> d", "by auto"], ["proof (state)\nthis:\n  c \\<le> d\n\ngoal (1 subgoal):\n 1. \\<exists>c d. c < d \\<and> {c..d} \\<in> A \\<and> x \\<in> {c..d}", "have \"c \\<noteq> d\""], ["proof (prove)\ngoal (1 subgoal):\n 1. c \\<noteq> d", "proof"], ["proof (state)\ngoal (1 subgoal):\n 1. c = d \\<Longrightarrow> False", "assume \"c = d\""], ["proof (state)\nthis:\n  c = d\n\ngoal (1 subgoal):\n 1. c = d \\<Longrightarrow> False", "with \\<open>X = cbox c d\\<close>"], ["proof (chain)\npicking this:\n  X = cbox c d\n  c = d", "have \"X = {c..c}\""], ["proof (prove)\nusing this:\n  X = cbox c d\n  c = d\n\ngoal (1 subgoal):\n 1. X = {c..c}", "by auto"], ["proof (state)\nthis:\n  X = {c..c}\n\ngoal (1 subgoal):\n 1. c = d \\<Longrightarrow> False", "hence \"X \\<in> range (\\<lambda>x. {x..x})\""], ["proof (prove)\nusing this:\n  X = {c..c}\n\ngoal (1 subgoal):\n 1. X \\<in> range (\\<lambda>x. {x..x})", "by blast"], ["proof (state)\nthis:\n  X \\<in> range (\\<lambda>x. {x..x})\n\ngoal (1 subgoal):\n 1. c = d \\<Longrightarrow> False", "with \\<open>X \\<notin> range (\\<lambda>x. {x..x})\\<close>"], ["proof (chain)\npicking this:\n  X \\<notin> range (\\<lambda>x. {x..x})\n  X \\<in> range (\\<lambda>x. {x..x})", "show False"], ["proof (prove)\nusing this:\n  X \\<notin> range (\\<lambda>x. {x..x})\n  X \\<in> range (\\<lambda>x. {x..x})\n\ngoal (1 subgoal):\n 1. False", "by contradiction"], ["proof (state)\nthis:\n  False\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  c \\<noteq> d\n\ngoal (1 subgoal):\n 1. \\<exists>c d. c < d \\<and> {c..d} \\<in> A \\<and> x \\<in> {c..d}", "with \\<open>c \\<le> d\\<close>"], ["proof (chain)\npicking this:\n  c \\<le> d\n  c \\<noteq> d", "have \"c < d\""], ["proof (prove)\nusing this:\n  c \\<le> d\n  c \\<noteq> d\n\ngoal (1 subgoal):\n 1. c < d", "by simp"], ["proof (state)\nthis:\n  c < d\n\ngoal (1 subgoal):\n 1. \\<exists>c d. c < d \\<and> {c..d} \\<in> A \\<and> x \\<in> {c..d}", "with \\<open>X = cbox c d\\<close> and \\<open>x \\<in> X\\<close> and \\<open>X \\<in> A\\<close>"], ["proof (chain)\npicking this:\n  X = cbox c d\n  x \\<in> X\n  X \\<in> A\n  c < d", "show ?thesis"], ["proof (prove)\nusing this:\n  X = cbox c d\n  x \\<in> X\n  X \\<in> A\n  c < d\n\ngoal (1 subgoal):\n 1. \\<exists>c d. c < d \\<and> {c..d} \\<in> A \\<and> x \\<in> {c..d}", "by auto"], ["proof (state)\nthis:\n  \\<exists>c d. c < d \\<and> {c..d} \\<in> A \\<and> x \\<in> {c..d}\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma remove_singleton_from_tagged_division_of:\n  assumes \"A tagged_division_of {a::real..b}\" \"a < b\"\n  assumes \"x \\<in> {a..b}\"\n  shows   \"\\<exists>k c d. c < d \\<and> (k, {c..d}) \\<in> A \\<and> x \\<in> {c..d}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>k c d. c < d \\<and> (k, {c..d}) \\<in> A \\<and> x \\<in> {c..d}", "using remove_singleton_from_division_of[OF division_of_tagged_division[OF assms(1)] assms(2)]"], ["proof (prove)\nusing this:\n  ?x \\<in> {a..b} \\<Longrightarrow>\n  \\<exists>c d. c < d \\<and> {c..d} \\<in> snd ` A \\<and> ?x \\<in> {c..d}\n\ngoal (1 subgoal):\n 1. \\<exists>k c d. c < d \\<and> (k, {c..d}) \\<in> A \\<and> x \\<in> {c..d}", "(*sledgehammer*)"], ["proof (prove)\nusing this:\n  ?x \\<in> {a..b} \\<Longrightarrow>\n  \\<exists>c d. c < d \\<and> {c..d} \\<in> snd ` A \\<and> ?x \\<in> {c..d}\n\ngoal (1 subgoal):\n 1. \\<exists>k c d. c < d \\<and> (k, {c..d}) \\<in> A \\<and> x \\<in> {c..d}", "using assms(3)"], ["proof (prove)\nusing this:\n  ?x \\<in> {a..b} \\<Longrightarrow>\n  \\<exists>c d. c < d \\<and> {c..d} \\<in> snd ` A \\<and> ?x \\<in> {c..d}\n  x \\<in> {a..b}\n\ngoal (1 subgoal):\n 1. \\<exists>k c d. c < d \\<and> (k, {c..d}) \\<in> A \\<and> x \\<in> {c..d}", "by fastforce"], ["", "lemma tagged_div_wo_singlestons:\n  assumes \"p tagged_division_of {a::real..b}\" \"a < b\"\n  shows \"(p - {xk. \\<exists>x y. xk = (x,{y})}) tagged_division_of cbox a b\""], ["proof (prove)\ngoal (1 subgoal):\n 1. p - {xk. \\<exists>x y. xk = (x, {y})} tagged_division_of cbox a b", "using remove_singleton_from_tagged_division_of[OF assms] assms"], ["proof (prove)\nusing this:\n  ?x \\<in> {a..b} \\<Longrightarrow>\n  \\<exists>k c d. c < d \\<and> (k, {c..d}) \\<in> p \\<and> ?x \\<in> {c..d}\n  p tagged_division_of {a..b}\n  a < b\n\ngoal (1 subgoal):\n 1. p - {xk. \\<exists>x y. xk = (x, {y})} tagged_division_of cbox a b", "apply(auto simp add: tagged_division_of_def tagged_partial_division_of_def)"], ["proof (prove)\ngoal (4 subgoals):\n 1. \\<And>x1 K1 x2 K2 x.\n       \\<lbrakk>\\<And>x.\n                   a \\<le> x \\<and> x \\<le> b \\<Longrightarrow>\n                   \\<exists>k c d.\n                      c < d \\<and>\n                      (k, {c..d}) \\<in> p \\<and> c \\<le> x \\<and> x \\<le> d;\n        a < b; finite p;\n        \\<forall>x K.\n           (x, K) \\<in> p \\<longrightarrow>\n           x \\<in> K \\<and>\n           K \\<subseteq> {a..b} \\<and> (\\<exists>a b. K = {a..b});\n        \\<forall>x1 K1 x2 K2.\n           (x1, K1) \\<in> p \\<and>\n           (x2, K2) \\<in> p \\<and>\n           (x1 = x2 \\<longrightarrow> K1 \\<noteq> K2) \\<longrightarrow>\n           interior K1 \\<inter> interior K2 = {};\n        \\<Union> {K. \\<exists>x. (x, K) \\<in> p} = {a..b}; (x1, K1) \\<in> p;\n        \\<forall>y. K1 \\<noteq> {y}; (x2, K2) \\<in> p;\n        \\<forall>y. K2 \\<noteq> {y}; x \\<in> interior K1;\n        x \\<in> interior K2; x1 \\<noteq> x2\\<rbrakk>\n       \\<Longrightarrow> False\n 2. \\<And>x1 K1 x2 K2 x xa.\n       \\<lbrakk>\\<And>x.\n                   a \\<le> x \\<and> x \\<le> b \\<Longrightarrow>\n                   \\<exists>k c d.\n                      c < d \\<and>\n                      (k, {c..d}) \\<in> p \\<and> c \\<le> x \\<and> x \\<le> d;\n        a < b; finite p;\n        \\<forall>x K.\n           (x, K) \\<in> p \\<longrightarrow>\n           x \\<in> K \\<and>\n           K \\<subseteq> {a..b} \\<and> (\\<exists>a b. K = {a..b});\n        \\<forall>x1 K1 x2 K2.\n           (x1, K1) \\<in> p \\<and>\n           (x2, K2) \\<in> p \\<and>\n           (x1 = x2 \\<longrightarrow> K1 \\<noteq> K2) \\<longrightarrow>\n           interior K1 \\<inter> interior K2 = {};\n        \\<Union> {K. \\<exists>x. (x, K) \\<in> p} = {a..b}; (x1, K1) \\<in> p;\n        \\<forall>y. K1 \\<noteq> {y}; (x2, K2) \\<in> p;\n        \\<forall>y. K2 \\<noteq> {y}; x \\<in> interior K1;\n        x \\<in> interior K2; xa \\<in> K1\\<rbrakk>\n       \\<Longrightarrow> xa \\<in> K2\n 3. \\<And>x1 K1 x2 K2 x xa.\n       \\<lbrakk>\\<And>x.\n                   a \\<le> x \\<and> x \\<le> b \\<Longrightarrow>\n                   \\<exists>k c d.\n                      c < d \\<and>\n                      (k, {c..d}) \\<in> p \\<and> c \\<le> x \\<and> x \\<le> d;\n        a < b; finite p;\n        \\<forall>x K.\n           (x, K) \\<in> p \\<longrightarrow>\n           x \\<in> K \\<and>\n           K \\<subseteq> {a..b} \\<and> (\\<exists>a b. K = {a..b});\n        \\<forall>x1 K1 x2 K2.\n           (x1, K1) \\<in> p \\<and>\n           (x2, K2) \\<in> p \\<and>\n           (x1 = x2 \\<longrightarrow> K1 \\<noteq> K2) \\<longrightarrow>\n           interior K1 \\<inter> interior K2 = {};\n        \\<Union> {K. \\<exists>x. (x, K) \\<in> p} = {a..b}; (x1, K1) \\<in> p;\n        \\<forall>y. K1 \\<noteq> {y}; (x2, K2) \\<in> p;\n        \\<forall>y. K2 \\<noteq> {y}; x \\<in> interior K1;\n        x \\<in> interior K2; xa \\<in> K2\\<rbrakk>\n       \\<Longrightarrow> xa \\<in> K1\n 4. \\<And>x.\n       \\<lbrakk>\\<And>x.\n                   a \\<le> x \\<and> x \\<le> b \\<Longrightarrow>\n                   \\<exists>k c d.\n                      c < d \\<and>\n                      (k, {c..d}) \\<in> p \\<and> c \\<le> x \\<and> x \\<le> d;\n        a < b; finite p;\n        \\<forall>x K.\n           (x, K) \\<in> p \\<longrightarrow>\n           x \\<in> K \\<and>\n           K \\<subseteq> {a..b} \\<and> (\\<exists>a b. K = {a..b});\n        \\<forall>x1 K1 x2 K2.\n           (x1, K1) \\<in> p \\<and>\n           (x2, K2) \\<in> p \\<and>\n           (x1 = x2 \\<longrightarrow> K1 \\<noteq> K2) \\<longrightarrow>\n           interior K1 \\<inter> interior K2 = {};\n        \\<Union> {K. \\<exists>x. (x, K) \\<in> p} = {a..b}; a \\<le> x;\n        x \\<le> b\\<rbrakk>\n       \\<Longrightarrow> \\<exists>xa.\n                            (\\<exists>x. (x, xa) \\<in> p) \\<and>\n                            (\\<forall>y. xa \\<noteq> {y}) \\<and> x \\<in> xa", "apply blast"], ["proof (prove)\ngoal (3 subgoals):\n 1. \\<And>x1 K1 x2 K2 x xa.\n       \\<lbrakk>\\<And>x.\n                   a \\<le> x \\<and> x \\<le> b \\<Longrightarrow>\n                   \\<exists>k c d.\n                      c < d \\<and>\n                      (k, {c..d}) \\<in> p \\<and> c \\<le> x \\<and> x \\<le> d;\n        a < b; finite p;\n        \\<forall>x K.\n           (x, K) \\<in> p \\<longrightarrow>\n           x \\<in> K \\<and>\n           K \\<subseteq> {a..b} \\<and> (\\<exists>a b. K = {a..b});\n        \\<forall>x1 K1 x2 K2.\n           (x1, K1) \\<in> p \\<and>\n           (x2, K2) \\<in> p \\<and>\n           (x1 = x2 \\<longrightarrow> K1 \\<noteq> K2) \\<longrightarrow>\n           interior K1 \\<inter> interior K2 = {};\n        \\<Union> {K. \\<exists>x. (x, K) \\<in> p} = {a..b}; (x1, K1) \\<in> p;\n        \\<forall>y. K1 \\<noteq> {y}; (x2, K2) \\<in> p;\n        \\<forall>y. K2 \\<noteq> {y}; x \\<in> interior K1;\n        x \\<in> interior K2; xa \\<in> K1\\<rbrakk>\n       \\<Longrightarrow> xa \\<in> K2\n 2. \\<And>x1 K1 x2 K2 x xa.\n       \\<lbrakk>\\<And>x.\n                   a \\<le> x \\<and> x \\<le> b \\<Longrightarrow>\n                   \\<exists>k c d.\n                      c < d \\<and>\n                      (k, {c..d}) \\<in> p \\<and> c \\<le> x \\<and> x \\<le> d;\n        a < b; finite p;\n        \\<forall>x K.\n           (x, K) \\<in> p \\<longrightarrow>\n           x \\<in> K \\<and>\n           K \\<subseteq> {a..b} \\<and> (\\<exists>a b. K = {a..b});\n        \\<forall>x1 K1 x2 K2.\n           (x1, K1) \\<in> p \\<and>\n           (x2, K2) \\<in> p \\<and>\n           (x1 = x2 \\<longrightarrow> K1 \\<noteq> K2) \\<longrightarrow>\n           interior K1 \\<inter> interior K2 = {};\n        \\<Union> {K. \\<exists>x. (x, K) \\<in> p} = {a..b}; (x1, K1) \\<in> p;\n        \\<forall>y. K1 \\<noteq> {y}; (x2, K2) \\<in> p;\n        \\<forall>y. K2 \\<noteq> {y}; x \\<in> interior K1;\n        x \\<in> interior K2; xa \\<in> K2\\<rbrakk>\n       \\<Longrightarrow> xa \\<in> K1\n 3. \\<And>x.\n       \\<lbrakk>\\<And>x.\n                   a \\<le> x \\<and> x \\<le> b \\<Longrightarrow>\n                   \\<exists>k c d.\n                      c < d \\<and>\n                      (k, {c..d}) \\<in> p \\<and> c \\<le> x \\<and> x \\<le> d;\n        a < b; finite p;\n        \\<forall>x K.\n           (x, K) \\<in> p \\<longrightarrow>\n           x \\<in> K \\<and>\n           K \\<subseteq> {a..b} \\<and> (\\<exists>a b. K = {a..b});\n        \\<forall>x1 K1 x2 K2.\n           (x1, K1) \\<in> p \\<and>\n           (x2, K2) \\<in> p \\<and>\n           (x1 = x2 \\<longrightarrow> K1 \\<noteq> K2) \\<longrightarrow>\n           interior K1 \\<inter> interior K2 = {};\n        \\<Union> {K. \\<exists>x. (x, K) \\<in> p} = {a..b}; a \\<le> x;\n        x \\<le> b\\<rbrakk>\n       \\<Longrightarrow> \\<exists>xa.\n                            (\\<exists>x. (x, xa) \\<in> p) \\<and>\n                            (\\<forall>y. xa \\<noteq> {y}) \\<and> x \\<in> xa", "apply blast"], ["proof (prove)\ngoal (2 subgoals):\n 1. \\<And>x1 K1 x2 K2 x xa.\n       \\<lbrakk>\\<And>x.\n                   a \\<le> x \\<and> x \\<le> b \\<Longrightarrow>\n                   \\<exists>k c d.\n                      c < d \\<and>\n                      (k, {c..d}) \\<in> p \\<and> c \\<le> x \\<and> x \\<le> d;\n        a < b; finite p;\n        \\<forall>x K.\n           (x, K) \\<in> p \\<longrightarrow>\n           x \\<in> K \\<and>\n           K \\<subseteq> {a..b} \\<and> (\\<exists>a b. K = {a..b});\n        \\<forall>x1 K1 x2 K2.\n           (x1, K1) \\<in> p \\<and>\n           (x2, K2) \\<in> p \\<and>\n           (x1 = x2 \\<longrightarrow> K1 \\<noteq> K2) \\<longrightarrow>\n           interior K1 \\<inter> interior K2 = {};\n        \\<Union> {K. \\<exists>x. (x, K) \\<in> p} = {a..b}; (x1, K1) \\<in> p;\n        \\<forall>y. K1 \\<noteq> {y}; (x2, K2) \\<in> p;\n        \\<forall>y. K2 \\<noteq> {y}; x \\<in> interior K1;\n        x \\<in> interior K2; xa \\<in> K2\\<rbrakk>\n       \\<Longrightarrow> xa \\<in> K1\n 2. \\<And>x.\n       \\<lbrakk>\\<And>x.\n                   a \\<le> x \\<and> x \\<le> b \\<Longrightarrow>\n                   \\<exists>k c d.\n                      c < d \\<and>\n                      (k, {c..d}) \\<in> p \\<and> c \\<le> x \\<and> x \\<le> d;\n        a < b; finite p;\n        \\<forall>x K.\n           (x, K) \\<in> p \\<longrightarrow>\n           x \\<in> K \\<and>\n           K \\<subseteq> {a..b} \\<and> (\\<exists>a b. K = {a..b});\n        \\<forall>x1 K1 x2 K2.\n           (x1, K1) \\<in> p \\<and>\n           (x2, K2) \\<in> p \\<and>\n           (x1 = x2 \\<longrightarrow> K1 \\<noteq> K2) \\<longrightarrow>\n           interior K1 \\<inter> interior K2 = {};\n        \\<Union> {K. \\<exists>x. (x, K) \\<in> p} = {a..b}; a \\<le> x;\n        x \\<le> b\\<rbrakk>\n       \\<Longrightarrow> \\<exists>xa.\n                            (\\<exists>x. (x, xa) \\<in> p) \\<and>\n                            (\\<forall>y. xa \\<noteq> {y}) \\<and> x \\<in> xa", "apply blast"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>x.\n       \\<lbrakk>\\<And>x.\n                   a \\<le> x \\<and> x \\<le> b \\<Longrightarrow>\n                   \\<exists>k c d.\n                      c < d \\<and>\n                      (k, {c..d}) \\<in> p \\<and> c \\<le> x \\<and> x \\<le> d;\n        a < b; finite p;\n        \\<forall>x K.\n           (x, K) \\<in> p \\<longrightarrow>\n           x \\<in> K \\<and>\n           K \\<subseteq> {a..b} \\<and> (\\<exists>a b. K = {a..b});\n        \\<forall>x1 K1 x2 K2.\n           (x1, K1) \\<in> p \\<and>\n           (x2, K2) \\<in> p \\<and>\n           (x1 = x2 \\<longrightarrow> K1 \\<noteq> K2) \\<longrightarrow>\n           interior K1 \\<inter> interior K2 = {};\n        \\<Union> {K. \\<exists>x. (x, K) \\<in> p} = {a..b}; a \\<le> x;\n        x \\<le> b\\<rbrakk>\n       \\<Longrightarrow> \\<exists>xa.\n                            (\\<exists>x. (x, xa) \\<in> p) \\<and>\n                            (\\<forall>y. xa \\<noteq> {y}) \\<and> x \\<in> xa", "by fastforce"], ["", "lemma tagged_div_wo_empty:\n  assumes \"p tagged_division_of {a::real..b}\" \"a < b\"\n  shows \"(p - {xk. \\<exists>x. xk = (x,{})}) tagged_division_of cbox a b\""], ["proof (prove)\ngoal (1 subgoal):\n 1. p - {xk. \\<exists>x. xk = (x, {})} tagged_division_of cbox a b", "using remove_singleton_from_tagged_division_of[OF assms] assms"], ["proof (prove)\nusing this:\n  ?x \\<in> {a..b} \\<Longrightarrow>\n  \\<exists>k c d. c < d \\<and> (k, {c..d}) \\<in> p \\<and> ?x \\<in> {c..d}\n  p tagged_division_of {a..b}\n  a < b\n\ngoal (1 subgoal):\n 1. p - {xk. \\<exists>x. xk = (x, {})} tagged_division_of cbox a b", "apply(auto simp add: tagged_division_of_def tagged_partial_division_of_def)"], ["proof (prove)\ngoal (4 subgoals):\n 1. \\<And>x1 K1 x2 K2 x xa xb.\n       \\<lbrakk>\\<And>x.\n                   a \\<le> x \\<and> x \\<le> b \\<Longrightarrow>\n                   \\<exists>k c d.\n                      c < d \\<and>\n                      (k, {c..d}) \\<in> p \\<and> c \\<le> x \\<and> x \\<le> d;\n        a < b; finite p;\n        \\<forall>x K.\n           (x, K) \\<in> p \\<longrightarrow>\n           x \\<in> K \\<and>\n           K \\<subseteq> {a..b} \\<and> (\\<exists>a b. K = {a..b});\n        \\<forall>x1 K1 x2 K2.\n           (x1, K1) \\<in> p \\<and>\n           (x2, K2) \\<in> p \\<and>\n           (x1 = x2 \\<longrightarrow> K1 \\<noteq> K2) \\<longrightarrow>\n           interior K1 \\<inter> interior K2 = {};\n        \\<Union> {K. \\<exists>x. (x, K) \\<in> p} = {a..b}; (x1, K1) \\<in> p;\n        (x2, K2) \\<in> p; x \\<in> K1; xa \\<in> K2; xb \\<in> interior K1;\n        xb \\<in> interior K2; x1 \\<noteq> x2\\<rbrakk>\n       \\<Longrightarrow> False\n 2. \\<And>x1 K1 x2 K2 x xa xb xc.\n       \\<lbrakk>\\<And>x.\n                   a \\<le> x \\<and> x \\<le> b \\<Longrightarrow>\n                   \\<exists>k c d.\n                      c < d \\<and>\n                      (k, {c..d}) \\<in> p \\<and> c \\<le> x \\<and> x \\<le> d;\n        a < b; finite p;\n        \\<forall>x K.\n           (x, K) \\<in> p \\<longrightarrow>\n           x \\<in> K \\<and>\n           K \\<subseteq> {a..b} \\<and> (\\<exists>a b. K = {a..b});\n        \\<forall>x1 K1 x2 K2.\n           (x1, K1) \\<in> p \\<and>\n           (x2, K2) \\<in> p \\<and>\n           (x1 = x2 \\<longrightarrow> K1 \\<noteq> K2) \\<longrightarrow>\n           interior K1 \\<inter> interior K2 = {};\n        \\<Union> {K. \\<exists>x. (x, K) \\<in> p} = {a..b}; (x1, K1) \\<in> p;\n        (x2, K2) \\<in> p; x \\<in> K1; xa \\<in> K2; xb \\<in> interior K1;\n        xb \\<in> interior K2; xc \\<in> K1\\<rbrakk>\n       \\<Longrightarrow> xc \\<in> K2\n 3. \\<And>x1 K1 x2 K2 x xa xb xc.\n       \\<lbrakk>\\<And>x.\n                   a \\<le> x \\<and> x \\<le> b \\<Longrightarrow>\n                   \\<exists>k c d.\n                      c < d \\<and>\n                      (k, {c..d}) \\<in> p \\<and> c \\<le> x \\<and> x \\<le> d;\n        a < b; finite p;\n        \\<forall>x K.\n           (x, K) \\<in> p \\<longrightarrow>\n           x \\<in> K \\<and>\n           K \\<subseteq> {a..b} \\<and> (\\<exists>a b. K = {a..b});\n        \\<forall>x1 K1 x2 K2.\n           (x1, K1) \\<in> p \\<and>\n           (x2, K2) \\<in> p \\<and>\n           (x1 = x2 \\<longrightarrow> K1 \\<noteq> K2) \\<longrightarrow>\n           interior K1 \\<inter> interior K2 = {};\n        \\<Union> {K. \\<exists>x. (x, K) \\<in> p} = {a..b}; (x1, K1) \\<in> p;\n        (x2, K2) \\<in> p; x \\<in> K1; xa \\<in> K2; xb \\<in> interior K1;\n        xb \\<in> interior K2; xc \\<in> K2\\<rbrakk>\n       \\<Longrightarrow> xc \\<in> K1\n 4. \\<And>x.\n       \\<lbrakk>\\<And>x.\n                   a \\<le> x \\<and> x \\<le> b \\<Longrightarrow>\n                   \\<exists>k c d.\n                      c < d \\<and>\n                      (k, {c..d}) \\<in> p \\<and> c \\<le> x \\<and> x \\<le> d;\n        a < b; finite p;\n        \\<forall>x K.\n           (x, K) \\<in> p \\<longrightarrow>\n           x \\<in> K \\<and>\n           K \\<subseteq> {a..b} \\<and> (\\<exists>a b. K = {a..b});\n        \\<forall>x1 K1 x2 K2.\n           (x1, K1) \\<in> p \\<and>\n           (x2, K2) \\<in> p \\<and>\n           (x1 = x2 \\<longrightarrow> K1 \\<noteq> K2) \\<longrightarrow>\n           interior K1 \\<inter> interior K2 = {};\n        \\<Union> {K. \\<exists>x. (x, K) \\<in> p} = {a..b}; a \\<le> x;\n        x \\<le> b\\<rbrakk>\n       \\<Longrightarrow> \\<exists>xa.\n                            (\\<exists>x. (x, xa) \\<in> p) \\<and>\n                            xa \\<noteq> {} \\<and> x \\<in> xa", "apply blast"], ["proof (prove)\ngoal (3 subgoals):\n 1. \\<And>x1 K1 x2 K2 x xa xb xc.\n       \\<lbrakk>\\<And>x.\n                   a \\<le> x \\<and> x \\<le> b \\<Longrightarrow>\n                   \\<exists>k c d.\n                      c < d \\<and>\n                      (k, {c..d}) \\<in> p \\<and> c \\<le> x \\<and> x \\<le> d;\n        a < b; finite p;\n        \\<forall>x K.\n           (x, K) \\<in> p \\<longrightarrow>\n           x \\<in> K \\<and>\n           K \\<subseteq> {a..b} \\<and> (\\<exists>a b. K = {a..b});\n        \\<forall>x1 K1 x2 K2.\n           (x1, K1) \\<in> p \\<and>\n           (x2, K2) \\<in> p \\<and>\n           (x1 = x2 \\<longrightarrow> K1 \\<noteq> K2) \\<longrightarrow>\n           interior K1 \\<inter> interior K2 = {};\n        \\<Union> {K. \\<exists>x. (x, K) \\<in> p} = {a..b}; (x1, K1) \\<in> p;\n        (x2, K2) \\<in> p; x \\<in> K1; xa \\<in> K2; xb \\<in> interior K1;\n        xb \\<in> interior K2; xc \\<in> K1\\<rbrakk>\n       \\<Longrightarrow> xc \\<in> K2\n 2. \\<And>x1 K1 x2 K2 x xa xb xc.\n       \\<lbrakk>\\<And>x.\n                   a \\<le> x \\<and> x \\<le> b \\<Longrightarrow>\n                   \\<exists>k c d.\n                      c < d \\<and>\n                      (k, {c..d}) \\<in> p \\<and> c \\<le> x \\<and> x \\<le> d;\n        a < b; finite p;\n        \\<forall>x K.\n           (x, K) \\<in> p \\<longrightarrow>\n           x \\<in> K \\<and>\n           K \\<subseteq> {a..b} \\<and> (\\<exists>a b. K = {a..b});\n        \\<forall>x1 K1 x2 K2.\n           (x1, K1) \\<in> p \\<and>\n           (x2, K2) \\<in> p \\<and>\n           (x1 = x2 \\<longrightarrow> K1 \\<noteq> K2) \\<longrightarrow>\n           interior K1 \\<inter> interior K2 = {};\n        \\<Union> {K. \\<exists>x. (x, K) \\<in> p} = {a..b}; (x1, K1) \\<in> p;\n        (x2, K2) \\<in> p; x \\<in> K1; xa \\<in> K2; xb \\<in> interior K1;\n        xb \\<in> interior K2; xc \\<in> K2\\<rbrakk>\n       \\<Longrightarrow> xc \\<in> K1\n 3. \\<And>x.\n       \\<lbrakk>\\<And>x.\n                   a \\<le> x \\<and> x \\<le> b \\<Longrightarrow>\n                   \\<exists>k c d.\n                      c < d \\<and>\n                      (k, {c..d}) \\<in> p \\<and> c \\<le> x \\<and> x \\<le> d;\n        a < b; finite p;\n        \\<forall>x K.\n           (x, K) \\<in> p \\<longrightarrow>\n           x \\<in> K \\<and>\n           K \\<subseteq> {a..b} \\<and> (\\<exists>a b. K = {a..b});\n        \\<forall>x1 K1 x2 K2.\n           (x1, K1) \\<in> p \\<and>\n           (x2, K2) \\<in> p \\<and>\n           (x1 = x2 \\<longrightarrow> K1 \\<noteq> K2) \\<longrightarrow>\n           interior K1 \\<inter> interior K2 = {};\n        \\<Union> {K. \\<exists>x. (x, K) \\<in> p} = {a..b}; a \\<le> x;\n        x \\<le> b\\<rbrakk>\n       \\<Longrightarrow> \\<exists>xa.\n                            (\\<exists>x. (x, xa) \\<in> p) \\<and>\n                            xa \\<noteq> {} \\<and> x \\<in> xa", "apply blast"], ["proof (prove)\ngoal (2 subgoals):\n 1. \\<And>x1 K1 x2 K2 x xa xb xc.\n       \\<lbrakk>\\<And>x.\n                   a \\<le> x \\<and> x \\<le> b \\<Longrightarrow>\n                   \\<exists>k c d.\n                      c < d \\<and>\n                      (k, {c..d}) \\<in> p \\<and> c \\<le> x \\<and> x \\<le> d;\n        a < b; finite p;\n        \\<forall>x K.\n           (x, K) \\<in> p \\<longrightarrow>\n           x \\<in> K \\<and>\n           K \\<subseteq> {a..b} \\<and> (\\<exists>a b. K = {a..b});\n        \\<forall>x1 K1 x2 K2.\n           (x1, K1) \\<in> p \\<and>\n           (x2, K2) \\<in> p \\<and>\n           (x1 = x2 \\<longrightarrow> K1 \\<noteq> K2) \\<longrightarrow>\n           interior K1 \\<inter> interior K2 = {};\n        \\<Union> {K. \\<exists>x. (x, K) \\<in> p} = {a..b}; (x1, K1) \\<in> p;\n        (x2, K2) \\<in> p; x \\<in> K1; xa \\<in> K2; xb \\<in> interior K1;\n        xb \\<in> interior K2; xc \\<in> K2\\<rbrakk>\n       \\<Longrightarrow> xc \\<in> K1\n 2. \\<And>x.\n       \\<lbrakk>\\<And>x.\n                   a \\<le> x \\<and> x \\<le> b \\<Longrightarrow>\n                   \\<exists>k c d.\n                      c < d \\<and>\n                      (k, {c..d}) \\<in> p \\<and> c \\<le> x \\<and> x \\<le> d;\n        a < b; finite p;\n        \\<forall>x K.\n           (x, K) \\<in> p \\<longrightarrow>\n           x \\<in> K \\<and>\n           K \\<subseteq> {a..b} \\<and> (\\<exists>a b. K = {a..b});\n        \\<forall>x1 K1 x2 K2.\n           (x1, K1) \\<in> p \\<and>\n           (x2, K2) \\<in> p \\<and>\n           (x1 = x2 \\<longrightarrow> K1 \\<noteq> K2) \\<longrightarrow>\n           interior K1 \\<inter> interior K2 = {};\n        \\<Union> {K. \\<exists>x. (x, K) \\<in> p} = {a..b}; a \\<le> x;\n        x \\<le> b\\<rbrakk>\n       \\<Longrightarrow> \\<exists>xa.\n                            (\\<exists>x. (x, xa) \\<in> p) \\<and>\n                            xa \\<noteq> {} \\<and> x \\<in> xa", "apply blast"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>x.\n       \\<lbrakk>\\<And>x.\n                   a \\<le> x \\<and> x \\<le> b \\<Longrightarrow>\n                   \\<exists>k c d.\n                      c < d \\<and>\n                      (k, {c..d}) \\<in> p \\<and> c \\<le> x \\<and> x \\<le> d;\n        a < b; finite p;\n        \\<forall>x K.\n           (x, K) \\<in> p \\<longrightarrow>\n           x \\<in> K \\<and>\n           K \\<subseteq> {a..b} \\<and> (\\<exists>a b. K = {a..b});\n        \\<forall>x1 K1 x2 K2.\n           (x1, K1) \\<in> p \\<and>\n           (x2, K2) \\<in> p \\<and>\n           (x1 = x2 \\<longrightarrow> K1 \\<noteq> K2) \\<longrightarrow>\n           interior K1 \\<inter> interior K2 = {};\n        \\<Union> {K. \\<exists>x. (x, K) \\<in> p} = {a..b}; a \\<le> x;\n        x \\<le> b\\<rbrakk>\n       \\<Longrightarrow> \\<exists>xa.\n                            (\\<exists>x. (x, xa) \\<in> p) \\<and>\n                            xa \\<noteq> {} \\<and> x \\<in> xa", "by fastforce"], ["", "lemma fine_diff:\n  assumes \"\\<gamma> fine p\"\n  shows \"\\<gamma> fine (p - s)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<gamma> fine p - s", "apply (auto simp add: fine_def)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>a b x.\n       \\<lbrakk>(a, b) \\<in> p; (a, b) \\<notin> s; x \\<in> b\\<rbrakk>\n       \\<Longrightarrow> x \\<in> \\<gamma> a", "using assms"], ["proof (prove)\nusing this:\n  \\<gamma> fine p\n\ngoal (1 subgoal):\n 1. \\<And>a b x.\n       \\<lbrakk>(a, b) \\<in> p; (a, b) \\<notin> s; x \\<in> b\\<rbrakk>\n       \\<Longrightarrow> x \\<in> \\<gamma> a", "by auto"], ["", "lemma tagged_div_tage_notin_set:\n  assumes \"finite (s::real set)\"\n    \"p tagged_division_of {a..b}\"\n    \"\\<gamma> fine p\" \"(\\<forall>(x, K)\\<in>p. \\<exists>c d::real. c < d \\<and> K = {c..d})\" \"gauge \\<gamma>\"\n  shows \"\\<exists>p' \\<gamma>'. p' tagged_division_of {a..b} \\<and>\n                  \\<gamma>' fine p' \\<and> (\\<forall>(x, K)\\<in>p'. x \\<notin> s) \\<and> gauge \\<gamma>'\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>p' \\<gamma>'.\n       p' tagged_division_of {a..b} \\<and>\n       \\<gamma>' fine p' \\<and>\n       (\\<forall>(x, K)\\<in>p'. x \\<notin> s) \\<and> gauge \\<gamma>'", "proof-"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<exists>p' \\<gamma>'.\n       p' tagged_division_of {a..b} \\<and>\n       \\<gamma>' fine p' \\<and>\n       (\\<forall>(x, K)\\<in>p'. x \\<notin> s) \\<and> gauge \\<gamma>'", "have \"(\\<forall>(x::real, K)\\<in>p. \\<exists>x'. x' \\<notin> s \\<and> x'\\<in> interior K)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>(x, K)\\<in>p.\n       \\<exists>x'. x' \\<notin> s \\<and> x' \\<in> interior K", "proof-"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<forall>(x, K)\\<in>p.\n       \\<exists>x'. x' \\<notin> s \\<and> x' \\<in> interior K", "{"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<forall>(x, K)\\<in>p.\n       \\<exists>x'. x' \\<notin> s \\<and> x' \\<in> interior K", "fix x::real"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<forall>(x, K)\\<in>p.\n       \\<exists>x'. x' \\<notin> s \\<and> x' \\<in> interior K", "fix K"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<forall>(x, K)\\<in>p.\n       \\<exists>x'. x' \\<notin> s \\<and> x' \\<in> interior K", "assume ass: \"(x::real,K) \\<in> p\""], ["proof (state)\nthis:\n  (x, K) \\<in> p\n\ngoal (1 subgoal):\n 1. \\<forall>(x, K)\\<in>p.\n       \\<exists>x'. x' \\<notin> s \\<and> x' \\<in> interior K", "have \"(\\<forall>(x, K)\\<in>p. infinite (interior K))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>(x, K)\\<in>p. infinite (interior K)", "using assms(4) infinite_Ioo interior_atLeastAtMost_real"], ["proof (prove)\nusing this:\n  \\<forall>(x, K)\\<in>p. \\<exists>c d. c < d \\<and> K = {c..d}\n  ?a < ?b \\<Longrightarrow> infinite {?a<..<?b}\n  interior {?a..?b} = {?a<..<?b}\n\ngoal (1 subgoal):\n 1. \\<forall>(x, K)\\<in>p. infinite (interior K)", "by (smt split_beta)"], ["proof (state)\nthis:\n  \\<forall>(x, K)\\<in>p. infinite (interior K)\n\ngoal (1 subgoal):\n 1. \\<forall>(x, K)\\<in>p.\n       \\<exists>x'. x' \\<notin> s \\<and> x' \\<in> interior K", "then"], ["proof (chain)\npicking this:\n  \\<forall>(x, K)\\<in>p. infinite (interior K)", "have i: \"infinite (interior K)\""], ["proof (prove)\nusing this:\n  \\<forall>(x, K)\\<in>p. infinite (interior K)\n\ngoal (1 subgoal):\n 1. infinite (interior K)", "using ass"], ["proof (prove)\nusing this:\n  \\<forall>(x, K)\\<in>p. infinite (interior K)\n  (x, K) \\<in> p\n\ngoal (1 subgoal):\n 1. infinite (interior K)", "by auto"], ["proof (state)\nthis:\n  infinite (interior K)\n\ngoal (1 subgoal):\n 1. \\<forall>(x, K)\\<in>p.\n       \\<exists>x'. x' \\<notin> s \\<and> x' \\<in> interior K", "have \"\\<exists>x'. x' \\<notin> s \\<and> x'\\<in> interior K\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>x'. x' \\<notin> s \\<and> x' \\<in> interior K", "using infinite_imp_nonempty[OF Diff_infinite_finite[OF assms(1) i]]"], ["proof (prove)\nusing this:\n  interior K - s \\<noteq> {}\n\ngoal (1 subgoal):\n 1. \\<exists>x'. x' \\<notin> s \\<and> x' \\<in> interior K", "by auto"], ["proof (state)\nthis:\n  \\<exists>x'. x' \\<notin> s \\<and> x' \\<in> interior K\n\ngoal (1 subgoal):\n 1. \\<forall>(x, K)\\<in>p.\n       \\<exists>x'. x' \\<notin> s \\<and> x' \\<in> interior K", "}"], ["proof (state)\nthis:\n  (?x2, ?K2) \\<in> p \\<Longrightarrow>\n  \\<exists>x'. x' \\<notin> s \\<and> x' \\<in> interior ?K2\n\ngoal (1 subgoal):\n 1. \\<forall>(x, K)\\<in>p.\n       \\<exists>x'. x' \\<notin> s \\<and> x' \\<in> interior K", "then"], ["proof (chain)\npicking this:\n  (?x2, ?K2) \\<in> p \\<Longrightarrow>\n  \\<exists>x'. x' \\<notin> s \\<and> x' \\<in> interior ?K2", "show ?thesis"], ["proof (prove)\nusing this:\n  (?x2, ?K2) \\<in> p \\<Longrightarrow>\n  \\<exists>x'. x' \\<notin> s \\<and> x' \\<in> interior ?K2\n\ngoal (1 subgoal):\n 1. \\<forall>(x, K)\\<in>p.\n       \\<exists>x'. x' \\<notin> s \\<and> x' \\<in> interior K", "by auto"], ["proof (state)\nthis:\n  \\<forall>(x, K)\\<in>p.\n     \\<exists>x'. x' \\<notin> s \\<and> x' \\<in> interior K\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<forall>(x, K)\\<in>p.\n     \\<exists>x'. x' \\<notin> s \\<and> x' \\<in> interior K\n\ngoal (1 subgoal):\n 1. \\<exists>p' \\<gamma>'.\n       p' tagged_division_of {a..b} \\<and>\n       \\<gamma>' fine p' \\<and>\n       (\\<forall>(x, K)\\<in>p'. x \\<notin> s) \\<and> gauge \\<gamma>'", "then"], ["proof (chain)\npicking this:\n  \\<forall>(x, K)\\<in>p.\n     \\<exists>x'. x' \\<notin> s \\<and> x' \\<in> interior K", "obtain f where f: \"(\\<forall>(x::real, K)\\<in>p. (f (x,K)) \\<notin> s \\<and> (f (x,K)) \\<in> interior K)\""], ["proof (prove)\nusing this:\n  \\<forall>(x, K)\\<in>p.\n     \\<exists>x'. x' \\<notin> s \\<and> x' \\<in> interior K\n\ngoal (1 subgoal):\n 1. (\\<And>f.\n        \\<forall>(x, K)\\<in>p.\n           f (x, K) \\<notin> s \\<and>\n           f (x, K) \\<in> interior K \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "using choice_iff[where ?Q = \"\\<lambda>(x,K) x'. (x::real, K)\\<in>p \\<longrightarrow> x' \\<notin> s \\<and> x' \\<in> interior K\"]"], ["proof (prove)\nusing this:\n  \\<forall>(x, K)\\<in>p.\n     \\<exists>x'. x' \\<notin> s \\<and> x' \\<in> interior K\n  (\\<forall>x.\n      \\<exists>y.\n         (case x of\n          (x, K) \\<Rightarrow>\n            \\<lambda>x'.\n               (x, K) \\<in> p \\<longrightarrow>\n               x' \\<notin> s \\<and> x' \\<in> interior K)\n          y) =\n  (\\<exists>f.\n      \\<forall>x.\n         (case x of\n          (x, K) \\<Rightarrow>\n            \\<lambda>x'.\n               (x, K) \\<in> p \\<longrightarrow>\n               x' \\<notin> s \\<and> x' \\<in> interior K)\n          (f x))\n\ngoal (1 subgoal):\n 1. (\\<And>f.\n        \\<forall>(x, K)\\<in>p.\n           f (x, K) \\<notin> s \\<and>\n           f (x, K) \\<in> interior K \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "apply (auto simp add: case_prod_beta)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>f.\n       \\<lbrakk>\\<And>f.\n                   \\<forall>x\\<in>p.\n                      f x \\<notin> s \\<and>\n                      f x \\<in> interior (snd x) \\<Longrightarrow>\n                   thesis;\n        \\<forall>x\\<in>p.\n           \\<exists>x'. x' \\<notin> s \\<and> x' \\<in> interior (snd x);\n        \\<forall>a b.\n           (a, b) \\<in> p \\<longrightarrow>\n           f (a, b) \\<notin> s \\<and> f (a, b) \\<in> interior b\\<rbrakk>\n       \\<Longrightarrow> thesis", "by metis"], ["proof (state)\nthis:\n  \\<forall>(x, K)\\<in>p.\n     f (x, K) \\<notin> s \\<and> f (x, K) \\<in> interior K\n\ngoal (1 subgoal):\n 1. \\<exists>p' \\<gamma>'.\n       p' tagged_division_of {a..b} \\<and>\n       \\<gamma>' fine p' \\<and>\n       (\\<forall>(x, K)\\<in>p'. x \\<notin> s) \\<and> gauge \\<gamma>'", "have f': \"(\\<forall>(x::real, K)\\<in>p. (f (x,K)) \\<notin> s \\<and> (f (x,K)) \\<in> K)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>(x, K)\\<in>p. f (x, K) \\<notin> s \\<and> f (x, K) \\<in> K", "using f interior_subset"], ["proof (prove)\nusing this:\n  \\<forall>(x, K)\\<in>p.\n     f (x, K) \\<notin> s \\<and> f (x, K) \\<in> interior K\n  interior ?S \\<subseteq> ?S\n\ngoal (1 subgoal):\n 1. \\<forall>(x, K)\\<in>p. f (x, K) \\<notin> s \\<and> f (x, K) \\<in> K", "by (auto simp add: case_prod_beta subset_iff)"], ["proof (state)\nthis:\n  \\<forall>(x, K)\\<in>p. f (x, K) \\<notin> s \\<and> f (x, K) \\<in> K\n\ngoal (1 subgoal):\n 1. \\<exists>p' \\<gamma>'.\n       p' tagged_division_of {a..b} \\<and>\n       \\<gamma>' fine p' \\<and>\n       (\\<forall>(x, K)\\<in>p'. x \\<notin> s) \\<and> gauge \\<gamma>'", "let ?p' = \"{m. (\\<exists>xK. m = ((f xK), snd xK) \\<and> xK \\<in> p)}\""], ["proof (state)\ngoal (1 subgoal):\n 1. \\<exists>p' \\<gamma>'.\n       p' tagged_division_of {a..b} \\<and>\n       \\<gamma>' fine p' \\<and>\n       (\\<forall>(x, K)\\<in>p'. x \\<notin> s) \\<and> gauge \\<gamma>'", "have 0: \"(\\<forall>(x, K)\\<in>?p'. x \\<notin> s)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>(x, K)\\<in>{(f xK, snd xK) |xK. xK \\<in> p}. x \\<notin> s", "using f"], ["proof (prove)\nusing this:\n  \\<forall>(x, K)\\<in>p.\n     f (x, K) \\<notin> s \\<and> f (x, K) \\<in> interior K\n\ngoal (1 subgoal):\n 1. \\<forall>(x, K)\\<in>{(f xK, snd xK) |xK. xK \\<in> p}. x \\<notin> s", "by (auto simp add: case_prod_beta)"], ["proof (state)\nthis:\n  \\<forall>(x, K)\\<in>{(f xK, snd xK) |xK. xK \\<in> p}. x \\<notin> s\n\ngoal (1 subgoal):\n 1. \\<exists>p' \\<gamma>'.\n       p' tagged_division_of {a..b} \\<and>\n       \\<gamma>' fine p' \\<and>\n       (\\<forall>(x, K)\\<in>p'. x \\<notin> s) \\<and> gauge \\<gamma>'", "have i: \"finite {(f (a, b), b) |a b. (a, b) \\<in> p}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. finite {(f (a, b), b) |a b. (a, b) \\<in> p}", "proof-"], ["proof (state)\ngoal (1 subgoal):\n 1. finite {(f (a, b), b) |a b. (a, b) \\<in> p}", "have a: \"{(f (a, b), b) |a b. (a, b) \\<in> p} = (%(a,b). (f(a,b),b)) ` p\""], ["proof (prove)\ngoal (1 subgoal):\n 1. {(f (a, b), b) |a b. (a, b) \\<in> p} =\n    (\\<lambda>(a, b). (f (a, b), b)) ` p", "by auto"], ["proof (state)\nthis:\n  {(f (a, b), b) |a b. (a, b) \\<in> p} =\n  (\\<lambda>(a, b). (f (a, b), b)) ` p\n\ngoal (1 subgoal):\n 1. finite {(f (a, b), b) |a b. (a, b) \\<in> p}", "have b: \"finite p\""], ["proof (prove)\ngoal (1 subgoal):\n 1. finite p", "using assms(2)"], ["proof (prove)\nusing this:\n  p tagged_division_of {a..b}\n\ngoal (1 subgoal):\n 1. finite p", "by auto"], ["proof (state)\nthis:\n  finite p\n\ngoal (1 subgoal):\n 1. finite {(f (a, b), b) |a b. (a, b) \\<in> p}", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. finite {(f (a, b), b) |a b. (a, b) \\<in> p}", "using a b"], ["proof (prove)\nusing this:\n  {(f (a, b), b) |a b. (a, b) \\<in> p} =\n  (\\<lambda>(a, b). (f (a, b), b)) ` p\n  finite p\n\ngoal (1 subgoal):\n 1. finite {(f (a, b), b) |a b. (a, b) \\<in> p}", "by auto"], ["proof (state)\nthis:\n  finite {(f (a, b), b) |a b. (a, b) \\<in> p}\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  finite {(f (a, b), b) |a b. (a, b) \\<in> p}\n\ngoal (1 subgoal):\n 1. \\<exists>p' \\<gamma>'.\n       p' tagged_division_of {a..b} \\<and>\n       \\<gamma>' fine p' \\<and>\n       (\\<forall>(x, K)\\<in>p'. x \\<notin> s) \\<and> gauge \\<gamma>'", "have 1: \"?p' tagged_division_of {a..b}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. {(f xK, snd xK) |xK. xK \\<in> p} tagged_division_of {a..b}", "using assms(2) f'"], ["proof (prove)\nusing this:\n  p tagged_division_of {a..b}\n  \\<forall>(x, K)\\<in>p. f (x, K) \\<notin> s \\<and> f (x, K) \\<in> K\n\ngoal (1 subgoal):\n 1. {(f xK, snd xK) |xK. xK \\<in> p} tagged_division_of {a..b}", "apply(auto simp add: tagged_division_of_def tagged_partial_division_of_def case_prod_beta)"], ["proof (prove)\ngoal (4 subgoals):\n 1. \\<lbrakk>\\<forall>x\\<in>p. f x \\<notin> s \\<and> f x \\<in> snd x;\n     finite p;\n     \\<forall>x K.\n        (x, K) \\<in> p \\<longrightarrow>\n        x \\<in> K \\<and>\n        K \\<subseteq> {a..b} \\<and> (\\<exists>a b. K = {a..b});\n     \\<forall>x1 K1 x2 K2.\n        (x1, K1) \\<in> p \\<and>\n        (x2, K2) \\<in> p \\<and>\n        (x1 = x2 \\<longrightarrow> K1 \\<noteq> K2) \\<longrightarrow>\n        interior K1 \\<inter> interior K2 = {};\n     \\<Union> {K. \\<exists>x. (x, K) \\<in> p} = {a..b}\\<rbrakk>\n    \\<Longrightarrow> finite {(f (a, b), b) |a b. (a, b) \\<in> p}\n 2. \\<And>K1 K2 aa aaa x.\n       \\<lbrakk>\\<forall>x\\<in>p. f x \\<notin> s \\<and> f x \\<in> snd x;\n        finite p;\n        \\<forall>x K.\n           (x, K) \\<in> p \\<longrightarrow>\n           x \\<in> K \\<and>\n           K \\<subseteq> {a..b} \\<and> (\\<exists>a b. K = {a..b});\n        \\<forall>x1 K1 x2 K2.\n           (x1, K1) \\<in> p \\<and>\n           (x2, K2) \\<in> p \\<and>\n           (x1 = x2 \\<longrightarrow> K1 \\<noteq> K2) \\<longrightarrow>\n           interior K1 \\<inter> interior K2 = {};\n        \\<Union> {K. \\<exists>x. (x, K) \\<in> p} = {a..b}; (aa, K1) \\<in> p;\n        (aaa, K2) \\<in> p; x \\<in> interior K1; x \\<in> interior K2;\n        f (aa, K1) \\<noteq> f (aaa, K2)\\<rbrakk>\n       \\<Longrightarrow> False\n 3. \\<And>K1 K2 aa aaa x xa.\n       \\<lbrakk>\\<forall>x\\<in>p. f x \\<notin> s \\<and> f x \\<in> snd x;\n        finite p;\n        \\<forall>x K.\n           (x, K) \\<in> p \\<longrightarrow>\n           x \\<in> K \\<and>\n           K \\<subseteq> {a..b} \\<and> (\\<exists>a b. K = {a..b});\n        \\<forall>x1 K1 x2 K2.\n           (x1, K1) \\<in> p \\<and>\n           (x2, K2) \\<in> p \\<and>\n           (x1 = x2 \\<longrightarrow> K1 \\<noteq> K2) \\<longrightarrow>\n           interior K1 \\<inter> interior K2 = {};\n        \\<Union> {K. \\<exists>x. (x, K) \\<in> p} = {a..b}; (aa, K1) \\<in> p;\n        (aaa, K2) \\<in> p; x \\<in> interior K1; x \\<in> interior K2;\n        xa \\<in> K1\\<rbrakk>\n       \\<Longrightarrow> xa \\<in> K2\n 4. \\<And>K1 K2 aa aaa x xa.\n       \\<lbrakk>\\<forall>x\\<in>p. f x \\<notin> s \\<and> f x \\<in> snd x;\n        finite p;\n        \\<forall>x K.\n           (x, K) \\<in> p \\<longrightarrow>\n           x \\<in> K \\<and>\n           K \\<subseteq> {a..b} \\<and> (\\<exists>a b. K = {a..b});\n        \\<forall>x1 K1 x2 K2.\n           (x1, K1) \\<in> p \\<and>\n           (x2, K2) \\<in> p \\<and>\n           (x1 = x2 \\<longrightarrow> K1 \\<noteq> K2) \\<longrightarrow>\n           interior K1 \\<inter> interior K2 = {};\n        \\<Union> {K. \\<exists>x. (x, K) \\<in> p} = {a..b}; (aa, K1) \\<in> p;\n        (aaa, K2) \\<in> p; x \\<in> interior K1; x \\<in> interior K2;\n        xa \\<in> K2\\<rbrakk>\n       \\<Longrightarrow> xa \\<in> K1", "apply(metis i)"], ["proof (prove)\ngoal (3 subgoals):\n 1. \\<And>K1 K2 aa aaa x.\n       \\<lbrakk>\\<forall>x\\<in>p. f x \\<notin> s \\<and> f x \\<in> snd x;\n        finite p;\n        \\<forall>x K.\n           (x, K) \\<in> p \\<longrightarrow>\n           x \\<in> K \\<and>\n           K \\<subseteq> {a..b} \\<and> (\\<exists>a b. K = {a..b});\n        \\<forall>x1 K1 x2 K2.\n           (x1, K1) \\<in> p \\<and>\n           (x2, K2) \\<in> p \\<and>\n           (x1 = x2 \\<longrightarrow> K1 \\<noteq> K2) \\<longrightarrow>\n           interior K1 \\<inter> interior K2 = {};\n        \\<Union> {K. \\<exists>x. (x, K) \\<in> p} = {a..b}; (aa, K1) \\<in> p;\n        (aaa, K2) \\<in> p; x \\<in> interior K1; x \\<in> interior K2;\n        f (aa, K1) \\<noteq> f (aaa, K2)\\<rbrakk>\n       \\<Longrightarrow> False\n 2. \\<And>K1 K2 aa aaa x xa.\n       \\<lbrakk>\\<forall>x\\<in>p. f x \\<notin> s \\<and> f x \\<in> snd x;\n        finite p;\n        \\<forall>x K.\n           (x, K) \\<in> p \\<longrightarrow>\n           x \\<in> K \\<and>\n           K \\<subseteq> {a..b} \\<and> (\\<exists>a b. K = {a..b});\n        \\<forall>x1 K1 x2 K2.\n           (x1, K1) \\<in> p \\<and>\n           (x2, K2) \\<in> p \\<and>\n           (x1 = x2 \\<longrightarrow> K1 \\<noteq> K2) \\<longrightarrow>\n           interior K1 \\<inter> interior K2 = {};\n        \\<Union> {K. \\<exists>x. (x, K) \\<in> p} = {a..b}; (aa, K1) \\<in> p;\n        (aaa, K2) \\<in> p; x \\<in> interior K1; x \\<in> interior K2;\n        xa \\<in> K1\\<rbrakk>\n       \\<Longrightarrow> xa \\<in> K2\n 3. \\<And>K1 K2 aa aaa x xa.\n       \\<lbrakk>\\<forall>x\\<in>p. f x \\<notin> s \\<and> f x \\<in> snd x;\n        finite p;\n        \\<forall>x K.\n           (x, K) \\<in> p \\<longrightarrow>\n           x \\<in> K \\<and>\n           K \\<subseteq> {a..b} \\<and> (\\<exists>a b. K = {a..b});\n        \\<forall>x1 K1 x2 K2.\n           (x1, K1) \\<in> p \\<and>\n           (x2, K2) \\<in> p \\<and>\n           (x1 = x2 \\<longrightarrow> K1 \\<noteq> K2) \\<longrightarrow>\n           interior K1 \\<inter> interior K2 = {};\n        \\<Union> {K. \\<exists>x. (x, K) \\<in> p} = {a..b}; (aa, K1) \\<in> p;\n        (aaa, K2) \\<in> p; x \\<in> interior K1; x \\<in> interior K2;\n        xa \\<in> K2\\<rbrakk>\n       \\<Longrightarrow> xa \\<in> K1", "apply blast"], ["proof (prove)\ngoal (2 subgoals):\n 1. \\<And>K1 K2 aa aaa x xa.\n       \\<lbrakk>\\<forall>x\\<in>p. f x \\<notin> s \\<and> f x \\<in> snd x;\n        finite p;\n        \\<forall>x K.\n           (x, K) \\<in> p \\<longrightarrow>\n           x \\<in> K \\<and>\n           K \\<subseteq> {a..b} \\<and> (\\<exists>a b. K = {a..b});\n        \\<forall>x1 K1 x2 K2.\n           (x1, K1) \\<in> p \\<and>\n           (x2, K2) \\<in> p \\<and>\n           (x1 = x2 \\<longrightarrow> K1 \\<noteq> K2) \\<longrightarrow>\n           interior K1 \\<inter> interior K2 = {};\n        \\<Union> {K. \\<exists>x. (x, K) \\<in> p} = {a..b}; (aa, K1) \\<in> p;\n        (aaa, K2) \\<in> p; x \\<in> interior K1; x \\<in> interior K2;\n        xa \\<in> K1\\<rbrakk>\n       \\<Longrightarrow> xa \\<in> K2\n 2. \\<And>K1 K2 aa aaa x xa.\n       \\<lbrakk>\\<forall>x\\<in>p. f x \\<notin> s \\<and> f x \\<in> snd x;\n        finite p;\n        \\<forall>x K.\n           (x, K) \\<in> p \\<longrightarrow>\n           x \\<in> K \\<and>\n           K \\<subseteq> {a..b} \\<and> (\\<exists>a b. K = {a..b});\n        \\<forall>x1 K1 x2 K2.\n           (x1, K1) \\<in> p \\<and>\n           (x2, K2) \\<in> p \\<and>\n           (x1 = x2 \\<longrightarrow> K1 \\<noteq> K2) \\<longrightarrow>\n           interior K1 \\<inter> interior K2 = {};\n        \\<Union> {K. \\<exists>x. (x, K) \\<in> p} = {a..b}; (aa, K1) \\<in> p;\n        (aaa, K2) \\<in> p; x \\<in> interior K1; x \\<in> interior K2;\n        xa \\<in> K2\\<rbrakk>\n       \\<Longrightarrow> xa \\<in> K1", "apply blast"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>K1 K2 aa aaa x xa.\n       \\<lbrakk>\\<forall>x\\<in>p. f x \\<notin> s \\<and> f x \\<in> snd x;\n        finite p;\n        \\<forall>x K.\n           (x, K) \\<in> p \\<longrightarrow>\n           x \\<in> K \\<and>\n           K \\<subseteq> {a..b} \\<and> (\\<exists>a b. K = {a..b});\n        \\<forall>x1 K1 x2 K2.\n           (x1, K1) \\<in> p \\<and>\n           (x2, K2) \\<in> p \\<and>\n           (x1 = x2 \\<longrightarrow> K1 \\<noteq> K2) \\<longrightarrow>\n           interior K1 \\<inter> interior K2 = {};\n        \\<Union> {K. \\<exists>x. (x, K) \\<in> p} = {a..b}; (aa, K1) \\<in> p;\n        (aaa, K2) \\<in> p; x \\<in> interior K1; x \\<in> interior K2;\n        xa \\<in> K2\\<rbrakk>\n       \\<Longrightarrow> xa \\<in> K1", "by fastforce"], ["proof (state)\nthis:\n  {(f xK, snd xK) |xK. xK \\<in> p} tagged_division_of {a..b}\n\ngoal (1 subgoal):\n 1. \\<exists>p' \\<gamma>'.\n       p' tagged_division_of {a..b} \\<and>\n       \\<gamma>' fine p' \\<and>\n       (\\<forall>(x, K)\\<in>p'. x \\<notin> s) \\<and> gauge \\<gamma>'", "(*f is injective becuase interiors of different K's are disjoint and f is in interior*)"], ["proof (state)\nthis:\n  {(f xK, snd xK) |xK. xK \\<in> p} tagged_division_of {a..b}\n\ngoal (1 subgoal):\n 1. \\<exists>p' \\<gamma>'.\n       p' tagged_division_of {a..b} \\<and>\n       \\<gamma>' fine p' \\<and>\n       (\\<forall>(x, K)\\<in>p'. x \\<notin> s) \\<and> gauge \\<gamma>'", "have f_inj: \"inj_on f p\""], ["proof (prove)\ngoal (1 subgoal):\n 1. inj_on f p", "apply(simp add: inj_on_def)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>p. \\<forall>y\\<in>p. f x = f y \\<longrightarrow> x = y", "proof-"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>p. \\<forall>y\\<in>p. f x = f y \\<longrightarrow> x = y", "{"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>p. \\<forall>y\\<in>p. f x = f y \\<longrightarrow> x = y", "fix x y"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>p. \\<forall>y\\<in>p. f x = f y \\<longrightarrow> x = y", "assume \"x \\<in> p\" \"y \\<in> p\"\n        \"f x = f y\""], ["proof (state)\nthis:\n  x \\<in> p\n  y \\<in> p\n  f x = f y\n\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>p. \\<forall>y\\<in>p. f x = f y \\<longrightarrow> x = y", "then"], ["proof (chain)\npicking this:\n  x \\<in> p\n  y \\<in> p\n  f x = f y", "have \"x = y\""], ["proof (prove)\nusing this:\n  x \\<in> p\n  y \\<in> p\n  f x = f y\n\ngoal (1 subgoal):\n 1. x = y", "using f\n          tagged_division_ofD(5)[OF assms(2)]"], ["proof (prove)\nusing this:\n  x \\<in> p\n  y \\<in> p\n  f x = f y\n  \\<forall>(x, K)\\<in>p.\n     f (x, K) \\<notin> s \\<and> f (x, K) \\<in> interior K\n  \\<lbrakk>(?x1.0, ?K1.0) \\<in> p; (?x2.0, ?K2.0) \\<in> p;\n   (?x1.0, ?K1.0) \\<noteq> (?x2.0, ?K2.0)\\<rbrakk>\n  \\<Longrightarrow> interior ?K1.0 \\<inter> interior ?K2.0 = {}\n\ngoal (1 subgoal):\n 1. x = y", "(*sledgehammer*)"], ["proof (prove)\nusing this:\n  x \\<in> p\n  y \\<in> p\n  f x = f y\n  \\<forall>(x, K)\\<in>p.\n     f (x, K) \\<notin> s \\<and> f (x, K) \\<in> interior K\n  \\<lbrakk>(?x1.0, ?K1.0) \\<in> p; (?x2.0, ?K2.0) \\<in> p;\n   (?x1.0, ?K1.0) \\<noteq> (?x2.0, ?K2.0)\\<rbrakk>\n  \\<Longrightarrow> interior ?K1.0 \\<inter> interior ?K2.0 = {}\n\ngoal (1 subgoal):\n 1. x = y", "by (smt case_prodE disjoint_insert(2) mk_disjoint_insert)"], ["proof (state)\nthis:\n  x = y\n\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>p. \\<forall>y\\<in>p. f x = f y \\<longrightarrow> x = y", "}"], ["proof (state)\nthis:\n  \\<lbrakk>?x2 \\<in> p; ?y2 \\<in> p; f ?x2 = f ?y2\\<rbrakk>\n  \\<Longrightarrow> ?x2 = ?y2\n\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>p. \\<forall>y\\<in>p. f x = f y \\<longrightarrow> x = y", "note * = this"], ["proof (state)\nthis:\n  \\<lbrakk>?x2 \\<in> p; ?y2 \\<in> p; f ?x2 = f ?y2\\<rbrakk>\n  \\<Longrightarrow> ?x2 = ?y2\n\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>p. \\<forall>y\\<in>p. f x = f y \\<longrightarrow> x = y", "show \"\\<forall>x\\<in>p. \\<forall>y\\<in>p. f x = f y \\<longrightarrow> x = y\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>p. \\<forall>y\\<in>p. f x = f y \\<longrightarrow> x = y", "using *"], ["proof (prove)\nusing this:\n  \\<lbrakk>?x2 \\<in> p; ?y2 \\<in> p; f ?x2 = f ?y2\\<rbrakk>\n  \\<Longrightarrow> ?x2 = ?y2\n\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>p. \\<forall>y\\<in>p. f x = f y \\<longrightarrow> x = y", "by auto"], ["proof (state)\nthis:\n  \\<forall>x\\<in>p. \\<forall>y\\<in>p. f x = f y \\<longrightarrow> x = y\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  inj_on f p\n\ngoal (1 subgoal):\n 1. \\<exists>p' \\<gamma>'.\n       p' tagged_division_of {a..b} \\<and>\n       \\<gamma>' fine p' \\<and>\n       (\\<forall>(x, K)\\<in>p'. x \\<notin> s) \\<and> gauge \\<gamma>'", "let ?\\<gamma>' = \"\\<lambda>x. if (\\<exists>xK \\<in> p. f xK  = x) then (\\<gamma> o fst o  the_inv_into p f) x else \\<gamma> x\""], ["proof (state)\ngoal (1 subgoal):\n 1. \\<exists>p' \\<gamma>'.\n       p' tagged_division_of {a..b} \\<and>\n       \\<gamma>' fine p' \\<and>\n       (\\<forall>(x, K)\\<in>p'. x \\<notin> s) \\<and> gauge \\<gamma>'", "have 2: \"?\\<gamma>' fine ?p'\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>x.\n        if \\<exists>xK\\<in>p. f xK = x\n        then (\\<gamma> \\<circ> fst \\<circ> the_inv_into p f) x\n        else \\<gamma> x) fine\n    {(f xK, snd xK) |xK. xK \\<in> p}", "using assms(3)"], ["proof (prove)\nusing this:\n  \\<gamma> fine p\n\ngoal (1 subgoal):\n 1. (\\<lambda>x.\n        if \\<exists>xK\\<in>p. f xK = x\n        then (\\<gamma> \\<circ> fst \\<circ> the_inv_into p f) x\n        else \\<gamma> x) fine\n    {(f xK, snd xK) |xK. xK \\<in> p}", "apply(auto simp add: fine_def case_prod_beta the_inv_into_f_f[OF f_inj])"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>b aa ba x ab.\n       \\<lbrakk>\\<forall>x\\<in>p. snd x \\<subseteq> \\<gamma> (fst x);\n        (aa, ba) \\<in> p; x \\<in> b; f (aa, ba) = f (ab, b);\n        (ab, b) \\<in> p\\<rbrakk>\n       \\<Longrightarrow> x \\<in> \\<gamma> ab", "by force"], ["proof (state)\nthis:\n  (\\<lambda>x.\n      if \\<exists>xK\\<in>p. f xK = x\n      then (\\<gamma> \\<circ> fst \\<circ> the_inv_into p f) x\n      else \\<gamma> x) fine\n  {(f xK, snd xK) |xK. xK \\<in> p}\n\ngoal (1 subgoal):\n 1. \\<exists>p' \\<gamma>'.\n       p' tagged_division_of {a..b} \\<and>\n       \\<gamma>' fine p' \\<and>\n       (\\<forall>(x, K)\\<in>p'. x \\<notin> s) \\<and> gauge \\<gamma>'", "have 3: \"gauge ?\\<gamma>'\""], ["proof (prove)\ngoal (1 subgoal):\n 1. gauge\n     (\\<lambda>x.\n         if \\<exists>xK\\<in>p. f xK = x\n         then (\\<gamma> \\<circ> fst \\<circ> the_inv_into p f) x\n         else \\<gamma> x)", "using assms(5) assms(3) f'"], ["proof (prove)\nusing this:\n  gauge \\<gamma>\n  \\<gamma> fine p\n  \\<forall>(x, K)\\<in>p. f (x, K) \\<notin> s \\<and> f (x, K) \\<in> K\n\ngoal (1 subgoal):\n 1. gauge\n     (\\<lambda>x.\n         if \\<exists>xK\\<in>p. f xK = x\n         then (\\<gamma> \\<circ> fst \\<circ> the_inv_into p f) x\n         else \\<gamma> x)", "apply(auto simp add: fine_def gauge_def case_prod_beta the_inv_into_f_f[OF f_inj])"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>a b.\n       \\<lbrakk>\\<forall>x. x \\<in> \\<gamma> x \\<and> open (\\<gamma> x);\n        \\<forall>x\\<in>p. snd x \\<subseteq> \\<gamma> (fst x);\n        \\<forall>x\\<in>p. f x \\<notin> s \\<and> f x \\<in> snd x;\n        (a, b) \\<in> p\\<rbrakk>\n       \\<Longrightarrow> f (a, b) \\<in> \\<gamma> a", "by force"], ["proof (state)\nthis:\n  gauge\n   (\\<lambda>x.\n       if \\<exists>xK\\<in>p. f xK = x\n       then (\\<gamma> \\<circ> fst \\<circ> the_inv_into p f) x\n       else \\<gamma> x)\n\ngoal (1 subgoal):\n 1. \\<exists>p' \\<gamma>'.\n       p' tagged_division_of {a..b} \\<and>\n       \\<gamma>' fine p' \\<and>\n       (\\<forall>(x, K)\\<in>p'. x \\<notin> s) \\<and> gauge \\<gamma>'", "have \"?p' tagged_division_of {a..b} \\<and> ?\\<gamma>' fine ?p' \\<and> (\\<forall>(x, K)\\<in>?p'. x \\<notin> s) \\<and> gauge ?\\<gamma>'\""], ["proof (prove)\ngoal (1 subgoal):\n 1. {(f xK, snd xK) |xK. xK \\<in> p} tagged_division_of {a..b} \\<and>\n    (\\<lambda>x.\n        if \\<exists>xK\\<in>p. f xK = x\n        then (\\<gamma> \\<circ> fst \\<circ> the_inv_into p f) x\n        else \\<gamma> x) fine\n    {(f xK, snd xK) |xK. xK \\<in> p} \\<and>\n    (\\<forall>(x, K)\\<in>{(f xK, snd xK) |xK. xK \\<in> p}.\n        x \\<notin> s) \\<and>\n    gauge\n     (\\<lambda>x.\n         if \\<exists>xK\\<in>p. f xK = x\n         then (\\<gamma> \\<circ> fst \\<circ> the_inv_into p f) x\n         else \\<gamma> x)", "using 0 1 2 3"], ["proof (prove)\nusing this:\n  \\<forall>(x, K)\\<in>{(f xK, snd xK) |xK. xK \\<in> p}. x \\<notin> s\n  {(f xK, snd xK) |xK. xK \\<in> p} tagged_division_of {a..b}\n  (\\<lambda>x.\n      if \\<exists>xK\\<in>p. f xK = x\n      then (\\<gamma> \\<circ> fst \\<circ> the_inv_into p f) x\n      else \\<gamma> x) fine\n  {(f xK, snd xK) |xK. xK \\<in> p}\n  gauge\n   (\\<lambda>x.\n       if \\<exists>xK\\<in>p. f xK = x\n       then (\\<gamma> \\<circ> fst \\<circ> the_inv_into p f) x\n       else \\<gamma> x)\n\ngoal (1 subgoal):\n 1. {(f xK, snd xK) |xK. xK \\<in> p} tagged_division_of {a..b} \\<and>\n    (\\<lambda>x.\n        if \\<exists>xK\\<in>p. f xK = x\n        then (\\<gamma> \\<circ> fst \\<circ> the_inv_into p f) x\n        else \\<gamma> x) fine\n    {(f xK, snd xK) |xK. xK \\<in> p} \\<and>\n    (\\<forall>(x, K)\\<in>{(f xK, snd xK) |xK. xK \\<in> p}.\n        x \\<notin> s) \\<and>\n    gauge\n     (\\<lambda>x.\n         if \\<exists>xK\\<in>p. f xK = x\n         then (\\<gamma> \\<circ> fst \\<circ> the_inv_into p f) x\n         else \\<gamma> x)", "by auto"], ["proof (state)\nthis:\n  {(f xK, snd xK) |xK. xK \\<in> p} tagged_division_of {a..b} \\<and>\n  (\\<lambda>x.\n      if \\<exists>xK\\<in>p. f xK = x\n      then (\\<gamma> \\<circ> fst \\<circ> the_inv_into p f) x\n      else \\<gamma> x) fine\n  {(f xK, snd xK) |xK. xK \\<in> p} \\<and>\n  (\\<forall>(x, K)\\<in>{(f xK, snd xK) |xK. xK \\<in> p}.\n      x \\<notin> s) \\<and>\n  gauge\n   (\\<lambda>x.\n       if \\<exists>xK\\<in>p. f xK = x\n       then (\\<gamma> \\<circ> fst \\<circ> the_inv_into p f) x\n       else \\<gamma> x)\n\ngoal (1 subgoal):\n 1. \\<exists>p' \\<gamma>'.\n       p' tagged_division_of {a..b} \\<and>\n       \\<gamma>' fine p' \\<and>\n       (\\<forall>(x, K)\\<in>p'. x \\<notin> s) \\<and> gauge \\<gamma>'", "then"], ["proof (chain)\npicking this:\n  {(f xK, snd xK) |xK. xK \\<in> p} tagged_division_of {a..b} \\<and>\n  (\\<lambda>x.\n      if \\<exists>xK\\<in>p. f xK = x\n      then (\\<gamma> \\<circ> fst \\<circ> the_inv_into p f) x\n      else \\<gamma> x) fine\n  {(f xK, snd xK) |xK. xK \\<in> p} \\<and>\n  (\\<forall>(x, K)\\<in>{(f xK, snd xK) |xK. xK \\<in> p}.\n      x \\<notin> s) \\<and>\n  gauge\n   (\\<lambda>x.\n       if \\<exists>xK\\<in>p. f xK = x\n       then (\\<gamma> \\<circ> fst \\<circ> the_inv_into p f) x\n       else \\<gamma> x)", "show ?thesis"], ["proof (prove)\nusing this:\n  {(f xK, snd xK) |xK. xK \\<in> p} tagged_division_of {a..b} \\<and>\n  (\\<lambda>x.\n      if \\<exists>xK\\<in>p. f xK = x\n      then (\\<gamma> \\<circ> fst \\<circ> the_inv_into p f) x\n      else \\<gamma> x) fine\n  {(f xK, snd xK) |xK. xK \\<in> p} \\<and>\n  (\\<forall>(x, K)\\<in>{(f xK, snd xK) |xK. xK \\<in> p}.\n      x \\<notin> s) \\<and>\n  gauge\n   (\\<lambda>x.\n       if \\<exists>xK\\<in>p. f xK = x\n       then (\\<gamma> \\<circ> fst \\<circ> the_inv_into p f) x\n       else \\<gamma> x)\n\ngoal (1 subgoal):\n 1. \\<exists>p' \\<gamma>'.\n       p' tagged_division_of {a..b} \\<and>\n       \\<gamma>' fine p' \\<and>\n       (\\<forall>(x, K)\\<in>p'. x \\<notin> s) \\<and> gauge \\<gamma>'", "by smt"], ["proof (state)\nthis:\n  \\<exists>p' \\<gamma>'.\n     p' tagged_division_of {a..b} \\<and>\n     \\<gamma>' fine p' \\<and>\n     (\\<forall>(x, K)\\<in>p'. x \\<notin> s) \\<and> gauge \\<gamma>'\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma has_integral_bound_spike_finite:\n  fixes f :: \"'a::euclidean_space \\<Rightarrow> 'b::real_normed_vector\"\n  assumes \"0 \\<le> B\" and \"finite S\"\n    and f: \"(f has_integral i) (cbox a b)\"\n    and leB: \"\\<And>x. x \\<in> cbox a b - S \\<Longrightarrow> norm (f x) \\<le> B\"\n  shows \"norm i \\<le> B * content (cbox a b)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. norm i \\<le> B * content (cbox a b)", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. norm i \\<le> B * content (cbox a b)", "define g where \"g \\<equiv> (\\<lambda>x. if x \\<in> S then 0 else f x)\""], ["proof (state)\nthis:\n  g \\<equiv> \\<lambda>x. if x \\<in> S then 0::'b else f x\n\ngoal (1 subgoal):\n 1. norm i \\<le> B * content (cbox a b)", "then"], ["proof (chain)\npicking this:\n  g \\<equiv> \\<lambda>x. if x \\<in> S then 0::'b else f x", "have \"\\<And>x. x \\<in> cbox a b - S \\<Longrightarrow> norm (g x) \\<le> B\""], ["proof (prove)\nusing this:\n  g \\<equiv> \\<lambda>x. if x \\<in> S then 0::'b else f x\n\ngoal (1 subgoal):\n 1. \\<And>x. x \\<in> cbox a b - S \\<Longrightarrow> norm (g x) \\<le> B", "using leB"], ["proof (prove)\nusing this:\n  g \\<equiv> \\<lambda>x. if x \\<in> S then 0::'b else f x\n  ?x \\<in> cbox a b - S \\<Longrightarrow> norm (f ?x) \\<le> B\n\ngoal (1 subgoal):\n 1. \\<And>x. x \\<in> cbox a b - S \\<Longrightarrow> norm (g x) \\<le> B", "by simp"], ["proof (state)\nthis:\n  ?x \\<in> cbox a b - S \\<Longrightarrow> norm (g ?x) \\<le> B\n\ngoal (1 subgoal):\n 1. norm i \\<le> B * content (cbox a b)", "moreover"], ["proof (state)\nthis:\n  ?x \\<in> cbox a b - S \\<Longrightarrow> norm (g ?x) \\<le> B\n\ngoal (1 subgoal):\n 1. norm i \\<le> B * content (cbox a b)", "have \"(g has_integral i) (cbox a b)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (g has_integral i) (cbox a b)", "using has_integral_spike_finite [OF \\<open>finite S\\<close> _ f]"], ["proof (prove)\nusing this:\n  (\\<And>x.\n      x \\<in> cbox a b - S \\<Longrightarrow> ?g x = f x) \\<Longrightarrow>\n  (?g has_integral i) (cbox a b)\n\ngoal (1 subgoal):\n 1. (g has_integral i) (cbox a b)", "by (simp add: g_def)"], ["proof (state)\nthis:\n  (g has_integral i) (cbox a b)\n\ngoal (1 subgoal):\n 1. norm i \\<le> B * content (cbox a b)", "ultimately"], ["proof (chain)\npicking this:\n  ?x \\<in> cbox a b - S \\<Longrightarrow> norm (g ?x) \\<le> B\n  (g has_integral i) (cbox a b)", "show ?thesis"], ["proof (prove)\nusing this:\n  ?x \\<in> cbox a b - S \\<Longrightarrow> norm (g ?x) \\<le> B\n  (g has_integral i) (cbox a b)\n\ngoal (1 subgoal):\n 1. norm i \\<le> B * content (cbox a b)", "by (simp add: \\<open>0 \\<le> B\\<close> g_def has_integral_bound)"], ["proof (state)\nthis:\n  norm i \\<le> B * content (cbox a b)\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma has_integral_bound_:\n  fixes f :: \"real \\<Rightarrow> 'a::real_normed_vector\"\n  assumes \"a < b\"\n    and \"0 \\<le> B\"\n    and f: \"(f has_integral i) (cbox a b)\"\n    and \"finite s\"\n    and \"\\<forall>x\\<in>(cbox a b)-s. norm (f x) \\<le> B\"\n  shows \"norm i \\<le> B * content (cbox a b)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. norm i \\<le> B * content (cbox a b)", "using has_integral_bound_spike_finite assms"], ["proof (prove)\nusing this:\n  \\<lbrakk>0 \\<le> ?B; finite ?S; (?f has_integral ?i) (cbox ?a ?b);\n   \\<And>x.\n      x \\<in> cbox ?a ?b - ?S \\<Longrightarrow>\n      norm (?f x) \\<le> ?B\\<rbrakk>\n  \\<Longrightarrow> norm ?i \\<le> ?B * content (cbox ?a ?b)\n  a < b\n  0 \\<le> B\n  (f has_integral i) (cbox a b)\n  finite s\n  \\<forall>x\\<in>cbox a b - s. norm (f x) \\<le> B\n\ngoal (1 subgoal):\n 1. norm i \\<le> B * content (cbox a b)", "by blast"], ["", "corollary has_integral_bound_real':\n  fixes f :: \"real \\<Rightarrow> 'b::real_normed_vector\"\n  assumes \"0 \\<le> B\"\n    and f: \"(f has_integral i) (cbox a b)\"\n    and \"finite s\"\n    and \"\\<forall>x\\<in>(cbox a b)-s. norm (f x) \\<le> B\"\n  shows \"norm i \\<le> B * content {a..b}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. norm i \\<le> B * content {a..b}", "(*sledgehammer*)"], ["proof (prove)\ngoal (1 subgoal):\n 1. norm i \\<le> B * content {a..b}", "by (metis assms(1) assms(3) assms(4) box_real(2) f has_integral_bound_spike_finite)"], ["", "lemma integral_has_vector_derivative_continuous_at':\n  fixes f :: \"real \\<Rightarrow> 'a::banach\"\n  assumes \"finite s\"\n    and f: \"f integrable_on {a..b}\"\n    and x: \"x \\<in> {a..b} - s\"\n    and fx: \"continuous (at x within ({a..b} - s)) f\"\n  shows \"((\\<lambda>u. integral {a..u} f) has_vector_derivative f x) (at x within ({a..b} - s))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. ((\\<lambda>u. integral {a..u} f) has_vector_derivative f x)\n     (at x within {a..b} - s)", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. ((\\<lambda>u. integral {a..u} f) has_vector_derivative f x)\n     (at x within {a..b} - s)", "let ?I = \"\\<lambda>a b. integral {a..b} f\""], ["proof (state)\ngoal (1 subgoal):\n 1. ((\\<lambda>u. integral {a..u} f) has_vector_derivative f x)\n     (at x within {a..b} - s)", "{"], ["proof (state)\ngoal (1 subgoal):\n 1. ((\\<lambda>u. integral {a..u} f) has_vector_derivative f x)\n     (at x within {a..b} - s)", "fix e::real"], ["proof (state)\ngoal (1 subgoal):\n 1. ((\\<lambda>u. integral {a..u} f) has_vector_derivative f x)\n     (at x within {a..b} - s)", "assume \"e > 0\""], ["proof (state)\nthis:\n  0 < e\n\ngoal (1 subgoal):\n 1. ((\\<lambda>u. integral {a..u} f) has_vector_derivative f x)\n     (at x within {a..b} - s)", "obtain d where \"d>0\" and d: \"\\<And>x'. \\<lbrakk>x' \\<in> {a..b} - s; \\<bar>x' - x\\<bar> < d\\<rbrakk> \\<Longrightarrow> norm(f x' - f x) \\<le> e\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>d.\n        \\<lbrakk>0 < d;\n         \\<And>x'.\n            \\<lbrakk>x' \\<in> {a..b} - s; \\<bar>x' - x\\<bar> < d\\<rbrakk>\n            \\<Longrightarrow> norm (f x' - f x) \\<le> e\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "using \\<open>e>0\\<close> fx"], ["proof (prove)\nusing this:\n  0 < e\n  continuous (at x within {a..b} - s) f\n\ngoal (1 subgoal):\n 1. (\\<And>d.\n        \\<lbrakk>0 < d;\n         \\<And>x'.\n            \\<lbrakk>x' \\<in> {a..b} - s; \\<bar>x' - x\\<bar> < d\\<rbrakk>\n            \\<Longrightarrow> norm (f x' - f x) \\<le> e\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by (auto simp: continuous_within_eps_delta dist_norm less_imp_le)"], ["proof (state)\nthis:\n  0 < d\n  \\<lbrakk>?x' \\<in> {a..b} - s; \\<bar>?x' - x\\<bar> < d\\<rbrakk>\n  \\<Longrightarrow> norm (f ?x' - f x) \\<le> e\n\ngoal (1 subgoal):\n 1. ((\\<lambda>u. integral {a..u} f) has_vector_derivative f x)\n     (at x within {a..b} - s)", "have \"norm (integral {a..y} f - integral {a..x} f - (y-x) *\\<^sub>R f x) \\<le> e * \\<bar>y - x\\<bar>\"\n      if y: \"y \\<in> {a..b} - s\" and yx: \"\\<bar>y - x\\<bar> < d\" for y"], ["proof (prove)\ngoal (1 subgoal):\n 1. norm (integral {a..y} f - integral {a..x} f - (y - x) *\\<^sub>R f x)\n    \\<le> e * \\<bar>y - x\\<bar>", "proof (cases \"y < x\")"], ["proof (state)\ngoal (2 subgoals):\n 1. y < x \\<Longrightarrow>\n    norm (integral {a..y} f - integral {a..x} f - (y - x) *\\<^sub>R f x)\n    \\<le> e * \\<bar>y - x\\<bar>\n 2. \\<not> y < x \\<Longrightarrow>\n    norm (integral {a..y} f - integral {a..x} f - (y - x) *\\<^sub>R f x)\n    \\<le> e * \\<bar>y - x\\<bar>", "case False"], ["proof (state)\nthis:\n  \\<not> y < x\n\ngoal (2 subgoals):\n 1. y < x \\<Longrightarrow>\n    norm (integral {a..y} f - integral {a..x} f - (y - x) *\\<^sub>R f x)\n    \\<le> e * \\<bar>y - x\\<bar>\n 2. \\<not> y < x \\<Longrightarrow>\n    norm (integral {a..y} f - integral {a..x} f - (y - x) *\\<^sub>R f x)\n    \\<le> e * \\<bar>y - x\\<bar>", "have \"f integrable_on {a..y}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. f integrable_on {a..y}", "using f y"], ["proof (prove)\nusing this:\n  f integrable_on {a..b}\n  y \\<in> {a..b} - s\n\ngoal (1 subgoal):\n 1. f integrable_on {a..y}", "by (simp add: integrable_subinterval_real)"], ["proof (state)\nthis:\n  f integrable_on {a..y}\n\ngoal (2 subgoals):\n 1. y < x \\<Longrightarrow>\n    norm (integral {a..y} f - integral {a..x} f - (y - x) *\\<^sub>R f x)\n    \\<le> e * \\<bar>y - x\\<bar>\n 2. \\<not> y < x \\<Longrightarrow>\n    norm (integral {a..y} f - integral {a..x} f - (y - x) *\\<^sub>R f x)\n    \\<le> e * \\<bar>y - x\\<bar>", "then"], ["proof (chain)\npicking this:\n  f integrable_on {a..y}", "have Idiff: \"?I a y - ?I a x = ?I x y\""], ["proof (prove)\nusing this:\n  f integrable_on {a..y}\n\ngoal (1 subgoal):\n 1. integral {a..y} f - integral {a..x} f = integral {x..y} f", "using False x"], ["proof (prove)\nusing this:\n  f integrable_on {a..y}\n  \\<not> y < x\n  x \\<in> {a..b} - s\n\ngoal (1 subgoal):\n 1. integral {a..y} f - integral {a..x} f = integral {x..y} f", "by (simp add: algebra_simps Henstock_Kurzweil_Integration.integral_combine)"], ["proof (state)\nthis:\n  integral {a..y} f - integral {a..x} f = integral {x..y} f\n\ngoal (2 subgoals):\n 1. y < x \\<Longrightarrow>\n    norm (integral {a..y} f - integral {a..x} f - (y - x) *\\<^sub>R f x)\n    \\<le> e * \\<bar>y - x\\<bar>\n 2. \\<not> y < x \\<Longrightarrow>\n    norm (integral {a..y} f - integral {a..x} f - (y - x) *\\<^sub>R f x)\n    \\<le> e * \\<bar>y - x\\<bar>", "have fux_int: \"((\\<lambda>u. f u - f x) has_integral integral {x..y} f - (y-x) *\\<^sub>R f x) {x..y}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. ((\\<lambda>u. f u - f x) has_integral\n     integral {x..y} f - (y - x) *\\<^sub>R f x)\n     {x..y}", "apply (rule has_integral_diff)"], ["proof (prove)\ngoal (2 subgoals):\n 1. (f has_integral integral {x..y} f) {x..y}\n 2. ((\\<lambda>xa. f x) has_integral (y - x) *\\<^sub>R f x) {x..y}", "using x y"], ["proof (prove)\nusing this:\n  x \\<in> {a..b} - s\n  y \\<in> {a..b} - s\n\ngoal (2 subgoals):\n 1. (f has_integral integral {x..y} f) {x..y}\n 2. ((\\<lambda>xa. f x) has_integral (y - x) *\\<^sub>R f x) {x..y}", "apply (auto intro: integrable_integral [OF integrable_subinterval_real [OF f]])"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>a \\<le> x; a \\<le> y; x \\<le> b; x \\<notin> s; y \\<le> b;\n     y \\<notin> s\\<rbrakk>\n    \\<Longrightarrow> ((\\<lambda>xa. f x) has_integral\n                       (y - x) *\\<^sub>R f x)\n                       {x..y}", "using has_integral_const_real [of \"f x\" x y] False"], ["proof (prove)\nusing this:\n  ((\\<lambda>xa. f x) has_integral content {x..y} *\\<^sub>R f x) {x..y}\n  \\<not> y < x\n\ngoal (1 subgoal):\n 1. \\<lbrakk>a \\<le> x; a \\<le> y; x \\<le> b; x \\<notin> s; y \\<le> b;\n     y \\<notin> s\\<rbrakk>\n    \\<Longrightarrow> ((\\<lambda>xa. f x) has_integral\n                       (y - x) *\\<^sub>R f x)\n                       {x..y}", "apply (simp add: )"], ["proof (prove)\ngoal:\nNo subgoals!", "done"], ["proof (state)\nthis:\n  ((\\<lambda>u. f u - f x) has_integral\n   integral {x..y} f - (y - x) *\\<^sub>R f x)\n   {x..y}\n\ngoal (2 subgoals):\n 1. y < x \\<Longrightarrow>\n    norm (integral {a..y} f - integral {a..x} f - (y - x) *\\<^sub>R f x)\n    \\<le> e * \\<bar>y - x\\<bar>\n 2. \\<not> y < x \\<Longrightarrow>\n    norm (integral {a..y} f - integral {a..x} f - (y - x) *\\<^sub>R f x)\n    \\<le> e * \\<bar>y - x\\<bar>", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. norm (integral {a..y} f - integral {a..x} f - (y - x) *\\<^sub>R f x)\n    \\<le> e * \\<bar>y - x\\<bar>", "using False"], ["proof (prove)\nusing this:\n  \\<not> y < x\n\ngoal (1 subgoal):\n 1. norm (integral {a..y} f - integral {a..x} f - (y - x) *\\<^sub>R f x)\n    \\<le> e * \\<bar>y - x\\<bar>", "apply (simp add: abs_eq_content del: content_real_if measure_lborel_Icc)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<not> y < x \\<Longrightarrow>\n    norm (integral {a..y} f - integral {a..x} f - (y - x) *\\<^sub>R f x)\n    \\<le> e * content {x..y}", "apply (rule has_integral_bound_real'[where f=\"(\\<lambda>u. f u - f x)\"])"], ["proof (prove)\ngoal (4 subgoals):\n 1. \\<not> y < x \\<Longrightarrow> 0 \\<le> e\n 2. \\<not> y < x \\<Longrightarrow>\n    ((\\<lambda>u. f u - f x) has_integral\n     integral {a..y} f - integral {a..x} f - (y - x) *\\<^sub>R f x)\n     (cbox x y)\n 3. \\<not> y < x \\<Longrightarrow> finite ?s8\n 4. \\<not> y < x \\<Longrightarrow>\n    \\<forall>xa\\<in>cbox x y - ?s8. norm (f xa - f x) \\<le> e", "using yx False d x y \\<open>e>0\\<close>"], ["proof (prove)\nusing this:\n  \\<bar>y - x\\<bar> < d\n  \\<not> y < x\n  \\<lbrakk>?x' \\<in> {a..b} - s; \\<bar>?x' - x\\<bar> < d\\<rbrakk>\n  \\<Longrightarrow> norm (f ?x' - f x) \\<le> e\n  x \\<in> {a..b} - s\n  y \\<in> {a..b} - s\n  0 < e\n\ngoal (4 subgoals):\n 1. \\<not> y < x \\<Longrightarrow> 0 \\<le> e\n 2. \\<not> y < x \\<Longrightarrow>\n    ((\\<lambda>u. f u - f x) has_integral\n     integral {a..y} f - integral {a..x} f - (y - x) *\\<^sub>R f x)\n     (cbox x y)\n 3. \\<not> y < x \\<Longrightarrow> finite ?s8\n 4. \\<not> y < x \\<Longrightarrow>\n    \\<forall>xa\\<in>cbox x y - ?s8. norm (f xa - f x) \\<le> e", "apply (auto simp add: Idiff fux_int)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>xa.\n       \\<lbrakk>y - x < d;\n        \\<And>x'.\n           \\<lbrakk>a \\<le> x' \\<and> x' \\<le> b \\<and> x' \\<notin> s;\n            \\<bar>x' - x\\<bar> < d\\<rbrakk>\n           \\<Longrightarrow> norm (f x' - f x) \\<le> e;\n        0 < e; xa \\<notin># ?M48; a \\<le> x; x \\<notin> s; y \\<le> b;\n        y \\<notin> s; x \\<le> xa; xa \\<le> y\\<rbrakk>\n       \\<Longrightarrow> norm (f xa - f x) \\<le> e", "proof-"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>xa.\n       \\<lbrakk>y - x < d;\n        \\<And>x'.\n           \\<lbrakk>a \\<le> x' \\<and> x' \\<le> b \\<and> x' \\<notin> s;\n            \\<bar>x' - x\\<bar> < d\\<rbrakk>\n           \\<Longrightarrow> norm (f x' - f x) \\<le> e;\n        0 < e; xa \\<notin># ?M48; a \\<le> x; x \\<notin> s; y \\<le> b;\n        y \\<notin> s; x \\<le> xa; xa \\<le> y\\<rbrakk>\n       \\<Longrightarrow> norm (f xa - f x) \\<le> e", "let ?M48= \"mset_set s\""], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>xa.\n       \\<lbrakk>y - x < d;\n        \\<And>x'.\n           \\<lbrakk>a \\<le> x' \\<and> x' \\<le> b \\<and> x' \\<notin> s;\n            \\<bar>x' - x\\<bar> < d\\<rbrakk>\n           \\<Longrightarrow> norm (f x' - f x) \\<le> e;\n        0 < e; xa \\<notin># ?M48; a \\<le> x; x \\<notin> s; y \\<le> b;\n        y \\<notin> s; x \\<le> xa; xa \\<le> y\\<rbrakk>\n       \\<Longrightarrow> norm (f xa - f x) \\<le> e", "show \"\\<And>z. y - x < d \\<Longrightarrow> (\\<And>x'. a \\<le> x' \\<and> x' \\<le> b \\<and> x' \\<notin> s \\<Longrightarrow> \\<bar>x' - x\\<bar> < d \\<Longrightarrow> norm (f x' - f x) \\<le> e) \\<Longrightarrow> 0 < e \\<Longrightarrow> z \\<notin># ?M48 \\<Longrightarrow> a \\<le> x \\<Longrightarrow> x \\<notin> s \\<Longrightarrow> y \\<le> b \\<Longrightarrow> y \\<notin> s \\<Longrightarrow> x \\<le> z \\<Longrightarrow> z \\<le> y \\<Longrightarrow> norm (f z - f x) \\<le> e\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>z.\n       \\<lbrakk>y - x < d;\n        \\<And>x'.\n           \\<lbrakk>a \\<le> x' \\<and> x' \\<le> b \\<and> x' \\<notin> s;\n            \\<bar>x' - x\\<bar> < d\\<rbrakk>\n           \\<Longrightarrow> norm (f x' - f x) \\<le> e;\n        0 < e; z \\<notin># mset_set s; a \\<le> x; x \\<notin> s; y \\<le> b;\n        y \\<notin> s; x \\<le> z; z \\<le> y\\<rbrakk>\n       \\<Longrightarrow> norm (f z - f x) \\<le> e", "using assms"], ["proof (prove)\nusing this:\n  finite s\n  f integrable_on {a..b}\n  x \\<in> {a..b} - s\n  continuous (at x within {a..b} - s) f\n\ngoal (1 subgoal):\n 1. \\<And>z.\n       \\<lbrakk>y - x < d;\n        \\<And>x'.\n           \\<lbrakk>a \\<le> x' \\<and> x' \\<le> b \\<and> x' \\<notin> s;\n            \\<bar>x' - x\\<bar> < d\\<rbrakk>\n           \\<Longrightarrow> norm (f x' - f x) \\<le> e;\n        0 < e; z \\<notin># mset_set s; a \\<le> x; x \\<notin> s; y \\<le> b;\n        y \\<notin> s; x \\<le> z; z \\<le> y\\<rbrakk>\n       \\<Longrightarrow> norm (f z - f x) \\<le> e", "by auto"], ["proof (state)\nthis:\n  \\<lbrakk>y - x < d;\n   \\<And>x'.\n      \\<lbrakk>a \\<le> x' \\<and> x' \\<le> b \\<and> x' \\<notin> s;\n       \\<bar>x' - x\\<bar> < d\\<rbrakk>\n      \\<Longrightarrow> norm (f x' - f x) \\<le> e;\n   0 < e; ?z \\<notin># mset_set s; a \\<le> x; x \\<notin> s; y \\<le> b;\n   y \\<notin> s; x \\<le> ?z; ?z \\<le> y\\<rbrakk>\n  \\<Longrightarrow> norm (f ?z - f x) \\<le> e\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  norm (integral {a..y} f - integral {a..x} f - (y - x) *\\<^sub>R f x)\n  \\<le> e * \\<bar>y - x\\<bar>\n\ngoal (1 subgoal):\n 1. y < x \\<Longrightarrow>\n    norm (integral {a..y} f - integral {a..x} f - (y - x) *\\<^sub>R f x)\n    \\<le> e * \\<bar>y - x\\<bar>", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. y < x \\<Longrightarrow>\n    norm (integral {a..y} f - integral {a..x} f - (y - x) *\\<^sub>R f x)\n    \\<le> e * \\<bar>y - x\\<bar>", "case True"], ["proof (state)\nthis:\n  y < x\n\ngoal (1 subgoal):\n 1. y < x \\<Longrightarrow>\n    norm (integral {a..y} f - integral {a..x} f - (y - x) *\\<^sub>R f x)\n    \\<le> e * \\<bar>y - x\\<bar>", "have \"f integrable_on {a..x}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. f integrable_on {a..x}", "using f x"], ["proof (prove)\nusing this:\n  f integrable_on {a..b}\n  x \\<in> {a..b} - s\n\ngoal (1 subgoal):\n 1. f integrable_on {a..x}", "by (simp add: integrable_subinterval_real)"], ["proof (state)\nthis:\n  f integrable_on {a..x}\n\ngoal (1 subgoal):\n 1. y < x \\<Longrightarrow>\n    norm (integral {a..y} f - integral {a..x} f - (y - x) *\\<^sub>R f x)\n    \\<le> e * \\<bar>y - x\\<bar>", "then"], ["proof (chain)\npicking this:\n  f integrable_on {a..x}", "have Idiff: \"?I a x - ?I a y = ?I y x\""], ["proof (prove)\nusing this:\n  f integrable_on {a..x}\n\ngoal (1 subgoal):\n 1. integral {a..x} f - integral {a..y} f = integral {y..x} f", "using True x y"], ["proof (prove)\nusing this:\n  f integrable_on {a..x}\n  y < x\n  x \\<in> {a..b} - s\n  y \\<in> {a..b} - s\n\ngoal (1 subgoal):\n 1. integral {a..x} f - integral {a..y} f = integral {y..x} f", "by (simp add: algebra_simps Henstock_Kurzweil_Integration.integral_combine)"], ["proof (state)\nthis:\n  integral {a..x} f - integral {a..y} f = integral {y..x} f\n\ngoal (1 subgoal):\n 1. y < x \\<Longrightarrow>\n    norm (integral {a..y} f - integral {a..x} f - (y - x) *\\<^sub>R f x)\n    \\<le> e * \\<bar>y - x\\<bar>", "have fux_int: \"((\\<lambda>u. f u - f x) has_integral integral {y..x} f - (x - y) *\\<^sub>R f x) {y..x}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. ((\\<lambda>u. f u - f x) has_integral\n     integral {y..x} f - (x - y) *\\<^sub>R f x)\n     {y..x}", "apply (rule has_integral_diff)"], ["proof (prove)\ngoal (2 subgoals):\n 1. (f has_integral integral {y..x} f) {y..x}\n 2. ((\\<lambda>xa. f x) has_integral (x - y) *\\<^sub>R f x) {y..x}", "using x y"], ["proof (prove)\nusing this:\n  x \\<in> {a..b} - s\n  y \\<in> {a..b} - s\n\ngoal (2 subgoals):\n 1. (f has_integral integral {y..x} f) {y..x}\n 2. ((\\<lambda>xa. f x) has_integral (x - y) *\\<^sub>R f x) {y..x}", "apply (auto intro: integrable_integral [OF integrable_subinterval_real [OF f]])"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>a \\<le> x; a \\<le> y; x \\<le> b; x \\<notin> s; y \\<le> b;\n     y \\<notin> s\\<rbrakk>\n    \\<Longrightarrow> ((\\<lambda>xa. f x) has_integral\n                       (x - y) *\\<^sub>R f x)\n                       {y..x}", "using has_integral_const_real [of \"f x\" y x] True"], ["proof (prove)\nusing this:\n  ((\\<lambda>xa. f x) has_integral content {y..x} *\\<^sub>R f x) {y..x}\n  y < x\n\ngoal (1 subgoal):\n 1. \\<lbrakk>a \\<le> x; a \\<le> y; x \\<le> b; x \\<notin> s; y \\<le> b;\n     y \\<notin> s\\<rbrakk>\n    \\<Longrightarrow> ((\\<lambda>xa. f x) has_integral\n                       (x - y) *\\<^sub>R f x)\n                       {y..x}", "apply (simp add: )"], ["proof (prove)\ngoal:\nNo subgoals!", "done"], ["proof (state)\nthis:\n  ((\\<lambda>u. f u - f x) has_integral\n   integral {y..x} f - (x - y) *\\<^sub>R f x)\n   {y..x}\n\ngoal (1 subgoal):\n 1. y < x \\<Longrightarrow>\n    norm (integral {a..y} f - integral {a..x} f - (y - x) *\\<^sub>R f x)\n    \\<le> e * \\<bar>y - x\\<bar>", "have \"norm (integral {a..x} f - integral {a..y} f - (x - y) *\\<^sub>R f x) \\<le> e * \\<bar>y - x\\<bar>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. norm (integral {a..x} f - integral {a..y} f - (x - y) *\\<^sub>R f x)\n    \\<le> e * \\<bar>y - x\\<bar>", "using True"], ["proof (prove)\nusing this:\n  y < x\n\ngoal (1 subgoal):\n 1. norm (integral {a..x} f - integral {a..y} f - (x - y) *\\<^sub>R f x)\n    \\<le> e * \\<bar>y - x\\<bar>", "apply (simp add: abs_eq_content del: content_real_if measure_lborel_Icc)"], ["proof (prove)\ngoal (1 subgoal):\n 1. y < x \\<Longrightarrow>\n    norm (integral {a..x} f - integral {a..y} f - (x - y) *\\<^sub>R f x)\n    \\<le> e * content {y..x}", "apply (rule has_integral_bound_real'[where f=\"(\\<lambda>u. f u - f x)\"])"], ["proof (prove)\ngoal (4 subgoals):\n 1. y < x \\<Longrightarrow> 0 \\<le> e\n 2. y < x \\<Longrightarrow>\n    ((\\<lambda>u. f u - f x) has_integral\n     integral {a..x} f - integral {a..y} f - (x - y) *\\<^sub>R f x)\n     (cbox y x)\n 3. y < x \\<Longrightarrow> finite ?s4\n 4. y < x \\<Longrightarrow>\n    \\<forall>xa\\<in>cbox y x - ?s4. norm (f xa - f x) \\<le> e", "using yx True d x y \\<open>e>0\\<close>"], ["proof (prove)\nusing this:\n  \\<bar>y - x\\<bar> < d\n  y < x\n  \\<lbrakk>?x' \\<in> {a..b} - s; \\<bar>?x' - x\\<bar> < d\\<rbrakk>\n  \\<Longrightarrow> norm (f ?x' - f x) \\<le> e\n  x \\<in> {a..b} - s\n  y \\<in> {a..b} - s\n  0 < e\n\ngoal (4 subgoals):\n 1. y < x \\<Longrightarrow> 0 \\<le> e\n 2. y < x \\<Longrightarrow>\n    ((\\<lambda>u. f u - f x) has_integral\n     integral {a..x} f - integral {a..y} f - (x - y) *\\<^sub>R f x)\n     (cbox y x)\n 3. y < x \\<Longrightarrow> finite ?s4\n 4. y < x \\<Longrightarrow>\n    \\<forall>xa\\<in>cbox y x - ?s4. norm (f xa - f x) \\<le> e", "apply (auto simp add: Idiff fux_int)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>xa.\n       \\<lbrakk>x - y < d; y < x;\n        \\<And>x'.\n           \\<lbrakk>a \\<le> x' \\<and> x' \\<le> b \\<and> x' \\<notin> s;\n            \\<bar>x' - x\\<bar> < d\\<rbrakk>\n           \\<Longrightarrow> norm (f x' - f x) \\<le> e;\n        0 < e; xa \\<notin># ?M44; x \\<le> b; x \\<notin> s; a \\<le> y;\n        y \\<notin> s; y \\<le> xa; xa \\<le> x\\<rbrakk>\n       \\<Longrightarrow> norm (f xa - f x) \\<le> e", "proof-"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>xa.\n       \\<lbrakk>x - y < d; y < x;\n        \\<And>x'.\n           \\<lbrakk>a \\<le> x' \\<and> x' \\<le> b \\<and> x' \\<notin> s;\n            \\<bar>x' - x\\<bar> < d\\<rbrakk>\n           \\<Longrightarrow> norm (f x' - f x) \\<le> e;\n        0 < e; xa \\<notin># ?M44; x \\<le> b; x \\<notin> s; a \\<le> y;\n        y \\<notin> s; y \\<le> xa; xa \\<le> x\\<rbrakk>\n       \\<Longrightarrow> norm (f xa - f x) \\<le> e", "let ?M44= \"mset_set s\""], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>xa.\n       \\<lbrakk>x - y < d; y < x;\n        \\<And>x'.\n           \\<lbrakk>a \\<le> x' \\<and> x' \\<le> b \\<and> x' \\<notin> s;\n            \\<bar>x' - x\\<bar> < d\\<rbrakk>\n           \\<Longrightarrow> norm (f x' - f x) \\<le> e;\n        0 < e; xa \\<notin># ?M44; x \\<le> b; x \\<notin> s; a \\<le> y;\n        y \\<notin> s; y \\<le> xa; xa \\<le> x\\<rbrakk>\n       \\<Longrightarrow> norm (f xa - f x) \\<le> e", "show \" \\<And>xa. x - y < d \\<Longrightarrow> y < x \\<Longrightarrow> (\\<And>x'. a \\<le> x' \\<and> x' \\<le> b \\<and> x' \\<notin> s \\<Longrightarrow> \\<bar>x' - x\\<bar> < d \\<Longrightarrow> norm (f x' - f x) \\<le> e) \\<Longrightarrow> 0 < e \\<Longrightarrow> xa \\<notin># ?M44 \\<Longrightarrow> x \\<le> b \\<Longrightarrow> x \\<notin> s \\<Longrightarrow> a \\<le> y \\<Longrightarrow> y \\<notin> s \\<Longrightarrow> y \\<le> xa \\<Longrightarrow> xa \\<le> x \\<Longrightarrow> norm (f xa - f x) \\<le> e\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>xa.\n       \\<lbrakk>x - y < d; y < x;\n        \\<And>x'.\n           \\<lbrakk>a \\<le> x' \\<and> x' \\<le> b \\<and> x' \\<notin> s;\n            \\<bar>x' - x\\<bar> < d\\<rbrakk>\n           \\<Longrightarrow> norm (f x' - f x) \\<le> e;\n        0 < e; xa \\<notin># mset_set s; x \\<le> b; x \\<notin> s; a \\<le> y;\n        y \\<notin> s; y \\<le> xa; xa \\<le> x\\<rbrakk>\n       \\<Longrightarrow> norm (f xa - f x) \\<le> e", "using assms"], ["proof (prove)\nusing this:\n  finite s\n  f integrable_on {a..b}\n  x \\<in> {a..b} - s\n  continuous (at x within {a..b} - s) f\n\ngoal (1 subgoal):\n 1. \\<And>xa.\n       \\<lbrakk>x - y < d; y < x;\n        \\<And>x'.\n           \\<lbrakk>a \\<le> x' \\<and> x' \\<le> b \\<and> x' \\<notin> s;\n            \\<bar>x' - x\\<bar> < d\\<rbrakk>\n           \\<Longrightarrow> norm (f x' - f x) \\<le> e;\n        0 < e; xa \\<notin># mset_set s; x \\<le> b; x \\<notin> s; a \\<le> y;\n        y \\<notin> s; y \\<le> xa; xa \\<le> x\\<rbrakk>\n       \\<Longrightarrow> norm (f xa - f x) \\<le> e", "by auto"], ["proof (state)\nthis:\n  \\<lbrakk>x - y < d; y < x;\n   \\<And>x'.\n      \\<lbrakk>a \\<le> x' \\<and> x' \\<le> b \\<and> x' \\<notin> s;\n       \\<bar>x' - x\\<bar> < d\\<rbrakk>\n      \\<Longrightarrow> norm (f x' - f x) \\<le> e;\n   0 < e; ?xa \\<notin># mset_set s; x \\<le> b; x \\<notin> s; a \\<le> y;\n   y \\<notin> s; y \\<le> ?xa; ?xa \\<le> x\\<rbrakk>\n  \\<Longrightarrow> norm (f ?xa - f x) \\<le> e\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  norm (integral {a..x} f - integral {a..y} f - (x - y) *\\<^sub>R f x)\n  \\<le> e * \\<bar>y - x\\<bar>\n\ngoal (1 subgoal):\n 1. y < x \\<Longrightarrow>\n    norm (integral {a..y} f - integral {a..x} f - (y - x) *\\<^sub>R f x)\n    \\<le> e * \\<bar>y - x\\<bar>", "then"], ["proof (chain)\npicking this:\n  norm (integral {a..x} f - integral {a..y} f - (x - y) *\\<^sub>R f x)\n  \\<le> e * \\<bar>y - x\\<bar>", "show ?thesis"], ["proof (prove)\nusing this:\n  norm (integral {a..x} f - integral {a..y} f - (x - y) *\\<^sub>R f x)\n  \\<le> e * \\<bar>y - x\\<bar>\n\ngoal (1 subgoal):\n 1. norm (integral {a..y} f - integral {a..x} f - (y - x) *\\<^sub>R f x)\n    \\<le> e * \\<bar>y - x\\<bar>", "by (simp add: algebra_simps norm_minus_commute)"], ["proof (state)\nthis:\n  norm (integral {a..y} f - integral {a..x} f - (y - x) *\\<^sub>R f x)\n  \\<le> e * \\<bar>y - x\\<bar>\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<lbrakk>?y \\<in> {a..b} - s; \\<bar>?y - x\\<bar> < d\\<rbrakk>\n  \\<Longrightarrow> norm\n                     (integral {a..?y} f - integral {a..x} f -\n                      (?y - x) *\\<^sub>R f x)\n                    \\<le> e * \\<bar>?y - x\\<bar>\n\ngoal (1 subgoal):\n 1. ((\\<lambda>u. integral {a..u} f) has_vector_derivative f x)\n     (at x within {a..b} - s)", "then"], ["proof (chain)\npicking this:\n  \\<lbrakk>?y \\<in> {a..b} - s; \\<bar>?y - x\\<bar> < d\\<rbrakk>\n  \\<Longrightarrow> norm\n                     (integral {a..?y} f - integral {a..x} f -\n                      (?y - x) *\\<^sub>R f x)\n                    \\<le> e * \\<bar>?y - x\\<bar>", "have \"\\<exists>d>0. \\<forall>y\\<in>{a..b} - s. \\<bar>y - x\\<bar> < d \\<longrightarrow> norm (integral {a..y} f - integral {a..x} f - (y-x) *\\<^sub>R f x) \\<le> e * \\<bar>y - x\\<bar>\""], ["proof (prove)\nusing this:\n  \\<lbrakk>?y \\<in> {a..b} - s; \\<bar>?y - x\\<bar> < d\\<rbrakk>\n  \\<Longrightarrow> norm\n                     (integral {a..?y} f - integral {a..x} f -\n                      (?y - x) *\\<^sub>R f x)\n                    \\<le> e * \\<bar>?y - x\\<bar>\n\ngoal (1 subgoal):\n 1. \\<exists>d>0.\n       \\<forall>y\\<in>{a..b} - s.\n          \\<bar>y - x\\<bar> < d \\<longrightarrow>\n          norm\n           (integral {a..y} f - integral {a..x} f - (y - x) *\\<^sub>R f x)\n          \\<le> e * \\<bar>y - x\\<bar>", "using \\<open>d>0\\<close>"], ["proof (prove)\nusing this:\n  \\<lbrakk>?y \\<in> {a..b} - s; \\<bar>?y - x\\<bar> < d\\<rbrakk>\n  \\<Longrightarrow> norm\n                     (integral {a..?y} f - integral {a..x} f -\n                      (?y - x) *\\<^sub>R f x)\n                    \\<le> e * \\<bar>?y - x\\<bar>\n  0 < d\n\ngoal (1 subgoal):\n 1. \\<exists>d>0.\n       \\<forall>y\\<in>{a..b} - s.\n          \\<bar>y - x\\<bar> < d \\<longrightarrow>\n          norm\n           (integral {a..y} f - integral {a..x} f - (y - x) *\\<^sub>R f x)\n          \\<le> e * \\<bar>y - x\\<bar>", "by blast"], ["proof (state)\nthis:\n  \\<exists>d>0.\n     \\<forall>y\\<in>{a..b} - s.\n        \\<bar>y - x\\<bar> < d \\<longrightarrow>\n        norm (integral {a..y} f - integral {a..x} f - (y - x) *\\<^sub>R f x)\n        \\<le> e * \\<bar>y - x\\<bar>\n\ngoal (1 subgoal):\n 1. ((\\<lambda>u. integral {a..u} f) has_vector_derivative f x)\n     (at x within {a..b} - s)", "}"], ["proof (state)\nthis:\n  0 < ?e2 \\<Longrightarrow>\n  \\<exists>d>0.\n     \\<forall>y\\<in>{a..b} - s.\n        \\<bar>y - x\\<bar> < d \\<longrightarrow>\n        norm (integral {a..y} f - integral {a..x} f - (y - x) *\\<^sub>R f x)\n        \\<le> ?e2 * \\<bar>y - x\\<bar>\n\ngoal (1 subgoal):\n 1. ((\\<lambda>u. integral {a..u} f) has_vector_derivative f x)\n     (at x within {a..b} - s)", "then"], ["proof (chain)\npicking this:\n  0 < ?e2 \\<Longrightarrow>\n  \\<exists>d>0.\n     \\<forall>y\\<in>{a..b} - s.\n        \\<bar>y - x\\<bar> < d \\<longrightarrow>\n        norm (integral {a..y} f - integral {a..x} f - (y - x) *\\<^sub>R f x)\n        \\<le> ?e2 * \\<bar>y - x\\<bar>", "show ?thesis"], ["proof (prove)\nusing this:\n  0 < ?e2 \\<Longrightarrow>\n  \\<exists>d>0.\n     \\<forall>y\\<in>{a..b} - s.\n        \\<bar>y - x\\<bar> < d \\<longrightarrow>\n        norm (integral {a..y} f - integral {a..x} f - (y - x) *\\<^sub>R f x)\n        \\<le> ?e2 * \\<bar>y - x\\<bar>\n\ngoal (1 subgoal):\n 1. ((\\<lambda>u. integral {a..u} f) has_vector_derivative f x)\n     (at x within {a..b} - s)", "by (simp add: has_vector_derivative_def has_derivative_within_alt bounded_linear_scaleR_left)"], ["proof (state)\nthis:\n  ((\\<lambda>u. integral {a..u} f) has_vector_derivative f x)\n   (at x within {a..b} - s)\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma integral_has_vector_derivative':\n  fixes f :: \"real \\<Rightarrow> 'a::banach\"\n  assumes \"finite s\"\n    \"f integrable_on {a..b}\"\n    \"x \\<in> {a..b} - s\"\n    \"continuous (at x within {a..b} - s) f\"\n  shows \"((\\<lambda>u. integral {a .. u} f) has_vector_derivative f(x)) (at x within {a .. b} - s)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. ((\\<lambda>u. integral {a..u} f) has_vector_derivative f x)\n     (at x within {a..b} - s)", "apply (rule integral_has_vector_derivative_continuous_at')"], ["proof (prove)\ngoal (4 subgoals):\n 1. finite s\n 2. f integrable_on {a..b}\n 3. x \\<in> {a..b} - s\n 4. continuous (at x within {a..b} - s) f", "using assms"], ["proof (prove)\nusing this:\n  finite s\n  f integrable_on {a..b}\n  x \\<in> {a..b} - s\n  continuous (at x within {a..b} - s) f\n\ngoal (4 subgoals):\n 1. finite s\n 2. f integrable_on {a..b}\n 3. x \\<in> {a..b} - s\n 4. continuous (at x within {a..b} - s) f", "apply (auto simp: continuous_on_eq_continuous_within)"], ["proof (prove)\ngoal:\nNo subgoals!", "done"], ["", "lemma fundamental_theorem_of_calculus_interior_stronger:\n  fixes f :: \"real \\<Rightarrow> 'a::banach\"\n  assumes \"finite S\"\n    and \"a \\<le> b\" \"\\<And>x. x \\<in> {a <..< b} - S \\<Longrightarrow> (f has_vector_derivative f'(x)) (at x)\"\n    and \"continuous_on {a .. b} f\"\n  shows \"(f' has_integral (f b - f a)) {a .. b}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (f' has_integral f b - f a) {a..b}", "using assms"], ["proof (prove)\nusing this:\n  finite S\n  a \\<le> b\n  ?x \\<in> {a<..<b} - S \\<Longrightarrow>\n  (f has_vector_derivative f' ?x) (at ?x)\n  continuous_on {a..b} f\n\ngoal (1 subgoal):\n 1. (f' has_integral f b - f a) {a..b}", "proof (induction arbitrary: a b)"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>a b.\n       \\<lbrakk>a \\<le> b;\n        \\<And>x.\n           x \\<in> {a<..<b} - {} \\<Longrightarrow>\n           (f has_vector_derivative f' x) (at x);\n        continuous_on {a..b} f\\<rbrakk>\n       \\<Longrightarrow> (f' has_integral f b - f a) {a..b}\n 2. \\<And>x F a b.\n       \\<lbrakk>finite F; x \\<notin> F;\n        \\<And>a b.\n           \\<lbrakk>a \\<le> b;\n            \\<And>x.\n               x \\<in> {a<..<b} - F \\<Longrightarrow>\n               (f has_vector_derivative f' x) (at x);\n            continuous_on {a..b} f\\<rbrakk>\n           \\<Longrightarrow> (f' has_integral f b - f a) {a..b};\n        a \\<le> b;\n        \\<And>xa.\n           xa \\<in> {a<..<b} - insert x F \\<Longrightarrow>\n           (f has_vector_derivative f' xa) (at xa);\n        continuous_on {a..b} f\\<rbrakk>\n       \\<Longrightarrow> (f' has_integral f b - f a) {a..b}", "case empty"], ["proof (state)\nthis:\n  a \\<le> b\n  ?x \\<in> {a<..<b} - {} \\<Longrightarrow>\n  (f has_vector_derivative f' ?x) (at ?x)\n  continuous_on {a..b} f\n\ngoal (2 subgoals):\n 1. \\<And>a b.\n       \\<lbrakk>a \\<le> b;\n        \\<And>x.\n           x \\<in> {a<..<b} - {} \\<Longrightarrow>\n           (f has_vector_derivative f' x) (at x);\n        continuous_on {a..b} f\\<rbrakk>\n       \\<Longrightarrow> (f' has_integral f b - f a) {a..b}\n 2. \\<And>x F a b.\n       \\<lbrakk>finite F; x \\<notin> F;\n        \\<And>a b.\n           \\<lbrakk>a \\<le> b;\n            \\<And>x.\n               x \\<in> {a<..<b} - F \\<Longrightarrow>\n               (f has_vector_derivative f' x) (at x);\n            continuous_on {a..b} f\\<rbrakk>\n           \\<Longrightarrow> (f' has_integral f b - f a) {a..b};\n        a \\<le> b;\n        \\<And>xa.\n           xa \\<in> {a<..<b} - insert x F \\<Longrightarrow>\n           (f has_vector_derivative f' xa) (at xa);\n        continuous_on {a..b} f\\<rbrakk>\n       \\<Longrightarrow> (f' has_integral f b - f a) {a..b}", "then"], ["proof (chain)\npicking this:\n  a \\<le> b\n  ?x \\<in> {a<..<b} - {} \\<Longrightarrow>\n  (f has_vector_derivative f' ?x) (at ?x)\n  continuous_on {a..b} f", "show ?case"], ["proof (prove)\nusing this:\n  a \\<le> b\n  ?x \\<in> {a<..<b} - {} \\<Longrightarrow>\n  (f has_vector_derivative f' ?x) (at ?x)\n  continuous_on {a..b} f\n\ngoal (1 subgoal):\n 1. (f' has_integral f b - f a) {a..b}", "using fundamental_theorem_of_calculus_interior"], ["proof (prove)\nusing this:\n  a \\<le> b\n  ?x \\<in> {a<..<b} - {} \\<Longrightarrow>\n  (f has_vector_derivative f' ?x) (at ?x)\n  continuous_on {a..b} f\n  \\<lbrakk>?a \\<le> ?b; continuous_on {?a..?b} ?f;\n   \\<And>x.\n      x \\<in> {?a<..<?b} \\<Longrightarrow>\n      (?f has_vector_derivative ?f' x) (at x)\\<rbrakk>\n  \\<Longrightarrow> (?f' has_integral ?f ?b - ?f ?a) {?a..?b}\n\ngoal (1 subgoal):\n 1. (f' has_integral f b - f a) {a..b}", "by force"], ["proof (state)\nthis:\n  (f' has_integral f b - f a) {a..b}\n\ngoal (1 subgoal):\n 1. \\<And>x F a b.\n       \\<lbrakk>finite F; x \\<notin> F;\n        \\<And>a b.\n           \\<lbrakk>a \\<le> b;\n            \\<And>x.\n               x \\<in> {a<..<b} - F \\<Longrightarrow>\n               (f has_vector_derivative f' x) (at x);\n            continuous_on {a..b} f\\<rbrakk>\n           \\<Longrightarrow> (f' has_integral f b - f a) {a..b};\n        a \\<le> b;\n        \\<And>xa.\n           xa \\<in> {a<..<b} - insert x F \\<Longrightarrow>\n           (f has_vector_derivative f' xa) (at xa);\n        continuous_on {a..b} f\\<rbrakk>\n       \\<Longrightarrow> (f' has_integral f b - f a) {a..b}", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x F a b.\n       \\<lbrakk>finite F; x \\<notin> F;\n        \\<And>a b.\n           \\<lbrakk>a \\<le> b;\n            \\<And>x.\n               x \\<in> {a<..<b} - F \\<Longrightarrow>\n               (f has_vector_derivative f' x) (at x);\n            continuous_on {a..b} f\\<rbrakk>\n           \\<Longrightarrow> (f' has_integral f b - f a) {a..b};\n        a \\<le> b;\n        \\<And>xa.\n           xa \\<in> {a<..<b} - insert x F \\<Longrightarrow>\n           (f has_vector_derivative f' xa) (at xa);\n        continuous_on {a..b} f\\<rbrakk>\n       \\<Longrightarrow> (f' has_integral f b - f a) {a..b}", "case (insert x S)"], ["proof (state)\nthis:\n  finite S\n  x \\<notin> S\n  \\<lbrakk>?a \\<le> ?b;\n   \\<And>x.\n      x \\<in> {?a<..<?b} - S \\<Longrightarrow>\n      (f has_vector_derivative f' x) (at x);\n   continuous_on {?a..?b} f\\<rbrakk>\n  \\<Longrightarrow> (f' has_integral f ?b - f ?a) {?a..?b}\n  a \\<le> b\n  ?x \\<in> {a<..<b} - insert x S \\<Longrightarrow>\n  (f has_vector_derivative f' ?x) (at ?x)\n  continuous_on {a..b} f\n\ngoal (1 subgoal):\n 1. \\<And>x F a b.\n       \\<lbrakk>finite F; x \\<notin> F;\n        \\<And>a b.\n           \\<lbrakk>a \\<le> b;\n            \\<And>x.\n               x \\<in> {a<..<b} - F \\<Longrightarrow>\n               (f has_vector_derivative f' x) (at x);\n            continuous_on {a..b} f\\<rbrakk>\n           \\<Longrightarrow> (f' has_integral f b - f a) {a..b};\n        a \\<le> b;\n        \\<And>xa.\n           xa \\<in> {a<..<b} - insert x F \\<Longrightarrow>\n           (f has_vector_derivative f' xa) (at xa);\n        continuous_on {a..b} f\\<rbrakk>\n       \\<Longrightarrow> (f' has_integral f b - f a) {a..b}", "show ?case"], ["proof (prove)\ngoal (1 subgoal):\n 1. (f' has_integral f b - f a) {a..b}", "proof (cases \"x \\<in> {a<..<b}\")"], ["proof (state)\ngoal (2 subgoals):\n 1. x \\<in> {a<..<b} \\<Longrightarrow> (f' has_integral f b - f a) {a..b}\n 2. x \\<notin> {a<..<b} \\<Longrightarrow> (f' has_integral f b - f a) {a..b}", "case False"], ["proof (state)\nthis:\n  x \\<notin> {a<..<b}\n\ngoal (2 subgoals):\n 1. x \\<in> {a<..<b} \\<Longrightarrow> (f' has_integral f b - f a) {a..b}\n 2. x \\<notin> {a<..<b} \\<Longrightarrow> (f' has_integral f b - f a) {a..b}", "then"], ["proof (chain)\npicking this:\n  x \\<notin> {a<..<b}", "show ?thesis"], ["proof (prove)\nusing this:\n  x \\<notin> {a<..<b}\n\ngoal (1 subgoal):\n 1. (f' has_integral f b - f a) {a..b}", "using insert"], ["proof (prove)\nusing this:\n  x \\<notin> {a<..<b}\n  finite S\n  x \\<notin> S\n  \\<lbrakk>?a \\<le> ?b;\n   \\<And>x.\n      x \\<in> {?a<..<?b} - S \\<Longrightarrow>\n      (f has_vector_derivative f' x) (at x);\n   continuous_on {?a..?b} f\\<rbrakk>\n  \\<Longrightarrow> (f' has_integral f ?b - f ?a) {?a..?b}\n  a \\<le> b\n  ?x \\<in> {a<..<b} - insert x S \\<Longrightarrow>\n  (f has_vector_derivative f' ?x) (at ?x)\n  continuous_on {a..b} f\n\ngoal (1 subgoal):\n 1. (f' has_integral f b - f a) {a..b}", "by blast"], ["proof (state)\nthis:\n  (f' has_integral f b - f a) {a..b}\n\ngoal (1 subgoal):\n 1. x \\<in> {a<..<b} \\<Longrightarrow> (f' has_integral f b - f a) {a..b}", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. x \\<in> {a<..<b} \\<Longrightarrow> (f' has_integral f b - f a) {a..b}", "case True"], ["proof (state)\nthis:\n  x \\<in> {a<..<b}\n\ngoal (1 subgoal):\n 1. x \\<in> {a<..<b} \\<Longrightarrow> (f' has_integral f b - f a) {a..b}", "then"], ["proof (chain)\npicking this:\n  x \\<in> {a<..<b}", "have \"a < x\" \"x < b\""], ["proof (prove)\nusing this:\n  x \\<in> {a<..<b}\n\ngoal (1 subgoal):\n 1. a < x &&& x < b", "by auto"], ["proof (state)\nthis:\n  a < x\n  x < b\n\ngoal (1 subgoal):\n 1. x \\<in> {a<..<b} \\<Longrightarrow> (f' has_integral f b - f a) {a..b}", "have \"(f' has_integral f x - f a) {a..x}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (f' has_integral f x - f a) {a..x}", "apply (rule insert)"], ["proof (prove)\ngoal (3 subgoals):\n 1. a \\<le> x\n 2. \\<And>xa.\n       xa \\<in> {a<..<x} - S \\<Longrightarrow>\n       (f has_vector_derivative f' xa) (at xa)\n 3. continuous_on {a..x} f", "using \\<open>a < x\\<close> \\<open>x < b\\<close> insert.prems continuous_on_subset"], ["proof (prove)\nusing this:\n  a < x\n  x < b\n  a \\<le> b\n  ?x \\<in> {a<..<b} - insert x S \\<Longrightarrow>\n  (f has_vector_derivative f' ?x) (at ?x)\n  continuous_on {a..b} f\n  \\<lbrakk>continuous_on ?s ?f; ?t \\<subseteq> ?s\\<rbrakk>\n  \\<Longrightarrow> continuous_on ?t ?f\n\ngoal (3 subgoals):\n 1. a \\<le> x\n 2. \\<And>xa.\n       xa \\<in> {a<..<x} - S \\<Longrightarrow>\n       (f has_vector_derivative f' xa) (at xa)\n 3. continuous_on {a..x} f", "by force+"], ["proof (state)\nthis:\n  (f' has_integral f x - f a) {a..x}\n\ngoal (1 subgoal):\n 1. x \\<in> {a<..<b} \\<Longrightarrow> (f' has_integral f b - f a) {a..b}", "moreover"], ["proof (state)\nthis:\n  (f' has_integral f x - f a) {a..x}\n\ngoal (1 subgoal):\n 1. x \\<in> {a<..<b} \\<Longrightarrow> (f' has_integral f b - f a) {a..b}", "have \"(f' has_integral f b - f x) {x..b}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (f' has_integral f b - f x) {x..b}", "apply (rule insert)"], ["proof (prove)\ngoal (3 subgoals):\n 1. x \\<le> b\n 2. \\<And>xa.\n       xa \\<in> {x<..<b} - S \\<Longrightarrow>\n       (f has_vector_derivative f' xa) (at xa)\n 3. continuous_on {x..b} f", "using \\<open>x < b\\<close> \\<open>a < x\\<close> insert.prems continuous_on_subset"], ["proof (prove)\nusing this:\n  x < b\n  a < x\n  a \\<le> b\n  ?x \\<in> {a<..<b} - insert x S \\<Longrightarrow>\n  (f has_vector_derivative f' ?x) (at ?x)\n  continuous_on {a..b} f\n  \\<lbrakk>continuous_on ?s ?f; ?t \\<subseteq> ?s\\<rbrakk>\n  \\<Longrightarrow> continuous_on ?t ?f\n\ngoal (3 subgoals):\n 1. x \\<le> b\n 2. \\<And>xa.\n       xa \\<in> {x<..<b} - S \\<Longrightarrow>\n       (f has_vector_derivative f' xa) (at xa)\n 3. continuous_on {x..b} f", "by force+"], ["proof (state)\nthis:\n  (f' has_integral f b - f x) {x..b}\n\ngoal (1 subgoal):\n 1. x \\<in> {a<..<b} \\<Longrightarrow> (f' has_integral f b - f a) {a..b}", "ultimately"], ["proof (chain)\npicking this:\n  (f' has_integral f x - f a) {a..x}\n  (f' has_integral f b - f x) {x..b}", "show ?thesis"], ["proof (prove)\nusing this:\n  (f' has_integral f x - f a) {a..x}\n  (f' has_integral f b - f x) {x..b}\n\ngoal (1 subgoal):\n 1. (f' has_integral f b - f a) {a..b}", "by (meson finite_insert fundamental_theorem_of_calculus_interior_strong insert.hyps(1) insert.prems(1) insert.prems(2) insert.prems(3))"], ["proof (state)\nthis:\n  (f' has_integral f b - f a) {a..b}\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  (f' has_integral f b - f a) {a..b}\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma at_within_closed_interval_finite:\n  fixes x::real\n  assumes \"a < x\" \"x < b\" \"x \\<notin> S\" \"finite S\"\n  shows \"(at x within {a..b} - S) = at x\""], ["proof (prove)\ngoal (1 subgoal):\n 1. at x within {a..b} - S = at x", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. at x within {a..b} - S = at x", "have \"interior ({a..b} - S) = {a<..<b} - S\""], ["proof (prove)\ngoal (1 subgoal):\n 1. interior ({a..b} - S) = {a<..<b} - S", "using \\<open>finite S\\<close>"], ["proof (prove)\nusing this:\n  finite S\n\ngoal (1 subgoal):\n 1. interior ({a..b} - S) = {a<..<b} - S", "by (simp add: interior_diff finite_imp_closed)"], ["proof (state)\nthis:\n  interior ({a..b} - S) = {a<..<b} - S\n\ngoal (1 subgoal):\n 1. at x within {a..b} - S = at x", "then"], ["proof (chain)\npicking this:\n  interior ({a..b} - S) = {a<..<b} - S", "show ?thesis"], ["proof (prove)\nusing this:\n  interior ({a..b} - S) = {a<..<b} - S\n\ngoal (1 subgoal):\n 1. at x within {a..b} - S = at x", "using at_within_interior assms"], ["proof (prove)\nusing this:\n  interior ({a..b} - S) = {a<..<b} - S\n  ?x \\<in> interior ?S \\<Longrightarrow> at ?x within ?S = at ?x\n  a < x\n  x < b\n  x \\<notin> S\n  finite S\n\ngoal (1 subgoal):\n 1. at x within {a..b} - S = at x", "by fastforce"], ["proof (state)\nthis:\n  at x within {a..b} - S = at x\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma at_within_cbox_finite:\n  assumes \"x \\<in> box a b\" \"x \\<notin> S\" \"finite S\"\n  shows \"(at x within cbox a b - S) = at x\""], ["proof (prove)\ngoal (1 subgoal):\n 1. at x within cbox a b - S = at x", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. at x within cbox a b - S = at x", "have \"interior (cbox a b - S) = box a b - S\""], ["proof (prove)\ngoal (1 subgoal):\n 1. interior (cbox a b - S) = box a b - S", "using \\<open>finite S\\<close>"], ["proof (prove)\nusing this:\n  finite S\n\ngoal (1 subgoal):\n 1. interior (cbox a b - S) = box a b - S", "by (simp add: interior_diff finite_imp_closed)"], ["proof (state)\nthis:\n  interior (cbox a b - S) = box a b - S\n\ngoal (1 subgoal):\n 1. at x within cbox a b - S = at x", "then"], ["proof (chain)\npicking this:\n  interior (cbox a b - S) = box a b - S", "show ?thesis"], ["proof (prove)\nusing this:\n  interior (cbox a b - S) = box a b - S\n\ngoal (1 subgoal):\n 1. at x within cbox a b - S = at x", "using at_within_interior assms"], ["proof (prove)\nusing this:\n  interior (cbox a b - S) = box a b - S\n  ?x \\<in> interior ?S \\<Longrightarrow> at ?x within ?S = at ?x\n  x \\<in> box a b\n  x \\<notin> S\n  finite S\n\ngoal (1 subgoal):\n 1. at x within cbox a b - S = at x", "by fastforce"], ["proof (state)\nthis:\n  at x within cbox a b - S = at x\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma fundamental_theorem_of_calculus_interior_stronger':\n  fixes f :: \"real \\<Rightarrow> 'a::banach\"\n  assumes \"finite S\"\n    and \"a \\<le> b\" \"\\<And>x. x \\<in> {a <..< b} - S \\<Longrightarrow> (f has_vector_derivative f'(x)) (at x within {a..b} - S)\"\n    and \"continuous_on {a .. b} f\"\n  shows \"(f' has_integral (f b - f a)) {a .. b}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (f' has_integral f b - f a) {a..b}", "using assms fundamental_theorem_of_calculus_interior_strong at_within_cbox_finite"], ["proof (prove)\nusing this:\n  finite S\n  a \\<le> b\n  ?x \\<in> {a<..<b} - S \\<Longrightarrow>\n  (f has_vector_derivative f' ?x) (at ?x within {a..b} - S)\n  continuous_on {a..b} f\n  \\<lbrakk>finite ?S; ?a \\<le> ?b;\n   \\<And>x.\n      x \\<in> {?a<..<?b} - ?S \\<Longrightarrow>\n      (?f has_vector_derivative ?f' x) (at x);\n   continuous_on {?a..?b} ?f\\<rbrakk>\n  \\<Longrightarrow> (?f' has_integral ?f ?b - ?f ?a) {?a..?b}\n  \\<lbrakk>?x \\<in> box ?a ?b; ?x \\<notin> ?S; finite ?S\\<rbrakk>\n  \\<Longrightarrow> at ?x within cbox ?a ?b - ?S = at ?x\n\ngoal (1 subgoal):\n 1. (f' has_integral f b - f a) {a..b}", "(*sledgehammer*)"], ["proof (prove)\nusing this:\n  finite S\n  a \\<le> b\n  ?x \\<in> {a<..<b} - S \\<Longrightarrow>\n  (f has_vector_derivative f' ?x) (at ?x within {a..b} - S)\n  continuous_on {a..b} f\n  \\<lbrakk>finite ?S; ?a \\<le> ?b;\n   \\<And>x.\n      x \\<in> {?a<..<?b} - ?S \\<Longrightarrow>\n      (?f has_vector_derivative ?f' x) (at x);\n   continuous_on {?a..?b} ?f\\<rbrakk>\n  \\<Longrightarrow> (?f' has_integral ?f ?b - ?f ?a) {?a..?b}\n  \\<lbrakk>?x \\<in> box ?a ?b; ?x \\<notin> ?S; finite ?S\\<rbrakk>\n  \\<Longrightarrow> at ?x within cbox ?a ?b - ?S = at ?x\n\ngoal (1 subgoal):\n 1. (f' has_integral f b - f a) {a..b}", "by (metis DiffD1 DiffD2 interior_atLeastAtMost_real interior_cbox interval_cbox)"], ["", "lemma has_integral_substitution_general_:\n  fixes f :: \"real \\<Rightarrow> 'a::euclidean_space\" and g :: \"real \\<Rightarrow> real\"\n  assumes s: \"finite s\" and le: \"a \\<le> b\"\n    and subset: \"g ` {a..b} \\<subseteq> {c..d}\"\n    and f: \"f integrable_on {c..d}\" \"continuous_on ({c..d} - (g ` s)) f\"\n    (*and f [continuous_intros]: \"continuous_on {c..d} f\"*)\n    and g : \"continuous_on {a..b} g\" \"inj_on g ({a..b} \\<union> s)\"\n    and deriv [derivative_intros]:\n    \"\\<And>x. x \\<in> {a..b} - s \\<Longrightarrow> (g has_field_derivative g' x) (at x within {a..b})\"\n  shows \"((\\<lambda>x. g' x *\\<^sub>R f (g x)) has_integral (integral {g a..g b} f - integral {g b..g a} f)) {a..b}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. ((\\<lambda>x. g' x *\\<^sub>R f (g x)) has_integral\n     integral {g a..g b} f - integral {g b..g a} f)\n     {a..b}", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. ((\\<lambda>x. g' x *\\<^sub>R f (g x)) has_integral\n     integral {g a..g b} f - integral {g b..g a} f)\n     {a..b}", "let ?F = \"\\<lambda>x. integral {c..g x} f\""], ["proof (state)\ngoal (1 subgoal):\n 1. ((\\<lambda>x. g' x *\\<^sub>R f (g x)) has_integral\n     integral {g a..g b} f - integral {g b..g a} f)\n     {a..b}", "have cont_int: \"continuous_on {a..b} ?F\""], ["proof (prove)\ngoal (1 subgoal):\n 1. continuous_on {a..b} (\\<lambda>x. integral {c..g x} f)", "by (rule continuous_on_compose2[OF _ g(1) subset] indefinite_integral_continuous_1\n        f)+"], ["proof (state)\nthis:\n  continuous_on {a..b} (\\<lambda>x. integral {c..g x} f)\n\ngoal (1 subgoal):\n 1. ((\\<lambda>x. g' x *\\<^sub>R f (g x)) has_integral\n     integral {g a..g b} f - integral {g b..g a} f)\n     {a..b}", "have deriv: \"\\<And>x. x \\<in> {a..b} - s \\<Longrightarrow> (((\\<lambda>x. integral {c..x} f) \\<circ> g) has_vector_derivative g' x *\\<^sub>R f (g x))\n                 (at x within ({a..b} - s))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> {a..b} - s \\<Longrightarrow>\n       ((\\<lambda>x. integral {c..x} f) \\<circ> g has_vector_derivative\n        g' x *\\<^sub>R f (g x))\n        (at x within {a..b} - s)", "apply (rule has_vector_derivative_eq_rhs)"], ["proof (prove)\ngoal (2 subgoals):\n 1. \\<And>x.\n       x \\<in> {a..b} - s \\<Longrightarrow>\n       ((\\<lambda>x. integral {c..x} f) \\<circ> g has_vector_derivative\n        ?X x)\n        (at x within {a..b} - s)\n 2. \\<And>x.\n       x \\<in> {a..b} - s \\<Longrightarrow> ?X x = g' x *\\<^sub>R f (g x)", "apply (rule vector_diff_chain_within)"], ["proof (prove)\ngoal (3 subgoals):\n 1. \\<And>x.\n       x \\<in> {a..b} - s \\<Longrightarrow>\n       (g has_vector_derivative ?f'3 x) (at x within {a..b} - s)\n 2. \\<And>x.\n       x \\<in> {a..b} - s \\<Longrightarrow>\n       ((\\<lambda>x. integral {c..x} f) has_vector_derivative ?g'3 x)\n        (at (g x) within g ` ({a..b} - s))\n 3. \\<And>x.\n       x \\<in> {a..b} - s \\<Longrightarrow>\n       ?f'3 x *\\<^sub>R ?g'3 x = g' x *\\<^sub>R f (g x)", "apply (subst has_field_derivative_iff_has_vector_derivative [symmetric])"], ["proof (prove)\ngoal (3 subgoals):\n 1. \\<And>x.\n       x \\<in> {a..b} - s \\<Longrightarrow>\n       (g has_real_derivative ?f'7 x x) (at x within {a..b} - s)\n 2. \\<And>x.\n       x \\<in> {a..b} - s \\<Longrightarrow>\n       ((\\<lambda>x. integral {c..x} f) has_vector_derivative ?g'3 x)\n        (at (g x) within g ` ({a..b} - s))\n 3. \\<And>x.\n       x \\<in> {a..b} - s \\<Longrightarrow>\n       ?f'7 x x *\\<^sub>R ?g'3 x = g' x *\\<^sub>R f (g x)", "proof-"], ["proof (state)\ngoal (3 subgoals):\n 1. \\<And>x.\n       x \\<in> {a..b} - s \\<Longrightarrow>\n       (g has_real_derivative ?f'7 x x) (at x within {a..b} - s)\n 2. \\<And>x.\n       x \\<in> {a..b} - s \\<Longrightarrow>\n       ((\\<lambda>x. integral {c..x} f) has_vector_derivative ?g'3 x)\n        (at (g x) within g ` ({a..b} - s))\n 3. \\<And>x.\n       x \\<in> {a..b} - s \\<Longrightarrow>\n       ?f'7 x x *\\<^sub>R ?g'3 x = g' x *\\<^sub>R f (g x)", "fix x::real"], ["proof (state)\ngoal (3 subgoals):\n 1. \\<And>x.\n       x \\<in> {a..b} - s \\<Longrightarrow>\n       (g has_real_derivative ?f'7 x x) (at x within {a..b} - s)\n 2. \\<And>x.\n       x \\<in> {a..b} - s \\<Longrightarrow>\n       ((\\<lambda>x. integral {c..x} f) has_vector_derivative ?g'3 x)\n        (at (g x) within g ` ({a..b} - s))\n 3. \\<And>x.\n       x \\<in> {a..b} - s \\<Longrightarrow>\n       ?f'7 x x *\\<^sub>R ?g'3 x = g' x *\\<^sub>R f (g x)", "assume ass: \"x \\<in> {a..b} - s\""], ["proof (state)\nthis:\n  x \\<in> {a..b} - s\n\ngoal (3 subgoals):\n 1. \\<And>x.\n       x \\<in> {a..b} - s \\<Longrightarrow>\n       (g has_real_derivative ?f'7 x x) (at x within {a..b} - s)\n 2. \\<And>x.\n       x \\<in> {a..b} - s \\<Longrightarrow>\n       ((\\<lambda>x. integral {c..x} f) has_vector_derivative ?g'3 x)\n        (at (g x) within g ` ({a..b} - s))\n 3. \\<And>x.\n       x \\<in> {a..b} - s \\<Longrightarrow>\n       ?f'7 x x *\\<^sub>R ?g'3 x = g' x *\\<^sub>R f (g x)", "let ?f'3 = \"g' x\""], ["proof (state)\ngoal (3 subgoals):\n 1. \\<And>x.\n       x \\<in> {a..b} - s \\<Longrightarrow>\n       (g has_real_derivative ?f'7 x x) (at x within {a..b} - s)\n 2. \\<And>x.\n       x \\<in> {a..b} - s \\<Longrightarrow>\n       ((\\<lambda>x. integral {c..x} f) has_vector_derivative ?g'3 x)\n        (at (g x) within g ` ({a..b} - s))\n 3. \\<And>x.\n       x \\<in> {a..b} - s \\<Longrightarrow>\n       ?f'7 x x *\\<^sub>R ?g'3 x = g' x *\\<^sub>R f (g x)", "have i:\"{a..b} - s \\<subseteq> {a..b}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. {a..b} - s \\<subseteq> {a..b}", "by auto"], ["proof (state)\nthis:\n  {a..b} - s \\<subseteq> {a..b}\n\ngoal (3 subgoals):\n 1. \\<And>x.\n       x \\<in> {a..b} - s \\<Longrightarrow>\n       (g has_real_derivative ?f'7 x x) (at x within {a..b} - s)\n 2. \\<And>x.\n       x \\<in> {a..b} - s \\<Longrightarrow>\n       ((\\<lambda>x. integral {c..x} f) has_vector_derivative ?g'3 x)\n        (at (g x) within g ` ({a..b} - s))\n 3. \\<And>x.\n       x \\<in> {a..b} - s \\<Longrightarrow>\n       ?f'7 x x *\\<^sub>R ?g'3 x = g' x *\\<^sub>R f (g x)", "have ii: \" (g has_vector_derivative g' x) (at x within {a..b})\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (g has_vector_derivative g' x) (at x within {a..b})", "using deriv[OF ass]"], ["proof (prove)\nusing this:\n  (g has_real_derivative g' x) (at x within {a..b})\n\ngoal (1 subgoal):\n 1. (g has_vector_derivative g' x) (at x within {a..b})", "by (simp only: has_field_derivative_iff_has_vector_derivative)"], ["proof (state)\nthis:\n  (g has_vector_derivative g' x) (at x within {a..b})\n\ngoal (3 subgoals):\n 1. \\<And>x.\n       x \\<in> {a..b} - s \\<Longrightarrow>\n       (g has_real_derivative ?f'7 x x) (at x within {a..b} - s)\n 2. \\<And>x.\n       x \\<in> {a..b} - s \\<Longrightarrow>\n       ((\\<lambda>x. integral {c..x} f) has_vector_derivative ?g'3 x)\n        (at (g x) within g ` ({a..b} - s))\n 3. \\<And>x.\n       x \\<in> {a..b} - s \\<Longrightarrow>\n       ?f'7 x x *\\<^sub>R ?g'3 x = g' x *\\<^sub>R f (g x)", "show \"(g has_real_derivative ?f'3) (at x within {a..b} - s)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (g has_real_derivative g' x) (at x within {a..b} - s)", "using has_vector_derivative_within_subset[OF ii i]"], ["proof (prove)\nusing this:\n  (g has_vector_derivative g' x) (at x within {a..b} - s)\n\ngoal (1 subgoal):\n 1. (g has_real_derivative g' x) (at x within {a..b} - s)", "by (simp only: has_field_derivative_iff_has_vector_derivative)"], ["proof (state)\nthis:\n  (g has_real_derivative g' x) (at x within {a..b} - s)\n\ngoal (2 subgoals):\n 1. \\<And>x.\n       x \\<in> {a..b} - s \\<Longrightarrow>\n       ((\\<lambda>x. integral {c..x} f) has_vector_derivative ?g'3 x)\n        (at (g x) within g ` ({a..b} - s))\n 2. \\<And>x.\n       x \\<in> {a..b} - s \\<Longrightarrow>\n       g' x *\\<^sub>R ?g'3 x = g' x *\\<^sub>R f (g x)", "next"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>x.\n       x \\<in> {a..b} - s \\<Longrightarrow>\n       ((\\<lambda>x. integral {c..x} f) has_vector_derivative ?g'3 x)\n        (at (g x) within g ` ({a..b} - s))\n 2. \\<And>x.\n       x \\<in> {a..b} - s \\<Longrightarrow>\n       g' x *\\<^sub>R ?g'3 x = g' x *\\<^sub>R f (g x)", "let ?g'3 = \"f o g\""], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>x.\n       x \\<in> {a..b} - s \\<Longrightarrow>\n       ((\\<lambda>x. integral {c..x} f) has_vector_derivative ?g'3 x)\n        (at (g x) within g ` ({a..b} - s))\n 2. \\<And>x.\n       x \\<in> {a..b} - s \\<Longrightarrow>\n       g' x *\\<^sub>R ?g'3 x = g' x *\\<^sub>R f (g x)", "show \"\\<And>x. x \\<in> {a..b} - s \\<Longrightarrow> ((\\<lambda>x. integral {c..x} f) has_vector_derivative ?g'3 x) (at (g x) within g ` ({a..b} - s))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> {a..b} - s \\<Longrightarrow>\n       ((\\<lambda>x. integral {c..x} f) has_vector_derivative\n        (f \\<circ> g) x)\n        (at (g x) within g ` ({a..b} - s))", "proof-"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> {a..b} - s \\<Longrightarrow>\n       ((\\<lambda>x. integral {c..x} f) has_vector_derivative\n        (f \\<circ> g) x)\n        (at (g x) within g ` ({a..b} - s))", "fix x::real"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> {a..b} - s \\<Longrightarrow>\n       ((\\<lambda>x. integral {c..x} f) has_vector_derivative\n        (f \\<circ> g) x)\n        (at (g x) within g ` ({a..b} - s))", "assume ass: \"x \\<in> {a..b} - s\""], ["proof (state)\nthis:\n  x \\<in> {a..b} - s\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> {a..b} - s \\<Longrightarrow>\n       ((\\<lambda>x. integral {c..x} f) has_vector_derivative\n        (f \\<circ> g) x)\n        (at (g x) within g ` ({a..b} - s))", "have \"finite (g ` s)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. finite (g ` s)", "using s"], ["proof (prove)\nusing this:\n  finite s\n\ngoal (1 subgoal):\n 1. finite (g ` s)", "by auto"], ["proof (state)\nthis:\n  finite (g ` s)\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> {a..b} - s \\<Longrightarrow>\n       ((\\<lambda>x. integral {c..x} f) has_vector_derivative\n        (f \\<circ> g) x)\n        (at (g x) within g ` ({a..b} - s))", "then"], ["proof (chain)\npicking this:\n  finite (g ` s)", "have i: \"((\\<lambda>x. integral {c..x} f) has_vector_derivative f(g x)) (at (g x) within ({c..d} - g ` s))\""], ["proof (prove)\nusing this:\n  finite (g ` s)\n\ngoal (1 subgoal):\n 1. ((\\<lambda>x. integral {c..x} f) has_vector_derivative f (g x))\n     (at (g x) within {c..d} - g ` s)", "apply (rule integral_has_vector_derivative')"], ["proof (prove)\ngoal (3 subgoals):\n 1. f integrable_on {c..d}\n 2. g x \\<in> {c..d} - g ` s\n 3. continuous (at (g x) within {c..d} - g ` s) f", "proof-"], ["proof (state)\ngoal (3 subgoals):\n 1. f integrable_on {c..d}\n 2. g x \\<in> {c..d} - g ` s\n 3. continuous (at (g x) within {c..d} - g ` s) f", "show \" f integrable_on {c..d}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. f integrable_on {c..d}", "using f"], ["proof (prove)\nusing this:\n  f integrable_on {c..d}\n  continuous_on ({c..d} - g ` s) f\n\ngoal (1 subgoal):\n 1. f integrable_on {c..d}", "by auto"], ["proof (state)\nthis:\n  f integrable_on {c..d}\n\ngoal (2 subgoals):\n 1. g x \\<in> {c..d} - g ` s\n 2. continuous (at (g x) within {c..d} - g ` s) f", "show \"g x \\<in> {c..d} - g ` s\""], ["proof (prove)\ngoal (1 subgoal):\n 1. g x \\<in> {c..d} - g ` s", "using ass subset"], ["proof (prove)\nusing this:\n  x \\<in> {a..b} - s\n  g ` {a..b} \\<subseteq> {c..d}\n\ngoal (1 subgoal):\n 1. g x \\<in> {c..d} - g ` s", "(*sledgehammer*)"], ["proof (prove)\nusing this:\n  x \\<in> {a..b} - s\n  g ` {a..b} \\<subseteq> {c..d}\n\ngoal (1 subgoal):\n 1. g x \\<in> {c..d} - g ` s", "by (smt Diff_iff Un_upper1 Un_upper2 g(2) imageE image_subset_iff inj_onD subsetCE)"], ["proof (state)\nthis:\n  g x \\<in> {c..d} - g ` s\n\ngoal (1 subgoal):\n 1. continuous (at (g x) within {c..d} - g ` s) f", "show \"continuous (at (g x) within {c..d} - g ` s) f\""], ["proof (prove)\ngoal (1 subgoal):\n 1. continuous (at (g x) within {c..d} - g ` s) f", "(*sledgehammer*)"], ["proof (prove)\ngoal (1 subgoal):\n 1. continuous (at (g x) within {c..d} - g ` s) f", "using \\<open>g x \\<in> {c..d} - g ` s\\<close> continuous_on_eq_continuous_within f(2)"], ["proof (prove)\nusing this:\n  g x \\<in> {c..d} - g ` s\n  continuous_on ?s ?f = (\\<forall>x\\<in>?s. continuous (at x within ?s) ?f)\n  continuous_on ({c..d} - g ` s) f\n\ngoal (1 subgoal):\n 1. continuous (at (g x) within {c..d} - g ` s) f", "by blast"], ["proof (state)\nthis:\n  continuous (at (g x) within {c..d} - g ` s) f\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  ((\\<lambda>x. integral {c..x} f) has_vector_derivative f (g x))\n   (at (g x) within {c..d} - g ` s)\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> {a..b} - s \\<Longrightarrow>\n       ((\\<lambda>x. integral {c..x} f) has_vector_derivative\n        (f \\<circ> g) x)\n        (at (g x) within g ` ({a..b} - s))", "have ii: \"g ` ({a..b} - s) \\<subseteq> ({c..d} - g ` s)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. g ` ({a..b} - s) \\<subseteq> {c..d} - g ` s", "using subset g(2)"], ["proof (prove)\nusing this:\n  g ` {a..b} \\<subseteq> {c..d}\n  inj_on g ({a..b} \\<union> s)\n\ngoal (1 subgoal):\n 1. g ` ({a..b} - s) \\<subseteq> {c..d} - g ` s", "(*sledgehammer*)"], ["proof (prove)\nusing this:\n  g ` {a..b} \\<subseteq> {c..d}\n  inj_on g ({a..b} \\<union> s)\n\ngoal (1 subgoal):\n 1. g ` ({a..b} - s) \\<subseteq> {c..d} - g ` s", "by (smt Diff_subset Un_Diff Un_commute Un_upper2 inj_on_image_set_diff subset_trans sup.order_iff)"], ["proof (state)\nthis:\n  g ` ({a..b} - s) \\<subseteq> {c..d} - g ` s\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> {a..b} - s \\<Longrightarrow>\n       ((\\<lambda>x. integral {c..x} f) has_vector_derivative\n        (f \\<circ> g) x)\n        (at (g x) within g ` ({a..b} - s))", "then"], ["proof (chain)\npicking this:\n  g ` ({a..b} - s) \\<subseteq> {c..d} - g ` s", "show \"((\\<lambda>x. integral {c..x} f) has_vector_derivative ?g'3 x) (at (g x) within g ` ({a..b} - s))\""], ["proof (prove)\nusing this:\n  g ` ({a..b} - s) \\<subseteq> {c..d} - g ` s\n\ngoal (1 subgoal):\n 1. ((\\<lambda>x. integral {c..x} f) has_vector_derivative (f \\<circ> g) x)\n     (at (g x) within g ` ({a..b} - s))", "(*sledgehammer*)"], ["proof (prove)\nusing this:\n  g ` ({a..b} - s) \\<subseteq> {c..d} - g ` s\n\ngoal (1 subgoal):\n 1. ((\\<lambda>x. integral {c..x} f) has_vector_derivative (f \\<circ> g) x)\n     (at (g x) within g ` ({a..b} - s))", "by (smt Diff_subset has_vector_derivative_weaken Un_upper1 Un_upper2 \\<open>finite (g ` s)\\<close> ass comp_def continuous_on_eq_continuous_within f(1) f(2) g(2) image_diff_subset image_subset_iff inj_on_image_set_diff integral_has_vector_derivative_continuous_at' subset_trans)"], ["proof (state)\nthis:\n  ((\\<lambda>x. integral {c..x} f) has_vector_derivative (f \\<circ> g) x)\n   (at (g x) within g ` ({a..b} - s))\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  ?x \\<in> {a..b} - s \\<Longrightarrow>\n  ((\\<lambda>x. integral {c..x} f) has_vector_derivative (f \\<circ> g) ?x)\n   (at (g ?x) within g ` ({a..b} - s))\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> {a..b} - s \\<Longrightarrow>\n       g' x *\\<^sub>R (f \\<circ> g) x = g' x *\\<^sub>R f (g x)", "show \"\\<And>x. x \\<in> {a..b} - s \\<Longrightarrow> g' x *\\<^sub>R ?g'3 x = g' x *\\<^sub>R f (g x)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> {a..b} - s \\<Longrightarrow>\n       g' x *\\<^sub>R (f \\<circ> g) x = g' x *\\<^sub>R f (g x)", "by auto"], ["proof (state)\nthis:\n  ?x \\<in> {a..b} - s \\<Longrightarrow>\n  g' ?x *\\<^sub>R (f \\<circ> g) ?x = g' ?x *\\<^sub>R f (g ?x)\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  ?x \\<in> {a..b} - s \\<Longrightarrow>\n  ((\\<lambda>x. integral {c..x} f) \\<circ> g has_vector_derivative\n   g' ?x *\\<^sub>R f (g ?x))\n   (at ?x within {a..b} - s)\n\ngoal (1 subgoal):\n 1. ((\\<lambda>x. g' x *\\<^sub>R f (g x)) has_integral\n     integral {g a..g b} f - integral {g b..g a} f)\n     {a..b}", "have deriv: \"(?F has_vector_derivative g' x *\\<^sub>R f (g x))\n                  (at x within {a..b} - s)\" if \"x \\<in> {a<..<b} - (s)\" for x"], ["proof (prove)\ngoal (1 subgoal):\n 1. ((\\<lambda>x. integral {c..g x} f) has_vector_derivative\n     g' x *\\<^sub>R f (g x))\n     (at x within {a..b} - s)", "using deriv[of x] that"], ["proof (prove)\nusing this:\n  x \\<in> {a..b} - s \\<Longrightarrow>\n  ((\\<lambda>x. integral {c..x} f) \\<circ> g has_vector_derivative\n   g' x *\\<^sub>R f (g x))\n   (at x within {a..b} - s)\n  x \\<in> {a<..<b} - s\n\ngoal (1 subgoal):\n 1. ((\\<lambda>x. integral {c..g x} f) has_vector_derivative\n     g' x *\\<^sub>R f (g x))\n     (at x within {a..b} - s)", "by (simp add: at_within_Icc_at o_def)"], ["proof (state)\nthis:\n  ?x \\<in> {a<..<b} - s \\<Longrightarrow>\n  ((\\<lambda>x. integral {c..g x} f) has_vector_derivative\n   g' ?x *\\<^sub>R f (g ?x))\n   (at ?x within {a..b} - s)\n\ngoal (1 subgoal):\n 1. ((\\<lambda>x. g' x *\\<^sub>R f (g x)) has_integral\n     integral {g a..g b} f - integral {g b..g a} f)\n     {a..b}", "have \"((\\<lambda>x. g' x *\\<^sub>R f (g x)) has_integral (?F b - ?F a)) {a..b}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. ((\\<lambda>x. g' x *\\<^sub>R f (g x)) has_integral\n     integral {c..g b} f - integral {c..g a} f)\n     {a..b}", "using cont_int"], ["proof (prove)\nusing this:\n  continuous_on {a..b} (\\<lambda>x. integral {c..g x} f)\n\ngoal (1 subgoal):\n 1. ((\\<lambda>x. g' x *\\<^sub>R f (g x)) has_integral\n     integral {c..g b} f - integral {c..g a} f)\n     {a..b}", "using fundamental_theorem_of_calculus_interior_stronger'[OF s le deriv]"], ["proof (prove)\nusing this:\n  continuous_on {a..b} (\\<lambda>x. integral {c..g x} f)\n  \\<lbrakk>\\<And>x.\n              x \\<in> {a<..<b} - s \\<Longrightarrow> x \\<in> {a<..<b} - s;\n   continuous_on {a..b} (\\<lambda>x. integral {c..g x} f)\\<rbrakk>\n  \\<Longrightarrow> ((\\<lambda>x. g' x *\\<^sub>R f (g x)) has_integral\n                     integral {c..g b} f - integral {c..g a} f)\n                     {a..b}\n\ngoal (1 subgoal):\n 1. ((\\<lambda>x. g' x *\\<^sub>R f (g x)) has_integral\n     integral {c..g b} f - integral {c..g a} f)\n     {a..b}", "by blast"], ["proof (state)\nthis:\n  ((\\<lambda>x. g' x *\\<^sub>R f (g x)) has_integral\n   integral {c..g b} f - integral {c..g a} f)\n   {a..b}\n\ngoal (1 subgoal):\n 1. ((\\<lambda>x. g' x *\\<^sub>R f (g x)) has_integral\n     integral {g a..g b} f - integral {g b..g a} f)\n     {a..b}", "also"], ["proof (state)\nthis:\n  ((\\<lambda>x. g' x *\\<^sub>R f (g x)) has_integral\n   integral {c..g b} f - integral {c..g a} f)\n   {a..b}\n\ngoal (1 subgoal):\n 1. ((\\<lambda>x. g' x *\\<^sub>R f (g x)) has_integral\n     integral {g a..g b} f - integral {g b..g a} f)\n     {a..b}", "from subset"], ["proof (chain)\npicking this:\n  g ` {a..b} \\<subseteq> {c..d}", "have \"g x \\<in> {c..d}\" if \"x \\<in> {a..b}\" for x"], ["proof (prove)\nusing this:\n  g ` {a..b} \\<subseteq> {c..d}\n\ngoal (1 subgoal):\n 1. g x \\<in> {c..d}", "using that"], ["proof (prove)\nusing this:\n  g ` {a..b} \\<subseteq> {c..d}\n  x \\<in> {a..b}\n\ngoal (1 subgoal):\n 1. g x \\<in> {c..d}", "by blast"], ["proof (state)\nthis:\n  ?x \\<in> {a..b} \\<Longrightarrow> g ?x \\<in> {c..d}\n\ngoal (1 subgoal):\n 1. ((\\<lambda>x. g' x *\\<^sub>R f (g x)) has_integral\n     integral {g a..g b} f - integral {g b..g a} f)\n     {a..b}", "from this[of a] this[of b] le"], ["proof (chain)\npicking this:\n  a \\<in> {a..b} \\<Longrightarrow> g a \\<in> {c..d}\n  b \\<in> {a..b} \\<Longrightarrow> g b \\<in> {c..d}\n  a \\<le> b", "have cd: \"c \\<le> g a\" \"g b \\<le> d\" \"c \\<le> g b\" \"g a \\<le> d\""], ["proof (prove)\nusing this:\n  a \\<in> {a..b} \\<Longrightarrow> g a \\<in> {c..d}\n  b \\<in> {a..b} \\<Longrightarrow> g b \\<in> {c..d}\n  a \\<le> b\n\ngoal (1 subgoal):\n 1. (c \\<le> g a &&& g b \\<le> d) &&& c \\<le> g b &&& g a \\<le> d", "by auto"], ["proof (state)\nthis:\n  c \\<le> g a\n  g b \\<le> d\n  c \\<le> g b\n  g a \\<le> d\n\ngoal (1 subgoal):\n 1. ((\\<lambda>x. g' x *\\<^sub>R f (g x)) has_integral\n     integral {g a..g b} f - integral {g b..g a} f)\n     {a..b}", "have \"integral {c..g b} f - integral {c..g a} f = integral {g a..g b} f - integral {g b..g a} f\""], ["proof (prove)\ngoal (1 subgoal):\n 1. integral {c..g b} f - integral {c..g a} f =\n    integral {g a..g b} f - integral {g b..g a} f", "proof cases"], ["proof (state)\ngoal (2 subgoals):\n 1. ?P \\<Longrightarrow>\n    integral {c..g b} f - integral {c..g a} f =\n    integral {g a..g b} f - integral {g b..g a} f\n 2. \\<not> ?P \\<Longrightarrow>\n    integral {c..g b} f - integral {c..g a} f =\n    integral {g a..g b} f - integral {g b..g a} f", "assume \"g a \\<le> g b\""], ["proof (state)\nthis:\n  g a \\<le> g b\n\ngoal (2 subgoals):\n 1. ?P \\<Longrightarrow>\n    integral {c..g b} f - integral {c..g a} f =\n    integral {g a..g b} f - integral {g b..g a} f\n 2. \\<not> ?P \\<Longrightarrow>\n    integral {c..g b} f - integral {c..g a} f =\n    integral {g a..g b} f - integral {g b..g a} f", "note le = le this"], ["proof (state)\nthis:\n  a \\<le> b\n  g a \\<le> g b\n\ngoal (2 subgoals):\n 1. ?P \\<Longrightarrow>\n    integral {c..g b} f - integral {c..g a} f =\n    integral {g a..g b} f - integral {g b..g a} f\n 2. \\<not> ?P \\<Longrightarrow>\n    integral {c..g b} f - integral {c..g a} f =\n    integral {g a..g b} f - integral {g b..g a} f", "from cd"], ["proof (chain)\npicking this:\n  c \\<le> g a\n  g b \\<le> d\n  c \\<le> g b\n  g a \\<le> d", "have \"integral {c..g a} f + integral {g a..g b} f = integral {c..g b} f\""], ["proof (prove)\nusing this:\n  c \\<le> g a\n  g b \\<le> d\n  c \\<le> g b\n  g a \\<le> d\n\ngoal (1 subgoal):\n 1. integral {c..g a} f + integral {g a..g b} f = integral {c..g b} f", "by (meson Henstock_Kurzweil_Integration.integral_combine atLeastatMost_subset_iff f(1) integrable_on_subinterval le(2) order_refl)"], ["proof (state)\nthis:\n  integral {c..g a} f + integral {g a..g b} f = integral {c..g b} f\n\ngoal (2 subgoals):\n 1. ?P \\<Longrightarrow>\n    integral {c..g b} f - integral {c..g a} f =\n    integral {g a..g b} f - integral {g b..g a} f\n 2. \\<not> ?P \\<Longrightarrow>\n    integral {c..g b} f - integral {c..g a} f =\n    integral {g a..g b} f - integral {g b..g a} f", "with le"], ["proof (chain)\npicking this:\n  a \\<le> b\n  g a \\<le> g b\n  integral {c..g a} f + integral {g a..g b} f = integral {c..g b} f", "show ?thesis"], ["proof (prove)\nusing this:\n  a \\<le> b\n  g a \\<le> g b\n  integral {c..g a} f + integral {g a..g b} f = integral {c..g b} f\n\ngoal (1 subgoal):\n 1. integral {c..g b} f - integral {c..g a} f =\n    integral {g a..g b} f - integral {g b..g a} f", "by (cases \"g a = g b\") (simp_all add: algebra_simps)"], ["proof (state)\nthis:\n  integral {c..g b} f - integral {c..g a} f =\n  integral {g a..g b} f - integral {g b..g a} f\n\ngoal (1 subgoal):\n 1. \\<not> g a \\<le> g b \\<Longrightarrow>\n    integral {c..g b} f - integral {c..g a} f =\n    integral {g a..g b} f - integral {g b..g a} f", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<not> g a \\<le> g b \\<Longrightarrow>\n    integral {c..g b} f - integral {c..g a} f =\n    integral {g a..g b} f - integral {g b..g a} f", "assume less: \"\\<not>g a \\<le> g b\""], ["proof (state)\nthis:\n  \\<not> g a \\<le> g b\n\ngoal (1 subgoal):\n 1. \\<not> g a \\<le> g b \\<Longrightarrow>\n    integral {c..g b} f - integral {c..g a} f =\n    integral {g a..g b} f - integral {g b..g a} f", "then"], ["proof (chain)\npicking this:\n  \\<not> g a \\<le> g b", "have \"g a \\<ge> g b\""], ["proof (prove)\nusing this:\n  \\<not> g a \\<le> g b\n\ngoal (1 subgoal):\n 1. g b \\<le> g a", "by simp"], ["proof (state)\nthis:\n  g b \\<le> g a\n\ngoal (1 subgoal):\n 1. \\<not> g a \\<le> g b \\<Longrightarrow>\n    integral {c..g b} f - integral {c..g a} f =\n    integral {g a..g b} f - integral {g b..g a} f", "note le = le this"], ["proof (state)\nthis:\n  a \\<le> b\n  g b \\<le> g a\n\ngoal (1 subgoal):\n 1. \\<not> g a \\<le> g b \\<Longrightarrow>\n    integral {c..g b} f - integral {c..g a} f =\n    integral {g a..g b} f - integral {g b..g a} f", "from cd"], ["proof (chain)\npicking this:\n  c \\<le> g a\n  g b \\<le> d\n  c \\<le> g b\n  g a \\<le> d", "have \"integral {c..g b} f + integral {g b..g a} f = integral {c..g a} f\""], ["proof (prove)\nusing this:\n  c \\<le> g a\n  g b \\<le> d\n  c \\<le> g b\n  g a \\<le> d\n\ngoal (1 subgoal):\n 1. integral {c..g b} f + integral {g b..g a} f = integral {c..g a} f", "by (meson Henstock_Kurzweil_Integration.integral_combine atLeastatMost_subset_iff f(1) integrable_on_subinterval le(2) order_refl)"], ["proof (state)\nthis:\n  integral {c..g b} f + integral {g b..g a} f = integral {c..g a} f\n\ngoal (1 subgoal):\n 1. \\<not> g a \\<le> g b \\<Longrightarrow>\n    integral {c..g b} f - integral {c..g a} f =\n    integral {g a..g b} f - integral {g b..g a} f", "with less"], ["proof (chain)\npicking this:\n  \\<not> g a \\<le> g b\n  integral {c..g b} f + integral {g b..g a} f = integral {c..g a} f", "show ?thesis"], ["proof (prove)\nusing this:\n  \\<not> g a \\<le> g b\n  integral {c..g b} f + integral {g b..g a} f = integral {c..g a} f\n\ngoal (1 subgoal):\n 1. integral {c..g b} f - integral {c..g a} f =\n    integral {g a..g b} f - integral {g b..g a} f", "by (simp_all add: algebra_simps)"], ["proof (state)\nthis:\n  integral {c..g b} f - integral {c..g a} f =\n  integral {g a..g b} f - integral {g b..g a} f\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  integral {c..g b} f - integral {c..g a} f =\n  integral {g a..g b} f - integral {g b..g a} f\n\ngoal (1 subgoal):\n 1. ((\\<lambda>x. g' x *\\<^sub>R f (g x)) has_integral\n     integral {g a..g b} f - integral {g b..g a} f)\n     {a..b}", "finally"], ["proof (chain)\npicking this:\n  ((\\<lambda>x. g' x *\\<^sub>R f (g x)) has_integral\n   integral {g a..g b} f - integral {g b..g a} f)\n   {a..b}", "show ?thesis"], ["proof (prove)\nusing this:\n  ((\\<lambda>x. g' x *\\<^sub>R f (g x)) has_integral\n   integral {g a..g b} f - integral {g b..g a} f)\n   {a..b}\n\ngoal (1 subgoal):\n 1. ((\\<lambda>x. g' x *\\<^sub>R f (g x)) has_integral\n     integral {g a..g b} f - integral {g b..g a} f)\n     {a..b}", "."], ["proof (state)\nthis:\n  ((\\<lambda>x. g' x *\\<^sub>R f (g x)) has_integral\n   integral {g a..g b} f - integral {g b..g a} f)\n   {a..b}\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma has_integral_substitution_general__:\n  fixes f :: \"real \\<Rightarrow> 'a::euclidean_space\" and g :: \"real \\<Rightarrow> real\"\n  assumes s: \"finite s\" and le: \"a \\<le> b\" and s_subset: \"s \\<subseteq> {a..b}\"\n    and subset: \"g ` {a..b} \\<subseteq> {c..d}\"\n    and f: \"f integrable_on {c..d}\" \"continuous_on ({c..d} - (g ` s)) f\"\n    (*and f [continuous_intros]: \"continuous_on {c..d} f\"*)\n    and g : \"continuous_on {a..b} g\" \"inj_on g {a..b}\"\n    and deriv [derivative_intros]:\n    \"\\<And>x. x \\<in> {a..b} - s \\<Longrightarrow> (g has_field_derivative g' x) (at x within {a..b})\"\n  shows \"((\\<lambda>x. g' x *\\<^sub>R f (g x)) has_integral (integral {g a..g b} f - integral {g b..g a} f)) {a..b}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. ((\\<lambda>x. g' x *\\<^sub>R f (g x)) has_integral\n     integral {g a..g b} f - integral {g b..g a} f)\n     {a..b}", "using s_subset has_integral_substitution_general_[OF s le subset f g(1) _ deriv]"], ["proof (prove)\nusing this:\n  s \\<subseteq> {a..b}\n  \\<lbrakk>inj_on g ({a..b} \\<union> s);\n   \\<And>x. x \\<in> {a..b} - s \\<Longrightarrow> x \\<in> {a..b} - s\\<rbrakk>\n  \\<Longrightarrow> ((\\<lambda>x. g' x *\\<^sub>R f (g x)) has_integral\n                     integral {g a..g b} f - integral {g b..g a} f)\n                     {a..b}\n\ngoal (1 subgoal):\n 1. ((\\<lambda>x. g' x *\\<^sub>R f (g x)) has_integral\n     integral {g a..g b} f - integral {g b..g a} f)\n     {a..b}", "by (simp add: g(2) sup_absorb1)"], ["", "lemma has_integral_substitution_general_':\n  fixes f :: \"real \\<Rightarrow> 'a::euclidean_space\" and g :: \"real \\<Rightarrow> real\"\n  assumes s: \"finite s\" and le: \"a \\<le> b\" and s': \"finite s'\"\n    and subset: \"g ` {a..b} \\<subseteq> {c..d}\"\n    and f: \"f integrable_on {c..d}\" \"continuous_on ({c..d} - s') f\"\n    and g : \"continuous_on {a..b} g\" \"\\<forall>x\\<in>s'. finite (g -` {x})\" \"surj_on s' g\" \"inj_on g ({a..b} \\<union> ((s \\<union> g -` s')))\"\n    and deriv [derivative_intros]:\n    \"\\<And>x. x \\<in> {a..b} - s \\<Longrightarrow> (g has_field_derivative g' x) (at x within {a..b})\"\n  shows \"((\\<lambda>x. g' x *\\<^sub>R f (g x)) has_integral (integral {g a..g b} f - integral {g b..g a} f)) {a..b}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. ((\\<lambda>x. g' x *\\<^sub>R f (g x)) has_integral\n     integral {g a..g b} f - integral {g b..g a} f)\n     {a..b}", "proof-"], ["proof (state)\ngoal (1 subgoal):\n 1. ((\\<lambda>x. g' x *\\<^sub>R f (g x)) has_integral\n     integral {g a..g b} f - integral {g b..g a} f)\n     {a..b}", "have a: \"g -` s' = \\<Union>{t. \\<exists>x. t = g -` {x} \\<and> x \\<in> s'}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. g -` s' = \\<Union> {g -` {x} |x. x \\<in> s'}", "using s s'"], ["proof (prove)\nusing this:\n  finite s\n  finite s'\n\ngoal (1 subgoal):\n 1. g -` s' = \\<Union> {g -` {x} |x. x \\<in> s'}", "by blast"], ["proof (state)\nthis:\n  g -` s' = \\<Union> {g -` {x} |x. x \\<in> s'}\n\ngoal (1 subgoal):\n 1. ((\\<lambda>x. g' x *\\<^sub>R f (g x)) has_integral\n     integral {g a..g b} f - integral {g b..g a} f)\n     {a..b}", "have \"finite (\\<Union>{t. \\<exists>x. t = g -` {x} \\<and> x \\<in> s'})\""], ["proof (prove)\ngoal (1 subgoal):\n 1. finite (\\<Union> {g -` {x} |x. x \\<in> s'})", "using s'"], ["proof (prove)\nusing this:\n  finite s'\n\ngoal (1 subgoal):\n 1. finite (\\<Union> {g -` {x} |x. x \\<in> s'})", "by (metis (no_types, lifting) \\<open>g -` s' = \\<Union>{g -` {x} |x. x \\<in> s'}\\<close> finite_UN_I g(2) vimage_eq_UN)"], ["proof (state)\nthis:\n  finite (\\<Union> {g -` {x} |x. x \\<in> s'})\n\ngoal (1 subgoal):\n 1. ((\\<lambda>x. g' x *\\<^sub>R f (g x)) has_integral\n     integral {g a..g b} f - integral {g b..g a} f)\n     {a..b}", "then"], ["proof (chain)\npicking this:\n  finite (\\<Union> {g -` {x} |x. x \\<in> s'})", "have 0: \"finite (s \\<union> (g -` s'))\""], ["proof (prove)\nusing this:\n  finite (\\<Union> {g -` {x} |x. x \\<in> s'})\n\ngoal (1 subgoal):\n 1. finite (s \\<union> g -` s')", "using a s"], ["proof (prove)\nusing this:\n  finite (\\<Union> {g -` {x} |x. x \\<in> s'})\n  g -` s' = \\<Union> {g -` {x} |x. x \\<in> s'}\n  finite s\n\ngoal (1 subgoal):\n 1. finite (s \\<union> g -` s')", "by simp"], ["proof (state)\nthis:\n  finite (s \\<union> g -` s')\n\ngoal (1 subgoal):\n 1. ((\\<lambda>x. g' x *\\<^sub>R f (g x)) has_integral\n     integral {g a..g b} f - integral {g b..g a} f)\n     {a..b}", "have 1: \"continuous_on ({c..d} - g ` (s \\<union> g -` s')) f\""], ["proof (prove)\ngoal (1 subgoal):\n 1. continuous_on ({c..d} - g ` (s \\<union> g -` s')) f", "using f(2) surj_on_image_vimage_eq"], ["proof (prove)\nusing this:\n  continuous_on ({c..d} - s') f\n  surj_on ?s ?f \\<Longrightarrow> ?f ` ?f -` ?s = ?s\n\ngoal (1 subgoal):\n 1. continuous_on ({c..d} - g ` (s \\<union> g -` s')) f", "by (metis Diff_mono Un_upper2 continuous_on_subset equalityE g(3) image_Un)"], ["proof (state)\nthis:\n  continuous_on ({c..d} - g ` (s \\<union> g -` s')) f\n\ngoal (1 subgoal):\n 1. ((\\<lambda>x. g' x *\\<^sub>R f (g x)) has_integral\n     integral {g a..g b} f - integral {g b..g a} f)\n     {a..b}", "have 2: \" (\\<And>x. x \\<in> {a..b} - (s \\<union> g -` s') \\<Longrightarrow> (g has_real_derivative g' x) (at x within {a..b}))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> {a..b} - (s \\<union> g -` s') \\<Longrightarrow>\n       (g has_real_derivative g' x) (at x within {a..b})", "using deriv"], ["proof (prove)\nusing this:\n  ?x \\<in> {a..b} - s \\<Longrightarrow>\n  (g has_real_derivative g' ?x) (at ?x within {a..b})\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> {a..b} - (s \\<union> g -` s') \\<Longrightarrow>\n       (g has_real_derivative g' x) (at x within {a..b})", "by auto"], ["proof (state)\nthis:\n  ?x \\<in> {a..b} - (s \\<union> g -` s') \\<Longrightarrow>\n  (g has_real_derivative g' ?x) (at ?x within {a..b})\n\ngoal (1 subgoal):\n 1. ((\\<lambda>x. g' x *\\<^sub>R f (g x)) has_integral\n     integral {g a..g b} f - integral {g b..g a} f)\n     {a..b}", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. ((\\<lambda>x. g' x *\\<^sub>R f (g x)) has_integral\n     integral {g a..g b} f - integral {g b..g a} f)\n     {a..b}", "using has_integral_substitution_general_[OF 0 assms(2) subset f(1) 1 g(1) g(4) 2]"], ["proof (prove)\nusing this:\n  (\\<And>x.\n      x \\<in> {a..b} - (s \\<union> g -` s') \\<Longrightarrow>\n      x \\<in> {a..b} - (s \\<union> g -` s')) \\<Longrightarrow>\n  ((\\<lambda>x. g' x *\\<^sub>R f (g x)) has_integral\n   integral {g a..g b} f - integral {g b..g a} f)\n   {a..b}\n\ngoal (1 subgoal):\n 1. ((\\<lambda>x. g' x *\\<^sub>R f (g x)) has_integral\n     integral {g a..g b} f - integral {g b..g a} f)\n     {a..b}", "by auto"], ["proof (state)\nthis:\n  ((\\<lambda>x. g' x *\\<^sub>R f (g x)) has_integral\n   integral {g a..g b} f - integral {g b..g a} f)\n   {a..b}\n\ngoal:\nNo subgoals!", "qed"], ["", "end"]]}