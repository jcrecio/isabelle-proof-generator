{"file_name": "/home/qj213/afp-2021-10-22/thys/KAT_and_DRA/SingleSorted/FolkTheorem.thy", "working_directory": "/home/qj213/afp-2021-10-22/thys/KAT_and_DRA", "problem_names": ["lemma pres_comp: \"pres y z \\<Longrightarrow> pres x z \\<Longrightarrow> pres (x \\<cdot> y) z\"", "lemma test_pres1: \"test p \\<Longrightarrow> test q \\<Longrightarrow> pres p q\"", "lemma test_pres2: \"test p \\<Longrightarrow> test q \\<Longrightarrow> pres x q \\<Longrightarrow> pres (p \\<cdot> x) q\"", "lemma cond_helper1:\nassumes \"test p\" and \"pres x p\" \nshows \"p \\<cdot> (p \\<cdot> x + !p \\<cdot> y)\\<^sup>\\<dagger> \\<cdot> (p \\<cdot> z + !p \\<cdot> w) = p \\<cdot> x\\<^sup>\\<dagger> \\<cdot> z\"", "lemma cond_helper2: \nassumes \"test p\" and \"pres y (!p)\" \nshows \"!p \\<cdot> (p \\<cdot> x + !p \\<cdot> y)\\<^sup>\\<dagger> \\<cdot> (p \\<cdot> z + !p \\<cdot> w) = !p \\<cdot> y\\<^sup>\\<dagger> \\<cdot> w\"", "lemma cond_distr_var: \n  assumes \"test p\" and \"test q\" and \"test r\"\n  shows \"(q \\<cdot> p + r \\<cdot> !p) \\<cdot> (p \\<cdot> x + !p \\<cdot> y) = q \\<cdot> p \\<cdot> x + r \\<cdot> !p \\<cdot> y\"", "lemma cond_distr: \n  assumes \"test p\" and \"test q\" and \"test r\"\n  shows \"(p \\<cdot> q + !p \\<cdot> r) \\<cdot> (p \\<cdot> x + !p \\<cdot> y) = p \\<cdot> q \\<cdot> x + !p \\<cdot> r \\<cdot> y\"", "theorem conditional: \nassumes \"test p\" and \"test q\" and \"test r1\" and \"test r2\"\nand \"pres x1 q\" and \"pres y1 q\" and \"pres x2 (!q)\" and \"pres y2 (!q)\"\nshows \"(p \\<cdot> q + !p \\<cdot> !q) \\<cdot> (q \\<cdot> x1 + !q \\<cdot> x2) \\<cdot> ((q \\<cdot> r1 + !q \\<cdot> r2) \\<cdot> (q \\<cdot> y1 + !q \\<cdot> y2))\\<^sup>\\<dagger> \\<cdot> !(q \\<cdot> r1 + !q \\<cdot> r2) =     \n(p \\<cdot> q + !p \\<cdot> !q) \\<cdot> (p \\<cdot> x1 \\<cdot> (r1 \\<cdot> y1)\\<^sup>\\<dagger> \\<cdot> !r1 + !p \\<cdot> x2 \\<cdot> (r2 \\<cdot> y2)\\<^sup>\\<dagger> \\<cdot> !r2)\"", "theorem nested_loops: \n  assumes \"test p\" and \"test q\"\n  shows \"p \\<cdot> x \\<cdot> ((p + q) \\<cdot> (q \\<cdot> y + !q \\<cdot> x))\\<^sup>\\<dagger> \\<cdot> !(p + q) + !p = (p \\<cdot> x \\<cdot> (q \\<cdot> y)\\<^sup>\\<dagger> \\<cdot> !q)\\<^sup>\\<dagger> \\<cdot> !p\"", "lemma postcomputation:\n  assumes \"test p\" and \"pres y (!p)\"\n  shows \"!p \\<cdot> y + p \\<cdot> (p \\<cdot> x \\<cdot> (!p \\<cdot> y + p))\\<^sup>\\<dagger> \\<cdot> !p = (p \\<cdot> x)\\<^sup>\\<dagger> \\<cdot> !p \\<cdot> y\"", "lemma composition_helper: \n  assumes \"test p\" and \"test q\"\n  and \"pres x p\"\n  shows \"p \\<cdot> (q \\<cdot> x)\\<^sup>\\<dagger> \\<cdot> !q \\<cdot> p = p \\<cdot> (q \\<cdot> x)\\<^sup>\\<dagger> \\<cdot> !q\"", "theorem composition:\n  assumes \"test p\" and \"test q\" \n  and \"pres y p\" and \"pres y (!p)\"\n  shows \"(p \\<cdot> x)\\<^sup>\\<dagger> \\<cdot> !p \\<cdot> (q \\<cdot> y)\\<^sup>\\<dagger> \\<cdot> !q = !p \\<cdot> (q \\<cdot> y)\\<^sup>\\<dagger> \\<cdot> !q + p \\<cdot> (p \\<cdot> x \\<cdot> (!p \\<cdot> (q \\<cdot> y)\\<^sup>\\<dagger> \\<cdot> !q + p))\\<^sup>\\<dagger> \\<cdot> !p\""], "translations": [["", "lemma pres_comp: \"pres y z \\<Longrightarrow> pres x z \\<Longrightarrow> pres (x \\<cdot> y) z\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>pres y z; pres x z\\<rbrakk>\n    \\<Longrightarrow> pres (x \\<cdot> y) z", "by (metis mult_assoc)"], ["", "lemma test_pres1: \"test p \\<Longrightarrow> test q \\<Longrightarrow> pres p q\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>test p; test q\\<rbrakk> \\<Longrightarrow> pres p q", "by (simp add: local.test_mult_comm_var mult_assoc)"], ["", "lemma test_pres2: \"test p \\<Longrightarrow> test q \\<Longrightarrow> pres x q \\<Longrightarrow> pres (p \\<cdot> x) q\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>test p; test q; pres x q\\<rbrakk>\n    \\<Longrightarrow> pres (p \\<cdot> x) q", "using pres_comp test_pres1"], ["proof (prove)\nusing this:\n  \\<lbrakk>pres ?y ?z; pres ?x ?z\\<rbrakk>\n  \\<Longrightarrow> pres (?x \\<cdot> ?y) ?z\n  \\<lbrakk>test ?p; test ?q\\<rbrakk> \\<Longrightarrow> pres ?p ?q\n\ngoal (1 subgoal):\n 1. \\<lbrakk>test p; test q; pres x q\\<rbrakk>\n    \\<Longrightarrow> pres (p \\<cdot> x) q", "by blast"], ["", "lemma cond_helper1:\nassumes \"test p\" and \"pres x p\" \nshows \"p \\<cdot> (p \\<cdot> x + !p \\<cdot> y)\\<^sup>\\<dagger> \\<cdot> (p \\<cdot> z + !p \\<cdot> w) = p \\<cdot> x\\<^sup>\\<dagger> \\<cdot> z\""], ["proof (prove)\ngoal (1 subgoal):\n 1. p \\<cdot> (p \\<cdot> x + !p \\<cdot> y)\\<^sup>\\<dagger> \\<cdot>\n    (p \\<cdot> z + !p \\<cdot> w) =\n    p \\<cdot> x\\<^sup>\\<dagger> \\<cdot> z", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. p \\<cdot> (p \\<cdot> x + !p \\<cdot> y)\\<^sup>\\<dagger> \\<cdot>\n    (p \\<cdot> z + !p \\<cdot> w) =\n    p \\<cdot> x\\<^sup>\\<dagger> \\<cdot> z", "have \"p \\<cdot> (p \\<cdot> z + !p \\<cdot> w) = p \\<cdot> z\""], ["proof (prove)\ngoal (1 subgoal):\n 1. p \\<cdot> (p \\<cdot> z + !p \\<cdot> w) = p \\<cdot> z", "by (metis assms(1) local.add_zerol local.annil local.join.sup_commute local.n_left_distrib_var local.test_comp_mult2 local.test_mult_idem_var mult_assoc)"], ["proof (state)\nthis:\n  p \\<cdot> (p \\<cdot> z + !p \\<cdot> w) = p \\<cdot> z\n\ngoal (1 subgoal):\n 1. p \\<cdot> (p \\<cdot> x + !p \\<cdot> y)\\<^sup>\\<dagger> \\<cdot>\n    (p \\<cdot> z + !p \\<cdot> w) =\n    p \\<cdot> x\\<^sup>\\<dagger> \\<cdot> z", "hence \"p \\<cdot> (p \\<cdot> x + !p \\<cdot> y)\\<^sup>\\<dagger> \\<cdot> (p \\<cdot> z + !p \\<cdot> w) = (p \\<cdot> x)\\<^sup>\\<dagger> \\<cdot> p \\<cdot> z\""], ["proof (prove)\nusing this:\n  p \\<cdot> (p \\<cdot> z + !p \\<cdot> w) = p \\<cdot> z\n\ngoal (1 subgoal):\n 1. p \\<cdot> (p \\<cdot> x + !p \\<cdot> y)\\<^sup>\\<dagger> \\<cdot>\n    (p \\<cdot> z + !p \\<cdot> w) =\n    (p \\<cdot> x)\\<^sup>\\<dagger> \\<cdot> p \\<cdot> z", "using assms(1) assms(2) local.test_preserve1 mult_assoc"], ["proof (prove)\nusing this:\n  p \\<cdot> (p \\<cdot> z + !p \\<cdot> w) = p \\<cdot> z\n  test p\n  pres x p\n  \\<lbrakk>test ?p; ?p \\<cdot> ?x \\<le> ?p \\<cdot> ?x \\<cdot> ?p\\<rbrakk>\n  \\<Longrightarrow> ?p \\<cdot>\n                    (?p \\<cdot> ?x + !?p \\<cdot> ?y)\\<^sup>\\<dagger> =\n                    (?p \\<cdot> ?x)\\<^sup>\\<dagger> \\<cdot> ?p\n  ?a \\<cdot> ?b \\<cdot> ?c = ?a \\<cdot> (?b \\<cdot> ?c)\n\ngoal (1 subgoal):\n 1. p \\<cdot> (p \\<cdot> x + !p \\<cdot> y)\\<^sup>\\<dagger> \\<cdot>\n    (p \\<cdot> z + !p \\<cdot> w) =\n    (p \\<cdot> x)\\<^sup>\\<dagger> \\<cdot> p \\<cdot> z", "by auto"], ["proof (state)\nthis:\n  p \\<cdot> (p \\<cdot> x + !p \\<cdot> y)\\<^sup>\\<dagger> \\<cdot>\n  (p \\<cdot> z + !p \\<cdot> w) =\n  (p \\<cdot> x)\\<^sup>\\<dagger> \\<cdot> p \\<cdot> z\n\ngoal (1 subgoal):\n 1. p \\<cdot> (p \\<cdot> x + !p \\<cdot> y)\\<^sup>\\<dagger> \\<cdot>\n    (p \\<cdot> z + !p \\<cdot> w) =\n    p \\<cdot> x\\<^sup>\\<dagger> \\<cdot> z", "thus ?thesis"], ["proof (prove)\nusing this:\n  p \\<cdot> (p \\<cdot> x + !p \\<cdot> y)\\<^sup>\\<dagger> \\<cdot>\n  (p \\<cdot> z + !p \\<cdot> w) =\n  (p \\<cdot> x)\\<^sup>\\<dagger> \\<cdot> p \\<cdot> z\n\ngoal (1 subgoal):\n 1. p \\<cdot> (p \\<cdot> x + !p \\<cdot> y)\\<^sup>\\<dagger> \\<cdot>\n    (p \\<cdot> z + !p \\<cdot> w) =\n    p \\<cdot> x\\<^sup>\\<dagger> \\<cdot> z", "using assms(1) assms(2) local.test_preserve mult_assoc"], ["proof (prove)\nusing this:\n  p \\<cdot> (p \\<cdot> x + !p \\<cdot> y)\\<^sup>\\<dagger> \\<cdot>\n  (p \\<cdot> z + !p \\<cdot> w) =\n  (p \\<cdot> x)\\<^sup>\\<dagger> \\<cdot> p \\<cdot> z\n  test p\n  pres x p\n  \\<lbrakk>test ?p; ?p \\<cdot> ?x \\<le> ?p \\<cdot> ?x \\<cdot> ?p\\<rbrakk>\n  \\<Longrightarrow> ?p \\<cdot> ?x\\<^sup>\\<dagger> =\n                    (?p \\<cdot> ?x)\\<^sup>\\<dagger> \\<cdot> ?p\n  ?a \\<cdot> ?b \\<cdot> ?c = ?a \\<cdot> (?b \\<cdot> ?c)\n\ngoal (1 subgoal):\n 1. p \\<cdot> (p \\<cdot> x + !p \\<cdot> y)\\<^sup>\\<dagger> \\<cdot>\n    (p \\<cdot> z + !p \\<cdot> w) =\n    p \\<cdot> x\\<^sup>\\<dagger> \\<cdot> z", "by auto"], ["proof (state)\nthis:\n  p \\<cdot> (p \\<cdot> x + !p \\<cdot> y)\\<^sup>\\<dagger> \\<cdot>\n  (p \\<cdot> z + !p \\<cdot> w) =\n  p \\<cdot> x\\<^sup>\\<dagger> \\<cdot> z\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma cond_helper2: \nassumes \"test p\" and \"pres y (!p)\" \nshows \"!p \\<cdot> (p \\<cdot> x + !p \\<cdot> y)\\<^sup>\\<dagger> \\<cdot> (p \\<cdot> z + !p \\<cdot> w) = !p \\<cdot> y\\<^sup>\\<dagger> \\<cdot> w\""], ["proof (prove)\ngoal (1 subgoal):\n 1. !p \\<cdot> (p \\<cdot> x + !p \\<cdot> y)\\<^sup>\\<dagger> \\<cdot>\n    (p \\<cdot> z + !p \\<cdot> w) =\n    !p \\<cdot> y\\<^sup>\\<dagger> \\<cdot> w", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. !p \\<cdot> (p \\<cdot> x + !p \\<cdot> y)\\<^sup>\\<dagger> \\<cdot>\n    (p \\<cdot> z + !p \\<cdot> w) =\n    !p \\<cdot> y\\<^sup>\\<dagger> \\<cdot> w", "have \"!p \\<cdot> (!p \\<cdot> y + !(!p) \\<cdot> x)\\<^sup>\\<dagger> \\<cdot> (!p \\<cdot> w + !(!p) \\<cdot> z) = !p \\<cdot> y\\<^sup>\\<dagger> \\<cdot> w\""], ["proof (prove)\ngoal (1 subgoal):\n 1. !p \\<cdot> (!p \\<cdot> y + t p \\<cdot> x)\\<^sup>\\<dagger> \\<cdot>\n    (!p \\<cdot> w + t p \\<cdot> z) =\n    !p \\<cdot> y\\<^sup>\\<dagger> \\<cdot> w", "using assms(1) local.test_comp_closed assms(2) cond_helper1"], ["proof (prove)\nusing this:\n  test p\n  test ?p \\<Longrightarrow> test (!?p)\n  pres y (!p)\n  \\<lbrakk>test ?p; pres ?x ?p\\<rbrakk>\n  \\<Longrightarrow> ?p \\<cdot>\n                    (?p \\<cdot> ?x + !?p \\<cdot> ?y)\\<^sup>\\<dagger> \\<cdot>\n                    (?p \\<cdot> ?z + !?p \\<cdot> ?w) =\n                    ?p \\<cdot> ?x\\<^sup>\\<dagger> \\<cdot> ?z\n\ngoal (1 subgoal):\n 1. !p \\<cdot> (!p \\<cdot> y + t p \\<cdot> x)\\<^sup>\\<dagger> \\<cdot>\n    (!p \\<cdot> w + t p \\<cdot> z) =\n    !p \\<cdot> y\\<^sup>\\<dagger> \\<cdot> w", "by blast"], ["proof (state)\nthis:\n  !p \\<cdot> (!p \\<cdot> y + t p \\<cdot> x)\\<^sup>\\<dagger> \\<cdot>\n  (!p \\<cdot> w + t p \\<cdot> z) =\n  !p \\<cdot> y\\<^sup>\\<dagger> \\<cdot> w\n\ngoal (1 subgoal):\n 1. !p \\<cdot> (p \\<cdot> x + !p \\<cdot> y)\\<^sup>\\<dagger> \\<cdot>\n    (p \\<cdot> z + !p \\<cdot> w) =\n    !p \\<cdot> y\\<^sup>\\<dagger> \\<cdot> w", "thus ?thesis"], ["proof (prove)\nusing this:\n  !p \\<cdot> (!p \\<cdot> y + t p \\<cdot> x)\\<^sup>\\<dagger> \\<cdot>\n  (!p \\<cdot> w + t p \\<cdot> z) =\n  !p \\<cdot> y\\<^sup>\\<dagger> \\<cdot> w\n\ngoal (1 subgoal):\n 1. !p \\<cdot> (p \\<cdot> x + !p \\<cdot> y)\\<^sup>\\<dagger> \\<cdot>\n    (p \\<cdot> z + !p \\<cdot> w) =\n    !p \\<cdot> y\\<^sup>\\<dagger> \\<cdot> w", "using add_commute assms(1)"], ["proof (prove)\nusing this:\n  !p \\<cdot> (!p \\<cdot> y + t p \\<cdot> x)\\<^sup>\\<dagger> \\<cdot>\n  (!p \\<cdot> w + t p \\<cdot> z) =\n  !p \\<cdot> y\\<^sup>\\<dagger> \\<cdot> w\n  ?a + ?b = ?b + ?a\n  test p\n\ngoal (1 subgoal):\n 1. !p \\<cdot> (p \\<cdot> x + !p \\<cdot> y)\\<^sup>\\<dagger> \\<cdot>\n    (p \\<cdot> z + !p \\<cdot> w) =\n    !p \\<cdot> y\\<^sup>\\<dagger> \\<cdot> w", "by auto"], ["proof (state)\nthis:\n  !p \\<cdot> (p \\<cdot> x + !p \\<cdot> y)\\<^sup>\\<dagger> \\<cdot>\n  (p \\<cdot> z + !p \\<cdot> w) =\n  !p \\<cdot> y\\<^sup>\\<dagger> \\<cdot> w\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma cond_distr_var: \n  assumes \"test p\" and \"test q\" and \"test r\"\n  shows \"(q \\<cdot> p + r \\<cdot> !p) \\<cdot> (p \\<cdot> x + !p \\<cdot> y) = q \\<cdot> p \\<cdot> x + r \\<cdot> !p \\<cdot> y\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (q \\<cdot> p + r \\<cdot> !p) \\<cdot> (p \\<cdot> x + !p \\<cdot> y) =\n    q \\<cdot> p \\<cdot> x + r \\<cdot> !p \\<cdot> y", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. (q \\<cdot> p + r \\<cdot> !p) \\<cdot> (p \\<cdot> x + !p \\<cdot> y) =\n    q \\<cdot> p \\<cdot> x + r \\<cdot> !p \\<cdot> y", "have \"(q \\<cdot> p + r \\<cdot> !p) \\<cdot> (p \\<cdot> x + !p \\<cdot> y) = q \\<cdot> p \\<cdot> p \\<cdot> x + q \\<cdot> p \\<cdot> !p \\<cdot> y + r \\<cdot> !p \\<cdot> p \\<cdot> x + r \\<cdot> !p \\<cdot> !p \\<cdot> y\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (q \\<cdot> p + r \\<cdot> !p) \\<cdot> (p \\<cdot> x + !p \\<cdot> y) =\n    q \\<cdot> p \\<cdot> p \\<cdot> x + q \\<cdot> p \\<cdot> !p \\<cdot> y +\n    r \\<cdot> !p \\<cdot> p \\<cdot> x +\n    r \\<cdot> !p \\<cdot> !p \\<cdot> y", "using assms(1) assms(2) assms(3) local.distrib_right' local.join.sup_assoc local.n_left_distrib_var local.test_comp_closed mult_assoc"], ["proof (prove)\nusing this:\n  test p\n  test q\n  test r\n  (?x + ?y) \\<cdot> ?z = ?x \\<cdot> ?z + ?y \\<cdot> ?z\n  ?x + ?y + ?z = ?x + (?y + ?z)\n  test ?p \\<Longrightarrow>\n  ?p \\<cdot> (?x + ?y) = ?p \\<cdot> ?x + ?p \\<cdot> ?y\n  test ?p \\<Longrightarrow> test (!?p)\n  ?a \\<cdot> ?b \\<cdot> ?c = ?a \\<cdot> (?b \\<cdot> ?c)\n\ngoal (1 subgoal):\n 1. (q \\<cdot> p + r \\<cdot> !p) \\<cdot> (p \\<cdot> x + !p \\<cdot> y) =\n    q \\<cdot> p \\<cdot> p \\<cdot> x + q \\<cdot> p \\<cdot> !p \\<cdot> y +\n    r \\<cdot> !p \\<cdot> p \\<cdot> x +\n    r \\<cdot> !p \\<cdot> !p \\<cdot> y", "by presburger"], ["proof (state)\nthis:\n  (q \\<cdot> p + r \\<cdot> !p) \\<cdot> (p \\<cdot> x + !p \\<cdot> y) =\n  q \\<cdot> p \\<cdot> p \\<cdot> x + q \\<cdot> p \\<cdot> !p \\<cdot> y +\n  r \\<cdot> !p \\<cdot> p \\<cdot> x +\n  r \\<cdot> !p \\<cdot> !p \\<cdot> y\n\ngoal (1 subgoal):\n 1. (q \\<cdot> p + r \\<cdot> !p) \\<cdot> (p \\<cdot> x + !p \\<cdot> y) =\n    q \\<cdot> p \\<cdot> x + r \\<cdot> !p \\<cdot> y", "also"], ["proof (state)\nthis:\n  (q \\<cdot> p + r \\<cdot> !p) \\<cdot> (p \\<cdot> x + !p \\<cdot> y) =\n  q \\<cdot> p \\<cdot> p \\<cdot> x + q \\<cdot> p \\<cdot> !p \\<cdot> y +\n  r \\<cdot> !p \\<cdot> p \\<cdot> x +\n  r \\<cdot> !p \\<cdot> !p \\<cdot> y\n\ngoal (1 subgoal):\n 1. (q \\<cdot> p + r \\<cdot> !p) \\<cdot> (p \\<cdot> x + !p \\<cdot> y) =\n    q \\<cdot> p \\<cdot> x + r \\<cdot> !p \\<cdot> y", "have \"... = q \\<cdot> p \\<cdot> x + q \\<cdot> 0 \\<cdot> y + r \\<cdot> 0 \\<cdot> x + r \\<cdot> !p  \\<cdot> y\""], ["proof (prove)\ngoal (1 subgoal):\n 1. q \\<cdot> p \\<cdot> p \\<cdot> x + q \\<cdot> p \\<cdot> !p \\<cdot> y +\n    r \\<cdot> !p \\<cdot> p \\<cdot> x +\n    r \\<cdot> !p \\<cdot> !p \\<cdot> y =\n    q \\<cdot> p \\<cdot> x + q \\<cdot> (0::'a) \\<cdot> y +\n    r \\<cdot> (0::'a) \\<cdot> x +\n    r \\<cdot> !p \\<cdot> y", "by (simp add: assms(1) mult_assoc)"], ["proof (state)\nthis:\n  q \\<cdot> p \\<cdot> p \\<cdot> x + q \\<cdot> p \\<cdot> !p \\<cdot> y +\n  r \\<cdot> !p \\<cdot> p \\<cdot> x +\n  r \\<cdot> !p \\<cdot> !p \\<cdot> y =\n  q \\<cdot> p \\<cdot> x + q \\<cdot> (0::'a) \\<cdot> y +\n  r \\<cdot> (0::'a) \\<cdot> x +\n  r \\<cdot> !p \\<cdot> y\n\ngoal (1 subgoal):\n 1. (q \\<cdot> p + r \\<cdot> !p) \\<cdot> (p \\<cdot> x + !p \\<cdot> y) =\n    q \\<cdot> p \\<cdot> x + r \\<cdot> !p \\<cdot> y", "finally"], ["proof (chain)\npicking this:\n  (q \\<cdot> p + r \\<cdot> !p) \\<cdot> (p \\<cdot> x + !p \\<cdot> y) =\n  q \\<cdot> p \\<cdot> x + q \\<cdot> (0::'a) \\<cdot> y +\n  r \\<cdot> (0::'a) \\<cdot> x +\n  r \\<cdot> !p \\<cdot> y", "show ?thesis"], ["proof (prove)\nusing this:\n  (q \\<cdot> p + r \\<cdot> !p) \\<cdot> (p \\<cdot> x + !p \\<cdot> y) =\n  q \\<cdot> p \\<cdot> x + q \\<cdot> (0::'a) \\<cdot> y +\n  r \\<cdot> (0::'a) \\<cdot> x +\n  r \\<cdot> !p \\<cdot> y\n\ngoal (1 subgoal):\n 1. (q \\<cdot> p + r \\<cdot> !p) \\<cdot> (p \\<cdot> x + !p \\<cdot> y) =\n    q \\<cdot> p \\<cdot> x + r \\<cdot> !p \\<cdot> y", "by (metis assms(2) assms(3) local.add_zerol local.annil local.join.sup_commute local.test_mult_comm_var local.test_zero_var)"], ["proof (state)\nthis:\n  (q \\<cdot> p + r \\<cdot> !p) \\<cdot> (p \\<cdot> x + !p \\<cdot> y) =\n  q \\<cdot> p \\<cdot> x + r \\<cdot> !p \\<cdot> y\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma cond_distr: \n  assumes \"test p\" and \"test q\" and \"test r\"\n  shows \"(p \\<cdot> q + !p \\<cdot> r) \\<cdot> (p \\<cdot> x + !p \\<cdot> y) = p \\<cdot> q \\<cdot> x + !p \\<cdot> r \\<cdot> y\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (p \\<cdot> q + !p \\<cdot> r) \\<cdot> (p \\<cdot> x + !p \\<cdot> y) =\n    p \\<cdot> q \\<cdot> x + !p \\<cdot> r \\<cdot> y", "using  assms(1) assms(2) assms(3) local.test_mult_comm_var assms(1) assms(2) assms(3) cond_distr_var local.test_mult_comm_var"], ["proof (prove)\nusing this:\n  test p\n  test q\n  test r\n  \\<lbrakk>test ?p; test ?q\\<rbrakk>\n  \\<Longrightarrow> ?p \\<cdot> ?q = ?q \\<cdot> ?p\n  test p\n  test q\n  test r\n  \\<lbrakk>test ?p; test ?q; test ?r\\<rbrakk>\n  \\<Longrightarrow> (?q \\<cdot> ?p + ?r \\<cdot> !?p) \\<cdot>\n                    (?p \\<cdot> ?x + !?p \\<cdot> ?y) =\n                    ?q \\<cdot> ?p \\<cdot> ?x + ?r \\<cdot> !?p \\<cdot> ?y\n  \\<lbrakk>test ?p; test ?q\\<rbrakk>\n  \\<Longrightarrow> ?p \\<cdot> ?q = ?q \\<cdot> ?p\n\ngoal (1 subgoal):\n 1. (p \\<cdot> q + !p \\<cdot> r) \\<cdot> (p \\<cdot> x + !p \\<cdot> y) =\n    p \\<cdot> q \\<cdot> x + !p \\<cdot> r \\<cdot> y", "by auto"], ["", "theorem conditional: \nassumes \"test p\" and \"test q\" and \"test r1\" and \"test r2\"\nand \"pres x1 q\" and \"pres y1 q\" and \"pres x2 (!q)\" and \"pres y2 (!q)\"\nshows \"(p \\<cdot> q + !p \\<cdot> !q) \\<cdot> (q \\<cdot> x1 + !q \\<cdot> x2) \\<cdot> ((q \\<cdot> r1 + !q \\<cdot> r2) \\<cdot> (q \\<cdot> y1 + !q \\<cdot> y2))\\<^sup>\\<dagger> \\<cdot> !(q \\<cdot> r1 + !q \\<cdot> r2) =     \n(p \\<cdot> q + !p \\<cdot> !q) \\<cdot> (p \\<cdot> x1 \\<cdot> (r1 \\<cdot> y1)\\<^sup>\\<dagger> \\<cdot> !r1 + !p \\<cdot> x2 \\<cdot> (r2 \\<cdot> y2)\\<^sup>\\<dagger> \\<cdot> !r2)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (p \\<cdot> q + !p \\<cdot> !q) \\<cdot>\n    (q \\<cdot> x1 + !q \\<cdot> x2) \\<cdot>\n    ((q \\<cdot> r1 + !q \\<cdot> r2) \\<cdot>\n     (q \\<cdot> y1 + !q \\<cdot> y2))\\<^sup>\\<dagger> \\<cdot>\n    !(q \\<cdot> r1 + !q \\<cdot> r2) =\n    (p \\<cdot> q + !p \\<cdot> !q) \\<cdot>\n    (p \\<cdot> x1 \\<cdot> (r1 \\<cdot> y1)\\<^sup>\\<dagger> \\<cdot> !r1 +\n     !p \\<cdot> x2 \\<cdot> (r2 \\<cdot> y2)\\<^sup>\\<dagger> \\<cdot> !r2)", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. (p \\<cdot> q + !p \\<cdot> !q) \\<cdot>\n    (q \\<cdot> x1 + !q \\<cdot> x2) \\<cdot>\n    ((q \\<cdot> r1 + !q \\<cdot> r2) \\<cdot>\n     (q \\<cdot> y1 + !q \\<cdot> y2))\\<^sup>\\<dagger> \\<cdot>\n    !(q \\<cdot> r1 + !q \\<cdot> r2) =\n    (p \\<cdot> q + !p \\<cdot> !q) \\<cdot>\n    (p \\<cdot> x1 \\<cdot> (r1 \\<cdot> y1)\\<^sup>\\<dagger> \\<cdot> !r1 +\n     !p \\<cdot> x2 \\<cdot> (r2 \\<cdot> y2)\\<^sup>\\<dagger> \\<cdot> !r2)", "have a: \"p \\<cdot> q \\<cdot> x1 \\<cdot> q \\<cdot> (q \\<cdot> r1 \\<cdot> y1 + !q \\<cdot> r2 \\<cdot> y2)\\<^sup>\\<dagger> \\<cdot> (q \\<cdot> !r1 + !q \\<cdot> !r2) = p \\<cdot> q \\<cdot> x1 \\<cdot> q \\<cdot> (r1 \\<cdot> y1)\\<^sup>\\<dagger> \\<cdot> !r1\""], ["proof (prove)\ngoal (1 subgoal):\n 1. p \\<cdot> q \\<cdot> x1 \\<cdot> q \\<cdot>\n    (q \\<cdot> r1 \\<cdot> y1 +\n     !q \\<cdot> r2 \\<cdot> y2)\\<^sup>\\<dagger> \\<cdot>\n    (q \\<cdot> !r1 + !q \\<cdot> !r2) =\n    p \\<cdot> q \\<cdot> x1 \\<cdot> q \\<cdot>\n    (r1 \\<cdot> y1)\\<^sup>\\<dagger> \\<cdot>\n    !r1", "by (metis assms(2) assms(3)  assms(6) cond_helper1 mult_assoc test_pres2)"], ["proof (state)\nthis:\n  p \\<cdot> q \\<cdot> x1 \\<cdot> q \\<cdot>\n  (q \\<cdot> r1 \\<cdot> y1 +\n   !q \\<cdot> r2 \\<cdot> y2)\\<^sup>\\<dagger> \\<cdot>\n  (q \\<cdot> !r1 + !q \\<cdot> !r2) =\n  p \\<cdot> q \\<cdot> x1 \\<cdot> q \\<cdot>\n  (r1 \\<cdot> y1)\\<^sup>\\<dagger> \\<cdot>\n  !r1\n\ngoal (1 subgoal):\n 1. (p \\<cdot> q + !p \\<cdot> !q) \\<cdot>\n    (q \\<cdot> x1 + !q \\<cdot> x2) \\<cdot>\n    ((q \\<cdot> r1 + !q \\<cdot> r2) \\<cdot>\n     (q \\<cdot> y1 + !q \\<cdot> y2))\\<^sup>\\<dagger> \\<cdot>\n    !(q \\<cdot> r1 + !q \\<cdot> r2) =\n    (p \\<cdot> q + !p \\<cdot> !q) \\<cdot>\n    (p \\<cdot> x1 \\<cdot> (r1 \\<cdot> y1)\\<^sup>\\<dagger> \\<cdot> !r1 +\n     !p \\<cdot> x2 \\<cdot> (r2 \\<cdot> y2)\\<^sup>\\<dagger> \\<cdot> !r2)", "have b: \"!q \\<cdot> (q \\<cdot> r1 \\<cdot> y1 + !q \\<cdot> r2 \\<cdot> y2)\\<^sup>\\<dagger> \\<cdot> (q \\<cdot> !r1 + !q \\<cdot> !r2) = !q \\<cdot> (r2 \\<cdot> y2)\\<^sup>\\<dagger> \\<cdot> !r2\""], ["proof (prove)\ngoal (1 subgoal):\n 1. !q \\<cdot>\n    (q \\<cdot> r1 \\<cdot> y1 +\n     !q \\<cdot> r2 \\<cdot> y2)\\<^sup>\\<dagger> \\<cdot>\n    (q \\<cdot> !r1 + !q \\<cdot> !r2) =\n    !q \\<cdot> (r2 \\<cdot> y2)\\<^sup>\\<dagger> \\<cdot> !r2", "by (metis assms(2) assms(4) assms(8) local.test_comp_closed cond_helper2 mult_assoc test_pres2)"], ["proof (state)\nthis:\n  !q \\<cdot>\n  (q \\<cdot> r1 \\<cdot> y1 +\n   !q \\<cdot> r2 \\<cdot> y2)\\<^sup>\\<dagger> \\<cdot>\n  (q \\<cdot> !r1 + !q \\<cdot> !r2) =\n  !q \\<cdot> (r2 \\<cdot> y2)\\<^sup>\\<dagger> \\<cdot> !r2\n\ngoal (1 subgoal):\n 1. (p \\<cdot> q + !p \\<cdot> !q) \\<cdot>\n    (q \\<cdot> x1 + !q \\<cdot> x2) \\<cdot>\n    ((q \\<cdot> r1 + !q \\<cdot> r2) \\<cdot>\n     (q \\<cdot> y1 + !q \\<cdot> y2))\\<^sup>\\<dagger> \\<cdot>\n    !(q \\<cdot> r1 + !q \\<cdot> r2) =\n    (p \\<cdot> q + !p \\<cdot> !q) \\<cdot>\n    (p \\<cdot> x1 \\<cdot> (r1 \\<cdot> y1)\\<^sup>\\<dagger> \\<cdot> !r1 +\n     !p \\<cdot> x2 \\<cdot> (r2 \\<cdot> y2)\\<^sup>\\<dagger> \\<cdot> !r2)", "have \"(p \\<cdot> q + !p \\<cdot> !q) \\<cdot> (q \\<cdot> x1 + !q \\<cdot> x2) \\<cdot> ((q \\<cdot> r1 + !q \\<cdot> r2) \\<cdot> (q \\<cdot> y1 + !q \\<cdot> y2))\\<^sup>\\<dagger> \\<cdot> !(q \\<cdot> r1 + !q \\<cdot> r2) =\n        p \\<cdot> q \\<cdot> x1 \\<cdot> q \\<cdot> (q \\<cdot> r1 \\<cdot> y1 + !q \\<cdot> r2 \\<cdot> y2)\\<^sup>\\<dagger> \\<cdot> (q \\<cdot> !r1 + !q \\<cdot> !r2) + !p \\<cdot> !q \\<cdot> x2 \\<cdot> !q \\<cdot> (q \\<cdot> r1 \\<cdot> y1 + !q \\<cdot> r2 \\<cdot> y2)\\<^sup>\\<dagger> \\<cdot> (q \\<cdot> !r1 + !q \\<cdot> !r2)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (p \\<cdot> q + !p \\<cdot> !q) \\<cdot>\n    (q \\<cdot> x1 + !q \\<cdot> x2) \\<cdot>\n    ((q \\<cdot> r1 + !q \\<cdot> r2) \\<cdot>\n     (q \\<cdot> y1 + !q \\<cdot> y2))\\<^sup>\\<dagger> \\<cdot>\n    !(q \\<cdot> r1 + !q \\<cdot> r2) =\n    p \\<cdot> q \\<cdot> x1 \\<cdot> q \\<cdot>\n    (q \\<cdot> r1 \\<cdot> y1 +\n     !q \\<cdot> r2 \\<cdot> y2)\\<^sup>\\<dagger> \\<cdot>\n    (q \\<cdot> !r1 + !q \\<cdot> !r2) +\n    !p \\<cdot> !q \\<cdot> x2 \\<cdot> !q \\<cdot>\n    (q \\<cdot> r1 \\<cdot> y1 +\n     !q \\<cdot> r2 \\<cdot> y2)\\<^sup>\\<dagger> \\<cdot>\n    (q \\<cdot> !r1 + !q \\<cdot> !r2)", "using assms(1) assms(2) assms(3) assms(4) assms(5) assms(7) cond_distr cond_distr_var local.test_dist_var2 mult_assoc"], ["proof (prove)\nusing this:\n  test p\n  test q\n  test r1\n  test r2\n  pres x1 q\n  pres x2 (!q)\n  \\<lbrakk>test ?p; test ?q; test ?r\\<rbrakk>\n  \\<Longrightarrow> (?p \\<cdot> ?q + !?p \\<cdot> ?r) \\<cdot>\n                    (?p \\<cdot> ?x + !?p \\<cdot> ?y) =\n                    ?p \\<cdot> ?q \\<cdot> ?x + !?p \\<cdot> ?r \\<cdot> ?y\n  \\<lbrakk>test ?p; test ?q; test ?r\\<rbrakk>\n  \\<Longrightarrow> (?q \\<cdot> ?p + ?r \\<cdot> !?p) \\<cdot>\n                    (?p \\<cdot> ?x + !?p \\<cdot> ?y) =\n                    ?q \\<cdot> ?p \\<cdot> ?x + ?r \\<cdot> !?p \\<cdot> ?y\n  \\<lbrakk>test ?p; test ?q; test ?r\\<rbrakk>\n  \\<Longrightarrow> !(?p \\<cdot> ?q + !?p \\<cdot> ?r) =\n                    ?p \\<cdot> !?q + !?p \\<cdot> !?r\n  ?a \\<cdot> ?b \\<cdot> ?c = ?a \\<cdot> (?b \\<cdot> ?c)\n\ngoal (1 subgoal):\n 1. (p \\<cdot> q + !p \\<cdot> !q) \\<cdot>\n    (q \\<cdot> x1 + !q \\<cdot> x2) \\<cdot>\n    ((q \\<cdot> r1 + !q \\<cdot> r2) \\<cdot>\n     (q \\<cdot> y1 + !q \\<cdot> y2))\\<^sup>\\<dagger> \\<cdot>\n    !(q \\<cdot> r1 + !q \\<cdot> r2) =\n    p \\<cdot> q \\<cdot> x1 \\<cdot> q \\<cdot>\n    (q \\<cdot> r1 \\<cdot> y1 +\n     !q \\<cdot> r2 \\<cdot> y2)\\<^sup>\\<dagger> \\<cdot>\n    (q \\<cdot> !r1 + !q \\<cdot> !r2) +\n    !p \\<cdot> !q \\<cdot> x2 \\<cdot> !q \\<cdot>\n    (q \\<cdot> r1 \\<cdot> y1 +\n     !q \\<cdot> r2 \\<cdot> y2)\\<^sup>\\<dagger> \\<cdot>\n    (q \\<cdot> !r1 + !q \\<cdot> !r2)", "by auto"], ["proof (state)\nthis:\n  (p \\<cdot> q + !p \\<cdot> !q) \\<cdot>\n  (q \\<cdot> x1 + !q \\<cdot> x2) \\<cdot>\n  ((q \\<cdot> r1 + !q \\<cdot> r2) \\<cdot>\n   (q \\<cdot> y1 + !q \\<cdot> y2))\\<^sup>\\<dagger> \\<cdot>\n  !(q \\<cdot> r1 + !q \\<cdot> r2) =\n  p \\<cdot> q \\<cdot> x1 \\<cdot> q \\<cdot>\n  (q \\<cdot> r1 \\<cdot> y1 +\n   !q \\<cdot> r2 \\<cdot> y2)\\<^sup>\\<dagger> \\<cdot>\n  (q \\<cdot> !r1 + !q \\<cdot> !r2) +\n  !p \\<cdot> !q \\<cdot> x2 \\<cdot> !q \\<cdot>\n  (q \\<cdot> r1 \\<cdot> y1 +\n   !q \\<cdot> r2 \\<cdot> y2)\\<^sup>\\<dagger> \\<cdot>\n  (q \\<cdot> !r1 + !q \\<cdot> !r2)\n\ngoal (1 subgoal):\n 1. (p \\<cdot> q + !p \\<cdot> !q) \\<cdot>\n    (q \\<cdot> x1 + !q \\<cdot> x2) \\<cdot>\n    ((q \\<cdot> r1 + !q \\<cdot> r2) \\<cdot>\n     (q \\<cdot> y1 + !q \\<cdot> y2))\\<^sup>\\<dagger> \\<cdot>\n    !(q \\<cdot> r1 + !q \\<cdot> r2) =\n    (p \\<cdot> q + !p \\<cdot> !q) \\<cdot>\n    (p \\<cdot> x1 \\<cdot> (r1 \\<cdot> y1)\\<^sup>\\<dagger> \\<cdot> !r1 +\n     !p \\<cdot> x2 \\<cdot> (r2 \\<cdot> y2)\\<^sup>\\<dagger> \\<cdot> !r2)", "also"], ["proof (state)\nthis:\n  (p \\<cdot> q + !p \\<cdot> !q) \\<cdot>\n  (q \\<cdot> x1 + !q \\<cdot> x2) \\<cdot>\n  ((q \\<cdot> r1 + !q \\<cdot> r2) \\<cdot>\n   (q \\<cdot> y1 + !q \\<cdot> y2))\\<^sup>\\<dagger> \\<cdot>\n  !(q \\<cdot> r1 + !q \\<cdot> r2) =\n  p \\<cdot> q \\<cdot> x1 \\<cdot> q \\<cdot>\n  (q \\<cdot> r1 \\<cdot> y1 +\n   !q \\<cdot> r2 \\<cdot> y2)\\<^sup>\\<dagger> \\<cdot>\n  (q \\<cdot> !r1 + !q \\<cdot> !r2) +\n  !p \\<cdot> !q \\<cdot> x2 \\<cdot> !q \\<cdot>\n  (q \\<cdot> r1 \\<cdot> y1 +\n   !q \\<cdot> r2 \\<cdot> y2)\\<^sup>\\<dagger> \\<cdot>\n  (q \\<cdot> !r1 + !q \\<cdot> !r2)\n\ngoal (1 subgoal):\n 1. (p \\<cdot> q + !p \\<cdot> !q) \\<cdot>\n    (q \\<cdot> x1 + !q \\<cdot> x2) \\<cdot>\n    ((q \\<cdot> r1 + !q \\<cdot> r2) \\<cdot>\n     (q \\<cdot> y1 + !q \\<cdot> y2))\\<^sup>\\<dagger> \\<cdot>\n    !(q \\<cdot> r1 + !q \\<cdot> r2) =\n    (p \\<cdot> q + !p \\<cdot> !q) \\<cdot>\n    (p \\<cdot> x1 \\<cdot> (r1 \\<cdot> y1)\\<^sup>\\<dagger> \\<cdot> !r1 +\n     !p \\<cdot> x2 \\<cdot> (r2 \\<cdot> y2)\\<^sup>\\<dagger> \\<cdot> !r2)", "have \"... =  p \\<cdot> q \\<cdot> x1 \\<cdot> (r1 \\<cdot> y1)\\<^sup>\\<dagger> \\<cdot> !r1 + !p \\<cdot> !q \\<cdot>  x2 \\<cdot> (r2 \\<cdot> y2)\\<^sup>\\<dagger> \\<cdot> !r2\""], ["proof (prove)\ngoal (1 subgoal):\n 1. p \\<cdot> q \\<cdot> x1 \\<cdot> q \\<cdot>\n    (q \\<cdot> r1 \\<cdot> y1 +\n     !q \\<cdot> r2 \\<cdot> y2)\\<^sup>\\<dagger> \\<cdot>\n    (q \\<cdot> !r1 + !q \\<cdot> !r2) +\n    !p \\<cdot> !q \\<cdot> x2 \\<cdot> !q \\<cdot>\n    (q \\<cdot> r1 \\<cdot> y1 +\n     !q \\<cdot> r2 \\<cdot> y2)\\<^sup>\\<dagger> \\<cdot>\n    (q \\<cdot> !r1 + !q \\<cdot> !r2) =\n    p \\<cdot> q \\<cdot> x1 \\<cdot> (r1 \\<cdot> y1)\\<^sup>\\<dagger> \\<cdot>\n    !r1 +\n    !p \\<cdot> !q \\<cdot> x2 \\<cdot> (r2 \\<cdot> y2)\\<^sup>\\<dagger> \\<cdot>\n    !r2", "by (metis a assms(5) assms(7) b mult_assoc)"], ["proof (state)\nthis:\n  p \\<cdot> q \\<cdot> x1 \\<cdot> q \\<cdot>\n  (q \\<cdot> r1 \\<cdot> y1 +\n   !q \\<cdot> r2 \\<cdot> y2)\\<^sup>\\<dagger> \\<cdot>\n  (q \\<cdot> !r1 + !q \\<cdot> !r2) +\n  !p \\<cdot> !q \\<cdot> x2 \\<cdot> !q \\<cdot>\n  (q \\<cdot> r1 \\<cdot> y1 +\n   !q \\<cdot> r2 \\<cdot> y2)\\<^sup>\\<dagger> \\<cdot>\n  (q \\<cdot> !r1 + !q \\<cdot> !r2) =\n  p \\<cdot> q \\<cdot> x1 \\<cdot> (r1 \\<cdot> y1)\\<^sup>\\<dagger> \\<cdot>\n  !r1 +\n  !p \\<cdot> !q \\<cdot> x2 \\<cdot> (r2 \\<cdot> y2)\\<^sup>\\<dagger> \\<cdot>\n  !r2\n\ngoal (1 subgoal):\n 1. (p \\<cdot> q + !p \\<cdot> !q) \\<cdot>\n    (q \\<cdot> x1 + !q \\<cdot> x2) \\<cdot>\n    ((q \\<cdot> r1 + !q \\<cdot> r2) \\<cdot>\n     (q \\<cdot> y1 + !q \\<cdot> y2))\\<^sup>\\<dagger> \\<cdot>\n    !(q \\<cdot> r1 + !q \\<cdot> r2) =\n    (p \\<cdot> q + !p \\<cdot> !q) \\<cdot>\n    (p \\<cdot> x1 \\<cdot> (r1 \\<cdot> y1)\\<^sup>\\<dagger> \\<cdot> !r1 +\n     !p \\<cdot> x2 \\<cdot> (r2 \\<cdot> y2)\\<^sup>\\<dagger> \\<cdot> !r2)", "finally"], ["proof (chain)\npicking this:\n  (p \\<cdot> q + !p \\<cdot> !q) \\<cdot>\n  (q \\<cdot> x1 + !q \\<cdot> x2) \\<cdot>\n  ((q \\<cdot> r1 + !q \\<cdot> r2) \\<cdot>\n   (q \\<cdot> y1 + !q \\<cdot> y2))\\<^sup>\\<dagger> \\<cdot>\n  !(q \\<cdot> r1 + !q \\<cdot> r2) =\n  p \\<cdot> q \\<cdot> x1 \\<cdot> (r1 \\<cdot> y1)\\<^sup>\\<dagger> \\<cdot>\n  !r1 +\n  !p \\<cdot> !q \\<cdot> x2 \\<cdot> (r2 \\<cdot> y2)\\<^sup>\\<dagger> \\<cdot>\n  !r2", "show ?thesis"], ["proof (prove)\nusing this:\n  (p \\<cdot> q + !p \\<cdot> !q) \\<cdot>\n  (q \\<cdot> x1 + !q \\<cdot> x2) \\<cdot>\n  ((q \\<cdot> r1 + !q \\<cdot> r2) \\<cdot>\n   (q \\<cdot> y1 + !q \\<cdot> y2))\\<^sup>\\<dagger> \\<cdot>\n  !(q \\<cdot> r1 + !q \\<cdot> r2) =\n  p \\<cdot> q \\<cdot> x1 \\<cdot> (r1 \\<cdot> y1)\\<^sup>\\<dagger> \\<cdot>\n  !r1 +\n  !p \\<cdot> !q \\<cdot> x2 \\<cdot> (r2 \\<cdot> y2)\\<^sup>\\<dagger> \\<cdot>\n  !r2\n\ngoal (1 subgoal):\n 1. (p \\<cdot> q + !p \\<cdot> !q) \\<cdot>\n    (q \\<cdot> x1 + !q \\<cdot> x2) \\<cdot>\n    ((q \\<cdot> r1 + !q \\<cdot> r2) \\<cdot>\n     (q \\<cdot> y1 + !q \\<cdot> y2))\\<^sup>\\<dagger> \\<cdot>\n    !(q \\<cdot> r1 + !q \\<cdot> r2) =\n    (p \\<cdot> q + !p \\<cdot> !q) \\<cdot>\n    (p \\<cdot> x1 \\<cdot> (r1 \\<cdot> y1)\\<^sup>\\<dagger> \\<cdot> !r1 +\n     !p \\<cdot> x2 \\<cdot> (r2 \\<cdot> y2)\\<^sup>\\<dagger> \\<cdot> !r2)", "using assms(1) assms(2) cond_distr mult_assoc"], ["proof (prove)\nusing this:\n  (p \\<cdot> q + !p \\<cdot> !q) \\<cdot>\n  (q \\<cdot> x1 + !q \\<cdot> x2) \\<cdot>\n  ((q \\<cdot> r1 + !q \\<cdot> r2) \\<cdot>\n   (q \\<cdot> y1 + !q \\<cdot> y2))\\<^sup>\\<dagger> \\<cdot>\n  !(q \\<cdot> r1 + !q \\<cdot> r2) =\n  p \\<cdot> q \\<cdot> x1 \\<cdot> (r1 \\<cdot> y1)\\<^sup>\\<dagger> \\<cdot>\n  !r1 +\n  !p \\<cdot> !q \\<cdot> x2 \\<cdot> (r2 \\<cdot> y2)\\<^sup>\\<dagger> \\<cdot>\n  !r2\n  test p\n  test q\n  \\<lbrakk>test ?p; test ?q; test ?r\\<rbrakk>\n  \\<Longrightarrow> (?p \\<cdot> ?q + !?p \\<cdot> ?r) \\<cdot>\n                    (?p \\<cdot> ?x + !?p \\<cdot> ?y) =\n                    ?p \\<cdot> ?q \\<cdot> ?x + !?p \\<cdot> ?r \\<cdot> ?y\n  ?a \\<cdot> ?b \\<cdot> ?c = ?a \\<cdot> (?b \\<cdot> ?c)\n\ngoal (1 subgoal):\n 1. (p \\<cdot> q + !p \\<cdot> !q) \\<cdot>\n    (q \\<cdot> x1 + !q \\<cdot> x2) \\<cdot>\n    ((q \\<cdot> r1 + !q \\<cdot> r2) \\<cdot>\n     (q \\<cdot> y1 + !q \\<cdot> y2))\\<^sup>\\<dagger> \\<cdot>\n    !(q \\<cdot> r1 + !q \\<cdot> r2) =\n    (p \\<cdot> q + !p \\<cdot> !q) \\<cdot>\n    (p \\<cdot> x1 \\<cdot> (r1 \\<cdot> y1)\\<^sup>\\<dagger> \\<cdot> !r1 +\n     !p \\<cdot> x2 \\<cdot> (r2 \\<cdot> y2)\\<^sup>\\<dagger> \\<cdot> !r2)", "by auto"], ["proof (state)\nthis:\n  (p \\<cdot> q + !p \\<cdot> !q) \\<cdot>\n  (q \\<cdot> x1 + !q \\<cdot> x2) \\<cdot>\n  ((q \\<cdot> r1 + !q \\<cdot> r2) \\<cdot>\n   (q \\<cdot> y1 + !q \\<cdot> y2))\\<^sup>\\<dagger> \\<cdot>\n  !(q \\<cdot> r1 + !q \\<cdot> r2) =\n  (p \\<cdot> q + !p \\<cdot> !q) \\<cdot>\n  (p \\<cdot> x1 \\<cdot> (r1 \\<cdot> y1)\\<^sup>\\<dagger> \\<cdot> !r1 +\n   !p \\<cdot> x2 \\<cdot> (r2 \\<cdot> y2)\\<^sup>\\<dagger> \\<cdot> !r2)\n\ngoal:\nNo subgoals!", "qed"], ["", "theorem nested_loops: \n  assumes \"test p\" and \"test q\"\n  shows \"p \\<cdot> x \\<cdot> ((p + q) \\<cdot> (q \\<cdot> y + !q \\<cdot> x))\\<^sup>\\<dagger> \\<cdot> !(p + q) + !p = (p \\<cdot> x \\<cdot> (q \\<cdot> y)\\<^sup>\\<dagger> \\<cdot> !q)\\<^sup>\\<dagger> \\<cdot> !p\""], ["proof (prove)\ngoal (1 subgoal):\n 1. p \\<cdot> x \\<cdot>\n    ((p + q) \\<cdot> (q \\<cdot> y + !q \\<cdot> x))\\<^sup>\\<dagger> \\<cdot>\n    !(p + q) +\n    !p =\n    (p \\<cdot> x \\<cdot> (q \\<cdot> y)\\<^sup>\\<dagger> \\<cdot>\n     !q)\\<^sup>\\<dagger> \\<cdot>\n    !p", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. p \\<cdot> x \\<cdot>\n    ((p + q) \\<cdot> (q \\<cdot> y + !q \\<cdot> x))\\<^sup>\\<dagger> \\<cdot>\n    !(p + q) +\n    !p =\n    (p \\<cdot> x \\<cdot> (q \\<cdot> y)\\<^sup>\\<dagger> \\<cdot>\n     !q)\\<^sup>\\<dagger> \\<cdot>\n    !p", "have \"p \\<cdot> x \\<cdot> ((p + q) \\<cdot> (q \\<cdot> y + !q \\<cdot> x))\\<^sup>\\<dagger> \\<cdot> !(p + q) + !p = p \\<cdot> x \\<cdot> (q \\<cdot> y)\\<^sup>\\<dagger> \\<cdot> (!q \\<cdot> p \\<cdot> x \\<cdot> (q \\<cdot> y)\\<^sup>\\<dagger>)\\<^sup>\\<dagger> \\<cdot> !q \\<cdot> !p + !p\""], ["proof (prove)\ngoal (1 subgoal):\n 1. p \\<cdot> x \\<cdot>\n    ((p + q) \\<cdot> (q \\<cdot> y + !q \\<cdot> x))\\<^sup>\\<dagger> \\<cdot>\n    !(p + q) +\n    !p =\n    p \\<cdot> x \\<cdot> (q \\<cdot> y)\\<^sup>\\<dagger> \\<cdot>\n    (!q \\<cdot> p \\<cdot> x \\<cdot>\n     (q \\<cdot> y)\\<^sup>\\<dagger>)\\<^sup>\\<dagger> \\<cdot>\n    !q \\<cdot>\n    !p +\n    !p", "using assms(1) assms(2) local.dagger_denest2 local.test_distrib mult_assoc test_mult_comm_var"], ["proof (prove)\nusing this:\n  test p\n  test q\n  (?x + ?y)\\<^sup>\\<dagger> =\n  ?x\\<^sup>\\<dagger> \\<cdot> (?y \\<cdot> ?x\\<^sup>\\<dagger>)\\<^sup>\\<dagger>\n  \\<lbrakk>test ?p; test ?q\\<rbrakk>\n  \\<Longrightarrow> (?p + ?q) \\<cdot> (?q \\<cdot> ?y + !?q \\<cdot> ?x) =\n                    ?q \\<cdot> ?y + !?q \\<cdot> ?p \\<cdot> ?x\n  ?a \\<cdot> ?b \\<cdot> ?c = ?a \\<cdot> (?b \\<cdot> ?c)\n  \\<lbrakk>test ?p; test ?q\\<rbrakk>\n  \\<Longrightarrow> ?p \\<cdot> ?q = ?q \\<cdot> ?p\n\ngoal (1 subgoal):\n 1. p \\<cdot> x \\<cdot>\n    ((p + q) \\<cdot> (q \\<cdot> y + !q \\<cdot> x))\\<^sup>\\<dagger> \\<cdot>\n    !(p + q) +\n    !p =\n    p \\<cdot> x \\<cdot> (q \\<cdot> y)\\<^sup>\\<dagger> \\<cdot>\n    (!q \\<cdot> p \\<cdot> x \\<cdot>\n     (q \\<cdot> y)\\<^sup>\\<dagger>)\\<^sup>\\<dagger> \\<cdot>\n    !q \\<cdot>\n    !p +\n    !p", "by auto"], ["proof (state)\nthis:\n  p \\<cdot> x \\<cdot>\n  ((p + q) \\<cdot> (q \\<cdot> y + !q \\<cdot> x))\\<^sup>\\<dagger> \\<cdot>\n  !(p + q) +\n  !p =\n  p \\<cdot> x \\<cdot> (q \\<cdot> y)\\<^sup>\\<dagger> \\<cdot>\n  (!q \\<cdot> p \\<cdot> x \\<cdot>\n   (q \\<cdot> y)\\<^sup>\\<dagger>)\\<^sup>\\<dagger> \\<cdot>\n  !q \\<cdot>\n  !p +\n  !p\n\ngoal (1 subgoal):\n 1. p \\<cdot> x \\<cdot>\n    ((p + q) \\<cdot> (q \\<cdot> y + !q \\<cdot> x))\\<^sup>\\<dagger> \\<cdot>\n    !(p + q) +\n    !p =\n    (p \\<cdot> x \\<cdot> (q \\<cdot> y)\\<^sup>\\<dagger> \\<cdot>\n     !q)\\<^sup>\\<dagger> \\<cdot>\n    !p", "also"], ["proof (state)\nthis:\n  p \\<cdot> x \\<cdot>\n  ((p + q) \\<cdot> (q \\<cdot> y + !q \\<cdot> x))\\<^sup>\\<dagger> \\<cdot>\n  !(p + q) +\n  !p =\n  p \\<cdot> x \\<cdot> (q \\<cdot> y)\\<^sup>\\<dagger> \\<cdot>\n  (!q \\<cdot> p \\<cdot> x \\<cdot>\n   (q \\<cdot> y)\\<^sup>\\<dagger>)\\<^sup>\\<dagger> \\<cdot>\n  !q \\<cdot>\n  !p +\n  !p\n\ngoal (1 subgoal):\n 1. p \\<cdot> x \\<cdot>\n    ((p + q) \\<cdot> (q \\<cdot> y + !q \\<cdot> x))\\<^sup>\\<dagger> \\<cdot>\n    !(p + q) +\n    !p =\n    (p \\<cdot> x \\<cdot> (q \\<cdot> y)\\<^sup>\\<dagger> \\<cdot>\n     !q)\\<^sup>\\<dagger> \\<cdot>\n    !p", "have \"... =  p \\<cdot> x \\<cdot> (q \\<cdot> y)\\<^sup>\\<dagger> \\<cdot> !q \\<cdot> (p \\<cdot> x \\<cdot> (q \\<cdot> y)\\<^sup>\\<dagger> \\<cdot> !q)\\<^sup>\\<dagger>  \\<cdot> !p + !p\""], ["proof (prove)\ngoal (1 subgoal):\n 1. p \\<cdot> x \\<cdot> (q \\<cdot> y)\\<^sup>\\<dagger> \\<cdot>\n    (!q \\<cdot> p \\<cdot> x \\<cdot>\n     (q \\<cdot> y)\\<^sup>\\<dagger>)\\<^sup>\\<dagger> \\<cdot>\n    !q \\<cdot>\n    !p +\n    !p =\n    p \\<cdot> x \\<cdot> (q \\<cdot> y)\\<^sup>\\<dagger> \\<cdot> !q \\<cdot>\n    (p \\<cdot> x \\<cdot> (q \\<cdot> y)\\<^sup>\\<dagger> \\<cdot>\n     !q)\\<^sup>\\<dagger> \\<cdot>\n    !p +\n    !p", "by (metis local.dagger_slide mult_assoc)"], ["proof (state)\nthis:\n  p \\<cdot> x \\<cdot> (q \\<cdot> y)\\<^sup>\\<dagger> \\<cdot>\n  (!q \\<cdot> p \\<cdot> x \\<cdot>\n   (q \\<cdot> y)\\<^sup>\\<dagger>)\\<^sup>\\<dagger> \\<cdot>\n  !q \\<cdot>\n  !p +\n  !p =\n  p \\<cdot> x \\<cdot> (q \\<cdot> y)\\<^sup>\\<dagger> \\<cdot> !q \\<cdot>\n  (p \\<cdot> x \\<cdot> (q \\<cdot> y)\\<^sup>\\<dagger> \\<cdot>\n   !q)\\<^sup>\\<dagger> \\<cdot>\n  !p +\n  !p\n\ngoal (1 subgoal):\n 1. p \\<cdot> x \\<cdot>\n    ((p + q) \\<cdot> (q \\<cdot> y + !q \\<cdot> x))\\<^sup>\\<dagger> \\<cdot>\n    !(p + q) +\n    !p =\n    (p \\<cdot> x \\<cdot> (q \\<cdot> y)\\<^sup>\\<dagger> \\<cdot>\n     !q)\\<^sup>\\<dagger> \\<cdot>\n    !p", "finally"], ["proof (chain)\npicking this:\n  p \\<cdot> x \\<cdot>\n  ((p + q) \\<cdot> (q \\<cdot> y + !q \\<cdot> x))\\<^sup>\\<dagger> \\<cdot>\n  !(p + q) +\n  !p =\n  p \\<cdot> x \\<cdot> (q \\<cdot> y)\\<^sup>\\<dagger> \\<cdot> !q \\<cdot>\n  (p \\<cdot> x \\<cdot> (q \\<cdot> y)\\<^sup>\\<dagger> \\<cdot>\n   !q)\\<^sup>\\<dagger> \\<cdot>\n  !p +\n  !p", "show ?thesis"], ["proof (prove)\nusing this:\n  p \\<cdot> x \\<cdot>\n  ((p + q) \\<cdot> (q \\<cdot> y + !q \\<cdot> x))\\<^sup>\\<dagger> \\<cdot>\n  !(p + q) +\n  !p =\n  p \\<cdot> x \\<cdot> (q \\<cdot> y)\\<^sup>\\<dagger> \\<cdot> !q \\<cdot>\n  (p \\<cdot> x \\<cdot> (q \\<cdot> y)\\<^sup>\\<dagger> \\<cdot>\n   !q)\\<^sup>\\<dagger> \\<cdot>\n  !p +\n  !p\n\ngoal (1 subgoal):\n 1. p \\<cdot> x \\<cdot>\n    ((p + q) \\<cdot> (q \\<cdot> y + !q \\<cdot> x))\\<^sup>\\<dagger> \\<cdot>\n    !(p + q) +\n    !p =\n    (p \\<cdot> x \\<cdot> (q \\<cdot> y)\\<^sup>\\<dagger> \\<cdot>\n     !q)\\<^sup>\\<dagger> \\<cdot>\n    !p", "using add_commute"], ["proof (prove)\nusing this:\n  p \\<cdot> x \\<cdot>\n  ((p + q) \\<cdot> (q \\<cdot> y + !q \\<cdot> x))\\<^sup>\\<dagger> \\<cdot>\n  !(p + q) +\n  !p =\n  p \\<cdot> x \\<cdot> (q \\<cdot> y)\\<^sup>\\<dagger> \\<cdot> !q \\<cdot>\n  (p \\<cdot> x \\<cdot> (q \\<cdot> y)\\<^sup>\\<dagger> \\<cdot>\n   !q)\\<^sup>\\<dagger> \\<cdot>\n  !p +\n  !p\n  ?a + ?b = ?b + ?a\n\ngoal (1 subgoal):\n 1. p \\<cdot> x \\<cdot>\n    ((p + q) \\<cdot> (q \\<cdot> y + !q \\<cdot> x))\\<^sup>\\<dagger> \\<cdot>\n    !(p + q) +\n    !p =\n    (p \\<cdot> x \\<cdot> (q \\<cdot> y)\\<^sup>\\<dagger> \\<cdot>\n     !q)\\<^sup>\\<dagger> \\<cdot>\n    !p", "by force"], ["proof (state)\nthis:\n  p \\<cdot> x \\<cdot>\n  ((p + q) \\<cdot> (q \\<cdot> y + !q \\<cdot> x))\\<^sup>\\<dagger> \\<cdot>\n  !(p + q) +\n  !p =\n  (p \\<cdot> x \\<cdot> (q \\<cdot> y)\\<^sup>\\<dagger> \\<cdot>\n   !q)\\<^sup>\\<dagger> \\<cdot>\n  !p\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma postcomputation:\n  assumes \"test p\" and \"pres y (!p)\"\n  shows \"!p \\<cdot> y + p \\<cdot> (p \\<cdot> x \\<cdot> (!p \\<cdot> y + p))\\<^sup>\\<dagger> \\<cdot> !p = (p \\<cdot> x)\\<^sup>\\<dagger> \\<cdot> !p \\<cdot> y\""], ["proof (prove)\ngoal (1 subgoal):\n 1. !p \\<cdot> y +\n    p \\<cdot>\n    (p \\<cdot> x \\<cdot> (!p \\<cdot> y + p))\\<^sup>\\<dagger> \\<cdot>\n    !p =\n    (p \\<cdot> x)\\<^sup>\\<dagger> \\<cdot> !p \\<cdot> y", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. !p \\<cdot> y +\n    p \\<cdot>\n    (p \\<cdot> x \\<cdot> (!p \\<cdot> y + p))\\<^sup>\\<dagger> \\<cdot>\n    !p =\n    (p \\<cdot> x)\\<^sup>\\<dagger> \\<cdot> !p \\<cdot> y", "have \"p \\<cdot> (p \\<cdot> x \\<cdot> (!p \\<cdot> y + p))\\<^sup>\\<dagger> \\<cdot> !p = p \\<cdot> (1 + p \\<cdot> x \\<cdot> ((!p \\<cdot> y + p) \\<cdot> p \\<cdot> x)\\<^sup>\\<dagger> \\<cdot> (!p \\<cdot> y + p)) \\<cdot> !p\""], ["proof (prove)\ngoal (1 subgoal):\n 1. p \\<cdot>\n    (p \\<cdot> x \\<cdot> (!p \\<cdot> y + p))\\<^sup>\\<dagger> \\<cdot>\n    !p =\n    p \\<cdot>\n    ((1::'a) +\n     p \\<cdot> x \\<cdot>\n     ((!p \\<cdot> y + p) \\<cdot> p \\<cdot> x)\\<^sup>\\<dagger> \\<cdot>\n     (!p \\<cdot> y + p)) \\<cdot>\n    !p", "by (metis dagger_prod_unfold mult.assoc)"], ["proof (state)\nthis:\n  p \\<cdot> (p \\<cdot> x \\<cdot> (!p \\<cdot> y + p))\\<^sup>\\<dagger> \\<cdot>\n  !p =\n  p \\<cdot>\n  ((1::'a) +\n   p \\<cdot> x \\<cdot>\n   ((!p \\<cdot> y + p) \\<cdot> p \\<cdot> x)\\<^sup>\\<dagger> \\<cdot>\n   (!p \\<cdot> y + p)) \\<cdot>\n  !p\n\ngoal (1 subgoal):\n 1. !p \\<cdot> y +\n    p \\<cdot>\n    (p \\<cdot> x \\<cdot> (!p \\<cdot> y + p))\\<^sup>\\<dagger> \\<cdot>\n    !p =\n    (p \\<cdot> x)\\<^sup>\\<dagger> \\<cdot> !p \\<cdot> y", "also"], ["proof (state)\nthis:\n  p \\<cdot> (p \\<cdot> x \\<cdot> (!p \\<cdot> y + p))\\<^sup>\\<dagger> \\<cdot>\n  !p =\n  p \\<cdot>\n  ((1::'a) +\n   p \\<cdot> x \\<cdot>\n   ((!p \\<cdot> y + p) \\<cdot> p \\<cdot> x)\\<^sup>\\<dagger> \\<cdot>\n   (!p \\<cdot> y + p)) \\<cdot>\n  !p\n\ngoal (1 subgoal):\n 1. !p \\<cdot> y +\n    p \\<cdot>\n    (p \\<cdot> x \\<cdot> (!p \\<cdot> y + p))\\<^sup>\\<dagger> \\<cdot>\n    !p =\n    (p \\<cdot> x)\\<^sup>\\<dagger> \\<cdot> !p \\<cdot> y", "have \"... = (p + p \\<cdot> p \\<cdot> x \\<cdot> ((!p \\<cdot> y + p) \\<cdot> p \\<cdot> x)\\<^sup>\\<dagger> \\<cdot> (!p \\<cdot> y + p)) \\<cdot> !p\""], ["proof (prove)\ngoal (1 subgoal):\n 1. p \\<cdot>\n    ((1::'a) +\n     p \\<cdot> x \\<cdot>\n     ((!p \\<cdot> y + p) \\<cdot> p \\<cdot> x)\\<^sup>\\<dagger> \\<cdot>\n     (!p \\<cdot> y + p)) \\<cdot>\n    !p =\n    (p +\n     p \\<cdot> p \\<cdot> x \\<cdot>\n     ((!p \\<cdot> y + p) \\<cdot> p \\<cdot> x)\\<^sup>\\<dagger> \\<cdot>\n     (!p \\<cdot> y + p)) \\<cdot>\n    !p", "using assms(1) local.mult_oner local.n_left_distrib_var mult_assoc"], ["proof (prove)\nusing this:\n  test p\n  ?x \\<cdot> (1::'a) = ?x\n  test ?p \\<Longrightarrow>\n  ?p \\<cdot> (?x + ?y) = ?p \\<cdot> ?x + ?p \\<cdot> ?y\n  ?a \\<cdot> ?b \\<cdot> ?c = ?a \\<cdot> (?b \\<cdot> ?c)\n\ngoal (1 subgoal):\n 1. p \\<cdot>\n    ((1::'a) +\n     p \\<cdot> x \\<cdot>\n     ((!p \\<cdot> y + p) \\<cdot> p \\<cdot> x)\\<^sup>\\<dagger> \\<cdot>\n     (!p \\<cdot> y + p)) \\<cdot>\n    !p =\n    (p +\n     p \\<cdot> p \\<cdot> x \\<cdot>\n     ((!p \\<cdot> y + p) \\<cdot> p \\<cdot> x)\\<^sup>\\<dagger> \\<cdot>\n     (!p \\<cdot> y + p)) \\<cdot>\n    !p", "by presburger"], ["proof (state)\nthis:\n  p \\<cdot>\n  ((1::'a) +\n   p \\<cdot> x \\<cdot>\n   ((!p \\<cdot> y + p) \\<cdot> p \\<cdot> x)\\<^sup>\\<dagger> \\<cdot>\n   (!p \\<cdot> y + p)) \\<cdot>\n  !p =\n  (p +\n   p \\<cdot> p \\<cdot> x \\<cdot>\n   ((!p \\<cdot> y + p) \\<cdot> p \\<cdot> x)\\<^sup>\\<dagger> \\<cdot>\n   (!p \\<cdot> y + p)) \\<cdot>\n  !p\n\ngoal (1 subgoal):\n 1. !p \\<cdot> y +\n    p \\<cdot>\n    (p \\<cdot> x \\<cdot> (!p \\<cdot> y + p))\\<^sup>\\<dagger> \\<cdot>\n    !p =\n    (p \\<cdot> x)\\<^sup>\\<dagger> \\<cdot> !p \\<cdot> y", "also"], ["proof (state)\nthis:\n  p \\<cdot>\n  ((1::'a) +\n   p \\<cdot> x \\<cdot>\n   ((!p \\<cdot> y + p) \\<cdot> p \\<cdot> x)\\<^sup>\\<dagger> \\<cdot>\n   (!p \\<cdot> y + p)) \\<cdot>\n  !p =\n  (p +\n   p \\<cdot> p \\<cdot> x \\<cdot>\n   ((!p \\<cdot> y + p) \\<cdot> p \\<cdot> x)\\<^sup>\\<dagger> \\<cdot>\n   (!p \\<cdot> y + p)) \\<cdot>\n  !p\n\ngoal (1 subgoal):\n 1. !p \\<cdot> y +\n    p \\<cdot>\n    (p \\<cdot> x \\<cdot> (!p \\<cdot> y + p))\\<^sup>\\<dagger> \\<cdot>\n    !p =\n    (p \\<cdot> x)\\<^sup>\\<dagger> \\<cdot> !p \\<cdot> y", "have \"... = p \\<cdot> x \\<cdot> (!p \\<cdot> y \\<cdot> p \\<cdot> x + p \\<cdot> x)\\<^sup>\\<dagger> \\<cdot> !p \\<cdot> y \\<cdot> !p\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (p +\n     p \\<cdot> p \\<cdot> x \\<cdot>\n     ((!p \\<cdot> y + p) \\<cdot> p \\<cdot> x)\\<^sup>\\<dagger> \\<cdot>\n     (!p \\<cdot> y + p)) \\<cdot>\n    !p =\n    p \\<cdot> x \\<cdot>\n    (!p \\<cdot> y \\<cdot> p \\<cdot> x + p \\<cdot> x)\\<^sup>\\<dagger> \\<cdot>\n    !p \\<cdot>\n    y \\<cdot>\n    !p", "by (simp add: assms(1) mult_assoc)"], ["proof (state)\nthis:\n  (p +\n   p \\<cdot> p \\<cdot> x \\<cdot>\n   ((!p \\<cdot> y + p) \\<cdot> p \\<cdot> x)\\<^sup>\\<dagger> \\<cdot>\n   (!p \\<cdot> y + p)) \\<cdot>\n  !p =\n  p \\<cdot> x \\<cdot>\n  (!p \\<cdot> y \\<cdot> p \\<cdot> x + p \\<cdot> x)\\<^sup>\\<dagger> \\<cdot>\n  !p \\<cdot>\n  y \\<cdot>\n  !p\n\ngoal (1 subgoal):\n 1. !p \\<cdot> y +\n    p \\<cdot>\n    (p \\<cdot> x \\<cdot> (!p \\<cdot> y + p))\\<^sup>\\<dagger> \\<cdot>\n    !p =\n    (p \\<cdot> x)\\<^sup>\\<dagger> \\<cdot> !p \\<cdot> y", "also"], ["proof (state)\nthis:\n  (p +\n   p \\<cdot> p \\<cdot> x \\<cdot>\n   ((!p \\<cdot> y + p) \\<cdot> p \\<cdot> x)\\<^sup>\\<dagger> \\<cdot>\n   (!p \\<cdot> y + p)) \\<cdot>\n  !p =\n  p \\<cdot> x \\<cdot>\n  (!p \\<cdot> y \\<cdot> p \\<cdot> x + p \\<cdot> x)\\<^sup>\\<dagger> \\<cdot>\n  !p \\<cdot>\n  y \\<cdot>\n  !p\n\ngoal (1 subgoal):\n 1. !p \\<cdot> y +\n    p \\<cdot>\n    (p \\<cdot> x \\<cdot> (!p \\<cdot> y + p))\\<^sup>\\<dagger> \\<cdot>\n    !p =\n    (p \\<cdot> x)\\<^sup>\\<dagger> \\<cdot> !p \\<cdot> y", "have \"... = p \\<cdot> x \\<cdot> (!p \\<cdot> y \\<cdot> 0 + p \\<cdot> x)\\<^sup>\\<dagger> \\<cdot> !p \\<cdot> y\""], ["proof (prove)\ngoal (1 subgoal):\n 1. p \\<cdot> x \\<cdot>\n    (!p \\<cdot> y \\<cdot> p \\<cdot> x + p \\<cdot> x)\\<^sup>\\<dagger> \\<cdot>\n    !p \\<cdot>\n    y \\<cdot>\n    !p =\n    p \\<cdot> x \\<cdot>\n    (!p \\<cdot> y \\<cdot> (0::'a) + p \\<cdot> x)\\<^sup>\\<dagger> \\<cdot>\n    !p \\<cdot>\n    y", "by (metis assms(1) assms(2) local.annil local.test_comp_mult1 mult_assoc)"], ["proof (state)\nthis:\n  p \\<cdot> x \\<cdot>\n  (!p \\<cdot> y \\<cdot> p \\<cdot> x + p \\<cdot> x)\\<^sup>\\<dagger> \\<cdot>\n  !p \\<cdot>\n  y \\<cdot>\n  !p =\n  p \\<cdot> x \\<cdot>\n  (!p \\<cdot> y \\<cdot> (0::'a) + p \\<cdot> x)\\<^sup>\\<dagger> \\<cdot>\n  !p \\<cdot>\n  y\n\ngoal (1 subgoal):\n 1. !p \\<cdot> y +\n    p \\<cdot>\n    (p \\<cdot> x \\<cdot> (!p \\<cdot> y + p))\\<^sup>\\<dagger> \\<cdot>\n    !p =\n    (p \\<cdot> x)\\<^sup>\\<dagger> \\<cdot> !p \\<cdot> y", "also"], ["proof (state)\nthis:\n  p \\<cdot> x \\<cdot>\n  (!p \\<cdot> y \\<cdot> p \\<cdot> x + p \\<cdot> x)\\<^sup>\\<dagger> \\<cdot>\n  !p \\<cdot>\n  y \\<cdot>\n  !p =\n  p \\<cdot> x \\<cdot>\n  (!p \\<cdot> y \\<cdot> (0::'a) + p \\<cdot> x)\\<^sup>\\<dagger> \\<cdot>\n  !p \\<cdot>\n  y\n\ngoal (1 subgoal):\n 1. !p \\<cdot> y +\n    p \\<cdot>\n    (p \\<cdot> x \\<cdot> (!p \\<cdot> y + p))\\<^sup>\\<dagger> \\<cdot>\n    !p =\n    (p \\<cdot> x)\\<^sup>\\<dagger> \\<cdot> !p \\<cdot> y", "have \"... = p \\<cdot> x  \\<cdot> (p  \\<cdot> x)\\<^sup>\\<dagger> \\<cdot> (!p \\<cdot> y \\<cdot> 0 \\<cdot> (p \\<cdot> x)\\<^sup>\\<dagger>)\\<^sup>\\<dagger> \\<cdot> !p \\<cdot> y\""], ["proof (prove)\ngoal (1 subgoal):\n 1. p \\<cdot> x \\<cdot>\n    (!p \\<cdot> y \\<cdot> (0::'a) + p \\<cdot> x)\\<^sup>\\<dagger> \\<cdot>\n    !p \\<cdot>\n    y =\n    p \\<cdot> x \\<cdot> (p \\<cdot> x)\\<^sup>\\<dagger> \\<cdot>\n    (!p \\<cdot> y \\<cdot> (0::'a) \\<cdot>\n     (p \\<cdot> x)\\<^sup>\\<dagger>)\\<^sup>\\<dagger> \\<cdot>\n    !p \\<cdot>\n    y", "by (metis mult.assoc add.commute dagger_denest2)"], ["proof (state)\nthis:\n  p \\<cdot> x \\<cdot>\n  (!p \\<cdot> y \\<cdot> (0::'a) + p \\<cdot> x)\\<^sup>\\<dagger> \\<cdot>\n  !p \\<cdot>\n  y =\n  p \\<cdot> x \\<cdot> (p \\<cdot> x)\\<^sup>\\<dagger> \\<cdot>\n  (!p \\<cdot> y \\<cdot> (0::'a) \\<cdot>\n   (p \\<cdot> x)\\<^sup>\\<dagger>)\\<^sup>\\<dagger> \\<cdot>\n  !p \\<cdot>\n  y\n\ngoal (1 subgoal):\n 1. !p \\<cdot> y +\n    p \\<cdot>\n    (p \\<cdot> x \\<cdot> (!p \\<cdot> y + p))\\<^sup>\\<dagger> \\<cdot>\n    !p =\n    (p \\<cdot> x)\\<^sup>\\<dagger> \\<cdot> !p \\<cdot> y", "finally"], ["proof (chain)\npicking this:\n  p \\<cdot> (p \\<cdot> x \\<cdot> (!p \\<cdot> y + p))\\<^sup>\\<dagger> \\<cdot>\n  !p =\n  p \\<cdot> x \\<cdot> (p \\<cdot> x)\\<^sup>\\<dagger> \\<cdot>\n  (!p \\<cdot> y \\<cdot> (0::'a) \\<cdot>\n   (p \\<cdot> x)\\<^sup>\\<dagger>)\\<^sup>\\<dagger> \\<cdot>\n  !p \\<cdot>\n  y", "have \"p \\<cdot> (p \\<cdot> x \\<cdot> (!p \\<cdot> y + p))\\<^sup>\\<dagger> \\<cdot> !p = p \\<cdot> x \\<cdot> (p \\<cdot> x)\\<^sup>\\<dagger> \\<cdot> !p \\<cdot> y\""], ["proof (prove)\nusing this:\n  p \\<cdot> (p \\<cdot> x \\<cdot> (!p \\<cdot> y + p))\\<^sup>\\<dagger> \\<cdot>\n  !p =\n  p \\<cdot> x \\<cdot> (p \\<cdot> x)\\<^sup>\\<dagger> \\<cdot>\n  (!p \\<cdot> y \\<cdot> (0::'a) \\<cdot>\n   (p \\<cdot> x)\\<^sup>\\<dagger>)\\<^sup>\\<dagger> \\<cdot>\n  !p \\<cdot>\n  y\n\ngoal (1 subgoal):\n 1. p \\<cdot>\n    (p \\<cdot> x \\<cdot> (!p \\<cdot> y + p))\\<^sup>\\<dagger> \\<cdot>\n    !p =\n    p \\<cdot> x \\<cdot> (p \\<cdot> x)\\<^sup>\\<dagger> \\<cdot> !p \\<cdot> y", "by (metis local.add_zeror local.annil local.dagger_prod_unfold local.dagger_slide local.mult_oner mult_assoc)"], ["proof (state)\nthis:\n  p \\<cdot> (p \\<cdot> x \\<cdot> (!p \\<cdot> y + p))\\<^sup>\\<dagger> \\<cdot>\n  !p =\n  p \\<cdot> x \\<cdot> (p \\<cdot> x)\\<^sup>\\<dagger> \\<cdot> !p \\<cdot> y\n\ngoal (1 subgoal):\n 1. !p \\<cdot> y +\n    p \\<cdot>\n    (p \\<cdot> x \\<cdot> (!p \\<cdot> y + p))\\<^sup>\\<dagger> \\<cdot>\n    !p =\n    (p \\<cdot> x)\\<^sup>\\<dagger> \\<cdot> !p \\<cdot> y", "thus ?thesis"], ["proof (prove)\nusing this:\n  p \\<cdot> (p \\<cdot> x \\<cdot> (!p \\<cdot> y + p))\\<^sup>\\<dagger> \\<cdot>\n  !p =\n  p \\<cdot> x \\<cdot> (p \\<cdot> x)\\<^sup>\\<dagger> \\<cdot> !p \\<cdot> y\n\ngoal (1 subgoal):\n 1. !p \\<cdot> y +\n    p \\<cdot>\n    (p \\<cdot> x \\<cdot> (!p \\<cdot> y + p))\\<^sup>\\<dagger> \\<cdot>\n    !p =\n    (p \\<cdot> x)\\<^sup>\\<dagger> \\<cdot> !p \\<cdot> y", "by (metis dagger_unfoldl_distr mult.assoc)"], ["proof (state)\nthis:\n  !p \\<cdot> y +\n  p \\<cdot> (p \\<cdot> x \\<cdot> (!p \\<cdot> y + p))\\<^sup>\\<dagger> \\<cdot>\n  !p =\n  (p \\<cdot> x)\\<^sup>\\<dagger> \\<cdot> !p \\<cdot> y\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma composition_helper: \n  assumes \"test p\" and \"test q\"\n  and \"pres x p\"\n  shows \"p \\<cdot> (q \\<cdot> x)\\<^sup>\\<dagger> \\<cdot> !q \\<cdot> p = p \\<cdot> (q \\<cdot> x)\\<^sup>\\<dagger> \\<cdot> !q\""], ["proof (prove)\ngoal (1 subgoal):\n 1. p \\<cdot> (q \\<cdot> x)\\<^sup>\\<dagger> \\<cdot> !q \\<cdot> p =\n    p \\<cdot> (q \\<cdot> x)\\<^sup>\\<dagger> \\<cdot> !q", "proof (rule antisym)"], ["proof (state)\ngoal (2 subgoals):\n 1. p \\<cdot> (q \\<cdot> x)\\<^sup>\\<dagger> \\<cdot> !q \\<cdot> p\n    \\<le> p \\<cdot> (q \\<cdot> x)\\<^sup>\\<dagger> \\<cdot> !q\n 2. p \\<cdot> (q \\<cdot> x)\\<^sup>\\<dagger> \\<cdot> !q\n    \\<le> p \\<cdot> (q \\<cdot> x)\\<^sup>\\<dagger> \\<cdot> !q \\<cdot> p", "show \"p \\<cdot> (q \\<cdot> x)\\<^sup>\\<dagger> \\<cdot> !q \\<cdot> p \\<le> p \\<cdot> (q \\<cdot> x)\\<^sup>\\<dagger> \\<cdot> !q\""], ["proof (prove)\ngoal (1 subgoal):\n 1. p \\<cdot> (q \\<cdot> x)\\<^sup>\\<dagger> \\<cdot> !q \\<cdot> p\n    \\<le> p \\<cdot> (q \\<cdot> x)\\<^sup>\\<dagger> \\<cdot> !q", "by (simp add: assms(1) local.test_restrictr)"], ["proof (state)\nthis:\n  p \\<cdot> (q \\<cdot> x)\\<^sup>\\<dagger> \\<cdot> !q \\<cdot> p\n  \\<le> p \\<cdot> (q \\<cdot> x)\\<^sup>\\<dagger> \\<cdot> !q\n\ngoal (1 subgoal):\n 1. p \\<cdot> (q \\<cdot> x)\\<^sup>\\<dagger> \\<cdot> !q\n    \\<le> p \\<cdot> (q \\<cdot> x)\\<^sup>\\<dagger> \\<cdot> !q \\<cdot> p", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. p \\<cdot> (q \\<cdot> x)\\<^sup>\\<dagger> \\<cdot> !q\n    \\<le> p \\<cdot> (q \\<cdot> x)\\<^sup>\\<dagger> \\<cdot> !q \\<cdot> p", "have \"p \\<cdot> q \\<cdot> x \\<le> q \\<cdot> x \\<cdot> p\""], ["proof (prove)\ngoal (1 subgoal):\n 1. p \\<cdot> q \\<cdot> x \\<le> q \\<cdot> x \\<cdot> p", "by (metis assms(1) assms(2) assms(3) local.test_kat_2 mult_assoc test_pres2)"], ["proof (state)\nthis:\n  p \\<cdot> q \\<cdot> x \\<le> q \\<cdot> x \\<cdot> p\n\ngoal (1 subgoal):\n 1. p \\<cdot> (q \\<cdot> x)\\<^sup>\\<dagger> \\<cdot> !q\n    \\<le> p \\<cdot> (q \\<cdot> x)\\<^sup>\\<dagger> \\<cdot> !q \\<cdot> p", "hence \"p \\<cdot> (q \\<cdot> x)\\<^sup>\\<dagger> \\<le> (q \\<cdot> x)\\<^sup>\\<dagger> \\<cdot> p\""], ["proof (prove)\nusing this:\n  p \\<cdot> q \\<cdot> x \\<le> q \\<cdot> x \\<cdot> p\n\ngoal (1 subgoal):\n 1. p \\<cdot> (q \\<cdot> x)\\<^sup>\\<dagger>\n    \\<le> (q \\<cdot> x)\\<^sup>\\<dagger> \\<cdot> p", "by (simp add: local.dagger_simr mult_assoc)"], ["proof (state)\nthis:\n  p \\<cdot> (q \\<cdot> x)\\<^sup>\\<dagger>\n  \\<le> (q \\<cdot> x)\\<^sup>\\<dagger> \\<cdot> p\n\ngoal (1 subgoal):\n 1. p \\<cdot> (q \\<cdot> x)\\<^sup>\\<dagger> \\<cdot> !q\n    \\<le> p \\<cdot> (q \\<cdot> x)\\<^sup>\\<dagger> \\<cdot> !q \\<cdot> p", "thus \"p \\<cdot> (q \\<cdot> x)\\<^sup>\\<dagger> \\<cdot> !q \\<le> p \\<cdot> (q \\<cdot> x)\\<^sup>\\<dagger> \\<cdot> !q \\<cdot> p\""], ["proof (prove)\nusing this:\n  p \\<cdot> (q \\<cdot> x)\\<^sup>\\<dagger>\n  \\<le> (q \\<cdot> x)\\<^sup>\\<dagger> \\<cdot> p\n\ngoal (1 subgoal):\n 1. p \\<cdot> (q \\<cdot> x)\\<^sup>\\<dagger> \\<cdot> !q\n    \\<le> p \\<cdot> (q \\<cdot> x)\\<^sup>\\<dagger> \\<cdot> !q \\<cdot> p", "by (metis assms(1) assms(2) local.eq_iff local.test_comp_closed local.test_kat_2 local.test_mult_comm_var mult_assoc)"], ["proof (state)\nthis:\n  p \\<cdot> (q \\<cdot> x)\\<^sup>\\<dagger> \\<cdot> !q\n  \\<le> p \\<cdot> (q \\<cdot> x)\\<^sup>\\<dagger> \\<cdot> !q \\<cdot> p\n\ngoal:\nNo subgoals!", "qed"], ["", "theorem composition:\n  assumes \"test p\" and \"test q\" \n  and \"pres y p\" and \"pres y (!p)\"\n  shows \"(p \\<cdot> x)\\<^sup>\\<dagger> \\<cdot> !p \\<cdot> (q \\<cdot> y)\\<^sup>\\<dagger> \\<cdot> !q = !p \\<cdot> (q \\<cdot> y)\\<^sup>\\<dagger> \\<cdot> !q + p \\<cdot> (p \\<cdot> x \\<cdot> (!p \\<cdot> (q \\<cdot> y)\\<^sup>\\<dagger> \\<cdot> !q + p))\\<^sup>\\<dagger> \\<cdot> !p\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (p \\<cdot> x)\\<^sup>\\<dagger> \\<cdot> !p \\<cdot>\n    (q \\<cdot> y)\\<^sup>\\<dagger> \\<cdot>\n    !q =\n    !p \\<cdot> (q \\<cdot> y)\\<^sup>\\<dagger> \\<cdot> !q +\n    p \\<cdot>\n    (p \\<cdot> x \\<cdot>\n     (!p \\<cdot> (q \\<cdot> y)\\<^sup>\\<dagger> \\<cdot> !q +\n      p))\\<^sup>\\<dagger> \\<cdot>\n    !p", "by (metis assms(1) assms(2) assms(4) composition_helper local.test_comp_closed mult_assoc postcomputation)"], ["", "end"], ["", "text \\<open>\n  Kleene algebras with tests form pre-Conway algebras, therefore the transformation theorem is valid for KAT as well.\n\\<close>"], ["", "sublocale kat \\<subseteq> pre_conway star"], ["proof (prove)\ngoal (1 subgoal):\n 1. class.pre_conway star (+) (\\<cdot>) (1::'a) (\\<le>) (<)", ".."], ["", "text \\<open>\n  Demonic refinement algebras form pre-Conway algebras, therefore the transformation theorem is valid for DRA as well.\n\\<close>"], ["", "sublocale drat \\<subseteq> pre_conway strong_iteration"], ["proof (prove)\ngoal (1 subgoal):\n 1. class.pre_conway strong_iteration (+) (\\<cdot>) (1::'a) (\\<le>) (<)", "apply standard"], ["proof (prove)\ngoal (3 subgoals):\n 1. \\<And>x y.\n       (x + y)\\<^sup>\\<infinity> =\n       (x\\<^sup>\\<infinity> \\<cdot> y)\\<^sup>\\<infinity> \\<cdot>\n       x\\<^sup>\\<infinity>\n 2. \\<And>x y.\n       (1::'a) + x \\<cdot> (y \\<cdot> x)\\<^sup>\\<infinity> \\<cdot> y =\n       (x \\<cdot> y)\\<^sup>\\<infinity>\n 3. \\<And>z x y.\n       z \\<cdot> x \\<le> y \\<cdot> z \\<Longrightarrow>\n       z \\<cdot> x\\<^sup>\\<infinity> \\<le> y\\<^sup>\\<infinity> \\<cdot> z", "apply (simp add: local.iteration_denest local.iteration_slide)"], ["proof (prove)\ngoal (2 subgoals):\n 1. \\<And>x y.\n       (1::'a) + x \\<cdot> (y \\<cdot> x)\\<^sup>\\<infinity> \\<cdot> y =\n       (x \\<cdot> y)\\<^sup>\\<infinity>\n 2. \\<And>z x y.\n       z \\<cdot> x \\<le> y \\<cdot> z \\<Longrightarrow>\n       z \\<cdot> x\\<^sup>\\<infinity> \\<le> y\\<^sup>\\<infinity> \\<cdot> z", "apply (metis local.iteration_prod_unfold)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>z x y.\n       z \\<cdot> x \\<le> y \\<cdot> z \\<Longrightarrow>\n       z \\<cdot> x\\<^sup>\\<infinity> \\<le> y\\<^sup>\\<infinity> \\<cdot> z", "by (simp add: local.iteration_sim)"], ["", "text \\<open>\n  We do not currently consider an expansion of probabilistic Kleene algebra.\n\\<close>"], ["", "end"]]}