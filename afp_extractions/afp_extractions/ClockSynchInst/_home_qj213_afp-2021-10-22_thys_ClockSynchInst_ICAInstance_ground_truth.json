{"file_name": "/home/qj213/afp-2021-10-22/thys/ClockSynchInst/ICAInstance.thy", "working_directory": "/home/qj213/afp-2021-10-22/thys/ClockSynchInst", "problem_names": ["lemma trans_inv': \n\"(\\<Sum> l\\<in>{..<np'}. fiX (\\<lambda> y. f y + x) p l) = \n        (\\<Sum> l\\<in>{..<np'}. fiX f p l) + real np' * x\"", "theorem trans_inv: \n\"\\<forall> p f x . cfni p (\\<lambda> y. f y + x) = cfni p f + x\"", "lemma finitC:\n  \"C \\<subseteq> PR \\<Longrightarrow> finite C\"", "lemma finitnpC:\n  \"finite (PR - C)\"", "lemma sum_abs_triangle_ineq:\n\"finite S \\<Longrightarrow>\n  \\<bar>\\<Sum>l\\<in>S. (f::'a \\<Rightarrow> 'b::linordered_idom) l\\<bar> <= (\\<Sum>l\\<in>S. \\<bar>f l\\<bar>)\"\n  (is \"... \\<Longrightarrow> ?P S\")", "lemma sum_le:\n  \"\\<lbrakk>finite S ; \\<forall> r\\<in>S. f r <= b \\<rbrakk>\n  \\<Longrightarrow>\n  (\\<Sum>l\\<in>S. f l) <= real (card S) * b\"\n  (is \"\\<lbrakk> finite S ; \\<forall> r\\<in>S. f r <= b \\<rbrakk> \\<Longrightarrow> ?P S\")", "lemma sum_np_eq:\nassumes \n  hC: \"C \\<subseteq> PR\"\nshows \n  \"(\\<Sum>l\\<in>{..<np}. f l) = (\\<Sum>l\\<in>C. f l) + (\\<Sum>l\\<in>({..<np}-C). f l)\"", "lemma abs_sum_np_ineq:\nassumes \n  hC: \"C \\<subseteq> PR\"\nshows \n  \"\\<bar>(\\<Sum>l\\<in>{..<np}. (f::nat \\<Rightarrow> real) l)\\<bar> <=  \n     (\\<Sum>l\\<in>C. \\<bar>f l\\<bar>) + (\\<Sum>l\\<in>({..<np}-C). \\<bar>f l\\<bar>)\"\n    (is \"?abs_sum <= ?sumC + ?sumnpC\")", "lemma fiX_ubound:\n  \"fiX f p l <= f p + \\<Delta>\"", "lemma fiX_lbound:\n  \"f p - \\<Delta> <= fiX f p l\"", "lemma abs_fiX_bound: \"\\<bar>fiX f p l - f p \\<bar> <= \\<Delta>\"", "lemma abs_dif_fiX_bound:\nassumes\n  hbx: \"\\<forall> l\\<in>C. \\<bar>f l - g l\\<bar> <= x\" and\n  hby: \"\\<forall> l\\<in>C. \\<forall> m\\<in>C. \\<bar>f l - f m\\<bar> <= y\" and\n  hpC: \"p\\<in>C\" and\n  hqC: \"q\\<in>C\" \nshows\n  \"\\<bar>fiX f p r - fiX g q r\\<bar> <= 2 * \\<Delta> + x + y\"", "lemma abs_dif_fiX_bound_C_aux1:\nassumes \n  hbx: \"\\<forall> l\\<in>C. \\<bar>f l - g l\\<bar> <= x\" and\n  hby1: \"\\<forall> l\\<in>C. \\<forall> m\\<in>C. \\<bar>f l - f m\\<bar> <= y\" and\n  hby2: \"\\<forall> l\\<in>C. \\<forall> m\\<in>C. \\<bar>g l - g m\\<bar> <= y\" and\n  hpC: \"p\\<in>C\" and\n  hqC: \"q\\<in>C\" and\n  hrC: \"r\\<in>C\" \nshows\n  \"\\<bar>fiX f p r - fiX g q r\\<bar> <= x + y\"", "lemma abs_dif_fiX_bound_C_aux2:\nassumes \n  hbx: \"\\<forall> l\\<in>C. \\<bar>f l - g l\\<bar> <= x\" and\n  hby1: \"\\<forall> l\\<in>C. \\<forall> m\\<in>C. \\<bar>f l - f m\\<bar> <= y\" and\n  hby2: \"\\<forall> l\\<in>C. \\<forall> m\\<in>C. \\<bar>g l - g m\\<bar> <= y\" and\n  hpC: \"p\\<in>C\" and\n  hqC: \"q\\<in>C\" and\n  hrC: \"r\\<in>C\" \nshows\n  \"y <= \\<Delta> \\<longrightarrow> \\<bar>fiX f p r - fiX g q r\\<bar> <= x\"", "lemma abs_dif_fiX_bound_C:\nassumes \n  hbx: \"\\<forall> l\\<in>C. \\<bar>f l - g l\\<bar> <= x\" and\n  hby1: \"\\<forall> l\\<in>C. \\<forall> m\\<in>C. \\<bar>f l - f m\\<bar> <= y\" and\n  hby2: \"\\<forall> l\\<in>C. \\<forall> m\\<in>C. \\<bar>g l - g m\\<bar> <= y\" and\n  hpC: \"p\\<in>C\" and\n  hqC: \"q\\<in>C\" and\n  hrC: \"r\\<in>C\" \nshows\n  \"\\<bar>fiX f p r - fiX g q r\\<bar> <= \n                     x + (if (y <= \\<Delta>) then 0 else y)\"", "theorem prec_enh:\nassumes \n  hC: \"C \\<subseteq> PR\" and\n  hbx: \"\\<forall> l\\<in>C. \\<bar>f l - g l\\<bar> <= x\" and\n  hby1: \"\\<forall> l\\<in>C. \\<forall> m\\<in>C. \\<bar>f l - f m\\<bar> <= y\" and\n  hby2: \"\\<forall> l\\<in>C. \\<forall> m\\<in>C. \\<bar>g l - g m\\<bar> <= y\" and\n  hpC: \"p\\<in>C\" and\n  hqC: \"q\\<in>C\" \nshows \"\\<bar> cfni p f - cfni q g \\<bar> <= \n  (real (card C) * (x + (if (y <= \\<Delta>) then 0 else y)) +\n    real (card ({..<np} - C)) * (2 * \\<Delta> + x + y)) / real np\"\n       (is \"\\<bar> ?dif_div_np \\<bar> <= ?B\")", "lemma sum_div_card:\n\"(\\<Sum>l\\<in>{..<n::nat}. f l) + q * real n= \n  (\\<Sum>l\\<in>{..<n}. f l + q )\"\n  (is \"?Sl n = ?Sr n\")", "lemma bound_aux_C:\nassumes\n  hby: \"\\<forall> l\\<in>C. \\<forall> m\\<in>C. \\<bar>f l - f m\\<bar> <= x\" and\n  hpC: \"p\\<in>C\" and\n  hqC: \"q\\<in>C\" and\n  hrC: \"r\\<in>C\" \nshows\n  \"\\<bar>fiX f p r - f q\\<bar> <= x\"", "lemma bound_aux:\nassumes\n  hby: \"\\<forall> l\\<in>C. \\<forall> m\\<in>C. \\<bar>f l - f m\\<bar> <= x\" and\n  hpC: \"p\\<in>C\" and\n  hqC: \"q\\<in>C\" \nshows\n  \"\\<bar>fiX f p r - f q\\<bar> <= x + \\<Delta>\"", "lemma accur_pres:\nassumes \n  hC: \"C \\<subseteq> PR\" and\n  hby: \"\\<forall> l\\<in>C. \\<forall> m\\<in>C. \\<bar>f l - f m\\<bar> <= x\" and\n  hpC: \"p\\<in>C\" and\n  hqC: \"q\\<in>C\" \nshows \"\\<bar> cfni p f - f q \\<bar> <= \n  (real (card C) * x + real (card ({..<np} - C)) * (x + \\<Delta>))/\n                  real np\"\n  (is \"?abs1 <= (?bC + ?bnpC)/real np\")"], "translations": [["", "lemma trans_inv': \n\"(\\<Sum> l\\<in>{..<np'}. fiX (\\<lambda> y. f y + x) p l) = \n        (\\<Sum> l\\<in>{..<np'}. fiX f p l) + real np' * x\""], ["proof (prove)\ngoal (1 subgoal):\n 1. sum (fiX (\\<lambda>y. f y + x) p) {..<np'} =\n    sum (fiX f p) {..<np'} + real np' * x", "apply (induct_tac np')"], ["proof (prove)\ngoal (2 subgoals):\n 1. sum (fiX (\\<lambda>y. f y + x) p) {..<0} =\n    sum (fiX f p) {..<0} + real 0 * x\n 2. \\<And>n.\n       sum (fiX (\\<lambda>y. f y + x) p) {..<n} =\n       sum (fiX f p) {..<n} + real n * x \\<Longrightarrow>\n       sum (fiX (\\<lambda>y. f y + x) p) {..<Suc n} =\n       sum (fiX f p) {..<Suc n} + real (Suc n) * x", "apply (auto simp add: cfni_def  fiX_def of_nat_Suc \n       distrib_right lessThan_Suc)"], ["proof (prove)\ngoal:\nNo subgoals!", "done"], ["", "theorem trans_inv: \n\"\\<forall> p f x . cfni p (\\<lambda> y. f y + x) = cfni p f + x\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>p f x. cfni p (\\<lambda>y. f y + x) = cfni p f + x", "apply (auto simp add: cfni_def trans_inv' distrib_right \n       divide_inverse  constants_ax)"], ["proof (prove)\ngoal:\nNo subgoals!", "done"], ["", "subsection \\<open>Precision Enhancement property\\<close>"], ["", "text \\<open>An informal proof of this theorem can be found in\n\\cite{shankar92mechanical}\\<close>"], ["", "subsubsection \\<open>Auxiliary lemmas\\<close>"], ["", "lemma finitC:\n  \"C \\<subseteq> PR \\<Longrightarrow> finite C\""], ["proof (prove)\ngoal (1 subgoal):\n 1. C \\<subseteq> PR \\<Longrightarrow> finite C", "proof-"], ["proof (state)\ngoal (1 subgoal):\n 1. C \\<subseteq> PR \\<Longrightarrow> finite C", "assume \"C \\<subseteq> PR\""], ["proof (state)\nthis:\n  C \\<subseteq> PR\n\ngoal (1 subgoal):\n 1. C \\<subseteq> PR \\<Longrightarrow> finite C", "thus ?thesis"], ["proof (prove)\nusing this:\n  C \\<subseteq> PR\n\ngoal (1 subgoal):\n 1. finite C", "using finite_subset"], ["proof (prove)\nusing this:\n  C \\<subseteq> PR\n  \\<lbrakk>?A \\<subseteq> ?B; finite ?B\\<rbrakk> \\<Longrightarrow> finite ?A\n\ngoal (1 subgoal):\n 1. finite C", "by auto"], ["proof (state)\nthis:\n  finite C\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma finitnpC:\n  \"finite (PR - C)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. finite (PR - C)", "proof-"], ["proof (state)\ngoal (1 subgoal):\n 1. finite (PR - C)", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. finite (PR - C)", "using finite_Diff"], ["proof (prove)\nusing this:\n  finite ?A \\<Longrightarrow> finite (?A - ?B)\n\ngoal (1 subgoal):\n 1. finite (PR - C)", "by auto"], ["proof (state)\nthis:\n  finite (PR - C)\n\ngoal:\nNo subgoals!", "qed"], ["", "text \\<open>The next lemmas are about arithmetic properties of the\ngeneralized summation over a set constructor.\\<close>"], ["", "lemma sum_abs_triangle_ineq:\n\"finite S \\<Longrightarrow>\n  \\<bar>\\<Sum>l\\<in>S. (f::'a \\<Rightarrow> 'b::linordered_idom) l\\<bar> <= (\\<Sum>l\\<in>S. \\<bar>f l\\<bar>)\"\n  (is \"... \\<Longrightarrow> ?P S\")"], ["proof (prove)\ngoal (1 subgoal):\n 1. finite S \\<Longrightarrow>\n    \\<bar>sum f S\\<bar> \\<le> (\\<Sum>l\\<in>S. \\<bar>f l\\<bar>)", "by (rule sum_abs)"], ["", "lemma sum_le:\n  \"\\<lbrakk>finite S ; \\<forall> r\\<in>S. f r <= b \\<rbrakk>\n  \\<Longrightarrow>\n  (\\<Sum>l\\<in>S. f l) <= real (card S) * b\"\n  (is \"\\<lbrakk> finite S ; \\<forall> r\\<in>S. f r <= b \\<rbrakk> \\<Longrightarrow> ?P S\")"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>finite S; \\<forall>r\\<in>S. f r \\<le> b\\<rbrakk>\n    \\<Longrightarrow> sum f S \\<le> real (card S) * b", "proof(induct S rule: finite_induct)"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<forall>r\\<in>{}. f r \\<le> b \\<Longrightarrow>\n    sum f {} \\<le> real (card {}) * b\n 2. \\<And>x F.\n       \\<lbrakk>finite F; x \\<notin> F;\n        \\<forall>r\\<in>F. f r \\<le> b \\<Longrightarrow>\n        sum f F \\<le> real (card F) * b;\n        \\<forall>r\\<in>insert x F. f r \\<le> b\\<rbrakk>\n       \\<Longrightarrow> sum f (insert x F)\n                         \\<le> real (card (insert x F)) * b", "show \"?P {}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. sum f {} \\<le> real (card {}) * b", "by simp"], ["proof (state)\nthis:\n  sum f {} \\<le> real (card {}) * b\n\ngoal (1 subgoal):\n 1. \\<And>x F.\n       \\<lbrakk>finite F; x \\<notin> F;\n        \\<forall>r\\<in>F. f r \\<le> b \\<Longrightarrow>\n        sum f F \\<le> real (card F) * b;\n        \\<forall>r\\<in>insert x F. f r \\<le> b\\<rbrakk>\n       \\<Longrightarrow> sum f (insert x F)\n                         \\<le> real (card (insert x F)) * b", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x F.\n       \\<lbrakk>finite F; x \\<notin> F;\n        \\<forall>r\\<in>F. f r \\<le> b \\<Longrightarrow>\n        sum f F \\<le> real (card F) * b;\n        \\<forall>r\\<in>insert x F. f r \\<le> b\\<rbrakk>\n       \\<Longrightarrow> sum f (insert x F)\n                         \\<le> real (card (insert x F)) * b", "fix F x"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x F.\n       \\<lbrakk>finite F; x \\<notin> F;\n        \\<forall>r\\<in>F. f r \\<le> b \\<Longrightarrow>\n        sum f F \\<le> real (card F) * b;\n        \\<forall>r\\<in>insert x F. f r \\<le> b\\<rbrakk>\n       \\<Longrightarrow> sum f (insert x F)\n                         \\<le> real (card (insert x F)) * b", "assume  finit: \"finite F\" and xnotinF: \"x \\<notin> F\" and\n          HI1: \"\\<forall>r\\<in>F. f r \\<le> b \\<Longrightarrow> sum f F \\<le> real (card F) * b\"\n          and HI2: \"\\<forall>r\\<in>insert x F. f r \\<le> b\""], ["proof (state)\nthis:\n  finite F\n  x \\<notin> F\n  \\<forall>r\\<in>F. f r \\<le> b \\<Longrightarrow>\n  sum f F \\<le> real (card F) * b\n  \\<forall>r\\<in>insert x F. f r \\<le> b\n\ngoal (1 subgoal):\n 1. \\<And>x F.\n       \\<lbrakk>finite F; x \\<notin> F;\n        \\<forall>r\\<in>F. f r \\<le> b \\<Longrightarrow>\n        sum f F \\<le> real (card F) * b;\n        \\<forall>r\\<in>insert x F. f r \\<le> b\\<rbrakk>\n       \\<Longrightarrow> sum f (insert x F)\n                         \\<le> real (card (insert x F)) * b", "from HI1 HI2 and finit and xnotinF"], ["proof (chain)\npicking this:\n  \\<forall>r\\<in>F. f r \\<le> b \\<Longrightarrow>\n  sum f F \\<le> real (card F) * b\n  \\<forall>r\\<in>insert x F. f r \\<le> b\n  finite F\n  x \\<notin> F", "have \"sum f (insert x F) <= b + real (card F) * b\""], ["proof (prove)\nusing this:\n  \\<forall>r\\<in>F. f r \\<le> b \\<Longrightarrow>\n  sum f F \\<le> real (card F) * b\n  \\<forall>r\\<in>insert x F. f r \\<le> b\n  finite F\n  x \\<notin> F\n\ngoal (1 subgoal):\n 1. sum f (insert x F) \\<le> b + real (card F) * b", "by auto"], ["proof (state)\nthis:\n  sum f (insert x F) \\<le> b + real (card F) * b\n\ngoal (1 subgoal):\n 1. \\<And>x F.\n       \\<lbrakk>finite F; x \\<notin> F;\n        \\<forall>r\\<in>F. f r \\<le> b \\<Longrightarrow>\n        sum f F \\<le> real (card F) * b;\n        \\<forall>r\\<in>insert x F. f r \\<le> b\\<rbrakk>\n       \\<Longrightarrow> sum f (insert x F)\n                         \\<le> real (card (insert x F)) * b", "also"], ["proof (state)\nthis:\n  sum f (insert x F) \\<le> b + real (card F) * b\n\ngoal (1 subgoal):\n 1. \\<And>x F.\n       \\<lbrakk>finite F; x \\<notin> F;\n        \\<forall>r\\<in>F. f r \\<le> b \\<Longrightarrow>\n        sum f F \\<le> real (card F) * b;\n        \\<forall>r\\<in>insert x F. f r \\<le> b\\<rbrakk>\n       \\<Longrightarrow> sum f (insert x F)\n                         \\<le> real (card (insert x F)) * b", "have \"... = real (Suc (card  F)) * b\""], ["proof (prove)\ngoal (1 subgoal):\n 1. b + real (card F) * b = real (Suc (card F)) * b", "by (simp add: distrib_right  of_nat_Suc)"], ["proof (state)\nthis:\n  b + real (card F) * b = real (Suc (card F)) * b\n\ngoal (1 subgoal):\n 1. \\<And>x F.\n       \\<lbrakk>finite F; x \\<notin> F;\n        \\<forall>r\\<in>F. f r \\<le> b \\<Longrightarrow>\n        sum f F \\<le> real (card F) * b;\n        \\<forall>r\\<in>insert x F. f r \\<le> b\\<rbrakk>\n       \\<Longrightarrow> sum f (insert x F)\n                         \\<le> real (card (insert x F)) * b", "also"], ["proof (state)\nthis:\n  b + real (card F) * b = real (Suc (card F)) * b\n\ngoal (1 subgoal):\n 1. \\<And>x F.\n       \\<lbrakk>finite F; x \\<notin> F;\n        \\<forall>r\\<in>F. f r \\<le> b \\<Longrightarrow>\n        sum f F \\<le> real (card F) * b;\n        \\<forall>r\\<in>insert x F. f r \\<le> b\\<rbrakk>\n       \\<Longrightarrow> sum f (insert x F)\n                         \\<le> real (card (insert x F)) * b", "from   finit xnotinF"], ["proof (chain)\npicking this:\n  finite F\n  x \\<notin> F", "have \"...= real (card (insert x F)) * b\""], ["proof (prove)\nusing this:\n  finite F\n  x \\<notin> F\n\ngoal (1 subgoal):\n 1. real (Suc (card F)) * b = real (card (insert x F)) * b", "by simp"], ["proof (state)\nthis:\n  real (Suc (card F)) * b = real (card (insert x F)) * b\n\ngoal (1 subgoal):\n 1. \\<And>x F.\n       \\<lbrakk>finite F; x \\<notin> F;\n        \\<forall>r\\<in>F. f r \\<le> b \\<Longrightarrow>\n        sum f F \\<le> real (card F) * b;\n        \\<forall>r\\<in>insert x F. f r \\<le> b\\<rbrakk>\n       \\<Longrightarrow> sum f (insert x F)\n                         \\<le> real (card (insert x F)) * b", "finally"], ["proof (chain)\npicking this:\n  sum f (insert x F) \\<le> real (card (insert x F)) * b", "show \"?P (insert x F)\""], ["proof (prove)\nusing this:\n  sum f (insert x F) \\<le> real (card (insert x F)) * b\n\ngoal (1 subgoal):\n 1. sum f (insert x F) \\<le> real (card (insert x F)) * b", "."], ["proof (state)\nthis:\n  sum f (insert x F) \\<le> real (card (insert x F)) * b\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma sum_np_eq:\nassumes \n  hC: \"C \\<subseteq> PR\"\nshows \n  \"(\\<Sum>l\\<in>{..<np}. f l) = (\\<Sum>l\\<in>C. f l) + (\\<Sum>l\\<in>({..<np}-C). f l)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. sum f {..<np} = sum f C + sum f ({..<np} - C)", "proof-"], ["proof (state)\ngoal (1 subgoal):\n 1. sum f {..<np} = sum f C + sum f ({..<np} - C)", "note finitC[where C=C]"], ["proof (state)\nthis:\n  C \\<subseteq> PR \\<Longrightarrow> finite C\n\ngoal (1 subgoal):\n 1. sum f {..<np} = sum f C + sum f ({..<np} - C)", "moreover"], ["proof (state)\nthis:\n  C \\<subseteq> PR \\<Longrightarrow> finite C\n\ngoal (1 subgoal):\n 1. sum f {..<np} = sum f C + sum f ({..<np} - C)", "note finitnpC[where C=C]"], ["proof (state)\nthis:\n  finite (PR - C)\n\ngoal (1 subgoal):\n 1. sum f {..<np} = sum f C + sum f ({..<np} - C)", "moreover"], ["proof (state)\nthis:\n  finite (PR - C)\n\ngoal (1 subgoal):\n 1. sum f {..<np} = sum f C + sum f ({..<np} - C)", "have \"C \\<inter> ({..<np}-C) = {}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. C \\<inter> ({..<np} - C) = {}", "by auto"], ["proof (state)\nthis:\n  C \\<inter> ({..<np} - C) = {}\n\ngoal (1 subgoal):\n 1. sum f {..<np} = sum f C + sum f ({..<np} - C)", "moreover"], ["proof (state)\nthis:\n  C \\<inter> ({..<np} - C) = {}\n\ngoal (1 subgoal):\n 1. sum f {..<np} = sum f C + sum f ({..<np} - C)", "from hC"], ["proof (chain)\npicking this:\n  C \\<subseteq> PR", "have \"C \\<union> ({..<np}-C) = {..<np}\""], ["proof (prove)\nusing this:\n  C \\<subseteq> PR\n\ngoal (1 subgoal):\n 1. C \\<union> ({..<np} - C) = {..<np}", "by auto"], ["proof (state)\nthis:\n  C \\<union> ({..<np} - C) = {..<np}\n\ngoal (1 subgoal):\n 1. sum f {..<np} = sum f C + sum f ({..<np} - C)", "ultimately"], ["proof (chain)\npicking this:\n  C \\<subseteq> PR \\<Longrightarrow> finite C\n  finite (PR - C)\n  C \\<inter> ({..<np} - C) = {}\n  C \\<union> ({..<np} - C) = {..<np}", "show ?thesis"], ["proof (prove)\nusing this:\n  C \\<subseteq> PR \\<Longrightarrow> finite C\n  finite (PR - C)\n  C \\<inter> ({..<np} - C) = {}\n  C \\<union> ({..<np} - C) = {..<np}\n\ngoal (1 subgoal):\n 1. sum f {..<np} = sum f C + sum f ({..<np} - C)", "using sum.union_disjoint[where A=C and B=\"{..<np} - C\"]"], ["proof (prove)\nusing this:\n  C \\<subseteq> PR \\<Longrightarrow> finite C\n  finite (PR - C)\n  C \\<inter> ({..<np} - C) = {}\n  C \\<union> ({..<np} - C) = {..<np}\n  \\<lbrakk>finite C; finite ({..<np} - C);\n   C \\<inter> ({..<np} - C) = {}\\<rbrakk>\n  \\<Longrightarrow> sum ?g (C \\<union> ({..<np} - C)) =\n                    sum ?g C + sum ?g ({..<np} - C)\n\ngoal (1 subgoal):\n 1. sum f {..<np} = sum f C + sum f ({..<np} - C)", "by auto"], ["proof (state)\nthis:\n  sum f {..<np} = sum f C + sum f ({..<np} - C)\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma abs_sum_np_ineq:\nassumes \n  hC: \"C \\<subseteq> PR\"\nshows \n  \"\\<bar>(\\<Sum>l\\<in>{..<np}. (f::nat \\<Rightarrow> real) l)\\<bar> <=  \n     (\\<Sum>l\\<in>C. \\<bar>f l\\<bar>) + (\\<Sum>l\\<in>({..<np}-C). \\<bar>f l\\<bar>)\"\n    (is \"?abs_sum <= ?sumC + ?sumnpC\")"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<bar>sum f {..<np}\\<bar>\n    \\<le> (\\<Sum>l\\<in>C. \\<bar>f l\\<bar>) +\n          (\\<Sum>l\\<in>{..<np} - C. \\<bar>f l\\<bar>)", "proof-"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<bar>sum f {..<np}\\<bar>\n    \\<le> (\\<Sum>l\\<in>C. \\<bar>f l\\<bar>) +\n          (\\<Sum>l\\<in>{..<np} - C. \\<bar>f l\\<bar>)", "from hC and sum_np_eq[where f=f]"], ["proof (chain)\npicking this:\n  C \\<subseteq> PR\n  ?C \\<subseteq> PR \\<Longrightarrow>\n  sum f {..<np} = sum f ?C + sum f ({..<np} - ?C)", "have \"?abs_sum = \\<bar>(\\<Sum>l\\<in>C. f l) + (\\<Sum>l\\<in>({..<np}-C). f l)\\<bar>\" \n    (is \"?abs_sum = \\<bar>?sumC' + ?sumnpC'\\<bar>\")"], ["proof (prove)\nusing this:\n  C \\<subseteq> PR\n  ?C \\<subseteq> PR \\<Longrightarrow>\n  sum f {..<np} = sum f ?C + sum f ({..<np} - ?C)\n\ngoal (1 subgoal):\n 1. \\<bar>sum f {..<np}\\<bar> = \\<bar>sum f C + sum f ({..<np} - C)\\<bar>", "by simp"], ["proof (state)\nthis:\n  \\<bar>sum f {..<np}\\<bar> = \\<bar>sum f C + sum f ({..<np} - C)\\<bar>\n\ngoal (1 subgoal):\n 1. \\<bar>sum f {..<np}\\<bar>\n    \\<le> (\\<Sum>l\\<in>C. \\<bar>f l\\<bar>) +\n          (\\<Sum>l\\<in>{..<np} - C. \\<bar>f l\\<bar>)", "also"], ["proof (state)\nthis:\n  \\<bar>sum f {..<np}\\<bar> = \\<bar>sum f C + sum f ({..<np} - C)\\<bar>\n\ngoal (1 subgoal):\n 1. \\<bar>sum f {..<np}\\<bar>\n    \\<le> (\\<Sum>l\\<in>C. \\<bar>f l\\<bar>) +\n          (\\<Sum>l\\<in>{..<np} - C. \\<bar>f l\\<bar>)", "from abs_triangle_ineq"], ["proof (chain)\npicking this:\n  \\<bar>?a + ?b\\<bar> \\<le> \\<bar>?a\\<bar> + \\<bar>?b\\<bar>", "have \"...<= \\<bar>?sumC'\\<bar> + \\<bar>?sumnpC'\\<bar>\""], ["proof (prove)\nusing this:\n  \\<bar>?a + ?b\\<bar> \\<le> \\<bar>?a\\<bar> + \\<bar>?b\\<bar>\n\ngoal (1 subgoal):\n 1. \\<bar>sum f C + sum f ({..<np} - C)\\<bar>\n    \\<le> \\<bar>sum f C\\<bar> + \\<bar>sum f ({..<np} - C)\\<bar>", "."], ["proof (state)\nthis:\n  \\<bar>sum f C + sum f ({..<np} - C)\\<bar>\n  \\<le> \\<bar>sum f C\\<bar> + \\<bar>sum f ({..<np} - C)\\<bar>\n\ngoal (1 subgoal):\n 1. \\<bar>sum f {..<np}\\<bar>\n    \\<le> (\\<Sum>l\\<in>C. \\<bar>f l\\<bar>) +\n          (\\<Sum>l\\<in>{..<np} - C. \\<bar>f l\\<bar>)", "also"], ["proof (state)\nthis:\n  \\<bar>sum f C + sum f ({..<np} - C)\\<bar>\n  \\<le> \\<bar>sum f C\\<bar> + \\<bar>sum f ({..<np} - C)\\<bar>\n\ngoal (1 subgoal):\n 1. \\<bar>sum f {..<np}\\<bar>\n    \\<le> (\\<Sum>l\\<in>C. \\<bar>f l\\<bar>) +\n          (\\<Sum>l\\<in>{..<np} - C. \\<bar>f l\\<bar>)", "have \"... <=  ?sumC + ?sumnpC \""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<bar>sum f C\\<bar> + \\<bar>sum f ({..<np} - C)\\<bar>\n    \\<le> (\\<Sum>l\\<in>C. \\<bar>f l\\<bar>) +\n          (\\<Sum>l\\<in>{..<np} - C. \\<bar>f l\\<bar>)", "proof-"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<bar>sum f C\\<bar> + \\<bar>sum f ({..<np} - C)\\<bar>\n    \\<le> (\\<Sum>l\\<in>C. \\<bar>f l\\<bar>) +\n          (\\<Sum>l\\<in>{..<np} - C. \\<bar>f l\\<bar>)", "from hC finitC sum_abs_triangle_ineq"], ["proof (chain)\npicking this:\n  C \\<subseteq> PR\n  ?C \\<subseteq> PR \\<Longrightarrow> finite ?C\n  finite ?S \\<Longrightarrow>\n  \\<bar>sum ?f ?S\\<bar> \\<le> (\\<Sum>l\\<in>?S. \\<bar>?f l\\<bar>)", "have \"\\<bar>?sumC'\\<bar> <= ?sumC\""], ["proof (prove)\nusing this:\n  C \\<subseteq> PR\n  ?C \\<subseteq> PR \\<Longrightarrow> finite ?C\n  finite ?S \\<Longrightarrow>\n  \\<bar>sum ?f ?S\\<bar> \\<le> (\\<Sum>l\\<in>?S. \\<bar>?f l\\<bar>)\n\ngoal (1 subgoal):\n 1. \\<bar>sum f C\\<bar> \\<le> (\\<Sum>l\\<in>C. \\<bar>f l\\<bar>)", "by blast"], ["proof (state)\nthis:\n  \\<bar>sum f C\\<bar> \\<le> (\\<Sum>l\\<in>C. \\<bar>f l\\<bar>)\n\ngoal (1 subgoal):\n 1. \\<bar>sum f C\\<bar> + \\<bar>sum f ({..<np} - C)\\<bar>\n    \\<le> (\\<Sum>l\\<in>C. \\<bar>f l\\<bar>) +\n          (\\<Sum>l\\<in>{..<np} - C. \\<bar>f l\\<bar>)", "moreover"], ["proof (state)\nthis:\n  \\<bar>sum f C\\<bar> \\<le> (\\<Sum>l\\<in>C. \\<bar>f l\\<bar>)\n\ngoal (1 subgoal):\n 1. \\<bar>sum f C\\<bar> + \\<bar>sum f ({..<np} - C)\\<bar>\n    \\<le> (\\<Sum>l\\<in>C. \\<bar>f l\\<bar>) +\n          (\\<Sum>l\\<in>{..<np} - C. \\<bar>f l\\<bar>)", "from finitnpC and\n           sum_abs_triangle_ineq[where f=f and S=\"PR-C\"]"], ["proof (chain)\npicking this:\n  finite (PR - ?C)\n  finite (PR - C) \\<Longrightarrow>\n  \\<bar>sum f (PR - C)\\<bar> \\<le> (\\<Sum>l\\<in>PR - C. \\<bar>f l\\<bar>)", "have \"\\<bar>?sumnpC'\\<bar> <= ?sumnpC\""], ["proof (prove)\nusing this:\n  finite (PR - ?C)\n  finite (PR - C) \\<Longrightarrow>\n  \\<bar>sum f (PR - C)\\<bar> \\<le> (\\<Sum>l\\<in>PR - C. \\<bar>f l\\<bar>)\n\ngoal (1 subgoal):\n 1. \\<bar>sum f ({..<np} - C)\\<bar>\n    \\<le> (\\<Sum>l\\<in>{..<np} - C. \\<bar>f l\\<bar>)", "by force"], ["proof (state)\nthis:\n  \\<bar>sum f ({..<np} - C)\\<bar>\n  \\<le> (\\<Sum>l\\<in>{..<np} - C. \\<bar>f l\\<bar>)\n\ngoal (1 subgoal):\n 1. \\<bar>sum f C\\<bar> + \\<bar>sum f ({..<np} - C)\\<bar>\n    \\<le> (\\<Sum>l\\<in>C. \\<bar>f l\\<bar>) +\n          (\\<Sum>l\\<in>{..<np} - C. \\<bar>f l\\<bar>)", "ultimately"], ["proof (chain)\npicking this:\n  \\<bar>sum f C\\<bar> \\<le> (\\<Sum>l\\<in>C. \\<bar>f l\\<bar>)\n  \\<bar>sum f ({..<np} - C)\\<bar>\n  \\<le> (\\<Sum>l\\<in>{..<np} - C. \\<bar>f l\\<bar>)", "show ?thesis"], ["proof (prove)\nusing this:\n  \\<bar>sum f C\\<bar> \\<le> (\\<Sum>l\\<in>C. \\<bar>f l\\<bar>)\n  \\<bar>sum f ({..<np} - C)\\<bar>\n  \\<le> (\\<Sum>l\\<in>{..<np} - C. \\<bar>f l\\<bar>)\n\ngoal (1 subgoal):\n 1. \\<bar>sum f C\\<bar> + \\<bar>sum f ({..<np} - C)\\<bar>\n    \\<le> (\\<Sum>l\\<in>C. \\<bar>f l\\<bar>) +\n          (\\<Sum>l\\<in>{..<np} - C. \\<bar>f l\\<bar>)", "by arith"], ["proof (state)\nthis:\n  \\<bar>sum f C\\<bar> + \\<bar>sum f ({..<np} - C)\\<bar>\n  \\<le> (\\<Sum>l\\<in>C. \\<bar>f l\\<bar>) +\n        (\\<Sum>l\\<in>{..<np} - C. \\<bar>f l\\<bar>)\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<bar>sum f C\\<bar> + \\<bar>sum f ({..<np} - C)\\<bar>\n  \\<le> (\\<Sum>l\\<in>C. \\<bar>f l\\<bar>) +\n        (\\<Sum>l\\<in>{..<np} - C. \\<bar>f l\\<bar>)\n\ngoal (1 subgoal):\n 1. \\<bar>sum f {..<np}\\<bar>\n    \\<le> (\\<Sum>l\\<in>C. \\<bar>f l\\<bar>) +\n          (\\<Sum>l\\<in>{..<np} - C. \\<bar>f l\\<bar>)", "finally"], ["proof (chain)\npicking this:\n  \\<bar>sum f {..<np}\\<bar>\n  \\<le> (\\<Sum>l\\<in>C. \\<bar>f l\\<bar>) +\n        (\\<Sum>l\\<in>{..<np} - C. \\<bar>f l\\<bar>)", "show ?thesis"], ["proof (prove)\nusing this:\n  \\<bar>sum f {..<np}\\<bar>\n  \\<le> (\\<Sum>l\\<in>C. \\<bar>f l\\<bar>) +\n        (\\<Sum>l\\<in>{..<np} - C. \\<bar>f l\\<bar>)\n\ngoal (1 subgoal):\n 1. \\<bar>sum f {..<np}\\<bar>\n    \\<le> (\\<Sum>l\\<in>C. \\<bar>f l\\<bar>) +\n          (\\<Sum>l\\<in>{..<np} - C. \\<bar>f l\\<bar>)", "."], ["proof (state)\nthis:\n  \\<bar>sum f {..<np}\\<bar>\n  \\<le> (\\<Sum>l\\<in>C. \\<bar>f l\\<bar>) +\n        (\\<Sum>l\\<in>{..<np} - C. \\<bar>f l\\<bar>)\n\ngoal:\nNo subgoals!", "qed"], ["", "text \\<open>The next lemmas are about the existence of bounds that are\nnecesary in order to prove the Precicion Enhancement theorem.\\<close>"], ["", "lemma fiX_ubound:\n  \"fiX f p l <= f p + \\<Delta>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. fiX f p l \\<le> f p + \\<Delta>", "proof(cases \"\\<bar>f p - f l\\<bar> \\<le> \\<Delta>\")"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<bar>f p - f l\\<bar> \\<le> \\<Delta> \\<Longrightarrow>\n    fiX f p l \\<le> f p + \\<Delta>\n 2. \\<not> \\<bar>f p - f l\\<bar> \\<le> \\<Delta> \\<Longrightarrow>\n    fiX f p l \\<le> f p + \\<Delta>", "assume asm: \"\\<bar>f p - f l\\<bar> \\<le> \\<Delta>\""], ["proof (state)\nthis:\n  \\<bar>f p - f l\\<bar> \\<le> \\<Delta>\n\ngoal (2 subgoals):\n 1. \\<bar>f p - f l\\<bar> \\<le> \\<Delta> \\<Longrightarrow>\n    fiX f p l \\<le> f p + \\<Delta>\n 2. \\<not> \\<bar>f p - f l\\<bar> \\<le> \\<Delta> \\<Longrightarrow>\n    fiX f p l \\<le> f p + \\<Delta>", "hence \"fiX f p l = f l\""], ["proof (prove)\nusing this:\n  \\<bar>f p - f l\\<bar> \\<le> \\<Delta>\n\ngoal (1 subgoal):\n 1. fiX f p l = f l", "by (simp add: fiX_def)"], ["proof (state)\nthis:\n  fiX f p l = f l\n\ngoal (2 subgoals):\n 1. \\<bar>f p - f l\\<bar> \\<le> \\<Delta> \\<Longrightarrow>\n    fiX f p l \\<le> f p + \\<Delta>\n 2. \\<not> \\<bar>f p - f l\\<bar> \\<le> \\<Delta> \\<Longrightarrow>\n    fiX f p l \\<le> f p + \\<Delta>", "also"], ["proof (state)\nthis:\n  fiX f p l = f l\n\ngoal (2 subgoals):\n 1. \\<bar>f p - f l\\<bar> \\<le> \\<Delta> \\<Longrightarrow>\n    fiX f p l \\<le> f p + \\<Delta>\n 2. \\<not> \\<bar>f p - f l\\<bar> \\<le> \\<Delta> \\<Longrightarrow>\n    fiX f p l \\<le> f p + \\<Delta>", "from asm"], ["proof (chain)\npicking this:\n  \\<bar>f p - f l\\<bar> \\<le> \\<Delta>", "have \"f l <= f p + \\<Delta>\""], ["proof (prove)\nusing this:\n  \\<bar>f p - f l\\<bar> \\<le> \\<Delta>\n\ngoal (1 subgoal):\n 1. f l \\<le> f p + \\<Delta>", "by arith"], ["proof (state)\nthis:\n  f l \\<le> f p + \\<Delta>\n\ngoal (2 subgoals):\n 1. \\<bar>f p - f l\\<bar> \\<le> \\<Delta> \\<Longrightarrow>\n    fiX f p l \\<le> f p + \\<Delta>\n 2. \\<not> \\<bar>f p - f l\\<bar> \\<le> \\<Delta> \\<Longrightarrow>\n    fiX f p l \\<le> f p + \\<Delta>", "finally"], ["proof (chain)\npicking this:\n  fiX f p l \\<le> f p + \\<Delta>", "show ?thesis"], ["proof (prove)\nusing this:\n  fiX f p l \\<le> f p + \\<Delta>\n\ngoal (1 subgoal):\n 1. fiX f p l \\<le> f p + \\<Delta>", "by arith"], ["proof (state)\nthis:\n  fiX f p l \\<le> f p + \\<Delta>\n\ngoal (1 subgoal):\n 1. \\<not> \\<bar>f p - f l\\<bar> \\<le> \\<Delta> \\<Longrightarrow>\n    fiX f p l \\<le> f p + \\<Delta>", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<not> \\<bar>f p - f l\\<bar> \\<le> \\<Delta> \\<Longrightarrow>\n    fiX f p l \\<le> f p + \\<Delta>", "assume asm: \"\\<not>\\<bar>f p - f l\\<bar> \\<le> \\<Delta>\""], ["proof (state)\nthis:\n  \\<not> \\<bar>f p - f l\\<bar> \\<le> \\<Delta>\n\ngoal (1 subgoal):\n 1. \\<not> \\<bar>f p - f l\\<bar> \\<le> \\<Delta> \\<Longrightarrow>\n    fiX f p l \\<le> f p + \\<Delta>", "hence \"fiX f p l = f p\""], ["proof (prove)\nusing this:\n  \\<not> \\<bar>f p - f l\\<bar> \\<le> \\<Delta>\n\ngoal (1 subgoal):\n 1. fiX f p l = f p", "by (simp add: fiX_def)"], ["proof (state)\nthis:\n  fiX f p l = f p\n\ngoal (1 subgoal):\n 1. \\<not> \\<bar>f p - f l\\<bar> \\<le> \\<Delta> \\<Longrightarrow>\n    fiX f p l \\<le> f p + \\<Delta>", "also"], ["proof (state)\nthis:\n  fiX f p l = f p\n\ngoal (1 subgoal):\n 1. \\<not> \\<bar>f p - f l\\<bar> \\<le> \\<Delta> \\<Longrightarrow>\n    fiX f p l \\<le> f p + \\<Delta>", "from asm and  constants_ax"], ["proof (chain)\npicking this:\n  \\<not> \\<bar>f p - f l\\<bar> \\<le> \\<Delta>\n  0 \\<le> \\<Delta> \\<and> 0 < np", "have \"f p <= f p + \\<Delta>\""], ["proof (prove)\nusing this:\n  \\<not> \\<bar>f p - f l\\<bar> \\<le> \\<Delta>\n  0 \\<le> \\<Delta> \\<and> 0 < np\n\ngoal (1 subgoal):\n 1. f p \\<le> f p + \\<Delta>", "by arith"], ["proof (state)\nthis:\n  f p \\<le> f p + \\<Delta>\n\ngoal (1 subgoal):\n 1. \\<not> \\<bar>f p - f l\\<bar> \\<le> \\<Delta> \\<Longrightarrow>\n    fiX f p l \\<le> f p + \\<Delta>", "finally"], ["proof (chain)\npicking this:\n  fiX f p l \\<le> f p + \\<Delta>", "show ?thesis"], ["proof (prove)\nusing this:\n  fiX f p l \\<le> f p + \\<Delta>\n\ngoal (1 subgoal):\n 1. fiX f p l \\<le> f p + \\<Delta>", "by arith"], ["proof (state)\nthis:\n  fiX f p l \\<le> f p + \\<Delta>\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma fiX_lbound:\n  \"f p - \\<Delta> <= fiX f p l\""], ["proof (prove)\ngoal (1 subgoal):\n 1. f p - \\<Delta> \\<le> fiX f p l", "proof(cases \"\\<bar>f p - f l\\<bar> \\<le> \\<Delta>\")"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<bar>f p - f l\\<bar> \\<le> \\<Delta> \\<Longrightarrow>\n    f p - \\<Delta> \\<le> fiX f p l\n 2. \\<not> \\<bar>f p - f l\\<bar> \\<le> \\<Delta> \\<Longrightarrow>\n    f p - \\<Delta> \\<le> fiX f p l", "assume asm: \"\\<bar>f p - f l\\<bar> \\<le> \\<Delta>\""], ["proof (state)\nthis:\n  \\<bar>f p - f l\\<bar> \\<le> \\<Delta>\n\ngoal (2 subgoals):\n 1. \\<bar>f p - f l\\<bar> \\<le> \\<Delta> \\<Longrightarrow>\n    f p - \\<Delta> \\<le> fiX f p l\n 2. \\<not> \\<bar>f p - f l\\<bar> \\<le> \\<Delta> \\<Longrightarrow>\n    f p - \\<Delta> \\<le> fiX f p l", "hence \"fiX f p l = f l\""], ["proof (prove)\nusing this:\n  \\<bar>f p - f l\\<bar> \\<le> \\<Delta>\n\ngoal (1 subgoal):\n 1. fiX f p l = f l", "by (simp add: fiX_def)"], ["proof (state)\nthis:\n  fiX f p l = f l\n\ngoal (2 subgoals):\n 1. \\<bar>f p - f l\\<bar> \\<le> \\<Delta> \\<Longrightarrow>\n    f p - \\<Delta> \\<le> fiX f p l\n 2. \\<not> \\<bar>f p - f l\\<bar> \\<le> \\<Delta> \\<Longrightarrow>\n    f p - \\<Delta> \\<le> fiX f p l", "also"], ["proof (state)\nthis:\n  fiX f p l = f l\n\ngoal (2 subgoals):\n 1. \\<bar>f p - f l\\<bar> \\<le> \\<Delta> \\<Longrightarrow>\n    f p - \\<Delta> \\<le> fiX f p l\n 2. \\<not> \\<bar>f p - f l\\<bar> \\<le> \\<Delta> \\<Longrightarrow>\n    f p - \\<Delta> \\<le> fiX f p l", "from asm"], ["proof (chain)\npicking this:\n  \\<bar>f p - f l\\<bar> \\<le> \\<Delta>", "have \"f p - \\<Delta> <= f l\""], ["proof (prove)\nusing this:\n  \\<bar>f p - f l\\<bar> \\<le> \\<Delta>\n\ngoal (1 subgoal):\n 1. f p - \\<Delta> \\<le> f l", "by arith"], ["proof (state)\nthis:\n  f p - \\<Delta> \\<le> f l\n\ngoal (2 subgoals):\n 1. \\<bar>f p - f l\\<bar> \\<le> \\<Delta> \\<Longrightarrow>\n    f p - \\<Delta> \\<le> fiX f p l\n 2. \\<not> \\<bar>f p - f l\\<bar> \\<le> \\<Delta> \\<Longrightarrow>\n    f p - \\<Delta> \\<le> fiX f p l", "finally"], ["proof (chain)\npicking this:\n  f p - \\<Delta> \\<le> fiX f p l", "show ?thesis"], ["proof (prove)\nusing this:\n  f p - \\<Delta> \\<le> fiX f p l\n\ngoal (1 subgoal):\n 1. f p - \\<Delta> \\<le> fiX f p l", "by arith"], ["proof (state)\nthis:\n  f p - \\<Delta> \\<le> fiX f p l\n\ngoal (1 subgoal):\n 1. \\<not> \\<bar>f p - f l\\<bar> \\<le> \\<Delta> \\<Longrightarrow>\n    f p - \\<Delta> \\<le> fiX f p l", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<not> \\<bar>f p - f l\\<bar> \\<le> \\<Delta> \\<Longrightarrow>\n    f p - \\<Delta> \\<le> fiX f p l", "assume asm: \"\\<not>\\<bar>f p - f l\\<bar> \\<le> \\<Delta>\""], ["proof (state)\nthis:\n  \\<not> \\<bar>f p - f l\\<bar> \\<le> \\<Delta>\n\ngoal (1 subgoal):\n 1. \\<not> \\<bar>f p - f l\\<bar> \\<le> \\<Delta> \\<Longrightarrow>\n    f p - \\<Delta> \\<le> fiX f p l", "with  constants_ax"], ["proof (chain)\npicking this:\n  0 \\<le> \\<Delta> \\<and> 0 < np\n  \\<not> \\<bar>f p - f l\\<bar> \\<le> \\<Delta>", "have \"f p - \\<Delta> <= f p\""], ["proof (prove)\nusing this:\n  0 \\<le> \\<Delta> \\<and> 0 < np\n  \\<not> \\<bar>f p - f l\\<bar> \\<le> \\<Delta>\n\ngoal (1 subgoal):\n 1. f p - \\<Delta> \\<le> f p", "by arith"], ["proof (state)\nthis:\n  f p - \\<Delta> \\<le> f p\n\ngoal (1 subgoal):\n 1. \\<not> \\<bar>f p - f l\\<bar> \\<le> \\<Delta> \\<Longrightarrow>\n    f p - \\<Delta> \\<le> fiX f p l", "also"], ["proof (state)\nthis:\n  f p - \\<Delta> \\<le> f p\n\ngoal (1 subgoal):\n 1. \\<not> \\<bar>f p - f l\\<bar> \\<le> \\<Delta> \\<Longrightarrow>\n    f p - \\<Delta> \\<le> fiX f p l", "from asm"], ["proof (chain)\npicking this:\n  \\<not> \\<bar>f p - f l\\<bar> \\<le> \\<Delta>", "have \"f p = fiX f p l\""], ["proof (prove)\nusing this:\n  \\<not> \\<bar>f p - f l\\<bar> \\<le> \\<Delta>\n\ngoal (1 subgoal):\n 1. f p = fiX f p l", "by (simp add: fiX_def)"], ["proof (state)\nthis:\n  f p = fiX f p l\n\ngoal (1 subgoal):\n 1. \\<not> \\<bar>f p - f l\\<bar> \\<le> \\<Delta> \\<Longrightarrow>\n    f p - \\<Delta> \\<le> fiX f p l", "finally"], ["proof (chain)\npicking this:\n  f p - \\<Delta> \\<le> fiX f p l", "show ?thesis"], ["proof (prove)\nusing this:\n  f p - \\<Delta> \\<le> fiX f p l\n\ngoal (1 subgoal):\n 1. f p - \\<Delta> \\<le> fiX f p l", "by arith"], ["proof (state)\nthis:\n  f p - \\<Delta> \\<le> fiX f p l\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma abs_fiX_bound: \"\\<bar>fiX f p l - f p \\<bar> <= \\<Delta>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<bar>fiX f p l - f p\\<bar> \\<le> \\<Delta>", "proof-"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<bar>fiX f p l - f p\\<bar> \\<le> \\<Delta>", "(*\nfrom constants_ax and fiX_lbound and fiX_ubound show ?thesis by arith\n*)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<bar>fiX f p l - f p\\<bar> \\<le> \\<Delta>", "have \"f p - \\<Delta> <= fiX f p l \\<and> fiX f p l <= f p + \\<Delta> \\<longrightarrow> ?thesis\""], ["proof (prove)\ngoal (1 subgoal):\n 1. f p - \\<Delta> \\<le> fiX f p l \\<and>\n    fiX f p l \\<le> f p + \\<Delta> \\<longrightarrow>\n    \\<bar>fiX f p l - f p\\<bar> \\<le> \\<Delta>", "by arith"], ["proof (state)\nthis:\n  f p - \\<Delta> \\<le> fiX f p l \\<and>\n  fiX f p l \\<le> f p + \\<Delta> \\<longrightarrow>\n  \\<bar>fiX f p l - f p\\<bar> \\<le> \\<Delta>\n\ngoal (1 subgoal):\n 1. \\<bar>fiX f p l - f p\\<bar> \\<le> \\<Delta>", "with fiX_lbound  fiX_ubound"], ["proof (chain)\npicking this:\n  ?f ?p - \\<Delta> \\<le> fiX ?f ?p ?l\n  fiX ?f ?p ?l \\<le> ?f ?p + \\<Delta>\n  f p - \\<Delta> \\<le> fiX f p l \\<and>\n  fiX f p l \\<le> f p + \\<Delta> \\<longrightarrow>\n  \\<bar>fiX f p l - f p\\<bar> \\<le> \\<Delta>", "show ?thesis"], ["proof (prove)\nusing this:\n  ?f ?p - \\<Delta> \\<le> fiX ?f ?p ?l\n  fiX ?f ?p ?l \\<le> ?f ?p + \\<Delta>\n  f p - \\<Delta> \\<le> fiX f p l \\<and>\n  fiX f p l \\<le> f p + \\<Delta> \\<longrightarrow>\n  \\<bar>fiX f p l - f p\\<bar> \\<le> \\<Delta>\n\ngoal (1 subgoal):\n 1. \\<bar>fiX f p l - f p\\<bar> \\<le> \\<Delta>", "by blast"], ["proof (state)\nthis:\n  \\<bar>fiX f p l - f p\\<bar> \\<le> \\<Delta>\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma abs_dif_fiX_bound:\nassumes\n  hbx: \"\\<forall> l\\<in>C. \\<bar>f l - g l\\<bar> <= x\" and\n  hby: \"\\<forall> l\\<in>C. \\<forall> m\\<in>C. \\<bar>f l - f m\\<bar> <= y\" and\n  hpC: \"p\\<in>C\" and\n  hqC: \"q\\<in>C\" \nshows\n  \"\\<bar>fiX f p r - fiX g q r\\<bar> <= 2 * \\<Delta> + x + y\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<bar>fiX f p r - fiX g q r\\<bar> \\<le> 2 * \\<Delta> + x + y", "proof-"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<bar>fiX f p r - fiX g q r\\<bar> \\<le> 2 * \\<Delta> + x + y", "have \"\\<bar>fiX f p r - fiX g q r\\<bar> = \n    \\<bar>fiX f p r - f p + f p - fiX g q r\\<bar> \""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<bar>fiX f p r - fiX g q r\\<bar> =\n    \\<bar>fiX f p r - f p + f p - fiX g q r\\<bar>", "by auto"], ["proof (state)\nthis:\n  \\<bar>fiX f p r - fiX g q r\\<bar> =\n  \\<bar>fiX f p r - f p + f p - fiX g q r\\<bar>\n\ngoal (1 subgoal):\n 1. \\<bar>fiX f p r - fiX g q r\\<bar> \\<le> 2 * \\<Delta> + x + y", "also"], ["proof (state)\nthis:\n  \\<bar>fiX f p r - fiX g q r\\<bar> =\n  \\<bar>fiX f p r - f p + f p - fiX g q r\\<bar>\n\ngoal (1 subgoal):\n 1. \\<bar>fiX f p r - fiX g q r\\<bar> \\<le> 2 * \\<Delta> + x + y", "have \"... <= \\<bar>fiX f p r - f p \\<bar> + \\<bar>f p - fiX g q r\\<bar> \""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<bar>fiX f p r - f p + f p - fiX g q r\\<bar>\n    \\<le> \\<bar>fiX f p r - f p\\<bar> + \\<bar>f p - fiX g q r\\<bar>", "by arith"], ["proof (state)\nthis:\n  \\<bar>fiX f p r - f p + f p - fiX g q r\\<bar>\n  \\<le> \\<bar>fiX f p r - f p\\<bar> + \\<bar>f p - fiX g q r\\<bar>\n\ngoal (1 subgoal):\n 1. \\<bar>fiX f p r - fiX g q r\\<bar> \\<le> 2 * \\<Delta> + x + y", "also"], ["proof (state)\nthis:\n  \\<bar>fiX f p r - f p + f p - fiX g q r\\<bar>\n  \\<le> \\<bar>fiX f p r - f p\\<bar> + \\<bar>f p - fiX g q r\\<bar>\n\ngoal (1 subgoal):\n 1. \\<bar>fiX f p r - fiX g q r\\<bar> \\<le> 2 * \\<Delta> + x + y", "from abs_fiX_bound"], ["proof (chain)\npicking this:\n  \\<bar>fiX ?f ?p ?l - ?f ?p\\<bar> \\<le> \\<Delta>", "have \"... <= \\<Delta> + \\<bar>f p - fiX g q r\\<bar>\""], ["proof (prove)\nusing this:\n  \\<bar>fiX ?f ?p ?l - ?f ?p\\<bar> \\<le> \\<Delta>\n\ngoal (1 subgoal):\n 1. \\<bar>fiX f p r - f p\\<bar> + \\<bar>f p - fiX g q r\\<bar>\n    \\<le> \\<Delta> + \\<bar>f p - fiX g q r\\<bar>", "by simp"], ["proof (state)\nthis:\n  \\<bar>fiX f p r - f p\\<bar> + \\<bar>f p - fiX g q r\\<bar>\n  \\<le> \\<Delta> + \\<bar>f p - fiX g q r\\<bar>\n\ngoal (1 subgoal):\n 1. \\<bar>fiX f p r - fiX g q r\\<bar> \\<le> 2 * \\<Delta> + x + y", "also"], ["proof (state)\nthis:\n  \\<bar>fiX f p r - f p\\<bar> + \\<bar>f p - fiX g q r\\<bar>\n  \\<le> \\<Delta> + \\<bar>f p - fiX g q r\\<bar>\n\ngoal (1 subgoal):\n 1. \\<bar>fiX f p r - fiX g q r\\<bar> \\<le> 2 * \\<Delta> + x + y", "have \"... = \\<Delta> + \\<bar>f p - g q + (g q - fiX g q r)\\<bar>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<Delta> + \\<bar>f p - fiX g q r\\<bar> =\n    \\<Delta> + \\<bar>f p - g q + (g q - fiX g q r)\\<bar>", "by simp"], ["proof (state)\nthis:\n  \\<Delta> + \\<bar>f p - fiX g q r\\<bar> =\n  \\<Delta> + \\<bar>f p - g q + (g q - fiX g q r)\\<bar>\n\ngoal (1 subgoal):\n 1. \\<bar>fiX f p r - fiX g q r\\<bar> \\<le> 2 * \\<Delta> + x + y", "also"], ["proof (state)\nthis:\n  \\<Delta> + \\<bar>f p - fiX g q r\\<bar> =\n  \\<Delta> + \\<bar>f p - g q + (g q - fiX g q r)\\<bar>\n\ngoal (1 subgoal):\n 1. \\<bar>fiX f p r - fiX g q r\\<bar> \\<le> 2 * \\<Delta> + x + y", "from abs_triangle_ineq[where a = \"f p - g q\" and \n                               b = \"g q - fiX g q r\"]"], ["proof (chain)\npicking this:\n  \\<bar>f p - g q + (g q - fiX g q r)\\<bar>\n  \\<le> \\<bar>f p - g q\\<bar> + \\<bar>g q - fiX g q r\\<bar>", "have \"... <= \\<Delta> + \\<bar>f p - g q \\<bar> + \\<bar> g q - fiX g q r\\<bar>\""], ["proof (prove)\nusing this:\n  \\<bar>f p - g q + (g q - fiX g q r)\\<bar>\n  \\<le> \\<bar>f p - g q\\<bar> + \\<bar>g q - fiX g q r\\<bar>\n\ngoal (1 subgoal):\n 1. \\<Delta> + \\<bar>f p - g q + (g q - fiX g q r)\\<bar>\n    \\<le> \\<Delta> + \\<bar>f p - g q\\<bar> + \\<bar>g q - fiX g q r\\<bar>", "by simp"], ["proof (state)\nthis:\n  \\<Delta> + \\<bar>f p - g q + (g q - fiX g q r)\\<bar>\n  \\<le> \\<Delta> + \\<bar>f p - g q\\<bar> + \\<bar>g q - fiX g q r\\<bar>\n\ngoal (1 subgoal):\n 1. \\<bar>fiX f p r - fiX g q r\\<bar> \\<le> 2 * \\<Delta> + x + y", "also"], ["proof (state)\nthis:\n  \\<Delta> + \\<bar>f p - g q + (g q - fiX g q r)\\<bar>\n  \\<le> \\<Delta> + \\<bar>f p - g q\\<bar> + \\<bar>g q - fiX g q r\\<bar>\n\ngoal (1 subgoal):\n 1. \\<bar>fiX f p r - fiX g q r\\<bar> \\<le> 2 * \\<Delta> + x + y", "have \"... = \\<Delta> + \\<bar>f p - g q \\<bar> + \\<bar> fiX g q r - g q\\<bar>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<Delta> + \\<bar>f p - g q\\<bar> + \\<bar>g q - fiX g q r\\<bar> =\n    \\<Delta> + \\<bar>f p - g q\\<bar> + \\<bar>fiX g q r - g q\\<bar>", "by arith"], ["proof (state)\nthis:\n  \\<Delta> + \\<bar>f p - g q\\<bar> + \\<bar>g q - fiX g q r\\<bar> =\n  \\<Delta> + \\<bar>f p - g q\\<bar> + \\<bar>fiX g q r - g q\\<bar>\n\ngoal (1 subgoal):\n 1. \\<bar>fiX f p r - fiX g q r\\<bar> \\<le> 2 * \\<Delta> + x + y", "also"], ["proof (state)\nthis:\n  \\<Delta> + \\<bar>f p - g q\\<bar> + \\<bar>g q - fiX g q r\\<bar> =\n  \\<Delta> + \\<bar>f p - g q\\<bar> + \\<bar>fiX g q r - g q\\<bar>\n\ngoal (1 subgoal):\n 1. \\<bar>fiX f p r - fiX g q r\\<bar> \\<le> 2 * \\<Delta> + x + y", "from abs_fiX_bound"], ["proof (chain)\npicking this:\n  \\<bar>fiX ?f ?p ?l - ?f ?p\\<bar> \\<le> \\<Delta>", "have \"... <= 2 * \\<Delta> + \\<bar>f p - g q \\<bar> \""], ["proof (prove)\nusing this:\n  \\<bar>fiX ?f ?p ?l - ?f ?p\\<bar> \\<le> \\<Delta>\n\ngoal (1 subgoal):\n 1. \\<Delta> + \\<bar>f p - g q\\<bar> + \\<bar>fiX g q r - g q\\<bar>\n    \\<le> 2 * \\<Delta> + \\<bar>f p - g q\\<bar>", "by simp"], ["proof (state)\nthis:\n  \\<Delta> + \\<bar>f p - g q\\<bar> + \\<bar>fiX g q r - g q\\<bar>\n  \\<le> 2 * \\<Delta> + \\<bar>f p - g q\\<bar>\n\ngoal (1 subgoal):\n 1. \\<bar>fiX f p r - fiX g q r\\<bar> \\<le> 2 * \\<Delta> + x + y", "also"], ["proof (state)\nthis:\n  \\<Delta> + \\<bar>f p - g q\\<bar> + \\<bar>fiX g q r - g q\\<bar>\n  \\<le> 2 * \\<Delta> + \\<bar>f p - g q\\<bar>\n\ngoal (1 subgoal):\n 1. \\<bar>fiX f p r - fiX g q r\\<bar> \\<le> 2 * \\<Delta> + x + y", "have \"... = 2 * \\<Delta> + \\<bar>f p - f q + (f q - g q) \\<bar> \""], ["proof (prove)\ngoal (1 subgoal):\n 1. 2 * \\<Delta> + \\<bar>f p - g q\\<bar> =\n    2 * \\<Delta> + \\<bar>f p - f q + (f q - g q)\\<bar>", "by simp"], ["proof (state)\nthis:\n  2 * \\<Delta> + \\<bar>f p - g q\\<bar> =\n  2 * \\<Delta> + \\<bar>f p - f q + (f q - g q)\\<bar>\n\ngoal (1 subgoal):\n 1. \\<bar>fiX f p r - fiX g q r\\<bar> \\<le> 2 * \\<Delta> + x + y", "also"], ["proof (state)\nthis:\n  2 * \\<Delta> + \\<bar>f p - g q\\<bar> =\n  2 * \\<Delta> + \\<bar>f p - f q + (f q - g q)\\<bar>\n\ngoal (1 subgoal):\n 1. \\<bar>fiX f p r - fiX g q r\\<bar> \\<le> 2 * \\<Delta> + x + y", "from abs_triangle_ineq[where a = \"f p - f q\" and \n                               b = \"f q - g q\"]"], ["proof (chain)\npicking this:\n  \\<bar>f p - f q + (f q - g q)\\<bar>\n  \\<le> \\<bar>f p - f q\\<bar> + \\<bar>f q - g q\\<bar>", "have \"... <= 2 * \\<Delta> + \\<bar>f p - f q \\<bar> + \\<bar> f q - g q \\<bar> \""], ["proof (prove)\nusing this:\n  \\<bar>f p - f q + (f q - g q)\\<bar>\n  \\<le> \\<bar>f p - f q\\<bar> + \\<bar>f q - g q\\<bar>\n\ngoal (1 subgoal):\n 1. 2 * \\<Delta> + \\<bar>f p - f q + (f q - g q)\\<bar>\n    \\<le> 2 * \\<Delta> + \\<bar>f p - f q\\<bar> + \\<bar>f q - g q\\<bar>", "by simp"], ["proof (state)\nthis:\n  2 * \\<Delta> + \\<bar>f p - f q + (f q - g q)\\<bar>\n  \\<le> 2 * \\<Delta> + \\<bar>f p - f q\\<bar> + \\<bar>f q - g q\\<bar>\n\ngoal (1 subgoal):\n 1. \\<bar>fiX f p r - fiX g q r\\<bar> \\<le> 2 * \\<Delta> + x + y", "finally"], ["proof (chain)\npicking this:\n  \\<bar>fiX f p r - fiX g q r\\<bar>\n  \\<le> 2 * \\<Delta> + \\<bar>f p - f q\\<bar> + \\<bar>f q - g q\\<bar>", "show ?thesis"], ["proof (prove)\nusing this:\n  \\<bar>fiX f p r - fiX g q r\\<bar>\n  \\<le> 2 * \\<Delta> + \\<bar>f p - f q\\<bar> + \\<bar>f q - g q\\<bar>\n\ngoal (1 subgoal):\n 1. \\<bar>fiX f p r - fiX g q r\\<bar> \\<le> 2 * \\<Delta> + x + y", "using hbx hby hpC hqC"], ["proof (prove)\nusing this:\n  \\<bar>fiX f p r - fiX g q r\\<bar>\n  \\<le> 2 * \\<Delta> + \\<bar>f p - f q\\<bar> + \\<bar>f q - g q\\<bar>\n  \\<forall>l\\<in>C. \\<bar>f l - g l\\<bar> \\<le> x\n  \\<forall>l\\<in>C. \\<forall>m\\<in>C. \\<bar>f l - f m\\<bar> \\<le> y\n  p \\<in> C\n  q \\<in> C\n\ngoal (1 subgoal):\n 1. \\<bar>fiX f p r - fiX g q r\\<bar> \\<le> 2 * \\<Delta> + x + y", "by force"], ["proof (state)\nthis:\n  \\<bar>fiX f p r - fiX g q r\\<bar> \\<le> 2 * \\<Delta> + x + y\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma abs_dif_fiX_bound_C_aux1:\nassumes \n  hbx: \"\\<forall> l\\<in>C. \\<bar>f l - g l\\<bar> <= x\" and\n  hby1: \"\\<forall> l\\<in>C. \\<forall> m\\<in>C. \\<bar>f l - f m\\<bar> <= y\" and\n  hby2: \"\\<forall> l\\<in>C. \\<forall> m\\<in>C. \\<bar>g l - g m\\<bar> <= y\" and\n  hpC: \"p\\<in>C\" and\n  hqC: \"q\\<in>C\" and\n  hrC: \"r\\<in>C\" \nshows\n  \"\\<bar>fiX f p r - fiX g q r\\<bar> <= x + y\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<bar>fiX f p r - fiX g q r\\<bar> \\<le> x + y", "proof(cases \"\\<bar>f p - f r\\<bar> \\<le> \\<Delta>\")"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<bar>f p - f r\\<bar> \\<le> \\<Delta> \\<Longrightarrow>\n    \\<bar>fiX f p r - fiX g q r\\<bar> \\<le> x + y\n 2. \\<not> \\<bar>f p - f r\\<bar> \\<le> \\<Delta> \\<Longrightarrow>\n    \\<bar>fiX f p r - fiX g q r\\<bar> \\<le> x + y", "case True"], ["proof (state)\nthis:\n  \\<bar>f p - f r\\<bar> \\<le> \\<Delta>\n\ngoal (2 subgoals):\n 1. \\<bar>f p - f r\\<bar> \\<le> \\<Delta> \\<Longrightarrow>\n    \\<bar>fiX f p r - fiX g q r\\<bar> \\<le> x + y\n 2. \\<not> \\<bar>f p - f r\\<bar> \\<le> \\<Delta> \\<Longrightarrow>\n    \\<bar>fiX f p r - fiX g q r\\<bar> \\<le> x + y", "note outer_IH = True"], ["proof (state)\nthis:\n  \\<bar>f p - f r\\<bar> \\<le> \\<Delta>\n\ngoal (2 subgoals):\n 1. \\<bar>f p - f r\\<bar> \\<le> \\<Delta> \\<Longrightarrow>\n    \\<bar>fiX f p r - fiX g q r\\<bar> \\<le> x + y\n 2. \\<not> \\<bar>f p - f r\\<bar> \\<le> \\<Delta> \\<Longrightarrow>\n    \\<bar>fiX f p r - fiX g q r\\<bar> \\<le> x + y", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<bar>fiX f p r - fiX g q r\\<bar> \\<le> x + y", "proof(cases \"\\<bar>g q - g r\\<bar> \\<le> \\<Delta>\")"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<bar>g q - g r\\<bar> \\<le> \\<Delta> \\<Longrightarrow>\n    \\<bar>fiX f p r - fiX g q r\\<bar> \\<le> x + y\n 2. \\<not> \\<bar>g q - g r\\<bar> \\<le> \\<Delta> \\<Longrightarrow>\n    \\<bar>fiX f p r - fiX g q r\\<bar> \\<le> x + y", "case True"], ["proof (state)\nthis:\n  \\<bar>g q - g r\\<bar> \\<le> \\<Delta>\n\ngoal (2 subgoals):\n 1. \\<bar>g q - g r\\<bar> \\<le> \\<Delta> \\<Longrightarrow>\n    \\<bar>fiX f p r - fiX g q r\\<bar> \\<le> x + y\n 2. \\<not> \\<bar>g q - g r\\<bar> \\<le> \\<Delta> \\<Longrightarrow>\n    \\<bar>fiX f p r - fiX g q r\\<bar> \\<le> x + y", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<bar>fiX f p r - fiX g q r\\<bar> \\<le> x + y", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<bar>fiX f p r - fiX g q r\\<bar> \\<le> x + y", "from hpC and hby1"], ["proof (chain)\npicking this:\n  p \\<in> C\n  \\<forall>l\\<in>C. \\<forall>m\\<in>C. \\<bar>f l - f m\\<bar> \\<le> y", "have \"0<=y\""], ["proof (prove)\nusing this:\n  p \\<in> C\n  \\<forall>l\\<in>C. \\<forall>m\\<in>C. \\<bar>f l - f m\\<bar> \\<le> y\n\ngoal (1 subgoal):\n 1. 0 \\<le> y", "by force"], ["proof (state)\nthis:\n  0 \\<le> y\n\ngoal (1 subgoal):\n 1. \\<bar>fiX f p r - fiX g q r\\<bar> \\<le> x + y", "with hrC and hbx"], ["proof (chain)\npicking this:\n  r \\<in> C\n  \\<forall>l\\<in>C. \\<bar>f l - g l\\<bar> \\<le> x\n  0 \\<le> y", "have \"\\<bar> f r - g r \\<bar> <= x + y\""], ["proof (prove)\nusing this:\n  r \\<in> C\n  \\<forall>l\\<in>C. \\<bar>f l - g l\\<bar> \\<le> x\n  0 \\<le> y\n\ngoal (1 subgoal):\n 1. \\<bar>f r - g r\\<bar> \\<le> x + y", "by auto"], ["proof (state)\nthis:\n  \\<bar>f r - g r\\<bar> \\<le> x + y\n\ngoal (1 subgoal):\n 1. \\<bar>fiX f p r - fiX g q r\\<bar> \\<le> x + y", "with outer_IH and True"], ["proof (chain)\npicking this:\n  \\<bar>f p - f r\\<bar> \\<le> \\<Delta>\n  \\<bar>g q - g r\\<bar> \\<le> \\<Delta>\n  \\<bar>f r - g r\\<bar> \\<le> x + y", "show ?thesis"], ["proof (prove)\nusing this:\n  \\<bar>f p - f r\\<bar> \\<le> \\<Delta>\n  \\<bar>g q - g r\\<bar> \\<le> \\<Delta>\n  \\<bar>f r - g r\\<bar> \\<le> x + y\n\ngoal (1 subgoal):\n 1. \\<bar>fiX f p r - fiX g q r\\<bar> \\<le> x + y", "by (auto simp add: fiX_def)"], ["proof (state)\nthis:\n  \\<bar>fiX f p r - fiX g q r\\<bar> \\<le> x + y\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<bar>fiX f p r - fiX g q r\\<bar> \\<le> x + y\n\ngoal (1 subgoal):\n 1. \\<not> \\<bar>g q - g r\\<bar> \\<le> \\<Delta> \\<Longrightarrow>\n    \\<bar>fiX f p r - fiX g q r\\<bar> \\<le> x + y", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<not> \\<bar>g q - g r\\<bar> \\<le> \\<Delta> \\<Longrightarrow>\n    \\<bar>fiX f p r - fiX g q r\\<bar> \\<le> x + y", "case False"], ["proof (state)\nthis:\n  \\<not> \\<bar>g q - g r\\<bar> \\<le> \\<Delta>\n\ngoal (1 subgoal):\n 1. \\<not> \\<bar>g q - g r\\<bar> \\<le> \\<Delta> \\<Longrightarrow>\n    \\<bar>fiX f p r - fiX g q r\\<bar> \\<le> x + y", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<bar>fiX f p r - fiX g q r\\<bar> \\<le> x + y", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<bar>fiX f p r - fiX g q r\\<bar> \\<le> x + y", "from outer_IH and False"], ["proof (chain)\npicking this:\n  \\<bar>f p - f r\\<bar> \\<le> \\<Delta>\n  \\<not> \\<bar>g q - g r\\<bar> \\<le> \\<Delta>", "have \"\\<bar>fiX f p r - fiX g q r\\<bar> = \\<bar>f r - g q\\<bar>\""], ["proof (prove)\nusing this:\n  \\<bar>f p - f r\\<bar> \\<le> \\<Delta>\n  \\<not> \\<bar>g q - g r\\<bar> \\<le> \\<Delta>\n\ngoal (1 subgoal):\n 1. \\<bar>fiX f p r - fiX g q r\\<bar> = \\<bar>f r - g q\\<bar>", "by  (auto simp add: fiX_def)"], ["proof (state)\nthis:\n  \\<bar>fiX f p r - fiX g q r\\<bar> = \\<bar>f r - g q\\<bar>\n\ngoal (1 subgoal):\n 1. \\<bar>fiX f p r - fiX g q r\\<bar> \\<le> x + y", "also"], ["proof (state)\nthis:\n  \\<bar>fiX f p r - fiX g q r\\<bar> = \\<bar>f r - g q\\<bar>\n\ngoal (1 subgoal):\n 1. \\<bar>fiX f p r - fiX g q r\\<bar> \\<le> x + y", "have \"... = \\<bar> f r - f q + f q - g q \\<bar>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<bar>f r - g q\\<bar> = \\<bar>f r - f q + f q - g q\\<bar>", "by simp"], ["proof (state)\nthis:\n  \\<bar>f r - g q\\<bar> = \\<bar>f r - f q + f q - g q\\<bar>\n\ngoal (1 subgoal):\n 1. \\<bar>fiX f p r - fiX g q r\\<bar> \\<le> x + y", "also"], ["proof (state)\nthis:\n  \\<bar>f r - g q\\<bar> = \\<bar>f r - f q + f q - g q\\<bar>\n\ngoal (1 subgoal):\n 1. \\<bar>fiX f p r - fiX g q r\\<bar> \\<le> x + y", "have \"... <= \\<bar> f r - f q \\<bar> + \\<bar> f q - g q \\<bar>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<bar>f r - f q + f q - g q\\<bar>\n    \\<le> \\<bar>f r - f q\\<bar> + \\<bar>f q - g q\\<bar>", "by arith"], ["proof (state)\nthis:\n  \\<bar>f r - f q + f q - g q\\<bar>\n  \\<le> \\<bar>f r - f q\\<bar> + \\<bar>f q - g q\\<bar>\n\ngoal (1 subgoal):\n 1. \\<bar>fiX f p r - fiX g q r\\<bar> \\<le> x + y", "also"], ["proof (state)\nthis:\n  \\<bar>f r - f q + f q - g q\\<bar>\n  \\<le> \\<bar>f r - f q\\<bar> + \\<bar>f q - g q\\<bar>\n\ngoal (1 subgoal):\n 1. \\<bar>fiX f p r - fiX g q r\\<bar> \\<le> x + y", "from hbx hby1 hpC hqC hrC"], ["proof (chain)\npicking this:\n  \\<forall>l\\<in>C. \\<bar>f l - g l\\<bar> \\<le> x\n  \\<forall>l\\<in>C. \\<forall>m\\<in>C. \\<bar>f l - f m\\<bar> \\<le> y\n  p \\<in> C\n  q \\<in> C\n  r \\<in> C", "have \"... <= x + y\""], ["proof (prove)\nusing this:\n  \\<forall>l\\<in>C. \\<bar>f l - g l\\<bar> \\<le> x\n  \\<forall>l\\<in>C. \\<forall>m\\<in>C. \\<bar>f l - f m\\<bar> \\<le> y\n  p \\<in> C\n  q \\<in> C\n  r \\<in> C\n\ngoal (1 subgoal):\n 1. \\<bar>f r - f q\\<bar> + \\<bar>f q - g q\\<bar> \\<le> x + y", "by force"], ["proof (state)\nthis:\n  \\<bar>f r - f q\\<bar> + \\<bar>f q - g q\\<bar> \\<le> x + y\n\ngoal (1 subgoal):\n 1. \\<bar>fiX f p r - fiX g q r\\<bar> \\<le> x + y", "finally"], ["proof (chain)\npicking this:\n  \\<bar>fiX f p r - fiX g q r\\<bar> \\<le> x + y", "show ?thesis"], ["proof (prove)\nusing this:\n  \\<bar>fiX f p r - fiX g q r\\<bar> \\<le> x + y\n\ngoal (1 subgoal):\n 1. \\<bar>fiX f p r - fiX g q r\\<bar> \\<le> x + y", "."], ["proof (state)\nthis:\n  \\<bar>fiX f p r - fiX g q r\\<bar> \\<le> x + y\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<bar>fiX f p r - fiX g q r\\<bar> \\<le> x + y\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<bar>fiX f p r - fiX g q r\\<bar> \\<le> x + y\n\ngoal (1 subgoal):\n 1. \\<not> \\<bar>f p - f r\\<bar> \\<le> \\<Delta> \\<Longrightarrow>\n    \\<bar>fiX f p r - fiX g q r\\<bar> \\<le> x + y", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<not> \\<bar>f p - f r\\<bar> \\<le> \\<Delta> \\<Longrightarrow>\n    \\<bar>fiX f p r - fiX g q r\\<bar> \\<le> x + y", "case False"], ["proof (state)\nthis:\n  \\<not> \\<bar>f p - f r\\<bar> \\<le> \\<Delta>\n\ngoal (1 subgoal):\n 1. \\<not> \\<bar>f p - f r\\<bar> \\<le> \\<Delta> \\<Longrightarrow>\n    \\<bar>fiX f p r - fiX g q r\\<bar> \\<le> x + y", "note outer_IH = False"], ["proof (state)\nthis:\n  \\<not> \\<bar>f p - f r\\<bar> \\<le> \\<Delta>\n\ngoal (1 subgoal):\n 1. \\<not> \\<bar>f p - f r\\<bar> \\<le> \\<Delta> \\<Longrightarrow>\n    \\<bar>fiX f p r - fiX g q r\\<bar> \\<le> x + y", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<bar>fiX f p r - fiX g q r\\<bar> \\<le> x + y", "proof(cases \"\\<bar>g q - g r\\<bar> \\<le> \\<Delta>\")"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<bar>g q - g r\\<bar> \\<le> \\<Delta> \\<Longrightarrow>\n    \\<bar>fiX f p r - fiX g q r\\<bar> \\<le> x + y\n 2. \\<not> \\<bar>g q - g r\\<bar> \\<le> \\<Delta> \\<Longrightarrow>\n    \\<bar>fiX f p r - fiX g q r\\<bar> \\<le> x + y", "case True"], ["proof (state)\nthis:\n  \\<bar>g q - g r\\<bar> \\<le> \\<Delta>\n\ngoal (2 subgoals):\n 1. \\<bar>g q - g r\\<bar> \\<le> \\<Delta> \\<Longrightarrow>\n    \\<bar>fiX f p r - fiX g q r\\<bar> \\<le> x + y\n 2. \\<not> \\<bar>g q - g r\\<bar> \\<le> \\<Delta> \\<Longrightarrow>\n    \\<bar>fiX f p r - fiX g q r\\<bar> \\<le> x + y", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<bar>fiX f p r - fiX g q r\\<bar> \\<le> x + y", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<bar>fiX f p r - fiX g q r\\<bar> \\<le> x + y", "from outer_IH and True"], ["proof (chain)\npicking this:\n  \\<not> \\<bar>f p - f r\\<bar> \\<le> \\<Delta>\n  \\<bar>g q - g r\\<bar> \\<le> \\<Delta>", "have \"\\<bar>fiX f p r - fiX g q r\\<bar> = \\<bar>f p - g r\\<bar>\""], ["proof (prove)\nusing this:\n  \\<not> \\<bar>f p - f r\\<bar> \\<le> \\<Delta>\n  \\<bar>g q - g r\\<bar> \\<le> \\<Delta>\n\ngoal (1 subgoal):\n 1. \\<bar>fiX f p r - fiX g q r\\<bar> = \\<bar>f p - g r\\<bar>", "by  (auto simp add: fiX_def)"], ["proof (state)\nthis:\n  \\<bar>fiX f p r - fiX g q r\\<bar> = \\<bar>f p - g r\\<bar>\n\ngoal (1 subgoal):\n 1. \\<bar>fiX f p r - fiX g q r\\<bar> \\<le> x + y", "also"], ["proof (state)\nthis:\n  \\<bar>fiX f p r - fiX g q r\\<bar> = \\<bar>f p - g r\\<bar>\n\ngoal (1 subgoal):\n 1. \\<bar>fiX f p r - fiX g q r\\<bar> \\<le> x + y", "have \"... = \\<bar> f p - f r + f r - g r \\<bar>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<bar>f p - g r\\<bar> = \\<bar>f p - f r + f r - g r\\<bar>", "by simp"], ["proof (state)\nthis:\n  \\<bar>f p - g r\\<bar> = \\<bar>f p - f r + f r - g r\\<bar>\n\ngoal (1 subgoal):\n 1. \\<bar>fiX f p r - fiX g q r\\<bar> \\<le> x + y", "also"], ["proof (state)\nthis:\n  \\<bar>f p - g r\\<bar> = \\<bar>f p - f r + f r - g r\\<bar>\n\ngoal (1 subgoal):\n 1. \\<bar>fiX f p r - fiX g q r\\<bar> \\<le> x + y", "from abs_triangle_ineq[where a = \"f p - f r\" and \n                                   b = \"f r - g r\"]"], ["proof (chain)\npicking this:\n  \\<bar>f p - f r + (f r - g r)\\<bar>\n  \\<le> \\<bar>f p - f r\\<bar> + \\<bar>f r - g r\\<bar>", "have \"... <= \\<bar> f p - f r \\<bar> + \\<bar> f r - g r \\<bar>\""], ["proof (prove)\nusing this:\n  \\<bar>f p - f r + (f r - g r)\\<bar>\n  \\<le> \\<bar>f p - f r\\<bar> + \\<bar>f r - g r\\<bar>\n\ngoal (1 subgoal):\n 1. \\<bar>f p - f r + f r - g r\\<bar>\n    \\<le> \\<bar>f p - f r\\<bar> + \\<bar>f r - g r\\<bar>", "by auto"], ["proof (state)\nthis:\n  \\<bar>f p - f r + f r - g r\\<bar>\n  \\<le> \\<bar>f p - f r\\<bar> + \\<bar>f r - g r\\<bar>\n\ngoal (1 subgoal):\n 1. \\<bar>fiX f p r - fiX g q r\\<bar> \\<le> x + y", "also"], ["proof (state)\nthis:\n  \\<bar>f p - f r + f r - g r\\<bar>\n  \\<le> \\<bar>f p - f r\\<bar> + \\<bar>f r - g r\\<bar>\n\ngoal (1 subgoal):\n 1. \\<bar>fiX f p r - fiX g q r\\<bar> \\<le> x + y", "from hbx hby1 hpC hrC"], ["proof (chain)\npicking this:\n  \\<forall>l\\<in>C. \\<bar>f l - g l\\<bar> \\<le> x\n  \\<forall>l\\<in>C. \\<forall>m\\<in>C. \\<bar>f l - f m\\<bar> \\<le> y\n  p \\<in> C\n  r \\<in> C", "have \"... <= x + y\""], ["proof (prove)\nusing this:\n  \\<forall>l\\<in>C. \\<bar>f l - g l\\<bar> \\<le> x\n  \\<forall>l\\<in>C. \\<forall>m\\<in>C. \\<bar>f l - f m\\<bar> \\<le> y\n  p \\<in> C\n  r \\<in> C\n\ngoal (1 subgoal):\n 1. \\<bar>f p - f r\\<bar> + \\<bar>f r - g r\\<bar> \\<le> x + y", "by force"], ["proof (state)\nthis:\n  \\<bar>f p - f r\\<bar> + \\<bar>f r - g r\\<bar> \\<le> x + y\n\ngoal (1 subgoal):\n 1. \\<bar>fiX f p r - fiX g q r\\<bar> \\<le> x + y", "finally"], ["proof (chain)\npicking this:\n  \\<bar>fiX f p r - fiX g q r\\<bar> \\<le> x + y", "show ?thesis"], ["proof (prove)\nusing this:\n  \\<bar>fiX f p r - fiX g q r\\<bar> \\<le> x + y\n\ngoal (1 subgoal):\n 1. \\<bar>fiX f p r - fiX g q r\\<bar> \\<le> x + y", "."], ["proof (state)\nthis:\n  \\<bar>fiX f p r - fiX g q r\\<bar> \\<le> x + y\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<bar>fiX f p r - fiX g q r\\<bar> \\<le> x + y\n\ngoal (1 subgoal):\n 1. \\<not> \\<bar>g q - g r\\<bar> \\<le> \\<Delta> \\<Longrightarrow>\n    \\<bar>fiX f p r - fiX g q r\\<bar> \\<le> x + y", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<not> \\<bar>g q - g r\\<bar> \\<le> \\<Delta> \\<Longrightarrow>\n    \\<bar>fiX f p r - fiX g q r\\<bar> \\<le> x + y", "case False"], ["proof (state)\nthis:\n  \\<not> \\<bar>g q - g r\\<bar> \\<le> \\<Delta>\n\ngoal (1 subgoal):\n 1. \\<not> \\<bar>g q - g r\\<bar> \\<le> \\<Delta> \\<Longrightarrow>\n    \\<bar>fiX f p r - fiX g q r\\<bar> \\<le> x + y", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<bar>fiX f p r - fiX g q r\\<bar> \\<le> x + y", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<bar>fiX f p r - fiX g q r\\<bar> \\<le> x + y", "from outer_IH and False"], ["proof (chain)\npicking this:\n  \\<not> \\<bar>f p - f r\\<bar> \\<le> \\<Delta>\n  \\<not> \\<bar>g q - g r\\<bar> \\<le> \\<Delta>", "have \"\\<bar>fiX f p r - fiX g q r\\<bar> = \\<bar>f p - g q\\<bar>\""], ["proof (prove)\nusing this:\n  \\<not> \\<bar>f p - f r\\<bar> \\<le> \\<Delta>\n  \\<not> \\<bar>g q - g r\\<bar> \\<le> \\<Delta>\n\ngoal (1 subgoal):\n 1. \\<bar>fiX f p r - fiX g q r\\<bar> = \\<bar>f p - g q\\<bar>", "by  (auto simp add: fiX_def)"], ["proof (state)\nthis:\n  \\<bar>fiX f p r - fiX g q r\\<bar> = \\<bar>f p - g q\\<bar>\n\ngoal (1 subgoal):\n 1. \\<bar>fiX f p r - fiX g q r\\<bar> \\<le> x + y", "also"], ["proof (state)\nthis:\n  \\<bar>fiX f p r - fiX g q r\\<bar> = \\<bar>f p - g q\\<bar>\n\ngoal (1 subgoal):\n 1. \\<bar>fiX f p r - fiX g q r\\<bar> \\<le> x + y", "have \"... = \\<bar> f p - f q + f q - g q \\<bar>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<bar>f p - g q\\<bar> = \\<bar>f p - f q + f q - g q\\<bar>", "by simp"], ["proof (state)\nthis:\n  \\<bar>f p - g q\\<bar> = \\<bar>f p - f q + f q - g q\\<bar>\n\ngoal (1 subgoal):\n 1. \\<bar>fiX f p r - fiX g q r\\<bar> \\<le> x + y", "also"], ["proof (state)\nthis:\n  \\<bar>f p - g q\\<bar> = \\<bar>f p - f q + f q - g q\\<bar>\n\ngoal (1 subgoal):\n 1. \\<bar>fiX f p r - fiX g q r\\<bar> \\<le> x + y", "from abs_triangle_ineq[where a = \"f p - f q\" and \n                                   b = \"f q - g q\"]"], ["proof (chain)\npicking this:\n  \\<bar>f p - f q + (f q - g q)\\<bar>\n  \\<le> \\<bar>f p - f q\\<bar> + \\<bar>f q - g q\\<bar>", "have \"... <= \\<bar> f p - f q \\<bar> + \\<bar> f q - g q \\<bar>\""], ["proof (prove)\nusing this:\n  \\<bar>f p - f q + (f q - g q)\\<bar>\n  \\<le> \\<bar>f p - f q\\<bar> + \\<bar>f q - g q\\<bar>\n\ngoal (1 subgoal):\n 1. \\<bar>f p - f q + f q - g q\\<bar>\n    \\<le> \\<bar>f p - f q\\<bar> + \\<bar>f q - g q\\<bar>", "by auto"], ["proof (state)\nthis:\n  \\<bar>f p - f q + f q - g q\\<bar>\n  \\<le> \\<bar>f p - f q\\<bar> + \\<bar>f q - g q\\<bar>\n\ngoal (1 subgoal):\n 1. \\<bar>fiX f p r - fiX g q r\\<bar> \\<le> x + y", "also"], ["proof (state)\nthis:\n  \\<bar>f p - f q + f q - g q\\<bar>\n  \\<le> \\<bar>f p - f q\\<bar> + \\<bar>f q - g q\\<bar>\n\ngoal (1 subgoal):\n 1. \\<bar>fiX f p r - fiX g q r\\<bar> \\<le> x + y", "from hbx hby1 hpC hqC"], ["proof (chain)\npicking this:\n  \\<forall>l\\<in>C. \\<bar>f l - g l\\<bar> \\<le> x\n  \\<forall>l\\<in>C. \\<forall>m\\<in>C. \\<bar>f l - f m\\<bar> \\<le> y\n  p \\<in> C\n  q \\<in> C", "have \"... <= x + y\""], ["proof (prove)\nusing this:\n  \\<forall>l\\<in>C. \\<bar>f l - g l\\<bar> \\<le> x\n  \\<forall>l\\<in>C. \\<forall>m\\<in>C. \\<bar>f l - f m\\<bar> \\<le> y\n  p \\<in> C\n  q \\<in> C\n\ngoal (1 subgoal):\n 1. \\<bar>f p - f q\\<bar> + \\<bar>f q - g q\\<bar> \\<le> x + y", "by force"], ["proof (state)\nthis:\n  \\<bar>f p - f q\\<bar> + \\<bar>f q - g q\\<bar> \\<le> x + y\n\ngoal (1 subgoal):\n 1. \\<bar>fiX f p r - fiX g q r\\<bar> \\<le> x + y", "finally"], ["proof (chain)\npicking this:\n  \\<bar>fiX f p r - fiX g q r\\<bar> \\<le> x + y", "show ?thesis"], ["proof (prove)\nusing this:\n  \\<bar>fiX f p r - fiX g q r\\<bar> \\<le> x + y\n\ngoal (1 subgoal):\n 1. \\<bar>fiX f p r - fiX g q r\\<bar> \\<le> x + y", "."], ["proof (state)\nthis:\n  \\<bar>fiX f p r - fiX g q r\\<bar> \\<le> x + y\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<bar>fiX f p r - fiX g q r\\<bar> \\<le> x + y\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<bar>fiX f p r - fiX g q r\\<bar> \\<le> x + y\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma abs_dif_fiX_bound_C_aux2:\nassumes \n  hbx: \"\\<forall> l\\<in>C. \\<bar>f l - g l\\<bar> <= x\" and\n  hby1: \"\\<forall> l\\<in>C. \\<forall> m\\<in>C. \\<bar>f l - f m\\<bar> <= y\" and\n  hby2: \"\\<forall> l\\<in>C. \\<forall> m\\<in>C. \\<bar>g l - g m\\<bar> <= y\" and\n  hpC: \"p\\<in>C\" and\n  hqC: \"q\\<in>C\" and\n  hrC: \"r\\<in>C\" \nshows\n  \"y <= \\<Delta> \\<longrightarrow> \\<bar>fiX f p r - fiX g q r\\<bar> <= x\""], ["proof (prove)\ngoal (1 subgoal):\n 1. y \\<le> \\<Delta> \\<longrightarrow>\n    \\<bar>fiX f p r - fiX g q r\\<bar> \\<le> x", "proof"], ["proof (state)\ngoal (1 subgoal):\n 1. y \\<le> \\<Delta> \\<Longrightarrow>\n    \\<bar>fiX f p r - fiX g q r\\<bar> \\<le> x", "assume hyd: \"y<=\\<Delta>\""], ["proof (state)\nthis:\n  y \\<le> \\<Delta>\n\ngoal (1 subgoal):\n 1. y \\<le> \\<Delta> \\<Longrightarrow>\n    \\<bar>fiX f p r - fiX g q r\\<bar> \\<le> x", "show \"\\<bar>fiX f p r - fiX g q r\\<bar> <= x\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<bar>fiX f p r - fiX g q r\\<bar> \\<le> x", "proof-"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<bar>fiX f p r - fiX g q r\\<bar> \\<le> x", "from hpC and hrC and hby1 and hyd"], ["proof (chain)\npicking this:\n  p \\<in> C\n  r \\<in> C\n  \\<forall>l\\<in>C. \\<forall>m\\<in>C. \\<bar>f l - f m\\<bar> \\<le> y\n  y \\<le> \\<Delta>", "have \"\\<bar>f p - f r\\<bar> \\<le> \\<Delta>\""], ["proof (prove)\nusing this:\n  p \\<in> C\n  r \\<in> C\n  \\<forall>l\\<in>C. \\<forall>m\\<in>C. \\<bar>f l - f m\\<bar> \\<le> y\n  y \\<le> \\<Delta>\n\ngoal (1 subgoal):\n 1. \\<bar>f p - f r\\<bar> \\<le> \\<Delta>", "by force"], ["proof (state)\nthis:\n  \\<bar>f p - f r\\<bar> \\<le> \\<Delta>\n\ngoal (1 subgoal):\n 1. \\<bar>fiX f p r - fiX g q r\\<bar> \\<le> x", "moreover"], ["proof (state)\nthis:\n  \\<bar>f p - f r\\<bar> \\<le> \\<Delta>\n\ngoal (1 subgoal):\n 1. \\<bar>fiX f p r - fiX g q r\\<bar> \\<le> x", "from hqC and hrC and hby2 and hyd"], ["proof (chain)\npicking this:\n  q \\<in> C\n  r \\<in> C\n  \\<forall>l\\<in>C. \\<forall>m\\<in>C. \\<bar>g l - g m\\<bar> \\<le> y\n  y \\<le> \\<Delta>", "have \"\\<bar>g q - g r\\<bar> \\<le> \\<Delta>\""], ["proof (prove)\nusing this:\n  q \\<in> C\n  r \\<in> C\n  \\<forall>l\\<in>C. \\<forall>m\\<in>C. \\<bar>g l - g m\\<bar> \\<le> y\n  y \\<le> \\<Delta>\n\ngoal (1 subgoal):\n 1. \\<bar>g q - g r\\<bar> \\<le> \\<Delta>", "by force"], ["proof (state)\nthis:\n  \\<bar>g q - g r\\<bar> \\<le> \\<Delta>\n\ngoal (1 subgoal):\n 1. \\<bar>fiX f p r - fiX g q r\\<bar> \\<le> x", "moreover"], ["proof (state)\nthis:\n  \\<bar>g q - g r\\<bar> \\<le> \\<Delta>\n\ngoal (1 subgoal):\n 1. \\<bar>fiX f p r - fiX g q r\\<bar> \\<le> x", "from hrC and hbx"], ["proof (chain)\npicking this:\n  r \\<in> C\n  \\<forall>l\\<in>C. \\<bar>f l - g l\\<bar> \\<le> x", "have \"\\<bar> f r - g r \\<bar> <= x \""], ["proof (prove)\nusing this:\n  r \\<in> C\n  \\<forall>l\\<in>C. \\<bar>f l - g l\\<bar> \\<le> x\n\ngoal (1 subgoal):\n 1. \\<bar>f r - g r\\<bar> \\<le> x", "by auto"], ["proof (state)\nthis:\n  \\<bar>f r - g r\\<bar> \\<le> x\n\ngoal (1 subgoal):\n 1. \\<bar>fiX f p r - fiX g q r\\<bar> \\<le> x", "ultimately"], ["proof (chain)\npicking this:\n  \\<bar>f p - f r\\<bar> \\<le> \\<Delta>\n  \\<bar>g q - g r\\<bar> \\<le> \\<Delta>\n  \\<bar>f r - g r\\<bar> \\<le> x", "show ?thesis"], ["proof (prove)\nusing this:\n  \\<bar>f p - f r\\<bar> \\<le> \\<Delta>\n  \\<bar>g q - g r\\<bar> \\<le> \\<Delta>\n  \\<bar>f r - g r\\<bar> \\<le> x\n\ngoal (1 subgoal):\n 1. \\<bar>fiX f p r - fiX g q r\\<bar> \\<le> x", "by (auto simp add: fiX_def)"], ["proof (state)\nthis:\n  \\<bar>fiX f p r - fiX g q r\\<bar> \\<le> x\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<bar>fiX f p r - fiX g q r\\<bar> \\<le> x\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma abs_dif_fiX_bound_C:\nassumes \n  hbx: \"\\<forall> l\\<in>C. \\<bar>f l - g l\\<bar> <= x\" and\n  hby1: \"\\<forall> l\\<in>C. \\<forall> m\\<in>C. \\<bar>f l - f m\\<bar> <= y\" and\n  hby2: \"\\<forall> l\\<in>C. \\<forall> m\\<in>C. \\<bar>g l - g m\\<bar> <= y\" and\n  hpC: \"p\\<in>C\" and\n  hqC: \"q\\<in>C\" and\n  hrC: \"r\\<in>C\" \nshows\n  \"\\<bar>fiX f p r - fiX g q r\\<bar> <= \n                     x + (if (y <= \\<Delta>) then 0 else y)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<bar>fiX f p r - fiX g q r\\<bar>\n    \\<le> x + (if y \\<le> \\<Delta> then 0 else y)", "proof (cases \"y <= \\<Delta>\")"], ["proof (state)\ngoal (2 subgoals):\n 1. y \\<le> \\<Delta> \\<Longrightarrow>\n    \\<bar>fiX f p r - fiX g q r\\<bar>\n    \\<le> x + (if y \\<le> \\<Delta> then 0 else y)\n 2. \\<not> y \\<le> \\<Delta> \\<Longrightarrow>\n    \\<bar>fiX f p r - fiX g q r\\<bar>\n    \\<le> x + (if y \\<le> \\<Delta> then 0 else y)", "case True"], ["proof (state)\nthis:\n  y \\<le> \\<Delta>\n\ngoal (2 subgoals):\n 1. y \\<le> \\<Delta> \\<Longrightarrow>\n    \\<bar>fiX f p r - fiX g q r\\<bar>\n    \\<le> x + (if y \\<le> \\<Delta> then 0 else y)\n 2. \\<not> y \\<le> \\<Delta> \\<Longrightarrow>\n    \\<bar>fiX f p r - fiX g q r\\<bar>\n    \\<le> x + (if y \\<le> \\<Delta> then 0 else y)", "with abs_dif_fiX_bound_C_aux2 and\n    hbx and hby1 and hby2 and hpC and hqC and hrC"], ["proof (chain)\npicking this:\n  \\<lbrakk>\\<forall>l\\<in>?C. \\<bar>?f l - ?g l\\<bar> \\<le> ?x;\n   \\<forall>l\\<in>?C. \\<forall>m\\<in>?C. \\<bar>?f l - ?f m\\<bar> \\<le> ?y;\n   \\<forall>l\\<in>?C. \\<forall>m\\<in>?C. \\<bar>?g l - ?g m\\<bar> \\<le> ?y;\n   ?p \\<in> ?C; ?q \\<in> ?C; ?r \\<in> ?C\\<rbrakk>\n  \\<Longrightarrow> ?y \\<le> \\<Delta> \\<longrightarrow>\n                    \\<bar>fiX ?f ?p ?r - fiX ?g ?q ?r\\<bar> \\<le> ?x\n  \\<forall>l\\<in>C. \\<bar>f l - g l\\<bar> \\<le> x\n  \\<forall>l\\<in>C. \\<forall>m\\<in>C. \\<bar>f l - f m\\<bar> \\<le> y\n  \\<forall>l\\<in>C. \\<forall>m\\<in>C. \\<bar>g l - g m\\<bar> \\<le> y\n  p \\<in> C\n  q \\<in> C\n  r \\<in> C\n  y \\<le> \\<Delta>", "have \"\\<bar>fiX f p r - fiX g q r\\<bar> <= x \""], ["proof (prove)\nusing this:\n  \\<lbrakk>\\<forall>l\\<in>?C. \\<bar>?f l - ?g l\\<bar> \\<le> ?x;\n   \\<forall>l\\<in>?C. \\<forall>m\\<in>?C. \\<bar>?f l - ?f m\\<bar> \\<le> ?y;\n   \\<forall>l\\<in>?C. \\<forall>m\\<in>?C. \\<bar>?g l - ?g m\\<bar> \\<le> ?y;\n   ?p \\<in> ?C; ?q \\<in> ?C; ?r \\<in> ?C\\<rbrakk>\n  \\<Longrightarrow> ?y \\<le> \\<Delta> \\<longrightarrow>\n                    \\<bar>fiX ?f ?p ?r - fiX ?g ?q ?r\\<bar> \\<le> ?x\n  \\<forall>l\\<in>C. \\<bar>f l - g l\\<bar> \\<le> x\n  \\<forall>l\\<in>C. \\<forall>m\\<in>C. \\<bar>f l - f m\\<bar> \\<le> y\n  \\<forall>l\\<in>C. \\<forall>m\\<in>C. \\<bar>g l - g m\\<bar> \\<le> y\n  p \\<in> C\n  q \\<in> C\n  r \\<in> C\n  y \\<le> \\<Delta>\n\ngoal (1 subgoal):\n 1. \\<bar>fiX f p r - fiX g q r\\<bar> \\<le> x", "by blast"], ["proof (state)\nthis:\n  \\<bar>fiX f p r - fiX g q r\\<bar> \\<le> x\n\ngoal (2 subgoals):\n 1. y \\<le> \\<Delta> \\<Longrightarrow>\n    \\<bar>fiX f p r - fiX g q r\\<bar>\n    \\<le> x + (if y \\<le> \\<Delta> then 0 else y)\n 2. \\<not> y \\<le> \\<Delta> \\<Longrightarrow>\n    \\<bar>fiX f p r - fiX g q r\\<bar>\n    \\<le> x + (if y \\<le> \\<Delta> then 0 else y)", "with True"], ["proof (chain)\npicking this:\n  y \\<le> \\<Delta>\n  \\<bar>fiX f p r - fiX g q r\\<bar> \\<le> x", "show \"?thesis\""], ["proof (prove)\nusing this:\n  y \\<le> \\<Delta>\n  \\<bar>fiX f p r - fiX g q r\\<bar> \\<le> x\n\ngoal (1 subgoal):\n 1. \\<bar>fiX f p r - fiX g q r\\<bar>\n    \\<le> x + (if y \\<le> \\<Delta> then 0 else y)", "by simp"], ["proof (state)\nthis:\n  \\<bar>fiX f p r - fiX g q r\\<bar>\n  \\<le> x + (if y \\<le> \\<Delta> then 0 else y)\n\ngoal (1 subgoal):\n 1. \\<not> y \\<le> \\<Delta> \\<Longrightarrow>\n    \\<bar>fiX f p r - fiX g q r\\<bar>\n    \\<le> x + (if y \\<le> \\<Delta> then 0 else y)", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<not> y \\<le> \\<Delta> \\<Longrightarrow>\n    \\<bar>fiX f p r - fiX g q r\\<bar>\n    \\<le> x + (if y \\<le> \\<Delta> then 0 else y)", "case False"], ["proof (state)\nthis:\n  \\<not> y \\<le> \\<Delta>\n\ngoal (1 subgoal):\n 1. \\<not> y \\<le> \\<Delta> \\<Longrightarrow>\n    \\<bar>fiX f p r - fiX g q r\\<bar>\n    \\<le> x + (if y \\<le> \\<Delta> then 0 else y)", "with abs_dif_fiX_bound_C_aux1 and\n    hbx and hby1 and hby2 and hpC and hqC and hrC"], ["proof (chain)\npicking this:\n  \\<lbrakk>\\<forall>l\\<in>?C. \\<bar>?f l - ?g l\\<bar> \\<le> ?x;\n   \\<forall>l\\<in>?C. \\<forall>m\\<in>?C. \\<bar>?f l - ?f m\\<bar> \\<le> ?y;\n   \\<forall>l\\<in>?C. \\<forall>m\\<in>?C. \\<bar>?g l - ?g m\\<bar> \\<le> ?y;\n   ?p \\<in> ?C; ?q \\<in> ?C; ?r \\<in> ?C\\<rbrakk>\n  \\<Longrightarrow> \\<bar>fiX ?f ?p ?r - fiX ?g ?q ?r\\<bar> \\<le> ?x + ?y\n  \\<forall>l\\<in>C. \\<bar>f l - g l\\<bar> \\<le> x\n  \\<forall>l\\<in>C. \\<forall>m\\<in>C. \\<bar>f l - f m\\<bar> \\<le> y\n  \\<forall>l\\<in>C. \\<forall>m\\<in>C. \\<bar>g l - g m\\<bar> \\<le> y\n  p \\<in> C\n  q \\<in> C\n  r \\<in> C\n  \\<not> y \\<le> \\<Delta>", "have \"\\<bar>fiX f p r - fiX g q r\\<bar> <= x + y\""], ["proof (prove)\nusing this:\n  \\<lbrakk>\\<forall>l\\<in>?C. \\<bar>?f l - ?g l\\<bar> \\<le> ?x;\n   \\<forall>l\\<in>?C. \\<forall>m\\<in>?C. \\<bar>?f l - ?f m\\<bar> \\<le> ?y;\n   \\<forall>l\\<in>?C. \\<forall>m\\<in>?C. \\<bar>?g l - ?g m\\<bar> \\<le> ?y;\n   ?p \\<in> ?C; ?q \\<in> ?C; ?r \\<in> ?C\\<rbrakk>\n  \\<Longrightarrow> \\<bar>fiX ?f ?p ?r - fiX ?g ?q ?r\\<bar> \\<le> ?x + ?y\n  \\<forall>l\\<in>C. \\<bar>f l - g l\\<bar> \\<le> x\n  \\<forall>l\\<in>C. \\<forall>m\\<in>C. \\<bar>f l - f m\\<bar> \\<le> y\n  \\<forall>l\\<in>C. \\<forall>m\\<in>C. \\<bar>g l - g m\\<bar> \\<le> y\n  p \\<in> C\n  q \\<in> C\n  r \\<in> C\n  \\<not> y \\<le> \\<Delta>\n\ngoal (1 subgoal):\n 1. \\<bar>fiX f p r - fiX g q r\\<bar> \\<le> x + y", "by blast"], ["proof (state)\nthis:\n  \\<bar>fiX f p r - fiX g q r\\<bar> \\<le> x + y\n\ngoal (1 subgoal):\n 1. \\<not> y \\<le> \\<Delta> \\<Longrightarrow>\n    \\<bar>fiX f p r - fiX g q r\\<bar>\n    \\<le> x + (if y \\<le> \\<Delta> then 0 else y)", "with False"], ["proof (chain)\npicking this:\n  \\<not> y \\<le> \\<Delta>\n  \\<bar>fiX f p r - fiX g q r\\<bar> \\<le> x + y", "show \"?thesis\""], ["proof (prove)\nusing this:\n  \\<not> y \\<le> \\<Delta>\n  \\<bar>fiX f p r - fiX g q r\\<bar> \\<le> x + y\n\ngoal (1 subgoal):\n 1. \\<bar>fiX f p r - fiX g q r\\<bar>\n    \\<le> x + (if y \\<le> \\<Delta> then 0 else y)", "by simp"], ["proof (state)\nthis:\n  \\<bar>fiX f p r - fiX g q r\\<bar>\n  \\<le> x + (if y \\<le> \\<Delta> then 0 else y)\n\ngoal:\nNo subgoals!", "qed"], ["", "subsubsection \\<open>Main theorem\\<close>"], ["", "theorem prec_enh:\nassumes \n  hC: \"C \\<subseteq> PR\" and\n  hbx: \"\\<forall> l\\<in>C. \\<bar>f l - g l\\<bar> <= x\" and\n  hby1: \"\\<forall> l\\<in>C. \\<forall> m\\<in>C. \\<bar>f l - f m\\<bar> <= y\" and\n  hby2: \"\\<forall> l\\<in>C. \\<forall> m\\<in>C. \\<bar>g l - g m\\<bar> <= y\" and\n  hpC: \"p\\<in>C\" and\n  hqC: \"q\\<in>C\" \nshows \"\\<bar> cfni p f - cfni q g \\<bar> <= \n  (real (card C) * (x + (if (y <= \\<Delta>) then 0 else y)) +\n    real (card ({..<np} - C)) * (2 * \\<Delta> + x + y)) / real np\"\n       (is \"\\<bar> ?dif_div_np \\<bar> <= ?B\")"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<bar>cfni p f - cfni q g\\<bar>\n    \\<le> (real (card C) * (x + (if y \\<le> \\<Delta> then 0 else y)) +\n           real (card ({..<np} - C)) * (2 * \\<Delta> + x + y)) /\n          real np", "proof-"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<bar>cfni p f - cfni q g\\<bar>\n    \\<le> (real (card C) * (x + (if y \\<le> \\<Delta> then 0 else y)) +\n           real (card ({..<np} - C)) * (2 * \\<Delta> + x + y)) /\n          real np", "have \"\\<bar>(\\<Sum>l\\<in>{..<np}. fiX f p l ) - \n                    (\\<Sum>l\\<in>{..<np}. fiX g q l)\\<bar> = \n    \\<bar>(\\<Sum>l\\<in>{..<np}. fiX f p l -fiX g q l)\\<bar>\"\n    (is \"\\<bar>?dif\\<bar> = \\<bar>?dif'\\<bar>\" )"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<bar>sum (fiX f p) {..<np} - sum (fiX g q) {..<np}\\<bar> =\n    \\<bar>\\<Sum>l<np. fiX f p l - fiX g q l\\<bar>", "by (simp add: sum_subtractf)"], ["proof (state)\nthis:\n  \\<bar>sum (fiX f p) {..<np} - sum (fiX g q) {..<np}\\<bar> =\n  \\<bar>\\<Sum>l<np. fiX f p l - fiX g q l\\<bar>\n\ngoal (1 subgoal):\n 1. \\<bar>cfni p f - cfni q g\\<bar>\n    \\<le> (real (card C) * (x + (if y \\<le> \\<Delta> then 0 else y)) +\n           real (card ({..<np} - C)) * (2 * \\<Delta> + x + y)) /\n          real np", "also"], ["proof (state)\nthis:\n  \\<bar>sum (fiX f p) {..<np} - sum (fiX g q) {..<np}\\<bar> =\n  \\<bar>\\<Sum>l<np. fiX f p l - fiX g q l\\<bar>\n\ngoal (1 subgoal):\n 1. \\<bar>cfni p f - cfni q g\\<bar>\n    \\<le> (real (card C) * (x + (if y \\<le> \\<Delta> then 0 else y)) +\n           real (card ({..<np} - C)) * (2 * \\<Delta> + x + y)) /\n          real np", "from abs_sum_np_ineq hC"], ["proof (chain)\npicking this:\n  ?C \\<subseteq> PR \\<Longrightarrow>\n  \\<bar>sum ?f {..<np}\\<bar>\n  \\<le> (\\<Sum>l\\<in>?C. \\<bar>?f l\\<bar>) +\n        (\\<Sum>l\\<in>{..<np} - ?C. \\<bar>?f l\\<bar>)\n  C \\<subseteq> PR", "have \" ... <=\n      (\\<Sum>l\\<in>C. \\<bar>fiX f p l - fiX g q l\\<bar>) + \n      (\\<Sum>l\\<in>({..<np}-C). \\<bar>fiX f p l - fiX g q l\\<bar>)\"\n    (is \" \\<bar>?dif'\\<bar> <= ?boundC' + ?boundnpC'\" )"], ["proof (prove)\nusing this:\n  ?C \\<subseteq> PR \\<Longrightarrow>\n  \\<bar>sum ?f {..<np}\\<bar>\n  \\<le> (\\<Sum>l\\<in>?C. \\<bar>?f l\\<bar>) +\n        (\\<Sum>l\\<in>{..<np} - ?C. \\<bar>?f l\\<bar>)\n  C \\<subseteq> PR\n\ngoal (1 subgoal):\n 1. \\<bar>\\<Sum>l<np. fiX f p l - fiX g q l\\<bar>\n    \\<le> (\\<Sum>l\\<in>C. \\<bar>fiX f p l - fiX g q l\\<bar>) +\n          (\\<Sum>l\\<in>{..<np} - C. \\<bar>fiX f p l - fiX g q l\\<bar>)", "by simp"], ["proof (state)\nthis:\n  \\<bar>\\<Sum>l<np. fiX f p l - fiX g q l\\<bar>\n  \\<le> (\\<Sum>l\\<in>C. \\<bar>fiX f p l - fiX g q l\\<bar>) +\n        (\\<Sum>l\\<in>{..<np} - C. \\<bar>fiX f p l - fiX g q l\\<bar>)\n\ngoal (1 subgoal):\n 1. \\<bar>cfni p f - cfni q g\\<bar>\n    \\<le> (real (card C) * (x + (if y \\<le> \\<Delta> then 0 else y)) +\n           real (card ({..<np} - C)) * (2 * \\<Delta> + x + y)) /\n          real np", "also"], ["proof (state)\nthis:\n  \\<bar>\\<Sum>l<np. fiX f p l - fiX g q l\\<bar>\n  \\<le> (\\<Sum>l\\<in>C. \\<bar>fiX f p l - fiX g q l\\<bar>) +\n        (\\<Sum>l\\<in>{..<np} - C. \\<bar>fiX f p l - fiX g q l\\<bar>)\n\ngoal (1 subgoal):\n 1. \\<bar>cfni p f - cfni q g\\<bar>\n    \\<le> (real (card C) * (x + (if y \\<le> \\<Delta> then 0 else y)) +\n           real (card ({..<np} - C)) * (2 * \\<Delta> + x + y)) /\n          real np", "have \"... <= \n    real (card C) * (x + (if (y <= \\<Delta>) then 0 else y))+\n    real (card ({..<np}-C)) * (2 * \\<Delta> + x + y)\"\n    (is \" ... <= ?boundC + ?boundnpC\" )"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>l\\<in>C. \\<bar>fiX f p l - fiX g q l\\<bar>) +\n    (\\<Sum>l\\<in>{..<np} - C. \\<bar>fiX f p l - fiX g q l\\<bar>)\n    \\<le> real (card C) * (x + (if y \\<le> \\<Delta> then 0 else y)) +\n          real (card ({..<np} - C)) * (2 * \\<Delta> + x + y)", "proof-"], ["proof (state)\ngoal (1 subgoal):\n 1. (\\<Sum>l\\<in>C. \\<bar>fiX f p l - fiX g q l\\<bar>) +\n    (\\<Sum>l\\<in>{..<np} - C. \\<bar>fiX f p l - fiX g q l\\<bar>)\n    \\<le> real (card C) * (x + (if y \\<le> \\<Delta> then 0 else y)) +\n          real (card ({..<np} - C)) * (2 * \\<Delta> + x + y)", "have \" ?boundC' <= ?boundC\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>l\\<in>C. \\<bar>fiX f p l - fiX g q l\\<bar>)\n    \\<le> real (card C) * (x + (if y \\<le> \\<Delta> then 0 else y))", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. (\\<Sum>l\\<in>C. \\<bar>fiX f p l - fiX g q l\\<bar>)\n    \\<le> real (card C) * (x + (if y \\<le> \\<Delta> then 0 else y))", "from abs_dif_fiX_bound_C and \n        hbx and hby1 and hby2 and  hpC and hqC"], ["proof (chain)\npicking this:\n  \\<lbrakk>\\<forall>l\\<in>?C. \\<bar>?f l - ?g l\\<bar> \\<le> ?x;\n   \\<forall>l\\<in>?C. \\<forall>m\\<in>?C. \\<bar>?f l - ?f m\\<bar> \\<le> ?y;\n   \\<forall>l\\<in>?C. \\<forall>m\\<in>?C. \\<bar>?g l - ?g m\\<bar> \\<le> ?y;\n   ?p \\<in> ?C; ?q \\<in> ?C; ?r \\<in> ?C\\<rbrakk>\n  \\<Longrightarrow> \\<bar>fiX ?f ?p ?r - fiX ?g ?q ?r\\<bar>\n                    \\<le> ?x + (if ?y \\<le> \\<Delta> then 0 else ?y)\n  \\<forall>l\\<in>C. \\<bar>f l - g l\\<bar> \\<le> x\n  \\<forall>l\\<in>C. \\<forall>m\\<in>C. \\<bar>f l - f m\\<bar> \\<le> y\n  \\<forall>l\\<in>C. \\<forall>m\\<in>C. \\<bar>g l - g m\\<bar> \\<le> y\n  p \\<in> C\n  q \\<in> C", "have \"\\<forall>r\\<in>C. \n        \\<bar>fiX f p r - fiX g q r\\<bar> <= x + \n                         (if (y <= \\<Delta>) then 0 else y)\""], ["proof (prove)\nusing this:\n  \\<lbrakk>\\<forall>l\\<in>?C. \\<bar>?f l - ?g l\\<bar> \\<le> ?x;\n   \\<forall>l\\<in>?C. \\<forall>m\\<in>?C. \\<bar>?f l - ?f m\\<bar> \\<le> ?y;\n   \\<forall>l\\<in>?C. \\<forall>m\\<in>?C. \\<bar>?g l - ?g m\\<bar> \\<le> ?y;\n   ?p \\<in> ?C; ?q \\<in> ?C; ?r \\<in> ?C\\<rbrakk>\n  \\<Longrightarrow> \\<bar>fiX ?f ?p ?r - fiX ?g ?q ?r\\<bar>\n                    \\<le> ?x + (if ?y \\<le> \\<Delta> then 0 else ?y)\n  \\<forall>l\\<in>C. \\<bar>f l - g l\\<bar> \\<le> x\n  \\<forall>l\\<in>C. \\<forall>m\\<in>C. \\<bar>f l - f m\\<bar> \\<le> y\n  \\<forall>l\\<in>C. \\<forall>m\\<in>C. \\<bar>g l - g m\\<bar> \\<le> y\n  p \\<in> C\n  q \\<in> C\n\ngoal (1 subgoal):\n 1. \\<forall>r\\<in>C.\n       \\<bar>fiX f p r - fiX g q r\\<bar>\n       \\<le> x + (if y \\<le> \\<Delta> then 0 else y)", "by blast"], ["proof (state)\nthis:\n  \\<forall>r\\<in>C.\n     \\<bar>fiX f p r - fiX g q r\\<bar>\n     \\<le> x + (if y \\<le> \\<Delta> then 0 else y)\n\ngoal (1 subgoal):\n 1. (\\<Sum>l\\<in>C. \\<bar>fiX f p l - fiX g q l\\<bar>)\n    \\<le> real (card C) * (x + (if y \\<le> \\<Delta> then 0 else y))", "thus ?thesis"], ["proof (prove)\nusing this:\n  \\<forall>r\\<in>C.\n     \\<bar>fiX f p r - fiX g q r\\<bar>\n     \\<le> x + (if y \\<le> \\<Delta> then 0 else y)\n\ngoal (1 subgoal):\n 1. (\\<Sum>l\\<in>C. \\<bar>fiX f p l - fiX g q l\\<bar>)\n    \\<le> real (card C) * (x + (if y \\<le> \\<Delta> then 0 else y))", "using sum_le[where S=C] and finitC[OF hC]"], ["proof (prove)\nusing this:\n  \\<forall>r\\<in>C.\n     \\<bar>fiX f p r - fiX g q r\\<bar>\n     \\<le> x + (if y \\<le> \\<Delta> then 0 else y)\n  \\<lbrakk>finite C; \\<forall>r\\<in>C. ?f r \\<le> ?b\\<rbrakk>\n  \\<Longrightarrow> sum ?f C \\<le> real (card C) * ?b\n  finite C\n\ngoal (1 subgoal):\n 1. (\\<Sum>l\\<in>C. \\<bar>fiX f p l - fiX g q l\\<bar>)\n    \\<le> real (card C) * (x + (if y \\<le> \\<Delta> then 0 else y))", "by force"], ["proof (state)\nthis:\n  (\\<Sum>l\\<in>C. \\<bar>fiX f p l - fiX g q l\\<bar>)\n  \\<le> real (card C) * (x + (if y \\<le> \\<Delta> then 0 else y))\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  (\\<Sum>l\\<in>C. \\<bar>fiX f p l - fiX g q l\\<bar>)\n  \\<le> real (card C) * (x + (if y \\<le> \\<Delta> then 0 else y))\n\ngoal (1 subgoal):\n 1. (\\<Sum>l\\<in>C. \\<bar>fiX f p l - fiX g q l\\<bar>) +\n    (\\<Sum>l\\<in>{..<np} - C. \\<bar>fiX f p l - fiX g q l\\<bar>)\n    \\<le> real (card C) * (x + (if y \\<le> \\<Delta> then 0 else y)) +\n          real (card ({..<np} - C)) * (2 * \\<Delta> + x + y)", "moreover"], ["proof (state)\nthis:\n  (\\<Sum>l\\<in>C. \\<bar>fiX f p l - fiX g q l\\<bar>)\n  \\<le> real (card C) * (x + (if y \\<le> \\<Delta> then 0 else y))\n\ngoal (1 subgoal):\n 1. (\\<Sum>l\\<in>C. \\<bar>fiX f p l - fiX g q l\\<bar>) +\n    (\\<Sum>l\\<in>{..<np} - C. \\<bar>fiX f p l - fiX g q l\\<bar>)\n    \\<le> real (card C) * (x + (if y \\<le> \\<Delta> then 0 else y)) +\n          real (card ({..<np} - C)) * (2 * \\<Delta> + x + y)", "have \"?boundnpC' <= ?boundnpC\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>l\\<in>{..<np} - C. \\<bar>fiX f p l - fiX g q l\\<bar>)\n    \\<le> real (card ({..<np} - C)) * (2 * \\<Delta> + x + y)", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. (\\<Sum>l\\<in>{..<np} - C. \\<bar>fiX f p l - fiX g q l\\<bar>)\n    \\<le> real (card ({..<np} - C)) * (2 * \\<Delta> + x + y)", "from abs_dif_fiX_bound and \n        hbx and hby1 and  hpC and hqC"], ["proof (chain)\npicking this:\n  \\<lbrakk>\\<forall>l\\<in>?C. \\<bar>?f l - ?g l\\<bar> \\<le> ?x;\n   \\<forall>l\\<in>?C. \\<forall>m\\<in>?C. \\<bar>?f l - ?f m\\<bar> \\<le> ?y;\n   ?p \\<in> ?C; ?q \\<in> ?C\\<rbrakk>\n  \\<Longrightarrow> \\<bar>fiX ?f ?p ?r - fiX ?g ?q ?r\\<bar>\n                    \\<le> 2 * \\<Delta> + ?x + ?y\n  \\<forall>l\\<in>C. \\<bar>f l - g l\\<bar> \\<le> x\n  \\<forall>l\\<in>C. \\<forall>m\\<in>C. \\<bar>f l - f m\\<bar> \\<le> y\n  p \\<in> C\n  q \\<in> C", "have \"\\<forall>r\\<in>({..<np}-C). \\<bar>fiX f p r - fiX g q r\\<bar> <= 2 * \\<Delta> + x + y\""], ["proof (prove)\nusing this:\n  \\<lbrakk>\\<forall>l\\<in>?C. \\<bar>?f l - ?g l\\<bar> \\<le> ?x;\n   \\<forall>l\\<in>?C. \\<forall>m\\<in>?C. \\<bar>?f l - ?f m\\<bar> \\<le> ?y;\n   ?p \\<in> ?C; ?q \\<in> ?C\\<rbrakk>\n  \\<Longrightarrow> \\<bar>fiX ?f ?p ?r - fiX ?g ?q ?r\\<bar>\n                    \\<le> 2 * \\<Delta> + ?x + ?y\n  \\<forall>l\\<in>C. \\<bar>f l - g l\\<bar> \\<le> x\n  \\<forall>l\\<in>C. \\<forall>m\\<in>C. \\<bar>f l - f m\\<bar> \\<le> y\n  p \\<in> C\n  q \\<in> C\n\ngoal (1 subgoal):\n 1. \\<forall>r\\<in>{..<np} - C.\n       \\<bar>fiX f p r - fiX g q r\\<bar> \\<le> 2 * \\<Delta> + x + y", "by blast"], ["proof (state)\nthis:\n  \\<forall>r\\<in>{..<np} - C.\n     \\<bar>fiX f p r - fiX g q r\\<bar> \\<le> 2 * \\<Delta> + x + y\n\ngoal (1 subgoal):\n 1. (\\<Sum>l\\<in>{..<np} - C. \\<bar>fiX f p l - fiX g q l\\<bar>)\n    \\<le> real (card ({..<np} - C)) * (2 * \\<Delta> + x + y)", "with finitnpC"], ["proof (chain)\npicking this:\n  finite (PR - ?C)\n  \\<forall>r\\<in>{..<np} - C.\n     \\<bar>fiX f p r - fiX g q r\\<bar> \\<le> 2 * \\<Delta> + x + y", "show ?thesis"], ["proof (prove)\nusing this:\n  finite (PR - ?C)\n  \\<forall>r\\<in>{..<np} - C.\n     \\<bar>fiX f p r - fiX g q r\\<bar> \\<le> 2 * \\<Delta> + x + y\n\ngoal (1 subgoal):\n 1. (\\<Sum>l\\<in>{..<np} - C. \\<bar>fiX f p l - fiX g q l\\<bar>)\n    \\<le> real (card ({..<np} - C)) * (2 * \\<Delta> + x + y)", "by (auto intro: sum_le)"], ["proof (state)\nthis:\n  (\\<Sum>l\\<in>{..<np} - C. \\<bar>fiX f p l - fiX g q l\\<bar>)\n  \\<le> real (card ({..<np} - C)) * (2 * \\<Delta> + x + y)\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  (\\<Sum>l\\<in>{..<np} - C. \\<bar>fiX f p l - fiX g q l\\<bar>)\n  \\<le> real (card ({..<np} - C)) * (2 * \\<Delta> + x + y)\n\ngoal (1 subgoal):\n 1. (\\<Sum>l\\<in>C. \\<bar>fiX f p l - fiX g q l\\<bar>) +\n    (\\<Sum>l\\<in>{..<np} - C. \\<bar>fiX f p l - fiX g q l\\<bar>)\n    \\<le> real (card C) * (x + (if y \\<le> \\<Delta> then 0 else y)) +\n          real (card ({..<np} - C)) * (2 * \\<Delta> + x + y)", "ultimately"], ["proof (chain)\npicking this:\n  (\\<Sum>l\\<in>C. \\<bar>fiX f p l - fiX g q l\\<bar>)\n  \\<le> real (card C) * (x + (if y \\<le> \\<Delta> then 0 else y))\n  (\\<Sum>l\\<in>{..<np} - C. \\<bar>fiX f p l - fiX g q l\\<bar>)\n  \\<le> real (card ({..<np} - C)) * (2 * \\<Delta> + x + y)", "show ?thesis"], ["proof (prove)\nusing this:\n  (\\<Sum>l\\<in>C. \\<bar>fiX f p l - fiX g q l\\<bar>)\n  \\<le> real (card C) * (x + (if y \\<le> \\<Delta> then 0 else y))\n  (\\<Sum>l\\<in>{..<np} - C. \\<bar>fiX f p l - fiX g q l\\<bar>)\n  \\<le> real (card ({..<np} - C)) * (2 * \\<Delta> + x + y)\n\ngoal (1 subgoal):\n 1. (\\<Sum>l\\<in>C. \\<bar>fiX f p l - fiX g q l\\<bar>) +\n    (\\<Sum>l\\<in>{..<np} - C. \\<bar>fiX f p l - fiX g q l\\<bar>)\n    \\<le> real (card C) * (x + (if y \\<le> \\<Delta> then 0 else y)) +\n          real (card ({..<np} - C)) * (2 * \\<Delta> + x + y)", "by arith"], ["proof (state)\nthis:\n  (\\<Sum>l\\<in>C. \\<bar>fiX f p l - fiX g q l\\<bar>) +\n  (\\<Sum>l\\<in>{..<np} - C. \\<bar>fiX f p l - fiX g q l\\<bar>)\n  \\<le> real (card C) * (x + (if y \\<le> \\<Delta> then 0 else y)) +\n        real (card ({..<np} - C)) * (2 * \\<Delta> + x + y)\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  (\\<Sum>l\\<in>C. \\<bar>fiX f p l - fiX g q l\\<bar>) +\n  (\\<Sum>l\\<in>{..<np} - C. \\<bar>fiX f p l - fiX g q l\\<bar>)\n  \\<le> real (card C) * (x + (if y \\<le> \\<Delta> then 0 else y)) +\n        real (card ({..<np} - C)) * (2 * \\<Delta> + x + y)\n\ngoal (1 subgoal):\n 1. \\<bar>cfni p f - cfni q g\\<bar>\n    \\<le> (real (card C) * (x + (if y \\<le> \\<Delta> then 0 else y)) +\n           real (card ({..<np} - C)) * (2 * \\<Delta> + x + y)) /\n          real np", "finally"], ["proof (chain)\npicking this:\n  \\<bar>sum (fiX f p) {..<np} - sum (fiX g q) {..<np}\\<bar>\n  \\<le> real (card C) * (x + (if y \\<le> \\<Delta> then 0 else y)) +\n        real (card ({..<np} - C)) * (2 * \\<Delta> + x + y)", "have bound: \"\\<bar>?dif\\<bar> <= ?boundC + ?boundnpC\""], ["proof (prove)\nusing this:\n  \\<bar>sum (fiX f p) {..<np} - sum (fiX g q) {..<np}\\<bar>\n  \\<le> real (card C) * (x + (if y \\<le> \\<Delta> then 0 else y)) +\n        real (card ({..<np} - C)) * (2 * \\<Delta> + x + y)\n\ngoal (1 subgoal):\n 1. \\<bar>sum (fiX f p) {..<np} - sum (fiX g q) {..<np}\\<bar>\n    \\<le> real (card C) * (x + (if y \\<le> \\<Delta> then 0 else y)) +\n          real (card ({..<np} - C)) * (2 * \\<Delta> + x + y)", "."], ["proof (state)\nthis:\n  \\<bar>sum (fiX f p) {..<np} - sum (fiX g q) {..<np}\\<bar>\n  \\<le> real (card C) * (x + (if y \\<le> \\<Delta> then 0 else y)) +\n        real (card ({..<np} - C)) * (2 * \\<Delta> + x + y)\n\ngoal (1 subgoal):\n 1. \\<bar>cfni p f - cfni q g\\<bar>\n    \\<le> (real (card C) * (x + (if y \\<le> \\<Delta> then 0 else y)) +\n           real (card ({..<np} - C)) * (2 * \\<Delta> + x + y)) /\n          real np", "thus ?thesis"], ["proof (prove)\nusing this:\n  \\<bar>sum (fiX f p) {..<np} - sum (fiX g q) {..<np}\\<bar>\n  \\<le> real (card C) * (x + (if y \\<le> \\<Delta> then 0 else y)) +\n        real (card ({..<np} - C)) * (2 * \\<Delta> + x + y)\n\ngoal (1 subgoal):\n 1. \\<bar>cfni p f - cfni q g\\<bar>\n    \\<le> (real (card C) * (x + (if y \\<le> \\<Delta> then 0 else y)) +\n           real (card ({..<np} - C)) * (2 * \\<Delta> + x + y)) /\n          real np", "proof-"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<bar>sum (fiX f p) {..<np} - sum (fiX g q) {..<np}\\<bar>\n    \\<le> real (card C) * (x + (if y \\<le> \\<Delta> then 0 else y)) +\n          real (card ({..<np} - C)) *\n          (2 * \\<Delta> + x + y) \\<Longrightarrow>\n    \\<bar>cfni p f - cfni q g\\<bar>\n    \\<le> (real (card C) * (x + (if y \\<le> \\<Delta> then 0 else y)) +\n           real (card ({..<np} - C)) * (2 * \\<Delta> + x + y)) /\n          real np", "have \"?dif_div_np = ?dif / real np\""], ["proof (prove)\ngoal (1 subgoal):\n 1. cfni p f - cfni q g =\n    (sum (fiX f p) {..<np} - sum (fiX g q) {..<np}) / real np", "by (simp add: cfni_def divide_inverse algebra_simps)"], ["proof (state)\nthis:\n  cfni p f - cfni q g =\n  (sum (fiX f p) {..<np} - sum (fiX g q) {..<np}) / real np\n\ngoal (1 subgoal):\n 1. \\<bar>sum (fiX f p) {..<np} - sum (fiX g q) {..<np}\\<bar>\n    \\<le> real (card C) * (x + (if y \\<le> \\<Delta> then 0 else y)) +\n          real (card ({..<np} - C)) *\n          (2 * \\<Delta> + x + y) \\<Longrightarrow>\n    \\<bar>cfni p f - cfni q g\\<bar>\n    \\<le> (real (card C) * (x + (if y \\<le> \\<Delta> then 0 else y)) +\n           real (card ({..<np} - C)) * (2 * \\<Delta> + x + y)) /\n          real np", "hence \"\\<bar> cfni p f - cfni q g \\<bar> = \\<bar>?dif\\<bar> / real np\""], ["proof (prove)\nusing this:\n  cfni p f - cfni q g =\n  (sum (fiX f p) {..<np} - sum (fiX g q) {..<np}) / real np\n\ngoal (1 subgoal):\n 1. \\<bar>cfni p f - cfni q g\\<bar> =\n    \\<bar>sum (fiX f p) {..<np} - sum (fiX g q) {..<np}\\<bar> / real np", "by force"], ["proof (state)\nthis:\n  \\<bar>cfni p f - cfni q g\\<bar> =\n  \\<bar>sum (fiX f p) {..<np} - sum (fiX g q) {..<np}\\<bar> / real np\n\ngoal (1 subgoal):\n 1. \\<bar>sum (fiX f p) {..<np} - sum (fiX g q) {..<np}\\<bar>\n    \\<le> real (card C) * (x + (if y \\<le> \\<Delta> then 0 else y)) +\n          real (card ({..<np} - C)) *\n          (2 * \\<Delta> + x + y) \\<Longrightarrow>\n    \\<bar>cfni p f - cfni q g\\<bar>\n    \\<le> (real (card C) * (x + (if y \\<le> \\<Delta> then 0 else y)) +\n           real (card ({..<np} - C)) * (2 * \\<Delta> + x + y)) /\n          real np", "with bound"], ["proof (chain)\npicking this:\n  \\<bar>sum (fiX f p) {..<np} - sum (fiX g q) {..<np}\\<bar>\n  \\<le> real (card C) * (x + (if y \\<le> \\<Delta> then 0 else y)) +\n        real (card ({..<np} - C)) * (2 * \\<Delta> + x + y)\n  \\<bar>cfni p f - cfni q g\\<bar> =\n  \\<bar>sum (fiX f p) {..<np} - sum (fiX g q) {..<np}\\<bar> / real np", "show \"?thesis\""], ["proof (prove)\nusing this:\n  \\<bar>sum (fiX f p) {..<np} - sum (fiX g q) {..<np}\\<bar>\n  \\<le> real (card C) * (x + (if y \\<le> \\<Delta> then 0 else y)) +\n        real (card ({..<np} - C)) * (2 * \\<Delta> + x + y)\n  \\<bar>cfni p f - cfni q g\\<bar> =\n  \\<bar>sum (fiX f p) {..<np} - sum (fiX g q) {..<np}\\<bar> / real np\n\ngoal (1 subgoal):\n 1. \\<bar>cfni p f - cfni q g\\<bar>\n    \\<le> (real (card C) * (x + (if y \\<le> \\<Delta> then 0 else y)) +\n           real (card ({..<np} - C)) * (2 * \\<Delta> + x + y)) /\n          real np", "by (auto simp add: cfni_def divide_inverse constants_ax)"], ["proof (state)\nthis:\n  \\<bar>cfni p f - cfni q g\\<bar>\n  \\<le> (real (card C) * (x + (if y \\<le> \\<Delta> then 0 else y)) +\n         real (card ({..<np} - C)) * (2 * \\<Delta> + x + y)) /\n        real np\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<bar>cfni p f - cfni q g\\<bar>\n  \\<le> (real (card C) * (x + (if y \\<le> \\<Delta> then 0 else y)) +\n         real (card ({..<np} - C)) * (2 * \\<Delta> + x + y)) /\n        real np\n\ngoal:\nNo subgoals!", "qed"], ["", "subsection \\<open>Accuracy Preservation property\\<close>"], ["", "text \\<open>First, a simple lemma about an arithmetic propertie of the\ngeneralized summation over a set constructor.\\<close>"], ["", "lemma sum_div_card:\n\"(\\<Sum>l\\<in>{..<n::nat}. f l) + q * real n= \n  (\\<Sum>l\\<in>{..<n}. f l + q )\"\n  (is \"?Sl n = ?Sr n\")"], ["proof (prove)\ngoal (1 subgoal):\n 1. sum f {..<n} + q * real n = (\\<Sum>l<n. f l + q)", "proof (induct n)"], ["proof (state)\ngoal (2 subgoals):\n 1. sum f {..<0} + q * real 0 = (\\<Sum>l<0. f l + q)\n 2. \\<And>n.\n       sum f {..<n} + q * real n = (\\<Sum>l<n. f l + q) \\<Longrightarrow>\n       sum f {..<Suc n} + q * real (Suc n) = (\\<Sum>l<Suc n. f l + q)", "case 0"], ["proof (state)\nthis:\n  \n\ngoal (2 subgoals):\n 1. sum f {..<0} + q * real 0 = (\\<Sum>l<0. f l + q)\n 2. \\<And>n.\n       sum f {..<n} + q * real n = (\\<Sum>l<n. f l + q) \\<Longrightarrow>\n       sum f {..<Suc n} + q * real (Suc n) = (\\<Sum>l<Suc n. f l + q)", "thus ?case"], ["proof (prove)\ngoal (1 subgoal):\n 1. sum f {..<0} + q * real 0 = (\\<Sum>l<0. f l + q)", "by simp"], ["proof (state)\nthis:\n  sum f {..<0} + q * real 0 = (\\<Sum>l<0. f l + q)\n\ngoal (1 subgoal):\n 1. \\<And>n.\n       sum f {..<n} + q * real n = (\\<Sum>l<n. f l + q) \\<Longrightarrow>\n       sum f {..<Suc n} + q * real (Suc n) = (\\<Sum>l<Suc n. f l + q)", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>n.\n       sum f {..<n} + q * real n = (\\<Sum>l<n. f l + q) \\<Longrightarrow>\n       sum f {..<Suc n} + q * real (Suc n) = (\\<Sum>l<Suc n. f l + q)", "case (Suc n)"], ["proof (state)\nthis:\n  sum f {..<n} + q * real n = (\\<Sum>l<n. f l + q)\n\ngoal (1 subgoal):\n 1. \\<And>n.\n       sum f {..<n} + q * real n = (\\<Sum>l<n. f l + q) \\<Longrightarrow>\n       sum f {..<Suc n} + q * real (Suc n) = (\\<Sum>l<Suc n. f l + q)", "thus ?case"], ["proof (prove)\nusing this:\n  sum f {..<n} + q * real n = (\\<Sum>l<n. f l + q)\n\ngoal (1 subgoal):\n 1. sum f {..<Suc n} + q * real (Suc n) = (\\<Sum>l<Suc n. f l + q)", "by (auto simp: of_nat_Suc distrib_left lessThan_Suc)"], ["proof (state)\nthis:\n  sum f {..<Suc n} + q * real (Suc n) = (\\<Sum>l<Suc n. f l + q)\n\ngoal:\nNo subgoals!", "qed"], ["", "text \\<open>Next, some lemmas about bounds that are used in the proof of Accuracy Preservation\\<close>"], ["", "lemma bound_aux_C:\nassumes\n  hby: \"\\<forall> l\\<in>C. \\<forall> m\\<in>C. \\<bar>f l - f m\\<bar> <= x\" and\n  hpC: \"p\\<in>C\" and\n  hqC: \"q\\<in>C\" and\n  hrC: \"r\\<in>C\" \nshows\n  \"\\<bar>fiX f p r - f q\\<bar> <= x\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<bar>fiX f p r - f q\\<bar> \\<le> x", "proof (cases \"\\<bar> f p - f r \\<bar> <= \\<Delta>\")"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<bar>f p - f r\\<bar> \\<le> \\<Delta> \\<Longrightarrow>\n    \\<bar>fiX f p r - f q\\<bar> \\<le> x\n 2. \\<not> \\<bar>f p - f r\\<bar> \\<le> \\<Delta> \\<Longrightarrow>\n    \\<bar>fiX f p r - f q\\<bar> \\<le> x", "case True"], ["proof (state)\nthis:\n  \\<bar>f p - f r\\<bar> \\<le> \\<Delta>\n\ngoal (2 subgoals):\n 1. \\<bar>f p - f r\\<bar> \\<le> \\<Delta> \\<Longrightarrow>\n    \\<bar>fiX f p r - f q\\<bar> \\<le> x\n 2. \\<not> \\<bar>f p - f r\\<bar> \\<le> \\<Delta> \\<Longrightarrow>\n    \\<bar>fiX f p r - f q\\<bar> \\<le> x", "then"], ["proof (chain)\npicking this:\n  \\<bar>f p - f r\\<bar> \\<le> \\<Delta>", "have \"\\<bar>fiX f p r - f q\\<bar> = \\<bar> f r - f q \\<bar>\""], ["proof (prove)\nusing this:\n  \\<bar>f p - f r\\<bar> \\<le> \\<Delta>\n\ngoal (1 subgoal):\n 1. \\<bar>fiX f p r - f q\\<bar> = \\<bar>f r - f q\\<bar>", "by (simp add: fiX_def)"], ["proof (state)\nthis:\n  \\<bar>fiX f p r - f q\\<bar> = \\<bar>f r - f q\\<bar>\n\ngoal (2 subgoals):\n 1. \\<bar>f p - f r\\<bar> \\<le> \\<Delta> \\<Longrightarrow>\n    \\<bar>fiX f p r - f q\\<bar> \\<le> x\n 2. \\<not> \\<bar>f p - f r\\<bar> \\<le> \\<Delta> \\<Longrightarrow>\n    \\<bar>fiX f p r - f q\\<bar> \\<le> x", "also"], ["proof (state)\nthis:\n  \\<bar>fiX f p r - f q\\<bar> = \\<bar>f r - f q\\<bar>\n\ngoal (2 subgoals):\n 1. \\<bar>f p - f r\\<bar> \\<le> \\<Delta> \\<Longrightarrow>\n    \\<bar>fiX f p r - f q\\<bar> \\<le> x\n 2. \\<not> \\<bar>f p - f r\\<bar> \\<le> \\<Delta> \\<Longrightarrow>\n    \\<bar>fiX f p r - f q\\<bar> \\<le> x", "from hby hqC hrC"], ["proof (chain)\npicking this:\n  \\<forall>l\\<in>C. \\<forall>m\\<in>C. \\<bar>f l - f m\\<bar> \\<le> x\n  q \\<in> C\n  r \\<in> C", "have \"... <= x\""], ["proof (prove)\nusing this:\n  \\<forall>l\\<in>C. \\<forall>m\\<in>C. \\<bar>f l - f m\\<bar> \\<le> x\n  q \\<in> C\n  r \\<in> C\n\ngoal (1 subgoal):\n 1. \\<bar>f r - f q\\<bar> \\<le> x", "by blast"], ["proof (state)\nthis:\n  \\<bar>f r - f q\\<bar> \\<le> x\n\ngoal (2 subgoals):\n 1. \\<bar>f p - f r\\<bar> \\<le> \\<Delta> \\<Longrightarrow>\n    \\<bar>fiX f p r - f q\\<bar> \\<le> x\n 2. \\<not> \\<bar>f p - f r\\<bar> \\<le> \\<Delta> \\<Longrightarrow>\n    \\<bar>fiX f p r - f q\\<bar> \\<le> x", "finally"], ["proof (chain)\npicking this:\n  \\<bar>fiX f p r - f q\\<bar> \\<le> x", "show ?thesis"], ["proof (prove)\nusing this:\n  \\<bar>fiX f p r - f q\\<bar> \\<le> x\n\ngoal (1 subgoal):\n 1. \\<bar>fiX f p r - f q\\<bar> \\<le> x", "."], ["proof (state)\nthis:\n  \\<bar>fiX f p r - f q\\<bar> \\<le> x\n\ngoal (1 subgoal):\n 1. \\<not> \\<bar>f p - f r\\<bar> \\<le> \\<Delta> \\<Longrightarrow>\n    \\<bar>fiX f p r - f q\\<bar> \\<le> x", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<not> \\<bar>f p - f r\\<bar> \\<le> \\<Delta> \\<Longrightarrow>\n    \\<bar>fiX f p r - f q\\<bar> \\<le> x", "case False"], ["proof (state)\nthis:\n  \\<not> \\<bar>f p - f r\\<bar> \\<le> \\<Delta>\n\ngoal (1 subgoal):\n 1. \\<not> \\<bar>f p - f r\\<bar> \\<le> \\<Delta> \\<Longrightarrow>\n    \\<bar>fiX f p r - f q\\<bar> \\<le> x", "then"], ["proof (chain)\npicking this:\n  \\<not> \\<bar>f p - f r\\<bar> \\<le> \\<Delta>", "have \"\\<bar>fiX f p r - f q\\<bar> = \\<bar> f p - f q \\<bar>\""], ["proof (prove)\nusing this:\n  \\<not> \\<bar>f p - f r\\<bar> \\<le> \\<Delta>\n\ngoal (1 subgoal):\n 1. \\<bar>fiX f p r - f q\\<bar> = \\<bar>f p - f q\\<bar>", "by (simp add: fiX_def)"], ["proof (state)\nthis:\n  \\<bar>fiX f p r - f q\\<bar> = \\<bar>f p - f q\\<bar>\n\ngoal (1 subgoal):\n 1. \\<not> \\<bar>f p - f r\\<bar> \\<le> \\<Delta> \\<Longrightarrow>\n    \\<bar>fiX f p r - f q\\<bar> \\<le> x", "also"], ["proof (state)\nthis:\n  \\<bar>fiX f p r - f q\\<bar> = \\<bar>f p - f q\\<bar>\n\ngoal (1 subgoal):\n 1. \\<not> \\<bar>f p - f r\\<bar> \\<le> \\<Delta> \\<Longrightarrow>\n    \\<bar>fiX f p r - f q\\<bar> \\<le> x", "from hby hpC hqC"], ["proof (chain)\npicking this:\n  \\<forall>l\\<in>C. \\<forall>m\\<in>C. \\<bar>f l - f m\\<bar> \\<le> x\n  p \\<in> C\n  q \\<in> C", "have \"... <= x\""], ["proof (prove)\nusing this:\n  \\<forall>l\\<in>C. \\<forall>m\\<in>C. \\<bar>f l - f m\\<bar> \\<le> x\n  p \\<in> C\n  q \\<in> C\n\ngoal (1 subgoal):\n 1. \\<bar>f p - f q\\<bar> \\<le> x", "by blast"], ["proof (state)\nthis:\n  \\<bar>f p - f q\\<bar> \\<le> x\n\ngoal (1 subgoal):\n 1. \\<not> \\<bar>f p - f r\\<bar> \\<le> \\<Delta> \\<Longrightarrow>\n    \\<bar>fiX f p r - f q\\<bar> \\<le> x", "finally"], ["proof (chain)\npicking this:\n  \\<bar>fiX f p r - f q\\<bar> \\<le> x", "show ?thesis"], ["proof (prove)\nusing this:\n  \\<bar>fiX f p r - f q\\<bar> \\<le> x\n\ngoal (1 subgoal):\n 1. \\<bar>fiX f p r - f q\\<bar> \\<le> x", "."], ["proof (state)\nthis:\n  \\<bar>fiX f p r - f q\\<bar> \\<le> x\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma bound_aux:\nassumes\n  hby: \"\\<forall> l\\<in>C. \\<forall> m\\<in>C. \\<bar>f l - f m\\<bar> <= x\" and\n  hpC: \"p\\<in>C\" and\n  hqC: \"q\\<in>C\" \nshows\n  \"\\<bar>fiX f p r - f q\\<bar> <= x + \\<Delta>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<bar>fiX f p r - f q\\<bar> \\<le> x + \\<Delta>", "proof (cases \"\\<bar> f p - f r \\<bar> <= \\<Delta>\")"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<bar>f p - f r\\<bar> \\<le> \\<Delta> \\<Longrightarrow>\n    \\<bar>fiX f p r - f q\\<bar> \\<le> x + \\<Delta>\n 2. \\<not> \\<bar>f p - f r\\<bar> \\<le> \\<Delta> \\<Longrightarrow>\n    \\<bar>fiX f p r - f q\\<bar> \\<le> x + \\<Delta>", "case True"], ["proof (state)\nthis:\n  \\<bar>f p - f r\\<bar> \\<le> \\<Delta>\n\ngoal (2 subgoals):\n 1. \\<bar>f p - f r\\<bar> \\<le> \\<Delta> \\<Longrightarrow>\n    \\<bar>fiX f p r - f q\\<bar> \\<le> x + \\<Delta>\n 2. \\<not> \\<bar>f p - f r\\<bar> \\<le> \\<Delta> \\<Longrightarrow>\n    \\<bar>fiX f p r - f q\\<bar> \\<le> x + \\<Delta>", "then"], ["proof (chain)\npicking this:\n  \\<bar>f p - f r\\<bar> \\<le> \\<Delta>", "have \"\\<bar>fiX f p r - f q\\<bar> = \\<bar> f r - f q \\<bar>\""], ["proof (prove)\nusing this:\n  \\<bar>f p - f r\\<bar> \\<le> \\<Delta>\n\ngoal (1 subgoal):\n 1. \\<bar>fiX f p r - f q\\<bar> = \\<bar>f r - f q\\<bar>", "by (simp add: fiX_def)"], ["proof (state)\nthis:\n  \\<bar>fiX f p r - f q\\<bar> = \\<bar>f r - f q\\<bar>\n\ngoal (2 subgoals):\n 1. \\<bar>f p - f r\\<bar> \\<le> \\<Delta> \\<Longrightarrow>\n    \\<bar>fiX f p r - f q\\<bar> \\<le> x + \\<Delta>\n 2. \\<not> \\<bar>f p - f r\\<bar> \\<le> \\<Delta> \\<Longrightarrow>\n    \\<bar>fiX f p r - f q\\<bar> \\<le> x + \\<Delta>", "also"], ["proof (state)\nthis:\n  \\<bar>fiX f p r - f q\\<bar> = \\<bar>f r - f q\\<bar>\n\ngoal (2 subgoals):\n 1. \\<bar>f p - f r\\<bar> \\<le> \\<Delta> \\<Longrightarrow>\n    \\<bar>fiX f p r - f q\\<bar> \\<le> x + \\<Delta>\n 2. \\<not> \\<bar>f p - f r\\<bar> \\<le> \\<Delta> \\<Longrightarrow>\n    \\<bar>fiX f p r - f q\\<bar> \\<le> x + \\<Delta>", "have \"... = \\<bar> (f r - f p) + (f p - f q) \\<bar>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<bar>f r - f q\\<bar> = \\<bar>f r - f p + (f p - f q)\\<bar>", "by arith"], ["proof (state)\nthis:\n  \\<bar>f r - f q\\<bar> = \\<bar>f r - f p + (f p - f q)\\<bar>\n\ngoal (2 subgoals):\n 1. \\<bar>f p - f r\\<bar> \\<le> \\<Delta> \\<Longrightarrow>\n    \\<bar>fiX f p r - f q\\<bar> \\<le> x + \\<Delta>\n 2. \\<not> \\<bar>f p - f r\\<bar> \\<le> \\<Delta> \\<Longrightarrow>\n    \\<bar>fiX f p r - f q\\<bar> \\<le> x + \\<Delta>", "also"], ["proof (state)\nthis:\n  \\<bar>f r - f q\\<bar> = \\<bar>f r - f p + (f p - f q)\\<bar>\n\ngoal (2 subgoals):\n 1. \\<bar>f p - f r\\<bar> \\<le> \\<Delta> \\<Longrightarrow>\n    \\<bar>fiX f p r - f q\\<bar> \\<le> x + \\<Delta>\n 2. \\<not> \\<bar>f p - f r\\<bar> \\<le> \\<Delta> \\<Longrightarrow>\n    \\<bar>fiX f p r - f q\\<bar> \\<le> x + \\<Delta>", "have \"... <= \\<bar> f p - f r \\<bar> + \\<bar> f p - f q \\<bar>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<bar>f r - f p + (f p - f q)\\<bar>\n    \\<le> \\<bar>f p - f r\\<bar> + \\<bar>f p - f q\\<bar>", "by arith"], ["proof (state)\nthis:\n  \\<bar>f r - f p + (f p - f q)\\<bar>\n  \\<le> \\<bar>f p - f r\\<bar> + \\<bar>f p - f q\\<bar>\n\ngoal (2 subgoals):\n 1. \\<bar>f p - f r\\<bar> \\<le> \\<Delta> \\<Longrightarrow>\n    \\<bar>fiX f p r - f q\\<bar> \\<le> x + \\<Delta>\n 2. \\<not> \\<bar>f p - f r\\<bar> \\<le> \\<Delta> \\<Longrightarrow>\n    \\<bar>fiX f p r - f q\\<bar> \\<le> x + \\<Delta>", "also"], ["proof (state)\nthis:\n  \\<bar>f r - f p + (f p - f q)\\<bar>\n  \\<le> \\<bar>f p - f r\\<bar> + \\<bar>f p - f q\\<bar>\n\ngoal (2 subgoals):\n 1. \\<bar>f p - f r\\<bar> \\<le> \\<Delta> \\<Longrightarrow>\n    \\<bar>fiX f p r - f q\\<bar> \\<le> x + \\<Delta>\n 2. \\<not> \\<bar>f p - f r\\<bar> \\<le> \\<Delta> \\<Longrightarrow>\n    \\<bar>fiX f p r - f q\\<bar> \\<le> x + \\<Delta>", "from True"], ["proof (chain)\npicking this:\n  \\<bar>f p - f r\\<bar> \\<le> \\<Delta>", "have \"... <= \\<Delta> + \\<bar> f p - f q \\<bar>\""], ["proof (prove)\nusing this:\n  \\<bar>f p - f r\\<bar> \\<le> \\<Delta>\n\ngoal (1 subgoal):\n 1. \\<bar>f p - f r\\<bar> + \\<bar>f p - f q\\<bar>\n    \\<le> \\<Delta> + \\<bar>f p - f q\\<bar>", "by arith"], ["proof (state)\nthis:\n  \\<bar>f p - f r\\<bar> + \\<bar>f p - f q\\<bar>\n  \\<le> \\<Delta> + \\<bar>f p - f q\\<bar>\n\ngoal (2 subgoals):\n 1. \\<bar>f p - f r\\<bar> \\<le> \\<Delta> \\<Longrightarrow>\n    \\<bar>fiX f p r - f q\\<bar> \\<le> x + \\<Delta>\n 2. \\<not> \\<bar>f p - f r\\<bar> \\<le> \\<Delta> \\<Longrightarrow>\n    \\<bar>fiX f p r - f q\\<bar> \\<le> x + \\<Delta>", "also"], ["proof (state)\nthis:\n  \\<bar>f p - f r\\<bar> + \\<bar>f p - f q\\<bar>\n  \\<le> \\<Delta> + \\<bar>f p - f q\\<bar>\n\ngoal (2 subgoals):\n 1. \\<bar>f p - f r\\<bar> \\<le> \\<Delta> \\<Longrightarrow>\n    \\<bar>fiX f p r - f q\\<bar> \\<le> x + \\<Delta>\n 2. \\<not> \\<bar>f p - f r\\<bar> \\<le> \\<Delta> \\<Longrightarrow>\n    \\<bar>fiX f p r - f q\\<bar> \\<le> x + \\<Delta>", "from hby hpC hqC"], ["proof (chain)\npicking this:\n  \\<forall>l\\<in>C. \\<forall>m\\<in>C. \\<bar>f l - f m\\<bar> \\<le> x\n  p \\<in> C\n  q \\<in> C", "have \"... <= \\<Delta> + x\""], ["proof (prove)\nusing this:\n  \\<forall>l\\<in>C. \\<forall>m\\<in>C. \\<bar>f l - f m\\<bar> \\<le> x\n  p \\<in> C\n  q \\<in> C\n\ngoal (1 subgoal):\n 1. \\<Delta> + \\<bar>f p - f q\\<bar> \\<le> \\<Delta> + x", "by simp"], ["proof (state)\nthis:\n  \\<Delta> + \\<bar>f p - f q\\<bar> \\<le> \\<Delta> + x\n\ngoal (2 subgoals):\n 1. \\<bar>f p - f r\\<bar> \\<le> \\<Delta> \\<Longrightarrow>\n    \\<bar>fiX f p r - f q\\<bar> \\<le> x + \\<Delta>\n 2. \\<not> \\<bar>f p - f r\\<bar> \\<le> \\<Delta> \\<Longrightarrow>\n    \\<bar>fiX f p r - f q\\<bar> \\<le> x + \\<Delta>", "finally"], ["proof (chain)\npicking this:\n  \\<bar>fiX f p r - f q\\<bar> \\<le> \\<Delta> + x", "show ?thesis"], ["proof (prove)\nusing this:\n  \\<bar>fiX f p r - f q\\<bar> \\<le> \\<Delta> + x\n\ngoal (1 subgoal):\n 1. \\<bar>fiX f p r - f q\\<bar> \\<le> x + \\<Delta>", "by simp"], ["proof (state)\nthis:\n  \\<bar>fiX f p r - f q\\<bar> \\<le> x + \\<Delta>\n\ngoal (1 subgoal):\n 1. \\<not> \\<bar>f p - f r\\<bar> \\<le> \\<Delta> \\<Longrightarrow>\n    \\<bar>fiX f p r - f q\\<bar> \\<le> x + \\<Delta>", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<not> \\<bar>f p - f r\\<bar> \\<le> \\<Delta> \\<Longrightarrow>\n    \\<bar>fiX f p r - f q\\<bar> \\<le> x + \\<Delta>", "case False"], ["proof (state)\nthis:\n  \\<not> \\<bar>f p - f r\\<bar> \\<le> \\<Delta>\n\ngoal (1 subgoal):\n 1. \\<not> \\<bar>f p - f r\\<bar> \\<le> \\<Delta> \\<Longrightarrow>\n    \\<bar>fiX f p r - f q\\<bar> \\<le> x + \\<Delta>", "then"], ["proof (chain)\npicking this:\n  \\<not> \\<bar>f p - f r\\<bar> \\<le> \\<Delta>", "have \"\\<bar>fiX f p r - f q\\<bar> = \\<bar> f p - f q \\<bar>\""], ["proof (prove)\nusing this:\n  \\<not> \\<bar>f p - f r\\<bar> \\<le> \\<Delta>\n\ngoal (1 subgoal):\n 1. \\<bar>fiX f p r - f q\\<bar> = \\<bar>f p - f q\\<bar>", "by (simp add: fiX_def)"], ["proof (state)\nthis:\n  \\<bar>fiX f p r - f q\\<bar> = \\<bar>f p - f q\\<bar>\n\ngoal (1 subgoal):\n 1. \\<not> \\<bar>f p - f r\\<bar> \\<le> \\<Delta> \\<Longrightarrow>\n    \\<bar>fiX f p r - f q\\<bar> \\<le> x + \\<Delta>", "also"], ["proof (state)\nthis:\n  \\<bar>fiX f p r - f q\\<bar> = \\<bar>f p - f q\\<bar>\n\ngoal (1 subgoal):\n 1. \\<not> \\<bar>f p - f r\\<bar> \\<le> \\<Delta> \\<Longrightarrow>\n    \\<bar>fiX f p r - f q\\<bar> \\<le> x + \\<Delta>", "from hby hpC hqC"], ["proof (chain)\npicking this:\n  \\<forall>l\\<in>C. \\<forall>m\\<in>C. \\<bar>f l - f m\\<bar> \\<le> x\n  p \\<in> C\n  q \\<in> C", "have \"... <= x\""], ["proof (prove)\nusing this:\n  \\<forall>l\\<in>C. \\<forall>m\\<in>C. \\<bar>f l - f m\\<bar> \\<le> x\n  p \\<in> C\n  q \\<in> C\n\ngoal (1 subgoal):\n 1. \\<bar>f p - f q\\<bar> \\<le> x", "by blast"], ["proof (state)\nthis:\n  \\<bar>f p - f q\\<bar> \\<le> x\n\ngoal (1 subgoal):\n 1. \\<not> \\<bar>f p - f r\\<bar> \\<le> \\<Delta> \\<Longrightarrow>\n    \\<bar>fiX f p r - f q\\<bar> \\<le> x + \\<Delta>", "finally"], ["proof (chain)\npicking this:\n  \\<bar>fiX f p r - f q\\<bar> \\<le> x", "show ?thesis"], ["proof (prove)\nusing this:\n  \\<bar>fiX f p r - f q\\<bar> \\<le> x\n\ngoal (1 subgoal):\n 1. \\<bar>fiX f p r - f q\\<bar> \\<le> x + \\<Delta>", "using constants_ax"], ["proof (prove)\nusing this:\n  \\<bar>fiX f p r - f q\\<bar> \\<le> x\n  0 \\<le> \\<Delta> \\<and> 0 < np\n\ngoal (1 subgoal):\n 1. \\<bar>fiX f p r - f q\\<bar> \\<le> x + \\<Delta>", "by arith"], ["proof (state)\nthis:\n  \\<bar>fiX f p r - f q\\<bar> \\<le> x + \\<Delta>\n\ngoal:\nNo subgoals!", "qed"], ["", "subsubsection \\<open>Main theorem\\<close>"], ["", "lemma accur_pres:\nassumes \n  hC: \"C \\<subseteq> PR\" and\n  hby: \"\\<forall> l\\<in>C. \\<forall> m\\<in>C. \\<bar>f l - f m\\<bar> <= x\" and\n  hpC: \"p\\<in>C\" and\n  hqC: \"q\\<in>C\" \nshows \"\\<bar> cfni p f - f q \\<bar> <= \n  (real (card C) * x + real (card ({..<np} - C)) * (x + \\<Delta>))/\n                  real np\"\n  (is \"?abs1 <= (?bC + ?bnpC)/real np\")"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<bar>cfni p f - f q\\<bar>\n    \\<le> (real (card C) * x + real (card ({..<np} - C)) * (x + \\<Delta>)) /\n          real np", "proof-"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<bar>cfni p f - f q\\<bar>\n    \\<le> (real (card C) * x + real (card ({..<np} - C)) * (x + \\<Delta>)) /\n          real np", "from abs_sum_np_ineq and hC"], ["proof (chain)\npicking this:\n  ?C \\<subseteq> PR \\<Longrightarrow>\n  \\<bar>sum ?f {..<np}\\<bar>\n  \\<le> (\\<Sum>l\\<in>?C. \\<bar>?f l\\<bar>) +\n        (\\<Sum>l\\<in>{..<np} - ?C. \\<bar>?f l\\<bar>)\n  C \\<subseteq> PR", "have \n  \"\\<bar>\\<Sum>l\\<in>{..<np}. fiX f p l  - f q \\<bar> <= \n    (\\<Sum>l\\<in>C. \\<bar> fiX f p l  - f q \\<bar>) + \n            (\\<Sum>l\\<in>({..<np}-C). \\<bar> fiX f p l  - f q \\<bar>)\""], ["proof (prove)\nusing this:\n  ?C \\<subseteq> PR \\<Longrightarrow>\n  \\<bar>sum ?f {..<np}\\<bar>\n  \\<le> (\\<Sum>l\\<in>?C. \\<bar>?f l\\<bar>) +\n        (\\<Sum>l\\<in>{..<np} - ?C. \\<bar>?f l\\<bar>)\n  C \\<subseteq> PR\n\ngoal (1 subgoal):\n 1. \\<bar>\\<Sum>l<np. fiX f p l - f q\\<bar>\n    \\<le> (\\<Sum>l\\<in>C. \\<bar>fiX f p l - f q\\<bar>) +\n          (\\<Sum>l\\<in>{..<np} - C. \\<bar>fiX f p l - f q\\<bar>)", "by simp"], ["proof (state)\nthis:\n  \\<bar>\\<Sum>l<np. fiX f p l - f q\\<bar>\n  \\<le> (\\<Sum>l\\<in>C. \\<bar>fiX f p l - f q\\<bar>) +\n        (\\<Sum>l\\<in>{..<np} - C. \\<bar>fiX f p l - f q\\<bar>)\n\ngoal (1 subgoal):\n 1. \\<bar>cfni p f - f q\\<bar>\n    \\<le> (real (card C) * x + real (card ({..<np} - C)) * (x + \\<Delta>)) /\n          real np", "also"], ["proof (state)\nthis:\n  \\<bar>\\<Sum>l<np. fiX f p l - f q\\<bar>\n  \\<le> (\\<Sum>l\\<in>C. \\<bar>fiX f p l - f q\\<bar>) +\n        (\\<Sum>l\\<in>{..<np} - C. \\<bar>fiX f p l - f q\\<bar>)\n\ngoal (1 subgoal):\n 1. \\<bar>cfni p f - f q\\<bar>\n    \\<le> (real (card C) * x + real (card ({..<np} - C)) * (x + \\<Delta>)) /\n          real np", "have \n  \"... <= real (card C) * x + \n            real (card ({..<np} - C)) * (x + \\<Delta>)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>l\\<in>C. \\<bar>fiX f p l - f q\\<bar>) +\n    (\\<Sum>l\\<in>{..<np} - C. \\<bar>fiX f p l - f q\\<bar>)\n    \\<le> real (card C) * x + real (card ({..<np} - C)) * (x + \\<Delta>)", "proof-"], ["proof (state)\ngoal (1 subgoal):\n 1. (\\<Sum>l\\<in>C. \\<bar>fiX f p l - f q\\<bar>) +\n    (\\<Sum>l\\<in>{..<np} - C. \\<bar>fiX f p l - f q\\<bar>)\n    \\<le> real (card C) * x + real (card ({..<np} - C)) * (x + \\<Delta>)", "have \"(\\<Sum>l\\<in>C. \\<bar> fiX f p l  - f q \\<bar>) <= \n                    real (card C) * x\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>l\\<in>C. \\<bar>fiX f p l - f q\\<bar>) \\<le> real (card C) * x", "proof-"], ["proof (state)\ngoal (1 subgoal):\n 1. (\\<Sum>l\\<in>C. \\<bar>fiX f p l - f q\\<bar>) \\<le> real (card C) * x", "from bound_aux_C and \n        hby and  hpC and hqC"], ["proof (chain)\npicking this:\n  \\<lbrakk>\\<forall>l\\<in>?C.\n              \\<forall>m\\<in>?C. \\<bar>?f l - ?f m\\<bar> \\<le> ?x;\n   ?p \\<in> ?C; ?q \\<in> ?C; ?r \\<in> ?C\\<rbrakk>\n  \\<Longrightarrow> \\<bar>fiX ?f ?p ?r - ?f ?q\\<bar> \\<le> ?x\n  \\<forall>l\\<in>C. \\<forall>m\\<in>C. \\<bar>f l - f m\\<bar> \\<le> x\n  p \\<in> C\n  q \\<in> C", "have \"\\<forall>r\\<in>C. \n        \\<bar>fiX f p r - f q\\<bar> <= x\""], ["proof (prove)\nusing this:\n  \\<lbrakk>\\<forall>l\\<in>?C.\n              \\<forall>m\\<in>?C. \\<bar>?f l - ?f m\\<bar> \\<le> ?x;\n   ?p \\<in> ?C; ?q \\<in> ?C; ?r \\<in> ?C\\<rbrakk>\n  \\<Longrightarrow> \\<bar>fiX ?f ?p ?r - ?f ?q\\<bar> \\<le> ?x\n  \\<forall>l\\<in>C. \\<forall>m\\<in>C. \\<bar>f l - f m\\<bar> \\<le> x\n  p \\<in> C\n  q \\<in> C\n\ngoal (1 subgoal):\n 1. \\<forall>r\\<in>C. \\<bar>fiX f p r - f q\\<bar> \\<le> x", "by blast"], ["proof (state)\nthis:\n  \\<forall>r\\<in>C. \\<bar>fiX f p r - f q\\<bar> \\<le> x\n\ngoal (1 subgoal):\n 1. (\\<Sum>l\\<in>C. \\<bar>fiX f p l - f q\\<bar>) \\<le> real (card C) * x", "thus ?thesis"], ["proof (prove)\nusing this:\n  \\<forall>r\\<in>C. \\<bar>fiX f p r - f q\\<bar> \\<le> x\n\ngoal (1 subgoal):\n 1. (\\<Sum>l\\<in>C. \\<bar>fiX f p l - f q\\<bar>) \\<le> real (card C) * x", "using sum_le[where S=C] and finitC[OF hC]"], ["proof (prove)\nusing this:\n  \\<forall>r\\<in>C. \\<bar>fiX f p r - f q\\<bar> \\<le> x\n  \\<lbrakk>finite C; \\<forall>r\\<in>C. ?f r \\<le> ?b\\<rbrakk>\n  \\<Longrightarrow> sum ?f C \\<le> real (card C) * ?b\n  finite C\n\ngoal (1 subgoal):\n 1. (\\<Sum>l\\<in>C. \\<bar>fiX f p l - f q\\<bar>) \\<le> real (card C) * x", "by force"], ["proof (state)\nthis:\n  (\\<Sum>l\\<in>C. \\<bar>fiX f p l - f q\\<bar>) \\<le> real (card C) * x\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  (\\<Sum>l\\<in>C. \\<bar>fiX f p l - f q\\<bar>) \\<le> real (card C) * x\n\ngoal (1 subgoal):\n 1. (\\<Sum>l\\<in>C. \\<bar>fiX f p l - f q\\<bar>) +\n    (\\<Sum>l\\<in>{..<np} - C. \\<bar>fiX f p l - f q\\<bar>)\n    \\<le> real (card C) * x + real (card ({..<np} - C)) * (x + \\<Delta>)", "moreover"], ["proof (state)\nthis:\n  (\\<Sum>l\\<in>C. \\<bar>fiX f p l - f q\\<bar>) \\<le> real (card C) * x\n\ngoal (1 subgoal):\n 1. (\\<Sum>l\\<in>C. \\<bar>fiX f p l - f q\\<bar>) +\n    (\\<Sum>l\\<in>{..<np} - C. \\<bar>fiX f p l - f q\\<bar>)\n    \\<le> real (card C) * x + real (card ({..<np} - C)) * (x + \\<Delta>)", "have \" (\\<Sum>l\\<in>({..<np}-C). \\<bar> fiX f p l  - f q \\<bar>) <= \n                real (card ({..<np} - C)) * (x + \\<Delta>)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>l\\<in>{..<np} - C. \\<bar>fiX f p l - f q\\<bar>)\n    \\<le> real (card ({..<np} - C)) * (x + \\<Delta>)", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. (\\<Sum>l\\<in>{..<np} - C. \\<bar>fiX f p l - f q\\<bar>)\n    \\<le> real (card ({..<np} - C)) * (x + \\<Delta>)", "from bound_aux and \n        hby and  hpC and hqC"], ["proof (chain)\npicking this:\n  \\<lbrakk>\\<forall>l\\<in>?C.\n              \\<forall>m\\<in>?C. \\<bar>?f l - ?f m\\<bar> \\<le> ?x;\n   ?p \\<in> ?C; ?q \\<in> ?C\\<rbrakk>\n  \\<Longrightarrow> \\<bar>fiX ?f ?p ?r - ?f ?q\\<bar> \\<le> ?x + \\<Delta>\n  \\<forall>l\\<in>C. \\<forall>m\\<in>C. \\<bar>f l - f m\\<bar> \\<le> x\n  p \\<in> C\n  q \\<in> C", "have \"\\<forall>r\\<in>({..<np}-C). \n        \\<bar>fiX f p r - f q\\<bar> <= x + \\<Delta>\""], ["proof (prove)\nusing this:\n  \\<lbrakk>\\<forall>l\\<in>?C.\n              \\<forall>m\\<in>?C. \\<bar>?f l - ?f m\\<bar> \\<le> ?x;\n   ?p \\<in> ?C; ?q \\<in> ?C\\<rbrakk>\n  \\<Longrightarrow> \\<bar>fiX ?f ?p ?r - ?f ?q\\<bar> \\<le> ?x + \\<Delta>\n  \\<forall>l\\<in>C. \\<forall>m\\<in>C. \\<bar>f l - f m\\<bar> \\<le> x\n  p \\<in> C\n  q \\<in> C\n\ngoal (1 subgoal):\n 1. \\<forall>r\\<in>{..<np} - C.\n       \\<bar>fiX f p r - f q\\<bar> \\<le> x + \\<Delta>", "by blast"], ["proof (state)\nthis:\n  \\<forall>r\\<in>{..<np} - C. \\<bar>fiX f p r - f q\\<bar> \\<le> x + \\<Delta>\n\ngoal (1 subgoal):\n 1. (\\<Sum>l\\<in>{..<np} - C. \\<bar>fiX f p l - f q\\<bar>)\n    \\<le> real (card ({..<np} - C)) * (x + \\<Delta>)", "thus ?thesis"], ["proof (prove)\nusing this:\n  \\<forall>r\\<in>{..<np} - C. \\<bar>fiX f p r - f q\\<bar> \\<le> x + \\<Delta>\n\ngoal (1 subgoal):\n 1. (\\<Sum>l\\<in>{..<np} - C. \\<bar>fiX f p l - f q\\<bar>)\n    \\<le> real (card ({..<np} - C)) * (x + \\<Delta>)", "using sum_le[where S=\"{..<np}-C\"] \n        and finitnpC"], ["proof (prove)\nusing this:\n  \\<forall>r\\<in>{..<np} - C. \\<bar>fiX f p r - f q\\<bar> \\<le> x + \\<Delta>\n  \\<lbrakk>finite ({..<np} - C);\n   \\<forall>r\\<in>{..<np} - C. ?f r \\<le> ?b\\<rbrakk>\n  \\<Longrightarrow> sum ?f ({..<np} - C)\n                    \\<le> real (card ({..<np} - C)) * ?b\n  finite (PR - ?C)\n\ngoal (1 subgoal):\n 1. (\\<Sum>l\\<in>{..<np} - C. \\<bar>fiX f p l - f q\\<bar>)\n    \\<le> real (card ({..<np} - C)) * (x + \\<Delta>)", "by force"], ["proof (state)\nthis:\n  (\\<Sum>l\\<in>{..<np} - C. \\<bar>fiX f p l - f q\\<bar>)\n  \\<le> real (card ({..<np} - C)) * (x + \\<Delta>)\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  (\\<Sum>l\\<in>{..<np} - C. \\<bar>fiX f p l - f q\\<bar>)\n  \\<le> real (card ({..<np} - C)) * (x + \\<Delta>)\n\ngoal (1 subgoal):\n 1. (\\<Sum>l\\<in>C. \\<bar>fiX f p l - f q\\<bar>) +\n    (\\<Sum>l\\<in>{..<np} - C. \\<bar>fiX f p l - f q\\<bar>)\n    \\<le> real (card C) * x + real (card ({..<np} - C)) * (x + \\<Delta>)", "ultimately"], ["proof (chain)\npicking this:\n  (\\<Sum>l\\<in>C. \\<bar>fiX f p l - f q\\<bar>) \\<le> real (card C) * x\n  (\\<Sum>l\\<in>{..<np} - C. \\<bar>fiX f p l - f q\\<bar>)\n  \\<le> real (card ({..<np} - C)) * (x + \\<Delta>)", "show ?thesis"], ["proof (prove)\nusing this:\n  (\\<Sum>l\\<in>C. \\<bar>fiX f p l - f q\\<bar>) \\<le> real (card C) * x\n  (\\<Sum>l\\<in>{..<np} - C. \\<bar>fiX f p l - f q\\<bar>)\n  \\<le> real (card ({..<np} - C)) * (x + \\<Delta>)\n\ngoal (1 subgoal):\n 1. (\\<Sum>l\\<in>C. \\<bar>fiX f p l - f q\\<bar>) +\n    (\\<Sum>l\\<in>{..<np} - C. \\<bar>fiX f p l - f q\\<bar>)\n    \\<le> real (card C) * x + real (card ({..<np} - C)) * (x + \\<Delta>)", "by arith"], ["proof (state)\nthis:\n  (\\<Sum>l\\<in>C. \\<bar>fiX f p l - f q\\<bar>) +\n  (\\<Sum>l\\<in>{..<np} - C. \\<bar>fiX f p l - f q\\<bar>)\n  \\<le> real (card C) * x + real (card ({..<np} - C)) * (x + \\<Delta>)\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  (\\<Sum>l\\<in>C. \\<bar>fiX f p l - f q\\<bar>) +\n  (\\<Sum>l\\<in>{..<np} - C. \\<bar>fiX f p l - f q\\<bar>)\n  \\<le> real (card C) * x + real (card ({..<np} - C)) * (x + \\<Delta>)\n\ngoal (1 subgoal):\n 1. \\<bar>cfni p f - f q\\<bar>\n    \\<le> (real (card C) * x + real (card ({..<np} - C)) * (x + \\<Delta>)) /\n          real np", "finally"], ["proof (chain)\npicking this:\n  \\<bar>\\<Sum>l<np. fiX f p l - f q\\<bar>\n  \\<le> real (card C) * x + real (card ({..<np} - C)) * (x + \\<Delta>)", "have bound: \"\\<bar>\\<Sum>l\\<in>{..<np}. fiX f p l - f q\\<bar>\n  \\<le> real (card C) * x + real (card ({..<np} - C)) * (x + \\<Delta>)\""], ["proof (prove)\nusing this:\n  \\<bar>\\<Sum>l<np. fiX f p l - f q\\<bar>\n  \\<le> real (card C) * x + real (card ({..<np} - C)) * (x + \\<Delta>)\n\ngoal (1 subgoal):\n 1. \\<bar>\\<Sum>l<np. fiX f p l - f q\\<bar>\n    \\<le> real (card C) * x + real (card ({..<np} - C)) * (x + \\<Delta>)", "."], ["proof (state)\nthis:\n  \\<bar>\\<Sum>l<np. fiX f p l - f q\\<bar>\n  \\<le> real (card C) * x + real (card ({..<np} - C)) * (x + \\<Delta>)\n\ngoal (1 subgoal):\n 1. \\<bar>cfni p f - f q\\<bar>\n    \\<le> (real (card C) * x + real (card ({..<np} - C)) * (x + \\<Delta>)) /\n          real np", "thus \n    ?thesis"], ["proof (prove)\nusing this:\n  \\<bar>\\<Sum>l<np. fiX f p l - f q\\<bar>\n  \\<le> real (card C) * x + real (card ({..<np} - C)) * (x + \\<Delta>)\n\ngoal (1 subgoal):\n 1. \\<bar>cfni p f - f q\\<bar>\n    \\<le> (real (card C) * x + real (card ({..<np} - C)) * (x + \\<Delta>)) /\n          real np", "proof-"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<bar>\\<Sum>l<np. fiX f p l - f q\\<bar>\n    \\<le> real (card C) * x +\n          real (card ({..<np} - C)) * (x + \\<Delta>) \\<Longrightarrow>\n    \\<bar>cfni p f - f q\\<bar>\n    \\<le> (real (card C) * x + real (card ({..<np} - C)) * (x + \\<Delta>)) /\n          real np", "from constants_ax"], ["proof (chain)\npicking this:\n  0 \\<le> \\<Delta> \\<and> 0 < np", "have\n      res: \"inverse (real np) * real np = 1\""], ["proof (prove)\nusing this:\n  0 \\<le> \\<Delta> \\<and> 0 < np\n\ngoal (1 subgoal):\n 1. inverse (real np) * real np = 1", "by auto"], ["proof (state)\nthis:\n  inverse (real np) * real np = 1\n\ngoal (1 subgoal):\n 1. \\<bar>\\<Sum>l<np. fiX f p l - f q\\<bar>\n    \\<le> real (card C) * x +\n          real (card ({..<np} - C)) * (x + \\<Delta>) \\<Longrightarrow>\n    \\<bar>cfni p f - f q\\<bar>\n    \\<le> (real (card C) * x + real (card ({..<np} - C)) * (x + \\<Delta>)) /\n          real np", "have\n      \"(cfni p f - f q) * real np = \n      (\\<Sum>l\\<in>{..<np}. fiX f p l) * real np / real np - f q * real np\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (cfni p f - f q) * real np =\n    sum (fiX f p) {..<np} * real np / real np - f q * real np", "by (simp add: cfni_def algebra_simps)"], ["proof (state)\nthis:\n  (cfni p f - f q) * real np =\n  sum (fiX f p) {..<np} * real np / real np - f q * real np\n\ngoal (1 subgoal):\n 1. \\<bar>\\<Sum>l<np. fiX f p l - f q\\<bar>\n    \\<le> real (card C) * x +\n          real (card ({..<np} - C)) * (x + \\<Delta>) \\<Longrightarrow>\n    \\<bar>cfni p f - f q\\<bar>\n    \\<le> (real (card C) * x + real (card ({..<np} - C)) * (x + \\<Delta>)) /\n          real np", "also"], ["proof (state)\nthis:\n  (cfni p f - f q) * real np =\n  sum (fiX f p) {..<np} * real np / real np - f q * real np\n\ngoal (1 subgoal):\n 1. \\<bar>\\<Sum>l<np. fiX f p l - f q\\<bar>\n    \\<le> real (card C) * x +\n          real (card ({..<np} - C)) * (x + \\<Delta>) \\<Longrightarrow>\n    \\<bar>cfni p f - f q\\<bar>\n    \\<le> (real (card C) * x + real (card ({..<np} - C)) * (x + \\<Delta>)) /\n          real np", "have \"... = \n      (\\<Sum>l\\<in>{..<np}. fiX f p l) - f q * real np\""], ["proof (prove)\ngoal (1 subgoal):\n 1. sum (fiX f p) {..<np} * real np / real np - f q * real np =\n    sum (fiX f p) {..<np} - f q * real np", "by simp"], ["proof (state)\nthis:\n  sum (fiX f p) {..<np} * real np / real np - f q * real np =\n  sum (fiX f p) {..<np} - f q * real np\n\ngoal (1 subgoal):\n 1. \\<bar>\\<Sum>l<np. fiX f p l - f q\\<bar>\n    \\<le> real (card C) * x +\n          real (card ({..<np} - C)) * (x + \\<Delta>) \\<Longrightarrow>\n    \\<bar>cfni p f - f q\\<bar>\n    \\<le> (real (card C) * x + real (card ({..<np} - C)) * (x + \\<Delta>)) /\n          real np", "also"], ["proof (state)\nthis:\n  sum (fiX f p) {..<np} * real np / real np - f q * real np =\n  sum (fiX f p) {..<np} - f q * real np\n\ngoal (1 subgoal):\n 1. \\<bar>\\<Sum>l<np. fiX f p l - f q\\<bar>\n    \\<le> real (card C) * x +\n          real (card ({..<np} - C)) * (x + \\<Delta>) \\<Longrightarrow>\n    \\<bar>cfni p f - f q\\<bar>\n    \\<le> (real (card C) * x + real (card ({..<np} - C)) * (x + \\<Delta>)) /\n          real np", "from sum_div_card[where f=\"fiX f p\" and n=np and q=\"- f q\"]"], ["proof (chain)\npicking this:\n  sum (fiX f p) {..<np} + - f q * real np = (\\<Sum>l<np. fiX f p l + - f q)", "have \"... = (\\<Sum>l\\<in>{..<np}. fiX f p l - f q)\""], ["proof (prove)\nusing this:\n  sum (fiX f p) {..<np} + - f q * real np = (\\<Sum>l<np. fiX f p l + - f q)\n\ngoal (1 subgoal):\n 1. sum (fiX f p) {..<np} - f q * real np = (\\<Sum>l<np. fiX f p l - f q)", "by simp"], ["proof (state)\nthis:\n  sum (fiX f p) {..<np} - f q * real np = (\\<Sum>l<np. fiX f p l - f q)\n\ngoal (1 subgoal):\n 1. \\<bar>\\<Sum>l<np. fiX f p l - f q\\<bar>\n    \\<le> real (card C) * x +\n          real (card ({..<np} - C)) * (x + \\<Delta>) \\<Longrightarrow>\n    \\<bar>cfni p f - f q\\<bar>\n    \\<le> (real (card C) * x + real (card ({..<np} - C)) * (x + \\<Delta>)) /\n          real np", "finally"], ["proof (chain)\npicking this:\n  (cfni p f - f q) * real np = (\\<Sum>l<np. fiX f p l - f q)", "have \n      \"(cfni p f - f q) * real np = (\\<Sum>l\\<in>{..<np}. fiX f p l - f q)\""], ["proof (prove)\nusing this:\n  (cfni p f - f q) * real np = (\\<Sum>l<np. fiX f p l - f q)\n\ngoal (1 subgoal):\n 1. (cfni p f - f q) * real np = (\\<Sum>l<np. fiX f p l - f q)", ".\n\\<comment> \\<open>cambia\\<close>"], ["proof (state)\nthis:\n  (cfni p f - f q) * real np = (\\<Sum>l<np. fiX f p l - f q)\n\ngoal (1 subgoal):\n 1. \\<bar>\\<Sum>l<np. fiX f p l - f q\\<bar>\n    \\<le> real (card C) * x +\n          real (card ({..<np} - C)) * (x + \\<Delta>) \\<Longrightarrow>\n    \\<bar>cfni p f - f q\\<bar>\n    \\<le> (real (card C) * x + real (card ({..<np} - C)) * (x + \\<Delta>)) /\n          real np", "hence\n      \"(cfni p f - f q) * real np / real np = \n      (\\<Sum>l\\<in>{..<np}. fiX f p l - f q)/ real np\""], ["proof (prove)\nusing this:\n  (cfni p f - f q) * real np = (\\<Sum>l<np. fiX f p l - f q)\n\ngoal (1 subgoal):\n 1. (cfni p f - f q) * real np / real np =\n    (\\<Sum>l<np. fiX f p l - f q) / real np", "by auto"], ["proof (state)\nthis:\n  (cfni p f - f q) * real np / real np =\n  (\\<Sum>l<np. fiX f p l - f q) / real np\n\ngoal (1 subgoal):\n 1. \\<bar>\\<Sum>l<np. fiX f p l - f q\\<bar>\n    \\<le> real (card C) * x +\n          real (card ({..<np} - C)) * (x + \\<Delta>) \\<Longrightarrow>\n    \\<bar>cfni p f - f q\\<bar>\n    \\<le> (real (card C) * x + real (card ({..<np} - C)) * (x + \\<Delta>)) /\n          real np", "with constants_ax"], ["proof (chain)\npicking this:\n  0 \\<le> \\<Delta> \\<and> 0 < np\n  (cfni p f - f q) * real np / real np =\n  (\\<Sum>l<np. fiX f p l - f q) / real np", "have  \n      \"(cfni p f - f q) = \n      (\\<Sum>l\\<in>{..<np}. fiX f p l - f q) / real np\""], ["proof (prove)\nusing this:\n  0 \\<le> \\<Delta> \\<and> 0 < np\n  (cfni p f - f q) * real np / real np =\n  (\\<Sum>l<np. fiX f p l - f q) / real np\n\ngoal (1 subgoal):\n 1. cfni p f - f q = (\\<Sum>l<np. fiX f p l - f q) / real np", "by simp"], ["proof (state)\nthis:\n  cfni p f - f q = (\\<Sum>l<np. fiX f p l - f q) / real np\n\ngoal (1 subgoal):\n 1. \\<bar>\\<Sum>l<np. fiX f p l - f q\\<bar>\n    \\<le> real (card C) * x +\n          real (card ({..<np} - C)) * (x + \\<Delta>) \\<Longrightarrow>\n    \\<bar>cfni p f - f q\\<bar>\n    \\<le> (real (card C) * x + real (card ({..<np} - C)) * (x + \\<Delta>)) /\n          real np", "hence \"\\<bar> cfni p f - f q \\<bar> = \n      \\<bar>(\\<Sum>l\\<in>{..<np}. fiX f p l - f q) / real np \\<bar>\""], ["proof (prove)\nusing this:\n  cfni p f - f q = (\\<Sum>l<np. fiX f p l - f q) / real np\n\ngoal (1 subgoal):\n 1. \\<bar>cfni p f - f q\\<bar> =\n    \\<bar>(\\<Sum>l<np. fiX f p l - f q) / real np\\<bar>", "by simp"], ["proof (state)\nthis:\n  \\<bar>cfni p f - f q\\<bar> =\n  \\<bar>(\\<Sum>l<np. fiX f p l - f q) / real np\\<bar>\n\ngoal (1 subgoal):\n 1. \\<bar>\\<Sum>l<np. fiX f p l - f q\\<bar>\n    \\<le> real (card C) * x +\n          real (card ({..<np} - C)) * (x + \\<Delta>) \\<Longrightarrow>\n    \\<bar>cfni p f - f q\\<bar>\n    \\<le> (real (card C) * x + real (card ({..<np} - C)) * (x + \\<Delta>)) /\n          real np", "also"], ["proof (state)\nthis:\n  \\<bar>cfni p f - f q\\<bar> =\n  \\<bar>(\\<Sum>l<np. fiX f p l - f q) / real np\\<bar>\n\ngoal (1 subgoal):\n 1. \\<bar>\\<Sum>l<np. fiX f p l - f q\\<bar>\n    \\<le> real (card C) * x +\n          real (card ({..<np} - C)) * (x + \\<Delta>) \\<Longrightarrow>\n    \\<bar>cfni p f - f q\\<bar>\n    \\<le> (real (card C) * x + real (card ({..<np} - C)) * (x + \\<Delta>)) /\n          real np", "have\n      \"... = \\<bar>(\\<Sum>l\\<in>{..<np}. fiX f p l - f q)\\<bar> / real np \""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<bar>(\\<Sum>l<np. fiX f p l - f q) / real np\\<bar> =\n    \\<bar>\\<Sum>l<np. fiX f p l - f q\\<bar> / real np", "by auto"], ["proof (state)\nthis:\n  \\<bar>(\\<Sum>l<np. fiX f p l - f q) / real np\\<bar> =\n  \\<bar>\\<Sum>l<np. fiX f p l - f q\\<bar> / real np\n\ngoal (1 subgoal):\n 1. \\<bar>\\<Sum>l<np. fiX f p l - f q\\<bar>\n    \\<le> real (card C) * x +\n          real (card ({..<np} - C)) * (x + \\<Delta>) \\<Longrightarrow>\n    \\<bar>cfni p f - f q\\<bar>\n    \\<le> (real (card C) * x + real (card ({..<np} - C)) * (x + \\<Delta>)) /\n          real np", "finally"], ["proof (chain)\npicking this:\n  \\<bar>cfni p f - f q\\<bar> =\n  \\<bar>\\<Sum>l<np. fiX f p l - f q\\<bar> / real np", "have \"\\<bar> cfni p f - f q \\<bar> = \n      \\<bar>(\\<Sum>l\\<in>{..<np}. fiX f p l - f q)\\<bar> / real np \""], ["proof (prove)\nusing this:\n  \\<bar>cfni p f - f q\\<bar> =\n  \\<bar>\\<Sum>l<np. fiX f p l - f q\\<bar> / real np\n\ngoal (1 subgoal):\n 1. \\<bar>cfni p f - f q\\<bar> =\n    \\<bar>\\<Sum>l<np. fiX f p l - f q\\<bar> / real np", "."], ["proof (state)\nthis:\n  \\<bar>cfni p f - f q\\<bar> =\n  \\<bar>\\<Sum>l<np. fiX f p l - f q\\<bar> / real np\n\ngoal (1 subgoal):\n 1. \\<bar>\\<Sum>l<np. fiX f p l - f q\\<bar>\n    \\<le> real (card C) * x +\n          real (card ({..<np} - C)) * (x + \\<Delta>) \\<Longrightarrow>\n    \\<bar>cfni p f - f q\\<bar>\n    \\<le> (real (card C) * x + real (card ({..<np} - C)) * (x + \\<Delta>)) /\n          real np", "with bound"], ["proof (chain)\npicking this:\n  \\<bar>\\<Sum>l<np. fiX f p l - f q\\<bar>\n  \\<le> real (card C) * x + real (card ({..<np} - C)) * (x + \\<Delta>)\n  \\<bar>cfni p f - f q\\<bar> =\n  \\<bar>\\<Sum>l<np. fiX f p l - f q\\<bar> / real np", "show \"?thesis\""], ["proof (prove)\nusing this:\n  \\<bar>\\<Sum>l<np. fiX f p l - f q\\<bar>\n  \\<le> real (card C) * x + real (card ({..<np} - C)) * (x + \\<Delta>)\n  \\<bar>cfni p f - f q\\<bar> =\n  \\<bar>\\<Sum>l<np. fiX f p l - f q\\<bar> / real np\n\ngoal (1 subgoal):\n 1. \\<bar>cfni p f - f q\\<bar>\n    \\<le> (real (card C) * x + real (card ({..<np} - C)) * (x + \\<Delta>)) /\n          real np", "by (auto simp add: cfni_def divide_inverse constants_ax)"], ["proof (state)\nthis:\n  \\<bar>cfni p f - f q\\<bar>\n  \\<le> (real (card C) * x + real (card ({..<np} - C)) * (x + \\<Delta>)) /\n        real np\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<bar>cfni p f - f q\\<bar>\n  \\<le> (real (card C) * x + real (card ({..<np} - C)) * (x + \\<Delta>)) /\n        real np\n\ngoal:\nNo subgoals!", "qed"], ["", "end"]]}