{"file_name": "/home/qj213/afp-2021-10-22/thys/Hoare_Time/Nielson_Examples.thy", "working_directory": "/home/qj213/afp-2021-10-22/thys/Hoare_Time", "problem_names": ["lemma \"\\<turnstile>\\<^sub>1 {%l s. True} SKIP;; SKIP { %s. 1 \\<Down> %l s. True}\"", "lemma \"finite (support P) \\<Longrightarrow> \\<turnstile>\\<^sub>1 {P} strip Askip {time Askip \\<Down> P}\"", "lemma support_single2: \"support (\\<lambda>l s. P s) = {}\"", "lemma \"\\<turnstile>\\<^sub>1 { %l s. True } strip (Aassign a (N 1)) {time (Aassign a (N 1)) \\<Down> %l s. s a = 1}\"", "lemma \"\\<turnstile>\\<^sub>1 { %l s. True } strip ( (a ::= (N 1)) ;; Askip ) {time ( (a ::= (N 1)) ;; Askip ) \\<Down> %l s. s a = 1}\"", "lemma \"\\<turnstile>\\<^sub>1 { %l s. True } strip ( (a ::= (N 1)) ;; b ::= (V a) ) {time ( (a ::= (N 1)) ;; b ::= (V a) ) \\<Down> %l s. s b = 1}\"", "lemma assumes     \n  E: \"E = (%s. 1 + 2 * (4 - nat (s a)))\" and\n  C: \"C = ({(I,(S,(E)))} WHILE Less (V a) (N 3) DO a ::= Plus (V a) (N 1) )\"\nshows \"\\<And>s. 0 \\<le> s a \\<Longrightarrow> time C s \\<le> 9\"", "lemma example_count_upto_3: assumes \n  I: \"I = (%l s. s a \\<ge> 0)\" and\n  E: \"E = (%s. 1 + 2 * (4 - nat (s a)))\" and\n  S: \"S = (%s. (if s a \\<ge> 3 then s else s(a:=3) ))\" and\n  C: \"C = ({(I,(S,(E)))} WHILE Less (V a) (N 3) DO a ::= Plus (V a) (N 1) )\"\nshows \"\\<turnstile>\\<^sub>1 { %l s. 0 \\<le> s a } strip C {time C \\<Down> %l s. True }\"", "lemma example_count_upto_b: assumes \n  I: \"I = (%l s. s a \\<ge> 0 )\" and\n  E: \"E = (%s. 1 + 2 * ((nat b+1) - nat (s a)))\" and\n  S: \"S = (%s. (if s a \\<ge> b then s else s(a:=b) ))\" and\n  C: \"C = ({(I,(S,(E)))} WHILE Less (V a) (N b) DO a ::= Plus (V a) (N 1) )\"\nshows \"\\<turnstile>\\<^sub>1 { %l s. 0 \\<le> s a } strip C {time C \\<Down> %l s. True }\"", "lemma helper: \"(A::int) * B + B = (A+1) * B\"", "lemma mult: assumes  \n  I: \"I = (%l s. s ''a'' \\<ge> 0 \\<and> s ''a'' \\<ge> s ''z'' \\<and> s ''z'' \\<ge> 0  \\<and> s ''y'' =  s ''z'' * (s ''b'')  )\" and\n  E: \"E = (%s. 1 + 3 * ((nat (s ''a'') + 1) - nat (s ''z'')))\" and\n  S: \"S = (%s. (if s ''z'' \\<ge> s ''a'' then s else s(''y'':=(s ''a'') * (s ''b''), ''z'':=s ''a''  ) ))\" and\n  C: \"C = (''y'' ::= (N 0);; ''z'' ::= (N 0) ;; {(I,(S,(E)))}  WHILE Less (V ''z'') (V ''a'') DO (''y'' ::= Plus (V ''y'') (V ''b'') ;; ''z'' ::= Plus (V ''z'') (N 1)) )\" and\n  f: \"f = (%s. 3 * (nat(s ''a'') + 2))\"\nshows \"\\<turnstile>\\<^sub>1 { %l s. 0 \\<le> s ''a''  } strip C { f \\<Down> %l s. s ''y'' = s ''a'' * (s ''b'') }\"", "lemma mult_abstract: assumes  \n  I: \"I = (%l s. s ''a'' \\<ge> 0 \\<and> s ''a'' \\<ge> s ''z'' \\<and> s ''z'' \\<ge> 0  \\<and> s ''y'' =  s ''z'' * (s ''b'')  )\" and\n  E: \"E = (%s. 1 + 2* ((nat (s ''a'') + 1) - nat (s ''z'')))\" and\n  S: \"S = (%s. (if s ''z'' \\<ge> s ''a'' then s else s(''y'':=(s ''a'') * (s ''b''), ''z'':=s ''a''  ) ))\" and\n  e: \"e = (%s. 1)\" and\n  lb[simp]: \"(lb::acom) = ({\\<lambda>l s. I l s \\<and> s ''z'' < s ''a''  /I/e} CONSEQ (''y'' ::= Plus (V ''y'') (V ''b'') ;; ''z'' ::= Plus (V ''z'') (N 1)) )\" and\n  l[simp]: \"(l::acom) = {(I,(S,(E)))}  WHILE  (Less (V ''z'') (V ''a'')) DO lb\" and\n  e'[simp]: \"e' = (%s. 1 + (nat (s ''a'')))\" and\n  wl[simp]: \"(wl::acom) = {I/\\<lambda>l s. I l s \\<and> s ''z'' \\<ge> s ''a''/e'} CONSEQ l\" and\n  C: \"(C::acom) = (''y'' ::= (N 0);; ''z'' ::= (N 0) ;; wl )\" and\n  f: \"f = (%s. nat(s ''a'') + 1)\"\nshows \"\\<turnstile>\\<^sub>1 { %l s. 0 \\<le> s ''a''  } strip (  {%l s. 0 \\<le> s ''a''/ %l s. s ''y'' = s ''a'' * (s ''b'')/ f} CONSEQ C) { f \\<Down> %l s. s ''y'' = s ''a'' * (s ''b'') }\"", "lemma nested: assumes   \n    I2: \"I2 = (%l s. s ''a'' \\<ge> 0 \\<and> s ''b'' \\<ge> 0  \\<and> s ''a'' >  s ''z''  \\<and> s ''z'' \\<ge> 0 \\<and>   s ''b'' \\<ge> s ''g'' \\<and> s ''g'' \\<ge> 0  \\<and> s ''y'' = (s ''z'')  * (s ''b'') + s ''g''  )\" and\n \n  I1: \"I1 = (%l s. s ''a'' \\<ge> 0 \\<and> s ''b'' \\<ge> 0 \\<and> s ''a'' \\<ge>  s ''z'' \\<and> s ''z'' \\<ge> 0  \\<and> s ''y'' =  s ''z'' * (s ''b'')  )\" and  \n  \n  E2: \"E2 = (%s. 1 + 3 * ((nat (s ''b'') ) - nat (s ''g'')))\" and\n  S2: \"S2 = (%s. (if s ''g'' \\<ge> s ''b'' then s else s(''y'':=(s ''z'')  * (s ''b'') + s ''b'' , ''g'':=s ''b''  ) ))\" and\n     \n  E1: \"E1 = (%s. 1 + ( 4 + (3 * ((nat (s ''b'')  ))) ) * ((nat (s ''a'') ) - nat (s ''z'')))\" and\n  S1: \"S1 = (%s. (if s ''z'' \\<ge> s ''a'' then s else s(''y'':=(s ''a'') * (s ''b''), ''z'':=s ''a'', ''g'':=s ''b''  ) ))\" and\n  C: \"C = (''y'' ::= (N 0);; \n  ''z'' ::= (N 0) ;;\n  {(I1,(S1,(E1)))}  WHILE Less (V ''z'') (V ''a'') DO\n  (\n  ''g'' ::= (N 0) ;;                                                 \n  (\n  {(I2,(S2,(E2)))}  WHILE Less (V ''g'') (V ''b'') DO\n  (''y'' ::= Plus (V ''y'') (N 1);;\n  ''g'' ::= Plus (V ''g'') (N 1))\n  \n  ) ;;  \n  ''z'' ::= Plus (V ''z'') (N 1))\n  )\" and\n  f: \"f = (%s. 3 + 4*nat(s ''a'')+ 3 * (nat(s ''a'') * nat(s ''b'')))\"\nshows \"\\<turnstile>\\<^sub>1 { %l s. 0 \\<le> s ''a'' \\<and> s ''b'' \\<ge> 0  } strip C { f \\<Down> %l s. s ''y'' = s ''a'' * (s ''b'') }\"", "lemma fin_sup_single: \"finite (support (\\<lambda>l. P (l a)))\"", "lemmas fin_support = fin_sup_single", "lemma finite_support_and: \"finite (support A) \\<Longrightarrow> finite (support B) \\<Longrightarrow> finite (support (\\<lambda>l s. A l s \\<and> B l s))\""], "translations": [["", "lemma \"\\<turnstile>\\<^sub>1 {%l s. True} SKIP;; SKIP { %s. 1 \\<Down> %l s. True}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<turnstile>\\<^sub>1 {\\<lambda>l s. True} SKIP;; SKIP\n                         { \\<lambda>s. 1 \\<Down> \\<lambda>l s. True}", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<turnstile>\\<^sub>1 {\\<lambda>l s. True} SKIP;; SKIP\n                         { \\<lambda>s. 1 \\<Down> \\<lambda>l s. True}", "let ?T = \"%l s. True\""], ["proof (state)\ngoal (1 subgoal):\n 1. \\<turnstile>\\<^sub>1 {\\<lambda>l s. True} SKIP;; SKIP\n                         { \\<lambda>s. 1 \\<Down> \\<lambda>l s. True}", "have \"\\<turnstile>\\<^sub>1 {%l s. True} strip (Aconseq ?T ?T (%s. 1) (Aseq Askip Askip)) { %s. 1 \\<Down> %l s. True}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<turnstile>\\<^sub>1 {\\<lambda>l s. True}\n                         strip\n                          ({\\<lambda>l s.\n                               True/\\<lambda>l s. True/\\<lambda>s. 1}\n                           CONSEQ (SKIP;; SKIP))\n                         { \\<lambda>s. 1 \\<Down> \\<lambda>l s. True}", "apply(rule vc_sound'')"], ["proof (prove)\ngoal (4 subgoals):\n 1. vc ({\\<lambda>l s. True/\\<lambda>l s. True/\\<lambda>s. 1}\n        CONSEQ (SKIP;; SKIP))\n     (\\<lambda>l s. True)\n 2. \\<exists>k>0.\n       \\<forall>l s.\n          True \\<longrightarrow>\n          pre ({\\<lambda>l s. True/\\<lambda>l s. True/\\<lambda>s. 1}\n               CONSEQ (SKIP;; SKIP))\n           (\\<lambda>l s. True) l s \\<and>\n          time\n           ({\\<lambda>l s. True/\\<lambda>l s. True/\\<lambda>s. 1}\n            CONSEQ (SKIP;; SKIP))\n           s\n          \\<le> k * 1\n 3. finite (support (\\<lambda>l s. True))\n 4. finite\n     (varacom\n       ({\\<lambda>l s. True/\\<lambda>l s. True/\\<lambda>s. 1}\n        CONSEQ (SKIP;; SKIP)))", "by auto"], ["proof (state)\nthis:\n  \\<turnstile>\\<^sub>1 {\\<lambda>l s. True}\n                       strip\n                        ({\\<lambda>l s.\n                             True/\\<lambda>l s. True/\\<lambda>s. 1}\n                         CONSEQ (SKIP;; SKIP))\n                       { \\<lambda>s. 1 \\<Down> \\<lambda>l s. True}\n\ngoal (1 subgoal):\n 1. \\<turnstile>\\<^sub>1 {\\<lambda>l s. True} SKIP;; SKIP\n                         { \\<lambda>s. 1 \\<Down> \\<lambda>l s. True}", "then"], ["proof (chain)\npicking this:\n  \\<turnstile>\\<^sub>1 {\\<lambda>l s. True}\n                       strip\n                        ({\\<lambda>l s.\n                             True/\\<lambda>l s. True/\\<lambda>s. 1}\n                         CONSEQ (SKIP;; SKIP))\n                       { \\<lambda>s. 1 \\<Down> \\<lambda>l s. True}", "show ?thesis"], ["proof (prove)\nusing this:\n  \\<turnstile>\\<^sub>1 {\\<lambda>l s. True}\n                       strip\n                        ({\\<lambda>l s.\n                             True/\\<lambda>l s. True/\\<lambda>s. 1}\n                         CONSEQ (SKIP;; SKIP))\n                       { \\<lambda>s. 1 \\<Down> \\<lambda>l s. True}\n\ngoal (1 subgoal):\n 1. \\<turnstile>\\<^sub>1 {\\<lambda>l s. True} SKIP;; SKIP\n                         { \\<lambda>s. 1 \\<Down> \\<lambda>l s. True}", "by simp"], ["proof (state)\nthis:\n  \\<turnstile>\\<^sub>1 {\\<lambda>l s. True} SKIP;; SKIP\n                       { \\<lambda>s. 1 \\<Down> \\<lambda>l s. True}\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma \"finite (support P) \\<Longrightarrow> \\<turnstile>\\<^sub>1 {P} strip Askip {time Askip \\<Down> P}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. finite (support P) \\<Longrightarrow>\n    \\<turnstile>\\<^sub>1 {P} strip SKIP { time SKIP \\<Down> P}", "apply(rule vc_sound')"], ["proof (prove)\ngoal (4 subgoals):\n 1. finite (support P) \\<Longrightarrow> vc SKIP P\n 2. finite (support P) \\<Longrightarrow> finite (support P)\n 3. finite (support P) \\<Longrightarrow> finite (varacom SKIP)\n 4. finite (support P) \\<Longrightarrow>\n    \\<forall>l s. P l s \\<longrightarrow> pre SKIP P l s", "apply(simp)"], ["proof (prove)\ngoal (3 subgoals):\n 1. finite (support P) \\<Longrightarrow> finite (support P)\n 2. finite (support P) \\<Longrightarrow> finite (varacom SKIP)\n 3. finite (support P) \\<Longrightarrow>\n    \\<forall>l s. P l s \\<longrightarrow> pre SKIP P l s", "apply(simp)"], ["proof (prove)\ngoal (2 subgoals):\n 1. finite (support P) \\<Longrightarrow> finite (varacom SKIP)\n 2. finite (support P) \\<Longrightarrow>\n    \\<forall>l s. P l s \\<longrightarrow> pre SKIP P l s", "apply(simp)"], ["proof (prove)\ngoal (1 subgoal):\n 1. finite (support P) \\<Longrightarrow>\n    \\<forall>l s. P l s \\<longrightarrow> pre SKIP P l s", "apply(simp)"], ["proof (prove)\ngoal:\nNo subgoals!", "done"], ["", "lemma support_single2: \"support (\\<lambda>l s. P s) = {}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. support (\\<lambda>l. P) = {}", "unfolding support_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. {x. \\<exists>l1 l2 s.\n           (\\<forall>y. y \\<noteq> x \\<longrightarrow> l1 y = l2 y) \\<and>\n           P s \\<noteq> P s} =\n    {}", "by fastforce"], ["", "lemma \"\\<turnstile>\\<^sub>1 { %l s. True } strip (Aassign a (N 1)) {time (Aassign a (N 1)) \\<Down> %l s. s a = 1}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<turnstile>\\<^sub>1 {\\<lambda>l s. True} strip (a ::= N 1)\n                         { time (a ::= N 1) \\<Down> \\<lambda>l s. s a = 1}", "apply(rule vc_sound')"], ["proof (prove)\ngoal (4 subgoals):\n 1. vc (a ::= N 1) (\\<lambda>l s. s a = 1)\n 2. finite (support (\\<lambda>l s. s a = 1))\n 3. finite (varacom (a ::= N 1))\n 4. \\<forall>l s.\n       True \\<longrightarrow> pre (a ::= N 1) (\\<lambda>l s. s a = 1) l s", "apply(simp_all add: support_single2)"], ["proof (prove)\ngoal:\nNo subgoals!", "done"], ["", "lemma \"\\<turnstile>\\<^sub>1 { %l s. True } strip ( (a ::= (N 1)) ;; Askip ) {time ( (a ::= (N 1)) ;; Askip ) \\<Down> %l s. s a = 1}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<turnstile>\\<^sub>1 {\\<lambda>l s. True} strip (a ::= N 1;; SKIP)\n                         { time\n                            (a ::= N 1;;\n                             SKIP) \\<Down> \\<lambda>l s. s a = 1}", "apply(rule vc_sound')"], ["proof (prove)\ngoal (4 subgoals):\n 1. vc (a ::= N 1;; SKIP) (\\<lambda>l s. s a = 1)\n 2. finite (support (\\<lambda>l s. s a = 1))\n 3. finite (varacom (a ::= N 1;; SKIP))\n 4. \\<forall>l s.\n       True \\<longrightarrow>\n       pre (a ::= N 1;; SKIP) (\\<lambda>l s. s a = 1) l s", "apply(simp_all add: support_single2)"], ["proof (prove)\ngoal:\nNo subgoals!", "done"], ["", "lemma \"\\<turnstile>\\<^sub>1 { %l s. True } strip ( (a ::= (N 1)) ;; b ::= (V a) ) {time ( (a ::= (N 1)) ;; b ::= (V a) ) \\<Down> %l s. s b = 1}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<turnstile>\\<^sub>1 {\\<lambda>l s. True} strip (a ::= N 1;; b ::= V a)\n                         { time\n                            (a ::= N 1;;\n                             b ::= V a) \\<Down> \\<lambda>l s. s b = 1}", "apply(rule vc_sound')"], ["proof (prove)\ngoal (4 subgoals):\n 1. vc (a ::= N 1;; b ::= V a) (\\<lambda>l s. s b = 1)\n 2. finite (support (\\<lambda>l s. s b = 1))\n 3. finite (varacom (a ::= N 1;; b ::= V a))\n 4. \\<forall>l s.\n       True \\<longrightarrow>\n       pre (a ::= N 1;; b ::= V a) (\\<lambda>l s. s b = 1) l s", "by(simp_all add: support_single2)"], ["", "lemma assumes     \n  E: \"E = (%s. 1 + 2 * (4 - nat (s a)))\" and\n  C: \"C = ({(I,(S,(E)))} WHILE Less (V a) (N 3) DO a ::= Plus (V a) (N 1) )\"\nshows \"\\<And>s. 0 \\<le> s a \\<Longrightarrow> time C s \\<le> 9\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>s. 0 \\<le> s a \\<Longrightarrow> time C s \\<le> 9", "unfolding C E"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>s.\n       0 \\<le> s a \\<Longrightarrow>\n       time\n        ({(I, S, \\<lambda>s. 1 + 2 * (4 - nat (s a)))}\n         WHILE Less (V a) (N 3) DO a ::= Plus (V a) (N 1))\n        s\n       \\<le> 9", "apply(simp)"], ["proof (prove)\ngoal:\nNo subgoals!", "done"], ["", "paragraph \"Count up to 3\""], ["", "lemma example_count_upto_3: assumes \n  I: \"I = (%l s. s a \\<ge> 0)\" and\n  E: \"E = (%s. 1 + 2 * (4 - nat (s a)))\" and\n  S: \"S = (%s. (if s a \\<ge> 3 then s else s(a:=3) ))\" and\n  C: \"C = ({(I,(S,(E)))} WHILE Less (V a) (N 3) DO a ::= Plus (V a) (N 1) )\"\nshows \"\\<turnstile>\\<^sub>1 { %l s. 0 \\<le> s a } strip C {time C \\<Down> %l s. True }\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<turnstile>\\<^sub>1 {\\<lambda>l s. 0 \\<le> s a} strip C\n                         { time C \\<Down> \\<lambda>l s. True}", "unfolding C"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<turnstile>\\<^sub>1 {\\<lambda>l s. 0 \\<le> s a}\n                         strip\n                          ({(I, S, E)} WHILE Less (V a) (N 3)\n                           DO a ::= Plus (V a) (N 1))\n                         { time\n                            ({(I, S, E)} WHILE Less (V a) (N 3)\n                             DO a ::= Plus (V a)\n (N 1)) \\<Down> \\<lambda>l s. True}", "apply(rule vc_sound')"], ["proof (prove)\ngoal (4 subgoals):\n 1. vc ({(I, S, E)} WHILE Less (V a) (N 3) DO a ::= Plus (V a) (N 1))\n     (\\<lambda>l s. True)\n 2. finite (support (\\<lambda>l s. True))\n 3. finite\n     (varacom\n       ({(I, S, E)} WHILE Less (V a) (N 3) DO a ::= Plus (V a) (N 1)))\n 4. \\<forall>l s.\n       0 \\<le> s a \\<longrightarrow>\n       pre ({(I, S, E)} WHILE Less (V a) (N 3) DO a ::= Plus (V a) (N 1))\n        (\\<lambda>l s. True) l s", "subgoal"], ["proof (prove)\ngoal (1 subgoal):\n 1. vc ({(I, S, E)} WHILE Less (V a) (N 3) DO a ::= Plus (V a) (N 1))\n     (\\<lambda>l s. True)", "apply(simp)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>l s.\n       (I l s \\<and> s a < 3 \\<longrightarrow>\n        I l (s(a := s a + 1)) \\<and>\n        Suc (Suc (E (s(a := s a + 1)))) \\<le> E s \\<and>\n        S s = S (s(a := s a + 1))) \\<and>\n       (I l s \\<and> \\<not> s a < 3 \\<longrightarrow>\n        Suc 0 \\<le> E s \\<and> S s = s)", "apply(safe)"], ["proof (prove)\ngoal (5 subgoals):\n 1. \\<And>l s.\n       \\<lbrakk>I l s; s a < 3\\<rbrakk>\n       \\<Longrightarrow> I l (s(a := s a + 1))\n 2. \\<And>l s.\n       \\<lbrakk>I l s; s a < 3\\<rbrakk>\n       \\<Longrightarrow> Suc (Suc (E (s(a := s a + 1)))) \\<le> E s\n 3. \\<And>l s.\n       \\<lbrakk>I l s; s a < 3\\<rbrakk>\n       \\<Longrightarrow> S s = S (s(a := s a + 1))\n 4. \\<And>l s.\n       \\<lbrakk>I l s; \\<not> s a < 3\\<rbrakk>\n       \\<Longrightarrow> Suc 0 \\<le> E s\n 5. \\<And>l s.\n       \\<lbrakk>I l s; \\<not> s a < 3\\<rbrakk> \\<Longrightarrow> S s = s", "subgoal"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>I l_ s_; s_ a < 3\\<rbrakk>\n    \\<Longrightarrow> I l_ (s_(a := s_ a + 1))", "unfolding I"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>0 \\<le> s_ a; s_ a < 3\\<rbrakk>\n    \\<Longrightarrow> 0 \\<le> (s_(a := s_ a + 1)) a", "by simp"], ["proof (prove)\ngoal (4 subgoals):\n 1. \\<And>l s.\n       \\<lbrakk>I l s; s a < 3\\<rbrakk>\n       \\<Longrightarrow> Suc (Suc (E (s(a := s a + 1)))) \\<le> E s\n 2. \\<And>l s.\n       \\<lbrakk>I l s; s a < 3\\<rbrakk>\n       \\<Longrightarrow> S s = S (s(a := s a + 1))\n 3. \\<And>l s.\n       \\<lbrakk>I l s; \\<not> s a < 3\\<rbrakk>\n       \\<Longrightarrow> Suc 0 \\<le> E s\n 4. \\<And>l s.\n       \\<lbrakk>I l s; \\<not> s a < 3\\<rbrakk> \\<Longrightarrow> S s = s", "subgoal"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>I l_ s_; s_ a < 3\\<rbrakk>\n    \\<Longrightarrow> Suc (Suc (E (s_(a := s_ a + 1)))) \\<le> E s_", "unfolding I E"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>0 \\<le> s_ a; s_ a < 3\\<rbrakk>\n    \\<Longrightarrow> Suc (Suc (1 + 2 * (4 - nat ((s_(a := s_ a + 1)) a))))\n                      \\<le> 1 + 2 * (4 - nat (s_ a))", "by simp"], ["proof (prove)\ngoal (3 subgoals):\n 1. \\<And>l s.\n       \\<lbrakk>I l s; s a < 3\\<rbrakk>\n       \\<Longrightarrow> S s = S (s(a := s a + 1))\n 2. \\<And>l s.\n       \\<lbrakk>I l s; \\<not> s a < 3\\<rbrakk>\n       \\<Longrightarrow> Suc 0 \\<le> E s\n 3. \\<And>l s.\n       \\<lbrakk>I l s; \\<not> s a < 3\\<rbrakk> \\<Longrightarrow> S s = s", "subgoal"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>I l_ s_; s_ a < 3\\<rbrakk>\n    \\<Longrightarrow> S s_ = S (s_(a := s_ a + 1))", "unfolding S"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>I l_ s_; s_ a < 3\\<rbrakk>\n    \\<Longrightarrow> (if 3 \\<le> s_ a then s_ else s_(a := 3)) =\n                      (if 3 \\<le> (s_(a := s_ a + 1)) a\n                       then s_(a := s_ a + 1)\n                       else s_(a := s_ a + 1, a := 3))", "by auto"], ["proof (prove)\ngoal (2 subgoals):\n 1. \\<And>l s.\n       \\<lbrakk>I l s; \\<not> s a < 3\\<rbrakk>\n       \\<Longrightarrow> Suc 0 \\<le> E s\n 2. \\<And>l s.\n       \\<lbrakk>I l s; \\<not> s a < 3\\<rbrakk> \\<Longrightarrow> S s = s", "subgoal"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>I l_ s_; \\<not> s_ a < 3\\<rbrakk>\n    \\<Longrightarrow> Suc 0 \\<le> E s_", "unfolding I E"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>0 \\<le> s_ a; \\<not> s_ a < 3\\<rbrakk>\n    \\<Longrightarrow> Suc 0 \\<le> 1 + 2 * (4 - nat (s_ a))", "by auto"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>l s.\n       \\<lbrakk>I l s; \\<not> s a < 3\\<rbrakk> \\<Longrightarrow> S s = s", "subgoal"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>I l_ s_; \\<not> s_ a < 3\\<rbrakk> \\<Longrightarrow> S s_ = s_", "unfolding I S"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>0 \\<le> s_ a; \\<not> s_ a < 3\\<rbrakk>\n    \\<Longrightarrow> (if 3 \\<le> s_ a then s_ else s_(a := 3)) = s_", "by auto"], ["proof (prove)\ngoal:\nNo subgoals!", "done"], ["proof (prove)\ngoal (3 subgoals):\n 1. finite (support (\\<lambda>l s. True))\n 2. finite\n     (varacom\n       ({(I, S, E)} WHILE Less (V a) (N 3) DO a ::= Plus (V a) (N 1)))\n 3. \\<forall>l s.\n       0 \\<le> s a \\<longrightarrow>\n       pre ({(I, S, E)} WHILE Less (V a) (N 3) DO a ::= Plus (V a) (N 1))\n        (\\<lambda>l s. True) l s", "subgoal"], ["proof (prove)\ngoal (1 subgoal):\n 1. finite (support (\\<lambda>l s. True))", "by simp"], ["proof (prove)\ngoal (2 subgoals):\n 1. finite\n     (varacom\n       ({(I, S, E)} WHILE Less (V a) (N 3) DO a ::= Plus (V a) (N 1)))\n 2. \\<forall>l s.\n       0 \\<le> s a \\<longrightarrow>\n       pre ({(I, S, E)} WHILE Less (V a) (N 3) DO a ::= Plus (V a) (N 1))\n        (\\<lambda>l s. True) l s", "subgoal"], ["proof (prove)\ngoal (1 subgoal):\n 1. finite\n     (varacom\n       ({(I, S, E)} WHILE Less (V a) (N 3) DO a ::= Plus (V a) (N 1)))", "unfolding I"], ["proof (prove)\ngoal (1 subgoal):\n 1. finite\n     (varacom\n       ({(\\<lambda>l s. 0 \\<le> s a, S, E)} WHILE Less (V a) (N 3)\n        DO a ::= Plus (V a) (N 1)))", "by(simp add: support_inv)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>l s.\n       0 \\<le> s a \\<longrightarrow>\n       pre ({(I, S, E)} WHILE Less (V a) (N 3) DO a ::= Plus (V a) (N 1))\n        (\\<lambda>l s. True) l s", "subgoal"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>l s.\n       0 \\<le> s a \\<longrightarrow>\n       pre ({(I, S, E)} WHILE Less (V a) (N 3) DO a ::= Plus (V a) (N 1))\n        (\\<lambda>l s. True) l s", "unfolding I"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>l s.\n       0 \\<le> s a \\<longrightarrow>\n       pre ({(\\<lambda>l s. 0 \\<le> s a, S, E)} WHILE Less (V a) (N 3)\n            DO a ::= Plus (V a) (N 1))\n        (\\<lambda>l s. True) l s", "by simp"], ["proof (prove)\ngoal:\nNo subgoals!", "done"], ["", "paragraph \"Count up to b\""], ["", "lemma example_count_upto_b: assumes \n  I: \"I = (%l s. s a \\<ge> 0 )\" and\n  E: \"E = (%s. 1 + 2 * ((nat b+1) - nat (s a)))\" and\n  S: \"S = (%s. (if s a \\<ge> b then s else s(a:=b) ))\" and\n  C: \"C = ({(I,(S,(E)))} WHILE Less (V a) (N b) DO a ::= Plus (V a) (N 1) )\"\nshows \"\\<turnstile>\\<^sub>1 { %l s. 0 \\<le> s a } strip C {time C \\<Down> %l s. True }\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<turnstile>\\<^sub>1 {\\<lambda>l s. 0 \\<le> s a} strip C\n                         { time C \\<Down> \\<lambda>l s. True}", "unfolding C"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<turnstile>\\<^sub>1 {\\<lambda>l s. 0 \\<le> s a}\n                         strip\n                          ({(I, S, E)} WHILE Less (V a) (N b)\n                           DO a ::= Plus (V a) (N 1))\n                         { time\n                            ({(I, S, E)} WHILE Less (V a) (N b)\n                             DO a ::= Plus (V a)\n (N 1)) \\<Down> \\<lambda>l s. True}", "apply(rule vc_sound')"], ["proof (prove)\ngoal (4 subgoals):\n 1. vc ({(I, S, E)} WHILE Less (V a) (N b) DO a ::= Plus (V a) (N 1))\n     (\\<lambda>l s. True)\n 2. finite (support (\\<lambda>l s. True))\n 3. finite\n     (varacom\n       ({(I, S, E)} WHILE Less (V a) (N b) DO a ::= Plus (V a) (N 1)))\n 4. \\<forall>l s.\n       0 \\<le> s a \\<longrightarrow>\n       pre ({(I, S, E)} WHILE Less (V a) (N b) DO a ::= Plus (V a) (N 1))\n        (\\<lambda>l s. True) l s", "by(auto simp: I E S support_inv)"], ["", "paragraph \" Example: multiplication by repeated addition\""], ["", "lemma helper: \"(A::int) * B + B = (A+1) * B\""], ["proof (prove)\ngoal (1 subgoal):\n 1. A * B + B = (A + 1) * B", "by(auto simp: distrib_right)"], ["", "lemma mult: assumes  \n  I: \"I = (%l s. s ''a'' \\<ge> 0 \\<and> s ''a'' \\<ge> s ''z'' \\<and> s ''z'' \\<ge> 0  \\<and> s ''y'' =  s ''z'' * (s ''b'')  )\" and\n  E: \"E = (%s. 1 + 3 * ((nat (s ''a'') + 1) - nat (s ''z'')))\" and\n  S: \"S = (%s. (if s ''z'' \\<ge> s ''a'' then s else s(''y'':=(s ''a'') * (s ''b''), ''z'':=s ''a''  ) ))\" and\n  C: \"C = (''y'' ::= (N 0);; ''z'' ::= (N 0) ;; {(I,(S,(E)))}  WHILE Less (V ''z'') (V ''a'') DO (''y'' ::= Plus (V ''y'') (V ''b'') ;; ''z'' ::= Plus (V ''z'') (N 1)) )\" and\n  f: \"f = (%s. 3 * (nat(s ''a'') + 2))\"\nshows \"\\<turnstile>\\<^sub>1 { %l s. 0 \\<le> s ''a''  } strip C { f \\<Down> %l s. s ''y'' = s ''a'' * (s ''b'') }\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<turnstile>\\<^sub>1 {\\<lambda>l s. 0 \\<le> s ''a''} strip C\n                         { f \\<Down> \\<lambda>l s.\n  s ''y'' = s ''a'' * s ''b''}", "unfolding C"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<turnstile>\\<^sub>1 {\\<lambda>l s. 0 \\<le> s ''a''}\n                         strip\n                          (''y'' ::= N 0;; ''z'' ::= N 0;;\n                           {(I, S, E)} WHILE Less (V ''z'') (V ''a'')\n                           DO (''y'' ::= Plus (V ''y'') (V ''b'');;\n                               ''z'' ::= Plus (V ''z'') (N 1)))\n                         { f \\<Down> \\<lambda>l s.\n  s ''y'' = s ''a'' * s ''b''}", "apply(rule vc_sound'')"], ["proof (prove)\ngoal (4 subgoals):\n 1. vc (''y'' ::= N 0;; ''z'' ::= N 0;;\n        {(I, S, E)} WHILE Less (V ''z'') (V ''a'')\n        DO (''y'' ::= Plus (V ''y'') (V ''b'');;\n            ''z'' ::= Plus (V ''z'') (N 1)))\n     (\\<lambda>l s. s ''y'' = s ''a'' * s ''b'')\n 2. \\<exists>k>0.\n       \\<forall>l s.\n          0 \\<le> s ''a'' \\<longrightarrow>\n          pre (''y'' ::= N 0;; ''z'' ::= N 0;;\n               {(I, S, E)} WHILE Less (V ''z'') (V ''a'')\n               DO (''y'' ::= Plus (V ''y'') (V ''b'');;\n                   ''z'' ::= Plus (V ''z'') (N 1)))\n           (\\<lambda>l s. s ''y'' = s ''a'' * s ''b'') l s \\<and>\n          time\n           (''y'' ::= N 0;; ''z'' ::= N 0;;\n            {(I, S, E)} WHILE Less (V ''z'') (V ''a'')\n            DO (''y'' ::= Plus (V ''y'') (V ''b'');;\n                ''z'' ::= Plus (V ''z'') (N 1)))\n           s\n          \\<le> k * f s\n 3. finite (support (\\<lambda>l s. s ''y'' = s ''a'' * s ''b''))\n 4. finite\n     (varacom\n       (''y'' ::= N 0;; ''z'' ::= N 0;;\n        {(I, S, E)} WHILE Less (V ''z'') (V ''a'')\n        DO (''y'' ::= Plus (V ''y'') (V ''b'');;\n            ''z'' ::= Plus (V ''z'') (N 1))))", "apply(auto simp: I E S distrib_right support_inv f)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>s.\n       \\<lbrakk>s ''a'' \\<le> s ''z'' + 1; 0 \\<le> s ''z'';\n        s ''y'' = s ''z'' * s ''b''; s ''z'' < s ''a''\\<rbrakk>\n       \\<Longrightarrow> s(''y'' := s ''a'' * s ''b'', ''z'' := s ''a'') = s\n                         (''y'' := s ''z'' * s ''b'' + s ''b'',\n                          ''z'' := s ''z'' + 1)", "subgoal for s"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>s ''a'' \\<le> s ''z'' + 1; 0 \\<le> s ''z'';\n     s ''y'' = s ''z'' * s ''b''; s ''z'' < s ''a''\\<rbrakk>\n    \\<Longrightarrow> s(''y'' := s ''a'' * s ''b'', ''z'' := s ''a'') = s\n                      (''y'' := s ''z'' * s ''b'' + s ''b'',\n                       ''z'' := s ''z'' + 1)", "by (auto simp add: helper)"], ["proof (prove)\ngoal:\nNo subgoals!", "done"], ["", "(* try to use abstraction *)"], ["", "lemma mult_abstract: assumes  \n  I: \"I = (%l s. s ''a'' \\<ge> 0 \\<and> s ''a'' \\<ge> s ''z'' \\<and> s ''z'' \\<ge> 0  \\<and> s ''y'' =  s ''z'' * (s ''b'')  )\" and\n  E: \"E = (%s. 1 + 2* ((nat (s ''a'') + 1) - nat (s ''z'')))\" and\n  S: \"S = (%s. (if s ''z'' \\<ge> s ''a'' then s else s(''y'':=(s ''a'') * (s ''b''), ''z'':=s ''a''  ) ))\" and\n  e: \"e = (%s. 1)\" and\n  lb[simp]: \"(lb::acom) = ({\\<lambda>l s. I l s \\<and> s ''z'' < s ''a''  /I/e} CONSEQ (''y'' ::= Plus (V ''y'') (V ''b'') ;; ''z'' ::= Plus (V ''z'') (N 1)) )\" and\n  l[simp]: \"(l::acom) = {(I,(S,(E)))}  WHILE  (Less (V ''z'') (V ''a'')) DO lb\" and\n  e'[simp]: \"e' = (%s. 1 + (nat (s ''a'')))\" and\n  wl[simp]: \"(wl::acom) = {I/\\<lambda>l s. I l s \\<and> s ''z'' \\<ge> s ''a''/e'} CONSEQ l\" and\n  C: \"(C::acom) = (''y'' ::= (N 0);; ''z'' ::= (N 0) ;; wl )\" and\n  f: \"f = (%s. nat(s ''a'') + 1)\"\nshows \"\\<turnstile>\\<^sub>1 { %l s. 0 \\<le> s ''a''  } strip (  {%l s. 0 \\<le> s ''a''/ %l s. s ''y'' = s ''a'' * (s ''b'')/ f} CONSEQ C) { f \\<Down> %l s. s ''y'' = s ''a'' * (s ''b'') }\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<turnstile>\\<^sub>1 {\\<lambda>l s. 0 \\<le> s ''a''}\n                         strip\n                          ({\\<lambda>l s.\n                               0 \\<le> s\n  ''a''/\\<lambda>l s. s ''y'' = s ''a'' * s ''b''/f}\n                           CONSEQ C)\n                         { f \\<Down> \\<lambda>l s.\n  s ''y'' = s ''a'' * s ''b''}", "unfolding C"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<turnstile>\\<^sub>1 {\\<lambda>l s. 0 \\<le> s ''a''}\n                         strip\n                          ({\\<lambda>l s.\n                               0 \\<le> s\n  ''a''/\\<lambda>l s. s ''y'' = s ''a'' * s ''b''/f}\n                           CONSEQ (''y'' ::= N 0;; ''z'' ::= N 0;; wl))\n                         { f \\<Down> \\<lambda>l s.\n  s ''y'' = s ''a'' * s ''b''}", "apply(rule vc_sound'')"], ["proof (prove)\ngoal (4 subgoals):\n 1. vc ({\\<lambda>l s.\n            0 \\<le> s ''a''/\\<lambda>l s. s ''y'' = s ''a'' * s ''b''/f}\n        CONSEQ (''y'' ::= N 0;; ''z'' ::= N 0;; wl))\n     (\\<lambda>l s. s ''y'' = s ''a'' * s ''b'')\n 2. \\<exists>k>0.\n       \\<forall>l s.\n          0 \\<le> s ''a'' \\<longrightarrow>\n          pre ({\\<lambda>l s.\n                   0 \\<le> s ''a''/\\<lambda>l s.\ns ''y'' = s ''a'' * s ''b''/f}\n               CONSEQ (''y'' ::= N 0;; ''z'' ::= N 0;; wl))\n           (\\<lambda>l s. s ''y'' = s ''a'' * s ''b'') l s \\<and>\n          time\n           ({\\<lambda>l s.\n                0 \\<le> s ''a''/\\<lambda>l s. s ''y'' = s ''a'' * s ''b''/f}\n            CONSEQ (''y'' ::= N 0;; ''z'' ::= N 0;; wl))\n           s\n          \\<le> k * f s\n 3. finite (support (\\<lambda>l s. s ''y'' = s ''a'' * s ''b''))\n 4. finite\n     (varacom\n       ({\\<lambda>l s.\n            0 \\<le> s ''a''/\\<lambda>l s. s ''y'' = s ''a'' * s ''b''/f}\n        CONSEQ (''y'' ::= N 0;; ''z'' ::= N 0;; wl)))", "apply(auto simp: I E S distrib_right support_inv f e)"], ["proof (prove)\ngoal (3 subgoals):\n 1. \\<And>s.\n       \\<lbrakk>s ''a'' \\<le> s ''z'' + 1; 0 \\<le> s ''z'';\n        s ''y'' = s ''z'' * s ''b''; s ''z'' < s ''a''\\<rbrakk>\n       \\<Longrightarrow> s(''y'' := s ''a'' * s ''b'', ''z'' := s ''a'') = s\n                         (''y'' := s ''z'' * s ''b'' + s ''b'',\n                          ''z'' := s ''z'' + 1)\n 2. \\<exists>k>0.\n       \\<forall>s.\n          0 \\<le> s ''a'' \\<and>\n          s ''z'' \\<le> s ''a'' \\<and>\n          0 \\<le> s ''z'' \\<and>\n          s ''y'' = s ''z'' * s ''b'' \\<longrightarrow>\n          Suc (2 * (Suc (nat (s ''a'')) - nat (s ''z'')))\n          \\<le> k + k * nat (s ''a'')\n 3. \\<exists>k>0.\n       \\<forall>s.\n          0 \\<le> s ''a'' \\<longrightarrow>\n          Suc (Suc (Suc (nat (s ''a'')))) \\<le> k + k * nat (s ''a'')", "subgoal for s"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>s ''a'' \\<le> s ''z'' + 1; 0 \\<le> s ''z'';\n     s ''y'' = s ''z'' * s ''b''; s ''z'' < s ''a''\\<rbrakk>\n    \\<Longrightarrow> s(''y'' := s ''a'' * s ''b'', ''z'' := s ''a'') = s\n                      (''y'' := s ''z'' * s ''b'' + s ''b'',\n                       ''z'' := s ''z'' + 1)", "by (auto simp add: helper)"], ["proof (prove)\ngoal (2 subgoals):\n 1. \\<exists>k>0.\n       \\<forall>s.\n          0 \\<le> s ''a'' \\<and>\n          s ''z'' \\<le> s ''a'' \\<and>\n          0 \\<le> s ''z'' \\<and>\n          s ''y'' = s ''z'' * s ''b'' \\<longrightarrow>\n          Suc (2 * (Suc (nat (s ''a'')) - nat (s ''z'')))\n          \\<le> k + k * nat (s ''a'')\n 2. \\<exists>k>0.\n       \\<forall>s.\n          0 \\<le> s ''a'' \\<longrightarrow>\n          Suc (Suc (Suc (nat (s ''a'')))) \\<le> k + k * nat (s ''a'')", "apply(rule exI[where x=100])"], ["proof (prove)\ngoal (2 subgoals):\n 1. 0 < 100 \\<and>\n    (\\<forall>s.\n        0 \\<le> s ''a'' \\<and>\n        s ''z'' \\<le> s ''a'' \\<and>\n        0 \\<le> s ''z'' \\<and> s ''y'' = s ''z'' * s ''b'' \\<longrightarrow>\n        Suc (2 * (Suc (nat (s ''a'')) - nat (s ''z'')))\n        \\<le> 100 + 100 * nat (s ''a''))\n 2. \\<exists>k>0.\n       \\<forall>s.\n          0 \\<le> s ''a'' \\<longrightarrow>\n          Suc (Suc (Suc (nat (s ''a'')))) \\<le> k + k * nat (s ''a'')", "apply auto"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>k>0.\n       \\<forall>s.\n          0 \\<le> s ''a'' \\<longrightarrow>\n          Suc (Suc (Suc (nat (s ''a'')))) \\<le> k + k * nat (s ''a'')", "apply(rule exI[where x=100])"], ["proof (prove)\ngoal (1 subgoal):\n 1. 0 < 100 \\<and>\n    (\\<forall>s.\n        0 \\<le> s ''a'' \\<longrightarrow>\n        Suc (Suc (Suc (nat (s ''a'')))) \\<le> 100 + 100 * nat (s ''a''))", "apply auto"], ["proof (prove)\ngoal:\nNo subgoals!", "done"], ["", "paragraph \\<open>Example: nested loops\\<close>"], ["", "lemma nested: assumes   \n    I2: \"I2 = (%l s. s ''a'' \\<ge> 0 \\<and> s ''b'' \\<ge> 0  \\<and> s ''a'' >  s ''z''  \\<and> s ''z'' \\<ge> 0 \\<and>   s ''b'' \\<ge> s ''g'' \\<and> s ''g'' \\<ge> 0  \\<and> s ''y'' = (s ''z'')  * (s ''b'') + s ''g''  )\" and\n \n  I1: \"I1 = (%l s. s ''a'' \\<ge> 0 \\<and> s ''b'' \\<ge> 0 \\<and> s ''a'' \\<ge>  s ''z'' \\<and> s ''z'' \\<ge> 0  \\<and> s ''y'' =  s ''z'' * (s ''b'')  )\" and  \n  \n  E2: \"E2 = (%s. 1 + 3 * ((nat (s ''b'') ) - nat (s ''g'')))\" and\n  S2: \"S2 = (%s. (if s ''g'' \\<ge> s ''b'' then s else s(''y'':=(s ''z'')  * (s ''b'') + s ''b'' , ''g'':=s ''b''  ) ))\" and\n     \n  E1: \"E1 = (%s. 1 + ( 4 + (3 * ((nat (s ''b'')  ))) ) * ((nat (s ''a'') ) - nat (s ''z'')))\" and\n  S1: \"S1 = (%s. (if s ''z'' \\<ge> s ''a'' then s else s(''y'':=(s ''a'') * (s ''b''), ''z'':=s ''a'', ''g'':=s ''b''  ) ))\" and\n  C: \"C = (''y'' ::= (N 0);; \n  ''z'' ::= (N 0) ;;\n  {(I1,(S1,(E1)))}  WHILE Less (V ''z'') (V ''a'') DO\n  (\n  ''g'' ::= (N 0) ;;                                                 \n  (\n  {(I2,(S2,(E2)))}  WHILE Less (V ''g'') (V ''b'') DO\n  (''y'' ::= Plus (V ''y'') (N 1);;\n  ''g'' ::= Plus (V ''g'') (N 1))\n  \n  ) ;;  \n  ''z'' ::= Plus (V ''z'') (N 1))\n  )\" and\n  f: \"f = (%s. 3 + 4*nat(s ''a'')+ 3 * (nat(s ''a'') * nat(s ''b'')))\"\nshows \"\\<turnstile>\\<^sub>1 { %l s. 0 \\<le> s ''a'' \\<and> s ''b'' \\<ge> 0  } strip C { f \\<Down> %l s. s ''y'' = s ''a'' * (s ''b'') }\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<turnstile>\\<^sub>1 {\\<lambda>l s.\n                             0 \\<le> s ''a'' \\<and> 0 \\<le> s ''b''}\n                         strip C\n                         { f \\<Down> \\<lambda>l s.\n  s ''y'' = s ''a'' * s ''b''}", "unfolding C"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<turnstile>\\<^sub>1 {\\<lambda>l s.\n                             0 \\<le> s ''a'' \\<and> 0 \\<le> s ''b''}\n                         strip\n                          (''y'' ::= N 0;; ''z'' ::= N 0;;\n                           {(I1, S1, E1)} WHILE Less (V ''z'') (V ''a'')\n                           DO (''g'' ::= N 0;;\n                               {(I2, S2, E2)} WHILE Less (V ''g'') (V ''b'')\n                               DO (''y'' ::= Plus (V ''y'') (N 1);;\n                                   ''g'' ::= Plus (V ''g'') (N 1));;\n                               ''z'' ::= Plus (V ''z'') (N 1)))\n                         { f \\<Down> \\<lambda>l s.\n  s ''y'' = s ''a'' * s ''b''}", "apply(rule vc_sound'')"], ["proof (prove)\ngoal (4 subgoals):\n 1. vc (''y'' ::= N 0;; ''z'' ::= N 0;;\n        {(I1, S1, E1)} WHILE Less (V ''z'') (V ''a'')\n        DO (''g'' ::= N 0;;\n            {(I2, S2, E2)} WHILE Less (V ''g'') (V ''b'')\n            DO (''y'' ::= Plus (V ''y'') (N 1);;\n                ''g'' ::= Plus (V ''g'') (N 1));;\n            ''z'' ::= Plus (V ''z'') (N 1)))\n     (\\<lambda>l s. s ''y'' = s ''a'' * s ''b'')\n 2. \\<exists>k>0.\n       \\<forall>l s.\n          0 \\<le> s ''a'' \\<and> 0 \\<le> s ''b'' \\<longrightarrow>\n          pre (''y'' ::= N 0;; ''z'' ::= N 0;;\n               {(I1, S1, E1)} WHILE Less (V ''z'') (V ''a'')\n               DO (''g'' ::= N 0;;\n                   {(I2, S2, E2)} WHILE Less (V ''g'') (V ''b'')\n                   DO (''y'' ::= Plus (V ''y'') (N 1);;\n                       ''g'' ::= Plus (V ''g'') (N 1));;\n                   ''z'' ::= Plus (V ''z'') (N 1)))\n           (\\<lambda>l s. s ''y'' = s ''a'' * s ''b'') l s \\<and>\n          time\n           (''y'' ::= N 0;; ''z'' ::= N 0;;\n            {(I1, S1, E1)} WHILE Less (V ''z'') (V ''a'')\n            DO (''g'' ::= N 0;;\n                {(I2, S2, E2)} WHILE Less (V ''g'') (V ''b'')\n                DO (''y'' ::= Plus (V ''y'') (N 1);;\n                    ''g'' ::= Plus (V ''g'') (N 1));;\n                ''z'' ::= Plus (V ''z'') (N 1)))\n           s\n          \\<le> k * f s\n 3. finite (support (\\<lambda>l s. s ''y'' = s ''a'' * s ''b''))\n 4. finite\n     (varacom\n       (''y'' ::= N 0;; ''z'' ::= N 0;;\n        {(I1, S1, E1)} WHILE Less (V ''z'') (V ''a'')\n        DO (''g'' ::= N 0;;\n            {(I2, S2, E2)} WHILE Less (V ''g'') (V ''b'')\n            DO (''y'' ::= Plus (V ''y'') (N 1);;\n                ''g'' ::= Plus (V ''g'') (N 1));;\n            ''z'' ::= Plus (V ''z'') (N 1))))", "proof( goal_cases)"], ["proof (state)\ngoal (4 subgoals):\n 1. vc (''y'' ::= N 0;; ''z'' ::= N 0;;\n        {(I1, S1, E1)} WHILE Less (V ''z'') (V ''a'')\n        DO (''g'' ::= N 0;;\n            {(I2, S2, E2)} WHILE Less (V ''g'') (V ''b'')\n            DO (''y'' ::= Plus (V ''y'') (N 1);;\n                ''g'' ::= Plus (V ''g'') (N 1));;\n            ''z'' ::= Plus (V ''z'') (N 1)))\n     (\\<lambda>l s. s ''y'' = s ''a'' * s ''b'')\n 2. \\<exists>k>0.\n       \\<forall>l s.\n          0 \\<le> s ''a'' \\<and> 0 \\<le> s ''b'' \\<longrightarrow>\n          pre (''y'' ::= N 0;; ''z'' ::= N 0;;\n               {(I1, S1, E1)} WHILE Less (V ''z'') (V ''a'')\n               DO (''g'' ::= N 0;;\n                   {(I2, S2, E2)} WHILE Less (V ''g'') (V ''b'')\n                   DO (''y'' ::= Plus (V ''y'') (N 1);;\n                       ''g'' ::= Plus (V ''g'') (N 1));;\n                   ''z'' ::= Plus (V ''z'') (N 1)))\n           (\\<lambda>l s. s ''y'' = s ''a'' * s ''b'') l s \\<and>\n          time\n           (''y'' ::= N 0;; ''z'' ::= N 0;;\n            {(I1, S1, E1)} WHILE Less (V ''z'') (V ''a'')\n            DO (''g'' ::= N 0;;\n                {(I2, S2, E2)} WHILE Less (V ''g'') (V ''b'')\n                DO (''y'' ::= Plus (V ''y'') (N 1);;\n                    ''g'' ::= Plus (V ''g'') (N 1));;\n                ''z'' ::= Plus (V ''z'') (N 1)))\n           s\n          \\<le> k * f s\n 3. finite (support (\\<lambda>l s. s ''y'' = s ''a'' * s ''b''))\n 4. finite\n     (varacom\n       (''y'' ::= N 0;; ''z'' ::= N 0;;\n        {(I1, S1, E1)} WHILE Less (V ''z'') (V ''a'')\n        DO (''g'' ::= N 0;;\n            {(I2, S2, E2)} WHILE Less (V ''g'') (V ''b'')\n            DO (''y'' ::= Plus (V ''y'') (N 1);;\n                ''g'' ::= Plus (V ''g'') (N 1));;\n            ''z'' ::= Plus (V ''z'') (N 1))))", "case 1"], ["proof (state)\nthis:\n  \n\ngoal (4 subgoals):\n 1. vc (''y'' ::= N 0;; ''z'' ::= N 0;;\n        {(I1, S1, E1)} WHILE Less (V ''z'') (V ''a'')\n        DO (''g'' ::= N 0;;\n            {(I2, S2, E2)} WHILE Less (V ''g'') (V ''b'')\n            DO (''y'' ::= Plus (V ''y'') (N 1);;\n                ''g'' ::= Plus (V ''g'') (N 1));;\n            ''z'' ::= Plus (V ''z'') (N 1)))\n     (\\<lambda>l s. s ''y'' = s ''a'' * s ''b'')\n 2. \\<exists>k>0.\n       \\<forall>l s.\n          0 \\<le> s ''a'' \\<and> 0 \\<le> s ''b'' \\<longrightarrow>\n          pre (''y'' ::= N 0;; ''z'' ::= N 0;;\n               {(I1, S1, E1)} WHILE Less (V ''z'') (V ''a'')\n               DO (''g'' ::= N 0;;\n                   {(I2, S2, E2)} WHILE Less (V ''g'') (V ''b'')\n                   DO (''y'' ::= Plus (V ''y'') (N 1);;\n                       ''g'' ::= Plus (V ''g'') (N 1));;\n                   ''z'' ::= Plus (V ''z'') (N 1)))\n           (\\<lambda>l s. s ''y'' = s ''a'' * s ''b'') l s \\<and>\n          time\n           (''y'' ::= N 0;; ''z'' ::= N 0;;\n            {(I1, S1, E1)} WHILE Less (V ''z'') (V ''a'')\n            DO (''g'' ::= N 0;;\n                {(I2, S2, E2)} WHILE Less (V ''g'') (V ''b'')\n                DO (''y'' ::= Plus (V ''y'') (N 1);;\n                    ''g'' ::= Plus (V ''g'') (N 1));;\n                ''z'' ::= Plus (V ''z'') (N 1)))\n           s\n          \\<le> k * f s\n 3. finite (support (\\<lambda>l s. s ''y'' = s ''a'' * s ''b''))\n 4. finite\n     (varacom\n       (''y'' ::= N 0;; ''z'' ::= N 0;;\n        {(I1, S1, E1)} WHILE Less (V ''z'') (V ''a'')\n        DO (''g'' ::= N 0;;\n            {(I2, S2, E2)} WHILE Less (V ''g'') (V ''b'')\n            DO (''y'' ::= Plus (V ''y'') (N 1);;\n                ''g'' ::= Plus (V ''g'') (N 1));;\n            ''z'' ::= Plus (V ''z'') (N 1))))", "show ?case"], ["proof (prove)\ngoal (1 subgoal):\n 1. vc (''y'' ::= N 0;; ''z'' ::= N 0;;\n        {(I1, S1, E1)} WHILE Less (V ''z'') (V ''a'')\n        DO (''g'' ::= N 0;;\n            {(I2, S2, E2)} WHILE Less (V ''g'') (V ''b'')\n            DO (''y'' ::= Plus (V ''y'') (N 1);;\n                ''g'' ::= Plus (V ''g'') (N 1));;\n            ''z'' ::= Plus (V ''z'') (N 1)))\n     (\\<lambda>l s. s ''y'' = s ''a'' * s ''b'')", "apply(simp)"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<forall>l s.\n        (I1 l s \\<and> s ''z'' < s ''a'' \\<longrightarrow>\n         I2 l (s(''g'' := 0)) \\<and>\n         Suc (Suc (Suc (E1 ((S2 (s(''g'' := 0)))\n                            (''z'' := S2 (s(''g'' := 0)) ''z'' + 1)) +\n                        E2 (s(''g'' := 0)))))\n         \\<le> E1 s \\<and>\n         S1 s =\n         S1 ((S2 (s(''g'' := 0)))\n             (''z'' := S2 (s(''g'' := 0)) ''z'' + 1))) \\<and>\n        (I1 l s \\<and> \\<not> s ''z'' < s ''a'' \\<longrightarrow>\n         s ''y'' = s ''a'' * s ''b'' \\<and>\n         Suc 0 \\<le> E1 s \\<and> S1 s = s)) \\<and>\n    (\\<forall>l s.\n        (I2 l s \\<and> s ''g'' < s ''b'' \\<longrightarrow>\n         I2 l (s(''y'' := s ''y'' + 1, ''g'' := s ''g'' + 1)) \\<and>\n         Suc (Suc (Suc (E2 (s(''y'' := s ''y'' + 1,\n                              ''g'' := s ''g'' + 1)))))\n         \\<le> E2 s \\<and>\n         S2 s = S2 (s(''y'' := s ''y'' + 1, ''g'' := s ''g'' + 1))) \\<and>\n        (I2 l s \\<and> \\<not> s ''g'' < s ''b'' \\<longrightarrow>\n         I1 l (s(''z'' := s ''z'' + 1)) \\<and>\n         Suc 0 \\<le> E2 s \\<and> S2 s = s))", "proof(safe, goal_cases)"], ["proof (state)\ngoal (12 subgoals):\n 1. \\<And>l s.\n       \\<lbrakk>I1 l s; s ''z'' < s ''a''\\<rbrakk>\n       \\<Longrightarrow> I2 l (s(''g'' := 0))\n 2. \\<And>l s.\n       \\<lbrakk>I1 l s; s ''z'' < s ''a''\\<rbrakk>\n       \\<Longrightarrow> Suc (Suc (Suc (E1\n   ((S2 (s(''g'' := 0)))(''z'' := S2 (s(''g'' := 0)) ''z'' + 1)) +\n  E2 (s(''g'' := 0)))))\n                         \\<le> E1 s\n 3. \\<And>l s.\n       \\<lbrakk>I1 l s; s ''z'' < s ''a''\\<rbrakk>\n       \\<Longrightarrow> S1 s =\n                         S1 ((S2 (s(''g'' := 0)))\n                             (''z'' := S2 (s(''g'' := 0)) ''z'' + 1))\n 4. \\<And>l s.\n       \\<lbrakk>I1 l s; \\<not> s ''z'' < s ''a''\\<rbrakk>\n       \\<Longrightarrow> s ''y'' = s ''a'' * s ''b''\n 5. \\<And>l s.\n       \\<lbrakk>I1 l s; \\<not> s ''z'' < s ''a''\\<rbrakk>\n       \\<Longrightarrow> Suc 0 \\<le> E1 s\n 6. \\<And>l s.\n       \\<lbrakk>I1 l s; \\<not> s ''z'' < s ''a''\\<rbrakk>\n       \\<Longrightarrow> S1 s = s\n 7. \\<And>l s.\n       \\<lbrakk>I2 l s; s ''g'' < s ''b''\\<rbrakk>\n       \\<Longrightarrow> I2 l\n                          (s(''y'' := s ''y'' + 1, ''g'' := s ''g'' + 1))\n 8. \\<And>l s.\n       \\<lbrakk>I2 l s; s ''g'' < s ''b''\\<rbrakk>\n       \\<Longrightarrow> Suc (Suc (Suc (E2\n   (s(''y'' := s ''y'' + 1, ''g'' := s ''g'' + 1)))))\n                         \\<le> E2 s\n 9. \\<And>l s.\n       \\<lbrakk>I2 l s; s ''g'' < s ''b''\\<rbrakk>\n       \\<Longrightarrow> S2 s =\n                         S2 (s(''y'' := s ''y'' + 1, ''g'' := s ''g'' + 1))\n 10. \\<And>l s.\n        \\<lbrakk>I2 l s; \\<not> s ''g'' < s ''b''\\<rbrakk>\n        \\<Longrightarrow> I1 l (s(''z'' := s ''z'' + 1))\nA total of 12 subgoals...", "case (1 l s)"], ["proof (state)\nthis:\n  I1 l s\n  s ''z'' < s ''a''\n\ngoal (12 subgoals):\n 1. \\<And>l s.\n       \\<lbrakk>I1 l s; s ''z'' < s ''a''\\<rbrakk>\n       \\<Longrightarrow> I2 l (s(''g'' := 0))\n 2. \\<And>l s.\n       \\<lbrakk>I1 l s; s ''z'' < s ''a''\\<rbrakk>\n       \\<Longrightarrow> Suc (Suc (Suc (E1\n   ((S2 (s(''g'' := 0)))(''z'' := S2 (s(''g'' := 0)) ''z'' + 1)) +\n  E2 (s(''g'' := 0)))))\n                         \\<le> E1 s\n 3. \\<And>l s.\n       \\<lbrakk>I1 l s; s ''z'' < s ''a''\\<rbrakk>\n       \\<Longrightarrow> S1 s =\n                         S1 ((S2 (s(''g'' := 0)))\n                             (''z'' := S2 (s(''g'' := 0)) ''z'' + 1))\n 4. \\<And>l s.\n       \\<lbrakk>I1 l s; \\<not> s ''z'' < s ''a''\\<rbrakk>\n       \\<Longrightarrow> s ''y'' = s ''a'' * s ''b''\n 5. \\<And>l s.\n       \\<lbrakk>I1 l s; \\<not> s ''z'' < s ''a''\\<rbrakk>\n       \\<Longrightarrow> Suc 0 \\<le> E1 s\n 6. \\<And>l s.\n       \\<lbrakk>I1 l s; \\<not> s ''z'' < s ''a''\\<rbrakk>\n       \\<Longrightarrow> S1 s = s\n 7. \\<And>l s.\n       \\<lbrakk>I2 l s; s ''g'' < s ''b''\\<rbrakk>\n       \\<Longrightarrow> I2 l\n                          (s(''y'' := s ''y'' + 1, ''g'' := s ''g'' + 1))\n 8. \\<And>l s.\n       \\<lbrakk>I2 l s; s ''g'' < s ''b''\\<rbrakk>\n       \\<Longrightarrow> Suc (Suc (Suc (E2\n   (s(''y'' := s ''y'' + 1, ''g'' := s ''g'' + 1)))))\n                         \\<le> E2 s\n 9. \\<And>l s.\n       \\<lbrakk>I2 l s; s ''g'' < s ''b''\\<rbrakk>\n       \\<Longrightarrow> S2 s =\n                         S2 (s(''y'' := s ''y'' + 1, ''g'' := s ''g'' + 1))\n 10. \\<And>l s.\n        \\<lbrakk>I2 l s; \\<not> s ''g'' < s ''b''\\<rbrakk>\n        \\<Longrightarrow> I1 l (s(''z'' := s ''z'' + 1))\nA total of 12 subgoals...", "(* outer loop: invariant implies precondition of body *)"], ["proof (state)\nthis:\n  I1 l s\n  s ''z'' < s ''a''\n\ngoal (12 subgoals):\n 1. \\<And>l s.\n       \\<lbrakk>I1 l s; s ''z'' < s ''a''\\<rbrakk>\n       \\<Longrightarrow> I2 l (s(''g'' := 0))\n 2. \\<And>l s.\n       \\<lbrakk>I1 l s; s ''z'' < s ''a''\\<rbrakk>\n       \\<Longrightarrow> Suc (Suc (Suc (E1\n   ((S2 (s(''g'' := 0)))(''z'' := S2 (s(''g'' := 0)) ''z'' + 1)) +\n  E2 (s(''g'' := 0)))))\n                         \\<le> E1 s\n 3. \\<And>l s.\n       \\<lbrakk>I1 l s; s ''z'' < s ''a''\\<rbrakk>\n       \\<Longrightarrow> S1 s =\n                         S1 ((S2 (s(''g'' := 0)))\n                             (''z'' := S2 (s(''g'' := 0)) ''z'' + 1))\n 4. \\<And>l s.\n       \\<lbrakk>I1 l s; \\<not> s ''z'' < s ''a''\\<rbrakk>\n       \\<Longrightarrow> s ''y'' = s ''a'' * s ''b''\n 5. \\<And>l s.\n       \\<lbrakk>I1 l s; \\<not> s ''z'' < s ''a''\\<rbrakk>\n       \\<Longrightarrow> Suc 0 \\<le> E1 s\n 6. \\<And>l s.\n       \\<lbrakk>I1 l s; \\<not> s ''z'' < s ''a''\\<rbrakk>\n       \\<Longrightarrow> S1 s = s\n 7. \\<And>l s.\n       \\<lbrakk>I2 l s; s ''g'' < s ''b''\\<rbrakk>\n       \\<Longrightarrow> I2 l\n                          (s(''y'' := s ''y'' + 1, ''g'' := s ''g'' + 1))\n 8. \\<And>l s.\n       \\<lbrakk>I2 l s; s ''g'' < s ''b''\\<rbrakk>\n       \\<Longrightarrow> Suc (Suc (Suc (E2\n   (s(''y'' := s ''y'' + 1, ''g'' := s ''g'' + 1)))))\n                         \\<le> E2 s\n 9. \\<And>l s.\n       \\<lbrakk>I2 l s; s ''g'' < s ''b''\\<rbrakk>\n       \\<Longrightarrow> S2 s =\n                         S2 (s(''y'' := s ''y'' + 1, ''g'' := s ''g'' + 1))\n 10. \\<And>l s.\n        \\<lbrakk>I2 l s; \\<not> s ''g'' < s ''b''\\<rbrakk>\n        \\<Longrightarrow> I1 l (s(''z'' := s ''z'' + 1))\nA total of 12 subgoals...", "from 1"], ["proof (chain)\npicking this:\n  I1 l s\n  s ''z'' < s ''a''", "show ?case"], ["proof (prove)\nusing this:\n  I1 l s\n  s ''z'' < s ''a''\n\ngoal (1 subgoal):\n 1. I2 l (s(''g'' := 0))", "unfolding I1"], ["proof (prove)\nusing this:\n  0 \\<le> s ''a'' \\<and>\n  0 \\<le> s ''b'' \\<and>\n  s ''z'' \\<le> s ''a'' \\<and>\n  0 \\<le> s ''z'' \\<and> s ''y'' = s ''z'' * s ''b''\n  s ''z'' < s ''a''\n\ngoal (1 subgoal):\n 1. I2 l (s(''g'' := 0))", "unfolding I2"], ["proof (prove)\nusing this:\n  0 \\<le> s ''a'' \\<and>\n  0 \\<le> s ''b'' \\<and>\n  s ''z'' \\<le> s ''a'' \\<and>\n  0 \\<le> s ''z'' \\<and> s ''y'' = s ''z'' * s ''b''\n  s ''z'' < s ''a''\n\ngoal (1 subgoal):\n 1. 0 \\<le> (s(''g'' := 0)) ''a'' \\<and>\n    0 \\<le> (s(''g'' := 0)) ''b'' \\<and>\n    (s(''g'' := 0)) ''z'' < (s(''g'' := 0)) ''a'' \\<and>\n    0 \\<le> (s(''g'' := 0)) ''z'' \\<and>\n    (s(''g'' := 0)) ''g'' \\<le> (s(''g'' := 0)) ''b'' \\<and>\n    0 \\<le> (s(''g'' := 0)) ''g'' \\<and>\n    (s(''g'' := 0)) ''y'' =\n    (s(''g'' := 0)) ''z'' * (s(''g'' := 0)) ''b'' + (s(''g'' := 0)) ''g''", "by(auto )"], ["proof (state)\nthis:\n  I2 l (s(''g'' := 0))\n\ngoal (11 subgoals):\n 1. \\<And>l s.\n       \\<lbrakk>I1 l s; s ''z'' < s ''a''\\<rbrakk>\n       \\<Longrightarrow> Suc (Suc (Suc (E1\n   ((S2 (s(''g'' := 0)))(''z'' := S2 (s(''g'' := 0)) ''z'' + 1)) +\n  E2 (s(''g'' := 0)))))\n                         \\<le> E1 s\n 2. \\<And>l s.\n       \\<lbrakk>I1 l s; s ''z'' < s ''a''\\<rbrakk>\n       \\<Longrightarrow> S1 s =\n                         S1 ((S2 (s(''g'' := 0)))\n                             (''z'' := S2 (s(''g'' := 0)) ''z'' + 1))\n 3. \\<And>l s.\n       \\<lbrakk>I1 l s; \\<not> s ''z'' < s ''a''\\<rbrakk>\n       \\<Longrightarrow> s ''y'' = s ''a'' * s ''b''\n 4. \\<And>l s.\n       \\<lbrakk>I1 l s; \\<not> s ''z'' < s ''a''\\<rbrakk>\n       \\<Longrightarrow> Suc 0 \\<le> E1 s\n 5. \\<And>l s.\n       \\<lbrakk>I1 l s; \\<not> s ''z'' < s ''a''\\<rbrakk>\n       \\<Longrightarrow> S1 s = s\n 6. \\<And>l s.\n       \\<lbrakk>I2 l s; s ''g'' < s ''b''\\<rbrakk>\n       \\<Longrightarrow> I2 l\n                          (s(''y'' := s ''y'' + 1, ''g'' := s ''g'' + 1))\n 7. \\<And>l s.\n       \\<lbrakk>I2 l s; s ''g'' < s ''b''\\<rbrakk>\n       \\<Longrightarrow> Suc (Suc (Suc (E2\n   (s(''y'' := s ''y'' + 1, ''g'' := s ''g'' + 1)))))\n                         \\<le> E2 s\n 8. \\<And>l s.\n       \\<lbrakk>I2 l s; s ''g'' < s ''b''\\<rbrakk>\n       \\<Longrightarrow> S2 s =\n                         S2 (s(''y'' := s ''y'' + 1, ''g'' := s ''g'' + 1))\n 9. \\<And>l s.\n       \\<lbrakk>I2 l s; \\<not> s ''g'' < s ''b''\\<rbrakk>\n       \\<Longrightarrow> I1 l (s(''z'' := s ''z'' + 1))\n 10. \\<And>l s.\n        \\<lbrakk>I2 l s; \\<not> s ''g'' < s ''b''\\<rbrakk>\n        \\<Longrightarrow> Suc 0 \\<le> E2 s\nA total of 11 subgoals...", "next"], ["proof (state)\ngoal (11 subgoals):\n 1. \\<And>l s.\n       \\<lbrakk>I1 l s; s ''z'' < s ''a''\\<rbrakk>\n       \\<Longrightarrow> Suc (Suc (Suc (E1\n   ((S2 (s(''g'' := 0)))(''z'' := S2 (s(''g'' := 0)) ''z'' + 1)) +\n  E2 (s(''g'' := 0)))))\n                         \\<le> E1 s\n 2. \\<And>l s.\n       \\<lbrakk>I1 l s; s ''z'' < s ''a''\\<rbrakk>\n       \\<Longrightarrow> S1 s =\n                         S1 ((S2 (s(''g'' := 0)))\n                             (''z'' := S2 (s(''g'' := 0)) ''z'' + 1))\n 3. \\<And>l s.\n       \\<lbrakk>I1 l s; \\<not> s ''z'' < s ''a''\\<rbrakk>\n       \\<Longrightarrow> s ''y'' = s ''a'' * s ''b''\n 4. \\<And>l s.\n       \\<lbrakk>I1 l s; \\<not> s ''z'' < s ''a''\\<rbrakk>\n       \\<Longrightarrow> Suc 0 \\<le> E1 s\n 5. \\<And>l s.\n       \\<lbrakk>I1 l s; \\<not> s ''z'' < s ''a''\\<rbrakk>\n       \\<Longrightarrow> S1 s = s\n 6. \\<And>l s.\n       \\<lbrakk>I2 l s; s ''g'' < s ''b''\\<rbrakk>\n       \\<Longrightarrow> I2 l\n                          (s(''y'' := s ''y'' + 1, ''g'' := s ''g'' + 1))\n 7. \\<And>l s.\n       \\<lbrakk>I2 l s; s ''g'' < s ''b''\\<rbrakk>\n       \\<Longrightarrow> Suc (Suc (Suc (E2\n   (s(''y'' := s ''y'' + 1, ''g'' := s ''g'' + 1)))))\n                         \\<le> E2 s\n 8. \\<And>l s.\n       \\<lbrakk>I2 l s; s ''g'' < s ''b''\\<rbrakk>\n       \\<Longrightarrow> S2 s =\n                         S2 (s(''y'' := s ''y'' + 1, ''g'' := s ''g'' + 1))\n 9. \\<And>l s.\n       \\<lbrakk>I2 l s; \\<not> s ''g'' < s ''b''\\<rbrakk>\n       \\<Longrightarrow> I1 l (s(''z'' := s ''z'' + 1))\n 10. \\<And>l s.\n        \\<lbrakk>I2 l s; \\<not> s ''g'' < s ''b''\\<rbrakk>\n        \\<Longrightarrow> Suc 0 \\<le> E2 s\nA total of 11 subgoals...", "case (2 l s)"], ["proof (state)\nthis:\n  I1 l s\n  s ''z'' < s ''a''\n\ngoal (11 subgoals):\n 1. \\<And>l s.\n       \\<lbrakk>I1 l s; s ''z'' < s ''a''\\<rbrakk>\n       \\<Longrightarrow> Suc (Suc (Suc (E1\n   ((S2 (s(''g'' := 0)))(''z'' := S2 (s(''g'' := 0)) ''z'' + 1)) +\n  E2 (s(''g'' := 0)))))\n                         \\<le> E1 s\n 2. \\<And>l s.\n       \\<lbrakk>I1 l s; s ''z'' < s ''a''\\<rbrakk>\n       \\<Longrightarrow> S1 s =\n                         S1 ((S2 (s(''g'' := 0)))\n                             (''z'' := S2 (s(''g'' := 0)) ''z'' + 1))\n 3. \\<And>l s.\n       \\<lbrakk>I1 l s; \\<not> s ''z'' < s ''a''\\<rbrakk>\n       \\<Longrightarrow> s ''y'' = s ''a'' * s ''b''\n 4. \\<And>l s.\n       \\<lbrakk>I1 l s; \\<not> s ''z'' < s ''a''\\<rbrakk>\n       \\<Longrightarrow> Suc 0 \\<le> E1 s\n 5. \\<And>l s.\n       \\<lbrakk>I1 l s; \\<not> s ''z'' < s ''a''\\<rbrakk>\n       \\<Longrightarrow> S1 s = s\n 6. \\<And>l s.\n       \\<lbrakk>I2 l s; s ''g'' < s ''b''\\<rbrakk>\n       \\<Longrightarrow> I2 l\n                          (s(''y'' := s ''y'' + 1, ''g'' := s ''g'' + 1))\n 7. \\<And>l s.\n       \\<lbrakk>I2 l s; s ''g'' < s ''b''\\<rbrakk>\n       \\<Longrightarrow> Suc (Suc (Suc (E2\n   (s(''y'' := s ''y'' + 1, ''g'' := s ''g'' + 1)))))\n                         \\<le> E2 s\n 8. \\<And>l s.\n       \\<lbrakk>I2 l s; s ''g'' < s ''b''\\<rbrakk>\n       \\<Longrightarrow> S2 s =\n                         S2 (s(''y'' := s ''y'' + 1, ''g'' := s ''g'' + 1))\n 9. \\<And>l s.\n       \\<lbrakk>I2 l s; \\<not> s ''g'' < s ''b''\\<rbrakk>\n       \\<Longrightarrow> I1 l (s(''z'' := s ''z'' + 1))\n 10. \\<And>l s.\n        \\<lbrakk>I2 l s; \\<not> s ''g'' < s ''b''\\<rbrakk>\n        \\<Longrightarrow> Suc 0 \\<le> E2 s\nA total of 11 subgoals...", "(* outer loop:  E1 is correct *)"], ["proof (state)\nthis:\n  I1 l s\n  s ''z'' < s ''a''\n\ngoal (11 subgoals):\n 1. \\<And>l s.\n       \\<lbrakk>I1 l s; s ''z'' < s ''a''\\<rbrakk>\n       \\<Longrightarrow> Suc (Suc (Suc (E1\n   ((S2 (s(''g'' := 0)))(''z'' := S2 (s(''g'' := 0)) ''z'' + 1)) +\n  E2 (s(''g'' := 0)))))\n                         \\<le> E1 s\n 2. \\<And>l s.\n       \\<lbrakk>I1 l s; s ''z'' < s ''a''\\<rbrakk>\n       \\<Longrightarrow> S1 s =\n                         S1 ((S2 (s(''g'' := 0)))\n                             (''z'' := S2 (s(''g'' := 0)) ''z'' + 1))\n 3. \\<And>l s.\n       \\<lbrakk>I1 l s; \\<not> s ''z'' < s ''a''\\<rbrakk>\n       \\<Longrightarrow> s ''y'' = s ''a'' * s ''b''\n 4. \\<And>l s.\n       \\<lbrakk>I1 l s; \\<not> s ''z'' < s ''a''\\<rbrakk>\n       \\<Longrightarrow> Suc 0 \\<le> E1 s\n 5. \\<And>l s.\n       \\<lbrakk>I1 l s; \\<not> s ''z'' < s ''a''\\<rbrakk>\n       \\<Longrightarrow> S1 s = s\n 6. \\<And>l s.\n       \\<lbrakk>I2 l s; s ''g'' < s ''b''\\<rbrakk>\n       \\<Longrightarrow> I2 l\n                          (s(''y'' := s ''y'' + 1, ''g'' := s ''g'' + 1))\n 7. \\<And>l s.\n       \\<lbrakk>I2 l s; s ''g'' < s ''b''\\<rbrakk>\n       \\<Longrightarrow> Suc (Suc (Suc (E2\n   (s(''y'' := s ''y'' + 1, ''g'' := s ''g'' + 1)))))\n                         \\<le> E2 s\n 8. \\<And>l s.\n       \\<lbrakk>I2 l s; s ''g'' < s ''b''\\<rbrakk>\n       \\<Longrightarrow> S2 s =\n                         S2 (s(''y'' := s ''y'' + 1, ''g'' := s ''g'' + 1))\n 9. \\<And>l s.\n       \\<lbrakk>I2 l s; \\<not> s ''g'' < s ''b''\\<rbrakk>\n       \\<Longrightarrow> I1 l (s(''z'' := s ''z'' + 1))\n 10. \\<And>l s.\n        \\<lbrakk>I2 l s; \\<not> s ''g'' < s ''b''\\<rbrakk>\n        \\<Longrightarrow> Suc 0 \\<le> E2 s\nA total of 11 subgoals...", "then"], ["proof (chain)\npicking this:\n  I1 l s\n  s ''z'' < s ''a''", "show ?case"], ["proof (prove)\nusing this:\n  I1 l s\n  s ''z'' < s ''a''\n\ngoal (1 subgoal):\n 1. Suc (Suc (Suc (E1 ((S2 (s(''g'' := 0)))\n                       (''z'' := S2 (s(''g'' := 0)) ''z'' + 1)) +\n                   E2 (s(''g'' := 0)))))\n    \\<le> E1 s", "unfolding I1 S2"], ["proof (prove)\nusing this:\n  0 \\<le> s ''a'' \\<and>\n  0 \\<le> s ''b'' \\<and>\n  s ''z'' \\<le> s ''a'' \\<and>\n  0 \\<le> s ''z'' \\<and> s ''y'' = s ''z'' * s ''b''\n  s ''z'' < s ''a''\n\ngoal (1 subgoal):\n 1. Suc (Suc (Suc (E1 ((if (s(''g'' := 0)) ''b'' \\<le> (s(''g'' := 0)) ''g''\n                        then s(''g'' := 0)\n                        else s(''g'' := 0,\n                               ''y'' :=\n                                 (s(''g'' := 0)) ''z'' *\n                                 (s(''g'' := 0)) ''b'' +\n                                 (s(''g'' := 0)) ''b'',\n                               ''g'' := (s(''g'' := 0)) ''b''))\n                       (''z'' :=\n                          (if (s(''g'' := 0)) ''b''\n                              \\<le> (s(''g'' := 0)) ''g''\n                           then s(''g'' := 0)\n                           else s(''g'' := 0,\n                                  ''y'' :=\n                                    (s(''g'' := 0)) ''z'' *\n                                    (s(''g'' := 0)) ''b'' +\n                                    (s(''g'' := 0)) ''b'',\n                                  ''g'' := (s(''g'' := 0)) ''b''))\n                           ''z'' +\n                          1)) +\n                   E2 (s(''g'' := 0)))))\n    \\<le> E1 s", "apply(auto)"], ["proof (prove)\ngoal (2 subgoals):\n 1. \\<lbrakk>s ''z'' < s ''a''; s ''b'' = 0; 0 \\<le> s ''z'';\n     s ''y'' = 0\\<rbrakk>\n    \\<Longrightarrow> Suc (Suc (Suc (E1\n(s(''g'' := 0, ''z'' := s ''z'' + 1)) +\n                                     E2 (s(''g'' := 0)))))\n                      \\<le> E1 s\n 2. \\<lbrakk>s ''z'' < s ''a''; 0 \\<le> s ''z'';\n     s ''y'' = s ''z'' * s ''b''; \\<not> s ''b'' \\<le> 0\\<rbrakk>\n    \\<Longrightarrow> Suc (Suc (Suc (E1\n(s(''y'' := s ''z'' * s ''b'' + s ''b'', ''g'' := s ''b'',\n   ''z'' := s ''z'' + 1)) +\n                                     E2 (s(''g'' := 0)))))\n                      \\<le> E1 s", "unfolding E2"], ["proof (prove)\ngoal (2 subgoals):\n 1. \\<lbrakk>s ''z'' < s ''a''; s ''b'' = 0; 0 \\<le> s ''z'';\n     s ''y'' = 0\\<rbrakk>\n    \\<Longrightarrow> Suc (Suc (Suc (E1\n(s(''g'' := 0, ''z'' := s ''z'' + 1)) +\n                                     (1 +\n3 * (nat ((s(''g'' := 0)) ''b'') - nat ((s(''g'' := 0)) ''g''))))))\n                      \\<le> E1 s\n 2. \\<lbrakk>s ''z'' < s ''a''; 0 \\<le> s ''z'';\n     s ''y'' = s ''z'' * s ''b''; \\<not> s ''b'' \\<le> 0\\<rbrakk>\n    \\<Longrightarrow> Suc (Suc (Suc (E1\n(s(''y'' := s ''z'' * s ''b'' + s ''b'', ''g'' := s ''b'',\n   ''z'' := s ''z'' + 1)) +\n                                     (1 +\n3 * (nat ((s(''g'' := 0)) ''b'') - nat ((s(''g'' := 0)) ''g''))))))\n                      \\<le> E1 s", "apply(simp)"], ["proof (prove)\ngoal (2 subgoals):\n 1. \\<lbrakk>s ''z'' < s ''a''; s ''b'' = 0; 0 \\<le> s ''z'';\n     s ''y'' = 0\\<rbrakk>\n    \\<Longrightarrow> Suc (Suc (Suc (Suc\n(E1 (s(''g'' := 0, ''z'' := s ''z'' + 1))))))\n                      \\<le> E1 s\n 2. \\<lbrakk>s ''z'' < s ''a''; 0 \\<le> s ''z'';\n     s ''y'' = s ''z'' * s ''b''; \\<not> s ''b'' \\<le> 0\\<rbrakk>\n    \\<Longrightarrow> Suc (Suc (Suc (E1\n(s(''y'' := s ''z'' * s ''b'' + s ''b'', ''g'' := s ''b'',\n   ''z'' := s ''z'' + 1)) +\n                                     (1 +\n3 * (nat ((s(''g'' := 0)) ''b'') - nat ((s(''g'' := 0)) ''g''))))))\n                      \\<le> E1 s", "unfolding E2"], ["proof (prove)\ngoal (2 subgoals):\n 1. \\<lbrakk>s ''z'' < s ''a''; s ''b'' = 0; 0 \\<le> s ''z'';\n     s ''y'' = 0\\<rbrakk>\n    \\<Longrightarrow> Suc (Suc (Suc (Suc\n(E1 (s(''g'' := 0, ''z'' := s ''z'' + 1))))))\n                      \\<le> E1 s\n 2. \\<lbrakk>s ''z'' < s ''a''; 0 \\<le> s ''z'';\n     s ''y'' = s ''z'' * s ''b''; \\<not> s ''b'' \\<le> 0\\<rbrakk>\n    \\<Longrightarrow> Suc (Suc (Suc (E1\n(s(''y'' := s ''z'' * s ''b'' + s ''b'', ''g'' := s ''b'',\n   ''z'' := s ''z'' + 1)) +\n                                     (1 +\n3 * (nat ((s(''g'' := 0)) ''b'') - nat ((s(''g'' := 0)) ''g''))))))\n                      \\<le> E1 s", "apply(auto)"], ["proof (prove)\ngoal (2 subgoals):\n 1. \\<lbrakk>s ''z'' < s ''a''; s ''b'' = 0; 0 \\<le> s ''z'';\n     s ''y'' = 0\\<rbrakk>\n    \\<Longrightarrow> Suc (Suc (Suc (Suc\n(E1 (s(''g'' := 0, ''z'' := s ''z'' + 1))))))\n                      \\<le> E1 s\n 2. \\<lbrakk>s ''z'' < s ''a''; 0 \\<le> s ''z'';\n     s ''y'' = s ''z'' * s ''b''; \\<not> s ''b'' \\<le> 0\\<rbrakk>\n    \\<Longrightarrow> Suc (Suc (Suc (Suc\n(E1 (s(''y'' := s ''z'' * s ''b'' + s ''b'', ''g'' := s ''b'',\n       ''z'' := s ''z'' + 1)) +\n 3 * nat (s ''b'')))))\n                      \\<le> E1 s", "unfolding E1"], ["proof (prove)\ngoal (2 subgoals):\n 1. \\<lbrakk>s ''z'' < s ''a''; s ''b'' = 0; 0 \\<le> s ''z'';\n     s ''y'' = 0\\<rbrakk>\n    \\<Longrightarrow> Suc (Suc (Suc (Suc\n(1 +\n (4 + 3 * nat ((s(''g'' := 0, ''z'' := s ''z'' + 1)) ''b'')) *\n (nat ((s(''g'' := 0, ''z'' := s ''z'' + 1)) ''a'') -\n  nat ((s(''g'' := 0, ''z'' := s ''z'' + 1)) ''z''))))))\n                      \\<le> 1 +\n                            (4 + 3 * nat (s ''b'')) *\n                            (nat (s ''a'') - nat (s ''z''))\n 2. \\<lbrakk>s ''z'' < s ''a''; 0 \\<le> s ''z'';\n     s ''y'' = s ''z'' * s ''b''; \\<not> s ''b'' \\<le> 0\\<rbrakk>\n    \\<Longrightarrow> Suc (Suc (Suc (Suc\n(1 +\n (4 +\n  3 *\n  nat ((s(''y'' := s ''z'' * s ''b'' + s ''b'', ''g'' := s ''b'',\n          ''z'' := s ''z'' + 1))\n        ''b'')) *\n (nat ((s(''y'' := s ''z'' * s ''b'' + s ''b'', ''g'' := s ''b'',\n          ''z'' := s ''z'' + 1))\n        ''a'') -\n  nat ((s(''y'' := s ''z'' * s ''b'' + s ''b'', ''g'' := s ''b'',\n          ''z'' := s ''z'' + 1))\n        ''z'')) +\n 3 * nat (s ''b'')))))\n                      \\<le> 1 +\n                            (4 + 3 * nat (s ''b'')) *\n                            (nat (s ''a'') - nat (s ''z''))", "apply(simp)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>s ''z'' < s ''a''; 0 \\<le> s ''z'';\n     s ''y'' = s ''z'' * s ''b''; \\<not> s ''b'' \\<le> 0\\<rbrakk>\n    \\<Longrightarrow> Suc (Suc (Suc (Suc\n(1 +\n (4 +\n  3 *\n  nat ((s(''y'' := s ''z'' * s ''b'' + s ''b'', ''g'' := s ''b'',\n          ''z'' := s ''z'' + 1))\n        ''b'')) *\n (nat ((s(''y'' := s ''z'' * s ''b'' + s ''b'', ''g'' := s ''b'',\n          ''z'' := s ''z'' + 1))\n        ''a'') -\n  nat ((s(''y'' := s ''z'' * s ''b'' + s ''b'', ''g'' := s ''b'',\n          ''z'' := s ''z'' + 1))\n        ''z'')) +\n 3 * nat (s ''b'')))))\n                      \\<le> 1 +\n                            (4 + 3 * nat (s ''b'')) *\n                            (nat (s ''a'') - nat (s ''z''))", "apply(simp)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>s ''z'' < s ''a''; 0 \\<le> s ''z'';\n     s ''y'' = s ''z'' * s ''b''; \\<not> s ''b'' \\<le> 0\\<rbrakk>\n    \\<Longrightarrow> Suc (Suc (Suc (Suc\n((4 + 3 * nat (s ''b'')) * (nat (s ''a'') - nat (s ''z'' + 1)) +\n 3 * nat (s ''b'')))))\n                      \\<le> (4 + 3 * nat (s ''b'')) *\n                            (nat (s ''a'') - nat (s ''z''))", "proof (goal_cases)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<lbrakk>s ''z'' < s ''a''; 0 \\<le> s ''z'';\n     s ''y'' = s ''z'' * s ''b''; \\<not> s ''b'' \\<le> 0\\<rbrakk>\n    \\<Longrightarrow> Suc (Suc (Suc (Suc\n((4 + 3 * nat (s ''b'')) * (nat (s ''a'') - nat (s ''z'' + 1)) +\n 3 * nat (s ''b'')))))\n                      \\<le> (4 + 3 * nat (s ''b'')) *\n                            (nat (s ''a'') - nat (s ''z''))", "case 1"], ["proof (state)\nthis:\n  s ''z'' < s ''a''\n  0 \\<le> s ''z''\n  s ''y'' = s ''z'' * s ''b''\n  \\<not> s ''b'' \\<le> 0\n\ngoal (1 subgoal):\n 1. \\<lbrakk>s ''z'' < s ''a''; 0 \\<le> s ''z'';\n     s ''y'' = s ''z'' * s ''b''; \\<not> s ''b'' \\<le> 0\\<rbrakk>\n    \\<Longrightarrow> Suc (Suc (Suc (Suc\n((4 + 3 * nat (s ''b'')) * (nat (s ''a'') - nat (s ''z'' + 1)) +\n 3 * nat (s ''b'')))))\n                      \\<le> (4 + 3 * nat (s ''b'')) *\n                            (nat (s ''a'') - nat (s ''z''))", "then"], ["proof (chain)\npicking this:\n  s ''z'' < s ''a''\n  0 \\<le> s ''z''\n  s ''y'' = s ''z'' * s ''b''\n  \\<not> s ''b'' \\<le> 0", "have g: \"s ''a'' > s ''z''\""], ["proof (prove)\nusing this:\n  s ''z'' < s ''a''\n  0 \\<le> s ''z''\n  s ''y'' = s ''z'' * s ''b''\n  \\<not> s ''b'' \\<le> 0\n\ngoal (1 subgoal):\n 1. s ''z'' < s ''a''", "by linarith"], ["proof (state)\nthis:\n  s ''z'' < s ''a''\n\ngoal (1 subgoal):\n 1. \\<lbrakk>s ''z'' < s ''a''; 0 \\<le> s ''z'';\n     s ''y'' = s ''z'' * s ''b''; \\<not> s ''b'' \\<le> 0\\<rbrakk>\n    \\<Longrightarrow> Suc (Suc (Suc (Suc\n((4 + 3 * nat (s ''b'')) * (nat (s ''a'') - nat (s ''z'' + 1)) +\n 3 * nat (s ''b'')))))\n                      \\<le> (4 + 3 * nat (s ''b'')) *\n                            (nat (s ''a'') - nat (s ''z''))", "then"], ["proof (chain)\npicking this:\n  s ''z'' < s ''a''", "have p: \"(nat (s ''a'') - nat (s ''z'' + 1)) = (nat (s ''a'') - nat (s ''z'')) - 1\" and z: \"(nat (s ''a'') - nat (s ''z'')) \\<ge> 1\""], ["proof (prove)\nusing this:\n  s ''z'' < s ''a''\n\ngoal (1 subgoal):\n 1. nat (s ''a'') - nat (s ''z'' + 1) =\n    nat (s ''a'') - nat (s ''z'') - 1 &&&\n    1 \\<le> nat (s ''a'') - nat (s ''z'')", "using \"1\""], ["proof (prove)\nusing this:\n  s ''z'' < s ''a''\n  s ''z'' < s ''a''\n  0 \\<le> s ''z''\n  s ''y'' = s ''z'' * s ''b''\n  \\<not> s ''b'' \\<le> 0\n\ngoal (1 subgoal):\n 1. nat (s ''a'') - nat (s ''z'' + 1) =\n    nat (s ''a'') - nat (s ''z'') - 1 &&&\n    1 \\<le> nat (s ''a'') - nat (s ''z'')", "apply linarith"], ["proof (prove)\ngoal (1 subgoal):\n 1. 1 \\<le> nat (s ''a'') - nat (s ''z'')", "using g 1"], ["proof (prove)\nusing this:\n  s ''z'' < s ''a''\n  s ''z'' < s ''a''\n  0 \\<le> s ''z''\n  s ''y'' = s ''z'' * s ''b''\n  \\<not> s ''b'' \\<le> 0\n\ngoal (1 subgoal):\n 1. 1 \\<le> nat (s ''a'') - nat (s ''z'')", "by linarith"], ["proof (state)\nthis:\n  nat (s ''a'') - nat (s ''z'' + 1) = nat (s ''a'') - nat (s ''z'') - 1\n  1 \\<le> nat (s ''a'') - nat (s ''z'')\n\ngoal (1 subgoal):\n 1. \\<lbrakk>s ''z'' < s ''a''; 0 \\<le> s ''z'';\n     s ''y'' = s ''z'' * s ''b''; \\<not> s ''b'' \\<le> 0\\<rbrakk>\n    \\<Longrightarrow> Suc (Suc (Suc (Suc\n((4 + 3 * nat (s ''b'')) * (nat (s ''a'') - nat (s ''z'' + 1)) +\n 3 * nat (s ''b'')))))\n                      \\<le> (4 + 3 * nat (s ''b'')) *\n                            (nat (s ''a'') - nat (s ''z''))", "have \"Suc (Suc (Suc (Suc ((4 + 3 * nat (s ''b'')) * (nat (s ''a'') - nat (s ''z'' + 1)) + 3 * nat (s ''b''))))) =\n        4 + ((4 + 3 * nat (s ''b'')) * (nat (s ''a'') - nat (s ''z'' + 1)) + 3 * nat (s ''b''))\n        \""], ["proof (prove)\ngoal (1 subgoal):\n 1. Suc (Suc (Suc (Suc ((4 + 3 * nat (s ''b'')) *\n                        (nat (s ''a'') - nat (s ''z'' + 1)) +\n                        3 * nat (s ''b''))))) =\n    4 +\n    ((4 + 3 * nat (s ''b'')) * (nat (s ''a'') - nat (s ''z'' + 1)) +\n     3 * nat (s ''b''))", "by auto"], ["proof (state)\nthis:\n  Suc (Suc (Suc (Suc ((4 + 3 * nat (s ''b'')) *\n                      (nat (s ''a'') - nat (s ''z'' + 1)) +\n                      3 * nat (s ''b''))))) =\n  4 +\n  ((4 + 3 * nat (s ''b'')) * (nat (s ''a'') - nat (s ''z'' + 1)) +\n   3 * nat (s ''b''))\n\ngoal (1 subgoal):\n 1. \\<lbrakk>s ''z'' < s ''a''; 0 \\<le> s ''z'';\n     s ''y'' = s ''z'' * s ''b''; \\<not> s ''b'' \\<le> 0\\<rbrakk>\n    \\<Longrightarrow> Suc (Suc (Suc (Suc\n((4 + 3 * nat (s ''b'')) * (nat (s ''a'') - nat (s ''z'' + 1)) +\n 3 * nat (s ''b'')))))\n                      \\<le> (4 + 3 * nat (s ''b'')) *\n                            (nat (s ''a'') - nat (s ''z''))", "also"], ["proof (state)\nthis:\n  Suc (Suc (Suc (Suc ((4 + 3 * nat (s ''b'')) *\n                      (nat (s ''a'') - nat (s ''z'' + 1)) +\n                      3 * nat (s ''b''))))) =\n  4 +\n  ((4 + 3 * nat (s ''b'')) * (nat (s ''a'') - nat (s ''z'' + 1)) +\n   3 * nat (s ''b''))\n\ngoal (1 subgoal):\n 1. \\<lbrakk>s ''z'' < s ''a''; 0 \\<le> s ''z'';\n     s ''y'' = s ''z'' * s ''b''; \\<not> s ''b'' \\<le> 0\\<rbrakk>\n    \\<Longrightarrow> Suc (Suc (Suc (Suc\n((4 + 3 * nat (s ''b'')) * (nat (s ''a'') - nat (s ''z'' + 1)) +\n 3 * nat (s ''b'')))))\n                      \\<le> (4 + 3 * nat (s ''b'')) *\n                            (nat (s ''a'') - nat (s ''z''))", "have \"\\<dots> = 4 + ( (4 + 3 * nat (s ''b'')) * (nat (s ''a'') - nat (s ''z'')) - (4 + 3 * nat (s ''b''))  + 3 * nat (s ''b''))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. 4 +\n    ((4 + 3 * nat (s ''b'')) * (nat (s ''a'') - nat (s ''z'' + 1)) +\n     3 * nat (s ''b'')) =\n    4 +\n    ((4 + 3 * nat (s ''b'')) * (nat (s ''a'') - nat (s ''z'')) -\n     (4 + 3 * nat (s ''b'')) +\n     3 * nat (s ''b''))", "apply(simp only: p)"], ["proof (prove)\ngoal (1 subgoal):\n 1. 4 +\n    ((4 + 3 * nat (s ''b'')) * (nat (s ''a'') - nat (s ''z'') - 1) +\n     3 * nat (s ''b'')) =\n    4 +\n    ((4 + 3 * nat (s ''b'')) * (nat (s ''a'') - nat (s ''z'')) -\n     (4 + 3 * nat (s ''b'')) +\n     3 * nat (s ''b''))", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. 4 +\n    ((4 + 3 * nat (s ''b'')) * (nat (s ''a'') - nat (s ''z'') - 1) +\n     3 * nat (s ''b'')) =\n    4 +\n    ((4 + 3 * nat (s ''b'')) * (nat (s ''a'') - nat (s ''z'')) -\n     (4 + 3 * nat (s ''b'')) +\n     3 * nat (s ''b''))", "have \"\\<And>n na. (n::nat) * na - n = n * (na - 1)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>n na. n * na - n = n * (na - 1)", "by (simp add: diff_mult_distrib2)"], ["proof (state)\nthis:\n  ?n * ?na - ?n = ?n * (?na - 1)\n\ngoal (1 subgoal):\n 1. 4 +\n    ((4 + 3 * nat (s ''b'')) * (nat (s ''a'') - nat (s ''z'') - 1) +\n     3 * nat (s ''b'')) =\n    4 +\n    ((4 + 3 * nat (s ''b'')) * (nat (s ''a'') - nat (s ''z'')) -\n     (4 + 3 * nat (s ''b'')) +\n     3 * nat (s ''b''))", "then"], ["proof (chain)\npicking this:\n  ?n * ?na - ?n = ?n * (?na - 1)", "show \"4 + ((4 + 3 * nat (s ''b'')) * (nat (s ''a'') - nat (s ''z'') - 1) + 3 * nat (s ''b'')) = 4 + ((4 + 3 * nat (s ''b'')) * (nat (s ''a'') - nat (s ''z'')) - (4 + 3 * nat (s ''b'')) + 3 * nat (s ''b''))\""], ["proof (prove)\nusing this:\n  ?n * ?na - ?n = ?n * (?na - 1)\n\ngoal (1 subgoal):\n 1. 4 +\n    ((4 + 3 * nat (s ''b'')) * (nat (s ''a'') - nat (s ''z'') - 1) +\n     3 * nat (s ''b'')) =\n    4 +\n    ((4 + 3 * nat (s ''b'')) * (nat (s ''a'') - nat (s ''z'')) -\n     (4 + 3 * nat (s ''b'')) +\n     3 * nat (s ''b''))", "by presburger"], ["proof (state)\nthis:\n  4 +\n  ((4 + 3 * nat (s ''b'')) * (nat (s ''a'') - nat (s ''z'') - 1) +\n   3 * nat (s ''b'')) =\n  4 +\n  ((4 + 3 * nat (s ''b'')) * (nat (s ''a'') - nat (s ''z'')) -\n   (4 + 3 * nat (s ''b'')) +\n   3 * nat (s ''b''))\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  4 +\n  ((4 + 3 * nat (s ''b'')) * (nat (s ''a'') - nat (s ''z'' + 1)) +\n   3 * nat (s ''b'')) =\n  4 +\n  ((4 + 3 * nat (s ''b'')) * (nat (s ''a'') - nat (s ''z'')) -\n   (4 + 3 * nat (s ''b'')) +\n   3 * nat (s ''b''))\n\ngoal (1 subgoal):\n 1. \\<lbrakk>s ''z'' < s ''a''; 0 \\<le> s ''z'';\n     s ''y'' = s ''z'' * s ''b''; \\<not> s ''b'' \\<le> 0\\<rbrakk>\n    \\<Longrightarrow> Suc (Suc (Suc (Suc\n((4 + 3 * nat (s ''b'')) * (nat (s ''a'') - nat (s ''z'' + 1)) +\n 3 * nat (s ''b'')))))\n                      \\<le> (4 + 3 * nat (s ''b'')) *\n                            (nat (s ''a'') - nat (s ''z''))", "also"], ["proof (state)\nthis:\n  4 +\n  ((4 + 3 * nat (s ''b'')) * (nat (s ''a'') - nat (s ''z'' + 1)) +\n   3 * nat (s ''b'')) =\n  4 +\n  ((4 + 3 * nat (s ''b'')) * (nat (s ''a'') - nat (s ''z'')) -\n   (4 + 3 * nat (s ''b'')) +\n   3 * nat (s ''b''))\n\ngoal (1 subgoal):\n 1. \\<lbrakk>s ''z'' < s ''a''; 0 \\<le> s ''z'';\n     s ''y'' = s ''z'' * s ''b''; \\<not> s ''b'' \\<le> 0\\<rbrakk>\n    \\<Longrightarrow> Suc (Suc (Suc (Suc\n((4 + 3 * nat (s ''b'')) * (nat (s ''a'') - nat (s ''z'' + 1)) +\n 3 * nat (s ''b'')))))\n                      \\<le> (4 + 3 * nat (s ''b'')) *\n                            (nat (s ''a'') - nat (s ''z''))", "have \"\\<dots> = (4 + 3 * nat (s ''b'')) * (nat (s ''a'') - nat (s ''z''))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. 4 +\n    ((4 + 3 * nat (s ''b'')) * (nat (s ''a'') - nat (s ''z'')) -\n     (4 + 3 * nat (s ''b'')) +\n     3 * nat (s ''b'')) =\n    (4 + 3 * nat (s ''b'')) * (nat (s ''a'') - nat (s ''z''))", "using z"], ["proof (prove)\nusing this:\n  1 \\<le> nat (s ''a'') - nat (s ''z'')\n\ngoal (1 subgoal):\n 1. 4 +\n    ((4 + 3 * nat (s ''b'')) * (nat (s ''a'') - nat (s ''z'')) -\n     (4 + 3 * nat (s ''b'')) +\n     3 * nat (s ''b'')) =\n    (4 + 3 * nat (s ''b'')) * (nat (s ''a'') - nat (s ''z''))", "by (smt \\<open>4 + ((4 + 3 * nat (s ''b'')) * (nat (s ''a'') - nat (s ''z'' + 1)) + 3 * nat (s ''b'')) = 4 + ((4 + 3 * nat (s ''b'')) * (nat (s ''a'') - nat (s ''z'')) - (4 + 3 * nat (s ''b'')) + 3 * nat (s ''b''))\\<close> add.left_commute diff_add distrib_left mult.right_neutral p)"], ["proof (state)\nthis:\n  4 +\n  ((4 + 3 * nat (s ''b'')) * (nat (s ''a'') - nat (s ''z'')) -\n   (4 + 3 * nat (s ''b'')) +\n   3 * nat (s ''b'')) =\n  (4 + 3 * nat (s ''b'')) * (nat (s ''a'') - nat (s ''z''))\n\ngoal (1 subgoal):\n 1. \\<lbrakk>s ''z'' < s ''a''; 0 \\<le> s ''z'';\n     s ''y'' = s ''z'' * s ''b''; \\<not> s ''b'' \\<le> 0\\<rbrakk>\n    \\<Longrightarrow> Suc (Suc (Suc (Suc\n((4 + 3 * nat (s ''b'')) * (nat (s ''a'') - nat (s ''z'' + 1)) +\n 3 * nat (s ''b'')))))\n                      \\<le> (4 + 3 * nat (s ''b'')) *\n                            (nat (s ''a'') - nat (s ''z''))", "finally"], ["proof (chain)\npicking this:\n  Suc (Suc (Suc (Suc ((4 + 3 * nat (s ''b'')) *\n                      (nat (s ''a'') - nat (s ''z'' + 1)) +\n                      3 * nat (s ''b''))))) =\n  (4 + 3 * nat (s ''b'')) * (nat (s ''a'') - nat (s ''z''))", "show ?case"], ["proof (prove)\nusing this:\n  Suc (Suc (Suc (Suc ((4 + 3 * nat (s ''b'')) *\n                      (nat (s ''a'') - nat (s ''z'' + 1)) +\n                      3 * nat (s ''b''))))) =\n  (4 + 3 * nat (s ''b'')) * (nat (s ''a'') - nat (s ''z''))\n\ngoal (1 subgoal):\n 1. Suc (Suc (Suc (Suc ((4 + 3 * nat (s ''b'')) *\n                        (nat (s ''a'') - nat (s ''z'' + 1)) +\n                        3 * nat (s ''b'')))))\n    \\<le> (4 + 3 * nat (s ''b'')) * (nat (s ''a'') - nat (s ''z''))", "by simp"], ["proof (state)\nthis:\n  Suc (Suc (Suc (Suc ((4 + 3 * nat (s ''b'')) *\n                      (nat (s ''a'') - nat (s ''z'' + 1)) +\n                      3 * nat (s ''b'')))))\n  \\<le> (4 + 3 * nat (s ''b'')) * (nat (s ''a'') - nat (s ''z''))\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  Suc (Suc (Suc (E1 ((S2 (s(''g'' := 0)))\n                     (''z'' := S2 (s(''g'' := 0)) ''z'' + 1)) +\n                 E2 (s(''g'' := 0)))))\n  \\<le> E1 s\n\ngoal (10 subgoals):\n 1. \\<And>l s.\n       \\<lbrakk>I1 l s; s ''z'' < s ''a''\\<rbrakk>\n       \\<Longrightarrow> S1 s =\n                         S1 ((S2 (s(''g'' := 0)))\n                             (''z'' := S2 (s(''g'' := 0)) ''z'' + 1))\n 2. \\<And>l s.\n       \\<lbrakk>I1 l s; \\<not> s ''z'' < s ''a''\\<rbrakk>\n       \\<Longrightarrow> s ''y'' = s ''a'' * s ''b''\n 3. \\<And>l s.\n       \\<lbrakk>I1 l s; \\<not> s ''z'' < s ''a''\\<rbrakk>\n       \\<Longrightarrow> Suc 0 \\<le> E1 s\n 4. \\<And>l s.\n       \\<lbrakk>I1 l s; \\<not> s ''z'' < s ''a''\\<rbrakk>\n       \\<Longrightarrow> S1 s = s\n 5. \\<And>l s.\n       \\<lbrakk>I2 l s; s ''g'' < s ''b''\\<rbrakk>\n       \\<Longrightarrow> I2 l\n                          (s(''y'' := s ''y'' + 1, ''g'' := s ''g'' + 1))\n 6. \\<And>l s.\n       \\<lbrakk>I2 l s; s ''g'' < s ''b''\\<rbrakk>\n       \\<Longrightarrow> Suc (Suc (Suc (E2\n   (s(''y'' := s ''y'' + 1, ''g'' := s ''g'' + 1)))))\n                         \\<le> E2 s\n 7. \\<And>l s.\n       \\<lbrakk>I2 l s; s ''g'' < s ''b''\\<rbrakk>\n       \\<Longrightarrow> S2 s =\n                         S2 (s(''y'' := s ''y'' + 1, ''g'' := s ''g'' + 1))\n 8. \\<And>l s.\n       \\<lbrakk>I2 l s; \\<not> s ''g'' < s ''b''\\<rbrakk>\n       \\<Longrightarrow> I1 l (s(''z'' := s ''z'' + 1))\n 9. \\<And>l s.\n       \\<lbrakk>I2 l s; \\<not> s ''g'' < s ''b''\\<rbrakk>\n       \\<Longrightarrow> Suc 0 \\<le> E2 s\n 10. \\<And>l s.\n        \\<lbrakk>I2 l s; \\<not> s ''g'' < s ''b''\\<rbrakk>\n        \\<Longrightarrow> S2 s = s", "next"], ["proof (state)\ngoal (10 subgoals):\n 1. \\<And>l s.\n       \\<lbrakk>I1 l s; s ''z'' < s ''a''\\<rbrakk>\n       \\<Longrightarrow> S1 s =\n                         S1 ((S2 (s(''g'' := 0)))\n                             (''z'' := S2 (s(''g'' := 0)) ''z'' + 1))\n 2. \\<And>l s.\n       \\<lbrakk>I1 l s; \\<not> s ''z'' < s ''a''\\<rbrakk>\n       \\<Longrightarrow> s ''y'' = s ''a'' * s ''b''\n 3. \\<And>l s.\n       \\<lbrakk>I1 l s; \\<not> s ''z'' < s ''a''\\<rbrakk>\n       \\<Longrightarrow> Suc 0 \\<le> E1 s\n 4. \\<And>l s.\n       \\<lbrakk>I1 l s; \\<not> s ''z'' < s ''a''\\<rbrakk>\n       \\<Longrightarrow> S1 s = s\n 5. \\<And>l s.\n       \\<lbrakk>I2 l s; s ''g'' < s ''b''\\<rbrakk>\n       \\<Longrightarrow> I2 l\n                          (s(''y'' := s ''y'' + 1, ''g'' := s ''g'' + 1))\n 6. \\<And>l s.\n       \\<lbrakk>I2 l s; s ''g'' < s ''b''\\<rbrakk>\n       \\<Longrightarrow> Suc (Suc (Suc (E2\n   (s(''y'' := s ''y'' + 1, ''g'' := s ''g'' + 1)))))\n                         \\<le> E2 s\n 7. \\<And>l s.\n       \\<lbrakk>I2 l s; s ''g'' < s ''b''\\<rbrakk>\n       \\<Longrightarrow> S2 s =\n                         S2 (s(''y'' := s ''y'' + 1, ''g'' := s ''g'' + 1))\n 8. \\<And>l s.\n       \\<lbrakk>I2 l s; \\<not> s ''g'' < s ''b''\\<rbrakk>\n       \\<Longrightarrow> I1 l (s(''z'' := s ''z'' + 1))\n 9. \\<And>l s.\n       \\<lbrakk>I2 l s; \\<not> s ''g'' < s ''b''\\<rbrakk>\n       \\<Longrightarrow> Suc 0 \\<le> E2 s\n 10. \\<And>l s.\n        \\<lbrakk>I2 l s; \\<not> s ''g'' < s ''b''\\<rbrakk>\n        \\<Longrightarrow> S2 s = s", "case (3 l s)"], ["proof (state)\nthis:\n  I1 l s\n  s ''z'' < s ''a''\n\ngoal (10 subgoals):\n 1. \\<And>l s.\n       \\<lbrakk>I1 l s; s ''z'' < s ''a''\\<rbrakk>\n       \\<Longrightarrow> S1 s =\n                         S1 ((S2 (s(''g'' := 0)))\n                             (''z'' := S2 (s(''g'' := 0)) ''z'' + 1))\n 2. \\<And>l s.\n       \\<lbrakk>I1 l s; \\<not> s ''z'' < s ''a''\\<rbrakk>\n       \\<Longrightarrow> s ''y'' = s ''a'' * s ''b''\n 3. \\<And>l s.\n       \\<lbrakk>I1 l s; \\<not> s ''z'' < s ''a''\\<rbrakk>\n       \\<Longrightarrow> Suc 0 \\<le> E1 s\n 4. \\<And>l s.\n       \\<lbrakk>I1 l s; \\<not> s ''z'' < s ''a''\\<rbrakk>\n       \\<Longrightarrow> S1 s = s\n 5. \\<And>l s.\n       \\<lbrakk>I2 l s; s ''g'' < s ''b''\\<rbrakk>\n       \\<Longrightarrow> I2 l\n                          (s(''y'' := s ''y'' + 1, ''g'' := s ''g'' + 1))\n 6. \\<And>l s.\n       \\<lbrakk>I2 l s; s ''g'' < s ''b''\\<rbrakk>\n       \\<Longrightarrow> Suc (Suc (Suc (E2\n   (s(''y'' := s ''y'' + 1, ''g'' := s ''g'' + 1)))))\n                         \\<le> E2 s\n 7. \\<And>l s.\n       \\<lbrakk>I2 l s; s ''g'' < s ''b''\\<rbrakk>\n       \\<Longrightarrow> S2 s =\n                         S2 (s(''y'' := s ''y'' + 1, ''g'' := s ''g'' + 1))\n 8. \\<And>l s.\n       \\<lbrakk>I2 l s; \\<not> s ''g'' < s ''b''\\<rbrakk>\n       \\<Longrightarrow> I1 l (s(''z'' := s ''z'' + 1))\n 9. \\<And>l s.\n       \\<lbrakk>I2 l s; \\<not> s ''g'' < s ''b''\\<rbrakk>\n       \\<Longrightarrow> Suc 0 \\<le> E2 s\n 10. \\<And>l s.\n        \\<lbrakk>I2 l s; \\<not> s ''g'' < s ''b''\\<rbrakk>\n        \\<Longrightarrow> S2 s = s", "(* outer loop: S is preserved *)"], ["proof (state)\nthis:\n  I1 l s\n  s ''z'' < s ''a''\n\ngoal (10 subgoals):\n 1. \\<And>l s.\n       \\<lbrakk>I1 l s; s ''z'' < s ''a''\\<rbrakk>\n       \\<Longrightarrow> S1 s =\n                         S1 ((S2 (s(''g'' := 0)))\n                             (''z'' := S2 (s(''g'' := 0)) ''z'' + 1))\n 2. \\<And>l s.\n       \\<lbrakk>I1 l s; \\<not> s ''z'' < s ''a''\\<rbrakk>\n       \\<Longrightarrow> s ''y'' = s ''a'' * s ''b''\n 3. \\<And>l s.\n       \\<lbrakk>I1 l s; \\<not> s ''z'' < s ''a''\\<rbrakk>\n       \\<Longrightarrow> Suc 0 \\<le> E1 s\n 4. \\<And>l s.\n       \\<lbrakk>I1 l s; \\<not> s ''z'' < s ''a''\\<rbrakk>\n       \\<Longrightarrow> S1 s = s\n 5. \\<And>l s.\n       \\<lbrakk>I2 l s; s ''g'' < s ''b''\\<rbrakk>\n       \\<Longrightarrow> I2 l\n                          (s(''y'' := s ''y'' + 1, ''g'' := s ''g'' + 1))\n 6. \\<And>l s.\n       \\<lbrakk>I2 l s; s ''g'' < s ''b''\\<rbrakk>\n       \\<Longrightarrow> Suc (Suc (Suc (E2\n   (s(''y'' := s ''y'' + 1, ''g'' := s ''g'' + 1)))))\n                         \\<le> E2 s\n 7. \\<And>l s.\n       \\<lbrakk>I2 l s; s ''g'' < s ''b''\\<rbrakk>\n       \\<Longrightarrow> S2 s =\n                         S2 (s(''y'' := s ''y'' + 1, ''g'' := s ''g'' + 1))\n 8. \\<And>l s.\n       \\<lbrakk>I2 l s; \\<not> s ''g'' < s ''b''\\<rbrakk>\n       \\<Longrightarrow> I1 l (s(''z'' := s ''z'' + 1))\n 9. \\<And>l s.\n       \\<lbrakk>I2 l s; \\<not> s ''g'' < s ''b''\\<rbrakk>\n       \\<Longrightarrow> Suc 0 \\<le> E2 s\n 10. \\<And>l s.\n        \\<lbrakk>I2 l s; \\<not> s ''g'' < s ''b''\\<rbrakk>\n        \\<Longrightarrow> S2 s = s", "{"], ["proof (state)\nthis:\n  I1 l s\n  s ''z'' < s ''a''\n\ngoal (10 subgoals):\n 1. \\<And>l s.\n       \\<lbrakk>I1 l s; s ''z'' < s ''a''\\<rbrakk>\n       \\<Longrightarrow> S1 s =\n                         S1 ((S2 (s(''g'' := 0)))\n                             (''z'' := S2 (s(''g'' := 0)) ''z'' + 1))\n 2. \\<And>l s.\n       \\<lbrakk>I1 l s; \\<not> s ''z'' < s ''a''\\<rbrakk>\n       \\<Longrightarrow> s ''y'' = s ''a'' * s ''b''\n 3. \\<And>l s.\n       \\<lbrakk>I1 l s; \\<not> s ''z'' < s ''a''\\<rbrakk>\n       \\<Longrightarrow> Suc 0 \\<le> E1 s\n 4. \\<And>l s.\n       \\<lbrakk>I1 l s; \\<not> s ''z'' < s ''a''\\<rbrakk>\n       \\<Longrightarrow> S1 s = s\n 5. \\<And>l s.\n       \\<lbrakk>I2 l s; s ''g'' < s ''b''\\<rbrakk>\n       \\<Longrightarrow> I2 l\n                          (s(''y'' := s ''y'' + 1, ''g'' := s ''g'' + 1))\n 6. \\<And>l s.\n       \\<lbrakk>I2 l s; s ''g'' < s ''b''\\<rbrakk>\n       \\<Longrightarrow> Suc (Suc (Suc (E2\n   (s(''y'' := s ''y'' + 1, ''g'' := s ''g'' + 1)))))\n                         \\<le> E2 s\n 7. \\<And>l s.\n       \\<lbrakk>I2 l s; s ''g'' < s ''b''\\<rbrakk>\n       \\<Longrightarrow> S2 s =\n                         S2 (s(''y'' := s ''y'' + 1, ''g'' := s ''g'' + 1))\n 8. \\<And>l s.\n       \\<lbrakk>I2 l s; \\<not> s ''g'' < s ''b''\\<rbrakk>\n       \\<Longrightarrow> I1 l (s(''z'' := s ''z'' + 1))\n 9. \\<And>l s.\n       \\<lbrakk>I2 l s; \\<not> s ''g'' < s ''b''\\<rbrakk>\n       \\<Longrightarrow> Suc 0 \\<le> E2 s\n 10. \\<And>l s.\n        \\<lbrakk>I2 l s; \\<not> s ''g'' < s ''b''\\<rbrakk>\n        \\<Longrightarrow> S2 s = s", "fix i :: int"], ["proof (state)\ngoal (10 subgoals):\n 1. \\<And>l s.\n       \\<lbrakk>I1 l s; s ''z'' < s ''a''\\<rbrakk>\n       \\<Longrightarrow> S1 s =\n                         S1 ((S2 (s(''g'' := 0)))\n                             (''z'' := S2 (s(''g'' := 0)) ''z'' + 1))\n 2. \\<And>l s.\n       \\<lbrakk>I1 l s; \\<not> s ''z'' < s ''a''\\<rbrakk>\n       \\<Longrightarrow> s ''y'' = s ''a'' * s ''b''\n 3. \\<And>l s.\n       \\<lbrakk>I1 l s; \\<not> s ''z'' < s ''a''\\<rbrakk>\n       \\<Longrightarrow> Suc 0 \\<le> E1 s\n 4. \\<And>l s.\n       \\<lbrakk>I1 l s; \\<not> s ''z'' < s ''a''\\<rbrakk>\n       \\<Longrightarrow> S1 s = s\n 5. \\<And>l s.\n       \\<lbrakk>I2 l s; s ''g'' < s ''b''\\<rbrakk>\n       \\<Longrightarrow> I2 l\n                          (s(''y'' := s ''y'' + 1, ''g'' := s ''g'' + 1))\n 6. \\<And>l s.\n       \\<lbrakk>I2 l s; s ''g'' < s ''b''\\<rbrakk>\n       \\<Longrightarrow> Suc (Suc (Suc (E2\n   (s(''y'' := s ''y'' + 1, ''g'' := s ''g'' + 1)))))\n                         \\<le> E2 s\n 7. \\<And>l s.\n       \\<lbrakk>I2 l s; s ''g'' < s ''b''\\<rbrakk>\n       \\<Longrightarrow> S2 s =\n                         S2 (s(''y'' := s ''y'' + 1, ''g'' := s ''g'' + 1))\n 8. \\<And>l s.\n       \\<lbrakk>I2 l s; \\<not> s ''g'' < s ''b''\\<rbrakk>\n       \\<Longrightarrow> I1 l (s(''z'' := s ''z'' + 1))\n 9. \\<And>l s.\n       \\<lbrakk>I2 l s; \\<not> s ''g'' < s ''b''\\<rbrakk>\n       \\<Longrightarrow> Suc 0 \\<le> E2 s\n 10. \\<And>l s.\n        \\<lbrakk>I2 l s; \\<not> s ''g'' < s ''b''\\<rbrakk>\n        \\<Longrightarrow> S2 s = s", "assume \"0 \\<le> i\""], ["proof (state)\nthis:\n  0 \\<le> i\n\ngoal (10 subgoals):\n 1. \\<And>l s.\n       \\<lbrakk>I1 l s; s ''z'' < s ''a''\\<rbrakk>\n       \\<Longrightarrow> S1 s =\n                         S1 ((S2 (s(''g'' := 0)))\n                             (''z'' := S2 (s(''g'' := 0)) ''z'' + 1))\n 2. \\<And>l s.\n       \\<lbrakk>I1 l s; \\<not> s ''z'' < s ''a''\\<rbrakk>\n       \\<Longrightarrow> s ''y'' = s ''a'' * s ''b''\n 3. \\<And>l s.\n       \\<lbrakk>I1 l s; \\<not> s ''z'' < s ''a''\\<rbrakk>\n       \\<Longrightarrow> Suc 0 \\<le> E1 s\n 4. \\<And>l s.\n       \\<lbrakk>I1 l s; \\<not> s ''z'' < s ''a''\\<rbrakk>\n       \\<Longrightarrow> S1 s = s\n 5. \\<And>l s.\n       \\<lbrakk>I2 l s; s ''g'' < s ''b''\\<rbrakk>\n       \\<Longrightarrow> I2 l\n                          (s(''y'' := s ''y'' + 1, ''g'' := s ''g'' + 1))\n 6. \\<And>l s.\n       \\<lbrakk>I2 l s; s ''g'' < s ''b''\\<rbrakk>\n       \\<Longrightarrow> Suc (Suc (Suc (E2\n   (s(''y'' := s ''y'' + 1, ''g'' := s ''g'' + 1)))))\n                         \\<le> E2 s\n 7. \\<And>l s.\n       \\<lbrakk>I2 l s; s ''g'' < s ''b''\\<rbrakk>\n       \\<Longrightarrow> S2 s =\n                         S2 (s(''y'' := s ''y'' + 1, ''g'' := s ''g'' + 1))\n 8. \\<And>l s.\n       \\<lbrakk>I2 l s; \\<not> s ''g'' < s ''b''\\<rbrakk>\n       \\<Longrightarrow> I1 l (s(''z'' := s ''z'' + 1))\n 9. \\<And>l s.\n       \\<lbrakk>I2 l s; \\<not> s ''g'' < s ''b''\\<rbrakk>\n       \\<Longrightarrow> Suc 0 \\<le> E2 s\n 10. \\<And>l s.\n        \\<lbrakk>I2 l s; \\<not> s ''g'' < s ''b''\\<rbrakk>\n        \\<Longrightarrow> S2 s = s", "then"], ["proof (chain)\npicking this:\n  0 \\<le> i", "have \"int (\\<Sum>{0..<nat i}) + i = int (\\<Sum>{0..nat i})\""], ["proof (prove)\nusing this:\n  0 \\<le> i\n\ngoal (1 subgoal):\n 1. int (\\<Sum> {0..<nat i}) + i = int (\\<Sum> {0..nat i})", "by (simp add: sum.last_plus)"], ["proof (state)\nthis:\n  int (\\<Sum> {0..<nat i}) + i = int (\\<Sum> {0..nat i})\n\ngoal (10 subgoals):\n 1. \\<And>l s.\n       \\<lbrakk>I1 l s; s ''z'' < s ''a''\\<rbrakk>\n       \\<Longrightarrow> S1 s =\n                         S1 ((S2 (s(''g'' := 0)))\n                             (''z'' := S2 (s(''g'' := 0)) ''z'' + 1))\n 2. \\<And>l s.\n       \\<lbrakk>I1 l s; \\<not> s ''z'' < s ''a''\\<rbrakk>\n       \\<Longrightarrow> s ''y'' = s ''a'' * s ''b''\n 3. \\<And>l s.\n       \\<lbrakk>I1 l s; \\<not> s ''z'' < s ''a''\\<rbrakk>\n       \\<Longrightarrow> Suc 0 \\<le> E1 s\n 4. \\<And>l s.\n       \\<lbrakk>I1 l s; \\<not> s ''z'' < s ''a''\\<rbrakk>\n       \\<Longrightarrow> S1 s = s\n 5. \\<And>l s.\n       \\<lbrakk>I2 l s; s ''g'' < s ''b''\\<rbrakk>\n       \\<Longrightarrow> I2 l\n                          (s(''y'' := s ''y'' + 1, ''g'' := s ''g'' + 1))\n 6. \\<And>l s.\n       \\<lbrakk>I2 l s; s ''g'' < s ''b''\\<rbrakk>\n       \\<Longrightarrow> Suc (Suc (Suc (E2\n   (s(''y'' := s ''y'' + 1, ''g'' := s ''g'' + 1)))))\n                         \\<le> E2 s\n 7. \\<And>l s.\n       \\<lbrakk>I2 l s; s ''g'' < s ''b''\\<rbrakk>\n       \\<Longrightarrow> S2 s =\n                         S2 (s(''y'' := s ''y'' + 1, ''g'' := s ''g'' + 1))\n 8. \\<And>l s.\n       \\<lbrakk>I2 l s; \\<not> s ''g'' < s ''b''\\<rbrakk>\n       \\<Longrightarrow> I1 l (s(''z'' := s ''z'' + 1))\n 9. \\<And>l s.\n       \\<lbrakk>I2 l s; \\<not> s ''g'' < s ''b''\\<rbrakk>\n       \\<Longrightarrow> Suc 0 \\<le> E2 s\n 10. \\<And>l s.\n        \\<lbrakk>I2 l s; \\<not> s ''g'' < s ''b''\\<rbrakk>\n        \\<Longrightarrow> S2 s = s", "}"], ["proof (state)\nthis:\n  0 \\<le> ?i2 \\<Longrightarrow>\n  int (\\<Sum> {0..<nat ?i2}) + ?i2 = int (\\<Sum> {0..nat ?i2})\n\ngoal (10 subgoals):\n 1. \\<And>l s.\n       \\<lbrakk>I1 l s; s ''z'' < s ''a''\\<rbrakk>\n       \\<Longrightarrow> S1 s =\n                         S1 ((S2 (s(''g'' := 0)))\n                             (''z'' := S2 (s(''g'' := 0)) ''z'' + 1))\n 2. \\<And>l s.\n       \\<lbrakk>I1 l s; \\<not> s ''z'' < s ''a''\\<rbrakk>\n       \\<Longrightarrow> s ''y'' = s ''a'' * s ''b''\n 3. \\<And>l s.\n       \\<lbrakk>I1 l s; \\<not> s ''z'' < s ''a''\\<rbrakk>\n       \\<Longrightarrow> Suc 0 \\<le> E1 s\n 4. \\<And>l s.\n       \\<lbrakk>I1 l s; \\<not> s ''z'' < s ''a''\\<rbrakk>\n       \\<Longrightarrow> S1 s = s\n 5. \\<And>l s.\n       \\<lbrakk>I2 l s; s ''g'' < s ''b''\\<rbrakk>\n       \\<Longrightarrow> I2 l\n                          (s(''y'' := s ''y'' + 1, ''g'' := s ''g'' + 1))\n 6. \\<And>l s.\n       \\<lbrakk>I2 l s; s ''g'' < s ''b''\\<rbrakk>\n       \\<Longrightarrow> Suc (Suc (Suc (E2\n   (s(''y'' := s ''y'' + 1, ''g'' := s ''g'' + 1)))))\n                         \\<le> E2 s\n 7. \\<And>l s.\n       \\<lbrakk>I2 l s; s ''g'' < s ''b''\\<rbrakk>\n       \\<Longrightarrow> S2 s =\n                         S2 (s(''y'' := s ''y'' + 1, ''g'' := s ''g'' + 1))\n 8. \\<And>l s.\n       \\<lbrakk>I2 l s; \\<not> s ''g'' < s ''b''\\<rbrakk>\n       \\<Longrightarrow> I1 l (s(''z'' := s ''z'' + 1))\n 9. \\<And>l s.\n       \\<lbrakk>I2 l s; \\<not> s ''g'' < s ''b''\\<rbrakk>\n       \\<Longrightarrow> Suc 0 \\<le> E2 s\n 10. \\<And>l s.\n        \\<lbrakk>I2 l s; \\<not> s ''g'' < s ''b''\\<rbrakk>\n        \\<Longrightarrow> S2 s = s", "note bla=this"], ["proof (state)\nthis:\n  0 \\<le> ?i2 \\<Longrightarrow>\n  int (\\<Sum> {0..<nat ?i2}) + ?i2 = int (\\<Sum> {0..nat ?i2})\n\ngoal (10 subgoals):\n 1. \\<And>l s.\n       \\<lbrakk>I1 l s; s ''z'' < s ''a''\\<rbrakk>\n       \\<Longrightarrow> S1 s =\n                         S1 ((S2 (s(''g'' := 0)))\n                             (''z'' := S2 (s(''g'' := 0)) ''z'' + 1))\n 2. \\<And>l s.\n       \\<lbrakk>I1 l s; \\<not> s ''z'' < s ''a''\\<rbrakk>\n       \\<Longrightarrow> s ''y'' = s ''a'' * s ''b''\n 3. \\<And>l s.\n       \\<lbrakk>I1 l s; \\<not> s ''z'' < s ''a''\\<rbrakk>\n       \\<Longrightarrow> Suc 0 \\<le> E1 s\n 4. \\<And>l s.\n       \\<lbrakk>I1 l s; \\<not> s ''z'' < s ''a''\\<rbrakk>\n       \\<Longrightarrow> S1 s = s\n 5. \\<And>l s.\n       \\<lbrakk>I2 l s; s ''g'' < s ''b''\\<rbrakk>\n       \\<Longrightarrow> I2 l\n                          (s(''y'' := s ''y'' + 1, ''g'' := s ''g'' + 1))\n 6. \\<And>l s.\n       \\<lbrakk>I2 l s; s ''g'' < s ''b''\\<rbrakk>\n       \\<Longrightarrow> Suc (Suc (Suc (E2\n   (s(''y'' := s ''y'' + 1, ''g'' := s ''g'' + 1)))))\n                         \\<le> E2 s\n 7. \\<And>l s.\n       \\<lbrakk>I2 l s; s ''g'' < s ''b''\\<rbrakk>\n       \\<Longrightarrow> S2 s =\n                         S2 (s(''y'' := s ''y'' + 1, ''g'' := s ''g'' + 1))\n 8. \\<And>l s.\n       \\<lbrakk>I2 l s; \\<not> s ''g'' < s ''b''\\<rbrakk>\n       \\<Longrightarrow> I1 l (s(''z'' := s ''z'' + 1))\n 9. \\<And>l s.\n       \\<lbrakk>I2 l s; \\<not> s ''g'' < s ''b''\\<rbrakk>\n       \\<Longrightarrow> Suc 0 \\<le> E2 s\n 10. \\<And>l s.\n        \\<lbrakk>I2 l s; \\<not> s ''g'' < s ''b''\\<rbrakk>\n        \\<Longrightarrow> S2 s = s", "from 3"], ["proof (chain)\npicking this:\n  I1 l s\n  s ''z'' < s ''a''", "show ?case"], ["proof (prove)\nusing this:\n  I1 l s\n  s ''z'' < s ''a''\n\ngoal (1 subgoal):\n 1. S1 s = S1 ((S2 (s(''g'' := 0)))(''z'' := S2 (s(''g'' := 0)) ''z'' + 1))", "unfolding I1 S1 S2"], ["proof (prove)\nusing this:\n  0 \\<le> s ''a'' \\<and>\n  0 \\<le> s ''b'' \\<and>\n  s ''z'' \\<le> s ''a'' \\<and>\n  0 \\<le> s ''z'' \\<and> s ''y'' = s ''z'' * s ''b''\n  s ''z'' < s ''a''\n\ngoal (1 subgoal):\n 1. (if s ''a'' \\<le> s ''z'' then s\n     else s(''y'' := s ''a'' * s ''b'', ''z'' := s ''a'',\n            ''g'' := s ''b'')) =\n    (if ((if (s(''g'' := 0)) ''b'' \\<le> (s(''g'' := 0)) ''g''\n          then s(''g'' := 0)\n          else s(''g'' := 0,\n                 ''y'' :=\n                   (s(''g'' := 0)) ''z'' * (s(''g'' := 0)) ''b'' +\n                   (s(''g'' := 0)) ''b'',\n                 ''g'' := (s(''g'' := 0)) ''b''))\n         (''z'' :=\n            (if (s(''g'' := 0)) ''b'' \\<le> (s(''g'' := 0)) ''g''\n             then s(''g'' := 0)\n             else s(''g'' := 0,\n                    ''y'' :=\n                      (s(''g'' := 0)) ''z'' * (s(''g'' := 0)) ''b'' +\n                      (s(''g'' := 0)) ''b'',\n                    ''g'' := (s(''g'' := 0)) ''b''))\n             ''z'' +\n            1))\n         ''a''\n        \\<le> ((if (s(''g'' := 0)) ''b'' \\<le> (s(''g'' := 0)) ''g''\n                then s(''g'' := 0)\n                else s(''g'' := 0,\n                       ''y'' :=\n                         (s(''g'' := 0)) ''z'' * (s(''g'' := 0)) ''b'' +\n                         (s(''g'' := 0)) ''b'',\n                       ''g'' := (s(''g'' := 0)) ''b''))\n               (''z'' :=\n                  (if (s(''g'' := 0)) ''b'' \\<le> (s(''g'' := 0)) ''g''\n                   then s(''g'' := 0)\n                   else s(''g'' := 0,\n                          ''y'' :=\n                            (s(''g'' := 0)) ''z'' * (s(''g'' := 0)) ''b'' +\n                            (s(''g'' := 0)) ''b'',\n                          ''g'' := (s(''g'' := 0)) ''b''))\n                   ''z'' +\n                  1))\n               ''z''\n     then (if (s(''g'' := 0)) ''b'' \\<le> (s(''g'' := 0)) ''g''\n           then s(''g'' := 0)\n           else s(''g'' := 0,\n                  ''y'' :=\n                    (s(''g'' := 0)) ''z'' * (s(''g'' := 0)) ''b'' +\n                    (s(''g'' := 0)) ''b'',\n                  ''g'' := (s(''g'' := 0)) ''b''))\n          (''z'' :=\n             (if (s(''g'' := 0)) ''b'' \\<le> (s(''g'' := 0)) ''g''\n              then s(''g'' := 0)\n              else s(''g'' := 0,\n                     ''y'' :=\n                       (s(''g'' := 0)) ''z'' * (s(''g'' := 0)) ''b'' +\n                       (s(''g'' := 0)) ''b'',\n                     ''g'' := (s(''g'' := 0)) ''b''))\n              ''z'' +\n             1)\n     else (if (s(''g'' := 0)) ''b'' \\<le> (s(''g'' := 0)) ''g''\n           then s(''g'' := 0)\n           else s(''g'' := 0,\n                  ''y'' :=\n                    (s(''g'' := 0)) ''z'' * (s(''g'' := 0)) ''b'' +\n                    (s(''g'' := 0)) ''b'',\n                  ''g'' := (s(''g'' := 0)) ''b''))\n          (''z'' :=\n             (if (s(''g'' := 0)) ''b'' \\<le> (s(''g'' := 0)) ''g''\n              then s(''g'' := 0)\n              else s(''g'' := 0,\n                     ''y'' :=\n                       (s(''g'' := 0)) ''z'' * (s(''g'' := 0)) ''b'' +\n                       (s(''g'' := 0)) ''b'',\n                     ''g'' := (s(''g'' := 0)) ''b''))\n              ''z'' +\n             1,\n           ''y'' :=\n             ((if (s(''g'' := 0)) ''b'' \\<le> (s(''g'' := 0)) ''g''\n               then s(''g'' := 0)\n               else s(''g'' := 0,\n                      ''y'' :=\n                        (s(''g'' := 0)) ''z'' * (s(''g'' := 0)) ''b'' +\n                        (s(''g'' := 0)) ''b'',\n                      ''g'' := (s(''g'' := 0)) ''b''))\n              (''z'' :=\n                 (if (s(''g'' := 0)) ''b'' \\<le> (s(''g'' := 0)) ''g''\n                  then s(''g'' := 0)\n                  else s(''g'' := 0,\n                         ''y'' :=\n                           (s(''g'' := 0)) ''z'' * (s(''g'' := 0)) ''b'' +\n                           (s(''g'' := 0)) ''b'',\n                         ''g'' := (s(''g'' := 0)) ''b''))\n                  ''z'' +\n                 1))\n              ''a'' *\n             ((if (s(''g'' := 0)) ''b'' \\<le> (s(''g'' := 0)) ''g''\n               then s(''g'' := 0)\n               else s(''g'' := 0,\n                      ''y'' :=\n                        (s(''g'' := 0)) ''z'' * (s(''g'' := 0)) ''b'' +\n                        (s(''g'' := 0)) ''b'',\n                      ''g'' := (s(''g'' := 0)) ''b''))\n              (''z'' :=\n                 (if (s(''g'' := 0)) ''b'' \\<le> (s(''g'' := 0)) ''g''\n                  then s(''g'' := 0)\n                  else s(''g'' := 0,\n                         ''y'' :=\n                           (s(''g'' := 0)) ''z'' * (s(''g'' := 0)) ''b'' +\n                           (s(''g'' := 0)) ''b'',\n                         ''g'' := (s(''g'' := 0)) ''b''))\n                  ''z'' +\n                 1))\n              ''b'',\n           ''z'' :=\n             ((if (s(''g'' := 0)) ''b'' \\<le> (s(''g'' := 0)) ''g''\n               then s(''g'' := 0)\n               else s(''g'' := 0,\n                      ''y'' :=\n                        (s(''g'' := 0)) ''z'' * (s(''g'' := 0)) ''b'' +\n                        (s(''g'' := 0)) ''b'',\n                      ''g'' := (s(''g'' := 0)) ''b''))\n              (''z'' :=\n                 (if (s(''g'' := 0)) ''b'' \\<le> (s(''g'' := 0)) ''g''\n                  then s(''g'' := 0)\n                  else s(''g'' := 0,\n                         ''y'' :=\n                           (s(''g'' := 0)) ''z'' * (s(''g'' := 0)) ''b'' +\n                           (s(''g'' := 0)) ''b'',\n                         ''g'' := (s(''g'' := 0)) ''b''))\n                  ''z'' +\n                 1))\n              ''a'',\n           ''g'' :=\n             ((if (s(''g'' := 0)) ''b'' \\<le> (s(''g'' := 0)) ''g''\n               then s(''g'' := 0)\n               else s(''g'' := 0,\n                      ''y'' :=\n                        (s(''g'' := 0)) ''z'' * (s(''g'' := 0)) ''b'' +\n                        (s(''g'' := 0)) ''b'',\n                      ''g'' := (s(''g'' := 0)) ''b''))\n              (''z'' :=\n                 (if (s(''g'' := 0)) ''b'' \\<le> (s(''g'' := 0)) ''g''\n                  then s(''g'' := 0)\n                  else s(''g'' := 0,\n                         ''y'' :=\n                           (s(''g'' := 0)) ''z'' * (s(''g'' := 0)) ''b'' +\n                           (s(''g'' := 0)) ''b'',\n                         ''g'' := (s(''g'' := 0)) ''b''))\n                  ''z'' +\n                 1))\n              ''b''))", "apply(auto simp add:  )"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>s ''z'' < s ''a''; 0 \\<le> s ''z'';\n     s ''y'' = s ''z'' * s ''b''; \\<not> s ''b'' \\<le> 0;\n     s ''a'' \\<le> s ''z'' + 1\\<rbrakk>\n    \\<Longrightarrow> s(''y'' := s ''a'' * s ''b'', ''z'' := s ''a'',\n                        ''g'' := s ''b'') =\n                      s(''y'' := s ''z'' * s ''b'' + s ''b'',\n                        ''g'' := s ''b'', ''z'' := s ''z'' + 1)", "proof (goal_cases)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<lbrakk>s ''z'' < s ''a''; 0 \\<le> s ''z'';\n     s ''y'' = s ''z'' * s ''b''; \\<not> s ''b'' \\<le> 0;\n     s ''a'' \\<le> s ''z'' + 1\\<rbrakk>\n    \\<Longrightarrow> s(''y'' := s ''a'' * s ''b'', ''z'' := s ''a'',\n                        ''g'' := s ''b'') =\n                      s(''y'' := s ''z'' * s ''b'' + s ''b'',\n                        ''g'' := s ''b'', ''z'' := s ''z'' + 1)", "case 1"], ["proof (state)\nthis:\n  s ''z'' < s ''a''\n  0 \\<le> s ''z''\n  s ''y'' = s ''z'' * s ''b''\n  \\<not> s ''b'' \\<le> 0\n  s ''a'' \\<le> s ''z'' + 1\n\ngoal (1 subgoal):\n 1. \\<lbrakk>s ''z'' < s ''a''; 0 \\<le> s ''z'';\n     s ''y'' = s ''z'' * s ''b''; \\<not> s ''b'' \\<le> 0;\n     s ''a'' \\<le> s ''z'' + 1\\<rbrakk>\n    \\<Longrightarrow> s(''y'' := s ''a'' * s ''b'', ''z'' := s ''a'',\n                        ''g'' := s ''b'') =\n                      s(''y'' := s ''z'' * s ''b'' + s ''b'',\n                        ''g'' := s ''b'', ''z'' := s ''z'' + 1)", "then"], ["proof (chain)\npicking this:\n  s ''z'' < s ''a''\n  0 \\<le> s ''z''\n  s ''y'' = s ''z'' * s ''b''\n  \\<not> s ''b'' \\<le> 0\n  s ''a'' \\<le> s ''z'' + 1", "have a: \"s ''a'' =  s ''z'' + 1\""], ["proof (prove)\nusing this:\n  s ''z'' < s ''a''\n  0 \\<le> s ''z''\n  s ''y'' = s ''z'' * s ''b''\n  \\<not> s ''b'' \\<le> 0\n  s ''a'' \\<le> s ''z'' + 1\n\ngoal (1 subgoal):\n 1. s ''a'' = s ''z'' + 1", "by linarith"], ["proof (state)\nthis:\n  s ''a'' = s ''z'' + 1\n\ngoal (1 subgoal):\n 1. \\<lbrakk>s ''z'' < s ''a''; 0 \\<le> s ''z'';\n     s ''y'' = s ''z'' * s ''b''; \\<not> s ''b'' \\<le> 0;\n     s ''a'' \\<le> s ''z'' + 1\\<rbrakk>\n    \\<Longrightarrow> s(''y'' := s ''a'' * s ''b'', ''z'' := s ''a'',\n                        ''g'' := s ''b'') =\n                      s(''y'' := s ''z'' * s ''b'' + s ''b'',\n                        ''g'' := s ''b'', ''z'' := s ''z'' + 1)", "show ?case"], ["proof (prove)\ngoal (1 subgoal):\n 1. s(''y'' := s ''a'' * s ''b'', ''z'' := s ''a'', ''g'' := s ''b'') = s\n    (''y'' := s ''z'' * s ''b'' + s ''b'', ''g'' := s ''b'',\n     ''z'' := s ''z'' + 1)", "apply(simp only: a)"], ["proof (prove)\ngoal (1 subgoal):\n 1. s(''y'' := (s ''z'' + 1) * s ''b'', ''z'' := s ''z'' + 1,\n      ''g'' := s ''b'') =\n    s(''y'' := s ''z'' * s ''b'' + s ''b'', ''g'' := s ''b'',\n      ''z'' := s ''z'' + 1)", "using 1"], ["proof (prove)\nusing this:\n  s ''z'' < s ''a''\n  0 \\<le> s ''z''\n  s ''y'' = s ''z'' * s ''b''\n  \\<not> s ''b'' \\<le> 0\n  s ''a'' \\<le> s ''z'' + 1\n\ngoal (1 subgoal):\n 1. s(''y'' := (s ''z'' + 1) * s ''b'', ''z'' := s ''z'' + 1,\n      ''g'' := s ''b'') =\n    s(''y'' := s ''z'' * s ''b'' + s ''b'', ''g'' := s ''b'',\n      ''z'' := s ''z'' + 1)", "by (simp add: distrib_left mult.commute fun_upd_twist)"], ["proof (state)\nthis:\n  s(''y'' := s ''a'' * s ''b'', ''z'' := s ''a'', ''g'' := s ''b'') = s\n  (''y'' := s ''z'' * s ''b'' + s ''b'', ''g'' := s ''b'',\n   ''z'' := s ''z'' + 1)\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  S1 s = S1 ((S2 (s(''g'' := 0)))(''z'' := S2 (s(''g'' := 0)) ''z'' + 1))\n\ngoal (9 subgoals):\n 1. \\<And>l s.\n       \\<lbrakk>I1 l s; \\<not> s ''z'' < s ''a''\\<rbrakk>\n       \\<Longrightarrow> s ''y'' = s ''a'' * s ''b''\n 2. \\<And>l s.\n       \\<lbrakk>I1 l s; \\<not> s ''z'' < s ''a''\\<rbrakk>\n       \\<Longrightarrow> Suc 0 \\<le> E1 s\n 3. \\<And>l s.\n       \\<lbrakk>I1 l s; \\<not> s ''z'' < s ''a''\\<rbrakk>\n       \\<Longrightarrow> S1 s = s\n 4. \\<And>l s.\n       \\<lbrakk>I2 l s; s ''g'' < s ''b''\\<rbrakk>\n       \\<Longrightarrow> I2 l\n                          (s(''y'' := s ''y'' + 1, ''g'' := s ''g'' + 1))\n 5. \\<And>l s.\n       \\<lbrakk>I2 l s; s ''g'' < s ''b''\\<rbrakk>\n       \\<Longrightarrow> Suc (Suc (Suc (E2\n   (s(''y'' := s ''y'' + 1, ''g'' := s ''g'' + 1)))))\n                         \\<le> E2 s\n 6. \\<And>l s.\n       \\<lbrakk>I2 l s; s ''g'' < s ''b''\\<rbrakk>\n       \\<Longrightarrow> S2 s =\n                         S2 (s(''y'' := s ''y'' + 1, ''g'' := s ''g'' + 1))\n 7. \\<And>l s.\n       \\<lbrakk>I2 l s; \\<not> s ''g'' < s ''b''\\<rbrakk>\n       \\<Longrightarrow> I1 l (s(''z'' := s ''z'' + 1))\n 8. \\<And>l s.\n       \\<lbrakk>I2 l s; \\<not> s ''g'' < s ''b''\\<rbrakk>\n       \\<Longrightarrow> Suc 0 \\<le> E2 s\n 9. \\<And>l s.\n       \\<lbrakk>I2 l s; \\<not> s ''g'' < s ''b''\\<rbrakk>\n       \\<Longrightarrow> S2 s = s", "next"], ["proof (state)\ngoal (9 subgoals):\n 1. \\<And>l s.\n       \\<lbrakk>I1 l s; \\<not> s ''z'' < s ''a''\\<rbrakk>\n       \\<Longrightarrow> s ''y'' = s ''a'' * s ''b''\n 2. \\<And>l s.\n       \\<lbrakk>I1 l s; \\<not> s ''z'' < s ''a''\\<rbrakk>\n       \\<Longrightarrow> Suc 0 \\<le> E1 s\n 3. \\<And>l s.\n       \\<lbrakk>I1 l s; \\<not> s ''z'' < s ''a''\\<rbrakk>\n       \\<Longrightarrow> S1 s = s\n 4. \\<And>l s.\n       \\<lbrakk>I2 l s; s ''g'' < s ''b''\\<rbrakk>\n       \\<Longrightarrow> I2 l\n                          (s(''y'' := s ''y'' + 1, ''g'' := s ''g'' + 1))\n 5. \\<And>l s.\n       \\<lbrakk>I2 l s; s ''g'' < s ''b''\\<rbrakk>\n       \\<Longrightarrow> Suc (Suc (Suc (E2\n   (s(''y'' := s ''y'' + 1, ''g'' := s ''g'' + 1)))))\n                         \\<le> E2 s\n 6. \\<And>l s.\n       \\<lbrakk>I2 l s; s ''g'' < s ''b''\\<rbrakk>\n       \\<Longrightarrow> S2 s =\n                         S2 (s(''y'' := s ''y'' + 1, ''g'' := s ''g'' + 1))\n 7. \\<And>l s.\n       \\<lbrakk>I2 l s; \\<not> s ''g'' < s ''b''\\<rbrakk>\n       \\<Longrightarrow> I1 l (s(''z'' := s ''z'' + 1))\n 8. \\<And>l s.\n       \\<lbrakk>I2 l s; \\<not> s ''g'' < s ''b''\\<rbrakk>\n       \\<Longrightarrow> Suc 0 \\<le> E2 s\n 9. \\<And>l s.\n       \\<lbrakk>I2 l s; \\<not> s ''g'' < s ''b''\\<rbrakk>\n       \\<Longrightarrow> S2 s = s", "case (4 l s)"], ["proof (state)\nthis:\n  I1 l s\n  \\<not> s ''z'' < s ''a''\n\ngoal (9 subgoals):\n 1. \\<And>l s.\n       \\<lbrakk>I1 l s; \\<not> s ''z'' < s ''a''\\<rbrakk>\n       \\<Longrightarrow> s ''y'' = s ''a'' * s ''b''\n 2. \\<And>l s.\n       \\<lbrakk>I1 l s; \\<not> s ''z'' < s ''a''\\<rbrakk>\n       \\<Longrightarrow> Suc 0 \\<le> E1 s\n 3. \\<And>l s.\n       \\<lbrakk>I1 l s; \\<not> s ''z'' < s ''a''\\<rbrakk>\n       \\<Longrightarrow> S1 s = s\n 4. \\<And>l s.\n       \\<lbrakk>I2 l s; s ''g'' < s ''b''\\<rbrakk>\n       \\<Longrightarrow> I2 l\n                          (s(''y'' := s ''y'' + 1, ''g'' := s ''g'' + 1))\n 5. \\<And>l s.\n       \\<lbrakk>I2 l s; s ''g'' < s ''b''\\<rbrakk>\n       \\<Longrightarrow> Suc (Suc (Suc (E2\n   (s(''y'' := s ''y'' + 1, ''g'' := s ''g'' + 1)))))\n                         \\<le> E2 s\n 6. \\<And>l s.\n       \\<lbrakk>I2 l s; s ''g'' < s ''b''\\<rbrakk>\n       \\<Longrightarrow> S2 s =\n                         S2 (s(''y'' := s ''y'' + 1, ''g'' := s ''g'' + 1))\n 7. \\<And>l s.\n       \\<lbrakk>I2 l s; \\<not> s ''g'' < s ''b''\\<rbrakk>\n       \\<Longrightarrow> I1 l (s(''z'' := s ''z'' + 1))\n 8. \\<And>l s.\n       \\<lbrakk>I2 l s; \\<not> s ''g'' < s ''b''\\<rbrakk>\n       \\<Longrightarrow> Suc 0 \\<le> E2 s\n 9. \\<And>l s.\n       \\<lbrakk>I2 l s; \\<not> s ''g'' < s ''b''\\<rbrakk>\n       \\<Longrightarrow> S2 s = s", "(* outer loop: post condition is correct after exiting the loop *)"], ["proof (state)\nthis:\n  I1 l s\n  \\<not> s ''z'' < s ''a''\n\ngoal (9 subgoals):\n 1. \\<And>l s.\n       \\<lbrakk>I1 l s; \\<not> s ''z'' < s ''a''\\<rbrakk>\n       \\<Longrightarrow> s ''y'' = s ''a'' * s ''b''\n 2. \\<And>l s.\n       \\<lbrakk>I1 l s; \\<not> s ''z'' < s ''a''\\<rbrakk>\n       \\<Longrightarrow> Suc 0 \\<le> E1 s\n 3. \\<And>l s.\n       \\<lbrakk>I1 l s; \\<not> s ''z'' < s ''a''\\<rbrakk>\n       \\<Longrightarrow> S1 s = s\n 4. \\<And>l s.\n       \\<lbrakk>I2 l s; s ''g'' < s ''b''\\<rbrakk>\n       \\<Longrightarrow> I2 l\n                          (s(''y'' := s ''y'' + 1, ''g'' := s ''g'' + 1))\n 5. \\<And>l s.\n       \\<lbrakk>I2 l s; s ''g'' < s ''b''\\<rbrakk>\n       \\<Longrightarrow> Suc (Suc (Suc (E2\n   (s(''y'' := s ''y'' + 1, ''g'' := s ''g'' + 1)))))\n                         \\<le> E2 s\n 6. \\<And>l s.\n       \\<lbrakk>I2 l s; s ''g'' < s ''b''\\<rbrakk>\n       \\<Longrightarrow> S2 s =\n                         S2 (s(''y'' := s ''y'' + 1, ''g'' := s ''g'' + 1))\n 7. \\<And>l s.\n       \\<lbrakk>I2 l s; \\<not> s ''g'' < s ''b''\\<rbrakk>\n       \\<Longrightarrow> I1 l (s(''z'' := s ''z'' + 1))\n 8. \\<And>l s.\n       \\<lbrakk>I2 l s; \\<not> s ''g'' < s ''b''\\<rbrakk>\n       \\<Longrightarrow> Suc 0 \\<le> E2 s\n 9. \\<And>l s.\n       \\<lbrakk>I2 l s; \\<not> s ''g'' < s ''b''\\<rbrakk>\n       \\<Longrightarrow> S2 s = s", "then"], ["proof (chain)\npicking this:\n  I1 l s\n  \\<not> s ''z'' < s ''a''", "show ?case"], ["proof (prove)\nusing this:\n  I1 l s\n  \\<not> s ''z'' < s ''a''\n\ngoal (1 subgoal):\n 1. s ''y'' = s ''a'' * s ''b''", "unfolding I1"], ["proof (prove)\nusing this:\n  0 \\<le> s ''a'' \\<and>\n  0 \\<le> s ''b'' \\<and>\n  s ''z'' \\<le> s ''a'' \\<and>\n  0 \\<le> s ''z'' \\<and> s ''y'' = s ''z'' * s ''b''\n  \\<not> s ''z'' < s ''a''\n\ngoal (1 subgoal):\n 1. s ''y'' = s ''a'' * s ''b''", "by (auto)"], ["proof (state)\nthis:\n  s ''y'' = s ''a'' * s ''b''\n\ngoal (8 subgoals):\n 1. \\<And>l s.\n       \\<lbrakk>I1 l s; \\<not> s ''z'' < s ''a''\\<rbrakk>\n       \\<Longrightarrow> Suc 0 \\<le> E1 s\n 2. \\<And>l s.\n       \\<lbrakk>I1 l s; \\<not> s ''z'' < s ''a''\\<rbrakk>\n       \\<Longrightarrow> S1 s = s\n 3. \\<And>l s.\n       \\<lbrakk>I2 l s; s ''g'' < s ''b''\\<rbrakk>\n       \\<Longrightarrow> I2 l\n                          (s(''y'' := s ''y'' + 1, ''g'' := s ''g'' + 1))\n 4. \\<And>l s.\n       \\<lbrakk>I2 l s; s ''g'' < s ''b''\\<rbrakk>\n       \\<Longrightarrow> Suc (Suc (Suc (E2\n   (s(''y'' := s ''y'' + 1, ''g'' := s ''g'' + 1)))))\n                         \\<le> E2 s\n 5. \\<And>l s.\n       \\<lbrakk>I2 l s; s ''g'' < s ''b''\\<rbrakk>\n       \\<Longrightarrow> S2 s =\n                         S2 (s(''y'' := s ''y'' + 1, ''g'' := s ''g'' + 1))\n 6. \\<And>l s.\n       \\<lbrakk>I2 l s; \\<not> s ''g'' < s ''b''\\<rbrakk>\n       \\<Longrightarrow> I1 l (s(''z'' := s ''z'' + 1))\n 7. \\<And>l s.\n       \\<lbrakk>I2 l s; \\<not> s ''g'' < s ''b''\\<rbrakk>\n       \\<Longrightarrow> Suc 0 \\<le> E2 s\n 8. \\<And>l s.\n       \\<lbrakk>I2 l s; \\<not> s ''g'' < s ''b''\\<rbrakk>\n       \\<Longrightarrow> S2 s = s", "next"], ["proof (state)\ngoal (8 subgoals):\n 1. \\<And>l s.\n       \\<lbrakk>I1 l s; \\<not> s ''z'' < s ''a''\\<rbrakk>\n       \\<Longrightarrow> Suc 0 \\<le> E1 s\n 2. \\<And>l s.\n       \\<lbrakk>I1 l s; \\<not> s ''z'' < s ''a''\\<rbrakk>\n       \\<Longrightarrow> S1 s = s\n 3. \\<And>l s.\n       \\<lbrakk>I2 l s; s ''g'' < s ''b''\\<rbrakk>\n       \\<Longrightarrow> I2 l\n                          (s(''y'' := s ''y'' + 1, ''g'' := s ''g'' + 1))\n 4. \\<And>l s.\n       \\<lbrakk>I2 l s; s ''g'' < s ''b''\\<rbrakk>\n       \\<Longrightarrow> Suc (Suc (Suc (E2\n   (s(''y'' := s ''y'' + 1, ''g'' := s ''g'' + 1)))))\n                         \\<le> E2 s\n 5. \\<And>l s.\n       \\<lbrakk>I2 l s; s ''g'' < s ''b''\\<rbrakk>\n       \\<Longrightarrow> S2 s =\n                         S2 (s(''y'' := s ''y'' + 1, ''g'' := s ''g'' + 1))\n 6. \\<And>l s.\n       \\<lbrakk>I2 l s; \\<not> s ''g'' < s ''b''\\<rbrakk>\n       \\<Longrightarrow> I1 l (s(''z'' := s ''z'' + 1))\n 7. \\<And>l s.\n       \\<lbrakk>I2 l s; \\<not> s ''g'' < s ''b''\\<rbrakk>\n       \\<Longrightarrow> Suc 0 \\<le> E2 s\n 8. \\<And>l s.\n       \\<lbrakk>I2 l s; \\<not> s ''g'' < s ''b''\\<rbrakk>\n       \\<Longrightarrow> S2 s = s", "case (5 l s)"], ["proof (state)\nthis:\n  I1 l s\n  \\<not> s ''z'' < s ''a''\n\ngoal (8 subgoals):\n 1. \\<And>l s.\n       \\<lbrakk>I1 l s; \\<not> s ''z'' < s ''a''\\<rbrakk>\n       \\<Longrightarrow> Suc 0 \\<le> E1 s\n 2. \\<And>l s.\n       \\<lbrakk>I1 l s; \\<not> s ''z'' < s ''a''\\<rbrakk>\n       \\<Longrightarrow> S1 s = s\n 3. \\<And>l s.\n       \\<lbrakk>I2 l s; s ''g'' < s ''b''\\<rbrakk>\n       \\<Longrightarrow> I2 l\n                          (s(''y'' := s ''y'' + 1, ''g'' := s ''g'' + 1))\n 4. \\<And>l s.\n       \\<lbrakk>I2 l s; s ''g'' < s ''b''\\<rbrakk>\n       \\<Longrightarrow> Suc (Suc (Suc (E2\n   (s(''y'' := s ''y'' + 1, ''g'' := s ''g'' + 1)))))\n                         \\<le> E2 s\n 5. \\<And>l s.\n       \\<lbrakk>I2 l s; s ''g'' < s ''b''\\<rbrakk>\n       \\<Longrightarrow> S2 s =\n                         S2 (s(''y'' := s ''y'' + 1, ''g'' := s ''g'' + 1))\n 6. \\<And>l s.\n       \\<lbrakk>I2 l s; \\<not> s ''g'' < s ''b''\\<rbrakk>\n       \\<Longrightarrow> I1 l (s(''z'' := s ''z'' + 1))\n 7. \\<And>l s.\n       \\<lbrakk>I2 l s; \\<not> s ''g'' < s ''b''\\<rbrakk>\n       \\<Longrightarrow> Suc 0 \\<le> E2 s\n 8. \\<And>l s.\n       \\<lbrakk>I2 l s; \\<not> s ''g'' < s ''b''\\<rbrakk>\n       \\<Longrightarrow> S2 s = s", "(* outer loop: time expression is correct after exiting the loop *)"], ["proof (state)\nthis:\n  I1 l s\n  \\<not> s ''z'' < s ''a''\n\ngoal (8 subgoals):\n 1. \\<And>l s.\n       \\<lbrakk>I1 l s; \\<not> s ''z'' < s ''a''\\<rbrakk>\n       \\<Longrightarrow> Suc 0 \\<le> E1 s\n 2. \\<And>l s.\n       \\<lbrakk>I1 l s; \\<not> s ''z'' < s ''a''\\<rbrakk>\n       \\<Longrightarrow> S1 s = s\n 3. \\<And>l s.\n       \\<lbrakk>I2 l s; s ''g'' < s ''b''\\<rbrakk>\n       \\<Longrightarrow> I2 l\n                          (s(''y'' := s ''y'' + 1, ''g'' := s ''g'' + 1))\n 4. \\<And>l s.\n       \\<lbrakk>I2 l s; s ''g'' < s ''b''\\<rbrakk>\n       \\<Longrightarrow> Suc (Suc (Suc (E2\n   (s(''y'' := s ''y'' + 1, ''g'' := s ''g'' + 1)))))\n                         \\<le> E2 s\n 5. \\<And>l s.\n       \\<lbrakk>I2 l s; s ''g'' < s ''b''\\<rbrakk>\n       \\<Longrightarrow> S2 s =\n                         S2 (s(''y'' := s ''y'' + 1, ''g'' := s ''g'' + 1))\n 6. \\<And>l s.\n       \\<lbrakk>I2 l s; \\<not> s ''g'' < s ''b''\\<rbrakk>\n       \\<Longrightarrow> I1 l (s(''z'' := s ''z'' + 1))\n 7. \\<And>l s.\n       \\<lbrakk>I2 l s; \\<not> s ''g'' < s ''b''\\<rbrakk>\n       \\<Longrightarrow> Suc 0 \\<le> E2 s\n 8. \\<And>l s.\n       \\<lbrakk>I2 l s; \\<not> s ''g'' < s ''b''\\<rbrakk>\n       \\<Longrightarrow> S2 s = s", "then"], ["proof (chain)\npicking this:\n  I1 l s\n  \\<not> s ''z'' < s ''a''", "show ?case"], ["proof (prove)\nusing this:\n  I1 l s\n  \\<not> s ''z'' < s ''a''\n\ngoal (1 subgoal):\n 1. Suc 0 \\<le> E1 s", "unfolding I1 E1"], ["proof (prove)\nusing this:\n  0 \\<le> s ''a'' \\<and>\n  0 \\<le> s ''b'' \\<and>\n  s ''z'' \\<le> s ''a'' \\<and>\n  0 \\<le> s ''z'' \\<and> s ''y'' = s ''z'' * s ''b''\n  \\<not> s ''z'' < s ''a''\n\ngoal (1 subgoal):\n 1. Suc 0\n    \\<le> 1 + (4 + 3 * nat (s ''b'')) * (nat (s ''a'') - nat (s ''z''))", "by auto"], ["proof (state)\nthis:\n  Suc 0 \\<le> E1 s\n\ngoal (7 subgoals):\n 1. \\<And>l s.\n       \\<lbrakk>I1 l s; \\<not> s ''z'' < s ''a''\\<rbrakk>\n       \\<Longrightarrow> S1 s = s\n 2. \\<And>l s.\n       \\<lbrakk>I2 l s; s ''g'' < s ''b''\\<rbrakk>\n       \\<Longrightarrow> I2 l\n                          (s(''y'' := s ''y'' + 1, ''g'' := s ''g'' + 1))\n 3. \\<And>l s.\n       \\<lbrakk>I2 l s; s ''g'' < s ''b''\\<rbrakk>\n       \\<Longrightarrow> Suc (Suc (Suc (E2\n   (s(''y'' := s ''y'' + 1, ''g'' := s ''g'' + 1)))))\n                         \\<le> E2 s\n 4. \\<And>l s.\n       \\<lbrakk>I2 l s; s ''g'' < s ''b''\\<rbrakk>\n       \\<Longrightarrow> S2 s =\n                         S2 (s(''y'' := s ''y'' + 1, ''g'' := s ''g'' + 1))\n 5. \\<And>l s.\n       \\<lbrakk>I2 l s; \\<not> s ''g'' < s ''b''\\<rbrakk>\n       \\<Longrightarrow> I1 l (s(''z'' := s ''z'' + 1))\n 6. \\<And>l s.\n       \\<lbrakk>I2 l s; \\<not> s ''g'' < s ''b''\\<rbrakk>\n       \\<Longrightarrow> Suc 0 \\<le> E2 s\n 7. \\<And>l s.\n       \\<lbrakk>I2 l s; \\<not> s ''g'' < s ''b''\\<rbrakk>\n       \\<Longrightarrow> S2 s = s", "next"], ["proof (state)\ngoal (7 subgoals):\n 1. \\<And>l s.\n       \\<lbrakk>I1 l s; \\<not> s ''z'' < s ''a''\\<rbrakk>\n       \\<Longrightarrow> S1 s = s\n 2. \\<And>l s.\n       \\<lbrakk>I2 l s; s ''g'' < s ''b''\\<rbrakk>\n       \\<Longrightarrow> I2 l\n                          (s(''y'' := s ''y'' + 1, ''g'' := s ''g'' + 1))\n 3. \\<And>l s.\n       \\<lbrakk>I2 l s; s ''g'' < s ''b''\\<rbrakk>\n       \\<Longrightarrow> Suc (Suc (Suc (E2\n   (s(''y'' := s ''y'' + 1, ''g'' := s ''g'' + 1)))))\n                         \\<le> E2 s\n 4. \\<And>l s.\n       \\<lbrakk>I2 l s; s ''g'' < s ''b''\\<rbrakk>\n       \\<Longrightarrow> S2 s =\n                         S2 (s(''y'' := s ''y'' + 1, ''g'' := s ''g'' + 1))\n 5. \\<And>l s.\n       \\<lbrakk>I2 l s; \\<not> s ''g'' < s ''b''\\<rbrakk>\n       \\<Longrightarrow> I1 l (s(''z'' := s ''z'' + 1))\n 6. \\<And>l s.\n       \\<lbrakk>I2 l s; \\<not> s ''g'' < s ''b''\\<rbrakk>\n       \\<Longrightarrow> Suc 0 \\<le> E2 s\n 7. \\<And>l s.\n       \\<lbrakk>I2 l s; \\<not> s ''g'' < s ''b''\\<rbrakk>\n       \\<Longrightarrow> S2 s = s", "case (6 l s)"], ["proof (state)\nthis:\n  I1 l s\n  \\<not> s ''z'' < s ''a''\n\ngoal (7 subgoals):\n 1. \\<And>l s.\n       \\<lbrakk>I1 l s; \\<not> s ''z'' < s ''a''\\<rbrakk>\n       \\<Longrightarrow> S1 s = s\n 2. \\<And>l s.\n       \\<lbrakk>I2 l s; s ''g'' < s ''b''\\<rbrakk>\n       \\<Longrightarrow> I2 l\n                          (s(''y'' := s ''y'' + 1, ''g'' := s ''g'' + 1))\n 3. \\<And>l s.\n       \\<lbrakk>I2 l s; s ''g'' < s ''b''\\<rbrakk>\n       \\<Longrightarrow> Suc (Suc (Suc (E2\n   (s(''y'' := s ''y'' + 1, ''g'' := s ''g'' + 1)))))\n                         \\<le> E2 s\n 4. \\<And>l s.\n       \\<lbrakk>I2 l s; s ''g'' < s ''b''\\<rbrakk>\n       \\<Longrightarrow> S2 s =\n                         S2 (s(''y'' := s ''y'' + 1, ''g'' := s ''g'' + 1))\n 5. \\<And>l s.\n       \\<lbrakk>I2 l s; \\<not> s ''g'' < s ''b''\\<rbrakk>\n       \\<Longrightarrow> I1 l (s(''z'' := s ''z'' + 1))\n 6. \\<And>l s.\n       \\<lbrakk>I2 l s; \\<not> s ''g'' < s ''b''\\<rbrakk>\n       \\<Longrightarrow> Suc 0 \\<le> E2 s\n 7. \\<And>l s.\n       \\<lbrakk>I2 l s; \\<not> s ''g'' < s ''b''\\<rbrakk>\n       \\<Longrightarrow> S2 s = s", "(* outer loop: S correct if loop guard not fullfilled *)"], ["proof (state)\nthis:\n  I1 l s\n  \\<not> s ''z'' < s ''a''\n\ngoal (7 subgoals):\n 1. \\<And>l s.\n       \\<lbrakk>I1 l s; \\<not> s ''z'' < s ''a''\\<rbrakk>\n       \\<Longrightarrow> S1 s = s\n 2. \\<And>l s.\n       \\<lbrakk>I2 l s; s ''g'' < s ''b''\\<rbrakk>\n       \\<Longrightarrow> I2 l\n                          (s(''y'' := s ''y'' + 1, ''g'' := s ''g'' + 1))\n 3. \\<And>l s.\n       \\<lbrakk>I2 l s; s ''g'' < s ''b''\\<rbrakk>\n       \\<Longrightarrow> Suc (Suc (Suc (E2\n   (s(''y'' := s ''y'' + 1, ''g'' := s ''g'' + 1)))))\n                         \\<le> E2 s\n 4. \\<And>l s.\n       \\<lbrakk>I2 l s; s ''g'' < s ''b''\\<rbrakk>\n       \\<Longrightarrow> S2 s =\n                         S2 (s(''y'' := s ''y'' + 1, ''g'' := s ''g'' + 1))\n 5. \\<And>l s.\n       \\<lbrakk>I2 l s; \\<not> s ''g'' < s ''b''\\<rbrakk>\n       \\<Longrightarrow> I1 l (s(''z'' := s ''z'' + 1))\n 6. \\<And>l s.\n       \\<lbrakk>I2 l s; \\<not> s ''g'' < s ''b''\\<rbrakk>\n       \\<Longrightarrow> Suc 0 \\<le> E2 s\n 7. \\<And>l s.\n       \\<lbrakk>I2 l s; \\<not> s ''g'' < s ''b''\\<rbrakk>\n       \\<Longrightarrow> S2 s = s", "then"], ["proof (chain)\npicking this:\n  I1 l s\n  \\<not> s ''z'' < s ''a''", "show ?case"], ["proof (prove)\nusing this:\n  I1 l s\n  \\<not> s ''z'' < s ''a''\n\ngoal (1 subgoal):\n 1. S1 s = s", "unfolding I1 S1"], ["proof (prove)\nusing this:\n  0 \\<le> s ''a'' \\<and>\n  0 \\<le> s ''b'' \\<and>\n  s ''z'' \\<le> s ''a'' \\<and>\n  0 \\<le> s ''z'' \\<and> s ''y'' = s ''z'' * s ''b''\n  \\<not> s ''z'' < s ''a''\n\ngoal (1 subgoal):\n 1. (if s ''a'' \\<le> s ''z'' then s\n     else s(''y'' := s ''a'' * s ''b'', ''z'' := s ''a'',\n            ''g'' := s ''b'')) =\n    s", "by(simp)"], ["proof (state)\nthis:\n  S1 s = s\n\ngoal (6 subgoals):\n 1. \\<And>l s.\n       \\<lbrakk>I2 l s; s ''g'' < s ''b''\\<rbrakk>\n       \\<Longrightarrow> I2 l\n                          (s(''y'' := s ''y'' + 1, ''g'' := s ''g'' + 1))\n 2. \\<And>l s.\n       \\<lbrakk>I2 l s; s ''g'' < s ''b''\\<rbrakk>\n       \\<Longrightarrow> Suc (Suc (Suc (E2\n   (s(''y'' := s ''y'' + 1, ''g'' := s ''g'' + 1)))))\n                         \\<le> E2 s\n 3. \\<And>l s.\n       \\<lbrakk>I2 l s; s ''g'' < s ''b''\\<rbrakk>\n       \\<Longrightarrow> S2 s =\n                         S2 (s(''y'' := s ''y'' + 1, ''g'' := s ''g'' + 1))\n 4. \\<And>l s.\n       \\<lbrakk>I2 l s; \\<not> s ''g'' < s ''b''\\<rbrakk>\n       \\<Longrightarrow> I1 l (s(''z'' := s ''z'' + 1))\n 5. \\<And>l s.\n       \\<lbrakk>I2 l s; \\<not> s ''g'' < s ''b''\\<rbrakk>\n       \\<Longrightarrow> Suc 0 \\<le> E2 s\n 6. \\<And>l s.\n       \\<lbrakk>I2 l s; \\<not> s ''g'' < s ''b''\\<rbrakk>\n       \\<Longrightarrow> S2 s = s", "next"], ["proof (state)\ngoal (6 subgoals):\n 1. \\<And>l s.\n       \\<lbrakk>I2 l s; s ''g'' < s ''b''\\<rbrakk>\n       \\<Longrightarrow> I2 l\n                          (s(''y'' := s ''y'' + 1, ''g'' := s ''g'' + 1))\n 2. \\<And>l s.\n       \\<lbrakk>I2 l s; s ''g'' < s ''b''\\<rbrakk>\n       \\<Longrightarrow> Suc (Suc (Suc (E2\n   (s(''y'' := s ''y'' + 1, ''g'' := s ''g'' + 1)))))\n                         \\<le> E2 s\n 3. \\<And>l s.\n       \\<lbrakk>I2 l s; s ''g'' < s ''b''\\<rbrakk>\n       \\<Longrightarrow> S2 s =\n                         S2 (s(''y'' := s ''y'' + 1, ''g'' := s ''g'' + 1))\n 4. \\<And>l s.\n       \\<lbrakk>I2 l s; \\<not> s ''g'' < s ''b''\\<rbrakk>\n       \\<Longrightarrow> I1 l (s(''z'' := s ''z'' + 1))\n 5. \\<And>l s.\n       \\<lbrakk>I2 l s; \\<not> s ''g'' < s ''b''\\<rbrakk>\n       \\<Longrightarrow> Suc 0 \\<le> E2 s\n 6. \\<And>l s.\n       \\<lbrakk>I2 l s; \\<not> s ''g'' < s ''b''\\<rbrakk>\n       \\<Longrightarrow> S2 s = s", "case (7 l s)"], ["proof (state)\nthis:\n  I2 l s\n  s ''g'' < s ''b''\n\ngoal (6 subgoals):\n 1. \\<And>l s.\n       \\<lbrakk>I2 l s; s ''g'' < s ''b''\\<rbrakk>\n       \\<Longrightarrow> I2 l\n                          (s(''y'' := s ''y'' + 1, ''g'' := s ''g'' + 1))\n 2. \\<And>l s.\n       \\<lbrakk>I2 l s; s ''g'' < s ''b''\\<rbrakk>\n       \\<Longrightarrow> Suc (Suc (Suc (E2\n   (s(''y'' := s ''y'' + 1, ''g'' := s ''g'' + 1)))))\n                         \\<le> E2 s\n 3. \\<And>l s.\n       \\<lbrakk>I2 l s; s ''g'' < s ''b''\\<rbrakk>\n       \\<Longrightarrow> S2 s =\n                         S2 (s(''y'' := s ''y'' + 1, ''g'' := s ''g'' + 1))\n 4. \\<And>l s.\n       \\<lbrakk>I2 l s; \\<not> s ''g'' < s ''b''\\<rbrakk>\n       \\<Longrightarrow> I1 l (s(''z'' := s ''z'' + 1))\n 5. \\<And>l s.\n       \\<lbrakk>I2 l s; \\<not> s ''g'' < s ''b''\\<rbrakk>\n       \\<Longrightarrow> Suc 0 \\<le> E2 s\n 6. \\<And>l s.\n       \\<lbrakk>I2 l s; \\<not> s ''g'' < s ''b''\\<rbrakk>\n       \\<Longrightarrow> S2 s = s", "(* inner loop: invariant for >0 implies loop guard *)"], ["proof (state)\nthis:\n  I2 l s\n  s ''g'' < s ''b''\n\ngoal (6 subgoals):\n 1. \\<And>l s.\n       \\<lbrakk>I2 l s; s ''g'' < s ''b''\\<rbrakk>\n       \\<Longrightarrow> I2 l\n                          (s(''y'' := s ''y'' + 1, ''g'' := s ''g'' + 1))\n 2. \\<And>l s.\n       \\<lbrakk>I2 l s; s ''g'' < s ''b''\\<rbrakk>\n       \\<Longrightarrow> Suc (Suc (Suc (E2\n   (s(''y'' := s ''y'' + 1, ''g'' := s ''g'' + 1)))))\n                         \\<le> E2 s\n 3. \\<And>l s.\n       \\<lbrakk>I2 l s; s ''g'' < s ''b''\\<rbrakk>\n       \\<Longrightarrow> S2 s =\n                         S2 (s(''y'' := s ''y'' + 1, ''g'' := s ''g'' + 1))\n 4. \\<And>l s.\n       \\<lbrakk>I2 l s; \\<not> s ''g'' < s ''b''\\<rbrakk>\n       \\<Longrightarrow> I1 l (s(''z'' := s ''z'' + 1))\n 5. \\<And>l s.\n       \\<lbrakk>I2 l s; \\<not> s ''g'' < s ''b''\\<rbrakk>\n       \\<Longrightarrow> Suc 0 \\<le> E2 s\n 6. \\<And>l s.\n       \\<lbrakk>I2 l s; \\<not> s ''g'' < s ''b''\\<rbrakk>\n       \\<Longrightarrow> S2 s = s", "then"], ["proof (chain)\npicking this:\n  I2 l s\n  s ''g'' < s ''b''", "show ?case"], ["proof (prove)\nusing this:\n  I2 l s\n  s ''g'' < s ''b''\n\ngoal (1 subgoal):\n 1. I2 l (s(''y'' := s ''y'' + 1, ''g'' := s ''g'' + 1))", "unfolding I2"], ["proof (prove)\nusing this:\n  0 \\<le> s ''a'' \\<and>\n  0 \\<le> s ''b'' \\<and>\n  s ''z'' < s ''a'' \\<and>\n  0 \\<le> s ''z'' \\<and>\n  s ''g'' \\<le> s ''b'' \\<and>\n  0 \\<le> s ''g'' \\<and> s ''y'' = s ''z'' * s ''b'' + s ''g''\n  s ''g'' < s ''b''\n\ngoal (1 subgoal):\n 1. 0 \\<le> (s(''y'' := s ''y'' + 1, ''g'' := s ''g'' + 1)) ''a'' \\<and>\n    0 \\<le> (s(''y'' := s ''y'' + 1, ''g'' := s ''g'' + 1)) ''b'' \\<and>\n    (s(''y'' := s ''y'' + 1, ''g'' := s ''g'' + 1)) ''z''\n    < (s(''y'' := s ''y'' + 1, ''g'' := s ''g'' + 1)) ''a'' \\<and>\n    0 \\<le> (s(''y'' := s ''y'' + 1, ''g'' := s ''g'' + 1)) ''z'' \\<and>\n    (s(''y'' := s ''y'' + 1, ''g'' := s ''g'' + 1)) ''g''\n    \\<le> (s(''y'' := s ''y'' + 1, ''g'' := s ''g'' + 1)) ''b'' \\<and>\n    0 \\<le> (s(''y'' := s ''y'' + 1, ''g'' := s ''g'' + 1)) ''g'' \\<and>\n    (s(''y'' := s ''y'' + 1, ''g'' := s ''g'' + 1)) ''y'' =\n    (s(''y'' := s ''y'' + 1, ''g'' := s ''g'' + 1)) ''z'' *\n    (s(''y'' := s ''y'' + 1, ''g'' := s ''g'' + 1)) ''b'' +\n    (s(''y'' := s ''y'' + 1, ''g'' := s ''g'' + 1)) ''g''", "apply(simp)"], ["proof (prove)\ngoal:\nNo subgoals!", "done"], ["proof (state)\nthis:\n  I2 l (s(''y'' := s ''y'' + 1, ''g'' := s ''g'' + 1))\n\ngoal (5 subgoals):\n 1. \\<And>l s.\n       \\<lbrakk>I2 l s; s ''g'' < s ''b''\\<rbrakk>\n       \\<Longrightarrow> Suc (Suc (Suc (E2\n   (s(''y'' := s ''y'' + 1, ''g'' := s ''g'' + 1)))))\n                         \\<le> E2 s\n 2. \\<And>l s.\n       \\<lbrakk>I2 l s; s ''g'' < s ''b''\\<rbrakk>\n       \\<Longrightarrow> S2 s =\n                         S2 (s(''y'' := s ''y'' + 1, ''g'' := s ''g'' + 1))\n 3. \\<And>l s.\n       \\<lbrakk>I2 l s; \\<not> s ''g'' < s ''b''\\<rbrakk>\n       \\<Longrightarrow> I1 l (s(''z'' := s ''z'' + 1))\n 4. \\<And>l s.\n       \\<lbrakk>I2 l s; \\<not> s ''g'' < s ''b''\\<rbrakk>\n       \\<Longrightarrow> Suc 0 \\<le> E2 s\n 5. \\<And>l s.\n       \\<lbrakk>I2 l s; \\<not> s ''g'' < s ''b''\\<rbrakk>\n       \\<Longrightarrow> S2 s = s", "next"], ["proof (state)\ngoal (5 subgoals):\n 1. \\<And>l s.\n       \\<lbrakk>I2 l s; s ''g'' < s ''b''\\<rbrakk>\n       \\<Longrightarrow> Suc (Suc (Suc (E2\n   (s(''y'' := s ''y'' + 1, ''g'' := s ''g'' + 1)))))\n                         \\<le> E2 s\n 2. \\<And>l s.\n       \\<lbrakk>I2 l s; s ''g'' < s ''b''\\<rbrakk>\n       \\<Longrightarrow> S2 s =\n                         S2 (s(''y'' := s ''y'' + 1, ''g'' := s ''g'' + 1))\n 3. \\<And>l s.\n       \\<lbrakk>I2 l s; \\<not> s ''g'' < s ''b''\\<rbrakk>\n       \\<Longrightarrow> I1 l (s(''z'' := s ''z'' + 1))\n 4. \\<And>l s.\n       \\<lbrakk>I2 l s; \\<not> s ''g'' < s ''b''\\<rbrakk>\n       \\<Longrightarrow> Suc 0 \\<le> E2 s\n 5. \\<And>l s.\n       \\<lbrakk>I2 l s; \\<not> s ''g'' < s ''b''\\<rbrakk>\n       \\<Longrightarrow> S2 s = s", "case (8 l s)"], ["proof (state)\nthis:\n  I2 l s\n  s ''g'' < s ''b''\n\ngoal (5 subgoals):\n 1. \\<And>l s.\n       \\<lbrakk>I2 l s; s ''g'' < s ''b''\\<rbrakk>\n       \\<Longrightarrow> Suc (Suc (Suc (E2\n   (s(''y'' := s ''y'' + 1, ''g'' := s ''g'' + 1)))))\n                         \\<le> E2 s\n 2. \\<And>l s.\n       \\<lbrakk>I2 l s; s ''g'' < s ''b''\\<rbrakk>\n       \\<Longrightarrow> S2 s =\n                         S2 (s(''y'' := s ''y'' + 1, ''g'' := s ''g'' + 1))\n 3. \\<And>l s.\n       \\<lbrakk>I2 l s; \\<not> s ''g'' < s ''b''\\<rbrakk>\n       \\<Longrightarrow> I1 l (s(''z'' := s ''z'' + 1))\n 4. \\<And>l s.\n       \\<lbrakk>I2 l s; \\<not> s ''g'' < s ''b''\\<rbrakk>\n       \\<Longrightarrow> Suc 0 \\<le> E2 s\n 5. \\<And>l s.\n       \\<lbrakk>I2 l s; \\<not> s ''g'' < s ''b''\\<rbrakk>\n       \\<Longrightarrow> S2 s = s", "(* inner loop:  E1 is correct *)"], ["proof (state)\nthis:\n  I2 l s\n  s ''g'' < s ''b''\n\ngoal (5 subgoals):\n 1. \\<And>l s.\n       \\<lbrakk>I2 l s; s ''g'' < s ''b''\\<rbrakk>\n       \\<Longrightarrow> Suc (Suc (Suc (E2\n   (s(''y'' := s ''y'' + 1, ''g'' := s ''g'' + 1)))))\n                         \\<le> E2 s\n 2. \\<And>l s.\n       \\<lbrakk>I2 l s; s ''g'' < s ''b''\\<rbrakk>\n       \\<Longrightarrow> S2 s =\n                         S2 (s(''y'' := s ''y'' + 1, ''g'' := s ''g'' + 1))\n 3. \\<And>l s.\n       \\<lbrakk>I2 l s; \\<not> s ''g'' < s ''b''\\<rbrakk>\n       \\<Longrightarrow> I1 l (s(''z'' := s ''z'' + 1))\n 4. \\<And>l s.\n       \\<lbrakk>I2 l s; \\<not> s ''g'' < s ''b''\\<rbrakk>\n       \\<Longrightarrow> Suc 0 \\<le> E2 s\n 5. \\<And>l s.\n       \\<lbrakk>I2 l s; \\<not> s ''g'' < s ''b''\\<rbrakk>\n       \\<Longrightarrow> S2 s = s", "then"], ["proof (chain)\npicking this:\n  I2 l s\n  s ''g'' < s ''b''", "show ?case"], ["proof (prove)\nusing this:\n  I2 l s\n  s ''g'' < s ''b''\n\ngoal (1 subgoal):\n 1. Suc (Suc (Suc (E2 (s(''y'' := s ''y'' + 1, ''g'' := s ''g'' + 1)))))\n    \\<le> E2 s", "unfolding I2"], ["proof (prove)\nusing this:\n  0 \\<le> s ''a'' \\<and>\n  0 \\<le> s ''b'' \\<and>\n  s ''z'' < s ''a'' \\<and>\n  0 \\<le> s ''z'' \\<and>\n  s ''g'' \\<le> s ''b'' \\<and>\n  0 \\<le> s ''g'' \\<and> s ''y'' = s ''z'' * s ''b'' + s ''g''\n  s ''g'' < s ''b''\n\ngoal (1 subgoal):\n 1. Suc (Suc (Suc (E2 (s(''y'' := s ''y'' + 1, ''g'' := s ''g'' + 1)))))\n    \\<le> E2 s", "apply(auto)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>s ''g'' < s ''b''; s ''z'' < s ''a''; 0 \\<le> s ''z'';\n     0 \\<le> s ''g''; s ''y'' = s ''z'' * s ''b'' + s ''g''\\<rbrakk>\n    \\<Longrightarrow> Suc (Suc (Suc (E2\n(s(''y'' := s ''z'' * s ''b'' + s ''g'' + 1, ''g'' := s ''g'' + 1)))))\n                      \\<le> E2 s", "unfolding  E2"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>s ''g'' < s ''b''; s ''z'' < s ''a''; 0 \\<le> s ''z'';\n     0 \\<le> s ''g''; s ''y'' = s ''z'' * s ''b'' + s ''g''\\<rbrakk>\n    \\<Longrightarrow> Suc (Suc (Suc (1 +\n                                     3 *\n                                     (nat\n ((s(''y'' := s ''z'' * s ''b'' + s ''g'' + 1, ''g'' := s ''g'' + 1))\n   ''b'') -\nnat ((s(''y'' := s ''z'' * s ''b'' + s ''g'' + 1, ''g'' := s ''g'' + 1))\n      ''g'')))))\n                      \\<le> 1 + 3 * (nat (s ''b'') - nat (s ''g''))", "by(auto)"], ["proof (state)\nthis:\n  Suc (Suc (Suc (E2 (s(''y'' := s ''y'' + 1, ''g'' := s ''g'' + 1)))))\n  \\<le> E2 s\n\ngoal (4 subgoals):\n 1. \\<And>l s.\n       \\<lbrakk>I2 l s; s ''g'' < s ''b''\\<rbrakk>\n       \\<Longrightarrow> S2 s =\n                         S2 (s(''y'' := s ''y'' + 1, ''g'' := s ''g'' + 1))\n 2. \\<And>l s.\n       \\<lbrakk>I2 l s; \\<not> s ''g'' < s ''b''\\<rbrakk>\n       \\<Longrightarrow> I1 l (s(''z'' := s ''z'' + 1))\n 3. \\<And>l s.\n       \\<lbrakk>I2 l s; \\<not> s ''g'' < s ''b''\\<rbrakk>\n       \\<Longrightarrow> Suc 0 \\<le> E2 s\n 4. \\<And>l s.\n       \\<lbrakk>I2 l s; \\<not> s ''g'' < s ''b''\\<rbrakk>\n       \\<Longrightarrow> S2 s = s", "next"], ["proof (state)\ngoal (4 subgoals):\n 1. \\<And>l s.\n       \\<lbrakk>I2 l s; s ''g'' < s ''b''\\<rbrakk>\n       \\<Longrightarrow> S2 s =\n                         S2 (s(''y'' := s ''y'' + 1, ''g'' := s ''g'' + 1))\n 2. \\<And>l s.\n       \\<lbrakk>I2 l s; \\<not> s ''g'' < s ''b''\\<rbrakk>\n       \\<Longrightarrow> I1 l (s(''z'' := s ''z'' + 1))\n 3. \\<And>l s.\n       \\<lbrakk>I2 l s; \\<not> s ''g'' < s ''b''\\<rbrakk>\n       \\<Longrightarrow> Suc 0 \\<le> E2 s\n 4. \\<And>l s.\n       \\<lbrakk>I2 l s; \\<not> s ''g'' < s ''b''\\<rbrakk>\n       \\<Longrightarrow> S2 s = s", "case (9 l s)"], ["proof (state)\nthis:\n  I2 l s\n  s ''g'' < s ''b''\n\ngoal (4 subgoals):\n 1. \\<And>l s.\n       \\<lbrakk>I2 l s; s ''g'' < s ''b''\\<rbrakk>\n       \\<Longrightarrow> S2 s =\n                         S2 (s(''y'' := s ''y'' + 1, ''g'' := s ''g'' + 1))\n 2. \\<And>l s.\n       \\<lbrakk>I2 l s; \\<not> s ''g'' < s ''b''\\<rbrakk>\n       \\<Longrightarrow> I1 l (s(''z'' := s ''z'' + 1))\n 3. \\<And>l s.\n       \\<lbrakk>I2 l s; \\<not> s ''g'' < s ''b''\\<rbrakk>\n       \\<Longrightarrow> Suc 0 \\<le> E2 s\n 4. \\<And>l s.\n       \\<lbrakk>I2 l s; \\<not> s ''g'' < s ''b''\\<rbrakk>\n       \\<Longrightarrow> S2 s = s", "(* inner loop: S is preserved *)"], ["proof (state)\nthis:\n  I2 l s\n  s ''g'' < s ''b''\n\ngoal (4 subgoals):\n 1. \\<And>l s.\n       \\<lbrakk>I2 l s; s ''g'' < s ''b''\\<rbrakk>\n       \\<Longrightarrow> S2 s =\n                         S2 (s(''y'' := s ''y'' + 1, ''g'' := s ''g'' + 1))\n 2. \\<And>l s.\n       \\<lbrakk>I2 l s; \\<not> s ''g'' < s ''b''\\<rbrakk>\n       \\<Longrightarrow> I1 l (s(''z'' := s ''z'' + 1))\n 3. \\<And>l s.\n       \\<lbrakk>I2 l s; \\<not> s ''g'' < s ''b''\\<rbrakk>\n       \\<Longrightarrow> Suc 0 \\<le> E2 s\n 4. \\<And>l s.\n       \\<lbrakk>I2 l s; \\<not> s ''g'' < s ''b''\\<rbrakk>\n       \\<Longrightarrow> S2 s = s", "{"], ["proof (state)\nthis:\n  I2 l s\n  s ''g'' < s ''b''\n\ngoal (4 subgoals):\n 1. \\<And>l s.\n       \\<lbrakk>I2 l s; s ''g'' < s ''b''\\<rbrakk>\n       \\<Longrightarrow> S2 s =\n                         S2 (s(''y'' := s ''y'' + 1, ''g'' := s ''g'' + 1))\n 2. \\<And>l s.\n       \\<lbrakk>I2 l s; \\<not> s ''g'' < s ''b''\\<rbrakk>\n       \\<Longrightarrow> I1 l (s(''z'' := s ''z'' + 1))\n 3. \\<And>l s.\n       \\<lbrakk>I2 l s; \\<not> s ''g'' < s ''b''\\<rbrakk>\n       \\<Longrightarrow> Suc 0 \\<le> E2 s\n 4. \\<And>l s.\n       \\<lbrakk>I2 l s; \\<not> s ''g'' < s ''b''\\<rbrakk>\n       \\<Longrightarrow> S2 s = s", "fix i :: int"], ["proof (state)\ngoal (4 subgoals):\n 1. \\<And>l s.\n       \\<lbrakk>I2 l s; s ''g'' < s ''b''\\<rbrakk>\n       \\<Longrightarrow> S2 s =\n                         S2 (s(''y'' := s ''y'' + 1, ''g'' := s ''g'' + 1))\n 2. \\<And>l s.\n       \\<lbrakk>I2 l s; \\<not> s ''g'' < s ''b''\\<rbrakk>\n       \\<Longrightarrow> I1 l (s(''z'' := s ''z'' + 1))\n 3. \\<And>l s.\n       \\<lbrakk>I2 l s; \\<not> s ''g'' < s ''b''\\<rbrakk>\n       \\<Longrightarrow> Suc 0 \\<le> E2 s\n 4. \\<And>l s.\n       \\<lbrakk>I2 l s; \\<not> s ''g'' < s ''b''\\<rbrakk>\n       \\<Longrightarrow> S2 s = s", "assume \"0 \\<le> i\""], ["proof (state)\nthis:\n  0 \\<le> i\n\ngoal (4 subgoals):\n 1. \\<And>l s.\n       \\<lbrakk>I2 l s; s ''g'' < s ''b''\\<rbrakk>\n       \\<Longrightarrow> S2 s =\n                         S2 (s(''y'' := s ''y'' + 1, ''g'' := s ''g'' + 1))\n 2. \\<And>l s.\n       \\<lbrakk>I2 l s; \\<not> s ''g'' < s ''b''\\<rbrakk>\n       \\<Longrightarrow> I1 l (s(''z'' := s ''z'' + 1))\n 3. \\<And>l s.\n       \\<lbrakk>I2 l s; \\<not> s ''g'' < s ''b''\\<rbrakk>\n       \\<Longrightarrow> Suc 0 \\<le> E2 s\n 4. \\<And>l s.\n       \\<lbrakk>I2 l s; \\<not> s ''g'' < s ''b''\\<rbrakk>\n       \\<Longrightarrow> S2 s = s", "then"], ["proof (chain)\npicking this:\n  0 \\<le> i", "have \"int (\\<Sum>{0..<nat i}) + i = int (\\<Sum>{0..nat i})\""], ["proof (prove)\nusing this:\n  0 \\<le> i\n\ngoal (1 subgoal):\n 1. int (\\<Sum> {0..<nat i}) + i = int (\\<Sum> {0..nat i})", "by (simp add: sum.last_plus)"], ["proof (state)\nthis:\n  int (\\<Sum> {0..<nat i}) + i = int (\\<Sum> {0..nat i})\n\ngoal (4 subgoals):\n 1. \\<And>l s.\n       \\<lbrakk>I2 l s; s ''g'' < s ''b''\\<rbrakk>\n       \\<Longrightarrow> S2 s =\n                         S2 (s(''y'' := s ''y'' + 1, ''g'' := s ''g'' + 1))\n 2. \\<And>l s.\n       \\<lbrakk>I2 l s; \\<not> s ''g'' < s ''b''\\<rbrakk>\n       \\<Longrightarrow> I1 l (s(''z'' := s ''z'' + 1))\n 3. \\<And>l s.\n       \\<lbrakk>I2 l s; \\<not> s ''g'' < s ''b''\\<rbrakk>\n       \\<Longrightarrow> Suc 0 \\<le> E2 s\n 4. \\<And>l s.\n       \\<lbrakk>I2 l s; \\<not> s ''g'' < s ''b''\\<rbrakk>\n       \\<Longrightarrow> S2 s = s", "}"], ["proof (state)\nthis:\n  0 \\<le> ?i2 \\<Longrightarrow>\n  int (\\<Sum> {0..<nat ?i2}) + ?i2 = int (\\<Sum> {0..nat ?i2})\n\ngoal (4 subgoals):\n 1. \\<And>l s.\n       \\<lbrakk>I2 l s; s ''g'' < s ''b''\\<rbrakk>\n       \\<Longrightarrow> S2 s =\n                         S2 (s(''y'' := s ''y'' + 1, ''g'' := s ''g'' + 1))\n 2. \\<And>l s.\n       \\<lbrakk>I2 l s; \\<not> s ''g'' < s ''b''\\<rbrakk>\n       \\<Longrightarrow> I1 l (s(''z'' := s ''z'' + 1))\n 3. \\<And>l s.\n       \\<lbrakk>I2 l s; \\<not> s ''g'' < s ''b''\\<rbrakk>\n       \\<Longrightarrow> Suc 0 \\<le> E2 s\n 4. \\<And>l s.\n       \\<lbrakk>I2 l s; \\<not> s ''g'' < s ''b''\\<rbrakk>\n       \\<Longrightarrow> S2 s = s", "note bla=this"], ["proof (state)\nthis:\n  0 \\<le> ?i2 \\<Longrightarrow>\n  int (\\<Sum> {0..<nat ?i2}) + ?i2 = int (\\<Sum> {0..nat ?i2})\n\ngoal (4 subgoals):\n 1. \\<And>l s.\n       \\<lbrakk>I2 l s; s ''g'' < s ''b''\\<rbrakk>\n       \\<Longrightarrow> S2 s =\n                         S2 (s(''y'' := s ''y'' + 1, ''g'' := s ''g'' + 1))\n 2. \\<And>l s.\n       \\<lbrakk>I2 l s; \\<not> s ''g'' < s ''b''\\<rbrakk>\n       \\<Longrightarrow> I1 l (s(''z'' := s ''z'' + 1))\n 3. \\<And>l s.\n       \\<lbrakk>I2 l s; \\<not> s ''g'' < s ''b''\\<rbrakk>\n       \\<Longrightarrow> Suc 0 \\<le> E2 s\n 4. \\<And>l s.\n       \\<lbrakk>I2 l s; \\<not> s ''g'' < s ''b''\\<rbrakk>\n       \\<Longrightarrow> S2 s = s", "from 9"], ["proof (chain)\npicking this:\n  I2 l s\n  s ''g'' < s ''b''", "show ?case"], ["proof (prove)\nusing this:\n  I2 l s\n  s ''g'' < s ''b''\n\ngoal (1 subgoal):\n 1. S2 s = S2 (s(''y'' := s ''y'' + 1, ''g'' := s ''g'' + 1))", "unfolding I2   S2"], ["proof (prove)\nusing this:\n  0 \\<le> s ''a'' \\<and>\n  0 \\<le> s ''b'' \\<and>\n  s ''z'' < s ''a'' \\<and>\n  0 \\<le> s ''z'' \\<and>\n  s ''g'' \\<le> s ''b'' \\<and>\n  0 \\<le> s ''g'' \\<and> s ''y'' = s ''z'' * s ''b'' + s ''g''\n  s ''g'' < s ''b''\n\ngoal (1 subgoal):\n 1. (if s ''b'' \\<le> s ''g'' then s\n     else s(''y'' := s ''z'' * s ''b'' + s ''b'', ''g'' := s ''b'')) =\n    (if (s(''y'' := s ''y'' + 1, ''g'' := s ''g'' + 1)) ''b''\n        \\<le> (s(''y'' := s ''y'' + 1, ''g'' := s ''g'' + 1)) ''g''\n     then s(''y'' := s ''y'' + 1, ''g'' := s ''g'' + 1)\n     else s(''y'' := s ''y'' + 1, ''g'' := s ''g'' + 1,\n            ''y'' :=\n              (s(''y'' := s ''y'' + 1, ''g'' := s ''g'' + 1)) ''z'' *\n              (s(''y'' := s ''y'' + 1, ''g'' := s ''g'' + 1)) ''b'' +\n              (s(''y'' := s ''y'' + 1, ''g'' := s ''g'' + 1)) ''b'',\n            ''g'' := (s(''y'' := s ''y'' + 1, ''g'' := s ''g'' + 1)) ''b''))", "apply(auto simp add:  )"], ["proof (prove)\ngoal:\nNo subgoals!", "done"], ["proof (state)\nthis:\n  S2 s = S2 (s(''y'' := s ''y'' + 1, ''g'' := s ''g'' + 1))\n\ngoal (3 subgoals):\n 1. \\<And>l s.\n       \\<lbrakk>I2 l s; \\<not> s ''g'' < s ''b''\\<rbrakk>\n       \\<Longrightarrow> I1 l (s(''z'' := s ''z'' + 1))\n 2. \\<And>l s.\n       \\<lbrakk>I2 l s; \\<not> s ''g'' < s ''b''\\<rbrakk>\n       \\<Longrightarrow> Suc 0 \\<le> E2 s\n 3. \\<And>l s.\n       \\<lbrakk>I2 l s; \\<not> s ''g'' < s ''b''\\<rbrakk>\n       \\<Longrightarrow> S2 s = s", "next"], ["proof (state)\ngoal (3 subgoals):\n 1. \\<And>l s.\n       \\<lbrakk>I2 l s; \\<not> s ''g'' < s ''b''\\<rbrakk>\n       \\<Longrightarrow> I1 l (s(''z'' := s ''z'' + 1))\n 2. \\<And>l s.\n       \\<lbrakk>I2 l s; \\<not> s ''g'' < s ''b''\\<rbrakk>\n       \\<Longrightarrow> Suc 0 \\<le> E2 s\n 3. \\<And>l s.\n       \\<lbrakk>I2 l s; \\<not> s ''g'' < s ''b''\\<rbrakk>\n       \\<Longrightarrow> S2 s = s", "case (10 l s)"], ["proof (state)\nthis:\n  I2 l s\n  \\<not> s ''g'' < s ''b''\n\ngoal (3 subgoals):\n 1. \\<And>l s.\n       \\<lbrakk>I2 l s; \\<not> s ''g'' < s ''b''\\<rbrakk>\n       \\<Longrightarrow> I1 l (s(''z'' := s ''z'' + 1))\n 2. \\<And>l s.\n       \\<lbrakk>I2 l s; \\<not> s ''g'' < s ''b''\\<rbrakk>\n       \\<Longrightarrow> Suc 0 \\<le> E2 s\n 3. \\<And>l s.\n       \\<lbrakk>I2 l s; \\<not> s ''g'' < s ''b''\\<rbrakk>\n       \\<Longrightarrow> S2 s = s", "(* inner loop: post condition is correct after exiting the loop *)"], ["proof (state)\nthis:\n  I2 l s\n  \\<not> s ''g'' < s ''b''\n\ngoal (3 subgoals):\n 1. \\<And>l s.\n       \\<lbrakk>I2 l s; \\<not> s ''g'' < s ''b''\\<rbrakk>\n       \\<Longrightarrow> I1 l (s(''z'' := s ''z'' + 1))\n 2. \\<And>l s.\n       \\<lbrakk>I2 l s; \\<not> s ''g'' < s ''b''\\<rbrakk>\n       \\<Longrightarrow> Suc 0 \\<le> E2 s\n 3. \\<And>l s.\n       \\<lbrakk>I2 l s; \\<not> s ''g'' < s ''b''\\<rbrakk>\n       \\<Longrightarrow> S2 s = s", "then"], ["proof (chain)\npicking this:\n  I2 l s\n  \\<not> s ''g'' < s ''b''", "show ?case"], ["proof (prove)\nusing this:\n  I2 l s\n  \\<not> s ''g'' < s ''b''\n\ngoal (1 subgoal):\n 1. I1 l (s(''z'' := s ''z'' + 1))", "unfolding I2 I1"], ["proof (prove)\nusing this:\n  0 \\<le> s ''a'' \\<and>\n  0 \\<le> s ''b'' \\<and>\n  s ''z'' < s ''a'' \\<and>\n  0 \\<le> s ''z'' \\<and>\n  s ''g'' \\<le> s ''b'' \\<and>\n  0 \\<le> s ''g'' \\<and> s ''y'' = s ''z'' * s ''b'' + s ''g''\n  \\<not> s ''g'' < s ''b''\n\ngoal (1 subgoal):\n 1. 0 \\<le> (s(''z'' := s ''z'' + 1)) ''a'' \\<and>\n    0 \\<le> (s(''z'' := s ''z'' + 1)) ''b'' \\<and>\n    (s(''z'' := s ''z'' + 1)) ''z''\n    \\<le> (s(''z'' := s ''z'' + 1)) ''a'' \\<and>\n    0 \\<le> (s(''z'' := s ''z'' + 1)) ''z'' \\<and>\n    (s(''z'' := s ''z'' + 1)) ''y'' =\n    (s(''z'' := s ''z'' + 1)) ''z'' * (s(''z'' := s ''z'' + 1)) ''b''", "by (auto simp add: distrib_left mult.commute)"], ["proof (state)\nthis:\n  I1 l (s(''z'' := s ''z'' + 1))\n\ngoal (2 subgoals):\n 1. \\<And>l s.\n       \\<lbrakk>I2 l s; \\<not> s ''g'' < s ''b''\\<rbrakk>\n       \\<Longrightarrow> Suc 0 \\<le> E2 s\n 2. \\<And>l s.\n       \\<lbrakk>I2 l s; \\<not> s ''g'' < s ''b''\\<rbrakk>\n       \\<Longrightarrow> S2 s = s", "next"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>l s.\n       \\<lbrakk>I2 l s; \\<not> s ''g'' < s ''b''\\<rbrakk>\n       \\<Longrightarrow> Suc 0 \\<le> E2 s\n 2. \\<And>l s.\n       \\<lbrakk>I2 l s; \\<not> s ''g'' < s ''b''\\<rbrakk>\n       \\<Longrightarrow> S2 s = s", "case (11 l s)"], ["proof (state)\nthis:\n  I2 l s\n  \\<not> s ''g'' < s ''b''\n\ngoal (2 subgoals):\n 1. \\<And>l s.\n       \\<lbrakk>I2 l s; \\<not> s ''g'' < s ''b''\\<rbrakk>\n       \\<Longrightarrow> Suc 0 \\<le> E2 s\n 2. \\<And>l s.\n       \\<lbrakk>I2 l s; \\<not> s ''g'' < s ''b''\\<rbrakk>\n       \\<Longrightarrow> S2 s = s", "(* inner loop: time expression is correct after exiting the loop *)"], ["proof (state)\nthis:\n  I2 l s\n  \\<not> s ''g'' < s ''b''\n\ngoal (2 subgoals):\n 1. \\<And>l s.\n       \\<lbrakk>I2 l s; \\<not> s ''g'' < s ''b''\\<rbrakk>\n       \\<Longrightarrow> Suc 0 \\<le> E2 s\n 2. \\<And>l s.\n       \\<lbrakk>I2 l s; \\<not> s ''g'' < s ''b''\\<rbrakk>\n       \\<Longrightarrow> S2 s = s", "then"], ["proof (chain)\npicking this:\n  I2 l s\n  \\<not> s ''g'' < s ''b''", "show ?case"], ["proof (prove)\nusing this:\n  I2 l s\n  \\<not> s ''g'' < s ''b''\n\ngoal (1 subgoal):\n 1. Suc 0 \\<le> E2 s", "unfolding I2 E2"], ["proof (prove)\nusing this:\n  0 \\<le> s ''a'' \\<and>\n  0 \\<le> s ''b'' \\<and>\n  s ''z'' < s ''a'' \\<and>\n  0 \\<le> s ''z'' \\<and>\n  s ''g'' \\<le> s ''b'' \\<and>\n  0 \\<le> s ''g'' \\<and> s ''y'' = s ''z'' * s ''b'' + s ''g''\n  \\<not> s ''g'' < s ''b''\n\ngoal (1 subgoal):\n 1. Suc 0 \\<le> 1 + 3 * (nat (s ''b'') - nat (s ''g''))", "by (simp)"], ["proof (state)\nthis:\n  Suc 0 \\<le> E2 s\n\ngoal (1 subgoal):\n 1. \\<And>l s.\n       \\<lbrakk>I2 l s; \\<not> s ''g'' < s ''b''\\<rbrakk>\n       \\<Longrightarrow> S2 s = s", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>l s.\n       \\<lbrakk>I2 l s; \\<not> s ''g'' < s ''b''\\<rbrakk>\n       \\<Longrightarrow> S2 s = s", "case (12 l s)"], ["proof (state)\nthis:\n  I2 l s\n  \\<not> s ''g'' < s ''b''\n\ngoal (1 subgoal):\n 1. \\<And>l s.\n       \\<lbrakk>I2 l s; \\<not> s ''g'' < s ''b''\\<rbrakk>\n       \\<Longrightarrow> S2 s = s", "(* inner loop: S correct if loop guard not fullfilled *)"], ["proof (state)\nthis:\n  I2 l s\n  \\<not> s ''g'' < s ''b''\n\ngoal (1 subgoal):\n 1. \\<And>l s.\n       \\<lbrakk>I2 l s; \\<not> s ''g'' < s ''b''\\<rbrakk>\n       \\<Longrightarrow> S2 s = s", "then"], ["proof (chain)\npicking this:\n  I2 l s\n  \\<not> s ''g'' < s ''b''", "show ?case"], ["proof (prove)\nusing this:\n  I2 l s\n  \\<not> s ''g'' < s ''b''\n\ngoal (1 subgoal):\n 1. S2 s = s", "unfolding I2 S2"], ["proof (prove)\nusing this:\n  0 \\<le> s ''a'' \\<and>\n  0 \\<le> s ''b'' \\<and>\n  s ''z'' < s ''a'' \\<and>\n  0 \\<le> s ''z'' \\<and>\n  s ''g'' \\<le> s ''b'' \\<and>\n  0 \\<le> s ''g'' \\<and> s ''y'' = s ''z'' * s ''b'' + s ''g''\n  \\<not> s ''g'' < s ''b''\n\ngoal (1 subgoal):\n 1. (if s ''b'' \\<le> s ''g'' then s\n     else s(''y'' := s ''z'' * s ''b'' + s ''b'', ''g'' := s ''b'')) =\n    s", "by(simp)"], ["proof (state)\nthis:\n  S2 s = s\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  vc (''y'' ::= N 0;; ''z'' ::= N 0;;\n      {(I1, S1, E1)} WHILE Less (V ''z'') (V ''a'')\n      DO (''g'' ::= N 0;;\n          {(I2, S2, E2)} WHILE Less (V ''g'') (V ''b'')\n          DO (''y'' ::= Plus (V ''y'') (N 1);;\n              ''g'' ::= Plus (V ''g'') (N 1));;\n          ''z'' ::= Plus (V ''z'') (N 1)))\n   (\\<lambda>l s. s ''y'' = s ''a'' * s ''b'')\n\ngoal (3 subgoals):\n 1. \\<exists>k>0.\n       \\<forall>l s.\n          0 \\<le> s ''a'' \\<and> 0 \\<le> s ''b'' \\<longrightarrow>\n          pre (''y'' ::= N 0;; ''z'' ::= N 0;;\n               {(I1, S1, E1)} WHILE Less (V ''z'') (V ''a'')\n               DO (''g'' ::= N 0;;\n                   {(I2, S2, E2)} WHILE Less (V ''g'') (V ''b'')\n                   DO (''y'' ::= Plus (V ''y'') (N 1);;\n                       ''g'' ::= Plus (V ''g'') (N 1));;\n                   ''z'' ::= Plus (V ''z'') (N 1)))\n           (\\<lambda>l s. s ''y'' = s ''a'' * s ''b'') l s \\<and>\n          time\n           (''y'' ::= N 0;; ''z'' ::= N 0;;\n            {(I1, S1, E1)} WHILE Less (V ''z'') (V ''a'')\n            DO (''g'' ::= N 0;;\n                {(I2, S2, E2)} WHILE Less (V ''g'') (V ''b'')\n                DO (''y'' ::= Plus (V ''y'') (N 1);;\n                    ''g'' ::= Plus (V ''g'') (N 1));;\n                ''z'' ::= Plus (V ''z'') (N 1)))\n           s\n          \\<le> k * f s\n 2. finite (support (\\<lambda>l s. s ''y'' = s ''a'' * s ''b''))\n 3. finite\n     (varacom\n       (''y'' ::= N 0;; ''z'' ::= N 0;;\n        {(I1, S1, E1)} WHILE Less (V ''z'') (V ''a'')\n        DO (''g'' ::= N 0;;\n            {(I2, S2, E2)} WHILE Less (V ''g'') (V ''b'')\n            DO (''y'' ::= Plus (V ''y'') (N 1);;\n                ''g'' ::= Plus (V ''g'') (N 1));;\n            ''z'' ::= Plus (V ''z'') (N 1))))", "next"], ["proof (state)\ngoal (3 subgoals):\n 1. \\<exists>k>0.\n       \\<forall>l s.\n          0 \\<le> s ''a'' \\<and> 0 \\<le> s ''b'' \\<longrightarrow>\n          pre (''y'' ::= N 0;; ''z'' ::= N 0;;\n               {(I1, S1, E1)} WHILE Less (V ''z'') (V ''a'')\n               DO (''g'' ::= N 0;;\n                   {(I2, S2, E2)} WHILE Less (V ''g'') (V ''b'')\n                   DO (''y'' ::= Plus (V ''y'') (N 1);;\n                       ''g'' ::= Plus (V ''g'') (N 1));;\n                   ''z'' ::= Plus (V ''z'') (N 1)))\n           (\\<lambda>l s. s ''y'' = s ''a'' * s ''b'') l s \\<and>\n          time\n           (''y'' ::= N 0;; ''z'' ::= N 0;;\n            {(I1, S1, E1)} WHILE Less (V ''z'') (V ''a'')\n            DO (''g'' ::= N 0;;\n                {(I2, S2, E2)} WHILE Less (V ''g'') (V ''b'')\n                DO (''y'' ::= Plus (V ''y'') (N 1);;\n                    ''g'' ::= Plus (V ''g'') (N 1));;\n                ''z'' ::= Plus (V ''z'') (N 1)))\n           s\n          \\<le> k * f s\n 2. finite (support (\\<lambda>l s. s ''y'' = s ''a'' * s ''b''))\n 3. finite\n     (varacom\n       (''y'' ::= N 0;; ''z'' ::= N 0;;\n        {(I1, S1, E1)} WHILE Less (V ''z'') (V ''a'')\n        DO (''g'' ::= N 0;;\n            {(I2, S2, E2)} WHILE Less (V ''g'') (V ''b'')\n            DO (''y'' ::= Plus (V ''y'') (N 1);;\n                ''g'' ::= Plus (V ''g'') (N 1));;\n            ''z'' ::= Plus (V ''z'') (N 1))))", "case 2"], ["proof (state)\nthis:\n  \n\ngoal (3 subgoals):\n 1. \\<exists>k>0.\n       \\<forall>l s.\n          0 \\<le> s ''a'' \\<and> 0 \\<le> s ''b'' \\<longrightarrow>\n          pre (''y'' ::= N 0;; ''z'' ::= N 0;;\n               {(I1, S1, E1)} WHILE Less (V ''z'') (V ''a'')\n               DO (''g'' ::= N 0;;\n                   {(I2, S2, E2)} WHILE Less (V ''g'') (V ''b'')\n                   DO (''y'' ::= Plus (V ''y'') (N 1);;\n                       ''g'' ::= Plus (V ''g'') (N 1));;\n                   ''z'' ::= Plus (V ''z'') (N 1)))\n           (\\<lambda>l s. s ''y'' = s ''a'' * s ''b'') l s \\<and>\n          time\n           (''y'' ::= N 0;; ''z'' ::= N 0;;\n            {(I1, S1, E1)} WHILE Less (V ''z'') (V ''a'')\n            DO (''g'' ::= N 0;;\n                {(I2, S2, E2)} WHILE Less (V ''g'') (V ''b'')\n                DO (''y'' ::= Plus (V ''y'') (N 1);;\n                    ''g'' ::= Plus (V ''g'') (N 1));;\n                ''z'' ::= Plus (V ''z'') (N 1)))\n           s\n          \\<le> k * f s\n 2. finite (support (\\<lambda>l s. s ''y'' = s ''a'' * s ''b''))\n 3. finite\n     (varacom\n       (''y'' ::= N 0;; ''z'' ::= N 0;;\n        {(I1, S1, E1)} WHILE Less (V ''z'') (V ''a'')\n        DO (''g'' ::= N 0;;\n            {(I2, S2, E2)} WHILE Less (V ''g'') (V ''b'')\n            DO (''y'' ::= Plus (V ''y'') (N 1);;\n                ''g'' ::= Plus (V ''g'') (N 1));;\n            ''z'' ::= Plus (V ''z'') (N 1))))", "show ?case"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>k>0.\n       \\<forall>l s.\n          0 \\<le> s ''a'' \\<and> 0 \\<le> s ''b'' \\<longrightarrow>\n          pre (''y'' ::= N 0;; ''z'' ::= N 0;;\n               {(I1, S1, E1)} WHILE Less (V ''z'') (V ''a'')\n               DO (''g'' ::= N 0;;\n                   {(I2, S2, E2)} WHILE Less (V ''g'') (V ''b'')\n                   DO (''y'' ::= Plus (V ''y'') (N 1);;\n                       ''g'' ::= Plus (V ''g'') (N 1));;\n                   ''z'' ::= Plus (V ''z'') (N 1)))\n           (\\<lambda>l s. s ''y'' = s ''a'' * s ''b'') l s \\<and>\n          time\n           (''y'' ::= N 0;; ''z'' ::= N 0;;\n            {(I1, S1, E1)} WHILE Less (V ''z'') (V ''a'')\n            DO (''g'' ::= N 0;;\n                {(I2, S2, E2)} WHILE Less (V ''g'') (V ''b'')\n                DO (''y'' ::= Plus (V ''y'') (N 1);;\n                    ''g'' ::= Plus (V ''g'') (N 1));;\n                ''z'' ::= Plus (V ''z'') (N 1)))\n           s\n          \\<le> k * f s", "apply (rule exI[where x=1])"], ["proof (prove)\ngoal (1 subgoal):\n 1. 0 < 1 \\<and>\n    (\\<forall>l s.\n        0 \\<le> s ''a'' \\<and> 0 \\<le> s ''b'' \\<longrightarrow>\n        pre (''y'' ::= N 0;; ''z'' ::= N 0;;\n             {(I1, S1, E1)} WHILE Less (V ''z'') (V ''a'')\n             DO (''g'' ::= N 0;;\n                 {(I2, S2, E2)} WHILE Less (V ''g'') (V ''b'')\n                 DO (''y'' ::= Plus (V ''y'') (N 1);;\n                     ''g'' ::= Plus (V ''g'') (N 1));;\n                 ''z'' ::= Plus (V ''z'') (N 1)))\n         (\\<lambda>l s. s ''y'' = s ''a'' * s ''b'') l s \\<and>\n        time\n         (''y'' ::= N 0;; ''z'' ::= N 0;;\n          {(I1, S1, E1)} WHILE Less (V ''z'') (V ''a'')\n          DO (''g'' ::= N 0;;\n              {(I2, S2, E2)} WHILE Less (V ''g'') (V ''b'')\n              DO (''y'' ::= Plus (V ''y'') (N 1);;\n                  ''g'' ::= Plus (V ''g'') (N 1));;\n              ''z'' ::= Plus (V ''z'') (N 1)))\n         s\n        \\<le> 1 * f s)", "by (auto simp add: I1 C E1 f distrib_left mult.commute)"], ["proof (state)\nthis:\n  \\<exists>k>0.\n     \\<forall>l s.\n        0 \\<le> s ''a'' \\<and> 0 \\<le> s ''b'' \\<longrightarrow>\n        pre (''y'' ::= N 0;; ''z'' ::= N 0;;\n             {(I1, S1, E1)} WHILE Less (V ''z'') (V ''a'')\n             DO (''g'' ::= N 0;;\n                 {(I2, S2, E2)} WHILE Less (V ''g'') (V ''b'')\n                 DO (''y'' ::= Plus (V ''y'') (N 1);;\n                     ''g'' ::= Plus (V ''g'') (N 1));;\n                 ''z'' ::= Plus (V ''z'') (N 1)))\n         (\\<lambda>l s. s ''y'' = s ''a'' * s ''b'') l s \\<and>\n        time\n         (''y'' ::= N 0;; ''z'' ::= N 0;;\n          {(I1, S1, E1)} WHILE Less (V ''z'') (V ''a'')\n          DO (''g'' ::= N 0;;\n              {(I2, S2, E2)} WHILE Less (V ''g'') (V ''b'')\n              DO (''y'' ::= Plus (V ''y'') (N 1);;\n                  ''g'' ::= Plus (V ''g'') (N 1));;\n              ''z'' ::= Plus (V ''z'') (N 1)))\n         s\n        \\<le> k * f s\n\ngoal (2 subgoals):\n 1. finite (support (\\<lambda>l s. s ''y'' = s ''a'' * s ''b''))\n 2. finite\n     (varacom\n       (''y'' ::= N 0;; ''z'' ::= N 0;;\n        {(I1, S1, E1)} WHILE Less (V ''z'') (V ''a'')\n        DO (''g'' ::= N 0;;\n            {(I2, S2, E2)} WHILE Less (V ''g'') (V ''b'')\n            DO (''y'' ::= Plus (V ''y'') (N 1);;\n                ''g'' ::= Plus (V ''g'') (N 1));;\n            ''z'' ::= Plus (V ''z'') (N 1))))", "qed (auto simp: I1 I2 support_single2)"], ["", "paragraph \"with logical variables\""], ["", "lemma fin_sup_single: \"finite (support (\\<lambda>l. P (l a)))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. finite (support (\\<lambda>l. P (l a)))", "apply(rule finite_subset[OF support_single])"], ["proof (prove)\ngoal (1 subgoal):\n 1. finite {a}", "by simp"], ["", "lemmas fin_support = fin_sup_single"], ["", "lemma finite_support_and: \"finite (support A) \\<Longrightarrow> finite (support B) \\<Longrightarrow> finite (support (\\<lambda>l s. A l s \\<and> B l s))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>finite (support A); finite (support B)\\<rbrakk>\n    \\<Longrightarrow> finite (support (\\<lambda>l s. A l s \\<and> B l s))", "apply(rule finite_subset[OF support_and])"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>finite (support A); finite (support B)\\<rbrakk>\n    \\<Longrightarrow> finite (support A \\<union> support B)", "by blast"], ["", "end"]]}