{"file_name": "/home/qj213/afp-2021-10-22/thys/Hoare_Time/Quant_VCG.thy", "working_directory": "/home/qj213/afp-2021-10-22/thys/Hoare_Time", "problem_names": ["lemma vc_sound: \"vc C Q \\<Longrightarrow>  \\<turnstile>\\<^sub>2 {pre C Q} strip C { Q }\"", "lemma vc_sound': \"\\<lbrakk>vc C Q ; (\\<forall>s. pre C Q s \\<le> P s) \\<rbrakk> \\<Longrightarrow>  \\<turnstile>\\<^sub>2 {P} strip C { Q }\"", "lemma pre_mono: assumes \"\\<And>s. P' s \\<le> P s\" \n  shows \"\\<And>s. pre C P' s \\<le> pre C P s\"", "lemma vc_mono: assumes \"\\<And>s. P' s \\<le> P s\" \n  shows \"vc C P \\<Longrightarrow> vc C P'\"", "lemma \"\\<turnstile>\\<^sub>2 { P } c { Q } \\<Longrightarrow> \\<exists>C. strip C = c \\<and> vc C Q \\<and> (\\<forall>s. pre C Q s \\<le> P s)\"\n  (is \"_ \\<Longrightarrow>   \\<exists>C. ?G P c Q C\")"], "translations": [["", "lemma vc_sound: \"vc C Q \\<Longrightarrow>  \\<turnstile>\\<^sub>2 {pre C Q} strip C { Q }\""], ["proof (prove)\ngoal (1 subgoal):\n 1. vc C Q \\<Longrightarrow> \\<turnstile>\\<^sub>2 {pre C Q} strip C {Q}", "proof (induct C arbitrary: Q)"], ["proof (state)\ngoal (5 subgoals):\n 1. \\<And>Q.\n       vc SKIP Q \\<Longrightarrow>\n       \\<turnstile>\\<^sub>2 {pre SKIP Q} strip SKIP {Q}\n 2. \\<And>x1 x2 Q.\n       vc (x1 ::= x2) Q \\<Longrightarrow>\n       \\<turnstile>\\<^sub>2 {pre (x1 ::= x2) Q} strip (x1 ::= x2) {Q}\n 3. \\<And>C1 C2 Q.\n       \\<lbrakk>\\<And>Q.\n                   vc C1 Q \\<Longrightarrow>\n                   \\<turnstile>\\<^sub>2 {pre C1 Q} strip C1 {Q};\n        \\<And>Q.\n           vc C2 Q \\<Longrightarrow>\n           \\<turnstile>\\<^sub>2 {pre C2 Q} strip C2 {Q};\n        vc (C1;; C2) Q\\<rbrakk>\n       \\<Longrightarrow> \\<turnstile>\\<^sub>2 {pre (C1;; C2) Q}\n        strip (C1;; C2) {Q}\n 4. \\<And>x1 C1 C2 Q.\n       \\<lbrakk>\\<And>Q.\n                   vc C1 Q \\<Longrightarrow>\n                   \\<turnstile>\\<^sub>2 {pre C1 Q} strip C1 {Q};\n        \\<And>Q.\n           vc C2 Q \\<Longrightarrow>\n           \\<turnstile>\\<^sub>2 {pre C2 Q} strip C2 {Q};\n        vc (IF x1 THEN C1 ELSE C2) Q\\<rbrakk>\n       \\<Longrightarrow> \\<turnstile>\\<^sub>2 {pre (IF x1 THEN C1 ELSE C2)\n          Q}\n        strip (IF x1 THEN C1 ELSE C2) {Q}\n 5. \\<And>x1 x2 C Q.\n       \\<lbrakk>\\<And>Q.\n                   vc C Q \\<Longrightarrow>\n                   \\<turnstile>\\<^sub>2 {pre C Q} strip C {Q};\n        vc ({x1} WHILE x2 DO C) Q\\<rbrakk>\n       \\<Longrightarrow> \\<turnstile>\\<^sub>2 {pre ({x1} WHILE x2 DO C) Q}\n        strip ({x1} WHILE x2 DO C) {Q}", "case (Aif b C1 C2)"], ["proof (state)\nthis:\n  vc C1 ?Q \\<Longrightarrow> \\<turnstile>\\<^sub>2 {pre C1 ?Q} strip C1 {?Q}\n  vc C2 ?Q \\<Longrightarrow> \\<turnstile>\\<^sub>2 {pre C2 ?Q} strip C2 {?Q}\n  vc (IF b THEN C1 ELSE C2) Q\n\ngoal (5 subgoals):\n 1. \\<And>Q.\n       vc SKIP Q \\<Longrightarrow>\n       \\<turnstile>\\<^sub>2 {pre SKIP Q} strip SKIP {Q}\n 2. \\<And>x1 x2 Q.\n       vc (x1 ::= x2) Q \\<Longrightarrow>\n       \\<turnstile>\\<^sub>2 {pre (x1 ::= x2) Q} strip (x1 ::= x2) {Q}\n 3. \\<And>C1 C2 Q.\n       \\<lbrakk>\\<And>Q.\n                   vc C1 Q \\<Longrightarrow>\n                   \\<turnstile>\\<^sub>2 {pre C1 Q} strip C1 {Q};\n        \\<And>Q.\n           vc C2 Q \\<Longrightarrow>\n           \\<turnstile>\\<^sub>2 {pre C2 Q} strip C2 {Q};\n        vc (C1;; C2) Q\\<rbrakk>\n       \\<Longrightarrow> \\<turnstile>\\<^sub>2 {pre (C1;; C2) Q}\n        strip (C1;; C2) {Q}\n 4. \\<And>x1 C1 C2 Q.\n       \\<lbrakk>\\<And>Q.\n                   vc C1 Q \\<Longrightarrow>\n                   \\<turnstile>\\<^sub>2 {pre C1 Q} strip C1 {Q};\n        \\<And>Q.\n           vc C2 Q \\<Longrightarrow>\n           \\<turnstile>\\<^sub>2 {pre C2 Q} strip C2 {Q};\n        vc (IF x1 THEN C1 ELSE C2) Q\\<rbrakk>\n       \\<Longrightarrow> \\<turnstile>\\<^sub>2 {pre (IF x1 THEN C1 ELSE C2)\n          Q}\n        strip (IF x1 THEN C1 ELSE C2) {Q}\n 5. \\<And>x1 x2 C Q.\n       \\<lbrakk>\\<And>Q.\n                   vc C Q \\<Longrightarrow>\n                   \\<turnstile>\\<^sub>2 {pre C Q} strip C {Q};\n        vc ({x1} WHILE x2 DO C) Q\\<rbrakk>\n       \\<Longrightarrow> \\<turnstile>\\<^sub>2 {pre ({x1} WHILE x2 DO C) Q}\n        strip ({x1} WHILE x2 DO C) {Q}", "then"], ["proof (chain)\npicking this:\n  vc C1 ?Q \\<Longrightarrow> \\<turnstile>\\<^sub>2 {pre C1 ?Q} strip C1 {?Q}\n  vc C2 ?Q \\<Longrightarrow> \\<turnstile>\\<^sub>2 {pre C2 ?Q} strip C2 {?Q}\n  vc (IF b THEN C1 ELSE C2) Q", "have Aif1: \"\\<turnstile>\\<^sub>2 {pre C1 Q} strip C1 {Q}\" and Aif2: \"\\<turnstile>\\<^sub>2 {pre C2 Q} strip C2 {Q}\""], ["proof (prove)\nusing this:\n  vc C1 ?Q \\<Longrightarrow> \\<turnstile>\\<^sub>2 {pre C1 ?Q} strip C1 {?Q}\n  vc C2 ?Q \\<Longrightarrow> \\<turnstile>\\<^sub>2 {pre C2 ?Q} strip C2 {?Q}\n  vc (IF b THEN C1 ELSE C2) Q\n\ngoal (1 subgoal):\n 1. \\<turnstile>\\<^sub>2 {pre C1 Q} strip C1 {Q} &&&\n    \\<turnstile>\\<^sub>2 {pre C2 Q} strip C2 {Q}", "by auto"], ["proof (state)\nthis:\n  \\<turnstile>\\<^sub>2 {pre C1 Q} strip C1 {Q}\n  \\<turnstile>\\<^sub>2 {pre C2 Q} strip C2 {Q}\n\ngoal (5 subgoals):\n 1. \\<And>Q.\n       vc SKIP Q \\<Longrightarrow>\n       \\<turnstile>\\<^sub>2 {pre SKIP Q} strip SKIP {Q}\n 2. \\<And>x1 x2 Q.\n       vc (x1 ::= x2) Q \\<Longrightarrow>\n       \\<turnstile>\\<^sub>2 {pre (x1 ::= x2) Q} strip (x1 ::= x2) {Q}\n 3. \\<And>C1 C2 Q.\n       \\<lbrakk>\\<And>Q.\n                   vc C1 Q \\<Longrightarrow>\n                   \\<turnstile>\\<^sub>2 {pre C1 Q} strip C1 {Q};\n        \\<And>Q.\n           vc C2 Q \\<Longrightarrow>\n           \\<turnstile>\\<^sub>2 {pre C2 Q} strip C2 {Q};\n        vc (C1;; C2) Q\\<rbrakk>\n       \\<Longrightarrow> \\<turnstile>\\<^sub>2 {pre (C1;; C2) Q}\n        strip (C1;; C2) {Q}\n 4. \\<And>x1 C1 C2 Q.\n       \\<lbrakk>\\<And>Q.\n                   vc C1 Q \\<Longrightarrow>\n                   \\<turnstile>\\<^sub>2 {pre C1 Q} strip C1 {Q};\n        \\<And>Q.\n           vc C2 Q \\<Longrightarrow>\n           \\<turnstile>\\<^sub>2 {pre C2 Q} strip C2 {Q};\n        vc (IF x1 THEN C1 ELSE C2) Q\\<rbrakk>\n       \\<Longrightarrow> \\<turnstile>\\<^sub>2 {pre (IF x1 THEN C1 ELSE C2)\n          Q}\n        strip (IF x1 THEN C1 ELSE C2) {Q}\n 5. \\<And>x1 x2 C Q.\n       \\<lbrakk>\\<And>Q.\n                   vc C Q \\<Longrightarrow>\n                   \\<turnstile>\\<^sub>2 {pre C Q} strip C {Q};\n        vc ({x1} WHILE x2 DO C) Q\\<rbrakk>\n       \\<Longrightarrow> \\<turnstile>\\<^sub>2 {pre ({x1} WHILE x2 DO C) Q}\n        strip ({x1} WHILE x2 DO C) {Q}", "show ?case"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<turnstile>\\<^sub>2 {pre (IF b THEN C1 ELSE C2) Q}\n                         strip (IF b THEN C1 ELSE C2) {Q}", "apply auto"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<turnstile>\\<^sub>2 {\\<lambda>a.\n                             eSuc\n                              (if bval b a then pre C1 Q a else pre C2 Q a)}\n                         IF b THEN strip C1 ELSE strip C2 {Q}", "apply(rule hoare2.conseq)"], ["proof (prove)\ngoal (3 subgoals):\n 1. \\<turnstile>\\<^sub>2 {?P} IF b THEN strip C1 ELSE strip C2 {?Q}\n 2. \\<And>s. ?P s \\<le> eSuc (if bval b s then pre C1 Q s else pre C2 Q s)\n 3. \\<And>s. Q s \\<le> ?Q s", "apply(rule hoare2.If[where P=\"%s. if bval b s then pre C1 Q s else pre C2 Q s\" and Q=\"Q\"])"], ["proof (prove)\ngoal (4 subgoals):\n 1. \\<turnstile>\\<^sub>2 {\\<lambda>s.\n                             (if bval b s then pre C1 Q s else pre C2 Q s) +\n                             \\<up> (bval b s)}\n                         strip C1 {Q}\n 2. \\<turnstile>\\<^sub>2 {\\<lambda>s.\n                             (if bval b s then pre C1 Q s else pre C2 Q s) +\n                             \\<up> (\\<not> bval b s)}\n                         strip C2 {Q}\n 3. \\<And>s.\n       eSuc (if bval b s then pre C1 Q s else pre C2 Q s)\n       \\<le> eSuc (if bval b s then pre C1 Q s else pre C2 Q s)\n 4. \\<And>s. Q s \\<le> Q s", "subgoal"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<turnstile>\\<^sub>2 {\\<lambda>s.\n                             (if bval b s then pre C1 Q s else pre C2 Q s) +\n                             \\<up> (bval b s)}\n                         strip C1 {Q}", "apply(rule hoare2.conseq)"], ["proof (prove)\ngoal (3 subgoals):\n 1. \\<turnstile>\\<^sub>2 {?P} strip C1 {?Q}\n 2. \\<And>s.\n       ?P s\n       \\<le> (if bval b s then pre C1 Q s else pre C2 Q s) +\n             \\<up> (bval b s)\n 3. \\<And>s. Q s \\<le> ?Q s", "apply (fact Aif1)"], ["proof (prove)\ngoal (2 subgoals):\n 1. \\<And>s.\n       pre C1 Q s\n       \\<le> (if bval b s then pre C1 Q s else pre C2 Q s) +\n             \\<up> (bval b s)\n 2. \\<And>s. Q s \\<le> Q s", "subgoal for s"], ["proof (prove)\ngoal (1 subgoal):\n 1. pre C1 Q s\n    \\<le> (if bval b s then pre C1 Q s else pre C2 Q s) + \\<up> (bval b s)", "apply(cases \"bval b s\")"], ["proof (prove)\ngoal (2 subgoals):\n 1. bval b s \\<Longrightarrow>\n    pre C1 Q s\n    \\<le> (if bval b s then pre C1 Q s else pre C2 Q s) + \\<up> (bval b s)\n 2. \\<not> bval b s \\<Longrightarrow>\n    pre C1 Q s\n    \\<le> (if bval b s then pre C1 Q s else pre C2 Q s) + \\<up> (bval b s)", "by auto"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>s. Q s \\<le> Q s", "apply simp"], ["proof (prove)\ngoal:\nNo subgoals!", "done"], ["proof (prove)\ngoal (3 subgoals):\n 1. \\<turnstile>\\<^sub>2 {\\<lambda>s.\n                             (if bval b s then pre C1 Q s else pre C2 Q s) +\n                             \\<up> (\\<not> bval b s)}\n                         strip C2 {Q}\n 2. \\<And>s.\n       eSuc (if bval b s then pre C1 Q s else pre C2 Q s)\n       \\<le> eSuc (if bval b s then pre C1 Q s else pre C2 Q s)\n 3. \\<And>s. Q s \\<le> Q s", "subgoal"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<turnstile>\\<^sub>2 {\\<lambda>s.\n                             (if bval b s then pre C1 Q s else pre C2 Q s) +\n                             \\<up> (\\<not> bval b s)}\n                         strip C2 {Q}", "apply(rule hoare2.conseq)"], ["proof (prove)\ngoal (3 subgoals):\n 1. \\<turnstile>\\<^sub>2 {?P} strip C2 {?Q}\n 2. \\<And>s.\n       ?P s\n       \\<le> (if bval b s then pre C1 Q s else pre C2 Q s) +\n             \\<up> (\\<not> bval b s)\n 3. \\<And>s. Q s \\<le> ?Q s", "apply (fact Aif2)"], ["proof (prove)\ngoal (2 subgoals):\n 1. \\<And>s.\n       pre C2 Q s\n       \\<le> (if bval b s then pre C1 Q s else pre C2 Q s) +\n             \\<up> (\\<not> bval b s)\n 2. \\<And>s. Q s \\<le> Q s", "subgoal for s"], ["proof (prove)\ngoal (1 subgoal):\n 1. pre C2 Q s\n    \\<le> (if bval b s then pre C1 Q s else pre C2 Q s) +\n          \\<up> (\\<not> bval b s)", "apply(cases \"bval b s\")"], ["proof (prove)\ngoal (2 subgoals):\n 1. bval b s \\<Longrightarrow>\n    pre C2 Q s\n    \\<le> (if bval b s then pre C1 Q s else pre C2 Q s) +\n          \\<up> (\\<not> bval b s)\n 2. \\<not> bval b s \\<Longrightarrow>\n    pre C2 Q s\n    \\<le> (if bval b s then pre C1 Q s else pre C2 Q s) +\n          \\<up> (\\<not> bval b s)", "by auto"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>s. Q s \\<le> Q s", "apply simp"], ["proof (prove)\ngoal:\nNo subgoals!", "done"], ["proof (prove)\ngoal (2 subgoals):\n 1. \\<And>s.\n       eSuc (if bval b s then pre C1 Q s else pre C2 Q s)\n       \\<le> eSuc (if bval b s then pre C1 Q s else pre C2 Q s)\n 2. \\<And>s. Q s \\<le> Q s", "apply auto"], ["proof (prove)\ngoal:\nNo subgoals!", "done"], ["proof (state)\nthis:\n  \\<turnstile>\\<^sub>2 {pre (IF b THEN C1 ELSE C2) Q}\n                       strip (IF b THEN C1 ELSE C2) {Q}\n\ngoal (4 subgoals):\n 1. \\<And>Q.\n       vc SKIP Q \\<Longrightarrow>\n       \\<turnstile>\\<^sub>2 {pre SKIP Q} strip SKIP {Q}\n 2. \\<And>x1 x2 Q.\n       vc (x1 ::= x2) Q \\<Longrightarrow>\n       \\<turnstile>\\<^sub>2 {pre (x1 ::= x2) Q} strip (x1 ::= x2) {Q}\n 3. \\<And>C1 C2 Q.\n       \\<lbrakk>\\<And>Q.\n                   vc C1 Q \\<Longrightarrow>\n                   \\<turnstile>\\<^sub>2 {pre C1 Q} strip C1 {Q};\n        \\<And>Q.\n           vc C2 Q \\<Longrightarrow>\n           \\<turnstile>\\<^sub>2 {pre C2 Q} strip C2 {Q};\n        vc (C1;; C2) Q\\<rbrakk>\n       \\<Longrightarrow> \\<turnstile>\\<^sub>2 {pre (C1;; C2) Q}\n        strip (C1;; C2) {Q}\n 4. \\<And>x1 x2 C Q.\n       \\<lbrakk>\\<And>Q.\n                   vc C Q \\<Longrightarrow>\n                   \\<turnstile>\\<^sub>2 {pre C Q} strip C {Q};\n        vc ({x1} WHILE x2 DO C) Q\\<rbrakk>\n       \\<Longrightarrow> \\<turnstile>\\<^sub>2 {pre ({x1} WHILE x2 DO C) Q}\n        strip ({x1} WHILE x2 DO C) {Q}", "next"], ["proof (state)\ngoal (4 subgoals):\n 1. \\<And>Q.\n       vc SKIP Q \\<Longrightarrow>\n       \\<turnstile>\\<^sub>2 {pre SKIP Q} strip SKIP {Q}\n 2. \\<And>x1 x2 Q.\n       vc (x1 ::= x2) Q \\<Longrightarrow>\n       \\<turnstile>\\<^sub>2 {pre (x1 ::= x2) Q} strip (x1 ::= x2) {Q}\n 3. \\<And>C1 C2 Q.\n       \\<lbrakk>\\<And>Q.\n                   vc C1 Q \\<Longrightarrow>\n                   \\<turnstile>\\<^sub>2 {pre C1 Q} strip C1 {Q};\n        \\<And>Q.\n           vc C2 Q \\<Longrightarrow>\n           \\<turnstile>\\<^sub>2 {pre C2 Q} strip C2 {Q};\n        vc (C1;; C2) Q\\<rbrakk>\n       \\<Longrightarrow> \\<turnstile>\\<^sub>2 {pre (C1;; C2) Q}\n        strip (C1;; C2) {Q}\n 4. \\<And>x1 x2 C Q.\n       \\<lbrakk>\\<And>Q.\n                   vc C Q \\<Longrightarrow>\n                   \\<turnstile>\\<^sub>2 {pre C Q} strip C {Q};\n        vc ({x1} WHILE x2 DO C) Q\\<rbrakk>\n       \\<Longrightarrow> \\<turnstile>\\<^sub>2 {pre ({x1} WHILE x2 DO C) Q}\n        strip ({x1} WHILE x2 DO C) {Q}", "case (Awhile I b C)"], ["proof (state)\nthis:\n  vc C ?Q \\<Longrightarrow> \\<turnstile>\\<^sub>2 {pre C ?Q} strip C {?Q}\n  vc ({I} WHILE b DO C) Q\n\ngoal (4 subgoals):\n 1. \\<And>Q.\n       vc SKIP Q \\<Longrightarrow>\n       \\<turnstile>\\<^sub>2 {pre SKIP Q} strip SKIP {Q}\n 2. \\<And>x1 x2 Q.\n       vc (x1 ::= x2) Q \\<Longrightarrow>\n       \\<turnstile>\\<^sub>2 {pre (x1 ::= x2) Q} strip (x1 ::= x2) {Q}\n 3. \\<And>C1 C2 Q.\n       \\<lbrakk>\\<And>Q.\n                   vc C1 Q \\<Longrightarrow>\n                   \\<turnstile>\\<^sub>2 {pre C1 Q} strip C1 {Q};\n        \\<And>Q.\n           vc C2 Q \\<Longrightarrow>\n           \\<turnstile>\\<^sub>2 {pre C2 Q} strip C2 {Q};\n        vc (C1;; C2) Q\\<rbrakk>\n       \\<Longrightarrow> \\<turnstile>\\<^sub>2 {pre (C1;; C2) Q}\n        strip (C1;; C2) {Q}\n 4. \\<And>x1 x2 C Q.\n       \\<lbrakk>\\<And>Q.\n                   vc C Q \\<Longrightarrow>\n                   \\<turnstile>\\<^sub>2 {pre C Q} strip C {Q};\n        vc ({x1} WHILE x2 DO C) Q\\<rbrakk>\n       \\<Longrightarrow> \\<turnstile>\\<^sub>2 {pre ({x1} WHILE x2 DO C) Q}\n        strip ({x1} WHILE x2 DO C) {Q}", "then"], ["proof (chain)\npicking this:\n  vc C ?Q \\<Longrightarrow> \\<turnstile>\\<^sub>2 {pre C ?Q} strip C {?Q}\n  vc ({I} WHILE b DO C) Q", "have i: \"(\\<And>Q. vc C Q \\<Longrightarrow> \\<turnstile>\\<^sub>2 {pre C Q} strip C {Q})\"\n   and ii: \" \\<forall>s. pre C (\\<lambda>s. I s + 1) s \\<le> I s + \\<up> (bval b s) \\<and> Q s \\<le>  I s + \\<up> (\\<not> bval b s)\" \n     and iii: \"vc C (\\<lambda>s. I s + 1)\""], ["proof (prove)\nusing this:\n  vc C ?Q \\<Longrightarrow> \\<turnstile>\\<^sub>2 {pre C ?Q} strip C {?Q}\n  vc ({I} WHILE b DO C) Q\n\ngoal (1 subgoal):\n 1. (\\<And>Q.\n        vc C Q \\<Longrightarrow>\n        \\<turnstile>\\<^sub>2 {pre C Q} strip C {Q}) &&&\n    \\<forall>s.\n       pre C (\\<lambda>s. I s + 1) s \\<le> I s + \\<up> (bval b s) \\<and>\n       Q s \\<le> I s + \\<up> (\\<not> bval b s) &&&\n    vc C (\\<lambda>s. I s + 1)", "by auto"], ["proof (state)\nthis:\n  vc C ?Q \\<Longrightarrow> \\<turnstile>\\<^sub>2 {pre C ?Q} strip C {?Q}\n  \\<forall>s.\n     pre C (\\<lambda>s. I s + 1) s \\<le> I s + \\<up> (bval b s) \\<and>\n     Q s \\<le> I s + \\<up> (\\<not> bval b s)\n  vc C (\\<lambda>s. I s + 1)\n\ngoal (4 subgoals):\n 1. \\<And>Q.\n       vc SKIP Q \\<Longrightarrow>\n       \\<turnstile>\\<^sub>2 {pre SKIP Q} strip SKIP {Q}\n 2. \\<And>x1 x2 Q.\n       vc (x1 ::= x2) Q \\<Longrightarrow>\n       \\<turnstile>\\<^sub>2 {pre (x1 ::= x2) Q} strip (x1 ::= x2) {Q}\n 3. \\<And>C1 C2 Q.\n       \\<lbrakk>\\<And>Q.\n                   vc C1 Q \\<Longrightarrow>\n                   \\<turnstile>\\<^sub>2 {pre C1 Q} strip C1 {Q};\n        \\<And>Q.\n           vc C2 Q \\<Longrightarrow>\n           \\<turnstile>\\<^sub>2 {pre C2 Q} strip C2 {Q};\n        vc (C1;; C2) Q\\<rbrakk>\n       \\<Longrightarrow> \\<turnstile>\\<^sub>2 {pre (C1;; C2) Q}\n        strip (C1;; C2) {Q}\n 4. \\<And>x1 x2 C Q.\n       \\<lbrakk>\\<And>Q.\n                   vc C Q \\<Longrightarrow>\n                   \\<turnstile>\\<^sub>2 {pre C Q} strip C {Q};\n        vc ({x1} WHILE x2 DO C) Q\\<rbrakk>\n       \\<Longrightarrow> \\<turnstile>\\<^sub>2 {pre ({x1} WHILE x2 DO C) Q}\n        strip ({x1} WHILE x2 DO C) {Q}", "from i iii"], ["proof (chain)\npicking this:\n  vc C ?Q \\<Longrightarrow> \\<turnstile>\\<^sub>2 {pre C ?Q} strip C {?Q}\n  vc C (\\<lambda>s. I s + 1)", "have  A: \"\\<turnstile>\\<^sub>2 {pre C (\\<lambda>s. I s + 1)} strip C {(\\<lambda>s. I s + 1)}\""], ["proof (prove)\nusing this:\n  vc C ?Q \\<Longrightarrow> \\<turnstile>\\<^sub>2 {pre C ?Q} strip C {?Q}\n  vc C (\\<lambda>s. I s + 1)\n\ngoal (1 subgoal):\n 1. \\<turnstile>\\<^sub>2 {pre C (\\<lambda>s. I s + 1)} strip C\n                         {\\<lambda>s. I s + 1}", "by auto"], ["proof (state)\nthis:\n  \\<turnstile>\\<^sub>2 {pre C (\\<lambda>s. I s + 1)} strip C\n                       {\\<lambda>s. I s + 1}\n\ngoal (4 subgoals):\n 1. \\<And>Q.\n       vc SKIP Q \\<Longrightarrow>\n       \\<turnstile>\\<^sub>2 {pre SKIP Q} strip SKIP {Q}\n 2. \\<And>x1 x2 Q.\n       vc (x1 ::= x2) Q \\<Longrightarrow>\n       \\<turnstile>\\<^sub>2 {pre (x1 ::= x2) Q} strip (x1 ::= x2) {Q}\n 3. \\<And>C1 C2 Q.\n       \\<lbrakk>\\<And>Q.\n                   vc C1 Q \\<Longrightarrow>\n                   \\<turnstile>\\<^sub>2 {pre C1 Q} strip C1 {Q};\n        \\<And>Q.\n           vc C2 Q \\<Longrightarrow>\n           \\<turnstile>\\<^sub>2 {pre C2 Q} strip C2 {Q};\n        vc (C1;; C2) Q\\<rbrakk>\n       \\<Longrightarrow> \\<turnstile>\\<^sub>2 {pre (C1;; C2) Q}\n        strip (C1;; C2) {Q}\n 4. \\<And>x1 x2 C Q.\n       \\<lbrakk>\\<And>Q.\n                   vc C Q \\<Longrightarrow>\n                   \\<turnstile>\\<^sub>2 {pre C Q} strip C {Q};\n        vc ({x1} WHILE x2 DO C) Q\\<rbrakk>\n       \\<Longrightarrow> \\<turnstile>\\<^sub>2 {pre ({x1} WHILE x2 DO C) Q}\n        strip ({x1} WHILE x2 DO C) {Q}", "have   \"\\<turnstile>\\<^sub>2 {\\<lambda>s. I s + 1} WHILE b DO strip C {Q}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<turnstile>\\<^sub>2 {\\<lambda>s. I s + 1} WHILE b DO strip C {Q}", "apply(rule hoare2.conseq)"], ["proof (prove)\ngoal (3 subgoals):\n 1. \\<turnstile>\\<^sub>2 {?P} WHILE b DO strip C {?Q}\n 2. \\<And>s. ?P s \\<le> I s + 1\n 3. \\<And>s. Q s \\<le> ?Q s", "apply(rule hoare2.While[where I=I])"], ["proof (prove)\ngoal (3 subgoals):\n 1. \\<turnstile>\\<^sub>2 {\\<lambda>s. I s + \\<up> (bval b s)} strip C\n                         {\\<lambda>t. I t + 1}\n 2. \\<And>s. I s + 1 \\<le> I s + 1\n 3. \\<And>s. Q s \\<le> I s + \\<up> (\\<not> bval b s)", "apply(rule hoare2.conseq)"], ["proof (prove)\ngoal (5 subgoals):\n 1. \\<turnstile>\\<^sub>2 {?P6} strip C {?Q6}\n 2. \\<And>s. ?P6 s \\<le> I s + \\<up> (bval b s)\n 3. \\<And>s. I s + 1 \\<le> ?Q6 s\n 4. \\<And>s. I s + 1 \\<le> I s + 1\n 5. \\<And>s. Q s \\<le> I s + \\<up> (\\<not> bval b s)", "apply(rule A)"], ["proof (prove)\ngoal (4 subgoals):\n 1. \\<And>s. pre C (\\<lambda>s. I s + 1) s \\<le> I s + \\<up> (bval b s)\n 2. \\<And>s. I s + 1 \\<le> I s + 1\n 3. \\<And>s. I s + 1 \\<le> I s + 1\n 4. \\<And>s. Q s \\<le> I s + \\<up> (\\<not> bval b s)", "using ii"], ["proof (prove)\nusing this:\n  \\<forall>s.\n     pre C (\\<lambda>s. I s + 1) s \\<le> I s + \\<up> (bval b s) \\<and>\n     Q s \\<le> I s + \\<up> (\\<not> bval b s)\n\ngoal (4 subgoals):\n 1. \\<And>s. pre C (\\<lambda>s. I s + 1) s \\<le> I s + \\<up> (bval b s)\n 2. \\<And>s. I s + 1 \\<le> I s + 1\n 3. \\<And>s. I s + 1 \\<le> I s + 1\n 4. \\<And>s. Q s \\<le> I s + \\<up> (\\<not> bval b s)", "by auto"], ["proof (state)\nthis:\n  \\<turnstile>\\<^sub>2 {\\<lambda>s. I s + 1} WHILE b DO strip C {Q}\n\ngoal (4 subgoals):\n 1. \\<And>Q.\n       vc SKIP Q \\<Longrightarrow>\n       \\<turnstile>\\<^sub>2 {pre SKIP Q} strip SKIP {Q}\n 2. \\<And>x1 x2 Q.\n       vc (x1 ::= x2) Q \\<Longrightarrow>\n       \\<turnstile>\\<^sub>2 {pre (x1 ::= x2) Q} strip (x1 ::= x2) {Q}\n 3. \\<And>C1 C2 Q.\n       \\<lbrakk>\\<And>Q.\n                   vc C1 Q \\<Longrightarrow>\n                   \\<turnstile>\\<^sub>2 {pre C1 Q} strip C1 {Q};\n        \\<And>Q.\n           vc C2 Q \\<Longrightarrow>\n           \\<turnstile>\\<^sub>2 {pre C2 Q} strip C2 {Q};\n        vc (C1;; C2) Q\\<rbrakk>\n       \\<Longrightarrow> \\<turnstile>\\<^sub>2 {pre (C1;; C2) Q}\n        strip (C1;; C2) {Q}\n 4. \\<And>x1 x2 C Q.\n       \\<lbrakk>\\<And>Q.\n                   vc C Q \\<Longrightarrow>\n                   \\<turnstile>\\<^sub>2 {pre C Q} strip C {Q};\n        vc ({x1} WHILE x2 DO C) Q\\<rbrakk>\n       \\<Longrightarrow> \\<turnstile>\\<^sub>2 {pre ({x1} WHILE x2 DO C) Q}\n        strip ({x1} WHILE x2 DO C) {Q}", "then"], ["proof (chain)\npicking this:\n  \\<turnstile>\\<^sub>2 {\\<lambda>s. I s + 1} WHILE b DO strip C {Q}", "show ?case"], ["proof (prove)\nusing this:\n  \\<turnstile>\\<^sub>2 {\\<lambda>s. I s + 1} WHILE b DO strip C {Q}\n\ngoal (1 subgoal):\n 1. \\<turnstile>\\<^sub>2 {pre ({I} WHILE b DO C) Q} strip ({I} WHILE b DO C)\n                         {Q}", "by auto"], ["proof (state)\nthis:\n  \\<turnstile>\\<^sub>2 {pre ({I} WHILE b DO C) Q} strip ({I} WHILE b DO C)\n                       {Q}\n\ngoal (3 subgoals):\n 1. \\<And>Q.\n       vc SKIP Q \\<Longrightarrow>\n       \\<turnstile>\\<^sub>2 {pre SKIP Q} strip SKIP {Q}\n 2. \\<And>x1 x2 Q.\n       vc (x1 ::= x2) Q \\<Longrightarrow>\n       \\<turnstile>\\<^sub>2 {pre (x1 ::= x2) Q} strip (x1 ::= x2) {Q}\n 3. \\<And>C1 C2 Q.\n       \\<lbrakk>\\<And>Q.\n                   vc C1 Q \\<Longrightarrow>\n                   \\<turnstile>\\<^sub>2 {pre C1 Q} strip C1 {Q};\n        \\<And>Q.\n           vc C2 Q \\<Longrightarrow>\n           \\<turnstile>\\<^sub>2 {pre C2 Q} strip C2 {Q};\n        vc (C1;; C2) Q\\<rbrakk>\n       \\<Longrightarrow> \\<turnstile>\\<^sub>2 {pre (C1;; C2) Q}\n        strip (C1;; C2) {Q}", "qed (auto intro: hoare2.Skip hoare2.Assign hoare2.Seq )"], ["", "lemma vc_sound': \"\\<lbrakk>vc C Q ; (\\<forall>s. pre C Q s \\<le> P s) \\<rbrakk> \\<Longrightarrow>  \\<turnstile>\\<^sub>2 {P} strip C { Q }\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>vc C Q; \\<forall>s. pre C Q s \\<le> P s\\<rbrakk>\n    \\<Longrightarrow> \\<turnstile>\\<^sub>2 {P} strip C {Q}", "apply(rule hoare2.conseq)"], ["proof (prove)\ngoal (3 subgoals):\n 1. \\<lbrakk>vc C Q; \\<forall>s. pre C Q s \\<le> P s\\<rbrakk>\n    \\<Longrightarrow> \\<turnstile>\\<^sub>2 {?P} strip C {?Q}\n 2. \\<And>s.\n       \\<lbrakk>vc C Q; \\<forall>s. pre C Q s \\<le> P s\\<rbrakk>\n       \\<Longrightarrow> ?P s \\<le> P s\n 3. \\<And>s.\n       \\<lbrakk>vc C Q; \\<forall>s. pre C Q s \\<le> P s\\<rbrakk>\n       \\<Longrightarrow> Q s \\<le> ?Q s", "apply(rule vc_sound)"], ["proof (prove)\ngoal (3 subgoals):\n 1. \\<lbrakk>vc C Q; \\<forall>s. pre C Q s \\<le> P s\\<rbrakk>\n    \\<Longrightarrow> vc C ?Q\n 2. \\<And>s.\n       \\<lbrakk>vc C Q; \\<forall>s. pre C Q s \\<le> P s\\<rbrakk>\n       \\<Longrightarrow> pre C ?Q s \\<le> P s\n 3. \\<And>s.\n       \\<lbrakk>vc C Q; \\<forall>s. pre C Q s \\<le> P s\\<rbrakk>\n       \\<Longrightarrow> Q s \\<le> ?Q s", "by auto"], ["", "subsubsection \"Completeness\""], ["", "lemma pre_mono: assumes \"\\<And>s. P' s \\<le> P s\" \n  shows \"\\<And>s. pre C P' s \\<le> pre C P s\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>s. pre C P' s \\<le> pre C P s", "using assms"], ["proof (prove)\nusing this:\n  P' ?s \\<le> P ?s\n\ngoal (1 subgoal):\n 1. \\<And>s. pre C P' s \\<le> pre C P s", "by (induct C arbitrary: P P', auto)"], ["", "lemma vc_mono: assumes \"\\<And>s. P' s \\<le> P s\" \n  shows \"vc C P \\<Longrightarrow> vc C P'\""], ["proof (prove)\ngoal (1 subgoal):\n 1. vc C P \\<Longrightarrow> vc C P'", "using assms"], ["proof (prove)\nusing this:\n  P' ?s \\<le> P ?s\n\ngoal (1 subgoal):\n 1. vc C P \\<Longrightarrow> vc C P'", "proof (induct C arbitrary: P P')"], ["proof (state)\ngoal (5 subgoals):\n 1. \\<And>P P'.\n       \\<lbrakk>vc SKIP P; \\<And>s. P' s \\<le> P s\\<rbrakk>\n       \\<Longrightarrow> vc SKIP P'\n 2. \\<And>x1 x2 P P'.\n       \\<lbrakk>vc (x1 ::= x2) P; \\<And>s. P' s \\<le> P s\\<rbrakk>\n       \\<Longrightarrow> vc (x1 ::= x2) P'\n 3. \\<And>C1 C2 P P'.\n       \\<lbrakk>\\<And>P P'.\n                   \\<lbrakk>vc C1 P; \\<And>s. P' s \\<le> P s\\<rbrakk>\n                   \\<Longrightarrow> vc C1 P';\n        \\<And>P P'.\n           \\<lbrakk>vc C2 P; \\<And>s. P' s \\<le> P s\\<rbrakk>\n           \\<Longrightarrow> vc C2 P';\n        vc (C1;; C2) P; \\<And>s. P' s \\<le> P s\\<rbrakk>\n       \\<Longrightarrow> vc (C1;; C2) P'\n 4. \\<And>x1 C1 C2 P P'.\n       \\<lbrakk>\\<And>P P'.\n                   \\<lbrakk>vc C1 P; \\<And>s. P' s \\<le> P s\\<rbrakk>\n                   \\<Longrightarrow> vc C1 P';\n        \\<And>P P'.\n           \\<lbrakk>vc C2 P; \\<And>s. P' s \\<le> P s\\<rbrakk>\n           \\<Longrightarrow> vc C2 P';\n        vc (IF x1 THEN C1 ELSE C2) P; \\<And>s. P' s \\<le> P s\\<rbrakk>\n       \\<Longrightarrow> vc (IF x1 THEN C1 ELSE C2) P'\n 5. \\<And>x1 x2 C P P'.\n       \\<lbrakk>\\<And>P P'.\n                   \\<lbrakk>vc C P; \\<And>s. P' s \\<le> P s\\<rbrakk>\n                   \\<Longrightarrow> vc C P';\n        vc ({x1} WHILE x2 DO C) P; \\<And>s. P' s \\<le> P s\\<rbrakk>\n       \\<Longrightarrow> vc ({x1} WHILE x2 DO C) P'", "case (Awhile I b C)"], ["proof (state)\nthis:\n  \\<lbrakk>vc C ?P; \\<And>s. ?P' s \\<le> ?P s\\<rbrakk>\n  \\<Longrightarrow> vc C ?P'\n  vc ({I} WHILE b DO C) P\n  P' ?s \\<le> P ?s\n\ngoal (5 subgoals):\n 1. \\<And>P P'.\n       \\<lbrakk>vc SKIP P; \\<And>s. P' s \\<le> P s\\<rbrakk>\n       \\<Longrightarrow> vc SKIP P'\n 2. \\<And>x1 x2 P P'.\n       \\<lbrakk>vc (x1 ::= x2) P; \\<And>s. P' s \\<le> P s\\<rbrakk>\n       \\<Longrightarrow> vc (x1 ::= x2) P'\n 3. \\<And>C1 C2 P P'.\n       \\<lbrakk>\\<And>P P'.\n                   \\<lbrakk>vc C1 P; \\<And>s. P' s \\<le> P s\\<rbrakk>\n                   \\<Longrightarrow> vc C1 P';\n        \\<And>P P'.\n           \\<lbrakk>vc C2 P; \\<And>s. P' s \\<le> P s\\<rbrakk>\n           \\<Longrightarrow> vc C2 P';\n        vc (C1;; C2) P; \\<And>s. P' s \\<le> P s\\<rbrakk>\n       \\<Longrightarrow> vc (C1;; C2) P'\n 4. \\<And>x1 C1 C2 P P'.\n       \\<lbrakk>\\<And>P P'.\n                   \\<lbrakk>vc C1 P; \\<And>s. P' s \\<le> P s\\<rbrakk>\n                   \\<Longrightarrow> vc C1 P';\n        \\<And>P P'.\n           \\<lbrakk>vc C2 P; \\<And>s. P' s \\<le> P s\\<rbrakk>\n           \\<Longrightarrow> vc C2 P';\n        vc (IF x1 THEN C1 ELSE C2) P; \\<And>s. P' s \\<le> P s\\<rbrakk>\n       \\<Longrightarrow> vc (IF x1 THEN C1 ELSE C2) P'\n 5. \\<And>x1 x2 C P P'.\n       \\<lbrakk>\\<And>P P'.\n                   \\<lbrakk>vc C P; \\<And>s. P' s \\<le> P s\\<rbrakk>\n                   \\<Longrightarrow> vc C P';\n        vc ({x1} WHILE x2 DO C) P; \\<And>s. P' s \\<le> P s\\<rbrakk>\n       \\<Longrightarrow> vc ({x1} WHILE x2 DO C) P'", "thus ?case"], ["proof (prove)\nusing this:\n  \\<lbrakk>vc C ?P; \\<And>s. ?P' s \\<le> ?P s\\<rbrakk>\n  \\<Longrightarrow> vc C ?P'\n  vc ({I} WHILE b DO C) P\n  P' ?s \\<le> P ?s\n\ngoal (1 subgoal):\n 1. vc ({I} WHILE b DO C) P'", "apply (auto simp: pre_mono)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>s.\n       \\<lbrakk>\\<And>P P'.\n                   \\<lbrakk>vc C P; \\<And>s. P' s \\<le> P s\\<rbrakk>\n                   \\<Longrightarrow> vc C P';\n        \\<And>s. P' s \\<le> P s;\n        \\<forall>s.\n           pre C (\\<lambda>s. I s + 1) s \\<le> I s + \\<up> (bval b s) \\<and>\n           P s \\<le> I s + \\<up> (\\<not> bval b s);\n        vc C (\\<lambda>s. I s + 1)\\<rbrakk>\n       \\<Longrightarrow> P' s \\<le> I s + \\<up> (\\<not> bval b s)", "using order.trans"], ["proof (prove)\nusing this:\n  \\<lbrakk>?a \\<le> ?b; ?b \\<le> ?c\\<rbrakk> \\<Longrightarrow> ?a \\<le> ?c\n\ngoal (1 subgoal):\n 1. \\<And>s.\n       \\<lbrakk>\\<And>P P'.\n                   \\<lbrakk>vc C P; \\<And>s. P' s \\<le> P s\\<rbrakk>\n                   \\<Longrightarrow> vc C P';\n        \\<And>s. P' s \\<le> P s;\n        \\<forall>s.\n           pre C (\\<lambda>s. I s + 1) s \\<le> I s + \\<up> (bval b s) \\<and>\n           P s \\<le> I s + \\<up> (\\<not> bval b s);\n        vc C (\\<lambda>s. I s + 1)\\<rbrakk>\n       \\<Longrightarrow> P' s \\<le> I s + \\<up> (\\<not> bval b s)", "by blast"], ["proof (state)\nthis:\n  vc ({I} WHILE b DO C) P'\n\ngoal (4 subgoals):\n 1. \\<And>P P'.\n       \\<lbrakk>vc SKIP P; \\<And>s. P' s \\<le> P s\\<rbrakk>\n       \\<Longrightarrow> vc SKIP P'\n 2. \\<And>x1 x2 P P'.\n       \\<lbrakk>vc (x1 ::= x2) P; \\<And>s. P' s \\<le> P s\\<rbrakk>\n       \\<Longrightarrow> vc (x1 ::= x2) P'\n 3. \\<And>C1 C2 P P'.\n       \\<lbrakk>\\<And>P P'.\n                   \\<lbrakk>vc C1 P; \\<And>s. P' s \\<le> P s\\<rbrakk>\n                   \\<Longrightarrow> vc C1 P';\n        \\<And>P P'.\n           \\<lbrakk>vc C2 P; \\<And>s. P' s \\<le> P s\\<rbrakk>\n           \\<Longrightarrow> vc C2 P';\n        vc (C1;; C2) P; \\<And>s. P' s \\<le> P s\\<rbrakk>\n       \\<Longrightarrow> vc (C1;; C2) P'\n 4. \\<And>x1 C1 C2 P P'.\n       \\<lbrakk>\\<And>P P'.\n                   \\<lbrakk>vc C1 P; \\<And>s. P' s \\<le> P s\\<rbrakk>\n                   \\<Longrightarrow> vc C1 P';\n        \\<And>P P'.\n           \\<lbrakk>vc C2 P; \\<And>s. P' s \\<le> P s\\<rbrakk>\n           \\<Longrightarrow> vc C2 P';\n        vc (IF x1 THEN C1 ELSE C2) P; \\<And>s. P' s \\<le> P s\\<rbrakk>\n       \\<Longrightarrow> vc (IF x1 THEN C1 ELSE C2) P'", "qed (auto simp: pre_mono)"], ["", "lemma \"\\<turnstile>\\<^sub>2 { P } c { Q } \\<Longrightarrow> \\<exists>C. strip C = c \\<and> vc C Q \\<and> (\\<forall>s. pre C Q s \\<le> P s)\"\n  (is \"_ \\<Longrightarrow>   \\<exists>C. ?G P c Q C\")"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<turnstile>\\<^sub>2 {P} c {Q} \\<Longrightarrow>\n    \\<exists>C.\n       strip C = c \\<and> vc C Q \\<and> (\\<forall>s. pre C Q s \\<le> P s)", "proof (induction rule: hoare2.induct)"], ["proof (state)\ngoal (6 subgoals):\n 1. \\<And>P.\n       \\<exists>C.\n          strip C = SKIP \\<and>\n          vc C P \\<and> (\\<forall>s. pre C P s \\<le> eSuc (P s))\n 2. \\<And>P a x.\n       \\<exists>C.\n          strip C = x ::= a \\<and>\n          vc C P \\<and> (\\<forall>s. pre C P s \\<le> eSuc (P (s[a/x])))\n 3. \\<And>P b c\\<^sub>1 Q c\\<^sub>2.\n       \\<lbrakk>\\<turnstile>\\<^sub>2 {\\<lambda>s. P s + \\<up> (bval b s)}\n                                     c\\<^sub>1 {Q};\n        \\<exists>C.\n           strip C = c\\<^sub>1 \\<and>\n           vc C Q \\<and>\n           (\\<forall>s. pre C Q s \\<le> P s + \\<up> (bval b s));\n        \\<turnstile>\\<^sub>2 {\\<lambda>s. P s + \\<up> (\\<not> bval b s)}\n                             c\\<^sub>2 {Q};\n        \\<exists>C.\n           strip C = c\\<^sub>2 \\<and>\n           vc C Q \\<and>\n           (\\<forall>s.\n               pre C Q s \\<le> P s + \\<up> (\\<not> bval b s))\\<rbrakk>\n       \\<Longrightarrow> \\<exists>C.\n                            strip C =\n                            IF b THEN c\\<^sub>1 ELSE c\\<^sub>2 \\<and>\n                            vc C Q \\<and>\n                            (\\<forall>s. pre C Q s \\<le> eSuc (P s))\n 4. \\<And>P\\<^sub>1 c\\<^sub>1 P\\<^sub>2 c\\<^sub>2 P\\<^sub>3.\n       \\<lbrakk>\\<turnstile>\\<^sub>2 {P\\<^sub>1} c\\<^sub>1 {P\\<^sub>2};\n        \\<exists>C.\n           strip C = c\\<^sub>1 \\<and>\n           vc C P\\<^sub>2 \\<and>\n           (\\<forall>s. pre C P\\<^sub>2 s \\<le> P\\<^sub>1 s);\n        \\<turnstile>\\<^sub>2 {P\\<^sub>2} c\\<^sub>2 {P\\<^sub>3};\n        \\<exists>C.\n           strip C = c\\<^sub>2 \\<and>\n           vc C P\\<^sub>3 \\<and>\n           (\\<forall>s. pre C P\\<^sub>3 s \\<le> P\\<^sub>2 s)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>C.\n                            strip C = c\\<^sub>1;; c\\<^sub>2 \\<and>\n                            vc C P\\<^sub>3 \\<and>\n                            (\\<forall>s.\n                                pre C P\\<^sub>3 s \\<le> P\\<^sub>1 s)\n 5. \\<And>I b c.\n       \\<lbrakk>\\<turnstile>\\<^sub>2 {\\<lambda>s. I s + \\<up> (bval b s)} c\n                                     {\\<lambda>t. I t + 1};\n        \\<exists>C.\n           strip C = c \\<and>\n           vc C (\\<lambda>a. I a + 1) \\<and>\n           (\\<forall>s.\n               pre C (\\<lambda>a. I a + 1) s\n               \\<le> I s + \\<up> (bval b s))\\<rbrakk>\n       \\<Longrightarrow> \\<exists>C.\n                            strip C = WHILE b DO c \\<and>\n                            vc C\n                             (\\<lambda>a.\n                                 I a + \\<up> (\\<not> bval b a)) \\<and>\n                            (\\<forall>s.\n                                pre C\n                                 (\\<lambda>a. I a + \\<up> (\\<not> bval b a))\n                                 s\n                                \\<le> I s + 1)\n 6. \\<And>P c Q P' Q'.\n       \\<lbrakk>\\<turnstile>\\<^sub>2 {P} c {Q};\n        \\<exists>C.\n           strip C = c \\<and>\n           vc C Q \\<and> (\\<forall>s. pre C Q s \\<le> P s);\n        \\<And>s. P s \\<le> P' s; \\<And>s. Q' s \\<le> Q s\\<rbrakk>\n       \\<Longrightarrow> \\<exists>C.\n                            strip C = c \\<and>\n                            vc C Q' \\<and>\n                            (\\<forall>s. pre C Q' s \\<le> P' s)", "case (Skip P)"], ["proof (state)\nthis:\n  \n\ngoal (6 subgoals):\n 1. \\<And>P.\n       \\<exists>C.\n          strip C = SKIP \\<and>\n          vc C P \\<and> (\\<forall>s. pre C P s \\<le> eSuc (P s))\n 2. \\<And>P a x.\n       \\<exists>C.\n          strip C = x ::= a \\<and>\n          vc C P \\<and> (\\<forall>s. pre C P s \\<le> eSuc (P (s[a/x])))\n 3. \\<And>P b c\\<^sub>1 Q c\\<^sub>2.\n       \\<lbrakk>\\<turnstile>\\<^sub>2 {\\<lambda>s. P s + \\<up> (bval b s)}\n                                     c\\<^sub>1 {Q};\n        \\<exists>C.\n           strip C = c\\<^sub>1 \\<and>\n           vc C Q \\<and>\n           (\\<forall>s. pre C Q s \\<le> P s + \\<up> (bval b s));\n        \\<turnstile>\\<^sub>2 {\\<lambda>s. P s + \\<up> (\\<not> bval b s)}\n                             c\\<^sub>2 {Q};\n        \\<exists>C.\n           strip C = c\\<^sub>2 \\<and>\n           vc C Q \\<and>\n           (\\<forall>s.\n               pre C Q s \\<le> P s + \\<up> (\\<not> bval b s))\\<rbrakk>\n       \\<Longrightarrow> \\<exists>C.\n                            strip C =\n                            IF b THEN c\\<^sub>1 ELSE c\\<^sub>2 \\<and>\n                            vc C Q \\<and>\n                            (\\<forall>s. pre C Q s \\<le> eSuc (P s))\n 4. \\<And>P\\<^sub>1 c\\<^sub>1 P\\<^sub>2 c\\<^sub>2 P\\<^sub>3.\n       \\<lbrakk>\\<turnstile>\\<^sub>2 {P\\<^sub>1} c\\<^sub>1 {P\\<^sub>2};\n        \\<exists>C.\n           strip C = c\\<^sub>1 \\<and>\n           vc C P\\<^sub>2 \\<and>\n           (\\<forall>s. pre C P\\<^sub>2 s \\<le> P\\<^sub>1 s);\n        \\<turnstile>\\<^sub>2 {P\\<^sub>2} c\\<^sub>2 {P\\<^sub>3};\n        \\<exists>C.\n           strip C = c\\<^sub>2 \\<and>\n           vc C P\\<^sub>3 \\<and>\n           (\\<forall>s. pre C P\\<^sub>3 s \\<le> P\\<^sub>2 s)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>C.\n                            strip C = c\\<^sub>1;; c\\<^sub>2 \\<and>\n                            vc C P\\<^sub>3 \\<and>\n                            (\\<forall>s.\n                                pre C P\\<^sub>3 s \\<le> P\\<^sub>1 s)\n 5. \\<And>I b c.\n       \\<lbrakk>\\<turnstile>\\<^sub>2 {\\<lambda>s. I s + \\<up> (bval b s)} c\n                                     {\\<lambda>t. I t + 1};\n        \\<exists>C.\n           strip C = c \\<and>\n           vc C (\\<lambda>a. I a + 1) \\<and>\n           (\\<forall>s.\n               pre C (\\<lambda>a. I a + 1) s\n               \\<le> I s + \\<up> (bval b s))\\<rbrakk>\n       \\<Longrightarrow> \\<exists>C.\n                            strip C = WHILE b DO c \\<and>\n                            vc C\n                             (\\<lambda>a.\n                                 I a + \\<up> (\\<not> bval b a)) \\<and>\n                            (\\<forall>s.\n                                pre C\n                                 (\\<lambda>a. I a + \\<up> (\\<not> bval b a))\n                                 s\n                                \\<le> I s + 1)\n 6. \\<And>P c Q P' Q'.\n       \\<lbrakk>\\<turnstile>\\<^sub>2 {P} c {Q};\n        \\<exists>C.\n           strip C = c \\<and>\n           vc C Q \\<and> (\\<forall>s. pre C Q s \\<le> P s);\n        \\<And>s. P s \\<le> P' s; \\<And>s. Q' s \\<le> Q s\\<rbrakk>\n       \\<Longrightarrow> \\<exists>C.\n                            strip C = c \\<and>\n                            vc C Q' \\<and>\n                            (\\<forall>s. pre C Q' s \\<le> P' s)", "show ?case (is \"\\<exists>C. ?C C\")"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>C.\n       strip C = SKIP \\<and>\n       vc C P \\<and> (\\<forall>s. pre C P s \\<le> eSuc (P s))", "proof"], ["proof (state)\ngoal (1 subgoal):\n 1. strip ?C = SKIP \\<and>\n    vc ?C P \\<and> (\\<forall>s. pre ?C P s \\<le> eSuc (P s))", "show \"?C Askip\""], ["proof (prove)\ngoal (1 subgoal):\n 1. strip SKIP = SKIP \\<and>\n    vc SKIP P \\<and> (\\<forall>s. pre SKIP P s \\<le> eSuc (P s))", "by auto"], ["proof (state)\nthis:\n  strip SKIP = SKIP \\<and>\n  vc SKIP P \\<and> (\\<forall>s. pre SKIP P s \\<le> eSuc (P s))\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>C.\n     strip C = SKIP \\<and>\n     vc C P \\<and> (\\<forall>s. pre C P s \\<le> eSuc (P s))\n\ngoal (5 subgoals):\n 1. \\<And>P a x.\n       \\<exists>C.\n          strip C = x ::= a \\<and>\n          vc C P \\<and> (\\<forall>s. pre C P s \\<le> eSuc (P (s[a/x])))\n 2. \\<And>P b c\\<^sub>1 Q c\\<^sub>2.\n       \\<lbrakk>\\<turnstile>\\<^sub>2 {\\<lambda>s. P s + \\<up> (bval b s)}\n                                     c\\<^sub>1 {Q};\n        \\<exists>C.\n           strip C = c\\<^sub>1 \\<and>\n           vc C Q \\<and>\n           (\\<forall>s. pre C Q s \\<le> P s + \\<up> (bval b s));\n        \\<turnstile>\\<^sub>2 {\\<lambda>s. P s + \\<up> (\\<not> bval b s)}\n                             c\\<^sub>2 {Q};\n        \\<exists>C.\n           strip C = c\\<^sub>2 \\<and>\n           vc C Q \\<and>\n           (\\<forall>s.\n               pre C Q s \\<le> P s + \\<up> (\\<not> bval b s))\\<rbrakk>\n       \\<Longrightarrow> \\<exists>C.\n                            strip C =\n                            IF b THEN c\\<^sub>1 ELSE c\\<^sub>2 \\<and>\n                            vc C Q \\<and>\n                            (\\<forall>s. pre C Q s \\<le> eSuc (P s))\n 3. \\<And>P\\<^sub>1 c\\<^sub>1 P\\<^sub>2 c\\<^sub>2 P\\<^sub>3.\n       \\<lbrakk>\\<turnstile>\\<^sub>2 {P\\<^sub>1} c\\<^sub>1 {P\\<^sub>2};\n        \\<exists>C.\n           strip C = c\\<^sub>1 \\<and>\n           vc C P\\<^sub>2 \\<and>\n           (\\<forall>s. pre C P\\<^sub>2 s \\<le> P\\<^sub>1 s);\n        \\<turnstile>\\<^sub>2 {P\\<^sub>2} c\\<^sub>2 {P\\<^sub>3};\n        \\<exists>C.\n           strip C = c\\<^sub>2 \\<and>\n           vc C P\\<^sub>3 \\<and>\n           (\\<forall>s. pre C P\\<^sub>3 s \\<le> P\\<^sub>2 s)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>C.\n                            strip C = c\\<^sub>1;; c\\<^sub>2 \\<and>\n                            vc C P\\<^sub>3 \\<and>\n                            (\\<forall>s.\n                                pre C P\\<^sub>3 s \\<le> P\\<^sub>1 s)\n 4. \\<And>I b c.\n       \\<lbrakk>\\<turnstile>\\<^sub>2 {\\<lambda>s. I s + \\<up> (bval b s)} c\n                                     {\\<lambda>t. I t + 1};\n        \\<exists>C.\n           strip C = c \\<and>\n           vc C (\\<lambda>a. I a + 1) \\<and>\n           (\\<forall>s.\n               pre C (\\<lambda>a. I a + 1) s\n               \\<le> I s + \\<up> (bval b s))\\<rbrakk>\n       \\<Longrightarrow> \\<exists>C.\n                            strip C = WHILE b DO c \\<and>\n                            vc C\n                             (\\<lambda>a.\n                                 I a + \\<up> (\\<not> bval b a)) \\<and>\n                            (\\<forall>s.\n                                pre C\n                                 (\\<lambda>a. I a + \\<up> (\\<not> bval b a))\n                                 s\n                                \\<le> I s + 1)\n 5. \\<And>P c Q P' Q'.\n       \\<lbrakk>\\<turnstile>\\<^sub>2 {P} c {Q};\n        \\<exists>C.\n           strip C = c \\<and>\n           vc C Q \\<and> (\\<forall>s. pre C Q s \\<le> P s);\n        \\<And>s. P s \\<le> P' s; \\<And>s. Q' s \\<le> Q s\\<rbrakk>\n       \\<Longrightarrow> \\<exists>C.\n                            strip C = c \\<and>\n                            vc C Q' \\<and>\n                            (\\<forall>s. pre C Q' s \\<le> P' s)", "next"], ["proof (state)\ngoal (5 subgoals):\n 1. \\<And>P a x.\n       \\<exists>C.\n          strip C = x ::= a \\<and>\n          vc C P \\<and> (\\<forall>s. pre C P s \\<le> eSuc (P (s[a/x])))\n 2. \\<And>P b c\\<^sub>1 Q c\\<^sub>2.\n       \\<lbrakk>\\<turnstile>\\<^sub>2 {\\<lambda>s. P s + \\<up> (bval b s)}\n                                     c\\<^sub>1 {Q};\n        \\<exists>C.\n           strip C = c\\<^sub>1 \\<and>\n           vc C Q \\<and>\n           (\\<forall>s. pre C Q s \\<le> P s + \\<up> (bval b s));\n        \\<turnstile>\\<^sub>2 {\\<lambda>s. P s + \\<up> (\\<not> bval b s)}\n                             c\\<^sub>2 {Q};\n        \\<exists>C.\n           strip C = c\\<^sub>2 \\<and>\n           vc C Q \\<and>\n           (\\<forall>s.\n               pre C Q s \\<le> P s + \\<up> (\\<not> bval b s))\\<rbrakk>\n       \\<Longrightarrow> \\<exists>C.\n                            strip C =\n                            IF b THEN c\\<^sub>1 ELSE c\\<^sub>2 \\<and>\n                            vc C Q \\<and>\n                            (\\<forall>s. pre C Q s \\<le> eSuc (P s))\n 3. \\<And>P\\<^sub>1 c\\<^sub>1 P\\<^sub>2 c\\<^sub>2 P\\<^sub>3.\n       \\<lbrakk>\\<turnstile>\\<^sub>2 {P\\<^sub>1} c\\<^sub>1 {P\\<^sub>2};\n        \\<exists>C.\n           strip C = c\\<^sub>1 \\<and>\n           vc C P\\<^sub>2 \\<and>\n           (\\<forall>s. pre C P\\<^sub>2 s \\<le> P\\<^sub>1 s);\n        \\<turnstile>\\<^sub>2 {P\\<^sub>2} c\\<^sub>2 {P\\<^sub>3};\n        \\<exists>C.\n           strip C = c\\<^sub>2 \\<and>\n           vc C P\\<^sub>3 \\<and>\n           (\\<forall>s. pre C P\\<^sub>3 s \\<le> P\\<^sub>2 s)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>C.\n                            strip C = c\\<^sub>1;; c\\<^sub>2 \\<and>\n                            vc C P\\<^sub>3 \\<and>\n                            (\\<forall>s.\n                                pre C P\\<^sub>3 s \\<le> P\\<^sub>1 s)\n 4. \\<And>I b c.\n       \\<lbrakk>\\<turnstile>\\<^sub>2 {\\<lambda>s. I s + \\<up> (bval b s)} c\n                                     {\\<lambda>t. I t + 1};\n        \\<exists>C.\n           strip C = c \\<and>\n           vc C (\\<lambda>a. I a + 1) \\<and>\n           (\\<forall>s.\n               pre C (\\<lambda>a. I a + 1) s\n               \\<le> I s + \\<up> (bval b s))\\<rbrakk>\n       \\<Longrightarrow> \\<exists>C.\n                            strip C = WHILE b DO c \\<and>\n                            vc C\n                             (\\<lambda>a.\n                                 I a + \\<up> (\\<not> bval b a)) \\<and>\n                            (\\<forall>s.\n                                pre C\n                                 (\\<lambda>a. I a + \\<up> (\\<not> bval b a))\n                                 s\n                                \\<le> I s + 1)\n 5. \\<And>P c Q P' Q'.\n       \\<lbrakk>\\<turnstile>\\<^sub>2 {P} c {Q};\n        \\<exists>C.\n           strip C = c \\<and>\n           vc C Q \\<and> (\\<forall>s. pre C Q s \\<le> P s);\n        \\<And>s. P s \\<le> P' s; \\<And>s. Q' s \\<le> Q s\\<rbrakk>\n       \\<Longrightarrow> \\<exists>C.\n                            strip C = c \\<and>\n                            vc C Q' \\<and>\n                            (\\<forall>s. pre C Q' s \\<le> P' s)", "case (Assign P a x)"], ["proof (state)\nthis:\n  \n\ngoal (5 subgoals):\n 1. \\<And>P a x.\n       \\<exists>C.\n          strip C = x ::= a \\<and>\n          vc C P \\<and> (\\<forall>s. pre C P s \\<le> eSuc (P (s[a/x])))\n 2. \\<And>P b c\\<^sub>1 Q c\\<^sub>2.\n       \\<lbrakk>\\<turnstile>\\<^sub>2 {\\<lambda>s. P s + \\<up> (bval b s)}\n                                     c\\<^sub>1 {Q};\n        \\<exists>C.\n           strip C = c\\<^sub>1 \\<and>\n           vc C Q \\<and>\n           (\\<forall>s. pre C Q s \\<le> P s + \\<up> (bval b s));\n        \\<turnstile>\\<^sub>2 {\\<lambda>s. P s + \\<up> (\\<not> bval b s)}\n                             c\\<^sub>2 {Q};\n        \\<exists>C.\n           strip C = c\\<^sub>2 \\<and>\n           vc C Q \\<and>\n           (\\<forall>s.\n               pre C Q s \\<le> P s + \\<up> (\\<not> bval b s))\\<rbrakk>\n       \\<Longrightarrow> \\<exists>C.\n                            strip C =\n                            IF b THEN c\\<^sub>1 ELSE c\\<^sub>2 \\<and>\n                            vc C Q \\<and>\n                            (\\<forall>s. pre C Q s \\<le> eSuc (P s))\n 3. \\<And>P\\<^sub>1 c\\<^sub>1 P\\<^sub>2 c\\<^sub>2 P\\<^sub>3.\n       \\<lbrakk>\\<turnstile>\\<^sub>2 {P\\<^sub>1} c\\<^sub>1 {P\\<^sub>2};\n        \\<exists>C.\n           strip C = c\\<^sub>1 \\<and>\n           vc C P\\<^sub>2 \\<and>\n           (\\<forall>s. pre C P\\<^sub>2 s \\<le> P\\<^sub>1 s);\n        \\<turnstile>\\<^sub>2 {P\\<^sub>2} c\\<^sub>2 {P\\<^sub>3};\n        \\<exists>C.\n           strip C = c\\<^sub>2 \\<and>\n           vc C P\\<^sub>3 \\<and>\n           (\\<forall>s. pre C P\\<^sub>3 s \\<le> P\\<^sub>2 s)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>C.\n                            strip C = c\\<^sub>1;; c\\<^sub>2 \\<and>\n                            vc C P\\<^sub>3 \\<and>\n                            (\\<forall>s.\n                                pre C P\\<^sub>3 s \\<le> P\\<^sub>1 s)\n 4. \\<And>I b c.\n       \\<lbrakk>\\<turnstile>\\<^sub>2 {\\<lambda>s. I s + \\<up> (bval b s)} c\n                                     {\\<lambda>t. I t + 1};\n        \\<exists>C.\n           strip C = c \\<and>\n           vc C (\\<lambda>a. I a + 1) \\<and>\n           (\\<forall>s.\n               pre C (\\<lambda>a. I a + 1) s\n               \\<le> I s + \\<up> (bval b s))\\<rbrakk>\n       \\<Longrightarrow> \\<exists>C.\n                            strip C = WHILE b DO c \\<and>\n                            vc C\n                             (\\<lambda>a.\n                                 I a + \\<up> (\\<not> bval b a)) \\<and>\n                            (\\<forall>s.\n                                pre C\n                                 (\\<lambda>a. I a + \\<up> (\\<not> bval b a))\n                                 s\n                                \\<le> I s + 1)\n 5. \\<And>P c Q P' Q'.\n       \\<lbrakk>\\<turnstile>\\<^sub>2 {P} c {Q};\n        \\<exists>C.\n           strip C = c \\<and>\n           vc C Q \\<and> (\\<forall>s. pre C Q s \\<le> P s);\n        \\<And>s. P s \\<le> P' s; \\<And>s. Q' s \\<le> Q s\\<rbrakk>\n       \\<Longrightarrow> \\<exists>C.\n                            strip C = c \\<and>\n                            vc C Q' \\<and>\n                            (\\<forall>s. pre C Q' s \\<le> P' s)", "show ?case (is \"\\<exists>C. ?C C\")"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>C.\n       strip C = x ::= a \\<and>\n       vc C P \\<and> (\\<forall>s. pre C P s \\<le> eSuc (P (s[a/x])))", "proof"], ["proof (state)\ngoal (1 subgoal):\n 1. strip ?C = x ::= a \\<and>\n    vc ?C P \\<and> (\\<forall>s. pre ?C P s \\<le> eSuc (P (s[a/x])))", "show \"?C(Aassign x a)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. strip (x ::= a) = x ::= a \\<and>\n    vc (x ::= a) P \\<and>\n    (\\<forall>s. pre (x ::= a) P s \\<le> eSuc (P (s[a/x])))", "by simp"], ["proof (state)\nthis:\n  strip (x ::= a) = x ::= a \\<and>\n  vc (x ::= a) P \\<and>\n  (\\<forall>s. pre (x ::= a) P s \\<le> eSuc (P (s[a/x])))\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>C.\n     strip C = x ::= a \\<and>\n     vc C P \\<and> (\\<forall>s. pre C P s \\<le> eSuc (P (s[a/x])))\n\ngoal (4 subgoals):\n 1. \\<And>P b c\\<^sub>1 Q c\\<^sub>2.\n       \\<lbrakk>\\<turnstile>\\<^sub>2 {\\<lambda>s. P s + \\<up> (bval b s)}\n                                     c\\<^sub>1 {Q};\n        \\<exists>C.\n           strip C = c\\<^sub>1 \\<and>\n           vc C Q \\<and>\n           (\\<forall>s. pre C Q s \\<le> P s + \\<up> (bval b s));\n        \\<turnstile>\\<^sub>2 {\\<lambda>s. P s + \\<up> (\\<not> bval b s)}\n                             c\\<^sub>2 {Q};\n        \\<exists>C.\n           strip C = c\\<^sub>2 \\<and>\n           vc C Q \\<and>\n           (\\<forall>s.\n               pre C Q s \\<le> P s + \\<up> (\\<not> bval b s))\\<rbrakk>\n       \\<Longrightarrow> \\<exists>C.\n                            strip C =\n                            IF b THEN c\\<^sub>1 ELSE c\\<^sub>2 \\<and>\n                            vc C Q \\<and>\n                            (\\<forall>s. pre C Q s \\<le> eSuc (P s))\n 2. \\<And>P\\<^sub>1 c\\<^sub>1 P\\<^sub>2 c\\<^sub>2 P\\<^sub>3.\n       \\<lbrakk>\\<turnstile>\\<^sub>2 {P\\<^sub>1} c\\<^sub>1 {P\\<^sub>2};\n        \\<exists>C.\n           strip C = c\\<^sub>1 \\<and>\n           vc C P\\<^sub>2 \\<and>\n           (\\<forall>s. pre C P\\<^sub>2 s \\<le> P\\<^sub>1 s);\n        \\<turnstile>\\<^sub>2 {P\\<^sub>2} c\\<^sub>2 {P\\<^sub>3};\n        \\<exists>C.\n           strip C = c\\<^sub>2 \\<and>\n           vc C P\\<^sub>3 \\<and>\n           (\\<forall>s. pre C P\\<^sub>3 s \\<le> P\\<^sub>2 s)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>C.\n                            strip C = c\\<^sub>1;; c\\<^sub>2 \\<and>\n                            vc C P\\<^sub>3 \\<and>\n                            (\\<forall>s.\n                                pre C P\\<^sub>3 s \\<le> P\\<^sub>1 s)\n 3. \\<And>I b c.\n       \\<lbrakk>\\<turnstile>\\<^sub>2 {\\<lambda>s. I s + \\<up> (bval b s)} c\n                                     {\\<lambda>t. I t + 1};\n        \\<exists>C.\n           strip C = c \\<and>\n           vc C (\\<lambda>a. I a + 1) \\<and>\n           (\\<forall>s.\n               pre C (\\<lambda>a. I a + 1) s\n               \\<le> I s + \\<up> (bval b s))\\<rbrakk>\n       \\<Longrightarrow> \\<exists>C.\n                            strip C = WHILE b DO c \\<and>\n                            vc C\n                             (\\<lambda>a.\n                                 I a + \\<up> (\\<not> bval b a)) \\<and>\n                            (\\<forall>s.\n                                pre C\n                                 (\\<lambda>a. I a + \\<up> (\\<not> bval b a))\n                                 s\n                                \\<le> I s + 1)\n 4. \\<And>P c Q P' Q'.\n       \\<lbrakk>\\<turnstile>\\<^sub>2 {P} c {Q};\n        \\<exists>C.\n           strip C = c \\<and>\n           vc C Q \\<and> (\\<forall>s. pre C Q s \\<le> P s);\n        \\<And>s. P s \\<le> P' s; \\<And>s. Q' s \\<le> Q s\\<rbrakk>\n       \\<Longrightarrow> \\<exists>C.\n                            strip C = c \\<and>\n                            vc C Q' \\<and>\n                            (\\<forall>s. pre C Q' s \\<le> P' s)", "next"], ["proof (state)\ngoal (4 subgoals):\n 1. \\<And>P b c\\<^sub>1 Q c\\<^sub>2.\n       \\<lbrakk>\\<turnstile>\\<^sub>2 {\\<lambda>s. P s + \\<up> (bval b s)}\n                                     c\\<^sub>1 {Q};\n        \\<exists>C.\n           strip C = c\\<^sub>1 \\<and>\n           vc C Q \\<and>\n           (\\<forall>s. pre C Q s \\<le> P s + \\<up> (bval b s));\n        \\<turnstile>\\<^sub>2 {\\<lambda>s. P s + \\<up> (\\<not> bval b s)}\n                             c\\<^sub>2 {Q};\n        \\<exists>C.\n           strip C = c\\<^sub>2 \\<and>\n           vc C Q \\<and>\n           (\\<forall>s.\n               pre C Q s \\<le> P s + \\<up> (\\<not> bval b s))\\<rbrakk>\n       \\<Longrightarrow> \\<exists>C.\n                            strip C =\n                            IF b THEN c\\<^sub>1 ELSE c\\<^sub>2 \\<and>\n                            vc C Q \\<and>\n                            (\\<forall>s. pre C Q s \\<le> eSuc (P s))\n 2. \\<And>P\\<^sub>1 c\\<^sub>1 P\\<^sub>2 c\\<^sub>2 P\\<^sub>3.\n       \\<lbrakk>\\<turnstile>\\<^sub>2 {P\\<^sub>1} c\\<^sub>1 {P\\<^sub>2};\n        \\<exists>C.\n           strip C = c\\<^sub>1 \\<and>\n           vc C P\\<^sub>2 \\<and>\n           (\\<forall>s. pre C P\\<^sub>2 s \\<le> P\\<^sub>1 s);\n        \\<turnstile>\\<^sub>2 {P\\<^sub>2} c\\<^sub>2 {P\\<^sub>3};\n        \\<exists>C.\n           strip C = c\\<^sub>2 \\<and>\n           vc C P\\<^sub>3 \\<and>\n           (\\<forall>s. pre C P\\<^sub>3 s \\<le> P\\<^sub>2 s)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>C.\n                            strip C = c\\<^sub>1;; c\\<^sub>2 \\<and>\n                            vc C P\\<^sub>3 \\<and>\n                            (\\<forall>s.\n                                pre C P\\<^sub>3 s \\<le> P\\<^sub>1 s)\n 3. \\<And>I b c.\n       \\<lbrakk>\\<turnstile>\\<^sub>2 {\\<lambda>s. I s + \\<up> (bval b s)} c\n                                     {\\<lambda>t. I t + 1};\n        \\<exists>C.\n           strip C = c \\<and>\n           vc C (\\<lambda>a. I a + 1) \\<and>\n           (\\<forall>s.\n               pre C (\\<lambda>a. I a + 1) s\n               \\<le> I s + \\<up> (bval b s))\\<rbrakk>\n       \\<Longrightarrow> \\<exists>C.\n                            strip C = WHILE b DO c \\<and>\n                            vc C\n                             (\\<lambda>a.\n                                 I a + \\<up> (\\<not> bval b a)) \\<and>\n                            (\\<forall>s.\n                                pre C\n                                 (\\<lambda>a. I a + \\<up> (\\<not> bval b a))\n                                 s\n                                \\<le> I s + 1)\n 4. \\<And>P c Q P' Q'.\n       \\<lbrakk>\\<turnstile>\\<^sub>2 {P} c {Q};\n        \\<exists>C.\n           strip C = c \\<and>\n           vc C Q \\<and> (\\<forall>s. pre C Q s \\<le> P s);\n        \\<And>s. P s \\<le> P' s; \\<And>s. Q' s \\<le> Q s\\<rbrakk>\n       \\<Longrightarrow> \\<exists>C.\n                            strip C = c \\<and>\n                            vc C Q' \\<and>\n                            (\\<forall>s. pre C Q' s \\<le> P' s)", "case (If P b c\\<^sub>1 Q c\\<^sub>2)"], ["proof (state)\nthis:\n  \\<turnstile>\\<^sub>2 {\\<lambda>s. P s + \\<up> (bval b s)} c\\<^sub>1 {Q}\n  \\<turnstile>\\<^sub>2 {\\<lambda>s. P s + \\<up> (\\<not> bval b s)} c\\<^sub>2\n                       {Q}\n  \\<exists>C.\n     strip C = c\\<^sub>1 \\<and>\n     vc C Q \\<and> (\\<forall>s. pre C Q s \\<le> P s + \\<up> (bval b s))\n  \\<exists>C.\n     strip C = c\\<^sub>2 \\<and>\n     vc C Q \\<and>\n     (\\<forall>s. pre C Q s \\<le> P s + \\<up> (\\<not> bval b s))\n\ngoal (4 subgoals):\n 1. \\<And>P b c\\<^sub>1 Q c\\<^sub>2.\n       \\<lbrakk>\\<turnstile>\\<^sub>2 {\\<lambda>s. P s + \\<up> (bval b s)}\n                                     c\\<^sub>1 {Q};\n        \\<exists>C.\n           strip C = c\\<^sub>1 \\<and>\n           vc C Q \\<and>\n           (\\<forall>s. pre C Q s \\<le> P s + \\<up> (bval b s));\n        \\<turnstile>\\<^sub>2 {\\<lambda>s. P s + \\<up> (\\<not> bval b s)}\n                             c\\<^sub>2 {Q};\n        \\<exists>C.\n           strip C = c\\<^sub>2 \\<and>\n           vc C Q \\<and>\n           (\\<forall>s.\n               pre C Q s \\<le> P s + \\<up> (\\<not> bval b s))\\<rbrakk>\n       \\<Longrightarrow> \\<exists>C.\n                            strip C =\n                            IF b THEN c\\<^sub>1 ELSE c\\<^sub>2 \\<and>\n                            vc C Q \\<and>\n                            (\\<forall>s. pre C Q s \\<le> eSuc (P s))\n 2. \\<And>P\\<^sub>1 c\\<^sub>1 P\\<^sub>2 c\\<^sub>2 P\\<^sub>3.\n       \\<lbrakk>\\<turnstile>\\<^sub>2 {P\\<^sub>1} c\\<^sub>1 {P\\<^sub>2};\n        \\<exists>C.\n           strip C = c\\<^sub>1 \\<and>\n           vc C P\\<^sub>2 \\<and>\n           (\\<forall>s. pre C P\\<^sub>2 s \\<le> P\\<^sub>1 s);\n        \\<turnstile>\\<^sub>2 {P\\<^sub>2} c\\<^sub>2 {P\\<^sub>3};\n        \\<exists>C.\n           strip C = c\\<^sub>2 \\<and>\n           vc C P\\<^sub>3 \\<and>\n           (\\<forall>s. pre C P\\<^sub>3 s \\<le> P\\<^sub>2 s)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>C.\n                            strip C = c\\<^sub>1;; c\\<^sub>2 \\<and>\n                            vc C P\\<^sub>3 \\<and>\n                            (\\<forall>s.\n                                pre C P\\<^sub>3 s \\<le> P\\<^sub>1 s)\n 3. \\<And>I b c.\n       \\<lbrakk>\\<turnstile>\\<^sub>2 {\\<lambda>s. I s + \\<up> (bval b s)} c\n                                     {\\<lambda>t. I t + 1};\n        \\<exists>C.\n           strip C = c \\<and>\n           vc C (\\<lambda>a. I a + 1) \\<and>\n           (\\<forall>s.\n               pre C (\\<lambda>a. I a + 1) s\n               \\<le> I s + \\<up> (bval b s))\\<rbrakk>\n       \\<Longrightarrow> \\<exists>C.\n                            strip C = WHILE b DO c \\<and>\n                            vc C\n                             (\\<lambda>a.\n                                 I a + \\<up> (\\<not> bval b a)) \\<and>\n                            (\\<forall>s.\n                                pre C\n                                 (\\<lambda>a. I a + \\<up> (\\<not> bval b a))\n                                 s\n                                \\<le> I s + 1)\n 4. \\<And>P c Q P' Q'.\n       \\<lbrakk>\\<turnstile>\\<^sub>2 {P} c {Q};\n        \\<exists>C.\n           strip C = c \\<and>\n           vc C Q \\<and> (\\<forall>s. pre C Q s \\<le> P s);\n        \\<And>s. P s \\<le> P' s; \\<And>s. Q' s \\<le> Q s\\<rbrakk>\n       \\<Longrightarrow> \\<exists>C.\n                            strip C = c \\<and>\n                            vc C Q' \\<and>\n                            (\\<forall>s. pre C Q' s \\<le> P' s)", "from If(3)"], ["proof (chain)\npicking this:\n  \\<exists>C.\n     strip C = c\\<^sub>1 \\<and>\n     vc C Q \\<and> (\\<forall>s. pre C Q s \\<le> P s + \\<up> (bval b s))", "obtain C1 where strip1: \"strip C1 = c\\<^sub>1\" and vc1: \"vc C1 Q\" \n    and pre1: \"(\\<And>s. pre C1 Q s \\<le> P s + \\<up> (bval b s))\""], ["proof (prove)\nusing this:\n  \\<exists>C.\n     strip C = c\\<^sub>1 \\<and>\n     vc C Q \\<and> (\\<forall>s. pre C Q s \\<le> P s + \\<up> (bval b s))\n\ngoal (1 subgoal):\n 1. (\\<And>C1.\n        \\<lbrakk>strip C1 = c\\<^sub>1; vc C1 Q;\n         \\<And>s. pre C1 Q s \\<le> P s + \\<up> (bval b s)\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by blast"], ["proof (state)\nthis:\n  strip C1 = c\\<^sub>1\n  vc C1 Q\n  pre C1 Q ?s \\<le> P ?s + \\<up> (bval b ?s)\n\ngoal (4 subgoals):\n 1. \\<And>P b c\\<^sub>1 Q c\\<^sub>2.\n       \\<lbrakk>\\<turnstile>\\<^sub>2 {\\<lambda>s. P s + \\<up> (bval b s)}\n                                     c\\<^sub>1 {Q};\n        \\<exists>C.\n           strip C = c\\<^sub>1 \\<and>\n           vc C Q \\<and>\n           (\\<forall>s. pre C Q s \\<le> P s + \\<up> (bval b s));\n        \\<turnstile>\\<^sub>2 {\\<lambda>s. P s + \\<up> (\\<not> bval b s)}\n                             c\\<^sub>2 {Q};\n        \\<exists>C.\n           strip C = c\\<^sub>2 \\<and>\n           vc C Q \\<and>\n           (\\<forall>s.\n               pre C Q s \\<le> P s + \\<up> (\\<not> bval b s))\\<rbrakk>\n       \\<Longrightarrow> \\<exists>C.\n                            strip C =\n                            IF b THEN c\\<^sub>1 ELSE c\\<^sub>2 \\<and>\n                            vc C Q \\<and>\n                            (\\<forall>s. pre C Q s \\<le> eSuc (P s))\n 2. \\<And>P\\<^sub>1 c\\<^sub>1 P\\<^sub>2 c\\<^sub>2 P\\<^sub>3.\n       \\<lbrakk>\\<turnstile>\\<^sub>2 {P\\<^sub>1} c\\<^sub>1 {P\\<^sub>2};\n        \\<exists>C.\n           strip C = c\\<^sub>1 \\<and>\n           vc C P\\<^sub>2 \\<and>\n           (\\<forall>s. pre C P\\<^sub>2 s \\<le> P\\<^sub>1 s);\n        \\<turnstile>\\<^sub>2 {P\\<^sub>2} c\\<^sub>2 {P\\<^sub>3};\n        \\<exists>C.\n           strip C = c\\<^sub>2 \\<and>\n           vc C P\\<^sub>3 \\<and>\n           (\\<forall>s. pre C P\\<^sub>3 s \\<le> P\\<^sub>2 s)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>C.\n                            strip C = c\\<^sub>1;; c\\<^sub>2 \\<and>\n                            vc C P\\<^sub>3 \\<and>\n                            (\\<forall>s.\n                                pre C P\\<^sub>3 s \\<le> P\\<^sub>1 s)\n 3. \\<And>I b c.\n       \\<lbrakk>\\<turnstile>\\<^sub>2 {\\<lambda>s. I s + \\<up> (bval b s)} c\n                                     {\\<lambda>t. I t + 1};\n        \\<exists>C.\n           strip C = c \\<and>\n           vc C (\\<lambda>a. I a + 1) \\<and>\n           (\\<forall>s.\n               pre C (\\<lambda>a. I a + 1) s\n               \\<le> I s + \\<up> (bval b s))\\<rbrakk>\n       \\<Longrightarrow> \\<exists>C.\n                            strip C = WHILE b DO c \\<and>\n                            vc C\n                             (\\<lambda>a.\n                                 I a + \\<up> (\\<not> bval b a)) \\<and>\n                            (\\<forall>s.\n                                pre C\n                                 (\\<lambda>a. I a + \\<up> (\\<not> bval b a))\n                                 s\n                                \\<le> I s + 1)\n 4. \\<And>P c Q P' Q'.\n       \\<lbrakk>\\<turnstile>\\<^sub>2 {P} c {Q};\n        \\<exists>C.\n           strip C = c \\<and>\n           vc C Q \\<and> (\\<forall>s. pre C Q s \\<le> P s);\n        \\<And>s. P s \\<le> P' s; \\<And>s. Q' s \\<le> Q s\\<rbrakk>\n       \\<Longrightarrow> \\<exists>C.\n                            strip C = c \\<and>\n                            vc C Q' \\<and>\n                            (\\<forall>s. pre C Q' s \\<le> P' s)", "from If(4)"], ["proof (chain)\npicking this:\n  \\<exists>C.\n     strip C = c\\<^sub>2 \\<and>\n     vc C Q \\<and>\n     (\\<forall>s. pre C Q s \\<le> P s + \\<up> (\\<not> bval b s))", "obtain C2 where strip2: \"strip C2 = c\\<^sub>2\" and vc2: \"vc C2 Q\" \n    and pre2: \"(\\<And>s. pre C2 Q s \\<le> P s + \\<up> (\\<not> bval b s))\""], ["proof (prove)\nusing this:\n  \\<exists>C.\n     strip C = c\\<^sub>2 \\<and>\n     vc C Q \\<and>\n     (\\<forall>s. pre C Q s \\<le> P s + \\<up> (\\<not> bval b s))\n\ngoal (1 subgoal):\n 1. (\\<And>C2.\n        \\<lbrakk>strip C2 = c\\<^sub>2; vc C2 Q;\n         \\<And>s. pre C2 Q s \\<le> P s + \\<up> (\\<not> bval b s)\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by blast"], ["proof (state)\nthis:\n  strip C2 = c\\<^sub>2\n  vc C2 Q\n  pre C2 Q ?s \\<le> P ?s + \\<up> (\\<not> bval b ?s)\n\ngoal (4 subgoals):\n 1. \\<And>P b c\\<^sub>1 Q c\\<^sub>2.\n       \\<lbrakk>\\<turnstile>\\<^sub>2 {\\<lambda>s. P s + \\<up> (bval b s)}\n                                     c\\<^sub>1 {Q};\n        \\<exists>C.\n           strip C = c\\<^sub>1 \\<and>\n           vc C Q \\<and>\n           (\\<forall>s. pre C Q s \\<le> P s + \\<up> (bval b s));\n        \\<turnstile>\\<^sub>2 {\\<lambda>s. P s + \\<up> (\\<not> bval b s)}\n                             c\\<^sub>2 {Q};\n        \\<exists>C.\n           strip C = c\\<^sub>2 \\<and>\n           vc C Q \\<and>\n           (\\<forall>s.\n               pre C Q s \\<le> P s + \\<up> (\\<not> bval b s))\\<rbrakk>\n       \\<Longrightarrow> \\<exists>C.\n                            strip C =\n                            IF b THEN c\\<^sub>1 ELSE c\\<^sub>2 \\<and>\n                            vc C Q \\<and>\n                            (\\<forall>s. pre C Q s \\<le> eSuc (P s))\n 2. \\<And>P\\<^sub>1 c\\<^sub>1 P\\<^sub>2 c\\<^sub>2 P\\<^sub>3.\n       \\<lbrakk>\\<turnstile>\\<^sub>2 {P\\<^sub>1} c\\<^sub>1 {P\\<^sub>2};\n        \\<exists>C.\n           strip C = c\\<^sub>1 \\<and>\n           vc C P\\<^sub>2 \\<and>\n           (\\<forall>s. pre C P\\<^sub>2 s \\<le> P\\<^sub>1 s);\n        \\<turnstile>\\<^sub>2 {P\\<^sub>2} c\\<^sub>2 {P\\<^sub>3};\n        \\<exists>C.\n           strip C = c\\<^sub>2 \\<and>\n           vc C P\\<^sub>3 \\<and>\n           (\\<forall>s. pre C P\\<^sub>3 s \\<le> P\\<^sub>2 s)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>C.\n                            strip C = c\\<^sub>1;; c\\<^sub>2 \\<and>\n                            vc C P\\<^sub>3 \\<and>\n                            (\\<forall>s.\n                                pre C P\\<^sub>3 s \\<le> P\\<^sub>1 s)\n 3. \\<And>I b c.\n       \\<lbrakk>\\<turnstile>\\<^sub>2 {\\<lambda>s. I s + \\<up> (bval b s)} c\n                                     {\\<lambda>t. I t + 1};\n        \\<exists>C.\n           strip C = c \\<and>\n           vc C (\\<lambda>a. I a + 1) \\<and>\n           (\\<forall>s.\n               pre C (\\<lambda>a. I a + 1) s\n               \\<le> I s + \\<up> (bval b s))\\<rbrakk>\n       \\<Longrightarrow> \\<exists>C.\n                            strip C = WHILE b DO c \\<and>\n                            vc C\n                             (\\<lambda>a.\n                                 I a + \\<up> (\\<not> bval b a)) \\<and>\n                            (\\<forall>s.\n                                pre C\n                                 (\\<lambda>a. I a + \\<up> (\\<not> bval b a))\n                                 s\n                                \\<le> I s + 1)\n 4. \\<And>P c Q P' Q'.\n       \\<lbrakk>\\<turnstile>\\<^sub>2 {P} c {Q};\n        \\<exists>C.\n           strip C = c \\<and>\n           vc C Q \\<and> (\\<forall>s. pre C Q s \\<le> P s);\n        \\<And>s. P s \\<le> P' s; \\<And>s. Q' s \\<le> Q s\\<rbrakk>\n       \\<Longrightarrow> \\<exists>C.\n                            strip C = c \\<and>\n                            vc C Q' \\<and>\n                            (\\<forall>s. pre C Q' s \\<le> P' s)", "show ?case"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>C.\n       strip C = IF b THEN c\\<^sub>1 ELSE c\\<^sub>2 \\<and>\n       vc C Q \\<and> (\\<forall>s. pre C Q s \\<le> eSuc (P s))", "apply(rule exI[where x=\"IF b THEN C1 ELSE C2\"], safe)"], ["proof (prove)\ngoal (3 subgoals):\n 1. strip (IF b THEN C1 ELSE C2) = IF b THEN c\\<^sub>1 ELSE c\\<^sub>2\n 2. vc (IF b THEN C1 ELSE C2) Q\n 3. \\<And>s. pre (IF b THEN C1 ELSE C2) Q s \\<le> eSuc (P s)", "subgoal"], ["proof (prove)\ngoal (1 subgoal):\n 1. strip (IF b THEN C1 ELSE C2) = IF b THEN c\\<^sub>1 ELSE c\\<^sub>2", "using strip1 strip2"], ["proof (prove)\nusing this:\n  strip C1 = c\\<^sub>1\n  strip C2 = c\\<^sub>2\n\ngoal (1 subgoal):\n 1. strip (IF b THEN C1 ELSE C2) = IF b THEN c\\<^sub>1 ELSE c\\<^sub>2", "by auto"], ["proof (prove)\ngoal (2 subgoals):\n 1. vc (IF b THEN C1 ELSE C2) Q\n 2. \\<And>s. pre (IF b THEN C1 ELSE C2) Q s \\<le> eSuc (P s)", "subgoal"], ["proof (prove)\ngoal (1 subgoal):\n 1. vc (IF b THEN C1 ELSE C2) Q", "using vc1 vc2"], ["proof (prove)\nusing this:\n  vc C1 Q\n  vc C2 Q\n\ngoal (1 subgoal):\n 1. vc (IF b THEN C1 ELSE C2) Q", "by auto"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>s. pre (IF b THEN C1 ELSE C2) Q s \\<le> eSuc (P s)", "subgoal for s"], ["proof (prove)\ngoal (1 subgoal):\n 1. pre (IF b THEN C1 ELSE C2) Q s \\<le> eSuc (P s)", "using pre1[of s] pre2[of s]"], ["proof (prove)\nusing this:\n  pre C1 Q s \\<le> P s + \\<up> (bval b s)\n  pre C2 Q s \\<le> P s + \\<up> (\\<not> bval b s)\n\ngoal (1 subgoal):\n 1. pre (IF b THEN C1 ELSE C2) Q s \\<le> eSuc (P s)", "by auto"], ["proof (prove)\ngoal:\nNo subgoals!", "done"], ["proof (state)\nthis:\n  \\<exists>C.\n     strip C = IF b THEN c\\<^sub>1 ELSE c\\<^sub>2 \\<and>\n     vc C Q \\<and> (\\<forall>s. pre C Q s \\<le> eSuc (P s))\n\ngoal (3 subgoals):\n 1. \\<And>P\\<^sub>1 c\\<^sub>1 P\\<^sub>2 c\\<^sub>2 P\\<^sub>3.\n       \\<lbrakk>\\<turnstile>\\<^sub>2 {P\\<^sub>1} c\\<^sub>1 {P\\<^sub>2};\n        \\<exists>C.\n           strip C = c\\<^sub>1 \\<and>\n           vc C P\\<^sub>2 \\<and>\n           (\\<forall>s. pre C P\\<^sub>2 s \\<le> P\\<^sub>1 s);\n        \\<turnstile>\\<^sub>2 {P\\<^sub>2} c\\<^sub>2 {P\\<^sub>3};\n        \\<exists>C.\n           strip C = c\\<^sub>2 \\<and>\n           vc C P\\<^sub>3 \\<and>\n           (\\<forall>s. pre C P\\<^sub>3 s \\<le> P\\<^sub>2 s)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>C.\n                            strip C = c\\<^sub>1;; c\\<^sub>2 \\<and>\n                            vc C P\\<^sub>3 \\<and>\n                            (\\<forall>s.\n                                pre C P\\<^sub>3 s \\<le> P\\<^sub>1 s)\n 2. \\<And>I b c.\n       \\<lbrakk>\\<turnstile>\\<^sub>2 {\\<lambda>s. I s + \\<up> (bval b s)} c\n                                     {\\<lambda>t. I t + 1};\n        \\<exists>C.\n           strip C = c \\<and>\n           vc C (\\<lambda>a. I a + 1) \\<and>\n           (\\<forall>s.\n               pre C (\\<lambda>a. I a + 1) s\n               \\<le> I s + \\<up> (bval b s))\\<rbrakk>\n       \\<Longrightarrow> \\<exists>C.\n                            strip C = WHILE b DO c \\<and>\n                            vc C\n                             (\\<lambda>a.\n                                 I a + \\<up> (\\<not> bval b a)) \\<and>\n                            (\\<forall>s.\n                                pre C\n                                 (\\<lambda>a. I a + \\<up> (\\<not> bval b a))\n                                 s\n                                \\<le> I s + 1)\n 3. \\<And>P c Q P' Q'.\n       \\<lbrakk>\\<turnstile>\\<^sub>2 {P} c {Q};\n        \\<exists>C.\n           strip C = c \\<and>\n           vc C Q \\<and> (\\<forall>s. pre C Q s \\<le> P s);\n        \\<And>s. P s \\<le> P' s; \\<And>s. Q' s \\<le> Q s\\<rbrakk>\n       \\<Longrightarrow> \\<exists>C.\n                            strip C = c \\<and>\n                            vc C Q' \\<and>\n                            (\\<forall>s. pre C Q' s \\<le> P' s)", "next"], ["proof (state)\ngoal (3 subgoals):\n 1. \\<And>P\\<^sub>1 c\\<^sub>1 P\\<^sub>2 c\\<^sub>2 P\\<^sub>3.\n       \\<lbrakk>\\<turnstile>\\<^sub>2 {P\\<^sub>1} c\\<^sub>1 {P\\<^sub>2};\n        \\<exists>C.\n           strip C = c\\<^sub>1 \\<and>\n           vc C P\\<^sub>2 \\<and>\n           (\\<forall>s. pre C P\\<^sub>2 s \\<le> P\\<^sub>1 s);\n        \\<turnstile>\\<^sub>2 {P\\<^sub>2} c\\<^sub>2 {P\\<^sub>3};\n        \\<exists>C.\n           strip C = c\\<^sub>2 \\<and>\n           vc C P\\<^sub>3 \\<and>\n           (\\<forall>s. pre C P\\<^sub>3 s \\<le> P\\<^sub>2 s)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>C.\n                            strip C = c\\<^sub>1;; c\\<^sub>2 \\<and>\n                            vc C P\\<^sub>3 \\<and>\n                            (\\<forall>s.\n                                pre C P\\<^sub>3 s \\<le> P\\<^sub>1 s)\n 2. \\<And>I b c.\n       \\<lbrakk>\\<turnstile>\\<^sub>2 {\\<lambda>s. I s + \\<up> (bval b s)} c\n                                     {\\<lambda>t. I t + 1};\n        \\<exists>C.\n           strip C = c \\<and>\n           vc C (\\<lambda>a. I a + 1) \\<and>\n           (\\<forall>s.\n               pre C (\\<lambda>a. I a + 1) s\n               \\<le> I s + \\<up> (bval b s))\\<rbrakk>\n       \\<Longrightarrow> \\<exists>C.\n                            strip C = WHILE b DO c \\<and>\n                            vc C\n                             (\\<lambda>a.\n                                 I a + \\<up> (\\<not> bval b a)) \\<and>\n                            (\\<forall>s.\n                                pre C\n                                 (\\<lambda>a. I a + \\<up> (\\<not> bval b a))\n                                 s\n                                \\<le> I s + 1)\n 3. \\<And>P c Q P' Q'.\n       \\<lbrakk>\\<turnstile>\\<^sub>2 {P} c {Q};\n        \\<exists>C.\n           strip C = c \\<and>\n           vc C Q \\<and> (\\<forall>s. pre C Q s \\<le> P s);\n        \\<And>s. P s \\<le> P' s; \\<And>s. Q' s \\<le> Q s\\<rbrakk>\n       \\<Longrightarrow> \\<exists>C.\n                            strip C = c \\<and>\n                            vc C Q' \\<and>\n                            (\\<forall>s. pre C Q' s \\<le> P' s)", "case (Seq P\\<^sub>1 c\\<^sub>1 P\\<^sub>2 c\\<^sub>2 P\\<^sub>3)"], ["proof (state)\nthis:\n  \\<turnstile>\\<^sub>2 {P\\<^sub>1} c\\<^sub>1 {P\\<^sub>2}\n  \\<turnstile>\\<^sub>2 {P\\<^sub>2} c\\<^sub>2 {P\\<^sub>3}\n  \\<exists>C.\n     strip C = c\\<^sub>1 \\<and>\n     vc C P\\<^sub>2 \\<and> (\\<forall>s. pre C P\\<^sub>2 s \\<le> P\\<^sub>1 s)\n  \\<exists>C.\n     strip C = c\\<^sub>2 \\<and>\n     vc C P\\<^sub>3 \\<and> (\\<forall>s. pre C P\\<^sub>3 s \\<le> P\\<^sub>2 s)\n\ngoal (3 subgoals):\n 1. \\<And>P\\<^sub>1 c\\<^sub>1 P\\<^sub>2 c\\<^sub>2 P\\<^sub>3.\n       \\<lbrakk>\\<turnstile>\\<^sub>2 {P\\<^sub>1} c\\<^sub>1 {P\\<^sub>2};\n        \\<exists>C.\n           strip C = c\\<^sub>1 \\<and>\n           vc C P\\<^sub>2 \\<and>\n           (\\<forall>s. pre C P\\<^sub>2 s \\<le> P\\<^sub>1 s);\n        \\<turnstile>\\<^sub>2 {P\\<^sub>2} c\\<^sub>2 {P\\<^sub>3};\n        \\<exists>C.\n           strip C = c\\<^sub>2 \\<and>\n           vc C P\\<^sub>3 \\<and>\n           (\\<forall>s. pre C P\\<^sub>3 s \\<le> P\\<^sub>2 s)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>C.\n                            strip C = c\\<^sub>1;; c\\<^sub>2 \\<and>\n                            vc C P\\<^sub>3 \\<and>\n                            (\\<forall>s.\n                                pre C P\\<^sub>3 s \\<le> P\\<^sub>1 s)\n 2. \\<And>I b c.\n       \\<lbrakk>\\<turnstile>\\<^sub>2 {\\<lambda>s. I s + \\<up> (bval b s)} c\n                                     {\\<lambda>t. I t + 1};\n        \\<exists>C.\n           strip C = c \\<and>\n           vc C (\\<lambda>a. I a + 1) \\<and>\n           (\\<forall>s.\n               pre C (\\<lambda>a. I a + 1) s\n               \\<le> I s + \\<up> (bval b s))\\<rbrakk>\n       \\<Longrightarrow> \\<exists>C.\n                            strip C = WHILE b DO c \\<and>\n                            vc C\n                             (\\<lambda>a.\n                                 I a + \\<up> (\\<not> bval b a)) \\<and>\n                            (\\<forall>s.\n                                pre C\n                                 (\\<lambda>a. I a + \\<up> (\\<not> bval b a))\n                                 s\n                                \\<le> I s + 1)\n 3. \\<And>P c Q P' Q'.\n       \\<lbrakk>\\<turnstile>\\<^sub>2 {P} c {Q};\n        \\<exists>C.\n           strip C = c \\<and>\n           vc C Q \\<and> (\\<forall>s. pre C Q s \\<le> P s);\n        \\<And>s. P s \\<le> P' s; \\<And>s. Q' s \\<le> Q s\\<rbrakk>\n       \\<Longrightarrow> \\<exists>C.\n                            strip C = c \\<and>\n                            vc C Q' \\<and>\n                            (\\<forall>s. pre C Q' s \\<le> P' s)", "from Seq(3)"], ["proof (chain)\npicking this:\n  \\<exists>C.\n     strip C = c\\<^sub>1 \\<and>\n     vc C P\\<^sub>2 \\<and> (\\<forall>s. pre C P\\<^sub>2 s \\<le> P\\<^sub>1 s)", "obtain C1 where strip1: \"strip C1 = c\\<^sub>1\" and vc1: \"vc C1 P\\<^sub>2\"\n    and pre1: \"(\\<forall>s. pre C1 P\\<^sub>2 s \\<le> P\\<^sub>1 s)\""], ["proof (prove)\nusing this:\n  \\<exists>C.\n     strip C = c\\<^sub>1 \\<and>\n     vc C P\\<^sub>2 \\<and> (\\<forall>s. pre C P\\<^sub>2 s \\<le> P\\<^sub>1 s)\n\ngoal (1 subgoal):\n 1. (\\<And>C1.\n        \\<lbrakk>strip C1 = c\\<^sub>1; vc C1 P\\<^sub>2;\n         \\<forall>s. pre C1 P\\<^sub>2 s \\<le> P\\<^sub>1 s\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by blast"], ["proof (state)\nthis:\n  strip C1 = c\\<^sub>1\n  vc C1 P\\<^sub>2\n  \\<forall>s. pre C1 P\\<^sub>2 s \\<le> P\\<^sub>1 s\n\ngoal (3 subgoals):\n 1. \\<And>P\\<^sub>1 c\\<^sub>1 P\\<^sub>2 c\\<^sub>2 P\\<^sub>3.\n       \\<lbrakk>\\<turnstile>\\<^sub>2 {P\\<^sub>1} c\\<^sub>1 {P\\<^sub>2};\n        \\<exists>C.\n           strip C = c\\<^sub>1 \\<and>\n           vc C P\\<^sub>2 \\<and>\n           (\\<forall>s. pre C P\\<^sub>2 s \\<le> P\\<^sub>1 s);\n        \\<turnstile>\\<^sub>2 {P\\<^sub>2} c\\<^sub>2 {P\\<^sub>3};\n        \\<exists>C.\n           strip C = c\\<^sub>2 \\<and>\n           vc C P\\<^sub>3 \\<and>\n           (\\<forall>s. pre C P\\<^sub>3 s \\<le> P\\<^sub>2 s)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>C.\n                            strip C = c\\<^sub>1;; c\\<^sub>2 \\<and>\n                            vc C P\\<^sub>3 \\<and>\n                            (\\<forall>s.\n                                pre C P\\<^sub>3 s \\<le> P\\<^sub>1 s)\n 2. \\<And>I b c.\n       \\<lbrakk>\\<turnstile>\\<^sub>2 {\\<lambda>s. I s + \\<up> (bval b s)} c\n                                     {\\<lambda>t. I t + 1};\n        \\<exists>C.\n           strip C = c \\<and>\n           vc C (\\<lambda>a. I a + 1) \\<and>\n           (\\<forall>s.\n               pre C (\\<lambda>a. I a + 1) s\n               \\<le> I s + \\<up> (bval b s))\\<rbrakk>\n       \\<Longrightarrow> \\<exists>C.\n                            strip C = WHILE b DO c \\<and>\n                            vc C\n                             (\\<lambda>a.\n                                 I a + \\<up> (\\<not> bval b a)) \\<and>\n                            (\\<forall>s.\n                                pre C\n                                 (\\<lambda>a. I a + \\<up> (\\<not> bval b a))\n                                 s\n                                \\<le> I s + 1)\n 3. \\<And>P c Q P' Q'.\n       \\<lbrakk>\\<turnstile>\\<^sub>2 {P} c {Q};\n        \\<exists>C.\n           strip C = c \\<and>\n           vc C Q \\<and> (\\<forall>s. pre C Q s \\<le> P s);\n        \\<And>s. P s \\<le> P' s; \\<And>s. Q' s \\<le> Q s\\<rbrakk>\n       \\<Longrightarrow> \\<exists>C.\n                            strip C = c \\<and>\n                            vc C Q' \\<and>\n                            (\\<forall>s. pre C Q' s \\<le> P' s)", "from Seq(4)"], ["proof (chain)\npicking this:\n  \\<exists>C.\n     strip C = c\\<^sub>2 \\<and>\n     vc C P\\<^sub>3 \\<and> (\\<forall>s. pre C P\\<^sub>3 s \\<le> P\\<^sub>2 s)", "obtain C2 where strip2: \"strip C2 = c\\<^sub>2\" and vc2: \"vc C2 P\\<^sub>3\"\n    and pre2: \"(\\<forall>s. pre C2 P\\<^sub>3 s \\<le> P\\<^sub>2 s)\""], ["proof (prove)\nusing this:\n  \\<exists>C.\n     strip C = c\\<^sub>2 \\<and>\n     vc C P\\<^sub>3 \\<and> (\\<forall>s. pre C P\\<^sub>3 s \\<le> P\\<^sub>2 s)\n\ngoal (1 subgoal):\n 1. (\\<And>C2.\n        \\<lbrakk>strip C2 = c\\<^sub>2; vc C2 P\\<^sub>3;\n         \\<forall>s. pre C2 P\\<^sub>3 s \\<le> P\\<^sub>2 s\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by blast"], ["proof (state)\nthis:\n  strip C2 = c\\<^sub>2\n  vc C2 P\\<^sub>3\n  \\<forall>s. pre C2 P\\<^sub>3 s \\<le> P\\<^sub>2 s\n\ngoal (3 subgoals):\n 1. \\<And>P\\<^sub>1 c\\<^sub>1 P\\<^sub>2 c\\<^sub>2 P\\<^sub>3.\n       \\<lbrakk>\\<turnstile>\\<^sub>2 {P\\<^sub>1} c\\<^sub>1 {P\\<^sub>2};\n        \\<exists>C.\n           strip C = c\\<^sub>1 \\<and>\n           vc C P\\<^sub>2 \\<and>\n           (\\<forall>s. pre C P\\<^sub>2 s \\<le> P\\<^sub>1 s);\n        \\<turnstile>\\<^sub>2 {P\\<^sub>2} c\\<^sub>2 {P\\<^sub>3};\n        \\<exists>C.\n           strip C = c\\<^sub>2 \\<and>\n           vc C P\\<^sub>3 \\<and>\n           (\\<forall>s. pre C P\\<^sub>3 s \\<le> P\\<^sub>2 s)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>C.\n                            strip C = c\\<^sub>1;; c\\<^sub>2 \\<and>\n                            vc C P\\<^sub>3 \\<and>\n                            (\\<forall>s.\n                                pre C P\\<^sub>3 s \\<le> P\\<^sub>1 s)\n 2. \\<And>I b c.\n       \\<lbrakk>\\<turnstile>\\<^sub>2 {\\<lambda>s. I s + \\<up> (bval b s)} c\n                                     {\\<lambda>t. I t + 1};\n        \\<exists>C.\n           strip C = c \\<and>\n           vc C (\\<lambda>a. I a + 1) \\<and>\n           (\\<forall>s.\n               pre C (\\<lambda>a. I a + 1) s\n               \\<le> I s + \\<up> (bval b s))\\<rbrakk>\n       \\<Longrightarrow> \\<exists>C.\n                            strip C = WHILE b DO c \\<and>\n                            vc C\n                             (\\<lambda>a.\n                                 I a + \\<up> (\\<not> bval b a)) \\<and>\n                            (\\<forall>s.\n                                pre C\n                                 (\\<lambda>a. I a + \\<up> (\\<not> bval b a))\n                                 s\n                                \\<le> I s + 1)\n 3. \\<And>P c Q P' Q'.\n       \\<lbrakk>\\<turnstile>\\<^sub>2 {P} c {Q};\n        \\<exists>C.\n           strip C = c \\<and>\n           vc C Q \\<and> (\\<forall>s. pre C Q s \\<le> P s);\n        \\<And>s. P s \\<le> P' s; \\<And>s. Q' s \\<le> Q s\\<rbrakk>\n       \\<Longrightarrow> \\<exists>C.\n                            strip C = c \\<and>\n                            vc C Q' \\<and>\n                            (\\<forall>s. pre C Q' s \\<le> P' s)", "{"], ["proof (state)\nthis:\n  strip C2 = c\\<^sub>2\n  vc C2 P\\<^sub>3\n  \\<forall>s. pre C2 P\\<^sub>3 s \\<le> P\\<^sub>2 s\n\ngoal (3 subgoals):\n 1. \\<And>P\\<^sub>1 c\\<^sub>1 P\\<^sub>2 c\\<^sub>2 P\\<^sub>3.\n       \\<lbrakk>\\<turnstile>\\<^sub>2 {P\\<^sub>1} c\\<^sub>1 {P\\<^sub>2};\n        \\<exists>C.\n           strip C = c\\<^sub>1 \\<and>\n           vc C P\\<^sub>2 \\<and>\n           (\\<forall>s. pre C P\\<^sub>2 s \\<le> P\\<^sub>1 s);\n        \\<turnstile>\\<^sub>2 {P\\<^sub>2} c\\<^sub>2 {P\\<^sub>3};\n        \\<exists>C.\n           strip C = c\\<^sub>2 \\<and>\n           vc C P\\<^sub>3 \\<and>\n           (\\<forall>s. pre C P\\<^sub>3 s \\<le> P\\<^sub>2 s)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>C.\n                            strip C = c\\<^sub>1;; c\\<^sub>2 \\<and>\n                            vc C P\\<^sub>3 \\<and>\n                            (\\<forall>s.\n                                pre C P\\<^sub>3 s \\<le> P\\<^sub>1 s)\n 2. \\<And>I b c.\n       \\<lbrakk>\\<turnstile>\\<^sub>2 {\\<lambda>s. I s + \\<up> (bval b s)} c\n                                     {\\<lambda>t. I t + 1};\n        \\<exists>C.\n           strip C = c \\<and>\n           vc C (\\<lambda>a. I a + 1) \\<and>\n           (\\<forall>s.\n               pre C (\\<lambda>a. I a + 1) s\n               \\<le> I s + \\<up> (bval b s))\\<rbrakk>\n       \\<Longrightarrow> \\<exists>C.\n                            strip C = WHILE b DO c \\<and>\n                            vc C\n                             (\\<lambda>a.\n                                 I a + \\<up> (\\<not> bval b a)) \\<and>\n                            (\\<forall>s.\n                                pre C\n                                 (\\<lambda>a. I a + \\<up> (\\<not> bval b a))\n                                 s\n                                \\<le> I s + 1)\n 3. \\<And>P c Q P' Q'.\n       \\<lbrakk>\\<turnstile>\\<^sub>2 {P} c {Q};\n        \\<exists>C.\n           strip C = c \\<and>\n           vc C Q \\<and> (\\<forall>s. pre C Q s \\<le> P s);\n        \\<And>s. P s \\<le> P' s; \\<And>s. Q' s \\<le> Q s\\<rbrakk>\n       \\<Longrightarrow> \\<exists>C.\n                            strip C = c \\<and>\n                            vc C Q' \\<and>\n                            (\\<forall>s. pre C Q' s \\<le> P' s)", "fix s"], ["proof (state)\ngoal (3 subgoals):\n 1. \\<And>P\\<^sub>1 c\\<^sub>1 P\\<^sub>2 c\\<^sub>2 P\\<^sub>3.\n       \\<lbrakk>\\<turnstile>\\<^sub>2 {P\\<^sub>1} c\\<^sub>1 {P\\<^sub>2};\n        \\<exists>C.\n           strip C = c\\<^sub>1 \\<and>\n           vc C P\\<^sub>2 \\<and>\n           (\\<forall>s. pre C P\\<^sub>2 s \\<le> P\\<^sub>1 s);\n        \\<turnstile>\\<^sub>2 {P\\<^sub>2} c\\<^sub>2 {P\\<^sub>3};\n        \\<exists>C.\n           strip C = c\\<^sub>2 \\<and>\n           vc C P\\<^sub>3 \\<and>\n           (\\<forall>s. pre C P\\<^sub>3 s \\<le> P\\<^sub>2 s)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>C.\n                            strip C = c\\<^sub>1;; c\\<^sub>2 \\<and>\n                            vc C P\\<^sub>3 \\<and>\n                            (\\<forall>s.\n                                pre C P\\<^sub>3 s \\<le> P\\<^sub>1 s)\n 2. \\<And>I b c.\n       \\<lbrakk>\\<turnstile>\\<^sub>2 {\\<lambda>s. I s + \\<up> (bval b s)} c\n                                     {\\<lambda>t. I t + 1};\n        \\<exists>C.\n           strip C = c \\<and>\n           vc C (\\<lambda>a. I a + 1) \\<and>\n           (\\<forall>s.\n               pre C (\\<lambda>a. I a + 1) s\n               \\<le> I s + \\<up> (bval b s))\\<rbrakk>\n       \\<Longrightarrow> \\<exists>C.\n                            strip C = WHILE b DO c \\<and>\n                            vc C\n                             (\\<lambda>a.\n                                 I a + \\<up> (\\<not> bval b a)) \\<and>\n                            (\\<forall>s.\n                                pre C\n                                 (\\<lambda>a. I a + \\<up> (\\<not> bval b a))\n                                 s\n                                \\<le> I s + 1)\n 3. \\<And>P c Q P' Q'.\n       \\<lbrakk>\\<turnstile>\\<^sub>2 {P} c {Q};\n        \\<exists>C.\n           strip C = c \\<and>\n           vc C Q \\<and> (\\<forall>s. pre C Q s \\<le> P s);\n        \\<And>s. P s \\<le> P' s; \\<And>s. Q' s \\<le> Q s\\<rbrakk>\n       \\<Longrightarrow> \\<exists>C.\n                            strip C = c \\<and>\n                            vc C Q' \\<and>\n                            (\\<forall>s. pre C Q' s \\<le> P' s)", "have \"pre C1 (pre C2 P\\<^sub>3) s \\<le> P\\<^sub>1 s\""], ["proof (prove)\ngoal (1 subgoal):\n 1. pre C1 (pre C2 P\\<^sub>3) s \\<le> P\\<^sub>1 s", "apply(rule order.trans[where b=\"pre C1 P\\<^sub>2 s\"])"], ["proof (prove)\ngoal (2 subgoals):\n 1. pre C1 (pre C2 P\\<^sub>3) s \\<le> pre C1 P\\<^sub>2 s\n 2. pre C1 P\\<^sub>2 s \\<le> P\\<^sub>1 s", "apply(rule pre_mono)"], ["proof (prove)\ngoal (2 subgoals):\n 1. \\<And>s. pre C2 P\\<^sub>3 s \\<le> P\\<^sub>2 s\n 2. pre C1 P\\<^sub>2 s \\<le> P\\<^sub>1 s", "using pre2"], ["proof (prove)\nusing this:\n  \\<forall>s. pre C2 P\\<^sub>3 s \\<le> P\\<^sub>2 s\n\ngoal (2 subgoals):\n 1. \\<And>s. pre C2 P\\<^sub>3 s \\<le> P\\<^sub>2 s\n 2. pre C1 P\\<^sub>2 s \\<le> P\\<^sub>1 s", "apply simp"], ["proof (prove)\ngoal (1 subgoal):\n 1. pre C1 P\\<^sub>2 s \\<le> P\\<^sub>1 s", "using pre1"], ["proof (prove)\nusing this:\n  \\<forall>s. pre C1 P\\<^sub>2 s \\<le> P\\<^sub>1 s\n\ngoal (1 subgoal):\n 1. pre C1 P\\<^sub>2 s \\<le> P\\<^sub>1 s", "by simp"], ["proof (state)\nthis:\n  pre C1 (pre C2 P\\<^sub>3) s \\<le> P\\<^sub>1 s\n\ngoal (3 subgoals):\n 1. \\<And>P\\<^sub>1 c\\<^sub>1 P\\<^sub>2 c\\<^sub>2 P\\<^sub>3.\n       \\<lbrakk>\\<turnstile>\\<^sub>2 {P\\<^sub>1} c\\<^sub>1 {P\\<^sub>2};\n        \\<exists>C.\n           strip C = c\\<^sub>1 \\<and>\n           vc C P\\<^sub>2 \\<and>\n           (\\<forall>s. pre C P\\<^sub>2 s \\<le> P\\<^sub>1 s);\n        \\<turnstile>\\<^sub>2 {P\\<^sub>2} c\\<^sub>2 {P\\<^sub>3};\n        \\<exists>C.\n           strip C = c\\<^sub>2 \\<and>\n           vc C P\\<^sub>3 \\<and>\n           (\\<forall>s. pre C P\\<^sub>3 s \\<le> P\\<^sub>2 s)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>C.\n                            strip C = c\\<^sub>1;; c\\<^sub>2 \\<and>\n                            vc C P\\<^sub>3 \\<and>\n                            (\\<forall>s.\n                                pre C P\\<^sub>3 s \\<le> P\\<^sub>1 s)\n 2. \\<And>I b c.\n       \\<lbrakk>\\<turnstile>\\<^sub>2 {\\<lambda>s. I s + \\<up> (bval b s)} c\n                                     {\\<lambda>t. I t + 1};\n        \\<exists>C.\n           strip C = c \\<and>\n           vc C (\\<lambda>a. I a + 1) \\<and>\n           (\\<forall>s.\n               pre C (\\<lambda>a. I a + 1) s\n               \\<le> I s + \\<up> (bval b s))\\<rbrakk>\n       \\<Longrightarrow> \\<exists>C.\n                            strip C = WHILE b DO c \\<and>\n                            vc C\n                             (\\<lambda>a.\n                                 I a + \\<up> (\\<not> bval b a)) \\<and>\n                            (\\<forall>s.\n                                pre C\n                                 (\\<lambda>a. I a + \\<up> (\\<not> bval b a))\n                                 s\n                                \\<le> I s + 1)\n 3. \\<And>P c Q P' Q'.\n       \\<lbrakk>\\<turnstile>\\<^sub>2 {P} c {Q};\n        \\<exists>C.\n           strip C = c \\<and>\n           vc C Q \\<and> (\\<forall>s. pre C Q s \\<le> P s);\n        \\<And>s. P s \\<le> P' s; \\<And>s. Q' s \\<le> Q s\\<rbrakk>\n       \\<Longrightarrow> \\<exists>C.\n                            strip C = c \\<and>\n                            vc C Q' \\<and>\n                            (\\<forall>s. pre C Q' s \\<le> P' s)", "}"], ["proof (state)\nthis:\n  pre C1 (pre C2 P\\<^sub>3) ?s2 \\<le> P\\<^sub>1 ?s2\n\ngoal (3 subgoals):\n 1. \\<And>P\\<^sub>1 c\\<^sub>1 P\\<^sub>2 c\\<^sub>2 P\\<^sub>3.\n       \\<lbrakk>\\<turnstile>\\<^sub>2 {P\\<^sub>1} c\\<^sub>1 {P\\<^sub>2};\n        \\<exists>C.\n           strip C = c\\<^sub>1 \\<and>\n           vc C P\\<^sub>2 \\<and>\n           (\\<forall>s. pre C P\\<^sub>2 s \\<le> P\\<^sub>1 s);\n        \\<turnstile>\\<^sub>2 {P\\<^sub>2} c\\<^sub>2 {P\\<^sub>3};\n        \\<exists>C.\n           strip C = c\\<^sub>2 \\<and>\n           vc C P\\<^sub>3 \\<and>\n           (\\<forall>s. pre C P\\<^sub>3 s \\<le> P\\<^sub>2 s)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>C.\n                            strip C = c\\<^sub>1;; c\\<^sub>2 \\<and>\n                            vc C P\\<^sub>3 \\<and>\n                            (\\<forall>s.\n                                pre C P\\<^sub>3 s \\<le> P\\<^sub>1 s)\n 2. \\<And>I b c.\n       \\<lbrakk>\\<turnstile>\\<^sub>2 {\\<lambda>s. I s + \\<up> (bval b s)} c\n                                     {\\<lambda>t. I t + 1};\n        \\<exists>C.\n           strip C = c \\<and>\n           vc C (\\<lambda>a. I a + 1) \\<and>\n           (\\<forall>s.\n               pre C (\\<lambda>a. I a + 1) s\n               \\<le> I s + \\<up> (bval b s))\\<rbrakk>\n       \\<Longrightarrow> \\<exists>C.\n                            strip C = WHILE b DO c \\<and>\n                            vc C\n                             (\\<lambda>a.\n                                 I a + \\<up> (\\<not> bval b a)) \\<and>\n                            (\\<forall>s.\n                                pre C\n                                 (\\<lambda>a. I a + \\<up> (\\<not> bval b a))\n                                 s\n                                \\<le> I s + 1)\n 3. \\<And>P c Q P' Q'.\n       \\<lbrakk>\\<turnstile>\\<^sub>2 {P} c {Q};\n        \\<exists>C.\n           strip C = c \\<and>\n           vc C Q \\<and> (\\<forall>s. pre C Q s \\<le> P s);\n        \\<And>s. P s \\<le> P' s; \\<And>s. Q' s \\<le> Q s\\<rbrakk>\n       \\<Longrightarrow> \\<exists>C.\n                            strip C = c \\<and>\n                            vc C Q' \\<and>\n                            (\\<forall>s. pre C Q' s \\<le> P' s)", "note pre = this"], ["proof (state)\nthis:\n  pre C1 (pre C2 P\\<^sub>3) ?s2 \\<le> P\\<^sub>1 ?s2\n\ngoal (3 subgoals):\n 1. \\<And>P\\<^sub>1 c\\<^sub>1 P\\<^sub>2 c\\<^sub>2 P\\<^sub>3.\n       \\<lbrakk>\\<turnstile>\\<^sub>2 {P\\<^sub>1} c\\<^sub>1 {P\\<^sub>2};\n        \\<exists>C.\n           strip C = c\\<^sub>1 \\<and>\n           vc C P\\<^sub>2 \\<and>\n           (\\<forall>s. pre C P\\<^sub>2 s \\<le> P\\<^sub>1 s);\n        \\<turnstile>\\<^sub>2 {P\\<^sub>2} c\\<^sub>2 {P\\<^sub>3};\n        \\<exists>C.\n           strip C = c\\<^sub>2 \\<and>\n           vc C P\\<^sub>3 \\<and>\n           (\\<forall>s. pre C P\\<^sub>3 s \\<le> P\\<^sub>2 s)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>C.\n                            strip C = c\\<^sub>1;; c\\<^sub>2 \\<and>\n                            vc C P\\<^sub>3 \\<and>\n                            (\\<forall>s.\n                                pre C P\\<^sub>3 s \\<le> P\\<^sub>1 s)\n 2. \\<And>I b c.\n       \\<lbrakk>\\<turnstile>\\<^sub>2 {\\<lambda>s. I s + \\<up> (bval b s)} c\n                                     {\\<lambda>t. I t + 1};\n        \\<exists>C.\n           strip C = c \\<and>\n           vc C (\\<lambda>a. I a + 1) \\<and>\n           (\\<forall>s.\n               pre C (\\<lambda>a. I a + 1) s\n               \\<le> I s + \\<up> (bval b s))\\<rbrakk>\n       \\<Longrightarrow> \\<exists>C.\n                            strip C = WHILE b DO c \\<and>\n                            vc C\n                             (\\<lambda>a.\n                                 I a + \\<up> (\\<not> bval b a)) \\<and>\n                            (\\<forall>s.\n                                pre C\n                                 (\\<lambda>a. I a + \\<up> (\\<not> bval b a))\n                                 s\n                                \\<le> I s + 1)\n 3. \\<And>P c Q P' Q'.\n       \\<lbrakk>\\<turnstile>\\<^sub>2 {P} c {Q};\n        \\<exists>C.\n           strip C = c \\<and>\n           vc C Q \\<and> (\\<forall>s. pre C Q s \\<le> P s);\n        \\<And>s. P s \\<le> P' s; \\<And>s. Q' s \\<le> Q s\\<rbrakk>\n       \\<Longrightarrow> \\<exists>C.\n                            strip C = c \\<and>\n                            vc C Q' \\<and>\n                            (\\<forall>s. pre C Q' s \\<le> P' s)", "show ?case"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>C.\n       strip C = c\\<^sub>1;; c\\<^sub>2 \\<and>\n       vc C P\\<^sub>3 \\<and>\n       (\\<forall>s. pre C P\\<^sub>3 s \\<le> P\\<^sub>1 s)", "apply(rule exI[where x=\"C1 ;; C2\"], safe)"], ["proof (prove)\ngoal (3 subgoals):\n 1. strip (C1;; C2) = c\\<^sub>1;; c\\<^sub>2\n 2. vc (C1;; C2) P\\<^sub>3\n 3. \\<And>s. pre (C1;; C2) P\\<^sub>3 s \\<le> P\\<^sub>1 s", "subgoal"], ["proof (prove)\ngoal (1 subgoal):\n 1. strip (C1;; C2) = c\\<^sub>1;; c\\<^sub>2", "using strip1 strip2"], ["proof (prove)\nusing this:\n  strip C1 = c\\<^sub>1\n  strip C2 = c\\<^sub>2\n\ngoal (1 subgoal):\n 1. strip (C1;; C2) = c\\<^sub>1;; c\\<^sub>2", "by simp"], ["proof (prove)\ngoal (2 subgoals):\n 1. vc (C1;; C2) P\\<^sub>3\n 2. \\<And>s. pre (C1;; C2) P\\<^sub>3 s \\<le> P\\<^sub>1 s", "subgoal"], ["proof (prove)\ngoal (1 subgoal):\n 1. vc (C1;; C2) P\\<^sub>3", "using vc1 vc2 vc_mono pre2"], ["proof (prove)\nusing this:\n  vc C1 P\\<^sub>2\n  vc C2 P\\<^sub>3\n  \\<lbrakk>\\<And>s. ?P' s \\<le> ?P s; vc ?C ?P\\<rbrakk>\n  \\<Longrightarrow> vc ?C ?P'\n  \\<forall>s. pre C2 P\\<^sub>3 s \\<le> P\\<^sub>2 s\n\ngoal (1 subgoal):\n 1. vc (C1;; C2) P\\<^sub>3", "by auto"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>s. pre (C1;; C2) P\\<^sub>3 s \\<le> P\\<^sub>1 s", "subgoal"], ["proof (prove)\ngoal (1 subgoal):\n 1. pre (C1;; C2) P\\<^sub>3 s_ \\<le> P\\<^sub>1 s_", "using pre"], ["proof (prove)\nusing this:\n  pre C1 (pre C2 P\\<^sub>3) ?s2 \\<le> P\\<^sub>1 ?s2\n\ngoal (1 subgoal):\n 1. pre (C1;; C2) P\\<^sub>3 s_ \\<le> P\\<^sub>1 s_", "by auto"], ["proof (prove)\ngoal:\nNo subgoals!", "done"], ["proof (state)\nthis:\n  \\<exists>C.\n     strip C = c\\<^sub>1;; c\\<^sub>2 \\<and>\n     vc C P\\<^sub>3 \\<and> (\\<forall>s. pre C P\\<^sub>3 s \\<le> P\\<^sub>1 s)\n\ngoal (2 subgoals):\n 1. \\<And>I b c.\n       \\<lbrakk>\\<turnstile>\\<^sub>2 {\\<lambda>s. I s + \\<up> (bval b s)} c\n                                     {\\<lambda>t. I t + 1};\n        \\<exists>C.\n           strip C = c \\<and>\n           vc C (\\<lambda>a. I a + 1) \\<and>\n           (\\<forall>s.\n               pre C (\\<lambda>a. I a + 1) s\n               \\<le> I s + \\<up> (bval b s))\\<rbrakk>\n       \\<Longrightarrow> \\<exists>C.\n                            strip C = WHILE b DO c \\<and>\n                            vc C\n                             (\\<lambda>a.\n                                 I a + \\<up> (\\<not> bval b a)) \\<and>\n                            (\\<forall>s.\n                                pre C\n                                 (\\<lambda>a. I a + \\<up> (\\<not> bval b a))\n                                 s\n                                \\<le> I s + 1)\n 2. \\<And>P c Q P' Q'.\n       \\<lbrakk>\\<turnstile>\\<^sub>2 {P} c {Q};\n        \\<exists>C.\n           strip C = c \\<and>\n           vc C Q \\<and> (\\<forall>s. pre C Q s \\<le> P s);\n        \\<And>s. P s \\<le> P' s; \\<And>s. Q' s \\<le> Q s\\<rbrakk>\n       \\<Longrightarrow> \\<exists>C.\n                            strip C = c \\<and>\n                            vc C Q' \\<and>\n                            (\\<forall>s. pre C Q' s \\<le> P' s)", "next"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>I b c.\n       \\<lbrakk>\\<turnstile>\\<^sub>2 {\\<lambda>s. I s + \\<up> (bval b s)} c\n                                     {\\<lambda>t. I t + 1};\n        \\<exists>C.\n           strip C = c \\<and>\n           vc C (\\<lambda>a. I a + 1) \\<and>\n           (\\<forall>s.\n               pre C (\\<lambda>a. I a + 1) s\n               \\<le> I s + \\<up> (bval b s))\\<rbrakk>\n       \\<Longrightarrow> \\<exists>C.\n                            strip C = WHILE b DO c \\<and>\n                            vc C\n                             (\\<lambda>a.\n                                 I a + \\<up> (\\<not> bval b a)) \\<and>\n                            (\\<forall>s.\n                                pre C\n                                 (\\<lambda>a. I a + \\<up> (\\<not> bval b a))\n                                 s\n                                \\<le> I s + 1)\n 2. \\<And>P c Q P' Q'.\n       \\<lbrakk>\\<turnstile>\\<^sub>2 {P} c {Q};\n        \\<exists>C.\n           strip C = c \\<and>\n           vc C Q \\<and> (\\<forall>s. pre C Q s \\<le> P s);\n        \\<And>s. P s \\<le> P' s; \\<And>s. Q' s \\<le> Q s\\<rbrakk>\n       \\<Longrightarrow> \\<exists>C.\n                            strip C = c \\<and>\n                            vc C Q' \\<and>\n                            (\\<forall>s. pre C Q' s \\<le> P' s)", "case (While I b c)"], ["proof (state)\nthis:\n  \\<turnstile>\\<^sub>2 {\\<lambda>s. I s + \\<up> (bval b s)} c\n                       {\\<lambda>t. I t + 1}\n  \\<exists>C.\n     strip C = c \\<and>\n     vc C (\\<lambda>a. I a + 1) \\<and>\n     (\\<forall>s.\n         pre C (\\<lambda>a. I a + 1) s \\<le> I s + \\<up> (bval b s))\n\ngoal (2 subgoals):\n 1. \\<And>I b c.\n       \\<lbrakk>\\<turnstile>\\<^sub>2 {\\<lambda>s. I s + \\<up> (bval b s)} c\n                                     {\\<lambda>t. I t + 1};\n        \\<exists>C.\n           strip C = c \\<and>\n           vc C (\\<lambda>a. I a + 1) \\<and>\n           (\\<forall>s.\n               pre C (\\<lambda>a. I a + 1) s\n               \\<le> I s + \\<up> (bval b s))\\<rbrakk>\n       \\<Longrightarrow> \\<exists>C.\n                            strip C = WHILE b DO c \\<and>\n                            vc C\n                             (\\<lambda>a.\n                                 I a + \\<up> (\\<not> bval b a)) \\<and>\n                            (\\<forall>s.\n                                pre C\n                                 (\\<lambda>a. I a + \\<up> (\\<not> bval b a))\n                                 s\n                                \\<le> I s + 1)\n 2. \\<And>P c Q P' Q'.\n       \\<lbrakk>\\<turnstile>\\<^sub>2 {P} c {Q};\n        \\<exists>C.\n           strip C = c \\<and>\n           vc C Q \\<and> (\\<forall>s. pre C Q s \\<le> P s);\n        \\<And>s. P s \\<le> P' s; \\<And>s. Q' s \\<le> Q s\\<rbrakk>\n       \\<Longrightarrow> \\<exists>C.\n                            strip C = c \\<and>\n                            vc C Q' \\<and>\n                            (\\<forall>s. pre C Q' s \\<le> P' s)", "from While(2)"], ["proof (chain)\npicking this:\n  \\<exists>C.\n     strip C = c \\<and>\n     vc C (\\<lambda>a. I a + 1) \\<and>\n     (\\<forall>s.\n         pre C (\\<lambda>a. I a + 1) s \\<le> I s + \\<up> (bval b s))", "obtain C where strip: \"strip C = c\" and vc: \"vc C (\\<lambda>a. I a + 1)\"\n    and pre: \"\\<And>s. pre C (\\<lambda>a. I a + 1) s \\<le> I s + \\<up> (bval b s)\""], ["proof (prove)\nusing this:\n  \\<exists>C.\n     strip C = c \\<and>\n     vc C (\\<lambda>a. I a + 1) \\<and>\n     (\\<forall>s.\n         pre C (\\<lambda>a. I a + 1) s \\<le> I s + \\<up> (bval b s))\n\ngoal (1 subgoal):\n 1. (\\<And>C.\n        \\<lbrakk>strip C = c; vc C (\\<lambda>a. I a + 1);\n         \\<And>s.\n            pre C (\\<lambda>a. I a + 1) s\n            \\<le> I s + \\<up> (bval b s)\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by blast"], ["proof (state)\nthis:\n  strip C = c\n  vc C (\\<lambda>a. I a + 1)\n  pre C (\\<lambda>a. I a + 1) ?s \\<le> I ?s + \\<up> (bval b ?s)\n\ngoal (2 subgoals):\n 1. \\<And>I b c.\n       \\<lbrakk>\\<turnstile>\\<^sub>2 {\\<lambda>s. I s + \\<up> (bval b s)} c\n                                     {\\<lambda>t. I t + 1};\n        \\<exists>C.\n           strip C = c \\<and>\n           vc C (\\<lambda>a. I a + 1) \\<and>\n           (\\<forall>s.\n               pre C (\\<lambda>a. I a + 1) s\n               \\<le> I s + \\<up> (bval b s))\\<rbrakk>\n       \\<Longrightarrow> \\<exists>C.\n                            strip C = WHILE b DO c \\<and>\n                            vc C\n                             (\\<lambda>a.\n                                 I a + \\<up> (\\<not> bval b a)) \\<and>\n                            (\\<forall>s.\n                                pre C\n                                 (\\<lambda>a. I a + \\<up> (\\<not> bval b a))\n                                 s\n                                \\<le> I s + 1)\n 2. \\<And>P c Q P' Q'.\n       \\<lbrakk>\\<turnstile>\\<^sub>2 {P} c {Q};\n        \\<exists>C.\n           strip C = c \\<and>\n           vc C Q \\<and> (\\<forall>s. pre C Q s \\<le> P s);\n        \\<And>s. P s \\<le> P' s; \\<And>s. Q' s \\<le> Q s\\<rbrakk>\n       \\<Longrightarrow> \\<exists>C.\n                            strip C = c \\<and>\n                            vc C Q' \\<and>\n                            (\\<forall>s. pre C Q' s \\<le> P' s)", "show ?case"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>C.\n       strip C = WHILE b DO c \\<and>\n       vc C (\\<lambda>a. I a + \\<up> (\\<not> bval b a)) \\<and>\n       (\\<forall>s.\n           pre C (\\<lambda>a. I a + \\<up> (\\<not> bval b a)) s\n           \\<le> I s + 1)", "apply(rule exI[where x=\"{I} WHILE b DO C\"], safe)"], ["proof (prove)\ngoal (3 subgoals):\n 1. strip ({I} WHILE b DO C) = WHILE b DO c\n 2. vc ({I} WHILE b DO C) (\\<lambda>a. I a + \\<up> (\\<not> bval b a))\n 3. \\<And>s.\n       pre ({I} WHILE b DO C) (\\<lambda>a. I a + \\<up> (\\<not> bval b a)) s\n       \\<le> I s + 1", "subgoal"], ["proof (prove)\ngoal (1 subgoal):\n 1. strip ({I} WHILE b DO C) = WHILE b DO c", "using strip"], ["proof (prove)\nusing this:\n  strip C = c\n\ngoal (1 subgoal):\n 1. strip ({I} WHILE b DO C) = WHILE b DO c", "by simp"], ["proof (prove)\ngoal (2 subgoals):\n 1. vc ({I} WHILE b DO C) (\\<lambda>a. I a + \\<up> (\\<not> bval b a))\n 2. \\<And>s.\n       pre ({I} WHILE b DO C) (\\<lambda>a. I a + \\<up> (\\<not> bval b a)) s\n       \\<le> I s + 1", "subgoal"], ["proof (prove)\ngoal (1 subgoal):\n 1. vc ({I} WHILE b DO C) (\\<lambda>a. I a + \\<up> (\\<not> bval b a))", "using pre vc"], ["proof (prove)\nusing this:\n  pre C (\\<lambda>a. I a + 1) ?s \\<le> I ?s + \\<up> (bval b ?s)\n  vc C (\\<lambda>a. I a + 1)\n\ngoal (1 subgoal):\n 1. vc ({I} WHILE b DO C) (\\<lambda>a. I a + \\<up> (\\<not> bval b a))", "by auto"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>s.\n       pre ({I} WHILE b DO C) (\\<lambda>a. I a + \\<up> (\\<not> bval b a)) s\n       \\<le> I s + 1", "subgoal"], ["proof (prove)\ngoal (1 subgoal):\n 1. pre ({I} WHILE b DO C) (\\<lambda>a. I a + \\<up> (\\<not> bval b a)) s_\n    \\<le> I s_ + 1", "by simp"], ["proof (prove)\ngoal:\nNo subgoals!", "done"], ["proof (state)\nthis:\n  \\<exists>C.\n     strip C = WHILE b DO c \\<and>\n     vc C (\\<lambda>a. I a + \\<up> (\\<not> bval b a)) \\<and>\n     (\\<forall>s.\n         pre C (\\<lambda>a. I a + \\<up> (\\<not> bval b a)) s \\<le> I s + 1)\n\ngoal (1 subgoal):\n 1. \\<And>P c Q P' Q'.\n       \\<lbrakk>\\<turnstile>\\<^sub>2 {P} c {Q};\n        \\<exists>C.\n           strip C = c \\<and>\n           vc C Q \\<and> (\\<forall>s. pre C Q s \\<le> P s);\n        \\<And>s. P s \\<le> P' s; \\<And>s. Q' s \\<le> Q s\\<rbrakk>\n       \\<Longrightarrow> \\<exists>C.\n                            strip C = c \\<and>\n                            vc C Q' \\<and>\n                            (\\<forall>s. pre C Q' s \\<le> P' s)", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>P c Q P' Q'.\n       \\<lbrakk>\\<turnstile>\\<^sub>2 {P} c {Q};\n        \\<exists>C.\n           strip C = c \\<and>\n           vc C Q \\<and> (\\<forall>s. pre C Q s \\<le> P s);\n        \\<And>s. P s \\<le> P' s; \\<And>s. Q' s \\<le> Q s\\<rbrakk>\n       \\<Longrightarrow> \\<exists>C.\n                            strip C = c \\<and>\n                            vc C Q' \\<and>\n                            (\\<forall>s. pre C Q' s \\<le> P' s)", "case (conseq P c Q P' Q')"], ["proof (state)\nthis:\n  \\<turnstile>\\<^sub>2 {P} c {Q}\n  P ?s \\<le> P' ?s\n  Q' ?s \\<le> Q ?s\n  \\<exists>C.\n     strip C = c \\<and> vc C Q \\<and> (\\<forall>s. pre C Q s \\<le> P s)\n\ngoal (1 subgoal):\n 1. \\<And>P c Q P' Q'.\n       \\<lbrakk>\\<turnstile>\\<^sub>2 {P} c {Q};\n        \\<exists>C.\n           strip C = c \\<and>\n           vc C Q \\<and> (\\<forall>s. pre C Q s \\<le> P s);\n        \\<And>s. P s \\<le> P' s; \\<And>s. Q' s \\<le> Q s\\<rbrakk>\n       \\<Longrightarrow> \\<exists>C.\n                            strip C = c \\<and>\n                            vc C Q' \\<and>\n                            (\\<forall>s. pre C Q' s \\<le> P' s)", "then"], ["proof (chain)\npicking this:\n  \\<turnstile>\\<^sub>2 {P} c {Q}\n  P ?s \\<le> P' ?s\n  Q' ?s \\<le> Q ?s\n  \\<exists>C.\n     strip C = c \\<and> vc C Q \\<and> (\\<forall>s. pre C Q s \\<le> P s)", "obtain C where \"strip C = c\" and vc: \"vc C Q\" and pre: \"\\<And>s. pre C Q s \\<le> P s\""], ["proof (prove)\nusing this:\n  \\<turnstile>\\<^sub>2 {P} c {Q}\n  P ?s \\<le> P' ?s\n  Q' ?s \\<le> Q ?s\n  \\<exists>C.\n     strip C = c \\<and> vc C Q \\<and> (\\<forall>s. pre C Q s \\<le> P s)\n\ngoal (1 subgoal):\n 1. (\\<And>C.\n        \\<lbrakk>strip C = c; vc C Q; \\<And>s. pre C Q s \\<le> P s\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by blast"], ["proof (state)\nthis:\n  strip C = c\n  vc C Q\n  pre C Q ?s \\<le> P ?s\n\ngoal (1 subgoal):\n 1. \\<And>P c Q P' Q'.\n       \\<lbrakk>\\<turnstile>\\<^sub>2 {P} c {Q};\n        \\<exists>C.\n           strip C = c \\<and>\n           vc C Q \\<and> (\\<forall>s. pre C Q s \\<le> P s);\n        \\<And>s. P s \\<le> P' s; \\<And>s. Q' s \\<le> Q s\\<rbrakk>\n       \\<Longrightarrow> \\<exists>C.\n                            strip C = c \\<and>\n                            vc C Q' \\<and>\n                            (\\<forall>s. pre C Q' s \\<le> P' s)", "from pre_mono[OF conseq(3)]"], ["proof (chain)\npicking this:\n  pre ?C (\\<lambda>s. Q' (?s1 s)) ?s \\<le> pre ?C (\\<lambda>s. Q (?s1 s)) ?s", "have 1: \"\\<And>s. pre C Q' s \\<le> pre C Q s\""], ["proof (prove)\nusing this:\n  pre ?C (\\<lambda>s. Q' (?s1 s)) ?s \\<le> pre ?C (\\<lambda>s. Q (?s1 s)) ?s\n\ngoal (1 subgoal):\n 1. \\<And>s. pre C Q' s \\<le> pre C Q s", "by auto"], ["proof (state)\nthis:\n  pre C Q' ?s \\<le> pre C Q ?s\n\ngoal (1 subgoal):\n 1. \\<And>P c Q P' Q'.\n       \\<lbrakk>\\<turnstile>\\<^sub>2 {P} c {Q};\n        \\<exists>C.\n           strip C = c \\<and>\n           vc C Q \\<and> (\\<forall>s. pre C Q s \\<le> P s);\n        \\<And>s. P s \\<le> P' s; \\<And>s. Q' s \\<le> Q s\\<rbrakk>\n       \\<Longrightarrow> \\<exists>C.\n                            strip C = c \\<and>\n                            vc C Q' \\<and>\n                            (\\<forall>s. pre C Q' s \\<le> P' s)", "show ?case"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>C.\n       strip C = c \\<and> vc C Q' \\<and> (\\<forall>s. pre C Q' s \\<le> P' s)", "apply(rule exI[where x=C])"], ["proof (prove)\ngoal (1 subgoal):\n 1. strip C = c \\<and> vc C Q' \\<and> (\\<forall>s. pre C Q' s \\<le> P' s)", "apply safe"], ["proof (prove)\ngoal (3 subgoals):\n 1. strip C = c\n 2. vc C Q'\n 3. \\<And>s. pre C Q' s \\<le> P' s", "apply fact"], ["proof (prove)\ngoal (2 subgoals):\n 1. vc C Q'\n 2. \\<And>s. pre C Q' s \\<le> P' s", "subgoal"], ["proof (prove)\ngoal (1 subgoal):\n 1. vc C Q'", "using vc conseq(3) vc_mono"], ["proof (prove)\nusing this:\n  vc C Q\n  Q' ?s \\<le> Q ?s\n  \\<lbrakk>\\<And>s. ?P' s \\<le> ?P s; vc ?C ?P\\<rbrakk>\n  \\<Longrightarrow> vc ?C ?P'\n\ngoal (1 subgoal):\n 1. vc C Q'", "by auto"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>s. pre C Q' s \\<le> P' s", "subgoal"], ["proof (prove)\ngoal (1 subgoal):\n 1. pre C Q' s_ \\<le> P' s_", "using pre conseq(2) 1"], ["proof (prove)\nusing this:\n  pre C Q ?s \\<le> P ?s\n  P ?s \\<le> P' ?s\n  pre C Q' ?s \\<le> pre C Q ?s\n\ngoal (1 subgoal):\n 1. pre C Q' s_ \\<le> P' s_", "using order.trans"], ["proof (prove)\nusing this:\n  pre C Q ?s \\<le> P ?s\n  P ?s \\<le> P' ?s\n  pre C Q' ?s \\<le> pre C Q ?s\n  \\<lbrakk>?a \\<le> ?b; ?b \\<le> ?c\\<rbrakk> \\<Longrightarrow> ?a \\<le> ?c\n\ngoal (1 subgoal):\n 1. pre C Q' s_ \\<le> P' s_", "by metis"], ["proof (prove)\ngoal:\nNo subgoals!", "done"], ["proof (state)\nthis:\n  \\<exists>C.\n     strip C = c \\<and> vc C Q' \\<and> (\\<forall>s. pre C Q' s \\<le> P' s)\n\ngoal:\nNo subgoals!", "qed"], ["", "end"]]}