{"file_name": "/home/qj213/afp-2021-10-22/thys/Hoare_Time/SepLogK_VCG.thy", "working_directory": "/home/qj213/afp-2021-10-22/thys/Hoare_Time", "problem_names": ["lemmas conseqS = conseq[where k=1, simplified]", "lemma dollar0_left: \"($ 0 \\<and>* Q) = Q\"", "lemma vc_sound: \"vc C Q \\<Longrightarrow>  \\<turnstile>\\<^sub>3\\<^sub>' {pre C Q} strip C { Q }\"", "lemma vc2valid: \"vc C Q \\<Longrightarrow> \\<forall>s. P s \\<longrightarrow> pre C Q s \\<Longrightarrow> \\<Turnstile>\\<^sub>3\\<^sub>' {P} strip C { Q}\"", "lemma pre_mono: assumes \"\\<forall>s. P s \\<longrightarrow> Q s\" shows \"\\<And>s. pre C P s \\<Longrightarrow> pre C Q s\"", "lemma vc_mono: assumes \"\\<forall>s. P s \\<longrightarrow> Q s\" shows \"vc C P \\<Longrightarrow> vc C Q\"", "lemma vc_sound': \"vc C Q \\<Longrightarrow> (\\<And>s n. P' (s, n) \\<Longrightarrow> pre C Q (s, k * n)) \\<Longrightarrow> (\\<And>s n. Q (s, n) \\<Longrightarrow> Q' (s, n div k)) \\<Longrightarrow> 0 < k \\<Longrightarrow> \\<turnstile>\\<^sub>3\\<^sub>' {P'} strip C { Q'}\"", "lemma pre_Frame: \"(\\<forall>s. P s \\<longrightarrow> pre C Q s) \\<Longrightarrow> vc C Q\n     \\<Longrightarrow> (\\<exists>C'. strip C = strip C' \\<and>  vc C' (Q ** F) \\<and> (\\<forall>s. (P ** F) s \\<longrightarrow> pre C' (Q ** F) s) )\"", "lemma vc_complete: \"\\<turnstile>\\<^sub>3\\<^sub>a {P} c { Q } \\<Longrightarrow> (\\<exists>C. vc C Q \\<and> (\\<forall>s. P s \\<longrightarrow> pre C Q s) \\<and> strip C = c)\"", "theorem vc_completeness:\n  assumes \"\\<Turnstile>\\<^sub>3\\<^sub>' {P} c { Q}\"\n  shows \"\\<exists>C k. vc C (Q ** sep_true)\n          \\<and> (\\<forall>ps n. P (ps, n) \\<longrightarrow> pre C (\\<lambda>(ps, n). (Q ** sep_true) (ps, n div k)) (ps, k * n))\n          \\<and> strip C = c\""], "translations": [["", "lemmas conseqS = conseq[where k=1, simplified]"], ["", "datatype acom =\n  Askip                  (\"SKIP\") |\n  Aassign vname aexp     (\"(_ ::= _)\" [1000, 61] 61) |\n  Aseq   acom acom       (\"_;;/ _\"  [60, 61] 60) | \n  Aif bexp acom acom     (\"(IF _/ THEN _/ ELSE _)\"  [0, 0, 61] 61) |\n  Awhile assn2 bexp acom  (\"({_}/ WHILE _/ DO _)\"  [0, 0, 61] 61)"], ["", "notation com.SKIP (\"SKIP\")"], ["", "fun strip :: \"acom \\<Rightarrow> com\" where\n\"strip SKIP = SKIP\" |\n\"strip (x ::= a) = (x ::= a)\" |\n\"strip (C\\<^sub>1;; C\\<^sub>2) = (strip C\\<^sub>1;; strip C\\<^sub>2)\" |\n\"strip (IF b THEN C\\<^sub>1 ELSE C\\<^sub>2) = (IF b THEN strip C\\<^sub>1 ELSE strip C\\<^sub>2)\" |\n\"strip ({_} WHILE b DO C) = (WHILE b DO strip C)\""], ["", "fun pre :: \"acom \\<Rightarrow> assn2 \\<Rightarrow> assn2\" where\n\"pre SKIP Q = ($1 ** Q)\" |\n\"pre (x ::= a) Q = ((\\<lambda>(ps,t). x\\<in>dom ps \\<and> vars a \\<subseteq> dom ps \\<and> Q (ps(x\\<mapsto>(paval a ps)),t) ) ** $1)\" |\n\"pre (C\\<^sub>1;; C\\<^sub>2) Q = pre C\\<^sub>1 (pre C\\<^sub>2 Q)\" |\n\"pre (IF b THEN C\\<^sub>1 ELSE C\\<^sub>2) Q = (\n   $1 **  (\\<lambda>(ps,n). vars b \\<subseteq> dom ps \\<and> (if pbval b ps then pre C\\<^sub>1 Q (ps,n)  else pre C\\<^sub>2 Q (ps,n) )))\" |\n\"pre ({I} WHILE b DO C) Q = (I ** $1)\""], ["", "fun vc :: \"acom \\<Rightarrow> assn2 \\<Rightarrow> bool\" where\n\"vc SKIP Q = True\" |\n\"vc (x ::= a) Q = True\" |\n\"vc (C\\<^sub>1 ;; C\\<^sub>2) Q = ((vc C\\<^sub>1 (pre C\\<^sub>2 Q)) \\<and> (vc C\\<^sub>2 Q) )\" |\n\"vc (IF b THEN C\\<^sub>1 ELSE C\\<^sub>2) Q = (vc C\\<^sub>1 Q \\<and> vc C\\<^sub>2 Q)\" |  \n\"vc ({I} WHILE b DO C) Q =  ( (\\<forall>s. (I s \\<longrightarrow> vars b \\<subseteq> dom (fst s) ) \\<and> ((\\<lambda>(s,n). I (s,n) \\<and> lmaps_to_axpr b True s) s \\<longrightarrow> pre C (I ** $ 1) s)\n         \\<and> ( (\\<lambda>(s,n). I (s,n) \\<and> lmaps_to_axpr b False s) s \\<longrightarrow> Q s)) \\<and> vc C (I  ** $ 1))\""], ["", "lemma dollar0_left: \"($ 0 \\<and>* Q) = Q\""], ["proof (prove)\ngoal (1 subgoal):\n 1. ($ 0 \\<and>* Q) = Q", "apply rule"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>x. ($ 0 \\<and>* Q) x = Q x", "unfolding dollar_def sep_conj_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>x.\n       (\\<exists>xa y.\n           xa ## y \\<and>\n           x = xa + y \\<and>\n           (case xa of (s, c) \\<Rightarrow> s = 0 \\<and> c = 0) \\<and>\n           Q y) =\n       Q x", "by force"], ["", "lemma vc_sound: \"vc C Q \\<Longrightarrow>  \\<turnstile>\\<^sub>3\\<^sub>' {pre C Q} strip C { Q }\""], ["proof (prove)\ngoal (1 subgoal):\n 1. vc C Q \\<Longrightarrow>\n    \\<turnstile>\\<^sub>3\\<^sub>' {pre C Q} strip C { Q}", "proof (induct C arbitrary: Q)"], ["proof (state)\ngoal (5 subgoals):\n 1. \\<And>Q.\n       vc SKIP Q \\<Longrightarrow>\n       \\<turnstile>\\<^sub>3\\<^sub>' {pre SKIP Q} strip SKIP { Q}\n 2. \\<And>x1 x2 Q.\n       vc (x1 ::= x2) Q \\<Longrightarrow>\n       \\<turnstile>\\<^sub>3\\<^sub>' {pre (x1 ::= x2) Q} strip (x1 ::= x2)\n                                    { Q}\n 3. \\<And>C1 C2 Q.\n       \\<lbrakk>\\<And>Q.\n                   vc C1 Q \\<Longrightarrow>\n                   \\<turnstile>\\<^sub>3\\<^sub>' {pre C1 Q} strip C1 { Q};\n        \\<And>Q.\n           vc C2 Q \\<Longrightarrow>\n           \\<turnstile>\\<^sub>3\\<^sub>' {pre C2 Q} strip C2 { Q};\n        vc (C1;; C2) Q\\<rbrakk>\n       \\<Longrightarrow> \\<turnstile>\\<^sub>3\\<^sub>' {pre (C1;; C2) Q}\n                strip (C1;; C2) { Q}\n 4. \\<And>x1 C1 C2 Q.\n       \\<lbrakk>\\<And>Q.\n                   vc C1 Q \\<Longrightarrow>\n                   \\<turnstile>\\<^sub>3\\<^sub>' {pre C1 Q} strip C1 { Q};\n        \\<And>Q.\n           vc C2 Q \\<Longrightarrow>\n           \\<turnstile>\\<^sub>3\\<^sub>' {pre C2 Q} strip C2 { Q};\n        vc (IF x1 THEN C1 ELSE C2) Q\\<rbrakk>\n       \\<Longrightarrow> \\<turnstile>\\<^sub>3\\<^sub>' {pre\n                  (IF x1 THEN C1 ELSE C2) Q}\n                strip (IF x1 THEN C1 ELSE C2) { Q}\n 5. \\<And>x1 x2 C Q.\n       \\<lbrakk>\\<And>Q.\n                   vc C Q \\<Longrightarrow>\n                   \\<turnstile>\\<^sub>3\\<^sub>' {pre C Q} strip C { Q};\n        vc ({x1} WHILE x2 DO C) Q\\<rbrakk>\n       \\<Longrightarrow> \\<turnstile>\\<^sub>3\\<^sub>' {pre\n                  ({x1} WHILE x2 DO C) Q}\n                strip ({x1} WHILE x2 DO C) { Q}", "case Askip"], ["proof (state)\nthis:\n  vc SKIP Q\n\ngoal (5 subgoals):\n 1. \\<And>Q.\n       vc SKIP Q \\<Longrightarrow>\n       \\<turnstile>\\<^sub>3\\<^sub>' {pre SKIP Q} strip SKIP { Q}\n 2. \\<And>x1 x2 Q.\n       vc (x1 ::= x2) Q \\<Longrightarrow>\n       \\<turnstile>\\<^sub>3\\<^sub>' {pre (x1 ::= x2) Q} strip (x1 ::= x2)\n                                    { Q}\n 3. \\<And>C1 C2 Q.\n       \\<lbrakk>\\<And>Q.\n                   vc C1 Q \\<Longrightarrow>\n                   \\<turnstile>\\<^sub>3\\<^sub>' {pre C1 Q} strip C1 { Q};\n        \\<And>Q.\n           vc C2 Q \\<Longrightarrow>\n           \\<turnstile>\\<^sub>3\\<^sub>' {pre C2 Q} strip C2 { Q};\n        vc (C1;; C2) Q\\<rbrakk>\n       \\<Longrightarrow> \\<turnstile>\\<^sub>3\\<^sub>' {pre (C1;; C2) Q}\n                strip (C1;; C2) { Q}\n 4. \\<And>x1 C1 C2 Q.\n       \\<lbrakk>\\<And>Q.\n                   vc C1 Q \\<Longrightarrow>\n                   \\<turnstile>\\<^sub>3\\<^sub>' {pre C1 Q} strip C1 { Q};\n        \\<And>Q.\n           vc C2 Q \\<Longrightarrow>\n           \\<turnstile>\\<^sub>3\\<^sub>' {pre C2 Q} strip C2 { Q};\n        vc (IF x1 THEN C1 ELSE C2) Q\\<rbrakk>\n       \\<Longrightarrow> \\<turnstile>\\<^sub>3\\<^sub>' {pre\n                  (IF x1 THEN C1 ELSE C2) Q}\n                strip (IF x1 THEN C1 ELSE C2) { Q}\n 5. \\<And>x1 x2 C Q.\n       \\<lbrakk>\\<And>Q.\n                   vc C Q \\<Longrightarrow>\n                   \\<turnstile>\\<^sub>3\\<^sub>' {pre C Q} strip C { Q};\n        vc ({x1} WHILE x2 DO C) Q\\<rbrakk>\n       \\<Longrightarrow> \\<turnstile>\\<^sub>3\\<^sub>' {pre\n                  ({x1} WHILE x2 DO C) Q}\n                strip ({x1} WHILE x2 DO C) { Q}", "then"], ["proof (chain)\npicking this:\n  vc SKIP Q", "show ?case"], ["proof (prove)\nusing this:\n  vc SKIP Q\n\ngoal (1 subgoal):\n 1. \\<turnstile>\\<^sub>3\\<^sub>' {pre SKIP Q} strip SKIP { Q}", "apply simp"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<turnstile>\\<^sub>3\\<^sub>' {$ (Suc 0) \\<and>* Q} SKIP { Q}", "apply(rule conseqS[OF Frame[OF Skip]])"], ["proof (prove)\ngoal (2 subgoals):\n 1. \\<And>s n.\n       ($ (Suc 0) \\<and>* Q) (s, n) \\<Longrightarrow>\n       ($ 1 \\<and>* ?F2) (s, n)\n 2. \\<And>s n. ($ 0 \\<and>* ?F2) (s, n) \\<Longrightarrow> Q (s, n)", "by (auto simp: dollar0_left)"], ["proof (state)\nthis:\n  \\<turnstile>\\<^sub>3\\<^sub>' {pre SKIP Q} strip SKIP { Q}\n\ngoal (4 subgoals):\n 1. \\<And>x1 x2 Q.\n       vc (x1 ::= x2) Q \\<Longrightarrow>\n       \\<turnstile>\\<^sub>3\\<^sub>' {pre (x1 ::= x2) Q} strip (x1 ::= x2)\n                                    { Q}\n 2. \\<And>C1 C2 Q.\n       \\<lbrakk>\\<And>Q.\n                   vc C1 Q \\<Longrightarrow>\n                   \\<turnstile>\\<^sub>3\\<^sub>' {pre C1 Q} strip C1 { Q};\n        \\<And>Q.\n           vc C2 Q \\<Longrightarrow>\n           \\<turnstile>\\<^sub>3\\<^sub>' {pre C2 Q} strip C2 { Q};\n        vc (C1;; C2) Q\\<rbrakk>\n       \\<Longrightarrow> \\<turnstile>\\<^sub>3\\<^sub>' {pre (C1;; C2) Q}\n                strip (C1;; C2) { Q}\n 3. \\<And>x1 C1 C2 Q.\n       \\<lbrakk>\\<And>Q.\n                   vc C1 Q \\<Longrightarrow>\n                   \\<turnstile>\\<^sub>3\\<^sub>' {pre C1 Q} strip C1 { Q};\n        \\<And>Q.\n           vc C2 Q \\<Longrightarrow>\n           \\<turnstile>\\<^sub>3\\<^sub>' {pre C2 Q} strip C2 { Q};\n        vc (IF x1 THEN C1 ELSE C2) Q\\<rbrakk>\n       \\<Longrightarrow> \\<turnstile>\\<^sub>3\\<^sub>' {pre\n                  (IF x1 THEN C1 ELSE C2) Q}\n                strip (IF x1 THEN C1 ELSE C2) { Q}\n 4. \\<And>x1 x2 C Q.\n       \\<lbrakk>\\<And>Q.\n                   vc C Q \\<Longrightarrow>\n                   \\<turnstile>\\<^sub>3\\<^sub>' {pre C Q} strip C { Q};\n        vc ({x1} WHILE x2 DO C) Q\\<rbrakk>\n       \\<Longrightarrow> \\<turnstile>\\<^sub>3\\<^sub>' {pre\n                  ({x1} WHILE x2 DO C) Q}\n                strip ({x1} WHILE x2 DO C) { Q}", "next"], ["proof (state)\ngoal (4 subgoals):\n 1. \\<And>x1 x2 Q.\n       vc (x1 ::= x2) Q \\<Longrightarrow>\n       \\<turnstile>\\<^sub>3\\<^sub>' {pre (x1 ::= x2) Q} strip (x1 ::= x2)\n                                    { Q}\n 2. \\<And>C1 C2 Q.\n       \\<lbrakk>\\<And>Q.\n                   vc C1 Q \\<Longrightarrow>\n                   \\<turnstile>\\<^sub>3\\<^sub>' {pre C1 Q} strip C1 { Q};\n        \\<And>Q.\n           vc C2 Q \\<Longrightarrow>\n           \\<turnstile>\\<^sub>3\\<^sub>' {pre C2 Q} strip C2 { Q};\n        vc (C1;; C2) Q\\<rbrakk>\n       \\<Longrightarrow> \\<turnstile>\\<^sub>3\\<^sub>' {pre (C1;; C2) Q}\n                strip (C1;; C2) { Q}\n 3. \\<And>x1 C1 C2 Q.\n       \\<lbrakk>\\<And>Q.\n                   vc C1 Q \\<Longrightarrow>\n                   \\<turnstile>\\<^sub>3\\<^sub>' {pre C1 Q} strip C1 { Q};\n        \\<And>Q.\n           vc C2 Q \\<Longrightarrow>\n           \\<turnstile>\\<^sub>3\\<^sub>' {pre C2 Q} strip C2 { Q};\n        vc (IF x1 THEN C1 ELSE C2) Q\\<rbrakk>\n       \\<Longrightarrow> \\<turnstile>\\<^sub>3\\<^sub>' {pre\n                  (IF x1 THEN C1 ELSE C2) Q}\n                strip (IF x1 THEN C1 ELSE C2) { Q}\n 4. \\<And>x1 x2 C Q.\n       \\<lbrakk>\\<And>Q.\n                   vc C Q \\<Longrightarrow>\n                   \\<turnstile>\\<^sub>3\\<^sub>' {pre C Q} strip C { Q};\n        vc ({x1} WHILE x2 DO C) Q\\<rbrakk>\n       \\<Longrightarrow> \\<turnstile>\\<^sub>3\\<^sub>' {pre\n                  ({x1} WHILE x2 DO C) Q}\n                strip ({x1} WHILE x2 DO C) { Q}", "case (Aassign x1 x2)"], ["proof (state)\nthis:\n  vc (x1 ::= x2) Q\n\ngoal (4 subgoals):\n 1. \\<And>x1 x2 Q.\n       vc (x1 ::= x2) Q \\<Longrightarrow>\n       \\<turnstile>\\<^sub>3\\<^sub>' {pre (x1 ::= x2) Q} strip (x1 ::= x2)\n                                    { Q}\n 2. \\<And>C1 C2 Q.\n       \\<lbrakk>\\<And>Q.\n                   vc C1 Q \\<Longrightarrow>\n                   \\<turnstile>\\<^sub>3\\<^sub>' {pre C1 Q} strip C1 { Q};\n        \\<And>Q.\n           vc C2 Q \\<Longrightarrow>\n           \\<turnstile>\\<^sub>3\\<^sub>' {pre C2 Q} strip C2 { Q};\n        vc (C1;; C2) Q\\<rbrakk>\n       \\<Longrightarrow> \\<turnstile>\\<^sub>3\\<^sub>' {pre (C1;; C2) Q}\n                strip (C1;; C2) { Q}\n 3. \\<And>x1 C1 C2 Q.\n       \\<lbrakk>\\<And>Q.\n                   vc C1 Q \\<Longrightarrow>\n                   \\<turnstile>\\<^sub>3\\<^sub>' {pre C1 Q} strip C1 { Q};\n        \\<And>Q.\n           vc C2 Q \\<Longrightarrow>\n           \\<turnstile>\\<^sub>3\\<^sub>' {pre C2 Q} strip C2 { Q};\n        vc (IF x1 THEN C1 ELSE C2) Q\\<rbrakk>\n       \\<Longrightarrow> \\<turnstile>\\<^sub>3\\<^sub>' {pre\n                  (IF x1 THEN C1 ELSE C2) Q}\n                strip (IF x1 THEN C1 ELSE C2) { Q}\n 4. \\<And>x1 x2 C Q.\n       \\<lbrakk>\\<And>Q.\n                   vc C Q \\<Longrightarrow>\n                   \\<turnstile>\\<^sub>3\\<^sub>' {pre C Q} strip C { Q};\n        vc ({x1} WHILE x2 DO C) Q\\<rbrakk>\n       \\<Longrightarrow> \\<turnstile>\\<^sub>3\\<^sub>' {pre\n                  ({x1} WHILE x2 DO C) Q}\n                strip ({x1} WHILE x2 DO C) { Q}", "then"], ["proof (chain)\npicking this:\n  vc (x1 ::= x2) Q", "show ?case"], ["proof (prove)\nusing this:\n  vc (x1 ::= x2) Q\n\ngoal (1 subgoal):\n 1. \\<turnstile>\\<^sub>3\\<^sub>' {pre (x1 ::= x2) Q} strip (x1 ::= x2) { Q}", "apply simp"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<turnstile>\\<^sub>3\\<^sub>' {(\\<lambda>(ps, t).\nx1 \\<in> dom ps \\<and>\nvars x2 \\<subseteq> dom ps \\<and>\nQ (ps(x1 \\<mapsto> paval x2 ps), t)) \\<and>*\n                                  $ (Suc 0)}\n                                 x1 ::= x2 { Q}", "apply(rule conseqS)"], ["proof (prove)\ngoal (3 subgoals):\n 1. \\<turnstile>\\<^sub>3\\<^sub>' {?P1} x1 ::= x2 { ?Q1}\n 2. \\<And>s n.\n       ((\\<lambda>(ps, t).\n            x1 \\<in> dom ps \\<and>\n            vars x2 \\<subseteq> dom ps \\<and>\n            Q (ps(x1 \\<mapsto> paval x2 ps), t)) \\<and>*\n        $ (Suc 0))\n        (s, n) \\<Longrightarrow>\n       ?P1 (s, n)\n 3. \\<And>s n. ?Q1 (s, n) \\<Longrightarrow> Q (s, n)", "apply(rule Assign4)"], ["proof (prove)\ngoal (2 subgoals):\n 1. \\<And>s n.\n       ((\\<lambda>(ps, t).\n            x1 \\<in> dom ps \\<and>\n            vars x2 \\<subseteq> dom ps \\<and>\n            Q (ps(x1 \\<mapsto> paval x2 ps), t)) \\<and>*\n        $ (Suc 0))\n        (s, n) \\<Longrightarrow>\n       ((\\<lambda>(ps, t).\n            x1 \\<in> dom ps \\<and>\n            vars x2 \\<subseteq> dom ps \\<and>\n            ?Q1 (ps(x1 \\<mapsto> paval x2 ps), t)) \\<and>*\n        $ 1)\n        (s, n)\n 2. \\<And>s n. ?Q1 (s, n) \\<Longrightarrow> Q (s, n)", "apply auto"], ["proof (prove)\ngoal:\nNo subgoals!", "done"], ["proof (state)\nthis:\n  \\<turnstile>\\<^sub>3\\<^sub>' {pre (x1 ::= x2) Q} strip (x1 ::= x2) { Q}\n\ngoal (3 subgoals):\n 1. \\<And>C1 C2 Q.\n       \\<lbrakk>\\<And>Q.\n                   vc C1 Q \\<Longrightarrow>\n                   \\<turnstile>\\<^sub>3\\<^sub>' {pre C1 Q} strip C1 { Q};\n        \\<And>Q.\n           vc C2 Q \\<Longrightarrow>\n           \\<turnstile>\\<^sub>3\\<^sub>' {pre C2 Q} strip C2 { Q};\n        vc (C1;; C2) Q\\<rbrakk>\n       \\<Longrightarrow> \\<turnstile>\\<^sub>3\\<^sub>' {pre (C1;; C2) Q}\n                strip (C1;; C2) { Q}\n 2. \\<And>x1 C1 C2 Q.\n       \\<lbrakk>\\<And>Q.\n                   vc C1 Q \\<Longrightarrow>\n                   \\<turnstile>\\<^sub>3\\<^sub>' {pre C1 Q} strip C1 { Q};\n        \\<And>Q.\n           vc C2 Q \\<Longrightarrow>\n           \\<turnstile>\\<^sub>3\\<^sub>' {pre C2 Q} strip C2 { Q};\n        vc (IF x1 THEN C1 ELSE C2) Q\\<rbrakk>\n       \\<Longrightarrow> \\<turnstile>\\<^sub>3\\<^sub>' {pre\n                  (IF x1 THEN C1 ELSE C2) Q}\n                strip (IF x1 THEN C1 ELSE C2) { Q}\n 3. \\<And>x1 x2 C Q.\n       \\<lbrakk>\\<And>Q.\n                   vc C Q \\<Longrightarrow>\n                   \\<turnstile>\\<^sub>3\\<^sub>' {pre C Q} strip C { Q};\n        vc ({x1} WHILE x2 DO C) Q\\<rbrakk>\n       \\<Longrightarrow> \\<turnstile>\\<^sub>3\\<^sub>' {pre\n                  ({x1} WHILE x2 DO C) Q}\n                strip ({x1} WHILE x2 DO C) { Q}", "next"], ["proof (state)\ngoal (3 subgoals):\n 1. \\<And>C1 C2 Q.\n       \\<lbrakk>\\<And>Q.\n                   vc C1 Q \\<Longrightarrow>\n                   \\<turnstile>\\<^sub>3\\<^sub>' {pre C1 Q} strip C1 { Q};\n        \\<And>Q.\n           vc C2 Q \\<Longrightarrow>\n           \\<turnstile>\\<^sub>3\\<^sub>' {pre C2 Q} strip C2 { Q};\n        vc (C1;; C2) Q\\<rbrakk>\n       \\<Longrightarrow> \\<turnstile>\\<^sub>3\\<^sub>' {pre (C1;; C2) Q}\n                strip (C1;; C2) { Q}\n 2. \\<And>x1 C1 C2 Q.\n       \\<lbrakk>\\<And>Q.\n                   vc C1 Q \\<Longrightarrow>\n                   \\<turnstile>\\<^sub>3\\<^sub>' {pre C1 Q} strip C1 { Q};\n        \\<And>Q.\n           vc C2 Q \\<Longrightarrow>\n           \\<turnstile>\\<^sub>3\\<^sub>' {pre C2 Q} strip C2 { Q};\n        vc (IF x1 THEN C1 ELSE C2) Q\\<rbrakk>\n       \\<Longrightarrow> \\<turnstile>\\<^sub>3\\<^sub>' {pre\n                  (IF x1 THEN C1 ELSE C2) Q}\n                strip (IF x1 THEN C1 ELSE C2) { Q}\n 3. \\<And>x1 x2 C Q.\n       \\<lbrakk>\\<And>Q.\n                   vc C Q \\<Longrightarrow>\n                   \\<turnstile>\\<^sub>3\\<^sub>' {pre C Q} strip C { Q};\n        vc ({x1} WHILE x2 DO C) Q\\<rbrakk>\n       \\<Longrightarrow> \\<turnstile>\\<^sub>3\\<^sub>' {pre\n                  ({x1} WHILE x2 DO C) Q}\n                strip ({x1} WHILE x2 DO C) { Q}", "case (Aseq C1 C2)"], ["proof (state)\nthis:\n  vc C1 ?Q \\<Longrightarrow>\n  \\<turnstile>\\<^sub>3\\<^sub>' {pre C1 ?Q} strip C1 { ?Q}\n  vc C2 ?Q \\<Longrightarrow>\n  \\<turnstile>\\<^sub>3\\<^sub>' {pre C2 ?Q} strip C2 { ?Q}\n  vc (C1;; C2) Q\n\ngoal (3 subgoals):\n 1. \\<And>C1 C2 Q.\n       \\<lbrakk>\\<And>Q.\n                   vc C1 Q \\<Longrightarrow>\n                   \\<turnstile>\\<^sub>3\\<^sub>' {pre C1 Q} strip C1 { Q};\n        \\<And>Q.\n           vc C2 Q \\<Longrightarrow>\n           \\<turnstile>\\<^sub>3\\<^sub>' {pre C2 Q} strip C2 { Q};\n        vc (C1;; C2) Q\\<rbrakk>\n       \\<Longrightarrow> \\<turnstile>\\<^sub>3\\<^sub>' {pre (C1;; C2) Q}\n                strip (C1;; C2) { Q}\n 2. \\<And>x1 C1 C2 Q.\n       \\<lbrakk>\\<And>Q.\n                   vc C1 Q \\<Longrightarrow>\n                   \\<turnstile>\\<^sub>3\\<^sub>' {pre C1 Q} strip C1 { Q};\n        \\<And>Q.\n           vc C2 Q \\<Longrightarrow>\n           \\<turnstile>\\<^sub>3\\<^sub>' {pre C2 Q} strip C2 { Q};\n        vc (IF x1 THEN C1 ELSE C2) Q\\<rbrakk>\n       \\<Longrightarrow> \\<turnstile>\\<^sub>3\\<^sub>' {pre\n                  (IF x1 THEN C1 ELSE C2) Q}\n                strip (IF x1 THEN C1 ELSE C2) { Q}\n 3. \\<And>x1 x2 C Q.\n       \\<lbrakk>\\<And>Q.\n                   vc C Q \\<Longrightarrow>\n                   \\<turnstile>\\<^sub>3\\<^sub>' {pre C Q} strip C { Q};\n        vc ({x1} WHILE x2 DO C) Q\\<rbrakk>\n       \\<Longrightarrow> \\<turnstile>\\<^sub>3\\<^sub>' {pre\n                  ({x1} WHILE x2 DO C) Q}\n                strip ({x1} WHILE x2 DO C) { Q}", "then"], ["proof (chain)\npicking this:\n  vc C1 ?Q \\<Longrightarrow>\n  \\<turnstile>\\<^sub>3\\<^sub>' {pre C1 ?Q} strip C1 { ?Q}\n  vc C2 ?Q \\<Longrightarrow>\n  \\<turnstile>\\<^sub>3\\<^sub>' {pre C2 ?Q} strip C2 { ?Q}\n  vc (C1;; C2) Q", "show ?case"], ["proof (prove)\nusing this:\n  vc C1 ?Q \\<Longrightarrow>\n  \\<turnstile>\\<^sub>3\\<^sub>' {pre C1 ?Q} strip C1 { ?Q}\n  vc C2 ?Q \\<Longrightarrow>\n  \\<turnstile>\\<^sub>3\\<^sub>' {pre C2 ?Q} strip C2 { ?Q}\n  vc (C1;; C2) Q\n\ngoal (1 subgoal):\n 1. \\<turnstile>\\<^sub>3\\<^sub>' {pre (C1;; C2) Q} strip (C1;; C2) { Q}", "apply (auto intro: Seq)"], ["proof (prove)\ngoal:\nNo subgoals!", "done"], ["proof (state)\nthis:\n  \\<turnstile>\\<^sub>3\\<^sub>' {pre (C1;; C2) Q} strip (C1;; C2) { Q}\n\ngoal (2 subgoals):\n 1. \\<And>x1 C1 C2 Q.\n       \\<lbrakk>\\<And>Q.\n                   vc C1 Q \\<Longrightarrow>\n                   \\<turnstile>\\<^sub>3\\<^sub>' {pre C1 Q} strip C1 { Q};\n        \\<And>Q.\n           vc C2 Q \\<Longrightarrow>\n           \\<turnstile>\\<^sub>3\\<^sub>' {pre C2 Q} strip C2 { Q};\n        vc (IF x1 THEN C1 ELSE C2) Q\\<rbrakk>\n       \\<Longrightarrow> \\<turnstile>\\<^sub>3\\<^sub>' {pre\n                  (IF x1 THEN C1 ELSE C2) Q}\n                strip (IF x1 THEN C1 ELSE C2) { Q}\n 2. \\<And>x1 x2 C Q.\n       \\<lbrakk>\\<And>Q.\n                   vc C Q \\<Longrightarrow>\n                   \\<turnstile>\\<^sub>3\\<^sub>' {pre C Q} strip C { Q};\n        vc ({x1} WHILE x2 DO C) Q\\<rbrakk>\n       \\<Longrightarrow> \\<turnstile>\\<^sub>3\\<^sub>' {pre\n                  ({x1} WHILE x2 DO C) Q}\n                strip ({x1} WHILE x2 DO C) { Q}", "next"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>x1 C1 C2 Q.\n       \\<lbrakk>\\<And>Q.\n                   vc C1 Q \\<Longrightarrow>\n                   \\<turnstile>\\<^sub>3\\<^sub>' {pre C1 Q} strip C1 { Q};\n        \\<And>Q.\n           vc C2 Q \\<Longrightarrow>\n           \\<turnstile>\\<^sub>3\\<^sub>' {pre C2 Q} strip C2 { Q};\n        vc (IF x1 THEN C1 ELSE C2) Q\\<rbrakk>\n       \\<Longrightarrow> \\<turnstile>\\<^sub>3\\<^sub>' {pre\n                  (IF x1 THEN C1 ELSE C2) Q}\n                strip (IF x1 THEN C1 ELSE C2) { Q}\n 2. \\<And>x1 x2 C Q.\n       \\<lbrakk>\\<And>Q.\n                   vc C Q \\<Longrightarrow>\n                   \\<turnstile>\\<^sub>3\\<^sub>' {pre C Q} strip C { Q};\n        vc ({x1} WHILE x2 DO C) Q\\<rbrakk>\n       \\<Longrightarrow> \\<turnstile>\\<^sub>3\\<^sub>' {pre\n                  ({x1} WHILE x2 DO C) Q}\n                strip ({x1} WHILE x2 DO C) { Q}", "case (Aif b C1 C2)"], ["proof (state)\nthis:\n  vc C1 ?Q \\<Longrightarrow>\n  \\<turnstile>\\<^sub>3\\<^sub>' {pre C1 ?Q} strip C1 { ?Q}\n  vc C2 ?Q \\<Longrightarrow>\n  \\<turnstile>\\<^sub>3\\<^sub>' {pre C2 ?Q} strip C2 { ?Q}\n  vc (IF b THEN C1 ELSE C2) Q\n\ngoal (2 subgoals):\n 1. \\<And>x1 C1 C2 Q.\n       \\<lbrakk>\\<And>Q.\n                   vc C1 Q \\<Longrightarrow>\n                   \\<turnstile>\\<^sub>3\\<^sub>' {pre C1 Q} strip C1 { Q};\n        \\<And>Q.\n           vc C2 Q \\<Longrightarrow>\n           \\<turnstile>\\<^sub>3\\<^sub>' {pre C2 Q} strip C2 { Q};\n        vc (IF x1 THEN C1 ELSE C2) Q\\<rbrakk>\n       \\<Longrightarrow> \\<turnstile>\\<^sub>3\\<^sub>' {pre\n                  (IF x1 THEN C1 ELSE C2) Q}\n                strip (IF x1 THEN C1 ELSE C2) { Q}\n 2. \\<And>x1 x2 C Q.\n       \\<lbrakk>\\<And>Q.\n                   vc C Q \\<Longrightarrow>\n                   \\<turnstile>\\<^sub>3\\<^sub>' {pre C Q} strip C { Q};\n        vc ({x1} WHILE x2 DO C) Q\\<rbrakk>\n       \\<Longrightarrow> \\<turnstile>\\<^sub>3\\<^sub>' {pre\n                  ({x1} WHILE x2 DO C) Q}\n                strip ({x1} WHILE x2 DO C) { Q}", "then"], ["proof (chain)\npicking this:\n  vc C1 ?Q \\<Longrightarrow>\n  \\<turnstile>\\<^sub>3\\<^sub>' {pre C1 ?Q} strip C1 { ?Q}\n  vc C2 ?Q \\<Longrightarrow>\n  \\<turnstile>\\<^sub>3\\<^sub>' {pre C2 ?Q} strip C2 { ?Q}\n  vc (IF b THEN C1 ELSE C2) Q", "have Aif1: \"\\<turnstile>\\<^sub>3\\<^sub>' {pre C1 Q} strip C1 {Q}\"\n        and Aif2: \"\\<turnstile>\\<^sub>3\\<^sub>' {pre C2 Q} strip C2 {Q}\""], ["proof (prove)\nusing this:\n  vc C1 ?Q \\<Longrightarrow>\n  \\<turnstile>\\<^sub>3\\<^sub>' {pre C1 ?Q} strip C1 { ?Q}\n  vc C2 ?Q \\<Longrightarrow>\n  \\<turnstile>\\<^sub>3\\<^sub>' {pre C2 ?Q} strip C2 { ?Q}\n  vc (IF b THEN C1 ELSE C2) Q\n\ngoal (1 subgoal):\n 1. \\<turnstile>\\<^sub>3\\<^sub>' {pre C1 Q} strip C1 { Q} &&&\n    \\<turnstile>\\<^sub>3\\<^sub>' {pre C2 Q} strip C2 { Q}", "by auto"], ["proof (state)\nthis:\n  \\<turnstile>\\<^sub>3\\<^sub>' {pre C1 Q} strip C1 { Q}\n  \\<turnstile>\\<^sub>3\\<^sub>' {pre C2 Q} strip C2 { Q}\n\ngoal (2 subgoals):\n 1. \\<And>x1 C1 C2 Q.\n       \\<lbrakk>\\<And>Q.\n                   vc C1 Q \\<Longrightarrow>\n                   \\<turnstile>\\<^sub>3\\<^sub>' {pre C1 Q} strip C1 { Q};\n        \\<And>Q.\n           vc C2 Q \\<Longrightarrow>\n           \\<turnstile>\\<^sub>3\\<^sub>' {pre C2 Q} strip C2 { Q};\n        vc (IF x1 THEN C1 ELSE C2) Q\\<rbrakk>\n       \\<Longrightarrow> \\<turnstile>\\<^sub>3\\<^sub>' {pre\n                  (IF x1 THEN C1 ELSE C2) Q}\n                strip (IF x1 THEN C1 ELSE C2) { Q}\n 2. \\<And>x1 x2 C Q.\n       \\<lbrakk>\\<And>Q.\n                   vc C Q \\<Longrightarrow>\n                   \\<turnstile>\\<^sub>3\\<^sub>' {pre C Q} strip C { Q};\n        vc ({x1} WHILE x2 DO C) Q\\<rbrakk>\n       \\<Longrightarrow> \\<turnstile>\\<^sub>3\\<^sub>' {pre\n                  ({x1} WHILE x2 DO C) Q}\n                strip ({x1} WHILE x2 DO C) { Q}", "show ?case"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<turnstile>\\<^sub>3\\<^sub>' {pre (IF b THEN C1 ELSE C2) Q}\n                                 strip (IF b THEN C1 ELSE C2) { Q}", "apply simp"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<turnstile>\\<^sub>3\\<^sub>' {$ (Suc 0) \\<and>*\n                                  (\\<lambda>(ps, n).\n(pbval b ps \\<longrightarrow>\n vars b \\<subseteq> dom ps \\<and> pre C1 Q (ps, n)) \\<and>\n(\\<not> pbval b ps \\<longrightarrow>\n vars b \\<subseteq> dom ps \\<and> pre C2 Q (ps, n)))}\n                                 IF b THEN strip C1 ELSE strip C2 { Q}", "apply (rule conseqS)"], ["proof (prove)\ngoal (3 subgoals):\n 1. \\<turnstile>\\<^sub>3\\<^sub>' {?P14} IF b THEN strip C1 ELSE strip C2\n                                 { ?Q14}\n 2. \\<And>s n.\n       ($ (Suc 0) \\<and>*\n        (\\<lambda>(ps, n).\n            (pbval b ps \\<longrightarrow>\n             vars b \\<subseteq> dom ps \\<and> pre C1 Q (ps, n)) \\<and>\n            (\\<not> pbval b ps \\<longrightarrow>\n             vars b \\<subseteq> dom ps \\<and> pre C2 Q (ps, n))))\n        (s, n) \\<Longrightarrow>\n       ?P14 (s, n)\n 3. \\<And>s n. ?Q14 (s, n) \\<Longrightarrow> Q (s, n)", "apply(rule If[where P=\"%(ps,n).  (if pbval b ps then pre C1 Q (ps,n) else pre C2 Q (ps,n))\" and Q=\"Q\"])"], ["proof (prove)\ngoal (4 subgoals):\n 1. \\<turnstile>\\<^sub>3\\<^sub>' {\\<lambda>(s, n).\n                                     (case (s, n) of\n(ps, n) \\<Rightarrow>\n  if pbval b ps then pre C1 Q (ps, n) else pre C2 Q (ps, n)) \\<and>\n                                     lmaps_to_axpr b True s}\n                                 strip C1 { Q}\n 2. \\<turnstile>\\<^sub>3\\<^sub>' {\\<lambda>(s, n).\n                                     (case (s, n) of\n(ps, n) \\<Rightarrow>\n  if pbval b ps then pre C1 Q (ps, n) else pre C2 Q (ps, n)) \\<and>\n                                     lmaps_to_axpr b False s}\n                                 strip C2 { Q}\n 3. \\<And>s n.\n       ($ (Suc 0) \\<and>*\n        (\\<lambda>(ps, n).\n            (pbval b ps \\<longrightarrow>\n             vars b \\<subseteq> dom ps \\<and> pre C1 Q (ps, n)) \\<and>\n            (\\<not> pbval b ps \\<longrightarrow>\n             vars b \\<subseteq> dom ps \\<and> pre C2 Q (ps, n))))\n        (s, n) \\<Longrightarrow>\n       ((\\<lambda>(s, n).\n            (case (s, n) of\n             (ps, n) \\<Rightarrow>\n               if pbval b ps then pre C1 Q (ps, n)\n               else pre C2 Q (ps, n)) \\<and>\n            vars b \\<subseteq> dom s) \\<and>*\n        $ 1)\n        (s, n)\n 4. \\<And>s n. Q (s, n) \\<Longrightarrow> Q (s, n)", "subgoal"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<turnstile>\\<^sub>3\\<^sub>' {\\<lambda>(s, n).\n                                     (case (s, n) of\n(ps, n) \\<Rightarrow>\n  if pbval b ps then pre C1 Q (ps, n) else pre C2 Q (ps, n)) \\<and>\n                                     lmaps_to_axpr b True s}\n                                 strip C1 { Q}", "apply simp"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<turnstile>\\<^sub>3\\<^sub>' {\\<lambda>(s, n).\n                                     (pbval b s \\<longrightarrow>\npre C1 Q (s, n) \\<and> vars b \\<subseteq> dom s) \\<and>\n                                     pbval b s}\n                                 strip C1 { Q}", "apply (rule conseqS)"], ["proof (prove)\ngoal (3 subgoals):\n 1. \\<turnstile>\\<^sub>3\\<^sub>' {?P10} strip C1 { ?Q10}\n 2. \\<And>s n.\n       case (s, n) of\n       (s, n) \\<Rightarrow>\n         (pbval b s \\<longrightarrow>\n          pre C1 Q (s, n) \\<and> vars b \\<subseteq> dom s) \\<and>\n         pbval b s \\<Longrightarrow>\n       ?P10 (s, n)\n 3. \\<And>s n. ?Q10 (s, n) \\<Longrightarrow> Q (s, n)", "apply(fact Aif1)"], ["proof (prove)\ngoal (2 subgoals):\n 1. \\<And>s n.\n       case (s, n) of\n       (s, n) \\<Rightarrow>\n         (pbval b s \\<longrightarrow>\n          pre C1 Q (s, n) \\<and> vars b \\<subseteq> dom s) \\<and>\n         pbval b s \\<Longrightarrow>\n       pre C1 Q (s, n)\n 2. \\<And>s n. Q (s, n) \\<Longrightarrow> Q (s, n)", "by auto"], ["proof (prove)\ngoal (3 subgoals):\n 1. \\<turnstile>\\<^sub>3\\<^sub>' {\\<lambda>(s, n).\n                                     (case (s, n) of\n(ps, n) \\<Rightarrow>\n  if pbval b ps then pre C1 Q (ps, n) else pre C2 Q (ps, n)) \\<and>\n                                     lmaps_to_axpr b False s}\n                                 strip C2 { Q}\n 2. \\<And>s n.\n       ($ (Suc 0) \\<and>*\n        (\\<lambda>(ps, n).\n            (pbval b ps \\<longrightarrow>\n             vars b \\<subseteq> dom ps \\<and> pre C1 Q (ps, n)) \\<and>\n            (\\<not> pbval b ps \\<longrightarrow>\n             vars b \\<subseteq> dom ps \\<and> pre C2 Q (ps, n))))\n        (s, n) \\<Longrightarrow>\n       ((\\<lambda>(s, n).\n            (case (s, n) of\n             (ps, n) \\<Rightarrow>\n               if pbval b ps then pre C1 Q (ps, n)\n               else pre C2 Q (ps, n)) \\<and>\n            vars b \\<subseteq> dom s) \\<and>*\n        $ 1)\n        (s, n)\n 3. \\<And>s n. Q (s, n) \\<Longrightarrow> Q (s, n)", "subgoal"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<turnstile>\\<^sub>3\\<^sub>' {\\<lambda>(s, n).\n                                     (case (s, n) of\n(ps, n) \\<Rightarrow>\n  if pbval b ps then pre C1 Q (ps, n) else pre C2 Q (ps, n)) \\<and>\n                                     lmaps_to_axpr b False s}\n                                 strip C2 { Q}", "apply simp"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<turnstile>\\<^sub>3\\<^sub>' {\\<lambda>(s, n).\n                                     \\<not> pbval b s \\<and>\n                                     (\\<not> pbval b s \\<longrightarrow>\npre C2 Q (s, n) \\<and> vars b \\<subseteq> dom s)}\n                                 strip C2 { Q}", "apply (rule conseqS)"], ["proof (prove)\ngoal (3 subgoals):\n 1. \\<turnstile>\\<^sub>3\\<^sub>' {?P10} strip C2 { ?Q10}\n 2. \\<And>s n.\n       case (s, n) of\n       (s, n) \\<Rightarrow>\n         \\<not> pbval b s \\<and>\n         (\\<not> pbval b s \\<longrightarrow>\n          pre C2 Q (s, n) \\<and> vars b \\<subseteq> dom s) \\<Longrightarrow>\n       ?P10 (s, n)\n 3. \\<And>s n. ?Q10 (s, n) \\<Longrightarrow> Q (s, n)", "apply(fact Aif2)"], ["proof (prove)\ngoal (2 subgoals):\n 1. \\<And>s n.\n       case (s, n) of\n       (s, n) \\<Rightarrow>\n         \\<not> pbval b s \\<and>\n         (\\<not> pbval b s \\<longrightarrow>\n          pre C2 Q (s, n) \\<and> vars b \\<subseteq> dom s) \\<Longrightarrow>\n       pre C2 Q (s, n)\n 2. \\<And>s n. Q (s, n) \\<Longrightarrow> Q (s, n)", "by auto"], ["proof (prove)\ngoal (2 subgoals):\n 1. \\<And>s n.\n       ($ (Suc 0) \\<and>*\n        (\\<lambda>(ps, n).\n            (pbval b ps \\<longrightarrow>\n             vars b \\<subseteq> dom ps \\<and> pre C1 Q (ps, n)) \\<and>\n            (\\<not> pbval b ps \\<longrightarrow>\n             vars b \\<subseteq> dom ps \\<and> pre C2 Q (ps, n))))\n        (s, n) \\<Longrightarrow>\n       ((\\<lambda>(s, n).\n            (case (s, n) of\n             (ps, n) \\<Rightarrow>\n               if pbval b ps then pre C1 Q (ps, n)\n               else pre C2 Q (ps, n)) \\<and>\n            vars b \\<subseteq> dom s) \\<and>*\n        $ 1)\n        (s, n)\n 2. \\<And>s n. Q (s, n) \\<Longrightarrow> Q (s, n)", "apply (auto simp: sep_conj_ac)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>s n.\n       ($ (Suc 0) \\<and>*\n        (\\<lambda>(ps, n).\n            (pbval b ps \\<longrightarrow>\n             vars b \\<subseteq> dom ps \\<and> pre C1 Q (ps, n)) \\<and>\n            (\\<not> pbval b ps \\<longrightarrow>\n             vars b \\<subseteq> dom ps \\<and> pre C2 Q (ps, n))))\n        (s, n) \\<Longrightarrow>\n       ($ (Suc 0) \\<and>*\n        (\\<lambda>(s, na).\n            (pbval b s \\<longrightarrow>\n             pre C1 Q (s, na) \\<and> vars b \\<subseteq> dom s) \\<and>\n            (\\<not> pbval b s \\<longrightarrow>\n             pre C2 Q (s, na) \\<and> vars b \\<subseteq> dom s)))\n        (s, n)", "unfolding sep_conj_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>s n.\n       \\<exists>x y.\n          x ## y \\<and>\n          (s, n) = x + y \\<and>\n          $ (Suc 0) x \\<and>\n          (case y of\n           (ps, n) \\<Rightarrow>\n             (pbval b ps \\<longrightarrow>\n              vars b \\<subseteq> dom ps \\<and> pre C1 Q (ps, n)) \\<and>\n             (\\<not> pbval b ps \\<longrightarrow>\n              vars b \\<subseteq> dom ps \\<and>\n              pre C2 Q (ps, n))) \\<Longrightarrow>\n       \\<exists>x y.\n          x ## y \\<and>\n          (s, n) = x + y \\<and>\n          $ (Suc 0) x \\<and>\n          (case y of\n           (s, na) \\<Rightarrow>\n             (pbval b s \\<longrightarrow>\n              pre C1 Q (s, na) \\<and> vars b \\<subseteq> dom s) \\<and>\n             (\\<not> pbval b s \\<longrightarrow>\n              pre C2 Q (s, na) \\<and> vars b \\<subseteq> dom s))", "by blast"], ["proof (state)\nthis:\n  \\<turnstile>\\<^sub>3\\<^sub>' {pre (IF b THEN C1 ELSE C2) Q}\n                               strip (IF b THEN C1 ELSE C2) { Q}\n\ngoal (1 subgoal):\n 1. \\<And>x1 x2 C Q.\n       \\<lbrakk>\\<And>Q.\n                   vc C Q \\<Longrightarrow>\n                   \\<turnstile>\\<^sub>3\\<^sub>' {pre C Q} strip C { Q};\n        vc ({x1} WHILE x2 DO C) Q\\<rbrakk>\n       \\<Longrightarrow> \\<turnstile>\\<^sub>3\\<^sub>' {pre\n                  ({x1} WHILE x2 DO C) Q}\n                strip ({x1} WHILE x2 DO C) { Q}", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x1 x2 C Q.\n       \\<lbrakk>\\<And>Q.\n                   vc C Q \\<Longrightarrow>\n                   \\<turnstile>\\<^sub>3\\<^sub>' {pre C Q} strip C { Q};\n        vc ({x1} WHILE x2 DO C) Q\\<rbrakk>\n       \\<Longrightarrow> \\<turnstile>\\<^sub>3\\<^sub>' {pre\n                  ({x1} WHILE x2 DO C) Q}\n                strip ({x1} WHILE x2 DO C) { Q}", "case (Awhile I b C)"], ["proof (state)\nthis:\n  vc C ?Q \\<Longrightarrow>\n  \\<turnstile>\\<^sub>3\\<^sub>' {pre C ?Q} strip C { ?Q}\n  vc ({I} WHILE b DO C) Q\n\ngoal (1 subgoal):\n 1. \\<And>x1 x2 C Q.\n       \\<lbrakk>\\<And>Q.\n                   vc C Q \\<Longrightarrow>\n                   \\<turnstile>\\<^sub>3\\<^sub>' {pre C Q} strip C { Q};\n        vc ({x1} WHILE x2 DO C) Q\\<rbrakk>\n       \\<Longrightarrow> \\<turnstile>\\<^sub>3\\<^sub>' {pre\n                  ({x1} WHILE x2 DO C) Q}\n                strip ({x1} WHILE x2 DO C) { Q}", "then"], ["proof (chain)\npicking this:\n  vc C ?Q \\<Longrightarrow>\n  \\<turnstile>\\<^sub>3\\<^sub>' {pre C ?Q} strip C { ?Q}\n  vc ({I} WHILE b DO C) Q", "have\n       dom : \"\\<And>s. (I s \\<longrightarrow> vars b \\<subseteq> dom (fst s) )\"\n      and i: \"\\<And>s.  (\\<lambda>(s,n). I (s,n) \\<and> lmaps_to_axpr b True s) s \\<longrightarrow> pre C (I ** $ 1) s\"\n      and ii: \"\\<And>s.  (\\<lambda>(s,n). I (s,n) \\<and> lmaps_to_axpr b False s) s \\<longrightarrow> Q s\"\n      and C: \"\\<turnstile>\\<^sub>3\\<^sub>' {pre C (I ** $ 1)} strip C {I ** $ 1}\""], ["proof (prove)\nusing this:\n  vc C ?Q \\<Longrightarrow>\n  \\<turnstile>\\<^sub>3\\<^sub>' {pre C ?Q} strip C { ?Q}\n  vc ({I} WHILE b DO C) Q\n\ngoal (1 subgoal):\n 1. ((\\<And>s. I s \\<longrightarrow> vars b \\<subseteq> dom (fst s)) &&&\n     (\\<And>s.\n         (case s of\n          (s, n) \\<Rightarrow>\n            I (s, n) \\<and> lmaps_to_axpr b True s) \\<longrightarrow>\n         pre C (I \\<and>* $ 1) s)) &&&\n    (\\<And>s.\n        (case s of\n         (s, n) \\<Rightarrow>\n           I (s, n) \\<and> lmaps_to_axpr b False s) \\<longrightarrow>\n        Q s) &&&\n    \\<turnstile>\\<^sub>3\\<^sub>' {pre C (I \\<and>* $ 1)} strip C\n                                 { I \\<and>* $ 1}", "by fastforce+"], ["proof (state)\nthis:\n  I ?s \\<longrightarrow> vars b \\<subseteq> dom (fst ?s)\n  (case ?s of\n   (s, n) \\<Rightarrow>\n     I (s, n) \\<and> lmaps_to_axpr b True s) \\<longrightarrow>\n  pre C (I \\<and>* $ 1) ?s\n  (case ?s of\n   (s, n) \\<Rightarrow>\n     I (s, n) \\<and> lmaps_to_axpr b False s) \\<longrightarrow>\n  Q ?s\n  \\<turnstile>\\<^sub>3\\<^sub>' {pre C (I \\<and>* $ 1)} strip C\n                               { I \\<and>* $ 1}\n\ngoal (1 subgoal):\n 1. \\<And>x1 x2 C Q.\n       \\<lbrakk>\\<And>Q.\n                   vc C Q \\<Longrightarrow>\n                   \\<turnstile>\\<^sub>3\\<^sub>' {pre C Q} strip C { Q};\n        vc ({x1} WHILE x2 DO C) Q\\<rbrakk>\n       \\<Longrightarrow> \\<turnstile>\\<^sub>3\\<^sub>' {pre\n                  ({x1} WHILE x2 DO C) Q}\n                strip ({x1} WHILE x2 DO C) { Q}", "show ?case"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<turnstile>\\<^sub>3\\<^sub>' {pre ({I} WHILE b DO C) Q}\n                                 strip ({I} WHILE b DO C) { Q}", "apply simp"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<turnstile>\\<^sub>3\\<^sub>' {I \\<and>* $ (Suc 0)} WHILE b DO strip C\n                                 { Q}", "apply(rule conseqS)"], ["proof (prove)\ngoal (3 subgoals):\n 1. \\<turnstile>\\<^sub>3\\<^sub>' {?P1} WHILE b DO strip C { ?Q1}\n 2. \\<And>s n. (I \\<and>* $ (Suc 0)) (s, n) \\<Longrightarrow> ?P1 (s, n)\n 3. \\<And>s n. ?Q1 (s, n) \\<Longrightarrow> Q (s, n)", "apply(rule While[where P=I])"], ["proof (prove)\ngoal (3 subgoals):\n 1. \\<turnstile>\\<^sub>3\\<^sub>' {\\<lambda>(s, n).\n                                     I (s, n) \\<and> lmaps_to_axpr b True s}\n                                 strip C\n                                 { (\\<lambda>(s, n).\n I (s, n) \\<and> vars b \\<subseteq> dom s) \\<and>*\n                                   $ 1}\n 2. \\<And>s n.\n       (I \\<and>* $ (Suc 0)) (s, n) \\<Longrightarrow>\n       ((\\<lambda>(s, n). I (s, n) \\<and> vars b \\<subseteq> dom s) \\<and>*\n        $ 1)\n        (s, n)\n 3. \\<And>s n.\n       case (s, n) of\n       (s, n) \\<Rightarrow>\n         I (s, n) \\<and> lmaps_to_axpr b False s \\<Longrightarrow>\n       Q (s, n)", "apply(rule conseqS)"], ["proof (prove)\ngoal (5 subgoals):\n 1. \\<turnstile>\\<^sub>3\\<^sub>' {?P7} strip C { ?Q7}\n 2. \\<And>s n.\n       case (s, n) of\n       (s, n) \\<Rightarrow>\n         I (s, n) \\<and> lmaps_to_axpr b True s \\<Longrightarrow>\n       ?P7 (s, n)\n 3. \\<And>s n.\n       ?Q7 (s, n) \\<Longrightarrow>\n       ((\\<lambda>(s, n). I (s, n) \\<and> vars b \\<subseteq> dom s) \\<and>*\n        $ 1)\n        (s, n)\n 4. \\<And>s n.\n       (I \\<and>* $ (Suc 0)) (s, n) \\<Longrightarrow>\n       ((\\<lambda>(s, n). I (s, n) \\<and> vars b \\<subseteq> dom s) \\<and>*\n        $ 1)\n        (s, n)\n 5. \\<And>s n.\n       case (s, n) of\n       (s, n) \\<Rightarrow>\n         I (s, n) \\<and> lmaps_to_axpr b False s \\<Longrightarrow>\n       Q (s, n)", "apply(rule C)"], ["proof (prove)\ngoal (4 subgoals):\n 1. \\<And>s n.\n       case (s, n) of\n       (s, n) \\<Rightarrow>\n         I (s, n) \\<and> lmaps_to_axpr b True s \\<Longrightarrow>\n       pre C (I \\<and>* $ 1) (s, n)\n 2. \\<And>s n.\n       (I \\<and>* $ 1) (s, n) \\<Longrightarrow>\n       ((\\<lambda>(s, n). I (s, n) \\<and> vars b \\<subseteq> dom s) \\<and>*\n        $ 1)\n        (s, n)\n 3. \\<And>s n.\n       (I \\<and>* $ (Suc 0)) (s, n) \\<Longrightarrow>\n       ((\\<lambda>(s, n). I (s, n) \\<and> vars b \\<subseteq> dom s) \\<and>*\n        $ 1)\n        (s, n)\n 4. \\<And>s n.\n       case (s, n) of\n       (s, n) \\<Rightarrow>\n         I (s, n) \\<and> lmaps_to_axpr b False s \\<Longrightarrow>\n       Q (s, n)", "subgoal"], ["proof (prove)\ngoal (1 subgoal):\n 1. case (s_, n_) of\n    (s, n) \\<Rightarrow>\n      I (s, n) \\<and> lmaps_to_axpr b True s \\<Longrightarrow>\n    pre C (I \\<and>* $ 1) (s_, n_)", "using i"], ["proof (prove)\nusing this:\n  (case ?s of\n   (s, n) \\<Rightarrow>\n     I (s, n) \\<and> lmaps_to_axpr b True s) \\<longrightarrow>\n  pre C (I \\<and>* $ 1) ?s\n\ngoal (1 subgoal):\n 1. case (s_, n_) of\n    (s, n) \\<Rightarrow>\n      I (s, n) \\<and> lmaps_to_axpr b True s \\<Longrightarrow>\n    pre C (I \\<and>* $ 1) (s_, n_)", "by auto"], ["proof (prove)\ngoal (3 subgoals):\n 1. \\<And>s n.\n       (I \\<and>* $ 1) (s, n) \\<Longrightarrow>\n       ((\\<lambda>(s, n). I (s, n) \\<and> vars b \\<subseteq> dom s) \\<and>*\n        $ 1)\n        (s, n)\n 2. \\<And>s n.\n       (I \\<and>* $ (Suc 0)) (s, n) \\<Longrightarrow>\n       ((\\<lambda>(s, n). I (s, n) \\<and> vars b \\<subseteq> dom s) \\<and>*\n        $ 1)\n        (s, n)\n 3. \\<And>s n.\n       case (s, n) of\n       (s, n) \\<Rightarrow>\n         I (s, n) \\<and> lmaps_to_axpr b False s \\<Longrightarrow>\n       Q (s, n)", "subgoal"], ["proof (prove)\ngoal (1 subgoal):\n 1. (I \\<and>* $ 1) (s_, n_) \\<Longrightarrow>\n    ((\\<lambda>(s, n). I (s, n) \\<and> vars b \\<subseteq> dom s) \\<and>*\n     $ 1)\n     (s_, n_)", "apply simp"], ["proof (prove)\ngoal (1 subgoal):\n 1. (I \\<and>* $ (Suc 0)) (s_, n_) \\<Longrightarrow>\n    ((\\<lambda>(s, n). I (s, n) \\<and> vars b \\<subseteq> dom s) \\<and>*\n     $ (Suc 0))\n     (s_, n_)", "using dom"], ["proof (prove)\nusing this:\n  I ?s \\<longrightarrow> vars b \\<subseteq> dom (fst ?s)\n\ngoal (1 subgoal):\n 1. (I \\<and>* $ (Suc 0)) (s_, n_) \\<Longrightarrow>\n    ((\\<lambda>(s, n). I (s, n) \\<and> vars b \\<subseteq> dom s) \\<and>*\n     $ (Suc 0))\n     (s_, n_)", "unfolding sep_conj_def"], ["proof (prove)\nusing this:\n  I ?s \\<longrightarrow> vars b \\<subseteq> dom (fst ?s)\n\ngoal (1 subgoal):\n 1. \\<exists>x y.\n       x ## y \\<and>\n       (s_, n_) = x + y \\<and> I x \\<and> $ (Suc 0) y \\<Longrightarrow>\n    \\<exists>x y.\n       x ## y \\<and>\n       (s_, n_) = x + y \\<and>\n       (case x of\n        (s, n) \\<Rightarrow>\n          I (s, n) \\<and> vars b \\<subseteq> dom s) \\<and>\n       $ (Suc 0) y", "by force"], ["proof (prove)\ngoal (2 subgoals):\n 1. \\<And>s n.\n       (I \\<and>* $ (Suc 0)) (s, n) \\<Longrightarrow>\n       ((\\<lambda>(s, n). I (s, n) \\<and> vars b \\<subseteq> dom s) \\<and>*\n        $ 1)\n        (s, n)\n 2. \\<And>s n.\n       case (s, n) of\n       (s, n) \\<Rightarrow>\n         I (s, n) \\<and> lmaps_to_axpr b False s \\<Longrightarrow>\n       Q (s, n)", "subgoal"], ["proof (prove)\ngoal (1 subgoal):\n 1. (I \\<and>* $ (Suc 0)) (s_, n_) \\<Longrightarrow>\n    ((\\<lambda>(s, n). I (s, n) \\<and> vars b \\<subseteq> dom s) \\<and>*\n     $ 1)\n     (s_, n_)", "apply simp"], ["proof (prove)\ngoal (1 subgoal):\n 1. (I \\<and>* $ (Suc 0)) (s_, n_) \\<Longrightarrow>\n    ((\\<lambda>(s, n). I (s, n) \\<and> vars b \\<subseteq> dom s) \\<and>*\n     $ (Suc 0))\n     (s_, n_)", "using dom"], ["proof (prove)\nusing this:\n  I ?s \\<longrightarrow> vars b \\<subseteq> dom (fst ?s)\n\ngoal (1 subgoal):\n 1. (I \\<and>* $ (Suc 0)) (s_, n_) \\<Longrightarrow>\n    ((\\<lambda>(s, n). I (s, n) \\<and> vars b \\<subseteq> dom s) \\<and>*\n     $ (Suc 0))\n     (s_, n_)", "unfolding sep_conj_def"], ["proof (prove)\nusing this:\n  I ?s \\<longrightarrow> vars b \\<subseteq> dom (fst ?s)\n\ngoal (1 subgoal):\n 1. \\<exists>x y.\n       x ## y \\<and>\n       (s_, n_) = x + y \\<and> I x \\<and> $ (Suc 0) y \\<Longrightarrow>\n    \\<exists>x y.\n       x ## y \\<and>\n       (s_, n_) = x + y \\<and>\n       (case x of\n        (s, n) \\<Rightarrow>\n          I (s, n) \\<and> vars b \\<subseteq> dom s) \\<and>\n       $ (Suc 0) y", "by force"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>s n.\n       case (s, n) of\n       (s, n) \\<Rightarrow>\n         I (s, n) \\<and> lmaps_to_axpr b False s \\<Longrightarrow>\n       Q (s, n)", "subgoal"], ["proof (prove)\ngoal (1 subgoal):\n 1. case (s_, n_) of\n    (s, n) \\<Rightarrow>\n      I (s, n) \\<and> lmaps_to_axpr b False s \\<Longrightarrow>\n    Q (s_, n_)", "using ii"], ["proof (prove)\nusing this:\n  (case ?s of\n   (s, n) \\<Rightarrow>\n     I (s, n) \\<and> lmaps_to_axpr b False s) \\<longrightarrow>\n  Q ?s\n\ngoal (1 subgoal):\n 1. case (s_, n_) of\n    (s, n) \\<Rightarrow>\n      I (s, n) \\<and> lmaps_to_axpr b False s \\<Longrightarrow>\n    Q (s_, n_)", "apply auto"], ["proof (prove)\ngoal:\nNo subgoals!", "done"], ["proof (prove)\ngoal:\nNo subgoals!", "done"], ["proof (state)\nthis:\n  \\<turnstile>\\<^sub>3\\<^sub>' {pre ({I} WHILE b DO C) Q}\n                               strip ({I} WHILE b DO C) { Q}\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma vc2valid: \"vc C Q \\<Longrightarrow> \\<forall>s. P s \\<longrightarrow> pre C Q s \\<Longrightarrow> \\<Turnstile>\\<^sub>3\\<^sub>' {P} strip C { Q}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>vc C Q; \\<forall>s. P s \\<longrightarrow> pre C Q s\\<rbrakk>\n    \\<Longrightarrow> \\<Turnstile>\\<^sub>3\\<^sub>' {P} strip C { Q}", "using hoareT_sound2_part weakenpre vc_sound"], ["proof (prove)\nusing this:\n  \\<turnstile>\\<^sub>3\\<^sub>' {?P} ?c { ?Q} \\<Longrightarrow>\n  \\<Turnstile>\\<^sub>3\\<^sub>' {?P} ?c { ?Q}\n  \\<lbrakk>\\<turnstile>\\<^sub>3\\<^sub>' {?P} ?c { ?Q};\n   \\<And>s. ?P' s \\<Longrightarrow> ?P s\\<rbrakk>\n  \\<Longrightarrow> \\<turnstile>\\<^sub>3\\<^sub>' {?P'} ?c { ?Q}\n  vc ?C ?Q \\<Longrightarrow>\n  \\<turnstile>\\<^sub>3\\<^sub>' {pre ?C ?Q} strip ?C { ?Q}\n\ngoal (1 subgoal):\n 1. \\<lbrakk>vc C Q; \\<forall>s. P s \\<longrightarrow> pre C Q s\\<rbrakk>\n    \\<Longrightarrow> \\<Turnstile>\\<^sub>3\\<^sub>' {P} strip C { Q}", "by metis"], ["", "lemma pre_mono: assumes \"\\<forall>s. P s \\<longrightarrow> Q s\" shows \"\\<And>s. pre C P s \\<Longrightarrow> pre C Q s\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>s. pre C P s \\<Longrightarrow> pre C Q s", "using assms"], ["proof (prove)\nusing this:\n  \\<forall>s. P s \\<longrightarrow> Q s\n\ngoal (1 subgoal):\n 1. \\<And>s. pre C P s \\<Longrightarrow> pre C Q s", "proof(induct C arbitrary: P Q)"], ["proof (state)\ngoal (5 subgoals):\n 1. \\<And>s P Q.\n       \\<lbrakk>pre SKIP P s; \\<forall>s. P s \\<longrightarrow> Q s\\<rbrakk>\n       \\<Longrightarrow> pre SKIP Q s\n 2. \\<And>x1 x2 s P Q.\n       \\<lbrakk>pre (x1 ::= x2) P s;\n        \\<forall>s. P s \\<longrightarrow> Q s\\<rbrakk>\n       \\<Longrightarrow> pre (x1 ::= x2) Q s\n 3. \\<And>C1 C2 s P Q.\n       \\<lbrakk>\\<And>s P Q.\n                   \\<lbrakk>pre C1 P s;\n                    \\<forall>s. P s \\<longrightarrow> Q s\\<rbrakk>\n                   \\<Longrightarrow> pre C1 Q s;\n        \\<And>s P Q.\n           \\<lbrakk>pre C2 P s;\n            \\<forall>s. P s \\<longrightarrow> Q s\\<rbrakk>\n           \\<Longrightarrow> pre C2 Q s;\n        pre (C1;; C2) P s; \\<forall>s. P s \\<longrightarrow> Q s\\<rbrakk>\n       \\<Longrightarrow> pre (C1;; C2) Q s\n 4. \\<And>x1 C1 C2 s P Q.\n       \\<lbrakk>\\<And>s P Q.\n                   \\<lbrakk>pre C1 P s;\n                    \\<forall>s. P s \\<longrightarrow> Q s\\<rbrakk>\n                   \\<Longrightarrow> pre C1 Q s;\n        \\<And>s P Q.\n           \\<lbrakk>pre C2 P s;\n            \\<forall>s. P s \\<longrightarrow> Q s\\<rbrakk>\n           \\<Longrightarrow> pre C2 Q s;\n        pre (IF x1 THEN C1 ELSE C2) P s;\n        \\<forall>s. P s \\<longrightarrow> Q s\\<rbrakk>\n       \\<Longrightarrow> pre (IF x1 THEN C1 ELSE C2) Q s\n 5. \\<And>x1 x2 C s P Q.\n       \\<lbrakk>\\<And>s P Q.\n                   \\<lbrakk>pre C P s;\n                    \\<forall>s. P s \\<longrightarrow> Q s\\<rbrakk>\n                   \\<Longrightarrow> pre C Q s;\n        pre ({x1} WHILE x2 DO C) P s;\n        \\<forall>s. P s \\<longrightarrow> Q s\\<rbrakk>\n       \\<Longrightarrow> pre ({x1} WHILE x2 DO C) Q s", "case Askip"], ["proof (state)\nthis:\n  pre SKIP P s\n  \\<forall>s. P s \\<longrightarrow> Q s\n\ngoal (5 subgoals):\n 1. \\<And>s P Q.\n       \\<lbrakk>pre SKIP P s; \\<forall>s. P s \\<longrightarrow> Q s\\<rbrakk>\n       \\<Longrightarrow> pre SKIP Q s\n 2. \\<And>x1 x2 s P Q.\n       \\<lbrakk>pre (x1 ::= x2) P s;\n        \\<forall>s. P s \\<longrightarrow> Q s\\<rbrakk>\n       \\<Longrightarrow> pre (x1 ::= x2) Q s\n 3. \\<And>C1 C2 s P Q.\n       \\<lbrakk>\\<And>s P Q.\n                   \\<lbrakk>pre C1 P s;\n                    \\<forall>s. P s \\<longrightarrow> Q s\\<rbrakk>\n                   \\<Longrightarrow> pre C1 Q s;\n        \\<And>s P Q.\n           \\<lbrakk>pre C2 P s;\n            \\<forall>s. P s \\<longrightarrow> Q s\\<rbrakk>\n           \\<Longrightarrow> pre C2 Q s;\n        pre (C1;; C2) P s; \\<forall>s. P s \\<longrightarrow> Q s\\<rbrakk>\n       \\<Longrightarrow> pre (C1;; C2) Q s\n 4. \\<And>x1 C1 C2 s P Q.\n       \\<lbrakk>\\<And>s P Q.\n                   \\<lbrakk>pre C1 P s;\n                    \\<forall>s. P s \\<longrightarrow> Q s\\<rbrakk>\n                   \\<Longrightarrow> pre C1 Q s;\n        \\<And>s P Q.\n           \\<lbrakk>pre C2 P s;\n            \\<forall>s. P s \\<longrightarrow> Q s\\<rbrakk>\n           \\<Longrightarrow> pre C2 Q s;\n        pre (IF x1 THEN C1 ELSE C2) P s;\n        \\<forall>s. P s \\<longrightarrow> Q s\\<rbrakk>\n       \\<Longrightarrow> pre (IF x1 THEN C1 ELSE C2) Q s\n 5. \\<And>x1 x2 C s P Q.\n       \\<lbrakk>\\<And>s P Q.\n                   \\<lbrakk>pre C P s;\n                    \\<forall>s. P s \\<longrightarrow> Q s\\<rbrakk>\n                   \\<Longrightarrow> pre C Q s;\n        pre ({x1} WHILE x2 DO C) P s;\n        \\<forall>s. P s \\<longrightarrow> Q s\\<rbrakk>\n       \\<Longrightarrow> pre ({x1} WHILE x2 DO C) Q s", "then"], ["proof (chain)\npicking this:\n  pre SKIP P s\n  \\<forall>s. P s \\<longrightarrow> Q s", "show ?case"], ["proof (prove)\nusing this:\n  pre SKIP P s\n  \\<forall>s. P s \\<longrightarrow> Q s\n\ngoal (1 subgoal):\n 1. pre SKIP Q s", "apply (auto simp: sep_conj_def dollar_def)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>aa ba.\n       \\<lbrakk>\\<forall>a b. P (a, b) \\<longrightarrow> Q (a, b);\n        s = (aa, Suc ba); P (aa, ba)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>a b ab.\n                            a ## ab \\<and>\n                            aa = a + ab \\<and>\n                            (\\<exists>bb.\n                                Suc ba = b + bb \\<and>\n                                a = 0 \\<and> b = Suc 0 \\<and> Q (ab, bb))", "by force"], ["proof (state)\nthis:\n  pre SKIP Q s\n\ngoal (4 subgoals):\n 1. \\<And>x1 x2 s P Q.\n       \\<lbrakk>pre (x1 ::= x2) P s;\n        \\<forall>s. P s \\<longrightarrow> Q s\\<rbrakk>\n       \\<Longrightarrow> pre (x1 ::= x2) Q s\n 2. \\<And>C1 C2 s P Q.\n       \\<lbrakk>\\<And>s P Q.\n                   \\<lbrakk>pre C1 P s;\n                    \\<forall>s. P s \\<longrightarrow> Q s\\<rbrakk>\n                   \\<Longrightarrow> pre C1 Q s;\n        \\<And>s P Q.\n           \\<lbrakk>pre C2 P s;\n            \\<forall>s. P s \\<longrightarrow> Q s\\<rbrakk>\n           \\<Longrightarrow> pre C2 Q s;\n        pre (C1;; C2) P s; \\<forall>s. P s \\<longrightarrow> Q s\\<rbrakk>\n       \\<Longrightarrow> pre (C1;; C2) Q s\n 3. \\<And>x1 C1 C2 s P Q.\n       \\<lbrakk>\\<And>s P Q.\n                   \\<lbrakk>pre C1 P s;\n                    \\<forall>s. P s \\<longrightarrow> Q s\\<rbrakk>\n                   \\<Longrightarrow> pre C1 Q s;\n        \\<And>s P Q.\n           \\<lbrakk>pre C2 P s;\n            \\<forall>s. P s \\<longrightarrow> Q s\\<rbrakk>\n           \\<Longrightarrow> pre C2 Q s;\n        pre (IF x1 THEN C1 ELSE C2) P s;\n        \\<forall>s. P s \\<longrightarrow> Q s\\<rbrakk>\n       \\<Longrightarrow> pre (IF x1 THEN C1 ELSE C2) Q s\n 4. \\<And>x1 x2 C s P Q.\n       \\<lbrakk>\\<And>s P Q.\n                   \\<lbrakk>pre C P s;\n                    \\<forall>s. P s \\<longrightarrow> Q s\\<rbrakk>\n                   \\<Longrightarrow> pre C Q s;\n        pre ({x1} WHILE x2 DO C) P s;\n        \\<forall>s. P s \\<longrightarrow> Q s\\<rbrakk>\n       \\<Longrightarrow> pre ({x1} WHILE x2 DO C) Q s", "next"], ["proof (state)\ngoal (4 subgoals):\n 1. \\<And>x1 x2 s P Q.\n       \\<lbrakk>pre (x1 ::= x2) P s;\n        \\<forall>s. P s \\<longrightarrow> Q s\\<rbrakk>\n       \\<Longrightarrow> pre (x1 ::= x2) Q s\n 2. \\<And>C1 C2 s P Q.\n       \\<lbrakk>\\<And>s P Q.\n                   \\<lbrakk>pre C1 P s;\n                    \\<forall>s. P s \\<longrightarrow> Q s\\<rbrakk>\n                   \\<Longrightarrow> pre C1 Q s;\n        \\<And>s P Q.\n           \\<lbrakk>pre C2 P s;\n            \\<forall>s. P s \\<longrightarrow> Q s\\<rbrakk>\n           \\<Longrightarrow> pre C2 Q s;\n        pre (C1;; C2) P s; \\<forall>s. P s \\<longrightarrow> Q s\\<rbrakk>\n       \\<Longrightarrow> pre (C1;; C2) Q s\n 3. \\<And>x1 C1 C2 s P Q.\n       \\<lbrakk>\\<And>s P Q.\n                   \\<lbrakk>pre C1 P s;\n                    \\<forall>s. P s \\<longrightarrow> Q s\\<rbrakk>\n                   \\<Longrightarrow> pre C1 Q s;\n        \\<And>s P Q.\n           \\<lbrakk>pre C2 P s;\n            \\<forall>s. P s \\<longrightarrow> Q s\\<rbrakk>\n           \\<Longrightarrow> pre C2 Q s;\n        pre (IF x1 THEN C1 ELSE C2) P s;\n        \\<forall>s. P s \\<longrightarrow> Q s\\<rbrakk>\n       \\<Longrightarrow> pre (IF x1 THEN C1 ELSE C2) Q s\n 4. \\<And>x1 x2 C s P Q.\n       \\<lbrakk>\\<And>s P Q.\n                   \\<lbrakk>pre C P s;\n                    \\<forall>s. P s \\<longrightarrow> Q s\\<rbrakk>\n                   \\<Longrightarrow> pre C Q s;\n        pre ({x1} WHILE x2 DO C) P s;\n        \\<forall>s. P s \\<longrightarrow> Q s\\<rbrakk>\n       \\<Longrightarrow> pre ({x1} WHILE x2 DO C) Q s", "case (Aassign x1 x2)"], ["proof (state)\nthis:\n  pre (x1 ::= x2) P s\n  \\<forall>s. P s \\<longrightarrow> Q s\n\ngoal (4 subgoals):\n 1. \\<And>x1 x2 s P Q.\n       \\<lbrakk>pre (x1 ::= x2) P s;\n        \\<forall>s. P s \\<longrightarrow> Q s\\<rbrakk>\n       \\<Longrightarrow> pre (x1 ::= x2) Q s\n 2. \\<And>C1 C2 s P Q.\n       \\<lbrakk>\\<And>s P Q.\n                   \\<lbrakk>pre C1 P s;\n                    \\<forall>s. P s \\<longrightarrow> Q s\\<rbrakk>\n                   \\<Longrightarrow> pre C1 Q s;\n        \\<And>s P Q.\n           \\<lbrakk>pre C2 P s;\n            \\<forall>s. P s \\<longrightarrow> Q s\\<rbrakk>\n           \\<Longrightarrow> pre C2 Q s;\n        pre (C1;; C2) P s; \\<forall>s. P s \\<longrightarrow> Q s\\<rbrakk>\n       \\<Longrightarrow> pre (C1;; C2) Q s\n 3. \\<And>x1 C1 C2 s P Q.\n       \\<lbrakk>\\<And>s P Q.\n                   \\<lbrakk>pre C1 P s;\n                    \\<forall>s. P s \\<longrightarrow> Q s\\<rbrakk>\n                   \\<Longrightarrow> pre C1 Q s;\n        \\<And>s P Q.\n           \\<lbrakk>pre C2 P s;\n            \\<forall>s. P s \\<longrightarrow> Q s\\<rbrakk>\n           \\<Longrightarrow> pre C2 Q s;\n        pre (IF x1 THEN C1 ELSE C2) P s;\n        \\<forall>s. P s \\<longrightarrow> Q s\\<rbrakk>\n       \\<Longrightarrow> pre (IF x1 THEN C1 ELSE C2) Q s\n 4. \\<And>x1 x2 C s P Q.\n       \\<lbrakk>\\<And>s P Q.\n                   \\<lbrakk>pre C P s;\n                    \\<forall>s. P s \\<longrightarrow> Q s\\<rbrakk>\n                   \\<Longrightarrow> pre C Q s;\n        pre ({x1} WHILE x2 DO C) P s;\n        \\<forall>s. P s \\<longrightarrow> Q s\\<rbrakk>\n       \\<Longrightarrow> pre ({x1} WHILE x2 DO C) Q s", "then"], ["proof (chain)\npicking this:\n  pre (x1 ::= x2) P s\n  \\<forall>s. P s \\<longrightarrow> Q s", "show ?case"], ["proof (prove)\nusing this:\n  pre (x1 ::= x2) P s\n  \\<forall>s. P s \\<longrightarrow> Q s\n\ngoal (1 subgoal):\n 1. pre (x1 ::= x2) Q s", "by (auto simp: sep_conj_def dollar_def)"], ["proof (state)\nthis:\n  pre (x1 ::= x2) Q s\n\ngoal (3 subgoals):\n 1. \\<And>C1 C2 s P Q.\n       \\<lbrakk>\\<And>s P Q.\n                   \\<lbrakk>pre C1 P s;\n                    \\<forall>s. P s \\<longrightarrow> Q s\\<rbrakk>\n                   \\<Longrightarrow> pre C1 Q s;\n        \\<And>s P Q.\n           \\<lbrakk>pre C2 P s;\n            \\<forall>s. P s \\<longrightarrow> Q s\\<rbrakk>\n           \\<Longrightarrow> pre C2 Q s;\n        pre (C1;; C2) P s; \\<forall>s. P s \\<longrightarrow> Q s\\<rbrakk>\n       \\<Longrightarrow> pre (C1;; C2) Q s\n 2. \\<And>x1 C1 C2 s P Q.\n       \\<lbrakk>\\<And>s P Q.\n                   \\<lbrakk>pre C1 P s;\n                    \\<forall>s. P s \\<longrightarrow> Q s\\<rbrakk>\n                   \\<Longrightarrow> pre C1 Q s;\n        \\<And>s P Q.\n           \\<lbrakk>pre C2 P s;\n            \\<forall>s. P s \\<longrightarrow> Q s\\<rbrakk>\n           \\<Longrightarrow> pre C2 Q s;\n        pre (IF x1 THEN C1 ELSE C2) P s;\n        \\<forall>s. P s \\<longrightarrow> Q s\\<rbrakk>\n       \\<Longrightarrow> pre (IF x1 THEN C1 ELSE C2) Q s\n 3. \\<And>x1 x2 C s P Q.\n       \\<lbrakk>\\<And>s P Q.\n                   \\<lbrakk>pre C P s;\n                    \\<forall>s. P s \\<longrightarrow> Q s\\<rbrakk>\n                   \\<Longrightarrow> pre C Q s;\n        pre ({x1} WHILE x2 DO C) P s;\n        \\<forall>s. P s \\<longrightarrow> Q s\\<rbrakk>\n       \\<Longrightarrow> pre ({x1} WHILE x2 DO C) Q s", "next"], ["proof (state)\ngoal (3 subgoals):\n 1. \\<And>C1 C2 s P Q.\n       \\<lbrakk>\\<And>s P Q.\n                   \\<lbrakk>pre C1 P s;\n                    \\<forall>s. P s \\<longrightarrow> Q s\\<rbrakk>\n                   \\<Longrightarrow> pre C1 Q s;\n        \\<And>s P Q.\n           \\<lbrakk>pre C2 P s;\n            \\<forall>s. P s \\<longrightarrow> Q s\\<rbrakk>\n           \\<Longrightarrow> pre C2 Q s;\n        pre (C1;; C2) P s; \\<forall>s. P s \\<longrightarrow> Q s\\<rbrakk>\n       \\<Longrightarrow> pre (C1;; C2) Q s\n 2. \\<And>x1 C1 C2 s P Q.\n       \\<lbrakk>\\<And>s P Q.\n                   \\<lbrakk>pre C1 P s;\n                    \\<forall>s. P s \\<longrightarrow> Q s\\<rbrakk>\n                   \\<Longrightarrow> pre C1 Q s;\n        \\<And>s P Q.\n           \\<lbrakk>pre C2 P s;\n            \\<forall>s. P s \\<longrightarrow> Q s\\<rbrakk>\n           \\<Longrightarrow> pre C2 Q s;\n        pre (IF x1 THEN C1 ELSE C2) P s;\n        \\<forall>s. P s \\<longrightarrow> Q s\\<rbrakk>\n       \\<Longrightarrow> pre (IF x1 THEN C1 ELSE C2) Q s\n 3. \\<And>x1 x2 C s P Q.\n       \\<lbrakk>\\<And>s P Q.\n                   \\<lbrakk>pre C P s;\n                    \\<forall>s. P s \\<longrightarrow> Q s\\<rbrakk>\n                   \\<Longrightarrow> pre C Q s;\n        pre ({x1} WHILE x2 DO C) P s;\n        \\<forall>s. P s \\<longrightarrow> Q s\\<rbrakk>\n       \\<Longrightarrow> pre ({x1} WHILE x2 DO C) Q s", "case (Aseq C1 C2)"], ["proof (state)\nthis:\n  \\<lbrakk>pre C1 ?P ?s; \\<forall>s. ?P s \\<longrightarrow> ?Q s\\<rbrakk>\n  \\<Longrightarrow> pre C1 ?Q ?s\n  \\<lbrakk>pre C2 ?P ?s; \\<forall>s. ?P s \\<longrightarrow> ?Q s\\<rbrakk>\n  \\<Longrightarrow> pre C2 ?Q ?s\n  pre (C1;; C2) P s\n  \\<forall>s. P s \\<longrightarrow> Q s\n\ngoal (3 subgoals):\n 1. \\<And>C1 C2 s P Q.\n       \\<lbrakk>\\<And>s P Q.\n                   \\<lbrakk>pre C1 P s;\n                    \\<forall>s. P s \\<longrightarrow> Q s\\<rbrakk>\n                   \\<Longrightarrow> pre C1 Q s;\n        \\<And>s P Q.\n           \\<lbrakk>pre C2 P s;\n            \\<forall>s. P s \\<longrightarrow> Q s\\<rbrakk>\n           \\<Longrightarrow> pre C2 Q s;\n        pre (C1;; C2) P s; \\<forall>s. P s \\<longrightarrow> Q s\\<rbrakk>\n       \\<Longrightarrow> pre (C1;; C2) Q s\n 2. \\<And>x1 C1 C2 s P Q.\n       \\<lbrakk>\\<And>s P Q.\n                   \\<lbrakk>pre C1 P s;\n                    \\<forall>s. P s \\<longrightarrow> Q s\\<rbrakk>\n                   \\<Longrightarrow> pre C1 Q s;\n        \\<And>s P Q.\n           \\<lbrakk>pre C2 P s;\n            \\<forall>s. P s \\<longrightarrow> Q s\\<rbrakk>\n           \\<Longrightarrow> pre C2 Q s;\n        pre (IF x1 THEN C1 ELSE C2) P s;\n        \\<forall>s. P s \\<longrightarrow> Q s\\<rbrakk>\n       \\<Longrightarrow> pre (IF x1 THEN C1 ELSE C2) Q s\n 3. \\<And>x1 x2 C s P Q.\n       \\<lbrakk>\\<And>s P Q.\n                   \\<lbrakk>pre C P s;\n                    \\<forall>s. P s \\<longrightarrow> Q s\\<rbrakk>\n                   \\<Longrightarrow> pre C Q s;\n        pre ({x1} WHILE x2 DO C) P s;\n        \\<forall>s. P s \\<longrightarrow> Q s\\<rbrakk>\n       \\<Longrightarrow> pre ({x1} WHILE x2 DO C) Q s", "then"], ["proof (chain)\npicking this:\n  \\<lbrakk>pre C1 ?P ?s; \\<forall>s. ?P s \\<longrightarrow> ?Q s\\<rbrakk>\n  \\<Longrightarrow> pre C1 ?Q ?s\n  \\<lbrakk>pre C2 ?P ?s; \\<forall>s. ?P s \\<longrightarrow> ?Q s\\<rbrakk>\n  \\<Longrightarrow> pre C2 ?Q ?s\n  pre (C1;; C2) P s\n  \\<forall>s. P s \\<longrightarrow> Q s", "show ?case"], ["proof (prove)\nusing this:\n  \\<lbrakk>pre C1 ?P ?s; \\<forall>s. ?P s \\<longrightarrow> ?Q s\\<rbrakk>\n  \\<Longrightarrow> pre C1 ?Q ?s\n  \\<lbrakk>pre C2 ?P ?s; \\<forall>s. ?P s \\<longrightarrow> ?Q s\\<rbrakk>\n  \\<Longrightarrow> pre C2 ?Q ?s\n  pre (C1;; C2) P s\n  \\<forall>s. P s \\<longrightarrow> Q s\n\ngoal (1 subgoal):\n 1. pre (C1;; C2) Q s", "by auto"], ["proof (state)\nthis:\n  pre (C1;; C2) Q s\n\ngoal (2 subgoals):\n 1. \\<And>x1 C1 C2 s P Q.\n       \\<lbrakk>\\<And>s P Q.\n                   \\<lbrakk>pre C1 P s;\n                    \\<forall>s. P s \\<longrightarrow> Q s\\<rbrakk>\n                   \\<Longrightarrow> pre C1 Q s;\n        \\<And>s P Q.\n           \\<lbrakk>pre C2 P s;\n            \\<forall>s. P s \\<longrightarrow> Q s\\<rbrakk>\n           \\<Longrightarrow> pre C2 Q s;\n        pre (IF x1 THEN C1 ELSE C2) P s;\n        \\<forall>s. P s \\<longrightarrow> Q s\\<rbrakk>\n       \\<Longrightarrow> pre (IF x1 THEN C1 ELSE C2) Q s\n 2. \\<And>x1 x2 C s P Q.\n       \\<lbrakk>\\<And>s P Q.\n                   \\<lbrakk>pre C P s;\n                    \\<forall>s. P s \\<longrightarrow> Q s\\<rbrakk>\n                   \\<Longrightarrow> pre C Q s;\n        pre ({x1} WHILE x2 DO C) P s;\n        \\<forall>s. P s \\<longrightarrow> Q s\\<rbrakk>\n       \\<Longrightarrow> pre ({x1} WHILE x2 DO C) Q s", "next"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>x1 C1 C2 s P Q.\n       \\<lbrakk>\\<And>s P Q.\n                   \\<lbrakk>pre C1 P s;\n                    \\<forall>s. P s \\<longrightarrow> Q s\\<rbrakk>\n                   \\<Longrightarrow> pre C1 Q s;\n        \\<And>s P Q.\n           \\<lbrakk>pre C2 P s;\n            \\<forall>s. P s \\<longrightarrow> Q s\\<rbrakk>\n           \\<Longrightarrow> pre C2 Q s;\n        pre (IF x1 THEN C1 ELSE C2) P s;\n        \\<forall>s. P s \\<longrightarrow> Q s\\<rbrakk>\n       \\<Longrightarrow> pre (IF x1 THEN C1 ELSE C2) Q s\n 2. \\<And>x1 x2 C s P Q.\n       \\<lbrakk>\\<And>s P Q.\n                   \\<lbrakk>pre C P s;\n                    \\<forall>s. P s \\<longrightarrow> Q s\\<rbrakk>\n                   \\<Longrightarrow> pre C Q s;\n        pre ({x1} WHILE x2 DO C) P s;\n        \\<forall>s. P s \\<longrightarrow> Q s\\<rbrakk>\n       \\<Longrightarrow> pre ({x1} WHILE x2 DO C) Q s", "case (Aif b C1 C2)"], ["proof (state)\nthis:\n  \\<lbrakk>pre C1 ?P ?s; \\<forall>s. ?P s \\<longrightarrow> ?Q s\\<rbrakk>\n  \\<Longrightarrow> pre C1 ?Q ?s\n  \\<lbrakk>pre C2 ?P ?s; \\<forall>s. ?P s \\<longrightarrow> ?Q s\\<rbrakk>\n  \\<Longrightarrow> pre C2 ?Q ?s\n  pre (IF b THEN C1 ELSE C2) P s\n  \\<forall>s. P s \\<longrightarrow> Q s\n\ngoal (2 subgoals):\n 1. \\<And>x1 C1 C2 s P Q.\n       \\<lbrakk>\\<And>s P Q.\n                   \\<lbrakk>pre C1 P s;\n                    \\<forall>s. P s \\<longrightarrow> Q s\\<rbrakk>\n                   \\<Longrightarrow> pre C1 Q s;\n        \\<And>s P Q.\n           \\<lbrakk>pre C2 P s;\n            \\<forall>s. P s \\<longrightarrow> Q s\\<rbrakk>\n           \\<Longrightarrow> pre C2 Q s;\n        pre (IF x1 THEN C1 ELSE C2) P s;\n        \\<forall>s. P s \\<longrightarrow> Q s\\<rbrakk>\n       \\<Longrightarrow> pre (IF x1 THEN C1 ELSE C2) Q s\n 2. \\<And>x1 x2 C s P Q.\n       \\<lbrakk>\\<And>s P Q.\n                   \\<lbrakk>pre C P s;\n                    \\<forall>s. P s \\<longrightarrow> Q s\\<rbrakk>\n                   \\<Longrightarrow> pre C Q s;\n        pre ({x1} WHILE x2 DO C) P s;\n        \\<forall>s. P s \\<longrightarrow> Q s\\<rbrakk>\n       \\<Longrightarrow> pre ({x1} WHILE x2 DO C) Q s", "then"], ["proof (chain)\npicking this:\n  \\<lbrakk>pre C1 ?P ?s; \\<forall>s. ?P s \\<longrightarrow> ?Q s\\<rbrakk>\n  \\<Longrightarrow> pre C1 ?Q ?s\n  \\<lbrakk>pre C2 ?P ?s; \\<forall>s. ?P s \\<longrightarrow> ?Q s\\<rbrakk>\n  \\<Longrightarrow> pre C2 ?Q ?s\n  pre (IF b THEN C1 ELSE C2) P s\n  \\<forall>s. P s \\<longrightarrow> Q s", "show ?case"], ["proof (prove)\nusing this:\n  \\<lbrakk>pre C1 ?P ?s; \\<forall>s. ?P s \\<longrightarrow> ?Q s\\<rbrakk>\n  \\<Longrightarrow> pre C1 ?Q ?s\n  \\<lbrakk>pre C2 ?P ?s; \\<forall>s. ?P s \\<longrightarrow> ?Q s\\<rbrakk>\n  \\<Longrightarrow> pre C2 ?Q ?s\n  pre (IF b THEN C1 ELSE C2) P s\n  \\<forall>s. P s \\<longrightarrow> Q s\n\ngoal (1 subgoal):\n 1. pre (IF b THEN C1 ELSE C2) Q s", "apply (auto simp: sep_conj_def dollar_def)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>aa ba.\n       \\<lbrakk>\\<And>P a b Q.\n                   \\<lbrakk>pre C1 P (a, b);\n                    \\<forall>a b.\n                       P (a, b) \\<longrightarrow> Q (a, b)\\<rbrakk>\n                   \\<Longrightarrow> pre C1 Q (a, b);\n        \\<And>P a b Q.\n           \\<lbrakk>pre C2 P (a, b);\n            \\<forall>a b. P (a, b) \\<longrightarrow> Q (a, b)\\<rbrakk>\n           \\<Longrightarrow> pre C2 Q (a, b);\n        \\<forall>a b. P (a, b) \\<longrightarrow> Q (a, b); s = (aa, Suc ba);\n        vars b \\<subseteq> dom aa;\n        if pbval b aa then pre C1 P (aa, ba) else pre C2 P (aa, ba)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>a bb ab.\n                            a ## ab \\<and>\n                            (\\<exists>bc.\n                                (pbval b ab \\<longrightarrow>\n                                 aa = a + ab \\<and>\n                                 Suc ba = bb + bc \\<and>\n                                 a = 0 \\<and>\n                                 bb = Suc 0 \\<and>\n                                 vars b \\<subseteq> dom ab \\<and>\n                                 pre C1 Q (ab, bc)) \\<and>\n                                (\\<not> pbval b ab \\<longrightarrow>\n                                 aa = a + ab \\<and>\n                                 Suc ba = bb + bc \\<and>\n                                 a = 0 \\<and>\n                                 bb = Suc 0 \\<and>\n                                 vars b \\<subseteq> dom ab \\<and>\n                                 pre C2 Q (ab, bc)))", "subgoal for ps n"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<And>P a b Q.\n                \\<lbrakk>pre C1 P (a, b);\n                 \\<forall>a b. P (a, b) \\<longrightarrow> Q (a, b)\\<rbrakk>\n                \\<Longrightarrow> pre C1 Q (a, b);\n     \\<And>P a b Q.\n        \\<lbrakk>pre C2 P (a, b);\n         \\<forall>a b. P (a, b) \\<longrightarrow> Q (a, b)\\<rbrakk>\n        \\<Longrightarrow> pre C2 Q (a, b);\n     \\<forall>a b. P (a, b) \\<longrightarrow> Q (a, b); s = (ps, Suc n);\n     vars b \\<subseteq> dom ps;\n     if pbval b ps then pre C1 P (ps, n) else pre C2 P (ps, n)\\<rbrakk>\n    \\<Longrightarrow> \\<exists>a ba aa.\n                         a ## aa \\<and>\n                         (\\<exists>bb.\n                             (pbval b aa \\<longrightarrow>\n                              ps = a + aa \\<and>\n                              Suc n = ba + bb \\<and>\n                              a = 0 \\<and>\n                              ba = Suc 0 \\<and>\n                              vars b \\<subseteq> dom aa \\<and>\n                              pre C1 Q (aa, bb)) \\<and>\n                             (\\<not> pbval b aa \\<longrightarrow>\n                              ps = a + aa \\<and>\n                              Suc n = ba + bb \\<and>\n                              a = 0 \\<and>\n                              ba = Suc 0 \\<and>\n                              vars b \\<subseteq> dom aa \\<and>\n                              pre C2 Q (aa, bb)))", "apply(rule exI[where x=0])"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<And>P a b Q.\n                \\<lbrakk>pre C1 P (a, b);\n                 \\<forall>a b. P (a, b) \\<longrightarrow> Q (a, b)\\<rbrakk>\n                \\<Longrightarrow> pre C1 Q (a, b);\n     \\<And>P a b Q.\n        \\<lbrakk>pre C2 P (a, b);\n         \\<forall>a b. P (a, b) \\<longrightarrow> Q (a, b)\\<rbrakk>\n        \\<Longrightarrow> pre C2 Q (a, b);\n     \\<forall>a b. P (a, b) \\<longrightarrow> Q (a, b); s = (ps, Suc n);\n     vars b \\<subseteq> dom ps;\n     if pbval b ps then pre C1 P (ps, n) else pre C2 P (ps, n)\\<rbrakk>\n    \\<Longrightarrow> \\<exists>ba a.\n                         0 ## a \\<and>\n                         (\\<exists>bb.\n                             (pbval b a \\<longrightarrow>\n                              ps = 0 + a \\<and>\n                              Suc n = ba + bb \\<and>\n                              0 = 0 \\<and>\n                              ba = Suc 0 \\<and>\n                              vars b \\<subseteq> dom a \\<and>\n                              pre C1 Q (a, bb)) \\<and>\n                             (\\<not> pbval b a \\<longrightarrow>\n                              ps = 0 + a \\<and>\n                              Suc n = ba + bb \\<and>\n                              0 = 0 \\<and>\n                              ba = Suc 0 \\<and>\n                              vars b \\<subseteq> dom a \\<and>\n                              pre C2 Q (a, bb)))", "apply(rule exI[where x=1])"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<And>P a b Q.\n                \\<lbrakk>pre C1 P (a, b);\n                 \\<forall>a b. P (a, b) \\<longrightarrow> Q (a, b)\\<rbrakk>\n                \\<Longrightarrow> pre C1 Q (a, b);\n     \\<And>P a b Q.\n        \\<lbrakk>pre C2 P (a, b);\n         \\<forall>a b. P (a, b) \\<longrightarrow> Q (a, b)\\<rbrakk>\n        \\<Longrightarrow> pre C2 Q (a, b);\n     \\<forall>a b. P (a, b) \\<longrightarrow> Q (a, b); s = (ps, Suc n);\n     vars b \\<subseteq> dom ps;\n     if pbval b ps then pre C1 P (ps, n) else pre C2 P (ps, n)\\<rbrakk>\n    \\<Longrightarrow> \\<exists>a.\n                         0 ## a \\<and>\n                         (\\<exists>ba.\n                             (pbval b a \\<longrightarrow>\n                              ps = 0 + a \\<and>\n                              Suc n = 1 + ba \\<and>\n                              0 = 0 \\<and>\n                              1 = Suc 0 \\<and>\n                              vars b \\<subseteq> dom a \\<and>\n                              pre C1 Q (a, ba)) \\<and>\n                             (\\<not> pbval b a \\<longrightarrow>\n                              ps = 0 + a \\<and>\n                              Suc n = 1 + ba \\<and>\n                              0 = 0 \\<and>\n                              1 = Suc 0 \\<and>\n                              vars b \\<subseteq> dom a \\<and>\n                              pre C2 Q (a, ba)))", "apply(rule exI[where x=ps])"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<And>P a b Q.\n                \\<lbrakk>pre C1 P (a, b);\n                 \\<forall>a b. P (a, b) \\<longrightarrow> Q (a, b)\\<rbrakk>\n                \\<Longrightarrow> pre C1 Q (a, b);\n     \\<And>P a b Q.\n        \\<lbrakk>pre C2 P (a, b);\n         \\<forall>a b. P (a, b) \\<longrightarrow> Q (a, b)\\<rbrakk>\n        \\<Longrightarrow> pre C2 Q (a, b);\n     \\<forall>a b. P (a, b) \\<longrightarrow> Q (a, b); s = (ps, Suc n);\n     vars b \\<subseteq> dom ps;\n     if pbval b ps then pre C1 P (ps, n) else pre C2 P (ps, n)\\<rbrakk>\n    \\<Longrightarrow> 0 ## ps \\<and>\n                      (\\<exists>ba.\n                          (pbval b ps \\<longrightarrow>\n                           ps = 0 + ps \\<and>\n                           Suc n = 1 + ba \\<and>\n                           0 = 0 \\<and>\n                           1 = Suc 0 \\<and>\n                           vars b \\<subseteq> dom ps \\<and>\n                           pre C1 Q (ps, ba)) \\<and>\n                          (\\<not> pbval b ps \\<longrightarrow>\n                           ps = 0 + ps \\<and>\n                           Suc n = 1 + ba \\<and>\n                           0 = 0 \\<and>\n                           1 = Suc 0 \\<and>\n                           vars b \\<subseteq> dom ps \\<and>\n                           pre C2 Q (ps, ba)))", "by auto"], ["proof (prove)\ngoal:\nNo subgoals!", "done"], ["proof (state)\nthis:\n  pre (IF b THEN C1 ELSE C2) Q s\n\ngoal (1 subgoal):\n 1. \\<And>x1 x2 C s P Q.\n       \\<lbrakk>\\<And>s P Q.\n                   \\<lbrakk>pre C P s;\n                    \\<forall>s. P s \\<longrightarrow> Q s\\<rbrakk>\n                   \\<Longrightarrow> pre C Q s;\n        pre ({x1} WHILE x2 DO C) P s;\n        \\<forall>s. P s \\<longrightarrow> Q s\\<rbrakk>\n       \\<Longrightarrow> pre ({x1} WHILE x2 DO C) Q s", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x1 x2 C s P Q.\n       \\<lbrakk>\\<And>s P Q.\n                   \\<lbrakk>pre C P s;\n                    \\<forall>s. P s \\<longrightarrow> Q s\\<rbrakk>\n                   \\<Longrightarrow> pre C Q s;\n        pre ({x1} WHILE x2 DO C) P s;\n        \\<forall>s. P s \\<longrightarrow> Q s\\<rbrakk>\n       \\<Longrightarrow> pre ({x1} WHILE x2 DO C) Q s", "case (Awhile x1 x2 C)"], ["proof (state)\nthis:\n  \\<lbrakk>pre C ?P ?s; \\<forall>s. ?P s \\<longrightarrow> ?Q s\\<rbrakk>\n  \\<Longrightarrow> pre C ?Q ?s\n  pre ({x1} WHILE x2 DO C) P s\n  \\<forall>s. P s \\<longrightarrow> Q s\n\ngoal (1 subgoal):\n 1. \\<And>x1 x2 C s P Q.\n       \\<lbrakk>\\<And>s P Q.\n                   \\<lbrakk>pre C P s;\n                    \\<forall>s. P s \\<longrightarrow> Q s\\<rbrakk>\n                   \\<Longrightarrow> pre C Q s;\n        pre ({x1} WHILE x2 DO C) P s;\n        \\<forall>s. P s \\<longrightarrow> Q s\\<rbrakk>\n       \\<Longrightarrow> pre ({x1} WHILE x2 DO C) Q s", "then"], ["proof (chain)\npicking this:\n  \\<lbrakk>pre C ?P ?s; \\<forall>s. ?P s \\<longrightarrow> ?Q s\\<rbrakk>\n  \\<Longrightarrow> pre C ?Q ?s\n  pre ({x1} WHILE x2 DO C) P s\n  \\<forall>s. P s \\<longrightarrow> Q s", "show ?case"], ["proof (prove)\nusing this:\n  \\<lbrakk>pre C ?P ?s; \\<forall>s. ?P s \\<longrightarrow> ?Q s\\<rbrakk>\n  \\<Longrightarrow> pre C ?Q ?s\n  pre ({x1} WHILE x2 DO C) P s\n  \\<forall>s. P s \\<longrightarrow> Q s\n\ngoal (1 subgoal):\n 1. pre ({x1} WHILE x2 DO C) Q s", "by auto"], ["proof (state)\nthis:\n  pre ({x1} WHILE x2 DO C) Q s\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma vc_mono: assumes \"\\<forall>s. P s \\<longrightarrow> Q s\" shows \"vc C P \\<Longrightarrow> vc C Q\""], ["proof (prove)\ngoal (1 subgoal):\n 1. vc C P \\<Longrightarrow> vc C Q", "using assms"], ["proof (prove)\nusing this:\n  \\<forall>s. P s \\<longrightarrow> Q s\n\ngoal (1 subgoal):\n 1. vc C P \\<Longrightarrow> vc C Q", "proof(induct C arbitrary: P Q)"], ["proof (state)\ngoal (5 subgoals):\n 1. \\<And>P Q.\n       \\<lbrakk>vc SKIP P; \\<forall>s. P s \\<longrightarrow> Q s\\<rbrakk>\n       \\<Longrightarrow> vc SKIP Q\n 2. \\<And>x1 x2 P Q.\n       \\<lbrakk>vc (x1 ::= x2) P;\n        \\<forall>s. P s \\<longrightarrow> Q s\\<rbrakk>\n       \\<Longrightarrow> vc (x1 ::= x2) Q\n 3. \\<And>C1 C2 P Q.\n       \\<lbrakk>\\<And>P Q.\n                   \\<lbrakk>vc C1 P;\n                    \\<forall>s. P s \\<longrightarrow> Q s\\<rbrakk>\n                   \\<Longrightarrow> vc C1 Q;\n        \\<And>P Q.\n           \\<lbrakk>vc C2 P; \\<forall>s. P s \\<longrightarrow> Q s\\<rbrakk>\n           \\<Longrightarrow> vc C2 Q;\n        vc (C1;; C2) P; \\<forall>s. P s \\<longrightarrow> Q s\\<rbrakk>\n       \\<Longrightarrow> vc (C1;; C2) Q\n 4. \\<And>x1 C1 C2 P Q.\n       \\<lbrakk>\\<And>P Q.\n                   \\<lbrakk>vc C1 P;\n                    \\<forall>s. P s \\<longrightarrow> Q s\\<rbrakk>\n                   \\<Longrightarrow> vc C1 Q;\n        \\<And>P Q.\n           \\<lbrakk>vc C2 P; \\<forall>s. P s \\<longrightarrow> Q s\\<rbrakk>\n           \\<Longrightarrow> vc C2 Q;\n        vc (IF x1 THEN C1 ELSE C2) P;\n        \\<forall>s. P s \\<longrightarrow> Q s\\<rbrakk>\n       \\<Longrightarrow> vc (IF x1 THEN C1 ELSE C2) Q\n 5. \\<And>x1 x2 C P Q.\n       \\<lbrakk>\\<And>P Q.\n                   \\<lbrakk>vc C P;\n                    \\<forall>s. P s \\<longrightarrow> Q s\\<rbrakk>\n                   \\<Longrightarrow> vc C Q;\n        vc ({x1} WHILE x2 DO C) P;\n        \\<forall>s. P s \\<longrightarrow> Q s\\<rbrakk>\n       \\<Longrightarrow> vc ({x1} WHILE x2 DO C) Q", "case Askip"], ["proof (state)\nthis:\n  vc SKIP P\n  \\<forall>s. P s \\<longrightarrow> Q s\n\ngoal (5 subgoals):\n 1. \\<And>P Q.\n       \\<lbrakk>vc SKIP P; \\<forall>s. P s \\<longrightarrow> Q s\\<rbrakk>\n       \\<Longrightarrow> vc SKIP Q\n 2. \\<And>x1 x2 P Q.\n       \\<lbrakk>vc (x1 ::= x2) P;\n        \\<forall>s. P s \\<longrightarrow> Q s\\<rbrakk>\n       \\<Longrightarrow> vc (x1 ::= x2) Q\n 3. \\<And>C1 C2 P Q.\n       \\<lbrakk>\\<And>P Q.\n                   \\<lbrakk>vc C1 P;\n                    \\<forall>s. P s \\<longrightarrow> Q s\\<rbrakk>\n                   \\<Longrightarrow> vc C1 Q;\n        \\<And>P Q.\n           \\<lbrakk>vc C2 P; \\<forall>s. P s \\<longrightarrow> Q s\\<rbrakk>\n           \\<Longrightarrow> vc C2 Q;\n        vc (C1;; C2) P; \\<forall>s. P s \\<longrightarrow> Q s\\<rbrakk>\n       \\<Longrightarrow> vc (C1;; C2) Q\n 4. \\<And>x1 C1 C2 P Q.\n       \\<lbrakk>\\<And>P Q.\n                   \\<lbrakk>vc C1 P;\n                    \\<forall>s. P s \\<longrightarrow> Q s\\<rbrakk>\n                   \\<Longrightarrow> vc C1 Q;\n        \\<And>P Q.\n           \\<lbrakk>vc C2 P; \\<forall>s. P s \\<longrightarrow> Q s\\<rbrakk>\n           \\<Longrightarrow> vc C2 Q;\n        vc (IF x1 THEN C1 ELSE C2) P;\n        \\<forall>s. P s \\<longrightarrow> Q s\\<rbrakk>\n       \\<Longrightarrow> vc (IF x1 THEN C1 ELSE C2) Q\n 5. \\<And>x1 x2 C P Q.\n       \\<lbrakk>\\<And>P Q.\n                   \\<lbrakk>vc C P;\n                    \\<forall>s. P s \\<longrightarrow> Q s\\<rbrakk>\n                   \\<Longrightarrow> vc C Q;\n        vc ({x1} WHILE x2 DO C) P;\n        \\<forall>s. P s \\<longrightarrow> Q s\\<rbrakk>\n       \\<Longrightarrow> vc ({x1} WHILE x2 DO C) Q", "then"], ["proof (chain)\npicking this:\n  vc SKIP P\n  \\<forall>s. P s \\<longrightarrow> Q s", "show ?case"], ["proof (prove)\nusing this:\n  vc SKIP P\n  \\<forall>s. P s \\<longrightarrow> Q s\n\ngoal (1 subgoal):\n 1. vc SKIP Q", "by auto"], ["proof (state)\nthis:\n  vc SKIP Q\n\ngoal (4 subgoals):\n 1. \\<And>x1 x2 P Q.\n       \\<lbrakk>vc (x1 ::= x2) P;\n        \\<forall>s. P s \\<longrightarrow> Q s\\<rbrakk>\n       \\<Longrightarrow> vc (x1 ::= x2) Q\n 2. \\<And>C1 C2 P Q.\n       \\<lbrakk>\\<And>P Q.\n                   \\<lbrakk>vc C1 P;\n                    \\<forall>s. P s \\<longrightarrow> Q s\\<rbrakk>\n                   \\<Longrightarrow> vc C1 Q;\n        \\<And>P Q.\n           \\<lbrakk>vc C2 P; \\<forall>s. P s \\<longrightarrow> Q s\\<rbrakk>\n           \\<Longrightarrow> vc C2 Q;\n        vc (C1;; C2) P; \\<forall>s. P s \\<longrightarrow> Q s\\<rbrakk>\n       \\<Longrightarrow> vc (C1;; C2) Q\n 3. \\<And>x1 C1 C2 P Q.\n       \\<lbrakk>\\<And>P Q.\n                   \\<lbrakk>vc C1 P;\n                    \\<forall>s. P s \\<longrightarrow> Q s\\<rbrakk>\n                   \\<Longrightarrow> vc C1 Q;\n        \\<And>P Q.\n           \\<lbrakk>vc C2 P; \\<forall>s. P s \\<longrightarrow> Q s\\<rbrakk>\n           \\<Longrightarrow> vc C2 Q;\n        vc (IF x1 THEN C1 ELSE C2) P;\n        \\<forall>s. P s \\<longrightarrow> Q s\\<rbrakk>\n       \\<Longrightarrow> vc (IF x1 THEN C1 ELSE C2) Q\n 4. \\<And>x1 x2 C P Q.\n       \\<lbrakk>\\<And>P Q.\n                   \\<lbrakk>vc C P;\n                    \\<forall>s. P s \\<longrightarrow> Q s\\<rbrakk>\n                   \\<Longrightarrow> vc C Q;\n        vc ({x1} WHILE x2 DO C) P;\n        \\<forall>s. P s \\<longrightarrow> Q s\\<rbrakk>\n       \\<Longrightarrow> vc ({x1} WHILE x2 DO C) Q", "next"], ["proof (state)\ngoal (4 subgoals):\n 1. \\<And>x1 x2 P Q.\n       \\<lbrakk>vc (x1 ::= x2) P;\n        \\<forall>s. P s \\<longrightarrow> Q s\\<rbrakk>\n       \\<Longrightarrow> vc (x1 ::= x2) Q\n 2. \\<And>C1 C2 P Q.\n       \\<lbrakk>\\<And>P Q.\n                   \\<lbrakk>vc C1 P;\n                    \\<forall>s. P s \\<longrightarrow> Q s\\<rbrakk>\n                   \\<Longrightarrow> vc C1 Q;\n        \\<And>P Q.\n           \\<lbrakk>vc C2 P; \\<forall>s. P s \\<longrightarrow> Q s\\<rbrakk>\n           \\<Longrightarrow> vc C2 Q;\n        vc (C1;; C2) P; \\<forall>s. P s \\<longrightarrow> Q s\\<rbrakk>\n       \\<Longrightarrow> vc (C1;; C2) Q\n 3. \\<And>x1 C1 C2 P Q.\n       \\<lbrakk>\\<And>P Q.\n                   \\<lbrakk>vc C1 P;\n                    \\<forall>s. P s \\<longrightarrow> Q s\\<rbrakk>\n                   \\<Longrightarrow> vc C1 Q;\n        \\<And>P Q.\n           \\<lbrakk>vc C2 P; \\<forall>s. P s \\<longrightarrow> Q s\\<rbrakk>\n           \\<Longrightarrow> vc C2 Q;\n        vc (IF x1 THEN C1 ELSE C2) P;\n        \\<forall>s. P s \\<longrightarrow> Q s\\<rbrakk>\n       \\<Longrightarrow> vc (IF x1 THEN C1 ELSE C2) Q\n 4. \\<And>x1 x2 C P Q.\n       \\<lbrakk>\\<And>P Q.\n                   \\<lbrakk>vc C P;\n                    \\<forall>s. P s \\<longrightarrow> Q s\\<rbrakk>\n                   \\<Longrightarrow> vc C Q;\n        vc ({x1} WHILE x2 DO C) P;\n        \\<forall>s. P s \\<longrightarrow> Q s\\<rbrakk>\n       \\<Longrightarrow> vc ({x1} WHILE x2 DO C) Q", "case (Aassign x1 x2)"], ["proof (state)\nthis:\n  vc (x1 ::= x2) P\n  \\<forall>s. P s \\<longrightarrow> Q s\n\ngoal (4 subgoals):\n 1. \\<And>x1 x2 P Q.\n       \\<lbrakk>vc (x1 ::= x2) P;\n        \\<forall>s. P s \\<longrightarrow> Q s\\<rbrakk>\n       \\<Longrightarrow> vc (x1 ::= x2) Q\n 2. \\<And>C1 C2 P Q.\n       \\<lbrakk>\\<And>P Q.\n                   \\<lbrakk>vc C1 P;\n                    \\<forall>s. P s \\<longrightarrow> Q s\\<rbrakk>\n                   \\<Longrightarrow> vc C1 Q;\n        \\<And>P Q.\n           \\<lbrakk>vc C2 P; \\<forall>s. P s \\<longrightarrow> Q s\\<rbrakk>\n           \\<Longrightarrow> vc C2 Q;\n        vc (C1;; C2) P; \\<forall>s. P s \\<longrightarrow> Q s\\<rbrakk>\n       \\<Longrightarrow> vc (C1;; C2) Q\n 3. \\<And>x1 C1 C2 P Q.\n       \\<lbrakk>\\<And>P Q.\n                   \\<lbrakk>vc C1 P;\n                    \\<forall>s. P s \\<longrightarrow> Q s\\<rbrakk>\n                   \\<Longrightarrow> vc C1 Q;\n        \\<And>P Q.\n           \\<lbrakk>vc C2 P; \\<forall>s. P s \\<longrightarrow> Q s\\<rbrakk>\n           \\<Longrightarrow> vc C2 Q;\n        vc (IF x1 THEN C1 ELSE C2) P;\n        \\<forall>s. P s \\<longrightarrow> Q s\\<rbrakk>\n       \\<Longrightarrow> vc (IF x1 THEN C1 ELSE C2) Q\n 4. \\<And>x1 x2 C P Q.\n       \\<lbrakk>\\<And>P Q.\n                   \\<lbrakk>vc C P;\n                    \\<forall>s. P s \\<longrightarrow> Q s\\<rbrakk>\n                   \\<Longrightarrow> vc C Q;\n        vc ({x1} WHILE x2 DO C) P;\n        \\<forall>s. P s \\<longrightarrow> Q s\\<rbrakk>\n       \\<Longrightarrow> vc ({x1} WHILE x2 DO C) Q", "then"], ["proof (chain)\npicking this:\n  vc (x1 ::= x2) P\n  \\<forall>s. P s \\<longrightarrow> Q s", "show ?case"], ["proof (prove)\nusing this:\n  vc (x1 ::= x2) P\n  \\<forall>s. P s \\<longrightarrow> Q s\n\ngoal (1 subgoal):\n 1. vc (x1 ::= x2) Q", "by auto"], ["proof (state)\nthis:\n  vc (x1 ::= x2) Q\n\ngoal (3 subgoals):\n 1. \\<And>C1 C2 P Q.\n       \\<lbrakk>\\<And>P Q.\n                   \\<lbrakk>vc C1 P;\n                    \\<forall>s. P s \\<longrightarrow> Q s\\<rbrakk>\n                   \\<Longrightarrow> vc C1 Q;\n        \\<And>P Q.\n           \\<lbrakk>vc C2 P; \\<forall>s. P s \\<longrightarrow> Q s\\<rbrakk>\n           \\<Longrightarrow> vc C2 Q;\n        vc (C1;; C2) P; \\<forall>s. P s \\<longrightarrow> Q s\\<rbrakk>\n       \\<Longrightarrow> vc (C1;; C2) Q\n 2. \\<And>x1 C1 C2 P Q.\n       \\<lbrakk>\\<And>P Q.\n                   \\<lbrakk>vc C1 P;\n                    \\<forall>s. P s \\<longrightarrow> Q s\\<rbrakk>\n                   \\<Longrightarrow> vc C1 Q;\n        \\<And>P Q.\n           \\<lbrakk>vc C2 P; \\<forall>s. P s \\<longrightarrow> Q s\\<rbrakk>\n           \\<Longrightarrow> vc C2 Q;\n        vc (IF x1 THEN C1 ELSE C2) P;\n        \\<forall>s. P s \\<longrightarrow> Q s\\<rbrakk>\n       \\<Longrightarrow> vc (IF x1 THEN C1 ELSE C2) Q\n 3. \\<And>x1 x2 C P Q.\n       \\<lbrakk>\\<And>P Q.\n                   \\<lbrakk>vc C P;\n                    \\<forall>s. P s \\<longrightarrow> Q s\\<rbrakk>\n                   \\<Longrightarrow> vc C Q;\n        vc ({x1} WHILE x2 DO C) P;\n        \\<forall>s. P s \\<longrightarrow> Q s\\<rbrakk>\n       \\<Longrightarrow> vc ({x1} WHILE x2 DO C) Q", "next"], ["proof (state)\ngoal (3 subgoals):\n 1. \\<And>C1 C2 P Q.\n       \\<lbrakk>\\<And>P Q.\n                   \\<lbrakk>vc C1 P;\n                    \\<forall>s. P s \\<longrightarrow> Q s\\<rbrakk>\n                   \\<Longrightarrow> vc C1 Q;\n        \\<And>P Q.\n           \\<lbrakk>vc C2 P; \\<forall>s. P s \\<longrightarrow> Q s\\<rbrakk>\n           \\<Longrightarrow> vc C2 Q;\n        vc (C1;; C2) P; \\<forall>s. P s \\<longrightarrow> Q s\\<rbrakk>\n       \\<Longrightarrow> vc (C1;; C2) Q\n 2. \\<And>x1 C1 C2 P Q.\n       \\<lbrakk>\\<And>P Q.\n                   \\<lbrakk>vc C1 P;\n                    \\<forall>s. P s \\<longrightarrow> Q s\\<rbrakk>\n                   \\<Longrightarrow> vc C1 Q;\n        \\<And>P Q.\n           \\<lbrakk>vc C2 P; \\<forall>s. P s \\<longrightarrow> Q s\\<rbrakk>\n           \\<Longrightarrow> vc C2 Q;\n        vc (IF x1 THEN C1 ELSE C2) P;\n        \\<forall>s. P s \\<longrightarrow> Q s\\<rbrakk>\n       \\<Longrightarrow> vc (IF x1 THEN C1 ELSE C2) Q\n 3. \\<And>x1 x2 C P Q.\n       \\<lbrakk>\\<And>P Q.\n                   \\<lbrakk>vc C P;\n                    \\<forall>s. P s \\<longrightarrow> Q s\\<rbrakk>\n                   \\<Longrightarrow> vc C Q;\n        vc ({x1} WHILE x2 DO C) P;\n        \\<forall>s. P s \\<longrightarrow> Q s\\<rbrakk>\n       \\<Longrightarrow> vc ({x1} WHILE x2 DO C) Q", "case (Aseq C1 C2 P Q)"], ["proof (state)\nthis:\n  \\<lbrakk>vc C1 ?P; \\<forall>s. ?P s \\<longrightarrow> ?Q s\\<rbrakk>\n  \\<Longrightarrow> vc C1 ?Q\n  \\<lbrakk>vc C2 ?P; \\<forall>s. ?P s \\<longrightarrow> ?Q s\\<rbrakk>\n  \\<Longrightarrow> vc C2 ?Q\n  vc (C1;; C2) P\n  \\<forall>s. P s \\<longrightarrow> Q s\n\ngoal (3 subgoals):\n 1. \\<And>C1 C2 P Q.\n       \\<lbrakk>\\<And>P Q.\n                   \\<lbrakk>vc C1 P;\n                    \\<forall>s. P s \\<longrightarrow> Q s\\<rbrakk>\n                   \\<Longrightarrow> vc C1 Q;\n        \\<And>P Q.\n           \\<lbrakk>vc C2 P; \\<forall>s. P s \\<longrightarrow> Q s\\<rbrakk>\n           \\<Longrightarrow> vc C2 Q;\n        vc (C1;; C2) P; \\<forall>s. P s \\<longrightarrow> Q s\\<rbrakk>\n       \\<Longrightarrow> vc (C1;; C2) Q\n 2. \\<And>x1 C1 C2 P Q.\n       \\<lbrakk>\\<And>P Q.\n                   \\<lbrakk>vc C1 P;\n                    \\<forall>s. P s \\<longrightarrow> Q s\\<rbrakk>\n                   \\<Longrightarrow> vc C1 Q;\n        \\<And>P Q.\n           \\<lbrakk>vc C2 P; \\<forall>s. P s \\<longrightarrow> Q s\\<rbrakk>\n           \\<Longrightarrow> vc C2 Q;\n        vc (IF x1 THEN C1 ELSE C2) P;\n        \\<forall>s. P s \\<longrightarrow> Q s\\<rbrakk>\n       \\<Longrightarrow> vc (IF x1 THEN C1 ELSE C2) Q\n 3. \\<And>x1 x2 C P Q.\n       \\<lbrakk>\\<And>P Q.\n                   \\<lbrakk>vc C P;\n                    \\<forall>s. P s \\<longrightarrow> Q s\\<rbrakk>\n                   \\<Longrightarrow> vc C Q;\n        vc ({x1} WHILE x2 DO C) P;\n        \\<forall>s. P s \\<longrightarrow> Q s\\<rbrakk>\n       \\<Longrightarrow> vc ({x1} WHILE x2 DO C) Q", "then"], ["proof (chain)\npicking this:\n  \\<lbrakk>vc C1 ?P; \\<forall>s. ?P s \\<longrightarrow> ?Q s\\<rbrakk>\n  \\<Longrightarrow> vc C1 ?Q\n  \\<lbrakk>vc C2 ?P; \\<forall>s. ?P s \\<longrightarrow> ?Q s\\<rbrakk>\n  \\<Longrightarrow> vc C2 ?Q\n  vc (C1;; C2) P\n  \\<forall>s. P s \\<longrightarrow> Q s", "have i: \"vc C1 (pre C2 P)\" and ii: \"vc C2 P\""], ["proof (prove)\nusing this:\n  \\<lbrakk>vc C1 ?P; \\<forall>s. ?P s \\<longrightarrow> ?Q s\\<rbrakk>\n  \\<Longrightarrow> vc C1 ?Q\n  \\<lbrakk>vc C2 ?P; \\<forall>s. ?P s \\<longrightarrow> ?Q s\\<rbrakk>\n  \\<Longrightarrow> vc C2 ?Q\n  vc (C1;; C2) P\n  \\<forall>s. P s \\<longrightarrow> Q s\n\ngoal (1 subgoal):\n 1. vc C1 (pre C2 P) &&& vc C2 P", "by auto"], ["proof (state)\nthis:\n  vc C1 (pre C2 P)\n  vc C2 P\n\ngoal (3 subgoals):\n 1. \\<And>C1 C2 P Q.\n       \\<lbrakk>\\<And>P Q.\n                   \\<lbrakk>vc C1 P;\n                    \\<forall>s. P s \\<longrightarrow> Q s\\<rbrakk>\n                   \\<Longrightarrow> vc C1 Q;\n        \\<And>P Q.\n           \\<lbrakk>vc C2 P; \\<forall>s. P s \\<longrightarrow> Q s\\<rbrakk>\n           \\<Longrightarrow> vc C2 Q;\n        vc (C1;; C2) P; \\<forall>s. P s \\<longrightarrow> Q s\\<rbrakk>\n       \\<Longrightarrow> vc (C1;; C2) Q\n 2. \\<And>x1 C1 C2 P Q.\n       \\<lbrakk>\\<And>P Q.\n                   \\<lbrakk>vc C1 P;\n                    \\<forall>s. P s \\<longrightarrow> Q s\\<rbrakk>\n                   \\<Longrightarrow> vc C1 Q;\n        \\<And>P Q.\n           \\<lbrakk>vc C2 P; \\<forall>s. P s \\<longrightarrow> Q s\\<rbrakk>\n           \\<Longrightarrow> vc C2 Q;\n        vc (IF x1 THEN C1 ELSE C2) P;\n        \\<forall>s. P s \\<longrightarrow> Q s\\<rbrakk>\n       \\<Longrightarrow> vc (IF x1 THEN C1 ELSE C2) Q\n 3. \\<And>x1 x2 C P Q.\n       \\<lbrakk>\\<And>P Q.\n                   \\<lbrakk>vc C P;\n                    \\<forall>s. P s \\<longrightarrow> Q s\\<rbrakk>\n                   \\<Longrightarrow> vc C Q;\n        vc ({x1} WHILE x2 DO C) P;\n        \\<forall>s. P s \\<longrightarrow> Q s\\<rbrakk>\n       \\<Longrightarrow> vc ({x1} WHILE x2 DO C) Q", "from  pre_mono[OF ] Aseq(4)"], ["proof (chain)\npicking this:\n  \\<lbrakk>\\<forall>s. ?P s \\<longrightarrow> ?Q s; pre ?C ?P ?s\\<rbrakk>\n  \\<Longrightarrow> pre ?C ?Q ?s\n  \\<forall>s. P s \\<longrightarrow> Q s", "have iii: \"\\<forall>s. pre C2 P s \\<longrightarrow> pre C2 Q s\""], ["proof (prove)\nusing this:\n  \\<lbrakk>\\<forall>s. ?P s \\<longrightarrow> ?Q s; pre ?C ?P ?s\\<rbrakk>\n  \\<Longrightarrow> pre ?C ?Q ?s\n  \\<forall>s. P s \\<longrightarrow> Q s\n\ngoal (1 subgoal):\n 1. \\<forall>s. pre C2 P s \\<longrightarrow> pre C2 Q s", "by blast"], ["proof (state)\nthis:\n  \\<forall>s. pre C2 P s \\<longrightarrow> pre C2 Q s\n\ngoal (3 subgoals):\n 1. \\<And>C1 C2 P Q.\n       \\<lbrakk>\\<And>P Q.\n                   \\<lbrakk>vc C1 P;\n                    \\<forall>s. P s \\<longrightarrow> Q s\\<rbrakk>\n                   \\<Longrightarrow> vc C1 Q;\n        \\<And>P Q.\n           \\<lbrakk>vc C2 P; \\<forall>s. P s \\<longrightarrow> Q s\\<rbrakk>\n           \\<Longrightarrow> vc C2 Q;\n        vc (C1;; C2) P; \\<forall>s. P s \\<longrightarrow> Q s\\<rbrakk>\n       \\<Longrightarrow> vc (C1;; C2) Q\n 2. \\<And>x1 C1 C2 P Q.\n       \\<lbrakk>\\<And>P Q.\n                   \\<lbrakk>vc C1 P;\n                    \\<forall>s. P s \\<longrightarrow> Q s\\<rbrakk>\n                   \\<Longrightarrow> vc C1 Q;\n        \\<And>P Q.\n           \\<lbrakk>vc C2 P; \\<forall>s. P s \\<longrightarrow> Q s\\<rbrakk>\n           \\<Longrightarrow> vc C2 Q;\n        vc (IF x1 THEN C1 ELSE C2) P;\n        \\<forall>s. P s \\<longrightarrow> Q s\\<rbrakk>\n       \\<Longrightarrow> vc (IF x1 THEN C1 ELSE C2) Q\n 3. \\<And>x1 x2 C P Q.\n       \\<lbrakk>\\<And>P Q.\n                   \\<lbrakk>vc C P;\n                    \\<forall>s. P s \\<longrightarrow> Q s\\<rbrakk>\n                   \\<Longrightarrow> vc C Q;\n        vc ({x1} WHILE x2 DO C) P;\n        \\<forall>s. P s \\<longrightarrow> Q s\\<rbrakk>\n       \\<Longrightarrow> vc ({x1} WHILE x2 DO C) Q", "show ?case"], ["proof (prove)\ngoal (1 subgoal):\n 1. vc (C1;; C2) Q", "apply auto"], ["proof (prove)\ngoal (2 subgoals):\n 1. vc C1 (pre C2 Q)\n 2. vc C2 Q", "using Aseq(1)[OF i  iii] Aseq(2)[OF ii Aseq(4)]"], ["proof (prove)\nusing this:\n  vc C1 (pre C2 Q)\n  vc C2 Q\n\ngoal (2 subgoals):\n 1. vc C1 (pre C2 Q)\n 2. vc C2 Q", "by auto"], ["proof (state)\nthis:\n  vc (C1;; C2) Q\n\ngoal (2 subgoals):\n 1. \\<And>x1 C1 C2 P Q.\n       \\<lbrakk>\\<And>P Q.\n                   \\<lbrakk>vc C1 P;\n                    \\<forall>s. P s \\<longrightarrow> Q s\\<rbrakk>\n                   \\<Longrightarrow> vc C1 Q;\n        \\<And>P Q.\n           \\<lbrakk>vc C2 P; \\<forall>s. P s \\<longrightarrow> Q s\\<rbrakk>\n           \\<Longrightarrow> vc C2 Q;\n        vc (IF x1 THEN C1 ELSE C2) P;\n        \\<forall>s. P s \\<longrightarrow> Q s\\<rbrakk>\n       \\<Longrightarrow> vc (IF x1 THEN C1 ELSE C2) Q\n 2. \\<And>x1 x2 C P Q.\n       \\<lbrakk>\\<And>P Q.\n                   \\<lbrakk>vc C P;\n                    \\<forall>s. P s \\<longrightarrow> Q s\\<rbrakk>\n                   \\<Longrightarrow> vc C Q;\n        vc ({x1} WHILE x2 DO C) P;\n        \\<forall>s. P s \\<longrightarrow> Q s\\<rbrakk>\n       \\<Longrightarrow> vc ({x1} WHILE x2 DO C) Q", "next"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>x1 C1 C2 P Q.\n       \\<lbrakk>\\<And>P Q.\n                   \\<lbrakk>vc C1 P;\n                    \\<forall>s. P s \\<longrightarrow> Q s\\<rbrakk>\n                   \\<Longrightarrow> vc C1 Q;\n        \\<And>P Q.\n           \\<lbrakk>vc C2 P; \\<forall>s. P s \\<longrightarrow> Q s\\<rbrakk>\n           \\<Longrightarrow> vc C2 Q;\n        vc (IF x1 THEN C1 ELSE C2) P;\n        \\<forall>s. P s \\<longrightarrow> Q s\\<rbrakk>\n       \\<Longrightarrow> vc (IF x1 THEN C1 ELSE C2) Q\n 2. \\<And>x1 x2 C P Q.\n       \\<lbrakk>\\<And>P Q.\n                   \\<lbrakk>vc C P;\n                    \\<forall>s. P s \\<longrightarrow> Q s\\<rbrakk>\n                   \\<Longrightarrow> vc C Q;\n        vc ({x1} WHILE x2 DO C) P;\n        \\<forall>s. P s \\<longrightarrow> Q s\\<rbrakk>\n       \\<Longrightarrow> vc ({x1} WHILE x2 DO C) Q", "case (Aif x1 C1 C2)"], ["proof (state)\nthis:\n  \\<lbrakk>vc C1 ?P; \\<forall>s. ?P s \\<longrightarrow> ?Q s\\<rbrakk>\n  \\<Longrightarrow> vc C1 ?Q\n  \\<lbrakk>vc C2 ?P; \\<forall>s. ?P s \\<longrightarrow> ?Q s\\<rbrakk>\n  \\<Longrightarrow> vc C2 ?Q\n  vc (IF x1 THEN C1 ELSE C2) P\n  \\<forall>s. P s \\<longrightarrow> Q s\n\ngoal (2 subgoals):\n 1. \\<And>x1 C1 C2 P Q.\n       \\<lbrakk>\\<And>P Q.\n                   \\<lbrakk>vc C1 P;\n                    \\<forall>s. P s \\<longrightarrow> Q s\\<rbrakk>\n                   \\<Longrightarrow> vc C1 Q;\n        \\<And>P Q.\n           \\<lbrakk>vc C2 P; \\<forall>s. P s \\<longrightarrow> Q s\\<rbrakk>\n           \\<Longrightarrow> vc C2 Q;\n        vc (IF x1 THEN C1 ELSE C2) P;\n        \\<forall>s. P s \\<longrightarrow> Q s\\<rbrakk>\n       \\<Longrightarrow> vc (IF x1 THEN C1 ELSE C2) Q\n 2. \\<And>x1 x2 C P Q.\n       \\<lbrakk>\\<And>P Q.\n                   \\<lbrakk>vc C P;\n                    \\<forall>s. P s \\<longrightarrow> Q s\\<rbrakk>\n                   \\<Longrightarrow> vc C Q;\n        vc ({x1} WHILE x2 DO C) P;\n        \\<forall>s. P s \\<longrightarrow> Q s\\<rbrakk>\n       \\<Longrightarrow> vc ({x1} WHILE x2 DO C) Q", "then"], ["proof (chain)\npicking this:\n  \\<lbrakk>vc C1 ?P; \\<forall>s. ?P s \\<longrightarrow> ?Q s\\<rbrakk>\n  \\<Longrightarrow> vc C1 ?Q\n  \\<lbrakk>vc C2 ?P; \\<forall>s. ?P s \\<longrightarrow> ?Q s\\<rbrakk>\n  \\<Longrightarrow> vc C2 ?Q\n  vc (IF x1 THEN C1 ELSE C2) P\n  \\<forall>s. P s \\<longrightarrow> Q s", "show ?case"], ["proof (prove)\nusing this:\n  \\<lbrakk>vc C1 ?P; \\<forall>s. ?P s \\<longrightarrow> ?Q s\\<rbrakk>\n  \\<Longrightarrow> vc C1 ?Q\n  \\<lbrakk>vc C2 ?P; \\<forall>s. ?P s \\<longrightarrow> ?Q s\\<rbrakk>\n  \\<Longrightarrow> vc C2 ?Q\n  vc (IF x1 THEN C1 ELSE C2) P\n  \\<forall>s. P s \\<longrightarrow> Q s\n\ngoal (1 subgoal):\n 1. vc (IF x1 THEN C1 ELSE C2) Q", "by auto"], ["proof (state)\nthis:\n  vc (IF x1 THEN C1 ELSE C2) Q\n\ngoal (1 subgoal):\n 1. \\<And>x1 x2 C P Q.\n       \\<lbrakk>\\<And>P Q.\n                   \\<lbrakk>vc C P;\n                    \\<forall>s. P s \\<longrightarrow> Q s\\<rbrakk>\n                   \\<Longrightarrow> vc C Q;\n        vc ({x1} WHILE x2 DO C) P;\n        \\<forall>s. P s \\<longrightarrow> Q s\\<rbrakk>\n       \\<Longrightarrow> vc ({x1} WHILE x2 DO C) Q", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x1 x2 C P Q.\n       \\<lbrakk>\\<And>P Q.\n                   \\<lbrakk>vc C P;\n                    \\<forall>s. P s \\<longrightarrow> Q s\\<rbrakk>\n                   \\<Longrightarrow> vc C Q;\n        vc ({x1} WHILE x2 DO C) P;\n        \\<forall>s. P s \\<longrightarrow> Q s\\<rbrakk>\n       \\<Longrightarrow> vc ({x1} WHILE x2 DO C) Q", "case (Awhile I b C P Q)"], ["proof (state)\nthis:\n  \\<lbrakk>vc C ?P; \\<forall>s. ?P s \\<longrightarrow> ?Q s\\<rbrakk>\n  \\<Longrightarrow> vc C ?Q\n  vc ({I} WHILE b DO C) P\n  \\<forall>s. P s \\<longrightarrow> Q s\n\ngoal (1 subgoal):\n 1. \\<And>x1 x2 C P Q.\n       \\<lbrakk>\\<And>P Q.\n                   \\<lbrakk>vc C P;\n                    \\<forall>s. P s \\<longrightarrow> Q s\\<rbrakk>\n                   \\<Longrightarrow> vc C Q;\n        vc ({x1} WHILE x2 DO C) P;\n        \\<forall>s. P s \\<longrightarrow> Q s\\<rbrakk>\n       \\<Longrightarrow> vc ({x1} WHILE x2 DO C) Q", "then"], ["proof (chain)\npicking this:\n  \\<lbrakk>vc C ?P; \\<forall>s. ?P s \\<longrightarrow> ?Q s\\<rbrakk>\n  \\<Longrightarrow> vc C ?Q\n  vc ({I} WHILE b DO C) P\n  \\<forall>s. P s \\<longrightarrow> Q s", "show ?case"], ["proof (prove)\nusing this:\n  \\<lbrakk>vc C ?P; \\<forall>s. ?P s \\<longrightarrow> ?Q s\\<rbrakk>\n  \\<Longrightarrow> vc C ?Q\n  vc ({I} WHILE b DO C) P\n  \\<forall>s. P s \\<longrightarrow> Q s\n\ngoal (1 subgoal):\n 1. vc ({I} WHILE b DO C) Q", "by auto"], ["proof (state)\nthis:\n  vc ({I} WHILE b DO C) Q\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma vc_sound': \"vc C Q \\<Longrightarrow> (\\<And>s n. P' (s, n) \\<Longrightarrow> pre C Q (s, k * n)) \\<Longrightarrow> (\\<And>s n. Q (s, n) \\<Longrightarrow> Q' (s, n div k)) \\<Longrightarrow> 0 < k \\<Longrightarrow> \\<turnstile>\\<^sub>3\\<^sub>' {P'} strip C { Q'}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>vc C Q;\n     \\<And>s n. P' (s, n) \\<Longrightarrow> pre C Q (s, k * n);\n     \\<And>s n. Q (s, n) \\<Longrightarrow> Q' (s, n div k); 0 < k\\<rbrakk>\n    \\<Longrightarrow> \\<turnstile>\\<^sub>3\\<^sub>' {P'} strip C { Q'}", "using conseq vc_mono vc_sound"], ["proof (prove)\nusing this:\n  \\<lbrakk>\\<turnstile>\\<^sub>3\\<^sub>' {?P} ?c { ?Q};\n   \\<And>s n. ?P' (s, n) \\<Longrightarrow> ?P (s, ?k * n);\n   \\<And>s n. ?Q (s, n) \\<Longrightarrow> ?Q' (s, n div ?k); 0 < ?k\\<rbrakk>\n  \\<Longrightarrow> \\<turnstile>\\<^sub>3\\<^sub>' {?P'} ?c { ?Q'}\n  \\<lbrakk>\\<forall>s. ?P s \\<longrightarrow> ?Q s; vc ?C ?P\\<rbrakk>\n  \\<Longrightarrow> vc ?C ?Q\n  vc ?C ?Q \\<Longrightarrow>\n  \\<turnstile>\\<^sub>3\\<^sub>' {pre ?C ?Q} strip ?C { ?Q}\n\ngoal (1 subgoal):\n 1. \\<lbrakk>vc C Q;\n     \\<And>s n. P' (s, n) \\<Longrightarrow> pre C Q (s, k * n);\n     \\<And>s n. Q (s, n) \\<Longrightarrow> Q' (s, n div k); 0 < k\\<rbrakk>\n    \\<Longrightarrow> \\<turnstile>\\<^sub>3\\<^sub>' {P'} strip C { Q'}", "by metis"], ["", "lemma pre_Frame: \"(\\<forall>s. P s \\<longrightarrow> pre C Q s) \\<Longrightarrow> vc C Q\n     \\<Longrightarrow> (\\<exists>C'. strip C = strip C' \\<and>  vc C' (Q ** F) \\<and> (\\<forall>s. (P ** F) s \\<longrightarrow> pre C' (Q ** F) s) )\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<forall>s. P s \\<longrightarrow> pre C Q s; vc C Q\\<rbrakk>\n    \\<Longrightarrow> \\<exists>C'.\n                         strip C = strip C' \\<and>\n                         vc C' (Q \\<and>* F) \\<and>\n                         (\\<forall>s.\n                             (P \\<and>* F) s \\<longrightarrow>\n                             pre C' (Q \\<and>* F) s)", "proof (induct C arbitrary: P Q)"], ["proof (state)\ngoal (5 subgoals):\n 1. \\<And>P Q.\n       \\<lbrakk>\\<forall>s. P s \\<longrightarrow> pre SKIP Q s;\n        vc SKIP Q\\<rbrakk>\n       \\<Longrightarrow> \\<exists>C'.\n                            strip SKIP = strip C' \\<and>\n                            vc C' (Q \\<and>* F) \\<and>\n                            (\\<forall>s.\n                                (P \\<and>* F) s \\<longrightarrow>\n                                pre C' (Q \\<and>* F) s)\n 2. \\<And>x1 x2 P Q.\n       \\<lbrakk>\\<forall>s. P s \\<longrightarrow> pre (x1 ::= x2) Q s;\n        vc (x1 ::= x2) Q\\<rbrakk>\n       \\<Longrightarrow> \\<exists>C'.\n                            strip (x1 ::= x2) = strip C' \\<and>\n                            vc C' (Q \\<and>* F) \\<and>\n                            (\\<forall>s.\n                                (P \\<and>* F) s \\<longrightarrow>\n                                pre C' (Q \\<and>* F) s)\n 3. \\<And>C1 C2 P Q.\n       \\<lbrakk>\\<And>P Q.\n                   \\<lbrakk>\\<forall>s. P s \\<longrightarrow> pre C1 Q s;\n                    vc C1 Q\\<rbrakk>\n                   \\<Longrightarrow> \\<exists>C'.\n  strip C1 = strip C' \\<and>\n  vc C' (Q \\<and>* F) \\<and>\n  (\\<forall>s. (P \\<and>* F) s \\<longrightarrow> pre C' (Q \\<and>* F) s);\n        \\<And>P Q.\n           \\<lbrakk>\\<forall>s. P s \\<longrightarrow> pre C2 Q s;\n            vc C2 Q\\<rbrakk>\n           \\<Longrightarrow> \\<exists>C'.\n                                strip C2 = strip C' \\<and>\n                                vc C' (Q \\<and>* F) \\<and>\n                                (\\<forall>s.\n                                    (P \\<and>* F) s \\<longrightarrow>\n                                    pre C' (Q \\<and>* F) s);\n        \\<forall>s. P s \\<longrightarrow> pre (C1;; C2) Q s;\n        vc (C1;; C2) Q\\<rbrakk>\n       \\<Longrightarrow> \\<exists>C'.\n                            strip (C1;; C2) = strip C' \\<and>\n                            vc C' (Q \\<and>* F) \\<and>\n                            (\\<forall>s.\n                                (P \\<and>* F) s \\<longrightarrow>\n                                pre C' (Q \\<and>* F) s)\n 4. \\<And>x1 C1 C2 P Q.\n       \\<lbrakk>\\<And>P Q.\n                   \\<lbrakk>\\<forall>s. P s \\<longrightarrow> pre C1 Q s;\n                    vc C1 Q\\<rbrakk>\n                   \\<Longrightarrow> \\<exists>C'.\n  strip C1 = strip C' \\<and>\n  vc C' (Q \\<and>* F) \\<and>\n  (\\<forall>s. (P \\<and>* F) s \\<longrightarrow> pre C' (Q \\<and>* F) s);\n        \\<And>P Q.\n           \\<lbrakk>\\<forall>s. P s \\<longrightarrow> pre C2 Q s;\n            vc C2 Q\\<rbrakk>\n           \\<Longrightarrow> \\<exists>C'.\n                                strip C2 = strip C' \\<and>\n                                vc C' (Q \\<and>* F) \\<and>\n                                (\\<forall>s.\n                                    (P \\<and>* F) s \\<longrightarrow>\n                                    pre C' (Q \\<and>* F) s);\n        \\<forall>s. P s \\<longrightarrow> pre (IF x1 THEN C1 ELSE C2) Q s;\n        vc (IF x1 THEN C1 ELSE C2) Q\\<rbrakk>\n       \\<Longrightarrow> \\<exists>C'.\n                            strip (IF x1 THEN C1 ELSE C2) = strip C' \\<and>\n                            vc C' (Q \\<and>* F) \\<and>\n                            (\\<forall>s.\n                                (P \\<and>* F) s \\<longrightarrow>\n                                pre C' (Q \\<and>* F) s)\n 5. \\<And>x1 x2 C P Q.\n       \\<lbrakk>\\<And>P Q.\n                   \\<lbrakk>\\<forall>s. P s \\<longrightarrow> pre C Q s;\n                    vc C Q\\<rbrakk>\n                   \\<Longrightarrow> \\<exists>C'.\n  strip C = strip C' \\<and>\n  vc C' (Q \\<and>* F) \\<and>\n  (\\<forall>s. (P \\<and>* F) s \\<longrightarrow> pre C' (Q \\<and>* F) s);\n        \\<forall>s. P s \\<longrightarrow> pre ({x1} WHILE x2 DO C) Q s;\n        vc ({x1} WHILE x2 DO C) Q\\<rbrakk>\n       \\<Longrightarrow> \\<exists>C'.\n                            strip ({x1} WHILE x2 DO C) = strip C' \\<and>\n                            vc C' (Q \\<and>* F) \\<and>\n                            (\\<forall>s.\n                                (P \\<and>* F) s \\<longrightarrow>\n                                pre C' (Q \\<and>* F) s)", "case Askip"], ["proof (state)\nthis:\n  \\<forall>s. P s \\<longrightarrow> pre SKIP Q s\n  vc SKIP Q\n\ngoal (5 subgoals):\n 1. \\<And>P Q.\n       \\<lbrakk>\\<forall>s. P s \\<longrightarrow> pre SKIP Q s;\n        vc SKIP Q\\<rbrakk>\n       \\<Longrightarrow> \\<exists>C'.\n                            strip SKIP = strip C' \\<and>\n                            vc C' (Q \\<and>* F) \\<and>\n                            (\\<forall>s.\n                                (P \\<and>* F) s \\<longrightarrow>\n                                pre C' (Q \\<and>* F) s)\n 2. \\<And>x1 x2 P Q.\n       \\<lbrakk>\\<forall>s. P s \\<longrightarrow> pre (x1 ::= x2) Q s;\n        vc (x1 ::= x2) Q\\<rbrakk>\n       \\<Longrightarrow> \\<exists>C'.\n                            strip (x1 ::= x2) = strip C' \\<and>\n                            vc C' (Q \\<and>* F) \\<and>\n                            (\\<forall>s.\n                                (P \\<and>* F) s \\<longrightarrow>\n                                pre C' (Q \\<and>* F) s)\n 3. \\<And>C1 C2 P Q.\n       \\<lbrakk>\\<And>P Q.\n                   \\<lbrakk>\\<forall>s. P s \\<longrightarrow> pre C1 Q s;\n                    vc C1 Q\\<rbrakk>\n                   \\<Longrightarrow> \\<exists>C'.\n  strip C1 = strip C' \\<and>\n  vc C' (Q \\<and>* F) \\<and>\n  (\\<forall>s. (P \\<and>* F) s \\<longrightarrow> pre C' (Q \\<and>* F) s);\n        \\<And>P Q.\n           \\<lbrakk>\\<forall>s. P s \\<longrightarrow> pre C2 Q s;\n            vc C2 Q\\<rbrakk>\n           \\<Longrightarrow> \\<exists>C'.\n                                strip C2 = strip C' \\<and>\n                                vc C' (Q \\<and>* F) \\<and>\n                                (\\<forall>s.\n                                    (P \\<and>* F) s \\<longrightarrow>\n                                    pre C' (Q \\<and>* F) s);\n        \\<forall>s. P s \\<longrightarrow> pre (C1;; C2) Q s;\n        vc (C1;; C2) Q\\<rbrakk>\n       \\<Longrightarrow> \\<exists>C'.\n                            strip (C1;; C2) = strip C' \\<and>\n                            vc C' (Q \\<and>* F) \\<and>\n                            (\\<forall>s.\n                                (P \\<and>* F) s \\<longrightarrow>\n                                pre C' (Q \\<and>* F) s)\n 4. \\<And>x1 C1 C2 P Q.\n       \\<lbrakk>\\<And>P Q.\n                   \\<lbrakk>\\<forall>s. P s \\<longrightarrow> pre C1 Q s;\n                    vc C1 Q\\<rbrakk>\n                   \\<Longrightarrow> \\<exists>C'.\n  strip C1 = strip C' \\<and>\n  vc C' (Q \\<and>* F) \\<and>\n  (\\<forall>s. (P \\<and>* F) s \\<longrightarrow> pre C' (Q \\<and>* F) s);\n        \\<And>P Q.\n           \\<lbrakk>\\<forall>s. P s \\<longrightarrow> pre C2 Q s;\n            vc C2 Q\\<rbrakk>\n           \\<Longrightarrow> \\<exists>C'.\n                                strip C2 = strip C' \\<and>\n                                vc C' (Q \\<and>* F) \\<and>\n                                (\\<forall>s.\n                                    (P \\<and>* F) s \\<longrightarrow>\n                                    pre C' (Q \\<and>* F) s);\n        \\<forall>s. P s \\<longrightarrow> pre (IF x1 THEN C1 ELSE C2) Q s;\n        vc (IF x1 THEN C1 ELSE C2) Q\\<rbrakk>\n       \\<Longrightarrow> \\<exists>C'.\n                            strip (IF x1 THEN C1 ELSE C2) = strip C' \\<and>\n                            vc C' (Q \\<and>* F) \\<and>\n                            (\\<forall>s.\n                                (P \\<and>* F) s \\<longrightarrow>\n                                pre C' (Q \\<and>* F) s)\n 5. \\<And>x1 x2 C P Q.\n       \\<lbrakk>\\<And>P Q.\n                   \\<lbrakk>\\<forall>s. P s \\<longrightarrow> pre C Q s;\n                    vc C Q\\<rbrakk>\n                   \\<Longrightarrow> \\<exists>C'.\n  strip C = strip C' \\<and>\n  vc C' (Q \\<and>* F) \\<and>\n  (\\<forall>s. (P \\<and>* F) s \\<longrightarrow> pre C' (Q \\<and>* F) s);\n        \\<forall>s. P s \\<longrightarrow> pre ({x1} WHILE x2 DO C) Q s;\n        vc ({x1} WHILE x2 DO C) Q\\<rbrakk>\n       \\<Longrightarrow> \\<exists>C'.\n                            strip ({x1} WHILE x2 DO C) = strip C' \\<and>\n                            vc C' (Q \\<and>* F) \\<and>\n                            (\\<forall>s.\n                                (P \\<and>* F) s \\<longrightarrow>\n                                pre C' (Q \\<and>* F) s)", "show ?case"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>C'.\n       strip SKIP = strip C' \\<and>\n       vc C' (Q \\<and>* F) \\<and>\n       (\\<forall>s.\n           (P \\<and>* F) s \\<longrightarrow> pre C' (Q \\<and>* F) s)", "proof (rule exI[where x=\"Askip\"], safe)"], ["proof (state)\ngoal (2 subgoals):\n 1. vc SKIP (Q \\<and>* F)\n 2. \\<And>a b.\n       (P \\<and>* F) (a, b) \\<Longrightarrow> pre SKIP (Q \\<and>* F) (a, b)", "fix a b"], ["proof (state)\ngoal (2 subgoals):\n 1. vc SKIP (Q \\<and>* F)\n 2. \\<And>a b.\n       (P \\<and>* F) (a, b) \\<Longrightarrow> pre SKIP (Q \\<and>* F) (a, b)", "assume \"(P \\<and>* F) (a, b)\""], ["proof (state)\nthis:\n  (P \\<and>* F) (a, b)\n\ngoal (2 subgoals):\n 1. vc SKIP (Q \\<and>* F)\n 2. \\<And>a b.\n       (P \\<and>* F) (a, b) \\<Longrightarrow> pre SKIP (Q \\<and>* F) (a, b)", "then"], ["proof (chain)\npicking this:\n  (P \\<and>* F) (a, b)", "obtain ps1 ps2 n1 n2 where A: \"ps1##ps2\" \"a=ps1+ps2\" \"b=n1+n2\"\n      and P: \"P (ps1,n1)\" and F: \"F (ps2,n2)\""], ["proof (prove)\nusing this:\n  (P \\<and>* F) (a, b)\n\ngoal (1 subgoal):\n 1. (\\<And>ps1 ps2 n1 n2.\n        \\<lbrakk>ps1 ## ps2; a = ps1 + ps2; b = n1 + n2; P (ps1, n1);\n         F (ps2, n2)\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "unfolding sep_conj_def"], ["proof (prove)\nusing this:\n  \\<exists>x y. x ## y \\<and> (a, b) = x + y \\<and> P x \\<and> F y\n\ngoal (1 subgoal):\n 1. (\\<And>ps1 ps2 n1 n2.\n        \\<lbrakk>ps1 ## ps2; a = ps1 + ps2; b = n1 + n2; P (ps1, n1);\n         F (ps2, n2)\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  ps1 ## ps2\n  a = ps1 + ps2\n  b = n1 + n2\n  P (ps1, n1)\n  F (ps2, n2)\n\ngoal (2 subgoals):\n 1. vc SKIP (Q \\<and>* F)\n 2. \\<And>a b.\n       (P \\<and>* F) (a, b) \\<Longrightarrow> pre SKIP (Q \\<and>* F) (a, b)", "from P Askip"], ["proof (chain)\npicking this:\n  P (ps1, n1)\n  \\<forall>s. P s \\<longrightarrow> pre SKIP Q s\n  vc SKIP Q", "have p: \"($ (Suc 0) \\<and>* Q) (ps1, n1)\""], ["proof (prove)\nusing this:\n  P (ps1, n1)\n  \\<forall>s. P s \\<longrightarrow> pre SKIP Q s\n  vc SKIP Q\n\ngoal (1 subgoal):\n 1. ($ (Suc 0) \\<and>* Q) (ps1, n1)", "by auto"], ["proof (state)\nthis:\n  ($ (Suc 0) \\<and>* Q) (ps1, n1)\n\ngoal (2 subgoals):\n 1. vc SKIP (Q \\<and>* F)\n 2. \\<And>a b.\n       (P \\<and>* F) (a, b) \\<Longrightarrow> pre SKIP (Q \\<and>* F) (a, b)", "from p A F"], ["proof (chain)\npicking this:\n  ($ (Suc 0) \\<and>* Q) (ps1, n1)\n  ps1 ## ps2\n  a = ps1 + ps2\n  b = n1 + n2\n  F (ps2, n2)", "have \"(($ (Suc 0) \\<and>* Q) \\<and>* F) (a, b)\""], ["proof (prove)\nusing this:\n  ($ (Suc 0) \\<and>* Q) (ps1, n1)\n  ps1 ## ps2\n  a = ps1 + ps2\n  b = n1 + n2\n  F (ps2, n2)\n\ngoal (1 subgoal):\n 1. (($ (Suc 0) \\<and>* Q) \\<and>* F) (a, b)", "apply(subst (2) sep_conj_def)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>($ (Suc 0) \\<and>* Q) (ps1, n1); ps1 ## ps2; a = ps1 + ps2;\n     b = n1 + n2; F (ps2, n2)\\<rbrakk>\n    \\<Longrightarrow> \\<exists>x y.\n                         x ## y \\<and>\n                         (a, b) = x + y \\<and>\n                         ($ (Suc 0) \\<and>* Q) x \\<and> F y", "by auto"], ["proof (state)\nthis:\n  (($ (Suc 0) \\<and>* Q) \\<and>* F) (a, b)\n\ngoal (2 subgoals):\n 1. vc SKIP (Q \\<and>* F)\n 2. \\<And>a b.\n       (P \\<and>* F) (a, b) \\<Longrightarrow> pre SKIP (Q \\<and>* F) (a, b)", "then"], ["proof (chain)\npicking this:\n  (($ (Suc 0) \\<and>* Q) \\<and>* F) (a, b)", "show \"pre SKIP (Q \\<and>* F) (a, b)\""], ["proof (prove)\nusing this:\n  (($ (Suc 0) \\<and>* Q) \\<and>* F) (a, b)\n\ngoal (1 subgoal):\n 1. pre SKIP (Q \\<and>* F) (a, b)", "by (simp add: sep_conj_ac)"], ["proof (state)\nthis:\n  pre SKIP (Q \\<and>* F) (a, b)\n\ngoal (1 subgoal):\n 1. vc SKIP (Q \\<and>* F)", "qed simp"], ["proof (state)\nthis:\n  \\<exists>C'.\n     strip SKIP = strip C' \\<and>\n     vc C' (Q \\<and>* F) \\<and>\n     (\\<forall>s. (P \\<and>* F) s \\<longrightarrow> pre C' (Q \\<and>* F) s)\n\ngoal (4 subgoals):\n 1. \\<And>x1 x2 P Q.\n       \\<lbrakk>\\<forall>s. P s \\<longrightarrow> pre (x1 ::= x2) Q s;\n        vc (x1 ::= x2) Q\\<rbrakk>\n       \\<Longrightarrow> \\<exists>C'.\n                            strip (x1 ::= x2) = strip C' \\<and>\n                            vc C' (Q \\<and>* F) \\<and>\n                            (\\<forall>s.\n                                (P \\<and>* F) s \\<longrightarrow>\n                                pre C' (Q \\<and>* F) s)\n 2. \\<And>C1 C2 P Q.\n       \\<lbrakk>\\<And>P Q.\n                   \\<lbrakk>\\<forall>s. P s \\<longrightarrow> pre C1 Q s;\n                    vc C1 Q\\<rbrakk>\n                   \\<Longrightarrow> \\<exists>C'.\n  strip C1 = strip C' \\<and>\n  vc C' (Q \\<and>* F) \\<and>\n  (\\<forall>s. (P \\<and>* F) s \\<longrightarrow> pre C' (Q \\<and>* F) s);\n        \\<And>P Q.\n           \\<lbrakk>\\<forall>s. P s \\<longrightarrow> pre C2 Q s;\n            vc C2 Q\\<rbrakk>\n           \\<Longrightarrow> \\<exists>C'.\n                                strip C2 = strip C' \\<and>\n                                vc C' (Q \\<and>* F) \\<and>\n                                (\\<forall>s.\n                                    (P \\<and>* F) s \\<longrightarrow>\n                                    pre C' (Q \\<and>* F) s);\n        \\<forall>s. P s \\<longrightarrow> pre (C1;; C2) Q s;\n        vc (C1;; C2) Q\\<rbrakk>\n       \\<Longrightarrow> \\<exists>C'.\n                            strip (C1;; C2) = strip C' \\<and>\n                            vc C' (Q \\<and>* F) \\<and>\n                            (\\<forall>s.\n                                (P \\<and>* F) s \\<longrightarrow>\n                                pre C' (Q \\<and>* F) s)\n 3. \\<And>x1 C1 C2 P Q.\n       \\<lbrakk>\\<And>P Q.\n                   \\<lbrakk>\\<forall>s. P s \\<longrightarrow> pre C1 Q s;\n                    vc C1 Q\\<rbrakk>\n                   \\<Longrightarrow> \\<exists>C'.\n  strip C1 = strip C' \\<and>\n  vc C' (Q \\<and>* F) \\<and>\n  (\\<forall>s. (P \\<and>* F) s \\<longrightarrow> pre C' (Q \\<and>* F) s);\n        \\<And>P Q.\n           \\<lbrakk>\\<forall>s. P s \\<longrightarrow> pre C2 Q s;\n            vc C2 Q\\<rbrakk>\n           \\<Longrightarrow> \\<exists>C'.\n                                strip C2 = strip C' \\<and>\n                                vc C' (Q \\<and>* F) \\<and>\n                                (\\<forall>s.\n                                    (P \\<and>* F) s \\<longrightarrow>\n                                    pre C' (Q \\<and>* F) s);\n        \\<forall>s. P s \\<longrightarrow> pre (IF x1 THEN C1 ELSE C2) Q s;\n        vc (IF x1 THEN C1 ELSE C2) Q\\<rbrakk>\n       \\<Longrightarrow> \\<exists>C'.\n                            strip (IF x1 THEN C1 ELSE C2) = strip C' \\<and>\n                            vc C' (Q \\<and>* F) \\<and>\n                            (\\<forall>s.\n                                (P \\<and>* F) s \\<longrightarrow>\n                                pre C' (Q \\<and>* F) s)\n 4. \\<And>x1 x2 C P Q.\n       \\<lbrakk>\\<And>P Q.\n                   \\<lbrakk>\\<forall>s. P s \\<longrightarrow> pre C Q s;\n                    vc C Q\\<rbrakk>\n                   \\<Longrightarrow> \\<exists>C'.\n  strip C = strip C' \\<and>\n  vc C' (Q \\<and>* F) \\<and>\n  (\\<forall>s. (P \\<and>* F) s \\<longrightarrow> pre C' (Q \\<and>* F) s);\n        \\<forall>s. P s \\<longrightarrow> pre ({x1} WHILE x2 DO C) Q s;\n        vc ({x1} WHILE x2 DO C) Q\\<rbrakk>\n       \\<Longrightarrow> \\<exists>C'.\n                            strip ({x1} WHILE x2 DO C) = strip C' \\<and>\n                            vc C' (Q \\<and>* F) \\<and>\n                            (\\<forall>s.\n                                (P \\<and>* F) s \\<longrightarrow>\n                                pre C' (Q \\<and>* F) s)", "next"], ["proof (state)\ngoal (4 subgoals):\n 1. \\<And>x1 x2 P Q.\n       \\<lbrakk>\\<forall>s. P s \\<longrightarrow> pre (x1 ::= x2) Q s;\n        vc (x1 ::= x2) Q\\<rbrakk>\n       \\<Longrightarrow> \\<exists>C'.\n                            strip (x1 ::= x2) = strip C' \\<and>\n                            vc C' (Q \\<and>* F) \\<and>\n                            (\\<forall>s.\n                                (P \\<and>* F) s \\<longrightarrow>\n                                pre C' (Q \\<and>* F) s)\n 2. \\<And>C1 C2 P Q.\n       \\<lbrakk>\\<And>P Q.\n                   \\<lbrakk>\\<forall>s. P s \\<longrightarrow> pre C1 Q s;\n                    vc C1 Q\\<rbrakk>\n                   \\<Longrightarrow> \\<exists>C'.\n  strip C1 = strip C' \\<and>\n  vc C' (Q \\<and>* F) \\<and>\n  (\\<forall>s. (P \\<and>* F) s \\<longrightarrow> pre C' (Q \\<and>* F) s);\n        \\<And>P Q.\n           \\<lbrakk>\\<forall>s. P s \\<longrightarrow> pre C2 Q s;\n            vc C2 Q\\<rbrakk>\n           \\<Longrightarrow> \\<exists>C'.\n                                strip C2 = strip C' \\<and>\n                                vc C' (Q \\<and>* F) \\<and>\n                                (\\<forall>s.\n                                    (P \\<and>* F) s \\<longrightarrow>\n                                    pre C' (Q \\<and>* F) s);\n        \\<forall>s. P s \\<longrightarrow> pre (C1;; C2) Q s;\n        vc (C1;; C2) Q\\<rbrakk>\n       \\<Longrightarrow> \\<exists>C'.\n                            strip (C1;; C2) = strip C' \\<and>\n                            vc C' (Q \\<and>* F) \\<and>\n                            (\\<forall>s.\n                                (P \\<and>* F) s \\<longrightarrow>\n                                pre C' (Q \\<and>* F) s)\n 3. \\<And>x1 C1 C2 P Q.\n       \\<lbrakk>\\<And>P Q.\n                   \\<lbrakk>\\<forall>s. P s \\<longrightarrow> pre C1 Q s;\n                    vc C1 Q\\<rbrakk>\n                   \\<Longrightarrow> \\<exists>C'.\n  strip C1 = strip C' \\<and>\n  vc C' (Q \\<and>* F) \\<and>\n  (\\<forall>s. (P \\<and>* F) s \\<longrightarrow> pre C' (Q \\<and>* F) s);\n        \\<And>P Q.\n           \\<lbrakk>\\<forall>s. P s \\<longrightarrow> pre C2 Q s;\n            vc C2 Q\\<rbrakk>\n           \\<Longrightarrow> \\<exists>C'.\n                                strip C2 = strip C' \\<and>\n                                vc C' (Q \\<and>* F) \\<and>\n                                (\\<forall>s.\n                                    (P \\<and>* F) s \\<longrightarrow>\n                                    pre C' (Q \\<and>* F) s);\n        \\<forall>s. P s \\<longrightarrow> pre (IF x1 THEN C1 ELSE C2) Q s;\n        vc (IF x1 THEN C1 ELSE C2) Q\\<rbrakk>\n       \\<Longrightarrow> \\<exists>C'.\n                            strip (IF x1 THEN C1 ELSE C2) = strip C' \\<and>\n                            vc C' (Q \\<and>* F) \\<and>\n                            (\\<forall>s.\n                                (P \\<and>* F) s \\<longrightarrow>\n                                pre C' (Q \\<and>* F) s)\n 4. \\<And>x1 x2 C P Q.\n       \\<lbrakk>\\<And>P Q.\n                   \\<lbrakk>\\<forall>s. P s \\<longrightarrow> pre C Q s;\n                    vc C Q\\<rbrakk>\n                   \\<Longrightarrow> \\<exists>C'.\n  strip C = strip C' \\<and>\n  vc C' (Q \\<and>* F) \\<and>\n  (\\<forall>s. (P \\<and>* F) s \\<longrightarrow> pre C' (Q \\<and>* F) s);\n        \\<forall>s. P s \\<longrightarrow> pre ({x1} WHILE x2 DO C) Q s;\n        vc ({x1} WHILE x2 DO C) Q\\<rbrakk>\n       \\<Longrightarrow> \\<exists>C'.\n                            strip ({x1} WHILE x2 DO C) = strip C' \\<and>\n                            vc C' (Q \\<and>* F) \\<and>\n                            (\\<forall>s.\n                                (P \\<and>* F) s \\<longrightarrow>\n                                pre C' (Q \\<and>* F) s)", "case (Aassign x a)"], ["proof (state)\nthis:\n  \\<forall>s. P s \\<longrightarrow> pre (x ::= a) Q s\n  vc (x ::= a) Q\n\ngoal (4 subgoals):\n 1. \\<And>x1 x2 P Q.\n       \\<lbrakk>\\<forall>s. P s \\<longrightarrow> pre (x1 ::= x2) Q s;\n        vc (x1 ::= x2) Q\\<rbrakk>\n       \\<Longrightarrow> \\<exists>C'.\n                            strip (x1 ::= x2) = strip C' \\<and>\n                            vc C' (Q \\<and>* F) \\<and>\n                            (\\<forall>s.\n                                (P \\<and>* F) s \\<longrightarrow>\n                                pre C' (Q \\<and>* F) s)\n 2. \\<And>C1 C2 P Q.\n       \\<lbrakk>\\<And>P Q.\n                   \\<lbrakk>\\<forall>s. P s \\<longrightarrow> pre C1 Q s;\n                    vc C1 Q\\<rbrakk>\n                   \\<Longrightarrow> \\<exists>C'.\n  strip C1 = strip C' \\<and>\n  vc C' (Q \\<and>* F) \\<and>\n  (\\<forall>s. (P \\<and>* F) s \\<longrightarrow> pre C' (Q \\<and>* F) s);\n        \\<And>P Q.\n           \\<lbrakk>\\<forall>s. P s \\<longrightarrow> pre C2 Q s;\n            vc C2 Q\\<rbrakk>\n           \\<Longrightarrow> \\<exists>C'.\n                                strip C2 = strip C' \\<and>\n                                vc C' (Q \\<and>* F) \\<and>\n                                (\\<forall>s.\n                                    (P \\<and>* F) s \\<longrightarrow>\n                                    pre C' (Q \\<and>* F) s);\n        \\<forall>s. P s \\<longrightarrow> pre (C1;; C2) Q s;\n        vc (C1;; C2) Q\\<rbrakk>\n       \\<Longrightarrow> \\<exists>C'.\n                            strip (C1;; C2) = strip C' \\<and>\n                            vc C' (Q \\<and>* F) \\<and>\n                            (\\<forall>s.\n                                (P \\<and>* F) s \\<longrightarrow>\n                                pre C' (Q \\<and>* F) s)\n 3. \\<And>x1 C1 C2 P Q.\n       \\<lbrakk>\\<And>P Q.\n                   \\<lbrakk>\\<forall>s. P s \\<longrightarrow> pre C1 Q s;\n                    vc C1 Q\\<rbrakk>\n                   \\<Longrightarrow> \\<exists>C'.\n  strip C1 = strip C' \\<and>\n  vc C' (Q \\<and>* F) \\<and>\n  (\\<forall>s. (P \\<and>* F) s \\<longrightarrow> pre C' (Q \\<and>* F) s);\n        \\<And>P Q.\n           \\<lbrakk>\\<forall>s. P s \\<longrightarrow> pre C2 Q s;\n            vc C2 Q\\<rbrakk>\n           \\<Longrightarrow> \\<exists>C'.\n                                strip C2 = strip C' \\<and>\n                                vc C' (Q \\<and>* F) \\<and>\n                                (\\<forall>s.\n                                    (P \\<and>* F) s \\<longrightarrow>\n                                    pre C' (Q \\<and>* F) s);\n        \\<forall>s. P s \\<longrightarrow> pre (IF x1 THEN C1 ELSE C2) Q s;\n        vc (IF x1 THEN C1 ELSE C2) Q\\<rbrakk>\n       \\<Longrightarrow> \\<exists>C'.\n                            strip (IF x1 THEN C1 ELSE C2) = strip C' \\<and>\n                            vc C' (Q \\<and>* F) \\<and>\n                            (\\<forall>s.\n                                (P \\<and>* F) s \\<longrightarrow>\n                                pre C' (Q \\<and>* F) s)\n 4. \\<And>x1 x2 C P Q.\n       \\<lbrakk>\\<And>P Q.\n                   \\<lbrakk>\\<forall>s. P s \\<longrightarrow> pre C Q s;\n                    vc C Q\\<rbrakk>\n                   \\<Longrightarrow> \\<exists>C'.\n  strip C = strip C' \\<and>\n  vc C' (Q \\<and>* F) \\<and>\n  (\\<forall>s. (P \\<and>* F) s \\<longrightarrow> pre C' (Q \\<and>* F) s);\n        \\<forall>s. P s \\<longrightarrow> pre ({x1} WHILE x2 DO C) Q s;\n        vc ({x1} WHILE x2 DO C) Q\\<rbrakk>\n       \\<Longrightarrow> \\<exists>C'.\n                            strip ({x1} WHILE x2 DO C) = strip C' \\<and>\n                            vc C' (Q \\<and>* F) \\<and>\n                            (\\<forall>s.\n                                (P \\<and>* F) s \\<longrightarrow>\n                                pre C' (Q \\<and>* F) s)", "show ?case"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>C'.\n       strip (x ::= a) = strip C' \\<and>\n       vc C' (Q \\<and>* F) \\<and>\n       (\\<forall>s.\n           (P \\<and>* F) s \\<longrightarrow> pre C' (Q \\<and>* F) s)", "proof (rule exI[where x=\"Aassign x a\"], safe)"], ["proof (state)\ngoal (2 subgoals):\n 1. vc (x ::= a) (Q \\<and>* F)\n 2. \\<And>aa b.\n       (P \\<and>* F) (aa, b) \\<Longrightarrow>\n       pre (x ::= a) (Q \\<and>* F) (aa, b)", "fix ps n"], ["proof (state)\ngoal (2 subgoals):\n 1. vc (x ::= a) (Q \\<and>* F)\n 2. \\<And>aa b.\n       (P \\<and>* F) (aa, b) \\<Longrightarrow>\n       pre (x ::= a) (Q \\<and>* F) (aa, b)", "assume \"(P \\<and>* F) (ps,n)\""], ["proof (state)\nthis:\n  (P \\<and>* F) (ps, n)\n\ngoal (2 subgoals):\n 1. vc (x ::= a) (Q \\<and>* F)\n 2. \\<And>aa b.\n       (P \\<and>* F) (aa, b) \\<Longrightarrow>\n       pre (x ::= a) (Q \\<and>* F) (aa, b)", "then"], ["proof (chain)\npicking this:\n  (P \\<and>* F) (ps, n)", "obtain ps1 ps2 n1 n2 where o: \"ps1##ps2\" \"ps=ps1+ps2\" \"n=n1+n2\"\n      and P: \"P (ps1,n1)\" and F: \"F (ps2,n2)\""], ["proof (prove)\nusing this:\n  (P \\<and>* F) (ps, n)\n\ngoal (1 subgoal):\n 1. (\\<And>ps1 ps2 n1 n2.\n        \\<lbrakk>ps1 ## ps2; ps = ps1 + ps2; n = n1 + n2; P (ps1, n1);\n         F (ps2, n2)\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "unfolding sep_conj_def"], ["proof (prove)\nusing this:\n  \\<exists>x y. x ## y \\<and> (ps, n) = x + y \\<and> P x \\<and> F y\n\ngoal (1 subgoal):\n 1. (\\<And>ps1 ps2 n1 n2.\n        \\<lbrakk>ps1 ## ps2; ps = ps1 + ps2; n = n1 + n2; P (ps1, n1);\n         F (ps2, n2)\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  ps1 ## ps2\n  ps = ps1 + ps2\n  n = n1 + n2\n  P (ps1, n1)\n  F (ps2, n2)\n\ngoal (2 subgoals):\n 1. vc (x ::= a) (Q \\<and>* F)\n 2. \\<And>aa b.\n       (P \\<and>* F) (aa, b) \\<Longrightarrow>\n       pre (x ::= a) (Q \\<and>* F) (aa, b)", "from P Aassign(1)"], ["proof (chain)\npicking this:\n  P (ps1, n1)\n  \\<forall>s. P s \\<longrightarrow> pre (x ::= a) Q s", "have z: \"((\\<lambda>(ps, t). x \\<in> dom ps \\<and> vars a \\<subseteq> dom ps \\<and> Q (ps(x \\<mapsto> paval a ps), t))\n                                     \\<and>* $ (Suc 0)) (ps1, n1)\""], ["proof (prove)\nusing this:\n  P (ps1, n1)\n  \\<forall>s. P s \\<longrightarrow> pre (x ::= a) Q s\n\ngoal (1 subgoal):\n 1. ((\\<lambda>(ps, t).\n         x \\<in> dom ps \\<and>\n         vars a \\<subseteq> dom ps \\<and>\n         Q (ps(x \\<mapsto> paval a ps), t)) \\<and>*\n     $ (Suc 0))\n     (ps1, n1)", "by auto"], ["proof (state)\nthis:\n  ((\\<lambda>(ps, t).\n       x \\<in> dom ps \\<and>\n       vars a \\<subseteq> dom ps \\<and>\n       Q (ps(x \\<mapsto> paval a ps), t)) \\<and>*\n   $ (Suc 0))\n   (ps1, n1)\n\ngoal (2 subgoals):\n 1. vc (x ::= a) (Q \\<and>* F)\n 2. \\<And>aa b.\n       (P \\<and>* F) (aa, b) \\<Longrightarrow>\n       pre (x ::= a) (Q \\<and>* F) (aa, b)", "with o F"], ["proof (chain)\npicking this:\n  ps1 ## ps2\n  ps = ps1 + ps2\n  n = n1 + n2\n  F (ps2, n2)\n  ((\\<lambda>(ps, t).\n       x \\<in> dom ps \\<and>\n       vars a \\<subseteq> dom ps \\<and>\n       Q (ps(x \\<mapsto> paval a ps), t)) \\<and>*\n   $ (Suc 0))\n   (ps1, n1)", "show \" pre (x ::= a) (Q \\<and>* F) (ps,n)\""], ["proof (prove)\nusing this:\n  ps1 ## ps2\n  ps = ps1 + ps2\n  n = n1 + n2\n  F (ps2, n2)\n  ((\\<lambda>(ps, t).\n       x \\<in> dom ps \\<and>\n       vars a \\<subseteq> dom ps \\<and>\n       Q (ps(x \\<mapsto> paval a ps), t)) \\<and>*\n   $ (Suc 0))\n   (ps1, n1)\n\ngoal (1 subgoal):\n 1. pre (x ::= a) (Q \\<and>* F) (ps, n)", "apply auto"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>ps1 ## ps2; ps = ps1 + ps2; n = n1 + n2; F (ps2, n2);\n     ((\\<lambda>(ps, t).\n          x \\<in> dom ps \\<and>\n          vars a \\<subseteq> dom ps \\<and>\n          Q (ps(x \\<mapsto> paval a ps), t)) \\<and>*\n      $ (Suc 0))\n      (ps1, n1)\\<rbrakk>\n    \\<Longrightarrow> ((\\<lambda>(ps, t).\n                           x \\<in> dom ps \\<and>\n                           vars a \\<subseteq> dom ps \\<and>\n                           (Q \\<and>* F)\n                            (ps(x \\<mapsto> paval a ps), t)) \\<and>*\n                       $ (Suc 0))\n                       (ps1 + ps2, n1 + n2)", "unfolding sep_conj_def dollar_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>ps1 ## ps2; ps = ps1 + ps2; n = n1 + n2; F (ps2, n2);\n     \\<exists>xa y.\n        xa ## y \\<and>\n        (ps1, n1) = xa + y \\<and>\n        (case xa of\n         (ps, t) \\<Rightarrow>\n           x \\<in> dom ps \\<and>\n           vars a \\<subseteq> dom ps \\<and>\n           Q (ps(x \\<mapsto> paval a ps), t)) \\<and>\n        (case y of (s, c) \\<Rightarrow> s = 0 \\<and> c = Suc 0)\\<rbrakk>\n    \\<Longrightarrow> \\<exists>xa y.\n                         xa ## y \\<and>\n                         (ps1 + ps2, n1 + n2) = xa + y \\<and>\n                         (case xa of\n                          (ps, t) \\<Rightarrow>\n                            x \\<in> dom ps \\<and>\n                            vars a \\<subseteq> dom ps \\<and>\n                            (\\<exists>xa y.\n                                xa ## y \\<and>\n                                (ps(x \\<mapsto> paval a ps), t) =\n                                xa + y \\<and>\n                                Q xa \\<and> F y)) \\<and>\n                         (case y of\n                          (s, c) \\<Rightarrow> s = 0 \\<and> c = Suc 0)", "apply (auto)"], ["proof (prove)\ngoal (3 subgoals):\n 1. \\<And>b y.\n       \\<lbrakk>ps1 ## ps2; ps = ps1 + ps2; n = Suc (b + n2); F (ps2, n2);\n        n1 = Suc b; ps1 x = Some y; vars a \\<subseteq> dom ps1;\n        Q (ps1(x \\<mapsto> paval a ps1), b)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>y. (ps1 + ps2) x = Some y\n 2. \\<And>b y xa.\n       \\<lbrakk>ps1 ## ps2; ps = ps1 + ps2; n = Suc (b + n2); F (ps2, n2);\n        n1 = Suc b; ps1 x = Some y; vars a \\<subseteq> dom ps1;\n        Q (ps1(x \\<mapsto> paval a ps1), b); xa \\<in> vars a\\<rbrakk>\n       \\<Longrightarrow> \\<exists>y. (ps1 + ps2) xa = Some y\n 3. \\<And>b y.\n       \\<lbrakk>ps1 ## ps2; ps = ps1 + ps2; n = Suc (b + n2); F (ps2, n2);\n        n1 = Suc b; ps1 x = Some y; vars a \\<subseteq> dom ps1;\n        Q (ps1(x \\<mapsto> paval a ps1), b)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>aa ba ab.\n                            aa ## ab \\<and>\n                            (ps1 + ps2)(x \\<mapsto> paval a (ps1 + ps2)) =\n                            aa + ab \\<and>\n                            (\\<exists>bb.\n                                b + n2 = ba + bb \\<and>\n                                Q (aa, ba) \\<and> F (ab, bb))", "subgoal"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>ps1 ## ps2; ps = ps1 + ps2; n = Suc (b_ + n2); F (ps2, n2);\n     n1 = Suc b_; ps1 x = Some y_; vars a \\<subseteq> dom ps1;\n     Q (ps1(x \\<mapsto> paval a ps1), b_)\\<rbrakk>\n    \\<Longrightarrow> \\<exists>y. (ps1 + ps2) x = Some y", "by(simp add: plus_fun_def)"], ["proof (prove)\ngoal (2 subgoals):\n 1. \\<And>b y xa.\n       \\<lbrakk>ps1 ## ps2; ps = ps1 + ps2; n = Suc (b + n2); F (ps2, n2);\n        n1 = Suc b; ps1 x = Some y; vars a \\<subseteq> dom ps1;\n        Q (ps1(x \\<mapsto> paval a ps1), b); xa \\<in> vars a\\<rbrakk>\n       \\<Longrightarrow> \\<exists>y. (ps1 + ps2) xa = Some y\n 2. \\<And>b y.\n       \\<lbrakk>ps1 ## ps2; ps = ps1 + ps2; n = Suc (b + n2); F (ps2, n2);\n        n1 = Suc b; ps1 x = Some y; vars a \\<subseteq> dom ps1;\n        Q (ps1(x \\<mapsto> paval a ps1), b)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>aa ba ab.\n                            aa ## ab \\<and>\n                            (ps1 + ps2)(x \\<mapsto> paval a (ps1 + ps2)) =\n                            aa + ab \\<and>\n                            (\\<exists>bb.\n                                b + n2 = ba + bb \\<and>\n                                Q (aa, ba) \\<and> F (ab, bb))", "subgoal"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>ps1 ## ps2; ps = ps1 + ps2; n = Suc (b_ + n2); F (ps2, n2);\n     n1 = Suc b_; ps1 x = Some y_; vars a \\<subseteq> dom ps1;\n     Q (ps1(x \\<mapsto> paval a ps1), b_); xa_ \\<in> vars a\\<rbrakk>\n    \\<Longrightarrow> \\<exists>y. (ps1 + ps2) xa_ = Some y", "by(auto simp add: plus_fun_def)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>b y.\n       \\<lbrakk>ps1 ## ps2; ps = ps1 + ps2; n = Suc (b + n2); F (ps2, n2);\n        n1 = Suc b; ps1 x = Some y; vars a \\<subseteq> dom ps1;\n        Q (ps1(x \\<mapsto> paval a ps1), b)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>aa ba ab.\n                            aa ## ab \\<and>\n                            (ps1 + ps2)(x \\<mapsto> paval a (ps1 + ps2)) =\n                            aa + ab \\<and>\n                            (\\<exists>bb.\n                                b + n2 = ba + bb \\<and>\n                                Q (aa, ba) \\<and> F (ab, bb))", "subgoal"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>ps1 ## ps2; ps = ps1 + ps2; n = Suc (b_ + n2); F (ps2, n2);\n     n1 = Suc b_; ps1 x = Some y_; vars a \\<subseteq> dom ps1;\n     Q (ps1(x \\<mapsto> paval a ps1), b_)\\<rbrakk>\n    \\<Longrightarrow> \\<exists>aa ba ab.\n                         aa ## ab \\<and>\n                         (ps1 + ps2)(x \\<mapsto> paval a (ps1 + ps2)) =\n                         aa + ab \\<and>\n                         (\\<exists>bb.\n                             b_ + n2 = ba + bb \\<and>\n                             Q (aa, ba) \\<and> F (ab, bb))", "by (smt add_update_distrib dom_fun_upd domain_conv insert_dom option.simps(3) paval_extend sep_disj_fun_def)"], ["proof (prove)\ngoal:\nNo subgoals!", "done"], ["proof (state)\nthis:\n  pre (x ::= a) (Q \\<and>* F) (ps, n)\n\ngoal (1 subgoal):\n 1. vc (x ::= a) (Q \\<and>* F)", "qed auto"], ["proof (state)\nthis:\n  \\<exists>C'.\n     strip (x ::= a) = strip C' \\<and>\n     vc C' (Q \\<and>* F) \\<and>\n     (\\<forall>s. (P \\<and>* F) s \\<longrightarrow> pre C' (Q \\<and>* F) s)\n\ngoal (3 subgoals):\n 1. \\<And>C1 C2 P Q.\n       \\<lbrakk>\\<And>P Q.\n                   \\<lbrakk>\\<forall>s. P s \\<longrightarrow> pre C1 Q s;\n                    vc C1 Q\\<rbrakk>\n                   \\<Longrightarrow> \\<exists>C'.\n  strip C1 = strip C' \\<and>\n  vc C' (Q \\<and>* F) \\<and>\n  (\\<forall>s. (P \\<and>* F) s \\<longrightarrow> pre C' (Q \\<and>* F) s);\n        \\<And>P Q.\n           \\<lbrakk>\\<forall>s. P s \\<longrightarrow> pre C2 Q s;\n            vc C2 Q\\<rbrakk>\n           \\<Longrightarrow> \\<exists>C'.\n                                strip C2 = strip C' \\<and>\n                                vc C' (Q \\<and>* F) \\<and>\n                                (\\<forall>s.\n                                    (P \\<and>* F) s \\<longrightarrow>\n                                    pre C' (Q \\<and>* F) s);\n        \\<forall>s. P s \\<longrightarrow> pre (C1;; C2) Q s;\n        vc (C1;; C2) Q\\<rbrakk>\n       \\<Longrightarrow> \\<exists>C'.\n                            strip (C1;; C2) = strip C' \\<and>\n                            vc C' (Q \\<and>* F) \\<and>\n                            (\\<forall>s.\n                                (P \\<and>* F) s \\<longrightarrow>\n                                pre C' (Q \\<and>* F) s)\n 2. \\<And>x1 C1 C2 P Q.\n       \\<lbrakk>\\<And>P Q.\n                   \\<lbrakk>\\<forall>s. P s \\<longrightarrow> pre C1 Q s;\n                    vc C1 Q\\<rbrakk>\n                   \\<Longrightarrow> \\<exists>C'.\n  strip C1 = strip C' \\<and>\n  vc C' (Q \\<and>* F) \\<and>\n  (\\<forall>s. (P \\<and>* F) s \\<longrightarrow> pre C' (Q \\<and>* F) s);\n        \\<And>P Q.\n           \\<lbrakk>\\<forall>s. P s \\<longrightarrow> pre C2 Q s;\n            vc C2 Q\\<rbrakk>\n           \\<Longrightarrow> \\<exists>C'.\n                                strip C2 = strip C' \\<and>\n                                vc C' (Q \\<and>* F) \\<and>\n                                (\\<forall>s.\n                                    (P \\<and>* F) s \\<longrightarrow>\n                                    pre C' (Q \\<and>* F) s);\n        \\<forall>s. P s \\<longrightarrow> pre (IF x1 THEN C1 ELSE C2) Q s;\n        vc (IF x1 THEN C1 ELSE C2) Q\\<rbrakk>\n       \\<Longrightarrow> \\<exists>C'.\n                            strip (IF x1 THEN C1 ELSE C2) = strip C' \\<and>\n                            vc C' (Q \\<and>* F) \\<and>\n                            (\\<forall>s.\n                                (P \\<and>* F) s \\<longrightarrow>\n                                pre C' (Q \\<and>* F) s)\n 3. \\<And>x1 x2 C P Q.\n       \\<lbrakk>\\<And>P Q.\n                   \\<lbrakk>\\<forall>s. P s \\<longrightarrow> pre C Q s;\n                    vc C Q\\<rbrakk>\n                   \\<Longrightarrow> \\<exists>C'.\n  strip C = strip C' \\<and>\n  vc C' (Q \\<and>* F) \\<and>\n  (\\<forall>s. (P \\<and>* F) s \\<longrightarrow> pre C' (Q \\<and>* F) s);\n        \\<forall>s. P s \\<longrightarrow> pre ({x1} WHILE x2 DO C) Q s;\n        vc ({x1} WHILE x2 DO C) Q\\<rbrakk>\n       \\<Longrightarrow> \\<exists>C'.\n                            strip ({x1} WHILE x2 DO C) = strip C' \\<and>\n                            vc C' (Q \\<and>* F) \\<and>\n                            (\\<forall>s.\n                                (P \\<and>* F) s \\<longrightarrow>\n                                pre C' (Q \\<and>* F) s)", "next"], ["proof (state)\ngoal (3 subgoals):\n 1. \\<And>C1 C2 P Q.\n       \\<lbrakk>\\<And>P Q.\n                   \\<lbrakk>\\<forall>s. P s \\<longrightarrow> pre C1 Q s;\n                    vc C1 Q\\<rbrakk>\n                   \\<Longrightarrow> \\<exists>C'.\n  strip C1 = strip C' \\<and>\n  vc C' (Q \\<and>* F) \\<and>\n  (\\<forall>s. (P \\<and>* F) s \\<longrightarrow> pre C' (Q \\<and>* F) s);\n        \\<And>P Q.\n           \\<lbrakk>\\<forall>s. P s \\<longrightarrow> pre C2 Q s;\n            vc C2 Q\\<rbrakk>\n           \\<Longrightarrow> \\<exists>C'.\n                                strip C2 = strip C' \\<and>\n                                vc C' (Q \\<and>* F) \\<and>\n                                (\\<forall>s.\n                                    (P \\<and>* F) s \\<longrightarrow>\n                                    pre C' (Q \\<and>* F) s);\n        \\<forall>s. P s \\<longrightarrow> pre (C1;; C2) Q s;\n        vc (C1;; C2) Q\\<rbrakk>\n       \\<Longrightarrow> \\<exists>C'.\n                            strip (C1;; C2) = strip C' \\<and>\n                            vc C' (Q \\<and>* F) \\<and>\n                            (\\<forall>s.\n                                (P \\<and>* F) s \\<longrightarrow>\n                                pre C' (Q \\<and>* F) s)\n 2. \\<And>x1 C1 C2 P Q.\n       \\<lbrakk>\\<And>P Q.\n                   \\<lbrakk>\\<forall>s. P s \\<longrightarrow> pre C1 Q s;\n                    vc C1 Q\\<rbrakk>\n                   \\<Longrightarrow> \\<exists>C'.\n  strip C1 = strip C' \\<and>\n  vc C' (Q \\<and>* F) \\<and>\n  (\\<forall>s. (P \\<and>* F) s \\<longrightarrow> pre C' (Q \\<and>* F) s);\n        \\<And>P Q.\n           \\<lbrakk>\\<forall>s. P s \\<longrightarrow> pre C2 Q s;\n            vc C2 Q\\<rbrakk>\n           \\<Longrightarrow> \\<exists>C'.\n                                strip C2 = strip C' \\<and>\n                                vc C' (Q \\<and>* F) \\<and>\n                                (\\<forall>s.\n                                    (P \\<and>* F) s \\<longrightarrow>\n                                    pre C' (Q \\<and>* F) s);\n        \\<forall>s. P s \\<longrightarrow> pre (IF x1 THEN C1 ELSE C2) Q s;\n        vc (IF x1 THEN C1 ELSE C2) Q\\<rbrakk>\n       \\<Longrightarrow> \\<exists>C'.\n                            strip (IF x1 THEN C1 ELSE C2) = strip C' \\<and>\n                            vc C' (Q \\<and>* F) \\<and>\n                            (\\<forall>s.\n                                (P \\<and>* F) s \\<longrightarrow>\n                                pre C' (Q \\<and>* F) s)\n 3. \\<And>x1 x2 C P Q.\n       \\<lbrakk>\\<And>P Q.\n                   \\<lbrakk>\\<forall>s. P s \\<longrightarrow> pre C Q s;\n                    vc C Q\\<rbrakk>\n                   \\<Longrightarrow> \\<exists>C'.\n  strip C = strip C' \\<and>\n  vc C' (Q \\<and>* F) \\<and>\n  (\\<forall>s. (P \\<and>* F) s \\<longrightarrow> pre C' (Q \\<and>* F) s);\n        \\<forall>s. P s \\<longrightarrow> pre ({x1} WHILE x2 DO C) Q s;\n        vc ({x1} WHILE x2 DO C) Q\\<rbrakk>\n       \\<Longrightarrow> \\<exists>C'.\n                            strip ({x1} WHILE x2 DO C) = strip C' \\<and>\n                            vc C' (Q \\<and>* F) \\<and>\n                            (\\<forall>s.\n                                (P \\<and>* F) s \\<longrightarrow>\n                                pre C' (Q \\<and>* F) s)", "case (Aseq C1 C2)"], ["proof (state)\nthis:\n  \\<lbrakk>\\<forall>s. ?P s \\<longrightarrow> pre C1 ?Q s; vc C1 ?Q\\<rbrakk>\n  \\<Longrightarrow> \\<exists>C'.\n                       strip C1 = strip C' \\<and>\n                       vc C' (?Q \\<and>* F) \\<and>\n                       (\\<forall>s.\n                           (?P \\<and>* F) s \\<longrightarrow>\n                           pre C' (?Q \\<and>* F) s)\n  \\<lbrakk>\\<forall>s. ?P s \\<longrightarrow> pre C2 ?Q s; vc C2 ?Q\\<rbrakk>\n  \\<Longrightarrow> \\<exists>C'.\n                       strip C2 = strip C' \\<and>\n                       vc C' (?Q \\<and>* F) \\<and>\n                       (\\<forall>s.\n                           (?P \\<and>* F) s \\<longrightarrow>\n                           pre C' (?Q \\<and>* F) s)\n  \\<forall>s. P s \\<longrightarrow> pre (C1;; C2) Q s\n  vc (C1;; C2) Q\n\ngoal (3 subgoals):\n 1. \\<And>C1 C2 P Q.\n       \\<lbrakk>\\<And>P Q.\n                   \\<lbrakk>\\<forall>s. P s \\<longrightarrow> pre C1 Q s;\n                    vc C1 Q\\<rbrakk>\n                   \\<Longrightarrow> \\<exists>C'.\n  strip C1 = strip C' \\<and>\n  vc C' (Q \\<and>* F) \\<and>\n  (\\<forall>s. (P \\<and>* F) s \\<longrightarrow> pre C' (Q \\<and>* F) s);\n        \\<And>P Q.\n           \\<lbrakk>\\<forall>s. P s \\<longrightarrow> pre C2 Q s;\n            vc C2 Q\\<rbrakk>\n           \\<Longrightarrow> \\<exists>C'.\n                                strip C2 = strip C' \\<and>\n                                vc C' (Q \\<and>* F) \\<and>\n                                (\\<forall>s.\n                                    (P \\<and>* F) s \\<longrightarrow>\n                                    pre C' (Q \\<and>* F) s);\n        \\<forall>s. P s \\<longrightarrow> pre (C1;; C2) Q s;\n        vc (C1;; C2) Q\\<rbrakk>\n       \\<Longrightarrow> \\<exists>C'.\n                            strip (C1;; C2) = strip C' \\<and>\n                            vc C' (Q \\<and>* F) \\<and>\n                            (\\<forall>s.\n                                (P \\<and>* F) s \\<longrightarrow>\n                                pre C' (Q \\<and>* F) s)\n 2. \\<And>x1 C1 C2 P Q.\n       \\<lbrakk>\\<And>P Q.\n                   \\<lbrakk>\\<forall>s. P s \\<longrightarrow> pre C1 Q s;\n                    vc C1 Q\\<rbrakk>\n                   \\<Longrightarrow> \\<exists>C'.\n  strip C1 = strip C' \\<and>\n  vc C' (Q \\<and>* F) \\<and>\n  (\\<forall>s. (P \\<and>* F) s \\<longrightarrow> pre C' (Q \\<and>* F) s);\n        \\<And>P Q.\n           \\<lbrakk>\\<forall>s. P s \\<longrightarrow> pre C2 Q s;\n            vc C2 Q\\<rbrakk>\n           \\<Longrightarrow> \\<exists>C'.\n                                strip C2 = strip C' \\<and>\n                                vc C' (Q \\<and>* F) \\<and>\n                                (\\<forall>s.\n                                    (P \\<and>* F) s \\<longrightarrow>\n                                    pre C' (Q \\<and>* F) s);\n        \\<forall>s. P s \\<longrightarrow> pre (IF x1 THEN C1 ELSE C2) Q s;\n        vc (IF x1 THEN C1 ELSE C2) Q\\<rbrakk>\n       \\<Longrightarrow> \\<exists>C'.\n                            strip (IF x1 THEN C1 ELSE C2) = strip C' \\<and>\n                            vc C' (Q \\<and>* F) \\<and>\n                            (\\<forall>s.\n                                (P \\<and>* F) s \\<longrightarrow>\n                                pre C' (Q \\<and>* F) s)\n 3. \\<And>x1 x2 C P Q.\n       \\<lbrakk>\\<And>P Q.\n                   \\<lbrakk>\\<forall>s. P s \\<longrightarrow> pre C Q s;\n                    vc C Q\\<rbrakk>\n                   \\<Longrightarrow> \\<exists>C'.\n  strip C = strip C' \\<and>\n  vc C' (Q \\<and>* F) \\<and>\n  (\\<forall>s. (P \\<and>* F) s \\<longrightarrow> pre C' (Q \\<and>* F) s);\n        \\<forall>s. P s \\<longrightarrow> pre ({x1} WHILE x2 DO C) Q s;\n        vc ({x1} WHILE x2 DO C) Q\\<rbrakk>\n       \\<Longrightarrow> \\<exists>C'.\n                            strip ({x1} WHILE x2 DO C) = strip C' \\<and>\n                            vc C' (Q \\<and>* F) \\<and>\n                            (\\<forall>s.\n                                (P \\<and>* F) s \\<longrightarrow>\n                                pre C' (Q \\<and>* F) s)", "from Aseq(3)"], ["proof (chain)\npicking this:\n  \\<forall>s. P s \\<longrightarrow> pre (C1;; C2) Q s", "have pre: \"\\<forall>s. P s \\<longrightarrow> pre C1 (pre C2 Q) s\""], ["proof (prove)\nusing this:\n  \\<forall>s. P s \\<longrightarrow> pre (C1;; C2) Q s\n\ngoal (1 subgoal):\n 1. \\<forall>s. P s \\<longrightarrow> pre C1 (pre C2 Q) s", "by auto"], ["proof (state)\nthis:\n  \\<forall>s. P s \\<longrightarrow> pre C1 (pre C2 Q) s\n\ngoal (3 subgoals):\n 1. \\<And>C1 C2 P Q.\n       \\<lbrakk>\\<And>P Q.\n                   \\<lbrakk>\\<forall>s. P s \\<longrightarrow> pre C1 Q s;\n                    vc C1 Q\\<rbrakk>\n                   \\<Longrightarrow> \\<exists>C'.\n  strip C1 = strip C' \\<and>\n  vc C' (Q \\<and>* F) \\<and>\n  (\\<forall>s. (P \\<and>* F) s \\<longrightarrow> pre C' (Q \\<and>* F) s);\n        \\<And>P Q.\n           \\<lbrakk>\\<forall>s. P s \\<longrightarrow> pre C2 Q s;\n            vc C2 Q\\<rbrakk>\n           \\<Longrightarrow> \\<exists>C'.\n                                strip C2 = strip C' \\<and>\n                                vc C' (Q \\<and>* F) \\<and>\n                                (\\<forall>s.\n                                    (P \\<and>* F) s \\<longrightarrow>\n                                    pre C' (Q \\<and>* F) s);\n        \\<forall>s. P s \\<longrightarrow> pre (C1;; C2) Q s;\n        vc (C1;; C2) Q\\<rbrakk>\n       \\<Longrightarrow> \\<exists>C'.\n                            strip (C1;; C2) = strip C' \\<and>\n                            vc C' (Q \\<and>* F) \\<and>\n                            (\\<forall>s.\n                                (P \\<and>* F) s \\<longrightarrow>\n                                pre C' (Q \\<and>* F) s)\n 2. \\<And>x1 C1 C2 P Q.\n       \\<lbrakk>\\<And>P Q.\n                   \\<lbrakk>\\<forall>s. P s \\<longrightarrow> pre C1 Q s;\n                    vc C1 Q\\<rbrakk>\n                   \\<Longrightarrow> \\<exists>C'.\n  strip C1 = strip C' \\<and>\n  vc C' (Q \\<and>* F) \\<and>\n  (\\<forall>s. (P \\<and>* F) s \\<longrightarrow> pre C' (Q \\<and>* F) s);\n        \\<And>P Q.\n           \\<lbrakk>\\<forall>s. P s \\<longrightarrow> pre C2 Q s;\n            vc C2 Q\\<rbrakk>\n           \\<Longrightarrow> \\<exists>C'.\n                                strip C2 = strip C' \\<and>\n                                vc C' (Q \\<and>* F) \\<and>\n                                (\\<forall>s.\n                                    (P \\<and>* F) s \\<longrightarrow>\n                                    pre C' (Q \\<and>* F) s);\n        \\<forall>s. P s \\<longrightarrow> pre (IF x1 THEN C1 ELSE C2) Q s;\n        vc (IF x1 THEN C1 ELSE C2) Q\\<rbrakk>\n       \\<Longrightarrow> \\<exists>C'.\n                            strip (IF x1 THEN C1 ELSE C2) = strip C' \\<and>\n                            vc C' (Q \\<and>* F) \\<and>\n                            (\\<forall>s.\n                                (P \\<and>* F) s \\<longrightarrow>\n                                pre C' (Q \\<and>* F) s)\n 3. \\<And>x1 x2 C P Q.\n       \\<lbrakk>\\<And>P Q.\n                   \\<lbrakk>\\<forall>s. P s \\<longrightarrow> pre C Q s;\n                    vc C Q\\<rbrakk>\n                   \\<Longrightarrow> \\<exists>C'.\n  strip C = strip C' \\<and>\n  vc C' (Q \\<and>* F) \\<and>\n  (\\<forall>s. (P \\<and>* F) s \\<longrightarrow> pre C' (Q \\<and>* F) s);\n        \\<forall>s. P s \\<longrightarrow> pre ({x1} WHILE x2 DO C) Q s;\n        vc ({x1} WHILE x2 DO C) Q\\<rbrakk>\n       \\<Longrightarrow> \\<exists>C'.\n                            strip ({x1} WHILE x2 DO C) = strip C' \\<and>\n                            vc C' (Q \\<and>* F) \\<and>\n                            (\\<forall>s.\n                                (P \\<and>* F) s \\<longrightarrow>\n                                pre C' (Q \\<and>* F) s)", "from Aseq(4)"], ["proof (chain)\npicking this:\n  vc (C1;; C2) Q", "have vc1: \"vc C1 (pre C2 Q)\" and vc2: \"vc C2 Q\""], ["proof (prove)\nusing this:\n  vc (C1;; C2) Q\n\ngoal (1 subgoal):\n 1. vc C1 (pre C2 Q) &&& vc C2 Q", "by auto"], ["proof (state)\nthis:\n  vc C1 (pre C2 Q)\n  vc C2 Q\n\ngoal (3 subgoals):\n 1. \\<And>C1 C2 P Q.\n       \\<lbrakk>\\<And>P Q.\n                   \\<lbrakk>\\<forall>s. P s \\<longrightarrow> pre C1 Q s;\n                    vc C1 Q\\<rbrakk>\n                   \\<Longrightarrow> \\<exists>C'.\n  strip C1 = strip C' \\<and>\n  vc C' (Q \\<and>* F) \\<and>\n  (\\<forall>s. (P \\<and>* F) s \\<longrightarrow> pre C' (Q \\<and>* F) s);\n        \\<And>P Q.\n           \\<lbrakk>\\<forall>s. P s \\<longrightarrow> pre C2 Q s;\n            vc C2 Q\\<rbrakk>\n           \\<Longrightarrow> \\<exists>C'.\n                                strip C2 = strip C' \\<and>\n                                vc C' (Q \\<and>* F) \\<and>\n                                (\\<forall>s.\n                                    (P \\<and>* F) s \\<longrightarrow>\n                                    pre C' (Q \\<and>* F) s);\n        \\<forall>s. P s \\<longrightarrow> pre (C1;; C2) Q s;\n        vc (C1;; C2) Q\\<rbrakk>\n       \\<Longrightarrow> \\<exists>C'.\n                            strip (C1;; C2) = strip C' \\<and>\n                            vc C' (Q \\<and>* F) \\<and>\n                            (\\<forall>s.\n                                (P \\<and>* F) s \\<longrightarrow>\n                                pre C' (Q \\<and>* F) s)\n 2. \\<And>x1 C1 C2 P Q.\n       \\<lbrakk>\\<And>P Q.\n                   \\<lbrakk>\\<forall>s. P s \\<longrightarrow> pre C1 Q s;\n                    vc C1 Q\\<rbrakk>\n                   \\<Longrightarrow> \\<exists>C'.\n  strip C1 = strip C' \\<and>\n  vc C' (Q \\<and>* F) \\<and>\n  (\\<forall>s. (P \\<and>* F) s \\<longrightarrow> pre C' (Q \\<and>* F) s);\n        \\<And>P Q.\n           \\<lbrakk>\\<forall>s. P s \\<longrightarrow> pre C2 Q s;\n            vc C2 Q\\<rbrakk>\n           \\<Longrightarrow> \\<exists>C'.\n                                strip C2 = strip C' \\<and>\n                                vc C' (Q \\<and>* F) \\<and>\n                                (\\<forall>s.\n                                    (P \\<and>* F) s \\<longrightarrow>\n                                    pre C' (Q \\<and>* F) s);\n        \\<forall>s. P s \\<longrightarrow> pre (IF x1 THEN C1 ELSE C2) Q s;\n        vc (IF x1 THEN C1 ELSE C2) Q\\<rbrakk>\n       \\<Longrightarrow> \\<exists>C'.\n                            strip (IF x1 THEN C1 ELSE C2) = strip C' \\<and>\n                            vc C' (Q \\<and>* F) \\<and>\n                            (\\<forall>s.\n                                (P \\<and>* F) s \\<longrightarrow>\n                                pre C' (Q \\<and>* F) s)\n 3. \\<And>x1 x2 C P Q.\n       \\<lbrakk>\\<And>P Q.\n                   \\<lbrakk>\\<forall>s. P s \\<longrightarrow> pre C Q s;\n                    vc C Q\\<rbrakk>\n                   \\<Longrightarrow> \\<exists>C'.\n  strip C = strip C' \\<and>\n  vc C' (Q \\<and>* F) \\<and>\n  (\\<forall>s. (P \\<and>* F) s \\<longrightarrow> pre C' (Q \\<and>* F) s);\n        \\<forall>s. P s \\<longrightarrow> pre ({x1} WHILE x2 DO C) Q s;\n        vc ({x1} WHILE x2 DO C) Q\\<rbrakk>\n       \\<Longrightarrow> \\<exists>C'.\n                            strip ({x1} WHILE x2 DO C) = strip C' \\<and>\n                            vc C' (Q \\<and>* F) \\<and>\n                            (\\<forall>s.\n                                (P \\<and>* F) s \\<longrightarrow>\n                                pre C' (Q \\<and>* F) s)", "from Aseq(1)[OF pre vc1]"], ["proof (chain)\npicking this:\n  \\<exists>C'.\n     strip C1 = strip C' \\<and>\n     vc C' (pre C2 Q \\<and>* F) \\<and>\n     (\\<forall>s.\n         (P \\<and>* F) s \\<longrightarrow> pre C' (pre C2 Q \\<and>* F) s)", "obtain C1' where S1: \"strip C1 = strip C1'\"\n      and vc1': \"vc C1' (pre C2 Q \\<and>* F)\"\n      and I1: \"(\\<forall>s. (P \\<and>* F) s \\<longrightarrow> pre C1' (pre C2 Q \\<and>* F) s)\""], ["proof (prove)\nusing this:\n  \\<exists>C'.\n     strip C1 = strip C' \\<and>\n     vc C' (pre C2 Q \\<and>* F) \\<and>\n     (\\<forall>s.\n         (P \\<and>* F) s \\<longrightarrow> pre C' (pre C2 Q \\<and>* F) s)\n\ngoal (1 subgoal):\n 1. (\\<And>C1'.\n        \\<lbrakk>strip C1 = strip C1'; vc C1' (pre C2 Q \\<and>* F);\n         \\<forall>s.\n            (P \\<and>* F) s \\<longrightarrow>\n            pre C1' (pre C2 Q \\<and>* F) s\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by blast"], ["proof (state)\nthis:\n  strip C1 = strip C1'\n  vc C1' (pre C2 Q \\<and>* F)\n  \\<forall>s.\n     (P \\<and>* F) s \\<longrightarrow> pre C1' (pre C2 Q \\<and>* F) s\n\ngoal (3 subgoals):\n 1. \\<And>C1 C2 P Q.\n       \\<lbrakk>\\<And>P Q.\n                   \\<lbrakk>\\<forall>s. P s \\<longrightarrow> pre C1 Q s;\n                    vc C1 Q\\<rbrakk>\n                   \\<Longrightarrow> \\<exists>C'.\n  strip C1 = strip C' \\<and>\n  vc C' (Q \\<and>* F) \\<and>\n  (\\<forall>s. (P \\<and>* F) s \\<longrightarrow> pre C' (Q \\<and>* F) s);\n        \\<And>P Q.\n           \\<lbrakk>\\<forall>s. P s \\<longrightarrow> pre C2 Q s;\n            vc C2 Q\\<rbrakk>\n           \\<Longrightarrow> \\<exists>C'.\n                                strip C2 = strip C' \\<and>\n                                vc C' (Q \\<and>* F) \\<and>\n                                (\\<forall>s.\n                                    (P \\<and>* F) s \\<longrightarrow>\n                                    pre C' (Q \\<and>* F) s);\n        \\<forall>s. P s \\<longrightarrow> pre (C1;; C2) Q s;\n        vc (C1;; C2) Q\\<rbrakk>\n       \\<Longrightarrow> \\<exists>C'.\n                            strip (C1;; C2) = strip C' \\<and>\n                            vc C' (Q \\<and>* F) \\<and>\n                            (\\<forall>s.\n                                (P \\<and>* F) s \\<longrightarrow>\n                                pre C' (Q \\<and>* F) s)\n 2. \\<And>x1 C1 C2 P Q.\n       \\<lbrakk>\\<And>P Q.\n                   \\<lbrakk>\\<forall>s. P s \\<longrightarrow> pre C1 Q s;\n                    vc C1 Q\\<rbrakk>\n                   \\<Longrightarrow> \\<exists>C'.\n  strip C1 = strip C' \\<and>\n  vc C' (Q \\<and>* F) \\<and>\n  (\\<forall>s. (P \\<and>* F) s \\<longrightarrow> pre C' (Q \\<and>* F) s);\n        \\<And>P Q.\n           \\<lbrakk>\\<forall>s. P s \\<longrightarrow> pre C2 Q s;\n            vc C2 Q\\<rbrakk>\n           \\<Longrightarrow> \\<exists>C'.\n                                strip C2 = strip C' \\<and>\n                                vc C' (Q \\<and>* F) \\<and>\n                                (\\<forall>s.\n                                    (P \\<and>* F) s \\<longrightarrow>\n                                    pre C' (Q \\<and>* F) s);\n        \\<forall>s. P s \\<longrightarrow> pre (IF x1 THEN C1 ELSE C2) Q s;\n        vc (IF x1 THEN C1 ELSE C2) Q\\<rbrakk>\n       \\<Longrightarrow> \\<exists>C'.\n                            strip (IF x1 THEN C1 ELSE C2) = strip C' \\<and>\n                            vc C' (Q \\<and>* F) \\<and>\n                            (\\<forall>s.\n                                (P \\<and>* F) s \\<longrightarrow>\n                                pre C' (Q \\<and>* F) s)\n 3. \\<And>x1 x2 C P Q.\n       \\<lbrakk>\\<And>P Q.\n                   \\<lbrakk>\\<forall>s. P s \\<longrightarrow> pre C Q s;\n                    vc C Q\\<rbrakk>\n                   \\<Longrightarrow> \\<exists>C'.\n  strip C = strip C' \\<and>\n  vc C' (Q \\<and>* F) \\<and>\n  (\\<forall>s. (P \\<and>* F) s \\<longrightarrow> pre C' (Q \\<and>* F) s);\n        \\<forall>s. P s \\<longrightarrow> pre ({x1} WHILE x2 DO C) Q s;\n        vc ({x1} WHILE x2 DO C) Q\\<rbrakk>\n       \\<Longrightarrow> \\<exists>C'.\n                            strip ({x1} WHILE x2 DO C) = strip C' \\<and>\n                            vc C' (Q \\<and>* F) \\<and>\n                            (\\<forall>s.\n                                (P \\<and>* F) s \\<longrightarrow>\n                                pre C' (Q \\<and>* F) s)", "from Aseq(2)[of \"pre C2 Q\" Q, OF _ vc2]"], ["proof (chain)\npicking this:\n  \\<forall>s. pre C2 Q s \\<longrightarrow> pre C2 Q s \\<Longrightarrow>\n  \\<exists>C'.\n     strip C2 = strip C' \\<and>\n     vc C' (Q \\<and>* F) \\<and>\n     (\\<forall>s.\n         (pre C2 Q \\<and>* F) s \\<longrightarrow> pre C' (Q \\<and>* F) s)", "obtain C2' where S2: \"strip C2 = strip C2'\"\n      and vc2': \"vc C2' (Q \\<and>* F)\"\n      and I2: \"(\\<forall>s. (pre C2 Q \\<and>* F) s \\<longrightarrow> pre C2' (Q \\<and>* F) s) \""], ["proof (prove)\nusing this:\n  \\<forall>s. pre C2 Q s \\<longrightarrow> pre C2 Q s \\<Longrightarrow>\n  \\<exists>C'.\n     strip C2 = strip C' \\<and>\n     vc C' (Q \\<and>* F) \\<and>\n     (\\<forall>s.\n         (pre C2 Q \\<and>* F) s \\<longrightarrow> pre C' (Q \\<and>* F) s)\n\ngoal (1 subgoal):\n 1. (\\<And>C2'.\n        \\<lbrakk>strip C2 = strip C2'; vc C2' (Q \\<and>* F);\n         \\<forall>s.\n            (pre C2 Q \\<and>* F) s \\<longrightarrow>\n            pre C2' (Q \\<and>* F) s\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by blast"], ["proof (state)\nthis:\n  strip C2 = strip C2'\n  vc C2' (Q \\<and>* F)\n  \\<forall>s.\n     (pre C2 Q \\<and>* F) s \\<longrightarrow> pre C2' (Q \\<and>* F) s\n\ngoal (3 subgoals):\n 1. \\<And>C1 C2 P Q.\n       \\<lbrakk>\\<And>P Q.\n                   \\<lbrakk>\\<forall>s. P s \\<longrightarrow> pre C1 Q s;\n                    vc C1 Q\\<rbrakk>\n                   \\<Longrightarrow> \\<exists>C'.\n  strip C1 = strip C' \\<and>\n  vc C' (Q \\<and>* F) \\<and>\n  (\\<forall>s. (P \\<and>* F) s \\<longrightarrow> pre C' (Q \\<and>* F) s);\n        \\<And>P Q.\n           \\<lbrakk>\\<forall>s. P s \\<longrightarrow> pre C2 Q s;\n            vc C2 Q\\<rbrakk>\n           \\<Longrightarrow> \\<exists>C'.\n                                strip C2 = strip C' \\<and>\n                                vc C' (Q \\<and>* F) \\<and>\n                                (\\<forall>s.\n                                    (P \\<and>* F) s \\<longrightarrow>\n                                    pre C' (Q \\<and>* F) s);\n        \\<forall>s. P s \\<longrightarrow> pre (C1;; C2) Q s;\n        vc (C1;; C2) Q\\<rbrakk>\n       \\<Longrightarrow> \\<exists>C'.\n                            strip (C1;; C2) = strip C' \\<and>\n                            vc C' (Q \\<and>* F) \\<and>\n                            (\\<forall>s.\n                                (P \\<and>* F) s \\<longrightarrow>\n                                pre C' (Q \\<and>* F) s)\n 2. \\<And>x1 C1 C2 P Q.\n       \\<lbrakk>\\<And>P Q.\n                   \\<lbrakk>\\<forall>s. P s \\<longrightarrow> pre C1 Q s;\n                    vc C1 Q\\<rbrakk>\n                   \\<Longrightarrow> \\<exists>C'.\n  strip C1 = strip C' \\<and>\n  vc C' (Q \\<and>* F) \\<and>\n  (\\<forall>s. (P \\<and>* F) s \\<longrightarrow> pre C' (Q \\<and>* F) s);\n        \\<And>P Q.\n           \\<lbrakk>\\<forall>s. P s \\<longrightarrow> pre C2 Q s;\n            vc C2 Q\\<rbrakk>\n           \\<Longrightarrow> \\<exists>C'.\n                                strip C2 = strip C' \\<and>\n                                vc C' (Q \\<and>* F) \\<and>\n                                (\\<forall>s.\n                                    (P \\<and>* F) s \\<longrightarrow>\n                                    pre C' (Q \\<and>* F) s);\n        \\<forall>s. P s \\<longrightarrow> pre (IF x1 THEN C1 ELSE C2) Q s;\n        vc (IF x1 THEN C1 ELSE C2) Q\\<rbrakk>\n       \\<Longrightarrow> \\<exists>C'.\n                            strip (IF x1 THEN C1 ELSE C2) = strip C' \\<and>\n                            vc C' (Q \\<and>* F) \\<and>\n                            (\\<forall>s.\n                                (P \\<and>* F) s \\<longrightarrow>\n                                pre C' (Q \\<and>* F) s)\n 3. \\<And>x1 x2 C P Q.\n       \\<lbrakk>\\<And>P Q.\n                   \\<lbrakk>\\<forall>s. P s \\<longrightarrow> pre C Q s;\n                    vc C Q\\<rbrakk>\n                   \\<Longrightarrow> \\<exists>C'.\n  strip C = strip C' \\<and>\n  vc C' (Q \\<and>* F) \\<and>\n  (\\<forall>s. (P \\<and>* F) s \\<longrightarrow> pre C' (Q \\<and>* F) s);\n        \\<forall>s. P s \\<longrightarrow> pre ({x1} WHILE x2 DO C) Q s;\n        vc ({x1} WHILE x2 DO C) Q\\<rbrakk>\n       \\<Longrightarrow> \\<exists>C'.\n                            strip ({x1} WHILE x2 DO C) = strip C' \\<and>\n                            vc C' (Q \\<and>* F) \\<and>\n                            (\\<forall>s.\n                                (P \\<and>* F) s \\<longrightarrow>\n                                pre C' (Q \\<and>* F) s)", "show ?case"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>C'.\n       strip (C1;; C2) = strip C' \\<and>\n       vc C' (Q \\<and>* F) \\<and>\n       (\\<forall>s.\n           (P \\<and>* F) s \\<longrightarrow> pre C' (Q \\<and>* F) s)", "apply(rule exI[where x=\"Aseq C1' C2'\"])"], ["proof (prove)\ngoal (1 subgoal):\n 1. strip (C1;; C2) = strip (C1';; C2') \\<and>\n    vc (C1';; C2') (Q \\<and>* F) \\<and>\n    (\\<forall>s.\n        (P \\<and>* F) s \\<longrightarrow> pre (C1';; C2') (Q \\<and>* F) s)", "apply safe"], ["proof (prove)\ngoal (3 subgoals):\n 1. strip (C1;; C2) = strip (C1';; C2')\n 2. vc (C1';; C2') (Q \\<and>* F)\n 3. \\<And>a b.\n       (P \\<and>* F) (a, b) \\<Longrightarrow>\n       pre (C1';; C2') (Q \\<and>* F) (a, b)", "subgoal"], ["proof (prove)\ngoal (1 subgoal):\n 1. strip (C1;; C2) = strip (C1';; C2')", "using S1 S2"], ["proof (prove)\nusing this:\n  strip C1 = strip C1'\n  strip C2 = strip C2'\n\ngoal (1 subgoal):\n 1. strip (C1;; C2) = strip (C1';; C2')", "by auto"], ["proof (prove)\ngoal (2 subgoals):\n 1. vc (C1';; C2') (Q \\<and>* F)\n 2. \\<And>a b.\n       (P \\<and>* F) (a, b) \\<Longrightarrow>\n       pre (C1';; C2') (Q \\<and>* F) (a, b)", "subgoal"], ["proof (prove)\ngoal (1 subgoal):\n 1. vc (C1';; C2') (Q \\<and>* F)", "apply simp"], ["proof (prove)\ngoal (1 subgoal):\n 1. vc C1' (pre C2' (Q \\<and>* F)) \\<and> vc C2' (Q \\<and>* F)", "apply safe"], ["proof (prove)\ngoal (2 subgoals):\n 1. vc C1' (pre C2' (Q \\<and>* F))\n 2. vc C2' (Q \\<and>* F)", "subgoal"], ["proof (prove)\ngoal (1 subgoal):\n 1. vc C1' (pre C2' (Q \\<and>* F))", "using vc_mono[OF I2 vc1']"], ["proof (prove)\nusing this:\n  vc C1' (pre C2' (Q \\<and>* F))\n\ngoal (1 subgoal):\n 1. vc C1' (pre C2' (Q \\<and>* F))", "."], ["proof (prove)\ngoal (1 subgoal):\n 1. vc C2' (Q \\<and>* F)", "subgoal"], ["proof (prove)\ngoal (1 subgoal):\n 1. vc C2' (Q \\<and>* F)", "by (fact vc2')"], ["proof (prove)\ngoal:\nNo subgoals!", "done"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>a b.\n       (P \\<and>* F) (a, b) \\<Longrightarrow>\n       pre (C1';; C2') (Q \\<and>* F) (a, b)", "subgoal"], ["proof (prove)\ngoal (1 subgoal):\n 1. (P \\<and>* F) (a_, b_) \\<Longrightarrow>\n    pre (C1';; C2') (Q \\<and>* F) (a_, b_)", "using I1 I2 pre_mono"], ["proof (prove)\nusing this:\n  \\<forall>s.\n     (P \\<and>* F) s \\<longrightarrow> pre C1' (pre C2 Q \\<and>* F) s\n  \\<forall>s.\n     (pre C2 Q \\<and>* F) s \\<longrightarrow> pre C2' (Q \\<and>* F) s\n  \\<lbrakk>\\<forall>s. ?P s \\<longrightarrow> ?Q s; pre ?C ?P ?s\\<rbrakk>\n  \\<Longrightarrow> pre ?C ?Q ?s\n\ngoal (1 subgoal):\n 1. (P \\<and>* F) (a_, b_) \\<Longrightarrow>\n    pre (C1';; C2') (Q \\<and>* F) (a_, b_)", "by force"], ["proof (prove)\ngoal:\nNo subgoals!", "done"], ["proof (state)\nthis:\n  \\<exists>C'.\n     strip (C1;; C2) = strip C' \\<and>\n     vc C' (Q \\<and>* F) \\<and>\n     (\\<forall>s. (P \\<and>* F) s \\<longrightarrow> pre C' (Q \\<and>* F) s)\n\ngoal (2 subgoals):\n 1. \\<And>x1 C1 C2 P Q.\n       \\<lbrakk>\\<And>P Q.\n                   \\<lbrakk>\\<forall>s. P s \\<longrightarrow> pre C1 Q s;\n                    vc C1 Q\\<rbrakk>\n                   \\<Longrightarrow> \\<exists>C'.\n  strip C1 = strip C' \\<and>\n  vc C' (Q \\<and>* F) \\<and>\n  (\\<forall>s. (P \\<and>* F) s \\<longrightarrow> pre C' (Q \\<and>* F) s);\n        \\<And>P Q.\n           \\<lbrakk>\\<forall>s. P s \\<longrightarrow> pre C2 Q s;\n            vc C2 Q\\<rbrakk>\n           \\<Longrightarrow> \\<exists>C'.\n                                strip C2 = strip C' \\<and>\n                                vc C' (Q \\<and>* F) \\<and>\n                                (\\<forall>s.\n                                    (P \\<and>* F) s \\<longrightarrow>\n                                    pre C' (Q \\<and>* F) s);\n        \\<forall>s. P s \\<longrightarrow> pre (IF x1 THEN C1 ELSE C2) Q s;\n        vc (IF x1 THEN C1 ELSE C2) Q\\<rbrakk>\n       \\<Longrightarrow> \\<exists>C'.\n                            strip (IF x1 THEN C1 ELSE C2) = strip C' \\<and>\n                            vc C' (Q \\<and>* F) \\<and>\n                            (\\<forall>s.\n                                (P \\<and>* F) s \\<longrightarrow>\n                                pre C' (Q \\<and>* F) s)\n 2. \\<And>x1 x2 C P Q.\n       \\<lbrakk>\\<And>P Q.\n                   \\<lbrakk>\\<forall>s. P s \\<longrightarrow> pre C Q s;\n                    vc C Q\\<rbrakk>\n                   \\<Longrightarrow> \\<exists>C'.\n  strip C = strip C' \\<and>\n  vc C' (Q \\<and>* F) \\<and>\n  (\\<forall>s. (P \\<and>* F) s \\<longrightarrow> pre C' (Q \\<and>* F) s);\n        \\<forall>s. P s \\<longrightarrow> pre ({x1} WHILE x2 DO C) Q s;\n        vc ({x1} WHILE x2 DO C) Q\\<rbrakk>\n       \\<Longrightarrow> \\<exists>C'.\n                            strip ({x1} WHILE x2 DO C) = strip C' \\<and>\n                            vc C' (Q \\<and>* F) \\<and>\n                            (\\<forall>s.\n                                (P \\<and>* F) s \\<longrightarrow>\n                                pre C' (Q \\<and>* F) s)", "next"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>x1 C1 C2 P Q.\n       \\<lbrakk>\\<And>P Q.\n                   \\<lbrakk>\\<forall>s. P s \\<longrightarrow> pre C1 Q s;\n                    vc C1 Q\\<rbrakk>\n                   \\<Longrightarrow> \\<exists>C'.\n  strip C1 = strip C' \\<and>\n  vc C' (Q \\<and>* F) \\<and>\n  (\\<forall>s. (P \\<and>* F) s \\<longrightarrow> pre C' (Q \\<and>* F) s);\n        \\<And>P Q.\n           \\<lbrakk>\\<forall>s. P s \\<longrightarrow> pre C2 Q s;\n            vc C2 Q\\<rbrakk>\n           \\<Longrightarrow> \\<exists>C'.\n                                strip C2 = strip C' \\<and>\n                                vc C' (Q \\<and>* F) \\<and>\n                                (\\<forall>s.\n                                    (P \\<and>* F) s \\<longrightarrow>\n                                    pre C' (Q \\<and>* F) s);\n        \\<forall>s. P s \\<longrightarrow> pre (IF x1 THEN C1 ELSE C2) Q s;\n        vc (IF x1 THEN C1 ELSE C2) Q\\<rbrakk>\n       \\<Longrightarrow> \\<exists>C'.\n                            strip (IF x1 THEN C1 ELSE C2) = strip C' \\<and>\n                            vc C' (Q \\<and>* F) \\<and>\n                            (\\<forall>s.\n                                (P \\<and>* F) s \\<longrightarrow>\n                                pre C' (Q \\<and>* F) s)\n 2. \\<And>x1 x2 C P Q.\n       \\<lbrakk>\\<And>P Q.\n                   \\<lbrakk>\\<forall>s. P s \\<longrightarrow> pre C Q s;\n                    vc C Q\\<rbrakk>\n                   \\<Longrightarrow> \\<exists>C'.\n  strip C = strip C' \\<and>\n  vc C' (Q \\<and>* F) \\<and>\n  (\\<forall>s. (P \\<and>* F) s \\<longrightarrow> pre C' (Q \\<and>* F) s);\n        \\<forall>s. P s \\<longrightarrow> pre ({x1} WHILE x2 DO C) Q s;\n        vc ({x1} WHILE x2 DO C) Q\\<rbrakk>\n       \\<Longrightarrow> \\<exists>C'.\n                            strip ({x1} WHILE x2 DO C) = strip C' \\<and>\n                            vc C' (Q \\<and>* F) \\<and>\n                            (\\<forall>s.\n                                (P \\<and>* F) s \\<longrightarrow>\n                                pre C' (Q \\<and>* F) s)", "case (Aif b C1 C2)"], ["proof (state)\nthis:\n  \\<lbrakk>\\<forall>s. ?P s \\<longrightarrow> pre C1 ?Q s; vc C1 ?Q\\<rbrakk>\n  \\<Longrightarrow> \\<exists>C'.\n                       strip C1 = strip C' \\<and>\n                       vc C' (?Q \\<and>* F) \\<and>\n                       (\\<forall>s.\n                           (?P \\<and>* F) s \\<longrightarrow>\n                           pre C' (?Q \\<and>* F) s)\n  \\<lbrakk>\\<forall>s. ?P s \\<longrightarrow> pre C2 ?Q s; vc C2 ?Q\\<rbrakk>\n  \\<Longrightarrow> \\<exists>C'.\n                       strip C2 = strip C' \\<and>\n                       vc C' (?Q \\<and>* F) \\<and>\n                       (\\<forall>s.\n                           (?P \\<and>* F) s \\<longrightarrow>\n                           pre C' (?Q \\<and>* F) s)\n  \\<forall>s. P s \\<longrightarrow> pre (IF b THEN C1 ELSE C2) Q s\n  vc (IF b THEN C1 ELSE C2) Q\n\ngoal (2 subgoals):\n 1. \\<And>x1 C1 C2 P Q.\n       \\<lbrakk>\\<And>P Q.\n                   \\<lbrakk>\\<forall>s. P s \\<longrightarrow> pre C1 Q s;\n                    vc C1 Q\\<rbrakk>\n                   \\<Longrightarrow> \\<exists>C'.\n  strip C1 = strip C' \\<and>\n  vc C' (Q \\<and>* F) \\<and>\n  (\\<forall>s. (P \\<and>* F) s \\<longrightarrow> pre C' (Q \\<and>* F) s);\n        \\<And>P Q.\n           \\<lbrakk>\\<forall>s. P s \\<longrightarrow> pre C2 Q s;\n            vc C2 Q\\<rbrakk>\n           \\<Longrightarrow> \\<exists>C'.\n                                strip C2 = strip C' \\<and>\n                                vc C' (Q \\<and>* F) \\<and>\n                                (\\<forall>s.\n                                    (P \\<and>* F) s \\<longrightarrow>\n                                    pre C' (Q \\<and>* F) s);\n        \\<forall>s. P s \\<longrightarrow> pre (IF x1 THEN C1 ELSE C2) Q s;\n        vc (IF x1 THEN C1 ELSE C2) Q\\<rbrakk>\n       \\<Longrightarrow> \\<exists>C'.\n                            strip (IF x1 THEN C1 ELSE C2) = strip C' \\<and>\n                            vc C' (Q \\<and>* F) \\<and>\n                            (\\<forall>s.\n                                (P \\<and>* F) s \\<longrightarrow>\n                                pre C' (Q \\<and>* F) s)\n 2. \\<And>x1 x2 C P Q.\n       \\<lbrakk>\\<And>P Q.\n                   \\<lbrakk>\\<forall>s. P s \\<longrightarrow> pre C Q s;\n                    vc C Q\\<rbrakk>\n                   \\<Longrightarrow> \\<exists>C'.\n  strip C = strip C' \\<and>\n  vc C' (Q \\<and>* F) \\<and>\n  (\\<forall>s. (P \\<and>* F) s \\<longrightarrow> pre C' (Q \\<and>* F) s);\n        \\<forall>s. P s \\<longrightarrow> pre ({x1} WHILE x2 DO C) Q s;\n        vc ({x1} WHILE x2 DO C) Q\\<rbrakk>\n       \\<Longrightarrow> \\<exists>C'.\n                            strip ({x1} WHILE x2 DO C) = strip C' \\<and>\n                            vc C' (Q \\<and>* F) \\<and>\n                            (\\<forall>s.\n                                (P \\<and>* F) s \\<longrightarrow>\n                                pre C' (Q \\<and>* F) s)", "from Aif(3)"], ["proof (chain)\npicking this:\n  \\<forall>s. P s \\<longrightarrow> pre (IF b THEN C1 ELSE C2) Q s", "have i: \"\\<forall>s. P s \\<longrightarrow>\n          ($ (Suc 0) \\<and>*\n           (\\<lambda>(ps, n). vars b \\<subseteq> dom ps \\<and> (if pbval b ps then pre C1 Q (ps, n) else pre C2 Q (ps, n))))\n           s\""], ["proof (prove)\nusing this:\n  \\<forall>s. P s \\<longrightarrow> pre (IF b THEN C1 ELSE C2) Q s\n\ngoal (1 subgoal):\n 1. \\<forall>s.\n       P s \\<longrightarrow>\n       ($ (Suc 0) \\<and>*\n        (\\<lambda>(ps, n).\n            vars b \\<subseteq> dom ps \\<and>\n            (if pbval b ps then pre C1 Q (ps, n) else pre C2 Q (ps, n))))\n        s", "by simp"], ["proof (state)\nthis:\n  \\<forall>s.\n     P s \\<longrightarrow>\n     ($ (Suc 0) \\<and>*\n      (\\<lambda>(ps, n).\n          vars b \\<subseteq> dom ps \\<and>\n          (if pbval b ps then pre C1 Q (ps, n) else pre C2 Q (ps, n))))\n      s\n\ngoal (2 subgoals):\n 1. \\<And>x1 C1 C2 P Q.\n       \\<lbrakk>\\<And>P Q.\n                   \\<lbrakk>\\<forall>s. P s \\<longrightarrow> pre C1 Q s;\n                    vc C1 Q\\<rbrakk>\n                   \\<Longrightarrow> \\<exists>C'.\n  strip C1 = strip C' \\<and>\n  vc C' (Q \\<and>* F) \\<and>\n  (\\<forall>s. (P \\<and>* F) s \\<longrightarrow> pre C' (Q \\<and>* F) s);\n        \\<And>P Q.\n           \\<lbrakk>\\<forall>s. P s \\<longrightarrow> pre C2 Q s;\n            vc C2 Q\\<rbrakk>\n           \\<Longrightarrow> \\<exists>C'.\n                                strip C2 = strip C' \\<and>\n                                vc C' (Q \\<and>* F) \\<and>\n                                (\\<forall>s.\n                                    (P \\<and>* F) s \\<longrightarrow>\n                                    pre C' (Q \\<and>* F) s);\n        \\<forall>s. P s \\<longrightarrow> pre (IF x1 THEN C1 ELSE C2) Q s;\n        vc (IF x1 THEN C1 ELSE C2) Q\\<rbrakk>\n       \\<Longrightarrow> \\<exists>C'.\n                            strip (IF x1 THEN C1 ELSE C2) = strip C' \\<and>\n                            vc C' (Q \\<and>* F) \\<and>\n                            (\\<forall>s.\n                                (P \\<and>* F) s \\<longrightarrow>\n                                pre C' (Q \\<and>* F) s)\n 2. \\<And>x1 x2 C P Q.\n       \\<lbrakk>\\<And>P Q.\n                   \\<lbrakk>\\<forall>s. P s \\<longrightarrow> pre C Q s;\n                    vc C Q\\<rbrakk>\n                   \\<Longrightarrow> \\<exists>C'.\n  strip C = strip C' \\<and>\n  vc C' (Q \\<and>* F) \\<and>\n  (\\<forall>s. (P \\<and>* F) s \\<longrightarrow> pre C' (Q \\<and>* F) s);\n        \\<forall>s. P s \\<longrightarrow> pre ({x1} WHILE x2 DO C) Q s;\n        vc ({x1} WHILE x2 DO C) Q\\<rbrakk>\n       \\<Longrightarrow> \\<exists>C'.\n                            strip ({x1} WHILE x2 DO C) = strip C' \\<and>\n                            vc C' (Q \\<and>* F) \\<and>\n                            (\\<forall>s.\n                                (P \\<and>* F) s \\<longrightarrow>\n                                pre C' (Q \\<and>* F) s)", "from Aif(4)"], ["proof (chain)\npicking this:\n  vc (IF b THEN C1 ELSE C2) Q", "have vc1: \"vc C1 Q\" and vc2: \"vc C2 Q\""], ["proof (prove)\nusing this:\n  vc (IF b THEN C1 ELSE C2) Q\n\ngoal (1 subgoal):\n 1. vc C1 Q &&& vc C2 Q", "by auto"], ["proof (state)\nthis:\n  vc C1 Q\n  vc C2 Q\n\ngoal (2 subgoals):\n 1. \\<And>x1 C1 C2 P Q.\n       \\<lbrakk>\\<And>P Q.\n                   \\<lbrakk>\\<forall>s. P s \\<longrightarrow> pre C1 Q s;\n                    vc C1 Q\\<rbrakk>\n                   \\<Longrightarrow> \\<exists>C'.\n  strip C1 = strip C' \\<and>\n  vc C' (Q \\<and>* F) \\<and>\n  (\\<forall>s. (P \\<and>* F) s \\<longrightarrow> pre C' (Q \\<and>* F) s);\n        \\<And>P Q.\n           \\<lbrakk>\\<forall>s. P s \\<longrightarrow> pre C2 Q s;\n            vc C2 Q\\<rbrakk>\n           \\<Longrightarrow> \\<exists>C'.\n                                strip C2 = strip C' \\<and>\n                                vc C' (Q \\<and>* F) \\<and>\n                                (\\<forall>s.\n                                    (P \\<and>* F) s \\<longrightarrow>\n                                    pre C' (Q \\<and>* F) s);\n        \\<forall>s. P s \\<longrightarrow> pre (IF x1 THEN C1 ELSE C2) Q s;\n        vc (IF x1 THEN C1 ELSE C2) Q\\<rbrakk>\n       \\<Longrightarrow> \\<exists>C'.\n                            strip (IF x1 THEN C1 ELSE C2) = strip C' \\<and>\n                            vc C' (Q \\<and>* F) \\<and>\n                            (\\<forall>s.\n                                (P \\<and>* F) s \\<longrightarrow>\n                                pre C' (Q \\<and>* F) s)\n 2. \\<And>x1 x2 C P Q.\n       \\<lbrakk>\\<And>P Q.\n                   \\<lbrakk>\\<forall>s. P s \\<longrightarrow> pre C Q s;\n                    vc C Q\\<rbrakk>\n                   \\<Longrightarrow> \\<exists>C'.\n  strip C = strip C' \\<and>\n  vc C' (Q \\<and>* F) \\<and>\n  (\\<forall>s. (P \\<and>* F) s \\<longrightarrow> pre C' (Q \\<and>* F) s);\n        \\<forall>s. P s \\<longrightarrow> pre ({x1} WHILE x2 DO C) Q s;\n        vc ({x1} WHILE x2 DO C) Q\\<rbrakk>\n       \\<Longrightarrow> \\<exists>C'.\n                            strip ({x1} WHILE x2 DO C) = strip C' \\<and>\n                            vc C' (Q \\<and>* F) \\<and>\n                            (\\<forall>s.\n                                (P \\<and>* F) s \\<longrightarrow>\n                                pre C' (Q \\<and>* F) s)", "from Aif(1)[where P=\"pre C1 Q\" and Q=\"Q\", OF _ vc1]"], ["proof (chain)\npicking this:\n  \\<forall>s. pre C1 Q s \\<longrightarrow> pre C1 Q s \\<Longrightarrow>\n  \\<exists>C'.\n     strip C1 = strip C' \\<and>\n     vc C' (Q \\<and>* F) \\<and>\n     (\\<forall>s.\n         (pre C1 Q \\<and>* F) s \\<longrightarrow> pre C' (Q \\<and>* F) s)", "obtain C1' where\n    s1: \"strip C1 = strip C1'\" and v1: \"vc C1' (Q \\<and>* F)\"\n    and p1: \"(\\<forall>s. (pre C1 Q \\<and>* F) s \\<longrightarrow> pre C1' (Q \\<and>* F) s)\""], ["proof (prove)\nusing this:\n  \\<forall>s. pre C1 Q s \\<longrightarrow> pre C1 Q s \\<Longrightarrow>\n  \\<exists>C'.\n     strip C1 = strip C' \\<and>\n     vc C' (Q \\<and>* F) \\<and>\n     (\\<forall>s.\n         (pre C1 Q \\<and>* F) s \\<longrightarrow> pre C' (Q \\<and>* F) s)\n\ngoal (1 subgoal):\n 1. (\\<And>C1'.\n        \\<lbrakk>strip C1 = strip C1'; vc C1' (Q \\<and>* F);\n         \\<forall>s.\n            (pre C1 Q \\<and>* F) s \\<longrightarrow>\n            pre C1' (Q \\<and>* F) s\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  strip C1 = strip C1'\n  vc C1' (Q \\<and>* F)\n  \\<forall>s.\n     (pre C1 Q \\<and>* F) s \\<longrightarrow> pre C1' (Q \\<and>* F) s\n\ngoal (2 subgoals):\n 1. \\<And>x1 C1 C2 P Q.\n       \\<lbrakk>\\<And>P Q.\n                   \\<lbrakk>\\<forall>s. P s \\<longrightarrow> pre C1 Q s;\n                    vc C1 Q\\<rbrakk>\n                   \\<Longrightarrow> \\<exists>C'.\n  strip C1 = strip C' \\<and>\n  vc C' (Q \\<and>* F) \\<and>\n  (\\<forall>s. (P \\<and>* F) s \\<longrightarrow> pre C' (Q \\<and>* F) s);\n        \\<And>P Q.\n           \\<lbrakk>\\<forall>s. P s \\<longrightarrow> pre C2 Q s;\n            vc C2 Q\\<rbrakk>\n           \\<Longrightarrow> \\<exists>C'.\n                                strip C2 = strip C' \\<and>\n                                vc C' (Q \\<and>* F) \\<and>\n                                (\\<forall>s.\n                                    (P \\<and>* F) s \\<longrightarrow>\n                                    pre C' (Q \\<and>* F) s);\n        \\<forall>s. P s \\<longrightarrow> pre (IF x1 THEN C1 ELSE C2) Q s;\n        vc (IF x1 THEN C1 ELSE C2) Q\\<rbrakk>\n       \\<Longrightarrow> \\<exists>C'.\n                            strip (IF x1 THEN C1 ELSE C2) = strip C' \\<and>\n                            vc C' (Q \\<and>* F) \\<and>\n                            (\\<forall>s.\n                                (P \\<and>* F) s \\<longrightarrow>\n                                pre C' (Q \\<and>* F) s)\n 2. \\<And>x1 x2 C P Q.\n       \\<lbrakk>\\<And>P Q.\n                   \\<lbrakk>\\<forall>s. P s \\<longrightarrow> pre C Q s;\n                    vc C Q\\<rbrakk>\n                   \\<Longrightarrow> \\<exists>C'.\n  strip C = strip C' \\<and>\n  vc C' (Q \\<and>* F) \\<and>\n  (\\<forall>s. (P \\<and>* F) s \\<longrightarrow> pre C' (Q \\<and>* F) s);\n        \\<forall>s. P s \\<longrightarrow> pre ({x1} WHILE x2 DO C) Q s;\n        vc ({x1} WHILE x2 DO C) Q\\<rbrakk>\n       \\<Longrightarrow> \\<exists>C'.\n                            strip ({x1} WHILE x2 DO C) = strip C' \\<and>\n                            vc C' (Q \\<and>* F) \\<and>\n                            (\\<forall>s.\n                                (P \\<and>* F) s \\<longrightarrow>\n                                pre C' (Q \\<and>* F) s)", "from Aif(2)[where P=\"pre C2 Q\" and Q=\"Q\", OF _ vc2]"], ["proof (chain)\npicking this:\n  \\<forall>s. pre C2 Q s \\<longrightarrow> pre C2 Q s \\<Longrightarrow>\n  \\<exists>C'.\n     strip C2 = strip C' \\<and>\n     vc C' (Q \\<and>* F) \\<and>\n     (\\<forall>s.\n         (pre C2 Q \\<and>* F) s \\<longrightarrow> pre C' (Q \\<and>* F) s)", "obtain C2' where\n    s2: \"strip C2 = strip C2'\" and v2: \"vc C2' (Q \\<and>* F)\" \n    and p2: \"(\\<forall>s. (pre C2 Q \\<and>* F) s \\<longrightarrow> pre C2' (Q \\<and>* F) s)\""], ["proof (prove)\nusing this:\n  \\<forall>s. pre C2 Q s \\<longrightarrow> pre C2 Q s \\<Longrightarrow>\n  \\<exists>C'.\n     strip C2 = strip C' \\<and>\n     vc C' (Q \\<and>* F) \\<and>\n     (\\<forall>s.\n         (pre C2 Q \\<and>* F) s \\<longrightarrow> pre C' (Q \\<and>* F) s)\n\ngoal (1 subgoal):\n 1. (\\<And>C2'.\n        \\<lbrakk>strip C2 = strip C2'; vc C2' (Q \\<and>* F);\n         \\<forall>s.\n            (pre C2 Q \\<and>* F) s \\<longrightarrow>\n            pre C2' (Q \\<and>* F) s\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  strip C2 = strip C2'\n  vc C2' (Q \\<and>* F)\n  \\<forall>s.\n     (pre C2 Q \\<and>* F) s \\<longrightarrow> pre C2' (Q \\<and>* F) s\n\ngoal (2 subgoals):\n 1. \\<And>x1 C1 C2 P Q.\n       \\<lbrakk>\\<And>P Q.\n                   \\<lbrakk>\\<forall>s. P s \\<longrightarrow> pre C1 Q s;\n                    vc C1 Q\\<rbrakk>\n                   \\<Longrightarrow> \\<exists>C'.\n  strip C1 = strip C' \\<and>\n  vc C' (Q \\<and>* F) \\<and>\n  (\\<forall>s. (P \\<and>* F) s \\<longrightarrow> pre C' (Q \\<and>* F) s);\n        \\<And>P Q.\n           \\<lbrakk>\\<forall>s. P s \\<longrightarrow> pre C2 Q s;\n            vc C2 Q\\<rbrakk>\n           \\<Longrightarrow> \\<exists>C'.\n                                strip C2 = strip C' \\<and>\n                                vc C' (Q \\<and>* F) \\<and>\n                                (\\<forall>s.\n                                    (P \\<and>* F) s \\<longrightarrow>\n                                    pre C' (Q \\<and>* F) s);\n        \\<forall>s. P s \\<longrightarrow> pre (IF x1 THEN C1 ELSE C2) Q s;\n        vc (IF x1 THEN C1 ELSE C2) Q\\<rbrakk>\n       \\<Longrightarrow> \\<exists>C'.\n                            strip (IF x1 THEN C1 ELSE C2) = strip C' \\<and>\n                            vc C' (Q \\<and>* F) \\<and>\n                            (\\<forall>s.\n                                (P \\<and>* F) s \\<longrightarrow>\n                                pre C' (Q \\<and>* F) s)\n 2. \\<And>x1 x2 C P Q.\n       \\<lbrakk>\\<And>P Q.\n                   \\<lbrakk>\\<forall>s. P s \\<longrightarrow> pre C Q s;\n                    vc C Q\\<rbrakk>\n                   \\<Longrightarrow> \\<exists>C'.\n  strip C = strip C' \\<and>\n  vc C' (Q \\<and>* F) \\<and>\n  (\\<forall>s. (P \\<and>* F) s \\<longrightarrow> pre C' (Q \\<and>* F) s);\n        \\<forall>s. P s \\<longrightarrow> pre ({x1} WHILE x2 DO C) Q s;\n        vc ({x1} WHILE x2 DO C) Q\\<rbrakk>\n       \\<Longrightarrow> \\<exists>C'.\n                            strip ({x1} WHILE x2 DO C) = strip C' \\<and>\n                            vc C' (Q \\<and>* F) \\<and>\n                            (\\<forall>s.\n                                (P \\<and>* F) s \\<longrightarrow>\n                                pre C' (Q \\<and>* F) s)", "show ?case"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>C'.\n       strip (IF b THEN C1 ELSE C2) = strip C' \\<and>\n       vc C' (Q \\<and>* F) \\<and>\n       (\\<forall>s.\n           (P \\<and>* F) s \\<longrightarrow> pre C' (Q \\<and>* F) s)", "apply(rule exI[where x=\"Aif b C1' C2'\"])"], ["proof (prove)\ngoal (1 subgoal):\n 1. strip (IF b THEN C1 ELSE C2) = strip (IF b THEN C1' ELSE C2') \\<and>\n    vc (IF b THEN C1' ELSE C2') (Q \\<and>* F) \\<and>\n    (\\<forall>s.\n        (P \\<and>* F) s \\<longrightarrow>\n        pre (IF b THEN C1' ELSE C2') (Q \\<and>* F) s)", "proof safe"], ["proof (state)\ngoal (3 subgoals):\n 1. strip (IF b THEN C1 ELSE C2) = strip (IF b THEN C1' ELSE C2')\n 2. vc (IF b THEN C1' ELSE C2') (Q \\<and>* F)\n 3. \\<And>a ba.\n       (P \\<and>* F) (a, ba) \\<Longrightarrow>\n       pre (IF b THEN C1' ELSE C2') (Q \\<and>* F) (a, ba)", "fix ps n"], ["proof (state)\ngoal (3 subgoals):\n 1. strip (IF b THEN C1 ELSE C2) = strip (IF b THEN C1' ELSE C2')\n 2. vc (IF b THEN C1' ELSE C2') (Q \\<and>* F)\n 3. \\<And>a ba.\n       (P \\<and>* F) (a, ba) \\<Longrightarrow>\n       pre (IF b THEN C1' ELSE C2') (Q \\<and>* F) (a, ba)", "assume \"(P \\<and>* F) (ps, n)\""], ["proof (state)\nthis:\n  (P \\<and>* F) (ps, n)\n\ngoal (3 subgoals):\n 1. strip (IF b THEN C1 ELSE C2) = strip (IF b THEN C1' ELSE C2')\n 2. vc (IF b THEN C1' ELSE C2') (Q \\<and>* F)\n 3. \\<And>a ba.\n       (P \\<and>* F) (a, ba) \\<Longrightarrow>\n       pre (IF b THEN C1' ELSE C2') (Q \\<and>* F) (a, ba)", "then"], ["proof (chain)\npicking this:\n  (P \\<and>* F) (ps, n)", "obtain ps1 ps2 n1 n2 where o: \"ps1##ps2\" \"ps=ps1+ps2\" \"n=n1+n2\"\n      and P: \"P (ps1,n1)\" and F: \"F (ps2,n2)\""], ["proof (prove)\nusing this:\n  (P \\<and>* F) (ps, n)\n\ngoal (1 subgoal):\n 1. (\\<And>ps1 ps2 n1 n2.\n        \\<lbrakk>ps1 ## ps2; ps = ps1 + ps2; n = n1 + n2; P (ps1, n1);\n         F (ps2, n2)\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "unfolding sep_conj_def"], ["proof (prove)\nusing this:\n  \\<exists>x y. x ## y \\<and> (ps, n) = x + y \\<and> P x \\<and> F y\n\ngoal (1 subgoal):\n 1. (\\<And>ps1 ps2 n1 n2.\n        \\<lbrakk>ps1 ## ps2; ps = ps1 + ps2; n = n1 + n2; P (ps1, n1);\n         F (ps2, n2)\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  ps1 ## ps2\n  ps = ps1 + ps2\n  n = n1 + n2\n  P (ps1, n1)\n  F (ps2, n2)\n\ngoal (3 subgoals):\n 1. strip (IF b THEN C1 ELSE C2) = strip (IF b THEN C1' ELSE C2')\n 2. vc (IF b THEN C1' ELSE C2') (Q \\<and>* F)\n 3. \\<And>a ba.\n       (P \\<and>* F) (a, ba) \\<Longrightarrow>\n       pre (IF b THEN C1' ELSE C2') (Q \\<and>* F) (a, ba)", "from P i"], ["proof (chain)\npicking this:\n  P (ps1, n1)\n  \\<forall>s.\n     P s \\<longrightarrow>\n     ($ (Suc 0) \\<and>*\n      (\\<lambda>(ps, n).\n          vars b \\<subseteq> dom ps \\<and>\n          (if pbval b ps then pre C1 Q (ps, n) else pre C2 Q (ps, n))))\n      s", "have P': \"($ (Suc 0) \\<and>*\n         (\\<lambda>(ps, n). vars b \\<subseteq> dom ps \\<and> (if pbval b ps then pre C1 Q (ps, n) else pre C2 Q (ps, n))))\n         (ps1,n1)\""], ["proof (prove)\nusing this:\n  P (ps1, n1)\n  \\<forall>s.\n     P s \\<longrightarrow>\n     ($ (Suc 0) \\<and>*\n      (\\<lambda>(ps, n).\n          vars b \\<subseteq> dom ps \\<and>\n          (if pbval b ps then pre C1 Q (ps, n) else pre C2 Q (ps, n))))\n      s\n\ngoal (1 subgoal):\n 1. ($ (Suc 0) \\<and>*\n     (\\<lambda>(ps, n).\n         vars b \\<subseteq> dom ps \\<and>\n         (if pbval b ps then pre C1 Q (ps, n) else pre C2 Q (ps, n))))\n     (ps1, n1)", "by auto"], ["proof (state)\nthis:\n  ($ (Suc 0) \\<and>*\n   (\\<lambda>(ps, n).\n       vars b \\<subseteq> dom ps \\<and>\n       (if pbval b ps then pre C1 Q (ps, n) else pre C2 Q (ps, n))))\n   (ps1, n1)\n\ngoal (3 subgoals):\n 1. strip (IF b THEN C1 ELSE C2) = strip (IF b THEN C1' ELSE C2')\n 2. vc (IF b THEN C1' ELSE C2') (Q \\<and>* F)\n 3. \\<And>a ba.\n       (P \\<and>* F) (a, ba) \\<Longrightarrow>\n       pre (IF b THEN C1' ELSE C2') (Q \\<and>* F) (a, ba)", "have PF: \"(($ (Suc 0) \\<and>*\n         (\\<lambda>(ps, n). vars b \\<subseteq> dom ps \\<and> (if pbval b ps then pre C1 Q (ps, n) else pre C2 Q (ps, n)))) ** F)\n         (ps,n)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (($ (Suc 0) \\<and>*\n      (\\<lambda>(ps, n).\n          vars b \\<subseteq> dom ps \\<and>\n          (if pbval b ps then pre C1 Q (ps, n)\n           else pre C2 Q (ps, n)))) \\<and>*\n     F)\n     (ps, n)", "apply(subst (2) sep_conj_def)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>x y.\n       x ## y \\<and>\n       (ps, n) = x + y \\<and>\n       ($ (Suc 0) \\<and>*\n        (\\<lambda>(ps, n).\n            vars b \\<subseteq> dom ps \\<and>\n            (if pbval b ps then pre C1 Q (ps, n) else pre C2 Q (ps, n))))\n        x \\<and>\n       F y", "apply(rule exI[where x=\"(ps1,n1)\"])"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>y.\n       (ps1, n1) ## y \\<and>\n       (ps, n) = (ps1, n1) + y \\<and>\n       ($ (Suc 0) \\<and>*\n        (\\<lambda>(ps, n).\n            vars b \\<subseteq> dom ps \\<and>\n            (if pbval b ps then pre C1 Q (ps, n) else pre C2 Q (ps, n))))\n        (ps1, n1) \\<and>\n       F y", "apply(rule exI[where x=\"(ps2,n2)\"])"], ["proof (prove)\ngoal (1 subgoal):\n 1. (ps1, n1) ## (ps2, n2) \\<and>\n    (ps, n) = (ps1, n1) + (ps2, n2) \\<and>\n    ($ (Suc 0) \\<and>*\n     (\\<lambda>(ps, n).\n         vars b \\<subseteq> dom ps \\<and>\n         (if pbval b ps then pre C1 Q (ps, n) else pre C2 Q (ps, n))))\n     (ps1, n1) \\<and>\n    F (ps2, n2)", "using F P' o"], ["proof (prove)\nusing this:\n  F (ps2, n2)\n  ($ (Suc 0) \\<and>*\n   (\\<lambda>(ps, n).\n       vars b \\<subseteq> dom ps \\<and>\n       (if pbval b ps then pre C1 Q (ps, n) else pre C2 Q (ps, n))))\n   (ps1, n1)\n  ps1 ## ps2\n  ps = ps1 + ps2\n  n = n1 + n2\n\ngoal (1 subgoal):\n 1. (ps1, n1) ## (ps2, n2) \\<and>\n    (ps, n) = (ps1, n1) + (ps2, n2) \\<and>\n    ($ (Suc 0) \\<and>*\n     (\\<lambda>(ps, n).\n         vars b \\<subseteq> dom ps \\<and>\n         (if pbval b ps then pre C1 Q (ps, n) else pre C2 Q (ps, n))))\n     (ps1, n1) \\<and>\n    F (ps2, n2)", "by auto"], ["proof (state)\nthis:\n  (($ (Suc 0) \\<and>*\n    (\\<lambda>(ps, n).\n        vars b \\<subseteq> dom ps \\<and>\n        (if pbval b ps then pre C1 Q (ps, n)\n         else pre C2 Q (ps, n)))) \\<and>*\n   F)\n   (ps, n)\n\ngoal (3 subgoals):\n 1. strip (IF b THEN C1 ELSE C2) = strip (IF b THEN C1' ELSE C2')\n 2. vc (IF b THEN C1' ELSE C2') (Q \\<and>* F)\n 3. \\<And>a ba.\n       (P \\<and>* F) (a, ba) \\<Longrightarrow>\n       pre (IF b THEN C1' ELSE C2') (Q \\<and>* F) (a, ba)", "from this[simplified sep_conj_assoc]"], ["proof (chain)\npicking this:\n  ($ (Suc 0) \\<and>*\n   (\\<lambda>(ps, n).\n       vars b \\<subseteq> dom ps \\<and>\n       (if pbval b ps then pre C1 Q (ps, n) else pre C2 Q (ps, n))) \\<and>*\n   F)\n   (ps, n)", "obtain ps1 ps2 n1 n2 where o: \"ps1##ps2\" \"ps=ps1+ps2\" \"n=n1+n2\"\n      and P: \"($ (Suc 0)) (ps1,n1)\" and F: \"((\\<lambda>(ps, n). vars b \\<subseteq> dom ps \\<and> (if pbval b ps then pre C1 Q (ps, n) else pre C2 Q (ps, n))) \\<and>* F) (ps2,n2)\""], ["proof (prove)\nusing this:\n  ($ (Suc 0) \\<and>*\n   (\\<lambda>(ps, n).\n       vars b \\<subseteq> dom ps \\<and>\n       (if pbval b ps then pre C1 Q (ps, n) else pre C2 Q (ps, n))) \\<and>*\n   F)\n   (ps, n)\n\ngoal (1 subgoal):\n 1. (\\<And>ps1 ps2 n1 n2.\n        \\<lbrakk>ps1 ## ps2; ps = ps1 + ps2; n = n1 + n2;\n         $ (Suc 0) (ps1, n1);\n         ((\\<lambda>(ps, n).\n              vars b \\<subseteq> dom ps \\<and>\n              (if pbval b ps then pre C1 Q (ps, n)\n               else pre C2 Q (ps, n))) \\<and>*\n          F)\n          (ps2, n2)\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "unfolding sep_conj_def"], ["proof (prove)\nusing this:\n  \\<exists>x y.\n     x ## y \\<and>\n     (ps, n) = x + y \\<and>\n     $ (Suc 0) x \\<and>\n     (\\<exists>x ya.\n         x ## ya \\<and>\n         y = x + ya \\<and>\n         (case x of\n          (ps, n) \\<Rightarrow>\n            vars b \\<subseteq> dom ps \\<and>\n            (if pbval b ps then pre C1 Q (ps, n)\n             else pre C2 Q (ps, n))) \\<and>\n         F ya)\n\ngoal (1 subgoal):\n 1. (\\<And>ps1 ps2 n1 n2.\n        \\<lbrakk>ps1 ## ps2; ps = ps1 + ps2; n = n1 + n2;\n         $ (Suc 0) (ps1, n1);\n         \\<exists>x y.\n            x ## y \\<and>\n            (ps2, n2) = x + y \\<and>\n            (case x of\n             (ps, n) \\<Rightarrow>\n               vars b \\<subseteq> dom ps \\<and>\n               (if pbval b ps then pre C1 Q (ps, n)\n                else pre C2 Q (ps, n))) \\<and>\n            F y\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "apply auto"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>a ba ab bb ac bc.\n       \\<lbrakk>\\<And>ps1 ps2 n1 n2.\n                   \\<lbrakk>ps1 ## ps2; a + (ab + ac) = ps1 + ps2;\n                    ba + (bb + bc) = n1 + n2; $ (Suc 0) (ps1, n1);\n                    \\<exists>a ba aa.\n                       a ## aa \\<and>\n                       ps2 = a + aa \\<and>\n                       (\\<exists>bb.\n                           n2 = ba + bb \\<and>\n                           vars b \\<subseteq> dom a \\<and>\n                           (if pbval b a then pre C1 Q (a, ba)\n                            else pre C2 Q (a, ba)) \\<and>\n                           F (aa, bb))\\<rbrakk>\n                   \\<Longrightarrow> thesis;\n        a ## ab + ac; ps = a + (ab + ac); n = ba + (bb + bc);\n        $ (Suc 0) (a, ba); ab ## ac; vars b \\<subseteq> dom ab;\n        if pbval b ab then pre C1 Q (ab, bb) else pre C2 Q (ab, bb);\n        F (ac, bc)\\<rbrakk>\n       \\<Longrightarrow> thesis", "by fast"], ["proof (state)\nthis:\n  ps1 ## ps2\n  ps = ps1 + ps2\n  n = n1 + n2\n  $ (Suc 0) (ps1, n1)\n  ((\\<lambda>(ps, n).\n       vars b \\<subseteq> dom ps \\<and>\n       (if pbval b ps then pre C1 Q (ps, n) else pre C2 Q (ps, n))) \\<and>*\n   F)\n   (ps2, n2)\n\ngoal (3 subgoals):\n 1. strip (IF b THEN C1 ELSE C2) = strip (IF b THEN C1' ELSE C2')\n 2. vc (IF b THEN C1' ELSE C2') (Q \\<and>* F)\n 3. \\<And>a ba.\n       (P \\<and>* F) (a, ba) \\<Longrightarrow>\n       pre (IF b THEN C1' ELSE C2') (Q \\<and>* F) (a, ba)", "then"], ["proof (chain)\npicking this:\n  ps1 ## ps2\n  ps = ps1 + ps2\n  n = n1 + n2\n  $ (Suc 0) (ps1, n1)\n  ((\\<lambda>(ps, n).\n       vars b \\<subseteq> dom ps \\<and>\n       (if pbval b ps then pre C1 Q (ps, n) else pre C2 Q (ps, n))) \\<and>*\n   F)\n   (ps2, n2)", "have \"((\\<lambda>(ps, n). vars b \\<subseteq> dom ps \\<and> (if pbval b ps then (pre C1 Q  \\<and>* F) (ps, n) else (pre C2 Q  \\<and>* F) (ps, n)))) (ps2,n2)\""], ["proof (prove)\nusing this:\n  ps1 ## ps2\n  ps = ps1 + ps2\n  n = n1 + n2\n  $ (Suc 0) (ps1, n1)\n  ((\\<lambda>(ps, n).\n       vars b \\<subseteq> dom ps \\<and>\n       (if pbval b ps then pre C1 Q (ps, n) else pre C2 Q (ps, n))) \\<and>*\n   F)\n   (ps2, n2)\n\ngoal (1 subgoal):\n 1. case (ps2, n2) of\n    (ps, n) \\<Rightarrow>\n      vars b \\<subseteq> dom ps \\<and>\n      (if pbval b ps then (pre C1 Q \\<and>* F) (ps, n)\n       else (pre C2 Q \\<and>* F) (ps, n))", "unfolding sep_conj_def"], ["proof (prove)\nusing this:\n  ps1 ## ps2\n  ps = ps1 + ps2\n  n = n1 + n2\n  $ (Suc 0) (ps1, n1)\n  \\<exists>x y.\n     x ## y \\<and>\n     (ps2, n2) = x + y \\<and>\n     (case x of\n      (ps, n) \\<Rightarrow>\n        vars b \\<subseteq> dom ps \\<and>\n        (if pbval b ps then pre C1 Q (ps, n) else pre C2 Q (ps, n))) \\<and>\n     F y\n\ngoal (1 subgoal):\n 1. case (ps2, n2) of\n    (ps, n) \\<Rightarrow>\n      vars b \\<subseteq> dom ps \\<and>\n      (if pbval b ps\n       then \\<exists>x y.\n               x ## y \\<and> (ps, n) = x + y \\<and> pre C1 Q x \\<and> F y\n       else \\<exists>x y.\n               x ## y \\<and> (ps, n) = x + y \\<and> pre C2 Q x \\<and> F y)", "apply auto"], ["proof (prove)\ngoal (4 subgoals):\n 1. \\<And>a ba aa baa x.\n       \\<lbrakk>ps1 ## a + aa; ps = ps1 + (a + aa); n = n1 + (ba + baa);\n        $ (Suc 0) (ps1, n1); a ## aa; ps2 = a + aa; n2 = ba + baa;\n        vars b \\<subseteq> dom a;\n        if pbval b a then pre C1 Q (a, ba) else pre C2 Q (a, ba);\n        F (aa, baa); pbval b (a + aa); x \\<in> vars b\\<rbrakk>\n       \\<Longrightarrow> \\<exists>y. (a + aa) x = Some y\n 2. \\<And>a ba aa baa.\n       \\<lbrakk>ps1 ## a + aa; ps = ps1 + (a + aa); n = n1 + (ba + baa);\n        $ (Suc 0) (ps1, n1); a ## aa; ps2 = a + aa; n2 = ba + baa;\n        vars b \\<subseteq> dom a;\n        if pbval b a then pre C1 Q (a, ba) else pre C2 Q (a, ba);\n        F (aa, baa); pbval b (a + aa)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>ab b ac.\n                            ab ## ac \\<and>\n                            a + aa = ab + ac \\<and>\n                            (\\<exists>bb.\n                                ba + baa = b + bb \\<and>\n                                pre C1 Q (ab, b) \\<and> F (ac, bb))\n 3. \\<And>a ba aa baa x.\n       \\<lbrakk>ps1 ## a + aa; ps = ps1 + (a + aa); n = n1 + (ba + baa);\n        $ (Suc 0) (ps1, n1); a ## aa; ps2 = a + aa; n2 = ba + baa;\n        vars b \\<subseteq> dom a;\n        if pbval b a then pre C1 Q (a, ba) else pre C2 Q (a, ba);\n        F (aa, baa); \\<not> pbval b (a + aa); x \\<in> vars b\\<rbrakk>\n       \\<Longrightarrow> \\<exists>y. (a + aa) x = Some y\n 4. \\<And>a ba aa baa.\n       \\<lbrakk>ps1 ## a + aa; ps = ps1 + (a + aa); n = n1 + (ba + baa);\n        $ (Suc 0) (ps1, n1); a ## aa; ps2 = a + aa; n2 = ba + baa;\n        vars b \\<subseteq> dom a;\n        if pbval b a then pre C1 Q (a, ba) else pre C2 Q (a, ba);\n        F (aa, baa); \\<not> pbval b (a + aa)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>ab b ac.\n                            ab ## ac \\<and>\n                            a + aa = ab + ac \\<and>\n                            (\\<exists>bb.\n                                ba + baa = b + bb \\<and>\n                                pre C2 Q (ab, b) \\<and> F (ac, bb))", "apply (metis contra_subsetD domD map_add_dom_app_simps(1) plus_fun_conv sep_add_commute)"], ["proof (prove)\ngoal (3 subgoals):\n 1. \\<And>a ba aa baa.\n       \\<lbrakk>ps1 ## a + aa; ps = ps1 + (a + aa); n = n1 + (ba + baa);\n        $ (Suc 0) (ps1, n1); a ## aa; ps2 = a + aa; n2 = ba + baa;\n        vars b \\<subseteq> dom a;\n        if pbval b a then pre C1 Q (a, ba) else pre C2 Q (a, ba);\n        F (aa, baa); pbval b (a + aa)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>ab b ac.\n                            ab ## ac \\<and>\n                            a + aa = ab + ac \\<and>\n                            (\\<exists>bb.\n                                ba + baa = b + bb \\<and>\n                                pre C1 Q (ab, b) \\<and> F (ac, bb))\n 2. \\<And>a ba aa baa x.\n       \\<lbrakk>ps1 ## a + aa; ps = ps1 + (a + aa); n = n1 + (ba + baa);\n        $ (Suc 0) (ps1, n1); a ## aa; ps2 = a + aa; n2 = ba + baa;\n        vars b \\<subseteq> dom a;\n        if pbval b a then pre C1 Q (a, ba) else pre C2 Q (a, ba);\n        F (aa, baa); \\<not> pbval b (a + aa); x \\<in> vars b\\<rbrakk>\n       \\<Longrightarrow> \\<exists>y. (a + aa) x = Some y\n 3. \\<And>a ba aa baa.\n       \\<lbrakk>ps1 ## a + aa; ps = ps1 + (a + aa); n = n1 + (ba + baa);\n        $ (Suc 0) (ps1, n1); a ## aa; ps2 = a + aa; n2 = ba + baa;\n        vars b \\<subseteq> dom a;\n        if pbval b a then pre C1 Q (a, ba) else pre C2 Q (a, ba);\n        F (aa, baa); \\<not> pbval b (a + aa)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>ab b ac.\n                            ab ## ac \\<and>\n                            a + aa = ab + ac \\<and>\n                            (\\<exists>bb.\n                                ba + baa = b + bb \\<and>\n                                pre C2 Q (ab, b) \\<and> F (ac, bb))", "using pbval_extend"], ["proof (prove)\nusing this:\n  \\<lbrakk>?ps1.0 ## ?ps2.0; vars ?b \\<subseteq> dom ?ps1.0\\<rbrakk>\n  \\<Longrightarrow> pbval ?b (?ps1.0 + ?ps2.0) = pbval ?b ?ps1.0\n\ngoal (3 subgoals):\n 1. \\<And>a ba aa baa.\n       \\<lbrakk>ps1 ## a + aa; ps = ps1 + (a + aa); n = n1 + (ba + baa);\n        $ (Suc 0) (ps1, n1); a ## aa; ps2 = a + aa; n2 = ba + baa;\n        vars b \\<subseteq> dom a;\n        if pbval b a then pre C1 Q (a, ba) else pre C2 Q (a, ba);\n        F (aa, baa); pbval b (a + aa)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>ab b ac.\n                            ab ## ac \\<and>\n                            a + aa = ab + ac \\<and>\n                            (\\<exists>bb.\n                                ba + baa = b + bb \\<and>\n                                pre C1 Q (ab, b) \\<and> F (ac, bb))\n 2. \\<And>a ba aa baa x.\n       \\<lbrakk>ps1 ## a + aa; ps = ps1 + (a + aa); n = n1 + (ba + baa);\n        $ (Suc 0) (ps1, n1); a ## aa; ps2 = a + aa; n2 = ba + baa;\n        vars b \\<subseteq> dom a;\n        if pbval b a then pre C1 Q (a, ba) else pre C2 Q (a, ba);\n        F (aa, baa); \\<not> pbval b (a + aa); x \\<in> vars b\\<rbrakk>\n       \\<Longrightarrow> \\<exists>y. (a + aa) x = Some y\n 3. \\<And>a ba aa baa.\n       \\<lbrakk>ps1 ## a + aa; ps = ps1 + (a + aa); n = n1 + (ba + baa);\n        $ (Suc 0) (ps1, n1); a ## aa; ps2 = a + aa; n2 = ba + baa;\n        vars b \\<subseteq> dom a;\n        if pbval b a then pre C1 Q (a, ba) else pre C2 Q (a, ba);\n        F (aa, baa); \\<not> pbval b (a + aa)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>ab b ac.\n                            ab ## ac \\<and>\n                            a + aa = ab + ac \\<and>\n                            (\\<exists>bb.\n                                ba + baa = b + bb \\<and>\n                                pre C2 Q (ab, b) \\<and> F (ac, bb))", "apply auto[1]"], ["proof (prove)\ngoal (2 subgoals):\n 1. \\<And>a ba aa baa x.\n       \\<lbrakk>ps1 ## a + aa; ps = ps1 + (a + aa); n = n1 + (ba + baa);\n        $ (Suc 0) (ps1, n1); a ## aa; ps2 = a + aa; n2 = ba + baa;\n        vars b \\<subseteq> dom a;\n        if pbval b a then pre C1 Q (a, ba) else pre C2 Q (a, ba);\n        F (aa, baa); \\<not> pbval b (a + aa); x \\<in> vars b\\<rbrakk>\n       \\<Longrightarrow> \\<exists>y. (a + aa) x = Some y\n 2. \\<And>a ba aa baa.\n       \\<lbrakk>ps1 ## a + aa; ps = ps1 + (a + aa); n = n1 + (ba + baa);\n        $ (Suc 0) (ps1, n1); a ## aa; ps2 = a + aa; n2 = ba + baa;\n        vars b \\<subseteq> dom a;\n        if pbval b a then pre C1 Q (a, ba) else pre C2 Q (a, ba);\n        F (aa, baa); \\<not> pbval b (a + aa)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>ab b ac.\n                            ab ## ac \\<and>\n                            a + aa = ab + ac \\<and>\n                            (\\<exists>bb.\n                                ba + baa = b + bb \\<and>\n                                pre C2 Q (ab, b) \\<and> F (ac, bb))", "apply (metis contra_subsetD domD map_add_dom_app_simps(1) plus_fun_conv sep_add_commute)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>a ba aa baa.\n       \\<lbrakk>ps1 ## a + aa; ps = ps1 + (a + aa); n = n1 + (ba + baa);\n        $ (Suc 0) (ps1, n1); a ## aa; ps2 = a + aa; n2 = ba + baa;\n        vars b \\<subseteq> dom a;\n        if pbval b a then pre C1 Q (a, ba) else pre C2 Q (a, ba);\n        F (aa, baa); \\<not> pbval b (a + aa)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>ab b ac.\n                            ab ## ac \\<and>\n                            a + aa = ab + ac \\<and>\n                            (\\<exists>bb.\n                                ba + baa = b + bb \\<and>\n                                pre C2 Q (ab, b) \\<and> F (ac, bb))", "using pbval_extend"], ["proof (prove)\nusing this:\n  \\<lbrakk>?ps1.0 ## ?ps2.0; vars ?b \\<subseteq> dom ?ps1.0\\<rbrakk>\n  \\<Longrightarrow> pbval ?b (?ps1.0 + ?ps2.0) = pbval ?b ?ps1.0\n\ngoal (1 subgoal):\n 1. \\<And>a ba aa baa.\n       \\<lbrakk>ps1 ## a + aa; ps = ps1 + (a + aa); n = n1 + (ba + baa);\n        $ (Suc 0) (ps1, n1); a ## aa; ps2 = a + aa; n2 = ba + baa;\n        vars b \\<subseteq> dom a;\n        if pbval b a then pre C1 Q (a, ba) else pre C2 Q (a, ba);\n        F (aa, baa); \\<not> pbval b (a + aa)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>ab b ac.\n                            ab ## ac \\<and>\n                            a + aa = ab + ac \\<and>\n                            (\\<exists>bb.\n                                ba + baa = b + bb \\<and>\n                                pre C2 Q (ab, b) \\<and> F (ac, bb))", "apply auto[1]"], ["proof (prove)\ngoal:\nNo subgoals!", "done"], ["proof (state)\nthis:\n  case (ps2, n2) of\n  (ps, n) \\<Rightarrow>\n    vars b \\<subseteq> dom ps \\<and>\n    (if pbval b ps then (pre C1 Q \\<and>* F) (ps, n)\n     else (pre C2 Q \\<and>* F) (ps, n))\n\ngoal (3 subgoals):\n 1. strip (IF b THEN C1 ELSE C2) = strip (IF b THEN C1' ELSE C2')\n 2. vc (IF b THEN C1' ELSE C2') (Q \\<and>* F)\n 3. \\<And>a ba.\n       (P \\<and>* F) (a, ba) \\<Longrightarrow>\n       pre (IF b THEN C1' ELSE C2') (Q \\<and>* F) (a, ba)", "then"], ["proof (chain)\npicking this:\n  case (ps2, n2) of\n  (ps, n) \\<Rightarrow>\n    vars b \\<subseteq> dom ps \\<and>\n    (if pbval b ps then (pre C1 Q \\<and>* F) (ps, n)\n     else (pre C2 Q \\<and>* F) (ps, n))", "have \"((\\<lambda>(ps, n). vars b \\<subseteq> dom ps \\<and> (if pbval b ps then (pre C1' (Q \\<and>* F)) (ps, n) else (pre C2' (Q \\<and>* F)) (ps, n)))) (ps2,n2)\""], ["proof (prove)\nusing this:\n  case (ps2, n2) of\n  (ps, n) \\<Rightarrow>\n    vars b \\<subseteq> dom ps \\<and>\n    (if pbval b ps then (pre C1 Q \\<and>* F) (ps, n)\n     else (pre C2 Q \\<and>* F) (ps, n))\n\ngoal (1 subgoal):\n 1. case (ps2, n2) of\n    (ps, n) \\<Rightarrow>\n      vars b \\<subseteq> dom ps \\<and>\n      (if pbval b ps then pre C1' (Q \\<and>* F) (ps, n)\n       else pre C2' (Q \\<and>* F) (ps, n))", "using p1 p2"], ["proof (prove)\nusing this:\n  case (ps2, n2) of\n  (ps, n) \\<Rightarrow>\n    vars b \\<subseteq> dom ps \\<and>\n    (if pbval b ps then (pre C1 Q \\<and>* F) (ps, n)\n     else (pre C2 Q \\<and>* F) (ps, n))\n  \\<forall>s.\n     (pre C1 Q \\<and>* F) s \\<longrightarrow> pre C1' (Q \\<and>* F) s\n  \\<forall>s.\n     (pre C2 Q \\<and>* F) s \\<longrightarrow> pre C2' (Q \\<and>* F) s\n\ngoal (1 subgoal):\n 1. case (ps2, n2) of\n    (ps, n) \\<Rightarrow>\n      vars b \\<subseteq> dom ps \\<and>\n      (if pbval b ps then pre C1' (Q \\<and>* F) (ps, n)\n       else pre C2' (Q \\<and>* F) (ps, n))", "by auto"], ["proof (state)\nthis:\n  case (ps2, n2) of\n  (ps, n) \\<Rightarrow>\n    vars b \\<subseteq> dom ps \\<and>\n    (if pbval b ps then pre C1' (Q \\<and>* F) (ps, n)\n     else pre C2' (Q \\<and>* F) (ps, n))\n\ngoal (3 subgoals):\n 1. strip (IF b THEN C1 ELSE C2) = strip (IF b THEN C1' ELSE C2')\n 2. vc (IF b THEN C1' ELSE C2') (Q \\<and>* F)\n 3. \\<And>a ba.\n       (P \\<and>* F) (a, ba) \\<Longrightarrow>\n       pre (IF b THEN C1' ELSE C2') (Q \\<and>* F) (a, ba)", "with o P"], ["proof (chain)\npicking this:\n  ps1 ## ps2\n  ps = ps1 + ps2\n  n = n1 + n2\n  $ (Suc 0) (ps1, n1)\n  case (ps2, n2) of\n  (ps, n) \\<Rightarrow>\n    vars b \\<subseteq> dom ps \\<and>\n    (if pbval b ps then pre C1' (Q \\<and>* F) (ps, n)\n     else pre C2' (Q \\<and>* F) (ps, n))", "show \"pre (IF b THEN C1' ELSE C2') (Q \\<and>* F) (ps, n)\""], ["proof (prove)\nusing this:\n  ps1 ## ps2\n  ps = ps1 + ps2\n  n = n1 + n2\n  $ (Suc 0) (ps1, n1)\n  case (ps2, n2) of\n  (ps, n) \\<Rightarrow>\n    vars b \\<subseteq> dom ps \\<and>\n    (if pbval b ps then pre C1' (Q \\<and>* F) (ps, n)\n     else pre C2' (Q \\<and>* F) (ps, n))\n\ngoal (1 subgoal):\n 1. pre (IF b THEN C1' ELSE C2') (Q \\<and>* F) (ps, n)", "apply auto"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>ps1 ## ps2; ps = ps1 + ps2; n = n1 + n2; $ (Suc 0) (ps1, n1);\n     vars b \\<subseteq> dom ps2;\n     if pbval b ps2 then pre C1' (Q \\<and>* F) (ps2, n2)\n     else pre C2' (Q \\<and>* F) (ps2, n2)\\<rbrakk>\n    \\<Longrightarrow> ($ (Suc 0) \\<and>*\n                       (\\<lambda>(ps, n).\n                           (pbval b ps \\<longrightarrow>\n                            vars b \\<subseteq> dom ps \\<and>\n                            pre C1' (Q \\<and>* F) (ps, n)) \\<and>\n                           (\\<not> pbval b ps \\<longrightarrow>\n                            vars b \\<subseteq> dom ps \\<and>\n                            pre C2' (Q \\<and>* F) (ps, n))))\n                       (ps1 + ps2, n1 + n2)", "apply(subst sep_conj_def)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>ps1 ## ps2; ps = ps1 + ps2; n = n1 + n2; $ (Suc 0) (ps1, n1);\n     vars b \\<subseteq> dom ps2;\n     if pbval b ps2 then pre C1' (Q \\<and>* F) (ps2, n2)\n     else pre C2' (Q \\<and>* F) (ps2, n2)\\<rbrakk>\n    \\<Longrightarrow> \\<exists>x y.\n                         x ## y \\<and>\n                         (ps1 + ps2, n1 + n2) = x + y \\<and>\n                         $ (Suc 0) x \\<and>\n                         (case y of\n                          (ps, n) \\<Rightarrow>\n                            (pbval b ps \\<longrightarrow>\n                             vars b \\<subseteq> dom ps \\<and>\n                             pre C1' (Q \\<and>* F) (ps, n)) \\<and>\n                            (\\<not> pbval b ps \\<longrightarrow>\n                             vars b \\<subseteq> dom ps \\<and>\n                             pre C2' (Q \\<and>* F) (ps, n)))", "by force"], ["proof (state)\nthis:\n  pre (IF b THEN C1' ELSE C2') (Q \\<and>* F) (ps, n)\n\ngoal (2 subgoals):\n 1. strip (IF b THEN C1 ELSE C2) = strip (IF b THEN C1' ELSE C2')\n 2. vc (IF b THEN C1' ELSE C2') (Q \\<and>* F)", "qed (auto simp: s1 s2 v1 v2)"], ["proof (state)\nthis:\n  \\<exists>C'.\n     strip (IF b THEN C1 ELSE C2) = strip C' \\<and>\n     vc C' (Q \\<and>* F) \\<and>\n     (\\<forall>s. (P \\<and>* F) s \\<longrightarrow> pre C' (Q \\<and>* F) s)\n\ngoal (1 subgoal):\n 1. \\<And>x1 x2 C P Q.\n       \\<lbrakk>\\<And>P Q.\n                   \\<lbrakk>\\<forall>s. P s \\<longrightarrow> pre C Q s;\n                    vc C Q\\<rbrakk>\n                   \\<Longrightarrow> \\<exists>C'.\n  strip C = strip C' \\<and>\n  vc C' (Q \\<and>* F) \\<and>\n  (\\<forall>s. (P \\<and>* F) s \\<longrightarrow> pre C' (Q \\<and>* F) s);\n        \\<forall>s. P s \\<longrightarrow> pre ({x1} WHILE x2 DO C) Q s;\n        vc ({x1} WHILE x2 DO C) Q\\<rbrakk>\n       \\<Longrightarrow> \\<exists>C'.\n                            strip ({x1} WHILE x2 DO C) = strip C' \\<and>\n                            vc C' (Q \\<and>* F) \\<and>\n                            (\\<forall>s.\n                                (P \\<and>* F) s \\<longrightarrow>\n                                pre C' (Q \\<and>* F) s)", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x1 x2 C P Q.\n       \\<lbrakk>\\<And>P Q.\n                   \\<lbrakk>\\<forall>s. P s \\<longrightarrow> pre C Q s;\n                    vc C Q\\<rbrakk>\n                   \\<Longrightarrow> \\<exists>C'.\n  strip C = strip C' \\<and>\n  vc C' (Q \\<and>* F) \\<and>\n  (\\<forall>s. (P \\<and>* F) s \\<longrightarrow> pre C' (Q \\<and>* F) s);\n        \\<forall>s. P s \\<longrightarrow> pre ({x1} WHILE x2 DO C) Q s;\n        vc ({x1} WHILE x2 DO C) Q\\<rbrakk>\n       \\<Longrightarrow> \\<exists>C'.\n                            strip ({x1} WHILE x2 DO C) = strip C' \\<and>\n                            vc C' (Q \\<and>* F) \\<and>\n                            (\\<forall>s.\n                                (P \\<and>* F) s \\<longrightarrow>\n                                pre C' (Q \\<and>* F) s)", "case (Awhile I b C)"], ["proof (state)\nthis:\n  \\<lbrakk>\\<forall>s. ?P s \\<longrightarrow> pre C ?Q s; vc C ?Q\\<rbrakk>\n  \\<Longrightarrow> \\<exists>C'.\n                       strip C = strip C' \\<and>\n                       vc C' (?Q \\<and>* F) \\<and>\n                       (\\<forall>s.\n                           (?P \\<and>* F) s \\<longrightarrow>\n                           pre C' (?Q \\<and>* F) s)\n  \\<forall>s. P s \\<longrightarrow> pre ({I} WHILE b DO C) Q s\n  vc ({I} WHILE b DO C) Q\n\ngoal (1 subgoal):\n 1. \\<And>x1 x2 C P Q.\n       \\<lbrakk>\\<And>P Q.\n                   \\<lbrakk>\\<forall>s. P s \\<longrightarrow> pre C Q s;\n                    vc C Q\\<rbrakk>\n                   \\<Longrightarrow> \\<exists>C'.\n  strip C = strip C' \\<and>\n  vc C' (Q \\<and>* F) \\<and>\n  (\\<forall>s. (P \\<and>* F) s \\<longrightarrow> pre C' (Q \\<and>* F) s);\n        \\<forall>s. P s \\<longrightarrow> pre ({x1} WHILE x2 DO C) Q s;\n        vc ({x1} WHILE x2 DO C) Q\\<rbrakk>\n       \\<Longrightarrow> \\<exists>C'.\n                            strip ({x1} WHILE x2 DO C) = strip C' \\<and>\n                            vc C' (Q \\<and>* F) \\<and>\n                            (\\<forall>s.\n                                (P \\<and>* F) s \\<longrightarrow>\n                                pre C' (Q \\<and>* F) s)", "from Awhile(2)"], ["proof (chain)\npicking this:\n  \\<forall>s. P s \\<longrightarrow> pre ({I} WHILE b DO C) Q s", "have pre: \"\\<forall>s. P s \\<longrightarrow>  (I ** $1) s\""], ["proof (prove)\nusing this:\n  \\<forall>s. P s \\<longrightarrow> pre ({I} WHILE b DO C) Q s\n\ngoal (1 subgoal):\n 1. \\<forall>s. P s \\<longrightarrow> (I \\<and>* $ 1) s", "by auto"], ["proof (state)\nthis:\n  \\<forall>s. P s \\<longrightarrow> (I \\<and>* $ 1) s\n\ngoal (1 subgoal):\n 1. \\<And>x1 x2 C P Q.\n       \\<lbrakk>\\<And>P Q.\n                   \\<lbrakk>\\<forall>s. P s \\<longrightarrow> pre C Q s;\n                    vc C Q\\<rbrakk>\n                   \\<Longrightarrow> \\<exists>C'.\n  strip C = strip C' \\<and>\n  vc C' (Q \\<and>* F) \\<and>\n  (\\<forall>s. (P \\<and>* F) s \\<longrightarrow> pre C' (Q \\<and>* F) s);\n        \\<forall>s. P s \\<longrightarrow> pre ({x1} WHILE x2 DO C) Q s;\n        vc ({x1} WHILE x2 DO C) Q\\<rbrakk>\n       \\<Longrightarrow> \\<exists>C'.\n                            strip ({x1} WHILE x2 DO C) = strip C' \\<and>\n                            vc C' (Q \\<and>* F) \\<and>\n                            (\\<forall>s.\n                                (P \\<and>* F) s \\<longrightarrow>\n                                pre C' (Q \\<and>* F) s)", "from Awhile(3)"], ["proof (chain)\npicking this:\n  vc ({I} WHILE b DO C) Q", "have \n    dom:  \"\\<forall>ps n. I (ps, n) \\<longrightarrow> vars b \\<subseteq> dom ps\" \n  and  tB: \"\\<forall>s. I s \\<and> vars b \\<subseteq> dom (fst s) \\<and> pbval b (fst s) \\<longrightarrow> pre C (I \\<and>* $ (Suc 0)) s\"\n  and  fB: \"\\<forall>ps n. I (ps, n) \\<and> vars b \\<subseteq> dom ps \\<and> \\<not> pbval b ps \\<longrightarrow> Q (ps, n)\"\n  and vcB: \"vc C (I \\<and>* $(Suc 0))\""], ["proof (prove)\nusing this:\n  vc ({I} WHILE b DO C) Q\n\ngoal (1 subgoal):\n 1. (\\<forall>ps n.\n        I (ps, n) \\<longrightarrow> vars b \\<subseteq> dom ps &&&\n     \\<forall>s.\n        I s \\<and>\n        vars b \\<subseteq> dom (fst s) \\<and>\n        pbval b (fst s) \\<longrightarrow>\n        pre C (I \\<and>* $ (Suc 0)) s) &&&\n    \\<forall>ps n.\n       I (ps, n) \\<and>\n       vars b \\<subseteq> dom ps \\<and> \\<not> pbval b ps \\<longrightarrow>\n       Q (ps, n) &&&\n    vc C (I \\<and>* $ (Suc 0))", "by auto"], ["proof (state)\nthis:\n  \\<forall>ps n. I (ps, n) \\<longrightarrow> vars b \\<subseteq> dom ps\n  \\<forall>s.\n     I s \\<and>\n     vars b \\<subseteq> dom (fst s) \\<and> pbval b (fst s) \\<longrightarrow>\n     pre C (I \\<and>* $ (Suc 0)) s\n  \\<forall>ps n.\n     I (ps, n) \\<and>\n     vars b \\<subseteq> dom ps \\<and> \\<not> pbval b ps \\<longrightarrow>\n     Q (ps, n)\n  vc C (I \\<and>* $ (Suc 0))\n\ngoal (1 subgoal):\n 1. \\<And>x1 x2 C P Q.\n       \\<lbrakk>\\<And>P Q.\n                   \\<lbrakk>\\<forall>s. P s \\<longrightarrow> pre C Q s;\n                    vc C Q\\<rbrakk>\n                   \\<Longrightarrow> \\<exists>C'.\n  strip C = strip C' \\<and>\n  vc C' (Q \\<and>* F) \\<and>\n  (\\<forall>s. (P \\<and>* F) s \\<longrightarrow> pre C' (Q \\<and>* F) s);\n        \\<forall>s. P s \\<longrightarrow> pre ({x1} WHILE x2 DO C) Q s;\n        vc ({x1} WHILE x2 DO C) Q\\<rbrakk>\n       \\<Longrightarrow> \\<exists>C'.\n                            strip ({x1} WHILE x2 DO C) = strip C' \\<and>\n                            vc C' (Q \\<and>* F) \\<and>\n                            (\\<forall>s.\n                                (P \\<and>* F) s \\<longrightarrow>\n                                pre C' (Q \\<and>* F) s)", "from Awhile(1)[OF tB vcB]"], ["proof (chain)\npicking this:\n  \\<exists>C'.\n     strip C = strip C' \\<and>\n     vc C' ((I \\<and>* $ (Suc 0)) \\<and>* F) \\<and>\n     (\\<forall>s.\n         ((\\<lambda>a.\n              I a \\<and>\n              vars b \\<subseteq> dom (fst a) \\<and> pbval b (fst a)) \\<and>*\n          F)\n          s \\<longrightarrow>\n         pre C' ((I \\<and>* $ (Suc 0)) \\<and>* F) s)", "obtain C' where st: \"strip C = strip C'\"\n    and vc': \"vc C' ((I \\<and>* $ (Suc 0)) \\<and>* F)\"\n    and pre': \"(\\<forall>s. ((\\<lambda>a. I a \\<and> vars b \\<subseteq> dom (fst a) \\<and> pbval b (fst a)) \\<and>* F) s \\<longrightarrow>\n            pre C' ((I \\<and>* $ (Suc 0)) \\<and>* F) s)\""], ["proof (prove)\nusing this:\n  \\<exists>C'.\n     strip C = strip C' \\<and>\n     vc C' ((I \\<and>* $ (Suc 0)) \\<and>* F) \\<and>\n     (\\<forall>s.\n         ((\\<lambda>a.\n              I a \\<and>\n              vars b \\<subseteq> dom (fst a) \\<and> pbval b (fst a)) \\<and>*\n          F)\n          s \\<longrightarrow>\n         pre C' ((I \\<and>* $ (Suc 0)) \\<and>* F) s)\n\ngoal (1 subgoal):\n 1. (\\<And>C'.\n        \\<lbrakk>strip C = strip C';\n         vc C' ((I \\<and>* $ (Suc 0)) \\<and>* F);\n         \\<forall>s.\n            ((\\<lambda>a.\n                 I a \\<and>\n                 vars b \\<subseteq> dom (fst a) \\<and>\n                 pbval b (fst a)) \\<and>*\n             F)\n             s \\<longrightarrow>\n            pre C' ((I \\<and>* $ (Suc 0)) \\<and>* F) s\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  strip C = strip C'\n  vc C' ((I \\<and>* $ (Suc 0)) \\<and>* F)\n  \\<forall>s.\n     ((\\<lambda>a.\n          I a \\<and>\n          vars b \\<subseteq> dom (fst a) \\<and> pbval b (fst a)) \\<and>*\n      F)\n      s \\<longrightarrow>\n     pre C' ((I \\<and>* $ (Suc 0)) \\<and>* F) s\n\ngoal (1 subgoal):\n 1. \\<And>x1 x2 C P Q.\n       \\<lbrakk>\\<And>P Q.\n                   \\<lbrakk>\\<forall>s. P s \\<longrightarrow> pre C Q s;\n                    vc C Q\\<rbrakk>\n                   \\<Longrightarrow> \\<exists>C'.\n  strip C = strip C' \\<and>\n  vc C' (Q \\<and>* F) \\<and>\n  (\\<forall>s. (P \\<and>* F) s \\<longrightarrow> pre C' (Q \\<and>* F) s);\n        \\<forall>s. P s \\<longrightarrow> pre ({x1} WHILE x2 DO C) Q s;\n        vc ({x1} WHILE x2 DO C) Q\\<rbrakk>\n       \\<Longrightarrow> \\<exists>C'.\n                            strip ({x1} WHILE x2 DO C) = strip C' \\<and>\n                            vc C' (Q \\<and>* F) \\<and>\n                            (\\<forall>s.\n                                (P \\<and>* F) s \\<longrightarrow>\n                                pre C' (Q \\<and>* F) s)", "show ?case"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>C'.\n       strip ({I} WHILE b DO C) = strip C' \\<and>\n       vc C' (Q \\<and>* F) \\<and>\n       (\\<forall>s.\n           (P \\<and>* F) s \\<longrightarrow> pre C' (Q \\<and>* F) s)", "apply(rule exI[where x=\"Awhile (I**F) b C'\"])"], ["proof (prove)\ngoal (1 subgoal):\n 1. strip ({I} WHILE b DO C) = strip ({I \\<and>* F} WHILE b DO C') \\<and>\n    vc ({I \\<and>* F} WHILE b DO C') (Q \\<and>* F) \\<and>\n    (\\<forall>s.\n        (P \\<and>* F) s \\<longrightarrow>\n        pre ({I \\<and>* F} WHILE b DO C') (Q \\<and>* F) s)", "apply safe"], ["proof (prove)\ngoal (3 subgoals):\n 1. strip ({I} WHILE b DO C) = strip ({I \\<and>* F} WHILE b DO C')\n 2. vc ({I \\<and>* F} WHILE b DO C') (Q \\<and>* F)\n 3. \\<And>a ba.\n       (P \\<and>* F) (a, ba) \\<Longrightarrow>\n       pre ({I \\<and>* F} WHILE b DO C') (Q \\<and>* F) (a, ba)", "subgoal"], ["proof (prove)\ngoal (1 subgoal):\n 1. strip ({I} WHILE b DO C) = strip ({I \\<and>* F} WHILE b DO C')", "using st"], ["proof (prove)\nusing this:\n  strip C = strip C'\n\ngoal (1 subgoal):\n 1. strip ({I} WHILE b DO C) = strip ({I \\<and>* F} WHILE b DO C')", "by simp"], ["proof (prove)\ngoal (2 subgoals):\n 1. vc ({I \\<and>* F} WHILE b DO C') (Q \\<and>* F)\n 2. \\<And>a ba.\n       (P \\<and>* F) (a, ba) \\<Longrightarrow>\n       pre ({I \\<and>* F} WHILE b DO C') (Q \\<and>* F) (a, ba)", "subgoal"], ["proof (prove)\ngoal (1 subgoal):\n 1. vc ({I \\<and>* F} WHILE b DO C') (Q \\<and>* F)", "apply simp"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<forall>a ba.\n        ((I \\<and>* F) (a, ba) \\<longrightarrow>\n         vars b \\<subseteq> dom a) \\<and>\n        ((I \\<and>* F) (a, ba) \\<and>\n         vars b \\<subseteq> dom a \\<and> pbval b a \\<longrightarrow>\n         pre C' ((I \\<and>* F) \\<and>* $ (Suc 0)) (a, ba)) \\<and>\n        ((I \\<and>* F) (a, ba) \\<and>\n         vars b \\<subseteq> dom a \\<and> \\<not> pbval b a \\<longrightarrow>\n         (Q \\<and>* F) (a, ba))) \\<and>\n    vc C' ((I \\<and>* F) \\<and>* $ (Suc 0))", "apply safe"], ["proof (prove)\ngoal (4 subgoals):\n 1. \\<And>a ba x.\n       \\<lbrakk>(I \\<and>* F) (a, ba); x \\<in> vars b\\<rbrakk>\n       \\<Longrightarrow> \\<exists>y. a x = Some y\n 2. \\<And>a ba.\n       \\<lbrakk>(I \\<and>* F) (a, ba); vars b \\<subseteq> dom a;\n        pbval b a\\<rbrakk>\n       \\<Longrightarrow> pre C' ((I \\<and>* F) \\<and>* $ (Suc 0)) (a, ba)\n 3. \\<And>a ba.\n       \\<lbrakk>(I \\<and>* F) (a, ba); vars b \\<subseteq> dom a;\n        \\<not> pbval b a\\<rbrakk>\n       \\<Longrightarrow> (Q \\<and>* F) (a, ba)\n 4. vc C' ((I \\<and>* F) \\<and>* $ (Suc 0))", "subgoal"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>(I \\<and>* F) (a_, ba_); x_ \\<in> vars b\\<rbrakk>\n    \\<Longrightarrow> \\<exists>y. a_ x_ = Some y", "using dom"], ["proof (prove)\nusing this:\n  \\<forall>ps n. I (ps, n) \\<longrightarrow> vars b \\<subseteq> dom ps\n\ngoal (1 subgoal):\n 1. \\<lbrakk>(I \\<and>* F) (a_, ba_); x_ \\<in> vars b\\<rbrakk>\n    \\<Longrightarrow> \\<exists>y. a_ x_ = Some y", "unfolding sep_conj_def"], ["proof (prove)\nusing this:\n  \\<forall>ps n. I (ps, n) \\<longrightarrow> vars b \\<subseteq> dom ps\n\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<exists>x y.\n                x ## y \\<and> (a_, ba_) = x + y \\<and> I x \\<and> F y;\n     x_ \\<in> vars b\\<rbrakk>\n    \\<Longrightarrow> \\<exists>y. a_ x_ = Some y", "apply auto"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>aa bb aaa baa.\n       \\<lbrakk>x_ \\<in> vars b;\n        \\<forall>ps.\n           (\\<exists>n. I (ps, n)) \\<longrightarrow>\n           vars b \\<subseteq> dom ps;\n        aa ## aaa; a_ = aa + aaa; ba_ = bb + baa; I (aa, bb);\n        F (aaa, baa)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>y. (aa + aaa) x_ = Some y", "by (metis domD sep_substate_disj_add subState subsetCE)"], ["proof (prove)\ngoal (3 subgoals):\n 1. \\<And>a ba.\n       \\<lbrakk>(I \\<and>* F) (a, ba); vars b \\<subseteq> dom a;\n        pbval b a\\<rbrakk>\n       \\<Longrightarrow> pre C' ((I \\<and>* F) \\<and>* $ (Suc 0)) (a, ba)\n 2. \\<And>a ba.\n       \\<lbrakk>(I \\<and>* F) (a, ba); vars b \\<subseteq> dom a;\n        \\<not> pbval b a\\<rbrakk>\n       \\<Longrightarrow> (Q \\<and>* F) (a, ba)\n 3. vc C' ((I \\<and>* F) \\<and>* $ (Suc 0))", "subgoal"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>(I \\<and>* F) (a_, ba_); vars b \\<subseteq> dom a_;\n     pbval b a_\\<rbrakk>\n    \\<Longrightarrow> pre C' ((I \\<and>* F) \\<and>* $ (Suc 0)) (a_, ba_)", "using pre'"], ["proof (prove)\nusing this:\n  \\<forall>s.\n     ((\\<lambda>a.\n          I a \\<and>\n          vars b \\<subseteq> dom (fst a) \\<and> pbval b (fst a)) \\<and>*\n      F)\n      s \\<longrightarrow>\n     pre C' ((I \\<and>* $ (Suc 0)) \\<and>* F) s\n\ngoal (1 subgoal):\n 1. \\<lbrakk>(I \\<and>* F) (a_, ba_); vars b \\<subseteq> dom a_;\n     pbval b a_\\<rbrakk>\n    \\<Longrightarrow> pre C' ((I \\<and>* F) \\<and>* $ (Suc 0)) (a_, ba_)", "apply(auto simp: sep_conj_ac)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>(F \\<and>* I) (a_, ba_); vars b \\<subseteq> dom a_; pbval b a_;\n     \\<forall>a ba.\n        (F \\<and>*\n         (\\<lambda>a.\n             I a \\<and>\n             vars b \\<subseteq> dom (fst a) \\<and> pbval b (fst a)))\n         (a, ba) \\<longrightarrow>\n        pre C' (F \\<and>* I \\<and>* $ (Suc 0)) (a, ba)\\<rbrakk>\n    \\<Longrightarrow> pre C' (F \\<and>* I \\<and>* $ (Suc 0)) (a_, ba_)", "apply(subst (asm)  sep_conj_def)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<exists>x y.\n                x ## y \\<and> (a_, ba_) = x + y \\<and> F x \\<and> I y;\n     vars b \\<subseteq> dom a_; pbval b a_;\n     \\<forall>a ba.\n        (F \\<and>*\n         (\\<lambda>a.\n             I a \\<and>\n             vars b \\<subseteq> dom (fst a) \\<and> pbval b (fst a)))\n         (a, ba) \\<longrightarrow>\n        pre C' (F \\<and>* I \\<and>* $ (Suc 0)) (a, ba)\\<rbrakk>\n    \\<Longrightarrow> pre C' (F \\<and>* I \\<and>* $ (Suc 0)) (a_, ba_)", "apply(subst (asm)  sep_conj_def)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<exists>x y.\n                x ## y \\<and> (a_, ba_) = x + y \\<and> F x \\<and> I y;\n     vars b \\<subseteq> dom a_; pbval b a_;\n     \\<forall>a ba.\n        (\\<exists>x y.\n            x ## y \\<and>\n            (a, ba) = x + y \\<and>\n            F x \\<and>\n            I y \\<and>\n            vars b \\<subseteq> dom (fst y) \\<and>\n            pbval b (fst y)) \\<longrightarrow>\n        pre C' (F \\<and>* I \\<and>* $ (Suc 0)) (a, ba)\\<rbrakk>\n    \\<Longrightarrow> pre C' (F \\<and>* I \\<and>* $ (Suc 0)) (a_, ba_)", "apply auto"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>aa bb aaa baa.\n       \\<lbrakk>vars b \\<subseteq> dom (aa + aaa); pbval b (aa + aaa);\n        \\<forall>a ba.\n           (\\<exists>aa bb ab.\n               aa ## ab \\<and>\n               a = aa + ab \\<and>\n               (\\<exists>bc.\n                   ba = bb + bc \\<and>\n                   F (aa, bb) \\<and>\n                   I (ab, bc) \\<and>\n                   vars b \\<subseteq> dom ab \\<and>\n                   pbval b ab)) \\<longrightarrow>\n           pre C' (F \\<and>* I \\<and>* $ (Suc 0)) (a, ba);\n        aa ## aaa; a_ = aa + aaa; ba_ = bb + baa; F (aa, bb);\n        I (aaa, baa)\\<rbrakk>\n       \\<Longrightarrow> pre C' (F \\<and>* I \\<and>* $ (Suc 0))\n                          (aa + aaa, bb + baa)", "by (metis dom pbval_extend sep_add_commute sep_disj_commuteI)"], ["proof (prove)\ngoal (2 subgoals):\n 1. \\<And>a ba.\n       \\<lbrakk>(I \\<and>* F) (a, ba); vars b \\<subseteq> dom a;\n        \\<not> pbval b a\\<rbrakk>\n       \\<Longrightarrow> (Q \\<and>* F) (a, ba)\n 2. vc C' ((I \\<and>* F) \\<and>* $ (Suc 0))", "subgoal"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>(I \\<and>* F) (a_, ba_); vars b \\<subseteq> dom a_;\n     \\<not> pbval b a_\\<rbrakk>\n    \\<Longrightarrow> (Q \\<and>* F) (a_, ba_)", "using fB"], ["proof (prove)\nusing this:\n  \\<forall>ps n.\n     I (ps, n) \\<and>\n     vars b \\<subseteq> dom ps \\<and> \\<not> pbval b ps \\<longrightarrow>\n     Q (ps, n)\n\ngoal (1 subgoal):\n 1. \\<lbrakk>(I \\<and>* F) (a_, ba_); vars b \\<subseteq> dom a_;\n     \\<not> pbval b a_\\<rbrakk>\n    \\<Longrightarrow> (Q \\<and>* F) (a_, ba_)", "unfolding sep_conj_def"], ["proof (prove)\nusing this:\n  \\<forall>ps n.\n     I (ps, n) \\<and>\n     vars b \\<subseteq> dom ps \\<and> \\<not> pbval b ps \\<longrightarrow>\n     Q (ps, n)\n\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<exists>x y.\n                x ## y \\<and> (a_, ba_) = x + y \\<and> I x \\<and> F y;\n     vars b \\<subseteq> dom a_; \\<not> pbval b a_\\<rbrakk>\n    \\<Longrightarrow> \\<exists>x y.\n                         x ## y \\<and>\n                         (a_, ba_) = x + y \\<and> Q x \\<and> F y", "apply auto"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>aa bb aaa baa.\n       \\<lbrakk>vars b \\<subseteq> dom (aa + aaa);\n        \\<not> pbval b (aa + aaa);\n        \\<forall>ps n.\n           I (ps, n) \\<and>\n           vars b \\<subseteq> dom ps \\<and>\n           \\<not> pbval b ps \\<longrightarrow>\n           Q (ps, n);\n        aa ## aaa; a_ = aa + aaa; ba_ = bb + baa; I (aa, bb);\n        F (aaa, baa)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>a b ab.\n                            a ## ab \\<and>\n                            aa + aaa = a + ab \\<and>\n                            (\\<exists>ba.\n                                bb + baa = b + ba \\<and>\n                                Q (a, b) \\<and> F (ab, ba))", "using dom pbval_extend"], ["proof (prove)\nusing this:\n  \\<forall>ps n. I (ps, n) \\<longrightarrow> vars b \\<subseteq> dom ps\n  \\<lbrakk>?ps1.0 ## ?ps2.0; vars ?b \\<subseteq> dom ?ps1.0\\<rbrakk>\n  \\<Longrightarrow> pbval ?b (?ps1.0 + ?ps2.0) = pbval ?b ?ps1.0\n\ngoal (1 subgoal):\n 1. \\<And>aa bb aaa baa.\n       \\<lbrakk>vars b \\<subseteq> dom (aa + aaa);\n        \\<not> pbval b (aa + aaa);\n        \\<forall>ps n.\n           I (ps, n) \\<and>\n           vars b \\<subseteq> dom ps \\<and>\n           \\<not> pbval b ps \\<longrightarrow>\n           Q (ps, n);\n        aa ## aaa; a_ = aa + aaa; ba_ = bb + baa; I (aa, bb);\n        F (aaa, baa)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>a b ab.\n                            a ## ab \\<and>\n                            aa + aaa = a + ab \\<and>\n                            (\\<exists>ba.\n                                bb + baa = b + ba \\<and>\n                                Q (a, b) \\<and> F (ab, ba))", "by fastforce"], ["proof (prove)\ngoal (1 subgoal):\n 1. vc C' ((I \\<and>* F) \\<and>* $ (Suc 0))", "subgoal"], ["proof (prove)\ngoal (1 subgoal):\n 1. vc C' ((I \\<and>* F) \\<and>* $ (Suc 0))", "using vc'"], ["proof (prove)\nusing this:\n  vc C' ((I \\<and>* $ (Suc 0)) \\<and>* F)\n\ngoal (1 subgoal):\n 1. vc C' ((I \\<and>* F) \\<and>* $ (Suc 0))", "apply(auto simp: sep_conj_ac)"], ["proof (prove)\ngoal:\nNo subgoals!", "done"], ["proof (prove)\ngoal:\nNo subgoals!", "done"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>a ba.\n       (P \\<and>* F) (a, ba) \\<Longrightarrow>\n       pre ({I \\<and>* F} WHILE b DO C') (Q \\<and>* F) (a, ba)", "subgoal"], ["proof (prove)\ngoal (1 subgoal):\n 1. (P \\<and>* F) (a_, ba_) \\<Longrightarrow>\n    pre ({I \\<and>* F} WHILE b DO C') (Q \\<and>* F) (a_, ba_)", "apply simp"], ["proof (prove)\ngoal (1 subgoal):\n 1. (P \\<and>* F) (a_, ba_) \\<Longrightarrow>\n    ((I \\<and>* F) \\<and>* $ (Suc 0)) (a_, ba_)", "using pre"], ["proof (prove)\nusing this:\n  \\<forall>s. P s \\<longrightarrow> (I \\<and>* $ 1) s\n\ngoal (1 subgoal):\n 1. (P \\<and>* F) (a_, ba_) \\<Longrightarrow>\n    ((I \\<and>* F) \\<and>* $ (Suc 0)) (a_, ba_)", "unfolding sep_conj_def"], ["proof (prove)\nusing this:\n  \\<forall>s.\n     P s \\<longrightarrow>\n     (\\<exists>x y. x ## y \\<and> s = x + y \\<and> I x \\<and> $ 1 y)\n\ngoal (1 subgoal):\n 1. \\<exists>x y.\n       x ## y \\<and>\n       (a_, ba_) = x + y \\<and> P x \\<and> F y \\<Longrightarrow>\n    \\<exists>x y.\n       x ## y \\<and>\n       (a_, ba_) = x + y \\<and>\n       (\\<exists>xa y.\n           xa ## y \\<and> x = xa + y \\<and> I xa \\<and> F y) \\<and>\n       $ (Suc 0) y", "apply auto"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>aa b aaa baa.\n       \\<lbrakk>\\<forall>a b.\n                   P (a, b) \\<longrightarrow>\n                   (\\<exists>aa ba ab.\n                       aa ## ab \\<and>\n                       a = aa + ab \\<and>\n                       (\\<exists>bb.\n                           b = ba + bb \\<and>\n                           I (aa, ba) \\<and> $ (Suc 0) (ab, bb)));\n        aa ## aaa; a_ = aa + aaa; ba_ = b + baa; P (aa, b);\n        F (aaa, baa)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>a ba ab.\n                            a ## ab \\<and>\n                            aa + aaa = a + ab \\<and>\n                            (\\<exists>bb.\n                                b + baa = ba + bb \\<and>\n                                (\\<exists>aa b ab.\n                                    aa ## ab \\<and>\n                                    a = aa + ab \\<and>\n                                    (\\<exists>bb.\n  ba = b + bb \\<and> I (aa, b) \\<and> F (ab, bb))) \\<and>\n                                $ (Suc 0) (ab, bb))", "by (smt semiring_normalization_rules(23) sep_add_assoc sep_add_commute sep_add_disjD sep_add_disjI1)"], ["proof (prove)\ngoal:\nNo subgoals!", "done"], ["proof (state)\nthis:\n  \\<exists>C'.\n     strip ({I} WHILE b DO C) = strip C' \\<and>\n     vc C' (Q \\<and>* F) \\<and>\n     (\\<forall>s. (P \\<and>* F) s \\<longrightarrow> pre C' (Q \\<and>* F) s)\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma vc_complete: \"\\<turnstile>\\<^sub>3\\<^sub>a {P} c { Q } \\<Longrightarrow> (\\<exists>C. vc C Q \\<and> (\\<forall>s. P s \\<longrightarrow> pre C Q s) \\<and> strip C = c)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<turnstile>\\<^sub>3\\<^sub>a {P} c { Q} \\<Longrightarrow>\n    \\<exists>C.\n       vc C Q \\<and>\n       (\\<forall>s. P s \\<longrightarrow> pre C Q s) \\<and> strip C = c", "proof(induct   rule: hoare3a.induct)"], ["proof (state)\ngoal (7 subgoals):\n 1. \\<exists>C.\n       vc C ($ 0) \\<and>\n       (\\<forall>s. $ 1 s \\<longrightarrow> pre C ($ 0) s) \\<and>\n       strip C = SKIP\n 2. \\<And>x a Q.\n       \\<exists>C.\n          vc C Q \\<and>\n          (\\<forall>s.\n              ((\\<lambda>(ps, t).\n                   x \\<in> dom ps \\<and>\n                   vars a \\<subseteq> dom ps \\<and>\n                   Q (ps(x \\<mapsto> paval a ps), t)) \\<and>*\n               $ 1)\n               s \\<longrightarrow>\n              pre C Q s) \\<and>\n          strip C = x ::= a\n 3. \\<And>P b c\\<^sub>1 Q c\\<^sub>2.\n       \\<lbrakk>\\<turnstile>\\<^sub>3\\<^sub>a {\\<lambda>(s, n).\n           P (s, n) \\<and> lmaps_to_axpr b True s}\n       c\\<^sub>1 { Q};\n        \\<exists>C.\n           vc C Q \\<and>\n           (\\<forall>s.\n               (case s of\n                (s, n) \\<Rightarrow>\n                  P (s, n) \\<and> lmaps_to_axpr b True s) \\<longrightarrow>\n               pre C Q s) \\<and>\n           strip C = c\\<^sub>1;\n        \\<turnstile>\\<^sub>3\\<^sub>a {\\<lambda>(s, n).\n   P (s, n) \\<and> lmaps_to_axpr b False s}\n                                     c\\<^sub>2 { Q};\n        \\<exists>C.\n           vc C Q \\<and>\n           (\\<forall>s.\n               (case s of\n                (s, n) \\<Rightarrow>\n                  P (s, n) \\<and> lmaps_to_axpr b False s) \\<longrightarrow>\n               pre C Q s) \\<and>\n           strip C = c\\<^sub>2\\<rbrakk>\n       \\<Longrightarrow> \\<exists>C.\n                            vc C Q \\<and>\n                            (\\<forall>s.\n                                ((\\<lambda>(s, n).\n                                     P (s, n) \\<and>\n                                     vars b \\<subseteq> dom s) \\<and>*\n                                 $ 1)\n                                 s \\<longrightarrow>\n                                pre C Q s) \\<and>\n                            strip C = IF b THEN c\\<^sub>1 ELSE c\\<^sub>2\n 4. \\<And>P C Q F.\n       \\<lbrakk>\\<turnstile>\\<^sub>3\\<^sub>a {P} C { Q};\n        \\<exists>Ca.\n           vc Ca Q \\<and>\n           (\\<forall>s. P s \\<longrightarrow> pre Ca Q s) \\<and>\n           strip Ca = C\\<rbrakk>\n       \\<Longrightarrow> \\<exists>Ca.\n                            vc Ca (Q \\<and>* F) \\<and>\n                            (\\<forall>s.\n                                (P \\<and>* F) s \\<longrightarrow>\n                                pre Ca (Q \\<and>* F) s) \\<and>\n                            strip Ca = C\n 5. \\<And>P C\\<^sub>1 Q C\\<^sub>2 R.\n       \\<lbrakk>\\<turnstile>\\<^sub>3\\<^sub>a {P} C\\<^sub>1 { Q};\n        \\<exists>C.\n           vc C Q \\<and>\n           (\\<forall>s. P s \\<longrightarrow> pre C Q s) \\<and>\n           strip C = C\\<^sub>1;\n        \\<turnstile>\\<^sub>3\\<^sub>a {Q} C\\<^sub>2 { R};\n        \\<exists>C.\n           vc C R \\<and>\n           (\\<forall>s. Q s \\<longrightarrow> pre C R s) \\<and>\n           strip C = C\\<^sub>2\\<rbrakk>\n       \\<Longrightarrow> \\<exists>C.\n                            vc C R \\<and>\n                            (\\<forall>s.\n                                P s \\<longrightarrow> pre C R s) \\<and>\n                            strip C = C\\<^sub>1;; C\\<^sub>2\n 6. \\<And>P b C.\n       \\<lbrakk>\\<turnstile>\\<^sub>3\\<^sub>a {\\<lambda>(s, n).\n           P (s, n) \\<and> lmaps_to_axpr b True s}\n       C { (\\<lambda>(s, n).\n               P (s, n) \\<and> vars b \\<subseteq> dom s) \\<and>*\n           $ 1};\n        \\<exists>Ca.\n           vc Ca\n            ((\\<lambda>(s, n).\n                 P (s, n) \\<and> vars b \\<subseteq> dom s) \\<and>*\n             $ 1) \\<and>\n           (\\<forall>s.\n               (case s of\n                (s, n) \\<Rightarrow>\n                  P (s, n) \\<and> lmaps_to_axpr b True s) \\<longrightarrow>\n               pre Ca\n                ((\\<lambda>(s, n).\n                     P (s, n) \\<and> vars b \\<subseteq> dom s) \\<and>*\n                 $ 1)\n                s) \\<and>\n           strip Ca = C\\<rbrakk>\n       \\<Longrightarrow> \\<exists>Ca.\n                            vc Ca\n                             (\\<lambda>a.\n                                 case a of\n                                 (s, n) \\<Rightarrow>\n                                   P (s, n) \\<and>\n                                   lmaps_to_axpr b False s) \\<and>\n                            (\\<forall>s.\n                                ((\\<lambda>(s, n).\n                                     P (s, n) \\<and>\n                                     vars b \\<subseteq> dom s) \\<and>*\n                                 $ 1)\n                                 s \\<longrightarrow>\n                                pre Ca\n                                 (\\<lambda>a.\n                                     case a of\n                                     (s, n) \\<Rightarrow>\n P (s, n) \\<and> lmaps_to_axpr b False s)\n                                 s) \\<and>\n                            strip Ca = WHILE b DO C\n 7. \\<And>P c Q P' Q'.\n       \\<lbrakk>\\<turnstile>\\<^sub>3\\<^sub>a {P} c { Q};\n        \\<exists>C.\n           vc C Q \\<and>\n           (\\<forall>s. P s \\<longrightarrow> pre C Q s) \\<and> strip C = c;\n        \\<And>s n. P' (s, n) \\<Longrightarrow> P (s, n);\n        \\<And>s n. Q (s, n) \\<Longrightarrow> Q' (s, n)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>C.\n                            vc C Q' \\<and>\n                            (\\<forall>s.\n                                P' s \\<longrightarrow> pre C Q' s) \\<and>\n                            strip C = c", "case Skip"], ["proof (state)\nthis:\n  \n\ngoal (7 subgoals):\n 1. \\<exists>C.\n       vc C ($ 0) \\<and>\n       (\\<forall>s. $ 1 s \\<longrightarrow> pre C ($ 0) s) \\<and>\n       strip C = SKIP\n 2. \\<And>x a Q.\n       \\<exists>C.\n          vc C Q \\<and>\n          (\\<forall>s.\n              ((\\<lambda>(ps, t).\n                   x \\<in> dom ps \\<and>\n                   vars a \\<subseteq> dom ps \\<and>\n                   Q (ps(x \\<mapsto> paval a ps), t)) \\<and>*\n               $ 1)\n               s \\<longrightarrow>\n              pre C Q s) \\<and>\n          strip C = x ::= a\n 3. \\<And>P b c\\<^sub>1 Q c\\<^sub>2.\n       \\<lbrakk>\\<turnstile>\\<^sub>3\\<^sub>a {\\<lambda>(s, n).\n           P (s, n) \\<and> lmaps_to_axpr b True s}\n       c\\<^sub>1 { Q};\n        \\<exists>C.\n           vc C Q \\<and>\n           (\\<forall>s.\n               (case s of\n                (s, n) \\<Rightarrow>\n                  P (s, n) \\<and> lmaps_to_axpr b True s) \\<longrightarrow>\n               pre C Q s) \\<and>\n           strip C = c\\<^sub>1;\n        \\<turnstile>\\<^sub>3\\<^sub>a {\\<lambda>(s, n).\n   P (s, n) \\<and> lmaps_to_axpr b False s}\n                                     c\\<^sub>2 { Q};\n        \\<exists>C.\n           vc C Q \\<and>\n           (\\<forall>s.\n               (case s of\n                (s, n) \\<Rightarrow>\n                  P (s, n) \\<and> lmaps_to_axpr b False s) \\<longrightarrow>\n               pre C Q s) \\<and>\n           strip C = c\\<^sub>2\\<rbrakk>\n       \\<Longrightarrow> \\<exists>C.\n                            vc C Q \\<and>\n                            (\\<forall>s.\n                                ((\\<lambda>(s, n).\n                                     P (s, n) \\<and>\n                                     vars b \\<subseteq> dom s) \\<and>*\n                                 $ 1)\n                                 s \\<longrightarrow>\n                                pre C Q s) \\<and>\n                            strip C = IF b THEN c\\<^sub>1 ELSE c\\<^sub>2\n 4. \\<And>P C Q F.\n       \\<lbrakk>\\<turnstile>\\<^sub>3\\<^sub>a {P} C { Q};\n        \\<exists>Ca.\n           vc Ca Q \\<and>\n           (\\<forall>s. P s \\<longrightarrow> pre Ca Q s) \\<and>\n           strip Ca = C\\<rbrakk>\n       \\<Longrightarrow> \\<exists>Ca.\n                            vc Ca (Q \\<and>* F) \\<and>\n                            (\\<forall>s.\n                                (P \\<and>* F) s \\<longrightarrow>\n                                pre Ca (Q \\<and>* F) s) \\<and>\n                            strip Ca = C\n 5. \\<And>P C\\<^sub>1 Q C\\<^sub>2 R.\n       \\<lbrakk>\\<turnstile>\\<^sub>3\\<^sub>a {P} C\\<^sub>1 { Q};\n        \\<exists>C.\n           vc C Q \\<and>\n           (\\<forall>s. P s \\<longrightarrow> pre C Q s) \\<and>\n           strip C = C\\<^sub>1;\n        \\<turnstile>\\<^sub>3\\<^sub>a {Q} C\\<^sub>2 { R};\n        \\<exists>C.\n           vc C R \\<and>\n           (\\<forall>s. Q s \\<longrightarrow> pre C R s) \\<and>\n           strip C = C\\<^sub>2\\<rbrakk>\n       \\<Longrightarrow> \\<exists>C.\n                            vc C R \\<and>\n                            (\\<forall>s.\n                                P s \\<longrightarrow> pre C R s) \\<and>\n                            strip C = C\\<^sub>1;; C\\<^sub>2\n 6. \\<And>P b C.\n       \\<lbrakk>\\<turnstile>\\<^sub>3\\<^sub>a {\\<lambda>(s, n).\n           P (s, n) \\<and> lmaps_to_axpr b True s}\n       C { (\\<lambda>(s, n).\n               P (s, n) \\<and> vars b \\<subseteq> dom s) \\<and>*\n           $ 1};\n        \\<exists>Ca.\n           vc Ca\n            ((\\<lambda>(s, n).\n                 P (s, n) \\<and> vars b \\<subseteq> dom s) \\<and>*\n             $ 1) \\<and>\n           (\\<forall>s.\n               (case s of\n                (s, n) \\<Rightarrow>\n                  P (s, n) \\<and> lmaps_to_axpr b True s) \\<longrightarrow>\n               pre Ca\n                ((\\<lambda>(s, n).\n                     P (s, n) \\<and> vars b \\<subseteq> dom s) \\<and>*\n                 $ 1)\n                s) \\<and>\n           strip Ca = C\\<rbrakk>\n       \\<Longrightarrow> \\<exists>Ca.\n                            vc Ca\n                             (\\<lambda>a.\n                                 case a of\n                                 (s, n) \\<Rightarrow>\n                                   P (s, n) \\<and>\n                                   lmaps_to_axpr b False s) \\<and>\n                            (\\<forall>s.\n                                ((\\<lambda>(s, n).\n                                     P (s, n) \\<and>\n                                     vars b \\<subseteq> dom s) \\<and>*\n                                 $ 1)\n                                 s \\<longrightarrow>\n                                pre Ca\n                                 (\\<lambda>a.\n                                     case a of\n                                     (s, n) \\<Rightarrow>\n P (s, n) \\<and> lmaps_to_axpr b False s)\n                                 s) \\<and>\n                            strip Ca = WHILE b DO C\n 7. \\<And>P c Q P' Q'.\n       \\<lbrakk>\\<turnstile>\\<^sub>3\\<^sub>a {P} c { Q};\n        \\<exists>C.\n           vc C Q \\<and>\n           (\\<forall>s. P s \\<longrightarrow> pre C Q s) \\<and> strip C = c;\n        \\<And>s n. P' (s, n) \\<Longrightarrow> P (s, n);\n        \\<And>s n. Q (s, n) \\<Longrightarrow> Q' (s, n)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>C.\n                            vc C Q' \\<and>\n                            (\\<forall>s.\n                                P' s \\<longrightarrow> pre C Q' s) \\<and>\n                            strip C = c", "then"], ["proof (chain)\npicking this:", "show ?case"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>C.\n       vc C ($ 0) \\<and>\n       (\\<forall>s. $ 1 s \\<longrightarrow> pre C ($ 0) s) \\<and>\n       strip C = SKIP", "apply(rule exI[where x=\"Askip\"])"], ["proof (prove)\ngoal (1 subgoal):\n 1. vc SKIP ($ 0) \\<and>\n    (\\<forall>s. $ 1 s \\<longrightarrow> pre SKIP ($ 0) s) \\<and>\n    strip SKIP = SKIP", "by auto"], ["proof (state)\nthis:\n  \\<exists>C.\n     vc C ($ 0) \\<and>\n     (\\<forall>s. $ 1 s \\<longrightarrow> pre C ($ 0) s) \\<and>\n     strip C = SKIP\n\ngoal (6 subgoals):\n 1. \\<And>x a Q.\n       \\<exists>C.\n          vc C Q \\<and>\n          (\\<forall>s.\n              ((\\<lambda>(ps, t).\n                   x \\<in> dom ps \\<and>\n                   vars a \\<subseteq> dom ps \\<and>\n                   Q (ps(x \\<mapsto> paval a ps), t)) \\<and>*\n               $ 1)\n               s \\<longrightarrow>\n              pre C Q s) \\<and>\n          strip C = x ::= a\n 2. \\<And>P b c\\<^sub>1 Q c\\<^sub>2.\n       \\<lbrakk>\\<turnstile>\\<^sub>3\\<^sub>a {\\<lambda>(s, n).\n           P (s, n) \\<and> lmaps_to_axpr b True s}\n       c\\<^sub>1 { Q};\n        \\<exists>C.\n           vc C Q \\<and>\n           (\\<forall>s.\n               (case s of\n                (s, n) \\<Rightarrow>\n                  P (s, n) \\<and> lmaps_to_axpr b True s) \\<longrightarrow>\n               pre C Q s) \\<and>\n           strip C = c\\<^sub>1;\n        \\<turnstile>\\<^sub>3\\<^sub>a {\\<lambda>(s, n).\n   P (s, n) \\<and> lmaps_to_axpr b False s}\n                                     c\\<^sub>2 { Q};\n        \\<exists>C.\n           vc C Q \\<and>\n           (\\<forall>s.\n               (case s of\n                (s, n) \\<Rightarrow>\n                  P (s, n) \\<and> lmaps_to_axpr b False s) \\<longrightarrow>\n               pre C Q s) \\<and>\n           strip C = c\\<^sub>2\\<rbrakk>\n       \\<Longrightarrow> \\<exists>C.\n                            vc C Q \\<and>\n                            (\\<forall>s.\n                                ((\\<lambda>(s, n).\n                                     P (s, n) \\<and>\n                                     vars b \\<subseteq> dom s) \\<and>*\n                                 $ 1)\n                                 s \\<longrightarrow>\n                                pre C Q s) \\<and>\n                            strip C = IF b THEN c\\<^sub>1 ELSE c\\<^sub>2\n 3. \\<And>P C Q F.\n       \\<lbrakk>\\<turnstile>\\<^sub>3\\<^sub>a {P} C { Q};\n        \\<exists>Ca.\n           vc Ca Q \\<and>\n           (\\<forall>s. P s \\<longrightarrow> pre Ca Q s) \\<and>\n           strip Ca = C\\<rbrakk>\n       \\<Longrightarrow> \\<exists>Ca.\n                            vc Ca (Q \\<and>* F) \\<and>\n                            (\\<forall>s.\n                                (P \\<and>* F) s \\<longrightarrow>\n                                pre Ca (Q \\<and>* F) s) \\<and>\n                            strip Ca = C\n 4. \\<And>P C\\<^sub>1 Q C\\<^sub>2 R.\n       \\<lbrakk>\\<turnstile>\\<^sub>3\\<^sub>a {P} C\\<^sub>1 { Q};\n        \\<exists>C.\n           vc C Q \\<and>\n           (\\<forall>s. P s \\<longrightarrow> pre C Q s) \\<and>\n           strip C = C\\<^sub>1;\n        \\<turnstile>\\<^sub>3\\<^sub>a {Q} C\\<^sub>2 { R};\n        \\<exists>C.\n           vc C R \\<and>\n           (\\<forall>s. Q s \\<longrightarrow> pre C R s) \\<and>\n           strip C = C\\<^sub>2\\<rbrakk>\n       \\<Longrightarrow> \\<exists>C.\n                            vc C R \\<and>\n                            (\\<forall>s.\n                                P s \\<longrightarrow> pre C R s) \\<and>\n                            strip C = C\\<^sub>1;; C\\<^sub>2\n 5. \\<And>P b C.\n       \\<lbrakk>\\<turnstile>\\<^sub>3\\<^sub>a {\\<lambda>(s, n).\n           P (s, n) \\<and> lmaps_to_axpr b True s}\n       C { (\\<lambda>(s, n).\n               P (s, n) \\<and> vars b \\<subseteq> dom s) \\<and>*\n           $ 1};\n        \\<exists>Ca.\n           vc Ca\n            ((\\<lambda>(s, n).\n                 P (s, n) \\<and> vars b \\<subseteq> dom s) \\<and>*\n             $ 1) \\<and>\n           (\\<forall>s.\n               (case s of\n                (s, n) \\<Rightarrow>\n                  P (s, n) \\<and> lmaps_to_axpr b True s) \\<longrightarrow>\n               pre Ca\n                ((\\<lambda>(s, n).\n                     P (s, n) \\<and> vars b \\<subseteq> dom s) \\<and>*\n                 $ 1)\n                s) \\<and>\n           strip Ca = C\\<rbrakk>\n       \\<Longrightarrow> \\<exists>Ca.\n                            vc Ca\n                             (\\<lambda>a.\n                                 case a of\n                                 (s, n) \\<Rightarrow>\n                                   P (s, n) \\<and>\n                                   lmaps_to_axpr b False s) \\<and>\n                            (\\<forall>s.\n                                ((\\<lambda>(s, n).\n                                     P (s, n) \\<and>\n                                     vars b \\<subseteq> dom s) \\<and>*\n                                 $ 1)\n                                 s \\<longrightarrow>\n                                pre Ca\n                                 (\\<lambda>a.\n                                     case a of\n                                     (s, n) \\<Rightarrow>\n P (s, n) \\<and> lmaps_to_axpr b False s)\n                                 s) \\<and>\n                            strip Ca = WHILE b DO C\n 6. \\<And>P c Q P' Q'.\n       \\<lbrakk>\\<turnstile>\\<^sub>3\\<^sub>a {P} c { Q};\n        \\<exists>C.\n           vc C Q \\<and>\n           (\\<forall>s. P s \\<longrightarrow> pre C Q s) \\<and> strip C = c;\n        \\<And>s n. P' (s, n) \\<Longrightarrow> P (s, n);\n        \\<And>s n. Q (s, n) \\<Longrightarrow> Q' (s, n)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>C.\n                            vc C Q' \\<and>\n                            (\\<forall>s.\n                                P' s \\<longrightarrow> pre C Q' s) \\<and>\n                            strip C = c", "next"], ["proof (state)\ngoal (6 subgoals):\n 1. \\<And>x a Q.\n       \\<exists>C.\n          vc C Q \\<and>\n          (\\<forall>s.\n              ((\\<lambda>(ps, t).\n                   x \\<in> dom ps \\<and>\n                   vars a \\<subseteq> dom ps \\<and>\n                   Q (ps(x \\<mapsto> paval a ps), t)) \\<and>*\n               $ 1)\n               s \\<longrightarrow>\n              pre C Q s) \\<and>\n          strip C = x ::= a\n 2. \\<And>P b c\\<^sub>1 Q c\\<^sub>2.\n       \\<lbrakk>\\<turnstile>\\<^sub>3\\<^sub>a {\\<lambda>(s, n).\n           P (s, n) \\<and> lmaps_to_axpr b True s}\n       c\\<^sub>1 { Q};\n        \\<exists>C.\n           vc C Q \\<and>\n           (\\<forall>s.\n               (case s of\n                (s, n) \\<Rightarrow>\n                  P (s, n) \\<and> lmaps_to_axpr b True s) \\<longrightarrow>\n               pre C Q s) \\<and>\n           strip C = c\\<^sub>1;\n        \\<turnstile>\\<^sub>3\\<^sub>a {\\<lambda>(s, n).\n   P (s, n) \\<and> lmaps_to_axpr b False s}\n                                     c\\<^sub>2 { Q};\n        \\<exists>C.\n           vc C Q \\<and>\n           (\\<forall>s.\n               (case s of\n                (s, n) \\<Rightarrow>\n                  P (s, n) \\<and> lmaps_to_axpr b False s) \\<longrightarrow>\n               pre C Q s) \\<and>\n           strip C = c\\<^sub>2\\<rbrakk>\n       \\<Longrightarrow> \\<exists>C.\n                            vc C Q \\<and>\n                            (\\<forall>s.\n                                ((\\<lambda>(s, n).\n                                     P (s, n) \\<and>\n                                     vars b \\<subseteq> dom s) \\<and>*\n                                 $ 1)\n                                 s \\<longrightarrow>\n                                pre C Q s) \\<and>\n                            strip C = IF b THEN c\\<^sub>1 ELSE c\\<^sub>2\n 3. \\<And>P C Q F.\n       \\<lbrakk>\\<turnstile>\\<^sub>3\\<^sub>a {P} C { Q};\n        \\<exists>Ca.\n           vc Ca Q \\<and>\n           (\\<forall>s. P s \\<longrightarrow> pre Ca Q s) \\<and>\n           strip Ca = C\\<rbrakk>\n       \\<Longrightarrow> \\<exists>Ca.\n                            vc Ca (Q \\<and>* F) \\<and>\n                            (\\<forall>s.\n                                (P \\<and>* F) s \\<longrightarrow>\n                                pre Ca (Q \\<and>* F) s) \\<and>\n                            strip Ca = C\n 4. \\<And>P C\\<^sub>1 Q C\\<^sub>2 R.\n       \\<lbrakk>\\<turnstile>\\<^sub>3\\<^sub>a {P} C\\<^sub>1 { Q};\n        \\<exists>C.\n           vc C Q \\<and>\n           (\\<forall>s. P s \\<longrightarrow> pre C Q s) \\<and>\n           strip C = C\\<^sub>1;\n        \\<turnstile>\\<^sub>3\\<^sub>a {Q} C\\<^sub>2 { R};\n        \\<exists>C.\n           vc C R \\<and>\n           (\\<forall>s. Q s \\<longrightarrow> pre C R s) \\<and>\n           strip C = C\\<^sub>2\\<rbrakk>\n       \\<Longrightarrow> \\<exists>C.\n                            vc C R \\<and>\n                            (\\<forall>s.\n                                P s \\<longrightarrow> pre C R s) \\<and>\n                            strip C = C\\<^sub>1;; C\\<^sub>2\n 5. \\<And>P b C.\n       \\<lbrakk>\\<turnstile>\\<^sub>3\\<^sub>a {\\<lambda>(s, n).\n           P (s, n) \\<and> lmaps_to_axpr b True s}\n       C { (\\<lambda>(s, n).\n               P (s, n) \\<and> vars b \\<subseteq> dom s) \\<and>*\n           $ 1};\n        \\<exists>Ca.\n           vc Ca\n            ((\\<lambda>(s, n).\n                 P (s, n) \\<and> vars b \\<subseteq> dom s) \\<and>*\n             $ 1) \\<and>\n           (\\<forall>s.\n               (case s of\n                (s, n) \\<Rightarrow>\n                  P (s, n) \\<and> lmaps_to_axpr b True s) \\<longrightarrow>\n               pre Ca\n                ((\\<lambda>(s, n).\n                     P (s, n) \\<and> vars b \\<subseteq> dom s) \\<and>*\n                 $ 1)\n                s) \\<and>\n           strip Ca = C\\<rbrakk>\n       \\<Longrightarrow> \\<exists>Ca.\n                            vc Ca\n                             (\\<lambda>a.\n                                 case a of\n                                 (s, n) \\<Rightarrow>\n                                   P (s, n) \\<and>\n                                   lmaps_to_axpr b False s) \\<and>\n                            (\\<forall>s.\n                                ((\\<lambda>(s, n).\n                                     P (s, n) \\<and>\n                                     vars b \\<subseteq> dom s) \\<and>*\n                                 $ 1)\n                                 s \\<longrightarrow>\n                                pre Ca\n                                 (\\<lambda>a.\n                                     case a of\n                                     (s, n) \\<Rightarrow>\n P (s, n) \\<and> lmaps_to_axpr b False s)\n                                 s) \\<and>\n                            strip Ca = WHILE b DO C\n 6. \\<And>P c Q P' Q'.\n       \\<lbrakk>\\<turnstile>\\<^sub>3\\<^sub>a {P} c { Q};\n        \\<exists>C.\n           vc C Q \\<and>\n           (\\<forall>s. P s \\<longrightarrow> pre C Q s) \\<and> strip C = c;\n        \\<And>s n. P' (s, n) \\<Longrightarrow> P (s, n);\n        \\<And>s n. Q (s, n) \\<Longrightarrow> Q' (s, n)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>C.\n                            vc C Q' \\<and>\n                            (\\<forall>s.\n                                P' s \\<longrightarrow> pre C Q' s) \\<and>\n                            strip C = c", "case (Assign4 x a Q)"], ["proof (state)\nthis:\n  \n\ngoal (6 subgoals):\n 1. \\<And>x a Q.\n       \\<exists>C.\n          vc C Q \\<and>\n          (\\<forall>s.\n              ((\\<lambda>(ps, t).\n                   x \\<in> dom ps \\<and>\n                   vars a \\<subseteq> dom ps \\<and>\n                   Q (ps(x \\<mapsto> paval a ps), t)) \\<and>*\n               $ 1)\n               s \\<longrightarrow>\n              pre C Q s) \\<and>\n          strip C = x ::= a\n 2. \\<And>P b c\\<^sub>1 Q c\\<^sub>2.\n       \\<lbrakk>\\<turnstile>\\<^sub>3\\<^sub>a {\\<lambda>(s, n).\n           P (s, n) \\<and> lmaps_to_axpr b True s}\n       c\\<^sub>1 { Q};\n        \\<exists>C.\n           vc C Q \\<and>\n           (\\<forall>s.\n               (case s of\n                (s, n) \\<Rightarrow>\n                  P (s, n) \\<and> lmaps_to_axpr b True s) \\<longrightarrow>\n               pre C Q s) \\<and>\n           strip C = c\\<^sub>1;\n        \\<turnstile>\\<^sub>3\\<^sub>a {\\<lambda>(s, n).\n   P (s, n) \\<and> lmaps_to_axpr b False s}\n                                     c\\<^sub>2 { Q};\n        \\<exists>C.\n           vc C Q \\<and>\n           (\\<forall>s.\n               (case s of\n                (s, n) \\<Rightarrow>\n                  P (s, n) \\<and> lmaps_to_axpr b False s) \\<longrightarrow>\n               pre C Q s) \\<and>\n           strip C = c\\<^sub>2\\<rbrakk>\n       \\<Longrightarrow> \\<exists>C.\n                            vc C Q \\<and>\n                            (\\<forall>s.\n                                ((\\<lambda>(s, n).\n                                     P (s, n) \\<and>\n                                     vars b \\<subseteq> dom s) \\<and>*\n                                 $ 1)\n                                 s \\<longrightarrow>\n                                pre C Q s) \\<and>\n                            strip C = IF b THEN c\\<^sub>1 ELSE c\\<^sub>2\n 3. \\<And>P C Q F.\n       \\<lbrakk>\\<turnstile>\\<^sub>3\\<^sub>a {P} C { Q};\n        \\<exists>Ca.\n           vc Ca Q \\<and>\n           (\\<forall>s. P s \\<longrightarrow> pre Ca Q s) \\<and>\n           strip Ca = C\\<rbrakk>\n       \\<Longrightarrow> \\<exists>Ca.\n                            vc Ca (Q \\<and>* F) \\<and>\n                            (\\<forall>s.\n                                (P \\<and>* F) s \\<longrightarrow>\n                                pre Ca (Q \\<and>* F) s) \\<and>\n                            strip Ca = C\n 4. \\<And>P C\\<^sub>1 Q C\\<^sub>2 R.\n       \\<lbrakk>\\<turnstile>\\<^sub>3\\<^sub>a {P} C\\<^sub>1 { Q};\n        \\<exists>C.\n           vc C Q \\<and>\n           (\\<forall>s. P s \\<longrightarrow> pre C Q s) \\<and>\n           strip C = C\\<^sub>1;\n        \\<turnstile>\\<^sub>3\\<^sub>a {Q} C\\<^sub>2 { R};\n        \\<exists>C.\n           vc C R \\<and>\n           (\\<forall>s. Q s \\<longrightarrow> pre C R s) \\<and>\n           strip C = C\\<^sub>2\\<rbrakk>\n       \\<Longrightarrow> \\<exists>C.\n                            vc C R \\<and>\n                            (\\<forall>s.\n                                P s \\<longrightarrow> pre C R s) \\<and>\n                            strip C = C\\<^sub>1;; C\\<^sub>2\n 5. \\<And>P b C.\n       \\<lbrakk>\\<turnstile>\\<^sub>3\\<^sub>a {\\<lambda>(s, n).\n           P (s, n) \\<and> lmaps_to_axpr b True s}\n       C { (\\<lambda>(s, n).\n               P (s, n) \\<and> vars b \\<subseteq> dom s) \\<and>*\n           $ 1};\n        \\<exists>Ca.\n           vc Ca\n            ((\\<lambda>(s, n).\n                 P (s, n) \\<and> vars b \\<subseteq> dom s) \\<and>*\n             $ 1) \\<and>\n           (\\<forall>s.\n               (case s of\n                (s, n) \\<Rightarrow>\n                  P (s, n) \\<and> lmaps_to_axpr b True s) \\<longrightarrow>\n               pre Ca\n                ((\\<lambda>(s, n).\n                     P (s, n) \\<and> vars b \\<subseteq> dom s) \\<and>*\n                 $ 1)\n                s) \\<and>\n           strip Ca = C\\<rbrakk>\n       \\<Longrightarrow> \\<exists>Ca.\n                            vc Ca\n                             (\\<lambda>a.\n                                 case a of\n                                 (s, n) \\<Rightarrow>\n                                   P (s, n) \\<and>\n                                   lmaps_to_axpr b False s) \\<and>\n                            (\\<forall>s.\n                                ((\\<lambda>(s, n).\n                                     P (s, n) \\<and>\n                                     vars b \\<subseteq> dom s) \\<and>*\n                                 $ 1)\n                                 s \\<longrightarrow>\n                                pre Ca\n                                 (\\<lambda>a.\n                                     case a of\n                                     (s, n) \\<Rightarrow>\n P (s, n) \\<and> lmaps_to_axpr b False s)\n                                 s) \\<and>\n                            strip Ca = WHILE b DO C\n 6. \\<And>P c Q P' Q'.\n       \\<lbrakk>\\<turnstile>\\<^sub>3\\<^sub>a {P} c { Q};\n        \\<exists>C.\n           vc C Q \\<and>\n           (\\<forall>s. P s \\<longrightarrow> pre C Q s) \\<and> strip C = c;\n        \\<And>s n. P' (s, n) \\<Longrightarrow> P (s, n);\n        \\<And>s n. Q (s, n) \\<Longrightarrow> Q' (s, n)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>C.\n                            vc C Q' \\<and>\n                            (\\<forall>s.\n                                P' s \\<longrightarrow> pre C Q' s) \\<and>\n                            strip C = c", "then"], ["proof (chain)\npicking this:", "show ?case"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>C.\n       vc C Q \\<and>\n       (\\<forall>s.\n           ((\\<lambda>(ps, t).\n                x \\<in> dom ps \\<and>\n                vars a \\<subseteq> dom ps \\<and>\n                Q (ps(x \\<mapsto> paval a ps), t)) \\<and>*\n            $ 1)\n            s \\<longrightarrow>\n           pre C Q s) \\<and>\n       strip C = x ::= a", "apply(rule exI[where x=\"Aassign x a\"])"], ["proof (prove)\ngoal (1 subgoal):\n 1. vc (x ::= a) Q \\<and>\n    (\\<forall>s.\n        ((\\<lambda>(ps, t).\n             x \\<in> dom ps \\<and>\n             vars a \\<subseteq> dom ps \\<and>\n             Q (ps(x \\<mapsto> paval a ps), t)) \\<and>*\n         $ 1)\n         s \\<longrightarrow>\n        pre (x ::= a) Q s) \\<and>\n    strip (x ::= a) = x ::= a", "by auto"], ["proof (state)\nthis:\n  \\<exists>C.\n     vc C Q \\<and>\n     (\\<forall>s.\n         ((\\<lambda>(ps, t).\n              x \\<in> dom ps \\<and>\n              vars a \\<subseteq> dom ps \\<and>\n              Q (ps(x \\<mapsto> paval a ps), t)) \\<and>*\n          $ 1)\n          s \\<longrightarrow>\n         pre C Q s) \\<and>\n     strip C = x ::= a\n\ngoal (5 subgoals):\n 1. \\<And>P b c\\<^sub>1 Q c\\<^sub>2.\n       \\<lbrakk>\\<turnstile>\\<^sub>3\\<^sub>a {\\<lambda>(s, n).\n           P (s, n) \\<and> lmaps_to_axpr b True s}\n       c\\<^sub>1 { Q};\n        \\<exists>C.\n           vc C Q \\<and>\n           (\\<forall>s.\n               (case s of\n                (s, n) \\<Rightarrow>\n                  P (s, n) \\<and> lmaps_to_axpr b True s) \\<longrightarrow>\n               pre C Q s) \\<and>\n           strip C = c\\<^sub>1;\n        \\<turnstile>\\<^sub>3\\<^sub>a {\\<lambda>(s, n).\n   P (s, n) \\<and> lmaps_to_axpr b False s}\n                                     c\\<^sub>2 { Q};\n        \\<exists>C.\n           vc C Q \\<and>\n           (\\<forall>s.\n               (case s of\n                (s, n) \\<Rightarrow>\n                  P (s, n) \\<and> lmaps_to_axpr b False s) \\<longrightarrow>\n               pre C Q s) \\<and>\n           strip C = c\\<^sub>2\\<rbrakk>\n       \\<Longrightarrow> \\<exists>C.\n                            vc C Q \\<and>\n                            (\\<forall>s.\n                                ((\\<lambda>(s, n).\n                                     P (s, n) \\<and>\n                                     vars b \\<subseteq> dom s) \\<and>*\n                                 $ 1)\n                                 s \\<longrightarrow>\n                                pre C Q s) \\<and>\n                            strip C = IF b THEN c\\<^sub>1 ELSE c\\<^sub>2\n 2. \\<And>P C Q F.\n       \\<lbrakk>\\<turnstile>\\<^sub>3\\<^sub>a {P} C { Q};\n        \\<exists>Ca.\n           vc Ca Q \\<and>\n           (\\<forall>s. P s \\<longrightarrow> pre Ca Q s) \\<and>\n           strip Ca = C\\<rbrakk>\n       \\<Longrightarrow> \\<exists>Ca.\n                            vc Ca (Q \\<and>* F) \\<and>\n                            (\\<forall>s.\n                                (P \\<and>* F) s \\<longrightarrow>\n                                pre Ca (Q \\<and>* F) s) \\<and>\n                            strip Ca = C\n 3. \\<And>P C\\<^sub>1 Q C\\<^sub>2 R.\n       \\<lbrakk>\\<turnstile>\\<^sub>3\\<^sub>a {P} C\\<^sub>1 { Q};\n        \\<exists>C.\n           vc C Q \\<and>\n           (\\<forall>s. P s \\<longrightarrow> pre C Q s) \\<and>\n           strip C = C\\<^sub>1;\n        \\<turnstile>\\<^sub>3\\<^sub>a {Q} C\\<^sub>2 { R};\n        \\<exists>C.\n           vc C R \\<and>\n           (\\<forall>s. Q s \\<longrightarrow> pre C R s) \\<and>\n           strip C = C\\<^sub>2\\<rbrakk>\n       \\<Longrightarrow> \\<exists>C.\n                            vc C R \\<and>\n                            (\\<forall>s.\n                                P s \\<longrightarrow> pre C R s) \\<and>\n                            strip C = C\\<^sub>1;; C\\<^sub>2\n 4. \\<And>P b C.\n       \\<lbrakk>\\<turnstile>\\<^sub>3\\<^sub>a {\\<lambda>(s, n).\n           P (s, n) \\<and> lmaps_to_axpr b True s}\n       C { (\\<lambda>(s, n).\n               P (s, n) \\<and> vars b \\<subseteq> dom s) \\<and>*\n           $ 1};\n        \\<exists>Ca.\n           vc Ca\n            ((\\<lambda>(s, n).\n                 P (s, n) \\<and> vars b \\<subseteq> dom s) \\<and>*\n             $ 1) \\<and>\n           (\\<forall>s.\n               (case s of\n                (s, n) \\<Rightarrow>\n                  P (s, n) \\<and> lmaps_to_axpr b True s) \\<longrightarrow>\n               pre Ca\n                ((\\<lambda>(s, n).\n                     P (s, n) \\<and> vars b \\<subseteq> dom s) \\<and>*\n                 $ 1)\n                s) \\<and>\n           strip Ca = C\\<rbrakk>\n       \\<Longrightarrow> \\<exists>Ca.\n                            vc Ca\n                             (\\<lambda>a.\n                                 case a of\n                                 (s, n) \\<Rightarrow>\n                                   P (s, n) \\<and>\n                                   lmaps_to_axpr b False s) \\<and>\n                            (\\<forall>s.\n                                ((\\<lambda>(s, n).\n                                     P (s, n) \\<and>\n                                     vars b \\<subseteq> dom s) \\<and>*\n                                 $ 1)\n                                 s \\<longrightarrow>\n                                pre Ca\n                                 (\\<lambda>a.\n                                     case a of\n                                     (s, n) \\<Rightarrow>\n P (s, n) \\<and> lmaps_to_axpr b False s)\n                                 s) \\<and>\n                            strip Ca = WHILE b DO C\n 5. \\<And>P c Q P' Q'.\n       \\<lbrakk>\\<turnstile>\\<^sub>3\\<^sub>a {P} c { Q};\n        \\<exists>C.\n           vc C Q \\<and>\n           (\\<forall>s. P s \\<longrightarrow> pre C Q s) \\<and> strip C = c;\n        \\<And>s n. P' (s, n) \\<Longrightarrow> P (s, n);\n        \\<And>s n. Q (s, n) \\<Longrightarrow> Q' (s, n)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>C.\n                            vc C Q' \\<and>\n                            (\\<forall>s.\n                                P' s \\<longrightarrow> pre C Q' s) \\<and>\n                            strip C = c", "next"], ["proof (state)\ngoal (5 subgoals):\n 1. \\<And>P b c\\<^sub>1 Q c\\<^sub>2.\n       \\<lbrakk>\\<turnstile>\\<^sub>3\\<^sub>a {\\<lambda>(s, n).\n           P (s, n) \\<and> lmaps_to_axpr b True s}\n       c\\<^sub>1 { Q};\n        \\<exists>C.\n           vc C Q \\<and>\n           (\\<forall>s.\n               (case s of\n                (s, n) \\<Rightarrow>\n                  P (s, n) \\<and> lmaps_to_axpr b True s) \\<longrightarrow>\n               pre C Q s) \\<and>\n           strip C = c\\<^sub>1;\n        \\<turnstile>\\<^sub>3\\<^sub>a {\\<lambda>(s, n).\n   P (s, n) \\<and> lmaps_to_axpr b False s}\n                                     c\\<^sub>2 { Q};\n        \\<exists>C.\n           vc C Q \\<and>\n           (\\<forall>s.\n               (case s of\n                (s, n) \\<Rightarrow>\n                  P (s, n) \\<and> lmaps_to_axpr b False s) \\<longrightarrow>\n               pre C Q s) \\<and>\n           strip C = c\\<^sub>2\\<rbrakk>\n       \\<Longrightarrow> \\<exists>C.\n                            vc C Q \\<and>\n                            (\\<forall>s.\n                                ((\\<lambda>(s, n).\n                                     P (s, n) \\<and>\n                                     vars b \\<subseteq> dom s) \\<and>*\n                                 $ 1)\n                                 s \\<longrightarrow>\n                                pre C Q s) \\<and>\n                            strip C = IF b THEN c\\<^sub>1 ELSE c\\<^sub>2\n 2. \\<And>P C Q F.\n       \\<lbrakk>\\<turnstile>\\<^sub>3\\<^sub>a {P} C { Q};\n        \\<exists>Ca.\n           vc Ca Q \\<and>\n           (\\<forall>s. P s \\<longrightarrow> pre Ca Q s) \\<and>\n           strip Ca = C\\<rbrakk>\n       \\<Longrightarrow> \\<exists>Ca.\n                            vc Ca (Q \\<and>* F) \\<and>\n                            (\\<forall>s.\n                                (P \\<and>* F) s \\<longrightarrow>\n                                pre Ca (Q \\<and>* F) s) \\<and>\n                            strip Ca = C\n 3. \\<And>P C\\<^sub>1 Q C\\<^sub>2 R.\n       \\<lbrakk>\\<turnstile>\\<^sub>3\\<^sub>a {P} C\\<^sub>1 { Q};\n        \\<exists>C.\n           vc C Q \\<and>\n           (\\<forall>s. P s \\<longrightarrow> pre C Q s) \\<and>\n           strip C = C\\<^sub>1;\n        \\<turnstile>\\<^sub>3\\<^sub>a {Q} C\\<^sub>2 { R};\n        \\<exists>C.\n           vc C R \\<and>\n           (\\<forall>s. Q s \\<longrightarrow> pre C R s) \\<and>\n           strip C = C\\<^sub>2\\<rbrakk>\n       \\<Longrightarrow> \\<exists>C.\n                            vc C R \\<and>\n                            (\\<forall>s.\n                                P s \\<longrightarrow> pre C R s) \\<and>\n                            strip C = C\\<^sub>1;; C\\<^sub>2\n 4. \\<And>P b C.\n       \\<lbrakk>\\<turnstile>\\<^sub>3\\<^sub>a {\\<lambda>(s, n).\n           P (s, n) \\<and> lmaps_to_axpr b True s}\n       C { (\\<lambda>(s, n).\n               P (s, n) \\<and> vars b \\<subseteq> dom s) \\<and>*\n           $ 1};\n        \\<exists>Ca.\n           vc Ca\n            ((\\<lambda>(s, n).\n                 P (s, n) \\<and> vars b \\<subseteq> dom s) \\<and>*\n             $ 1) \\<and>\n           (\\<forall>s.\n               (case s of\n                (s, n) \\<Rightarrow>\n                  P (s, n) \\<and> lmaps_to_axpr b True s) \\<longrightarrow>\n               pre Ca\n                ((\\<lambda>(s, n).\n                     P (s, n) \\<and> vars b \\<subseteq> dom s) \\<and>*\n                 $ 1)\n                s) \\<and>\n           strip Ca = C\\<rbrakk>\n       \\<Longrightarrow> \\<exists>Ca.\n                            vc Ca\n                             (\\<lambda>a.\n                                 case a of\n                                 (s, n) \\<Rightarrow>\n                                   P (s, n) \\<and>\n                                   lmaps_to_axpr b False s) \\<and>\n                            (\\<forall>s.\n                                ((\\<lambda>(s, n).\n                                     P (s, n) \\<and>\n                                     vars b \\<subseteq> dom s) \\<and>*\n                                 $ 1)\n                                 s \\<longrightarrow>\n                                pre Ca\n                                 (\\<lambda>a.\n                                     case a of\n                                     (s, n) \\<Rightarrow>\n P (s, n) \\<and> lmaps_to_axpr b False s)\n                                 s) \\<and>\n                            strip Ca = WHILE b DO C\n 5. \\<And>P c Q P' Q'.\n       \\<lbrakk>\\<turnstile>\\<^sub>3\\<^sub>a {P} c { Q};\n        \\<exists>C.\n           vc C Q \\<and>\n           (\\<forall>s. P s \\<longrightarrow> pre C Q s) \\<and> strip C = c;\n        \\<And>s n. P' (s, n) \\<Longrightarrow> P (s, n);\n        \\<And>s n. Q (s, n) \\<Longrightarrow> Q' (s, n)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>C.\n                            vc C Q' \\<and>\n                            (\\<forall>s.\n                                P' s \\<longrightarrow> pre C Q' s) \\<and>\n                            strip C = c", "case (If P b c\\<^sub>1 Q c\\<^sub>2)"], ["proof (state)\nthis:\n  \\<turnstile>\\<^sub>3\\<^sub>a {\\<lambda>(s, n).\n                                   P (s, n) \\<and> lmaps_to_axpr b True s}\n                               c\\<^sub>1 { Q}\n  \\<exists>C.\n     vc C Q \\<and>\n     (\\<forall>s.\n         (case s of\n          (s, n) \\<Rightarrow>\n            P (s, n) \\<and> lmaps_to_axpr b True s) \\<longrightarrow>\n         pre C Q s) \\<and>\n     strip C = c\\<^sub>1\n  \\<turnstile>\\<^sub>3\\<^sub>a {\\<lambda>(s, n).\n                                   P (s, n) \\<and> lmaps_to_axpr b False s}\n                               c\\<^sub>2 { Q}\n  \\<exists>C.\n     vc C Q \\<and>\n     (\\<forall>s.\n         (case s of\n          (s, n) \\<Rightarrow>\n            P (s, n) \\<and> lmaps_to_axpr b False s) \\<longrightarrow>\n         pre C Q s) \\<and>\n     strip C = c\\<^sub>2\n\ngoal (5 subgoals):\n 1. \\<And>P b c\\<^sub>1 Q c\\<^sub>2.\n       \\<lbrakk>\\<turnstile>\\<^sub>3\\<^sub>a {\\<lambda>(s, n).\n           P (s, n) \\<and> lmaps_to_axpr b True s}\n       c\\<^sub>1 { Q};\n        \\<exists>C.\n           vc C Q \\<and>\n           (\\<forall>s.\n               (case s of\n                (s, n) \\<Rightarrow>\n                  P (s, n) \\<and> lmaps_to_axpr b True s) \\<longrightarrow>\n               pre C Q s) \\<and>\n           strip C = c\\<^sub>1;\n        \\<turnstile>\\<^sub>3\\<^sub>a {\\<lambda>(s, n).\n   P (s, n) \\<and> lmaps_to_axpr b False s}\n                                     c\\<^sub>2 { Q};\n        \\<exists>C.\n           vc C Q \\<and>\n           (\\<forall>s.\n               (case s of\n                (s, n) \\<Rightarrow>\n                  P (s, n) \\<and> lmaps_to_axpr b False s) \\<longrightarrow>\n               pre C Q s) \\<and>\n           strip C = c\\<^sub>2\\<rbrakk>\n       \\<Longrightarrow> \\<exists>C.\n                            vc C Q \\<and>\n                            (\\<forall>s.\n                                ((\\<lambda>(s, n).\n                                     P (s, n) \\<and>\n                                     vars b \\<subseteq> dom s) \\<and>*\n                                 $ 1)\n                                 s \\<longrightarrow>\n                                pre C Q s) \\<and>\n                            strip C = IF b THEN c\\<^sub>1 ELSE c\\<^sub>2\n 2. \\<And>P C Q F.\n       \\<lbrakk>\\<turnstile>\\<^sub>3\\<^sub>a {P} C { Q};\n        \\<exists>Ca.\n           vc Ca Q \\<and>\n           (\\<forall>s. P s \\<longrightarrow> pre Ca Q s) \\<and>\n           strip Ca = C\\<rbrakk>\n       \\<Longrightarrow> \\<exists>Ca.\n                            vc Ca (Q \\<and>* F) \\<and>\n                            (\\<forall>s.\n                                (P \\<and>* F) s \\<longrightarrow>\n                                pre Ca (Q \\<and>* F) s) \\<and>\n                            strip Ca = C\n 3. \\<And>P C\\<^sub>1 Q C\\<^sub>2 R.\n       \\<lbrakk>\\<turnstile>\\<^sub>3\\<^sub>a {P} C\\<^sub>1 { Q};\n        \\<exists>C.\n           vc C Q \\<and>\n           (\\<forall>s. P s \\<longrightarrow> pre C Q s) \\<and>\n           strip C = C\\<^sub>1;\n        \\<turnstile>\\<^sub>3\\<^sub>a {Q} C\\<^sub>2 { R};\n        \\<exists>C.\n           vc C R \\<and>\n           (\\<forall>s. Q s \\<longrightarrow> pre C R s) \\<and>\n           strip C = C\\<^sub>2\\<rbrakk>\n       \\<Longrightarrow> \\<exists>C.\n                            vc C R \\<and>\n                            (\\<forall>s.\n                                P s \\<longrightarrow> pre C R s) \\<and>\n                            strip C = C\\<^sub>1;; C\\<^sub>2\n 4. \\<And>P b C.\n       \\<lbrakk>\\<turnstile>\\<^sub>3\\<^sub>a {\\<lambda>(s, n).\n           P (s, n) \\<and> lmaps_to_axpr b True s}\n       C { (\\<lambda>(s, n).\n               P (s, n) \\<and> vars b \\<subseteq> dom s) \\<and>*\n           $ 1};\n        \\<exists>Ca.\n           vc Ca\n            ((\\<lambda>(s, n).\n                 P (s, n) \\<and> vars b \\<subseteq> dom s) \\<and>*\n             $ 1) \\<and>\n           (\\<forall>s.\n               (case s of\n                (s, n) \\<Rightarrow>\n                  P (s, n) \\<and> lmaps_to_axpr b True s) \\<longrightarrow>\n               pre Ca\n                ((\\<lambda>(s, n).\n                     P (s, n) \\<and> vars b \\<subseteq> dom s) \\<and>*\n                 $ 1)\n                s) \\<and>\n           strip Ca = C\\<rbrakk>\n       \\<Longrightarrow> \\<exists>Ca.\n                            vc Ca\n                             (\\<lambda>a.\n                                 case a of\n                                 (s, n) \\<Rightarrow>\n                                   P (s, n) \\<and>\n                                   lmaps_to_axpr b False s) \\<and>\n                            (\\<forall>s.\n                                ((\\<lambda>(s, n).\n                                     P (s, n) \\<and>\n                                     vars b \\<subseteq> dom s) \\<and>*\n                                 $ 1)\n                                 s \\<longrightarrow>\n                                pre Ca\n                                 (\\<lambda>a.\n                                     case a of\n                                     (s, n) \\<Rightarrow>\n P (s, n) \\<and> lmaps_to_axpr b False s)\n                                 s) \\<and>\n                            strip Ca = WHILE b DO C\n 5. \\<And>P c Q P' Q'.\n       \\<lbrakk>\\<turnstile>\\<^sub>3\\<^sub>a {P} c { Q};\n        \\<exists>C.\n           vc C Q \\<and>\n           (\\<forall>s. P s \\<longrightarrow> pre C Q s) \\<and> strip C = c;\n        \\<And>s n. P' (s, n) \\<Longrightarrow> P (s, n);\n        \\<And>s n. Q (s, n) \\<Longrightarrow> Q' (s, n)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>C.\n                            vc C Q' \\<and>\n                            (\\<forall>s.\n                                P' s \\<longrightarrow> pre C Q' s) \\<and>\n                            strip C = c", "from If(2)"], ["proof (chain)\npicking this:\n  \\<exists>C.\n     vc C Q \\<and>\n     (\\<forall>s.\n         (case s of\n          (s, n) \\<Rightarrow>\n            P (s, n) \\<and> lmaps_to_axpr b True s) \\<longrightarrow>\n         pre C Q s) \\<and>\n     strip C = c\\<^sub>1", "obtain C1 where A1: \"vc C1 Q\" \"strip C1 = c\\<^sub>1\" and \n    A2: \"\\<And>ps n. (P (ps, n) \\<and> lmaps_to_axpr b True ps) \\<longrightarrow> pre C1 Q (ps,n)\""], ["proof (prove)\nusing this:\n  \\<exists>C.\n     vc C Q \\<and>\n     (\\<forall>s.\n         (case s of\n          (s, n) \\<Rightarrow>\n            P (s, n) \\<and> lmaps_to_axpr b True s) \\<longrightarrow>\n         pre C Q s) \\<and>\n     strip C = c\\<^sub>1\n\ngoal (1 subgoal):\n 1. (\\<And>C1.\n        \\<lbrakk>vc C1 Q; strip C1 = c\\<^sub>1;\n         \\<And>ps n.\n            P (ps, n) \\<and> lmaps_to_axpr b True ps \\<longrightarrow>\n            pre C1 Q (ps, n)\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by blast"], ["proof (state)\nthis:\n  vc C1 Q\n  strip C1 = c\\<^sub>1\n  P (?ps, ?n) \\<and> lmaps_to_axpr b True ?ps \\<longrightarrow>\n  pre C1 Q (?ps, ?n)\n\ngoal (5 subgoals):\n 1. \\<And>P b c\\<^sub>1 Q c\\<^sub>2.\n       \\<lbrakk>\\<turnstile>\\<^sub>3\\<^sub>a {\\<lambda>(s, n).\n           P (s, n) \\<and> lmaps_to_axpr b True s}\n       c\\<^sub>1 { Q};\n        \\<exists>C.\n           vc C Q \\<and>\n           (\\<forall>s.\n               (case s of\n                (s, n) \\<Rightarrow>\n                  P (s, n) \\<and> lmaps_to_axpr b True s) \\<longrightarrow>\n               pre C Q s) \\<and>\n           strip C = c\\<^sub>1;\n        \\<turnstile>\\<^sub>3\\<^sub>a {\\<lambda>(s, n).\n   P (s, n) \\<and> lmaps_to_axpr b False s}\n                                     c\\<^sub>2 { Q};\n        \\<exists>C.\n           vc C Q \\<and>\n           (\\<forall>s.\n               (case s of\n                (s, n) \\<Rightarrow>\n                  P (s, n) \\<and> lmaps_to_axpr b False s) \\<longrightarrow>\n               pre C Q s) \\<and>\n           strip C = c\\<^sub>2\\<rbrakk>\n       \\<Longrightarrow> \\<exists>C.\n                            vc C Q \\<and>\n                            (\\<forall>s.\n                                ((\\<lambda>(s, n).\n                                     P (s, n) \\<and>\n                                     vars b \\<subseteq> dom s) \\<and>*\n                                 $ 1)\n                                 s \\<longrightarrow>\n                                pre C Q s) \\<and>\n                            strip C = IF b THEN c\\<^sub>1 ELSE c\\<^sub>2\n 2. \\<And>P C Q F.\n       \\<lbrakk>\\<turnstile>\\<^sub>3\\<^sub>a {P} C { Q};\n        \\<exists>Ca.\n           vc Ca Q \\<and>\n           (\\<forall>s. P s \\<longrightarrow> pre Ca Q s) \\<and>\n           strip Ca = C\\<rbrakk>\n       \\<Longrightarrow> \\<exists>Ca.\n                            vc Ca (Q \\<and>* F) \\<and>\n                            (\\<forall>s.\n                                (P \\<and>* F) s \\<longrightarrow>\n                                pre Ca (Q \\<and>* F) s) \\<and>\n                            strip Ca = C\n 3. \\<And>P C\\<^sub>1 Q C\\<^sub>2 R.\n       \\<lbrakk>\\<turnstile>\\<^sub>3\\<^sub>a {P} C\\<^sub>1 { Q};\n        \\<exists>C.\n           vc C Q \\<and>\n           (\\<forall>s. P s \\<longrightarrow> pre C Q s) \\<and>\n           strip C = C\\<^sub>1;\n        \\<turnstile>\\<^sub>3\\<^sub>a {Q} C\\<^sub>2 { R};\n        \\<exists>C.\n           vc C R \\<and>\n           (\\<forall>s. Q s \\<longrightarrow> pre C R s) \\<and>\n           strip C = C\\<^sub>2\\<rbrakk>\n       \\<Longrightarrow> \\<exists>C.\n                            vc C R \\<and>\n                            (\\<forall>s.\n                                P s \\<longrightarrow> pre C R s) \\<and>\n                            strip C = C\\<^sub>1;; C\\<^sub>2\n 4. \\<And>P b C.\n       \\<lbrakk>\\<turnstile>\\<^sub>3\\<^sub>a {\\<lambda>(s, n).\n           P (s, n) \\<and> lmaps_to_axpr b True s}\n       C { (\\<lambda>(s, n).\n               P (s, n) \\<and> vars b \\<subseteq> dom s) \\<and>*\n           $ 1};\n        \\<exists>Ca.\n           vc Ca\n            ((\\<lambda>(s, n).\n                 P (s, n) \\<and> vars b \\<subseteq> dom s) \\<and>*\n             $ 1) \\<and>\n           (\\<forall>s.\n               (case s of\n                (s, n) \\<Rightarrow>\n                  P (s, n) \\<and> lmaps_to_axpr b True s) \\<longrightarrow>\n               pre Ca\n                ((\\<lambda>(s, n).\n                     P (s, n) \\<and> vars b \\<subseteq> dom s) \\<and>*\n                 $ 1)\n                s) \\<and>\n           strip Ca = C\\<rbrakk>\n       \\<Longrightarrow> \\<exists>Ca.\n                            vc Ca\n                             (\\<lambda>a.\n                                 case a of\n                                 (s, n) \\<Rightarrow>\n                                   P (s, n) \\<and>\n                                   lmaps_to_axpr b False s) \\<and>\n                            (\\<forall>s.\n                                ((\\<lambda>(s, n).\n                                     P (s, n) \\<and>\n                                     vars b \\<subseteq> dom s) \\<and>*\n                                 $ 1)\n                                 s \\<longrightarrow>\n                                pre Ca\n                                 (\\<lambda>a.\n                                     case a of\n                                     (s, n) \\<Rightarrow>\n P (s, n) \\<and> lmaps_to_axpr b False s)\n                                 s) \\<and>\n                            strip Ca = WHILE b DO C\n 5. \\<And>P c Q P' Q'.\n       \\<lbrakk>\\<turnstile>\\<^sub>3\\<^sub>a {P} c { Q};\n        \\<exists>C.\n           vc C Q \\<and>\n           (\\<forall>s. P s \\<longrightarrow> pre C Q s) \\<and> strip C = c;\n        \\<And>s n. P' (s, n) \\<Longrightarrow> P (s, n);\n        \\<And>s n. Q (s, n) \\<Longrightarrow> Q' (s, n)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>C.\n                            vc C Q' \\<and>\n                            (\\<forall>s.\n                                P' s \\<longrightarrow> pre C Q' s) \\<and>\n                            strip C = c", "from If(4)"], ["proof (chain)\npicking this:\n  \\<exists>C.\n     vc C Q \\<and>\n     (\\<forall>s.\n         (case s of\n          (s, n) \\<Rightarrow>\n            P (s, n) \\<and> lmaps_to_axpr b False s) \\<longrightarrow>\n         pre C Q s) \\<and>\n     strip C = c\\<^sub>2", "obtain C2 where B1: \"vc C2 Q\" \"strip C2 = c\\<^sub>2\" and B2:\n    \"\\<And>ps n. (P (ps, n) \\<and> lmaps_to_axpr b False ps) \\<longrightarrow> pre C2 Q (ps,n)\""], ["proof (prove)\nusing this:\n  \\<exists>C.\n     vc C Q \\<and>\n     (\\<forall>s.\n         (case s of\n          (s, n) \\<Rightarrow>\n            P (s, n) \\<and> lmaps_to_axpr b False s) \\<longrightarrow>\n         pre C Q s) \\<and>\n     strip C = c\\<^sub>2\n\ngoal (1 subgoal):\n 1. (\\<And>C2.\n        \\<lbrakk>vc C2 Q; strip C2 = c\\<^sub>2;\n         \\<And>ps n.\n            P (ps, n) \\<and> lmaps_to_axpr b False ps \\<longrightarrow>\n            pre C2 Q (ps, n)\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by blast"], ["proof (state)\nthis:\n  vc C2 Q\n  strip C2 = c\\<^sub>2\n  P (?ps, ?n) \\<and> lmaps_to_axpr b False ?ps \\<longrightarrow>\n  pre C2 Q (?ps, ?n)\n\ngoal (5 subgoals):\n 1. \\<And>P b c\\<^sub>1 Q c\\<^sub>2.\n       \\<lbrakk>\\<turnstile>\\<^sub>3\\<^sub>a {\\<lambda>(s, n).\n           P (s, n) \\<and> lmaps_to_axpr b True s}\n       c\\<^sub>1 { Q};\n        \\<exists>C.\n           vc C Q \\<and>\n           (\\<forall>s.\n               (case s of\n                (s, n) \\<Rightarrow>\n                  P (s, n) \\<and> lmaps_to_axpr b True s) \\<longrightarrow>\n               pre C Q s) \\<and>\n           strip C = c\\<^sub>1;\n        \\<turnstile>\\<^sub>3\\<^sub>a {\\<lambda>(s, n).\n   P (s, n) \\<and> lmaps_to_axpr b False s}\n                                     c\\<^sub>2 { Q};\n        \\<exists>C.\n           vc C Q \\<and>\n           (\\<forall>s.\n               (case s of\n                (s, n) \\<Rightarrow>\n                  P (s, n) \\<and> lmaps_to_axpr b False s) \\<longrightarrow>\n               pre C Q s) \\<and>\n           strip C = c\\<^sub>2\\<rbrakk>\n       \\<Longrightarrow> \\<exists>C.\n                            vc C Q \\<and>\n                            (\\<forall>s.\n                                ((\\<lambda>(s, n).\n                                     P (s, n) \\<and>\n                                     vars b \\<subseteq> dom s) \\<and>*\n                                 $ 1)\n                                 s \\<longrightarrow>\n                                pre C Q s) \\<and>\n                            strip C = IF b THEN c\\<^sub>1 ELSE c\\<^sub>2\n 2. \\<And>P C Q F.\n       \\<lbrakk>\\<turnstile>\\<^sub>3\\<^sub>a {P} C { Q};\n        \\<exists>Ca.\n           vc Ca Q \\<and>\n           (\\<forall>s. P s \\<longrightarrow> pre Ca Q s) \\<and>\n           strip Ca = C\\<rbrakk>\n       \\<Longrightarrow> \\<exists>Ca.\n                            vc Ca (Q \\<and>* F) \\<and>\n                            (\\<forall>s.\n                                (P \\<and>* F) s \\<longrightarrow>\n                                pre Ca (Q \\<and>* F) s) \\<and>\n                            strip Ca = C\n 3. \\<And>P C\\<^sub>1 Q C\\<^sub>2 R.\n       \\<lbrakk>\\<turnstile>\\<^sub>3\\<^sub>a {P} C\\<^sub>1 { Q};\n        \\<exists>C.\n           vc C Q \\<and>\n           (\\<forall>s. P s \\<longrightarrow> pre C Q s) \\<and>\n           strip C = C\\<^sub>1;\n        \\<turnstile>\\<^sub>3\\<^sub>a {Q} C\\<^sub>2 { R};\n        \\<exists>C.\n           vc C R \\<and>\n           (\\<forall>s. Q s \\<longrightarrow> pre C R s) \\<and>\n           strip C = C\\<^sub>2\\<rbrakk>\n       \\<Longrightarrow> \\<exists>C.\n                            vc C R \\<and>\n                            (\\<forall>s.\n                                P s \\<longrightarrow> pre C R s) \\<and>\n                            strip C = C\\<^sub>1;; C\\<^sub>2\n 4. \\<And>P b C.\n       \\<lbrakk>\\<turnstile>\\<^sub>3\\<^sub>a {\\<lambda>(s, n).\n           P (s, n) \\<and> lmaps_to_axpr b True s}\n       C { (\\<lambda>(s, n).\n               P (s, n) \\<and> vars b \\<subseteq> dom s) \\<and>*\n           $ 1};\n        \\<exists>Ca.\n           vc Ca\n            ((\\<lambda>(s, n).\n                 P (s, n) \\<and> vars b \\<subseteq> dom s) \\<and>*\n             $ 1) \\<and>\n           (\\<forall>s.\n               (case s of\n                (s, n) \\<Rightarrow>\n                  P (s, n) \\<and> lmaps_to_axpr b True s) \\<longrightarrow>\n               pre Ca\n                ((\\<lambda>(s, n).\n                     P (s, n) \\<and> vars b \\<subseteq> dom s) \\<and>*\n                 $ 1)\n                s) \\<and>\n           strip Ca = C\\<rbrakk>\n       \\<Longrightarrow> \\<exists>Ca.\n                            vc Ca\n                             (\\<lambda>a.\n                                 case a of\n                                 (s, n) \\<Rightarrow>\n                                   P (s, n) \\<and>\n                                   lmaps_to_axpr b False s) \\<and>\n                            (\\<forall>s.\n                                ((\\<lambda>(s, n).\n                                     P (s, n) \\<and>\n                                     vars b \\<subseteq> dom s) \\<and>*\n                                 $ 1)\n                                 s \\<longrightarrow>\n                                pre Ca\n                                 (\\<lambda>a.\n                                     case a of\n                                     (s, n) \\<Rightarrow>\n P (s, n) \\<and> lmaps_to_axpr b False s)\n                                 s) \\<and>\n                            strip Ca = WHILE b DO C\n 5. \\<And>P c Q P' Q'.\n       \\<lbrakk>\\<turnstile>\\<^sub>3\\<^sub>a {P} c { Q};\n        \\<exists>C.\n           vc C Q \\<and>\n           (\\<forall>s. P s \\<longrightarrow> pre C Q s) \\<and> strip C = c;\n        \\<And>s n. P' (s, n) \\<Longrightarrow> P (s, n);\n        \\<And>s n. Q (s, n) \\<Longrightarrow> Q' (s, n)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>C.\n                            vc C Q' \\<and>\n                            (\\<forall>s.\n                                P' s \\<longrightarrow> pre C Q' s) \\<and>\n                            strip C = c", "show ?case"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>C.\n       vc C Q \\<and>\n       (\\<forall>s.\n           ((\\<lambda>(s, n).\n                P (s, n) \\<and> vars b \\<subseteq> dom s) \\<and>*\n            $ 1)\n            s \\<longrightarrow>\n           pre C Q s) \\<and>\n       strip C = IF b THEN c\\<^sub>1 ELSE c\\<^sub>2", "apply(rule exI[where x=\"Aif b C1 C2\"])"], ["proof (prove)\ngoal (1 subgoal):\n 1. vc (IF b THEN C1 ELSE C2) Q \\<and>\n    (\\<forall>s.\n        ((\\<lambda>(s, n). P (s, n) \\<and> vars b \\<subseteq> dom s) \\<and>*\n         $ 1)\n         s \\<longrightarrow>\n        pre (IF b THEN C1 ELSE C2) Q s) \\<and>\n    strip (IF b THEN C1 ELSE C2) = IF b THEN c\\<^sub>1 ELSE c\\<^sub>2", "using A1 B1"], ["proof (prove)\nusing this:\n  vc C1 Q\n  strip C1 = c\\<^sub>1\n  vc C2 Q\n  strip C2 = c\\<^sub>2\n\ngoal (1 subgoal):\n 1. vc (IF b THEN C1 ELSE C2) Q \\<and>\n    (\\<forall>s.\n        ((\\<lambda>(s, n). P (s, n) \\<and> vars b \\<subseteq> dom s) \\<and>*\n         $ 1)\n         s \\<longrightarrow>\n        pre (IF b THEN C1 ELSE C2) Q s) \\<and>\n    strip (IF b THEN C1 ELSE C2) = IF b THEN c\\<^sub>1 ELSE c\\<^sub>2", "apply auto"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>a ba.\n       \\<lbrakk>vc C1 Q; vc C2 Q; c\\<^sub>1 = strip C1;\n        c\\<^sub>2 = strip C2;\n        ((\\<lambda>(s, n). P (s, n) \\<and> vars b \\<subseteq> dom s) \\<and>*\n         $ (Suc 0))\n         (a, ba)\\<rbrakk>\n       \\<Longrightarrow> ($ (Suc 0) \\<and>*\n                          (\\<lambda>(ps, n).\n                              (pbval b ps \\<longrightarrow>\n                               vars b \\<subseteq> dom ps \\<and>\n                               pre C1 Q (ps, n)) \\<and>\n                              (\\<not> pbval b ps \\<longrightarrow>\n                               vars b \\<subseteq> dom ps \\<and>\n                               pre C2 Q (ps, n))))\n                          (a, ba)", "subgoal for ps n"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>vc C1 Q; vc C2 Q; c\\<^sub>1 = strip C1; c\\<^sub>2 = strip C2;\n     ((\\<lambda>(s, n). P (s, n) \\<and> vars b \\<subseteq> dom s) \\<and>*\n      $ (Suc 0))\n      (ps, n)\\<rbrakk>\n    \\<Longrightarrow> ($ (Suc 0) \\<and>*\n                       (\\<lambda>(ps, n).\n                           (pbval b ps \\<longrightarrow>\n                            vars b \\<subseteq> dom ps \\<and>\n                            pre C1 Q (ps, n)) \\<and>\n                           (\\<not> pbval b ps \\<longrightarrow>\n                            vars b \\<subseteq> dom ps \\<and>\n                            pre C2 Q (ps, n))))\n                       (ps, n)", "unfolding sep_conj_def dollar_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>vc C1 Q; vc C2 Q; c\\<^sub>1 = strip C1; c\\<^sub>2 = strip C2;\n     \\<exists>x y.\n        x ## y \\<and>\n        (ps, n) = x + y \\<and>\n        (case x of\n         (s, n) \\<Rightarrow>\n           P (s, n) \\<and> vars b \\<subseteq> dom s) \\<and>\n        (case y of (s, c) \\<Rightarrow> s = 0 \\<and> c = Suc 0)\\<rbrakk>\n    \\<Longrightarrow> \\<exists>x y.\n                         x ## y \\<and>\n                         (ps, n) = x + y \\<and>\n                         (case x of\n                          (s, c) \\<Rightarrow>\n                            s = 0 \\<and> c = Suc 0) \\<and>\n                         (case y of\n                          (ps, n) \\<Rightarrow>\n                            (pbval b ps \\<longrightarrow>\n                             vars b \\<subseteq> dom ps \\<and>\n                             pre C1 Q (ps, n)) \\<and>\n                            (\\<not> pbval b ps \\<longrightarrow>\n                             vars b \\<subseteq> dom ps \\<and>\n                             pre C2 Q (ps, n)))", "apply auto"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>ba.\n       \\<lbrakk>vc C1 Q; vc C2 Q; c\\<^sub>1 = strip C1;\n        c\\<^sub>2 = strip C2; n = Suc ba; P (ps, ba);\n        vars b \\<subseteq> dom ps\\<rbrakk>\n       \\<Longrightarrow> \\<exists>a bb aa.\n                            a ## aa \\<and>\n                            ps = a + aa \\<and>\n                            (\\<exists>bc.\n                                Suc ba = bb + bc \\<and>\n                                a = 0 \\<and>\n                                bb = Suc 0 \\<and>\n                                (pbval b aa \\<longrightarrow>\n                                 vars b \\<subseteq> dom aa \\<and>\n                                 pre C1 Q (aa, bc)) \\<and>\n                                (\\<not> pbval b aa \\<longrightarrow>\n                                 vars b \\<subseteq> dom aa \\<and>\n                                 pre C2 Q (aa, bc)))", "apply(rule exI[where x=\"0\"])"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>ba.\n       \\<lbrakk>vc C1 Q; vc C2 Q; c\\<^sub>1 = strip C1;\n        c\\<^sub>2 = strip C2; n = Suc ba; P (ps, ba);\n        vars b \\<subseteq> dom ps\\<rbrakk>\n       \\<Longrightarrow> \\<exists>bb a.\n                            0 ## a \\<and>\n                            ps = 0 + a \\<and>\n                            (\\<exists>bc.\n                                Suc ba = bb + bc \\<and>\n                                0 = 0 \\<and>\n                                bb = Suc 0 \\<and>\n                                (pbval b a \\<longrightarrow>\n                                 vars b \\<subseteq> dom a \\<and>\n                                 pre C1 Q (a, bc)) \\<and>\n                                (\\<not> pbval b a \\<longrightarrow>\n                                 vars b \\<subseteq> dom a \\<and>\n                                 pre C2 Q (a, bc)))", "apply(rule exI[where x=\"1\"])"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>ba.\n       \\<lbrakk>vc C1 Q; vc C2 Q; c\\<^sub>1 = strip C1;\n        c\\<^sub>2 = strip C2; n = Suc ba; P (ps, ba);\n        vars b \\<subseteq> dom ps\\<rbrakk>\n       \\<Longrightarrow> \\<exists>a.\n                            0 ## a \\<and>\n                            ps = 0 + a \\<and>\n                            (\\<exists>bb.\n                                Suc ba = 1 + bb \\<and>\n                                0 = 0 \\<and>\n                                1 = Suc 0 \\<and>\n                                (pbval b a \\<longrightarrow>\n                                 vars b \\<subseteq> dom a \\<and>\n                                 pre C1 Q (a, bb)) \\<and>\n                                (\\<not> pbval b a \\<longrightarrow>\n                                 vars b \\<subseteq> dom a \\<and>\n                                 pre C2 Q (a, bb)))", "apply(rule exI[where x=\"ps\"])"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>ba.\n       \\<lbrakk>vc C1 Q; vc C2 Q; c\\<^sub>1 = strip C1;\n        c\\<^sub>2 = strip C2; n = Suc ba; P (ps, ba);\n        vars b \\<subseteq> dom ps\\<rbrakk>\n       \\<Longrightarrow> 0 ## ps \\<and>\n                         ps = 0 + ps \\<and>\n                         (\\<exists>bb.\n                             Suc ba = 1 + bb \\<and>\n                             0 = 0 \\<and>\n                             1 = Suc 0 \\<and>\n                             (pbval b ps \\<longrightarrow>\n                              vars b \\<subseteq> dom ps \\<and>\n                              pre C1 Q (ps, bb)) \\<and>\n                             (\\<not> pbval b ps \\<longrightarrow>\n                              vars b \\<subseteq> dom ps \\<and>\n                              pre C2 Q (ps, bb)))", "using A2 B2"], ["proof (prove)\nusing this:\n  P (?ps, ?n) \\<and> lmaps_to_axpr b True ?ps \\<longrightarrow>\n  pre C1 Q (?ps, ?n)\n  P (?ps, ?n) \\<and> lmaps_to_axpr b False ?ps \\<longrightarrow>\n  pre C2 Q (?ps, ?n)\n\ngoal (1 subgoal):\n 1. \\<And>ba.\n       \\<lbrakk>vc C1 Q; vc C2 Q; c\\<^sub>1 = strip C1;\n        c\\<^sub>2 = strip C2; n = Suc ba; P (ps, ba);\n        vars b \\<subseteq> dom ps\\<rbrakk>\n       \\<Longrightarrow> 0 ## ps \\<and>\n                         ps = 0 + ps \\<and>\n                         (\\<exists>bb.\n                             Suc ba = 1 + bb \\<and>\n                             0 = 0 \\<and>\n                             1 = Suc 0 \\<and>\n                             (pbval b ps \\<longrightarrow>\n                              vars b \\<subseteq> dom ps \\<and>\n                              pre C1 Q (ps, bb)) \\<and>\n                             (\\<not> pbval b ps \\<longrightarrow>\n                              vars b \\<subseteq> dom ps \\<and>\n                              pre C2 Q (ps, bb)))", "by auto"], ["proof (prove)\ngoal:\nNo subgoals!", "done"], ["proof (state)\nthis:\n  \\<exists>C.\n     vc C Q \\<and>\n     (\\<forall>s.\n         ((\\<lambda>(s, n).\n              P (s, n) \\<and> vars b \\<subseteq> dom s) \\<and>*\n          $ 1)\n          s \\<longrightarrow>\n         pre C Q s) \\<and>\n     strip C = IF b THEN c\\<^sub>1 ELSE c\\<^sub>2\n\ngoal (4 subgoals):\n 1. \\<And>P C Q F.\n       \\<lbrakk>\\<turnstile>\\<^sub>3\\<^sub>a {P} C { Q};\n        \\<exists>Ca.\n           vc Ca Q \\<and>\n           (\\<forall>s. P s \\<longrightarrow> pre Ca Q s) \\<and>\n           strip Ca = C\\<rbrakk>\n       \\<Longrightarrow> \\<exists>Ca.\n                            vc Ca (Q \\<and>* F) \\<and>\n                            (\\<forall>s.\n                                (P \\<and>* F) s \\<longrightarrow>\n                                pre Ca (Q \\<and>* F) s) \\<and>\n                            strip Ca = C\n 2. \\<And>P C\\<^sub>1 Q C\\<^sub>2 R.\n       \\<lbrakk>\\<turnstile>\\<^sub>3\\<^sub>a {P} C\\<^sub>1 { Q};\n        \\<exists>C.\n           vc C Q \\<and>\n           (\\<forall>s. P s \\<longrightarrow> pre C Q s) \\<and>\n           strip C = C\\<^sub>1;\n        \\<turnstile>\\<^sub>3\\<^sub>a {Q} C\\<^sub>2 { R};\n        \\<exists>C.\n           vc C R \\<and>\n           (\\<forall>s. Q s \\<longrightarrow> pre C R s) \\<and>\n           strip C = C\\<^sub>2\\<rbrakk>\n       \\<Longrightarrow> \\<exists>C.\n                            vc C R \\<and>\n                            (\\<forall>s.\n                                P s \\<longrightarrow> pre C R s) \\<and>\n                            strip C = C\\<^sub>1;; C\\<^sub>2\n 3. \\<And>P b C.\n       \\<lbrakk>\\<turnstile>\\<^sub>3\\<^sub>a {\\<lambda>(s, n).\n           P (s, n) \\<and> lmaps_to_axpr b True s}\n       C { (\\<lambda>(s, n).\n               P (s, n) \\<and> vars b \\<subseteq> dom s) \\<and>*\n           $ 1};\n        \\<exists>Ca.\n           vc Ca\n            ((\\<lambda>(s, n).\n                 P (s, n) \\<and> vars b \\<subseteq> dom s) \\<and>*\n             $ 1) \\<and>\n           (\\<forall>s.\n               (case s of\n                (s, n) \\<Rightarrow>\n                  P (s, n) \\<and> lmaps_to_axpr b True s) \\<longrightarrow>\n               pre Ca\n                ((\\<lambda>(s, n).\n                     P (s, n) \\<and> vars b \\<subseteq> dom s) \\<and>*\n                 $ 1)\n                s) \\<and>\n           strip Ca = C\\<rbrakk>\n       \\<Longrightarrow> \\<exists>Ca.\n                            vc Ca\n                             (\\<lambda>a.\n                                 case a of\n                                 (s, n) \\<Rightarrow>\n                                   P (s, n) \\<and>\n                                   lmaps_to_axpr b False s) \\<and>\n                            (\\<forall>s.\n                                ((\\<lambda>(s, n).\n                                     P (s, n) \\<and>\n                                     vars b \\<subseteq> dom s) \\<and>*\n                                 $ 1)\n                                 s \\<longrightarrow>\n                                pre Ca\n                                 (\\<lambda>a.\n                                     case a of\n                                     (s, n) \\<Rightarrow>\n P (s, n) \\<and> lmaps_to_axpr b False s)\n                                 s) \\<and>\n                            strip Ca = WHILE b DO C\n 4. \\<And>P c Q P' Q'.\n       \\<lbrakk>\\<turnstile>\\<^sub>3\\<^sub>a {P} c { Q};\n        \\<exists>C.\n           vc C Q \\<and>\n           (\\<forall>s. P s \\<longrightarrow> pre C Q s) \\<and> strip C = c;\n        \\<And>s n. P' (s, n) \\<Longrightarrow> P (s, n);\n        \\<And>s n. Q (s, n) \\<Longrightarrow> Q' (s, n)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>C.\n                            vc C Q' \\<and>\n                            (\\<forall>s.\n                                P' s \\<longrightarrow> pre C Q' s) \\<and>\n                            strip C = c", "next"], ["proof (state)\ngoal (4 subgoals):\n 1. \\<And>P C Q F.\n       \\<lbrakk>\\<turnstile>\\<^sub>3\\<^sub>a {P} C { Q};\n        \\<exists>Ca.\n           vc Ca Q \\<and>\n           (\\<forall>s. P s \\<longrightarrow> pre Ca Q s) \\<and>\n           strip Ca = C\\<rbrakk>\n       \\<Longrightarrow> \\<exists>Ca.\n                            vc Ca (Q \\<and>* F) \\<and>\n                            (\\<forall>s.\n                                (P \\<and>* F) s \\<longrightarrow>\n                                pre Ca (Q \\<and>* F) s) \\<and>\n                            strip Ca = C\n 2. \\<And>P C\\<^sub>1 Q C\\<^sub>2 R.\n       \\<lbrakk>\\<turnstile>\\<^sub>3\\<^sub>a {P} C\\<^sub>1 { Q};\n        \\<exists>C.\n           vc C Q \\<and>\n           (\\<forall>s. P s \\<longrightarrow> pre C Q s) \\<and>\n           strip C = C\\<^sub>1;\n        \\<turnstile>\\<^sub>3\\<^sub>a {Q} C\\<^sub>2 { R};\n        \\<exists>C.\n           vc C R \\<and>\n           (\\<forall>s. Q s \\<longrightarrow> pre C R s) \\<and>\n           strip C = C\\<^sub>2\\<rbrakk>\n       \\<Longrightarrow> \\<exists>C.\n                            vc C R \\<and>\n                            (\\<forall>s.\n                                P s \\<longrightarrow> pre C R s) \\<and>\n                            strip C = C\\<^sub>1;; C\\<^sub>2\n 3. \\<And>P b C.\n       \\<lbrakk>\\<turnstile>\\<^sub>3\\<^sub>a {\\<lambda>(s, n).\n           P (s, n) \\<and> lmaps_to_axpr b True s}\n       C { (\\<lambda>(s, n).\n               P (s, n) \\<and> vars b \\<subseteq> dom s) \\<and>*\n           $ 1};\n        \\<exists>Ca.\n           vc Ca\n            ((\\<lambda>(s, n).\n                 P (s, n) \\<and> vars b \\<subseteq> dom s) \\<and>*\n             $ 1) \\<and>\n           (\\<forall>s.\n               (case s of\n                (s, n) \\<Rightarrow>\n                  P (s, n) \\<and> lmaps_to_axpr b True s) \\<longrightarrow>\n               pre Ca\n                ((\\<lambda>(s, n).\n                     P (s, n) \\<and> vars b \\<subseteq> dom s) \\<and>*\n                 $ 1)\n                s) \\<and>\n           strip Ca = C\\<rbrakk>\n       \\<Longrightarrow> \\<exists>Ca.\n                            vc Ca\n                             (\\<lambda>a.\n                                 case a of\n                                 (s, n) \\<Rightarrow>\n                                   P (s, n) \\<and>\n                                   lmaps_to_axpr b False s) \\<and>\n                            (\\<forall>s.\n                                ((\\<lambda>(s, n).\n                                     P (s, n) \\<and>\n                                     vars b \\<subseteq> dom s) \\<and>*\n                                 $ 1)\n                                 s \\<longrightarrow>\n                                pre Ca\n                                 (\\<lambda>a.\n                                     case a of\n                                     (s, n) \\<Rightarrow>\n P (s, n) \\<and> lmaps_to_axpr b False s)\n                                 s) \\<and>\n                            strip Ca = WHILE b DO C\n 4. \\<And>P c Q P' Q'.\n       \\<lbrakk>\\<turnstile>\\<^sub>3\\<^sub>a {P} c { Q};\n        \\<exists>C.\n           vc C Q \\<and>\n           (\\<forall>s. P s \\<longrightarrow> pre C Q s) \\<and> strip C = c;\n        \\<And>s n. P' (s, n) \\<Longrightarrow> P (s, n);\n        \\<And>s n. Q (s, n) \\<Longrightarrow> Q' (s, n)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>C.\n                            vc C Q' \\<and>\n                            (\\<forall>s.\n                                P' s \\<longrightarrow> pre C Q' s) \\<and>\n                            strip C = c", "case (Frame P C Q F)"], ["proof (state)\nthis:\n  \\<turnstile>\\<^sub>3\\<^sub>a {P} C { Q}\n  \\<exists>Ca.\n     vc Ca Q \\<and>\n     (\\<forall>s. P s \\<longrightarrow> pre Ca Q s) \\<and> strip Ca = C\n\ngoal (4 subgoals):\n 1. \\<And>P C Q F.\n       \\<lbrakk>\\<turnstile>\\<^sub>3\\<^sub>a {P} C { Q};\n        \\<exists>Ca.\n           vc Ca Q \\<and>\n           (\\<forall>s. P s \\<longrightarrow> pre Ca Q s) \\<and>\n           strip Ca = C\\<rbrakk>\n       \\<Longrightarrow> \\<exists>Ca.\n                            vc Ca (Q \\<and>* F) \\<and>\n                            (\\<forall>s.\n                                (P \\<and>* F) s \\<longrightarrow>\n                                pre Ca (Q \\<and>* F) s) \\<and>\n                            strip Ca = C\n 2. \\<And>P C\\<^sub>1 Q C\\<^sub>2 R.\n       \\<lbrakk>\\<turnstile>\\<^sub>3\\<^sub>a {P} C\\<^sub>1 { Q};\n        \\<exists>C.\n           vc C Q \\<and>\n           (\\<forall>s. P s \\<longrightarrow> pre C Q s) \\<and>\n           strip C = C\\<^sub>1;\n        \\<turnstile>\\<^sub>3\\<^sub>a {Q} C\\<^sub>2 { R};\n        \\<exists>C.\n           vc C R \\<and>\n           (\\<forall>s. Q s \\<longrightarrow> pre C R s) \\<and>\n           strip C = C\\<^sub>2\\<rbrakk>\n       \\<Longrightarrow> \\<exists>C.\n                            vc C R \\<and>\n                            (\\<forall>s.\n                                P s \\<longrightarrow> pre C R s) \\<and>\n                            strip C = C\\<^sub>1;; C\\<^sub>2\n 3. \\<And>P b C.\n       \\<lbrakk>\\<turnstile>\\<^sub>3\\<^sub>a {\\<lambda>(s, n).\n           P (s, n) \\<and> lmaps_to_axpr b True s}\n       C { (\\<lambda>(s, n).\n               P (s, n) \\<and> vars b \\<subseteq> dom s) \\<and>*\n           $ 1};\n        \\<exists>Ca.\n           vc Ca\n            ((\\<lambda>(s, n).\n                 P (s, n) \\<and> vars b \\<subseteq> dom s) \\<and>*\n             $ 1) \\<and>\n           (\\<forall>s.\n               (case s of\n                (s, n) \\<Rightarrow>\n                  P (s, n) \\<and> lmaps_to_axpr b True s) \\<longrightarrow>\n               pre Ca\n                ((\\<lambda>(s, n).\n                     P (s, n) \\<and> vars b \\<subseteq> dom s) \\<and>*\n                 $ 1)\n                s) \\<and>\n           strip Ca = C\\<rbrakk>\n       \\<Longrightarrow> \\<exists>Ca.\n                            vc Ca\n                             (\\<lambda>a.\n                                 case a of\n                                 (s, n) \\<Rightarrow>\n                                   P (s, n) \\<and>\n                                   lmaps_to_axpr b False s) \\<and>\n                            (\\<forall>s.\n                                ((\\<lambda>(s, n).\n                                     P (s, n) \\<and>\n                                     vars b \\<subseteq> dom s) \\<and>*\n                                 $ 1)\n                                 s \\<longrightarrow>\n                                pre Ca\n                                 (\\<lambda>a.\n                                     case a of\n                                     (s, n) \\<Rightarrow>\n P (s, n) \\<and> lmaps_to_axpr b False s)\n                                 s) \\<and>\n                            strip Ca = WHILE b DO C\n 4. \\<And>P c Q P' Q'.\n       \\<lbrakk>\\<turnstile>\\<^sub>3\\<^sub>a {P} c { Q};\n        \\<exists>C.\n           vc C Q \\<and>\n           (\\<forall>s. P s \\<longrightarrow> pre C Q s) \\<and> strip C = c;\n        \\<And>s n. P' (s, n) \\<Longrightarrow> P (s, n);\n        \\<And>s n. Q (s, n) \\<Longrightarrow> Q' (s, n)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>C.\n                            vc C Q' \\<and>\n                            (\\<forall>s.\n                                P' s \\<longrightarrow> pre C Q' s) \\<and>\n                            strip C = c", "then"], ["proof (chain)\npicking this:\n  \\<turnstile>\\<^sub>3\\<^sub>a {P} C { Q}\n  \\<exists>Ca.\n     vc Ca Q \\<and>\n     (\\<forall>s. P s \\<longrightarrow> pre Ca Q s) \\<and> strip Ca = C", "obtain C' where vc: \"vc C' Q\" and pre: \"(\\<forall>s. P s \\<longrightarrow> pre C' Q s)\"\n      and strip: \"strip C' = C\""], ["proof (prove)\nusing this:\n  \\<turnstile>\\<^sub>3\\<^sub>a {P} C { Q}\n  \\<exists>Ca.\n     vc Ca Q \\<and>\n     (\\<forall>s. P s \\<longrightarrow> pre Ca Q s) \\<and> strip Ca = C\n\ngoal (1 subgoal):\n 1. (\\<And>C'.\n        \\<lbrakk>vc C' Q; \\<forall>s. P s \\<longrightarrow> pre C' Q s;\n         strip C' = C\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  vc C' Q\n  \\<forall>s. P s \\<longrightarrow> pre C' Q s\n  strip C' = C\n\ngoal (4 subgoals):\n 1. \\<And>P C Q F.\n       \\<lbrakk>\\<turnstile>\\<^sub>3\\<^sub>a {P} C { Q};\n        \\<exists>Ca.\n           vc Ca Q \\<and>\n           (\\<forall>s. P s \\<longrightarrow> pre Ca Q s) \\<and>\n           strip Ca = C\\<rbrakk>\n       \\<Longrightarrow> \\<exists>Ca.\n                            vc Ca (Q \\<and>* F) \\<and>\n                            (\\<forall>s.\n                                (P \\<and>* F) s \\<longrightarrow>\n                                pre Ca (Q \\<and>* F) s) \\<and>\n                            strip Ca = C\n 2. \\<And>P C\\<^sub>1 Q C\\<^sub>2 R.\n       \\<lbrakk>\\<turnstile>\\<^sub>3\\<^sub>a {P} C\\<^sub>1 { Q};\n        \\<exists>C.\n           vc C Q \\<and>\n           (\\<forall>s. P s \\<longrightarrow> pre C Q s) \\<and>\n           strip C = C\\<^sub>1;\n        \\<turnstile>\\<^sub>3\\<^sub>a {Q} C\\<^sub>2 { R};\n        \\<exists>C.\n           vc C R \\<and>\n           (\\<forall>s. Q s \\<longrightarrow> pre C R s) \\<and>\n           strip C = C\\<^sub>2\\<rbrakk>\n       \\<Longrightarrow> \\<exists>C.\n                            vc C R \\<and>\n                            (\\<forall>s.\n                                P s \\<longrightarrow> pre C R s) \\<and>\n                            strip C = C\\<^sub>1;; C\\<^sub>2\n 3. \\<And>P b C.\n       \\<lbrakk>\\<turnstile>\\<^sub>3\\<^sub>a {\\<lambda>(s, n).\n           P (s, n) \\<and> lmaps_to_axpr b True s}\n       C { (\\<lambda>(s, n).\n               P (s, n) \\<and> vars b \\<subseteq> dom s) \\<and>*\n           $ 1};\n        \\<exists>Ca.\n           vc Ca\n            ((\\<lambda>(s, n).\n                 P (s, n) \\<and> vars b \\<subseteq> dom s) \\<and>*\n             $ 1) \\<and>\n           (\\<forall>s.\n               (case s of\n                (s, n) \\<Rightarrow>\n                  P (s, n) \\<and> lmaps_to_axpr b True s) \\<longrightarrow>\n               pre Ca\n                ((\\<lambda>(s, n).\n                     P (s, n) \\<and> vars b \\<subseteq> dom s) \\<and>*\n                 $ 1)\n                s) \\<and>\n           strip Ca = C\\<rbrakk>\n       \\<Longrightarrow> \\<exists>Ca.\n                            vc Ca\n                             (\\<lambda>a.\n                                 case a of\n                                 (s, n) \\<Rightarrow>\n                                   P (s, n) \\<and>\n                                   lmaps_to_axpr b False s) \\<and>\n                            (\\<forall>s.\n                                ((\\<lambda>(s, n).\n                                     P (s, n) \\<and>\n                                     vars b \\<subseteq> dom s) \\<and>*\n                                 $ 1)\n                                 s \\<longrightarrow>\n                                pre Ca\n                                 (\\<lambda>a.\n                                     case a of\n                                     (s, n) \\<Rightarrow>\n P (s, n) \\<and> lmaps_to_axpr b False s)\n                                 s) \\<and>\n                            strip Ca = WHILE b DO C\n 4. \\<And>P c Q P' Q'.\n       \\<lbrakk>\\<turnstile>\\<^sub>3\\<^sub>a {P} c { Q};\n        \\<exists>C.\n           vc C Q \\<and>\n           (\\<forall>s. P s \\<longrightarrow> pre C Q s) \\<and> strip C = c;\n        \\<And>s n. P' (s, n) \\<Longrightarrow> P (s, n);\n        \\<And>s n. Q (s, n) \\<Longrightarrow> Q' (s, n)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>C.\n                            vc C Q' \\<and>\n                            (\\<forall>s.\n                                P' s \\<longrightarrow> pre C Q' s) \\<and>\n                            strip C = c", "show ?case"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>Ca.\n       vc Ca (Q \\<and>* F) \\<and>\n       (\\<forall>s.\n           (P \\<and>* F) s \\<longrightarrow> pre Ca (Q \\<and>* F) s) \\<and>\n       strip Ca = C", "using pre_Frame[OF pre vc] strip"], ["proof (prove)\nusing this:\n  \\<exists>C'a.\n     strip C' = strip C'a \\<and>\n     vc C'a (Q \\<and>* ?F) \\<and>\n     (\\<forall>s.\n         (P \\<and>* ?F) s \\<longrightarrow> pre C'a (Q \\<and>* ?F) s)\n  strip C' = C\n\ngoal (1 subgoal):\n 1. \\<exists>Ca.\n       vc Ca (Q \\<and>* F) \\<and>\n       (\\<forall>s.\n           (P \\<and>* F) s \\<longrightarrow> pre Ca (Q \\<and>* F) s) \\<and>\n       strip Ca = C", "by metis"], ["proof (state)\nthis:\n  \\<exists>Ca.\n     vc Ca (Q \\<and>* F) \\<and>\n     (\\<forall>s.\n         (P \\<and>* F) s \\<longrightarrow> pre Ca (Q \\<and>* F) s) \\<and>\n     strip Ca = C\n\ngoal (3 subgoals):\n 1. \\<And>P C\\<^sub>1 Q C\\<^sub>2 R.\n       \\<lbrakk>\\<turnstile>\\<^sub>3\\<^sub>a {P} C\\<^sub>1 { Q};\n        \\<exists>C.\n           vc C Q \\<and>\n           (\\<forall>s. P s \\<longrightarrow> pre C Q s) \\<and>\n           strip C = C\\<^sub>1;\n        \\<turnstile>\\<^sub>3\\<^sub>a {Q} C\\<^sub>2 { R};\n        \\<exists>C.\n           vc C R \\<and>\n           (\\<forall>s. Q s \\<longrightarrow> pre C R s) \\<and>\n           strip C = C\\<^sub>2\\<rbrakk>\n       \\<Longrightarrow> \\<exists>C.\n                            vc C R \\<and>\n                            (\\<forall>s.\n                                P s \\<longrightarrow> pre C R s) \\<and>\n                            strip C = C\\<^sub>1;; C\\<^sub>2\n 2. \\<And>P b C.\n       \\<lbrakk>\\<turnstile>\\<^sub>3\\<^sub>a {\\<lambda>(s, n).\n           P (s, n) \\<and> lmaps_to_axpr b True s}\n       C { (\\<lambda>(s, n).\n               P (s, n) \\<and> vars b \\<subseteq> dom s) \\<and>*\n           $ 1};\n        \\<exists>Ca.\n           vc Ca\n            ((\\<lambda>(s, n).\n                 P (s, n) \\<and> vars b \\<subseteq> dom s) \\<and>*\n             $ 1) \\<and>\n           (\\<forall>s.\n               (case s of\n                (s, n) \\<Rightarrow>\n                  P (s, n) \\<and> lmaps_to_axpr b True s) \\<longrightarrow>\n               pre Ca\n                ((\\<lambda>(s, n).\n                     P (s, n) \\<and> vars b \\<subseteq> dom s) \\<and>*\n                 $ 1)\n                s) \\<and>\n           strip Ca = C\\<rbrakk>\n       \\<Longrightarrow> \\<exists>Ca.\n                            vc Ca\n                             (\\<lambda>a.\n                                 case a of\n                                 (s, n) \\<Rightarrow>\n                                   P (s, n) \\<and>\n                                   lmaps_to_axpr b False s) \\<and>\n                            (\\<forall>s.\n                                ((\\<lambda>(s, n).\n                                     P (s, n) \\<and>\n                                     vars b \\<subseteq> dom s) \\<and>*\n                                 $ 1)\n                                 s \\<longrightarrow>\n                                pre Ca\n                                 (\\<lambda>a.\n                                     case a of\n                                     (s, n) \\<Rightarrow>\n P (s, n) \\<and> lmaps_to_axpr b False s)\n                                 s) \\<and>\n                            strip Ca = WHILE b DO C\n 3. \\<And>P c Q P' Q'.\n       \\<lbrakk>\\<turnstile>\\<^sub>3\\<^sub>a {P} c { Q};\n        \\<exists>C.\n           vc C Q \\<and>\n           (\\<forall>s. P s \\<longrightarrow> pre C Q s) \\<and> strip C = c;\n        \\<And>s n. P' (s, n) \\<Longrightarrow> P (s, n);\n        \\<And>s n. Q (s, n) \\<Longrightarrow> Q' (s, n)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>C.\n                            vc C Q' \\<and>\n                            (\\<forall>s.\n                                P' s \\<longrightarrow> pre C Q' s) \\<and>\n                            strip C = c", "next"], ["proof (state)\ngoal (3 subgoals):\n 1. \\<And>P C\\<^sub>1 Q C\\<^sub>2 R.\n       \\<lbrakk>\\<turnstile>\\<^sub>3\\<^sub>a {P} C\\<^sub>1 { Q};\n        \\<exists>C.\n           vc C Q \\<and>\n           (\\<forall>s. P s \\<longrightarrow> pre C Q s) \\<and>\n           strip C = C\\<^sub>1;\n        \\<turnstile>\\<^sub>3\\<^sub>a {Q} C\\<^sub>2 { R};\n        \\<exists>C.\n           vc C R \\<and>\n           (\\<forall>s. Q s \\<longrightarrow> pre C R s) \\<and>\n           strip C = C\\<^sub>2\\<rbrakk>\n       \\<Longrightarrow> \\<exists>C.\n                            vc C R \\<and>\n                            (\\<forall>s.\n                                P s \\<longrightarrow> pre C R s) \\<and>\n                            strip C = C\\<^sub>1;; C\\<^sub>2\n 2. \\<And>P b C.\n       \\<lbrakk>\\<turnstile>\\<^sub>3\\<^sub>a {\\<lambda>(s, n).\n           P (s, n) \\<and> lmaps_to_axpr b True s}\n       C { (\\<lambda>(s, n).\n               P (s, n) \\<and> vars b \\<subseteq> dom s) \\<and>*\n           $ 1};\n        \\<exists>Ca.\n           vc Ca\n            ((\\<lambda>(s, n).\n                 P (s, n) \\<and> vars b \\<subseteq> dom s) \\<and>*\n             $ 1) \\<and>\n           (\\<forall>s.\n               (case s of\n                (s, n) \\<Rightarrow>\n                  P (s, n) \\<and> lmaps_to_axpr b True s) \\<longrightarrow>\n               pre Ca\n                ((\\<lambda>(s, n).\n                     P (s, n) \\<and> vars b \\<subseteq> dom s) \\<and>*\n                 $ 1)\n                s) \\<and>\n           strip Ca = C\\<rbrakk>\n       \\<Longrightarrow> \\<exists>Ca.\n                            vc Ca\n                             (\\<lambda>a.\n                                 case a of\n                                 (s, n) \\<Rightarrow>\n                                   P (s, n) \\<and>\n                                   lmaps_to_axpr b False s) \\<and>\n                            (\\<forall>s.\n                                ((\\<lambda>(s, n).\n                                     P (s, n) \\<and>\n                                     vars b \\<subseteq> dom s) \\<and>*\n                                 $ 1)\n                                 s \\<longrightarrow>\n                                pre Ca\n                                 (\\<lambda>a.\n                                     case a of\n                                     (s, n) \\<Rightarrow>\n P (s, n) \\<and> lmaps_to_axpr b False s)\n                                 s) \\<and>\n                            strip Ca = WHILE b DO C\n 3. \\<And>P c Q P' Q'.\n       \\<lbrakk>\\<turnstile>\\<^sub>3\\<^sub>a {P} c { Q};\n        \\<exists>C.\n           vc C Q \\<and>\n           (\\<forall>s. P s \\<longrightarrow> pre C Q s) \\<and> strip C = c;\n        \\<And>s n. P' (s, n) \\<Longrightarrow> P (s, n);\n        \\<And>s n. Q (s, n) \\<Longrightarrow> Q' (s, n)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>C.\n                            vc C Q' \\<and>\n                            (\\<forall>s.\n                                P' s \\<longrightarrow> pre C Q' s) \\<and>\n                            strip C = c", "case (Seq P c\\<^sub>1 Q c\\<^sub>2 R)"], ["proof (state)\nthis:\n  \\<turnstile>\\<^sub>3\\<^sub>a {P} c\\<^sub>1 { Q}\n  \\<exists>C.\n     vc C Q \\<and>\n     (\\<forall>s. P s \\<longrightarrow> pre C Q s) \\<and>\n     strip C = c\\<^sub>1\n  \\<turnstile>\\<^sub>3\\<^sub>a {Q} c\\<^sub>2 { R}\n  \\<exists>C.\n     vc C R \\<and>\n     (\\<forall>s. Q s \\<longrightarrow> pre C R s) \\<and>\n     strip C = c\\<^sub>2\n\ngoal (3 subgoals):\n 1. \\<And>P C\\<^sub>1 Q C\\<^sub>2 R.\n       \\<lbrakk>\\<turnstile>\\<^sub>3\\<^sub>a {P} C\\<^sub>1 { Q};\n        \\<exists>C.\n           vc C Q \\<and>\n           (\\<forall>s. P s \\<longrightarrow> pre C Q s) \\<and>\n           strip C = C\\<^sub>1;\n        \\<turnstile>\\<^sub>3\\<^sub>a {Q} C\\<^sub>2 { R};\n        \\<exists>C.\n           vc C R \\<and>\n           (\\<forall>s. Q s \\<longrightarrow> pre C R s) \\<and>\n           strip C = C\\<^sub>2\\<rbrakk>\n       \\<Longrightarrow> \\<exists>C.\n                            vc C R \\<and>\n                            (\\<forall>s.\n                                P s \\<longrightarrow> pre C R s) \\<and>\n                            strip C = C\\<^sub>1;; C\\<^sub>2\n 2. \\<And>P b C.\n       \\<lbrakk>\\<turnstile>\\<^sub>3\\<^sub>a {\\<lambda>(s, n).\n           P (s, n) \\<and> lmaps_to_axpr b True s}\n       C { (\\<lambda>(s, n).\n               P (s, n) \\<and> vars b \\<subseteq> dom s) \\<and>*\n           $ 1};\n        \\<exists>Ca.\n           vc Ca\n            ((\\<lambda>(s, n).\n                 P (s, n) \\<and> vars b \\<subseteq> dom s) \\<and>*\n             $ 1) \\<and>\n           (\\<forall>s.\n               (case s of\n                (s, n) \\<Rightarrow>\n                  P (s, n) \\<and> lmaps_to_axpr b True s) \\<longrightarrow>\n               pre Ca\n                ((\\<lambda>(s, n).\n                     P (s, n) \\<and> vars b \\<subseteq> dom s) \\<and>*\n                 $ 1)\n                s) \\<and>\n           strip Ca = C\\<rbrakk>\n       \\<Longrightarrow> \\<exists>Ca.\n                            vc Ca\n                             (\\<lambda>a.\n                                 case a of\n                                 (s, n) \\<Rightarrow>\n                                   P (s, n) \\<and>\n                                   lmaps_to_axpr b False s) \\<and>\n                            (\\<forall>s.\n                                ((\\<lambda>(s, n).\n                                     P (s, n) \\<and>\n                                     vars b \\<subseteq> dom s) \\<and>*\n                                 $ 1)\n                                 s \\<longrightarrow>\n                                pre Ca\n                                 (\\<lambda>a.\n                                     case a of\n                                     (s, n) \\<Rightarrow>\n P (s, n) \\<and> lmaps_to_axpr b False s)\n                                 s) \\<and>\n                            strip Ca = WHILE b DO C\n 3. \\<And>P c Q P' Q'.\n       \\<lbrakk>\\<turnstile>\\<^sub>3\\<^sub>a {P} c { Q};\n        \\<exists>C.\n           vc C Q \\<and>\n           (\\<forall>s. P s \\<longrightarrow> pre C Q s) \\<and> strip C = c;\n        \\<And>s n. P' (s, n) \\<Longrightarrow> P (s, n);\n        \\<And>s n. Q (s, n) \\<Longrightarrow> Q' (s, n)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>C.\n                            vc C Q' \\<and>\n                            (\\<forall>s.\n                                P' s \\<longrightarrow> pre C Q' s) \\<and>\n                            strip C = c", "from Seq(2)"], ["proof (chain)\npicking this:\n  \\<exists>C.\n     vc C Q \\<and>\n     (\\<forall>s. P s \\<longrightarrow> pre C Q s) \\<and>\n     strip C = c\\<^sub>1", "obtain C1 where A1: \"vc C1 Q\" \"strip C1 = c\\<^sub>1\" and \n    A2: \"\\<And>s. P s \\<longrightarrow> pre C1 Q s\""], ["proof (prove)\nusing this:\n  \\<exists>C.\n     vc C Q \\<and>\n     (\\<forall>s. P s \\<longrightarrow> pre C Q s) \\<and>\n     strip C = c\\<^sub>1\n\ngoal (1 subgoal):\n 1. (\\<And>C1.\n        \\<lbrakk>vc C1 Q; strip C1 = c\\<^sub>1;\n         \\<And>s. P s \\<longrightarrow> pre C1 Q s\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by blast"], ["proof (state)\nthis:\n  vc C1 Q\n  strip C1 = c\\<^sub>1\n  P ?s \\<longrightarrow> pre C1 Q ?s\n\ngoal (3 subgoals):\n 1. \\<And>P C\\<^sub>1 Q C\\<^sub>2 R.\n       \\<lbrakk>\\<turnstile>\\<^sub>3\\<^sub>a {P} C\\<^sub>1 { Q};\n        \\<exists>C.\n           vc C Q \\<and>\n           (\\<forall>s. P s \\<longrightarrow> pre C Q s) \\<and>\n           strip C = C\\<^sub>1;\n        \\<turnstile>\\<^sub>3\\<^sub>a {Q} C\\<^sub>2 { R};\n        \\<exists>C.\n           vc C R \\<and>\n           (\\<forall>s. Q s \\<longrightarrow> pre C R s) \\<and>\n           strip C = C\\<^sub>2\\<rbrakk>\n       \\<Longrightarrow> \\<exists>C.\n                            vc C R \\<and>\n                            (\\<forall>s.\n                                P s \\<longrightarrow> pre C R s) \\<and>\n                            strip C = C\\<^sub>1;; C\\<^sub>2\n 2. \\<And>P b C.\n       \\<lbrakk>\\<turnstile>\\<^sub>3\\<^sub>a {\\<lambda>(s, n).\n           P (s, n) \\<and> lmaps_to_axpr b True s}\n       C { (\\<lambda>(s, n).\n               P (s, n) \\<and> vars b \\<subseteq> dom s) \\<and>*\n           $ 1};\n        \\<exists>Ca.\n           vc Ca\n            ((\\<lambda>(s, n).\n                 P (s, n) \\<and> vars b \\<subseteq> dom s) \\<and>*\n             $ 1) \\<and>\n           (\\<forall>s.\n               (case s of\n                (s, n) \\<Rightarrow>\n                  P (s, n) \\<and> lmaps_to_axpr b True s) \\<longrightarrow>\n               pre Ca\n                ((\\<lambda>(s, n).\n                     P (s, n) \\<and> vars b \\<subseteq> dom s) \\<and>*\n                 $ 1)\n                s) \\<and>\n           strip Ca = C\\<rbrakk>\n       \\<Longrightarrow> \\<exists>Ca.\n                            vc Ca\n                             (\\<lambda>a.\n                                 case a of\n                                 (s, n) \\<Rightarrow>\n                                   P (s, n) \\<and>\n                                   lmaps_to_axpr b False s) \\<and>\n                            (\\<forall>s.\n                                ((\\<lambda>(s, n).\n                                     P (s, n) \\<and>\n                                     vars b \\<subseteq> dom s) \\<and>*\n                                 $ 1)\n                                 s \\<longrightarrow>\n                                pre Ca\n                                 (\\<lambda>a.\n                                     case a of\n                                     (s, n) \\<Rightarrow>\n P (s, n) \\<and> lmaps_to_axpr b False s)\n                                 s) \\<and>\n                            strip Ca = WHILE b DO C\n 3. \\<And>P c Q P' Q'.\n       \\<lbrakk>\\<turnstile>\\<^sub>3\\<^sub>a {P} c { Q};\n        \\<exists>C.\n           vc C Q \\<and>\n           (\\<forall>s. P s \\<longrightarrow> pre C Q s) \\<and> strip C = c;\n        \\<And>s n. P' (s, n) \\<Longrightarrow> P (s, n);\n        \\<And>s n. Q (s, n) \\<Longrightarrow> Q' (s, n)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>C.\n                            vc C Q' \\<and>\n                            (\\<forall>s.\n                                P' s \\<longrightarrow> pre C Q' s) \\<and>\n                            strip C = c", "from Seq(4)"], ["proof (chain)\npicking this:\n  \\<exists>C.\n     vc C R \\<and>\n     (\\<forall>s. Q s \\<longrightarrow> pre C R s) \\<and>\n     strip C = c\\<^sub>2", "obtain C2 where B1: \"vc C2 R\" \"strip C2 = c\\<^sub>2\" and \n    B2: \"\\<And>s. Q s \\<longrightarrow> pre C2 R s\""], ["proof (prove)\nusing this:\n  \\<exists>C.\n     vc C R \\<and>\n     (\\<forall>s. Q s \\<longrightarrow> pre C R s) \\<and>\n     strip C = c\\<^sub>2\n\ngoal (1 subgoal):\n 1. (\\<And>C2.\n        \\<lbrakk>vc C2 R; strip C2 = c\\<^sub>2;\n         \\<And>s. Q s \\<longrightarrow> pre C2 R s\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by blast"], ["proof (state)\nthis:\n  vc C2 R\n  strip C2 = c\\<^sub>2\n  Q ?s \\<longrightarrow> pre C2 R ?s\n\ngoal (3 subgoals):\n 1. \\<And>P C\\<^sub>1 Q C\\<^sub>2 R.\n       \\<lbrakk>\\<turnstile>\\<^sub>3\\<^sub>a {P} C\\<^sub>1 { Q};\n        \\<exists>C.\n           vc C Q \\<and>\n           (\\<forall>s. P s \\<longrightarrow> pre C Q s) \\<and>\n           strip C = C\\<^sub>1;\n        \\<turnstile>\\<^sub>3\\<^sub>a {Q} C\\<^sub>2 { R};\n        \\<exists>C.\n           vc C R \\<and>\n           (\\<forall>s. Q s \\<longrightarrow> pre C R s) \\<and>\n           strip C = C\\<^sub>2\\<rbrakk>\n       \\<Longrightarrow> \\<exists>C.\n                            vc C R \\<and>\n                            (\\<forall>s.\n                                P s \\<longrightarrow> pre C R s) \\<and>\n                            strip C = C\\<^sub>1;; C\\<^sub>2\n 2. \\<And>P b C.\n       \\<lbrakk>\\<turnstile>\\<^sub>3\\<^sub>a {\\<lambda>(s, n).\n           P (s, n) \\<and> lmaps_to_axpr b True s}\n       C { (\\<lambda>(s, n).\n               P (s, n) \\<and> vars b \\<subseteq> dom s) \\<and>*\n           $ 1};\n        \\<exists>Ca.\n           vc Ca\n            ((\\<lambda>(s, n).\n                 P (s, n) \\<and> vars b \\<subseteq> dom s) \\<and>*\n             $ 1) \\<and>\n           (\\<forall>s.\n               (case s of\n                (s, n) \\<Rightarrow>\n                  P (s, n) \\<and> lmaps_to_axpr b True s) \\<longrightarrow>\n               pre Ca\n                ((\\<lambda>(s, n).\n                     P (s, n) \\<and> vars b \\<subseteq> dom s) \\<and>*\n                 $ 1)\n                s) \\<and>\n           strip Ca = C\\<rbrakk>\n       \\<Longrightarrow> \\<exists>Ca.\n                            vc Ca\n                             (\\<lambda>a.\n                                 case a of\n                                 (s, n) \\<Rightarrow>\n                                   P (s, n) \\<and>\n                                   lmaps_to_axpr b False s) \\<and>\n                            (\\<forall>s.\n                                ((\\<lambda>(s, n).\n                                     P (s, n) \\<and>\n                                     vars b \\<subseteq> dom s) \\<and>*\n                                 $ 1)\n                                 s \\<longrightarrow>\n                                pre Ca\n                                 (\\<lambda>a.\n                                     case a of\n                                     (s, n) \\<Rightarrow>\n P (s, n) \\<and> lmaps_to_axpr b False s)\n                                 s) \\<and>\n                            strip Ca = WHILE b DO C\n 3. \\<And>P c Q P' Q'.\n       \\<lbrakk>\\<turnstile>\\<^sub>3\\<^sub>a {P} c { Q};\n        \\<exists>C.\n           vc C Q \\<and>\n           (\\<forall>s. P s \\<longrightarrow> pre C Q s) \\<and> strip C = c;\n        \\<And>s n. P' (s, n) \\<Longrightarrow> P (s, n);\n        \\<And>s n. Q (s, n) \\<Longrightarrow> Q' (s, n)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>C.\n                            vc C Q' \\<and>\n                            (\\<forall>s.\n                                P' s \\<longrightarrow> pre C Q' s) \\<and>\n                            strip C = c", "show ?case"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>C.\n       vc C R \\<and>\n       (\\<forall>s. P s \\<longrightarrow> pre C R s) \\<and>\n       strip C = c\\<^sub>1;; c\\<^sub>2", "apply(rule exI[where x=\"Aseq C1 C2\"])"], ["proof (prove)\ngoal (1 subgoal):\n 1. vc (C1;; C2) R \\<and>\n    (\\<forall>s. P s \\<longrightarrow> pre (C1;; C2) R s) \\<and>\n    strip (C1;; C2) = c\\<^sub>1;; c\\<^sub>2", "using B1 A1"], ["proof (prove)\nusing this:\n  vc C2 R\n  strip C2 = c\\<^sub>2\n  vc C1 Q\n  strip C1 = c\\<^sub>1\n\ngoal (1 subgoal):\n 1. vc (C1;; C2) R \\<and>\n    (\\<forall>s. P s \\<longrightarrow> pre (C1;; C2) R s) \\<and>\n    strip (C1;; C2) = c\\<^sub>1;; c\\<^sub>2", "apply auto"], ["proof (prove)\ngoal (2 subgoals):\n 1. \\<lbrakk>vc C2 R; vc C1 Q; c\\<^sub>2 = strip C2;\n     c\\<^sub>1 = strip C1\\<rbrakk>\n    \\<Longrightarrow> vc C1 (pre C2 R)\n 2. \\<And>a b.\n       \\<lbrakk>vc C2 R; vc C1 Q; c\\<^sub>2 = strip C2;\n        c\\<^sub>1 = strip C1; P (a, b)\\<rbrakk>\n       \\<Longrightarrow> pre C1 (pre C2 R) (a, b)", "subgoal"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>vc C2 R; vc C1 Q; c\\<^sub>2 = strip C2;\n     c\\<^sub>1 = strip C1\\<rbrakk>\n    \\<Longrightarrow> vc C1 (pre C2 R)", "using vc_mono B2"], ["proof (prove)\nusing this:\n  \\<lbrakk>\\<forall>s. ?P s \\<longrightarrow> ?Q s; vc ?C ?P\\<rbrakk>\n  \\<Longrightarrow> vc ?C ?Q\n  Q ?s \\<longrightarrow> pre C2 R ?s\n\ngoal (1 subgoal):\n 1. \\<lbrakk>vc C2 R; vc C1 Q; c\\<^sub>2 = strip C2;\n     c\\<^sub>1 = strip C1\\<rbrakk>\n    \\<Longrightarrow> vc C1 (pre C2 R)", "by auto"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>a b.\n       \\<lbrakk>vc C2 R; vc C1 Q; c\\<^sub>2 = strip C2;\n        c\\<^sub>1 = strip C1; P (a, b)\\<rbrakk>\n       \\<Longrightarrow> pre C1 (pre C2 R) (a, b)", "subgoal"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>vc C2 R; vc C1 Q; c\\<^sub>2 = strip C2; c\\<^sub>1 = strip C1;\n     P (a_, b_)\\<rbrakk>\n    \\<Longrightarrow> pre C1 (pre C2 R) (a_, b_)", "apply(rule pre_mono[where P=Q])"], ["proof (prove)\ngoal (2 subgoals):\n 1. \\<lbrakk>vc C2 R; vc C1 Q; c\\<^sub>2 = strip C2; c\\<^sub>1 = strip C1;\n     P (a_, b_)\\<rbrakk>\n    \\<Longrightarrow> \\<forall>s. Q s \\<longrightarrow> pre C2 R s\n 2. \\<lbrakk>vc C2 R; vc C1 Q; c\\<^sub>2 = strip C2; c\\<^sub>1 = strip C1;\n     P (a_, b_)\\<rbrakk>\n    \\<Longrightarrow> pre C1 Q (a_, b_)", "using  B2"], ["proof (prove)\nusing this:\n  Q ?s \\<longrightarrow> pre C2 R ?s\n\ngoal (2 subgoals):\n 1. \\<lbrakk>vc C2 R; vc C1 Q; c\\<^sub>2 = strip C2; c\\<^sub>1 = strip C1;\n     P (a_, b_)\\<rbrakk>\n    \\<Longrightarrow> \\<forall>s. Q s \\<longrightarrow> pre C2 R s\n 2. \\<lbrakk>vc C2 R; vc C1 Q; c\\<^sub>2 = strip C2; c\\<^sub>1 = strip C1;\n     P (a_, b_)\\<rbrakk>\n    \\<Longrightarrow> pre C1 Q (a_, b_)", "apply auto"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>vc C2 R; vc C1 Q; c\\<^sub>2 = strip C2; c\\<^sub>1 = strip C1;\n     P (a_, b_);\n     \\<And>a b. Q (a, b) \\<longrightarrow> pre C2 R (a, b)\\<rbrakk>\n    \\<Longrightarrow> pre C1 Q (a_, b_)", "using A2"], ["proof (prove)\nusing this:\n  P ?s \\<longrightarrow> pre C1 Q ?s\n\ngoal (1 subgoal):\n 1. \\<lbrakk>vc C2 R; vc C1 Q; c\\<^sub>2 = strip C2; c\\<^sub>1 = strip C1;\n     P (a_, b_);\n     \\<And>a b. Q (a, b) \\<longrightarrow> pre C2 R (a, b)\\<rbrakk>\n    \\<Longrightarrow> pre C1 Q (a_, b_)", "by auto"], ["proof (prove)\ngoal:\nNo subgoals!", "done"], ["proof (state)\nthis:\n  \\<exists>C.\n     vc C R \\<and>\n     (\\<forall>s. P s \\<longrightarrow> pre C R s) \\<and>\n     strip C = c\\<^sub>1;; c\\<^sub>2\n\ngoal (2 subgoals):\n 1. \\<And>P b C.\n       \\<lbrakk>\\<turnstile>\\<^sub>3\\<^sub>a {\\<lambda>(s, n).\n           P (s, n) \\<and> lmaps_to_axpr b True s}\n       C { (\\<lambda>(s, n).\n               P (s, n) \\<and> vars b \\<subseteq> dom s) \\<and>*\n           $ 1};\n        \\<exists>Ca.\n           vc Ca\n            ((\\<lambda>(s, n).\n                 P (s, n) \\<and> vars b \\<subseteq> dom s) \\<and>*\n             $ 1) \\<and>\n           (\\<forall>s.\n               (case s of\n                (s, n) \\<Rightarrow>\n                  P (s, n) \\<and> lmaps_to_axpr b True s) \\<longrightarrow>\n               pre Ca\n                ((\\<lambda>(s, n).\n                     P (s, n) \\<and> vars b \\<subseteq> dom s) \\<and>*\n                 $ 1)\n                s) \\<and>\n           strip Ca = C\\<rbrakk>\n       \\<Longrightarrow> \\<exists>Ca.\n                            vc Ca\n                             (\\<lambda>a.\n                                 case a of\n                                 (s, n) \\<Rightarrow>\n                                   P (s, n) \\<and>\n                                   lmaps_to_axpr b False s) \\<and>\n                            (\\<forall>s.\n                                ((\\<lambda>(s, n).\n                                     P (s, n) \\<and>\n                                     vars b \\<subseteq> dom s) \\<and>*\n                                 $ 1)\n                                 s \\<longrightarrow>\n                                pre Ca\n                                 (\\<lambda>a.\n                                     case a of\n                                     (s, n) \\<Rightarrow>\n P (s, n) \\<and> lmaps_to_axpr b False s)\n                                 s) \\<and>\n                            strip Ca = WHILE b DO C\n 2. \\<And>P c Q P' Q'.\n       \\<lbrakk>\\<turnstile>\\<^sub>3\\<^sub>a {P} c { Q};\n        \\<exists>C.\n           vc C Q \\<and>\n           (\\<forall>s. P s \\<longrightarrow> pre C Q s) \\<and> strip C = c;\n        \\<And>s n. P' (s, n) \\<Longrightarrow> P (s, n);\n        \\<And>s n. Q (s, n) \\<Longrightarrow> Q' (s, n)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>C.\n                            vc C Q' \\<and>\n                            (\\<forall>s.\n                                P' s \\<longrightarrow> pre C Q' s) \\<and>\n                            strip C = c", "next"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>P b C.\n       \\<lbrakk>\\<turnstile>\\<^sub>3\\<^sub>a {\\<lambda>(s, n).\n           P (s, n) \\<and> lmaps_to_axpr b True s}\n       C { (\\<lambda>(s, n).\n               P (s, n) \\<and> vars b \\<subseteq> dom s) \\<and>*\n           $ 1};\n        \\<exists>Ca.\n           vc Ca\n            ((\\<lambda>(s, n).\n                 P (s, n) \\<and> vars b \\<subseteq> dom s) \\<and>*\n             $ 1) \\<and>\n           (\\<forall>s.\n               (case s of\n                (s, n) \\<Rightarrow>\n                  P (s, n) \\<and> lmaps_to_axpr b True s) \\<longrightarrow>\n               pre Ca\n                ((\\<lambda>(s, n).\n                     P (s, n) \\<and> vars b \\<subseteq> dom s) \\<and>*\n                 $ 1)\n                s) \\<and>\n           strip Ca = C\\<rbrakk>\n       \\<Longrightarrow> \\<exists>Ca.\n                            vc Ca\n                             (\\<lambda>a.\n                                 case a of\n                                 (s, n) \\<Rightarrow>\n                                   P (s, n) \\<and>\n                                   lmaps_to_axpr b False s) \\<and>\n                            (\\<forall>s.\n                                ((\\<lambda>(s, n).\n                                     P (s, n) \\<and>\n                                     vars b \\<subseteq> dom s) \\<and>*\n                                 $ 1)\n                                 s \\<longrightarrow>\n                                pre Ca\n                                 (\\<lambda>a.\n                                     case a of\n                                     (s, n) \\<Rightarrow>\n P (s, n) \\<and> lmaps_to_axpr b False s)\n                                 s) \\<and>\n                            strip Ca = WHILE b DO C\n 2. \\<And>P c Q P' Q'.\n       \\<lbrakk>\\<turnstile>\\<^sub>3\\<^sub>a {P} c { Q};\n        \\<exists>C.\n           vc C Q \\<and>\n           (\\<forall>s. P s \\<longrightarrow> pre C Q s) \\<and> strip C = c;\n        \\<And>s n. P' (s, n) \\<Longrightarrow> P (s, n);\n        \\<And>s n. Q (s, n) \\<Longrightarrow> Q' (s, n)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>C.\n                            vc C Q' \\<and>\n                            (\\<forall>s.\n                                P' s \\<longrightarrow> pre C Q' s) \\<and>\n                            strip C = c", "case (While I b c)"], ["proof (state)\nthis:\n  \\<turnstile>\\<^sub>3\\<^sub>a {\\<lambda>(s, n).\n                                   I (s, n) \\<and> lmaps_to_axpr b True s}\n                               c { (\\<lambda>(s, n).\n I (s, n) \\<and> vars b \\<subseteq> dom s) \\<and>*\n                                   $ 1}\n  \\<exists>C.\n     vc C\n      ((\\<lambda>(s, n). I (s, n) \\<and> vars b \\<subseteq> dom s) \\<and>*\n       $ 1) \\<and>\n     (\\<forall>s.\n         (case s of\n          (s, n) \\<Rightarrow>\n            I (s, n) \\<and> lmaps_to_axpr b True s) \\<longrightarrow>\n         pre C\n          ((\\<lambda>(s, n).\n               I (s, n) \\<and> vars b \\<subseteq> dom s) \\<and>*\n           $ 1)\n          s) \\<and>\n     strip C = c\n\ngoal (2 subgoals):\n 1. \\<And>P b C.\n       \\<lbrakk>\\<turnstile>\\<^sub>3\\<^sub>a {\\<lambda>(s, n).\n           P (s, n) \\<and> lmaps_to_axpr b True s}\n       C { (\\<lambda>(s, n).\n               P (s, n) \\<and> vars b \\<subseteq> dom s) \\<and>*\n           $ 1};\n        \\<exists>Ca.\n           vc Ca\n            ((\\<lambda>(s, n).\n                 P (s, n) \\<and> vars b \\<subseteq> dom s) \\<and>*\n             $ 1) \\<and>\n           (\\<forall>s.\n               (case s of\n                (s, n) \\<Rightarrow>\n                  P (s, n) \\<and> lmaps_to_axpr b True s) \\<longrightarrow>\n               pre Ca\n                ((\\<lambda>(s, n).\n                     P (s, n) \\<and> vars b \\<subseteq> dom s) \\<and>*\n                 $ 1)\n                s) \\<and>\n           strip Ca = C\\<rbrakk>\n       \\<Longrightarrow> \\<exists>Ca.\n                            vc Ca\n                             (\\<lambda>a.\n                                 case a of\n                                 (s, n) \\<Rightarrow>\n                                   P (s, n) \\<and>\n                                   lmaps_to_axpr b False s) \\<and>\n                            (\\<forall>s.\n                                ((\\<lambda>(s, n).\n                                     P (s, n) \\<and>\n                                     vars b \\<subseteq> dom s) \\<and>*\n                                 $ 1)\n                                 s \\<longrightarrow>\n                                pre Ca\n                                 (\\<lambda>a.\n                                     case a of\n                                     (s, n) \\<Rightarrow>\n P (s, n) \\<and> lmaps_to_axpr b False s)\n                                 s) \\<and>\n                            strip Ca = WHILE b DO C\n 2. \\<And>P c Q P' Q'.\n       \\<lbrakk>\\<turnstile>\\<^sub>3\\<^sub>a {P} c { Q};\n        \\<exists>C.\n           vc C Q \\<and>\n           (\\<forall>s. P s \\<longrightarrow> pre C Q s) \\<and> strip C = c;\n        \\<And>s n. P' (s, n) \\<Longrightarrow> P (s, n);\n        \\<And>s n. Q (s, n) \\<Longrightarrow> Q' (s, n)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>C.\n                            vc C Q' \\<and>\n                            (\\<forall>s.\n                                P' s \\<longrightarrow> pre C Q' s) \\<and>\n                            strip C = c", "then"], ["proof (chain)\npicking this:\n  \\<turnstile>\\<^sub>3\\<^sub>a {\\<lambda>(s, n).\n                                   I (s, n) \\<and> lmaps_to_axpr b True s}\n                               c { (\\<lambda>(s, n).\n I (s, n) \\<and> vars b \\<subseteq> dom s) \\<and>*\n                                   $ 1}\n  \\<exists>C.\n     vc C\n      ((\\<lambda>(s, n). I (s, n) \\<and> vars b \\<subseteq> dom s) \\<and>*\n       $ 1) \\<and>\n     (\\<forall>s.\n         (case s of\n          (s, n) \\<Rightarrow>\n            I (s, n) \\<and> lmaps_to_axpr b True s) \\<longrightarrow>\n         pre C\n          ((\\<lambda>(s, n).\n               I (s, n) \\<and> vars b \\<subseteq> dom s) \\<and>*\n           $ 1)\n          s) \\<and>\n     strip C = c", "obtain C where 1: \"vc C ((\\<lambda>(s, n). I (s, n) \\<and> vars b \\<subseteq> dom s) \\<and>* $ 1)\"\n          \"strip C = c\" and 2:\n         \"\\<And>ps n. (I (ps, n) \\<and> lmaps_to_axpr b True ps) \\<longrightarrow>\n              pre C ((\\<lambda>(s, n). I (s, n) \\<and> vars b \\<subseteq> dom s) \\<and>* $ 1) (ps,n) \""], ["proof (prove)\nusing this:\n  \\<turnstile>\\<^sub>3\\<^sub>a {\\<lambda>(s, n).\n                                   I (s, n) \\<and> lmaps_to_axpr b True s}\n                               c { (\\<lambda>(s, n).\n I (s, n) \\<and> vars b \\<subseteq> dom s) \\<and>*\n                                   $ 1}\n  \\<exists>C.\n     vc C\n      ((\\<lambda>(s, n). I (s, n) \\<and> vars b \\<subseteq> dom s) \\<and>*\n       $ 1) \\<and>\n     (\\<forall>s.\n         (case s of\n          (s, n) \\<Rightarrow>\n            I (s, n) \\<and> lmaps_to_axpr b True s) \\<longrightarrow>\n         pre C\n          ((\\<lambda>(s, n).\n               I (s, n) \\<and> vars b \\<subseteq> dom s) \\<and>*\n           $ 1)\n          s) \\<and>\n     strip C = c\n\ngoal (1 subgoal):\n 1. (\\<And>C.\n        \\<lbrakk>vc C\n                  ((\\<lambda>(s, n).\n                       I (s, n) \\<and> vars b \\<subseteq> dom s) \\<and>*\n                   $ 1);\n         strip C = c;\n         \\<And>ps n.\n            I (ps, n) \\<and> lmaps_to_axpr b True ps \\<longrightarrow>\n            pre C\n             ((\\<lambda>(s, n).\n                  I (s, n) \\<and> vars b \\<subseteq> dom s) \\<and>*\n              $ 1)\n             (ps, n)\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by blast"], ["proof (state)\nthis:\n  vc C\n   ((\\<lambda>(s, n). I (s, n) \\<and> vars b \\<subseteq> dom s) \\<and>* $ 1)\n  strip C = c\n  I (?ps, ?n) \\<and> lmaps_to_axpr b True ?ps \\<longrightarrow>\n  pre C\n   ((\\<lambda>(s, n). I (s, n) \\<and> vars b \\<subseteq> dom s) \\<and>* $ 1)\n   (?ps, ?n)\n\ngoal (2 subgoals):\n 1. \\<And>P b C.\n       \\<lbrakk>\\<turnstile>\\<^sub>3\\<^sub>a {\\<lambda>(s, n).\n           P (s, n) \\<and> lmaps_to_axpr b True s}\n       C { (\\<lambda>(s, n).\n               P (s, n) \\<and> vars b \\<subseteq> dom s) \\<and>*\n           $ 1};\n        \\<exists>Ca.\n           vc Ca\n            ((\\<lambda>(s, n).\n                 P (s, n) \\<and> vars b \\<subseteq> dom s) \\<and>*\n             $ 1) \\<and>\n           (\\<forall>s.\n               (case s of\n                (s, n) \\<Rightarrow>\n                  P (s, n) \\<and> lmaps_to_axpr b True s) \\<longrightarrow>\n               pre Ca\n                ((\\<lambda>(s, n).\n                     P (s, n) \\<and> vars b \\<subseteq> dom s) \\<and>*\n                 $ 1)\n                s) \\<and>\n           strip Ca = C\\<rbrakk>\n       \\<Longrightarrow> \\<exists>Ca.\n                            vc Ca\n                             (\\<lambda>a.\n                                 case a of\n                                 (s, n) \\<Rightarrow>\n                                   P (s, n) \\<and>\n                                   lmaps_to_axpr b False s) \\<and>\n                            (\\<forall>s.\n                                ((\\<lambda>(s, n).\n                                     P (s, n) \\<and>\n                                     vars b \\<subseteq> dom s) \\<and>*\n                                 $ 1)\n                                 s \\<longrightarrow>\n                                pre Ca\n                                 (\\<lambda>a.\n                                     case a of\n                                     (s, n) \\<Rightarrow>\n P (s, n) \\<and> lmaps_to_axpr b False s)\n                                 s) \\<and>\n                            strip Ca = WHILE b DO C\n 2. \\<And>P c Q P' Q'.\n       \\<lbrakk>\\<turnstile>\\<^sub>3\\<^sub>a {P} c { Q};\n        \\<exists>C.\n           vc C Q \\<and>\n           (\\<forall>s. P s \\<longrightarrow> pre C Q s) \\<and> strip C = c;\n        \\<And>s n. P' (s, n) \\<Longrightarrow> P (s, n);\n        \\<And>s n. Q (s, n) \\<Longrightarrow> Q' (s, n)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>C.\n                            vc C Q' \\<and>\n                            (\\<forall>s.\n                                P' s \\<longrightarrow> pre C Q' s) \\<and>\n                            strip C = c", "show ?case"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>C.\n       vc C\n        (\\<lambda>a.\n            case a of\n            (s, n) \\<Rightarrow>\n              I (s, n) \\<and> lmaps_to_axpr b False s) \\<and>\n       (\\<forall>s.\n           ((\\<lambda>(s, n).\n                I (s, n) \\<and> vars b \\<subseteq> dom s) \\<and>*\n            $ 1)\n            s \\<longrightarrow>\n           pre C\n            (\\<lambda>a.\n                case a of\n                (s, n) \\<Rightarrow>\n                  I (s, n) \\<and> lmaps_to_axpr b False s)\n            s) \\<and>\n       strip C = WHILE b DO c", "apply(rule exI[where x=\"Awhile (\\<lambda>(s, n). I (s, n) \\<and> vars b \\<subseteq> dom s) b C\"])"], ["proof (prove)\ngoal (1 subgoal):\n 1. vc ({\\<lambda>(s, n). I (s, n) \\<and> vars b \\<subseteq> dom s} WHILE b\n        DO C)\n     (\\<lambda>a.\n         case a of\n         (s, n) \\<Rightarrow>\n           I (s, n) \\<and> lmaps_to_axpr b False s) \\<and>\n    (\\<forall>s.\n        ((\\<lambda>(s, n). I (s, n) \\<and> vars b \\<subseteq> dom s) \\<and>*\n         $ 1)\n         s \\<longrightarrow>\n        pre ({\\<lambda>(s, n). I (s, n) \\<and> vars b \\<subseteq> dom s}\n             WHILE b DO C)\n         (\\<lambda>a.\n             case a of\n             (s, n) \\<Rightarrow> I (s, n) \\<and> lmaps_to_axpr b False s)\n         s) \\<and>\n    strip\n     ({\\<lambda>(s, n). I (s, n) \\<and> vars b \\<subseteq> dom s} WHILE b\n      DO C) =\n    WHILE b DO c", "using 1 2"], ["proof (prove)\nusing this:\n  vc C\n   ((\\<lambda>(s, n). I (s, n) \\<and> vars b \\<subseteq> dom s) \\<and>* $ 1)\n  strip C = c\n  I (?ps, ?n) \\<and> lmaps_to_axpr b True ?ps \\<longrightarrow>\n  pre C\n   ((\\<lambda>(s, n). I (s, n) \\<and> vars b \\<subseteq> dom s) \\<and>* $ 1)\n   (?ps, ?n)\n\ngoal (1 subgoal):\n 1. vc ({\\<lambda>(s, n). I (s, n) \\<and> vars b \\<subseteq> dom s} WHILE b\n        DO C)\n     (\\<lambda>a.\n         case a of\n         (s, n) \\<Rightarrow>\n           I (s, n) \\<and> lmaps_to_axpr b False s) \\<and>\n    (\\<forall>s.\n        ((\\<lambda>(s, n). I (s, n) \\<and> vars b \\<subseteq> dom s) \\<and>*\n         $ 1)\n         s \\<longrightarrow>\n        pre ({\\<lambda>(s, n). I (s, n) \\<and> vars b \\<subseteq> dom s}\n             WHILE b DO C)\n         (\\<lambda>a.\n             case a of\n             (s, n) \\<Rightarrow> I (s, n) \\<and> lmaps_to_axpr b False s)\n         s) \\<and>\n    strip\n     ({\\<lambda>(s, n). I (s, n) \\<and> vars b \\<subseteq> dom s} WHILE b\n      DO C) =\n    WHILE b DO c", "by auto"], ["proof (state)\nthis:\n  \\<exists>C.\n     vc C\n      (\\<lambda>a.\n          case a of\n          (s, n) \\<Rightarrow>\n            I (s, n) \\<and> lmaps_to_axpr b False s) \\<and>\n     (\\<forall>s.\n         ((\\<lambda>(s, n).\n              I (s, n) \\<and> vars b \\<subseteq> dom s) \\<and>*\n          $ 1)\n          s \\<longrightarrow>\n         pre C\n          (\\<lambda>a.\n              case a of\n              (s, n) \\<Rightarrow> I (s, n) \\<and> lmaps_to_axpr b False s)\n          s) \\<and>\n     strip C = WHILE b DO c\n\ngoal (1 subgoal):\n 1. \\<And>P c Q P' Q'.\n       \\<lbrakk>\\<turnstile>\\<^sub>3\\<^sub>a {P} c { Q};\n        \\<exists>C.\n           vc C Q \\<and>\n           (\\<forall>s. P s \\<longrightarrow> pre C Q s) \\<and> strip C = c;\n        \\<And>s n. P' (s, n) \\<Longrightarrow> P (s, n);\n        \\<And>s n. Q (s, n) \\<Longrightarrow> Q' (s, n)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>C.\n                            vc C Q' \\<and>\n                            (\\<forall>s.\n                                P' s \\<longrightarrow> pre C Q' s) \\<and>\n                            strip C = c", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>P c Q P' Q'.\n       \\<lbrakk>\\<turnstile>\\<^sub>3\\<^sub>a {P} c { Q};\n        \\<exists>C.\n           vc C Q \\<and>\n           (\\<forall>s. P s \\<longrightarrow> pre C Q s) \\<and> strip C = c;\n        \\<And>s n. P' (s, n) \\<Longrightarrow> P (s, n);\n        \\<And>s n. Q (s, n) \\<Longrightarrow> Q' (s, n)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>C.\n                            vc C Q' \\<and>\n                            (\\<forall>s.\n                                P' s \\<longrightarrow> pre C Q' s) \\<and>\n                            strip C = c", "case (conseqS P c Q P' Q')"], ["proof (state)\nthis:\n  \\<turnstile>\\<^sub>3\\<^sub>a {P} c { Q}\n  \\<exists>C.\n     vc C Q \\<and>\n     (\\<forall>s. P s \\<longrightarrow> pre C Q s) \\<and> strip C = c\n  P' (?s, ?n) \\<Longrightarrow> P (?s, ?n)\n  Q (?s, ?n) \\<Longrightarrow> Q' (?s, ?n)\n\ngoal (1 subgoal):\n 1. \\<And>P c Q P' Q'.\n       \\<lbrakk>\\<turnstile>\\<^sub>3\\<^sub>a {P} c { Q};\n        \\<exists>C.\n           vc C Q \\<and>\n           (\\<forall>s. P s \\<longrightarrow> pre C Q s) \\<and> strip C = c;\n        \\<And>s n. P' (s, n) \\<Longrightarrow> P (s, n);\n        \\<And>s n. Q (s, n) \\<Longrightarrow> Q' (s, n)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>C.\n                            vc C Q' \\<and>\n                            (\\<forall>s.\n                                P' s \\<longrightarrow> pre C Q' s) \\<and>\n                            strip C = c", "then"], ["proof (chain)\npicking this:\n  \\<turnstile>\\<^sub>3\\<^sub>a {P} c { Q}\n  \\<exists>C.\n     vc C Q \\<and>\n     (\\<forall>s. P s \\<longrightarrow> pre C Q s) \\<and> strip C = c\n  P' (?s, ?n) \\<Longrightarrow> P (?s, ?n)\n  Q (?s, ?n) \\<Longrightarrow> Q' (?s, ?n)", "obtain C' where C': \"vc C' Q\" \"(\\<forall>s. P s \\<longrightarrow> pre C' Q s)\" \"strip C' = c\""], ["proof (prove)\nusing this:\n  \\<turnstile>\\<^sub>3\\<^sub>a {P} c { Q}\n  \\<exists>C.\n     vc C Q \\<and>\n     (\\<forall>s. P s \\<longrightarrow> pre C Q s) \\<and> strip C = c\n  P' (?s, ?n) \\<Longrightarrow> P (?s, ?n)\n  Q (?s, ?n) \\<Longrightarrow> Q' (?s, ?n)\n\ngoal (1 subgoal):\n 1. (\\<And>C'.\n        \\<lbrakk>vc C' Q; \\<forall>s. P s \\<longrightarrow> pre C' Q s;\n         strip C' = c\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by blast"], ["proof (state)\nthis:\n  vc C' Q\n  \\<forall>s. P s \\<longrightarrow> pre C' Q s\n  strip C' = c\n\ngoal (1 subgoal):\n 1. \\<And>P c Q P' Q'.\n       \\<lbrakk>\\<turnstile>\\<^sub>3\\<^sub>a {P} c { Q};\n        \\<exists>C.\n           vc C Q \\<and>\n           (\\<forall>s. P s \\<longrightarrow> pre C Q s) \\<and> strip C = c;\n        \\<And>s n. P' (s, n) \\<Longrightarrow> P (s, n);\n        \\<And>s n. Q (s, n) \\<Longrightarrow> Q' (s, n)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>C.\n                            vc C Q' \\<and>\n                            (\\<forall>s.\n                                P' s \\<longrightarrow> pre C Q' s) \\<and>\n                            strip C = c", "show ?case"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>C.\n       vc C Q' \\<and>\n       (\\<forall>s. P' s \\<longrightarrow> pre C Q' s) \\<and> strip C = c", "apply(rule exI[where x=C'])"], ["proof (prove)\ngoal (1 subgoal):\n 1. vc C' Q' \\<and>\n    (\\<forall>s. P' s \\<longrightarrow> pre C' Q' s) \\<and> strip C' = c", "using C' conseqS(3,4) pre_mono vc_mono"], ["proof (prove)\nusing this:\n  vc C' Q\n  \\<forall>s. P s \\<longrightarrow> pre C' Q s\n  strip C' = c\n  P' (?s, ?n) \\<Longrightarrow> P (?s, ?n)\n  Q (?s, ?n) \\<Longrightarrow> Q' (?s, ?n)\n  \\<lbrakk>\\<forall>s. ?P s \\<longrightarrow> ?Q s; pre ?C ?P ?s\\<rbrakk>\n  \\<Longrightarrow> pre ?C ?Q ?s\n  \\<lbrakk>\\<forall>s. ?P s \\<longrightarrow> ?Q s; vc ?C ?P\\<rbrakk>\n  \\<Longrightarrow> vc ?C ?Q\n\ngoal (1 subgoal):\n 1. vc C' Q' \\<and>\n    (\\<forall>s. P' s \\<longrightarrow> pre C' Q' s) \\<and> strip C' = c", "by force"], ["proof (state)\nthis:\n  \\<exists>C.\n     vc C Q' \\<and>\n     (\\<forall>s. P' s \\<longrightarrow> pre C Q' s) \\<and> strip C = c\n\ngoal:\nNo subgoals!", "qed"], ["", "theorem vc_completeness:\n  assumes \"\\<Turnstile>\\<^sub>3\\<^sub>' {P} c { Q}\"\n  shows \"\\<exists>C k. vc C (Q ** sep_true)\n          \\<and> (\\<forall>ps n. P (ps, n) \\<longrightarrow> pre C (\\<lambda>(ps, n). (Q ** sep_true) (ps, n div k)) (ps, k * n))\n          \\<and> strip C = c\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>C k.\n       vc C (Q \\<and>* (\\<lambda>s. True)) \\<and>\n       (\\<forall>ps n.\n           P (ps, n) \\<longrightarrow>\n           pre C\n            (\\<lambda>(ps, n). (Q \\<and>* (\\<lambda>s. True)) (ps, n div k))\n            (ps, k * n)) \\<and>\n       strip C = c", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<exists>C k.\n       vc C (Q \\<and>* (\\<lambda>s. True)) \\<and>\n       (\\<forall>ps n.\n           P (ps, n) \\<longrightarrow>\n           pre C\n            (\\<lambda>(ps, n). (Q \\<and>* (\\<lambda>s. True)) (ps, n div k))\n            (ps, k * n)) \\<and>\n       strip C = c", "let ?QG = \"\\<lambda>k (ps,n). (Q ** sep_true) (ps,n div k)\""], ["proof (state)\ngoal (1 subgoal):\n 1. \\<exists>C k.\n       vc C (Q \\<and>* (\\<lambda>s. True)) \\<and>\n       (\\<forall>ps n.\n           P (ps, n) \\<longrightarrow>\n           pre C\n            (\\<lambda>(ps, n). (Q \\<and>* (\\<lambda>s. True)) (ps, n div k))\n            (ps, k * n)) \\<and>\n       strip C = c", "from assms"], ["proof (chain)\npicking this:\n  \\<Turnstile>\\<^sub>3\\<^sub>' {P} c { Q}", "obtain k where k[simp]: \"k>0\" and p: \"\\<And>ps n. P (ps, n) \\<Longrightarrow> wp\\<^sub>3\\<^sub>' c (\\<lambda>(ps, n). (Q ** sep_true) (ps, n div k)) (ps, k * n)\""], ["proof (prove)\nusing this:\n  \\<Turnstile>\\<^sub>3\\<^sub>' {P} c { Q}\n\ngoal (1 subgoal):\n 1. (\\<And>k.\n        \\<lbrakk>0 < k;\n         \\<And>ps n.\n            P (ps, n) \\<Longrightarrow>\n            wp\\<^sub>3\\<^sub>' c\n             (\\<lambda>(ps, n).\n                 (Q \\<and>* (\\<lambda>s. True)) (ps, n div k))\n             (ps, k * n)\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "using valid_wp"], ["proof (prove)\nusing this:\n  \\<Turnstile>\\<^sub>3\\<^sub>' {P} c { Q}\n  \\<Turnstile>\\<^sub>3\\<^sub>' {?P} ?c { ?Q} \\<Longrightarrow>\n  \\<exists>k>0.\n     \\<forall>s n.\n        ?P (s, n) \\<longrightarrow>\n        wp\\<^sub>3\\<^sub>' ?c\n         (\\<lambda>(ps, n). (?Q \\<and>* (\\<lambda>s. True)) (ps, n div k))\n         (s, k * n)\n\ngoal (1 subgoal):\n 1. (\\<And>k.\n        \\<lbrakk>0 < k;\n         \\<And>ps n.\n            P (ps, n) \\<Longrightarrow>\n            wp\\<^sub>3\\<^sub>' c\n             (\\<lambda>(ps, n).\n                 (Q \\<and>* (\\<lambda>s. True)) (ps, n div k))\n             (ps, k * n)\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by blast"], ["proof (state)\nthis:\n  0 < k\n  P (?ps, ?n) \\<Longrightarrow>\n  wp\\<^sub>3\\<^sub>' c\n   (\\<lambda>(ps, n). (Q \\<and>* (\\<lambda>s. True)) (ps, n div k))\n   (?ps, k * ?n)\n\ngoal (1 subgoal):\n 1. \\<exists>C k.\n       vc C (Q \\<and>* (\\<lambda>s. True)) \\<and>\n       (\\<forall>ps n.\n           P (ps, n) \\<longrightarrow>\n           pre C\n            (\\<lambda>(ps, n). (Q \\<and>* (\\<lambda>s. True)) (ps, n div k))\n            (ps, k * n)) \\<and>\n       strip C = c", "from wpT_is_pre"], ["proof (chain)\npicking this:\n  \\<turnstile>\\<^sub>3\\<^sub>a {wp\\<^sub>3\\<^sub>' ?c ?Q} ?c { ?Q}", "have R: \"\\<turnstile>\\<^sub>3\\<^sub>a {wp\\<^sub>3\\<^sub>' c (?QG k)} c {?QG k}\""], ["proof (prove)\nusing this:\n  \\<turnstile>\\<^sub>3\\<^sub>a {wp\\<^sub>3\\<^sub>' ?c ?Q} ?c { ?Q}\n\ngoal (1 subgoal):\n 1. \\<turnstile>\\<^sub>3\\<^sub>a {wp\\<^sub>3\\<^sub>' c\n                                   (\\<lambda>(ps, n).\n (Q \\<and>* (\\<lambda>s. True)) (ps, n div k))}\n                                 c { \\<lambda>(ps, n).\n  (Q \\<and>* (\\<lambda>s. True)) (ps, n div k)}", "by auto"], ["proof (state)\nthis:\n  \\<turnstile>\\<^sub>3\\<^sub>a {wp\\<^sub>3\\<^sub>' c\n                                 (\\<lambda>(ps, n).\n                                     (Q \\<and>* (\\<lambda>s. True))\n(ps, n div k))}\n                               c { \\<lambda>(ps, n).\n(Q \\<and>* (\\<lambda>s. True)) (ps, n div k)}\n\ngoal (1 subgoal):\n 1. \\<exists>C k.\n       vc C (Q \\<and>* (\\<lambda>s. True)) \\<and>\n       (\\<forall>ps n.\n           P (ps, n) \\<longrightarrow>\n           pre C\n            (\\<lambda>(ps, n). (Q \\<and>* (\\<lambda>s. True)) (ps, n div k))\n            (ps, k * n)) \\<and>\n       strip C = c", "have z: \"(\\<forall>s. (\\<lambda>(ps, n). (Q \\<and>* (\\<lambda>s. True)) (ps, n div k)) s) \\<Longrightarrow> (\\<forall>s. (\\<lambda>(ps, n). (Q \\<and>* (\\<lambda>s. True)) (ps, n)) s)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>s.\n       case s of\n       (ps, n) \\<Rightarrow>\n         (Q \\<and>* (\\<lambda>s. True)) (ps, n div k) \\<Longrightarrow>\n    \\<forall>s.\n       case s of\n       (ps, n) \\<Rightarrow> (Q \\<and>* (\\<lambda>s. True)) (ps, n)", "by (metis (no_types) case_prod_conv k neq0_conv nonzero_mult_div_cancel_left old.prod.exhaust)"], ["proof (state)\nthis:\n  \\<forall>s.\n     case s of\n     (ps, n) \\<Rightarrow>\n       (Q \\<and>* (\\<lambda>s. True)) (ps, n div k) \\<Longrightarrow>\n  \\<forall>s.\n     case s of (ps, n) \\<Rightarrow> (Q \\<and>* (\\<lambda>s. True)) (ps, n)\n\ngoal (1 subgoal):\n 1. \\<exists>C k.\n       vc C (Q \\<and>* (\\<lambda>s. True)) \\<and>\n       (\\<forall>ps n.\n           P (ps, n) \\<longrightarrow>\n           pre C\n            (\\<lambda>(ps, n). (Q \\<and>* (\\<lambda>s. True)) (ps, n div k))\n            (ps, k * n)) \\<and>\n       strip C = c", "have z: \"\\<And>ps n. ((Q \\<and>* (\\<lambda>s. True)) (ps, n div k) \\<Longrightarrow> (Q \\<and>* (\\<lambda>s. True)) (ps, n))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>ps n.\n       (Q \\<and>* (\\<lambda>s. True)) (ps, n div k) \\<Longrightarrow>\n       (Q \\<and>* (\\<lambda>s. True)) (ps, n)", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>ps n.\n       (Q \\<and>* (\\<lambda>s. True)) (ps, n div k) \\<Longrightarrow>\n       (Q \\<and>* (\\<lambda>s. True)) (ps, n)", "fix ps n"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>ps n.\n       (Q \\<and>* (\\<lambda>s. True)) (ps, n div k) \\<Longrightarrow>\n       (Q \\<and>* (\\<lambda>s. True)) (ps, n)", "assume \"(Q \\<and>* (\\<lambda>s. True)) (ps, n div k) \""], ["proof (state)\nthis:\n  (Q \\<and>* (\\<lambda>s. True)) (ps, n div k)\n\ngoal (1 subgoal):\n 1. \\<And>ps n.\n       (Q \\<and>* (\\<lambda>s. True)) (ps, n div k) \\<Longrightarrow>\n       (Q \\<and>* (\\<lambda>s. True)) (ps, n)", "then"], ["proof (chain)\npicking this:\n  (Q \\<and>* (\\<lambda>s. True)) (ps, n div k)", "guess ps1 n1 ps2 n2"], ["proof (prove)\nusing this:\n  (Q \\<and>* (\\<lambda>s. True)) (ps, n div k)\n\ngoal (1 subgoal):\n 1. thesis", "unfolding sep_conj_def"], ["proof (prove)\nusing this:\n  \\<exists>x y. x ## y \\<and> (ps, n div k) = x + y \\<and> Q x \\<and> True\n\ngoal (1 subgoal):\n 1. thesis", "by auto"], ["proof (state)\nthis:\n  ps1 ## ps2\n  ps = ps1 + ps2\n  Q (ps1, n1)\n  n div k = n1 + n2\n\ngoal (1 subgoal):\n 1. \\<And>ps n.\n       (Q \\<and>* (\\<lambda>s. True)) (ps, n div k) \\<Longrightarrow>\n       (Q \\<and>* (\\<lambda>s. True)) (ps, n)", "note o = this"], ["proof (state)\nthis:\n  ps1 ## ps2\n  ps = ps1 + ps2\n  Q (ps1, n1)\n  n div k = n1 + n2\n\ngoal (1 subgoal):\n 1. \\<And>ps n.\n       (Q \\<and>* (\\<lambda>s. True)) (ps, n div k) \\<Longrightarrow>\n       (Q \\<and>* (\\<lambda>s. True)) (ps, n)", "from o(4)"], ["proof (chain)\npicking this:\n  n div k = n1 + n2", "have nn1: \"n\\<ge>n1\""], ["proof (prove)\nusing this:\n  n div k = n1 + n2\n\ngoal (1 subgoal):\n 1. n1 \\<le> n", "using k"], ["proof (prove)\nusing this:\n  n div k = n1 + n2\n  0 < k\n\ngoal (1 subgoal):\n 1. n1 \\<le> n", "by (metis (full_types) add_leE div_le_dividend)"], ["proof (state)\nthis:\n  n1 \\<le> n\n\ngoal (1 subgoal):\n 1. \\<And>ps n.\n       (Q \\<and>* (\\<lambda>s. True)) (ps, n div k) \\<Longrightarrow>\n       (Q \\<and>* (\\<lambda>s. True)) (ps, n)", "show \"(Q \\<and>* (\\<lambda>s. True)) (ps, n)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (Q \\<and>* (\\<lambda>s. True)) (ps, n)", "unfolding sep_conj_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>x y. x ## y \\<and> (ps, n) = x + y \\<and> Q x \\<and> True", "apply(rule exI[where x=\"(ps1, n1)\"])"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>y.\n       (ps1, n1) ## y \\<and>\n       (ps, n) = (ps1, n1) + y \\<and> Q (ps1, n1) \\<and> True", "apply(rule exI[where x=\"(ps2, n - n1)\"])"], ["proof (prove)\ngoal (1 subgoal):\n 1. (ps1, n1) ## (ps2, n - n1) \\<and>\n    (ps, n) = (ps1, n1) + (ps2, n - n1) \\<and> Q (ps1, n1) \\<and> True", "using o nn1"], ["proof (prove)\nusing this:\n  ps1 ## ps2\n  ps = ps1 + ps2\n  Q (ps1, n1)\n  n div k = n1 + n2\n  n1 \\<le> n\n\ngoal (1 subgoal):\n 1. (ps1, n1) ## (ps2, n - n1) \\<and>\n    (ps, n) = (ps1, n1) + (ps2, n - n1) \\<and> Q (ps1, n1) \\<and> True", "by auto"], ["proof (state)\nthis:\n  (Q \\<and>* (\\<lambda>s. True)) (ps, n)\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  (Q \\<and>* (\\<lambda>s. True)) (?ps, ?n div k) \\<Longrightarrow>\n  (Q \\<and>* (\\<lambda>s. True)) (?ps, ?n)\n\ngoal (1 subgoal):\n 1. \\<exists>C k.\n       vc C (Q \\<and>* (\\<lambda>s. True)) \\<and>\n       (\\<forall>ps n.\n           P (ps, n) \\<longrightarrow>\n           pre C\n            (\\<lambda>(ps, n). (Q \\<and>* (\\<lambda>s. True)) (ps, n div k))\n            (ps, k * n)) \\<and>\n       strip C = c", "then"], ["proof (chain)\npicking this:\n  (Q \\<and>* (\\<lambda>s. True)) (?ps, ?n div k) \\<Longrightarrow>\n  (Q \\<and>* (\\<lambda>s. True)) (?ps, ?n)", "have z': \"\\<forall>s. ((Q \\<and>* (\\<lambda>s. True)) (fst s, (snd s) div k) \\<longrightarrow> (Q \\<and>* (\\<lambda>s. True)) s)\""], ["proof (prove)\nusing this:\n  (Q \\<and>* (\\<lambda>s. True)) (?ps, ?n div k) \\<Longrightarrow>\n  (Q \\<and>* (\\<lambda>s. True)) (?ps, ?n)\n\ngoal (1 subgoal):\n 1. \\<forall>s.\n       (Q \\<and>* (\\<lambda>s. True)) (fst s, snd s div k) \\<longrightarrow>\n       (Q \\<and>* (\\<lambda>s. True)) s", "by (metis prod.collapse)"], ["proof (state)\nthis:\n  \\<forall>s.\n     (Q \\<and>* (\\<lambda>s. True)) (fst s, snd s div k) \\<longrightarrow>\n     (Q \\<and>* (\\<lambda>s. True)) s\n\ngoal (1 subgoal):\n 1. \\<exists>C k.\n       vc C (Q \\<and>* (\\<lambda>s. True)) \\<and>\n       (\\<forall>ps n.\n           P (ps, n) \\<longrightarrow>\n           pre C\n            (\\<lambda>(ps, n). (Q \\<and>* (\\<lambda>s. True)) (ps, n div k))\n            (ps, k * n)) \\<and>\n       strip C = c", "from vc_complete[OF R]"], ["proof (chain)\npicking this:\n  \\<exists>C.\n     vc C\n      (\\<lambda>(ps, n).\n          (Q \\<and>* (\\<lambda>s. True)) (ps, n div k)) \\<and>\n     (\\<forall>s.\n         wp\\<^sub>3\\<^sub>' c\n          (\\<lambda>(ps, n). (Q \\<and>* (\\<lambda>s. True)) (ps, n div k))\n          s \\<longrightarrow>\n         pre C\n          (\\<lambda>(ps, n). (Q \\<and>* (\\<lambda>s. True)) (ps, n div k))\n          s) \\<and>\n     strip C = c", "guess C"], ["proof (prove)\nusing this:\n  \\<exists>C.\n     vc C\n      (\\<lambda>(ps, n).\n          (Q \\<and>* (\\<lambda>s. True)) (ps, n div k)) \\<and>\n     (\\<forall>s.\n         wp\\<^sub>3\\<^sub>' c\n          (\\<lambda>(ps, n). (Q \\<and>* (\\<lambda>s. True)) (ps, n div k))\n          s \\<longrightarrow>\n         pre C\n          (\\<lambda>(ps, n). (Q \\<and>* (\\<lambda>s. True)) (ps, n div k))\n          s) \\<and>\n     strip C = c\n\ngoal (1 subgoal):\n 1. thesis", "by auto"], ["proof (state)\nthis:\n  vc C (\\<lambda>(ps, n). (Q \\<and>* (\\<lambda>s. True)) (ps, n div k))\n  \\<forall>a b.\n     wp\\<^sub>3\\<^sub>' (strip C)\n      (\\<lambda>(ps, n). (Q \\<and>* (\\<lambda>s. True)) (ps, n div k))\n      (a, b) \\<longrightarrow>\n     pre C (\\<lambda>(ps, n). (Q \\<and>* (\\<lambda>s. True)) (ps, n div k))\n      (a, b)\n  c = strip C\n\ngoal (1 subgoal):\n 1. \\<exists>C k.\n       vc C (Q \\<and>* (\\<lambda>s. True)) \\<and>\n       (\\<forall>ps n.\n           P (ps, n) \\<longrightarrow>\n           pre C\n            (\\<lambda>(ps, n). (Q \\<and>* (\\<lambda>s. True)) (ps, n div k))\n            (ps, k * n)) \\<and>\n       strip C = c", "note o = this"], ["proof (state)\nthis:\n  vc C (\\<lambda>(ps, n). (Q \\<and>* (\\<lambda>s. True)) (ps, n div k))\n  \\<forall>a b.\n     wp\\<^sub>3\\<^sub>' (strip C)\n      (\\<lambda>(ps, n). (Q \\<and>* (\\<lambda>s. True)) (ps, n div k))\n      (a, b) \\<longrightarrow>\n     pre C (\\<lambda>(ps, n). (Q \\<and>* (\\<lambda>s. True)) (ps, n div k))\n      (a, b)\n  c = strip C\n\ngoal (1 subgoal):\n 1. \\<exists>C k.\n       vc C (Q \\<and>* (\\<lambda>s. True)) \\<and>\n       (\\<forall>ps n.\n           P (ps, n) \\<longrightarrow>\n           pre C\n            (\\<lambda>(ps, n). (Q \\<and>* (\\<lambda>s. True)) (ps, n div k))\n            (ps, k * n)) \\<and>\n       strip C = c", "have y: \"\\<And>ps n. P (ps, n) \\<Longrightarrow>  pre C (\\<lambda>(ps, n). (Q \\<and>* (\\<lambda>s. True)) (ps, n div k)) (ps, k * n)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>ps n.\n       P (ps, n) \\<Longrightarrow>\n       pre C\n        (\\<lambda>(ps, n). (Q \\<and>* (\\<lambda>s. True)) (ps, n div k))\n        (ps, k * n)", "using o p"], ["proof (prove)\nusing this:\n  vc C (\\<lambda>(ps, n). (Q \\<and>* (\\<lambda>s. True)) (ps, n div k))\n  \\<forall>a b.\n     wp\\<^sub>3\\<^sub>' (strip C)\n      (\\<lambda>(ps, n). (Q \\<and>* (\\<lambda>s. True)) (ps, n div k))\n      (a, b) \\<longrightarrow>\n     pre C (\\<lambda>(ps, n). (Q \\<and>* (\\<lambda>s. True)) (ps, n div k))\n      (a, b)\n  c = strip C\n  P (?ps, ?n) \\<Longrightarrow>\n  wp\\<^sub>3\\<^sub>' c\n   (\\<lambda>(ps, n). (Q \\<and>* (\\<lambda>s. True)) (ps, n div k))\n   (?ps, k * ?n)\n\ngoal (1 subgoal):\n 1. \\<And>ps n.\n       P (ps, n) \\<Longrightarrow>\n       pre C\n        (\\<lambda>(ps, n). (Q \\<and>* (\\<lambda>s. True)) (ps, n div k))\n        (ps, k * n)", "by metis"], ["proof (state)\nthis:\n  P (?ps, ?n) \\<Longrightarrow>\n  pre C (\\<lambda>(ps, n). (Q \\<and>* (\\<lambda>s. True)) (ps, n div k))\n   (?ps, k * ?n)\n\ngoal (1 subgoal):\n 1. \\<exists>C k.\n       vc C (Q \\<and>* (\\<lambda>s. True)) \\<and>\n       (\\<forall>ps n.\n           P (ps, n) \\<longrightarrow>\n           pre C\n            (\\<lambda>(ps, n). (Q \\<and>* (\\<lambda>s. True)) (ps, n div k))\n            (ps, k * n)) \\<and>\n       strip C = c", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>C k.\n       vc C (Q \\<and>* (\\<lambda>s. True)) \\<and>\n       (\\<forall>ps n.\n           P (ps, n) \\<longrightarrow>\n           pre C\n            (\\<lambda>(ps, n). (Q \\<and>* (\\<lambda>s. True)) (ps, n div k))\n            (ps, k * n)) \\<and>\n       strip C = c", "apply(rule exI[where x=C])"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>k.\n       vc C (Q \\<and>* (\\<lambda>s. True)) \\<and>\n       (\\<forall>ps n.\n           P (ps, n) \\<longrightarrow>\n           pre C\n            (\\<lambda>(ps, n). (Q \\<and>* (\\<lambda>s. True)) (ps, n div k))\n            (ps, k * n)) \\<and>\n       strip C = c", "apply(rule exI[where x=k])"], ["proof (prove)\ngoal (1 subgoal):\n 1. vc C (Q \\<and>* (\\<lambda>s. True)) \\<and>\n    (\\<forall>ps n.\n        P (ps, n) \\<longrightarrow>\n        pre C\n         (\\<lambda>(ps, n). (Q \\<and>* (\\<lambda>s. True)) (ps, n div k))\n         (ps, k * n)) \\<and>\n    strip C = c", "apply safe"], ["proof (prove)\ngoal (3 subgoals):\n 1. vc C (Q \\<and>* (\\<lambda>s. True))\n 2. \\<And>ps n.\n       P (ps, n) \\<Longrightarrow>\n       pre C\n        (\\<lambda>(ps, n). (Q \\<and>* (\\<lambda>s. True)) (ps, n div k))\n        (ps, k * n)\n 3. strip C = c", "subgoal"], ["proof (prove)\ngoal (1 subgoal):\n 1. vc C (Q \\<and>* (\\<lambda>s. True))", "apply(rule vc_mono[OF _ o(1)])"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>s.\n       (case s of\n        (ps, n) \\<Rightarrow>\n          (Q \\<and>* (\\<lambda>s. True)) (ps, n div k)) \\<longrightarrow>\n       (Q \\<and>* (\\<lambda>s. True)) s", "using z"], ["proof (prove)\nusing this:\n  (Q \\<and>* (\\<lambda>s. True)) (?ps, ?n div k) \\<Longrightarrow>\n  (Q \\<and>* (\\<lambda>s. True)) (?ps, ?n)\n\ngoal (1 subgoal):\n 1. \\<forall>s.\n       (case s of\n        (ps, n) \\<Rightarrow>\n          (Q \\<and>* (\\<lambda>s. True)) (ps, n div k)) \\<longrightarrow>\n       (Q \\<and>* (\\<lambda>s. True)) s", "by blast"], ["proof (prove)\ngoal (2 subgoals):\n 1. \\<And>ps n.\n       P (ps, n) \\<Longrightarrow>\n       pre C\n        (\\<lambda>(ps, n). (Q \\<and>* (\\<lambda>s. True)) (ps, n div k))\n        (ps, k * n)\n 2. strip C = c", "subgoal"], ["proof (prove)\ngoal (1 subgoal):\n 1. P (ps_, n_) \\<Longrightarrow>\n    pre C (\\<lambda>(ps, n). (Q \\<and>* (\\<lambda>s. True)) (ps, n div k))\n     (ps_, k * n_)", "using y"], ["proof (prove)\nusing this:\n  P (?ps, ?n) \\<Longrightarrow>\n  pre C (\\<lambda>(ps, n). (Q \\<and>* (\\<lambda>s. True)) (ps, n div k))\n   (?ps, k * ?n)\n\ngoal (1 subgoal):\n 1. P (ps_, n_) \\<Longrightarrow>\n    pre C (\\<lambda>(ps, n). (Q \\<and>* (\\<lambda>s. True)) (ps, n div k))\n     (ps_, k * n_)", "by blast"], ["proof (prove)\ngoal (1 subgoal):\n 1. strip C = c", "subgoal"], ["proof (prove)\ngoal (1 subgoal):\n 1. strip C = c", "using o"], ["proof (prove)\nusing this:\n  vc C (\\<lambda>(ps, n). (Q \\<and>* (\\<lambda>s. True)) (ps, n div k))\n  \\<forall>a b.\n     wp\\<^sub>3\\<^sub>' (strip C)\n      (\\<lambda>(ps, n). (Q \\<and>* (\\<lambda>s. True)) (ps, n div k))\n      (a, b) \\<longrightarrow>\n     pre C (\\<lambda>(ps, n). (Q \\<and>* (\\<lambda>s. True)) (ps, n div k))\n      (a, b)\n  c = strip C\n\ngoal (1 subgoal):\n 1. strip C = c", "by simp"], ["proof (prove)\ngoal:\nNo subgoals!", "done"], ["proof (state)\nthis:\n  \\<exists>C k.\n     vc C (Q \\<and>* (\\<lambda>s. True)) \\<and>\n     (\\<forall>ps n.\n         P (ps, n) \\<longrightarrow>\n         pre C\n          (\\<lambda>(ps, n). (Q \\<and>* (\\<lambda>s. True)) (ps, n div k))\n          (ps, k * n)) \\<and>\n     strip C = c\n\ngoal:\nNo subgoals!", "qed"], ["", "end"]]}