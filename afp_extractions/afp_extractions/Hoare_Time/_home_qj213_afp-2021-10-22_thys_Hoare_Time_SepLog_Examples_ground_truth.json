{"file_name": "/home/qj213/afp-2021-10-22/thys/Hoare_Time/SepLog_Examples.thy", "working_directory": "/home/qj213/afp-2021-10-22/thys/Hoare_Time", "problem_names": ["lemmas strongAssign = Assign''''[OF _ strengthen_post, OF _ Frame_R, OF _ Assign''']", "lemma myrule: assumes \"case s of (s, n) \\<Rightarrow> ($ (2 * x) \\<and>* ''x'' \\<hookrightarrow> int x) (s, n) \\<and> lmaps_to_axpr' (Less (N 0) (V ''x'')) True s\" \n    and \"symevalb ($ (2 * x) ** ''x'' \\<hookrightarrow> int x) (Less (N 0) (V ''x'')) v\"\n    shows \"(\\<up>(v=True) ** $ (2 * x) ** ''x'' \\<hookrightarrow> int x) s\"", "lemma E4_R: \"\\<turnstile>\\<^sub>3 {\\<up>(v>0) ** $(2*v) ** pointsto ''x'' (int v) } \n            ''x'' ::= Plus (V ''x'') (N (- 1))\n           {\\<up>(v>0) ** $(2*v-1) ** pointsto ''x'' (int v-1) }\"", "lemma prod_0: \n  shows \"(\\<lambda>(s::char list \\<Rightarrow> int option, c::nat). s = Map.empty \\<and> c = 0) h \\<Longrightarrow> h = 0\"", "lemma example2: \"\\<turnstile>\\<^sub>3 { (pointsto ''x'' n) ** (pointsto ''y'' n) ** $1 } ''x'' ::= Plus (V ''x'') (N (- 1)) { (pointsto ''x'' (n-1)) ** (pointsto ''y'' n) }\""], "translations": [["", "lemmas strongAssign = Assign''''[OF _ strengthen_post, OF _ Frame_R, OF _ Assign''']"], ["", "lemma myrule: assumes \"case s of (s, n) \\<Rightarrow> ($ (2 * x) \\<and>* ''x'' \\<hookrightarrow> int x) (s, n) \\<and> lmaps_to_axpr' (Less (N 0) (V ''x'')) True s\" \n    and \"symevalb ($ (2 * x) ** ''x'' \\<hookrightarrow> int x) (Less (N 0) (V ''x'')) v\"\n    shows \"(\\<up>(v=True) ** $ (2 * x) ** ''x'' \\<hookrightarrow> int x) s\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<up> (v = True) \\<and>*\n     $ (2 * x) \\<and>* ''x'' \\<hookrightarrow> int x)\n     s", "using assms"], ["proof (prove)\nusing this:\n  case s of\n  (s, n) \\<Rightarrow>\n    ($ (2 * x) \\<and>* ''x'' \\<hookrightarrow> int x) (s, n) \\<and>\n    lmaps_to_axpr' (Less (N 0) (V ''x'')) True s\n  symevalb ($ (2 * x) \\<and>* ''x'' \\<hookrightarrow> int x)\n   (Less (N 0) (V ''x'')) v\n\ngoal (1 subgoal):\n 1. (\\<up> (v = True) \\<and>*\n     $ (2 * x) \\<and>* ''x'' \\<hookrightarrow> int x)\n     s", "unfolding symevalb_def lmaps_to_axpr'_def"], ["proof (prove)\nusing this:\n  case s of\n  (s, n) \\<Rightarrow>\n    ($ (2 * x) \\<and>* ''x'' \\<hookrightarrow> int x) (s, n) \\<and>\n    lmaps_to_axpr (Less (N 0) (V ''x'')) True s\n  \\<forall>s n.\n     ($ (2 * x) \\<and>* ''x'' \\<hookrightarrow> int x)\n      (s, n) \\<longrightarrow>\n     pbval' (Less (N 0) (V ''x'')) s = Some v\n\ngoal (1 subgoal):\n 1. (\\<up> (v = True) \\<and>*\n     $ (2 * x) \\<and>* ''x'' \\<hookrightarrow> int x)\n     s", "by auto"], ["", "fun sum :: \"int \\<Rightarrow> int\" where\n\"sum i = (if i \\<le> 0 then 0 else sum (i - 1) + i)\""], ["", "abbreviation \"wsum ==\n  WHILE Less (N 0) (V ''x'')\n  DO ( \n      ''x'' ::= Plus (V ''x'') (N (- 1)))\""], ["", "lemma E4_R: \"\\<turnstile>\\<^sub>3 {\\<up>(v>0) ** $(2*v) ** pointsto ''x'' (int v) } \n            ''x'' ::= Plus (V ''x'') (N (- 1))\n           {\\<up>(v>0) ** $(2*v-1) ** pointsto ''x'' (int v-1) }\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<turnstile>\\<^sub>3 {\\<up> (0 < v) \\<and>*\n                          $ (2 * v) \\<and>* ''x'' \\<hookrightarrow> int v}\n                         ''x'' ::= Plus (V ''x'') (N (- 1))\n                         { \\<up> (0 < v) \\<and>*\n                           $ (2 * v - 1) \\<and>*\n                           ''x'' \\<hookrightarrow> int v - 1}", "apply(rule pureI)"], ["proof (prove)\ngoal (1 subgoal):\n 1. 0 < v \\<Longrightarrow>\n    \\<turnstile>\\<^sub>3 {$ (2 * v) \\<and>* ''x'' \\<hookrightarrow> int v}\n                         ''x'' ::= Plus (V ''x'') (N (- 1))\n                         { \\<up> (0 < v) \\<and>*\n                           $ (2 * v - 1) \\<and>*\n                           ''x'' \\<hookrightarrow> int v - 1}", "apply(rule strongAssign)"], ["proof (prove)\ngoal (3 subgoals):\n 1. 0 < v \\<Longrightarrow>\n    symeval ($ (2 * v) \\<and>* ''x'' \\<hookrightarrow> int v)\n     (Plus (V ''x'') (N (- 1))) ?v2\n 2. 0 < v \\<Longrightarrow>\n    Frame ($ (2 * v) \\<and>* ''x'' \\<hookrightarrow> int v)\n     ($ 1 \\<and>* ''x'' \\<hookrightarrow> ?ds2) ?F2\n 3. \\<And>s.\n       \\<lbrakk>0 < v; (''x'' \\<hookrightarrow> ?v2 \\<and>* ?F2) s\\<rbrakk>\n       \\<Longrightarrow> (\\<up> (0 < v) \\<and>*\n                          $ (2 * v - 1) \\<and>*\n                          ''x'' \\<hookrightarrow> int v - 1)\n                          s", "apply(rule symeval | frame_inference)+"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>s.\n       \\<lbrakk>0 < v;\n        (''x'' \\<hookrightarrow> int v + - 1 \\<and>* $ (2 * v - 1))\n         s\\<rbrakk>\n       \\<Longrightarrow> (\\<up> (0 < v) \\<and>*\n                          $ (2 * v - 1) \\<and>*\n                          ''x'' \\<hookrightarrow> int v - 1)\n                          s", "by (simp add:  sep_reorder_dollar )"], ["", "lemma prod_0: \n  shows \"(\\<lambda>(s::char list \\<Rightarrow> int option, c::nat). s = Map.empty \\<and> c = 0) h \\<Longrightarrow> h = 0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. case h of\n    (s, c) \\<Rightarrow> s = Map.empty \\<and> c = 0 \\<Longrightarrow>\n    h = 0", "by (auto simp: zero_prod_def zero_fun_def)"], ["", "lemma example2: \"\\<turnstile>\\<^sub>3 { (pointsto ''x'' n) ** (pointsto ''y'' n) ** $1 } ''x'' ::= Plus (V ''x'') (N (- 1)) { (pointsto ''x'' (n-1)) ** (pointsto ''y'' n) }\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<turnstile>\\<^sub>3 {''x'' \\<hookrightarrow> n \\<and>*\n                          ''y'' \\<hookrightarrow> n \\<and>* $ 1}\n                         ''x'' ::= Plus (V ''x'') (N (- 1))\n                         { ''x'' \\<hookrightarrow> n - 1 \\<and>*\n                           ''y'' \\<hookrightarrow> n}", "apply(rule conseq)"], ["proof (prove)\ngoal (3 subgoals):\n 1. \\<turnstile>\\<^sub>3 {?P} ''x'' ::= Plus (V ''x'') (N (- 1)) { ?Q}\n 2. \\<And>s.\n       (''x'' \\<hookrightarrow> n \\<and>*\n        ''y'' \\<hookrightarrow> n \\<and>* $ 1)\n        s \\<Longrightarrow>\n       ?P s\n 3. \\<And>s.\n       ?Q s \\<Longrightarrow>\n       (''x'' \\<hookrightarrow> n - 1 \\<and>* ''y'' \\<hookrightarrow> n) s", "apply(rule Frame[where F=\"(pointsto ''y'' n)\" and P=\"lmaps_to_expr_x ''x'' ( Plus (V ''x'') (N (- 1))) (n-1) ** $1\"])"], ["proof (prove)\ngoal (3 subgoals):\n 1. \\<turnstile>\\<^sub>3 {lmaps_to_expr_x ''x'' (Plus (V ''x'') (N (- 1)))\n                           (n - 1) \\<and>*\n                          $ 1}\n                         ''x'' ::= Plus (V ''x'') (N (- 1)) { ?Q4}\n 2. \\<And>s.\n       (''x'' \\<hookrightarrow> n \\<and>*\n        ''y'' \\<hookrightarrow> n \\<and>* $ 1)\n        s \\<Longrightarrow>\n       ((lmaps_to_expr_x ''x'' (Plus (V ''x'') (N (- 1))) (n - 1) \\<and>*\n         $ 1) \\<and>*\n        ''y'' \\<hookrightarrow> n)\n        s\n 3. \\<And>s.\n       (?Q4 \\<and>* ''y'' \\<hookrightarrow> n) s \\<Longrightarrow>\n       (''x'' \\<hookrightarrow> n - 1 \\<and>* ''y'' \\<hookrightarrow> n) s", "apply (rule Assign)"], ["proof (prove)\ngoal (2 subgoals):\n 1. \\<And>s.\n       (''x'' \\<hookrightarrow> n \\<and>*\n        ''y'' \\<hookrightarrow> n \\<and>* $ 1)\n        s \\<Longrightarrow>\n       ((lmaps_to_expr_x ''x'' (Plus (V ''x'') (N (- 1))) (n - 1) \\<and>*\n         $ 1) \\<and>*\n        ''y'' \\<hookrightarrow> n)\n        s\n 2. \\<And>s.\n       (((\\<lambda>(s, c).\n             dom s = vars (Plus (V ''x'') (N (- 1))) - {''x''} \\<and>\n             c = 0) \\<and>*\n         ''x'' \\<hookrightarrow> n - 1) \\<and>*\n        ''y'' \\<hookrightarrow> n)\n        s \\<Longrightarrow>\n       (''x'' \\<hookrightarrow> n - 1 \\<and>* ''y'' \\<hookrightarrow> n) s", "apply (simp add: sep_conj_assoc)"], ["proof (prove)\ngoal (2 subgoals):\n 1. \\<And>s.\n       (''x'' \\<hookrightarrow> n \\<and>*\n        ''y'' \\<hookrightarrow> n \\<and>* $ (Suc 0))\n        s \\<Longrightarrow>\n       ((\\<lambda>(s, c).\n            dom s = {''x''} \\<and> the (s ''x'') = n \\<and> c = 0) \\<and>*\n        $ (Suc 0) \\<and>* ''y'' \\<hookrightarrow> n)\n        s\n 2. \\<And>s.\n       (((\\<lambda>(s, c).\n             dom s = vars (Plus (V ''x'') (N (- 1))) - {''x''} \\<and>\n             c = 0) \\<and>*\n         ''x'' \\<hookrightarrow> n - 1) \\<and>*\n        ''y'' \\<hookrightarrow> n)\n        s \\<Longrightarrow>\n       (''x'' \\<hookrightarrow> n - 1 \\<and>* ''y'' \\<hookrightarrow> n) s", "apply (rule sep_conj_impl)"], ["proof (prove)\ngoal (4 subgoals):\n 1. \\<And>s.\n       (''x'' \\<hookrightarrow> n \\<and>*\n        ''y'' \\<hookrightarrow> n \\<and>* $ (Suc 0))\n        s \\<Longrightarrow>\n       (?P7 s \\<and>* ?Q7 s) s\n 2. \\<And>s h.\n       \\<lbrakk>(''x'' \\<hookrightarrow> n \\<and>*\n                 ''y'' \\<hookrightarrow> n \\<and>* $ (Suc 0))\n                 s;\n        ?P7 s h\\<rbrakk>\n       \\<Longrightarrow> case h of\n                         (s, c) \\<Rightarrow>\n                           dom s = {''x''} \\<and>\n                           the (s ''x'') = n \\<and> c = 0\n 3. \\<And>s h.\n       \\<lbrakk>(''x'' \\<hookrightarrow> n \\<and>*\n                 ''y'' \\<hookrightarrow> n \\<and>* $ (Suc 0))\n                 s;\n        ?Q7 s h\\<rbrakk>\n       \\<Longrightarrow> ($ (Suc 0) \\<and>* ''y'' \\<hookrightarrow> n) h\n 4. \\<And>s.\n       (((\\<lambda>(s, c).\n             dom s = vars (Plus (V ''x'') (N (- 1))) - {''x''} \\<and>\n             c = 0) \\<and>*\n         ''x'' \\<hookrightarrow> n - 1) \\<and>*\n        ''y'' \\<hookrightarrow> n)\n        s \\<Longrightarrow>\n       (''x'' \\<hookrightarrow> n - 1 \\<and>* ''y'' \\<hookrightarrow> n) s", "apply auto[1]"], ["proof (prove)\ngoal (3 subgoals):\n 1. \\<And>s h.\n       \\<lbrakk>(''x'' \\<hookrightarrow> n \\<and>*\n                 ''y'' \\<hookrightarrow> n \\<and>* $ (Suc 0))\n                 s;\n        (''x'' \\<hookrightarrow> n) h\\<rbrakk>\n       \\<Longrightarrow> case h of\n                         (s, c) \\<Rightarrow>\n                           dom s = {''x''} \\<and>\n                           the (s ''x'') = n \\<and> c = 0\n 2. \\<And>s h.\n       \\<lbrakk>(''x'' \\<hookrightarrow> n \\<and>*\n                 ''y'' \\<hookrightarrow> n \\<and>* $ (Suc 0))\n                 s;\n        (''y'' \\<hookrightarrow> n \\<and>* $ (Suc 0)) h\\<rbrakk>\n       \\<Longrightarrow> ($ (Suc 0) \\<and>* ''y'' \\<hookrightarrow> n) h\n 3. \\<And>s.\n       (((\\<lambda>(s, c).\n             dom s = vars (Plus (V ''x'') (N (- 1))) - {''x''} \\<and>\n             c = 0) \\<and>*\n         ''x'' \\<hookrightarrow> n - 1) \\<and>*\n        ''y'' \\<hookrightarrow> n)\n        s \\<Longrightarrow>\n       (''x'' \\<hookrightarrow> n - 1 \\<and>* ''y'' \\<hookrightarrow> n) s", "subgoal for s h"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>(''x'' \\<hookrightarrow> n \\<and>*\n              ''y'' \\<hookrightarrow> n \\<and>* $ (Suc 0))\n              s;\n     (''x'' \\<hookrightarrow> n) h\\<rbrakk>\n    \\<Longrightarrow> case h of\n                      (s, c) \\<Rightarrow>\n                        dom s = {''x''} \\<and>\n                        the (s ''x'') = n \\<and> c = 0", "unfolding pointsto_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>((\\<lambda>(s, c).\n                  s = [''x'' \\<mapsto> n] \\<and> c = 0) \\<and>*\n              (\\<lambda>(s, c).\n                  s = [''y'' \\<mapsto> n] \\<and> c = 0) \\<and>*\n              $ (Suc 0))\n              s;\n     case h of\n     (s, c) \\<Rightarrow> s = [''x'' \\<mapsto> n] \\<and> c = 0\\<rbrakk>\n    \\<Longrightarrow> case h of\n                      (s, c) \\<Rightarrow>\n                        dom s = {''x''} \\<and>\n                        the (s ''x'') = n \\<and> c = 0", "apply auto"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>x y.\n       \\<lbrakk>((\\<lambda>(s, c).\n                     s = [''x'' \\<mapsto> n] \\<and> c = 0) \\<and>*\n                 (\\<lambda>(s, c).\n                     s = [''y'' \\<mapsto> n] \\<and> c = 0) \\<and>*\n                 $ (Suc 0))\n                 s;\n        h = ([''x'' \\<mapsto> n], 0);\n        (if x = ''x'' then Some n else None) = Some y\\<rbrakk>\n       \\<Longrightarrow> x = ''x''", "by (meson option.distinct(1))"], ["proof (prove)\ngoal (2 subgoals):\n 1. \\<And>s h.\n       \\<lbrakk>(''x'' \\<hookrightarrow> n \\<and>*\n                 ''y'' \\<hookrightarrow> n \\<and>* $ (Suc 0))\n                 s;\n        (''y'' \\<hookrightarrow> n \\<and>* $ (Suc 0)) h\\<rbrakk>\n       \\<Longrightarrow> ($ (Suc 0) \\<and>* ''y'' \\<hookrightarrow> n) h\n 2. \\<And>s.\n       (((\\<lambda>(s, c).\n             dom s = vars (Plus (V ''x'') (N (- 1))) - {''x''} \\<and>\n             c = 0) \\<and>*\n         ''x'' \\<hookrightarrow> n - 1) \\<and>*\n        ''y'' \\<hookrightarrow> n)\n        s \\<Longrightarrow>\n       (''x'' \\<hookrightarrow> n - 1 \\<and>* ''y'' \\<hookrightarrow> n) s", "apply (simp add: sep_conj_commute)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>s.\n       (((\\<lambda>(s, c).\n             dom s = vars (Plus (V ''x'') (N (- 1))) - {''x''} \\<and>\n             c = 0) \\<and>*\n         ''x'' \\<hookrightarrow> n - 1) \\<and>*\n        ''y'' \\<hookrightarrow> n)\n        s \\<Longrightarrow>\n       (''x'' \\<hookrightarrow> n - 1 \\<and>* ''y'' \\<hookrightarrow> n) s", "apply simp"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>s.\n       (((\\<lambda>(s, c). s = Map.empty \\<and> c = 0) \\<and>*\n         ''x'' \\<hookrightarrow> n - 1) \\<and>*\n        ''y'' \\<hookrightarrow> n)\n        s \\<Longrightarrow>\n       (''x'' \\<hookrightarrow> n - 1 \\<and>* ''y'' \\<hookrightarrow> n) s", "apply (rule sep_conj_impl)"], ["proof (prove)\ngoal (3 subgoals):\n 1. \\<And>s.\n       (((\\<lambda>(s, c). s = Map.empty \\<and> c = 0) \\<and>*\n         ''x'' \\<hookrightarrow> n - 1) \\<and>*\n        ''y'' \\<hookrightarrow> n)\n        s \\<Longrightarrow>\n       (?P13 s \\<and>* ?Q13 s) s\n 2. \\<And>s h.\n       \\<lbrakk>(((\\<lambda>(s, c). s = Map.empty \\<and> c = 0) \\<and>*\n                  ''x'' \\<hookrightarrow> n - 1) \\<and>*\n                 ''y'' \\<hookrightarrow> n)\n                 s;\n        ?P13 s h\\<rbrakk>\n       \\<Longrightarrow> (''x'' \\<hookrightarrow> n - 1) h\n 3. \\<And>s h.\n       \\<lbrakk>(((\\<lambda>(s, c). s = Map.empty \\<and> c = 0) \\<and>*\n                  ''x'' \\<hookrightarrow> n - 1) \\<and>*\n                 ''y'' \\<hookrightarrow> n)\n                 s;\n        ?Q13 s h\\<rbrakk>\n       \\<Longrightarrow> (''y'' \\<hookrightarrow> n) h", "apply auto[1]"], ["proof (prove)\ngoal (2 subgoals):\n 1. \\<And>s h.\n       \\<lbrakk>(((\\<lambda>(s, c). s = Map.empty \\<and> c = 0) \\<and>*\n                  ''x'' \\<hookrightarrow> n - 1) \\<and>*\n                 ''y'' \\<hookrightarrow> n)\n                 s;\n        ((\\<lambda>(s, c). s = Map.empty \\<and> c = 0) \\<and>*\n         ''x'' \\<hookrightarrow> n - 1)\n         h\\<rbrakk>\n       \\<Longrightarrow> (''x'' \\<hookrightarrow> n - 1) h\n 2. \\<And>s h.\n       \\<lbrakk>(((\\<lambda>(s, c). s = Map.empty \\<and> c = 0) \\<and>*\n                  ''x'' \\<hookrightarrow> n - 1) \\<and>*\n                 ''y'' \\<hookrightarrow> n)\n                 s;\n        (''y'' \\<hookrightarrow> n) h\\<rbrakk>\n       \\<Longrightarrow> (''y'' \\<hookrightarrow> n) h", "apply auto"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>a b aa ba.\n       \\<lbrakk>(((\\<lambda>(s, c). s = Map.empty \\<and> c = 0) \\<and>*\n                  ''x'' \\<hookrightarrow> n - 1) \\<and>*\n                 ''y'' \\<hookrightarrow> n)\n                 (a, b);\n        ((\\<lambda>(s, c). s = Map.empty \\<and> c = 0) \\<and>*\n         ''x'' \\<hookrightarrow> n - 1)\n         (aa, ba)\\<rbrakk>\n       \\<Longrightarrow> (''x'' \\<hookrightarrow> n - 1) (aa, ba)", "unfolding sep_conj_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>a b aa ba.\n       \\<lbrakk>\\<exists>x y.\n                   x ## y \\<and>\n                   (a, b) = x + y \\<and>\n                   (\\<exists>xa y.\n                       xa ## y \\<and>\n                       x = xa + y \\<and>\n                       (case xa of\n                        (s, c) \\<Rightarrow>\n                          s = Map.empty \\<and> c = 0) \\<and>\n                       (''x'' \\<hookrightarrow> n - 1) y) \\<and>\n                   (''y'' \\<hookrightarrow> n) y;\n        \\<exists>x y.\n           x ## y \\<and>\n           (aa, ba) = x + y \\<and>\n           (case x of\n            (s, c) \\<Rightarrow> s = Map.empty \\<and> c = 0) \\<and>\n           (''x'' \\<hookrightarrow> n - 1) y\\<rbrakk>\n       \\<Longrightarrow> (''x'' \\<hookrightarrow> n - 1) (aa, ba)", "using prod_0"], ["proof (prove)\nusing this:\n  case ?h of\n  (s, c) \\<Rightarrow> s = Map.empty \\<and> c = 0 \\<Longrightarrow>\n  ?h = 0\n\ngoal (1 subgoal):\n 1. \\<And>a b aa ba.\n       \\<lbrakk>\\<exists>x y.\n                   x ## y \\<and>\n                   (a, b) = x + y \\<and>\n                   (\\<exists>xa y.\n                       xa ## y \\<and>\n                       x = xa + y \\<and>\n                       (case xa of\n                        (s, c) \\<Rightarrow>\n                          s = Map.empty \\<and> c = 0) \\<and>\n                       (''x'' \\<hookrightarrow> n - 1) y) \\<and>\n                   (''y'' \\<hookrightarrow> n) y;\n        \\<exists>x y.\n           x ## y \\<and>\n           (aa, ba) = x + y \\<and>\n           (case x of\n            (s, c) \\<Rightarrow> s = Map.empty \\<and> c = 0) \\<and>\n           (''x'' \\<hookrightarrow> n - 1) y\\<rbrakk>\n       \\<Longrightarrow> (''x'' \\<hookrightarrow> n - 1) (aa, ba)", "by fastforce"], ["", "end"]]}