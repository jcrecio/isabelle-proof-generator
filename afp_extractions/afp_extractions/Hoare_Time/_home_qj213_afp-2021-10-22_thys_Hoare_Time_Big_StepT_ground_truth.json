{"file_name": "/home/qj213/afp-2021-10-22/thys/Hoare_Time/Big_StepT.thy", "working_directory": "/home/qj213/afp-2021-10-22/thys/Hoare_Time", "problem_names": ["lemmas big_step_t_induct = big_step_t.induct[split_format(complete)]", "lemma \"(IF b THEN SKIP ELSE SKIP, s) \\<Rightarrow> x \\<Down> t \\<Longrightarrow> t = s\"", "lemma assumes \"(IF b THEN SKIP ELSE SKIP, s) \\<Rightarrow> x \\<Down> t\"\nshows \"t = s\"", "lemma assign_t_simp:\n  \"(x ::= a,s) \\<Rightarrow> Suc 0 \\<Down>  s' \\<longleftrightarrow> (s' = s(x := aval a s))\"", "lemma Seq_t_assoc:\n  \"((c1;; c2;; c3, s) \\<Rightarrow> p \\<Down>  s') \\<longleftrightarrow> ((c1;; (c2;; c3), s) \\<Rightarrow> p \\<Down> s')\"", "lemma \"(\\<exists>p. ((c, s) \\<Rightarrow> p \\<Down>  s')) = ((c, s) \\<Rightarrow> s')\"", "theorem big_step_t_determ: \"\\<lbrakk> (c,s) \\<Rightarrow> p \\<Down> t; (c,s) \\<Rightarrow> q \\<Down> u \\<rbrakk> \\<Longrightarrow> u = t\"", "theorem big_step_t_determ2: \"\\<lbrakk> (c,s) \\<Rightarrow> p \\<Down> t; (c,s) \\<Rightarrow> q \\<Down> u \\<rbrakk> \\<Longrightarrow> (u = t \\<and> p=q)\"", "lemma bigstep_det: \"(c1, s) \\<Rightarrow> p1 \\<Down> t1 \\<Longrightarrow> (c1, s) \\<Rightarrow> p \\<Down> t \\<Longrightarrow> p1=p \\<and> t1=t\"", "lemma bigstep_progress: \"(c, s) \\<Rightarrow> p \\<Down> t \\<Longrightarrow> p > 0\"", "lemma bigstepT_the_cost: \"(c, s) \\<Rightarrow> t \\<Down> s' \\<Longrightarrow> \\<down>\\<^sub>t(c, s) = t\"", "lemma bigstepT_the_state: \"(c, s) \\<Rightarrow> t \\<Down> s' \\<Longrightarrow> \\<down>\\<^sub>s(c, s) = s'\"", "lemma SKIPnot: \"(\\<not> (SKIP, s) \\<Rightarrow> p \\<Down> t) = (s\\<noteq>t \\<or> p\\<noteq>Suc 0)\"", "lemma SKIPp: \"\\<down>\\<^sub>t(SKIP,s) = Suc 0\"", "lemma SKIPt: \"\\<down>\\<^sub>s(SKIP,s) = s\"", "lemma ASSp: \"(THE p. Ex (big_step_t (x ::= e, s) p)) = Suc 0\"", "lemma ASSt: \"(THE t. \\<exists>p. (x ::= e, s) \\<Rightarrow> p \\<Down> t) = s(x := aval e s)\"", "lemma ASSnot: \"( \\<not> (x ::= e, s) \\<Rightarrow> p \\<Down> t ) = (p\\<noteq>Suc 0 \\<or> t\\<noteq>s(x := aval e s))\"", "lemma If_THE_True: \"Suc (THE n. \\<exists>a. (c1, s) \\<Rightarrow> n \\<Down> a) =  (THE n. \\<exists>a. (IF b THEN c1 ELSE c2, s) \\<Rightarrow> n \\<Down> a)\"\n     if T: \"bval b s\" and c1_t: \"terminates (c1,s)\" for s l", "lemma If_THE_False: \"Suc (THE n. \\<exists>a. (c2, s) \\<Rightarrow> n \\<Down> a) =  (THE n. \\<exists>a. (IF b THEN c1 ELSE c2, s) \\<Rightarrow> n \\<Down> a)\"\n     if T: \"\\<not>bval b s\" and c2_t: \"\\<down> (c2,s)\" for s l"], "translations": [["", "lemmas big_step_t_induct = big_step_t.induct[split_format(complete)]"], ["", "subsection \"Rule inversion\""], ["", "text\\<open>What can we deduce from @{prop \"(SKIP,s) \\<Rightarrow> x \\<Down> t\"} ?\nThat @{prop \"s = t\"}. This is how we can automatically prove it:\\<close>"], ["", "inductive_cases Skip_tE[elim!]: \"(SKIP,s) \\<Rightarrow> x \\<Down> t\""], ["", "thm Skip_tE"], ["", "text\\<open>This is an \\emph{elimination rule}. The [elim] attribute tells auto,\nblast and friends (but not simp!) to use it automatically; [elim!] means that\nit is applied eagerly.\n\nSimilarly for the other commands:\\<close>"], ["", "inductive_cases Assign_tE[elim!]: \"(x ::= a,s) \\<Rightarrow> p \\<Down> t\""], ["", "thm Assign_tE"], ["", "inductive_cases Seq_tE[elim!]: \"(c1;;c2,s1) \\<Rightarrow> p \\<Down> s3\""], ["", "thm Seq_tE"], ["", "inductive_cases If_tE[elim!]: \"(IF b THEN c1 ELSE c2,s) \\<Rightarrow> x \\<Down> t\""], ["", "thm If_tE"], ["", "inductive_cases While_tE[elim]: \"(WHILE b DO c,s) \\<Rightarrow> x \\<Down> t\""], ["", "thm While_tE"], ["", "text\\<open>Only [elim]: [elim!] would not terminate.\\<close>"], ["", "text\\<open>An automatic example:\\<close>"], ["", "lemma \"(IF b THEN SKIP ELSE SKIP, s) \\<Rightarrow> x \\<Down> t \\<Longrightarrow> t = s\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (IF b THEN SKIP ELSE SKIP,\n     s) \\<Rightarrow> x \\<Down> t \\<Longrightarrow>\n    t = s", "by blast"], ["", "text\\<open>Rule inversion by hand via the ``cases'' method:\\<close>"], ["", "lemma assumes \"(IF b THEN SKIP ELSE SKIP, s) \\<Rightarrow> x \\<Down> t\"\nshows \"t = s\""], ["proof (prove)\ngoal (1 subgoal):\n 1. t = s", "proof-"], ["proof (state)\ngoal (1 subgoal):\n 1. t = s", "from assms"], ["proof (chain)\npicking this:\n  (IF b THEN SKIP ELSE SKIP, s) \\<Rightarrow> x \\<Down> t", "show ?thesis"], ["proof (prove)\nusing this:\n  (IF b THEN SKIP ELSE SKIP, s) \\<Rightarrow> x \\<Down> t\n\ngoal (1 subgoal):\n 1. t = s", "proof cases  \\<comment> \\<open>inverting assms\\<close>"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>xa.\n       \\<lbrakk>bval b s; (SKIP, s) \\<Rightarrow> xa \\<Down> t;\n        x = xa + 1\\<rbrakk>\n       \\<Longrightarrow> t = s\n 2. \\<And>xa.\n       \\<lbrakk>\\<not> bval b s; (SKIP, s) \\<Rightarrow> xa \\<Down> t;\n        x = xa + 1\\<rbrakk>\n       \\<Longrightarrow> t = s", "case IfTrue"], ["proof (state)\nthis:\n  bval b s\n  (SKIP, s) \\<Rightarrow> x_ \\<Down> t\n  x = x_ + 1\n\ngoal (2 subgoals):\n 1. \\<And>xa.\n       \\<lbrakk>bval b s; (SKIP, s) \\<Rightarrow> xa \\<Down> t;\n        x = xa + 1\\<rbrakk>\n       \\<Longrightarrow> t = s\n 2. \\<And>xa.\n       \\<lbrakk>\\<not> bval b s; (SKIP, s) \\<Rightarrow> xa \\<Down> t;\n        x = xa + 1\\<rbrakk>\n       \\<Longrightarrow> t = s", "thus ?thesis"], ["proof (prove)\nusing this:\n  bval b s\n  (SKIP, s) \\<Rightarrow> x_ \\<Down> t\n  x = x_ + 1\n\ngoal (1 subgoal):\n 1. t = s", "by blast"], ["proof (state)\nthis:\n  t = s\n\ngoal (1 subgoal):\n 1. \\<And>xa.\n       \\<lbrakk>\\<not> bval b s; (SKIP, s) \\<Rightarrow> xa \\<Down> t;\n        x = xa + 1\\<rbrakk>\n       \\<Longrightarrow> t = s", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>xa.\n       \\<lbrakk>\\<not> bval b s; (SKIP, s) \\<Rightarrow> xa \\<Down> t;\n        x = xa + 1\\<rbrakk>\n       \\<Longrightarrow> t = s", "case IfFalse"], ["proof (state)\nthis:\n  \\<not> bval b s\n  (SKIP, s) \\<Rightarrow> x_ \\<Down> t\n  x = x_ + 1\n\ngoal (1 subgoal):\n 1. \\<And>xa.\n       \\<lbrakk>\\<not> bval b s; (SKIP, s) \\<Rightarrow> xa \\<Down> t;\n        x = xa + 1\\<rbrakk>\n       \\<Longrightarrow> t = s", "thus ?thesis"], ["proof (prove)\nusing this:\n  \\<not> bval b s\n  (SKIP, s) \\<Rightarrow> x_ \\<Down> t\n  x = x_ + 1\n\ngoal (1 subgoal):\n 1. t = s", "by blast"], ["proof (state)\nthis:\n  t = s\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  t = s\n\ngoal:\nNo subgoals!", "qed"], ["", "(* Using rule inversion to prove simplification rules: *)"], ["", "lemma assign_t_simp:\n  \"(x ::= a,s) \\<Rightarrow> Suc 0 \\<Down>  s' \\<longleftrightarrow> (s' = s(x := aval a s))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (x ::= a, s) \\<Rightarrow> Suc 0 \\<Down> s' = (s' = s(x := aval a s))", "by (auto)"], ["", "text \\<open>An example combining rule inversion and derivations\\<close>"], ["", "lemma Seq_t_assoc:\n  \"((c1;; c2;; c3, s) \\<Rightarrow> p \\<Down>  s') \\<longleftrightarrow> ((c1;; (c2;; c3), s) \\<Rightarrow> p \\<Down> s')\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (c1;; c2;; c3, s) \\<Rightarrow> p \\<Down> s' =\n    (c1;; (c2;; c3), s) \\<Rightarrow> p \\<Down> s'", "proof"], ["proof (state)\ngoal (2 subgoals):\n 1. (c1;; c2;; c3, s) \\<Rightarrow> p \\<Down> s' \\<Longrightarrow>\n    (c1;; (c2;; c3), s) \\<Rightarrow> p \\<Down> s'\n 2. (c1;; (c2;; c3), s) \\<Rightarrow> p \\<Down> s' \\<Longrightarrow>\n    (c1;; c2;; c3, s) \\<Rightarrow> p \\<Down> s'", "assume \"(c1;; c2;; c3, s) \\<Rightarrow> p \\<Down> s'\""], ["proof (state)\nthis:\n  (c1;; c2;; c3, s) \\<Rightarrow> p \\<Down> s'\n\ngoal (2 subgoals):\n 1. (c1;; c2;; c3, s) \\<Rightarrow> p \\<Down> s' \\<Longrightarrow>\n    (c1;; (c2;; c3), s) \\<Rightarrow> p \\<Down> s'\n 2. (c1;; (c2;; c3), s) \\<Rightarrow> p \\<Down> s' \\<Longrightarrow>\n    (c1;; c2;; c3, s) \\<Rightarrow> p \\<Down> s'", "then"], ["proof (chain)\npicking this:\n  (c1;; c2;; c3, s) \\<Rightarrow> p \\<Down> s'", "obtain s1 s2 p1 p2 p3 where\n    c1: \"(c1, s) \\<Rightarrow> p1 \\<Down> s1\" and\n    c2: \"(c2, s1) \\<Rightarrow> p2 \\<Down> s2\" and\n    c3: \"(c3, s2) \\<Rightarrow> p3 \\<Down> s'\" and\n    p: \"p = p1 + (p2 + p3)\""], ["proof (prove)\nusing this:\n  (c1;; c2;; c3, s) \\<Rightarrow> p \\<Down> s'\n\ngoal (1 subgoal):\n 1. (\\<And>p1 s1 p2 s2 p3.\n        \\<lbrakk>(c1, s) \\<Rightarrow> p1 \\<Down> s1;\n         (c2, s1) \\<Rightarrow> p2 \\<Down> s2;\n         (c3, s2) \\<Rightarrow> p3 \\<Down> s'; p = p1 + (p2 + p3)\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  (c1, s) \\<Rightarrow> p1 \\<Down> s1\n  (c2, s1) \\<Rightarrow> p2 \\<Down> s2\n  (c3, s2) \\<Rightarrow> p3 \\<Down> s'\n  p = p1 + (p2 + p3)\n\ngoal (2 subgoals):\n 1. (c1;; c2;; c3, s) \\<Rightarrow> p \\<Down> s' \\<Longrightarrow>\n    (c1;; (c2;; c3), s) \\<Rightarrow> p \\<Down> s'\n 2. (c1;; (c2;; c3), s) \\<Rightarrow> p \\<Down> s' \\<Longrightarrow>\n    (c1;; c2;; c3, s) \\<Rightarrow> p \\<Down> s'", "from c2 c3"], ["proof (chain)\npicking this:\n  (c2, s1) \\<Rightarrow> p2 \\<Down> s2\n  (c3, s2) \\<Rightarrow> p3 \\<Down> s'", "have \"(c2;; c3, s1) \\<Rightarrow> p2 + p3 \\<Down>  s'\""], ["proof (prove)\nusing this:\n  (c2, s1) \\<Rightarrow> p2 \\<Down> s2\n  (c3, s2) \\<Rightarrow> p3 \\<Down> s'\n\ngoal (1 subgoal):\n 1. (c2;; c3, s1) \\<Rightarrow> p2 + p3 \\<Down> s'", "apply (rule Seq)"], ["proof (prove)\ngoal (1 subgoal):\n 1. p2 + p3 = p2 + p3", "by simp"], ["proof (state)\nthis:\n  (c2;; c3, s1) \\<Rightarrow> p2 + p3 \\<Down> s'\n\ngoal (2 subgoals):\n 1. (c1;; c2;; c3, s) \\<Rightarrow> p \\<Down> s' \\<Longrightarrow>\n    (c1;; (c2;; c3), s) \\<Rightarrow> p \\<Down> s'\n 2. (c1;; (c2;; c3), s) \\<Rightarrow> p \\<Down> s' \\<Longrightarrow>\n    (c1;; c2;; c3, s) \\<Rightarrow> p \\<Down> s'", "with c1"], ["proof (chain)\npicking this:\n  (c1, s) \\<Rightarrow> p1 \\<Down> s1\n  (c2;; c3, s1) \\<Rightarrow> p2 + p3 \\<Down> s'", "show \"(c1;; (c2;; c3), s) \\<Rightarrow> p \\<Down> s'\""], ["proof (prove)\nusing this:\n  (c1, s) \\<Rightarrow> p1 \\<Down> s1\n  (c2;; c3, s1) \\<Rightarrow> p2 + p3 \\<Down> s'\n\ngoal (1 subgoal):\n 1. (c1;; (c2;; c3), s) \\<Rightarrow> p \\<Down> s'", "unfolding p"], ["proof (prove)\nusing this:\n  (c1, s) \\<Rightarrow> p1 \\<Down> s1\n  (c2;; c3, s1) \\<Rightarrow> p2 + p3 \\<Down> s'\n\ngoal (1 subgoal):\n 1. (c1;; (c2;; c3), s) \\<Rightarrow> p1 + (p2 + p3) \\<Down> s'", "apply (rule Seq)"], ["proof (prove)\ngoal (1 subgoal):\n 1. p1 + (p2 + p3) = p1 + (p2 + p3)", "by simp"], ["proof (state)\nthis:\n  (c1;; (c2;; c3), s) \\<Rightarrow> p \\<Down> s'\n\ngoal (1 subgoal):\n 1. (c1;; (c2;; c3), s) \\<Rightarrow> p \\<Down> s' \\<Longrightarrow>\n    (c1;; c2;; c3, s) \\<Rightarrow> p \\<Down> s'", "next\n  \\<comment> \\<open>The other direction is analogous\\<close>"], ["proof (state)\ngoal (1 subgoal):\n 1. (c1;; (c2;; c3), s) \\<Rightarrow> p \\<Down> s' \\<Longrightarrow>\n    (c1;; c2;; c3, s) \\<Rightarrow> p \\<Down> s'", "assume \"(c1;; (c2;; c3), s) \\<Rightarrow> p \\<Down> s'\""], ["proof (state)\nthis:\n  (c1;; (c2;; c3), s) \\<Rightarrow> p \\<Down> s'\n\ngoal (1 subgoal):\n 1. (c1;; (c2;; c3), s) \\<Rightarrow> p \\<Down> s' \\<Longrightarrow>\n    (c1;; c2;; c3, s) \\<Rightarrow> p \\<Down> s'", "then"], ["proof (chain)\npicking this:\n  (c1;; (c2;; c3), s) \\<Rightarrow> p \\<Down> s'", "obtain s1 s2 p1 p2 p3 where\n    c1: \"(c1, s) \\<Rightarrow> p1 \\<Down> s1\" and\n    c2: \"(c2, s1) \\<Rightarrow> p2 \\<Down> s2\" and\n    c3: \"(c3, s2) \\<Rightarrow> p3 \\<Down> s'\" and\n    p: \"p = (p1 + p2) + p3\""], ["proof (prove)\nusing this:\n  (c1;; (c2;; c3), s) \\<Rightarrow> p \\<Down> s'\n\ngoal (1 subgoal):\n 1. (\\<And>p1 s1 p2 s2 p3.\n        \\<lbrakk>(c1, s) \\<Rightarrow> p1 \\<Down> s1;\n         (c2, s1) \\<Rightarrow> p2 \\<Down> s2;\n         (c3, s2) \\<Rightarrow> p3 \\<Down> s'; p = p1 + p2 + p3\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  (c1, s) \\<Rightarrow> p1 \\<Down> s1\n  (c2, s1) \\<Rightarrow> p2 \\<Down> s2\n  (c3, s2) \\<Rightarrow> p3 \\<Down> s'\n  p = p1 + p2 + p3\n\ngoal (1 subgoal):\n 1. (c1;; (c2;; c3), s) \\<Rightarrow> p \\<Down> s' \\<Longrightarrow>\n    (c1;; c2;; c3, s) \\<Rightarrow> p \\<Down> s'", "from c1 c2"], ["proof (chain)\npicking this:\n  (c1, s) \\<Rightarrow> p1 \\<Down> s1\n  (c2, s1) \\<Rightarrow> p2 \\<Down> s2", "have \"(c1;; c2, s) \\<Rightarrow> p1 + p2 \\<Down>  s2\""], ["proof (prove)\nusing this:\n  (c1, s) \\<Rightarrow> p1 \\<Down> s1\n  (c2, s1) \\<Rightarrow> p2 \\<Down> s2\n\ngoal (1 subgoal):\n 1. (c1;; c2, s) \\<Rightarrow> p1 + p2 \\<Down> s2", "apply (rule Seq)"], ["proof (prove)\ngoal (1 subgoal):\n 1. p1 + p2 = p1 + p2", "by simp"], ["proof (state)\nthis:\n  (c1;; c2, s) \\<Rightarrow> p1 + p2 \\<Down> s2\n\ngoal (1 subgoal):\n 1. (c1;; (c2;; c3), s) \\<Rightarrow> p \\<Down> s' \\<Longrightarrow>\n    (c1;; c2;; c3, s) \\<Rightarrow> p \\<Down> s'", "from this c3"], ["proof (chain)\npicking this:\n  (c1;; c2, s) \\<Rightarrow> p1 + p2 \\<Down> s2\n  (c3, s2) \\<Rightarrow> p3 \\<Down> s'", "show \"(c1;; c2;; c3, s) \\<Rightarrow> p \\<Down> s'\""], ["proof (prove)\nusing this:\n  (c1;; c2, s) \\<Rightarrow> p1 + p2 \\<Down> s2\n  (c3, s2) \\<Rightarrow> p3 \\<Down> s'\n\ngoal (1 subgoal):\n 1. (c1;; c2;; c3, s) \\<Rightarrow> p \\<Down> s'", "unfolding p"], ["proof (prove)\nusing this:\n  (c1;; c2, s) \\<Rightarrow> p1 + p2 \\<Down> s2\n  (c3, s2) \\<Rightarrow> p3 \\<Down> s'\n\ngoal (1 subgoal):\n 1. (c1;; c2;; c3, s) \\<Rightarrow> p1 + p2 + p3 \\<Down> s'", "apply (rule Seq)"], ["proof (prove)\ngoal (1 subgoal):\n 1. p1 + p2 + p3 = p1 + p2 + p3", "by simp"], ["proof (state)\nthis:\n  (c1;; c2;; c3, s) \\<Rightarrow> p \\<Down> s'\n\ngoal:\nNo subgoals!", "qed"], ["", "subsection \"Relation to Big-Step Semantics\""], ["", "lemma \"(\\<exists>p. ((c, s) \\<Rightarrow> p \\<Down>  s')) = ((c, s) \\<Rightarrow> s')\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<exists>p. (c, s) \\<Rightarrow> p \\<Down> s') =\n    (c, s) \\<Rightarrow> s'", "proof"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<exists>p. (c, s) \\<Rightarrow> p \\<Down> s' \\<Longrightarrow>\n    (c, s) \\<Rightarrow> s'\n 2. (c, s) \\<Rightarrow> s' \\<Longrightarrow>\n    \\<exists>p. (c, s) \\<Rightarrow> p \\<Down> s'", "assume \"\\<exists>p. (c, s) \\<Rightarrow> p \\<Down> s'\""], ["proof (state)\nthis:\n  \\<exists>p. (c, s) \\<Rightarrow> p \\<Down> s'\n\ngoal (2 subgoals):\n 1. \\<exists>p. (c, s) \\<Rightarrow> p \\<Down> s' \\<Longrightarrow>\n    (c, s) \\<Rightarrow> s'\n 2. (c, s) \\<Rightarrow> s' \\<Longrightarrow>\n    \\<exists>p. (c, s) \\<Rightarrow> p \\<Down> s'", "then"], ["proof (chain)\npicking this:\n  \\<exists>p. (c, s) \\<Rightarrow> p \\<Down> s'", "obtain p where \"(c, s) \\<Rightarrow> p \\<Down> s'\""], ["proof (prove)\nusing this:\n  \\<exists>p. (c, s) \\<Rightarrow> p \\<Down> s'\n\ngoal (1 subgoal):\n 1. (\\<And>p.\n        (c, s) \\<Rightarrow> p \\<Down> s' \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by blast"], ["proof (state)\nthis:\n  (c, s) \\<Rightarrow> p \\<Down> s'\n\ngoal (2 subgoals):\n 1. \\<exists>p. (c, s) \\<Rightarrow> p \\<Down> s' \\<Longrightarrow>\n    (c, s) \\<Rightarrow> s'\n 2. (c, s) \\<Rightarrow> s' \\<Longrightarrow>\n    \\<exists>p. (c, s) \\<Rightarrow> p \\<Down> s'", "then"], ["proof (chain)\npicking this:\n  (c, s) \\<Rightarrow> p \\<Down> s'", "show \"((c, s) \\<Rightarrow> s')\""], ["proof (prove)\nusing this:\n  (c, s) \\<Rightarrow> p \\<Down> s'\n\ngoal (1 subgoal):\n 1. (c, s) \\<Rightarrow> s'", "apply(induct c s p s' rule: big_step_t_induct)"], ["proof (prove)\ngoal (7 subgoals):\n 1. \\<And>s. (SKIP, s) \\<Rightarrow> s\n 2. \\<And>x a s. (x ::= a, s) \\<Rightarrow> s(x := aval a s)\n 3. \\<And>c1 s1 x s2 c2 y s3 z.\n       \\<lbrakk>(c1, s1) \\<Rightarrow> x \\<Down> s2;\n        (c1, s1) \\<Rightarrow> s2; (c2, s2) \\<Rightarrow> y \\<Down> s3;\n        (c2, s2) \\<Rightarrow> s3; z = x + y\\<rbrakk>\n       \\<Longrightarrow> (c1;; c2, s1) \\<Rightarrow> s3\n 4. \\<And>b s c1 x t y c2.\n       \\<lbrakk>bval b s; (c1, s) \\<Rightarrow> x \\<Down> t;\n        (c1, s) \\<Rightarrow> t; y = x + 1\\<rbrakk>\n       \\<Longrightarrow> (IF b THEN c1 ELSE c2, s) \\<Rightarrow> t\n 5. \\<And>b s c2 x t y c1.\n       \\<lbrakk>\\<not> bval b s; (c2, s) \\<Rightarrow> x \\<Down> t;\n        (c2, s) \\<Rightarrow> t; y = x + 1\\<rbrakk>\n       \\<Longrightarrow> (IF b THEN c1 ELSE c2, s) \\<Rightarrow> t\n 6. \\<And>b s c.\n       \\<not> bval b s \\<Longrightarrow> (WHILE b DO c, s) \\<Rightarrow> s\n 7. \\<And>b s1 c x s2 y s3 z.\n       \\<lbrakk>bval b s1; (c, s1) \\<Rightarrow> x \\<Down> s2;\n        (c, s1) \\<Rightarrow> s2;\n        (WHILE b DO c, s2) \\<Rightarrow> y \\<Down> s3;\n        (WHILE b DO c, s2) \\<Rightarrow> s3; 1 + x + y = z\\<rbrakk>\n       \\<Longrightarrow> (WHILE b DO c, s1) \\<Rightarrow> s3", "prefer 2"], ["proof (prove)\ngoal (7 subgoals):\n 1. \\<And>x a s. (x ::= a, s) \\<Rightarrow> s(x := aval a s)\n 2. \\<And>s. (SKIP, s) \\<Rightarrow> s\n 3. \\<And>c1 s1 x s2 c2 y s3 z.\n       \\<lbrakk>(c1, s1) \\<Rightarrow> x \\<Down> s2;\n        (c1, s1) \\<Rightarrow> s2; (c2, s2) \\<Rightarrow> y \\<Down> s3;\n        (c2, s2) \\<Rightarrow> s3; z = x + y\\<rbrakk>\n       \\<Longrightarrow> (c1;; c2, s1) \\<Rightarrow> s3\n 4. \\<And>b s c1 x t y c2.\n       \\<lbrakk>bval b s; (c1, s) \\<Rightarrow> x \\<Down> t;\n        (c1, s) \\<Rightarrow> t; y = x + 1\\<rbrakk>\n       \\<Longrightarrow> (IF b THEN c1 ELSE c2, s) \\<Rightarrow> t\n 5. \\<And>b s c2 x t y c1.\n       \\<lbrakk>\\<not> bval b s; (c2, s) \\<Rightarrow> x \\<Down> t;\n        (c2, s) \\<Rightarrow> t; y = x + 1\\<rbrakk>\n       \\<Longrightarrow> (IF b THEN c1 ELSE c2, s) \\<Rightarrow> t\n 6. \\<And>b s c.\n       \\<not> bval b s \\<Longrightarrow> (WHILE b DO c, s) \\<Rightarrow> s\n 7. \\<And>b s1 c x s2 y s3 z.\n       \\<lbrakk>bval b s1; (c, s1) \\<Rightarrow> x \\<Down> s2;\n        (c, s1) \\<Rightarrow> s2;\n        (WHILE b DO c, s2) \\<Rightarrow> y \\<Down> s3;\n        (WHILE b DO c, s2) \\<Rightarrow> s3; 1 + x + y = z\\<rbrakk>\n       \\<Longrightarrow> (WHILE b DO c, s1) \\<Rightarrow> s3", "apply(rule Big_Step.Assign)"], ["proof (prove)\ngoal (6 subgoals):\n 1. \\<And>s. (SKIP, s) \\<Rightarrow> s\n 2. \\<And>c1 s1 x s2 c2 y s3 z.\n       \\<lbrakk>(c1, s1) \\<Rightarrow> x \\<Down> s2;\n        (c1, s1) \\<Rightarrow> s2; (c2, s2) \\<Rightarrow> y \\<Down> s3;\n        (c2, s2) \\<Rightarrow> s3; z = x + y\\<rbrakk>\n       \\<Longrightarrow> (c1;; c2, s1) \\<Rightarrow> s3\n 3. \\<And>b s c1 x t y c2.\n       \\<lbrakk>bval b s; (c1, s) \\<Rightarrow> x \\<Down> t;\n        (c1, s) \\<Rightarrow> t; y = x + 1\\<rbrakk>\n       \\<Longrightarrow> (IF b THEN c1 ELSE c2, s) \\<Rightarrow> t\n 4. \\<And>b s c2 x t y c1.\n       \\<lbrakk>\\<not> bval b s; (c2, s) \\<Rightarrow> x \\<Down> t;\n        (c2, s) \\<Rightarrow> t; y = x + 1\\<rbrakk>\n       \\<Longrightarrow> (IF b THEN c1 ELSE c2, s) \\<Rightarrow> t\n 5. \\<And>b s c.\n       \\<not> bval b s \\<Longrightarrow> (WHILE b DO c, s) \\<Rightarrow> s\n 6. \\<And>b s1 c x s2 y s3 z.\n       \\<lbrakk>bval b s1; (c, s1) \\<Rightarrow> x \\<Down> s2;\n        (c, s1) \\<Rightarrow> s2;\n        (WHILE b DO c, s2) \\<Rightarrow> y \\<Down> s3;\n        (WHILE b DO c, s2) \\<Rightarrow> s3; 1 + x + y = z\\<rbrakk>\n       \\<Longrightarrow> (WHILE b DO c, s1) \\<Rightarrow> s3", "apply(auto)"], ["proof (prove)\ngoal:\nNo subgoals!", "done"], ["proof (state)\nthis:\n  (c, s) \\<Rightarrow> s'\n\ngoal (1 subgoal):\n 1. (c, s) \\<Rightarrow> s' \\<Longrightarrow>\n    \\<exists>p. (c, s) \\<Rightarrow> p \\<Down> s'", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. (c, s) \\<Rightarrow> s' \\<Longrightarrow>\n    \\<exists>p. (c, s) \\<Rightarrow> p \\<Down> s'", "assume \"((c, s) \\<Rightarrow> s')\""], ["proof (state)\nthis:\n  (c, s) \\<Rightarrow> s'\n\ngoal (1 subgoal):\n 1. (c, s) \\<Rightarrow> s' \\<Longrightarrow>\n    \\<exists>p. (c, s) \\<Rightarrow> p \\<Down> s'", "then"], ["proof (chain)\npicking this:\n  (c, s) \\<Rightarrow> s'", "show \"(\\<exists>p. ((c, s) \\<Rightarrow> p \\<Down>  s'))\""], ["proof (prove)\nusing this:\n  (c, s) \\<Rightarrow> s'\n\ngoal (1 subgoal):\n 1. \\<exists>p. (c, s) \\<Rightarrow> p \\<Down> s'", "apply(induct c s s' rule: big_step_induct)"], ["proof (prove)\ngoal (7 subgoals):\n 1. \\<And>s. \\<exists>p. (SKIP, s) \\<Rightarrow> p \\<Down> s\n 2. \\<And>x a s.\n       \\<exists>p. (x ::= a, s) \\<Rightarrow> p \\<Down> s(x := aval a s)\n 3. \\<And>c\\<^sub>1 s\\<^sub>1 s\\<^sub>2 c\\<^sub>2 s\\<^sub>3.\n       \\<lbrakk>(c\\<^sub>1, s\\<^sub>1) \\<Rightarrow> s\\<^sub>2;\n        \\<exists>p.\n           (c\\<^sub>1, s\\<^sub>1) \\<Rightarrow> p \\<Down> s\\<^sub>2;\n        (c\\<^sub>2, s\\<^sub>2) \\<Rightarrow> s\\<^sub>3;\n        \\<exists>p.\n           (c\\<^sub>2, s\\<^sub>2) \\<Rightarrow> p \\<Down> s\\<^sub>3\\<rbrakk>\n       \\<Longrightarrow> \\<exists>p.\n                            (c\\<^sub>1;; c\\<^sub>2,\n                             s\\<^sub>1) \\<Rightarrow> p \\<Down> s\\<^sub>3\n 4. \\<And>b s c\\<^sub>1 t c\\<^sub>2.\n       \\<lbrakk>bval b s; (c\\<^sub>1, s) \\<Rightarrow> t;\n        \\<exists>p. (c\\<^sub>1, s) \\<Rightarrow> p \\<Down> t\\<rbrakk>\n       \\<Longrightarrow> \\<exists>p.\n                            (IF b THEN c\\<^sub>1 ELSE c\\<^sub>2,\n                             s) \\<Rightarrow> p \\<Down> t\n 5. \\<And>b s c\\<^sub>2 t c\\<^sub>1.\n       \\<lbrakk>\\<not> bval b s; (c\\<^sub>2, s) \\<Rightarrow> t;\n        \\<exists>p. (c\\<^sub>2, s) \\<Rightarrow> p \\<Down> t\\<rbrakk>\n       \\<Longrightarrow> \\<exists>p.\n                            (IF b THEN c\\<^sub>1 ELSE c\\<^sub>2,\n                             s) \\<Rightarrow> p \\<Down> t\n 6. \\<And>b s c.\n       \\<not> bval b s \\<Longrightarrow>\n       \\<exists>p. (WHILE b DO c, s) \\<Rightarrow> p \\<Down> s\n 7. \\<And>b s\\<^sub>1 c s\\<^sub>2 s\\<^sub>3.\n       \\<lbrakk>bval b s\\<^sub>1; (c, s\\<^sub>1) \\<Rightarrow> s\\<^sub>2;\n        \\<exists>p. (c, s\\<^sub>1) \\<Rightarrow> p \\<Down> s\\<^sub>2;\n        (WHILE b DO c, s\\<^sub>2) \\<Rightarrow> s\\<^sub>3;\n        \\<exists>p.\n           (WHILE b DO c,\n            s\\<^sub>2) \\<Rightarrow> p \\<Down> s\\<^sub>3\\<rbrakk>\n       \\<Longrightarrow> \\<exists>p.\n                            (WHILE b DO c,\n                             s\\<^sub>1) \\<Rightarrow> p \\<Down> s\\<^sub>3", "by blast+"], ["proof (state)\nthis:\n  \\<exists>p. (c, s) \\<Rightarrow> p \\<Down> s'\n\ngoal:\nNo subgoals!", "qed"], ["", "subsection \"Execution is deterministic\""], ["", "text \\<open>This proof is automatic.\\<close>"], ["", "theorem big_step_t_determ: \"\\<lbrakk> (c,s) \\<Rightarrow> p \\<Down> t; (c,s) \\<Rightarrow> q \\<Down> u \\<rbrakk> \\<Longrightarrow> u = t\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>(c, s) \\<Rightarrow> p \\<Down> t;\n     (c, s) \\<Rightarrow> q \\<Down> u\\<rbrakk>\n    \\<Longrightarrow> u = t", "apply (induction arbitrary: u q rule: big_step_t.induct)"], ["proof (prove)\ngoal (7 subgoals):\n 1. \\<And>s u q. (SKIP, s) \\<Rightarrow> q \\<Down> u \\<Longrightarrow> u = s\n 2. \\<And>x a s u q.\n       (x ::= a, s) \\<Rightarrow> q \\<Down> u \\<Longrightarrow>\n       u = s(x := aval a s)\n 3. \\<And>c1 s1 x s2 c2 y s3 z u q.\n       \\<lbrakk>(c1, s1) \\<Rightarrow> x \\<Down> s2;\n        \\<And>u q.\n           (c1, s1) \\<Rightarrow> q \\<Down> u \\<Longrightarrow> u = s2;\n        (c2, s2) \\<Rightarrow> y \\<Down> s3;\n        \\<And>u q.\n           (c2, s2) \\<Rightarrow> q \\<Down> u \\<Longrightarrow> u = s3;\n        z = x + y; (c1;; c2, s1) \\<Rightarrow> q \\<Down> u\\<rbrakk>\n       \\<Longrightarrow> u = s3\n 4. \\<And>b s c1 x t y c2 u q.\n       \\<lbrakk>bval b s; (c1, s) \\<Rightarrow> x \\<Down> t;\n        \\<And>u q.\n           (c1, s) \\<Rightarrow> q \\<Down> u \\<Longrightarrow> u = t;\n        y = x + 1;\n        (IF b THEN c1 ELSE c2, s) \\<Rightarrow> q \\<Down> u\\<rbrakk>\n       \\<Longrightarrow> u = t\n 5. \\<And>b s c2 x t y c1 u q.\n       \\<lbrakk>\\<not> bval b s; (c2, s) \\<Rightarrow> x \\<Down> t;\n        \\<And>u q.\n           (c2, s) \\<Rightarrow> q \\<Down> u \\<Longrightarrow> u = t;\n        y = x + 1;\n        (IF b THEN c1 ELSE c2, s) \\<Rightarrow> q \\<Down> u\\<rbrakk>\n       \\<Longrightarrow> u = t\n 6. \\<And>b s c u q.\n       \\<lbrakk>\\<not> bval b s;\n        (WHILE b DO c, s) \\<Rightarrow> q \\<Down> u\\<rbrakk>\n       \\<Longrightarrow> u = s\n 7. \\<And>b s1 c x s2 y s3 z u q.\n       \\<lbrakk>bval b s1; (c, s1) \\<Rightarrow> x \\<Down> s2;\n        \\<And>u q.\n           (c, s1) \\<Rightarrow> q \\<Down> u \\<Longrightarrow> u = s2;\n        (WHILE b DO c, s2) \\<Rightarrow> y \\<Down> s3;\n        \\<And>u q.\n           (WHILE b DO c, s2) \\<Rightarrow> q \\<Down> u \\<Longrightarrow>\n           u = s3;\n        1 + x + y = z; (WHILE b DO c, s1) \\<Rightarrow> q \\<Down> u\\<rbrakk>\n       \\<Longrightarrow> u = s3", "apply blast+"], ["proof (prove)\ngoal:\nNo subgoals!", "done"], ["", "theorem big_step_t_determ2: \"\\<lbrakk> (c,s) \\<Rightarrow> p \\<Down> t; (c,s) \\<Rightarrow> q \\<Down> u \\<rbrakk> \\<Longrightarrow> (u = t \\<and> p=q)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>(c, s) \\<Rightarrow> p \\<Down> t;\n     (c, s) \\<Rightarrow> q \\<Down> u\\<rbrakk>\n    \\<Longrightarrow> u = t \\<and> p = q", "apply  (induction arbitrary: u q rule: big_step_t_induct)"], ["proof (prove)\ngoal (7 subgoals):\n 1. \\<And>s u q.\n       (SKIP, s) \\<Rightarrow> q \\<Down> u \\<Longrightarrow>\n       u = s \\<and> Suc 0 = q\n 2. \\<And>x a s u q.\n       (x ::= a, s) \\<Rightarrow> q \\<Down> u \\<Longrightarrow>\n       u = s(x := aval a s) \\<and> Suc 0 = q\n 3. \\<And>c1 s1 x s2 c2 y s3 z u q.\n       \\<lbrakk>(c1, s1) \\<Rightarrow> x \\<Down> s2;\n        \\<And>u q.\n           (c1, s1) \\<Rightarrow> q \\<Down> u \\<Longrightarrow>\n           u = s2 \\<and> x = q;\n        (c2, s2) \\<Rightarrow> y \\<Down> s3;\n        \\<And>u q.\n           (c2, s2) \\<Rightarrow> q \\<Down> u \\<Longrightarrow>\n           u = s3 \\<and> y = q;\n        z = x + y; (c1;; c2, s1) \\<Rightarrow> q \\<Down> u\\<rbrakk>\n       \\<Longrightarrow> u = s3 \\<and> z = q\n 4. \\<And>b s c1 x t y c2 u q.\n       \\<lbrakk>bval b s; (c1, s) \\<Rightarrow> x \\<Down> t;\n        \\<And>u q.\n           (c1, s) \\<Rightarrow> q \\<Down> u \\<Longrightarrow>\n           u = t \\<and> x = q;\n        y = x + 1;\n        (IF b THEN c1 ELSE c2, s) \\<Rightarrow> q \\<Down> u\\<rbrakk>\n       \\<Longrightarrow> u = t \\<and> y = q\n 5. \\<And>b s c2 x t y c1 u q.\n       \\<lbrakk>\\<not> bval b s; (c2, s) \\<Rightarrow> x \\<Down> t;\n        \\<And>u q.\n           (c2, s) \\<Rightarrow> q \\<Down> u \\<Longrightarrow>\n           u = t \\<and> x = q;\n        y = x + 1;\n        (IF b THEN c1 ELSE c2, s) \\<Rightarrow> q \\<Down> u\\<rbrakk>\n       \\<Longrightarrow> u = t \\<and> y = q\n 6. \\<And>b s c u q.\n       \\<lbrakk>\\<not> bval b s;\n        (WHILE b DO c, s) \\<Rightarrow> q \\<Down> u\\<rbrakk>\n       \\<Longrightarrow> u = s \\<and> Suc 0 = q\n 7. \\<And>b s1 c x s2 y s3 z u q.\n       \\<lbrakk>bval b s1; (c, s1) \\<Rightarrow> x \\<Down> s2;\n        \\<And>u q.\n           (c, s1) \\<Rightarrow> q \\<Down> u \\<Longrightarrow>\n           u = s2 \\<and> x = q;\n        (WHILE b DO c, s2) \\<Rightarrow> y \\<Down> s3;\n        \\<And>u q.\n           (WHILE b DO c, s2) \\<Rightarrow> q \\<Down> u \\<Longrightarrow>\n           u = s3 \\<and> y = q;\n        1 + x + y = z; (WHILE b DO c, s1) \\<Rightarrow> q \\<Down> u\\<rbrakk>\n       \\<Longrightarrow> u = s3 \\<and> z = q", "apply(elim Skip_tE)"], ["proof (prove)\ngoal (7 subgoals):\n 1. \\<And>s u q.\n       \\<lbrakk>q = Suc 0; u = s\\<rbrakk>\n       \\<Longrightarrow> u = s \\<and> Suc 0 = q\n 2. \\<And>x a s u q.\n       (x ::= a, s) \\<Rightarrow> q \\<Down> u \\<Longrightarrow>\n       u = s(x := aval a s) \\<and> Suc 0 = q\n 3. \\<And>c1 s1 x s2 c2 y s3 z u q.\n       \\<lbrakk>(c1, s1) \\<Rightarrow> x \\<Down> s2;\n        \\<And>u q.\n           (c1, s1) \\<Rightarrow> q \\<Down> u \\<Longrightarrow>\n           u = s2 \\<and> x = q;\n        (c2, s2) \\<Rightarrow> y \\<Down> s3;\n        \\<And>u q.\n           (c2, s2) \\<Rightarrow> q \\<Down> u \\<Longrightarrow>\n           u = s3 \\<and> y = q;\n        z = x + y; (c1;; c2, s1) \\<Rightarrow> q \\<Down> u\\<rbrakk>\n       \\<Longrightarrow> u = s3 \\<and> z = q\n 4. \\<And>b s c1 x t y c2 u q.\n       \\<lbrakk>bval b s; (c1, s) \\<Rightarrow> x \\<Down> t;\n        \\<And>u q.\n           (c1, s) \\<Rightarrow> q \\<Down> u \\<Longrightarrow>\n           u = t \\<and> x = q;\n        y = x + 1;\n        (IF b THEN c1 ELSE c2, s) \\<Rightarrow> q \\<Down> u\\<rbrakk>\n       \\<Longrightarrow> u = t \\<and> y = q\n 5. \\<And>b s c2 x t y c1 u q.\n       \\<lbrakk>\\<not> bval b s; (c2, s) \\<Rightarrow> x \\<Down> t;\n        \\<And>u q.\n           (c2, s) \\<Rightarrow> q \\<Down> u \\<Longrightarrow>\n           u = t \\<and> x = q;\n        y = x + 1;\n        (IF b THEN c1 ELSE c2, s) \\<Rightarrow> q \\<Down> u\\<rbrakk>\n       \\<Longrightarrow> u = t \\<and> y = q\n 6. \\<And>b s c u q.\n       \\<lbrakk>\\<not> bval b s;\n        (WHILE b DO c, s) \\<Rightarrow> q \\<Down> u\\<rbrakk>\n       \\<Longrightarrow> u = s \\<and> Suc 0 = q\n 7. \\<And>b s1 c x s2 y s3 z u q.\n       \\<lbrakk>bval b s1; (c, s1) \\<Rightarrow> x \\<Down> s2;\n        \\<And>u q.\n           (c, s1) \\<Rightarrow> q \\<Down> u \\<Longrightarrow>\n           u = s2 \\<and> x = q;\n        (WHILE b DO c, s2) \\<Rightarrow> y \\<Down> s3;\n        \\<And>u q.\n           (WHILE b DO c, s2) \\<Rightarrow> q \\<Down> u \\<Longrightarrow>\n           u = s3 \\<and> y = q;\n        1 + x + y = z; (WHILE b DO c, s1) \\<Rightarrow> q \\<Down> u\\<rbrakk>\n       \\<Longrightarrow> u = s3 \\<and> z = q", "apply(simp)"], ["proof (prove)\ngoal (6 subgoals):\n 1. \\<And>x a s u q.\n       (x ::= a, s) \\<Rightarrow> q \\<Down> u \\<Longrightarrow>\n       u = s(x := aval a s) \\<and> Suc 0 = q\n 2. \\<And>c1 s1 x s2 c2 y s3 z u q.\n       \\<lbrakk>(c1, s1) \\<Rightarrow> x \\<Down> s2;\n        \\<And>u q.\n           (c1, s1) \\<Rightarrow> q \\<Down> u \\<Longrightarrow>\n           u = s2 \\<and> x = q;\n        (c2, s2) \\<Rightarrow> y \\<Down> s3;\n        \\<And>u q.\n           (c2, s2) \\<Rightarrow> q \\<Down> u \\<Longrightarrow>\n           u = s3 \\<and> y = q;\n        z = x + y; (c1;; c2, s1) \\<Rightarrow> q \\<Down> u\\<rbrakk>\n       \\<Longrightarrow> u = s3 \\<and> z = q\n 3. \\<And>b s c1 x t y c2 u q.\n       \\<lbrakk>bval b s; (c1, s) \\<Rightarrow> x \\<Down> t;\n        \\<And>u q.\n           (c1, s) \\<Rightarrow> q \\<Down> u \\<Longrightarrow>\n           u = t \\<and> x = q;\n        y = x + 1;\n        (IF b THEN c1 ELSE c2, s) \\<Rightarrow> q \\<Down> u\\<rbrakk>\n       \\<Longrightarrow> u = t \\<and> y = q\n 4. \\<And>b s c2 x t y c1 u q.\n       \\<lbrakk>\\<not> bval b s; (c2, s) \\<Rightarrow> x \\<Down> t;\n        \\<And>u q.\n           (c2, s) \\<Rightarrow> q \\<Down> u \\<Longrightarrow>\n           u = t \\<and> x = q;\n        y = x + 1;\n        (IF b THEN c1 ELSE c2, s) \\<Rightarrow> q \\<Down> u\\<rbrakk>\n       \\<Longrightarrow> u = t \\<and> y = q\n 5. \\<And>b s c u q.\n       \\<lbrakk>\\<not> bval b s;\n        (WHILE b DO c, s) \\<Rightarrow> q \\<Down> u\\<rbrakk>\n       \\<Longrightarrow> u = s \\<and> Suc 0 = q\n 6. \\<And>b s1 c x s2 y s3 z u q.\n       \\<lbrakk>bval b s1; (c, s1) \\<Rightarrow> x \\<Down> s2;\n        \\<And>u q.\n           (c, s1) \\<Rightarrow> q \\<Down> u \\<Longrightarrow>\n           u = s2 \\<and> x = q;\n        (WHILE b DO c, s2) \\<Rightarrow> y \\<Down> s3;\n        \\<And>u q.\n           (WHILE b DO c, s2) \\<Rightarrow> q \\<Down> u \\<Longrightarrow>\n           u = s3 \\<and> y = q;\n        1 + x + y = z; (WHILE b DO c, s1) \\<Rightarrow> q \\<Down> u\\<rbrakk>\n       \\<Longrightarrow> u = s3 \\<and> z = q", "apply(elim Assign_tE)"], ["proof (prove)\ngoal (6 subgoals):\n 1. \\<And>x a s u q.\n       \\<lbrakk>q = Suc 0; u = s(x := aval a s)\\<rbrakk>\n       \\<Longrightarrow> u = s(x := aval a s) \\<and> Suc 0 = q\n 2. \\<And>c1 s1 x s2 c2 y s3 z u q.\n       \\<lbrakk>(c1, s1) \\<Rightarrow> x \\<Down> s2;\n        \\<And>u q.\n           (c1, s1) \\<Rightarrow> q \\<Down> u \\<Longrightarrow>\n           u = s2 \\<and> x = q;\n        (c2, s2) \\<Rightarrow> y \\<Down> s3;\n        \\<And>u q.\n           (c2, s2) \\<Rightarrow> q \\<Down> u \\<Longrightarrow>\n           u = s3 \\<and> y = q;\n        z = x + y; (c1;; c2, s1) \\<Rightarrow> q \\<Down> u\\<rbrakk>\n       \\<Longrightarrow> u = s3 \\<and> z = q\n 3. \\<And>b s c1 x t y c2 u q.\n       \\<lbrakk>bval b s; (c1, s) \\<Rightarrow> x \\<Down> t;\n        \\<And>u q.\n           (c1, s) \\<Rightarrow> q \\<Down> u \\<Longrightarrow>\n           u = t \\<and> x = q;\n        y = x + 1;\n        (IF b THEN c1 ELSE c2, s) \\<Rightarrow> q \\<Down> u\\<rbrakk>\n       \\<Longrightarrow> u = t \\<and> y = q\n 4. \\<And>b s c2 x t y c1 u q.\n       \\<lbrakk>\\<not> bval b s; (c2, s) \\<Rightarrow> x \\<Down> t;\n        \\<And>u q.\n           (c2, s) \\<Rightarrow> q \\<Down> u \\<Longrightarrow>\n           u = t \\<and> x = q;\n        y = x + 1;\n        (IF b THEN c1 ELSE c2, s) \\<Rightarrow> q \\<Down> u\\<rbrakk>\n       \\<Longrightarrow> u = t \\<and> y = q\n 5. \\<And>b s c u q.\n       \\<lbrakk>\\<not> bval b s;\n        (WHILE b DO c, s) \\<Rightarrow> q \\<Down> u\\<rbrakk>\n       \\<Longrightarrow> u = s \\<and> Suc 0 = q\n 6. \\<And>b s1 c x s2 y s3 z u q.\n       \\<lbrakk>bval b s1; (c, s1) \\<Rightarrow> x \\<Down> s2;\n        \\<And>u q.\n           (c, s1) \\<Rightarrow> q \\<Down> u \\<Longrightarrow>\n           u = s2 \\<and> x = q;\n        (WHILE b DO c, s2) \\<Rightarrow> y \\<Down> s3;\n        \\<And>u q.\n           (WHILE b DO c, s2) \\<Rightarrow> q \\<Down> u \\<Longrightarrow>\n           u = s3 \\<and> y = q;\n        1 + x + y = z; (WHILE b DO c, s1) \\<Rightarrow> q \\<Down> u\\<rbrakk>\n       \\<Longrightarrow> u = s3 \\<and> z = q", "apply(simp)"], ["proof (prove)\ngoal (5 subgoals):\n 1. \\<And>c1 s1 x s2 c2 y s3 z u q.\n       \\<lbrakk>(c1, s1) \\<Rightarrow> x \\<Down> s2;\n        \\<And>u q.\n           (c1, s1) \\<Rightarrow> q \\<Down> u \\<Longrightarrow>\n           u = s2 \\<and> x = q;\n        (c2, s2) \\<Rightarrow> y \\<Down> s3;\n        \\<And>u q.\n           (c2, s2) \\<Rightarrow> q \\<Down> u \\<Longrightarrow>\n           u = s3 \\<and> y = q;\n        z = x + y; (c1;; c2, s1) \\<Rightarrow> q \\<Down> u\\<rbrakk>\n       \\<Longrightarrow> u = s3 \\<and> z = q\n 2. \\<And>b s c1 x t y c2 u q.\n       \\<lbrakk>bval b s; (c1, s) \\<Rightarrow> x \\<Down> t;\n        \\<And>u q.\n           (c1, s) \\<Rightarrow> q \\<Down> u \\<Longrightarrow>\n           u = t \\<and> x = q;\n        y = x + 1;\n        (IF b THEN c1 ELSE c2, s) \\<Rightarrow> q \\<Down> u\\<rbrakk>\n       \\<Longrightarrow> u = t \\<and> y = q\n 3. \\<And>b s c2 x t y c1 u q.\n       \\<lbrakk>\\<not> bval b s; (c2, s) \\<Rightarrow> x \\<Down> t;\n        \\<And>u q.\n           (c2, s) \\<Rightarrow> q \\<Down> u \\<Longrightarrow>\n           u = t \\<and> x = q;\n        y = x + 1;\n        (IF b THEN c1 ELSE c2, s) \\<Rightarrow> q \\<Down> u\\<rbrakk>\n       \\<Longrightarrow> u = t \\<and> y = q\n 4. \\<And>b s c u q.\n       \\<lbrakk>\\<not> bval b s;\n        (WHILE b DO c, s) \\<Rightarrow> q \\<Down> u\\<rbrakk>\n       \\<Longrightarrow> u = s \\<and> Suc 0 = q\n 5. \\<And>b s1 c x s2 y s3 z u q.\n       \\<lbrakk>bval b s1; (c, s1) \\<Rightarrow> x \\<Down> s2;\n        \\<And>u q.\n           (c, s1) \\<Rightarrow> q \\<Down> u \\<Longrightarrow>\n           u = s2 \\<and> x = q;\n        (WHILE b DO c, s2) \\<Rightarrow> y \\<Down> s3;\n        \\<And>u q.\n           (WHILE b DO c, s2) \\<Rightarrow> q \\<Down> u \\<Longrightarrow>\n           u = s3 \\<and> y = q;\n        1 + x + y = z; (WHILE b DO c, s1) \\<Rightarrow> q \\<Down> u\\<rbrakk>\n       \\<Longrightarrow> u = s3 \\<and> z = q", "apply blast"], ["proof (prove)\ngoal (4 subgoals):\n 1. \\<And>b s c1 x t y c2 u q.\n       \\<lbrakk>bval b s; (c1, s) \\<Rightarrow> x \\<Down> t;\n        \\<And>u q.\n           (c1, s) \\<Rightarrow> q \\<Down> u \\<Longrightarrow>\n           u = t \\<and> x = q;\n        y = x + 1;\n        (IF b THEN c1 ELSE c2, s) \\<Rightarrow> q \\<Down> u\\<rbrakk>\n       \\<Longrightarrow> u = t \\<and> y = q\n 2. \\<And>b s c2 x t y c1 u q.\n       \\<lbrakk>\\<not> bval b s; (c2, s) \\<Rightarrow> x \\<Down> t;\n        \\<And>u q.\n           (c2, s) \\<Rightarrow> q \\<Down> u \\<Longrightarrow>\n           u = t \\<and> x = q;\n        y = x + 1;\n        (IF b THEN c1 ELSE c2, s) \\<Rightarrow> q \\<Down> u\\<rbrakk>\n       \\<Longrightarrow> u = t \\<and> y = q\n 3. \\<And>b s c u q.\n       \\<lbrakk>\\<not> bval b s;\n        (WHILE b DO c, s) \\<Rightarrow> q \\<Down> u\\<rbrakk>\n       \\<Longrightarrow> u = s \\<and> Suc 0 = q\n 4. \\<And>b s1 c x s2 y s3 z u q.\n       \\<lbrakk>bval b s1; (c, s1) \\<Rightarrow> x \\<Down> s2;\n        \\<And>u q.\n           (c, s1) \\<Rightarrow> q \\<Down> u \\<Longrightarrow>\n           u = s2 \\<and> x = q;\n        (WHILE b DO c, s2) \\<Rightarrow> y \\<Down> s3;\n        \\<And>u q.\n           (WHILE b DO c, s2) \\<Rightarrow> q \\<Down> u \\<Longrightarrow>\n           u = s3 \\<and> y = q;\n        1 + x + y = z; (WHILE b DO c, s1) \\<Rightarrow> q \\<Down> u\\<rbrakk>\n       \\<Longrightarrow> u = s3 \\<and> z = q", "apply(elim If_tE)"], ["proof (prove)\ngoal (5 subgoals):\n 1. \\<And>b s c1 x t y c2 u q xa.\n       \\<lbrakk>bval b s; (c1, s) \\<Rightarrow> x \\<Down> t;\n        \\<And>u q.\n           (c1, s) \\<Rightarrow> q \\<Down> u \\<Longrightarrow>\n           u = t \\<and> x = q;\n        y = x + 1; q = Suc xa; bval b s;\n        (c1, s) \\<Rightarrow> xa \\<Down> u\\<rbrakk>\n       \\<Longrightarrow> u = t \\<and> y = q\n 2. \\<And>b s c1 x t y c2 u q xa.\n       \\<lbrakk>bval b s; (c1, s) \\<Rightarrow> x \\<Down> t;\n        \\<And>u q.\n           (c1, s) \\<Rightarrow> q \\<Down> u \\<Longrightarrow>\n           u = t \\<and> x = q;\n        y = x + 1; q = Suc xa; \\<not> bval b s;\n        (c2, s) \\<Rightarrow> xa \\<Down> u\\<rbrakk>\n       \\<Longrightarrow> u = t \\<and> y = q\n 3. \\<And>b s c2 x t y c1 u q.\n       \\<lbrakk>\\<not> bval b s; (c2, s) \\<Rightarrow> x \\<Down> t;\n        \\<And>u q.\n           (c2, s) \\<Rightarrow> q \\<Down> u \\<Longrightarrow>\n           u = t \\<and> x = q;\n        y = x + 1;\n        (IF b THEN c1 ELSE c2, s) \\<Rightarrow> q \\<Down> u\\<rbrakk>\n       \\<Longrightarrow> u = t \\<and> y = q\n 4. \\<And>b s c u q.\n       \\<lbrakk>\\<not> bval b s;\n        (WHILE b DO c, s) \\<Rightarrow> q \\<Down> u\\<rbrakk>\n       \\<Longrightarrow> u = s \\<and> Suc 0 = q\n 5. \\<And>b s1 c x s2 y s3 z u q.\n       \\<lbrakk>bval b s1; (c, s1) \\<Rightarrow> x \\<Down> s2;\n        \\<And>u q.\n           (c, s1) \\<Rightarrow> q \\<Down> u \\<Longrightarrow>\n           u = s2 \\<and> x = q;\n        (WHILE b DO c, s2) \\<Rightarrow> y \\<Down> s3;\n        \\<And>u q.\n           (WHILE b DO c, s2) \\<Rightarrow> q \\<Down> u \\<Longrightarrow>\n           u = s3 \\<and> y = q;\n        1 + x + y = z; (WHILE b DO c, s1) \\<Rightarrow> q \\<Down> u\\<rbrakk>\n       \\<Longrightarrow> u = s3 \\<and> z = q", "apply(simp)"], ["proof (prove)\ngoal (4 subgoals):\n 1. \\<And>b s c1 x t y c2 u q xa.\n       \\<lbrakk>bval b s; (c1, s) \\<Rightarrow> x \\<Down> t;\n        \\<And>u q.\n           (c1, s) \\<Rightarrow> q \\<Down> u \\<Longrightarrow>\n           u = t \\<and> x = q;\n        y = x + 1; q = Suc xa; \\<not> bval b s;\n        (c2, s) \\<Rightarrow> xa \\<Down> u\\<rbrakk>\n       \\<Longrightarrow> u = t \\<and> y = q\n 2. \\<And>b s c2 x t y c1 u q.\n       \\<lbrakk>\\<not> bval b s; (c2, s) \\<Rightarrow> x \\<Down> t;\n        \\<And>u q.\n           (c2, s) \\<Rightarrow> q \\<Down> u \\<Longrightarrow>\n           u = t \\<and> x = q;\n        y = x + 1;\n        (IF b THEN c1 ELSE c2, s) \\<Rightarrow> q \\<Down> u\\<rbrakk>\n       \\<Longrightarrow> u = t \\<and> y = q\n 3. \\<And>b s c u q.\n       \\<lbrakk>\\<not> bval b s;\n        (WHILE b DO c, s) \\<Rightarrow> q \\<Down> u\\<rbrakk>\n       \\<Longrightarrow> u = s \\<and> Suc 0 = q\n 4. \\<And>b s1 c x s2 y s3 z u q.\n       \\<lbrakk>bval b s1; (c, s1) \\<Rightarrow> x \\<Down> s2;\n        \\<And>u q.\n           (c, s1) \\<Rightarrow> q \\<Down> u \\<Longrightarrow>\n           u = s2 \\<and> x = q;\n        (WHILE b DO c, s2) \\<Rightarrow> y \\<Down> s3;\n        \\<And>u q.\n           (WHILE b DO c, s2) \\<Rightarrow> q \\<Down> u \\<Longrightarrow>\n           u = s3 \\<and> y = q;\n        1 + x + y = z; (WHILE b DO c, s1) \\<Rightarrow> q \\<Down> u\\<rbrakk>\n       \\<Longrightarrow> u = s3 \\<and> z = q", "apply blast"], ["proof (prove)\ngoal (3 subgoals):\n 1. \\<And>b s c2 x t y c1 u q.\n       \\<lbrakk>\\<not> bval b s; (c2, s) \\<Rightarrow> x \\<Down> t;\n        \\<And>u q.\n           (c2, s) \\<Rightarrow> q \\<Down> u \\<Longrightarrow>\n           u = t \\<and> x = q;\n        y = x + 1;\n        (IF b THEN c1 ELSE c2, s) \\<Rightarrow> q \\<Down> u\\<rbrakk>\n       \\<Longrightarrow> u = t \\<and> y = q\n 2. \\<And>b s c u q.\n       \\<lbrakk>\\<not> bval b s;\n        (WHILE b DO c, s) \\<Rightarrow> q \\<Down> u\\<rbrakk>\n       \\<Longrightarrow> u = s \\<and> Suc 0 = q\n 3. \\<And>b s1 c x s2 y s3 z u q.\n       \\<lbrakk>bval b s1; (c, s1) \\<Rightarrow> x \\<Down> s2;\n        \\<And>u q.\n           (c, s1) \\<Rightarrow> q \\<Down> u \\<Longrightarrow>\n           u = s2 \\<and> x = q;\n        (WHILE b DO c, s2) \\<Rightarrow> y \\<Down> s3;\n        \\<And>u q.\n           (WHILE b DO c, s2) \\<Rightarrow> q \\<Down> u \\<Longrightarrow>\n           u = s3 \\<and> y = q;\n        1 + x + y = z; (WHILE b DO c, s1) \\<Rightarrow> q \\<Down> u\\<rbrakk>\n       \\<Longrightarrow> u = s3 \\<and> z = q", "apply(elim If_tE)"], ["proof (prove)\ngoal (4 subgoals):\n 1. \\<And>b s c2 x t y c1 u q xa.\n       \\<lbrakk>\\<not> bval b s; (c2, s) \\<Rightarrow> x \\<Down> t;\n        \\<And>u q.\n           (c2, s) \\<Rightarrow> q \\<Down> u \\<Longrightarrow>\n           u = t \\<and> x = q;\n        y = x + 1; q = Suc xa; bval b s;\n        (c1, s) \\<Rightarrow> xa \\<Down> u\\<rbrakk>\n       \\<Longrightarrow> u = t \\<and> y = q\n 2. \\<And>b s c2 x t y c1 u q xa.\n       \\<lbrakk>\\<not> bval b s; (c2, s) \\<Rightarrow> x \\<Down> t;\n        \\<And>u q.\n           (c2, s) \\<Rightarrow> q \\<Down> u \\<Longrightarrow>\n           u = t \\<and> x = q;\n        y = x + 1; q = Suc xa; \\<not> bval b s;\n        (c2, s) \\<Rightarrow> xa \\<Down> u\\<rbrakk>\n       \\<Longrightarrow> u = t \\<and> y = q\n 3. \\<And>b s c u q.\n       \\<lbrakk>\\<not> bval b s;\n        (WHILE b DO c, s) \\<Rightarrow> q \\<Down> u\\<rbrakk>\n       \\<Longrightarrow> u = s \\<and> Suc 0 = q\n 4. \\<And>b s1 c x s2 y s3 z u q.\n       \\<lbrakk>bval b s1; (c, s1) \\<Rightarrow> x \\<Down> s2;\n        \\<And>u q.\n           (c, s1) \\<Rightarrow> q \\<Down> u \\<Longrightarrow>\n           u = s2 \\<and> x = q;\n        (WHILE b DO c, s2) \\<Rightarrow> y \\<Down> s3;\n        \\<And>u q.\n           (WHILE b DO c, s2) \\<Rightarrow> q \\<Down> u \\<Longrightarrow>\n           u = s3 \\<and> y = q;\n        1 + x + y = z; (WHILE b DO c, s1) \\<Rightarrow> q \\<Down> u\\<rbrakk>\n       \\<Longrightarrow> u = s3 \\<and> z = q", "apply blast"], ["proof (prove)\ngoal (3 subgoals):\n 1. \\<And>b s c2 x t y c1 u q xa.\n       \\<lbrakk>\\<not> bval b s; (c2, s) \\<Rightarrow> x \\<Down> t;\n        \\<And>u q.\n           (c2, s) \\<Rightarrow> q \\<Down> u \\<Longrightarrow>\n           u = t \\<and> x = q;\n        y = x + 1; q = Suc xa; \\<not> bval b s;\n        (c2, s) \\<Rightarrow> xa \\<Down> u\\<rbrakk>\n       \\<Longrightarrow> u = t \\<and> y = q\n 2. \\<And>b s c u q.\n       \\<lbrakk>\\<not> bval b s;\n        (WHILE b DO c, s) \\<Rightarrow> q \\<Down> u\\<rbrakk>\n       \\<Longrightarrow> u = s \\<and> Suc 0 = q\n 3. \\<And>b s1 c x s2 y s3 z u q.\n       \\<lbrakk>bval b s1; (c, s1) \\<Rightarrow> x \\<Down> s2;\n        \\<And>u q.\n           (c, s1) \\<Rightarrow> q \\<Down> u \\<Longrightarrow>\n           u = s2 \\<and> x = q;\n        (WHILE b DO c, s2) \\<Rightarrow> y \\<Down> s3;\n        \\<And>u q.\n           (WHILE b DO c, s2) \\<Rightarrow> q \\<Down> u \\<Longrightarrow>\n           u = s3 \\<and> y = q;\n        1 + x + y = z; (WHILE b DO c, s1) \\<Rightarrow> q \\<Down> u\\<rbrakk>\n       \\<Longrightarrow> u = s3 \\<and> z = q", "apply(simp)"], ["proof (prove)\ngoal (2 subgoals):\n 1. \\<And>b s c u q.\n       \\<lbrakk>\\<not> bval b s;\n        (WHILE b DO c, s) \\<Rightarrow> q \\<Down> u\\<rbrakk>\n       \\<Longrightarrow> u = s \\<and> Suc 0 = q\n 2. \\<And>b s1 c x s2 y s3 z u q.\n       \\<lbrakk>bval b s1; (c, s1) \\<Rightarrow> x \\<Down> s2;\n        \\<And>u q.\n           (c, s1) \\<Rightarrow> q \\<Down> u \\<Longrightarrow>\n           u = s2 \\<and> x = q;\n        (WHILE b DO c, s2) \\<Rightarrow> y \\<Down> s3;\n        \\<And>u q.\n           (WHILE b DO c, s2) \\<Rightarrow> q \\<Down> u \\<Longrightarrow>\n           u = s3 \\<and> y = q;\n        1 + x + y = z; (WHILE b DO c, s1) \\<Rightarrow> q \\<Down> u\\<rbrakk>\n       \\<Longrightarrow> u = s3 \\<and> z = q", "apply(erule While_tE)"], ["proof (prove)\ngoal (3 subgoals):\n 1. \\<And>b s c u q.\n       \\<lbrakk>\\<not> bval b s; q = Suc 0; u = s; \\<not> bval b s\\<rbrakk>\n       \\<Longrightarrow> u = s \\<and> Suc 0 = q\n 2. \\<And>b s c u q x s2 y.\n       \\<lbrakk>\\<not> bval b s; bval b s;\n        (c, s) \\<Rightarrow> x \\<Down> s2;\n        (WHILE b DO c, s2) \\<Rightarrow> y \\<Down> u;\n        Suc (x + y) = q\\<rbrakk>\n       \\<Longrightarrow> u = s \\<and> Suc 0 = q\n 3. \\<And>b s1 c x s2 y s3 z u q.\n       \\<lbrakk>bval b s1; (c, s1) \\<Rightarrow> x \\<Down> s2;\n        \\<And>u q.\n           (c, s1) \\<Rightarrow> q \\<Down> u \\<Longrightarrow>\n           u = s2 \\<and> x = q;\n        (WHILE b DO c, s2) \\<Rightarrow> y \\<Down> s3;\n        \\<And>u q.\n           (WHILE b DO c, s2) \\<Rightarrow> q \\<Down> u \\<Longrightarrow>\n           u = s3 \\<and> y = q;\n        1 + x + y = z; (WHILE b DO c, s1) \\<Rightarrow> q \\<Down> u\\<rbrakk>\n       \\<Longrightarrow> u = s3 \\<and> z = q", "apply(simp)"], ["proof (prove)\ngoal (2 subgoals):\n 1. \\<And>b s c u q x s2 y.\n       \\<lbrakk>\\<not> bval b s; bval b s;\n        (c, s) \\<Rightarrow> x \\<Down> s2;\n        (WHILE b DO c, s2) \\<Rightarrow> y \\<Down> u;\n        Suc (x + y) = q\\<rbrakk>\n       \\<Longrightarrow> u = s \\<and> Suc 0 = q\n 2. \\<And>b s1 c x s2 y s3 z u q.\n       \\<lbrakk>bval b s1; (c, s1) \\<Rightarrow> x \\<Down> s2;\n        \\<And>u q.\n           (c, s1) \\<Rightarrow> q \\<Down> u \\<Longrightarrow>\n           u = s2 \\<and> x = q;\n        (WHILE b DO c, s2) \\<Rightarrow> y \\<Down> s3;\n        \\<And>u q.\n           (WHILE b DO c, s2) \\<Rightarrow> q \\<Down> u \\<Longrightarrow>\n           u = s3 \\<and> y = q;\n        1 + x + y = z; (WHILE b DO c, s1) \\<Rightarrow> q \\<Down> u\\<rbrakk>\n       \\<Longrightarrow> u = s3 \\<and> z = q", "apply blast"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>b s1 c x s2 y s3 z u q.\n       \\<lbrakk>bval b s1; (c, s1) \\<Rightarrow> x \\<Down> s2;\n        \\<And>u q.\n           (c, s1) \\<Rightarrow> q \\<Down> u \\<Longrightarrow>\n           u = s2 \\<and> x = q;\n        (WHILE b DO c, s2) \\<Rightarrow> y \\<Down> s3;\n        \\<And>u q.\n           (WHILE b DO c, s2) \\<Rightarrow> q \\<Down> u \\<Longrightarrow>\n           u = s3 \\<and> y = q;\n        1 + x + y = z; (WHILE b DO c, s1) \\<Rightarrow> q \\<Down> u\\<rbrakk>\n       \\<Longrightarrow> u = s3 \\<and> z = q", "proof (goal_cases)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>b s1 c x s2 y s3 z u q.\n       \\<lbrakk>bval b s1; (c, s1) \\<Rightarrow> x \\<Down> s2;\n        \\<And>u q.\n           (c, s1) \\<Rightarrow> q \\<Down> u \\<Longrightarrow>\n           u = s2 \\<and> x = q;\n        (WHILE b DO c, s2) \\<Rightarrow> y \\<Down> s3;\n        \\<And>u q.\n           (WHILE b DO c, s2) \\<Rightarrow> q \\<Down> u \\<Longrightarrow>\n           u = s3 \\<and> y = q;\n        1 + x + y = z; (WHILE b DO c, s1) \\<Rightarrow> q \\<Down> u\\<rbrakk>\n       \\<Longrightarrow> u = s3 \\<and> z = q", "case 1"], ["proof (state)\nthis:\n  bval b_ s1_\n  (c_, s1_) \\<Rightarrow> x_ \\<Down> s2_\n  (c_, s1_) \\<Rightarrow> ?q \\<Down> ?u \\<Longrightarrow>\n  ?u = s2_ \\<and> x_ = ?q\n  (WHILE b_ DO c_, s2_) \\<Rightarrow> y_ \\<Down> s3_\n  (WHILE b_ DO c_, s2_) \\<Rightarrow> ?q \\<Down> ?u \\<Longrightarrow>\n  ?u = s3_ \\<and> y_ = ?q\n  1 + x_ + y_ = z_\n  (WHILE b_ DO c_, s1_) \\<Rightarrow> q_ \\<Down> u_\n\ngoal (1 subgoal):\n 1. \\<And>b s1 c x s2 y s3 z u q.\n       \\<lbrakk>bval b s1; (c, s1) \\<Rightarrow> x \\<Down> s2;\n        \\<And>u q.\n           (c, s1) \\<Rightarrow> q \\<Down> u \\<Longrightarrow>\n           u = s2 \\<and> x = q;\n        (WHILE b DO c, s2) \\<Rightarrow> y \\<Down> s3;\n        \\<And>u q.\n           (WHILE b DO c, s2) \\<Rightarrow> q \\<Down> u \\<Longrightarrow>\n           u = s3 \\<and> y = q;\n        1 + x + y = z; (WHILE b DO c, s1) \\<Rightarrow> q \\<Down> u\\<rbrakk>\n       \\<Longrightarrow> u = s3 \\<and> z = q", "from 1(7)"], ["proof (chain)\npicking this:\n  (WHILE b_ DO c_, s1_) \\<Rightarrow> q_ \\<Down> u_", "show ?case"], ["proof (prove)\nusing this:\n  (WHILE b_ DO c_, s1_) \\<Rightarrow> q_ \\<Down> u_\n\ngoal (1 subgoal):\n 1. u_ = s3_ \\<and> z_ = q_", "apply(safe)"], ["proof (prove)\ngoal (2 subgoals):\n 1. (WHILE b_ DO c_, s1_) \\<Rightarrow> q_ \\<Down> u_ \\<Longrightarrow>\n    u_ = s3_\n 2. (WHILE b_ DO c_, s1_) \\<Rightarrow> q_ \\<Down> u_ \\<Longrightarrow>\n    z_ = q_", "apply(erule While_tE)"], ["proof (prove)\ngoal (3 subgoals):\n 1. \\<lbrakk>q_ = Suc 0; u_ = s1_; \\<not> bval b_ s1_\\<rbrakk>\n    \\<Longrightarrow> u_ = s3_\n 2. \\<And>x s2 y.\n       \\<lbrakk>bval b_ s1_; (c_, s1_) \\<Rightarrow> x \\<Down> s2;\n        (WHILE b_ DO c_, s2) \\<Rightarrow> y \\<Down> u_;\n        Suc (x + y) = q_\\<rbrakk>\n       \\<Longrightarrow> u_ = s3_\n 3. (WHILE b_ DO c_, s1_) \\<Rightarrow> q_ \\<Down> u_ \\<Longrightarrow>\n    z_ = q_", "using 1(1-6)"], ["proof (prove)\nusing this:\n  bval b_ s1_\n  (c_, s1_) \\<Rightarrow> x_ \\<Down> s2_\n  (c_, s1_) \\<Rightarrow> ?q \\<Down> ?u \\<Longrightarrow>\n  ?u = s2_ \\<and> x_ = ?q\n  (WHILE b_ DO c_, s2_) \\<Rightarrow> y_ \\<Down> s3_\n  (WHILE b_ DO c_, s2_) \\<Rightarrow> ?q \\<Down> ?u \\<Longrightarrow>\n  ?u = s3_ \\<and> y_ = ?q\n  1 + x_ + y_ = z_\n\ngoal (3 subgoals):\n 1. \\<lbrakk>q_ = Suc 0; u_ = s1_; \\<not> bval b_ s1_\\<rbrakk>\n    \\<Longrightarrow> u_ = s3_\n 2. \\<And>x s2 y.\n       \\<lbrakk>bval b_ s1_; (c_, s1_) \\<Rightarrow> x \\<Down> s2;\n        (WHILE b_ DO c_, s2) \\<Rightarrow> y \\<Down> u_;\n        Suc (x + y) = q_\\<rbrakk>\n       \\<Longrightarrow> u_ = s3_\n 3. (WHILE b_ DO c_, s1_) \\<Rightarrow> q_ \\<Down> u_ \\<Longrightarrow>\n    z_ = q_", "apply fast"], ["proof (prove)\ngoal (2 subgoals):\n 1. \\<And>x s2 y.\n       \\<lbrakk>bval b_ s1_; (c_, s1_) \\<Rightarrow> x \\<Down> s2;\n        (WHILE b_ DO c_, s2) \\<Rightarrow> y \\<Down> u_;\n        Suc (x + y) = q_\\<rbrakk>\n       \\<Longrightarrow> u_ = s3_\n 2. (WHILE b_ DO c_, s1_) \\<Rightarrow> q_ \\<Down> u_ \\<Longrightarrow>\n    z_ = q_", "using 1(1-6)"], ["proof (prove)\nusing this:\n  bval b_ s1_\n  (c_, s1_) \\<Rightarrow> x_ \\<Down> s2_\n  (c_, s1_) \\<Rightarrow> ?q \\<Down> ?u \\<Longrightarrow>\n  ?u = s2_ \\<and> x_ = ?q\n  (WHILE b_ DO c_, s2_) \\<Rightarrow> y_ \\<Down> s3_\n  (WHILE b_ DO c_, s2_) \\<Rightarrow> ?q \\<Down> ?u \\<Longrightarrow>\n  ?u = s3_ \\<and> y_ = ?q\n  1 + x_ + y_ = z_\n\ngoal (2 subgoals):\n 1. \\<And>x s2 y.\n       \\<lbrakk>bval b_ s1_; (c_, s1_) \\<Rightarrow> x \\<Down> s2;\n        (WHILE b_ DO c_, s2) \\<Rightarrow> y \\<Down> u_;\n        Suc (x + y) = q_\\<rbrakk>\n       \\<Longrightarrow> u_ = s3_\n 2. (WHILE b_ DO c_, s1_) \\<Rightarrow> q_ \\<Down> u_ \\<Longrightarrow>\n    z_ = q_", "apply (simp)"], ["proof (prove)\ngoal (1 subgoal):\n 1. (WHILE b_ DO c_, s1_) \\<Rightarrow> q_ \\<Down> u_ \\<Longrightarrow>\n    z_ = q_", "apply(erule While_tE)"], ["proof (prove)\ngoal (2 subgoals):\n 1. \\<lbrakk>q_ = Suc 0; u_ = s1_; \\<not> bval b_ s1_\\<rbrakk>\n    \\<Longrightarrow> z_ = q_\n 2. \\<And>x s2 y.\n       \\<lbrakk>bval b_ s1_; (c_, s1_) \\<Rightarrow> x \\<Down> s2;\n        (WHILE b_ DO c_, s2) \\<Rightarrow> y \\<Down> u_;\n        Suc (x + y) = q_\\<rbrakk>\n       \\<Longrightarrow> z_ = q_", "using 1(1-6)"], ["proof (prove)\nusing this:\n  bval b_ s1_\n  (c_, s1_) \\<Rightarrow> x_ \\<Down> s2_\n  (c_, s1_) \\<Rightarrow> ?q \\<Down> ?u \\<Longrightarrow>\n  ?u = s2_ \\<and> x_ = ?q\n  (WHILE b_ DO c_, s2_) \\<Rightarrow> y_ \\<Down> s3_\n  (WHILE b_ DO c_, s2_) \\<Rightarrow> ?q \\<Down> ?u \\<Longrightarrow>\n  ?u = s3_ \\<and> y_ = ?q\n  1 + x_ + y_ = z_\n\ngoal (2 subgoals):\n 1. \\<lbrakk>q_ = Suc 0; u_ = s1_; \\<not> bval b_ s1_\\<rbrakk>\n    \\<Longrightarrow> z_ = q_\n 2. \\<And>x s2 y.\n       \\<lbrakk>bval b_ s1_; (c_, s1_) \\<Rightarrow> x \\<Down> s2;\n        (WHILE b_ DO c_, s2) \\<Rightarrow> y \\<Down> u_;\n        Suc (x + y) = q_\\<rbrakk>\n       \\<Longrightarrow> z_ = q_", "apply fast"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>x s2 y.\n       \\<lbrakk>bval b_ s1_; (c_, s1_) \\<Rightarrow> x \\<Down> s2;\n        (WHILE b_ DO c_, s2) \\<Rightarrow> y \\<Down> u_;\n        Suc (x + y) = q_\\<rbrakk>\n       \\<Longrightarrow> z_ = q_", "using 1(1-6)"], ["proof (prove)\nusing this:\n  bval b_ s1_\n  (c_, s1_) \\<Rightarrow> x_ \\<Down> s2_\n  (c_, s1_) \\<Rightarrow> ?q \\<Down> ?u \\<Longrightarrow>\n  ?u = s2_ \\<and> x_ = ?q\n  (WHILE b_ DO c_, s2_) \\<Rightarrow> y_ \\<Down> s3_\n  (WHILE b_ DO c_, s2_) \\<Rightarrow> ?q \\<Down> ?u \\<Longrightarrow>\n  ?u = s3_ \\<and> y_ = ?q\n  1 + x_ + y_ = z_\n\ngoal (1 subgoal):\n 1. \\<And>x s2 y.\n       \\<lbrakk>bval b_ s1_; (c_, s1_) \\<Rightarrow> x \\<Down> s2;\n        (WHILE b_ DO c_, s2) \\<Rightarrow> y \\<Down> u_;\n        Suc (x + y) = q_\\<rbrakk>\n       \\<Longrightarrow> z_ = q_", "by (simp)"], ["proof (state)\nthis:\n  u_ = s3_ \\<and> z_ = q_\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma bigstep_det: \"(c1, s) \\<Rightarrow> p1 \\<Down> t1 \\<Longrightarrow> (c1, s) \\<Rightarrow> p \\<Down> t \\<Longrightarrow> p1=p \\<and> t1=t\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>(c1, s) \\<Rightarrow> p1 \\<Down> t1;\n     (c1, s) \\<Rightarrow> p \\<Down> t\\<rbrakk>\n    \\<Longrightarrow> p1 = p \\<and> t1 = t", "using big_step_t_determ2"], ["proof (prove)\nusing this:\n  \\<lbrakk>(?c, ?s) \\<Rightarrow> ?p \\<Down> ?t;\n   (?c, ?s) \\<Rightarrow> ?q \\<Down> ?u\\<rbrakk>\n  \\<Longrightarrow> ?u = ?t \\<and> ?p = ?q\n\ngoal (1 subgoal):\n 1. \\<lbrakk>(c1, s) \\<Rightarrow> p1 \\<Down> t1;\n     (c1, s) \\<Rightarrow> p \\<Down> t\\<rbrakk>\n    \\<Longrightarrow> p1 = p \\<and> t1 = t", "by simp"], ["", "lemma bigstep_progress: \"(c, s) \\<Rightarrow> p \\<Down> t \\<Longrightarrow> p > 0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (c, s) \\<Rightarrow> p \\<Down> t \\<Longrightarrow> 0 < p", "apply(induct rule: big_step_t.induct, auto)"], ["proof (prove)\ngoal:\nNo subgoals!", "done"], ["", "abbreviation terminates (\"\\<down>\") where \"terminates cs \\<equiv> (\\<exists>n a. (cs \\<Rightarrow> n \\<Down> a))\""], ["", "abbreviation thestate (\"\\<down>\\<^sub>s\") where \"thestate cs \\<equiv> (THE a. \\<exists>n. (cs \\<Rightarrow> n \\<Down> a))\""], ["", "abbreviation thetime (\"\\<down>\\<^sub>t\") where \"thetime cs \\<equiv> (THE n. \\<exists>a. (cs \\<Rightarrow> n \\<Down> a))\""], ["", "lemma bigstepT_the_cost: \"(c, s) \\<Rightarrow> t \\<Down> s' \\<Longrightarrow> \\<down>\\<^sub>t(c, s) = t\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (c, s) \\<Rightarrow> t \\<Down> s' \\<Longrightarrow>\n    \\<down>\\<^sub>t (c, s) = t", "using bigstep_det"], ["proof (prove)\nusing this:\n  \\<lbrakk>(?c1.0, ?s) \\<Rightarrow> ?p1.0 \\<Down> ?t1.0;\n   (?c1.0, ?s) \\<Rightarrow> ?p \\<Down> ?t\\<rbrakk>\n  \\<Longrightarrow> ?p1.0 = ?p \\<and> ?t1.0 = ?t\n\ngoal (1 subgoal):\n 1. (c, s) \\<Rightarrow> t \\<Down> s' \\<Longrightarrow>\n    \\<down>\\<^sub>t (c, s) = t", "by blast"], ["", "lemma bigstepT_the_state: \"(c, s) \\<Rightarrow> t \\<Down> s' \\<Longrightarrow> \\<down>\\<^sub>s(c, s) = s'\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (c, s) \\<Rightarrow> t \\<Down> s' \\<Longrightarrow>\n    \\<down>\\<^sub>s (c, s) = s'", "using bigstep_det"], ["proof (prove)\nusing this:\n  \\<lbrakk>(?c1.0, ?s) \\<Rightarrow> ?p1.0 \\<Down> ?t1.0;\n   (?c1.0, ?s) \\<Rightarrow> ?p \\<Down> ?t\\<rbrakk>\n  \\<Longrightarrow> ?p1.0 = ?p \\<and> ?t1.0 = ?t\n\ngoal (1 subgoal):\n 1. (c, s) \\<Rightarrow> t \\<Down> s' \\<Longrightarrow>\n    \\<down>\\<^sub>s (c, s) = s'", "by blast"], ["", "lemma SKIPnot: \"(\\<not> (SKIP, s) \\<Rightarrow> p \\<Down> t) = (s\\<noteq>t \\<or> p\\<noteq>Suc 0)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<not> (SKIP, s) \\<Rightarrow> p \\<Down> t) =\n    (s \\<noteq> t \\<or> p \\<noteq> Suc 0)", "by blast"], ["", "lemma SKIPp: \"\\<down>\\<^sub>t(SKIP,s) = Suc 0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<down>\\<^sub>t (SKIP, s) = Suc 0", "apply(rule the_equality)"], ["proof (prove)\ngoal (2 subgoals):\n 1. \\<exists>a. (SKIP, s) \\<Rightarrow> Suc 0 \\<Down> a\n 2. \\<And>n.\n       \\<exists>a. (SKIP, s) \\<Rightarrow> n \\<Down> a \\<Longrightarrow>\n       n = Suc 0", "apply fast"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>n.\n       \\<exists>a. (SKIP, s) \\<Rightarrow> n \\<Down> a \\<Longrightarrow>\n       n = Suc 0", "apply auto"], ["proof (prove)\ngoal:\nNo subgoals!", "done"], ["", "lemma SKIPt: \"\\<down>\\<^sub>s(SKIP,s) = s\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<down>\\<^sub>s (SKIP, s) = s", "apply(rule the_equality)"], ["proof (prove)\ngoal (2 subgoals):\n 1. \\<exists>n. (SKIP, s) \\<Rightarrow> n \\<Down> s\n 2. \\<And>a.\n       \\<exists>n. (SKIP, s) \\<Rightarrow> n \\<Down> a \\<Longrightarrow>\n       a = s", "apply fast"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>a.\n       \\<exists>n. (SKIP, s) \\<Rightarrow> n \\<Down> a \\<Longrightarrow>\n       a = s", "apply auto"], ["proof (prove)\ngoal:\nNo subgoals!", "done"], ["", "lemma ASSp: \"(THE p. Ex (big_step_t (x ::= e, s) p)) = Suc 0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<down>\\<^sub>t (x ::= e, s) = Suc 0", "apply(rule the_equality)"], ["proof (prove)\ngoal (2 subgoals):\n 1. Ex (big_step_t (x ::= e, s) (Suc 0))\n 2. \\<And>p. Ex (big_step_t (x ::= e, s) p) \\<Longrightarrow> p = Suc 0", "apply fast"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>p. Ex (big_step_t (x ::= e, s) p) \\<Longrightarrow> p = Suc 0", "apply auto"], ["proof (prove)\ngoal:\nNo subgoals!", "done"], ["", "lemma ASSt: \"(THE t. \\<exists>p. (x ::= e, s) \\<Rightarrow> p \\<Down> t) = s(x := aval e s)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<down>\\<^sub>s (x ::= e, s) = s(x := aval e s)", "apply(rule the_equality)"], ["proof (prove)\ngoal (2 subgoals):\n 1. \\<exists>p. (x ::= e, s) \\<Rightarrow> p \\<Down> s(x := aval e s)\n 2. \\<And>t.\n       \\<exists>p. (x ::= e, s) \\<Rightarrow> p \\<Down> t \\<Longrightarrow>\n       t = s(x := aval e s)", "apply fast"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>t.\n       \\<exists>p. (x ::= e, s) \\<Rightarrow> p \\<Down> t \\<Longrightarrow>\n       t = s(x := aval e s)", "apply auto"], ["proof (prove)\ngoal:\nNo subgoals!", "done"], ["", "lemma ASSnot: \"( \\<not> (x ::= e, s) \\<Rightarrow> p \\<Down> t ) = (p\\<noteq>Suc 0 \\<or> t\\<noteq>s(x := aval e s))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<not> (x ::= e, s) \\<Rightarrow> p \\<Down> t) =\n    (p \\<noteq> Suc 0 \\<or> t \\<noteq> s(x := aval e s))", "apply auto"], ["proof (prove)\ngoal:\nNo subgoals!", "done"], ["", "lemma If_THE_True: \"Suc (THE n. \\<exists>a. (c1, s) \\<Rightarrow> n \\<Down> a) =  (THE n. \\<exists>a. (IF b THEN c1 ELSE c2, s) \\<Rightarrow> n \\<Down> a)\"\n     if T: \"bval b s\" and c1_t: \"terminates (c1,s)\" for s l"], ["proof (prove)\ngoal (1 subgoal):\n 1. Suc (\\<down>\\<^sub>t (c1, s)) =\n    \\<down>\\<^sub>t (IF b THEN c1 ELSE c2, s)", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. Suc (\\<down>\\<^sub>t (c1, s)) =\n    \\<down>\\<^sub>t (IF b THEN c1 ELSE c2, s)", "from c1_t"], ["proof (chain)\npicking this:\n  \\<down> (c1, s)", "obtain p t where a: \"(c1, s) \\<Rightarrow> p \\<Down> t\""], ["proof (prove)\nusing this:\n  \\<down> (c1, s)\n\ngoal (1 subgoal):\n 1. (\\<And>p t.\n        (c1, s) \\<Rightarrow> p \\<Down> t \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by blast"], ["proof (state)\nthis:\n  (c1, s) \\<Rightarrow> p \\<Down> t\n\ngoal (1 subgoal):\n 1. Suc (\\<down>\\<^sub>t (c1, s)) =\n    \\<down>\\<^sub>t (IF b THEN c1 ELSE c2, s)", "with T"], ["proof (chain)\npicking this:\n  bval b s\n  (c1, s) \\<Rightarrow> p \\<Down> t", "have b: \"(IF b THEN c1 ELSE c2, s) \\<Rightarrow> p+1 \\<Down> t\""], ["proof (prove)\nusing this:\n  bval b s\n  (c1, s) \\<Rightarrow> p \\<Down> t\n\ngoal (1 subgoal):\n 1. (IF b THEN c1 ELSE c2, s) \\<Rightarrow> p + 1 \\<Down> t", "using IfTrue"], ["proof (prove)\nusing this:\n  bval b s\n  (c1, s) \\<Rightarrow> p \\<Down> t\n  \\<lbrakk>bval ?b ?s; (?c1.0, ?s) \\<Rightarrow> ?x \\<Down> ?t;\n   ?y = ?x + 1\\<rbrakk>\n  \\<Longrightarrow> (IF ?b THEN ?c1.0 ELSE ?c2.0,\n                     ?s) \\<Rightarrow> ?y \\<Down> ?t\n\ngoal (1 subgoal):\n 1. (IF b THEN c1 ELSE c2, s) \\<Rightarrow> p + 1 \\<Down> t", "by simp"], ["proof (state)\nthis:\n  (IF b THEN c1 ELSE c2, s) \\<Rightarrow> p + 1 \\<Down> t\n\ngoal (1 subgoal):\n 1. Suc (\\<down>\\<^sub>t (c1, s)) =\n    \\<down>\\<^sub>t (IF b THEN c1 ELSE c2, s)", "from a bigstepT_the_cost"], ["proof (chain)\npicking this:\n  (c1, s) \\<Rightarrow> p \\<Down> t\n  (?c, ?s) \\<Rightarrow> ?t \\<Down> ?s' \\<Longrightarrow>\n  \\<down>\\<^sub>t (?c, ?s) = ?t", "have \"(THE n. \\<exists>a. (c1, s) \\<Rightarrow> n \\<Down> a) = p\""], ["proof (prove)\nusing this:\n  (c1, s) \\<Rightarrow> p \\<Down> t\n  (?c, ?s) \\<Rightarrow> ?t \\<Down> ?s' \\<Longrightarrow>\n  \\<down>\\<^sub>t (?c, ?s) = ?t\n\ngoal (1 subgoal):\n 1. \\<down>\\<^sub>t (c1, s) = p", "by simp"], ["proof (state)\nthis:\n  \\<down>\\<^sub>t (c1, s) = p\n\ngoal (1 subgoal):\n 1. Suc (\\<down>\\<^sub>t (c1, s)) =\n    \\<down>\\<^sub>t (IF b THEN c1 ELSE c2, s)", "moreover"], ["proof (state)\nthis:\n  \\<down>\\<^sub>t (c1, s) = p\n\ngoal (1 subgoal):\n 1. Suc (\\<down>\\<^sub>t (c1, s)) =\n    \\<down>\\<^sub>t (IF b THEN c1 ELSE c2, s)", "from b bigstepT_the_cost"], ["proof (chain)\npicking this:\n  (IF b THEN c1 ELSE c2, s) \\<Rightarrow> p + 1 \\<Down> t\n  (?c, ?s) \\<Rightarrow> ?t \\<Down> ?s' \\<Longrightarrow>\n  \\<down>\\<^sub>t (?c, ?s) = ?t", "have \"(THE n. \\<exists>a. (IF b THEN c1 ELSE c2, s) \\<Rightarrow> n \\<Down> a) = p+1\""], ["proof (prove)\nusing this:\n  (IF b THEN c1 ELSE c2, s) \\<Rightarrow> p + 1 \\<Down> t\n  (?c, ?s) \\<Rightarrow> ?t \\<Down> ?s' \\<Longrightarrow>\n  \\<down>\\<^sub>t (?c, ?s) = ?t\n\ngoal (1 subgoal):\n 1. \\<down>\\<^sub>t (IF b THEN c1 ELSE c2, s) = p + 1", "by simp"], ["proof (state)\nthis:\n  \\<down>\\<^sub>t (IF b THEN c1 ELSE c2, s) = p + 1\n\ngoal (1 subgoal):\n 1. Suc (\\<down>\\<^sub>t (c1, s)) =\n    \\<down>\\<^sub>t (IF b THEN c1 ELSE c2, s)", "ultimately"], ["proof (chain)\npicking this:\n  \\<down>\\<^sub>t (c1, s) = p\n  \\<down>\\<^sub>t (IF b THEN c1 ELSE c2, s) = p + 1", "show ?thesis"], ["proof (prove)\nusing this:\n  \\<down>\\<^sub>t (c1, s) = p\n  \\<down>\\<^sub>t (IF b THEN c1 ELSE c2, s) = p + 1\n\ngoal (1 subgoal):\n 1. Suc (\\<down>\\<^sub>t (c1, s)) =\n    \\<down>\\<^sub>t (IF b THEN c1 ELSE c2, s)", "by simp"], ["proof (state)\nthis:\n  Suc (\\<down>\\<^sub>t (c1, s)) = \\<down>\\<^sub>t (IF b THEN c1 ELSE c2, s)\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma If_THE_False: \"Suc (THE n. \\<exists>a. (c2, s) \\<Rightarrow> n \\<Down> a) =  (THE n. \\<exists>a. (IF b THEN c1 ELSE c2, s) \\<Rightarrow> n \\<Down> a)\"\n     if T: \"\\<not>bval b s\" and c2_t: \"\\<down> (c2,s)\" for s l"], ["proof (prove)\ngoal (1 subgoal):\n 1. Suc (\\<down>\\<^sub>t (c2, s)) =\n    \\<down>\\<^sub>t (IF b THEN c1 ELSE c2, s)", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. Suc (\\<down>\\<^sub>t (c2, s)) =\n    \\<down>\\<^sub>t (IF b THEN c1 ELSE c2, s)", "from c2_t"], ["proof (chain)\npicking this:\n  \\<down> (c2, s)", "obtain p t where a: \"(c2, s) \\<Rightarrow> p \\<Down> t\""], ["proof (prove)\nusing this:\n  \\<down> (c2, s)\n\ngoal (1 subgoal):\n 1. (\\<And>p t.\n        (c2, s) \\<Rightarrow> p \\<Down> t \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by blast"], ["proof (state)\nthis:\n  (c2, s) \\<Rightarrow> p \\<Down> t\n\ngoal (1 subgoal):\n 1. Suc (\\<down>\\<^sub>t (c2, s)) =\n    \\<down>\\<^sub>t (IF b THEN c1 ELSE c2, s)", "with T"], ["proof (chain)\npicking this:\n  \\<not> bval b s\n  (c2, s) \\<Rightarrow> p \\<Down> t", "have b: \"(IF b THEN c1 ELSE c2, s) \\<Rightarrow> p+1 \\<Down> t\""], ["proof (prove)\nusing this:\n  \\<not> bval b s\n  (c2, s) \\<Rightarrow> p \\<Down> t\n\ngoal (1 subgoal):\n 1. (IF b THEN c1 ELSE c2, s) \\<Rightarrow> p + 1 \\<Down> t", "using IfFalse"], ["proof (prove)\nusing this:\n  \\<not> bval b s\n  (c2, s) \\<Rightarrow> p \\<Down> t\n  \\<lbrakk>\\<not> bval ?b ?s; (?c2.0, ?s) \\<Rightarrow> ?x \\<Down> ?t;\n   ?y = ?x + 1\\<rbrakk>\n  \\<Longrightarrow> (IF ?b THEN ?c1.0 ELSE ?c2.0,\n                     ?s) \\<Rightarrow> ?y \\<Down> ?t\n\ngoal (1 subgoal):\n 1. (IF b THEN c1 ELSE c2, s) \\<Rightarrow> p + 1 \\<Down> t", "by simp"], ["proof (state)\nthis:\n  (IF b THEN c1 ELSE c2, s) \\<Rightarrow> p + 1 \\<Down> t\n\ngoal (1 subgoal):\n 1. Suc (\\<down>\\<^sub>t (c2, s)) =\n    \\<down>\\<^sub>t (IF b THEN c1 ELSE c2, s)", "from a bigstepT_the_cost"], ["proof (chain)\npicking this:\n  (c2, s) \\<Rightarrow> p \\<Down> t\n  (?c, ?s) \\<Rightarrow> ?t \\<Down> ?s' \\<Longrightarrow>\n  \\<down>\\<^sub>t (?c, ?s) = ?t", "have \"(THE n. \\<exists>a. (c2, s) \\<Rightarrow> n \\<Down> a) = p\""], ["proof (prove)\nusing this:\n  (c2, s) \\<Rightarrow> p \\<Down> t\n  (?c, ?s) \\<Rightarrow> ?t \\<Down> ?s' \\<Longrightarrow>\n  \\<down>\\<^sub>t (?c, ?s) = ?t\n\ngoal (1 subgoal):\n 1. \\<down>\\<^sub>t (c2, s) = p", "by simp"], ["proof (state)\nthis:\n  \\<down>\\<^sub>t (c2, s) = p\n\ngoal (1 subgoal):\n 1. Suc (\\<down>\\<^sub>t (c2, s)) =\n    \\<down>\\<^sub>t (IF b THEN c1 ELSE c2, s)", "moreover"], ["proof (state)\nthis:\n  \\<down>\\<^sub>t (c2, s) = p\n\ngoal (1 subgoal):\n 1. Suc (\\<down>\\<^sub>t (c2, s)) =\n    \\<down>\\<^sub>t (IF b THEN c1 ELSE c2, s)", "from b bigstepT_the_cost"], ["proof (chain)\npicking this:\n  (IF b THEN c1 ELSE c2, s) \\<Rightarrow> p + 1 \\<Down> t\n  (?c, ?s) \\<Rightarrow> ?t \\<Down> ?s' \\<Longrightarrow>\n  \\<down>\\<^sub>t (?c, ?s) = ?t", "have \"(THE n. \\<exists>a. (IF b THEN c1 ELSE c2, s) \\<Rightarrow> n \\<Down> a) = p+1\""], ["proof (prove)\nusing this:\n  (IF b THEN c1 ELSE c2, s) \\<Rightarrow> p + 1 \\<Down> t\n  (?c, ?s) \\<Rightarrow> ?t \\<Down> ?s' \\<Longrightarrow>\n  \\<down>\\<^sub>t (?c, ?s) = ?t\n\ngoal (1 subgoal):\n 1. \\<down>\\<^sub>t (IF b THEN c1 ELSE c2, s) = p + 1", "by simp"], ["proof (state)\nthis:\n  \\<down>\\<^sub>t (IF b THEN c1 ELSE c2, s) = p + 1\n\ngoal (1 subgoal):\n 1. Suc (\\<down>\\<^sub>t (c2, s)) =\n    \\<down>\\<^sub>t (IF b THEN c1 ELSE c2, s)", "ultimately"], ["proof (chain)\npicking this:\n  \\<down>\\<^sub>t (c2, s) = p\n  \\<down>\\<^sub>t (IF b THEN c1 ELSE c2, s) = p + 1", "show ?thesis"], ["proof (prove)\nusing this:\n  \\<down>\\<^sub>t (c2, s) = p\n  \\<down>\\<^sub>t (IF b THEN c1 ELSE c2, s) = p + 1\n\ngoal (1 subgoal):\n 1. Suc (\\<down>\\<^sub>t (c2, s)) =\n    \\<down>\\<^sub>t (IF b THEN c1 ELSE c2, s)", "by simp"], ["proof (state)\nthis:\n  Suc (\\<down>\\<^sub>t (c2, s)) = \\<down>\\<^sub>t (IF b THEN c1 ELSE c2, s)\n\ngoal:\nNo subgoals!", "qed"], ["", "end"]]}