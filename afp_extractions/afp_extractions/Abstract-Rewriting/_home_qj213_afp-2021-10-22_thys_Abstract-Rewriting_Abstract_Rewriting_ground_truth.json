{"file_name": "/home/qj213/afp-2021-10-22/thys/Abstract-Rewriting/Abstract_Rewriting.thy", "working_directory": "/home/qj213/afp-2021-10-22/thys/Abstract-Rewriting", "problem_names": ["lemma trancl_mono_set:\n  \"r \\<subseteq> s \\<Longrightarrow> r\\<^sup>+ \\<subseteq> s\\<^sup>+\"", "lemma relpow_mono:\n  fixes r :: \"'a rel\"\n  assumes \"r \\<subseteq> r'\" shows \"r ^^ n \\<subseteq> r' ^^ n\"", "lemma refl_inv_image:\n  \"refl R \\<Longrightarrow> refl (inv_image R f)\"", "lemma symcl_converse:\n  \"(A\\<^sup>\\<leftrightarrow>)\\<inverse> = A\\<^sup>\\<leftrightarrow>\"", "lemma symcl_Un: \"(A \\<union> B)\\<^sup>\\<leftrightarrow> = A\\<^sup>\\<leftrightarrow> \\<union> B\\<^sup>\\<leftrightarrow>\"", "lemma no_step:\n  assumes \"A `` {a} = {}\" shows \"a \\<in> NF A\"", "lemma joinI:\n  \"(a, c) \\<in> A\\<^sup>* \\<Longrightarrow> (b, c) \\<in> A\\<^sup>* \\<Longrightarrow> (a, b) \\<in> A\\<^sup>\\<down>\"", "lemma joinI_left:\n  \"(a, b) \\<in> A\\<^sup>* \\<Longrightarrow> (a, b) \\<in> A\\<^sup>\\<down>\"", "lemma joinI_right: \"(b, a) \\<in> A\\<^sup>* \\<Longrightarrow> (a, b) \\<in> A\\<^sup>\\<down>\"", "lemma joinE:\n  assumes \"(a, b) \\<in> A\\<^sup>\\<down>\"\n  obtains c where \"(a, c) \\<in> A\\<^sup>*\" and \"(b, c) \\<in> A\\<^sup>*\"", "lemma joinD:\n  \"(a, b) \\<in> A\\<^sup>\\<down> \\<Longrightarrow> \\<exists>c. (a, c) \\<in> A\\<^sup>* \\<and> (b, c) \\<in> A\\<^sup>*\"", "lemma meetI:\n  \"(a, b) \\<in> A\\<^sup>* \\<Longrightarrow> (a, c) \\<in> A\\<^sup>* \\<Longrightarrow> (b, c) \\<in> A\\<^sup>\\<up>\"", "lemma meetE:\n  assumes \"(b, c) \\<in> A\\<^sup>\\<up>\"\n  obtains a where \"(a, b) \\<in> A\\<^sup>*\" and \"(a, c) \\<in> A\\<^sup>*\"", "lemma meetD: \"(b, c) \\<in> A\\<^sup>\\<up> \\<Longrightarrow> \\<exists>a. (a, b) \\<in> A\\<^sup>* \\<and> (a, c) \\<in> A\\<^sup>*\"", "lemma conversionI: \"(a, b) \\<in> (A\\<^sup>\\<leftrightarrow>)\\<^sup>* \\<Longrightarrow> (a, b) \\<in> A\\<^sup>\\<leftrightarrow>\\<^sup>*\"", "lemma conversion_refl [simp]: \"(a, a) \\<in> A\\<^sup>\\<leftrightarrow>\\<^sup>*\"", "lemma conversionI':\n  assumes \"(a, b) \\<in> A\\<^sup>*\" shows \"(a, b) \\<in> A\\<^sup>\\<leftrightarrow>\\<^sup>*\"", "lemma rtrancl_comp_trancl_conv:\n  \"r\\<^sup>* O r = r\\<^sup>+\"", "lemma trancl_o_refl_is_trancl:\n  \"r\\<^sup>+ O r\\<^sup>= = r\\<^sup>+\"", "lemma conversionE:\n  \"(a, b) \\<in> A\\<^sup>\\<leftrightarrow>\\<^sup>* \\<Longrightarrow> ((a, b) \\<in> (A\\<^sup>\\<leftrightarrow>)\\<^sup>* \\<Longrightarrow> P) \\<Longrightarrow> P\"", "lemma conversion_trans:\n  \"trans (A\\<^sup>\\<leftrightarrow>\\<^sup>*)\"", "lemma conversion_sym:\n  \"sym (A\\<^sup>\\<leftrightarrow>\\<^sup>*)\"", "lemma conversion_inv:\n  \"(x, y) \\<in> R\\<^sup>\\<leftrightarrow>\\<^sup>* \\<longleftrightarrow> (y, x) \\<in> R\\<^sup>\\<leftrightarrow>\\<^sup>*\"", "lemma conversion_converse [simp]:\n  \"(A\\<^sup>\\<leftrightarrow>\\<^sup>*)\\<inverse> = A\\<^sup>\\<leftrightarrow>\\<^sup>*\"", "lemma conversion_rtrancl [simp]:\n  \"(A\\<^sup>\\<leftrightarrow>\\<^sup>*)\\<^sup>* = A\\<^sup>\\<leftrightarrow>\\<^sup>*\"", "lemma rtrancl_join_join:\n  assumes \"(a, b) \\<in> A\\<^sup>*\" and \"(b, c) \\<in> A\\<^sup>\\<down>\" shows \"(a, c) \\<in> A\\<^sup>\\<down>\"", "lemma join_rtrancl_join:\n  assumes \"(a, b) \\<in> A\\<^sup>\\<down>\" and \"(c, b) \\<in> A\\<^sup>*\" shows \"(a, c) \\<in> A\\<^sup>\\<down>\"", "lemma NF_I: \"(\\<And>b. (a, b) \\<notin> A) \\<Longrightarrow> a \\<in> NF A\"", "lemma NF_E: \"a \\<in> NF A \\<Longrightarrow> ((a, b) \\<notin> A \\<Longrightarrow> P) \\<Longrightarrow> P\"", "lemma NF_no_step: \"a \\<in> NF A \\<Longrightarrow> \\<forall>b. (a, b) \\<notin> A\"", "lemma NF_anti_mono:\n  assumes \"A \\<subseteq> B\" shows \"NF B \\<subseteq> NF A\"", "lemma NF_iff_no_step: \"a \\<in> NF A = (\\<forall>b. (a, b) \\<notin> A)\"", "lemma NF_no_trancl_step:\n  assumes \"a \\<in> NF A\" shows \"\\<forall>b. (a, b) \\<notin> A\\<^sup>+\"", "lemma NF_Id_on_fst_image [simp]: \"NF (Id_on (fst ` A)) = NF A\"", "lemma fst_image_NF_Id_on [simp]: \"fst ` R = Q \\<Longrightarrow> NF (Id_on Q) = NF R\"", "lemma NF_empty [simp]: \"NF {} = UNIV\"", "lemma normalizability_I: \"(a, b) \\<in> A\\<^sup>* \\<Longrightarrow> b \\<in> NF A \\<Longrightarrow> (a, b) \\<in> A\\<^sup>!\"", "lemma normalizability_I': \"(a, b) \\<in> A\\<^sup>* \\<Longrightarrow> (b, c) \\<in> A\\<^sup>! \\<Longrightarrow> (a, c) \\<in> A\\<^sup>!\"", "lemma normalizability_E: \"(a, b) \\<in> A\\<^sup>! \\<Longrightarrow> ((a, b) \\<in> A\\<^sup>* \\<Longrightarrow> b \\<in> NF A \\<Longrightarrow> P) \\<Longrightarrow> P\"", "lemma SN_def: \"SN r = (\\<forall>x. SN_on r {x})\"", "lemmas CR_defs = CR_on_def", "lemmas SN_defs = SN_on_def", "lemmas UNF_defs = UNF_on_def", "lemmas WCR_defs = WCR_on_def", "lemmas WN_defs = WN_on_def", "lemmas complete_defs = complete_on_def", "lemmas semi_complete_defs = semi_complete_on_def", "lemma complete_onI:\n  \"SN_on r A \\<Longrightarrow> CR_on r A \\<Longrightarrow> complete_on r A\"", "lemma complete_onE:\n  \"complete_on r A \\<Longrightarrow> (SN_on r A \\<Longrightarrow> CR_on r A \\<Longrightarrow> P) \\<Longrightarrow> P\"", "lemma CR_onI:\n  \"(\\<And>a b c. a \\<in> A \\<Longrightarrow> (a, b) \\<in> r\\<^sup>* \\<Longrightarrow> (a, c) \\<in> r\\<^sup>* \\<Longrightarrow> (b, c) \\<in> join r) \\<Longrightarrow> CR_on r A\"", "lemma CR_on_singletonI:\n  \"(\\<And>b c. (a, b) \\<in> r\\<^sup>* \\<Longrightarrow> (a, c) \\<in> r\\<^sup>* \\<Longrightarrow> (b, c) \\<in> join r) \\<Longrightarrow> CR_on r {a}\"", "lemma CR_onE:\n  \"CR_on r A \\<Longrightarrow> a \\<in> A \\<Longrightarrow> ((b, c) \\<in> join r \\<Longrightarrow> P) \\<Longrightarrow> ((a, b) \\<notin> r\\<^sup>* \\<Longrightarrow> P) \\<Longrightarrow> ((a, c) \\<notin> r\\<^sup>* \\<Longrightarrow> P) \\<Longrightarrow> P\"", "lemma CR_onD:\n  \"CR_on r A \\<Longrightarrow> a \\<in> A \\<Longrightarrow> (a, b) \\<in> r\\<^sup>* \\<Longrightarrow> (a, c) \\<in> r\\<^sup>* \\<Longrightarrow> (b, c) \\<in> join r\"", "lemma semi_complete_onI: \"WN_on r A \\<Longrightarrow> CR_on r A \\<Longrightarrow> semi_complete_on r A\"", "lemma semi_complete_onE:\n  \"semi_complete_on r A \\<Longrightarrow> (WN_on r A \\<Longrightarrow> CR_on r A \\<Longrightarrow> P) \\<Longrightarrow> P\"", "lemma UNC_I:\n  \"(\\<And>a b. a \\<in> NF A \\<Longrightarrow> b \\<in> NF A \\<Longrightarrow> (a, b) \\<in> A\\<^sup>\\<leftrightarrow>\\<^sup>* \\<Longrightarrow> a = b) \\<Longrightarrow> UNC A\"", "lemma UNC_E:\n  \"\\<lbrakk>UNC A; a = b \\<Longrightarrow> P; a \\<notin> NF A \\<Longrightarrow> P; b \\<notin> NF A \\<Longrightarrow> P; (a, b) \\<notin> A\\<^sup>\\<leftrightarrow>\\<^sup>* \\<Longrightarrow> P\\<rbrakk> \\<Longrightarrow> P\"", "lemma UNF_onI: \"(\\<And>a b c. a \\<in> A \\<Longrightarrow> (a, b) \\<in> r\\<^sup>! \\<Longrightarrow> (a, c) \\<in> r\\<^sup>! \\<Longrightarrow> b = c) \\<Longrightarrow> UNF_on r A\"", "lemma UNF_onE:\n  \"UNF_on r A \\<Longrightarrow> a \\<in> A \\<Longrightarrow> (b = c \\<Longrightarrow> P) \\<Longrightarrow> ((a, b) \\<notin> r\\<^sup>! \\<Longrightarrow> P) \\<Longrightarrow> ((a, c) \\<notin> r\\<^sup>! \\<Longrightarrow> P) \\<Longrightarrow> P\"", "lemma UNF_onD:\n  \"UNF_on r A \\<Longrightarrow> a \\<in> A \\<Longrightarrow> (a, b) \\<in> r\\<^sup>! \\<Longrightarrow> (a, c) \\<in> r\\<^sup>! \\<Longrightarrow> b = c\"", "lemma SN_onI:\n  assumes \"\\<And>f. \\<lbrakk>f 0 \\<in> A; chain r f\\<rbrakk> \\<Longrightarrow> False\"\n  shows \"SN_on r A\"", "lemma SN_I: \"(\\<And>a. SN_on A {a}) \\<Longrightarrow> SN A\"", "lemma SN_on_trancl_imp_SN_on:\n  assumes \"SN_on (R\\<^sup>+) T\" shows \"SN_on R T\"", "lemma SN_onE:\n  assumes \"SN_on r A\"\n    and \"\\<not> (\\<exists>f. f 0 \\<in> A \\<and> chain r f) \\<Longrightarrow> P\"\n  shows \"P\"", "lemma not_SN_onE:\n  assumes \"\\<not> SN_on r A\"\n    and \"\\<And>f. \\<lbrakk>f 0 \\<in> A; chain r f\\<rbrakk> \\<Longrightarrow> P\"\n  shows \"P\"", "lemma refl_not_SN: \"(x, x) \\<in> R \\<Longrightarrow> \\<not> SN R\"", "lemma SN_on_irrefl:\n  assumes \"SN_on r A\"\n  shows \"\\<forall>a\\<in>A. (a, a) \\<notin> r\"", "lemma WCR_onI: \"(\\<And>a b c. a \\<in> A \\<Longrightarrow> (a, b) \\<in> r \\<Longrightarrow> (a, c) \\<in> r \\<Longrightarrow> (b, c) \\<in> join r) \\<Longrightarrow> WCR_on r A\"", "lemma WCR_onE:\n  \"WCR_on r A \\<Longrightarrow> a \\<in> A \\<Longrightarrow> ((b, c) \\<in> join r \\<Longrightarrow> P) \\<Longrightarrow> ((a, b) \\<notin> r \\<Longrightarrow> P) \\<Longrightarrow> ((a, c) \\<notin> r \\<Longrightarrow> P) \\<Longrightarrow> P\"", "lemma SN_nat_bounded: \"SN {(x, y :: nat). x < y \\<and> y \\<le> b}\" (is \"SN ?R\")", "lemma WCR_onD:\n  \"WCR_on r A \\<Longrightarrow> a \\<in> A \\<Longrightarrow> (a, b) \\<in> r \\<Longrightarrow> (a, c) \\<in> r \\<Longrightarrow> (b, c) \\<in> join r\"", "lemma WN_onI: \"(\\<And>a. a \\<in> A \\<Longrightarrow> \\<exists>b. (a, b) \\<in> r\\<^sup>!) \\<Longrightarrow> WN_on r A\"", "lemma WN_onE: \"WN_on r A \\<Longrightarrow> a \\<in> A \\<Longrightarrow> (\\<And>b. (a, b) \\<in> r\\<^sup>! \\<Longrightarrow> P) \\<Longrightarrow> P\"", "lemma WN_onD: \"WN_on r A \\<Longrightarrow> a \\<in> A \\<Longrightarrow> \\<exists>b. (a, b) \\<in> r\\<^sup>!\"", "lemma SN_restrict_SN_idemp [simp]: \"SN (restrict_SN A A)\"", "lemma SN_on_Image:\n  assumes \"SN_on r A\"\n  shows \"SN_on r (r `` A)\"", "lemma SN_on_subset2:\n  assumes \"A \\<subseteq> B\" and \"SN_on r B\"\n  shows \"SN_on r A\"", "lemma step_preserves_SN_on:\n  assumes 1: \"(a, b) \\<in> r\"\n    and 2: \"SN_on r {a}\"\n  shows \"SN_on r {b}\"", "lemma steps_preserve_SN_on: \"(a, b) \\<in> A\\<^sup>* \\<Longrightarrow> SN_on A {a} \\<Longrightarrow> SN_on A {b}\"", "lemma relpow_seq:\n  assumes \"(x, y) \\<in> r^^n\"\n  shows \"\\<exists>f. f 0 = x \\<and> f n = y \\<and> (\\<forall>i<n. (f i, f (Suc i)) \\<in> r)\"", "lemma rtrancl_imp_seq:\n  assumes \"(x, y) \\<in> r\\<^sup>*\"\n  shows \"\\<exists>f n. f 0 = x \\<and> f n = y \\<and> (\\<forall>i<n. (f i, f (Suc i)) \\<in> r)\"", "lemma SN_on_Image_rtrancl:\n  assumes \"SN_on r A\"\n  shows \"SN_on r (r\\<^sup>* `` A)\"", "lemma restrict_SN_trancl_simp [simp]: \"(restrict_SN A A)\\<^sup>+ = restrict_SN (A\\<^sup>+) A\" (is \"?lhs = ?rhs\")", "lemma SN_imp_WN:\n  assumes \"SN A\" shows \"WN A\"", "lemma UNC_imp_UNF:\n assumes \"UNC r\" shows \"UNF r\"", "lemma join_NF_imp_eq:\n assumes \"(x, y) \\<in> r\\<^sup>\\<down>\" and \"x \\<in> NF r\" and \"y \\<in> NF r\"\n shows \"x = y\"", "lemma rtrancl_Restr:\n  assumes \"(x, y) \\<in> (Restr r A)\\<^sup>*\"\n  shows \"(x, y) \\<in> r\\<^sup>*\"", "lemma join_mono:\n  assumes \"r \\<subseteq> s\"\n  shows \"r\\<^sup>\\<down> \\<subseteq> s\\<^sup>\\<down>\"", "lemma CR_iff_meet_subset_join: \"CR r = (r\\<^sup>\\<up> \\<subseteq> r\\<^sup>\\<down>)\"", "lemma CR_divergence_imp_join:\n  assumes \"CR r\" and \"(x, y) \\<in> r\\<^sup>*\" and \"(x, z) \\<in> r\\<^sup>*\"\n  shows \"(y, z) \\<in> r\\<^sup>\\<down>\"", "lemma join_imp_conversion: \"r\\<^sup>\\<down> \\<subseteq> r\\<^sup>\\<leftrightarrow>\\<^sup>*\"", "lemma meet_imp_conversion: \"r\\<^sup>\\<up> \\<subseteq> r\\<^sup>\\<leftrightarrow>\\<^sup>*\"", "lemma CR_imp_UNF:\n  assumes \"CR r\" shows \"UNF r\"", "lemma CR_iff_conversion_imp_join: \"CR r = (r\\<^sup>\\<leftrightarrow>\\<^sup>* \\<subseteq> r\\<^sup>\\<down>)\"", "lemma CR_imp_conversionIff_join:\n  assumes \"CR r\" shows \"r\\<^sup>\\<leftrightarrow>\\<^sup>* = r\\<^sup>\\<down>\"", "lemma sym_join: \"sym (join r)\"", "lemma join_sym: \"(s, t) \\<in> A\\<^sup>\\<down> \\<Longrightarrow> (t, s) \\<in> A\\<^sup>\\<down>\"", "lemma CR_join_left_I:\n  assumes \"CR r\" and \"(x, y) \\<in> r\\<^sup>*\" and \"(x, z) \\<in> r\\<^sup>\\<down>\" shows \"(y, z) \\<in> r\\<^sup>\\<down>\"", "lemma CR_join_right_I:\n assumes \"CR r\" and \"(x, y) \\<in> r\\<^sup>\\<down>\" and \"(y, z) \\<in> r\\<^sup>*\" shows \"(x, z) \\<in> r\\<^sup>\\<down>\"", "lemma NF_not_suc:\n  assumes \"(x, y) \\<in> r\\<^sup>*\" and \"x \\<in> NF r\" shows \"x = y\"", "lemma semi_complete_imp_conversionIff_same_NF:\n  assumes \"semi_complete r\"\n  shows \"((x, y) \\<in> r\\<^sup>\\<leftrightarrow>\\<^sup>*) = (\\<forall>u v. (x, u) \\<in> r\\<^sup>! \\<and> (y, v) \\<in> r\\<^sup>! \\<longrightarrow> u = v)\"", "lemma CR_imp_UNC:\n  assumes \"CR r\" shows \"UNC r\"", "lemma WN_UNF_imp_CR:\n  assumes \"WN r\" and \"UNF r\" shows \"CR r\"", "lemma diamond_I [intro]: \"(r\\<inverse> O r) \\<subseteq> (r O r\\<inverse>) \\<Longrightarrow> \\<diamond> r\"", "lemma diamond_E [elim]: \"\\<diamond> r \\<Longrightarrow> ((r\\<inverse> O r) \\<subseteq> (r O r\\<inverse>) \\<Longrightarrow> P) \\<Longrightarrow> P\"", "lemma diamond_imp_semi_confluence:\n  assumes \"\\<diamond> r\" shows \"(r\\<inverse> O r\\<^sup>*) \\<subseteq> r\\<^sup>\\<down>\"", "lemma semi_confluence_imp_CR:\n  assumes \"(r\\<inverse> O r\\<^sup>*) \\<subseteq> r\\<^sup>\\<down>\" shows \"CR r\"", "lemma diamond_imp_CR:\n  assumes \"\\<diamond> r\" shows \"CR r\"", "lemma diamond_imp_CR':\n  assumes \"\\<diamond> s\" and \"r \\<subseteq> s\" and \"s \\<subseteq> r\\<^sup>*\" shows \"CR r\"", "lemma SN_imp_minimal:\n  assumes \"SN A\"\n  shows \"\\<forall>Q x. x \\<in> Q \\<longrightarrow> (\\<exists>z\\<in>Q. \\<forall>y. (z, y) \\<in> A \\<longrightarrow> y \\<notin> Q)\"", "lemma SN_on_imp_on_minimal:\n  assumes \"SN_on r {x}\"\n  shows \"\\<forall>Q. x \\<in> Q \\<longrightarrow> (\\<exists>z\\<in>Q. \\<forall>y. (z, y) \\<in> r \\<longrightarrow> y \\<notin> Q)\"", "lemma minimal_imp_wf:\n  assumes \"\\<forall>Q x. x \\<in> Q \\<longrightarrow> (\\<exists>z\\<in>Q. \\<forall>y. (z, y) \\<in> r \\<longrightarrow> y \\<notin> Q)\"\n  shows \"wf(r\\<inverse>)\"", "lemmas SN_imp_wf = SN_imp_minimal [THEN minimal_imp_wf]", "lemma wf_imp_SN:\n  assumes \"wf (A\\<inverse>)\" shows \"SN A\"", "lemma SN_nat_gt: \"SN {(a, b :: nat) . a > b}\"", "lemma SN_iff_wf: \"SN A = wf (A\\<inverse>)\"", "lemma SN_imp_acyclic: \"SN R \\<Longrightarrow> acyclic R\"", "lemma SN_induct:\n  assumes sn: \"SN r\" and step: \"\\<And>a. (\\<And>b. (a, b) \\<in> r \\<Longrightarrow> P b) \\<Longrightarrow> P a\"\n  shows \"P a\"", "lemmas SN_induct_rule = SN_induct [consumes 1, case_names IH, induct pred: SN]", "lemma SN_on_induct [consumes 2, case_names IH, induct pred: SN_on]:\n  assumes SN: \"SN_on R A\"\n    and \"s \\<in> A\"\n    and imp: \"\\<And>t. (\\<And>u. (t, u) \\<in> R \\<Longrightarrow> P u) \\<Longrightarrow> P t\"\n  shows \"P s\"", "lemma accp_imp_SN_on:\n  assumes \"\\<And>x. x \\<in> A \\<Longrightarrow> Wellfounded.accp g x\"\n  shows \"SN_on {(y, z). g z y} A\"", "lemma SN_on_imp_accp:\n  assumes \"SN_on {(y, z). g z y} A\"\n  shows \"\\<forall>x\\<in>A. Wellfounded.accp g x\"", "lemma SN_on_conv_accp:\n  \"SN_on {(y, z). g z y} {x} = Wellfounded.accp g x\"", "lemma SN_on_conv_acc: \"SN_on {(y, z). (z, y) \\<in> r} {x} \\<longleftrightarrow> x \\<in> Wellfounded.acc r\"", "lemma acc_imp_SN_on:\n  assumes \"x \\<in> Wellfounded.acc r\" shows \"SN_on {(y, z). (z, y) \\<in> r} {x}\"", "lemma SN_on_imp_acc:\n  assumes \"SN_on {(y, z). (z, y) \\<in> r} {x}\" shows \"x \\<in> Wellfounded.acc r\"", "lemma rtrancl_len_E [elim]:\n  assumes \"(x, y) \\<in> r\\<^sup>*\" obtains n where \"(x, y) \\<in> r^^n\"", "lemma relpow_Suc_E2' [elim]:\n  assumes \"(x, z) \\<in> A^^Suc n\" obtains y where \"(x, y) \\<in> A\" and \"(y, z) \\<in> A\\<^sup>*\"", "lemmas SN_on_induct' [consumes 1, case_names IH] = SN_on_induct [OF _ singletonI]", "lemma Newman_local:\n  assumes \"SN_on r X\" and WCR: \"WCR_on r {x. SN_on r {x}}\"\n  shows \"CR_on r X\"", "lemma Newman: \"SN r \\<Longrightarrow> WCR r \\<Longrightarrow> CR r\"", "lemma Image_SN_on:\n  assumes \"SN_on r (r `` A)\"\n  shows \"SN_on r A\"", "lemma SN_on_Image_conv: \"SN_on r (r `` A) = SN_on r A\"", "lemma step_reflects_SN_on:\n  assumes \"(\\<And>b. (a, b) \\<in> r \\<Longrightarrow> SN_on r {b})\"\n  shows \"SN_on r {a}\"", "lemma SN_on_all_reducts_SN_on_conv:\n  \"SN_on r {a} = (\\<forall>b. (a, b) \\<in> r \\<longrightarrow> SN_on r {b})\"", "lemma SN_imp_SN_trancl: \"SN R \\<Longrightarrow> SN (R\\<^sup>+)\"", "lemma SN_trancl_imp_SN:\n  assumes \"SN (R\\<^sup>+)\" shows \"SN R\"", "lemma SN_trancl_SN_conv: \"SN (R\\<^sup>+) = SN R\"", "lemma SN_inv_image: \"SN R \\<Longrightarrow> SN (inv_image R f)\"", "lemma SN_subset: \"SN R \\<Longrightarrow> R' \\<subseteq> R \\<Longrightarrow> SN R'\"", "lemma SN_pow_imp_SN:\n  assumes \"SN (A^^Suc n)\" shows \"SN A\"", "lemma pow_Suc_subset_trancl: \"R^^(Suc n) \\<subseteq> R\\<^sup>+\"", "lemma SN_imp_SN_pow:\n  assumes \"SN R\" shows \"SN (R^^Suc n)\"", "lemma SN_pow: \"SN R \\<longleftrightarrow> SN (R ^^ Suc n)\"", "lemma SN_on_trancl:\n  assumes \"SN_on r A\" shows \"SN_on (r\\<^sup>+) A\"", "lemma SN_on_trancl_SN_on_conv: \"SN_on (R\\<^sup>+) T = SN_on R T\"", "lemma SN_on_restrict:\n  assumes \"SN_on r A\"\n  shows \"SN_on (restrict r S) A\" (is \"SN_on ?r A\")", "lemma restrict_rtrancl: \"(restrict r S)\\<^sup>* \\<subseteq> r\\<^sup>*\" (is \"?r\\<^sup>* \\<subseteq> r\\<^sup>*\")", "lemma rtrancl_Image_step:\n  assumes \"a \\<in> r\\<^sup>* `` A\"\n    and \"(a, b) \\<in> r\\<^sup>*\"\n  shows \"b \\<in> r\\<^sup>* `` A\"", "lemma WCR_SN_on_imp_CR_on:\n  assumes \"WCR r\" and \"SN_on r A\" shows \"CR_on r A\"", "lemma SN_on_Image_normalizable:\n  assumes \"SN_on r A\"\n  shows \"\\<forall>a\\<in>A. \\<exists>b. b \\<in> r\\<^sup>! `` A\"", "lemma SN_on_imp_normalizability:\n  assumes \"SN_on r {a}\" shows \"\\<exists>b. (a, b) \\<in> r\\<^sup>!\"", "lemma CR_iff_self_commute: \"CR r = commute r r\"", "lemma rtrancl_imp_rtrancl_UN: \n  assumes \"(x, y) \\<in> r\\<^sup>*\" and \"r \\<in> I\"\n  shows \"(x, y) \\<in> (\\<Union>r\\<in>I. r)\\<^sup>*\" (is \"(x, y) \\<in> ?r\\<^sup>*\")", "lemma rtrancl_union_subset_rtrancl_union_trancl: \"(r \\<union> s\\<^sup>+)\\<^sup>* = (r \\<union> s)\\<^sup>*\"", "lemma qc_imp_qc_trancl:\n  assumes \"quasi_commute r s\" shows \"quasi_commute r (s\\<^sup>+)\"", "lemma steps_reflect_SN_on:\n  assumes \"\\<not> SN_on r {b}\" and \"(a, b) \\<in> r\\<^sup>*\"\n  shows \"\\<not> SN_on r {a}\"", "lemma chain_imp_not_SN_on:\n   assumes \"chain r f\"\n   shows \"\\<not> SN_on r {f i}\"", "lemma quasi_commute_imp_SN:\n  assumes \"SN r\" and \"SN s\" and \"quasi_commute r s\"\n  shows \"SN (r \\<union> s)\"", "lemma non_strict_into_strict:\n  assumes compat: \"NS O S \\<subseteq> S\"\n    and steps: \"(s, t) \\<in> (NS\\<^sup>*) O S\"\n  shows \"(s, t) \\<in> S\"", "lemma comp_trancl:\n  assumes \"R O S \\<subseteq> S\" shows \"R O S\\<^sup>+ \\<subseteq> S\\<^sup>+\"", "lemma comp_rtrancl_trancl:\n  assumes comp: \"R O S \\<subseteq> S\"\n    and seq: \"(s, t) \\<in> (R \\<union> S)\\<^sup>* O S\"\n  shows \"(s, t) \\<in> S\\<^sup>+\"", "lemma trancl_union_right: \"r\\<^sup>+ \\<subseteq> (s \\<union> r)\\<^sup>+\"", "lemma restrict_SN_subset: \"restrict_SN R S \\<subseteq> R\"", "lemma chain_Un_SN_on_imp_first_step:\n  assumes \"chain (R \\<union> S) t\" and \"SN_on S {t 0}\"\n  shows \"\\<exists>i. (t i, t (Suc i)) \\<in> R \\<and> (\\<forall>j<i. (t j, t (Suc j)) \\<in> S \\<and> (t j, t (Suc j)) \\<notin> R)\"", "lemma first_step:\n  assumes C: \"C = A \\<union> B\" and steps: \"(x, y) \\<in> C\\<^sup>*\" and Bstep: \"(y, z) \\<in> B\"\n  shows \"\\<exists>y. (x, y) \\<in> A\\<^sup>* O B\"", "lemma first_step_O:\n  assumes C: \"C = A \\<union> B\" and steps: \"(x, y) \\<in> C\\<^sup>* O B\"\n  shows \"\\<exists> y. (x, y) \\<in> A\\<^sup>* O B\"", "lemma firstStep:\n  assumes LSR: \"L = S \\<union> R\" and xyL: \"(x, y) \\<in> L\\<^sup>*\"\n  shows \"(x, y) \\<in> R\\<^sup>* \\<or> (x, y) \\<in> R\\<^sup>* O S O L\\<^sup>*\"", "lemma non_strict_ending:\n  assumes chain: \"chain (R \\<union> S) t\"\n    and comp: \"R O S \\<subseteq> S\"\n    and SN: \"SN_on S {t 0}\"\n  shows \"\\<exists>j. \\<forall>i\\<ge>j. (t i, t (Suc i)) \\<in> R - S\"", "lemma SN_on_subset1:\n  assumes \"SN_on r A\" and \"s \\<subseteq> r\"\n  shows \"SN_on s A\"", "lemmas SN_on_mono = SN_on_subset1", "lemma rtrancl_fun_conv:\n  \"((s, t) \\<in> R\\<^sup>*) = (\\<exists> f n. f 0 = s \\<and> f n = t \\<and> (\\<forall> i < n. (f i, f (Suc i)) \\<in> R))\"", "lemma compat_tr_compat:\n  assumes \"NS O S \\<subseteq> S\" shows \"NS\\<^sup>* O S \\<subseteq> S\"", "lemma right_comp_S [simp]:\n  assumes \"(x, y) \\<in> S O (S O S\\<^sup>* O NS\\<^sup>* \\<union> NS\\<^sup>*)\"\n  shows \"(x, y) \\<in> (S O S\\<^sup>* O NS\\<^sup>*)\"", "lemma compatible_SN:\n  assumes SN: \"SN S\"\n  and compat: \"NS O S \\<subseteq> S\" \n  shows \"SN (S O S\\<^sup>* O NS\\<^sup>*)\" (is \"SN ?A\")", "lemma compatible_rtrancl_split:\n  assumes compat: \"NS O S \\<subseteq> S\"\n   and steps: \"(x, y) \\<in> (NS \\<union> S)\\<^sup>*\"\n  shows \"(x, y) \\<in> S O S\\<^sup>* O NS\\<^sup>* \\<union> NS\\<^sup>*\"", "lemma compatible_conv:\n  assumes compat: \"NS O S \\<subseteq> S\" \n  shows \"(NS \\<union> S)\\<^sup>* O S O (NS \\<union> S)\\<^sup>* = S O S\\<^sup>* O NS\\<^sup>*\"", "lemma compatible_SN': \n  assumes compat: \"NS O S \\<subseteq> S\" and SN: \"SN S\"\n  shows \"SN((NS \\<union> S)\\<^sup>* O S O (NS \\<union> S)\\<^sup>*)\"", "lemma rtrancl_diff_decomp:\n  assumes \"(x, y) \\<in> A\\<^sup>* - B\\<^sup>*\"\n  shows \"(x, y) \\<in> A\\<^sup>* O (A - B) O A\\<^sup>*\"", "lemma SN_empty [simp]: \"SN {}\"", "lemma SN_on_weakening:\n  assumes \"SN_on R1 A\"\n  shows \"SN_on (R1 \\<inter> R2) A\"", "lemma ideriv_mono: \"R \\<subseteq> R' \\<Longrightarrow> S \\<subseteq> S' \\<Longrightarrow> ideriv R S as \\<Longrightarrow> ideriv R' S' as\"", "lemma ideriv_split:\n  assumes ideriv: \"ideriv R S as\"\n    and nideriv: \"\\<not> ideriv (D \\<inter> (R \\<union> S)) (R \\<union> S - D) as\"\n  shows \"\\<exists> i. ideriv (R - D) (S - D) (shift as i)\"", "lemma ideriv_SN:\n  assumes SN: \"SN S\"\n    and compat: \"NS O S \\<subseteq> S\"\n    and R: \"R \\<subseteq> NS \\<union> S\"\n  shows \"\\<not> ideriv (S \\<inter> R) (R - S) as\"", "lemma Infm_shift: \"(INFM i. P (shift f n i)) = (INFM i. P (f i))\" (is \"?S = ?O\")", "lemma rtrancl_list_conv:\n  \"(s, t) \\<in> R\\<^sup>* \\<longleftrightarrow> \n    (\\<exists> ts. last (s # ts) = t \\<and> (\\<forall>i<length ts. ((s # ts) ! i, (s # ts) ! Suc i) \\<in> R))\" (is \"?l = ?r\")", "lemma SN_reaches_NF:\n  assumes \"SN_on r {x}\"\n  shows \"\\<exists>y. (x, y) \\<in> r\\<^sup>* \\<and> y \\<in> NF r\"", "lemma SN_WCR_reaches_NF:\n  assumes SN: \"SN_on r {x}\" \n    and WCR: \"WCR_on r {x. SN_on r {x}}\"\n  shows \"\\<exists>! y. (x, y) \\<in> r\\<^sup>* \\<and> y \\<in> NF r\"", "lemma some_NF:\n  assumes SN: \"SN_on r {x}\" \n  shows \"(x, some_NF r x) \\<in> r\\<^sup>* \\<and> some_NF r x \\<in> NF r\"", "lemma some_NF_WCR:\n  assumes SN: \"SN_on r {x}\"\n    and WCR: \"WCR_on r {x. SN_on r {x}}\"\n    and steps: \"(x, y) \\<in> r\\<^sup>*\"\n    and NF: \"y \\<in> NF r\"\n  shows \"y = some_NF r x\"", "lemma some_NF_UNF:\n  assumes UNF: \"UNF r\"\n    and steps: \"(x, y) \\<in> r\\<^sup>*\"\n    and NF: \"y \\<in> NF r\"\n  shows \"y = some_NF r x\"", "lemma the_NF: \"(a, the_NF A a) \\<in> A\\<^sup>!\"", "lemma the_NF_NF: \"the_NF A a \\<in> NF A\"", "lemma the_NF_step:\n  assumes \"(a, b) \\<in> A\"\n  shows \"the_NF A a = the_NF A b\"", "lemma the_NF_steps:\n  assumes \"(a, b) \\<in> A\\<^sup>*\"\n  shows \"the_NF A a = the_NF A b\"", "lemma the_NF_conv:\n  assumes \"(a, b) \\<in> A\\<^sup>\\<leftrightarrow>\\<^sup>*\"\n  shows \"the_NF A a = the_NF A b\"", "lemma weak_diamond_imp_CR:\n  assumes wd: \"w\\<diamond> r\"\n  shows \"CR r\"", "lemma steps_imp_not_SN_on:\n  fixes t :: \"'a \\<Rightarrow> 'b\"\n    and R :: \"'b rel\"\n  assumes steps: \"\\<And> x. (t x, t (f x)) \\<in> R\"\n  shows \"\\<not> SN_on R {t x}\"", "lemma steps_imp_not_SN:\n  fixes t :: \"'a \\<Rightarrow> 'b\"\n    and R :: \"'b rel\"\n  assumes steps: \"\\<And> x. (t x, t (f x)) \\<in> R\"\n  shows \"\\<not> SN R\"", "lemma steps_map:\n  assumes fg: \"\\<And>t u R . P t \\<Longrightarrow> Q R \\<Longrightarrow> (t, u) \\<in> R \\<Longrightarrow> P u \\<and> (f t, f u) \\<in> g R\"\n  and t: \"P t\"\n  and R: \"Q R\"\n  and S: \"Q S\"\n  shows \"((t, u) \\<in> R\\<^sup>* \\<longrightarrow> (f t, f u) \\<in> (g R)\\<^sup>*)\n    \\<and> ((t, u) \\<in> R\\<^sup>* O S O R\\<^sup>* \\<longrightarrow> (f t, f u) \\<in> (g R)\\<^sup>* O (g S) O (g R)\\<^sup>*)\"", "lemma SN_on_SN_part_conv:\n  \"SN_on r A \\<longleftrightarrow> A \\<subseteq> SN_part r\"", "lemma SN_SN_part_UNIV_conv:\n  \"SN r \\<longleftrightarrow> SN_part r = UNIV\"", "lemma closed_imp_rtrancl_closed: assumes L: \"L \\<subseteq> A\"\n  and R: \"R `` A \\<subseteq> A\"\n  shows \"{t | s. s \\<in> L \\<and> (s,t) \\<in> R^*} \\<subseteq> A\"", "lemma trancl_steps_relpow: assumes \"a \\<subseteq> b^+\"\n  shows \"(x,y) \\<in> a^^n \\<Longrightarrow> \\<exists> m. m \\<ge> n \\<and> (x,y) \\<in> b^^m\"", "lemma relpow_image: assumes f: \"\\<And> s t. (s,t) \\<in> r \\<Longrightarrow> (f s, f t) \\<in> r'\"\n  shows \"(s,t) \\<in> r ^^ n \\<Longrightarrow> (f s, f t) \\<in> r' ^^ n\"", "lemma relpow_refl_mono:\n assumes refl:\"\\<And> x. (x,x) \\<in> Rel\"\n shows \"m \\<le> n \\<Longrightarrow>(a,b) \\<in> Rel ^^ m \\<Longrightarrow> (a,b) \\<in> Rel ^^ n\"", "lemma SN_on_induct_acc_style [consumes 1, case_names IH]:\n  assumes sn: \"SN_on R {a}\"\n    and IH: \"\\<And>x. SN_on R {x} \\<Longrightarrow> \\<lbrakk>\\<And>y. (x, y) \\<in> R \\<Longrightarrow> P y\\<rbrakk>  \\<Longrightarrow> P x\"\n  shows \"P a\"", "lemma partially_localize_CR:\n  \"CR r \\<longleftrightarrow> (\\<forall> x y z. (x, y) \\<in> r \\<and> (x, z) \\<in> r\\<^sup>* \\<longrightarrow> (y, z) \\<in> join r)\"", "lemma strongly_confluent_on_E11:\n  \"strongly_confluent_on r A \\<Longrightarrow> x \\<in> A \\<Longrightarrow> (x, y) \\<in> r \\<Longrightarrow> (x, z) \\<in> r \\<Longrightarrow>\n    \\<exists>u. (y, u) \\<in> r\\<^sup>* \\<and> (z, u) \\<in> r\\<^sup>=\"", "lemma strongly_confluentI [intro]:\n  \"\\<lbrakk>\\<And>x y z. (x, y) \\<in> r \\<Longrightarrow> (x, z) \\<in> r \\<Longrightarrow> \\<exists>u. (y, u) \\<in> r\\<^sup>* \\<and> (z, u) \\<in> r\\<^sup>=\\<rbrakk> \\<Longrightarrow> strongly_confluent r\"", "lemma strongly_confluent_E1n:\n  assumes scr: \"strongly_confluent r\"\n  shows \"(x, y) \\<in> r\\<^sup>= \\<Longrightarrow> (x, z) \\<in> r ^^ n \\<Longrightarrow> \\<exists>u. (y, u) \\<in> r\\<^sup>* \\<and> (z, u) \\<in> r\\<^sup>=\"", "lemma strong_confluence_imp_CR: \n  assumes \"strongly_confluent r\"\n  shows \"CR r\"", "lemma WCR_alt_def: \"WCR A \\<longleftrightarrow> A\\<inverse> O A \\<subseteq> A\\<^sup>\\<down>\"", "lemma NF_imp_SN_on: \"a \\<in> NF R \\<Longrightarrow> SN_on R {a}\"", "lemma Union_sym: \"(s, t) \\<in> (\\<Union>i\\<le>n. (S i)\\<^sup>\\<leftrightarrow>) \\<longleftrightarrow> (t, s) \\<in> (\\<Union>i\\<le>n. (S i)\\<^sup>\\<leftrightarrow>)\"", "lemma peak_iff: \"(x, y) \\<in> A\\<inverse> O B \\<longleftrightarrow> (\\<exists>u. (u, x) \\<in> A \\<and> (u, y) \\<in> B)\"", "lemma CR_NF_conv:\n  assumes \"CR r\" and \"t \\<in> NF r\" and \"(u, t) \\<in> r\\<^sup>\\<leftrightarrow>\\<^sup>*\"\n  shows \"(u, t) \\<in> r\\<^sup>!\"", "lemma NF_join_imp_reach:\n  assumes \"y \\<in> NF A\" and \"(x, y) \\<in> A\\<^sup>\\<down>\"\n  shows \"(x, y) \\<in> A\\<^sup>*\"", "lemma conversion_O_conversion [simp]:\n  \"A\\<^sup>\\<leftrightarrow>\\<^sup>* O A\\<^sup>\\<leftrightarrow>\\<^sup>* = A\\<^sup>\\<leftrightarrow>\\<^sup>*\"", "lemma trans_O_iff: \"trans A \\<longleftrightarrow> A O A \\<subseteq> A\"", "lemma refl_O_iff: \"refl A \\<longleftrightarrow> Id \\<subseteq> A\"", "lemma relpow_Suc: \"r ^^ Suc n = r O r ^^ n\"", "lemma converse_power: fixes r :: \"'a rel\" shows \"(r\\<inverse>)^^n = (r^^n)\\<inverse>\"", "lemma conversion_mono: \"A \\<subseteq> B \\<Longrightarrow> A\\<^sup>\\<leftrightarrow>\\<^sup>* \\<subseteq> B\\<^sup>\\<leftrightarrow>\\<^sup>*\"", "lemma conversion_conversion_idemp [simp]: \"(A\\<^sup>\\<leftrightarrow>\\<^sup>*)\\<^sup>\\<leftrightarrow>\\<^sup>* = A\\<^sup>\\<leftrightarrow>\\<^sup>*\"", "lemma lower_set_imp_not_SN_on:\n  assumes \"s \\<in> X\" \"\\<forall>t \\<in> X. \\<exists>u \\<in> X. (t,u) \\<in> R\" shows \"\\<not> SN_on R {s}\"", "lemma SN_on_Image_rtrancl_iff[simp]: \"SN_on R (R\\<^sup>* `` X) \\<longleftrightarrow> SN_on R X\" (is \"?l = ?r\")", "lemma O_mono1: \"R \\<subseteq> R' \\<Longrightarrow> S O R \\<subseteq> S O R'\"", "lemma O_mono2: \"R \\<subseteq> R' \\<Longrightarrow> R O T \\<subseteq> R' O T\"", "lemma rtrancl_O_shift: \"(S O R)\\<^sup>* O S = S O (R O S)\\<^sup>*\"", "lemma O_rtrancl_O_O: \"R O (S O R)\\<^sup>* O S = (R O S)\\<^sup>+\"", "lemma SN_on_subset_SN_terms:\n  assumes SN: \"SN_on R X\" shows \"X \\<subseteq> {x. SN_on R {x}}\"", "lemma SN_on_Un2:\n  assumes \"SN_on R X\" and \"SN_on R Y\" shows \"SN_on R (X \\<union> Y)\"", "lemma SN_on_UN:\n  assumes \"\\<And>x. SN_on R (X x)\" shows \"SN_on R (\\<Union>x. X x)\"", "lemma Image_subsetI: \"R \\<subseteq> R' \\<Longrightarrow> R `` X \\<subseteq> R' `` X\"", "lemma SN_on_O_comm:\n  assumes SN: \"SN_on ((R :: ('a\\<times>'b) set) O (S :: ('b\\<times>'a) set)) (S `` X)\"\n  shows \"SN_on (S O R) X\"", "lemma SN_O_comm: \"SN (R O S) \\<longleftrightarrow> SN (S O R)\"", "lemma chain_mono: assumes \"R' \\<subseteq> R\" \"chain R' seq\" shows \"chain R seq\"", "lemma rtrancl_O_push: \"S\\<^sup>* O R \\<subseteq> R O S\\<^sup>*\"", "lemma rtrancl_U_push: \"(S \\<union> R)\\<^sup>* = R\\<^sup>* O S\\<^sup>*\"", "lemma SN_on_O_push:\n  assumes SN: \"SN_on R X\" shows \"SN_on (R O S\\<^sup>*) X\"", "lemma SN_on_Image_push:\n  assumes SN: \"SN_on R X\" shows \"SN_on R (S\\<^sup>* `` X)\"", "lemma not_SN_onI[intro]: \"f 0 \\<in> X \\<Longrightarrow> chain R f \\<Longrightarrow> \\<not> SN_on R X\"", "lemma shift_comp[simp]: \"shift (f \\<circ> seq) n = f \\<circ> (shift seq n)\"", "lemma Id_on_union: \"Id_on (A \\<union> B) = Id_on A \\<union> Id_on B\"", "lemma relpow_union_cases: \"(a,d) \\<in> (A \\<union> B)^^n \\<Longrightarrow> (a,d) \\<in> B^^n \\<or> (\\<exists> b c k m. (a,b) \\<in> B^^k \\<and> (b,c) \\<in> A \\<and> (c,d) \\<in> (A \\<union> B)^^m \\<and> n = Suc (k + m))\"", "lemma trans_refl_imp_rtrancl_id:\n  assumes \"trans r\" \"refl r\"\n  shows \"r\\<^sup>* = r\"", "lemma trans_refl_imp_O_id:\n  assumes \"trans r\" \"refl r\"\n  shows \"r O r = r\"", "lemma relcomp3_I:\n  assumes \"(t, u) \\<in> A\" and \"(s, t) \\<in> B\" and \"(u, v) \\<in> B\"\n  shows \"(s, v) \\<in> B O A O B\"", "lemma relcomp3_transI:\n  assumes \"trans B\" and \"(t, u) \\<in> B O A O B\" and \"(s, t) \\<in> B\" and \"(u, v) \\<in> B\"\n  shows \"(s, v) \\<in> B O A O B\"", "lemmas converse_inward = rtrancl_converse[symmetric] converse_Un converse_UNION converse_relcomp\n  converse_converse converse_Id", "lemma qc_SN_relto_iff:\n  assumes \"r O s \\<subseteq> s O (s \\<union> r)\\<^sup>*\"\n  shows \"SN (r\\<^sup>* O s O r\\<^sup>*) = SN s\"", "lemma conversion_empty [simp]: \"conversion {} = Id\"", "lemma symcl_idemp [simp]: \"(r\\<^sup>\\<leftrightarrow>)\\<^sup>\\<leftrightarrow> = r\\<^sup>\\<leftrightarrow>\""], "translations": [["", "lemma trancl_mono_set:\n  \"r \\<subseteq> s \\<Longrightarrow> r\\<^sup>+ \\<subseteq> s\\<^sup>+\""], ["proof (prove)\ngoal (1 subgoal):\n 1. r \\<subseteq> s \\<Longrightarrow> r\\<^sup>+ \\<subseteq> s\\<^sup>+", "by (blast intro: trancl_mono)"], ["", "lemma relpow_mono:\n  fixes r :: \"'a rel\"\n  assumes \"r \\<subseteq> r'\" shows \"r ^^ n \\<subseteq> r' ^^ n\""], ["proof (prove)\ngoal (1 subgoal):\n 1. r ^^ n \\<subseteq> r' ^^ n", "using assms"], ["proof (prove)\nusing this:\n  r \\<subseteq> r'\n\ngoal (1 subgoal):\n 1. r ^^ n \\<subseteq> r' ^^ n", "by (induct n) auto"], ["", "lemma refl_inv_image:\n  \"refl R \\<Longrightarrow> refl (inv_image R f)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. refl R \\<Longrightarrow> refl (inv_image R f)", "by (simp add: inv_image_def refl_on_def)"], ["", "subsection \\<open>Definitions\\<close>"], ["", "text \\<open>Two elements are \\emph{joinable} (and then have in the joinability relation)\nw.r.t.\\ @{term \"A\"}, iff they have a common reduct.\\<close>"], ["", "definition join :: \"'a rel \\<Rightarrow> 'a rel\"  (\"(_\\<^sup>\\<down>)\" [1000] 999) where\n  \"A\\<^sup>\\<down> = A\\<^sup>* O (A\\<inverse>)\\<^sup>*\""], ["", "text \\<open>Two elements are \\emph{meetable} (and then have in the meetability relation)\nw.r.t.\\ @{term \"A\"}, iff they have a common ancestor.\\<close>"], ["", "definition meet :: \"'a rel \\<Rightarrow> 'a rel\"  (\"(_\\<^sup>\\<up>)\" [1000] 999) where\n  \"A\\<^sup>\\<up> = (A\\<inverse>)\\<^sup>* O A\\<^sup>*\""], ["", "text \\<open>The \\emph{symmetric closure} of a relation allows steps in both directions.\\<close>"], ["", "abbreviation symcl :: \"'a rel \\<Rightarrow> 'a rel\"  (\"(_\\<^sup>\\<leftrightarrow>)\" [1000] 999) where\n  \"A\\<^sup>\\<leftrightarrow> \\<equiv> A \\<union> A\\<inverse>\""], ["", "text \\<open>A \\emph{conversion} is a (possibly empty) sequence of steps in the symmetric closure.\\<close>"], ["", "definition conversion :: \"'a rel \\<Rightarrow> 'a rel\"  (\"(_\\<^sup>\\<leftrightarrow>\\<^sup>*)\" [1000] 999) where\n  \"A\\<^sup>\\<leftrightarrow>\\<^sup>* = (A\\<^sup>\\<leftrightarrow>)\\<^sup>*\""], ["", "text \\<open>The set of \\emph{normal forms} of an ARS constitutes all the elements that do\nnot have any successors.\\<close>"], ["", "definition NF :: \"'a rel \\<Rightarrow> 'a set\" where\n  \"NF A = {a. A `` {a} = {}}\""], ["", "definition normalizability :: \"'a rel \\<Rightarrow> 'a rel\"  (\"(_\\<^sup>!)\" [1000] 999) where\n  \"A\\<^sup>! = {(a, b). (a, b) \\<in> A\\<^sup>* \\<and> b \\<in> NF A}\""], ["", "notation (ASCII)\n  symcl  (\"(_^<->)\" [1000] 999) and\n  conversion  (\"(_^<->*)\" [1000] 999) and\n  normalizability  (\"(_^!)\" [1000] 999)"], ["", "lemma symcl_converse:\n  \"(A\\<^sup>\\<leftrightarrow>)\\<inverse> = A\\<^sup>\\<leftrightarrow>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (A\\<^sup>\\<leftrightarrow>)\\<inverse> = A\\<^sup>\\<leftrightarrow>", "by auto"], ["", "lemma symcl_Un: \"(A \\<union> B)\\<^sup>\\<leftrightarrow> = A\\<^sup>\\<leftrightarrow> \\<union> B\\<^sup>\\<leftrightarrow>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (A \\<union> B)\\<^sup>\\<leftrightarrow> =\n    A\\<^sup>\\<leftrightarrow> \\<union> B\\<^sup>\\<leftrightarrow>", "by auto"], ["", "lemma no_step:\n  assumes \"A `` {a} = {}\" shows \"a \\<in> NF A\""], ["proof (prove)\ngoal (1 subgoal):\n 1. a \\<in> NF A", "using assms"], ["proof (prove)\nusing this:\n  A `` {a} = {}\n\ngoal (1 subgoal):\n 1. a \\<in> NF A", "by (auto simp: NF_def)"], ["", "lemma joinI:\n  \"(a, c) \\<in> A\\<^sup>* \\<Longrightarrow> (b, c) \\<in> A\\<^sup>* \\<Longrightarrow> (a, b) \\<in> A\\<^sup>\\<down>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>(a, c) \\<in> A\\<^sup>*; (b, c) \\<in> A\\<^sup>*\\<rbrakk>\n    \\<Longrightarrow> (a, b) \\<in> A\\<^sup>\\<down>", "by (auto simp: join_def rtrancl_converse)"], ["", "lemma joinI_left:\n  \"(a, b) \\<in> A\\<^sup>* \\<Longrightarrow> (a, b) \\<in> A\\<^sup>\\<down>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (a, b) \\<in> A\\<^sup>* \\<Longrightarrow> (a, b) \\<in> A\\<^sup>\\<down>", "by (auto simp: join_def)"], ["", "lemma joinI_right: \"(b, a) \\<in> A\\<^sup>* \\<Longrightarrow> (a, b) \\<in> A\\<^sup>\\<down>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (b, a) \\<in> A\\<^sup>* \\<Longrightarrow> (a, b) \\<in> A\\<^sup>\\<down>", "by (rule joinI) auto"], ["", "lemma joinE:\n  assumes \"(a, b) \\<in> A\\<^sup>\\<down>\"\n  obtains c where \"(a, c) \\<in> A\\<^sup>*\" and \"(b, c) \\<in> A\\<^sup>*\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>c.\n        \\<lbrakk>(a, c) \\<in> A\\<^sup>*; (b, c) \\<in> A\\<^sup>*\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "using assms"], ["proof (prove)\nusing this:\n  (a, b) \\<in> A\\<^sup>\\<down>\n\ngoal (1 subgoal):\n 1. (\\<And>c.\n        \\<lbrakk>(a, c) \\<in> A\\<^sup>*; (b, c) \\<in> A\\<^sup>*\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by (auto simp: join_def rtrancl_converse)"], ["", "lemma joinD:\n  \"(a, b) \\<in> A\\<^sup>\\<down> \\<Longrightarrow> \\<exists>c. (a, c) \\<in> A\\<^sup>* \\<and> (b, c) \\<in> A\\<^sup>*\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (a, b) \\<in> A\\<^sup>\\<down> \\<Longrightarrow>\n    \\<exists>c. (a, c) \\<in> A\\<^sup>* \\<and> (b, c) \\<in> A\\<^sup>*", "by (blast elim: joinE)"], ["", "lemma meetI:\n  \"(a, b) \\<in> A\\<^sup>* \\<Longrightarrow> (a, c) \\<in> A\\<^sup>* \\<Longrightarrow> (b, c) \\<in> A\\<^sup>\\<up>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>(a, b) \\<in> A\\<^sup>*; (a, c) \\<in> A\\<^sup>*\\<rbrakk>\n    \\<Longrightarrow> (b, c) \\<in> A\\<^sup>\\<up>", "by (auto simp: meet_def rtrancl_converse)"], ["", "lemma meetE:\n  assumes \"(b, c) \\<in> A\\<^sup>\\<up>\"\n  obtains a where \"(a, b) \\<in> A\\<^sup>*\" and \"(a, c) \\<in> A\\<^sup>*\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>a.\n        \\<lbrakk>(a, b) \\<in> A\\<^sup>*; (a, c) \\<in> A\\<^sup>*\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "using assms"], ["proof (prove)\nusing this:\n  (b, c) \\<in> A\\<^sup>\\<up>\n\ngoal (1 subgoal):\n 1. (\\<And>a.\n        \\<lbrakk>(a, b) \\<in> A\\<^sup>*; (a, c) \\<in> A\\<^sup>*\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by (auto simp: meet_def rtrancl_converse)"], ["", "lemma meetD: \"(b, c) \\<in> A\\<^sup>\\<up> \\<Longrightarrow> \\<exists>a. (a, b) \\<in> A\\<^sup>* \\<and> (a, c) \\<in> A\\<^sup>*\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (b, c) \\<in> A\\<^sup>\\<up> \\<Longrightarrow>\n    \\<exists>a. (a, b) \\<in> A\\<^sup>* \\<and> (a, c) \\<in> A\\<^sup>*", "by (blast elim: meetE)"], ["", "lemma conversionI: \"(a, b) \\<in> (A\\<^sup>\\<leftrightarrow>)\\<^sup>* \\<Longrightarrow> (a, b) \\<in> A\\<^sup>\\<leftrightarrow>\\<^sup>*\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (a, b) \\<in> (A\\<^sup>\\<leftrightarrow>)\\<^sup>* \\<Longrightarrow>\n    (a, b) \\<in> A\\<^sup>\\<leftrightarrow>\\<^sup>*", "by (simp add: conversion_def)"], ["", "lemma conversion_refl [simp]: \"(a, a) \\<in> A\\<^sup>\\<leftrightarrow>\\<^sup>*\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (a, a) \\<in> A\\<^sup>\\<leftrightarrow>\\<^sup>*", "by (simp add: conversion_def)"], ["", "lemma conversionI':\n  assumes \"(a, b) \\<in> A\\<^sup>*\" shows \"(a, b) \\<in> A\\<^sup>\\<leftrightarrow>\\<^sup>*\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (a, b) \\<in> A\\<^sup>\\<leftrightarrow>\\<^sup>*", "using assms"], ["proof (prove)\nusing this:\n  (a, b) \\<in> A\\<^sup>*\n\ngoal (1 subgoal):\n 1. (a, b) \\<in> A\\<^sup>\\<leftrightarrow>\\<^sup>*", "proof (induct)"], ["proof (state)\ngoal (2 subgoals):\n 1. (a, a) \\<in> A\\<^sup>\\<leftrightarrow>\\<^sup>*\n 2. \\<And>y z.\n       \\<lbrakk>(a, y) \\<in> A\\<^sup>*; (y, z) \\<in> A;\n        (a, y) \\<in> A\\<^sup>\\<leftrightarrow>\\<^sup>*\\<rbrakk>\n       \\<Longrightarrow> (a, z) \\<in> A\\<^sup>\\<leftrightarrow>\\<^sup>*", "case base"], ["proof (state)\nthis:\n  \n\ngoal (2 subgoals):\n 1. (a, a) \\<in> A\\<^sup>\\<leftrightarrow>\\<^sup>*\n 2. \\<And>y z.\n       \\<lbrakk>(a, y) \\<in> A\\<^sup>*; (y, z) \\<in> A;\n        (a, y) \\<in> A\\<^sup>\\<leftrightarrow>\\<^sup>*\\<rbrakk>\n       \\<Longrightarrow> (a, z) \\<in> A\\<^sup>\\<leftrightarrow>\\<^sup>*", "then"], ["proof (chain)\npicking this:", "show ?case"], ["proof (prove)\ngoal (1 subgoal):\n 1. (a, a) \\<in> A\\<^sup>\\<leftrightarrow>\\<^sup>*", "by simp"], ["proof (state)\nthis:\n  (a, a) \\<in> A\\<^sup>\\<leftrightarrow>\\<^sup>*\n\ngoal (1 subgoal):\n 1. \\<And>y z.\n       \\<lbrakk>(a, y) \\<in> A\\<^sup>*; (y, z) \\<in> A;\n        (a, y) \\<in> A\\<^sup>\\<leftrightarrow>\\<^sup>*\\<rbrakk>\n       \\<Longrightarrow> (a, z) \\<in> A\\<^sup>\\<leftrightarrow>\\<^sup>*", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>y z.\n       \\<lbrakk>(a, y) \\<in> A\\<^sup>*; (y, z) \\<in> A;\n        (a, y) \\<in> A\\<^sup>\\<leftrightarrow>\\<^sup>*\\<rbrakk>\n       \\<Longrightarrow> (a, z) \\<in> A\\<^sup>\\<leftrightarrow>\\<^sup>*", "case (step b c)"], ["proof (state)\nthis:\n  (a, b) \\<in> A\\<^sup>*\n  (b, c) \\<in> A\n  (a, b) \\<in> A\\<^sup>\\<leftrightarrow>\\<^sup>*\n\ngoal (1 subgoal):\n 1. \\<And>y z.\n       \\<lbrakk>(a, y) \\<in> A\\<^sup>*; (y, z) \\<in> A;\n        (a, y) \\<in> A\\<^sup>\\<leftrightarrow>\\<^sup>*\\<rbrakk>\n       \\<Longrightarrow> (a, z) \\<in> A\\<^sup>\\<leftrightarrow>\\<^sup>*", "then"], ["proof (chain)\npicking this:\n  (a, b) \\<in> A\\<^sup>*\n  (b, c) \\<in> A\n  (a, b) \\<in> A\\<^sup>\\<leftrightarrow>\\<^sup>*", "have \"(b, c) \\<in> A\\<^sup>\\<leftrightarrow>\""], ["proof (prove)\nusing this:\n  (a, b) \\<in> A\\<^sup>*\n  (b, c) \\<in> A\n  (a, b) \\<in> A\\<^sup>\\<leftrightarrow>\\<^sup>*\n\ngoal (1 subgoal):\n 1. (b, c) \\<in> A\\<^sup>\\<leftrightarrow>", "by simp"], ["proof (state)\nthis:\n  (b, c) \\<in> A\\<^sup>\\<leftrightarrow>\n\ngoal (1 subgoal):\n 1. \\<And>y z.\n       \\<lbrakk>(a, y) \\<in> A\\<^sup>*; (y, z) \\<in> A;\n        (a, y) \\<in> A\\<^sup>\\<leftrightarrow>\\<^sup>*\\<rbrakk>\n       \\<Longrightarrow> (a, z) \\<in> A\\<^sup>\\<leftrightarrow>\\<^sup>*", "with \\<open>(a, b) \\<in> A\\<^sup>\\<leftrightarrow>\\<^sup>*\\<close>"], ["proof (chain)\npicking this:\n  (a, b) \\<in> A\\<^sup>\\<leftrightarrow>\\<^sup>*\n  (b, c) \\<in> A\\<^sup>\\<leftrightarrow>", "show ?case"], ["proof (prove)\nusing this:\n  (a, b) \\<in> A\\<^sup>\\<leftrightarrow>\\<^sup>*\n  (b, c) \\<in> A\\<^sup>\\<leftrightarrow>\n\ngoal (1 subgoal):\n 1. (a, c) \\<in> A\\<^sup>\\<leftrightarrow>\\<^sup>*", "unfolding conversion_def"], ["proof (prove)\nusing this:\n  (a, b) \\<in> (A\\<^sup>\\<leftrightarrow>)\\<^sup>*\n  (b, c) \\<in> A\\<^sup>\\<leftrightarrow>\n\ngoal (1 subgoal):\n 1. (a, c) \\<in> (A\\<^sup>\\<leftrightarrow>)\\<^sup>*", "by (rule rtrancl.intros)"], ["proof (state)\nthis:\n  (a, c) \\<in> A\\<^sup>\\<leftrightarrow>\\<^sup>*\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma rtrancl_comp_trancl_conv:\n  \"r\\<^sup>* O r = r\\<^sup>+\""], ["proof (prove)\ngoal (1 subgoal):\n 1. r\\<^sup>* O r = r\\<^sup>+", "by regexp"], ["", "lemma trancl_o_refl_is_trancl:\n  \"r\\<^sup>+ O r\\<^sup>= = r\\<^sup>+\""], ["proof (prove)\ngoal (1 subgoal):\n 1. r\\<^sup>+ O r\\<^sup>= = r\\<^sup>+", "by regexp"], ["", "lemma conversionE:\n  \"(a, b) \\<in> A\\<^sup>\\<leftrightarrow>\\<^sup>* \\<Longrightarrow> ((a, b) \\<in> (A\\<^sup>\\<leftrightarrow>)\\<^sup>* \\<Longrightarrow> P) \\<Longrightarrow> P\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>(a, b) \\<in> A\\<^sup>\\<leftrightarrow>\\<^sup>*;\n     (a, b) \\<in> (A\\<^sup>\\<leftrightarrow>)\\<^sup>* \\<Longrightarrow>\n     P\\<rbrakk>\n    \\<Longrightarrow> P", "by (simp add: conversion_def)"], ["", "text \\<open>Later declarations are tried first for `proof' and `rule,' then have the ``main''\nintroduction\\,/\\, elimination rules for constants should be declared last.\\<close>"], ["", "declare joinI_left [intro]"], ["", "declare joinI_right [intro]"], ["", "declare joinI [intro]"], ["", "declare joinD [dest]"], ["", "declare joinE [elim]"], ["", "declare meetI [intro]"], ["", "declare meetD [dest]"], ["", "declare meetE [elim]"], ["", "declare conversionI' [intro]"], ["", "declare conversionI [intro]"], ["", "declare conversionE [elim]"], ["", "lemma conversion_trans:\n  \"trans (A\\<^sup>\\<leftrightarrow>\\<^sup>*)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. trans (A\\<^sup>\\<leftrightarrow>\\<^sup>*)", "unfolding trans_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>x y z.\n       (x, y) \\<in> A\\<^sup>\\<leftrightarrow>\\<^sup>* \\<longrightarrow>\n       (y, z) \\<in> A\\<^sup>\\<leftrightarrow>\\<^sup>* \\<longrightarrow>\n       (x, z) \\<in> A\\<^sup>\\<leftrightarrow>\\<^sup>*", "proof (intro allI impI)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x y z.\n       \\<lbrakk>(x, y) \\<in> A\\<^sup>\\<leftrightarrow>\\<^sup>*;\n        (y, z) \\<in> A\\<^sup>\\<leftrightarrow>\\<^sup>*\\<rbrakk>\n       \\<Longrightarrow> (x, z) \\<in> A\\<^sup>\\<leftrightarrow>\\<^sup>*", "fix a b c"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x y z.\n       \\<lbrakk>(x, y) \\<in> A\\<^sup>\\<leftrightarrow>\\<^sup>*;\n        (y, z) \\<in> A\\<^sup>\\<leftrightarrow>\\<^sup>*\\<rbrakk>\n       \\<Longrightarrow> (x, z) \\<in> A\\<^sup>\\<leftrightarrow>\\<^sup>*", "assume \"(a, b) \\<in> A\\<^sup>\\<leftrightarrow>\\<^sup>*\" and \"(b, c) \\<in> A\\<^sup>\\<leftrightarrow>\\<^sup>*\""], ["proof (state)\nthis:\n  (a, b) \\<in> A\\<^sup>\\<leftrightarrow>\\<^sup>*\n  (b, c) \\<in> A\\<^sup>\\<leftrightarrow>\\<^sup>*\n\ngoal (1 subgoal):\n 1. \\<And>x y z.\n       \\<lbrakk>(x, y) \\<in> A\\<^sup>\\<leftrightarrow>\\<^sup>*;\n        (y, z) \\<in> A\\<^sup>\\<leftrightarrow>\\<^sup>*\\<rbrakk>\n       \\<Longrightarrow> (x, z) \\<in> A\\<^sup>\\<leftrightarrow>\\<^sup>*", "then"], ["proof (chain)\npicking this:\n  (a, b) \\<in> A\\<^sup>\\<leftrightarrow>\\<^sup>*\n  (b, c) \\<in> A\\<^sup>\\<leftrightarrow>\\<^sup>*", "show \"(a, c) \\<in> A\\<^sup>\\<leftrightarrow>\\<^sup>*\""], ["proof (prove)\nusing this:\n  (a, b) \\<in> A\\<^sup>\\<leftrightarrow>\\<^sup>*\n  (b, c) \\<in> A\\<^sup>\\<leftrightarrow>\\<^sup>*\n\ngoal (1 subgoal):\n 1. (a, c) \\<in> A\\<^sup>\\<leftrightarrow>\\<^sup>*", "unfolding conversion_def"], ["proof (prove)\nusing this:\n  (a, b) \\<in> (A\\<^sup>\\<leftrightarrow>)\\<^sup>*\n  (b, c) \\<in> (A\\<^sup>\\<leftrightarrow>)\\<^sup>*\n\ngoal (1 subgoal):\n 1. (a, c) \\<in> (A\\<^sup>\\<leftrightarrow>)\\<^sup>*", "proof (induct)"], ["proof (state)\ngoal (2 subgoals):\n 1. (a, c) \\<in> (A\\<^sup>\\<leftrightarrow>)\\<^sup>* \\<Longrightarrow>\n    (a, c) \\<in> (A\\<^sup>\\<leftrightarrow>)\\<^sup>*\n 2. \\<And>y z.\n       \\<lbrakk>(a, y) \\<in> (A\\<^sup>\\<leftrightarrow>)\\<^sup>*;\n        (y, z) \\<in> A\\<^sup>\\<leftrightarrow>;\n        (y, c) \\<in> (A\\<^sup>\\<leftrightarrow>)\\<^sup>* \\<Longrightarrow>\n        (a, c) \\<in> (A\\<^sup>\\<leftrightarrow>)\\<^sup>*;\n        (z, c) \\<in> (A\\<^sup>\\<leftrightarrow>)\\<^sup>*\\<rbrakk>\n       \\<Longrightarrow> (a, c) \\<in> (A\\<^sup>\\<leftrightarrow>)\\<^sup>*", "case base"], ["proof (state)\nthis:\n  (a, c) \\<in> (A\\<^sup>\\<leftrightarrow>)\\<^sup>*\n\ngoal (2 subgoals):\n 1. (a, c) \\<in> (A\\<^sup>\\<leftrightarrow>)\\<^sup>* \\<Longrightarrow>\n    (a, c) \\<in> (A\\<^sup>\\<leftrightarrow>)\\<^sup>*\n 2. \\<And>y z.\n       \\<lbrakk>(a, y) \\<in> (A\\<^sup>\\<leftrightarrow>)\\<^sup>*;\n        (y, z) \\<in> A\\<^sup>\\<leftrightarrow>;\n        (y, c) \\<in> (A\\<^sup>\\<leftrightarrow>)\\<^sup>* \\<Longrightarrow>\n        (a, c) \\<in> (A\\<^sup>\\<leftrightarrow>)\\<^sup>*;\n        (z, c) \\<in> (A\\<^sup>\\<leftrightarrow>)\\<^sup>*\\<rbrakk>\n       \\<Longrightarrow> (a, c) \\<in> (A\\<^sup>\\<leftrightarrow>)\\<^sup>*", "then"], ["proof (chain)\npicking this:\n  (a, c) \\<in> (A\\<^sup>\\<leftrightarrow>)\\<^sup>*", "show ?case"], ["proof (prove)\nusing this:\n  (a, c) \\<in> (A\\<^sup>\\<leftrightarrow>)\\<^sup>*\n\ngoal (1 subgoal):\n 1. (a, c) \\<in> (A\\<^sup>\\<leftrightarrow>)\\<^sup>*", "by simp"], ["proof (state)\nthis:\n  (a, c) \\<in> (A\\<^sup>\\<leftrightarrow>)\\<^sup>*\n\ngoal (1 subgoal):\n 1. \\<And>y z.\n       \\<lbrakk>(a, y) \\<in> (A\\<^sup>\\<leftrightarrow>)\\<^sup>*;\n        (y, z) \\<in> A\\<^sup>\\<leftrightarrow>;\n        (y, c) \\<in> (A\\<^sup>\\<leftrightarrow>)\\<^sup>* \\<Longrightarrow>\n        (a, c) \\<in> (A\\<^sup>\\<leftrightarrow>)\\<^sup>*;\n        (z, c) \\<in> (A\\<^sup>\\<leftrightarrow>)\\<^sup>*\\<rbrakk>\n       \\<Longrightarrow> (a, c) \\<in> (A\\<^sup>\\<leftrightarrow>)\\<^sup>*", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>y z.\n       \\<lbrakk>(a, y) \\<in> (A\\<^sup>\\<leftrightarrow>)\\<^sup>*;\n        (y, z) \\<in> A\\<^sup>\\<leftrightarrow>;\n        (y, c) \\<in> (A\\<^sup>\\<leftrightarrow>)\\<^sup>* \\<Longrightarrow>\n        (a, c) \\<in> (A\\<^sup>\\<leftrightarrow>)\\<^sup>*;\n        (z, c) \\<in> (A\\<^sup>\\<leftrightarrow>)\\<^sup>*\\<rbrakk>\n       \\<Longrightarrow> (a, c) \\<in> (A\\<^sup>\\<leftrightarrow>)\\<^sup>*", "case (step b c')"], ["proof (state)\nthis:\n  (a, b) \\<in> (A\\<^sup>\\<leftrightarrow>)\\<^sup>*\n  (b, c') \\<in> A\\<^sup>\\<leftrightarrow>\n  (b, c) \\<in> (A\\<^sup>\\<leftrightarrow>)\\<^sup>* \\<Longrightarrow>\n  (a, c) \\<in> (A\\<^sup>\\<leftrightarrow>)\\<^sup>*\n  (c', c) \\<in> (A\\<^sup>\\<leftrightarrow>)\\<^sup>*\n\ngoal (1 subgoal):\n 1. \\<And>y z.\n       \\<lbrakk>(a, y) \\<in> (A\\<^sup>\\<leftrightarrow>)\\<^sup>*;\n        (y, z) \\<in> A\\<^sup>\\<leftrightarrow>;\n        (y, c) \\<in> (A\\<^sup>\\<leftrightarrow>)\\<^sup>* \\<Longrightarrow>\n        (a, c) \\<in> (A\\<^sup>\\<leftrightarrow>)\\<^sup>*;\n        (z, c) \\<in> (A\\<^sup>\\<leftrightarrow>)\\<^sup>*\\<rbrakk>\n       \\<Longrightarrow> (a, c) \\<in> (A\\<^sup>\\<leftrightarrow>)\\<^sup>*", "from \\<open>(b, c') \\<in> A\\<^sup>\\<leftrightarrow>\\<close> and \\<open>(c', c) \\<in> (A\\<^sup>\\<leftrightarrow>)\\<^sup>*\\<close>"], ["proof (chain)\npicking this:\n  (b, c') \\<in> A\\<^sup>\\<leftrightarrow>\n  (c', c) \\<in> (A\\<^sup>\\<leftrightarrow>)\\<^sup>*", "have \"(b, c) \\<in> (A\\<^sup>\\<leftrightarrow>)\\<^sup>*\""], ["proof (prove)\nusing this:\n  (b, c') \\<in> A\\<^sup>\\<leftrightarrow>\n  (c', c) \\<in> (A\\<^sup>\\<leftrightarrow>)\\<^sup>*\n\ngoal (1 subgoal):\n 1. (b, c) \\<in> (A\\<^sup>\\<leftrightarrow>)\\<^sup>*", "by (rule converse_rtrancl_into_rtrancl)"], ["proof (state)\nthis:\n  (b, c) \\<in> (A\\<^sup>\\<leftrightarrow>)\\<^sup>*\n\ngoal (1 subgoal):\n 1. \\<And>y z.\n       \\<lbrakk>(a, y) \\<in> (A\\<^sup>\\<leftrightarrow>)\\<^sup>*;\n        (y, z) \\<in> A\\<^sup>\\<leftrightarrow>;\n        (y, c) \\<in> (A\\<^sup>\\<leftrightarrow>)\\<^sup>* \\<Longrightarrow>\n        (a, c) \\<in> (A\\<^sup>\\<leftrightarrow>)\\<^sup>*;\n        (z, c) \\<in> (A\\<^sup>\\<leftrightarrow>)\\<^sup>*\\<rbrakk>\n       \\<Longrightarrow> (a, c) \\<in> (A\\<^sup>\\<leftrightarrow>)\\<^sup>*", "with step"], ["proof (chain)\npicking this:\n  (a, b) \\<in> (A\\<^sup>\\<leftrightarrow>)\\<^sup>*\n  (b, c') \\<in> A\\<^sup>\\<leftrightarrow>\n  (b, c) \\<in> (A\\<^sup>\\<leftrightarrow>)\\<^sup>* \\<Longrightarrow>\n  (a, c) \\<in> (A\\<^sup>\\<leftrightarrow>)\\<^sup>*\n  (c', c) \\<in> (A\\<^sup>\\<leftrightarrow>)\\<^sup>*\n  (b, c) \\<in> (A\\<^sup>\\<leftrightarrow>)\\<^sup>*", "show ?case"], ["proof (prove)\nusing this:\n  (a, b) \\<in> (A\\<^sup>\\<leftrightarrow>)\\<^sup>*\n  (b, c') \\<in> A\\<^sup>\\<leftrightarrow>\n  (b, c) \\<in> (A\\<^sup>\\<leftrightarrow>)\\<^sup>* \\<Longrightarrow>\n  (a, c) \\<in> (A\\<^sup>\\<leftrightarrow>)\\<^sup>*\n  (c', c) \\<in> (A\\<^sup>\\<leftrightarrow>)\\<^sup>*\n  (b, c) \\<in> (A\\<^sup>\\<leftrightarrow>)\\<^sup>*\n\ngoal (1 subgoal):\n 1. (a, c) \\<in> (A\\<^sup>\\<leftrightarrow>)\\<^sup>*", "by simp"], ["proof (state)\nthis:\n  (a, c) \\<in> (A\\<^sup>\\<leftrightarrow>)\\<^sup>*\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  (a, c) \\<in> A\\<^sup>\\<leftrightarrow>\\<^sup>*\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma conversion_sym:\n  \"sym (A\\<^sup>\\<leftrightarrow>\\<^sup>*)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. sym (A\\<^sup>\\<leftrightarrow>\\<^sup>*)", "unfolding sym_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>x y.\n       (x, y) \\<in> A\\<^sup>\\<leftrightarrow>\\<^sup>* \\<longrightarrow>\n       (y, x) \\<in> A\\<^sup>\\<leftrightarrow>\\<^sup>*", "proof (intro allI impI)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x y.\n       (x, y) \\<in> A\\<^sup>\\<leftrightarrow>\\<^sup>* \\<Longrightarrow>\n       (y, x) \\<in> A\\<^sup>\\<leftrightarrow>\\<^sup>*", "fix a b"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x y.\n       (x, y) \\<in> A\\<^sup>\\<leftrightarrow>\\<^sup>* \\<Longrightarrow>\n       (y, x) \\<in> A\\<^sup>\\<leftrightarrow>\\<^sup>*", "assume \"(a, b) \\<in> A\\<^sup>\\<leftrightarrow>\\<^sup>*\""], ["proof (state)\nthis:\n  (a, b) \\<in> A\\<^sup>\\<leftrightarrow>\\<^sup>*\n\ngoal (1 subgoal):\n 1. \\<And>x y.\n       (x, y) \\<in> A\\<^sup>\\<leftrightarrow>\\<^sup>* \\<Longrightarrow>\n       (y, x) \\<in> A\\<^sup>\\<leftrightarrow>\\<^sup>*", "then"], ["proof (chain)\npicking this:\n  (a, b) \\<in> A\\<^sup>\\<leftrightarrow>\\<^sup>*", "show \"(b, a) \\<in> A\\<^sup>\\<leftrightarrow>\\<^sup>*\""], ["proof (prove)\nusing this:\n  (a, b) \\<in> A\\<^sup>\\<leftrightarrow>\\<^sup>*\n\ngoal (1 subgoal):\n 1. (b, a) \\<in> A\\<^sup>\\<leftrightarrow>\\<^sup>*", "unfolding conversion_def"], ["proof (prove)\nusing this:\n  (a, b) \\<in> (A\\<^sup>\\<leftrightarrow>)\\<^sup>*\n\ngoal (1 subgoal):\n 1. (b, a) \\<in> (A\\<^sup>\\<leftrightarrow>)\\<^sup>*", "proof (induct)"], ["proof (state)\ngoal (2 subgoals):\n 1. (a, a) \\<in> (A\\<^sup>\\<leftrightarrow>)\\<^sup>*\n 2. \\<And>y z.\n       \\<lbrakk>(a, y) \\<in> (A\\<^sup>\\<leftrightarrow>)\\<^sup>*;\n        (y, z) \\<in> A\\<^sup>\\<leftrightarrow>;\n        (y, a) \\<in> (A\\<^sup>\\<leftrightarrow>)\\<^sup>*\\<rbrakk>\n       \\<Longrightarrow> (z, a) \\<in> (A\\<^sup>\\<leftrightarrow>)\\<^sup>*", "case base"], ["proof (state)\nthis:\n  \n\ngoal (2 subgoals):\n 1. (a, a) \\<in> (A\\<^sup>\\<leftrightarrow>)\\<^sup>*\n 2. \\<And>y z.\n       \\<lbrakk>(a, y) \\<in> (A\\<^sup>\\<leftrightarrow>)\\<^sup>*;\n        (y, z) \\<in> A\\<^sup>\\<leftrightarrow>;\n        (y, a) \\<in> (A\\<^sup>\\<leftrightarrow>)\\<^sup>*\\<rbrakk>\n       \\<Longrightarrow> (z, a) \\<in> (A\\<^sup>\\<leftrightarrow>)\\<^sup>*", "then"], ["proof (chain)\npicking this:", "show ?case"], ["proof (prove)\ngoal (1 subgoal):\n 1. (a, a) \\<in> (A\\<^sup>\\<leftrightarrow>)\\<^sup>*", "by simp"], ["proof (state)\nthis:\n  (a, a) \\<in> (A\\<^sup>\\<leftrightarrow>)\\<^sup>*\n\ngoal (1 subgoal):\n 1. \\<And>y z.\n       \\<lbrakk>(a, y) \\<in> (A\\<^sup>\\<leftrightarrow>)\\<^sup>*;\n        (y, z) \\<in> A\\<^sup>\\<leftrightarrow>;\n        (y, a) \\<in> (A\\<^sup>\\<leftrightarrow>)\\<^sup>*\\<rbrakk>\n       \\<Longrightarrow> (z, a) \\<in> (A\\<^sup>\\<leftrightarrow>)\\<^sup>*", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>y z.\n       \\<lbrakk>(a, y) \\<in> (A\\<^sup>\\<leftrightarrow>)\\<^sup>*;\n        (y, z) \\<in> A\\<^sup>\\<leftrightarrow>;\n        (y, a) \\<in> (A\\<^sup>\\<leftrightarrow>)\\<^sup>*\\<rbrakk>\n       \\<Longrightarrow> (z, a) \\<in> (A\\<^sup>\\<leftrightarrow>)\\<^sup>*", "case (step b c)"], ["proof (state)\nthis:\n  (a, b) \\<in> (A\\<^sup>\\<leftrightarrow>)\\<^sup>*\n  (b, c) \\<in> A\\<^sup>\\<leftrightarrow>\n  (b, a) \\<in> (A\\<^sup>\\<leftrightarrow>)\\<^sup>*\n\ngoal (1 subgoal):\n 1. \\<And>y z.\n       \\<lbrakk>(a, y) \\<in> (A\\<^sup>\\<leftrightarrow>)\\<^sup>*;\n        (y, z) \\<in> A\\<^sup>\\<leftrightarrow>;\n        (y, a) \\<in> (A\\<^sup>\\<leftrightarrow>)\\<^sup>*\\<rbrakk>\n       \\<Longrightarrow> (z, a) \\<in> (A\\<^sup>\\<leftrightarrow>)\\<^sup>*", "then"], ["proof (chain)\npicking this:\n  (a, b) \\<in> (A\\<^sup>\\<leftrightarrow>)\\<^sup>*\n  (b, c) \\<in> A\\<^sup>\\<leftrightarrow>\n  (b, a) \\<in> (A\\<^sup>\\<leftrightarrow>)\\<^sup>*", "have \"(c, b) \\<in> A\\<^sup>\\<leftrightarrow>\""], ["proof (prove)\nusing this:\n  (a, b) \\<in> (A\\<^sup>\\<leftrightarrow>)\\<^sup>*\n  (b, c) \\<in> A\\<^sup>\\<leftrightarrow>\n  (b, a) \\<in> (A\\<^sup>\\<leftrightarrow>)\\<^sup>*\n\ngoal (1 subgoal):\n 1. (c, b) \\<in> A\\<^sup>\\<leftrightarrow>", "by blast"], ["proof (state)\nthis:\n  (c, b) \\<in> A\\<^sup>\\<leftrightarrow>\n\ngoal (1 subgoal):\n 1. \\<And>y z.\n       \\<lbrakk>(a, y) \\<in> (A\\<^sup>\\<leftrightarrow>)\\<^sup>*;\n        (y, z) \\<in> A\\<^sup>\\<leftrightarrow>;\n        (y, a) \\<in> (A\\<^sup>\\<leftrightarrow>)\\<^sup>*\\<rbrakk>\n       \\<Longrightarrow> (z, a) \\<in> (A\\<^sup>\\<leftrightarrow>)\\<^sup>*", "from \\<open>(c, b) \\<in> A\\<^sup>\\<leftrightarrow>\\<close> and \\<open>(b, a) \\<in> (A\\<^sup>\\<leftrightarrow>)\\<^sup>*\\<close>"], ["proof (chain)\npicking this:\n  (c, b) \\<in> A\\<^sup>\\<leftrightarrow>\n  (b, a) \\<in> (A\\<^sup>\\<leftrightarrow>)\\<^sup>*", "show ?case"], ["proof (prove)\nusing this:\n  (c, b) \\<in> A\\<^sup>\\<leftrightarrow>\n  (b, a) \\<in> (A\\<^sup>\\<leftrightarrow>)\\<^sup>*\n\ngoal (1 subgoal):\n 1. (c, a) \\<in> (A\\<^sup>\\<leftrightarrow>)\\<^sup>*", "by (rule converse_rtrancl_into_rtrancl)"], ["proof (state)\nthis:\n  (c, a) \\<in> (A\\<^sup>\\<leftrightarrow>)\\<^sup>*\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  (b, a) \\<in> A\\<^sup>\\<leftrightarrow>\\<^sup>*\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma conversion_inv:\n  \"(x, y) \\<in> R\\<^sup>\\<leftrightarrow>\\<^sup>* \\<longleftrightarrow> (y, x) \\<in> R\\<^sup>\\<leftrightarrow>\\<^sup>*\""], ["proof (prove)\ngoal (1 subgoal):\n 1. ((x, y) \\<in> R\\<^sup>\\<leftrightarrow>\\<^sup>*) =\n    ((y, x) \\<in> R\\<^sup>\\<leftrightarrow>\\<^sup>*)", "by (auto simp: conversion_def)\n     (metis (full_types) rtrancl_converseD symcl_converse)+"], ["", "lemma conversion_converse [simp]:\n  \"(A\\<^sup>\\<leftrightarrow>\\<^sup>*)\\<inverse> = A\\<^sup>\\<leftrightarrow>\\<^sup>*\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (A\\<^sup>\\<leftrightarrow>\\<^sup>*)\\<inverse> =\n    A\\<^sup>\\<leftrightarrow>\\<^sup>*", "by (metis conversion_sym sym_conv_converse_eq)"], ["", "lemma conversion_rtrancl [simp]:\n  \"(A\\<^sup>\\<leftrightarrow>\\<^sup>*)\\<^sup>* = A\\<^sup>\\<leftrightarrow>\\<^sup>*\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (A\\<^sup>\\<leftrightarrow>\\<^sup>*)\\<^sup>* =\n    A\\<^sup>\\<leftrightarrow>\\<^sup>*", "by (metis conversion_def rtrancl_idemp)"], ["", "lemma rtrancl_join_join:\n  assumes \"(a, b) \\<in> A\\<^sup>*\" and \"(b, c) \\<in> A\\<^sup>\\<down>\" shows \"(a, c) \\<in> A\\<^sup>\\<down>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (a, c) \\<in> A\\<^sup>\\<down>", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. (a, c) \\<in> A\\<^sup>\\<down>", "from \\<open>(b, c) \\<in> A\\<^sup>\\<down>\\<close>"], ["proof (chain)\npicking this:\n  (b, c) \\<in> A\\<^sup>\\<down>", "obtain b' where \"(b, b') \\<in> A\\<^sup>*\" and \"(b', c) \\<in> (A\\<inverse>)\\<^sup>*\""], ["proof (prove)\nusing this:\n  (b, c) \\<in> A\\<^sup>\\<down>\n\ngoal (1 subgoal):\n 1. (\\<And>b'.\n        \\<lbrakk>(b, b') \\<in> A\\<^sup>*;\n         (b', c) \\<in> (A\\<inverse>)\\<^sup>*\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "unfolding join_def"], ["proof (prove)\nusing this:\n  (b, c) \\<in> A\\<^sup>* O (A\\<inverse>)\\<^sup>*\n\ngoal (1 subgoal):\n 1. (\\<And>b'.\n        \\<lbrakk>(b, b') \\<in> A\\<^sup>*;\n         (b', c) \\<in> (A\\<inverse>)\\<^sup>*\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by blast"], ["proof (state)\nthis:\n  (b, b') \\<in> A\\<^sup>*\n  (b', c) \\<in> (A\\<inverse>)\\<^sup>*\n\ngoal (1 subgoal):\n 1. (a, c) \\<in> A\\<^sup>\\<down>", "with \\<open>(a, b) \\<in> A\\<^sup>*\\<close>"], ["proof (chain)\npicking this:\n  (a, b) \\<in> A\\<^sup>*\n  (b, b') \\<in> A\\<^sup>*\n  (b', c) \\<in> (A\\<inverse>)\\<^sup>*", "have \"(a, b') \\<in> A\\<^sup>*\""], ["proof (prove)\nusing this:\n  (a, b) \\<in> A\\<^sup>*\n  (b, b') \\<in> A\\<^sup>*\n  (b', c) \\<in> (A\\<inverse>)\\<^sup>*\n\ngoal (1 subgoal):\n 1. (a, b') \\<in> A\\<^sup>*", "by simp"], ["proof (state)\nthis:\n  (a, b') \\<in> A\\<^sup>*\n\ngoal (1 subgoal):\n 1. (a, c) \\<in> A\\<^sup>\\<down>", "with \\<open>(b', c) \\<in> (A\\<inverse>)\\<^sup>*\\<close>"], ["proof (chain)\npicking this:\n  (b', c) \\<in> (A\\<inverse>)\\<^sup>*\n  (a, b') \\<in> A\\<^sup>*", "show ?thesis"], ["proof (prove)\nusing this:\n  (b', c) \\<in> (A\\<inverse>)\\<^sup>*\n  (a, b') \\<in> A\\<^sup>*\n\ngoal (1 subgoal):\n 1. (a, c) \\<in> A\\<^sup>\\<down>", "unfolding join_def"], ["proof (prove)\nusing this:\n  (b', c) \\<in> (A\\<inverse>)\\<^sup>*\n  (a, b') \\<in> A\\<^sup>*\n\ngoal (1 subgoal):\n 1. (a, c) \\<in> A\\<^sup>* O (A\\<inverse>)\\<^sup>*", "by blast"], ["proof (state)\nthis:\n  (a, c) \\<in> A\\<^sup>\\<down>\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma join_rtrancl_join:\n  assumes \"(a, b) \\<in> A\\<^sup>\\<down>\" and \"(c, b) \\<in> A\\<^sup>*\" shows \"(a, c) \\<in> A\\<^sup>\\<down>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (a, c) \\<in> A\\<^sup>\\<down>", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. (a, c) \\<in> A\\<^sup>\\<down>", "from \\<open>(c, b) \\<in> A\\<^sup>*\\<close>"], ["proof (chain)\npicking this:\n  (c, b) \\<in> A\\<^sup>*", "have \"(b, c) \\<in> (A\\<inverse>)\\<^sup>*\""], ["proof (prove)\nusing this:\n  (c, b) \\<in> A\\<^sup>*\n\ngoal (1 subgoal):\n 1. (b, c) \\<in> (A\\<inverse>)\\<^sup>*", "unfolding rtrancl_converse"], ["proof (prove)\nusing this:\n  (c, b) \\<in> A\\<^sup>*\n\ngoal (1 subgoal):\n 1. (b, c) \\<in> (A\\<^sup>*)\\<inverse>", "by simp"], ["proof (state)\nthis:\n  (b, c) \\<in> (A\\<inverse>)\\<^sup>*\n\ngoal (1 subgoal):\n 1. (a, c) \\<in> A\\<^sup>\\<down>", "from \\<open>(a, b) \\<in> A\\<^sup>\\<down>\\<close>"], ["proof (chain)\npicking this:\n  (a, b) \\<in> A\\<^sup>\\<down>", "obtain a' where \"(a, a') \\<in> A\\<^sup>*\" and \"(a', b) \\<in> (A\\<inverse>)\\<^sup>*\""], ["proof (prove)\nusing this:\n  (a, b) \\<in> A\\<^sup>\\<down>\n\ngoal (1 subgoal):\n 1. (\\<And>a'.\n        \\<lbrakk>(a, a') \\<in> A\\<^sup>*;\n         (a', b) \\<in> (A\\<inverse>)\\<^sup>*\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "unfolding join_def"], ["proof (prove)\nusing this:\n  (a, b) \\<in> A\\<^sup>* O (A\\<inverse>)\\<^sup>*\n\ngoal (1 subgoal):\n 1. (\\<And>a'.\n        \\<lbrakk>(a, a') \\<in> A\\<^sup>*;\n         (a', b) \\<in> (A\\<inverse>)\\<^sup>*\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by best"], ["proof (state)\nthis:\n  (a, a') \\<in> A\\<^sup>*\n  (a', b) \\<in> (A\\<inverse>)\\<^sup>*\n\ngoal (1 subgoal):\n 1. (a, c) \\<in> A\\<^sup>\\<down>", "with \\<open>(b, c) \\<in> (A\\<inverse>)\\<^sup>*\\<close>"], ["proof (chain)\npicking this:\n  (b, c) \\<in> (A\\<inverse>)\\<^sup>*\n  (a, a') \\<in> A\\<^sup>*\n  (a', b) \\<in> (A\\<inverse>)\\<^sup>*", "have \"(a', c) \\<in> (A\\<inverse>)\\<^sup>*\""], ["proof (prove)\nusing this:\n  (b, c) \\<in> (A\\<inverse>)\\<^sup>*\n  (a, a') \\<in> A\\<^sup>*\n  (a', b) \\<in> (A\\<inverse>)\\<^sup>*\n\ngoal (1 subgoal):\n 1. (a', c) \\<in> (A\\<inverse>)\\<^sup>*", "by simp"], ["proof (state)\nthis:\n  (a', c) \\<in> (A\\<inverse>)\\<^sup>*\n\ngoal (1 subgoal):\n 1. (a, c) \\<in> A\\<^sup>\\<down>", "with \\<open>(a, a') \\<in> A\\<^sup>*\\<close>"], ["proof (chain)\npicking this:\n  (a, a') \\<in> A\\<^sup>*\n  (a', c) \\<in> (A\\<inverse>)\\<^sup>*", "show ?thesis"], ["proof (prove)\nusing this:\n  (a, a') \\<in> A\\<^sup>*\n  (a', c) \\<in> (A\\<inverse>)\\<^sup>*\n\ngoal (1 subgoal):\n 1. (a, c) \\<in> A\\<^sup>\\<down>", "unfolding join_def"], ["proof (prove)\nusing this:\n  (a, a') \\<in> A\\<^sup>*\n  (a', c) \\<in> (A\\<inverse>)\\<^sup>*\n\ngoal (1 subgoal):\n 1. (a, c) \\<in> A\\<^sup>* O (A\\<inverse>)\\<^sup>*", "by blast"], ["proof (state)\nthis:\n  (a, c) \\<in> A\\<^sup>\\<down>\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma NF_I: \"(\\<And>b. (a, b) \\<notin> A) \\<Longrightarrow> a \\<in> NF A\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>b. (a, b) \\<notin> A) \\<Longrightarrow> a \\<in> NF A", "by (auto intro: no_step)"], ["", "lemma NF_E: \"a \\<in> NF A \\<Longrightarrow> ((a, b) \\<notin> A \\<Longrightarrow> P) \\<Longrightarrow> P\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>a \\<in> NF A; (a, b) \\<notin> A \\<Longrightarrow> P\\<rbrakk>\n    \\<Longrightarrow> P", "by (auto simp: NF_def)"], ["", "declare NF_I [intro]"], ["", "declare NF_E [elim]"], ["", "lemma NF_no_step: \"a \\<in> NF A \\<Longrightarrow> \\<forall>b. (a, b) \\<notin> A\""], ["proof (prove)\ngoal (1 subgoal):\n 1. a \\<in> NF A \\<Longrightarrow> \\<forall>b. (a, b) \\<notin> A", "by auto"], ["", "lemma NF_anti_mono:\n  assumes \"A \\<subseteq> B\" shows \"NF B \\<subseteq> NF A\""], ["proof (prove)\ngoal (1 subgoal):\n 1. NF B \\<subseteq> NF A", "using assms"], ["proof (prove)\nusing this:\n  A \\<subseteq> B\n\ngoal (1 subgoal):\n 1. NF B \\<subseteq> NF A", "by auto"], ["", "lemma NF_iff_no_step: \"a \\<in> NF A = (\\<forall>b. (a, b) \\<notin> A)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (a \\<in> NF A) = (\\<forall>b. (a, b) \\<notin> A)", "by auto"], ["", "lemma NF_no_trancl_step:\n  assumes \"a \\<in> NF A\" shows \"\\<forall>b. (a, b) \\<notin> A\\<^sup>+\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>b. (a, b) \\<notin> A\\<^sup>+", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<forall>b. (a, b) \\<notin> A\\<^sup>+", "from assms"], ["proof (chain)\npicking this:\n  a \\<in> NF A", "have \"\\<forall>b. (a, b) \\<notin> A\""], ["proof (prove)\nusing this:\n  a \\<in> NF A\n\ngoal (1 subgoal):\n 1. \\<forall>b. (a, b) \\<notin> A", "by auto"], ["proof (state)\nthis:\n  \\<forall>b. (a, b) \\<notin> A\n\ngoal (1 subgoal):\n 1. \\<forall>b. (a, b) \\<notin> A\\<^sup>+", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>b. (a, b) \\<notin> A\\<^sup>+", "proof (intro allI notI)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>b. (a, b) \\<in> A\\<^sup>+ \\<Longrightarrow> False", "fix b"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>b. (a, b) \\<in> A\\<^sup>+ \\<Longrightarrow> False", "assume \"(a, b) \\<in> A\\<^sup>+\""], ["proof (state)\nthis:\n  (a, b) \\<in> A\\<^sup>+\n\ngoal (1 subgoal):\n 1. \\<And>b. (a, b) \\<in> A\\<^sup>+ \\<Longrightarrow> False", "then"], ["proof (chain)\npicking this:\n  (a, b) \\<in> A\\<^sup>+", "show False"], ["proof (prove)\nusing this:\n  (a, b) \\<in> A\\<^sup>+\n\ngoal (1 subgoal):\n 1. False", "by (induct) (auto simp: \\<open>\\<forall>b. (a, b) \\<notin> A\\<close>)"], ["proof (state)\nthis:\n  False\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<forall>b. (a, b) \\<notin> A\\<^sup>+\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma NF_Id_on_fst_image [simp]: \"NF (Id_on (fst ` A)) = NF A\""], ["proof (prove)\ngoal (1 subgoal):\n 1. NF (Id_on (fst ` A)) = NF A", "by force"], ["", "lemma fst_image_NF_Id_on [simp]: \"fst ` R = Q \\<Longrightarrow> NF (Id_on Q) = NF R\""], ["proof (prove)\ngoal (1 subgoal):\n 1. fst ` R = Q \\<Longrightarrow> NF (Id_on Q) = NF R", "by force"], ["", "lemma NF_empty [simp]: \"NF {} = UNIV\""], ["proof (prove)\ngoal (1 subgoal):\n 1. NF {} = UNIV", "by auto"], ["", "lemma normalizability_I: \"(a, b) \\<in> A\\<^sup>* \\<Longrightarrow> b \\<in> NF A \\<Longrightarrow> (a, b) \\<in> A\\<^sup>!\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>(a, b) \\<in> A\\<^sup>*; b \\<in> NF A\\<rbrakk>\n    \\<Longrightarrow> (a, b) \\<in> A\\<^sup>!", "by (simp add: normalizability_def)"], ["", "lemma normalizability_I': \"(a, b) \\<in> A\\<^sup>* \\<Longrightarrow> (b, c) \\<in> A\\<^sup>! \\<Longrightarrow> (a, c) \\<in> A\\<^sup>!\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>(a, b) \\<in> A\\<^sup>*; (b, c) \\<in> A\\<^sup>!\\<rbrakk>\n    \\<Longrightarrow> (a, c) \\<in> A\\<^sup>!", "by (auto simp add: normalizability_def)"], ["", "lemma normalizability_E: \"(a, b) \\<in> A\\<^sup>! \\<Longrightarrow> ((a, b) \\<in> A\\<^sup>* \\<Longrightarrow> b \\<in> NF A \\<Longrightarrow> P) \\<Longrightarrow> P\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>(a, b) \\<in> A\\<^sup>!;\n     \\<lbrakk>(a, b) \\<in> A\\<^sup>*; b \\<in> NF A\\<rbrakk>\n     \\<Longrightarrow> P\\<rbrakk>\n    \\<Longrightarrow> P", "by (simp add: normalizability_def)"], ["", "declare normalizability_I' [intro]"], ["", "declare normalizability_I [intro]"], ["", "declare normalizability_E [elim]"], ["", "subsection \\<open>Properties of ARSs\\<close>"], ["", "text \\<open>The following properties on (elements of) ARSs are defined: completeness,\nChurch-Rosser property, semi-completeness, strong normalization, unique normal\nforms, Weak Church-Rosser property, and weak normalization.\\<close>"], ["", "definition CR_on :: \"'a rel \\<Rightarrow> 'a set \\<Rightarrow> bool\" where\n  \"CR_on r A \\<longleftrightarrow> (\\<forall>a\\<in>A. \\<forall>b c. (a, b) \\<in> r\\<^sup>* \\<and> (a, c) \\<in> r\\<^sup>* \\<longrightarrow> (b, c) \\<in> join r)\""], ["", "abbreviation CR :: \"'a rel \\<Rightarrow> bool\" where\n  \"CR r \\<equiv> CR_on r UNIV\""], ["", "definition SN_on :: \"'a rel \\<Rightarrow> 'a set \\<Rightarrow> bool\" where\n  \"SN_on r A \\<longleftrightarrow> \\<not> (\\<exists>f. f 0 \\<in> A \\<and> chain r f)\""], ["", "abbreviation SN :: \"'a rel \\<Rightarrow> bool\" where\n  \"SN r \\<equiv> SN_on r UNIV\""], ["", "text \\<open>Alternative definition of @{term \"SN\"}.\\<close>"], ["", "lemma SN_def: \"SN r = (\\<forall>x. SN_on r {x})\""], ["proof (prove)\ngoal (1 subgoal):\n 1. SN r = (\\<forall>x. SN_on r {x})", "unfolding SN_on_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<nexists>f.\n        f 0 \\<in> UNIV \\<and> (\\<forall>i. (f i, f (Suc i)) \\<in> r)) =\n    (\\<forall>x.\n        \\<nexists>f.\n           f 0 \\<in> {x} \\<and> (\\<forall>i. (f i, f (Suc i)) \\<in> r))", "by blast"], ["", "definition UNF_on :: \"'a rel \\<Rightarrow> 'a set \\<Rightarrow> bool\" where\n  \"UNF_on r A \\<longleftrightarrow> (\\<forall>a\\<in>A. \\<forall>b c. (a, b) \\<in> r\\<^sup>! \\<and> (a, c) \\<in> r\\<^sup>! \\<longrightarrow> b = c)\""], ["", "abbreviation UNF :: \"'a rel \\<Rightarrow> bool\" where \"UNF r \\<equiv> UNF_on r UNIV\""], ["", "definition WCR_on :: \"'a rel \\<Rightarrow> 'a set \\<Rightarrow> bool\" where\n  \"WCR_on r A \\<longleftrightarrow> (\\<forall>a\\<in>A. \\<forall>b c. (a, b) \\<in> r \\<and> (a, c) \\<in> r \\<longrightarrow> (b, c) \\<in> join r)\""], ["", "abbreviation WCR :: \"'a rel \\<Rightarrow> bool\" where \"WCR r \\<equiv> WCR_on r UNIV\""], ["", "definition WN_on :: \"'a rel \\<Rightarrow> 'a set \\<Rightarrow> bool\" where\n  \"WN_on r A \\<longleftrightarrow> (\\<forall>a\\<in>A. \\<exists>b. (a, b) \\<in> r\\<^sup>!)\""], ["", "abbreviation WN :: \"'a rel \\<Rightarrow> bool\" where\n  \"WN r \\<equiv> WN_on r UNIV\""], ["", "lemmas CR_defs = CR_on_def"], ["", "lemmas SN_defs = SN_on_def"], ["", "lemmas UNF_defs = UNF_on_def"], ["", "lemmas WCR_defs = WCR_on_def"], ["", "lemmas WN_defs = WN_on_def"], ["", "definition complete_on :: \"'a rel \\<Rightarrow> 'a set \\<Rightarrow> bool\" where\n  \"complete_on r A \\<longleftrightarrow> SN_on r A \\<and> CR_on r A\""], ["", "abbreviation complete :: \"'a rel \\<Rightarrow> bool\" where\n  \"complete r \\<equiv> complete_on r UNIV\""], ["", "definition semi_complete_on :: \"'a rel \\<Rightarrow> 'a set \\<Rightarrow> bool\" where\n  \"semi_complete_on r A \\<longleftrightarrow>  WN_on r A \\<and> CR_on r A\""], ["", "abbreviation semi_complete :: \"'a rel \\<Rightarrow> bool\" where\n  \"semi_complete r \\<equiv> semi_complete_on r UNIV\""], ["", "lemmas complete_defs = complete_on_def"], ["", "lemmas semi_complete_defs = semi_complete_on_def"], ["", "text \\<open>Unique normal forms with respect to conversion.\\<close>"], ["", "definition UNC :: \"'a rel \\<Rightarrow> bool\" where\n  \"UNC A \\<longleftrightarrow> (\\<forall>a b. a \\<in> NF A \\<and> b \\<in> NF A \\<and> (a, b) \\<in> A\\<^sup>\\<leftrightarrow>\\<^sup>* \\<longrightarrow> a = b)\""], ["", "lemma complete_onI:\n  \"SN_on r A \\<Longrightarrow> CR_on r A \\<Longrightarrow> complete_on r A\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>SN_on r A; CR_on r A\\<rbrakk> \\<Longrightarrow> complete_on r A", "by (simp add: complete_defs)"], ["", "lemma complete_onE:\n  \"complete_on r A \\<Longrightarrow> (SN_on r A \\<Longrightarrow> CR_on r A \\<Longrightarrow> P) \\<Longrightarrow> P\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>complete_on r A;\n     \\<lbrakk>SN_on r A; CR_on r A\\<rbrakk> \\<Longrightarrow> P\\<rbrakk>\n    \\<Longrightarrow> P", "by (simp add: complete_defs)"], ["", "lemma CR_onI:\n  \"(\\<And>a b c. a \\<in> A \\<Longrightarrow> (a, b) \\<in> r\\<^sup>* \\<Longrightarrow> (a, c) \\<in> r\\<^sup>* \\<Longrightarrow> (b, c) \\<in> join r) \\<Longrightarrow> CR_on r A\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>a b c.\n        \\<lbrakk>a \\<in> A; (a, b) \\<in> r\\<^sup>*;\n         (a, c) \\<in> r\\<^sup>*\\<rbrakk>\n        \\<Longrightarrow> (b, c) \\<in> r\\<^sup>\\<down>) \\<Longrightarrow>\n    CR_on r A", "by (simp add: CR_defs)"], ["", "lemma CR_on_singletonI:\n  \"(\\<And>b c. (a, b) \\<in> r\\<^sup>* \\<Longrightarrow> (a, c) \\<in> r\\<^sup>* \\<Longrightarrow> (b, c) \\<in> join r) \\<Longrightarrow> CR_on r {a}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>b c.\n        \\<lbrakk>(a, b) \\<in> r\\<^sup>*; (a, c) \\<in> r\\<^sup>*\\<rbrakk>\n        \\<Longrightarrow> (b, c) \\<in> r\\<^sup>\\<down>) \\<Longrightarrow>\n    CR_on r {a}", "by (simp add: CR_defs)"], ["", "lemma CR_onE:\n  \"CR_on r A \\<Longrightarrow> a \\<in> A \\<Longrightarrow> ((b, c) \\<in> join r \\<Longrightarrow> P) \\<Longrightarrow> ((a, b) \\<notin> r\\<^sup>* \\<Longrightarrow> P) \\<Longrightarrow> ((a, c) \\<notin> r\\<^sup>* \\<Longrightarrow> P) \\<Longrightarrow> P\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>CR_on r A; a \\<in> A;\n     (b, c) \\<in> r\\<^sup>\\<down> \\<Longrightarrow> P;\n     (a, b) \\<notin> r\\<^sup>* \\<Longrightarrow> P;\n     (a, c) \\<notin> r\\<^sup>* \\<Longrightarrow> P\\<rbrakk>\n    \\<Longrightarrow> P", "unfolding CR_defs"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<forall>a\\<in>A.\n                \\<forall>b c.\n                   (a, b) \\<in> r\\<^sup>* \\<and>\n                   (a, c) \\<in> r\\<^sup>* \\<longrightarrow>\n                   (b, c) \\<in> r\\<^sup>\\<down>;\n     a \\<in> A; (b, c) \\<in> r\\<^sup>\\<down> \\<Longrightarrow> P;\n     (a, b) \\<notin> r\\<^sup>* \\<Longrightarrow> P;\n     (a, c) \\<notin> r\\<^sup>* \\<Longrightarrow> P\\<rbrakk>\n    \\<Longrightarrow> P", "by blast"], ["", "lemma CR_onD:\n  \"CR_on r A \\<Longrightarrow> a \\<in> A \\<Longrightarrow> (a, b) \\<in> r\\<^sup>* \\<Longrightarrow> (a, c) \\<in> r\\<^sup>* \\<Longrightarrow> (b, c) \\<in> join r\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>CR_on r A; a \\<in> A; (a, b) \\<in> r\\<^sup>*;\n     (a, c) \\<in> r\\<^sup>*\\<rbrakk>\n    \\<Longrightarrow> (b, c) \\<in> r\\<^sup>\\<down>", "by (blast elim: CR_onE)"], ["", "lemma semi_complete_onI: \"WN_on r A \\<Longrightarrow> CR_on r A \\<Longrightarrow> semi_complete_on r A\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>WN_on r A; CR_on r A\\<rbrakk>\n    \\<Longrightarrow> semi_complete_on r A", "by (simp add: semi_complete_defs)"], ["", "lemma semi_complete_onE:\n  \"semi_complete_on r A \\<Longrightarrow> (WN_on r A \\<Longrightarrow> CR_on r A \\<Longrightarrow> P) \\<Longrightarrow> P\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>semi_complete_on r A;\n     \\<lbrakk>WN_on r A; CR_on r A\\<rbrakk> \\<Longrightarrow> P\\<rbrakk>\n    \\<Longrightarrow> P", "by (simp add: semi_complete_defs)"], ["", "declare semi_complete_onI [intro]"], ["", "declare semi_complete_onE [elim]"], ["", "declare complete_onI [intro]"], ["", "declare complete_onE [elim]"], ["", "declare CR_onI [intro]"], ["", "declare CR_on_singletonI [intro]"], ["", "declare CR_onD [dest]"], ["", "declare CR_onE [elim]"], ["", "lemma UNC_I:\n  \"(\\<And>a b. a \\<in> NF A \\<Longrightarrow> b \\<in> NF A \\<Longrightarrow> (a, b) \\<in> A\\<^sup>\\<leftrightarrow>\\<^sup>* \\<Longrightarrow> a = b) \\<Longrightarrow> UNC A\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>a b.\n        \\<lbrakk>a \\<in> NF A; b \\<in> NF A;\n         (a, b) \\<in> A\\<^sup>\\<leftrightarrow>\\<^sup>*\\<rbrakk>\n        \\<Longrightarrow> a = b) \\<Longrightarrow>\n    UNC A", "by (simp add: UNC_def)"], ["", "lemma UNC_E:\n  \"\\<lbrakk>UNC A; a = b \\<Longrightarrow> P; a \\<notin> NF A \\<Longrightarrow> P; b \\<notin> NF A \\<Longrightarrow> P; (a, b) \\<notin> A\\<^sup>\\<leftrightarrow>\\<^sup>* \\<Longrightarrow> P\\<rbrakk> \\<Longrightarrow> P\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>UNC A; a = b \\<Longrightarrow> P;\n     a \\<notin> NF A \\<Longrightarrow> P;\n     b \\<notin> NF A \\<Longrightarrow> P;\n     (a, b) \\<notin> A\\<^sup>\\<leftrightarrow>\\<^sup>* \\<Longrightarrow>\n     P\\<rbrakk>\n    \\<Longrightarrow> P", "unfolding UNC_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<forall>a b.\n                a \\<in> NF A \\<and>\n                b \\<in> NF A \\<and>\n                (a, b)\n                \\<in> A\\<^sup>\\<leftrightarrow>\\<^sup>* \\<longrightarrow>\n                a = b;\n     a = b \\<Longrightarrow> P; a \\<notin> NF A \\<Longrightarrow> P;\n     b \\<notin> NF A \\<Longrightarrow> P;\n     (a, b) \\<notin> A\\<^sup>\\<leftrightarrow>\\<^sup>* \\<Longrightarrow>\n     P\\<rbrakk>\n    \\<Longrightarrow> P", "by blast"], ["", "lemma UNF_onI: \"(\\<And>a b c. a \\<in> A \\<Longrightarrow> (a, b) \\<in> r\\<^sup>! \\<Longrightarrow> (a, c) \\<in> r\\<^sup>! \\<Longrightarrow> b = c) \\<Longrightarrow> UNF_on r A\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>a b c.\n        \\<lbrakk>a \\<in> A; (a, b) \\<in> r\\<^sup>!;\n         (a, c) \\<in> r\\<^sup>!\\<rbrakk>\n        \\<Longrightarrow> b = c) \\<Longrightarrow>\n    UNF_on r A", "by (simp add: UNF_defs)"], ["", "lemma UNF_onE:\n  \"UNF_on r A \\<Longrightarrow> a \\<in> A \\<Longrightarrow> (b = c \\<Longrightarrow> P) \\<Longrightarrow> ((a, b) \\<notin> r\\<^sup>! \\<Longrightarrow> P) \\<Longrightarrow> ((a, c) \\<notin> r\\<^sup>! \\<Longrightarrow> P) \\<Longrightarrow> P\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>UNF_on r A; a \\<in> A; b = c \\<Longrightarrow> P;\n     (a, b) \\<notin> r\\<^sup>! \\<Longrightarrow> P;\n     (a, c) \\<notin> r\\<^sup>! \\<Longrightarrow> P\\<rbrakk>\n    \\<Longrightarrow> P", "unfolding UNF_on_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<forall>a\\<in>A.\n                \\<forall>b c.\n                   (a, b) \\<in> r\\<^sup>! \\<and>\n                   (a, c) \\<in> r\\<^sup>! \\<longrightarrow>\n                   b = c;\n     a \\<in> A; b = c \\<Longrightarrow> P;\n     (a, b) \\<notin> r\\<^sup>! \\<Longrightarrow> P;\n     (a, c) \\<notin> r\\<^sup>! \\<Longrightarrow> P\\<rbrakk>\n    \\<Longrightarrow> P", "by blast"], ["", "lemma UNF_onD:\n  \"UNF_on r A \\<Longrightarrow> a \\<in> A \\<Longrightarrow> (a, b) \\<in> r\\<^sup>! \\<Longrightarrow> (a, c) \\<in> r\\<^sup>! \\<Longrightarrow> b = c\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>UNF_on r A; a \\<in> A; (a, b) \\<in> r\\<^sup>!;\n     (a, c) \\<in> r\\<^sup>!\\<rbrakk>\n    \\<Longrightarrow> b = c", "by (blast elim: UNF_onE)"], ["", "declare UNF_onI [intro]"], ["", "declare UNF_onD [dest]"], ["", "declare UNF_onE [elim]"], ["", "lemma SN_onI:\n  assumes \"\\<And>f. \\<lbrakk>f 0 \\<in> A; chain r f\\<rbrakk> \\<Longrightarrow> False\"\n  shows \"SN_on r A\""], ["proof (prove)\ngoal (1 subgoal):\n 1. SN_on r A", "using assms"], ["proof (prove)\nusing this:\n  \\<lbrakk>?f 0 \\<in> A; \\<forall>i. (?f i, ?f (Suc i)) \\<in> r\\<rbrakk>\n  \\<Longrightarrow> False\n\ngoal (1 subgoal):\n 1. SN_on r A", "unfolding SN_defs"], ["proof (prove)\nusing this:\n  \\<lbrakk>?f 0 \\<in> A; \\<forall>i. (?f i, ?f (Suc i)) \\<in> r\\<rbrakk>\n  \\<Longrightarrow> False\n\ngoal (1 subgoal):\n 1. \\<nexists>f. f 0 \\<in> A \\<and> (\\<forall>i. (f i, f (Suc i)) \\<in> r)", "by blast"], ["", "lemma SN_I: \"(\\<And>a. SN_on A {a}) \\<Longrightarrow> SN A\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>a. SN_on A {a}) \\<Longrightarrow> SN A", "unfolding SN_on_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>a.\n        \\<nexists>f.\n           f 0 \\<in> {a} \\<and>\n           (\\<forall>i. (f i, f (Suc i)) \\<in> A)) \\<Longrightarrow>\n    \\<nexists>f.\n       f 0 \\<in> UNIV \\<and> (\\<forall>i. (f i, f (Suc i)) \\<in> A)", "by blast"], ["", "lemma SN_on_trancl_imp_SN_on:\n  assumes \"SN_on (R\\<^sup>+) T\" shows \"SN_on R T\""], ["proof (prove)\ngoal (1 subgoal):\n 1. SN_on R T", "proof (rule ccontr)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<not> SN_on R T \\<Longrightarrow> False", "assume \"\\<not> SN_on R T\""], ["proof (state)\nthis:\n  \\<not> SN_on R T\n\ngoal (1 subgoal):\n 1. \\<not> SN_on R T \\<Longrightarrow> False", "then"], ["proof (chain)\npicking this:\n  \\<not> SN_on R T", "obtain s where \"s 0 \\<in> T\" and \"chain R s\""], ["proof (prove)\nusing this:\n  \\<not> SN_on R T\n\ngoal (1 subgoal):\n 1. (\\<And>s.\n        \\<lbrakk>s 0 \\<in> T; \\<forall>i. (s i, s (Suc i)) \\<in> R\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "unfolding SN_defs"], ["proof (prove)\nusing this:\n  \\<not> (\\<nexists>f.\n             f 0 \\<in> T \\<and> (\\<forall>i. (f i, f (Suc i)) \\<in> R))\n\ngoal (1 subgoal):\n 1. (\\<And>s.\n        \\<lbrakk>s 0 \\<in> T; \\<forall>i. (s i, s (Suc i)) \\<in> R\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  s 0 \\<in> T\n  \\<forall>i. (s i, s (Suc i)) \\<in> R\n\ngoal (1 subgoal):\n 1. \\<not> SN_on R T \\<Longrightarrow> False", "then"], ["proof (chain)\npicking this:\n  s 0 \\<in> T\n  \\<forall>i. (s i, s (Suc i)) \\<in> R", "have \"chain (R\\<^sup>+) s\""], ["proof (prove)\nusing this:\n  s 0 \\<in> T\n  \\<forall>i. (s i, s (Suc i)) \\<in> R\n\ngoal (1 subgoal):\n 1. \\<forall>i. (s i, s (Suc i)) \\<in> R\\<^sup>+", "by auto"], ["proof (state)\nthis:\n  \\<forall>i. (s i, s (Suc i)) \\<in> R\\<^sup>+\n\ngoal (1 subgoal):\n 1. \\<not> SN_on R T \\<Longrightarrow> False", "with \\<open>s 0 \\<in> T\\<close>"], ["proof (chain)\npicking this:\n  s 0 \\<in> T\n  \\<forall>i. (s i, s (Suc i)) \\<in> R\\<^sup>+", "have \"\\<not> SN_on (R\\<^sup>+) T\""], ["proof (prove)\nusing this:\n  s 0 \\<in> T\n  \\<forall>i. (s i, s (Suc i)) \\<in> R\\<^sup>+\n\ngoal (1 subgoal):\n 1. \\<not> SN_on (R\\<^sup>+) T", "unfolding SN_defs"], ["proof (prove)\nusing this:\n  s 0 \\<in> T\n  \\<forall>i. (s i, s (Suc i)) \\<in> R\\<^sup>+\n\ngoal (1 subgoal):\n 1. \\<not> (\\<nexists>f.\n               f 0 \\<in> T \\<and>\n               (\\<forall>i. (f i, f (Suc i)) \\<in> R\\<^sup>+))", "by auto"], ["proof (state)\nthis:\n  \\<not> SN_on (R\\<^sup>+) T\n\ngoal (1 subgoal):\n 1. \\<not> SN_on R T \\<Longrightarrow> False", "with assms"], ["proof (chain)\npicking this:\n  SN_on (R\\<^sup>+) T\n  \\<not> SN_on (R\\<^sup>+) T", "show False"], ["proof (prove)\nusing this:\n  SN_on (R\\<^sup>+) T\n  \\<not> SN_on (R\\<^sup>+) T\n\ngoal (1 subgoal):\n 1. False", "by simp"], ["proof (state)\nthis:\n  False\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma SN_onE:\n  assumes \"SN_on r A\"\n    and \"\\<not> (\\<exists>f. f 0 \\<in> A \\<and> chain r f) \\<Longrightarrow> P\"\n  shows \"P\""], ["proof (prove)\ngoal (1 subgoal):\n 1. P", "using assms"], ["proof (prove)\nusing this:\n  SN_on r A\n  \\<nexists>f.\n     f 0 \\<in> A \\<and>\n     (\\<forall>i. (f i, f (Suc i)) \\<in> r) \\<Longrightarrow>\n  P\n\ngoal (1 subgoal):\n 1. P", "unfolding SN_defs"], ["proof (prove)\nusing this:\n  \\<nexists>f. f 0 \\<in> A \\<and> (\\<forall>i. (f i, f (Suc i)) \\<in> r)\n  \\<nexists>f.\n     f 0 \\<in> A \\<and>\n     (\\<forall>i. (f i, f (Suc i)) \\<in> r) \\<Longrightarrow>\n  P\n\ngoal (1 subgoal):\n 1. P", "by simp"], ["", "lemma not_SN_onE:\n  assumes \"\\<not> SN_on r A\"\n    and \"\\<And>f. \\<lbrakk>f 0 \\<in> A; chain r f\\<rbrakk> \\<Longrightarrow> P\"\n  shows \"P\""], ["proof (prove)\ngoal (1 subgoal):\n 1. P", "using assms"], ["proof (prove)\nusing this:\n  \\<not> SN_on r A\n  \\<lbrakk>?f 0 \\<in> A; \\<forall>i. (?f i, ?f (Suc i)) \\<in> r\\<rbrakk>\n  \\<Longrightarrow> P\n\ngoal (1 subgoal):\n 1. P", "unfolding SN_defs"], ["proof (prove)\nusing this:\n  \\<not> (\\<nexists>f.\n             f 0 \\<in> A \\<and> (\\<forall>i. (f i, f (Suc i)) \\<in> r))\n  \\<lbrakk>?f 0 \\<in> A; \\<forall>i. (?f i, ?f (Suc i)) \\<in> r\\<rbrakk>\n  \\<Longrightarrow> P\n\ngoal (1 subgoal):\n 1. P", "by blast"], ["", "declare SN_onI [intro]"], ["", "declare SN_onE [elim]"], ["", "declare not_SN_onE [Pure.elim, elim]"], ["", "lemma refl_not_SN: \"(x, x) \\<in> R \\<Longrightarrow> \\<not> SN R\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (x, x) \\<in> R \\<Longrightarrow> \\<not> SN R", "unfolding SN_defs"], ["proof (prove)\ngoal (1 subgoal):\n 1. (x, x) \\<in> R \\<Longrightarrow>\n    \\<not> (\\<nexists>f.\n               f 0 \\<in> UNIV \\<and> (\\<forall>i. (f i, f (Suc i)) \\<in> R))", "by force"], ["", "lemma SN_on_irrefl:\n  assumes \"SN_on r A\"\n  shows \"\\<forall>a\\<in>A. (a, a) \\<notin> r\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>a\\<in>A. (a, a) \\<notin> r", "proof (intro ballI notI)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>a.\n       \\<lbrakk>a \\<in> A; (a, a) \\<in> r\\<rbrakk> \\<Longrightarrow> False", "fix a"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>a.\n       \\<lbrakk>a \\<in> A; (a, a) \\<in> r\\<rbrakk> \\<Longrightarrow> False", "assume \"a \\<in> A\" and \"(a, a) \\<in> r\""], ["proof (state)\nthis:\n  a \\<in> A\n  (a, a) \\<in> r\n\ngoal (1 subgoal):\n 1. \\<And>a.\n       \\<lbrakk>a \\<in> A; (a, a) \\<in> r\\<rbrakk> \\<Longrightarrow> False", "with assms"], ["proof (chain)\npicking this:\n  SN_on r A\n  a \\<in> A\n  (a, a) \\<in> r", "show False"], ["proof (prove)\nusing this:\n  SN_on r A\n  a \\<in> A\n  (a, a) \\<in> r\n\ngoal (1 subgoal):\n 1. False", "unfolding SN_defs"], ["proof (prove)\nusing this:\n  \\<nexists>f. f 0 \\<in> A \\<and> (\\<forall>i. (f i, f (Suc i)) \\<in> r)\n  a \\<in> A\n  (a, a) \\<in> r\n\ngoal (1 subgoal):\n 1. False", "by auto"], ["proof (state)\nthis:\n  False\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma WCR_onI: \"(\\<And>a b c. a \\<in> A \\<Longrightarrow> (a, b) \\<in> r \\<Longrightarrow> (a, c) \\<in> r \\<Longrightarrow> (b, c) \\<in> join r) \\<Longrightarrow> WCR_on r A\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>a b c.\n        \\<lbrakk>a \\<in> A; (a, b) \\<in> r; (a, c) \\<in> r\\<rbrakk>\n        \\<Longrightarrow> (b, c) \\<in> r\\<^sup>\\<down>) \\<Longrightarrow>\n    WCR_on r A", "by (simp add: WCR_defs)"], ["", "lemma WCR_onE:\n  \"WCR_on r A \\<Longrightarrow> a \\<in> A \\<Longrightarrow> ((b, c) \\<in> join r \\<Longrightarrow> P) \\<Longrightarrow> ((a, b) \\<notin> r \\<Longrightarrow> P) \\<Longrightarrow> ((a, c) \\<notin> r \\<Longrightarrow> P) \\<Longrightarrow> P\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>WCR_on r A; a \\<in> A;\n     (b, c) \\<in> r\\<^sup>\\<down> \\<Longrightarrow> P;\n     (a, b) \\<notin> r \\<Longrightarrow> P;\n     (a, c) \\<notin> r \\<Longrightarrow> P\\<rbrakk>\n    \\<Longrightarrow> P", "unfolding WCR_on_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<forall>a\\<in>A.\n                \\<forall>b c.\n                   (a, b) \\<in> r \\<and> (a, c) \\<in> r \\<longrightarrow>\n                   (b, c) \\<in> r\\<^sup>\\<down>;\n     a \\<in> A; (b, c) \\<in> r\\<^sup>\\<down> \\<Longrightarrow> P;\n     (a, b) \\<notin> r \\<Longrightarrow> P;\n     (a, c) \\<notin> r \\<Longrightarrow> P\\<rbrakk>\n    \\<Longrightarrow> P", "by blast"], ["", "lemma SN_nat_bounded: \"SN {(x, y :: nat). x < y \\<and> y \\<le> b}\" (is \"SN ?R\")"], ["proof (prove)\ngoal (1 subgoal):\n 1. SN {(x, y). x < y \\<and> y \\<le> b}", "proof"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>f.\n       \\<lbrakk>f 0 \\<in> UNIV;\n        \\<forall>i.\n           (f i, f (Suc i)) \\<in> {(x, y). x < y \\<and> y \\<le> b}\\<rbrakk>\n       \\<Longrightarrow> False", "fix f"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>f.\n       \\<lbrakk>f 0 \\<in> UNIV;\n        \\<forall>i.\n           (f i, f (Suc i)) \\<in> {(x, y). x < y \\<and> y \\<le> b}\\<rbrakk>\n       \\<Longrightarrow> False", "assume \"chain ?R f\""], ["proof (state)\nthis:\n  \\<forall>i. (f i, f (Suc i)) \\<in> {(x, y). x < y \\<and> y \\<le> b}\n\ngoal (1 subgoal):\n 1. \\<And>f.\n       \\<lbrakk>f 0 \\<in> UNIV;\n        \\<forall>i.\n           (f i, f (Suc i)) \\<in> {(x, y). x < y \\<and> y \\<le> b}\\<rbrakk>\n       \\<Longrightarrow> False", "then"], ["proof (chain)\npicking this:\n  \\<forall>i. (f i, f (Suc i)) \\<in> {(x, y). x < y \\<and> y \\<le> b}", "have steps: \"\\<And>i. (f i, f (Suc i)) \\<in> ?R\""], ["proof (prove)\nusing this:\n  \\<forall>i. (f i, f (Suc i)) \\<in> {(x, y). x < y \\<and> y \\<le> b}\n\ngoal (1 subgoal):\n 1. \\<And>i. (f i, f (Suc i)) \\<in> {(x, y). x < y \\<and> y \\<le> b}", ".."], ["proof (state)\nthis:\n  (f ?i, f (Suc ?i)) \\<in> {(x, y). x < y \\<and> y \\<le> b}\n\ngoal (1 subgoal):\n 1. \\<And>f.\n       \\<lbrakk>f 0 \\<in> UNIV;\n        \\<forall>i.\n           (f i, f (Suc i)) \\<in> {(x, y). x < y \\<and> y \\<le> b}\\<rbrakk>\n       \\<Longrightarrow> False", "{"], ["proof (state)\nthis:\n  (f ?i, f (Suc ?i)) \\<in> {(x, y). x < y \\<and> y \\<le> b}\n\ngoal (1 subgoal):\n 1. \\<And>f.\n       \\<lbrakk>f 0 \\<in> UNIV;\n        \\<forall>i.\n           (f i, f (Suc i)) \\<in> {(x, y). x < y \\<and> y \\<le> b}\\<rbrakk>\n       \\<Longrightarrow> False", "fix i"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>f.\n       \\<lbrakk>f 0 \\<in> UNIV;\n        \\<forall>i.\n           (f i, f (Suc i)) \\<in> {(x, y). x < y \\<and> y \\<le> b}\\<rbrakk>\n       \\<Longrightarrow> False", "have inc: \"f 0 + i \\<le> f i\""], ["proof (prove)\ngoal (1 subgoal):\n 1. f 0 + i \\<le> f i", "proof (induct i)"], ["proof (state)\ngoal (2 subgoals):\n 1. f 0 + 0 \\<le> f 0\n 2. \\<And>i. f 0 + i \\<le> f i \\<Longrightarrow> f 0 + Suc i \\<le> f (Suc i)", "case 0"], ["proof (state)\nthis:\n  \n\ngoal (2 subgoals):\n 1. f 0 + 0 \\<le> f 0\n 2. \\<And>i. f 0 + i \\<le> f i \\<Longrightarrow> f 0 + Suc i \\<le> f (Suc i)", "then"], ["proof (chain)\npicking this:", "show ?case"], ["proof (prove)\ngoal (1 subgoal):\n 1. f 0 + 0 \\<le> f 0", "by auto"], ["proof (state)\nthis:\n  f 0 + 0 \\<le> f 0\n\ngoal (1 subgoal):\n 1. \\<And>i. f 0 + i \\<le> f i \\<Longrightarrow> f 0 + Suc i \\<le> f (Suc i)", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>i. f 0 + i \\<le> f i \\<Longrightarrow> f 0 + Suc i \\<le> f (Suc i)", "case (Suc i)"], ["proof (state)\nthis:\n  f 0 + i \\<le> f i\n\ngoal (1 subgoal):\n 1. \\<And>i. f 0 + i \\<le> f i \\<Longrightarrow> f 0 + Suc i \\<le> f (Suc i)", "have \"f 0 + Suc i \\<le> f i + Suc 0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. f 0 + Suc i \\<le> f i + Suc 0", "using Suc"], ["proof (prove)\nusing this:\n  f 0 + i \\<le> f i\n\ngoal (1 subgoal):\n 1. f 0 + Suc i \\<le> f i + Suc 0", "by simp"], ["proof (state)\nthis:\n  f 0 + Suc i \\<le> f i + Suc 0\n\ngoal (1 subgoal):\n 1. \\<And>i. f 0 + i \\<le> f i \\<Longrightarrow> f 0 + Suc i \\<le> f (Suc i)", "also"], ["proof (state)\nthis:\n  f 0 + Suc i \\<le> f i + Suc 0\n\ngoal (1 subgoal):\n 1. \\<And>i. f 0 + i \\<le> f i \\<Longrightarrow> f 0 + Suc i \\<le> f (Suc i)", "have \"... \\<le> f (Suc i)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. f i + Suc 0 \\<le> f (Suc i)", "using steps [of i]"], ["proof (prove)\nusing this:\n  (f i, f (Suc i)) \\<in> {(x, y). x < y \\<and> y \\<le> b}\n\ngoal (1 subgoal):\n 1. f i + Suc 0 \\<le> f (Suc i)", "by auto"], ["proof (state)\nthis:\n  f i + Suc 0 \\<le> f (Suc i)\n\ngoal (1 subgoal):\n 1. \\<And>i. f 0 + i \\<le> f i \\<Longrightarrow> f 0 + Suc i \\<le> f (Suc i)", "finally"], ["proof (chain)\npicking this:\n  f 0 + Suc i \\<le> f (Suc i)", "show ?case"], ["proof (prove)\nusing this:\n  f 0 + Suc i \\<le> f (Suc i)\n\ngoal (1 subgoal):\n 1. f 0 + Suc i \\<le> f (Suc i)", "by simp"], ["proof (state)\nthis:\n  f 0 + Suc i \\<le> f (Suc i)\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  f 0 + i \\<le> f i\n\ngoal (1 subgoal):\n 1. \\<And>f.\n       \\<lbrakk>f 0 \\<in> UNIV;\n        \\<forall>i.\n           (f i, f (Suc i)) \\<in> {(x, y). x < y \\<and> y \\<le> b}\\<rbrakk>\n       \\<Longrightarrow> False", "}"], ["proof (state)\nthis:\n  f 0 + ?i2 \\<le> f ?i2\n\ngoal (1 subgoal):\n 1. \\<And>f.\n       \\<lbrakk>f 0 \\<in> UNIV;\n        \\<forall>i.\n           (f i, f (Suc i)) \\<in> {(x, y). x < y \\<and> y \\<le> b}\\<rbrakk>\n       \\<Longrightarrow> False", "from this [of \"Suc b\"] steps [of b]"], ["proof (chain)\npicking this:\n  f 0 + Suc b \\<le> f (Suc b)\n  (f b, f (Suc b)) \\<in> {(x, y). x < y \\<and> y \\<le> b}", "show False"], ["proof (prove)\nusing this:\n  f 0 + Suc b \\<le> f (Suc b)\n  (f b, f (Suc b)) \\<in> {(x, y). x < y \\<and> y \\<le> b}\n\ngoal (1 subgoal):\n 1. False", "by simp"], ["proof (state)\nthis:\n  False\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma WCR_onD:\n  \"WCR_on r A \\<Longrightarrow> a \\<in> A \\<Longrightarrow> (a, b) \\<in> r \\<Longrightarrow> (a, c) \\<in> r \\<Longrightarrow> (b, c) \\<in> join r\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>WCR_on r A; a \\<in> A; (a, b) \\<in> r; (a, c) \\<in> r\\<rbrakk>\n    \\<Longrightarrow> (b, c) \\<in> r\\<^sup>\\<down>", "by (blast elim: WCR_onE)"], ["", "lemma WN_onI: \"(\\<And>a. a \\<in> A \\<Longrightarrow> \\<exists>b. (a, b) \\<in> r\\<^sup>!) \\<Longrightarrow> WN_on r A\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>a.\n        a \\<in> A \\<Longrightarrow>\n        \\<exists>b. (a, b) \\<in> r\\<^sup>!) \\<Longrightarrow>\n    WN_on r A", "by (auto simp: WN_defs)"], ["", "lemma WN_onE: \"WN_on r A \\<Longrightarrow> a \\<in> A \\<Longrightarrow> (\\<And>b. (a, b) \\<in> r\\<^sup>! \\<Longrightarrow> P) \\<Longrightarrow> P\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>WN_on r A; a \\<in> A;\n     \\<And>b. (a, b) \\<in> r\\<^sup>! \\<Longrightarrow> P\\<rbrakk>\n    \\<Longrightarrow> P", "unfolding WN_defs"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<forall>a\\<in>A. \\<exists>b. (a, b) \\<in> r\\<^sup>!;\n     a \\<in> A; \\<And>b. (a, b) \\<in> r\\<^sup>! \\<Longrightarrow> P\\<rbrakk>\n    \\<Longrightarrow> P", "by blast"], ["", "lemma WN_onD: \"WN_on r A \\<Longrightarrow> a \\<in> A \\<Longrightarrow> \\<exists>b. (a, b) \\<in> r\\<^sup>!\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>WN_on r A; a \\<in> A\\<rbrakk>\n    \\<Longrightarrow> \\<exists>b. (a, b) \\<in> r\\<^sup>!", "by (blast elim: WN_onE)"], ["", "declare WCR_onI [intro]"], ["", "declare WCR_onD [dest]"], ["", "declare WCR_onE [elim]"], ["", "declare WN_onI [intro]"], ["", "declare WN_onD [dest]"], ["", "declare WN_onE [elim]"], ["", "text \\<open>Restricting a relation @{term r} to those elements that are strongly\nnormalizing with respect to a relation @{term s}.\\<close>"], ["", "definition restrict_SN :: \"'a rel \\<Rightarrow> 'a rel \\<Rightarrow> 'a rel\" where\n  \"restrict_SN r s = {(a, b) | a b. (a, b) \\<in> r \\<and> SN_on s {a}}\""], ["", "lemma SN_restrict_SN_idemp [simp]: \"SN (restrict_SN A A)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. SN (restrict_SN A A)", "by (auto simp: restrict_SN_def SN_defs)"], ["", "lemma SN_on_Image:\n  assumes \"SN_on r A\"\n  shows \"SN_on r (r `` A)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. SN_on r (r `` A)", "proof"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>f.\n       \\<lbrakk>f 0 \\<in> r `` A;\n        \\<forall>i. (f i, f (Suc i)) \\<in> r\\<rbrakk>\n       \\<Longrightarrow> False", "fix f"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>f.\n       \\<lbrakk>f 0 \\<in> r `` A;\n        \\<forall>i. (f i, f (Suc i)) \\<in> r\\<rbrakk>\n       \\<Longrightarrow> False", "assume \"f 0 \\<in> r `` A\" and chain: \"chain r f\""], ["proof (state)\nthis:\n  f 0 \\<in> r `` A\n  \\<forall>i. (f i, f (Suc i)) \\<in> r\n\ngoal (1 subgoal):\n 1. \\<And>f.\n       \\<lbrakk>f 0 \\<in> r `` A;\n        \\<forall>i. (f i, f (Suc i)) \\<in> r\\<rbrakk>\n       \\<Longrightarrow> False", "then"], ["proof (chain)\npicking this:\n  f 0 \\<in> r `` A\n  \\<forall>i. (f i, f (Suc i)) \\<in> r", "obtain a where \"a \\<in> A\" and 1: \"(a, f 0) \\<in> r\""], ["proof (prove)\nusing this:\n  f 0 \\<in> r `` A\n  \\<forall>i. (f i, f (Suc i)) \\<in> r\n\ngoal (1 subgoal):\n 1. (\\<And>a.\n        \\<lbrakk>a \\<in> A; (a, f 0) \\<in> r\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  a \\<in> A\n  (a, f 0) \\<in> r\n\ngoal (1 subgoal):\n 1. \\<And>f.\n       \\<lbrakk>f 0 \\<in> r `` A;\n        \\<forall>i. (f i, f (Suc i)) \\<in> r\\<rbrakk>\n       \\<Longrightarrow> False", "let ?g = \"case_nat a f\""], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>f.\n       \\<lbrakk>f 0 \\<in> r `` A;\n        \\<forall>i. (f i, f (Suc i)) \\<in> r\\<rbrakk>\n       \\<Longrightarrow> False", "from cons_chain [OF 1 chain]"], ["proof (chain)\npicking this:\n  \\<forall>i.\n     (case i of 0 \\<Rightarrow> a | Suc i \\<Rightarrow> f i,\n      case Suc i of 0 \\<Rightarrow> a | Suc i \\<Rightarrow> f i)\n     \\<in> r", "have \"chain r ?g\""], ["proof (prove)\nusing this:\n  \\<forall>i.\n     (case i of 0 \\<Rightarrow> a | Suc i \\<Rightarrow> f i,\n      case Suc i of 0 \\<Rightarrow> a | Suc i \\<Rightarrow> f i)\n     \\<in> r\n\ngoal (1 subgoal):\n 1. \\<forall>i.\n       (case i of 0 \\<Rightarrow> a | Suc x \\<Rightarrow> f x,\n        case Suc i of 0 \\<Rightarrow> a | Suc x \\<Rightarrow> f x)\n       \\<in> r", "."], ["proof (state)\nthis:\n  \\<forall>i.\n     (case i of 0 \\<Rightarrow> a | Suc x \\<Rightarrow> f x,\n      case Suc i of 0 \\<Rightarrow> a | Suc x \\<Rightarrow> f x)\n     \\<in> r\n\ngoal (1 subgoal):\n 1. \\<And>f.\n       \\<lbrakk>f 0 \\<in> r `` A;\n        \\<forall>i. (f i, f (Suc i)) \\<in> r\\<rbrakk>\n       \\<Longrightarrow> False", "moreover"], ["proof (state)\nthis:\n  \\<forall>i.\n     (case i of 0 \\<Rightarrow> a | Suc x \\<Rightarrow> f x,\n      case Suc i of 0 \\<Rightarrow> a | Suc x \\<Rightarrow> f x)\n     \\<in> r\n\ngoal (1 subgoal):\n 1. \\<And>f.\n       \\<lbrakk>f 0 \\<in> r `` A;\n        \\<forall>i. (f i, f (Suc i)) \\<in> r\\<rbrakk>\n       \\<Longrightarrow> False", "have \"?g 0 \\<in> A\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (case 0 of 0 \\<Rightarrow> a | Suc x \\<Rightarrow> f x) \\<in> A", "by (simp add: \\<open>a \\<in> A\\<close>)"], ["proof (state)\nthis:\n  (case 0 of 0 \\<Rightarrow> a | Suc x \\<Rightarrow> f x) \\<in> A\n\ngoal (1 subgoal):\n 1. \\<And>f.\n       \\<lbrakk>f 0 \\<in> r `` A;\n        \\<forall>i. (f i, f (Suc i)) \\<in> r\\<rbrakk>\n       \\<Longrightarrow> False", "ultimately"], ["proof (chain)\npicking this:\n  \\<forall>i.\n     (case i of 0 \\<Rightarrow> a | Suc x \\<Rightarrow> f x,\n      case Suc i of 0 \\<Rightarrow> a | Suc x \\<Rightarrow> f x)\n     \\<in> r\n  (case 0 of 0 \\<Rightarrow> a | Suc x \\<Rightarrow> f x) \\<in> A", "have \"\\<not> SN_on r A\""], ["proof (prove)\nusing this:\n  \\<forall>i.\n     (case i of 0 \\<Rightarrow> a | Suc x \\<Rightarrow> f x,\n      case Suc i of 0 \\<Rightarrow> a | Suc x \\<Rightarrow> f x)\n     \\<in> r\n  (case 0 of 0 \\<Rightarrow> a | Suc x \\<Rightarrow> f x) \\<in> A\n\ngoal (1 subgoal):\n 1. \\<not> SN_on r A", "unfolding SN_defs"], ["proof (prove)\nusing this:\n  \\<forall>i.\n     (case i of 0 \\<Rightarrow> a | Suc x \\<Rightarrow> f x,\n      case Suc i of 0 \\<Rightarrow> a | Suc x \\<Rightarrow> f x)\n     \\<in> r\n  (case 0 of 0 \\<Rightarrow> a | Suc x \\<Rightarrow> f x) \\<in> A\n\ngoal (1 subgoal):\n 1. \\<not> (\\<nexists>f.\n               f 0 \\<in> A \\<and> (\\<forall>i. (f i, f (Suc i)) \\<in> r))", "by best"], ["proof (state)\nthis:\n  \\<not> SN_on r A\n\ngoal (1 subgoal):\n 1. \\<And>f.\n       \\<lbrakk>f 0 \\<in> r `` A;\n        \\<forall>i. (f i, f (Suc i)) \\<in> r\\<rbrakk>\n       \\<Longrightarrow> False", "with assms"], ["proof (chain)\npicking this:\n  SN_on r A\n  \\<not> SN_on r A", "show False"], ["proof (prove)\nusing this:\n  SN_on r A\n  \\<not> SN_on r A\n\ngoal (1 subgoal):\n 1. False", "by simp"], ["proof (state)\nthis:\n  False\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma SN_on_subset2:\n  assumes \"A \\<subseteq> B\" and \"SN_on r B\"\n  shows \"SN_on r A\""], ["proof (prove)\ngoal (1 subgoal):\n 1. SN_on r A", "using assms"], ["proof (prove)\nusing this:\n  A \\<subseteq> B\n  SN_on r B\n\ngoal (1 subgoal):\n 1. SN_on r A", "unfolding SN_on_def"], ["proof (prove)\nusing this:\n  A \\<subseteq> B\n  \\<nexists>f. f 0 \\<in> B \\<and> (\\<forall>i. (f i, f (Suc i)) \\<in> r)\n\ngoal (1 subgoal):\n 1. \\<nexists>f. f 0 \\<in> A \\<and> (\\<forall>i. (f i, f (Suc i)) \\<in> r)", "by blast"], ["", "lemma step_preserves_SN_on:\n  assumes 1: \"(a, b) \\<in> r\"\n    and 2: \"SN_on r {a}\"\n  shows \"SN_on r {b}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. SN_on r {b}", "using 1 and SN_on_Image [OF 2] and SN_on_subset2 [of \"{b}\" \"r `` {a}\"]"], ["proof (prove)\nusing this:\n  (a, b) \\<in> r\n  SN_on r (r `` {a})\n  \\<lbrakk>{b} \\<subseteq> r `` {a}; SN_on ?r (r `` {a})\\<rbrakk>\n  \\<Longrightarrow> SN_on ?r {b}\n\ngoal (1 subgoal):\n 1. SN_on r {b}", "by auto"], ["", "lemma steps_preserve_SN_on: \"(a, b) \\<in> A\\<^sup>* \\<Longrightarrow> SN_on A {a} \\<Longrightarrow> SN_on A {b}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>(a, b) \\<in> A\\<^sup>*; SN_on A {a}\\<rbrakk>\n    \\<Longrightarrow> SN_on A {b}", "by (induct rule: rtrancl.induct) (auto simp: step_preserves_SN_on)"], ["", "(*FIXME: move*)"], ["", "lemma relpow_seq:\n  assumes \"(x, y) \\<in> r^^n\"\n  shows \"\\<exists>f. f 0 = x \\<and> f n = y \\<and> (\\<forall>i<n. (f i, f (Suc i)) \\<in> r)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>f.\n       f 0 = x \\<and>\n       f n = y \\<and> (\\<forall>i<n. (f i, f (Suc i)) \\<in> r)", "using assms"], ["proof (prove)\nusing this:\n  (x, y) \\<in> r ^^ n\n\ngoal (1 subgoal):\n 1. \\<exists>f.\n       f 0 = x \\<and>\n       f n = y \\<and> (\\<forall>i<n. (f i, f (Suc i)) \\<in> r)", "proof (induct n arbitrary: y)"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>y.\n       (x, y) \\<in> r ^^ 0 \\<Longrightarrow>\n       \\<exists>f.\n          f 0 = x \\<and>\n          f 0 = y \\<and> (\\<forall>i<0. (f i, f (Suc i)) \\<in> r)\n 2. \\<And>n y.\n       \\<lbrakk>\\<And>y.\n                   (x, y) \\<in> r ^^ n \\<Longrightarrow>\n                   \\<exists>f.\n                      f 0 = x \\<and>\n                      f n = y \\<and>\n                      (\\<forall>i<n. (f i, f (Suc i)) \\<in> r);\n        (x, y) \\<in> r ^^ Suc n\\<rbrakk>\n       \\<Longrightarrow> \\<exists>f.\n                            f 0 = x \\<and>\n                            f (Suc n) = y \\<and>\n                            (\\<forall>i<Suc n. (f i, f (Suc i)) \\<in> r)", "case 0"], ["proof (state)\nthis:\n  (x, y) \\<in> r ^^ 0\n\ngoal (2 subgoals):\n 1. \\<And>y.\n       (x, y) \\<in> r ^^ 0 \\<Longrightarrow>\n       \\<exists>f.\n          f 0 = x \\<and>\n          f 0 = y \\<and> (\\<forall>i<0. (f i, f (Suc i)) \\<in> r)\n 2. \\<And>n y.\n       \\<lbrakk>\\<And>y.\n                   (x, y) \\<in> r ^^ n \\<Longrightarrow>\n                   \\<exists>f.\n                      f 0 = x \\<and>\n                      f n = y \\<and>\n                      (\\<forall>i<n. (f i, f (Suc i)) \\<in> r);\n        (x, y) \\<in> r ^^ Suc n\\<rbrakk>\n       \\<Longrightarrow> \\<exists>f.\n                            f 0 = x \\<and>\n                            f (Suc n) = y \\<and>\n                            (\\<forall>i<Suc n. (f i, f (Suc i)) \\<in> r)", "then"], ["proof (chain)\npicking this:\n  (x, y) \\<in> r ^^ 0", "show ?case"], ["proof (prove)\nusing this:\n  (x, y) \\<in> r ^^ 0\n\ngoal (1 subgoal):\n 1. \\<exists>f.\n       f 0 = x \\<and>\n       f 0 = y \\<and> (\\<forall>i<0. (f i, f (Suc i)) \\<in> r)", "by auto"], ["proof (state)\nthis:\n  \\<exists>f.\n     f 0 = x \\<and> f 0 = y \\<and> (\\<forall>i<0. (f i, f (Suc i)) \\<in> r)\n\ngoal (1 subgoal):\n 1. \\<And>n y.\n       \\<lbrakk>\\<And>y.\n                   (x, y) \\<in> r ^^ n \\<Longrightarrow>\n                   \\<exists>f.\n                      f 0 = x \\<and>\n                      f n = y \\<and>\n                      (\\<forall>i<n. (f i, f (Suc i)) \\<in> r);\n        (x, y) \\<in> r ^^ Suc n\\<rbrakk>\n       \\<Longrightarrow> \\<exists>f.\n                            f 0 = x \\<and>\n                            f (Suc n) = y \\<and>\n                            (\\<forall>i<Suc n. (f i, f (Suc i)) \\<in> r)", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>n y.\n       \\<lbrakk>\\<And>y.\n                   (x, y) \\<in> r ^^ n \\<Longrightarrow>\n                   \\<exists>f.\n                      f 0 = x \\<and>\n                      f n = y \\<and>\n                      (\\<forall>i<n. (f i, f (Suc i)) \\<in> r);\n        (x, y) \\<in> r ^^ Suc n\\<rbrakk>\n       \\<Longrightarrow> \\<exists>f.\n                            f 0 = x \\<and>\n                            f (Suc n) = y \\<and>\n                            (\\<forall>i<Suc n. (f i, f (Suc i)) \\<in> r)", "case (Suc n)"], ["proof (state)\nthis:\n  (x, ?y) \\<in> r ^^ n \\<Longrightarrow>\n  \\<exists>f.\n     f 0 = x \\<and> f n = ?y \\<and> (\\<forall>i<n. (f i, f (Suc i)) \\<in> r)\n  (x, y) \\<in> r ^^ Suc n\n\ngoal (1 subgoal):\n 1. \\<And>n y.\n       \\<lbrakk>\\<And>y.\n                   (x, y) \\<in> r ^^ n \\<Longrightarrow>\n                   \\<exists>f.\n                      f 0 = x \\<and>\n                      f n = y \\<and>\n                      (\\<forall>i<n. (f i, f (Suc i)) \\<in> r);\n        (x, y) \\<in> r ^^ Suc n\\<rbrakk>\n       \\<Longrightarrow> \\<exists>f.\n                            f 0 = x \\<and>\n                            f (Suc n) = y \\<and>\n                            (\\<forall>i<Suc n. (f i, f (Suc i)) \\<in> r)", "then"], ["proof (chain)\npicking this:\n  (x, ?y) \\<in> r ^^ n \\<Longrightarrow>\n  \\<exists>f.\n     f 0 = x \\<and> f n = ?y \\<and> (\\<forall>i<n. (f i, f (Suc i)) \\<in> r)\n  (x, y) \\<in> r ^^ Suc n", "obtain z where \"(x, z) \\<in> r^^n\" and \"(z, y) \\<in> r\""], ["proof (prove)\nusing this:\n  (x, ?y) \\<in> r ^^ n \\<Longrightarrow>\n  \\<exists>f.\n     f 0 = x \\<and> f n = ?y \\<and> (\\<forall>i<n. (f i, f (Suc i)) \\<in> r)\n  (x, y) \\<in> r ^^ Suc n\n\ngoal (1 subgoal):\n 1. (\\<And>z.\n        \\<lbrakk>(x, z) \\<in> r ^^ n; (z, y) \\<in> r\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  (x, z) \\<in> r ^^ n\n  (z, y) \\<in> r\n\ngoal (1 subgoal):\n 1. \\<And>n y.\n       \\<lbrakk>\\<And>y.\n                   (x, y) \\<in> r ^^ n \\<Longrightarrow>\n                   \\<exists>f.\n                      f 0 = x \\<and>\n                      f n = y \\<and>\n                      (\\<forall>i<n. (f i, f (Suc i)) \\<in> r);\n        (x, y) \\<in> r ^^ Suc n\\<rbrakk>\n       \\<Longrightarrow> \\<exists>f.\n                            f 0 = x \\<and>\n                            f (Suc n) = y \\<and>\n                            (\\<forall>i<Suc n. (f i, f (Suc i)) \\<in> r)", "from Suc(1)[OF \\<open>(x, z) \\<in> r^^n\\<close>]"], ["proof (chain)\npicking this:\n  \\<exists>f.\n     f 0 = x \\<and> f n = z \\<and> (\\<forall>i<n. (f i, f (Suc i)) \\<in> r)", "obtain f where \"f 0 = x\" and \"f n = z\" and seq: \"\\<forall>i<n. (f i, f (Suc i)) \\<in> r\""], ["proof (prove)\nusing this:\n  \\<exists>f.\n     f 0 = x \\<and> f n = z \\<and> (\\<forall>i<n. (f i, f (Suc i)) \\<in> r)\n\ngoal (1 subgoal):\n 1. (\\<And>f.\n        \\<lbrakk>f 0 = x; f n = z;\n         \\<forall>i<n. (f i, f (Suc i)) \\<in> r\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  f 0 = x\n  f n = z\n  \\<forall>i<n. (f i, f (Suc i)) \\<in> r\n\ngoal (1 subgoal):\n 1. \\<And>n y.\n       \\<lbrakk>\\<And>y.\n                   (x, y) \\<in> r ^^ n \\<Longrightarrow>\n                   \\<exists>f.\n                      f 0 = x \\<and>\n                      f n = y \\<and>\n                      (\\<forall>i<n. (f i, f (Suc i)) \\<in> r);\n        (x, y) \\<in> r ^^ Suc n\\<rbrakk>\n       \\<Longrightarrow> \\<exists>f.\n                            f 0 = x \\<and>\n                            f (Suc n) = y \\<and>\n                            (\\<forall>i<Suc n. (f i, f (Suc i)) \\<in> r)", "let ?n = \"Suc n\""], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>n y.\n       \\<lbrakk>\\<And>y.\n                   (x, y) \\<in> r ^^ n \\<Longrightarrow>\n                   \\<exists>f.\n                      f 0 = x \\<and>\n                      f n = y \\<and>\n                      (\\<forall>i<n. (f i, f (Suc i)) \\<in> r);\n        (x, y) \\<in> r ^^ Suc n\\<rbrakk>\n       \\<Longrightarrow> \\<exists>f.\n                            f 0 = x \\<and>\n                            f (Suc n) = y \\<and>\n                            (\\<forall>i<Suc n. (f i, f (Suc i)) \\<in> r)", "let ?f = \"\\<lambda>i. if i = ?n then y else f i\""], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>n y.\n       \\<lbrakk>\\<And>y.\n                   (x, y) \\<in> r ^^ n \\<Longrightarrow>\n                   \\<exists>f.\n                      f 0 = x \\<and>\n                      f n = y \\<and>\n                      (\\<forall>i<n. (f i, f (Suc i)) \\<in> r);\n        (x, y) \\<in> r ^^ Suc n\\<rbrakk>\n       \\<Longrightarrow> \\<exists>f.\n                            f 0 = x \\<and>\n                            f (Suc n) = y \\<and>\n                            (\\<forall>i<Suc n. (f i, f (Suc i)) \\<in> r)", "have \"?f ?n = y\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (if Suc n = Suc n then y else f (Suc n)) = y", "by simp"], ["proof (state)\nthis:\n  (if Suc n = Suc n then y else f (Suc n)) = y\n\ngoal (1 subgoal):\n 1. \\<And>n y.\n       \\<lbrakk>\\<And>y.\n                   (x, y) \\<in> r ^^ n \\<Longrightarrow>\n                   \\<exists>f.\n                      f 0 = x \\<and>\n                      f n = y \\<and>\n                      (\\<forall>i<n. (f i, f (Suc i)) \\<in> r);\n        (x, y) \\<in> r ^^ Suc n\\<rbrakk>\n       \\<Longrightarrow> \\<exists>f.\n                            f 0 = x \\<and>\n                            f (Suc n) = y \\<and>\n                            (\\<forall>i<Suc n. (f i, f (Suc i)) \\<in> r)", "from \\<open>f 0 = x\\<close>"], ["proof (chain)\npicking this:\n  f 0 = x", "have \"?f 0 = x\""], ["proof (prove)\nusing this:\n  f 0 = x\n\ngoal (1 subgoal):\n 1. (if 0 = Suc n then y else f 0) = x", "by simp"], ["proof (state)\nthis:\n  (if 0 = Suc n then y else f 0) = x\n\ngoal (1 subgoal):\n 1. \\<And>n y.\n       \\<lbrakk>\\<And>y.\n                   (x, y) \\<in> r ^^ n \\<Longrightarrow>\n                   \\<exists>f.\n                      f 0 = x \\<and>\n                      f n = y \\<and>\n                      (\\<forall>i<n. (f i, f (Suc i)) \\<in> r);\n        (x, y) \\<in> r ^^ Suc n\\<rbrakk>\n       \\<Longrightarrow> \\<exists>f.\n                            f 0 = x \\<and>\n                            f (Suc n) = y \\<and>\n                            (\\<forall>i<Suc n. (f i, f (Suc i)) \\<in> r)", "from seq"], ["proof (chain)\npicking this:\n  \\<forall>i<n. (f i, f (Suc i)) \\<in> r", "have seq': \"\\<forall>i<n. (?f i, ?f (Suc i)) \\<in> r\""], ["proof (prove)\nusing this:\n  \\<forall>i<n. (f i, f (Suc i)) \\<in> r\n\ngoal (1 subgoal):\n 1. \\<forall>i<n.\n       (if i = Suc n then y else f i,\n        if Suc i = Suc n then y else f (Suc i))\n       \\<in> r", "by auto"], ["proof (state)\nthis:\n  \\<forall>i<n.\n     (if i = Suc n then y else f i, if Suc i = Suc n then y else f (Suc i))\n     \\<in> r\n\ngoal (1 subgoal):\n 1. \\<And>n y.\n       \\<lbrakk>\\<And>y.\n                   (x, y) \\<in> r ^^ n \\<Longrightarrow>\n                   \\<exists>f.\n                      f 0 = x \\<and>\n                      f n = y \\<and>\n                      (\\<forall>i<n. (f i, f (Suc i)) \\<in> r);\n        (x, y) \\<in> r ^^ Suc n\\<rbrakk>\n       \\<Longrightarrow> \\<exists>f.\n                            f 0 = x \\<and>\n                            f (Suc n) = y \\<and>\n                            (\\<forall>i<Suc n. (f i, f (Suc i)) \\<in> r)", "with \\<open>f n = z\\<close> and \\<open>(z, y) \\<in> r\\<close>"], ["proof (chain)\npicking this:\n  f n = z\n  (z, y) \\<in> r\n  \\<forall>i<n.\n     (if i = Suc n then y else f i, if Suc i = Suc n then y else f (Suc i))\n     \\<in> r", "have \"\\<forall>i<?n. (?f i, ?f (Suc i)) \\<in> r\""], ["proof (prove)\nusing this:\n  f n = z\n  (z, y) \\<in> r\n  \\<forall>i<n.\n     (if i = Suc n then y else f i, if Suc i = Suc n then y else f (Suc i))\n     \\<in> r\n\ngoal (1 subgoal):\n 1. \\<forall>i<Suc n.\n       (if i = Suc n then y else f i,\n        if Suc i = Suc n then y else f (Suc i))\n       \\<in> r", "by auto"], ["proof (state)\nthis:\n  \\<forall>i<Suc n.\n     (if i = Suc n then y else f i, if Suc i = Suc n then y else f (Suc i))\n     \\<in> r\n\ngoal (1 subgoal):\n 1. \\<And>n y.\n       \\<lbrakk>\\<And>y.\n                   (x, y) \\<in> r ^^ n \\<Longrightarrow>\n                   \\<exists>f.\n                      f 0 = x \\<and>\n                      f n = y \\<and>\n                      (\\<forall>i<n. (f i, f (Suc i)) \\<in> r);\n        (x, y) \\<in> r ^^ Suc n\\<rbrakk>\n       \\<Longrightarrow> \\<exists>f.\n                            f 0 = x \\<and>\n                            f (Suc n) = y \\<and>\n                            (\\<forall>i<Suc n. (f i, f (Suc i)) \\<in> r)", "with \\<open>?f 0 = x\\<close> and \\<open>?f ?n = y\\<close>"], ["proof (chain)\npicking this:\n  (if 0 = Suc n then y else f 0) = x\n  (if Suc n = Suc n then y else f (Suc n)) = y\n  \\<forall>i<Suc n.\n     (if i = Suc n then y else f i, if Suc i = Suc n then y else f (Suc i))\n     \\<in> r", "show ?case"], ["proof (prove)\nusing this:\n  (if 0 = Suc n then y else f 0) = x\n  (if Suc n = Suc n then y else f (Suc n)) = y\n  \\<forall>i<Suc n.\n     (if i = Suc n then y else f i, if Suc i = Suc n then y else f (Suc i))\n     \\<in> r\n\ngoal (1 subgoal):\n 1. \\<exists>f.\n       f 0 = x \\<and>\n       f (Suc n) = y \\<and> (\\<forall>i<Suc n. (f i, f (Suc i)) \\<in> r)", "by best"], ["proof (state)\nthis:\n  \\<exists>f.\n     f 0 = x \\<and>\n     f (Suc n) = y \\<and> (\\<forall>i<Suc n. (f i, f (Suc i)) \\<in> r)\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma rtrancl_imp_seq:\n  assumes \"(x, y) \\<in> r\\<^sup>*\"\n  shows \"\\<exists>f n. f 0 = x \\<and> f n = y \\<and> (\\<forall>i<n. (f i, f (Suc i)) \\<in> r)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>f n.\n       f 0 = x \\<and>\n       f n = y \\<and> (\\<forall>i<n. (f i, f (Suc i)) \\<in> r)", "using assms [unfolded rtrancl_power] and relpow_seq [of x y _ r]"], ["proof (prove)\nusing this:\n  \\<exists>n. (x, y) \\<in> r ^^ n\n  (x, y) \\<in> r ^^ ?n \\<Longrightarrow>\n  \\<exists>f.\n     f 0 = x \\<and>\n     f ?n = y \\<and> (\\<forall>i<?n. (f i, f (Suc i)) \\<in> r)\n\ngoal (1 subgoal):\n 1. \\<exists>f n.\n       f 0 = x \\<and>\n       f n = y \\<and> (\\<forall>i<n. (f i, f (Suc i)) \\<in> r)", "by blast"], ["", "lemma SN_on_Image_rtrancl:\n  assumes \"SN_on r A\"\n  shows \"SN_on r (r\\<^sup>* `` A)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. SN_on r (r\\<^sup>* `` A)", "proof"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>f.\n       \\<lbrakk>f 0 \\<in> r\\<^sup>* `` A;\n        \\<forall>i. (f i, f (Suc i)) \\<in> r\\<rbrakk>\n       \\<Longrightarrow> False", "fix f"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>f.\n       \\<lbrakk>f 0 \\<in> r\\<^sup>* `` A;\n        \\<forall>i. (f i, f (Suc i)) \\<in> r\\<rbrakk>\n       \\<Longrightarrow> False", "assume f0: \"f 0 \\<in> r\\<^sup>* `` A\" and chain: \"chain r f\""], ["proof (state)\nthis:\n  f 0 \\<in> r\\<^sup>* `` A\n  \\<forall>i. (f i, f (Suc i)) \\<in> r\n\ngoal (1 subgoal):\n 1. \\<And>f.\n       \\<lbrakk>f 0 \\<in> r\\<^sup>* `` A;\n        \\<forall>i. (f i, f (Suc i)) \\<in> r\\<rbrakk>\n       \\<Longrightarrow> False", "then"], ["proof (chain)\npicking this:\n  f 0 \\<in> r\\<^sup>* `` A\n  \\<forall>i. (f i, f (Suc i)) \\<in> r", "obtain a where a: \"a \\<in> A\" and \"(a, f 0) \\<in> r\\<^sup>*\""], ["proof (prove)\nusing this:\n  f 0 \\<in> r\\<^sup>* `` A\n  \\<forall>i. (f i, f (Suc i)) \\<in> r\n\ngoal (1 subgoal):\n 1. (\\<And>a.\n        \\<lbrakk>a \\<in> A; (a, f 0) \\<in> r\\<^sup>*\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  a \\<in> A\n  (a, f 0) \\<in> r\\<^sup>*\n\ngoal (1 subgoal):\n 1. \\<And>f.\n       \\<lbrakk>f 0 \\<in> r\\<^sup>* `` A;\n        \\<forall>i. (f i, f (Suc i)) \\<in> r\\<rbrakk>\n       \\<Longrightarrow> False", "then"], ["proof (chain)\npicking this:\n  a \\<in> A\n  (a, f 0) \\<in> r\\<^sup>*", "obtain n where \"(a, f 0) \\<in> r^^n\""], ["proof (prove)\nusing this:\n  a \\<in> A\n  (a, f 0) \\<in> r\\<^sup>*\n\ngoal (1 subgoal):\n 1. (\\<And>n.\n        (a, f 0) \\<in> r ^^ n \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "unfolding rtrancl_power"], ["proof (prove)\nusing this:\n  a \\<in> A\n  \\<exists>n. (a, f 0) \\<in> r ^^ n\n\ngoal (1 subgoal):\n 1. (\\<And>n.\n        (a, f 0) \\<in> r ^^ n \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  (a, f 0) \\<in> r ^^ n\n\ngoal (1 subgoal):\n 1. \\<And>f.\n       \\<lbrakk>f 0 \\<in> r\\<^sup>* `` A;\n        \\<forall>i. (f i, f (Suc i)) \\<in> r\\<rbrakk>\n       \\<Longrightarrow> False", "show False"], ["proof (prove)\ngoal (1 subgoal):\n 1. False", "proof (cases n)"], ["proof (state)\ngoal (2 subgoals):\n 1. n = 0 \\<Longrightarrow> False\n 2. \\<And>nat. n = Suc nat \\<Longrightarrow> False", "case 0"], ["proof (state)\nthis:\n  n = 0\n\ngoal (2 subgoals):\n 1. n = 0 \\<Longrightarrow> False\n 2. \\<And>nat. n = Suc nat \\<Longrightarrow> False", "with \\<open>(a, f 0) \\<in> r^^n\\<close>"], ["proof (chain)\npicking this:\n  (a, f 0) \\<in> r ^^ n\n  n = 0", "have \"f 0 = a\""], ["proof (prove)\nusing this:\n  (a, f 0) \\<in> r ^^ n\n  n = 0\n\ngoal (1 subgoal):\n 1. f 0 = a", "by simp"], ["proof (state)\nthis:\n  f 0 = a\n\ngoal (2 subgoals):\n 1. n = 0 \\<Longrightarrow> False\n 2. \\<And>nat. n = Suc nat \\<Longrightarrow> False", "then"], ["proof (chain)\npicking this:\n  f 0 = a", "have \"f 0 \\<in> A\""], ["proof (prove)\nusing this:\n  f 0 = a\n\ngoal (1 subgoal):\n 1. f 0 \\<in> A", "by (simp add: a)"], ["proof (state)\nthis:\n  f 0 \\<in> A\n\ngoal (2 subgoals):\n 1. n = 0 \\<Longrightarrow> False\n 2. \\<And>nat. n = Suc nat \\<Longrightarrow> False", "with chain"], ["proof (chain)\npicking this:\n  \\<forall>i. (f i, f (Suc i)) \\<in> r\n  f 0 \\<in> A", "have \"\\<not> SN_on r A\""], ["proof (prove)\nusing this:\n  \\<forall>i. (f i, f (Suc i)) \\<in> r\n  f 0 \\<in> A\n\ngoal (1 subgoal):\n 1. \\<not> SN_on r A", "by auto"], ["proof (state)\nthis:\n  \\<not> SN_on r A\n\ngoal (2 subgoals):\n 1. n = 0 \\<Longrightarrow> False\n 2. \\<And>nat. n = Suc nat \\<Longrightarrow> False", "with assms"], ["proof (chain)\npicking this:\n  SN_on r A\n  \\<not> SN_on r A", "show False"], ["proof (prove)\nusing this:\n  SN_on r A\n  \\<not> SN_on r A\n\ngoal (1 subgoal):\n 1. False", "by simp"], ["proof (state)\nthis:\n  False\n\ngoal (1 subgoal):\n 1. \\<And>nat. n = Suc nat \\<Longrightarrow> False", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>nat. n = Suc nat \\<Longrightarrow> False", "case (Suc m)"], ["proof (state)\nthis:\n  n = Suc m\n\ngoal (1 subgoal):\n 1. \\<And>nat. n = Suc nat \\<Longrightarrow> False", "from relpow_seq [OF \\<open>(a, f 0) \\<in> r^^n\\<close>]"], ["proof (chain)\npicking this:\n  \\<exists>fa.\n     fa 0 = a \\<and>\n     fa n = f 0 \\<and> (\\<forall>i<n. (fa i, fa (Suc i)) \\<in> r)", "obtain g where g0: \"g 0 = a\" and \"g n = f 0\"\n      and gseq: \"\\<forall>i<n. (g i, g (Suc i)) \\<in> r\""], ["proof (prove)\nusing this:\n  \\<exists>fa.\n     fa 0 = a \\<and>\n     fa n = f 0 \\<and> (\\<forall>i<n. (fa i, fa (Suc i)) \\<in> r)\n\ngoal (1 subgoal):\n 1. (\\<And>g.\n        \\<lbrakk>g 0 = a; g n = f 0;\n         \\<forall>i<n. (g i, g (Suc i)) \\<in> r\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  g 0 = a\n  g n = f 0\n  \\<forall>i<n. (g i, g (Suc i)) \\<in> r\n\ngoal (1 subgoal):\n 1. \\<And>nat. n = Suc nat \\<Longrightarrow> False", "let ?f = \"\\<lambda>i. if i < n then g i else f (i - n)\""], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>nat. n = Suc nat \\<Longrightarrow> False", "have \"chain r ?f\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>i.\n       (if i < n then g i else f (i - n),\n        if Suc i < n then g (Suc i) else f (Suc i - n))\n       \\<in> r", "proof"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>i.\n       (if i < n then g i else f (i - n),\n        if Suc i < n then g (Suc i) else f (Suc i - n))\n       \\<in> r", "fix i"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>i.\n       (if i < n then g i else f (i - n),\n        if Suc i < n then g (Suc i) else f (Suc i - n))\n       \\<in> r", "{"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>i.\n       (if i < n then g i else f (i - n),\n        if Suc i < n then g (Suc i) else f (Suc i - n))\n       \\<in> r", "assume \"Suc i < n\""], ["proof (state)\nthis:\n  Suc i < n\n\ngoal (1 subgoal):\n 1. \\<And>i.\n       (if i < n then g i else f (i - n),\n        if Suc i < n then g (Suc i) else f (Suc i - n))\n       \\<in> r", "then"], ["proof (chain)\npicking this:\n  Suc i < n", "have \"(?f i, ?f (Suc i)) \\<in> r\""], ["proof (prove)\nusing this:\n  Suc i < n\n\ngoal (1 subgoal):\n 1. (if i < n then g i else f (i - n),\n     if Suc i < n then g (Suc i) else f (Suc i - n))\n    \\<in> r", "by (simp add: gseq)"], ["proof (state)\nthis:\n  (if i < n then g i else f (i - n),\n   if Suc i < n then g (Suc i) else f (Suc i - n))\n  \\<in> r\n\ngoal (1 subgoal):\n 1. \\<And>i.\n       (if i < n then g i else f (i - n),\n        if Suc i < n then g (Suc i) else f (Suc i - n))\n       \\<in> r", "}"], ["proof (state)\nthis:\n  Suc i < n \\<Longrightarrow>\n  (if i < n then g i else f (i - n),\n   if Suc i < n then g (Suc i) else f (Suc i - n))\n  \\<in> r\n\ngoal (1 subgoal):\n 1. \\<And>i.\n       (if i < n then g i else f (i - n),\n        if Suc i < n then g (Suc i) else f (Suc i - n))\n       \\<in> r", "moreover"], ["proof (state)\nthis:\n  Suc i < n \\<Longrightarrow>\n  (if i < n then g i else f (i - n),\n   if Suc i < n then g (Suc i) else f (Suc i - n))\n  \\<in> r\n\ngoal (1 subgoal):\n 1. \\<And>i.\n       (if i < n then g i else f (i - n),\n        if Suc i < n then g (Suc i) else f (Suc i - n))\n       \\<in> r", "{"], ["proof (state)\nthis:\n  Suc i < n \\<Longrightarrow>\n  (if i < n then g i else f (i - n),\n   if Suc i < n then g (Suc i) else f (Suc i - n))\n  \\<in> r\n\ngoal (1 subgoal):\n 1. \\<And>i.\n       (if i < n then g i else f (i - n),\n        if Suc i < n then g (Suc i) else f (Suc i - n))\n       \\<in> r", "assume \"Suc i > n\""], ["proof (state)\nthis:\n  n < Suc i\n\ngoal (1 subgoal):\n 1. \\<And>i.\n       (if i < n then g i else f (i - n),\n        if Suc i < n then g (Suc i) else f (Suc i - n))\n       \\<in> r", "then"], ["proof (chain)\npicking this:\n  n < Suc i", "have eq: \"Suc (i - n) = Suc i - n\""], ["proof (prove)\nusing this:\n  n < Suc i\n\ngoal (1 subgoal):\n 1. Suc (i - n) = Suc i - n", "by arith"], ["proof (state)\nthis:\n  Suc (i - n) = Suc i - n\n\ngoal (1 subgoal):\n 1. \\<And>i.\n       (if i < n then g i else f (i - n),\n        if Suc i < n then g (Suc i) else f (Suc i - n))\n       \\<in> r", "from chain"], ["proof (chain)\npicking this:\n  \\<forall>i. (f i, f (Suc i)) \\<in> r", "have \"(f (i - n), f (Suc (i - n))) \\<in> r\""], ["proof (prove)\nusing this:\n  \\<forall>i. (f i, f (Suc i)) \\<in> r\n\ngoal (1 subgoal):\n 1. (f (i - n), f (Suc (i - n))) \\<in> r", "by simp"], ["proof (state)\nthis:\n  (f (i - n), f (Suc (i - n))) \\<in> r\n\ngoal (1 subgoal):\n 1. \\<And>i.\n       (if i < n then g i else f (i - n),\n        if Suc i < n then g (Suc i) else f (Suc i - n))\n       \\<in> r", "then"], ["proof (chain)\npicking this:\n  (f (i - n), f (Suc (i - n))) \\<in> r", "have \"(f (i - n), f (Suc i - n)) \\<in> r\""], ["proof (prove)\nusing this:\n  (f (i - n), f (Suc (i - n))) \\<in> r\n\ngoal (1 subgoal):\n 1. (f (i - n), f (Suc i - n)) \\<in> r", "by (simp add: eq)"], ["proof (state)\nthis:\n  (f (i - n), f (Suc i - n)) \\<in> r\n\ngoal (1 subgoal):\n 1. \\<And>i.\n       (if i < n then g i else f (i - n),\n        if Suc i < n then g (Suc i) else f (Suc i - n))\n       \\<in> r", "with \\<open>Suc i > n\\<close>"], ["proof (chain)\npicking this:\n  n < Suc i\n  (f (i - n), f (Suc i - n)) \\<in> r", "have \"(?f i, ?f (Suc i)) \\<in> r\""], ["proof (prove)\nusing this:\n  n < Suc i\n  (f (i - n), f (Suc i - n)) \\<in> r\n\ngoal (1 subgoal):\n 1. (if i < n then g i else f (i - n),\n     if Suc i < n then g (Suc i) else f (Suc i - n))\n    \\<in> r", "by simp"], ["proof (state)\nthis:\n  (if i < n then g i else f (i - n),\n   if Suc i < n then g (Suc i) else f (Suc i - n))\n  \\<in> r\n\ngoal (1 subgoal):\n 1. \\<And>i.\n       (if i < n then g i else f (i - n),\n        if Suc i < n then g (Suc i) else f (Suc i - n))\n       \\<in> r", "}"], ["proof (state)\nthis:\n  n < Suc i \\<Longrightarrow>\n  (if i < n then g i else f (i - n),\n   if Suc i < n then g (Suc i) else f (Suc i - n))\n  \\<in> r\n\ngoal (1 subgoal):\n 1. \\<And>i.\n       (if i < n then g i else f (i - n),\n        if Suc i < n then g (Suc i) else f (Suc i - n))\n       \\<in> r", "moreover"], ["proof (state)\nthis:\n  n < Suc i \\<Longrightarrow>\n  (if i < n then g i else f (i - n),\n   if Suc i < n then g (Suc i) else f (Suc i - n))\n  \\<in> r\n\ngoal (1 subgoal):\n 1. \\<And>i.\n       (if i < n then g i else f (i - n),\n        if Suc i < n then g (Suc i) else f (Suc i - n))\n       \\<in> r", "{"], ["proof (state)\nthis:\n  n < Suc i \\<Longrightarrow>\n  (if i < n then g i else f (i - n),\n   if Suc i < n then g (Suc i) else f (Suc i - n))\n  \\<in> r\n\ngoal (1 subgoal):\n 1. \\<And>i.\n       (if i < n then g i else f (i - n),\n        if Suc i < n then g (Suc i) else f (Suc i - n))\n       \\<in> r", "assume \"Suc i = n\""], ["proof (state)\nthis:\n  Suc i = n\n\ngoal (1 subgoal):\n 1. \\<And>i.\n       (if i < n then g i else f (i - n),\n        if Suc i < n then g (Suc i) else f (Suc i - n))\n       \\<in> r", "then"], ["proof (chain)\npicking this:\n  Suc i = n", "have eq: \"f (Suc i - n) = g n\""], ["proof (prove)\nusing this:\n  Suc i = n\n\ngoal (1 subgoal):\n 1. f (Suc i - n) = g n", "by (simp add: \\<open>g n = f 0\\<close>)"], ["proof (state)\nthis:\n  f (Suc i - n) = g n\n\ngoal (1 subgoal):\n 1. \\<And>i.\n       (if i < n then g i else f (i - n),\n        if Suc i < n then g (Suc i) else f (Suc i - n))\n       \\<in> r", "from \\<open>Suc i = n\\<close>"], ["proof (chain)\npicking this:\n  Suc i = n", "have eq': \"i = n - 1\""], ["proof (prove)\nusing this:\n  Suc i = n\n\ngoal (1 subgoal):\n 1. i = n - 1", "by arith"], ["proof (state)\nthis:\n  i = n - 1\n\ngoal (1 subgoal):\n 1. \\<And>i.\n       (if i < n then g i else f (i - n),\n        if Suc i < n then g (Suc i) else f (Suc i - n))\n       \\<in> r", "from gseq"], ["proof (chain)\npicking this:\n  \\<forall>i<n. (g i, g (Suc i)) \\<in> r", "have \"(g i, f (Suc i - n)) \\<in> r\""], ["proof (prove)\nusing this:\n  \\<forall>i<n. (g i, g (Suc i)) \\<in> r\n\ngoal (1 subgoal):\n 1. (g i, f (Suc i - n)) \\<in> r", "unfolding eq"], ["proof (prove)\nusing this:\n  \\<forall>i<n. (g i, g (Suc i)) \\<in> r\n\ngoal (1 subgoal):\n 1. (g i, g n) \\<in> r", "by (simp add: Suc eq')"], ["proof (state)\nthis:\n  (g i, f (Suc i - n)) \\<in> r\n\ngoal (1 subgoal):\n 1. \\<And>i.\n       (if i < n then g i else f (i - n),\n        if Suc i < n then g (Suc i) else f (Suc i - n))\n       \\<in> r", "then"], ["proof (chain)\npicking this:\n  (g i, f (Suc i - n)) \\<in> r", "have \"(?f i, ?f (Suc i)) \\<in> r\""], ["proof (prove)\nusing this:\n  (g i, f (Suc i - n)) \\<in> r\n\ngoal (1 subgoal):\n 1. (if i < n then g i else f (i - n),\n     if Suc i < n then g (Suc i) else f (Suc i - n))\n    \\<in> r", "using \\<open>Suc i = n\\<close>"], ["proof (prove)\nusing this:\n  (g i, f (Suc i - n)) \\<in> r\n  Suc i = n\n\ngoal (1 subgoal):\n 1. (if i < n then g i else f (i - n),\n     if Suc i < n then g (Suc i) else f (Suc i - n))\n    \\<in> r", "by simp"], ["proof (state)\nthis:\n  (if i < n then g i else f (i - n),\n   if Suc i < n then g (Suc i) else f (Suc i - n))\n  \\<in> r\n\ngoal (1 subgoal):\n 1. \\<And>i.\n       (if i < n then g i else f (i - n),\n        if Suc i < n then g (Suc i) else f (Suc i - n))\n       \\<in> r", "}"], ["proof (state)\nthis:\n  Suc i = n \\<Longrightarrow>\n  (if i < n then g i else f (i - n),\n   if Suc i < n then g (Suc i) else f (Suc i - n))\n  \\<in> r\n\ngoal (1 subgoal):\n 1. \\<And>i.\n       (if i < n then g i else f (i - n),\n        if Suc i < n then g (Suc i) else f (Suc i - n))\n       \\<in> r", "ultimately"], ["proof (chain)\npicking this:\n  Suc i < n \\<Longrightarrow>\n  (if i < n then g i else f (i - n),\n   if Suc i < n then g (Suc i) else f (Suc i - n))\n  \\<in> r\n  n < Suc i \\<Longrightarrow>\n  (if i < n then g i else f (i - n),\n   if Suc i < n then g (Suc i) else f (Suc i - n))\n  \\<in> r\n  Suc i = n \\<Longrightarrow>\n  (if i < n then g i else f (i - n),\n   if Suc i < n then g (Suc i) else f (Suc i - n))\n  \\<in> r", "show \"(?f i, ?f (Suc i)) \\<in> r\""], ["proof (prove)\nusing this:\n  Suc i < n \\<Longrightarrow>\n  (if i < n then g i else f (i - n),\n   if Suc i < n then g (Suc i) else f (Suc i - n))\n  \\<in> r\n  n < Suc i \\<Longrightarrow>\n  (if i < n then g i else f (i - n),\n   if Suc i < n then g (Suc i) else f (Suc i - n))\n  \\<in> r\n  Suc i = n \\<Longrightarrow>\n  (if i < n then g i else f (i - n),\n   if Suc i < n then g (Suc i) else f (Suc i - n))\n  \\<in> r\n\ngoal (1 subgoal):\n 1. (if i < n then g i else f (i - n),\n     if Suc i < n then g (Suc i) else f (Suc i - n))\n    \\<in> r", "by simp"], ["proof (state)\nthis:\n  (if i < n then g i else f (i - n),\n   if Suc i < n then g (Suc i) else f (Suc i - n))\n  \\<in> r\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<forall>i.\n     (if i < n then g i else f (i - n),\n      if Suc i < n then g (Suc i) else f (Suc i - n))\n     \\<in> r\n\ngoal (1 subgoal):\n 1. \\<And>nat. n = Suc nat \\<Longrightarrow> False", "moreover"], ["proof (state)\nthis:\n  \\<forall>i.\n     (if i < n then g i else f (i - n),\n      if Suc i < n then g (Suc i) else f (Suc i - n))\n     \\<in> r\n\ngoal (1 subgoal):\n 1. \\<And>nat. n = Suc nat \\<Longrightarrow> False", "have \"?f 0 \\<in> A\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (if 0 < n then g 0 else f (0 - n)) \\<in> A", "proof (cases n)"], ["proof (state)\ngoal (2 subgoals):\n 1. n = 0 \\<Longrightarrow> (if 0 < n then g 0 else f (0 - n)) \\<in> A\n 2. \\<And>nat.\n       n = Suc nat \\<Longrightarrow>\n       (if 0 < n then g 0 else f (0 - n)) \\<in> A", "case 0"], ["proof (state)\nthis:\n  n = 0\n\ngoal (2 subgoals):\n 1. n = 0 \\<Longrightarrow> (if 0 < n then g 0 else f (0 - n)) \\<in> A\n 2. \\<And>nat.\n       n = Suc nat \\<Longrightarrow>\n       (if 0 < n then g 0 else f (0 - n)) \\<in> A", "with \\<open>(a, f 0) \\<in> r^^n\\<close>"], ["proof (chain)\npicking this:\n  (a, f 0) \\<in> r ^^ n\n  n = 0", "have eq: \"a = f 0\""], ["proof (prove)\nusing this:\n  (a, f 0) \\<in> r ^^ n\n  n = 0\n\ngoal (1 subgoal):\n 1. a = f 0", "by simp"], ["proof (state)\nthis:\n  a = f 0\n\ngoal (2 subgoals):\n 1. n = 0 \\<Longrightarrow> (if 0 < n then g 0 else f (0 - n)) \\<in> A\n 2. \\<And>nat.\n       n = Suc nat \\<Longrightarrow>\n       (if 0 < n then g 0 else f (0 - n)) \\<in> A", "from a"], ["proof (chain)\npicking this:\n  a \\<in> A", "show ?thesis"], ["proof (prove)\nusing this:\n  a \\<in> A\n\ngoal (1 subgoal):\n 1. (if 0 < n then g 0 else f (0 - n)) \\<in> A", "by (simp add: eq 0)"], ["proof (state)\nthis:\n  (if 0 < n then g 0 else f (0 - n)) \\<in> A\n\ngoal (1 subgoal):\n 1. \\<And>nat.\n       n = Suc nat \\<Longrightarrow>\n       (if 0 < n then g 0 else f (0 - n)) \\<in> A", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>nat.\n       n = Suc nat \\<Longrightarrow>\n       (if 0 < n then g 0 else f (0 - n)) \\<in> A", "case (Suc m)"], ["proof (state)\nthis:\n  n = Suc m\n\ngoal (1 subgoal):\n 1. \\<And>nat.\n       n = Suc nat \\<Longrightarrow>\n       (if 0 < n then g 0 else f (0 - n)) \\<in> A", "then"], ["proof (chain)\npicking this:\n  n = Suc m", "show ?thesis"], ["proof (prove)\nusing this:\n  n = Suc m\n\ngoal (1 subgoal):\n 1. (if 0 < n then g 0 else f (0 - n)) \\<in> A", "by (simp add: a g0)"], ["proof (state)\nthis:\n  (if 0 < n then g 0 else f (0 - n)) \\<in> A\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  (if 0 < n then g 0 else f (0 - n)) \\<in> A\n\ngoal (1 subgoal):\n 1. \\<And>nat. n = Suc nat \\<Longrightarrow> False", "ultimately"], ["proof (chain)\npicking this:\n  \\<forall>i.\n     (if i < n then g i else f (i - n),\n      if Suc i < n then g (Suc i) else f (Suc i - n))\n     \\<in> r\n  (if 0 < n then g 0 else f (0 - n)) \\<in> A", "have \"\\<not> SN_on r A\""], ["proof (prove)\nusing this:\n  \\<forall>i.\n     (if i < n then g i else f (i - n),\n      if Suc i < n then g (Suc i) else f (Suc i - n))\n     \\<in> r\n  (if 0 < n then g 0 else f (0 - n)) \\<in> A\n\ngoal (1 subgoal):\n 1. \\<not> SN_on r A", "unfolding SN_defs"], ["proof (prove)\nusing this:\n  \\<forall>i.\n     (if i < n then g i else f (i - n),\n      if Suc i < n then g (Suc i) else f (Suc i - n))\n     \\<in> r\n  (if 0 < n then g 0 else f (0 - n)) \\<in> A\n\ngoal (1 subgoal):\n 1. \\<not> (\\<nexists>f.\n               f 0 \\<in> A \\<and> (\\<forall>i. (f i, f (Suc i)) \\<in> r))", "by best"], ["proof (state)\nthis:\n  \\<not> SN_on r A\n\ngoal (1 subgoal):\n 1. \\<And>nat. n = Suc nat \\<Longrightarrow> False", "with assms"], ["proof (chain)\npicking this:\n  SN_on r A\n  \\<not> SN_on r A", "show False"], ["proof (prove)\nusing this:\n  SN_on r A\n  \\<not> SN_on r A\n\ngoal (1 subgoal):\n 1. False", "by simp"], ["proof (state)\nthis:\n  False\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  False\n\ngoal:\nNo subgoals!", "qed"], ["", "(* FIXME: move somewhere else *)"], ["", "declare subrelI [Pure.intro]"], ["", "lemma restrict_SN_trancl_simp [simp]: \"(restrict_SN A A)\\<^sup>+ = restrict_SN (A\\<^sup>+) A\" (is \"?lhs = ?rhs\")"], ["proof (prove)\ngoal (1 subgoal):\n 1. (restrict_SN A A)\\<^sup>+ = restrict_SN (A\\<^sup>+) A", "proof"], ["proof (state)\ngoal (2 subgoals):\n 1. (restrict_SN A A)\\<^sup>+ \\<subseteq> restrict_SN (A\\<^sup>+) A\n 2. restrict_SN (A\\<^sup>+) A \\<subseteq> (restrict_SN A A)\\<^sup>+", "show \"?lhs \\<subseteq> ?rhs\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (restrict_SN A A)\\<^sup>+ \\<subseteq> restrict_SN (A\\<^sup>+) A", "proof"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x y.\n       (x, y) \\<in> (restrict_SN A A)\\<^sup>+ \\<Longrightarrow>\n       (x, y) \\<in> restrict_SN (A\\<^sup>+) A", "fix a b"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x y.\n       (x, y) \\<in> (restrict_SN A A)\\<^sup>+ \\<Longrightarrow>\n       (x, y) \\<in> restrict_SN (A\\<^sup>+) A", "assume \"(a, b) \\<in> ?lhs\""], ["proof (state)\nthis:\n  (a, b) \\<in> (restrict_SN A A)\\<^sup>+\n\ngoal (1 subgoal):\n 1. \\<And>x y.\n       (x, y) \\<in> (restrict_SN A A)\\<^sup>+ \\<Longrightarrow>\n       (x, y) \\<in> restrict_SN (A\\<^sup>+) A", "then"], ["proof (chain)\npicking this:\n  (a, b) \\<in> (restrict_SN A A)\\<^sup>+", "show \"(a, b) \\<in> ?rhs\""], ["proof (prove)\nusing this:\n  (a, b) \\<in> (restrict_SN A A)\\<^sup>+\n\ngoal (1 subgoal):\n 1. (a, b) \\<in> restrict_SN (A\\<^sup>+) A", "unfolding restrict_SN_def"], ["proof (prove)\nusing this:\n  (a, b) \\<in> {(a, b) |a b. (a, b) \\<in> A \\<and> SN_on A {a}}\\<^sup>+\n\ngoal (1 subgoal):\n 1. (a, b) \\<in> {(a, b) |a b. (a, b) \\<in> A\\<^sup>+ \\<and> SN_on A {a}}", "by (induct rule: trancl.induct) auto"], ["proof (state)\nthis:\n  (a, b) \\<in> restrict_SN (A\\<^sup>+) A\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  (restrict_SN A A)\\<^sup>+ \\<subseteq> restrict_SN (A\\<^sup>+) A\n\ngoal (1 subgoal):\n 1. restrict_SN (A\\<^sup>+) A \\<subseteq> (restrict_SN A A)\\<^sup>+", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. restrict_SN (A\\<^sup>+) A \\<subseteq> (restrict_SN A A)\\<^sup>+", "show \"?rhs \\<subseteq> ?lhs\""], ["proof (prove)\ngoal (1 subgoal):\n 1. restrict_SN (A\\<^sup>+) A \\<subseteq> (restrict_SN A A)\\<^sup>+", "proof"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x y.\n       (x, y) \\<in> restrict_SN (A\\<^sup>+) A \\<Longrightarrow>\n       (x, y) \\<in> (restrict_SN A A)\\<^sup>+", "fix a b"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x y.\n       (x, y) \\<in> restrict_SN (A\\<^sup>+) A \\<Longrightarrow>\n       (x, y) \\<in> (restrict_SN A A)\\<^sup>+", "assume \"(a, b) \\<in> ?rhs\""], ["proof (state)\nthis:\n  (a, b) \\<in> restrict_SN (A\\<^sup>+) A\n\ngoal (1 subgoal):\n 1. \\<And>x y.\n       (x, y) \\<in> restrict_SN (A\\<^sup>+) A \\<Longrightarrow>\n       (x, y) \\<in> (restrict_SN A A)\\<^sup>+", "then"], ["proof (chain)\npicking this:\n  (a, b) \\<in> restrict_SN (A\\<^sup>+) A", "have \"(a, b) \\<in> A\\<^sup>+\" and \"SN_on A {a}\""], ["proof (prove)\nusing this:\n  (a, b) \\<in> restrict_SN (A\\<^sup>+) A\n\ngoal (1 subgoal):\n 1. (a, b) \\<in> A\\<^sup>+ &&& SN_on A {a}", "unfolding restrict_SN_def"], ["proof (prove)\nusing this:\n  (a, b) \\<in> {(a, b) |a b. (a, b) \\<in> A\\<^sup>+ \\<and> SN_on A {a}}\n\ngoal (1 subgoal):\n 1. (a, b) \\<in> A\\<^sup>+ &&& SN_on A {a}", "by auto"], ["proof (state)\nthis:\n  (a, b) \\<in> A\\<^sup>+\n  SN_on A {a}\n\ngoal (1 subgoal):\n 1. \\<And>x y.\n       (x, y) \\<in> restrict_SN (A\\<^sup>+) A \\<Longrightarrow>\n       (x, y) \\<in> (restrict_SN A A)\\<^sup>+", "then"], ["proof (chain)\npicking this:\n  (a, b) \\<in> A\\<^sup>+\n  SN_on A {a}", "show \"(a, b) \\<in> ?lhs\""], ["proof (prove)\nusing this:\n  (a, b) \\<in> A\\<^sup>+\n  SN_on A {a}\n\ngoal (1 subgoal):\n 1. (a, b) \\<in> (restrict_SN A A)\\<^sup>+", "proof (induct rule: trancl.induct)"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>a b.\n       \\<lbrakk>(a, b) \\<in> A; SN_on A {a}\\<rbrakk>\n       \\<Longrightarrow> (a, b) \\<in> (restrict_SN A A)\\<^sup>+\n 2. \\<And>a b c.\n       \\<lbrakk>(a, b) \\<in> A\\<^sup>+;\n        SN_on A {a} \\<Longrightarrow>\n        (a, b) \\<in> (restrict_SN A A)\\<^sup>+;\n        (b, c) \\<in> A; SN_on A {a}\\<rbrakk>\n       \\<Longrightarrow> (a, c) \\<in> (restrict_SN A A)\\<^sup>+", "case (r_into_trancl x y)"], ["proof (state)\nthis:\n  (x, y) \\<in> A\n  SN_on A {x}\n\ngoal (2 subgoals):\n 1. \\<And>a b.\n       \\<lbrakk>(a, b) \\<in> A; SN_on A {a}\\<rbrakk>\n       \\<Longrightarrow> (a, b) \\<in> (restrict_SN A A)\\<^sup>+\n 2. \\<And>a b c.\n       \\<lbrakk>(a, b) \\<in> A\\<^sup>+;\n        SN_on A {a} \\<Longrightarrow>\n        (a, b) \\<in> (restrict_SN A A)\\<^sup>+;\n        (b, c) \\<in> A; SN_on A {a}\\<rbrakk>\n       \\<Longrightarrow> (a, c) \\<in> (restrict_SN A A)\\<^sup>+", "then"], ["proof (chain)\npicking this:\n  (x, y) \\<in> A\n  SN_on A {x}", "show ?case"], ["proof (prove)\nusing this:\n  (x, y) \\<in> A\n  SN_on A {x}\n\ngoal (1 subgoal):\n 1. (x, y) \\<in> (restrict_SN A A)\\<^sup>+", "unfolding restrict_SN_def"], ["proof (prove)\nusing this:\n  (x, y) \\<in> A\n  SN_on A {x}\n\ngoal (1 subgoal):\n 1. (x, y) \\<in> {(a, b) |a b. (a, b) \\<in> A \\<and> SN_on A {a}}\\<^sup>+", "by auto"], ["proof (state)\nthis:\n  (x, y) \\<in> (restrict_SN A A)\\<^sup>+\n\ngoal (1 subgoal):\n 1. \\<And>a b c.\n       \\<lbrakk>(a, b) \\<in> A\\<^sup>+;\n        SN_on A {a} \\<Longrightarrow>\n        (a, b) \\<in> (restrict_SN A A)\\<^sup>+;\n        (b, c) \\<in> A; SN_on A {a}\\<rbrakk>\n       \\<Longrightarrow> (a, c) \\<in> (restrict_SN A A)\\<^sup>+", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>a b c.\n       \\<lbrakk>(a, b) \\<in> A\\<^sup>+;\n        SN_on A {a} \\<Longrightarrow>\n        (a, b) \\<in> (restrict_SN A A)\\<^sup>+;\n        (b, c) \\<in> A; SN_on A {a}\\<rbrakk>\n       \\<Longrightarrow> (a, c) \\<in> (restrict_SN A A)\\<^sup>+", "case (trancl_into_trancl a b c)"], ["proof (state)\nthis:\n  (a, b) \\<in> A\\<^sup>+\n  SN_on A {a} \\<Longrightarrow> (a, b) \\<in> (restrict_SN A A)\\<^sup>+\n  (b, c) \\<in> A\n  SN_on A {a}\n\ngoal (1 subgoal):\n 1. \\<And>a b c.\n       \\<lbrakk>(a, b) \\<in> A\\<^sup>+;\n        SN_on A {a} \\<Longrightarrow>\n        (a, b) \\<in> (restrict_SN A A)\\<^sup>+;\n        (b, c) \\<in> A; SN_on A {a}\\<rbrakk>\n       \\<Longrightarrow> (a, c) \\<in> (restrict_SN A A)\\<^sup>+", "then"], ["proof (chain)\npicking this:\n  (a, b) \\<in> A\\<^sup>+\n  SN_on A {a} \\<Longrightarrow> (a, b) \\<in> (restrict_SN A A)\\<^sup>+\n  (b, c) \\<in> A\n  SN_on A {a}", "have IH: \"(a, b) \\<in> ?lhs\""], ["proof (prove)\nusing this:\n  (a, b) \\<in> A\\<^sup>+\n  SN_on A {a} \\<Longrightarrow> (a, b) \\<in> (restrict_SN A A)\\<^sup>+\n  (b, c) \\<in> A\n  SN_on A {a}\n\ngoal (1 subgoal):\n 1. (a, b) \\<in> (restrict_SN A A)\\<^sup>+", "by auto"], ["proof (state)\nthis:\n  (a, b) \\<in> (restrict_SN A A)\\<^sup>+\n\ngoal (1 subgoal):\n 1. \\<And>a b c.\n       \\<lbrakk>(a, b) \\<in> A\\<^sup>+;\n        SN_on A {a} \\<Longrightarrow>\n        (a, b) \\<in> (restrict_SN A A)\\<^sup>+;\n        (b, c) \\<in> A; SN_on A {a}\\<rbrakk>\n       \\<Longrightarrow> (a, c) \\<in> (restrict_SN A A)\\<^sup>+", "from trancl_into_trancl"], ["proof (chain)\npicking this:\n  (a, b) \\<in> A\\<^sup>+\n  SN_on A {a} \\<Longrightarrow> (a, b) \\<in> (restrict_SN A A)\\<^sup>+\n  (b, c) \\<in> A\n  SN_on A {a}", "have \"(a, b) \\<in> A\\<^sup>*\""], ["proof (prove)\nusing this:\n  (a, b) \\<in> A\\<^sup>+\n  SN_on A {a} \\<Longrightarrow> (a, b) \\<in> (restrict_SN A A)\\<^sup>+\n  (b, c) \\<in> A\n  SN_on A {a}\n\ngoal (1 subgoal):\n 1. (a, b) \\<in> A\\<^sup>*", "by auto"], ["proof (state)\nthis:\n  (a, b) \\<in> A\\<^sup>*\n\ngoal (1 subgoal):\n 1. \\<And>a b c.\n       \\<lbrakk>(a, b) \\<in> A\\<^sup>+;\n        SN_on A {a} \\<Longrightarrow>\n        (a, b) \\<in> (restrict_SN A A)\\<^sup>+;\n        (b, c) \\<in> A; SN_on A {a}\\<rbrakk>\n       \\<Longrightarrow> (a, c) \\<in> (restrict_SN A A)\\<^sup>+", "from this and \\<open>SN_on A {a}\\<close>"], ["proof (chain)\npicking this:\n  (a, b) \\<in> A\\<^sup>*\n  SN_on A {a}", "have \"SN_on A {b}\""], ["proof (prove)\nusing this:\n  (a, b) \\<in> A\\<^sup>*\n  SN_on A {a}\n\ngoal (1 subgoal):\n 1. SN_on A {b}", "by (rule steps_preserve_SN_on)"], ["proof (state)\nthis:\n  SN_on A {b}\n\ngoal (1 subgoal):\n 1. \\<And>a b c.\n       \\<lbrakk>(a, b) \\<in> A\\<^sup>+;\n        SN_on A {a} \\<Longrightarrow>\n        (a, b) \\<in> (restrict_SN A A)\\<^sup>+;\n        (b, c) \\<in> A; SN_on A {a}\\<rbrakk>\n       \\<Longrightarrow> (a, c) \\<in> (restrict_SN A A)\\<^sup>+", "with \\<open>(b, c) \\<in> A\\<close>"], ["proof (chain)\npicking this:\n  (b, c) \\<in> A\n  SN_on A {b}", "have \"(b, c) \\<in> ?lhs\""], ["proof (prove)\nusing this:\n  (b, c) \\<in> A\n  SN_on A {b}\n\ngoal (1 subgoal):\n 1. (b, c) \\<in> (restrict_SN A A)\\<^sup>+", "unfolding restrict_SN_def"], ["proof (prove)\nusing this:\n  (b, c) \\<in> A\n  SN_on A {b}\n\ngoal (1 subgoal):\n 1. (b, c) \\<in> {(a, b) |a b. (a, b) \\<in> A \\<and> SN_on A {a}}\\<^sup>+", "by auto"], ["proof (state)\nthis:\n  (b, c) \\<in> (restrict_SN A A)\\<^sup>+\n\ngoal (1 subgoal):\n 1. \\<And>a b c.\n       \\<lbrakk>(a, b) \\<in> A\\<^sup>+;\n        SN_on A {a} \\<Longrightarrow>\n        (a, b) \\<in> (restrict_SN A A)\\<^sup>+;\n        (b, c) \\<in> A; SN_on A {a}\\<rbrakk>\n       \\<Longrightarrow> (a, c) \\<in> (restrict_SN A A)\\<^sup>+", "with IH"], ["proof (chain)\npicking this:\n  (a, b) \\<in> (restrict_SN A A)\\<^sup>+\n  (b, c) \\<in> (restrict_SN A A)\\<^sup>+", "show ?case"], ["proof (prove)\nusing this:\n  (a, b) \\<in> (restrict_SN A A)\\<^sup>+\n  (b, c) \\<in> (restrict_SN A A)\\<^sup>+\n\ngoal (1 subgoal):\n 1. (a, c) \\<in> (restrict_SN A A)\\<^sup>+", "by simp"], ["proof (state)\nthis:\n  (a, c) \\<in> (restrict_SN A A)\\<^sup>+\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  (a, b) \\<in> (restrict_SN A A)\\<^sup>+\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  restrict_SN (A\\<^sup>+) A \\<subseteq> (restrict_SN A A)\\<^sup>+\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma SN_imp_WN:\n  assumes \"SN A\" shows \"WN A\""], ["proof (prove)\ngoal (1 subgoal):\n 1. WN A", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. WN A", "from \\<open>SN A\\<close>"], ["proof (chain)\npicking this:\n  SN A", "have \"wf (A\\<inverse>)\""], ["proof (prove)\nusing this:\n  SN A\n\ngoal (1 subgoal):\n 1. wf (A\\<inverse>)", "by (simp add: SN_defs wf_iff_no_infinite_down_chain)"], ["proof (state)\nthis:\n  wf (A\\<inverse>)\n\ngoal (1 subgoal):\n 1. WN A", "show \"WN A\""], ["proof (prove)\ngoal (1 subgoal):\n 1. WN A", "proof"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>a.\n       a \\<in> UNIV \\<Longrightarrow> \\<exists>b. (a, b) \\<in> A\\<^sup>!", "fix a"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>a.\n       a \\<in> UNIV \\<Longrightarrow> \\<exists>b. (a, b) \\<in> A\\<^sup>!", "show \"\\<exists>b. (a, b) \\<in> A\\<^sup>!\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>b. (a, b) \\<in> A\\<^sup>!", "unfolding normalizability_def NF_def Image_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>b.\n       (a, b)\n       \\<in> {(a, b).\n              (a, b) \\<in> A\\<^sup>* \\<and>\n              b \\<in> {a. {y. \\<exists>x\\<in>{a}. (x, y) \\<in> A} = {}}}", "by (rule wfE_min [OF \\<open>wf (A\\<inverse>)\\<close>, of a \"A\\<^sup>* `` {a}\", simplified])\n         (auto intro: rtrancl_into_rtrancl)"], ["proof (state)\nthis:\n  \\<exists>b. (a, b) \\<in> A\\<^sup>!\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  WN A\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma UNC_imp_UNF:\n assumes \"UNC r\" shows \"UNF r\""], ["proof (prove)\ngoal (1 subgoal):\n 1. UNF r", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. UNF r", "{"], ["proof (state)\ngoal (1 subgoal):\n 1. UNF r", "fix x y z"], ["proof (state)\ngoal (1 subgoal):\n 1. UNF r", "assume \"(x, y) \\<in> r\\<^sup>!\" and \"(x, z) \\<in> r\\<^sup>!\""], ["proof (state)\nthis:\n  (x, y) \\<in> r\\<^sup>!\n  (x, z) \\<in> r\\<^sup>!\n\ngoal (1 subgoal):\n 1. UNF r", "then"], ["proof (chain)\npicking this:\n  (x, y) \\<in> r\\<^sup>!\n  (x, z) \\<in> r\\<^sup>!", "have \"(x, y) \\<in> r\\<^sup>*\" and \"(x, z) \\<in> r\\<^sup>*\" and \"y \\<in> NF r\" and \"z \\<in> NF r\""], ["proof (prove)\nusing this:\n  (x, y) \\<in> r\\<^sup>!\n  (x, z) \\<in> r\\<^sup>!\n\ngoal (1 subgoal):\n 1. ((x, y) \\<in> r\\<^sup>* &&& (x, z) \\<in> r\\<^sup>*) &&&\n    y \\<in> NF r &&& z \\<in> NF r", "by auto"], ["proof (state)\nthis:\n  (x, y) \\<in> r\\<^sup>*\n  (x, z) \\<in> r\\<^sup>*\n  y \\<in> NF r\n  z \\<in> NF r\n\ngoal (1 subgoal):\n 1. UNF r", "then"], ["proof (chain)\npicking this:\n  (x, y) \\<in> r\\<^sup>*\n  (x, z) \\<in> r\\<^sup>*\n  y \\<in> NF r\n  z \\<in> NF r", "have \"(x, y) \\<in> r\\<^sup>\\<leftrightarrow>\\<^sup>*\" and \"(x, z) \\<in> r\\<^sup>\\<leftrightarrow>\\<^sup>*\""], ["proof (prove)\nusing this:\n  (x, y) \\<in> r\\<^sup>*\n  (x, z) \\<in> r\\<^sup>*\n  y \\<in> NF r\n  z \\<in> NF r\n\ngoal (1 subgoal):\n 1. (x, y) \\<in> r\\<^sup>\\<leftrightarrow>\\<^sup>* &&&\n    (x, z) \\<in> r\\<^sup>\\<leftrightarrow>\\<^sup>*", "by auto"], ["proof (state)\nthis:\n  (x, y) \\<in> r\\<^sup>\\<leftrightarrow>\\<^sup>*\n  (x, z) \\<in> r\\<^sup>\\<leftrightarrow>\\<^sup>*\n\ngoal (1 subgoal):\n 1. UNF r", "then"], ["proof (chain)\npicking this:\n  (x, y) \\<in> r\\<^sup>\\<leftrightarrow>\\<^sup>*\n  (x, z) \\<in> r\\<^sup>\\<leftrightarrow>\\<^sup>*", "have \"(z, x) \\<in> r\\<^sup>\\<leftrightarrow>\\<^sup>*\""], ["proof (prove)\nusing this:\n  (x, y) \\<in> r\\<^sup>\\<leftrightarrow>\\<^sup>*\n  (x, z) \\<in> r\\<^sup>\\<leftrightarrow>\\<^sup>*\n\ngoal (1 subgoal):\n 1. (z, x) \\<in> r\\<^sup>\\<leftrightarrow>\\<^sup>*", "using conversion_sym"], ["proof (prove)\nusing this:\n  (x, y) \\<in> r\\<^sup>\\<leftrightarrow>\\<^sup>*\n  (x, z) \\<in> r\\<^sup>\\<leftrightarrow>\\<^sup>*\n  sym (?A\\<^sup>\\<leftrightarrow>\\<^sup>*)\n\ngoal (1 subgoal):\n 1. (z, x) \\<in> r\\<^sup>\\<leftrightarrow>\\<^sup>*", "unfolding sym_def"], ["proof (prove)\nusing this:\n  (x, y) \\<in> r\\<^sup>\\<leftrightarrow>\\<^sup>*\n  (x, z) \\<in> r\\<^sup>\\<leftrightarrow>\\<^sup>*\n  \\<forall>x y.\n     (x, y) \\<in> ?A\\<^sup>\\<leftrightarrow>\\<^sup>* \\<longrightarrow>\n     (y, x) \\<in> ?A\\<^sup>\\<leftrightarrow>\\<^sup>*\n\ngoal (1 subgoal):\n 1. (z, x) \\<in> r\\<^sup>\\<leftrightarrow>\\<^sup>*", "by best"], ["proof (state)\nthis:\n  (z, x) \\<in> r\\<^sup>\\<leftrightarrow>\\<^sup>*\n\ngoal (1 subgoal):\n 1. UNF r", "with \\<open>(x, y) \\<in> r\\<^sup>\\<leftrightarrow>\\<^sup>*\\<close>"], ["proof (chain)\npicking this:\n  (x, y) \\<in> r\\<^sup>\\<leftrightarrow>\\<^sup>*\n  (z, x) \\<in> r\\<^sup>\\<leftrightarrow>\\<^sup>*", "have \"(z, y) \\<in> r\\<^sup>\\<leftrightarrow>\\<^sup>*\""], ["proof (prove)\nusing this:\n  (x, y) \\<in> r\\<^sup>\\<leftrightarrow>\\<^sup>*\n  (z, x) \\<in> r\\<^sup>\\<leftrightarrow>\\<^sup>*\n\ngoal (1 subgoal):\n 1. (z, y) \\<in> r\\<^sup>\\<leftrightarrow>\\<^sup>*", "using conversion_trans"], ["proof (prove)\nusing this:\n  (x, y) \\<in> r\\<^sup>\\<leftrightarrow>\\<^sup>*\n  (z, x) \\<in> r\\<^sup>\\<leftrightarrow>\\<^sup>*\n  trans (?A\\<^sup>\\<leftrightarrow>\\<^sup>*)\n\ngoal (1 subgoal):\n 1. (z, y) \\<in> r\\<^sup>\\<leftrightarrow>\\<^sup>*", "unfolding trans_def"], ["proof (prove)\nusing this:\n  (x, y) \\<in> r\\<^sup>\\<leftrightarrow>\\<^sup>*\n  (z, x) \\<in> r\\<^sup>\\<leftrightarrow>\\<^sup>*\n  \\<forall>x y z.\n     (x, y) \\<in> ?A\\<^sup>\\<leftrightarrow>\\<^sup>* \\<longrightarrow>\n     (y, z) \\<in> ?A\\<^sup>\\<leftrightarrow>\\<^sup>* \\<longrightarrow>\n     (x, z) \\<in> ?A\\<^sup>\\<leftrightarrow>\\<^sup>*\n\ngoal (1 subgoal):\n 1. (z, y) \\<in> r\\<^sup>\\<leftrightarrow>\\<^sup>*", "by best"], ["proof (state)\nthis:\n  (z, y) \\<in> r\\<^sup>\\<leftrightarrow>\\<^sup>*\n\ngoal (1 subgoal):\n 1. UNF r", "from assms and this and \\<open>z \\<in> NF r\\<close> and \\<open>y \\<in> NF r\\<close>"], ["proof (chain)\npicking this:\n  UNC r\n  (z, y) \\<in> r\\<^sup>\\<leftrightarrow>\\<^sup>*\n  z \\<in> NF r\n  y \\<in> NF r", "have \"z = y\""], ["proof (prove)\nusing this:\n  UNC r\n  (z, y) \\<in> r\\<^sup>\\<leftrightarrow>\\<^sup>*\n  z \\<in> NF r\n  y \\<in> NF r\n\ngoal (1 subgoal):\n 1. z = y", "unfolding UNC_def"], ["proof (prove)\nusing this:\n  \\<forall>a b.\n     a \\<in> NF r \\<and>\n     b \\<in> NF r \\<and>\n     (a, b) \\<in> r\\<^sup>\\<leftrightarrow>\\<^sup>* \\<longrightarrow>\n     a = b\n  (z, y) \\<in> r\\<^sup>\\<leftrightarrow>\\<^sup>*\n  z \\<in> NF r\n  y \\<in> NF r\n\ngoal (1 subgoal):\n 1. z = y", "by auto"], ["proof (state)\nthis:\n  z = y\n\ngoal (1 subgoal):\n 1. UNF r", "}"], ["proof (state)\nthis:\n  \\<lbrakk>(?x2, ?y2) \\<in> r\\<^sup>!; (?x2, ?z2) \\<in> r\\<^sup>!\\<rbrakk>\n  \\<Longrightarrow> ?z2 = ?y2\n\ngoal (1 subgoal):\n 1. UNF r", "then"], ["proof (chain)\npicking this:\n  \\<lbrakk>(?x2, ?y2) \\<in> r\\<^sup>!; (?x2, ?z2) \\<in> r\\<^sup>!\\<rbrakk>\n  \\<Longrightarrow> ?z2 = ?y2", "show ?thesis"], ["proof (prove)\nusing this:\n  \\<lbrakk>(?x2, ?y2) \\<in> r\\<^sup>!; (?x2, ?z2) \\<in> r\\<^sup>!\\<rbrakk>\n  \\<Longrightarrow> ?z2 = ?y2\n\ngoal (1 subgoal):\n 1. UNF r", "by auto"], ["proof (state)\nthis:\n  UNF r\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma join_NF_imp_eq:\n assumes \"(x, y) \\<in> r\\<^sup>\\<down>\" and \"x \\<in> NF r\" and \"y \\<in> NF r\"\n shows \"x = y\""], ["proof (prove)\ngoal (1 subgoal):\n 1. x = y", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. x = y", "from \\<open>(x, y) \\<in> r\\<^sup>\\<down>\\<close>"], ["proof (chain)\npicking this:\n  (x, y) \\<in> r\\<^sup>\\<down>", "obtain z where \"(x, z)\\<in>r\\<^sup>*\" and \"(z, y)\\<in>(r\\<inverse>)\\<^sup>*\""], ["proof (prove)\nusing this:\n  (x, y) \\<in> r\\<^sup>\\<down>\n\ngoal (1 subgoal):\n 1. (\\<And>z.\n        \\<lbrakk>(x, z) \\<in> r\\<^sup>*;\n         (z, y) \\<in> (r\\<inverse>)\\<^sup>*\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "unfolding join_def"], ["proof (prove)\nusing this:\n  (x, y) \\<in> r\\<^sup>* O (r\\<inverse>)\\<^sup>*\n\ngoal (1 subgoal):\n 1. (\\<And>z.\n        \\<lbrakk>(x, z) \\<in> r\\<^sup>*;\n         (z, y) \\<in> (r\\<inverse>)\\<^sup>*\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  (x, z) \\<in> r\\<^sup>*\n  (z, y) \\<in> (r\\<inverse>)\\<^sup>*\n\ngoal (1 subgoal):\n 1. x = y", "then"], ["proof (chain)\npicking this:\n  (x, z) \\<in> r\\<^sup>*\n  (z, y) \\<in> (r\\<inverse>)\\<^sup>*", "have \"(y, z) \\<in> r\\<^sup>*\""], ["proof (prove)\nusing this:\n  (x, z) \\<in> r\\<^sup>*\n  (z, y) \\<in> (r\\<inverse>)\\<^sup>*\n\ngoal (1 subgoal):\n 1. (y, z) \\<in> r\\<^sup>*", "unfolding rtrancl_converse"], ["proof (prove)\nusing this:\n  (x, z) \\<in> r\\<^sup>*\n  (z, y) \\<in> (r\\<^sup>*)\\<inverse>\n\ngoal (1 subgoal):\n 1. (y, z) \\<in> r\\<^sup>*", "by simp"], ["proof (state)\nthis:\n  (y, z) \\<in> r\\<^sup>*\n\ngoal (1 subgoal):\n 1. x = y", "from \\<open>x \\<in> NF r\\<close>"], ["proof (chain)\npicking this:\n  x \\<in> NF r", "have \"(x, z) \\<notin> r\\<^sup>+\""], ["proof (prove)\nusing this:\n  x \\<in> NF r\n\ngoal (1 subgoal):\n 1. (x, z) \\<notin> r\\<^sup>+", "using NF_no_trancl_step"], ["proof (prove)\nusing this:\n  x \\<in> NF r\n  ?a \\<in> NF ?A \\<Longrightarrow> \\<forall>b. (?a, b) \\<notin> ?A\\<^sup>+\n\ngoal (1 subgoal):\n 1. (x, z) \\<notin> r\\<^sup>+", "by best"], ["proof (state)\nthis:\n  (x, z) \\<notin> r\\<^sup>+\n\ngoal (1 subgoal):\n 1. x = y", "then"], ["proof (chain)\npicking this:\n  (x, z) \\<notin> r\\<^sup>+", "have \"x = z\""], ["proof (prove)\nusing this:\n  (x, z) \\<notin> r\\<^sup>+\n\ngoal (1 subgoal):\n 1. x = z", "using rtranclD [OF \\<open>(x, z) \\<in> r\\<^sup>*\\<close>]"], ["proof (prove)\nusing this:\n  (x, z) \\<notin> r\\<^sup>+\n  x = z \\<or> x \\<noteq> z \\<and> (x, z) \\<in> r\\<^sup>+\n\ngoal (1 subgoal):\n 1. x = z", "by auto"], ["proof (state)\nthis:\n  x = z\n\ngoal (1 subgoal):\n 1. x = y", "from \\<open>y \\<in> NF r\\<close>"], ["proof (chain)\npicking this:\n  y \\<in> NF r", "have \"(y, z) \\<notin> r\\<^sup>+\""], ["proof (prove)\nusing this:\n  y \\<in> NF r\n\ngoal (1 subgoal):\n 1. (y, z) \\<notin> r\\<^sup>+", "using NF_no_trancl_step"], ["proof (prove)\nusing this:\n  y \\<in> NF r\n  ?a \\<in> NF ?A \\<Longrightarrow> \\<forall>b. (?a, b) \\<notin> ?A\\<^sup>+\n\ngoal (1 subgoal):\n 1. (y, z) \\<notin> r\\<^sup>+", "by best"], ["proof (state)\nthis:\n  (y, z) \\<notin> r\\<^sup>+\n\ngoal (1 subgoal):\n 1. x = y", "then"], ["proof (chain)\npicking this:\n  (y, z) \\<notin> r\\<^sup>+", "have \"y = z\""], ["proof (prove)\nusing this:\n  (y, z) \\<notin> r\\<^sup>+\n\ngoal (1 subgoal):\n 1. y = z", "using rtranclD [OF \\<open>(y, z) \\<in> r\\<^sup>*\\<close>]"], ["proof (prove)\nusing this:\n  (y, z) \\<notin> r\\<^sup>+\n  y = z \\<or> y \\<noteq> z \\<and> (y, z) \\<in> r\\<^sup>+\n\ngoal (1 subgoal):\n 1. y = z", "by auto"], ["proof (state)\nthis:\n  y = z\n\ngoal (1 subgoal):\n 1. x = y", "with \\<open>x = z\\<close>"], ["proof (chain)\npicking this:\n  x = z\n  y = z", "show ?thesis"], ["proof (prove)\nusing this:\n  x = z\n  y = z\n\ngoal (1 subgoal):\n 1. x = y", "by simp"], ["proof (state)\nthis:\n  x = y\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma rtrancl_Restr:\n  assumes \"(x, y) \\<in> (Restr r A)\\<^sup>*\"\n  shows \"(x, y) \\<in> r\\<^sup>*\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (x, y) \\<in> r\\<^sup>*", "using assms"], ["proof (prove)\nusing this:\n  (x, y) \\<in> (Restr r A)\\<^sup>*\n\ngoal (1 subgoal):\n 1. (x, y) \\<in> r\\<^sup>*", "by induct auto"], ["", "lemma join_mono:\n  assumes \"r \\<subseteq> s\"\n  shows \"r\\<^sup>\\<down> \\<subseteq> s\\<^sup>\\<down>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. r\\<^sup>\\<down> \\<subseteq> s\\<^sup>\\<down>", "using rtrancl_mono [OF assms]"], ["proof (prove)\nusing this:\n  r\\<^sup>* \\<subseteq> s\\<^sup>*\n\ngoal (1 subgoal):\n 1. r\\<^sup>\\<down> \\<subseteq> s\\<^sup>\\<down>", "by (auto simp: join_def rtrancl_converse)"], ["", "lemma CR_iff_meet_subset_join: \"CR r = (r\\<^sup>\\<up> \\<subseteq> r\\<^sup>\\<down>)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. CR r = (r\\<^sup>\\<up> \\<subseteq> r\\<^sup>\\<down>)", "proof"], ["proof (state)\ngoal (2 subgoals):\n 1. CR r \\<Longrightarrow> r\\<^sup>\\<up> \\<subseteq> r\\<^sup>\\<down>\n 2. r\\<^sup>\\<up> \\<subseteq> r\\<^sup>\\<down> \\<Longrightarrow> CR r", "assume \"CR r\""], ["proof (state)\nthis:\n  CR r\n\ngoal (2 subgoals):\n 1. CR r \\<Longrightarrow> r\\<^sup>\\<up> \\<subseteq> r\\<^sup>\\<down>\n 2. r\\<^sup>\\<up> \\<subseteq> r\\<^sup>\\<down> \\<Longrightarrow> CR r", "show \"r\\<^sup>\\<up> \\<subseteq> r\\<^sup>\\<down>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. r\\<^sup>\\<up> \\<subseteq> r\\<^sup>\\<down>", "proof (rule subrelI)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x y.\n       (x, y) \\<in> r\\<^sup>\\<up> \\<Longrightarrow>\n       (x, y) \\<in> r\\<^sup>\\<down>", "fix x y"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x y.\n       (x, y) \\<in> r\\<^sup>\\<up> \\<Longrightarrow>\n       (x, y) \\<in> r\\<^sup>\\<down>", "assume \"(x, y) \\<in> r\\<^sup>\\<up>\""], ["proof (state)\nthis:\n  (x, y) \\<in> r\\<^sup>\\<up>\n\ngoal (1 subgoal):\n 1. \\<And>x y.\n       (x, y) \\<in> r\\<^sup>\\<up> \\<Longrightarrow>\n       (x, y) \\<in> r\\<^sup>\\<down>", "then"], ["proof (chain)\npicking this:\n  (x, y) \\<in> r\\<^sup>\\<up>", "obtain z where \"(z, x) \\<in> r\\<^sup>*\" and \"(z, y) \\<in> r\\<^sup>*\""], ["proof (prove)\nusing this:\n  (x, y) \\<in> r\\<^sup>\\<up>\n\ngoal (1 subgoal):\n 1. (\\<And>z.\n        \\<lbrakk>(z, x) \\<in> r\\<^sup>*; (z, y) \\<in> r\\<^sup>*\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "using meetD"], ["proof (prove)\nusing this:\n  (x, y) \\<in> r\\<^sup>\\<up>\n  (?b, ?c) \\<in> ?A\\<^sup>\\<up> \\<Longrightarrow>\n  \\<exists>a. (a, ?b) \\<in> ?A\\<^sup>* \\<and> (a, ?c) \\<in> ?A\\<^sup>*\n\ngoal (1 subgoal):\n 1. (\\<And>z.\n        \\<lbrakk>(z, x) \\<in> r\\<^sup>*; (z, y) \\<in> r\\<^sup>*\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by best"], ["proof (state)\nthis:\n  (z, x) \\<in> r\\<^sup>*\n  (z, y) \\<in> r\\<^sup>*\n\ngoal (1 subgoal):\n 1. \\<And>x y.\n       (x, y) \\<in> r\\<^sup>\\<up> \\<Longrightarrow>\n       (x, y) \\<in> r\\<^sup>\\<down>", "with \\<open>CR r\\<close>"], ["proof (chain)\npicking this:\n  CR r\n  (z, x) \\<in> r\\<^sup>*\n  (z, y) \\<in> r\\<^sup>*", "show \"(x, y) \\<in> r\\<^sup>\\<down>\""], ["proof (prove)\nusing this:\n  CR r\n  (z, x) \\<in> r\\<^sup>*\n  (z, y) \\<in> r\\<^sup>*\n\ngoal (1 subgoal):\n 1. (x, y) \\<in> r\\<^sup>\\<down>", "by (auto simp: CR_defs)"], ["proof (state)\nthis:\n  (x, y) \\<in> r\\<^sup>\\<down>\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  r\\<^sup>\\<up> \\<subseteq> r\\<^sup>\\<down>\n\ngoal (1 subgoal):\n 1. r\\<^sup>\\<up> \\<subseteq> r\\<^sup>\\<down> \\<Longrightarrow> CR r", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. r\\<^sup>\\<up> \\<subseteq> r\\<^sup>\\<down> \\<Longrightarrow> CR r", "assume \"r\\<^sup>\\<up> \\<subseteq> r\\<^sup>\\<down>\""], ["proof (state)\nthis:\n  r\\<^sup>\\<up> \\<subseteq> r\\<^sup>\\<down>\n\ngoal (1 subgoal):\n 1. r\\<^sup>\\<up> \\<subseteq> r\\<^sup>\\<down> \\<Longrightarrow> CR r", "{"], ["proof (state)\nthis:\n  r\\<^sup>\\<up> \\<subseteq> r\\<^sup>\\<down>\n\ngoal (1 subgoal):\n 1. r\\<^sup>\\<up> \\<subseteq> r\\<^sup>\\<down> \\<Longrightarrow> CR r", "fix x y z"], ["proof (state)\ngoal (1 subgoal):\n 1. r\\<^sup>\\<up> \\<subseteq> r\\<^sup>\\<down> \\<Longrightarrow> CR r", "assume \"(x, y) \\<in> r\\<^sup>*\" and \"(x, z) \\<in> r\\<^sup>*\""], ["proof (state)\nthis:\n  (x, y) \\<in> r\\<^sup>*\n  (x, z) \\<in> r\\<^sup>*\n\ngoal (1 subgoal):\n 1. r\\<^sup>\\<up> \\<subseteq> r\\<^sup>\\<down> \\<Longrightarrow> CR r", "then"], ["proof (chain)\npicking this:\n  (x, y) \\<in> r\\<^sup>*\n  (x, z) \\<in> r\\<^sup>*", "have \"(y, z) \\<in> r\\<^sup>\\<up>\""], ["proof (prove)\nusing this:\n  (x, y) \\<in> r\\<^sup>*\n  (x, z) \\<in> r\\<^sup>*\n\ngoal (1 subgoal):\n 1. (y, z) \\<in> r\\<^sup>\\<up>", "unfolding meet_def rtrancl_converse"], ["proof (prove)\nusing this:\n  (x, y) \\<in> r\\<^sup>*\n  (x, z) \\<in> r\\<^sup>*\n\ngoal (1 subgoal):\n 1. (y, z) \\<in> (r\\<^sup>*)\\<inverse> O r\\<^sup>*", "by auto"], ["proof (state)\nthis:\n  (y, z) \\<in> r\\<^sup>\\<up>\n\ngoal (1 subgoal):\n 1. r\\<^sup>\\<up> \\<subseteq> r\\<^sup>\\<down> \\<Longrightarrow> CR r", "with \\<open>r\\<^sup>\\<up> \\<subseteq> r\\<^sup>\\<down>\\<close>"], ["proof (chain)\npicking this:\n  r\\<^sup>\\<up> \\<subseteq> r\\<^sup>\\<down>\n  (y, z) \\<in> r\\<^sup>\\<up>", "have \"(y, z) \\<in> r\\<^sup>\\<down>\""], ["proof (prove)\nusing this:\n  r\\<^sup>\\<up> \\<subseteq> r\\<^sup>\\<down>\n  (y, z) \\<in> r\\<^sup>\\<up>\n\ngoal (1 subgoal):\n 1. (y, z) \\<in> r\\<^sup>\\<down>", "by auto"], ["proof (state)\nthis:\n  (y, z) \\<in> r\\<^sup>\\<down>\n\ngoal (1 subgoal):\n 1. r\\<^sup>\\<up> \\<subseteq> r\\<^sup>\\<down> \\<Longrightarrow> CR r", "}"], ["proof (state)\nthis:\n  \\<lbrakk>(?x2, ?y2) \\<in> r\\<^sup>*; (?x2, ?z2) \\<in> r\\<^sup>*\\<rbrakk>\n  \\<Longrightarrow> (?y2, ?z2) \\<in> r\\<^sup>\\<down>\n\ngoal (1 subgoal):\n 1. r\\<^sup>\\<up> \\<subseteq> r\\<^sup>\\<down> \\<Longrightarrow> CR r", "then"], ["proof (chain)\npicking this:\n  \\<lbrakk>(?x2, ?y2) \\<in> r\\<^sup>*; (?x2, ?z2) \\<in> r\\<^sup>*\\<rbrakk>\n  \\<Longrightarrow> (?y2, ?z2) \\<in> r\\<^sup>\\<down>", "show \"CR r\""], ["proof (prove)\nusing this:\n  \\<lbrakk>(?x2, ?y2) \\<in> r\\<^sup>*; (?x2, ?z2) \\<in> r\\<^sup>*\\<rbrakk>\n  \\<Longrightarrow> (?y2, ?z2) \\<in> r\\<^sup>\\<down>\n\ngoal (1 subgoal):\n 1. CR r", "by (auto simp: CR_defs)"], ["proof (state)\nthis:\n  CR r\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma CR_divergence_imp_join:\n  assumes \"CR r\" and \"(x, y) \\<in> r\\<^sup>*\" and \"(x, z) \\<in> r\\<^sup>*\"\n  shows \"(y, z) \\<in> r\\<^sup>\\<down>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (y, z) \\<in> r\\<^sup>\\<down>", "using assms"], ["proof (prove)\nusing this:\n  CR r\n  (x, y) \\<in> r\\<^sup>*\n  (x, z) \\<in> r\\<^sup>*\n\ngoal (1 subgoal):\n 1. (y, z) \\<in> r\\<^sup>\\<down>", "by auto"], ["", "lemma join_imp_conversion: \"r\\<^sup>\\<down> \\<subseteq> r\\<^sup>\\<leftrightarrow>\\<^sup>*\""], ["proof (prove)\ngoal (1 subgoal):\n 1. r\\<^sup>\\<down> \\<subseteq> r\\<^sup>\\<leftrightarrow>\\<^sup>*", "proof"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x y.\n       (x, y) \\<in> r\\<^sup>\\<down> \\<Longrightarrow>\n       (x, y) \\<in> r\\<^sup>\\<leftrightarrow>\\<^sup>*", "fix x z"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x y.\n       (x, y) \\<in> r\\<^sup>\\<down> \\<Longrightarrow>\n       (x, y) \\<in> r\\<^sup>\\<leftrightarrow>\\<^sup>*", "assume \"(x, z) \\<in> r\\<^sup>\\<down>\""], ["proof (state)\nthis:\n  (x, z) \\<in> r\\<^sup>\\<down>\n\ngoal (1 subgoal):\n 1. \\<And>x y.\n       (x, y) \\<in> r\\<^sup>\\<down> \\<Longrightarrow>\n       (x, y) \\<in> r\\<^sup>\\<leftrightarrow>\\<^sup>*", "then"], ["proof (chain)\npicking this:\n  (x, z) \\<in> r\\<^sup>\\<down>", "obtain y where \"(x, y) \\<in> r\\<^sup>*\" and \"(z, y) \\<in> r\\<^sup>*\""], ["proof (prove)\nusing this:\n  (x, z) \\<in> r\\<^sup>\\<down>\n\ngoal (1 subgoal):\n 1. (\\<And>y.\n        \\<lbrakk>(x, y) \\<in> r\\<^sup>*; (z, y) \\<in> r\\<^sup>*\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  (x, y) \\<in> r\\<^sup>*\n  (z, y) \\<in> r\\<^sup>*\n\ngoal (1 subgoal):\n 1. \\<And>x y.\n       (x, y) \\<in> r\\<^sup>\\<down> \\<Longrightarrow>\n       (x, y) \\<in> r\\<^sup>\\<leftrightarrow>\\<^sup>*", "then"], ["proof (chain)\npicking this:\n  (x, y) \\<in> r\\<^sup>*\n  (z, y) \\<in> r\\<^sup>*", "have \"(x, y) \\<in> r\\<^sup>\\<leftrightarrow>\\<^sup>*\" and \"(z, y) \\<in> r\\<^sup>\\<leftrightarrow>\\<^sup>*\""], ["proof (prove)\nusing this:\n  (x, y) \\<in> r\\<^sup>*\n  (z, y) \\<in> r\\<^sup>*\n\ngoal (1 subgoal):\n 1. (x, y) \\<in> r\\<^sup>\\<leftrightarrow>\\<^sup>* &&&\n    (z, y) \\<in> r\\<^sup>\\<leftrightarrow>\\<^sup>*", "by auto"], ["proof (state)\nthis:\n  (x, y) \\<in> r\\<^sup>\\<leftrightarrow>\\<^sup>*\n  (z, y) \\<in> r\\<^sup>\\<leftrightarrow>\\<^sup>*\n\ngoal (1 subgoal):\n 1. \\<And>x y.\n       (x, y) \\<in> r\\<^sup>\\<down> \\<Longrightarrow>\n       (x, y) \\<in> r\\<^sup>\\<leftrightarrow>\\<^sup>*", "from \\<open>(z, y) \\<in> r\\<^sup>\\<leftrightarrow>\\<^sup>*\\<close>"], ["proof (chain)\npicking this:\n  (z, y) \\<in> r\\<^sup>\\<leftrightarrow>\\<^sup>*", "have \"(y, z) \\<in> r\\<^sup>\\<leftrightarrow>\\<^sup>*\""], ["proof (prove)\nusing this:\n  (z, y) \\<in> r\\<^sup>\\<leftrightarrow>\\<^sup>*\n\ngoal (1 subgoal):\n 1. (y, z) \\<in> r\\<^sup>\\<leftrightarrow>\\<^sup>*", "using conversion_sym"], ["proof (prove)\nusing this:\n  (z, y) \\<in> r\\<^sup>\\<leftrightarrow>\\<^sup>*\n  sym (?A\\<^sup>\\<leftrightarrow>\\<^sup>*)\n\ngoal (1 subgoal):\n 1. (y, z) \\<in> r\\<^sup>\\<leftrightarrow>\\<^sup>*", "unfolding sym_def"], ["proof (prove)\nusing this:\n  (z, y) \\<in> r\\<^sup>\\<leftrightarrow>\\<^sup>*\n  \\<forall>x y.\n     (x, y) \\<in> ?A\\<^sup>\\<leftrightarrow>\\<^sup>* \\<longrightarrow>\n     (y, x) \\<in> ?A\\<^sup>\\<leftrightarrow>\\<^sup>*\n\ngoal (1 subgoal):\n 1. (y, z) \\<in> r\\<^sup>\\<leftrightarrow>\\<^sup>*", "by best"], ["proof (state)\nthis:\n  (y, z) \\<in> r\\<^sup>\\<leftrightarrow>\\<^sup>*\n\ngoal (1 subgoal):\n 1. \\<And>x y.\n       (x, y) \\<in> r\\<^sup>\\<down> \\<Longrightarrow>\n       (x, y) \\<in> r\\<^sup>\\<leftrightarrow>\\<^sup>*", "with \\<open>(x, y) \\<in> r\\<^sup>\\<leftrightarrow>\\<^sup>*\\<close>"], ["proof (chain)\npicking this:\n  (x, y) \\<in> r\\<^sup>\\<leftrightarrow>\\<^sup>*\n  (y, z) \\<in> r\\<^sup>\\<leftrightarrow>\\<^sup>*", "show \"(x, z) \\<in> r\\<^sup>\\<leftrightarrow>\\<^sup>*\""], ["proof (prove)\nusing this:\n  (x, y) \\<in> r\\<^sup>\\<leftrightarrow>\\<^sup>*\n  (y, z) \\<in> r\\<^sup>\\<leftrightarrow>\\<^sup>*\n\ngoal (1 subgoal):\n 1. (x, z) \\<in> r\\<^sup>\\<leftrightarrow>\\<^sup>*", "using conversion_trans"], ["proof (prove)\nusing this:\n  (x, y) \\<in> r\\<^sup>\\<leftrightarrow>\\<^sup>*\n  (y, z) \\<in> r\\<^sup>\\<leftrightarrow>\\<^sup>*\n  trans (?A\\<^sup>\\<leftrightarrow>\\<^sup>*)\n\ngoal (1 subgoal):\n 1. (x, z) \\<in> r\\<^sup>\\<leftrightarrow>\\<^sup>*", "unfolding trans_def"], ["proof (prove)\nusing this:\n  (x, y) \\<in> r\\<^sup>\\<leftrightarrow>\\<^sup>*\n  (y, z) \\<in> r\\<^sup>\\<leftrightarrow>\\<^sup>*\n  \\<forall>x y z.\n     (x, y) \\<in> ?A\\<^sup>\\<leftrightarrow>\\<^sup>* \\<longrightarrow>\n     (y, z) \\<in> ?A\\<^sup>\\<leftrightarrow>\\<^sup>* \\<longrightarrow>\n     (x, z) \\<in> ?A\\<^sup>\\<leftrightarrow>\\<^sup>*\n\ngoal (1 subgoal):\n 1. (x, z) \\<in> r\\<^sup>\\<leftrightarrow>\\<^sup>*", "by best"], ["proof (state)\nthis:\n  (x, z) \\<in> r\\<^sup>\\<leftrightarrow>\\<^sup>*\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma meet_imp_conversion: \"r\\<^sup>\\<up> \\<subseteq> r\\<^sup>\\<leftrightarrow>\\<^sup>*\""], ["proof (prove)\ngoal (1 subgoal):\n 1. r\\<^sup>\\<up> \\<subseteq> r\\<^sup>\\<leftrightarrow>\\<^sup>*", "proof (rule subrelI)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x y.\n       (x, y) \\<in> r\\<^sup>\\<up> \\<Longrightarrow>\n       (x, y) \\<in> r\\<^sup>\\<leftrightarrow>\\<^sup>*", "fix y z"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x y.\n       (x, y) \\<in> r\\<^sup>\\<up> \\<Longrightarrow>\n       (x, y) \\<in> r\\<^sup>\\<leftrightarrow>\\<^sup>*", "assume \"(y, z) \\<in> r\\<^sup>\\<up>\""], ["proof (state)\nthis:\n  (y, z) \\<in> r\\<^sup>\\<up>\n\ngoal (1 subgoal):\n 1. \\<And>x y.\n       (x, y) \\<in> r\\<^sup>\\<up> \\<Longrightarrow>\n       (x, y) \\<in> r\\<^sup>\\<leftrightarrow>\\<^sup>*", "then"], ["proof (chain)\npicking this:\n  (y, z) \\<in> r\\<^sup>\\<up>", "obtain x where \"(x, y) \\<in> r\\<^sup>*\" and \"(x, z) \\<in> r\\<^sup>*\""], ["proof (prove)\nusing this:\n  (y, z) \\<in> r\\<^sup>\\<up>\n\ngoal (1 subgoal):\n 1. (\\<And>x.\n        \\<lbrakk>(x, y) \\<in> r\\<^sup>*; (x, z) \\<in> r\\<^sup>*\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  (x, y) \\<in> r\\<^sup>*\n  (x, z) \\<in> r\\<^sup>*\n\ngoal (1 subgoal):\n 1. \\<And>x y.\n       (x, y) \\<in> r\\<^sup>\\<up> \\<Longrightarrow>\n       (x, y) \\<in> r\\<^sup>\\<leftrightarrow>\\<^sup>*", "then"], ["proof (chain)\npicking this:\n  (x, y) \\<in> r\\<^sup>*\n  (x, z) \\<in> r\\<^sup>*", "have \"(x, y) \\<in> r\\<^sup>\\<leftrightarrow>\\<^sup>*\" and \"(x, z) \\<in> r\\<^sup>\\<leftrightarrow>\\<^sup>*\""], ["proof (prove)\nusing this:\n  (x, y) \\<in> r\\<^sup>*\n  (x, z) \\<in> r\\<^sup>*\n\ngoal (1 subgoal):\n 1. (x, y) \\<in> r\\<^sup>\\<leftrightarrow>\\<^sup>* &&&\n    (x, z) \\<in> r\\<^sup>\\<leftrightarrow>\\<^sup>*", "by auto"], ["proof (state)\nthis:\n  (x, y) \\<in> r\\<^sup>\\<leftrightarrow>\\<^sup>*\n  (x, z) \\<in> r\\<^sup>\\<leftrightarrow>\\<^sup>*\n\ngoal (1 subgoal):\n 1. \\<And>x y.\n       (x, y) \\<in> r\\<^sup>\\<up> \\<Longrightarrow>\n       (x, y) \\<in> r\\<^sup>\\<leftrightarrow>\\<^sup>*", "from \\<open>(x, y) \\<in> r\\<^sup>\\<leftrightarrow>\\<^sup>*\\<close>"], ["proof (chain)\npicking this:\n  (x, y) \\<in> r\\<^sup>\\<leftrightarrow>\\<^sup>*", "have \"(y, x) \\<in> r\\<^sup>\\<leftrightarrow>\\<^sup>*\""], ["proof (prove)\nusing this:\n  (x, y) \\<in> r\\<^sup>\\<leftrightarrow>\\<^sup>*\n\ngoal (1 subgoal):\n 1. (y, x) \\<in> r\\<^sup>\\<leftrightarrow>\\<^sup>*", "using conversion_sym"], ["proof (prove)\nusing this:\n  (x, y) \\<in> r\\<^sup>\\<leftrightarrow>\\<^sup>*\n  sym (?A\\<^sup>\\<leftrightarrow>\\<^sup>*)\n\ngoal (1 subgoal):\n 1. (y, x) \\<in> r\\<^sup>\\<leftrightarrow>\\<^sup>*", "unfolding sym_def"], ["proof (prove)\nusing this:\n  (x, y) \\<in> r\\<^sup>\\<leftrightarrow>\\<^sup>*\n  \\<forall>x y.\n     (x, y) \\<in> ?A\\<^sup>\\<leftrightarrow>\\<^sup>* \\<longrightarrow>\n     (y, x) \\<in> ?A\\<^sup>\\<leftrightarrow>\\<^sup>*\n\ngoal (1 subgoal):\n 1. (y, x) \\<in> r\\<^sup>\\<leftrightarrow>\\<^sup>*", "by best"], ["proof (state)\nthis:\n  (y, x) \\<in> r\\<^sup>\\<leftrightarrow>\\<^sup>*\n\ngoal (1 subgoal):\n 1. \\<And>x y.\n       (x, y) \\<in> r\\<^sup>\\<up> \\<Longrightarrow>\n       (x, y) \\<in> r\\<^sup>\\<leftrightarrow>\\<^sup>*", "with \\<open>(x, z) \\<in> r\\<^sup>\\<leftrightarrow>\\<^sup>*\\<close>"], ["proof (chain)\npicking this:\n  (x, z) \\<in> r\\<^sup>\\<leftrightarrow>\\<^sup>*\n  (y, x) \\<in> r\\<^sup>\\<leftrightarrow>\\<^sup>*", "show \"(y, z) \\<in> r\\<^sup>\\<leftrightarrow>\\<^sup>*\""], ["proof (prove)\nusing this:\n  (x, z) \\<in> r\\<^sup>\\<leftrightarrow>\\<^sup>*\n  (y, x) \\<in> r\\<^sup>\\<leftrightarrow>\\<^sup>*\n\ngoal (1 subgoal):\n 1. (y, z) \\<in> r\\<^sup>\\<leftrightarrow>\\<^sup>*", "using conversion_trans"], ["proof (prove)\nusing this:\n  (x, z) \\<in> r\\<^sup>\\<leftrightarrow>\\<^sup>*\n  (y, x) \\<in> r\\<^sup>\\<leftrightarrow>\\<^sup>*\n  trans (?A\\<^sup>\\<leftrightarrow>\\<^sup>*)\n\ngoal (1 subgoal):\n 1. (y, z) \\<in> r\\<^sup>\\<leftrightarrow>\\<^sup>*", "unfolding trans_def"], ["proof (prove)\nusing this:\n  (x, z) \\<in> r\\<^sup>\\<leftrightarrow>\\<^sup>*\n  (y, x) \\<in> r\\<^sup>\\<leftrightarrow>\\<^sup>*\n  \\<forall>x y z.\n     (x, y) \\<in> ?A\\<^sup>\\<leftrightarrow>\\<^sup>* \\<longrightarrow>\n     (y, z) \\<in> ?A\\<^sup>\\<leftrightarrow>\\<^sup>* \\<longrightarrow>\n     (x, z) \\<in> ?A\\<^sup>\\<leftrightarrow>\\<^sup>*\n\ngoal (1 subgoal):\n 1. (y, z) \\<in> r\\<^sup>\\<leftrightarrow>\\<^sup>*", "by best"], ["proof (state)\nthis:\n  (y, z) \\<in> r\\<^sup>\\<leftrightarrow>\\<^sup>*\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma CR_imp_UNF:\n  assumes \"CR r\" shows \"UNF r\""], ["proof (prove)\ngoal (1 subgoal):\n 1. UNF r", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. UNF r", "{"], ["proof (state)\ngoal (1 subgoal):\n 1. UNF r", "fix x y z"], ["proof (state)\ngoal (1 subgoal):\n 1. UNF r", "assume \"(x, y) \\<in> r\\<^sup>!\" and \"(x, z) \\<in> r\\<^sup>!\""], ["proof (state)\nthis:\n  (x, y) \\<in> r\\<^sup>!\n  (x, z) \\<in> r\\<^sup>!\n\ngoal (1 subgoal):\n 1. UNF r", "then"], ["proof (chain)\npicking this:\n  (x, y) \\<in> r\\<^sup>!\n  (x, z) \\<in> r\\<^sup>!", "have \"(x, y) \\<in> r\\<^sup>*\" and \"y \\<in> NF r\" and \"(x, z) \\<in> r\\<^sup>*\" and \"z \\<in> NF r\""], ["proof (prove)\nusing this:\n  (x, y) \\<in> r\\<^sup>!\n  (x, z) \\<in> r\\<^sup>!\n\ngoal (1 subgoal):\n 1. ((x, y) \\<in> r\\<^sup>* &&& y \\<in> NF r) &&&\n    (x, z) \\<in> r\\<^sup>* &&& z \\<in> NF r", "unfolding normalizability_def"], ["proof (prove)\nusing this:\n  (x, y) \\<in> {(a, b). (a, b) \\<in> r\\<^sup>* \\<and> b \\<in> NF r}\n  (x, z) \\<in> {(a, b). (a, b) \\<in> r\\<^sup>* \\<and> b \\<in> NF r}\n\ngoal (1 subgoal):\n 1. ((x, y) \\<in> r\\<^sup>* &&& y \\<in> NF r) &&&\n    (x, z) \\<in> r\\<^sup>* &&& z \\<in> NF r", "by auto"], ["proof (state)\nthis:\n  (x, y) \\<in> r\\<^sup>*\n  y \\<in> NF r\n  (x, z) \\<in> r\\<^sup>*\n  z \\<in> NF r\n\ngoal (1 subgoal):\n 1. UNF r", "from assms and \\<open>(x, y) \\<in> r\\<^sup>*\\<close> and \\<open>(x, z) \\<in> r\\<^sup>*\\<close>"], ["proof (chain)\npicking this:\n  CR r\n  (x, y) \\<in> r\\<^sup>*\n  (x, z) \\<in> r\\<^sup>*", "have \"(y, z) \\<in> r\\<^sup>\\<down>\""], ["proof (prove)\nusing this:\n  CR r\n  (x, y) \\<in> r\\<^sup>*\n  (x, z) \\<in> r\\<^sup>*\n\ngoal (1 subgoal):\n 1. (y, z) \\<in> r\\<^sup>\\<down>", "by (rule CR_divergence_imp_join)"], ["proof (state)\nthis:\n  (y, z) \\<in> r\\<^sup>\\<down>\n\ngoal (1 subgoal):\n 1. UNF r", "from this and \\<open>y \\<in> NF r\\<close> and \\<open>z \\<in> NF r\\<close>"], ["proof (chain)\npicking this:\n  (y, z) \\<in> r\\<^sup>\\<down>\n  y \\<in> NF r\n  z \\<in> NF r", "have \"y = z\""], ["proof (prove)\nusing this:\n  (y, z) \\<in> r\\<^sup>\\<down>\n  y \\<in> NF r\n  z \\<in> NF r\n\ngoal (1 subgoal):\n 1. y = z", "by (rule join_NF_imp_eq)"], ["proof (state)\nthis:\n  y = z\n\ngoal (1 subgoal):\n 1. UNF r", "}"], ["proof (state)\nthis:\n  \\<lbrakk>(?x2, ?y2) \\<in> r\\<^sup>!; (?x2, ?z2) \\<in> r\\<^sup>!\\<rbrakk>\n  \\<Longrightarrow> ?y2 = ?z2\n\ngoal (1 subgoal):\n 1. UNF r", "then"], ["proof (chain)\npicking this:\n  \\<lbrakk>(?x2, ?y2) \\<in> r\\<^sup>!; (?x2, ?z2) \\<in> r\\<^sup>!\\<rbrakk>\n  \\<Longrightarrow> ?y2 = ?z2", "show ?thesis"], ["proof (prove)\nusing this:\n  \\<lbrakk>(?x2, ?y2) \\<in> r\\<^sup>!; (?x2, ?z2) \\<in> r\\<^sup>!\\<rbrakk>\n  \\<Longrightarrow> ?y2 = ?z2\n\ngoal (1 subgoal):\n 1. UNF r", "by auto"], ["proof (state)\nthis:\n  UNF r\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma CR_iff_conversion_imp_join: \"CR r = (r\\<^sup>\\<leftrightarrow>\\<^sup>* \\<subseteq> r\\<^sup>\\<down>)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. CR r = (r\\<^sup>\\<leftrightarrow>\\<^sup>* \\<subseteq> r\\<^sup>\\<down>)", "proof (intro iffI subrelI)"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>x y.\n       \\<lbrakk>CR r;\n        (x, y) \\<in> r\\<^sup>\\<leftrightarrow>\\<^sup>*\\<rbrakk>\n       \\<Longrightarrow> (x, y) \\<in> r\\<^sup>\\<down>\n 2. r\\<^sup>\\<leftrightarrow>\\<^sup>*\n    \\<subseteq> r\\<^sup>\\<down> \\<Longrightarrow>\n    CR r", "fix x y"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>x y.\n       \\<lbrakk>CR r;\n        (x, y) \\<in> r\\<^sup>\\<leftrightarrow>\\<^sup>*\\<rbrakk>\n       \\<Longrightarrow> (x, y) \\<in> r\\<^sup>\\<down>\n 2. r\\<^sup>\\<leftrightarrow>\\<^sup>*\n    \\<subseteq> r\\<^sup>\\<down> \\<Longrightarrow>\n    CR r", "assume \"CR r\" and \"(x, y) \\<in> r\\<^sup>\\<leftrightarrow>\\<^sup>*\""], ["proof (state)\nthis:\n  CR r\n  (x, y) \\<in> r\\<^sup>\\<leftrightarrow>\\<^sup>*\n\ngoal (2 subgoals):\n 1. \\<And>x y.\n       \\<lbrakk>CR r;\n        (x, y) \\<in> r\\<^sup>\\<leftrightarrow>\\<^sup>*\\<rbrakk>\n       \\<Longrightarrow> (x, y) \\<in> r\\<^sup>\\<down>\n 2. r\\<^sup>\\<leftrightarrow>\\<^sup>*\n    \\<subseteq> r\\<^sup>\\<down> \\<Longrightarrow>\n    CR r", "then"], ["proof (chain)\npicking this:\n  CR r\n  (x, y) \\<in> r\\<^sup>\\<leftrightarrow>\\<^sup>*", "obtain n where \"(x, y) \\<in> (r\\<^sup>\\<leftrightarrow>)^^n\""], ["proof (prove)\nusing this:\n  CR r\n  (x, y) \\<in> r\\<^sup>\\<leftrightarrow>\\<^sup>*\n\ngoal (1 subgoal):\n 1. (\\<And>n.\n        (x, y) \\<in> r\\<^sup>\\<leftrightarrow> ^^ n \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "unfolding conversion_def rtrancl_is_UN_relpow"], ["proof (prove)\nusing this:\n  CR r\n  (x, y) \\<in> \\<Union> (range ((^^) (r\\<^sup>\\<leftrightarrow>)))\n\ngoal (1 subgoal):\n 1. (\\<And>n.\n        (x, y) \\<in> r\\<^sup>\\<leftrightarrow> ^^ n \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  (x, y) \\<in> r\\<^sup>\\<leftrightarrow> ^^ n\n\ngoal (2 subgoals):\n 1. \\<And>x y.\n       \\<lbrakk>CR r;\n        (x, y) \\<in> r\\<^sup>\\<leftrightarrow>\\<^sup>*\\<rbrakk>\n       \\<Longrightarrow> (x, y) \\<in> r\\<^sup>\\<down>\n 2. r\\<^sup>\\<leftrightarrow>\\<^sup>*\n    \\<subseteq> r\\<^sup>\\<down> \\<Longrightarrow>\n    CR r", "then"], ["proof (chain)\npicking this:\n  (x, y) \\<in> r\\<^sup>\\<leftrightarrow> ^^ n", "show \"(x, y) \\<in> r\\<^sup>\\<down>\""], ["proof (prove)\nusing this:\n  (x, y) \\<in> r\\<^sup>\\<leftrightarrow> ^^ n\n\ngoal (1 subgoal):\n 1. (x, y) \\<in> r\\<^sup>\\<down>", "proof (induct n arbitrary: x)"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>x.\n       (x, y) \\<in> r\\<^sup>\\<leftrightarrow> ^^ 0 \\<Longrightarrow>\n       (x, y) \\<in> r\\<^sup>\\<down>\n 2. \\<And>n x.\n       \\<lbrakk>\\<And>x.\n                   (x, y)\n                   \\<in> r\\<^sup>\\<leftrightarrow> ^^ n \\<Longrightarrow>\n                   (x, y) \\<in> r\\<^sup>\\<down>;\n        (x, y) \\<in> r\\<^sup>\\<leftrightarrow> ^^ Suc n\\<rbrakk>\n       \\<Longrightarrow> (x, y) \\<in> r\\<^sup>\\<down>", "case 0"], ["proof (state)\nthis:\n  (x, y) \\<in> r\\<^sup>\\<leftrightarrow> ^^ 0\n\ngoal (2 subgoals):\n 1. \\<And>x.\n       (x, y) \\<in> r\\<^sup>\\<leftrightarrow> ^^ 0 \\<Longrightarrow>\n       (x, y) \\<in> r\\<^sup>\\<down>\n 2. \\<And>n x.\n       \\<lbrakk>\\<And>x.\n                   (x, y)\n                   \\<in> r\\<^sup>\\<leftrightarrow> ^^ n \\<Longrightarrow>\n                   (x, y) \\<in> r\\<^sup>\\<down>;\n        (x, y) \\<in> r\\<^sup>\\<leftrightarrow> ^^ Suc n\\<rbrakk>\n       \\<Longrightarrow> (x, y) \\<in> r\\<^sup>\\<down>", "assume \"(x, y) \\<in> r\\<^sup>\\<leftrightarrow> ^^ 0\""], ["proof (state)\nthis:\n  (x, y) \\<in> r\\<^sup>\\<leftrightarrow> ^^ 0\n\ngoal (2 subgoals):\n 1. \\<And>x.\n       (x, y) \\<in> r\\<^sup>\\<leftrightarrow> ^^ 0 \\<Longrightarrow>\n       (x, y) \\<in> r\\<^sup>\\<down>\n 2. \\<And>n x.\n       \\<lbrakk>\\<And>x.\n                   (x, y)\n                   \\<in> r\\<^sup>\\<leftrightarrow> ^^ n \\<Longrightarrow>\n                   (x, y) \\<in> r\\<^sup>\\<down>;\n        (x, y) \\<in> r\\<^sup>\\<leftrightarrow> ^^ Suc n\\<rbrakk>\n       \\<Longrightarrow> (x, y) \\<in> r\\<^sup>\\<down>", "then"], ["proof (chain)\npicking this:\n  (x, y) \\<in> r\\<^sup>\\<leftrightarrow> ^^ 0", "have \"x = y\""], ["proof (prove)\nusing this:\n  (x, y) \\<in> r\\<^sup>\\<leftrightarrow> ^^ 0\n\ngoal (1 subgoal):\n 1. x = y", "by simp"], ["proof (state)\nthis:\n  x = y\n\ngoal (2 subgoals):\n 1. \\<And>x.\n       (x, y) \\<in> r\\<^sup>\\<leftrightarrow> ^^ 0 \\<Longrightarrow>\n       (x, y) \\<in> r\\<^sup>\\<down>\n 2. \\<And>n x.\n       \\<lbrakk>\\<And>x.\n                   (x, y)\n                   \\<in> r\\<^sup>\\<leftrightarrow> ^^ n \\<Longrightarrow>\n                   (x, y) \\<in> r\\<^sup>\\<down>;\n        (x, y) \\<in> r\\<^sup>\\<leftrightarrow> ^^ Suc n\\<rbrakk>\n       \\<Longrightarrow> (x, y) \\<in> r\\<^sup>\\<down>", "show ?case"], ["proof (prove)\ngoal (1 subgoal):\n 1. (x, y) \\<in> r\\<^sup>\\<down>", "unfolding \\<open>x = y\\<close>"], ["proof (prove)\ngoal (1 subgoal):\n 1. (y, y) \\<in> r\\<^sup>\\<down>", "by auto"], ["proof (state)\nthis:\n  (x, y) \\<in> r\\<^sup>\\<down>\n\ngoal (1 subgoal):\n 1. \\<And>n x.\n       \\<lbrakk>\\<And>x.\n                   (x, y)\n                   \\<in> r\\<^sup>\\<leftrightarrow> ^^ n \\<Longrightarrow>\n                   (x, y) \\<in> r\\<^sup>\\<down>;\n        (x, y) \\<in> r\\<^sup>\\<leftrightarrow> ^^ Suc n\\<rbrakk>\n       \\<Longrightarrow> (x, y) \\<in> r\\<^sup>\\<down>", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>n x.\n       \\<lbrakk>\\<And>x.\n                   (x, y)\n                   \\<in> r\\<^sup>\\<leftrightarrow> ^^ n \\<Longrightarrow>\n                   (x, y) \\<in> r\\<^sup>\\<down>;\n        (x, y) \\<in> r\\<^sup>\\<leftrightarrow> ^^ Suc n\\<rbrakk>\n       \\<Longrightarrow> (x, y) \\<in> r\\<^sup>\\<down>", "case (Suc n)"], ["proof (state)\nthis:\n  (?x, y) \\<in> r\\<^sup>\\<leftrightarrow> ^^ n \\<Longrightarrow>\n  (?x, y) \\<in> r\\<^sup>\\<down>\n  (x, y) \\<in> r\\<^sup>\\<leftrightarrow> ^^ Suc n\n\ngoal (1 subgoal):\n 1. \\<And>n x.\n       \\<lbrakk>\\<And>x.\n                   (x, y)\n                   \\<in> r\\<^sup>\\<leftrightarrow> ^^ n \\<Longrightarrow>\n                   (x, y) \\<in> r\\<^sup>\\<down>;\n        (x, y) \\<in> r\\<^sup>\\<leftrightarrow> ^^ Suc n\\<rbrakk>\n       \\<Longrightarrow> (x, y) \\<in> r\\<^sup>\\<down>", "from \\<open>(x, y) \\<in> r\\<^sup>\\<leftrightarrow> ^^ Suc n\\<close>"], ["proof (chain)\npicking this:\n  (x, y) \\<in> r\\<^sup>\\<leftrightarrow> ^^ Suc n", "obtain  z where \"(x, z) \\<in> r\\<^sup>\\<leftrightarrow>\" and \"(z, y) \\<in> r\\<^sup>\\<leftrightarrow> ^^ n\""], ["proof (prove)\nusing this:\n  (x, y) \\<in> r\\<^sup>\\<leftrightarrow> ^^ Suc n\n\ngoal (1 subgoal):\n 1. (\\<And>z.\n        \\<lbrakk>(x, z) \\<in> r\\<^sup>\\<leftrightarrow>;\n         (z, y) \\<in> r\\<^sup>\\<leftrightarrow> ^^ n\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "using relpow_Suc_D2"], ["proof (prove)\nusing this:\n  (x, y) \\<in> r\\<^sup>\\<leftrightarrow> ^^ Suc n\n  (?x, ?z) \\<in> ?R ^^ Suc ?n \\<Longrightarrow>\n  \\<exists>y. (?x, y) \\<in> ?R \\<and> (y, ?z) \\<in> ?R ^^ ?n\n\ngoal (1 subgoal):\n 1. (\\<And>z.\n        \\<lbrakk>(x, z) \\<in> r\\<^sup>\\<leftrightarrow>;\n         (z, y) \\<in> r\\<^sup>\\<leftrightarrow> ^^ n\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by best"], ["proof (state)\nthis:\n  (x, z) \\<in> r\\<^sup>\\<leftrightarrow>\n  (z, y) \\<in> r\\<^sup>\\<leftrightarrow> ^^ n\n\ngoal (1 subgoal):\n 1. \\<And>n x.\n       \\<lbrakk>\\<And>x.\n                   (x, y)\n                   \\<in> r\\<^sup>\\<leftrightarrow> ^^ n \\<Longrightarrow>\n                   (x, y) \\<in> r\\<^sup>\\<down>;\n        (x, y) \\<in> r\\<^sup>\\<leftrightarrow> ^^ Suc n\\<rbrakk>\n       \\<Longrightarrow> (x, y) \\<in> r\\<^sup>\\<down>", "with Suc"], ["proof (chain)\npicking this:\n  (?x, y) \\<in> r\\<^sup>\\<leftrightarrow> ^^ n \\<Longrightarrow>\n  (?x, y) \\<in> r\\<^sup>\\<down>\n  (x, y) \\<in> r\\<^sup>\\<leftrightarrow> ^^ Suc n\n  (x, z) \\<in> r\\<^sup>\\<leftrightarrow>\n  (z, y) \\<in> r\\<^sup>\\<leftrightarrow> ^^ n", "have \"(z, y) \\<in> r\\<^sup>\\<down>\""], ["proof (prove)\nusing this:\n  (?x, y) \\<in> r\\<^sup>\\<leftrightarrow> ^^ n \\<Longrightarrow>\n  (?x, y) \\<in> r\\<^sup>\\<down>\n  (x, y) \\<in> r\\<^sup>\\<leftrightarrow> ^^ Suc n\n  (x, z) \\<in> r\\<^sup>\\<leftrightarrow>\n  (z, y) \\<in> r\\<^sup>\\<leftrightarrow> ^^ n\n\ngoal (1 subgoal):\n 1. (z, y) \\<in> r\\<^sup>\\<down>", "by simp"], ["proof (state)\nthis:\n  (z, y) \\<in> r\\<^sup>\\<down>\n\ngoal (1 subgoal):\n 1. \\<And>n x.\n       \\<lbrakk>\\<And>x.\n                   (x, y)\n                   \\<in> r\\<^sup>\\<leftrightarrow> ^^ n \\<Longrightarrow>\n                   (x, y) \\<in> r\\<^sup>\\<down>;\n        (x, y) \\<in> r\\<^sup>\\<leftrightarrow> ^^ Suc n\\<rbrakk>\n       \\<Longrightarrow> (x, y) \\<in> r\\<^sup>\\<down>", "from \\<open>(x, z) \\<in> r\\<^sup>\\<leftrightarrow>\\<close>"], ["proof (chain)\npicking this:\n  (x, z) \\<in> r\\<^sup>\\<leftrightarrow>", "show ?case"], ["proof (prove)\nusing this:\n  (x, z) \\<in> r\\<^sup>\\<leftrightarrow>\n\ngoal (1 subgoal):\n 1. (x, y) \\<in> r\\<^sup>\\<down>", "proof"], ["proof (state)\ngoal (2 subgoals):\n 1. (x, z) \\<in> r \\<Longrightarrow> (x, y) \\<in> r\\<^sup>\\<down>\n 2. (x, z) \\<in> r\\<inverse> \\<Longrightarrow> (x, y) \\<in> r\\<^sup>\\<down>", "assume \"(x, z) \\<in> r\""], ["proof (state)\nthis:\n  (x, z) \\<in> r\n\ngoal (2 subgoals):\n 1. (x, z) \\<in> r \\<Longrightarrow> (x, y) \\<in> r\\<^sup>\\<down>\n 2. (x, z) \\<in> r\\<inverse> \\<Longrightarrow> (x, y) \\<in> r\\<^sup>\\<down>", "with \\<open>(z, y) \\<in> r\\<^sup>\\<down>\\<close>"], ["proof (chain)\npicking this:\n  (z, y) \\<in> r\\<^sup>\\<down>\n  (x, z) \\<in> r", "show ?thesis"], ["proof (prove)\nusing this:\n  (z, y) \\<in> r\\<^sup>\\<down>\n  (x, z) \\<in> r\n\ngoal (1 subgoal):\n 1. (x, y) \\<in> r\\<^sup>\\<down>", "by (auto intro: rtrancl_join_join)"], ["proof (state)\nthis:\n  (x, y) \\<in> r\\<^sup>\\<down>\n\ngoal (1 subgoal):\n 1. (x, z) \\<in> r\\<inverse> \\<Longrightarrow> (x, y) \\<in> r\\<^sup>\\<down>", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. (x, z) \\<in> r\\<inverse> \\<Longrightarrow> (x, y) \\<in> r\\<^sup>\\<down>", "assume \"(x, z) \\<in> r\\<inverse>\""], ["proof (state)\nthis:\n  (x, z) \\<in> r\\<inverse>\n\ngoal (1 subgoal):\n 1. (x, z) \\<in> r\\<inverse> \\<Longrightarrow> (x, y) \\<in> r\\<^sup>\\<down>", "then"], ["proof (chain)\npicking this:\n  (x, z) \\<in> r\\<inverse>", "have \"(z, x) \\<in> r\\<^sup>*\""], ["proof (prove)\nusing this:\n  (x, z) \\<in> r\\<inverse>\n\ngoal (1 subgoal):\n 1. (z, x) \\<in> r\\<^sup>*", "by simp"], ["proof (state)\nthis:\n  (z, x) \\<in> r\\<^sup>*\n\ngoal (1 subgoal):\n 1. (x, z) \\<in> r\\<inverse> \\<Longrightarrow> (x, y) \\<in> r\\<^sup>\\<down>", "from \\<open>(z, y) \\<in> r\\<^sup>\\<down>\\<close>"], ["proof (chain)\npicking this:\n  (z, y) \\<in> r\\<^sup>\\<down>", "obtain z' where \"(z, z') \\<in> r\\<^sup>*\" and \"(y, z') \\<in> r\\<^sup>*\""], ["proof (prove)\nusing this:\n  (z, y) \\<in> r\\<^sup>\\<down>\n\ngoal (1 subgoal):\n 1. (\\<And>z'.\n        \\<lbrakk>(z, z') \\<in> r\\<^sup>*; (y, z') \\<in> r\\<^sup>*\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  (z, z') \\<in> r\\<^sup>*\n  (y, z') \\<in> r\\<^sup>*\n\ngoal (1 subgoal):\n 1. (x, z) \\<in> r\\<inverse> \\<Longrightarrow> (x, y) \\<in> r\\<^sup>\\<down>", "from \\<open>CR r\\<close> and \\<open>(z, x) \\<in> r\\<^sup>*\\<close> and \\<open>(z, z') \\<in> r\\<^sup>*\\<close>"], ["proof (chain)\npicking this:\n  CR r\n  (z, x) \\<in> r\\<^sup>*\n  (z, z') \\<in> r\\<^sup>*", "have \"(x, z') \\<in> r\\<^sup>\\<down>\""], ["proof (prove)\nusing this:\n  CR r\n  (z, x) \\<in> r\\<^sup>*\n  (z, z') \\<in> r\\<^sup>*\n\ngoal (1 subgoal):\n 1. (x, z') \\<in> r\\<^sup>\\<down>", "by (rule CR_divergence_imp_join)"], ["proof (state)\nthis:\n  (x, z') \\<in> r\\<^sup>\\<down>\n\ngoal (1 subgoal):\n 1. (x, z) \\<in> r\\<inverse> \\<Longrightarrow> (x, y) \\<in> r\\<^sup>\\<down>", "then"], ["proof (chain)\npicking this:\n  (x, z') \\<in> r\\<^sup>\\<down>", "obtain x' where \"(x, x') \\<in> r\\<^sup>*\" and \"(z', x') \\<in> r\\<^sup>*\""], ["proof (prove)\nusing this:\n  (x, z') \\<in> r\\<^sup>\\<down>\n\ngoal (1 subgoal):\n 1. (\\<And>x'.\n        \\<lbrakk>(x, x') \\<in> r\\<^sup>*; (z', x') \\<in> r\\<^sup>*\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  (x, x') \\<in> r\\<^sup>*\n  (z', x') \\<in> r\\<^sup>*\n\ngoal (1 subgoal):\n 1. (x, z) \\<in> r\\<inverse> \\<Longrightarrow> (x, y) \\<in> r\\<^sup>\\<down>", "with \\<open>(y, z') \\<in> r\\<^sup>*\\<close>"], ["proof (chain)\npicking this:\n  (y, z') \\<in> r\\<^sup>*\n  (x, x') \\<in> r\\<^sup>*\n  (z', x') \\<in> r\\<^sup>*", "show ?thesis"], ["proof (prove)\nusing this:\n  (y, z') \\<in> r\\<^sup>*\n  (x, x') \\<in> r\\<^sup>*\n  (z', x') \\<in> r\\<^sup>*\n\ngoal (1 subgoal):\n 1. (x, y) \\<in> r\\<^sup>\\<down>", "by auto"], ["proof (state)\nthis:\n  (x, y) \\<in> r\\<^sup>\\<down>\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  (x, y) \\<in> r\\<^sup>\\<down>\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  (x, y) \\<in> r\\<^sup>\\<down>\n\ngoal (1 subgoal):\n 1. r\\<^sup>\\<leftrightarrow>\\<^sup>*\n    \\<subseteq> r\\<^sup>\\<down> \\<Longrightarrow>\n    CR r", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. r\\<^sup>\\<leftrightarrow>\\<^sup>*\n    \\<subseteq> r\\<^sup>\\<down> \\<Longrightarrow>\n    CR r", "assume \"r\\<^sup>\\<leftrightarrow>\\<^sup>* \\<subseteq> r\\<^sup>\\<down>\""], ["proof (state)\nthis:\n  r\\<^sup>\\<leftrightarrow>\\<^sup>* \\<subseteq> r\\<^sup>\\<down>\n\ngoal (1 subgoal):\n 1. r\\<^sup>\\<leftrightarrow>\\<^sup>*\n    \\<subseteq> r\\<^sup>\\<down> \\<Longrightarrow>\n    CR r", "then"], ["proof (chain)\npicking this:\n  r\\<^sup>\\<leftrightarrow>\\<^sup>* \\<subseteq> r\\<^sup>\\<down>", "show \"CR r\""], ["proof (prove)\nusing this:\n  r\\<^sup>\\<leftrightarrow>\\<^sup>* \\<subseteq> r\\<^sup>\\<down>\n\ngoal (1 subgoal):\n 1. CR r", "unfolding CR_iff_meet_subset_join"], ["proof (prove)\nusing this:\n  r\\<^sup>\\<leftrightarrow>\\<^sup>* \\<subseteq> r\\<^sup>\\<down>\n\ngoal (1 subgoal):\n 1. r\\<^sup>\\<up> \\<subseteq> r\\<^sup>\\<down>", "using meet_imp_conversion"], ["proof (prove)\nusing this:\n  r\\<^sup>\\<leftrightarrow>\\<^sup>* \\<subseteq> r\\<^sup>\\<down>\n  ?r\\<^sup>\\<up> \\<subseteq> ?r\\<^sup>\\<leftrightarrow>\\<^sup>*\n\ngoal (1 subgoal):\n 1. r\\<^sup>\\<up> \\<subseteq> r\\<^sup>\\<down>", "by auto"], ["proof (state)\nthis:\n  CR r\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma CR_imp_conversionIff_join:\n  assumes \"CR r\" shows \"r\\<^sup>\\<leftrightarrow>\\<^sup>* = r\\<^sup>\\<down>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. r\\<^sup>\\<leftrightarrow>\\<^sup>* = r\\<^sup>\\<down>", "proof"], ["proof (state)\ngoal (2 subgoals):\n 1. r\\<^sup>\\<leftrightarrow>\\<^sup>* \\<subseteq> r\\<^sup>\\<down>\n 2. r\\<^sup>\\<down> \\<subseteq> r\\<^sup>\\<leftrightarrow>\\<^sup>*", "show \"r\\<^sup>\\<leftrightarrow>\\<^sup>* \\<subseteq> r\\<^sup>\\<down>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. r\\<^sup>\\<leftrightarrow>\\<^sup>* \\<subseteq> r\\<^sup>\\<down>", "using CR_iff_conversion_imp_join assms"], ["proof (prove)\nusing this:\n  CR ?r = (?r\\<^sup>\\<leftrightarrow>\\<^sup>* \\<subseteq> ?r\\<^sup>\\<down>)\n  CR r\n\ngoal (1 subgoal):\n 1. r\\<^sup>\\<leftrightarrow>\\<^sup>* \\<subseteq> r\\<^sup>\\<down>", "by auto"], ["proof (state)\nthis:\n  r\\<^sup>\\<leftrightarrow>\\<^sup>* \\<subseteq> r\\<^sup>\\<down>\n\ngoal (1 subgoal):\n 1. r\\<^sup>\\<down> \\<subseteq> r\\<^sup>\\<leftrightarrow>\\<^sup>*", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. r\\<^sup>\\<down> \\<subseteq> r\\<^sup>\\<leftrightarrow>\\<^sup>*", "show \"r\\<^sup>\\<down> \\<subseteq> r\\<^sup>\\<leftrightarrow>\\<^sup>*\""], ["proof (prove)\ngoal (1 subgoal):\n 1. r\\<^sup>\\<down> \\<subseteq> r\\<^sup>\\<leftrightarrow>\\<^sup>*", "by (rule join_imp_conversion)"], ["proof (state)\nthis:\n  r\\<^sup>\\<down> \\<subseteq> r\\<^sup>\\<leftrightarrow>\\<^sup>*\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma sym_join: \"sym (join r)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. sym (r\\<^sup>\\<down>)", "by (auto simp: sym_def)"], ["", "lemma join_sym: \"(s, t) \\<in> A\\<^sup>\\<down> \\<Longrightarrow> (t, s) \\<in> A\\<^sup>\\<down>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (s, t) \\<in> A\\<^sup>\\<down> \\<Longrightarrow>\n    (t, s) \\<in> A\\<^sup>\\<down>", "by auto"], ["", "lemma CR_join_left_I:\n  assumes \"CR r\" and \"(x, y) \\<in> r\\<^sup>*\" and \"(x, z) \\<in> r\\<^sup>\\<down>\" shows \"(y, z) \\<in> r\\<^sup>\\<down>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (y, z) \\<in> r\\<^sup>\\<down>", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. (y, z) \\<in> r\\<^sup>\\<down>", "from \\<open>(x, z) \\<in> r\\<^sup>\\<down>\\<close>"], ["proof (chain)\npicking this:\n  (x, z) \\<in> r\\<^sup>\\<down>", "obtain x' where \"(x, x') \\<in> r\\<^sup>*\" and \"(z, x') \\<in> r\\<^sup>\\<down>\""], ["proof (prove)\nusing this:\n  (x, z) \\<in> r\\<^sup>\\<down>\n\ngoal (1 subgoal):\n 1. (\\<And>x'.\n        \\<lbrakk>(x, x') \\<in> r\\<^sup>*;\n         (z, x') \\<in> r\\<^sup>\\<down>\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  (x, x') \\<in> r\\<^sup>*\n  (z, x') \\<in> r\\<^sup>\\<down>\n\ngoal (1 subgoal):\n 1. (y, z) \\<in> r\\<^sup>\\<down>", "from \\<open>CR r\\<close> and \\<open>(x, x') \\<in> r\\<^sup>*\\<close> and \\<open>(x, y) \\<in> r\\<^sup>*\\<close>"], ["proof (chain)\npicking this:\n  CR r\n  (x, x') \\<in> r\\<^sup>*\n  (x, y) \\<in> r\\<^sup>*", "have \"(x, y) \\<in> r\\<^sup>\\<down>\""], ["proof (prove)\nusing this:\n  CR r\n  (x, x') \\<in> r\\<^sup>*\n  (x, y) \\<in> r\\<^sup>*\n\ngoal (1 subgoal):\n 1. (x, y) \\<in> r\\<^sup>\\<down>", "by auto"], ["proof (state)\nthis:\n  (x, y) \\<in> r\\<^sup>\\<down>\n\ngoal (1 subgoal):\n 1. (y, z) \\<in> r\\<^sup>\\<down>", "then"], ["proof (chain)\npicking this:\n  (x, y) \\<in> r\\<^sup>\\<down>", "have \"(y, x) \\<in> r\\<^sup>\\<down>\""], ["proof (prove)\nusing this:\n  (x, y) \\<in> r\\<^sup>\\<down>\n\ngoal (1 subgoal):\n 1. (y, x) \\<in> r\\<^sup>\\<down>", "using join_sym"], ["proof (prove)\nusing this:\n  (x, y) \\<in> r\\<^sup>\\<down>\n  (?s, ?t) \\<in> ?A\\<^sup>\\<down> \\<Longrightarrow>\n  (?t, ?s) \\<in> ?A\\<^sup>\\<down>\n\ngoal (1 subgoal):\n 1. (y, x) \\<in> r\\<^sup>\\<down>", "by best"], ["proof (state)\nthis:\n  (y, x) \\<in> r\\<^sup>\\<down>\n\ngoal (1 subgoal):\n 1. (y, z) \\<in> r\\<^sup>\\<down>", "from \\<open>CR r\\<close>"], ["proof (chain)\npicking this:\n  CR r", "have \"r\\<^sup>\\<leftrightarrow>\\<^sup>* = r\\<^sup>\\<down>\""], ["proof (prove)\nusing this:\n  CR r\n\ngoal (1 subgoal):\n 1. r\\<^sup>\\<leftrightarrow>\\<^sup>* = r\\<^sup>\\<down>", "by (rule CR_imp_conversionIff_join)"], ["proof (state)\nthis:\n  r\\<^sup>\\<leftrightarrow>\\<^sup>* = r\\<^sup>\\<down>\n\ngoal (1 subgoal):\n 1. (y, z) \\<in> r\\<^sup>\\<down>", "from \\<open>(y, x) \\<in> r\\<^sup>\\<down>\\<close> and \\<open>(x, z) \\<in> r\\<^sup>\\<down>\\<close>"], ["proof (chain)\npicking this:\n  (y, x) \\<in> r\\<^sup>\\<down>\n  (x, z) \\<in> r\\<^sup>\\<down>", "show ?thesis"], ["proof (prove)\nusing this:\n  (y, x) \\<in> r\\<^sup>\\<down>\n  (x, z) \\<in> r\\<^sup>\\<down>\n\ngoal (1 subgoal):\n 1. (y, z) \\<in> r\\<^sup>\\<down>", "using conversion_trans"], ["proof (prove)\nusing this:\n  (y, x) \\<in> r\\<^sup>\\<down>\n  (x, z) \\<in> r\\<^sup>\\<down>\n  trans (?A\\<^sup>\\<leftrightarrow>\\<^sup>*)\n\ngoal (1 subgoal):\n 1. (y, z) \\<in> r\\<^sup>\\<down>", "unfolding trans_def \\<open>r\\<^sup>\\<leftrightarrow>\\<^sup>* = r\\<^sup>\\<down>\\<close> [symmetric]"], ["proof (prove)\nusing this:\n  (y, x) \\<in> r\\<^sup>\\<leftrightarrow>\\<^sup>*\n  (x, z) \\<in> r\\<^sup>\\<leftrightarrow>\\<^sup>*\n  \\<forall>x y z.\n     (x, y) \\<in> ?A\\<^sup>\\<leftrightarrow>\\<^sup>* \\<longrightarrow>\n     (y, z) \\<in> ?A\\<^sup>\\<leftrightarrow>\\<^sup>* \\<longrightarrow>\n     (x, z) \\<in> ?A\\<^sup>\\<leftrightarrow>\\<^sup>*\n\ngoal (1 subgoal):\n 1. (y, z) \\<in> r\\<^sup>\\<leftrightarrow>\\<^sup>*", "by best"], ["proof (state)\nthis:\n  (y, z) \\<in> r\\<^sup>\\<down>\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma CR_join_right_I:\n assumes \"CR r\" and \"(x, y) \\<in> r\\<^sup>\\<down>\" and \"(y, z) \\<in> r\\<^sup>*\" shows \"(x, z) \\<in> r\\<^sup>\\<down>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (x, z) \\<in> r\\<^sup>\\<down>", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. (x, z) \\<in> r\\<^sup>\\<down>", "have \"r\\<^sup>\\<leftrightarrow>\\<^sup>* = r\\<^sup>\\<down>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. r\\<^sup>\\<leftrightarrow>\\<^sup>* = r\\<^sup>\\<down>", "by (rule CR_imp_conversionIff_join [OF \\<open>CR r\\<close>])"], ["proof (state)\nthis:\n  r\\<^sup>\\<leftrightarrow>\\<^sup>* = r\\<^sup>\\<down>\n\ngoal (1 subgoal):\n 1. (x, z) \\<in> r\\<^sup>\\<down>", "from \\<open>(y, z) \\<in> r\\<^sup>*\\<close>"], ["proof (chain)\npicking this:\n  (y, z) \\<in> r\\<^sup>*", "have \"(y, z) \\<in> r\\<^sup>\\<leftrightarrow>\\<^sup>*\""], ["proof (prove)\nusing this:\n  (y, z) \\<in> r\\<^sup>*\n\ngoal (1 subgoal):\n 1. (y, z) \\<in> r\\<^sup>\\<leftrightarrow>\\<^sup>*", "by auto"], ["proof (state)\nthis:\n  (y, z) \\<in> r\\<^sup>\\<leftrightarrow>\\<^sup>*\n\ngoal (1 subgoal):\n 1. (x, z) \\<in> r\\<^sup>\\<down>", "with \\<open>(x, y) \\<in> r\\<^sup>\\<down>\\<close>"], ["proof (chain)\npicking this:\n  (x, y) \\<in> r\\<^sup>\\<down>\n  (y, z) \\<in> r\\<^sup>\\<leftrightarrow>\\<^sup>*", "show ?thesis"], ["proof (prove)\nusing this:\n  (x, y) \\<in> r\\<^sup>\\<down>\n  (y, z) \\<in> r\\<^sup>\\<leftrightarrow>\\<^sup>*\n\ngoal (1 subgoal):\n 1. (x, z) \\<in> r\\<^sup>\\<down>", "unfolding \\<open>r\\<^sup>\\<leftrightarrow>\\<^sup>* = r\\<^sup>\\<down>\\<close> [symmetric]"], ["proof (prove)\nusing this:\n  (x, y) \\<in> r\\<^sup>\\<leftrightarrow>\\<^sup>*\n  (y, z) \\<in> r\\<^sup>\\<leftrightarrow>\\<^sup>*\n\ngoal (1 subgoal):\n 1. (x, z) \\<in> r\\<^sup>\\<leftrightarrow>\\<^sup>*", "using conversion_trans"], ["proof (prove)\nusing this:\n  (x, y) \\<in> r\\<^sup>\\<leftrightarrow>\\<^sup>*\n  (y, z) \\<in> r\\<^sup>\\<leftrightarrow>\\<^sup>*\n  trans (?A\\<^sup>\\<leftrightarrow>\\<^sup>*)\n\ngoal (1 subgoal):\n 1. (x, z) \\<in> r\\<^sup>\\<leftrightarrow>\\<^sup>*", "unfolding trans_def"], ["proof (prove)\nusing this:\n  (x, y) \\<in> r\\<^sup>\\<leftrightarrow>\\<^sup>*\n  (y, z) \\<in> r\\<^sup>\\<leftrightarrow>\\<^sup>*\n  \\<forall>x y z.\n     (x, y) \\<in> ?A\\<^sup>\\<leftrightarrow>\\<^sup>* \\<longrightarrow>\n     (y, z) \\<in> ?A\\<^sup>\\<leftrightarrow>\\<^sup>* \\<longrightarrow>\n     (x, z) \\<in> ?A\\<^sup>\\<leftrightarrow>\\<^sup>*\n\ngoal (1 subgoal):\n 1. (x, z) \\<in> r\\<^sup>\\<leftrightarrow>\\<^sup>*", "by fast"], ["proof (state)\nthis:\n  (x, z) \\<in> r\\<^sup>\\<down>\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma NF_not_suc:\n  assumes \"(x, y) \\<in> r\\<^sup>*\" and \"x \\<in> NF r\" shows \"x = y\""], ["proof (prove)\ngoal (1 subgoal):\n 1. x = y", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. x = y", "from \\<open>x \\<in> NF r\\<close>"], ["proof (chain)\npicking this:\n  x \\<in> NF r", "have \"\\<forall>y. (x, y) \\<notin> r\""], ["proof (prove)\nusing this:\n  x \\<in> NF r\n\ngoal (1 subgoal):\n 1. \\<forall>y. (x, y) \\<notin> r", "using NF_no_step"], ["proof (prove)\nusing this:\n  x \\<in> NF r\n  ?a \\<in> NF ?A \\<Longrightarrow> \\<forall>b. (?a, b) \\<notin> ?A\n\ngoal (1 subgoal):\n 1. \\<forall>y. (x, y) \\<notin> r", "by auto"], ["proof (state)\nthis:\n  \\<forall>y. (x, y) \\<notin> r\n\ngoal (1 subgoal):\n 1. x = y", "then"], ["proof (chain)\npicking this:\n  \\<forall>y. (x, y) \\<notin> r", "have \"x \\<notin> Domain r\""], ["proof (prove)\nusing this:\n  \\<forall>y. (x, y) \\<notin> r\n\ngoal (1 subgoal):\n 1. x \\<notin> Domain r", "unfolding Domain_unfold"], ["proof (prove)\nusing this:\n  \\<forall>y. (x, y) \\<notin> r\n\ngoal (1 subgoal):\n 1. x \\<notin> {x. \\<exists>y. (x, y) \\<in> r}", "by simp"], ["proof (state)\nthis:\n  x \\<notin> Domain r\n\ngoal (1 subgoal):\n 1. x = y", "from \\<open>(x, y) \\<in> r\\<^sup>*\\<close>"], ["proof (chain)\npicking this:\n  (x, y) \\<in> r\\<^sup>*", "show ?thesis"], ["proof (prove)\nusing this:\n  (x, y) \\<in> r\\<^sup>*\n\ngoal (1 subgoal):\n 1. x = y", "unfolding Not_Domain_rtrancl [OF \\<open>x \\<notin> Domain r\\<close>]"], ["proof (prove)\nusing this:\n  x = y\n\ngoal (1 subgoal):\n 1. x = y", "by simp"], ["proof (state)\nthis:\n  x = y\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma semi_complete_imp_conversionIff_same_NF:\n  assumes \"semi_complete r\"\n  shows \"((x, y) \\<in> r\\<^sup>\\<leftrightarrow>\\<^sup>*) = (\\<forall>u v. (x, u) \\<in> r\\<^sup>! \\<and> (y, v) \\<in> r\\<^sup>! \\<longrightarrow> u = v)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. ((x, y) \\<in> r\\<^sup>\\<leftrightarrow>\\<^sup>*) =\n    (\\<forall>u v.\n        (x, u) \\<in> r\\<^sup>! \\<and>\n        (y, v) \\<in> r\\<^sup>! \\<longrightarrow>\n        u = v)", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. ((x, y) \\<in> r\\<^sup>\\<leftrightarrow>\\<^sup>*) =\n    (\\<forall>u v.\n        (x, u) \\<in> r\\<^sup>! \\<and>\n        (y, v) \\<in> r\\<^sup>! \\<longrightarrow>\n        u = v)", "from assms"], ["proof (chain)\npicking this:\n  semi_complete r", "have \"WN r\" and \"CR r\""], ["proof (prove)\nusing this:\n  semi_complete r\n\ngoal (1 subgoal):\n 1. WN r &&& CR r", "unfolding semi_complete_defs"], ["proof (prove)\nusing this:\n  WN r \\<and> CR r\n\ngoal (1 subgoal):\n 1. WN r &&& CR r", "by auto"], ["proof (state)\nthis:\n  WN r\n  CR r\n\ngoal (1 subgoal):\n 1. ((x, y) \\<in> r\\<^sup>\\<leftrightarrow>\\<^sup>*) =\n    (\\<forall>u v.\n        (x, u) \\<in> r\\<^sup>! \\<and>\n        (y, v) \\<in> r\\<^sup>! \\<longrightarrow>\n        u = v)", "then"], ["proof (chain)\npicking this:\n  WN r\n  CR r", "have \"r\\<^sup>\\<leftrightarrow>\\<^sup>* = r\\<^sup>\\<down>\""], ["proof (prove)\nusing this:\n  WN r\n  CR r\n\ngoal (1 subgoal):\n 1. r\\<^sup>\\<leftrightarrow>\\<^sup>* = r\\<^sup>\\<down>", "using CR_imp_conversionIff_join"], ["proof (prove)\nusing this:\n  WN r\n  CR r\n  CR ?r \\<Longrightarrow>\n  ?r\\<^sup>\\<leftrightarrow>\\<^sup>* = ?r\\<^sup>\\<down>\n\ngoal (1 subgoal):\n 1. r\\<^sup>\\<leftrightarrow>\\<^sup>* = r\\<^sup>\\<down>", "by auto"], ["proof (state)\nthis:\n  r\\<^sup>\\<leftrightarrow>\\<^sup>* = r\\<^sup>\\<down>\n\ngoal (1 subgoal):\n 1. ((x, y) \\<in> r\\<^sup>\\<leftrightarrow>\\<^sup>*) =\n    (\\<forall>u v.\n        (x, u) \\<in> r\\<^sup>! \\<and>\n        (y, v) \\<in> r\\<^sup>! \\<longrightarrow>\n        u = v)", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. ((x, y) \\<in> r\\<^sup>\\<leftrightarrow>\\<^sup>*) =\n    (\\<forall>u v.\n        (x, u) \\<in> r\\<^sup>! \\<and>\n        (y, v) \\<in> r\\<^sup>! \\<longrightarrow>\n        u = v)", "proof"], ["proof (state)\ngoal (2 subgoals):\n 1. (x, y) \\<in> r\\<^sup>\\<leftrightarrow>\\<^sup>* \\<Longrightarrow>\n    \\<forall>u v.\n       (x, u) \\<in> r\\<^sup>! \\<and>\n       (y, v) \\<in> r\\<^sup>! \\<longrightarrow>\n       u = v\n 2. \\<forall>u v.\n       (x, u) \\<in> r\\<^sup>! \\<and>\n       (y, v) \\<in> r\\<^sup>! \\<longrightarrow>\n       u = v \\<Longrightarrow>\n    (x, y) \\<in> r\\<^sup>\\<leftrightarrow>\\<^sup>*", "assume \"(x, y) \\<in> r\\<^sup>\\<leftrightarrow>\\<^sup>*\""], ["proof (state)\nthis:\n  (x, y) \\<in> r\\<^sup>\\<leftrightarrow>\\<^sup>*\n\ngoal (2 subgoals):\n 1. (x, y) \\<in> r\\<^sup>\\<leftrightarrow>\\<^sup>* \\<Longrightarrow>\n    \\<forall>u v.\n       (x, u) \\<in> r\\<^sup>! \\<and>\n       (y, v) \\<in> r\\<^sup>! \\<longrightarrow>\n       u = v\n 2. \\<forall>u v.\n       (x, u) \\<in> r\\<^sup>! \\<and>\n       (y, v) \\<in> r\\<^sup>! \\<longrightarrow>\n       u = v \\<Longrightarrow>\n    (x, y) \\<in> r\\<^sup>\\<leftrightarrow>\\<^sup>*", "from \\<open>(x, y) \\<in> r\\<^sup>\\<leftrightarrow>\\<^sup>*\\<close>"], ["proof (chain)\npicking this:\n  (x, y) \\<in> r\\<^sup>\\<leftrightarrow>\\<^sup>*", "have \"(x, y) \\<in> r\\<^sup>\\<down>\""], ["proof (prove)\nusing this:\n  (x, y) \\<in> r\\<^sup>\\<leftrightarrow>\\<^sup>*\n\ngoal (1 subgoal):\n 1. (x, y) \\<in> r\\<^sup>\\<down>", "unfolding \\<open>r\\<^sup>\\<leftrightarrow>\\<^sup>* = r\\<^sup>\\<down>\\<close>"], ["proof (prove)\nusing this:\n  (x, y) \\<in> r\\<^sup>\\<down>\n\ngoal (1 subgoal):\n 1. (x, y) \\<in> r\\<^sup>\\<down>", "."], ["proof (state)\nthis:\n  (x, y) \\<in> r\\<^sup>\\<down>\n\ngoal (2 subgoals):\n 1. (x, y) \\<in> r\\<^sup>\\<leftrightarrow>\\<^sup>* \\<Longrightarrow>\n    \\<forall>u v.\n       (x, u) \\<in> r\\<^sup>! \\<and>\n       (y, v) \\<in> r\\<^sup>! \\<longrightarrow>\n       u = v\n 2. \\<forall>u v.\n       (x, u) \\<in> r\\<^sup>! \\<and>\n       (y, v) \\<in> r\\<^sup>! \\<longrightarrow>\n       u = v \\<Longrightarrow>\n    (x, y) \\<in> r\\<^sup>\\<leftrightarrow>\\<^sup>*", "show \"\\<forall>u v. (x, u) \\<in> r\\<^sup>! \\<and> (y, v) \\<in> r\\<^sup>! \\<longrightarrow> u = v\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>u v.\n       (x, u) \\<in> r\\<^sup>! \\<and>\n       (y, v) \\<in> r\\<^sup>! \\<longrightarrow>\n       u = v", "proof (intro allI impI, elim conjE)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>u v.\n       \\<lbrakk>(x, u) \\<in> r\\<^sup>!; (y, v) \\<in> r\\<^sup>!\\<rbrakk>\n       \\<Longrightarrow> u = v", "fix u v"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>u v.\n       \\<lbrakk>(x, u) \\<in> r\\<^sup>!; (y, v) \\<in> r\\<^sup>!\\<rbrakk>\n       \\<Longrightarrow> u = v", "assume \"(x, u) \\<in> r\\<^sup>!\" and \"(y, v) \\<in> r\\<^sup>!\""], ["proof (state)\nthis:\n  (x, u) \\<in> r\\<^sup>!\n  (y, v) \\<in> r\\<^sup>!\n\ngoal (1 subgoal):\n 1. \\<And>u v.\n       \\<lbrakk>(x, u) \\<in> r\\<^sup>!; (y, v) \\<in> r\\<^sup>!\\<rbrakk>\n       \\<Longrightarrow> u = v", "then"], ["proof (chain)\npicking this:\n  (x, u) \\<in> r\\<^sup>!\n  (y, v) \\<in> r\\<^sup>!", "have \"(x, u) \\<in> r\\<^sup>*\" and \"(y, v) \\<in> r\\<^sup>*\" and \"u \\<in> NF r\" and \"v \\<in> NF r\""], ["proof (prove)\nusing this:\n  (x, u) \\<in> r\\<^sup>!\n  (y, v) \\<in> r\\<^sup>!\n\ngoal (1 subgoal):\n 1. ((x, u) \\<in> r\\<^sup>* &&& (y, v) \\<in> r\\<^sup>*) &&&\n    u \\<in> NF r &&& v \\<in> NF r", "by auto"], ["proof (state)\nthis:\n  (x, u) \\<in> r\\<^sup>*\n  (y, v) \\<in> r\\<^sup>*\n  u \\<in> NF r\n  v \\<in> NF r\n\ngoal (1 subgoal):\n 1. \\<And>u v.\n       \\<lbrakk>(x, u) \\<in> r\\<^sup>!; (y, v) \\<in> r\\<^sup>!\\<rbrakk>\n       \\<Longrightarrow> u = v", "from \\<open>CR r\\<close> and \\<open>(x, u) \\<in> r\\<^sup>*\\<close> and \\<open>(x, y) \\<in> r\\<^sup>\\<down>\\<close>"], ["proof (chain)\npicking this:\n  CR r\n  (x, u) \\<in> r\\<^sup>*\n  (x, y) \\<in> r\\<^sup>\\<down>", "have \"(u, y) \\<in> r\\<^sup>\\<down>\""], ["proof (prove)\nusing this:\n  CR r\n  (x, u) \\<in> r\\<^sup>*\n  (x, y) \\<in> r\\<^sup>\\<down>\n\ngoal (1 subgoal):\n 1. (u, y) \\<in> r\\<^sup>\\<down>", "by (auto intro: CR_join_left_I)"], ["proof (state)\nthis:\n  (u, y) \\<in> r\\<^sup>\\<down>\n\ngoal (1 subgoal):\n 1. \\<And>u v.\n       \\<lbrakk>(x, u) \\<in> r\\<^sup>!; (y, v) \\<in> r\\<^sup>!\\<rbrakk>\n       \\<Longrightarrow> u = v", "then"], ["proof (chain)\npicking this:\n  (u, y) \\<in> r\\<^sup>\\<down>", "have \"(y, u) \\<in> r\\<^sup>\\<down>\""], ["proof (prove)\nusing this:\n  (u, y) \\<in> r\\<^sup>\\<down>\n\ngoal (1 subgoal):\n 1. (y, u) \\<in> r\\<^sup>\\<down>", "using join_sym"], ["proof (prove)\nusing this:\n  (u, y) \\<in> r\\<^sup>\\<down>\n  (?s, ?t) \\<in> ?A\\<^sup>\\<down> \\<Longrightarrow>\n  (?t, ?s) \\<in> ?A\\<^sup>\\<down>\n\ngoal (1 subgoal):\n 1. (y, u) \\<in> r\\<^sup>\\<down>", "by best"], ["proof (state)\nthis:\n  (y, u) \\<in> r\\<^sup>\\<down>\n\ngoal (1 subgoal):\n 1. \\<And>u v.\n       \\<lbrakk>(x, u) \\<in> r\\<^sup>!; (y, v) \\<in> r\\<^sup>!\\<rbrakk>\n       \\<Longrightarrow> u = v", "with \\<open>(x, y) \\<in> r\\<^sup>\\<down>\\<close>"], ["proof (chain)\npicking this:\n  (x, y) \\<in> r\\<^sup>\\<down>\n  (y, u) \\<in> r\\<^sup>\\<down>", "have \"(x, u) \\<in> r\\<^sup>\\<down>\""], ["proof (prove)\nusing this:\n  (x, y) \\<in> r\\<^sup>\\<down>\n  (y, u) \\<in> r\\<^sup>\\<down>\n\ngoal (1 subgoal):\n 1. (x, u) \\<in> r\\<^sup>\\<down>", "unfolding \\<open>r\\<^sup>\\<leftrightarrow>\\<^sup>* = r\\<^sup>\\<down>\\<close> [symmetric]"], ["proof (prove)\nusing this:\n  (x, y) \\<in> r\\<^sup>\\<leftrightarrow>\\<^sup>*\n  (y, u) \\<in> r\\<^sup>\\<leftrightarrow>\\<^sup>*\n\ngoal (1 subgoal):\n 1. (x, u) \\<in> r\\<^sup>\\<leftrightarrow>\\<^sup>*", "using conversion_trans"], ["proof (prove)\nusing this:\n  (x, y) \\<in> r\\<^sup>\\<leftrightarrow>\\<^sup>*\n  (y, u) \\<in> r\\<^sup>\\<leftrightarrow>\\<^sup>*\n  trans (?A\\<^sup>\\<leftrightarrow>\\<^sup>*)\n\ngoal (1 subgoal):\n 1. (x, u) \\<in> r\\<^sup>\\<leftrightarrow>\\<^sup>*", "unfolding trans_def"], ["proof (prove)\nusing this:\n  (x, y) \\<in> r\\<^sup>\\<leftrightarrow>\\<^sup>*\n  (y, u) \\<in> r\\<^sup>\\<leftrightarrow>\\<^sup>*\n  \\<forall>x y z.\n     (x, y) \\<in> ?A\\<^sup>\\<leftrightarrow>\\<^sup>* \\<longrightarrow>\n     (y, z) \\<in> ?A\\<^sup>\\<leftrightarrow>\\<^sup>* \\<longrightarrow>\n     (x, z) \\<in> ?A\\<^sup>\\<leftrightarrow>\\<^sup>*\n\ngoal (1 subgoal):\n 1. (x, u) \\<in> r\\<^sup>\\<leftrightarrow>\\<^sup>*", "by best"], ["proof (state)\nthis:\n  (x, u) \\<in> r\\<^sup>\\<down>\n\ngoal (1 subgoal):\n 1. \\<And>u v.\n       \\<lbrakk>(x, u) \\<in> r\\<^sup>!; (y, v) \\<in> r\\<^sup>!\\<rbrakk>\n       \\<Longrightarrow> u = v", "from \\<open>CR r\\<close> and \\<open>(x, y) \\<in> r\\<^sup>\\<down>\\<close> and \\<open>(y, v) \\<in> r\\<^sup>*\\<close>"], ["proof (chain)\npicking this:\n  CR r\n  (x, y) \\<in> r\\<^sup>\\<down>\n  (y, v) \\<in> r\\<^sup>*", "have \"(x, v) \\<in> r\\<^sup>\\<down>\""], ["proof (prove)\nusing this:\n  CR r\n  (x, y) \\<in> r\\<^sup>\\<down>\n  (y, v) \\<in> r\\<^sup>*\n\ngoal (1 subgoal):\n 1. (x, v) \\<in> r\\<^sup>\\<down>", "by (auto intro: CR_join_right_I)"], ["proof (state)\nthis:\n  (x, v) \\<in> r\\<^sup>\\<down>\n\ngoal (1 subgoal):\n 1. \\<And>u v.\n       \\<lbrakk>(x, u) \\<in> r\\<^sup>!; (y, v) \\<in> r\\<^sup>!\\<rbrakk>\n       \\<Longrightarrow> u = v", "then"], ["proof (chain)\npicking this:\n  (x, v) \\<in> r\\<^sup>\\<down>", "have \"(v, x) \\<in> r\\<^sup>\\<down>\""], ["proof (prove)\nusing this:\n  (x, v) \\<in> r\\<^sup>\\<down>\n\ngoal (1 subgoal):\n 1. (v, x) \\<in> r\\<^sup>\\<down>", "using join_sym"], ["proof (prove)\nusing this:\n  (x, v) \\<in> r\\<^sup>\\<down>\n  (?s, ?t) \\<in> ?A\\<^sup>\\<down> \\<Longrightarrow>\n  (?t, ?s) \\<in> ?A\\<^sup>\\<down>\n\ngoal (1 subgoal):\n 1. (v, x) \\<in> r\\<^sup>\\<down>", "unfolding sym_def"], ["proof (prove)\nusing this:\n  (x, v) \\<in> r\\<^sup>\\<down>\n  (?s, ?t) \\<in> ?A\\<^sup>\\<down> \\<Longrightarrow>\n  (?t, ?s) \\<in> ?A\\<^sup>\\<down>\n\ngoal (1 subgoal):\n 1. (v, x) \\<in> r\\<^sup>\\<down>", "by best"], ["proof (state)\nthis:\n  (v, x) \\<in> r\\<^sup>\\<down>\n\ngoal (1 subgoal):\n 1. \\<And>u v.\n       \\<lbrakk>(x, u) \\<in> r\\<^sup>!; (y, v) \\<in> r\\<^sup>!\\<rbrakk>\n       \\<Longrightarrow> u = v", "with \\<open>(x, u) \\<in> r\\<^sup>\\<down>\\<close>"], ["proof (chain)\npicking this:\n  (x, u) \\<in> r\\<^sup>\\<down>\n  (v, x) \\<in> r\\<^sup>\\<down>", "have \"(v, u) \\<in> r\\<^sup>\\<down>\""], ["proof (prove)\nusing this:\n  (x, u) \\<in> r\\<^sup>\\<down>\n  (v, x) \\<in> r\\<^sup>\\<down>\n\ngoal (1 subgoal):\n 1. (v, u) \\<in> r\\<^sup>\\<down>", "unfolding \\<open>r\\<^sup>\\<leftrightarrow>\\<^sup>* = r\\<^sup>\\<down>\\<close> [symmetric]"], ["proof (prove)\nusing this:\n  (x, u) \\<in> r\\<^sup>\\<leftrightarrow>\\<^sup>*\n  (v, x) \\<in> r\\<^sup>\\<leftrightarrow>\\<^sup>*\n\ngoal (1 subgoal):\n 1. (v, u) \\<in> r\\<^sup>\\<leftrightarrow>\\<^sup>*", "using conversion_trans"], ["proof (prove)\nusing this:\n  (x, u) \\<in> r\\<^sup>\\<leftrightarrow>\\<^sup>*\n  (v, x) \\<in> r\\<^sup>\\<leftrightarrow>\\<^sup>*\n  trans (?A\\<^sup>\\<leftrightarrow>\\<^sup>*)\n\ngoal (1 subgoal):\n 1. (v, u) \\<in> r\\<^sup>\\<leftrightarrow>\\<^sup>*", "unfolding trans_def"], ["proof (prove)\nusing this:\n  (x, u) \\<in> r\\<^sup>\\<leftrightarrow>\\<^sup>*\n  (v, x) \\<in> r\\<^sup>\\<leftrightarrow>\\<^sup>*\n  \\<forall>x y z.\n     (x, y) \\<in> ?A\\<^sup>\\<leftrightarrow>\\<^sup>* \\<longrightarrow>\n     (y, z) \\<in> ?A\\<^sup>\\<leftrightarrow>\\<^sup>* \\<longrightarrow>\n     (x, z) \\<in> ?A\\<^sup>\\<leftrightarrow>\\<^sup>*\n\ngoal (1 subgoal):\n 1. (v, u) \\<in> r\\<^sup>\\<leftrightarrow>\\<^sup>*", "by best"], ["proof (state)\nthis:\n  (v, u) \\<in> r\\<^sup>\\<down>\n\ngoal (1 subgoal):\n 1. \\<And>u v.\n       \\<lbrakk>(x, u) \\<in> r\\<^sup>!; (y, v) \\<in> r\\<^sup>!\\<rbrakk>\n       \\<Longrightarrow> u = v", "then"], ["proof (chain)\npicking this:\n  (v, u) \\<in> r\\<^sup>\\<down>", "obtain v' where \"(v, v') \\<in> r\\<^sup>*\" and \"(u, v') \\<in> r\\<^sup>*\""], ["proof (prove)\nusing this:\n  (v, u) \\<in> r\\<^sup>\\<down>\n\ngoal (1 subgoal):\n 1. (\\<And>v'.\n        \\<lbrakk>(v, v') \\<in> r\\<^sup>*; (u, v') \\<in> r\\<^sup>*\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  (v, v') \\<in> r\\<^sup>*\n  (u, v') \\<in> r\\<^sup>*\n\ngoal (1 subgoal):\n 1. \\<And>u v.\n       \\<lbrakk>(x, u) \\<in> r\\<^sup>!; (y, v) \\<in> r\\<^sup>!\\<rbrakk>\n       \\<Longrightarrow> u = v", "from \\<open>(u, v') \\<in> r\\<^sup>*\\<close> and \\<open>u \\<in> NF r\\<close>"], ["proof (chain)\npicking this:\n  (u, v') \\<in> r\\<^sup>*\n  u \\<in> NF r", "have \"u = v'\""], ["proof (prove)\nusing this:\n  (u, v') \\<in> r\\<^sup>*\n  u \\<in> NF r\n\ngoal (1 subgoal):\n 1. u = v'", "by (rule NF_not_suc)"], ["proof (state)\nthis:\n  u = v'\n\ngoal (1 subgoal):\n 1. \\<And>u v.\n       \\<lbrakk>(x, u) \\<in> r\\<^sup>!; (y, v) \\<in> r\\<^sup>!\\<rbrakk>\n       \\<Longrightarrow> u = v", "from \\<open>(v, v') \\<in> r\\<^sup>*\\<close> and \\<open>v \\<in> NF r\\<close>"], ["proof (chain)\npicking this:\n  (v, v') \\<in> r\\<^sup>*\n  v \\<in> NF r", "have \"v = v'\""], ["proof (prove)\nusing this:\n  (v, v') \\<in> r\\<^sup>*\n  v \\<in> NF r\n\ngoal (1 subgoal):\n 1. v = v'", "by (rule NF_not_suc)"], ["proof (state)\nthis:\n  v = v'\n\ngoal (1 subgoal):\n 1. \\<And>u v.\n       \\<lbrakk>(x, u) \\<in> r\\<^sup>!; (y, v) \\<in> r\\<^sup>!\\<rbrakk>\n       \\<Longrightarrow> u = v", "then"], ["proof (chain)\npicking this:\n  v = v'", "show \"u = v\""], ["proof (prove)\nusing this:\n  v = v'\n\ngoal (1 subgoal):\n 1. u = v", "unfolding \\<open>u = v'\\<close>"], ["proof (prove)\nusing this:\n  v = v'\n\ngoal (1 subgoal):\n 1. v' = v", "by simp"], ["proof (state)\nthis:\n  u = v\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<forall>u v.\n     (x, u) \\<in> r\\<^sup>! \\<and> (y, v) \\<in> r\\<^sup>! \\<longrightarrow>\n     u = v\n\ngoal (1 subgoal):\n 1. \\<forall>u v.\n       (x, u) \\<in> r\\<^sup>! \\<and>\n       (y, v) \\<in> r\\<^sup>! \\<longrightarrow>\n       u = v \\<Longrightarrow>\n    (x, y) \\<in> r\\<^sup>\\<leftrightarrow>\\<^sup>*", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<forall>u v.\n       (x, u) \\<in> r\\<^sup>! \\<and>\n       (y, v) \\<in> r\\<^sup>! \\<longrightarrow>\n       u = v \\<Longrightarrow>\n    (x, y) \\<in> r\\<^sup>\\<leftrightarrow>\\<^sup>*", "assume equal_NF:\"\\<forall>u v. (x, u) \\<in> r\\<^sup>! \\<and> (y, v) \\<in> r\\<^sup>! \\<longrightarrow> u = v\""], ["proof (state)\nthis:\n  \\<forall>u v.\n     (x, u) \\<in> r\\<^sup>! \\<and> (y, v) \\<in> r\\<^sup>! \\<longrightarrow>\n     u = v\n\ngoal (1 subgoal):\n 1. \\<forall>u v.\n       (x, u) \\<in> r\\<^sup>! \\<and>\n       (y, v) \\<in> r\\<^sup>! \\<longrightarrow>\n       u = v \\<Longrightarrow>\n    (x, y) \\<in> r\\<^sup>\\<leftrightarrow>\\<^sup>*", "from \\<open>WN r\\<close>"], ["proof (chain)\npicking this:\n  WN r", "obtain u where \"(x, u) \\<in> r\\<^sup>!\""], ["proof (prove)\nusing this:\n  WN r\n\ngoal (1 subgoal):\n 1. (\\<And>u.\n        (x, u) \\<in> r\\<^sup>! \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  (x, u) \\<in> r\\<^sup>!\n\ngoal (1 subgoal):\n 1. \\<forall>u v.\n       (x, u) \\<in> r\\<^sup>! \\<and>\n       (y, v) \\<in> r\\<^sup>! \\<longrightarrow>\n       u = v \\<Longrightarrow>\n    (x, y) \\<in> r\\<^sup>\\<leftrightarrow>\\<^sup>*", "from \\<open>WN r\\<close>"], ["proof (chain)\npicking this:\n  WN r", "obtain v where \"(y, v) \\<in> r\\<^sup>!\""], ["proof (prove)\nusing this:\n  WN r\n\ngoal (1 subgoal):\n 1. (\\<And>v.\n        (y, v) \\<in> r\\<^sup>! \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  (y, v) \\<in> r\\<^sup>!\n\ngoal (1 subgoal):\n 1. \\<forall>u v.\n       (x, u) \\<in> r\\<^sup>! \\<and>\n       (y, v) \\<in> r\\<^sup>! \\<longrightarrow>\n       u = v \\<Longrightarrow>\n    (x, y) \\<in> r\\<^sup>\\<leftrightarrow>\\<^sup>*", "from \\<open>(x, u) \\<in> r\\<^sup>!\\<close> and \\<open>(y, v) \\<in> r\\<^sup>!\\<close>"], ["proof (chain)\npicking this:\n  (x, u) \\<in> r\\<^sup>!\n  (y, v) \\<in> r\\<^sup>!", "have \"u = v\""], ["proof (prove)\nusing this:\n  (x, u) \\<in> r\\<^sup>!\n  (y, v) \\<in> r\\<^sup>!\n\ngoal (1 subgoal):\n 1. u = v", "using equal_NF"], ["proof (prove)\nusing this:\n  (x, u) \\<in> r\\<^sup>!\n  (y, v) \\<in> r\\<^sup>!\n  \\<forall>u v.\n     (x, u) \\<in> r\\<^sup>! \\<and> (y, v) \\<in> r\\<^sup>! \\<longrightarrow>\n     u = v\n\ngoal (1 subgoal):\n 1. u = v", "by simp"], ["proof (state)\nthis:\n  u = v\n\ngoal (1 subgoal):\n 1. \\<forall>u v.\n       (x, u) \\<in> r\\<^sup>! \\<and>\n       (y, v) \\<in> r\\<^sup>! \\<longrightarrow>\n       u = v \\<Longrightarrow>\n    (x, y) \\<in> r\\<^sup>\\<leftrightarrow>\\<^sup>*", "from \\<open>(x, u) \\<in> r\\<^sup>!\\<close> and \\<open>(y, v) \\<in> r\\<^sup>!\\<close>"], ["proof (chain)\npicking this:\n  (x, u) \\<in> r\\<^sup>!\n  (y, v) \\<in> r\\<^sup>!", "have \"(x, v) \\<in> r\\<^sup>*\" and \"(y, v) \\<in> r\\<^sup>*\""], ["proof (prove)\nusing this:\n  (x, u) \\<in> r\\<^sup>!\n  (y, v) \\<in> r\\<^sup>!\n\ngoal (1 subgoal):\n 1. (x, v) \\<in> r\\<^sup>* &&& (y, v) \\<in> r\\<^sup>*", "unfolding \\<open>u = v\\<close>"], ["proof (prove)\nusing this:\n  (x, v) \\<in> r\\<^sup>!\n  (y, v) \\<in> r\\<^sup>!\n\ngoal (1 subgoal):\n 1. (x, v) \\<in> r\\<^sup>* &&& (y, v) \\<in> r\\<^sup>*", "by auto"], ["proof (state)\nthis:\n  (x, v) \\<in> r\\<^sup>*\n  (y, v) \\<in> r\\<^sup>*\n\ngoal (1 subgoal):\n 1. \\<forall>u v.\n       (x, u) \\<in> r\\<^sup>! \\<and>\n       (y, v) \\<in> r\\<^sup>! \\<longrightarrow>\n       u = v \\<Longrightarrow>\n    (x, y) \\<in> r\\<^sup>\\<leftrightarrow>\\<^sup>*", "then"], ["proof (chain)\npicking this:\n  (x, v) \\<in> r\\<^sup>*\n  (y, v) \\<in> r\\<^sup>*", "have \"(x, v) \\<in> r\\<^sup>\\<leftrightarrow>\\<^sup>*\" and \"(y, v) \\<in> r\\<^sup>\\<leftrightarrow>\\<^sup>*\""], ["proof (prove)\nusing this:\n  (x, v) \\<in> r\\<^sup>*\n  (y, v) \\<in> r\\<^sup>*\n\ngoal (1 subgoal):\n 1. (x, v) \\<in> r\\<^sup>\\<leftrightarrow>\\<^sup>* &&&\n    (y, v) \\<in> r\\<^sup>\\<leftrightarrow>\\<^sup>*", "by auto"], ["proof (state)\nthis:\n  (x, v) \\<in> r\\<^sup>\\<leftrightarrow>\\<^sup>*\n  (y, v) \\<in> r\\<^sup>\\<leftrightarrow>\\<^sup>*\n\ngoal (1 subgoal):\n 1. \\<forall>u v.\n       (x, u) \\<in> r\\<^sup>! \\<and>\n       (y, v) \\<in> r\\<^sup>! \\<longrightarrow>\n       u = v \\<Longrightarrow>\n    (x, y) \\<in> r\\<^sup>\\<leftrightarrow>\\<^sup>*", "from \\<open>(y, v) \\<in> r\\<^sup>\\<leftrightarrow>\\<^sup>*\\<close>"], ["proof (chain)\npicking this:\n  (y, v) \\<in> r\\<^sup>\\<leftrightarrow>\\<^sup>*", "have \"(v, y) \\<in> r\\<^sup>\\<leftrightarrow>\\<^sup>*\""], ["proof (prove)\nusing this:\n  (y, v) \\<in> r\\<^sup>\\<leftrightarrow>\\<^sup>*\n\ngoal (1 subgoal):\n 1. (v, y) \\<in> r\\<^sup>\\<leftrightarrow>\\<^sup>*", "using conversion_sym"], ["proof (prove)\nusing this:\n  (y, v) \\<in> r\\<^sup>\\<leftrightarrow>\\<^sup>*\n  sym (?A\\<^sup>\\<leftrightarrow>\\<^sup>*)\n\ngoal (1 subgoal):\n 1. (v, y) \\<in> r\\<^sup>\\<leftrightarrow>\\<^sup>*", "unfolding sym_def"], ["proof (prove)\nusing this:\n  (y, v) \\<in> r\\<^sup>\\<leftrightarrow>\\<^sup>*\n  \\<forall>x y.\n     (x, y) \\<in> ?A\\<^sup>\\<leftrightarrow>\\<^sup>* \\<longrightarrow>\n     (y, x) \\<in> ?A\\<^sup>\\<leftrightarrow>\\<^sup>*\n\ngoal (1 subgoal):\n 1. (v, y) \\<in> r\\<^sup>\\<leftrightarrow>\\<^sup>*", "by best"], ["proof (state)\nthis:\n  (v, y) \\<in> r\\<^sup>\\<leftrightarrow>\\<^sup>*\n\ngoal (1 subgoal):\n 1. \\<forall>u v.\n       (x, u) \\<in> r\\<^sup>! \\<and>\n       (y, v) \\<in> r\\<^sup>! \\<longrightarrow>\n       u = v \\<Longrightarrow>\n    (x, y) \\<in> r\\<^sup>\\<leftrightarrow>\\<^sup>*", "with \\<open>(x, v) \\<in> r\\<^sup>\\<leftrightarrow>\\<^sup>*\\<close>"], ["proof (chain)\npicking this:\n  (x, v) \\<in> r\\<^sup>\\<leftrightarrow>\\<^sup>*\n  (v, y) \\<in> r\\<^sup>\\<leftrightarrow>\\<^sup>*", "show \"(x, y) \\<in> r\\<^sup>\\<leftrightarrow>\\<^sup>*\""], ["proof (prove)\nusing this:\n  (x, v) \\<in> r\\<^sup>\\<leftrightarrow>\\<^sup>*\n  (v, y) \\<in> r\\<^sup>\\<leftrightarrow>\\<^sup>*\n\ngoal (1 subgoal):\n 1. (x, y) \\<in> r\\<^sup>\\<leftrightarrow>\\<^sup>*", "using conversion_trans"], ["proof (prove)\nusing this:\n  (x, v) \\<in> r\\<^sup>\\<leftrightarrow>\\<^sup>*\n  (v, y) \\<in> r\\<^sup>\\<leftrightarrow>\\<^sup>*\n  trans (?A\\<^sup>\\<leftrightarrow>\\<^sup>*)\n\ngoal (1 subgoal):\n 1. (x, y) \\<in> r\\<^sup>\\<leftrightarrow>\\<^sup>*", "unfolding trans_def"], ["proof (prove)\nusing this:\n  (x, v) \\<in> r\\<^sup>\\<leftrightarrow>\\<^sup>*\n  (v, y) \\<in> r\\<^sup>\\<leftrightarrow>\\<^sup>*\n  \\<forall>x y z.\n     (x, y) \\<in> ?A\\<^sup>\\<leftrightarrow>\\<^sup>* \\<longrightarrow>\n     (y, z) \\<in> ?A\\<^sup>\\<leftrightarrow>\\<^sup>* \\<longrightarrow>\n     (x, z) \\<in> ?A\\<^sup>\\<leftrightarrow>\\<^sup>*\n\ngoal (1 subgoal):\n 1. (x, y) \\<in> r\\<^sup>\\<leftrightarrow>\\<^sup>*", "by best"], ["proof (state)\nthis:\n  (x, y) \\<in> r\\<^sup>\\<leftrightarrow>\\<^sup>*\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  ((x, y) \\<in> r\\<^sup>\\<leftrightarrow>\\<^sup>*) =\n  (\\<forall>u v.\n      (x, u) \\<in> r\\<^sup>! \\<and> (y, v) \\<in> r\\<^sup>! \\<longrightarrow>\n      u = v)\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma CR_imp_UNC:\n  assumes \"CR r\" shows \"UNC r\""], ["proof (prove)\ngoal (1 subgoal):\n 1. UNC r", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. UNC r", "{"], ["proof (state)\ngoal (1 subgoal):\n 1. UNC r", "fix x y"], ["proof (state)\ngoal (1 subgoal):\n 1. UNC r", "assume \"x \\<in> NF r\" and \"y \\<in> NF r\" and \"(x, y) \\<in> r\\<^sup>\\<leftrightarrow>\\<^sup>*\""], ["proof (state)\nthis:\n  x \\<in> NF r\n  y \\<in> NF r\n  (x, y) \\<in> r\\<^sup>\\<leftrightarrow>\\<^sup>*\n\ngoal (1 subgoal):\n 1. UNC r", "have \"r\\<^sup>\\<leftrightarrow>\\<^sup>* = r\\<^sup>\\<down>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. r\\<^sup>\\<leftrightarrow>\\<^sup>* = r\\<^sup>\\<down>", "by (rule CR_imp_conversionIff_join [OF assms])"], ["proof (state)\nthis:\n  r\\<^sup>\\<leftrightarrow>\\<^sup>* = r\\<^sup>\\<down>\n\ngoal (1 subgoal):\n 1. UNC r", "from \\<open>(x, y) \\<in> r\\<^sup>\\<leftrightarrow>\\<^sup>*\\<close>"], ["proof (chain)\npicking this:\n  (x, y) \\<in> r\\<^sup>\\<leftrightarrow>\\<^sup>*", "have \"(x, y) \\<in> r\\<^sup>\\<down>\""], ["proof (prove)\nusing this:\n  (x, y) \\<in> r\\<^sup>\\<leftrightarrow>\\<^sup>*\n\ngoal (1 subgoal):\n 1. (x, y) \\<in> r\\<^sup>\\<down>", "unfolding \\<open>r\\<^sup>\\<leftrightarrow>\\<^sup>* = r\\<^sup>\\<down>\\<close>"], ["proof (prove)\nusing this:\n  (x, y) \\<in> r\\<^sup>\\<down>\n\ngoal (1 subgoal):\n 1. (x, y) \\<in> r\\<^sup>\\<down>", "by simp"], ["proof (state)\nthis:\n  (x, y) \\<in> r\\<^sup>\\<down>\n\ngoal (1 subgoal):\n 1. UNC r", "then"], ["proof (chain)\npicking this:\n  (x, y) \\<in> r\\<^sup>\\<down>", "obtain x' where \"(x, x') \\<in> r\\<^sup>*\" and \"(y, x') \\<in> r\\<^sup>*\""], ["proof (prove)\nusing this:\n  (x, y) \\<in> r\\<^sup>\\<down>\n\ngoal (1 subgoal):\n 1. (\\<And>x'.\n        \\<lbrakk>(x, x') \\<in> r\\<^sup>*; (y, x') \\<in> r\\<^sup>*\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by best"], ["proof (state)\nthis:\n  (x, x') \\<in> r\\<^sup>*\n  (y, x') \\<in> r\\<^sup>*\n\ngoal (1 subgoal):\n 1. UNC r", "from \\<open>(x, x') \\<in> r\\<^sup>*\\<close> and \\<open>x \\<in> NF r\\<close>"], ["proof (chain)\npicking this:\n  (x, x') \\<in> r\\<^sup>*\n  x \\<in> NF r", "have \"x = x'\""], ["proof (prove)\nusing this:\n  (x, x') \\<in> r\\<^sup>*\n  x \\<in> NF r\n\ngoal (1 subgoal):\n 1. x = x'", "by (rule NF_not_suc)"], ["proof (state)\nthis:\n  x = x'\n\ngoal (1 subgoal):\n 1. UNC r", "from \\<open>(y, x') \\<in> r\\<^sup>*\\<close> and \\<open>y \\<in> NF r\\<close>"], ["proof (chain)\npicking this:\n  (y, x') \\<in> r\\<^sup>*\n  y \\<in> NF r", "have \"y = x'\""], ["proof (prove)\nusing this:\n  (y, x') \\<in> r\\<^sup>*\n  y \\<in> NF r\n\ngoal (1 subgoal):\n 1. y = x'", "by (rule NF_not_suc)"], ["proof (state)\nthis:\n  y = x'\n\ngoal (1 subgoal):\n 1. UNC r", "then"], ["proof (chain)\npicking this:\n  y = x'", "have \"x = y\""], ["proof (prove)\nusing this:\n  y = x'\n\ngoal (1 subgoal):\n 1. x = y", "unfolding \\<open>x = x'\\<close>"], ["proof (prove)\nusing this:\n  y = x'\n\ngoal (1 subgoal):\n 1. x' = y", "by simp"], ["proof (state)\nthis:\n  x = y\n\ngoal (1 subgoal):\n 1. UNC r", "}"], ["proof (state)\nthis:\n  \\<lbrakk>?x2 \\<in> NF r; ?y2 \\<in> NF r;\n   (?x2, ?y2) \\<in> r\\<^sup>\\<leftrightarrow>\\<^sup>*\\<rbrakk>\n  \\<Longrightarrow> ?x2 = ?y2\n\ngoal (1 subgoal):\n 1. UNC r", "then"], ["proof (chain)\npicking this:\n  \\<lbrakk>?x2 \\<in> NF r; ?y2 \\<in> NF r;\n   (?x2, ?y2) \\<in> r\\<^sup>\\<leftrightarrow>\\<^sup>*\\<rbrakk>\n  \\<Longrightarrow> ?x2 = ?y2", "show ?thesis"], ["proof (prove)\nusing this:\n  \\<lbrakk>?x2 \\<in> NF r; ?y2 \\<in> NF r;\n   (?x2, ?y2) \\<in> r\\<^sup>\\<leftrightarrow>\\<^sup>*\\<rbrakk>\n  \\<Longrightarrow> ?x2 = ?y2\n\ngoal (1 subgoal):\n 1. UNC r", "by (auto simp: UNC_def)"], ["proof (state)\nthis:\n  UNC r\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma WN_UNF_imp_CR:\n  assumes \"WN r\" and \"UNF r\" shows \"CR r\""], ["proof (prove)\ngoal (1 subgoal):\n 1. CR r", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. CR r", "{"], ["proof (state)\ngoal (1 subgoal):\n 1. CR r", "fix x y z"], ["proof (state)\ngoal (1 subgoal):\n 1. CR r", "assume \"(x, y) \\<in> r\\<^sup>*\" and \"(x, z) \\<in> r\\<^sup>*\""], ["proof (state)\nthis:\n  (x, y) \\<in> r\\<^sup>*\n  (x, z) \\<in> r\\<^sup>*\n\ngoal (1 subgoal):\n 1. CR r", "from assms"], ["proof (chain)\npicking this:\n  WN r\n  UNF r", "obtain y' where \"(y, y') \\<in> r\\<^sup>!\""], ["proof (prove)\nusing this:\n  WN r\n  UNF r\n\ngoal (1 subgoal):\n 1. (\\<And>y'.\n        (y, y') \\<in> r\\<^sup>! \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "unfolding WN_defs"], ["proof (prove)\nusing this:\n  \\<forall>a\\<in>UNIV. \\<exists>b. (a, b) \\<in> r\\<^sup>!\n  UNF r\n\ngoal (1 subgoal):\n 1. (\\<And>y'.\n        (y, y') \\<in> r\\<^sup>! \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by best"], ["proof (state)\nthis:\n  (y, y') \\<in> r\\<^sup>!\n\ngoal (1 subgoal):\n 1. CR r", "with \\<open>(x, y) \\<in> r\\<^sup>*\\<close>"], ["proof (chain)\npicking this:\n  (x, y) \\<in> r\\<^sup>*\n  (y, y') \\<in> r\\<^sup>!", "have \"(x, y') \\<in> r\\<^sup>!\""], ["proof (prove)\nusing this:\n  (x, y) \\<in> r\\<^sup>*\n  (y, y') \\<in> r\\<^sup>!\n\ngoal (1 subgoal):\n 1. (x, y') \\<in> r\\<^sup>!", "by auto"], ["proof (state)\nthis:\n  (x, y') \\<in> r\\<^sup>!\n\ngoal (1 subgoal):\n 1. CR r", "from assms"], ["proof (chain)\npicking this:\n  WN r\n  UNF r", "obtain z' where \"(z, z') \\<in> r\\<^sup>!\""], ["proof (prove)\nusing this:\n  WN r\n  UNF r\n\ngoal (1 subgoal):\n 1. (\\<And>z'.\n        (z, z') \\<in> r\\<^sup>! \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "unfolding WN_defs"], ["proof (prove)\nusing this:\n  \\<forall>a\\<in>UNIV. \\<exists>b. (a, b) \\<in> r\\<^sup>!\n  UNF r\n\ngoal (1 subgoal):\n 1. (\\<And>z'.\n        (z, z') \\<in> r\\<^sup>! \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by best"], ["proof (state)\nthis:\n  (z, z') \\<in> r\\<^sup>!\n\ngoal (1 subgoal):\n 1. CR r", "with \\<open>(x, z) \\<in> r\\<^sup>*\\<close>"], ["proof (chain)\npicking this:\n  (x, z) \\<in> r\\<^sup>*\n  (z, z') \\<in> r\\<^sup>!", "have \"(x, z') \\<in> r\\<^sup>!\""], ["proof (prove)\nusing this:\n  (x, z) \\<in> r\\<^sup>*\n  (z, z') \\<in> r\\<^sup>!\n\ngoal (1 subgoal):\n 1. (x, z') \\<in> r\\<^sup>!", "by auto"], ["proof (state)\nthis:\n  (x, z') \\<in> r\\<^sup>!\n\ngoal (1 subgoal):\n 1. CR r", "with \\<open>(x, y') \\<in> r\\<^sup>!\\<close>"], ["proof (chain)\npicking this:\n  (x, y') \\<in> r\\<^sup>!\n  (x, z') \\<in> r\\<^sup>!", "have \"y' = z'\""], ["proof (prove)\nusing this:\n  (x, y') \\<in> r\\<^sup>!\n  (x, z') \\<in> r\\<^sup>!\n\ngoal (1 subgoal):\n 1. y' = z'", "using \\<open>UNF r\\<close>"], ["proof (prove)\nusing this:\n  (x, y') \\<in> r\\<^sup>!\n  (x, z') \\<in> r\\<^sup>!\n  UNF r\n\ngoal (1 subgoal):\n 1. y' = z'", "unfolding UNF_defs"], ["proof (prove)\nusing this:\n  (x, y') \\<in> r\\<^sup>!\n  (x, z') \\<in> r\\<^sup>!\n  \\<forall>a\\<in>UNIV.\n     \\<forall>b c.\n        (a, b) \\<in> r\\<^sup>! \\<and>\n        (a, c) \\<in> r\\<^sup>! \\<longrightarrow>\n        b = c\n\ngoal (1 subgoal):\n 1. y' = z'", "by auto"], ["proof (state)\nthis:\n  y' = z'\n\ngoal (1 subgoal):\n 1. CR r", "from \\<open>(y, y') \\<in> r\\<^sup>!\\<close> and \\<open>(z, z') \\<in> r\\<^sup>!\\<close>"], ["proof (chain)\npicking this:\n  (y, y') \\<in> r\\<^sup>!\n  (z, z') \\<in> r\\<^sup>!", "have \"(y, z) \\<in> r\\<^sup>\\<down>\""], ["proof (prove)\nusing this:\n  (y, y') \\<in> r\\<^sup>!\n  (z, z') \\<in> r\\<^sup>!\n\ngoal (1 subgoal):\n 1. (y, z) \\<in> r\\<^sup>\\<down>", "unfolding \\<open>y' = z'\\<close>"], ["proof (prove)\nusing this:\n  (y, z') \\<in> r\\<^sup>!\n  (z, z') \\<in> r\\<^sup>!\n\ngoal (1 subgoal):\n 1. (y, z) \\<in> r\\<^sup>\\<down>", "by auto"], ["proof (state)\nthis:\n  (y, z) \\<in> r\\<^sup>\\<down>\n\ngoal (1 subgoal):\n 1. CR r", "}"], ["proof (state)\nthis:\n  \\<lbrakk>(?x2, ?y2) \\<in> r\\<^sup>*; (?x2, ?z2) \\<in> r\\<^sup>*\\<rbrakk>\n  \\<Longrightarrow> (?y2, ?z2) \\<in> r\\<^sup>\\<down>\n\ngoal (1 subgoal):\n 1. CR r", "then"], ["proof (chain)\npicking this:\n  \\<lbrakk>(?x2, ?y2) \\<in> r\\<^sup>*; (?x2, ?z2) \\<in> r\\<^sup>*\\<rbrakk>\n  \\<Longrightarrow> (?y2, ?z2) \\<in> r\\<^sup>\\<down>", "show ?thesis"], ["proof (prove)\nusing this:\n  \\<lbrakk>(?x2, ?y2) \\<in> r\\<^sup>*; (?x2, ?z2) \\<in> r\\<^sup>*\\<rbrakk>\n  \\<Longrightarrow> (?y2, ?z2) \\<in> r\\<^sup>\\<down>\n\ngoal (1 subgoal):\n 1. CR r", "by auto"], ["proof (state)\nthis:\n  CR r\n\ngoal:\nNo subgoals!", "qed"], ["", "definition diamond :: \"'a rel \\<Rightarrow> bool\" (\"\\<diamond>\") where\n  \"\\<diamond> r \\<longleftrightarrow> (r\\<inverse> O r) \\<subseteq> (r O r\\<inverse>)\""], ["", "lemma diamond_I [intro]: \"(r\\<inverse> O r) \\<subseteq> (r O r\\<inverse>) \\<Longrightarrow> \\<diamond> r\""], ["proof (prove)\ngoal (1 subgoal):\n 1. r\\<inverse> O r \\<subseteq> r O r\\<inverse> \\<Longrightarrow>\n    \\<diamond> r", "unfolding diamond_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. r\\<inverse> O r \\<subseteq> r O r\\<inverse> \\<Longrightarrow>\n    r\\<inverse> O r \\<subseteq> r O r\\<inverse>", "by simp"], ["", "lemma diamond_E [elim]: \"\\<diamond> r \\<Longrightarrow> ((r\\<inverse> O r) \\<subseteq> (r O r\\<inverse>) \\<Longrightarrow> P) \\<Longrightarrow> P\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<diamond> r;\n     r\\<inverse> O r \\<subseteq> r O r\\<inverse> \\<Longrightarrow>\n     P\\<rbrakk>\n    \\<Longrightarrow> P", "unfolding diamond_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>r\\<inverse> O r \\<subseteq> r O r\\<inverse>;\n     r\\<inverse> O r \\<subseteq> r O r\\<inverse> \\<Longrightarrow>\n     P\\<rbrakk>\n    \\<Longrightarrow> P", "by simp"], ["", "lemma diamond_imp_semi_confluence:\n  assumes \"\\<diamond> r\" shows \"(r\\<inverse> O r\\<^sup>*) \\<subseteq> r\\<^sup>\\<down>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. r\\<inverse> O r\\<^sup>* \\<subseteq> r\\<^sup>\\<down>", "proof (rule subrelI)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x y.\n       (x, y) \\<in> r\\<inverse> O r\\<^sup>* \\<Longrightarrow>\n       (x, y) \\<in> r\\<^sup>\\<down>", "fix y z"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x y.\n       (x, y) \\<in> r\\<inverse> O r\\<^sup>* \\<Longrightarrow>\n       (x, y) \\<in> r\\<^sup>\\<down>", "assume \"(y, z) \\<in>  r\\<inverse> O r\\<^sup>*\""], ["proof (state)\nthis:\n  (y, z) \\<in> r\\<inverse> O r\\<^sup>*\n\ngoal (1 subgoal):\n 1. \\<And>x y.\n       (x, y) \\<in> r\\<inverse> O r\\<^sup>* \\<Longrightarrow>\n       (x, y) \\<in> r\\<^sup>\\<down>", "then"], ["proof (chain)\npicking this:\n  (y, z) \\<in> r\\<inverse> O r\\<^sup>*", "obtain x where \"(x, y) \\<in> r\" and \"(x, z) \\<in> r\\<^sup>*\""], ["proof (prove)\nusing this:\n  (y, z) \\<in> r\\<inverse> O r\\<^sup>*\n\ngoal (1 subgoal):\n 1. (\\<And>x.\n        \\<lbrakk>(x, y) \\<in> r; (x, z) \\<in> r\\<^sup>*\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by best"], ["proof (state)\nthis:\n  (x, y) \\<in> r\n  (x, z) \\<in> r\\<^sup>*\n\ngoal (1 subgoal):\n 1. \\<And>x y.\n       (x, y) \\<in> r\\<inverse> O r\\<^sup>* \\<Longrightarrow>\n       (x, y) \\<in> r\\<^sup>\\<down>", "then"], ["proof (chain)\npicking this:\n  (x, y) \\<in> r\n  (x, z) \\<in> r\\<^sup>*", "obtain n where \"(x, z) \\<in> r^^n\""], ["proof (prove)\nusing this:\n  (x, y) \\<in> r\n  (x, z) \\<in> r\\<^sup>*\n\ngoal (1 subgoal):\n 1. (\\<And>n.\n        (x, z) \\<in> r ^^ n \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "using rtrancl_imp_UN_relpow"], ["proof (prove)\nusing this:\n  (x, y) \\<in> r\n  (x, z) \\<in> r\\<^sup>*\n  ?p \\<in> ?R\\<^sup>* \\<Longrightarrow> ?p \\<in> \\<Union> (range ((^^) ?R))\n\ngoal (1 subgoal):\n 1. (\\<And>n.\n        (x, z) \\<in> r ^^ n \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by best"], ["proof (state)\nthis:\n  (x, z) \\<in> r ^^ n\n\ngoal (1 subgoal):\n 1. \\<And>x y.\n       (x, y) \\<in> r\\<inverse> O r\\<^sup>* \\<Longrightarrow>\n       (x, y) \\<in> r\\<^sup>\\<down>", "with \\<open>(x, y) \\<in> r\\<close>"], ["proof (chain)\npicking this:\n  (x, y) \\<in> r\n  (x, z) \\<in> r ^^ n", "show \"(y, z) \\<in> r\\<^sup>\\<down>\""], ["proof (prove)\nusing this:\n  (x, y) \\<in> r\n  (x, z) \\<in> r ^^ n\n\ngoal (1 subgoal):\n 1. (y, z) \\<in> r\\<^sup>\\<down>", "proof (induct n arbitrary: x z y)"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>x z y.\n       \\<lbrakk>(x, y) \\<in> r; (x, z) \\<in> r ^^ 0\\<rbrakk>\n       \\<Longrightarrow> (y, z) \\<in> r\\<^sup>\\<down>\n 2. \\<And>n x z y.\n       \\<lbrakk>\\<And>x z y.\n                   \\<lbrakk>(x, y) \\<in> r; (x, z) \\<in> r ^^ n\\<rbrakk>\n                   \\<Longrightarrow> (y, z) \\<in> r\\<^sup>\\<down>;\n        (x, y) \\<in> r; (x, z) \\<in> r ^^ Suc n\\<rbrakk>\n       \\<Longrightarrow> (y, z) \\<in> r\\<^sup>\\<down>", "case 0"], ["proof (state)\nthis:\n  (x, y) \\<in> r\n  (x, z) \\<in> r ^^ 0\n\ngoal (2 subgoals):\n 1. \\<And>x z y.\n       \\<lbrakk>(x, y) \\<in> r; (x, z) \\<in> r ^^ 0\\<rbrakk>\n       \\<Longrightarrow> (y, z) \\<in> r\\<^sup>\\<down>\n 2. \\<And>n x z y.\n       \\<lbrakk>\\<And>x z y.\n                   \\<lbrakk>(x, y) \\<in> r; (x, z) \\<in> r ^^ n\\<rbrakk>\n                   \\<Longrightarrow> (y, z) \\<in> r\\<^sup>\\<down>;\n        (x, y) \\<in> r; (x, z) \\<in> r ^^ Suc n\\<rbrakk>\n       \\<Longrightarrow> (y, z) \\<in> r\\<^sup>\\<down>", "then"], ["proof (chain)\npicking this:\n  (x, y) \\<in> r\n  (x, z) \\<in> r ^^ 0", "show ?case"], ["proof (prove)\nusing this:\n  (x, y) \\<in> r\n  (x, z) \\<in> r ^^ 0\n\ngoal (1 subgoal):\n 1. (y, z) \\<in> r\\<^sup>\\<down>", "by auto"], ["proof (state)\nthis:\n  (y, z) \\<in> r\\<^sup>\\<down>\n\ngoal (1 subgoal):\n 1. \\<And>n x z y.\n       \\<lbrakk>\\<And>x z y.\n                   \\<lbrakk>(x, y) \\<in> r; (x, z) \\<in> r ^^ n\\<rbrakk>\n                   \\<Longrightarrow> (y, z) \\<in> r\\<^sup>\\<down>;\n        (x, y) \\<in> r; (x, z) \\<in> r ^^ Suc n\\<rbrakk>\n       \\<Longrightarrow> (y, z) \\<in> r\\<^sup>\\<down>", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>n x z y.\n       \\<lbrakk>\\<And>x z y.\n                   \\<lbrakk>(x, y) \\<in> r; (x, z) \\<in> r ^^ n\\<rbrakk>\n                   \\<Longrightarrow> (y, z) \\<in> r\\<^sup>\\<down>;\n        (x, y) \\<in> r; (x, z) \\<in> r ^^ Suc n\\<rbrakk>\n       \\<Longrightarrow> (y, z) \\<in> r\\<^sup>\\<down>", "case (Suc n)"], ["proof (state)\nthis:\n  \\<lbrakk>(?x, ?y) \\<in> r; (?x, ?z) \\<in> r ^^ n\\<rbrakk>\n  \\<Longrightarrow> (?y, ?z) \\<in> r\\<^sup>\\<down>\n  (x, y) \\<in> r\n  (x, z) \\<in> r ^^ Suc n\n\ngoal (1 subgoal):\n 1. \\<And>n x z y.\n       \\<lbrakk>\\<And>x z y.\n                   \\<lbrakk>(x, y) \\<in> r; (x, z) \\<in> r ^^ n\\<rbrakk>\n                   \\<Longrightarrow> (y, z) \\<in> r\\<^sup>\\<down>;\n        (x, y) \\<in> r; (x, z) \\<in> r ^^ Suc n\\<rbrakk>\n       \\<Longrightarrow> (y, z) \\<in> r\\<^sup>\\<down>", "from \\<open>(x, z) \\<in> r^^Suc n\\<close>"], ["proof (chain)\npicking this:\n  (x, z) \\<in> r ^^ Suc n", "obtain x' where \"(x, x') \\<in> r\" and \"(x', z) \\<in> r^^n\""], ["proof (prove)\nusing this:\n  (x, z) \\<in> r ^^ Suc n\n\ngoal (1 subgoal):\n 1. (\\<And>x'.\n        \\<lbrakk>(x, x') \\<in> r; (x', z) \\<in> r ^^ n\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "using relpow_Suc_D2"], ["proof (prove)\nusing this:\n  (x, z) \\<in> r ^^ Suc n\n  (?x, ?z) \\<in> ?R ^^ Suc ?n \\<Longrightarrow>\n  \\<exists>y. (?x, y) \\<in> ?R \\<and> (y, ?z) \\<in> ?R ^^ ?n\n\ngoal (1 subgoal):\n 1. (\\<And>x'.\n        \\<lbrakk>(x, x') \\<in> r; (x', z) \\<in> r ^^ n\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by best"], ["proof (state)\nthis:\n  (x, x') \\<in> r\n  (x', z) \\<in> r ^^ n\n\ngoal (1 subgoal):\n 1. \\<And>n x z y.\n       \\<lbrakk>\\<And>x z y.\n                   \\<lbrakk>(x, y) \\<in> r; (x, z) \\<in> r ^^ n\\<rbrakk>\n                   \\<Longrightarrow> (y, z) \\<in> r\\<^sup>\\<down>;\n        (x, y) \\<in> r; (x, z) \\<in> r ^^ Suc n\\<rbrakk>\n       \\<Longrightarrow> (y, z) \\<in> r\\<^sup>\\<down>", "with \\<open>(x, y) \\<in> r\\<close>"], ["proof (chain)\npicking this:\n  (x, y) \\<in> r\n  (x, x') \\<in> r\n  (x', z) \\<in> r ^^ n", "have \"(y, x') \\<in> (r\\<inverse> O r)\""], ["proof (prove)\nusing this:\n  (x, y) \\<in> r\n  (x, x') \\<in> r\n  (x', z) \\<in> r ^^ n\n\ngoal (1 subgoal):\n 1. (y, x') \\<in> r\\<inverse> O r", "by auto"], ["proof (state)\nthis:\n  (y, x') \\<in> r\\<inverse> O r\n\ngoal (1 subgoal):\n 1. \\<And>n x z y.\n       \\<lbrakk>\\<And>x z y.\n                   \\<lbrakk>(x, y) \\<in> r; (x, z) \\<in> r ^^ n\\<rbrakk>\n                   \\<Longrightarrow> (y, z) \\<in> r\\<^sup>\\<down>;\n        (x, y) \\<in> r; (x, z) \\<in> r ^^ Suc n\\<rbrakk>\n       \\<Longrightarrow> (y, z) \\<in> r\\<^sup>\\<down>", "with \\<open>\\<diamond> r\\<close>"], ["proof (chain)\npicking this:\n  \\<diamond> r\n  (y, x') \\<in> r\\<inverse> O r", "have \"(y, x') \\<in> (r O r\\<inverse>)\""], ["proof (prove)\nusing this:\n  \\<diamond> r\n  (y, x') \\<in> r\\<inverse> O r\n\ngoal (1 subgoal):\n 1. (y, x') \\<in> r O r\\<inverse>", "by auto"], ["proof (state)\nthis:\n  (y, x') \\<in> r O r\\<inverse>\n\ngoal (1 subgoal):\n 1. \\<And>n x z y.\n       \\<lbrakk>\\<And>x z y.\n                   \\<lbrakk>(x, y) \\<in> r; (x, z) \\<in> r ^^ n\\<rbrakk>\n                   \\<Longrightarrow> (y, z) \\<in> r\\<^sup>\\<down>;\n        (x, y) \\<in> r; (x, z) \\<in> r ^^ Suc n\\<rbrakk>\n       \\<Longrightarrow> (y, z) \\<in> r\\<^sup>\\<down>", "then"], ["proof (chain)\npicking this:\n  (y, x') \\<in> r O r\\<inverse>", "obtain y' where \"(x', y') \\<in> r\" and \"(y, y') \\<in> r\""], ["proof (prove)\nusing this:\n  (y, x') \\<in> r O r\\<inverse>\n\ngoal (1 subgoal):\n 1. (\\<And>y'.\n        \\<lbrakk>(x', y') \\<in> r; (y, y') \\<in> r\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by best"], ["proof (state)\nthis:\n  (x', y') \\<in> r\n  (y, y') \\<in> r\n\ngoal (1 subgoal):\n 1. \\<And>n x z y.\n       \\<lbrakk>\\<And>x z y.\n                   \\<lbrakk>(x, y) \\<in> r; (x, z) \\<in> r ^^ n\\<rbrakk>\n                   \\<Longrightarrow> (y, z) \\<in> r\\<^sup>\\<down>;\n        (x, y) \\<in> r; (x, z) \\<in> r ^^ Suc n\\<rbrakk>\n       \\<Longrightarrow> (y, z) \\<in> r\\<^sup>\\<down>", "with Suc and \\<open>(x', z) \\<in> r^^n\\<close>"], ["proof (chain)\npicking this:\n  \\<lbrakk>(?x, ?y) \\<in> r; (?x, ?z) \\<in> r ^^ n\\<rbrakk>\n  \\<Longrightarrow> (?y, ?z) \\<in> r\\<^sup>\\<down>\n  (x, y) \\<in> r\n  (x, z) \\<in> r ^^ Suc n\n  (x', z) \\<in> r ^^ n\n  (x', y') \\<in> r\n  (y, y') \\<in> r", "have \"(y', z) \\<in> r\\<^sup>\\<down>\""], ["proof (prove)\nusing this:\n  \\<lbrakk>(?x, ?y) \\<in> r; (?x, ?z) \\<in> r ^^ n\\<rbrakk>\n  \\<Longrightarrow> (?y, ?z) \\<in> r\\<^sup>\\<down>\n  (x, y) \\<in> r\n  (x, z) \\<in> r ^^ Suc n\n  (x', z) \\<in> r ^^ n\n  (x', y') \\<in> r\n  (y, y') \\<in> r\n\ngoal (1 subgoal):\n 1. (y', z) \\<in> r\\<^sup>\\<down>", "by auto"], ["proof (state)\nthis:\n  (y', z) \\<in> r\\<^sup>\\<down>\n\ngoal (1 subgoal):\n 1. \\<And>n x z y.\n       \\<lbrakk>\\<And>x z y.\n                   \\<lbrakk>(x, y) \\<in> r; (x, z) \\<in> r ^^ n\\<rbrakk>\n                   \\<Longrightarrow> (y, z) \\<in> r\\<^sup>\\<down>;\n        (x, y) \\<in> r; (x, z) \\<in> r ^^ Suc n\\<rbrakk>\n       \\<Longrightarrow> (y, z) \\<in> r\\<^sup>\\<down>", "with \\<open>(y, y') \\<in> r\\<close>"], ["proof (chain)\npicking this:\n  (y, y') \\<in> r\n  (y', z) \\<in> r\\<^sup>\\<down>", "show ?case"], ["proof (prove)\nusing this:\n  (y, y') \\<in> r\n  (y', z) \\<in> r\\<^sup>\\<down>\n\ngoal (1 subgoal):\n 1. (y, z) \\<in> r\\<^sup>\\<down>", "by (auto intro: rtrancl_join_join)"], ["proof (state)\nthis:\n  (y, z) \\<in> r\\<^sup>\\<down>\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  (y, z) \\<in> r\\<^sup>\\<down>\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma semi_confluence_imp_CR:\n  assumes \"(r\\<inverse> O r\\<^sup>*) \\<subseteq> r\\<^sup>\\<down>\" shows \"CR r\""], ["proof (prove)\ngoal (1 subgoal):\n 1. CR r", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. CR r", "{"], ["proof (state)\ngoal (1 subgoal):\n 1. CR r", "fix x y z"], ["proof (state)\ngoal (1 subgoal):\n 1. CR r", "assume \"(x, y) \\<in> r\\<^sup>*\" and \"(x, z) \\<in> r\\<^sup>*\""], ["proof (state)\nthis:\n  (x, y) \\<in> r\\<^sup>*\n  (x, z) \\<in> r\\<^sup>*\n\ngoal (1 subgoal):\n 1. CR r", "then"], ["proof (chain)\npicking this:\n  (x, y) \\<in> r\\<^sup>*\n  (x, z) \\<in> r\\<^sup>*", "obtain n where \"(x, z) \\<in> r^^n\""], ["proof (prove)\nusing this:\n  (x, y) \\<in> r\\<^sup>*\n  (x, z) \\<in> r\\<^sup>*\n\ngoal (1 subgoal):\n 1. (\\<And>n.\n        (x, z) \\<in> r ^^ n \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "using rtrancl_imp_UN_relpow"], ["proof (prove)\nusing this:\n  (x, y) \\<in> r\\<^sup>*\n  (x, z) \\<in> r\\<^sup>*\n  ?p \\<in> ?R\\<^sup>* \\<Longrightarrow> ?p \\<in> \\<Union> (range ((^^) ?R))\n\ngoal (1 subgoal):\n 1. (\\<And>n.\n        (x, z) \\<in> r ^^ n \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by best"], ["proof (state)\nthis:\n  (x, z) \\<in> r ^^ n\n\ngoal (1 subgoal):\n 1. CR r", "with \\<open>(x, y) \\<in> r\\<^sup>*\\<close>"], ["proof (chain)\npicking this:\n  (x, y) \\<in> r\\<^sup>*\n  (x, z) \\<in> r ^^ n", "have \"(y, z) \\<in> r\\<^sup>\\<down>\""], ["proof (prove)\nusing this:\n  (x, y) \\<in> r\\<^sup>*\n  (x, z) \\<in> r ^^ n\n\ngoal (1 subgoal):\n 1. (y, z) \\<in> r\\<^sup>\\<down>", "proof (induct n arbitrary: x y z)"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>x y z.\n       \\<lbrakk>(x, y) \\<in> r\\<^sup>*; (x, z) \\<in> r ^^ 0\\<rbrakk>\n       \\<Longrightarrow> (y, z) \\<in> r\\<^sup>\\<down>\n 2. \\<And>n x y z.\n       \\<lbrakk>\\<And>x y z.\n                   \\<lbrakk>(x, y) \\<in> r\\<^sup>*;\n                    (x, z) \\<in> r ^^ n\\<rbrakk>\n                   \\<Longrightarrow> (y, z) \\<in> r\\<^sup>\\<down>;\n        (x, y) \\<in> r\\<^sup>*; (x, z) \\<in> r ^^ Suc n\\<rbrakk>\n       \\<Longrightarrow> (y, z) \\<in> r\\<^sup>\\<down>", "case 0"], ["proof (state)\nthis:\n  (x, y) \\<in> r\\<^sup>*\n  (x, z) \\<in> r ^^ 0\n\ngoal (2 subgoals):\n 1. \\<And>x y z.\n       \\<lbrakk>(x, y) \\<in> r\\<^sup>*; (x, z) \\<in> r ^^ 0\\<rbrakk>\n       \\<Longrightarrow> (y, z) \\<in> r\\<^sup>\\<down>\n 2. \\<And>n x y z.\n       \\<lbrakk>\\<And>x y z.\n                   \\<lbrakk>(x, y) \\<in> r\\<^sup>*;\n                    (x, z) \\<in> r ^^ n\\<rbrakk>\n                   \\<Longrightarrow> (y, z) \\<in> r\\<^sup>\\<down>;\n        (x, y) \\<in> r\\<^sup>*; (x, z) \\<in> r ^^ Suc n\\<rbrakk>\n       \\<Longrightarrow> (y, z) \\<in> r\\<^sup>\\<down>", "then"], ["proof (chain)\npicking this:\n  (x, y) \\<in> r\\<^sup>*\n  (x, z) \\<in> r ^^ 0", "show ?case"], ["proof (prove)\nusing this:\n  (x, y) \\<in> r\\<^sup>*\n  (x, z) \\<in> r ^^ 0\n\ngoal (1 subgoal):\n 1. (y, z) \\<in> r\\<^sup>\\<down>", "by auto"], ["proof (state)\nthis:\n  (y, z) \\<in> r\\<^sup>\\<down>\n\ngoal (1 subgoal):\n 1. \\<And>n x y z.\n       \\<lbrakk>\\<And>x y z.\n                   \\<lbrakk>(x, y) \\<in> r\\<^sup>*;\n                    (x, z) \\<in> r ^^ n\\<rbrakk>\n                   \\<Longrightarrow> (y, z) \\<in> r\\<^sup>\\<down>;\n        (x, y) \\<in> r\\<^sup>*; (x, z) \\<in> r ^^ Suc n\\<rbrakk>\n       \\<Longrightarrow> (y, z) \\<in> r\\<^sup>\\<down>", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>n x y z.\n       \\<lbrakk>\\<And>x y z.\n                   \\<lbrakk>(x, y) \\<in> r\\<^sup>*;\n                    (x, z) \\<in> r ^^ n\\<rbrakk>\n                   \\<Longrightarrow> (y, z) \\<in> r\\<^sup>\\<down>;\n        (x, y) \\<in> r\\<^sup>*; (x, z) \\<in> r ^^ Suc n\\<rbrakk>\n       \\<Longrightarrow> (y, z) \\<in> r\\<^sup>\\<down>", "case (Suc n)"], ["proof (state)\nthis:\n  \\<lbrakk>(?x, ?y) \\<in> r\\<^sup>*; (?x, ?z) \\<in> r ^^ n\\<rbrakk>\n  \\<Longrightarrow> (?y, ?z) \\<in> r\\<^sup>\\<down>\n  (x, y) \\<in> r\\<^sup>*\n  (x, z) \\<in> r ^^ Suc n\n\ngoal (1 subgoal):\n 1. \\<And>n x y z.\n       \\<lbrakk>\\<And>x y z.\n                   \\<lbrakk>(x, y) \\<in> r\\<^sup>*;\n                    (x, z) \\<in> r ^^ n\\<rbrakk>\n                   \\<Longrightarrow> (y, z) \\<in> r\\<^sup>\\<down>;\n        (x, y) \\<in> r\\<^sup>*; (x, z) \\<in> r ^^ Suc n\\<rbrakk>\n       \\<Longrightarrow> (y, z) \\<in> r\\<^sup>\\<down>", "from \\<open>(x, z) \\<in> r^^Suc n\\<close>"], ["proof (chain)\npicking this:\n  (x, z) \\<in> r ^^ Suc n", "obtain x' where \"(x, x') \\<in> r\" and \"(x', z) \\<in> r^^n\""], ["proof (prove)\nusing this:\n  (x, z) \\<in> r ^^ Suc n\n\ngoal (1 subgoal):\n 1. (\\<And>x'.\n        \\<lbrakk>(x, x') \\<in> r; (x', z) \\<in> r ^^ n\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "using relpow_Suc_D2"], ["proof (prove)\nusing this:\n  (x, z) \\<in> r ^^ Suc n\n  (?x, ?z) \\<in> ?R ^^ Suc ?n \\<Longrightarrow>\n  \\<exists>y. (?x, y) \\<in> ?R \\<and> (y, ?z) \\<in> ?R ^^ ?n\n\ngoal (1 subgoal):\n 1. (\\<And>x'.\n        \\<lbrakk>(x, x') \\<in> r; (x', z) \\<in> r ^^ n\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by best"], ["proof (state)\nthis:\n  (x, x') \\<in> r\n  (x', z) \\<in> r ^^ n\n\ngoal (1 subgoal):\n 1. \\<And>n x y z.\n       \\<lbrakk>\\<And>x y z.\n                   \\<lbrakk>(x, y) \\<in> r\\<^sup>*;\n                    (x, z) \\<in> r ^^ n\\<rbrakk>\n                   \\<Longrightarrow> (y, z) \\<in> r\\<^sup>\\<down>;\n        (x, y) \\<in> r\\<^sup>*; (x, z) \\<in> r ^^ Suc n\\<rbrakk>\n       \\<Longrightarrow> (y, z) \\<in> r\\<^sup>\\<down>", "from \\<open>(x, x') \\<in> r\\<close> and \\<open>(x, y) \\<in> r\\<^sup>*\\<close>"], ["proof (chain)\npicking this:\n  (x, x') \\<in> r\n  (x, y) \\<in> r\\<^sup>*", "have \"(x', y) \\<in> (r\\<inverse> O r\\<^sup>* )\""], ["proof (prove)\nusing this:\n  (x, x') \\<in> r\n  (x, y) \\<in> r\\<^sup>*\n\ngoal (1 subgoal):\n 1. (x', y) \\<in> r\\<inverse> O r\\<^sup>*", "by auto"], ["proof (state)\nthis:\n  (x', y) \\<in> r\\<inverse> O r\\<^sup>*\n\ngoal (1 subgoal):\n 1. \\<And>n x y z.\n       \\<lbrakk>\\<And>x y z.\n                   \\<lbrakk>(x, y) \\<in> r\\<^sup>*;\n                    (x, z) \\<in> r ^^ n\\<rbrakk>\n                   \\<Longrightarrow> (y, z) \\<in> r\\<^sup>\\<down>;\n        (x, y) \\<in> r\\<^sup>*; (x, z) \\<in> r ^^ Suc n\\<rbrakk>\n       \\<Longrightarrow> (y, z) \\<in> r\\<^sup>\\<down>", "with assms"], ["proof (chain)\npicking this:\n  r\\<inverse> O r\\<^sup>* \\<subseteq> r\\<^sup>\\<down>\n  (x', y) \\<in> r\\<inverse> O r\\<^sup>*", "have \"(x', y) \\<in> r\\<^sup>\\<down>\""], ["proof (prove)\nusing this:\n  r\\<inverse> O r\\<^sup>* \\<subseteq> r\\<^sup>\\<down>\n  (x', y) \\<in> r\\<inverse> O r\\<^sup>*\n\ngoal (1 subgoal):\n 1. (x', y) \\<in> r\\<^sup>\\<down>", "by auto"], ["proof (state)\nthis:\n  (x', y) \\<in> r\\<^sup>\\<down>\n\ngoal (1 subgoal):\n 1. \\<And>n x y z.\n       \\<lbrakk>\\<And>x y z.\n                   \\<lbrakk>(x, y) \\<in> r\\<^sup>*;\n                    (x, z) \\<in> r ^^ n\\<rbrakk>\n                   \\<Longrightarrow> (y, z) \\<in> r\\<^sup>\\<down>;\n        (x, y) \\<in> r\\<^sup>*; (x, z) \\<in> r ^^ Suc n\\<rbrakk>\n       \\<Longrightarrow> (y, z) \\<in> r\\<^sup>\\<down>", "then"], ["proof (chain)\npicking this:\n  (x', y) \\<in> r\\<^sup>\\<down>", "obtain y' where \"(x', y') \\<in> r\\<^sup>*\" and \"(y, y') \\<in> r\\<^sup>*\""], ["proof (prove)\nusing this:\n  (x', y) \\<in> r\\<^sup>\\<down>\n\ngoal (1 subgoal):\n 1. (\\<And>y'.\n        \\<lbrakk>(x', y') \\<in> r\\<^sup>*; (y, y') \\<in> r\\<^sup>*\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by best"], ["proof (state)\nthis:\n  (x', y') \\<in> r\\<^sup>*\n  (y, y') \\<in> r\\<^sup>*\n\ngoal (1 subgoal):\n 1. \\<And>n x y z.\n       \\<lbrakk>\\<And>x y z.\n                   \\<lbrakk>(x, y) \\<in> r\\<^sup>*;\n                    (x, z) \\<in> r ^^ n\\<rbrakk>\n                   \\<Longrightarrow> (y, z) \\<in> r\\<^sup>\\<down>;\n        (x, y) \\<in> r\\<^sup>*; (x, z) \\<in> r ^^ Suc n\\<rbrakk>\n       \\<Longrightarrow> (y, z) \\<in> r\\<^sup>\\<down>", "with Suc and \\<open>(x', z) \\<in> r^^n\\<close>"], ["proof (chain)\npicking this:\n  \\<lbrakk>(?x, ?y) \\<in> r\\<^sup>*; (?x, ?z) \\<in> r ^^ n\\<rbrakk>\n  \\<Longrightarrow> (?y, ?z) \\<in> r\\<^sup>\\<down>\n  (x, y) \\<in> r\\<^sup>*\n  (x, z) \\<in> r ^^ Suc n\n  (x', z) \\<in> r ^^ n\n  (x', y') \\<in> r\\<^sup>*\n  (y, y') \\<in> r\\<^sup>*", "have \"(y', z) \\<in> r\\<^sup>\\<down>\""], ["proof (prove)\nusing this:\n  \\<lbrakk>(?x, ?y) \\<in> r\\<^sup>*; (?x, ?z) \\<in> r ^^ n\\<rbrakk>\n  \\<Longrightarrow> (?y, ?z) \\<in> r\\<^sup>\\<down>\n  (x, y) \\<in> r\\<^sup>*\n  (x, z) \\<in> r ^^ Suc n\n  (x', z) \\<in> r ^^ n\n  (x', y') \\<in> r\\<^sup>*\n  (y, y') \\<in> r\\<^sup>*\n\ngoal (1 subgoal):\n 1. (y', z) \\<in> r\\<^sup>\\<down>", "by simp"], ["proof (state)\nthis:\n  (y', z) \\<in> r\\<^sup>\\<down>\n\ngoal (1 subgoal):\n 1. \\<And>n x y z.\n       \\<lbrakk>\\<And>x y z.\n                   \\<lbrakk>(x, y) \\<in> r\\<^sup>*;\n                    (x, z) \\<in> r ^^ n\\<rbrakk>\n                   \\<Longrightarrow> (y, z) \\<in> r\\<^sup>\\<down>;\n        (x, y) \\<in> r\\<^sup>*; (x, z) \\<in> r ^^ Suc n\\<rbrakk>\n       \\<Longrightarrow> (y, z) \\<in> r\\<^sup>\\<down>", "then"], ["proof (chain)\npicking this:\n  (y', z) \\<in> r\\<^sup>\\<down>", "obtain u where \"(z, u) \\<in> r\\<^sup>*\" and \"(y', u) \\<in> r\\<^sup>*\""], ["proof (prove)\nusing this:\n  (y', z) \\<in> r\\<^sup>\\<down>\n\ngoal (1 subgoal):\n 1. (\\<And>u.\n        \\<lbrakk>(z, u) \\<in> r\\<^sup>*; (y', u) \\<in> r\\<^sup>*\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by best"], ["proof (state)\nthis:\n  (z, u) \\<in> r\\<^sup>*\n  (y', u) \\<in> r\\<^sup>*\n\ngoal (1 subgoal):\n 1. \\<And>n x y z.\n       \\<lbrakk>\\<And>x y z.\n                   \\<lbrakk>(x, y) \\<in> r\\<^sup>*;\n                    (x, z) \\<in> r ^^ n\\<rbrakk>\n                   \\<Longrightarrow> (y, z) \\<in> r\\<^sup>\\<down>;\n        (x, y) \\<in> r\\<^sup>*; (x, z) \\<in> r ^^ Suc n\\<rbrakk>\n       \\<Longrightarrow> (y, z) \\<in> r\\<^sup>\\<down>", "from \\<open>(y, y') \\<in> r\\<^sup>*\\<close> and \\<open>(y', u) \\<in> r\\<^sup>*\\<close>"], ["proof (chain)\npicking this:\n  (y, y') \\<in> r\\<^sup>*\n  (y', u) \\<in> r\\<^sup>*", "have \"(y, u) \\<in> r\\<^sup>*\""], ["proof (prove)\nusing this:\n  (y, y') \\<in> r\\<^sup>*\n  (y', u) \\<in> r\\<^sup>*\n\ngoal (1 subgoal):\n 1. (y, u) \\<in> r\\<^sup>*", "by auto"], ["proof (state)\nthis:\n  (y, u) \\<in> r\\<^sup>*\n\ngoal (1 subgoal):\n 1. \\<And>n x y z.\n       \\<lbrakk>\\<And>x y z.\n                   \\<lbrakk>(x, y) \\<in> r\\<^sup>*;\n                    (x, z) \\<in> r ^^ n\\<rbrakk>\n                   \\<Longrightarrow> (y, z) \\<in> r\\<^sup>\\<down>;\n        (x, y) \\<in> r\\<^sup>*; (x, z) \\<in> r ^^ Suc n\\<rbrakk>\n       \\<Longrightarrow> (y, z) \\<in> r\\<^sup>\\<down>", "with \\<open>(z, u) \\<in> r\\<^sup>*\\<close>"], ["proof (chain)\npicking this:\n  (z, u) \\<in> r\\<^sup>*\n  (y, u) \\<in> r\\<^sup>*", "show ?case"], ["proof (prove)\nusing this:\n  (z, u) \\<in> r\\<^sup>*\n  (y, u) \\<in> r\\<^sup>*\n\ngoal (1 subgoal):\n 1. (y, z) \\<in> r\\<^sup>\\<down>", "by best"], ["proof (state)\nthis:\n  (y, z) \\<in> r\\<^sup>\\<down>\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  (y, z) \\<in> r\\<^sup>\\<down>\n\ngoal (1 subgoal):\n 1. CR r", "}"], ["proof (state)\nthis:\n  \\<lbrakk>(?x2, ?y2) \\<in> r\\<^sup>*; (?x2, ?z2) \\<in> r\\<^sup>*\\<rbrakk>\n  \\<Longrightarrow> (?y2, ?z2) \\<in> r\\<^sup>\\<down>\n\ngoal (1 subgoal):\n 1. CR r", "then"], ["proof (chain)\npicking this:\n  \\<lbrakk>(?x2, ?y2) \\<in> r\\<^sup>*; (?x2, ?z2) \\<in> r\\<^sup>*\\<rbrakk>\n  \\<Longrightarrow> (?y2, ?z2) \\<in> r\\<^sup>\\<down>", "show ?thesis"], ["proof (prove)\nusing this:\n  \\<lbrakk>(?x2, ?y2) \\<in> r\\<^sup>*; (?x2, ?z2) \\<in> r\\<^sup>*\\<rbrakk>\n  \\<Longrightarrow> (?y2, ?z2) \\<in> r\\<^sup>\\<down>\n\ngoal (1 subgoal):\n 1. CR r", "by auto"], ["proof (state)\nthis:\n  CR r\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma diamond_imp_CR:\n  assumes \"\\<diamond> r\" shows \"CR r\""], ["proof (prove)\ngoal (1 subgoal):\n 1. CR r", "using assms"], ["proof (prove)\nusing this:\n  \\<diamond> r\n\ngoal (1 subgoal):\n 1. CR r", "by (rule diamond_imp_semi_confluence [THEN semi_confluence_imp_CR])"], ["", "lemma diamond_imp_CR':\n  assumes \"\\<diamond> s\" and \"r \\<subseteq> s\" and \"s \\<subseteq> r\\<^sup>*\" shows \"CR r\""], ["proof (prove)\ngoal (1 subgoal):\n 1. CR r", "unfolding CR_iff_meet_subset_join"], ["proof (prove)\ngoal (1 subgoal):\n 1. r\\<^sup>\\<up> \\<subseteq> r\\<^sup>\\<down>", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. r\\<^sup>\\<up> \\<subseteq> r\\<^sup>\\<down>", "from \\<open>\\<diamond> s\\<close>"], ["proof (chain)\npicking this:\n  \\<diamond> s", "have \"CR s\""], ["proof (prove)\nusing this:\n  \\<diamond> s\n\ngoal (1 subgoal):\n 1. CR s", "by (rule diamond_imp_CR)"], ["proof (state)\nthis:\n  CR s\n\ngoal (1 subgoal):\n 1. r\\<^sup>\\<up> \\<subseteq> r\\<^sup>\\<down>", "then"], ["proof (chain)\npicking this:\n  CR s", "have \"s\\<^sup>\\<up> \\<subseteq> s\\<^sup>\\<down>\""], ["proof (prove)\nusing this:\n  CR s\n\ngoal (1 subgoal):\n 1. s\\<^sup>\\<up> \\<subseteq> s\\<^sup>\\<down>", "unfolding CR_iff_meet_subset_join"], ["proof (prove)\nusing this:\n  s\\<^sup>\\<up> \\<subseteq> s\\<^sup>\\<down>\n\ngoal (1 subgoal):\n 1. s\\<^sup>\\<up> \\<subseteq> s\\<^sup>\\<down>", "by simp"], ["proof (state)\nthis:\n  s\\<^sup>\\<up> \\<subseteq> s\\<^sup>\\<down>\n\ngoal (1 subgoal):\n 1. r\\<^sup>\\<up> \\<subseteq> r\\<^sup>\\<down>", "from \\<open>r \\<subseteq> s\\<close>"], ["proof (chain)\npicking this:\n  r \\<subseteq> s", "have \"r\\<^sup>* \\<subseteq> s\\<^sup>*\""], ["proof (prove)\nusing this:\n  r \\<subseteq> s\n\ngoal (1 subgoal):\n 1. r\\<^sup>* \\<subseteq> s\\<^sup>*", "by (rule rtrancl_mono)"], ["proof (state)\nthis:\n  r\\<^sup>* \\<subseteq> s\\<^sup>*\n\ngoal (1 subgoal):\n 1. r\\<^sup>\\<up> \\<subseteq> r\\<^sup>\\<down>", "from \\<open>s \\<subseteq> r\\<^sup>*\\<close>"], ["proof (chain)\npicking this:\n  s \\<subseteq> r\\<^sup>*", "have \"s\\<^sup>* \\<subseteq> (r\\<^sup>*)\\<^sup>*\""], ["proof (prove)\nusing this:\n  s \\<subseteq> r\\<^sup>*\n\ngoal (1 subgoal):\n 1. s\\<^sup>* \\<subseteq> (r\\<^sup>*)\\<^sup>*", "by (rule rtrancl_mono)"], ["proof (state)\nthis:\n  s\\<^sup>* \\<subseteq> (r\\<^sup>*)\\<^sup>*\n\ngoal (1 subgoal):\n 1. r\\<^sup>\\<up> \\<subseteq> r\\<^sup>\\<down>", "then"], ["proof (chain)\npicking this:\n  s\\<^sup>* \\<subseteq> (r\\<^sup>*)\\<^sup>*", "have \"s\\<^sup>* \\<subseteq> r\\<^sup>*\""], ["proof (prove)\nusing this:\n  s\\<^sup>* \\<subseteq> (r\\<^sup>*)\\<^sup>*\n\ngoal (1 subgoal):\n 1. s\\<^sup>* \\<subseteq> r\\<^sup>*", "by simp"], ["proof (state)\nthis:\n  s\\<^sup>* \\<subseteq> r\\<^sup>*\n\ngoal (1 subgoal):\n 1. r\\<^sup>\\<up> \\<subseteq> r\\<^sup>\\<down>", "with \\<open>r\\<^sup>* \\<subseteq> s\\<^sup>*\\<close>"], ["proof (chain)\npicking this:\n  r\\<^sup>* \\<subseteq> s\\<^sup>*\n  s\\<^sup>* \\<subseteq> r\\<^sup>*", "have \"r\\<^sup>* = s\\<^sup>*\""], ["proof (prove)\nusing this:\n  r\\<^sup>* \\<subseteq> s\\<^sup>*\n  s\\<^sup>* \\<subseteq> r\\<^sup>*\n\ngoal (1 subgoal):\n 1. r\\<^sup>* = s\\<^sup>*", "by simp"], ["proof (state)\nthis:\n  r\\<^sup>* = s\\<^sup>*\n\ngoal (1 subgoal):\n 1. r\\<^sup>\\<up> \\<subseteq> r\\<^sup>\\<down>", "show \"r\\<^sup>\\<up> \\<subseteq> r\\<^sup>\\<down>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. r\\<^sup>\\<up> \\<subseteq> r\\<^sup>\\<down>", "unfolding meet_def join_def rtrancl_converse \\<open>r\\<^sup>* = s\\<^sup>*\\<close>"], ["proof (prove)\ngoal (1 subgoal):\n 1. (s\\<^sup>*)\\<inverse> O s\\<^sup>*\n    \\<subseteq> s\\<^sup>* O (s\\<^sup>*)\\<inverse>", "unfolding rtrancl_converse [symmetric] meet_def [symmetric]\n      join_def [symmetric]"], ["proof (prove)\ngoal (1 subgoal):\n 1. s\\<^sup>\\<up> \\<subseteq> s\\<^sup>\\<down>", "by (rule \\<open>s\\<^sup>\\<up> \\<subseteq> s\\<^sup>\\<down>\\<close>)"], ["proof (state)\nthis:\n  r\\<^sup>\\<up> \\<subseteq> r\\<^sup>\\<down>\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma SN_imp_minimal:\n  assumes \"SN A\"\n  shows \"\\<forall>Q x. x \\<in> Q \\<longrightarrow> (\\<exists>z\\<in>Q. \\<forall>y. (z, y) \\<in> A \\<longrightarrow> y \\<notin> Q)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>Q x.\n       x \\<in> Q \\<longrightarrow>\n       (\\<exists>z\\<in>Q.\n           \\<forall>y. (z, y) \\<in> A \\<longrightarrow> y \\<notin> Q)", "proof (rule ccontr)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<not> (\\<forall>Q x.\n               x \\<in> Q \\<longrightarrow>\n               (\\<exists>z\\<in>Q.\n                   \\<forall>y.\n                      (z, y) \\<in> A \\<longrightarrow>\n                      y \\<notin> Q)) \\<Longrightarrow>\n    False", "assume \"\\<not> (\\<forall>Q x. x \\<in> Q \\<longrightarrow> (\\<exists>z\\<in>Q. \\<forall>y. (z, y) \\<in> A \\<longrightarrow> y \\<notin> Q))\""], ["proof (state)\nthis:\n  \\<not> (\\<forall>Q x.\n             x \\<in> Q \\<longrightarrow>\n             (\\<exists>z\\<in>Q.\n                 \\<forall>y. (z, y) \\<in> A \\<longrightarrow> y \\<notin> Q))\n\ngoal (1 subgoal):\n 1. \\<not> (\\<forall>Q x.\n               x \\<in> Q \\<longrightarrow>\n               (\\<exists>z\\<in>Q.\n                   \\<forall>y.\n                      (z, y) \\<in> A \\<longrightarrow>\n                      y \\<notin> Q)) \\<Longrightarrow>\n    False", "then"], ["proof (chain)\npicking this:\n  \\<not> (\\<forall>Q x.\n             x \\<in> Q \\<longrightarrow>\n             (\\<exists>z\\<in>Q.\n                 \\<forall>y. (z, y) \\<in> A \\<longrightarrow> y \\<notin> Q))", "obtain Q x where \"x \\<in> Q\" and \"\\<forall>z\\<in>Q. \\<exists>y. (z, y) \\<in> A \\<and> y \\<in> Q\""], ["proof (prove)\nusing this:\n  \\<not> (\\<forall>Q x.\n             x \\<in> Q \\<longrightarrow>\n             (\\<exists>z\\<in>Q.\n                 \\<forall>y. (z, y) \\<in> A \\<longrightarrow> y \\<notin> Q))\n\ngoal (1 subgoal):\n 1. (\\<And>x Q.\n        \\<lbrakk>x \\<in> Q;\n         \\<forall>z\\<in>Q.\n            \\<exists>y. (z, y) \\<in> A \\<and> y \\<in> Q\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  x \\<in> Q\n  \\<forall>z\\<in>Q. \\<exists>y. (z, y) \\<in> A \\<and> y \\<in> Q\n\ngoal (1 subgoal):\n 1. \\<not> (\\<forall>Q x.\n               x \\<in> Q \\<longrightarrow>\n               (\\<exists>z\\<in>Q.\n                   \\<forall>y.\n                      (z, y) \\<in> A \\<longrightarrow>\n                      y \\<notin> Q)) \\<Longrightarrow>\n    False", "then"], ["proof (chain)\npicking this:\n  x \\<in> Q\n  \\<forall>z\\<in>Q. \\<exists>y. (z, y) \\<in> A \\<and> y \\<in> Q", "have \"\\<forall>z. \\<exists>y. z \\<in> Q \\<longrightarrow> (z, y) \\<in> A \\<and> y \\<in> Q\""], ["proof (prove)\nusing this:\n  x \\<in> Q\n  \\<forall>z\\<in>Q. \\<exists>y. (z, y) \\<in> A \\<and> y \\<in> Q\n\ngoal (1 subgoal):\n 1. \\<forall>z.\n       \\<exists>y.\n          z \\<in> Q \\<longrightarrow> (z, y) \\<in> A \\<and> y \\<in> Q", "by auto"], ["proof (state)\nthis:\n  \\<forall>z.\n     \\<exists>y. z \\<in> Q \\<longrightarrow> (z, y) \\<in> A \\<and> y \\<in> Q\n\ngoal (1 subgoal):\n 1. \\<not> (\\<forall>Q x.\n               x \\<in> Q \\<longrightarrow>\n               (\\<exists>z\\<in>Q.\n                   \\<forall>y.\n                      (z, y) \\<in> A \\<longrightarrow>\n                      y \\<notin> Q)) \\<Longrightarrow>\n    False", "then"], ["proof (chain)\npicking this:\n  \\<forall>z.\n     \\<exists>y. z \\<in> Q \\<longrightarrow> (z, y) \\<in> A \\<and> y \\<in> Q", "have \"\\<exists>f. \\<forall>x. x \\<in> Q \\<longrightarrow> (x, f x) \\<in> A \\<and> f x \\<in> Q\""], ["proof (prove)\nusing this:\n  \\<forall>z.\n     \\<exists>y. z \\<in> Q \\<longrightarrow> (z, y) \\<in> A \\<and> y \\<in> Q\n\ngoal (1 subgoal):\n 1. \\<exists>f.\n       \\<forall>x.\n          x \\<in> Q \\<longrightarrow> (x, f x) \\<in> A \\<and> f x \\<in> Q", "by (rule choice)"], ["proof (state)\nthis:\n  \\<exists>f.\n     \\<forall>x.\n        x \\<in> Q \\<longrightarrow> (x, f x) \\<in> A \\<and> f x \\<in> Q\n\ngoal (1 subgoal):\n 1. \\<not> (\\<forall>Q x.\n               x \\<in> Q \\<longrightarrow>\n               (\\<exists>z\\<in>Q.\n                   \\<forall>y.\n                      (z, y) \\<in> A \\<longrightarrow>\n                      y \\<notin> Q)) \\<Longrightarrow>\n    False", "then"], ["proof (chain)\npicking this:\n  \\<exists>f.\n     \\<forall>x.\n        x \\<in> Q \\<longrightarrow> (x, f x) \\<in> A \\<and> f x \\<in> Q", "obtain f where a:\"\\<forall>x. x \\<in> Q \\<longrightarrow> (x, f x) \\<in> A \\<and> f x \\<in> Q\" (is \"\\<forall>x. ?P x\")"], ["proof (prove)\nusing this:\n  \\<exists>f.\n     \\<forall>x.\n        x \\<in> Q \\<longrightarrow> (x, f x) \\<in> A \\<and> f x \\<in> Q\n\ngoal (1 subgoal):\n 1. (\\<And>f.\n        \\<forall>x.\n           x \\<in> Q \\<longrightarrow>\n           (x, f x) \\<in> A \\<and> f x \\<in> Q \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by best"], ["proof (state)\nthis:\n  \\<forall>x.\n     x \\<in> Q \\<longrightarrow> (x, f x) \\<in> A \\<and> f x \\<in> Q\n\ngoal (1 subgoal):\n 1. \\<not> (\\<forall>Q x.\n               x \\<in> Q \\<longrightarrow>\n               (\\<exists>z\\<in>Q.\n                   \\<forall>y.\n                      (z, y) \\<in> A \\<longrightarrow>\n                      y \\<notin> Q)) \\<Longrightarrow>\n    False", "let ?S = \"\\<lambda>i. (f ^^ i) x\""], ["proof (state)\ngoal (1 subgoal):\n 1. \\<not> (\\<forall>Q x.\n               x \\<in> Q \\<longrightarrow>\n               (\\<exists>z\\<in>Q.\n                   \\<forall>y.\n                      (z, y) \\<in> A \\<longrightarrow>\n                      y \\<notin> Q)) \\<Longrightarrow>\n    False", "have \"?S 0 = x\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (f ^^ 0) x = x", "by simp"], ["proof (state)\nthis:\n  (f ^^ 0) x = x\n\ngoal (1 subgoal):\n 1. \\<not> (\\<forall>Q x.\n               x \\<in> Q \\<longrightarrow>\n               (\\<exists>z\\<in>Q.\n                   \\<forall>y.\n                      (z, y) \\<in> A \\<longrightarrow>\n                      y \\<notin> Q)) \\<Longrightarrow>\n    False", "have \"\\<forall>i. (?S i, ?S (Suc i)) \\<in> A \\<and> ?S (Suc i) \\<in> Q\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>i.\n       ((f ^^ i) x, (f ^^ Suc i) x) \\<in> A \\<and> (f ^^ Suc i) x \\<in> Q", "proof"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>i.\n       ((f ^^ i) x, (f ^^ Suc i) x) \\<in> A \\<and> (f ^^ Suc i) x \\<in> Q", "fix i"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>i.\n       ((f ^^ i) x, (f ^^ Suc i) x) \\<in> A \\<and> (f ^^ Suc i) x \\<in> Q", "show \"(?S i, ?S (Suc i)) \\<in> A \\<and> ?S (Suc i) \\<in> Q\""], ["proof (prove)\ngoal (1 subgoal):\n 1. ((f ^^ i) x, (f ^^ Suc i) x) \\<in> A \\<and> (f ^^ Suc i) x \\<in> Q", "by (induct i) (auto simp: \\<open>x \\<in> Q\\<close> a)"], ["proof (state)\nthis:\n  ((f ^^ i) x, (f ^^ Suc i) x) \\<in> A \\<and> (f ^^ Suc i) x \\<in> Q\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<forall>i.\n     ((f ^^ i) x, (f ^^ Suc i) x) \\<in> A \\<and> (f ^^ Suc i) x \\<in> Q\n\ngoal (1 subgoal):\n 1. \\<not> (\\<forall>Q x.\n               x \\<in> Q \\<longrightarrow>\n               (\\<exists>z\\<in>Q.\n                   \\<forall>y.\n                      (z, y) \\<in> A \\<longrightarrow>\n                      y \\<notin> Q)) \\<Longrightarrow>\n    False", "with \\<open>?S 0 = x\\<close>"], ["proof (chain)\npicking this:\n  (f ^^ 0) x = x\n  \\<forall>i.\n     ((f ^^ i) x, (f ^^ Suc i) x) \\<in> A \\<and> (f ^^ Suc i) x \\<in> Q", "have \"\\<exists>S. S 0 = x \\<and> chain A S\""], ["proof (prove)\nusing this:\n  (f ^^ 0) x = x\n  \\<forall>i.\n     ((f ^^ i) x, (f ^^ Suc i) x) \\<in> A \\<and> (f ^^ Suc i) x \\<in> Q\n\ngoal (1 subgoal):\n 1. \\<exists>S. S 0 = x \\<and> (\\<forall>i. (S i, S (Suc i)) \\<in> A)", "by fast"], ["proof (state)\nthis:\n  \\<exists>S. S 0 = x \\<and> (\\<forall>i. (S i, S (Suc i)) \\<in> A)\n\ngoal (1 subgoal):\n 1. \\<not> (\\<forall>Q x.\n               x \\<in> Q \\<longrightarrow>\n               (\\<exists>z\\<in>Q.\n                   \\<forall>y.\n                      (z, y) \\<in> A \\<longrightarrow>\n                      y \\<notin> Q)) \\<Longrightarrow>\n    False", "with assms"], ["proof (chain)\npicking this:\n  SN A\n  \\<exists>S. S 0 = x \\<and> (\\<forall>i. (S i, S (Suc i)) \\<in> A)", "show False"], ["proof (prove)\nusing this:\n  SN A\n  \\<exists>S. S 0 = x \\<and> (\\<forall>i. (S i, S (Suc i)) \\<in> A)\n\ngoal (1 subgoal):\n 1. False", "by auto"], ["proof (state)\nthis:\n  False\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma SN_on_imp_on_minimal:\n  assumes \"SN_on r {x}\"\n  shows \"\\<forall>Q. x \\<in> Q \\<longrightarrow> (\\<exists>z\\<in>Q. \\<forall>y. (z, y) \\<in> r \\<longrightarrow> y \\<notin> Q)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>Q.\n       x \\<in> Q \\<longrightarrow>\n       (\\<exists>z\\<in>Q.\n           \\<forall>y. (z, y) \\<in> r \\<longrightarrow> y \\<notin> Q)", "proof (rule ccontr)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<not> (\\<forall>Q.\n               x \\<in> Q \\<longrightarrow>\n               (\\<exists>z\\<in>Q.\n                   \\<forall>y.\n                      (z, y) \\<in> r \\<longrightarrow>\n                      y \\<notin> Q)) \\<Longrightarrow>\n    False", "assume \"\\<not>(\\<forall>Q. x \\<in> Q \\<longrightarrow> (\\<exists>z\\<in>Q. \\<forall>y. (z, y) \\<in> r \\<longrightarrow> y \\<notin> Q))\""], ["proof (state)\nthis:\n  \\<not> (\\<forall>Q.\n             x \\<in> Q \\<longrightarrow>\n             (\\<exists>z\\<in>Q.\n                 \\<forall>y. (z, y) \\<in> r \\<longrightarrow> y \\<notin> Q))\n\ngoal (1 subgoal):\n 1. \\<not> (\\<forall>Q.\n               x \\<in> Q \\<longrightarrow>\n               (\\<exists>z\\<in>Q.\n                   \\<forall>y.\n                      (z, y) \\<in> r \\<longrightarrow>\n                      y \\<notin> Q)) \\<Longrightarrow>\n    False", "then"], ["proof (chain)\npicking this:\n  \\<not> (\\<forall>Q.\n             x \\<in> Q \\<longrightarrow>\n             (\\<exists>z\\<in>Q.\n                 \\<forall>y. (z, y) \\<in> r \\<longrightarrow> y \\<notin> Q))", "obtain Q where \"x \\<in> Q\" and \"\\<forall>z\\<in>Q. \\<exists>y. (z, y) \\<in> r \\<and> y \\<in> Q\""], ["proof (prove)\nusing this:\n  \\<not> (\\<forall>Q.\n             x \\<in> Q \\<longrightarrow>\n             (\\<exists>z\\<in>Q.\n                 \\<forall>y. (z, y) \\<in> r \\<longrightarrow> y \\<notin> Q))\n\ngoal (1 subgoal):\n 1. (\\<And>Q.\n        \\<lbrakk>x \\<in> Q;\n         \\<forall>z\\<in>Q.\n            \\<exists>y. (z, y) \\<in> r \\<and> y \\<in> Q\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  x \\<in> Q\n  \\<forall>z\\<in>Q. \\<exists>y. (z, y) \\<in> r \\<and> y \\<in> Q\n\ngoal (1 subgoal):\n 1. \\<not> (\\<forall>Q.\n               x \\<in> Q \\<longrightarrow>\n               (\\<exists>z\\<in>Q.\n                   \\<forall>y.\n                      (z, y) \\<in> r \\<longrightarrow>\n                      y \\<notin> Q)) \\<Longrightarrow>\n    False", "then"], ["proof (chain)\npicking this:\n  x \\<in> Q\n  \\<forall>z\\<in>Q. \\<exists>y. (z, y) \\<in> r \\<and> y \\<in> Q", "have \"\\<forall>z. \\<exists>y. z \\<in> Q \\<longrightarrow> (z, y) \\<in> r \\<and> y \\<in> Q\""], ["proof (prove)\nusing this:\n  x \\<in> Q\n  \\<forall>z\\<in>Q. \\<exists>y. (z, y) \\<in> r \\<and> y \\<in> Q\n\ngoal (1 subgoal):\n 1. \\<forall>z.\n       \\<exists>y.\n          z \\<in> Q \\<longrightarrow> (z, y) \\<in> r \\<and> y \\<in> Q", "by auto"], ["proof (state)\nthis:\n  \\<forall>z.\n     \\<exists>y. z \\<in> Q \\<longrightarrow> (z, y) \\<in> r \\<and> y \\<in> Q\n\ngoal (1 subgoal):\n 1. \\<not> (\\<forall>Q.\n               x \\<in> Q \\<longrightarrow>\n               (\\<exists>z\\<in>Q.\n                   \\<forall>y.\n                      (z, y) \\<in> r \\<longrightarrow>\n                      y \\<notin> Q)) \\<Longrightarrow>\n    False", "then"], ["proof (chain)\npicking this:\n  \\<forall>z.\n     \\<exists>y. z \\<in> Q \\<longrightarrow> (z, y) \\<in> r \\<and> y \\<in> Q", "have \"\\<exists>f. \\<forall>x. x \\<in> Q \\<longrightarrow> (x, f x) \\<in> r \\<and> f x \\<in> Q\""], ["proof (prove)\nusing this:\n  \\<forall>z.\n     \\<exists>y. z \\<in> Q \\<longrightarrow> (z, y) \\<in> r \\<and> y \\<in> Q\n\ngoal (1 subgoal):\n 1. \\<exists>f.\n       \\<forall>x.\n          x \\<in> Q \\<longrightarrow> (x, f x) \\<in> r \\<and> f x \\<in> Q", "by (rule choice)"], ["proof (state)\nthis:\n  \\<exists>f.\n     \\<forall>x.\n        x \\<in> Q \\<longrightarrow> (x, f x) \\<in> r \\<and> f x \\<in> Q\n\ngoal (1 subgoal):\n 1. \\<not> (\\<forall>Q.\n               x \\<in> Q \\<longrightarrow>\n               (\\<exists>z\\<in>Q.\n                   \\<forall>y.\n                      (z, y) \\<in> r \\<longrightarrow>\n                      y \\<notin> Q)) \\<Longrightarrow>\n    False", "then"], ["proof (chain)\npicking this:\n  \\<exists>f.\n     \\<forall>x.\n        x \\<in> Q \\<longrightarrow> (x, f x) \\<in> r \\<and> f x \\<in> Q", "obtain f where a: \"\\<forall>x. x \\<in> Q \\<longrightarrow> (x, f x) \\<in> r \\<and> f x \\<in> Q\" (is \"\\<forall>x. ?P x\")"], ["proof (prove)\nusing this:\n  \\<exists>f.\n     \\<forall>x.\n        x \\<in> Q \\<longrightarrow> (x, f x) \\<in> r \\<and> f x \\<in> Q\n\ngoal (1 subgoal):\n 1. (\\<And>f.\n        \\<forall>x.\n           x \\<in> Q \\<longrightarrow>\n           (x, f x) \\<in> r \\<and> f x \\<in> Q \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by best"], ["proof (state)\nthis:\n  \\<forall>x.\n     x \\<in> Q \\<longrightarrow> (x, f x) \\<in> r \\<and> f x \\<in> Q\n\ngoal (1 subgoal):\n 1. \\<not> (\\<forall>Q.\n               x \\<in> Q \\<longrightarrow>\n               (\\<exists>z\\<in>Q.\n                   \\<forall>y.\n                      (z, y) \\<in> r \\<longrightarrow>\n                      y \\<notin> Q)) \\<Longrightarrow>\n    False", "let ?S = \"\\<lambda>i. (f ^^ i) x\""], ["proof (state)\ngoal (1 subgoal):\n 1. \\<not> (\\<forall>Q.\n               x \\<in> Q \\<longrightarrow>\n               (\\<exists>z\\<in>Q.\n                   \\<forall>y.\n                      (z, y) \\<in> r \\<longrightarrow>\n                      y \\<notin> Q)) \\<Longrightarrow>\n    False", "have \"?S 0 = x\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (f ^^ 0) x = x", "by simp"], ["proof (state)\nthis:\n  (f ^^ 0) x = x\n\ngoal (1 subgoal):\n 1. \\<not> (\\<forall>Q.\n               x \\<in> Q \\<longrightarrow>\n               (\\<exists>z\\<in>Q.\n                   \\<forall>y.\n                      (z, y) \\<in> r \\<longrightarrow>\n                      y \\<notin> Q)) \\<Longrightarrow>\n    False", "have \"\\<forall>i. (?S i,?S(Suc i)) \\<in> r \\<and> ?S(Suc i) \\<in> Q\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>i.\n       ((f ^^ i) x, (f ^^ Suc i) x) \\<in> r \\<and> (f ^^ Suc i) x \\<in> Q", "proof"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>i.\n       ((f ^^ i) x, (f ^^ Suc i) x) \\<in> r \\<and> (f ^^ Suc i) x \\<in> Q", "fix i"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>i.\n       ((f ^^ i) x, (f ^^ Suc i) x) \\<in> r \\<and> (f ^^ Suc i) x \\<in> Q", "show \"(?S i,?S(Suc i)) \\<in> r \\<and> ?S(Suc i) \\<in> Q\""], ["proof (prove)\ngoal (1 subgoal):\n 1. ((f ^^ i) x, (f ^^ Suc i) x) \\<in> r \\<and> (f ^^ Suc i) x \\<in> Q", "by (induct i) (auto simp:\\<open>x \\<in> Q\\<close> a)"], ["proof (state)\nthis:\n  ((f ^^ i) x, (f ^^ Suc i) x) \\<in> r \\<and> (f ^^ Suc i) x \\<in> Q\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<forall>i.\n     ((f ^^ i) x, (f ^^ Suc i) x) \\<in> r \\<and> (f ^^ Suc i) x \\<in> Q\n\ngoal (1 subgoal):\n 1. \\<not> (\\<forall>Q.\n               x \\<in> Q \\<longrightarrow>\n               (\\<exists>z\\<in>Q.\n                   \\<forall>y.\n                      (z, y) \\<in> r \\<longrightarrow>\n                      y \\<notin> Q)) \\<Longrightarrow>\n    False", "with \\<open>?S 0 = x\\<close>"], ["proof (chain)\npicking this:\n  (f ^^ 0) x = x\n  \\<forall>i.\n     ((f ^^ i) x, (f ^^ Suc i) x) \\<in> r \\<and> (f ^^ Suc i) x \\<in> Q", "have \"\\<exists>S. S 0 = x \\<and> chain r S\""], ["proof (prove)\nusing this:\n  (f ^^ 0) x = x\n  \\<forall>i.\n     ((f ^^ i) x, (f ^^ Suc i) x) \\<in> r \\<and> (f ^^ Suc i) x \\<in> Q\n\ngoal (1 subgoal):\n 1. \\<exists>S. S 0 = x \\<and> (\\<forall>i. (S i, S (Suc i)) \\<in> r)", "by fast"], ["proof (state)\nthis:\n  \\<exists>S. S 0 = x \\<and> (\\<forall>i. (S i, S (Suc i)) \\<in> r)\n\ngoal (1 subgoal):\n 1. \\<not> (\\<forall>Q.\n               x \\<in> Q \\<longrightarrow>\n               (\\<exists>z\\<in>Q.\n                   \\<forall>y.\n                      (z, y) \\<in> r \\<longrightarrow>\n                      y \\<notin> Q)) \\<Longrightarrow>\n    False", "with assms"], ["proof (chain)\npicking this:\n  SN_on r {x}\n  \\<exists>S. S 0 = x \\<and> (\\<forall>i. (S i, S (Suc i)) \\<in> r)", "show False"], ["proof (prove)\nusing this:\n  SN_on r {x}\n  \\<exists>S. S 0 = x \\<and> (\\<forall>i. (S i, S (Suc i)) \\<in> r)\n\ngoal (1 subgoal):\n 1. False", "by auto"], ["proof (state)\nthis:\n  False\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma minimal_imp_wf:\n  assumes \"\\<forall>Q x. x \\<in> Q \\<longrightarrow> (\\<exists>z\\<in>Q. \\<forall>y. (z, y) \\<in> r \\<longrightarrow> y \\<notin> Q)\"\n  shows \"wf(r\\<inverse>)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. wf (r\\<inverse>)", "proof (rule ccontr)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<not> wf (r\\<inverse>) \\<Longrightarrow> False", "assume \"\\<not> wf(r\\<inverse>)\""], ["proof (state)\nthis:\n  \\<not> wf (r\\<inverse>)\n\ngoal (1 subgoal):\n 1. \\<not> wf (r\\<inverse>) \\<Longrightarrow> False", "then"], ["proof (chain)\npicking this:\n  \\<not> wf (r\\<inverse>)", "have \"\\<exists>P. (\\<forall>x. (\\<forall>y. (x, y) \\<in> r \\<longrightarrow> P y) \\<longrightarrow> P x) \\<and> (\\<exists>x. \\<not> P x)\""], ["proof (prove)\nusing this:\n  \\<not> wf (r\\<inverse>)\n\ngoal (1 subgoal):\n 1. \\<exists>P.\n       (\\<forall>x.\n           (\\<forall>y.\n               (x, y) \\<in> r \\<longrightarrow> P y) \\<longrightarrow>\n           P x) \\<and>\n       (\\<exists>x. \\<not> P x)", "unfolding wf_def"], ["proof (prove)\nusing this:\n  \\<not> (\\<forall>P.\n             (\\<forall>x.\n                 (\\<forall>y.\n                     (y, x) \\<in> r\\<inverse> \\<longrightarrow>\n                     P y) \\<longrightarrow>\n                 P x) \\<longrightarrow>\n             All P)\n\ngoal (1 subgoal):\n 1. \\<exists>P.\n       (\\<forall>x.\n           (\\<forall>y.\n               (x, y) \\<in> r \\<longrightarrow> P y) \\<longrightarrow>\n           P x) \\<and>\n       (\\<exists>x. \\<not> P x)", "by simp"], ["proof (state)\nthis:\n  \\<exists>P.\n     (\\<forall>x.\n         (\\<forall>y.\n             (x, y) \\<in> r \\<longrightarrow> P y) \\<longrightarrow>\n         P x) \\<and>\n     (\\<exists>x. \\<not> P x)\n\ngoal (1 subgoal):\n 1. \\<not> wf (r\\<inverse>) \\<Longrightarrow> False", "then"], ["proof (chain)\npicking this:\n  \\<exists>P.\n     (\\<forall>x.\n         (\\<forall>y.\n             (x, y) \\<in> r \\<longrightarrow> P y) \\<longrightarrow>\n         P x) \\<and>\n     (\\<exists>x. \\<not> P x)", "obtain P x where suc:\"\\<forall>x. (\\<forall>y. (x, y) \\<in> r \\<longrightarrow> P y) \\<longrightarrow> P x\" and \"\\<not> P x\""], ["proof (prove)\nusing this:\n  \\<exists>P.\n     (\\<forall>x.\n         (\\<forall>y.\n             (x, y) \\<in> r \\<longrightarrow> P y) \\<longrightarrow>\n         P x) \\<and>\n     (\\<exists>x. \\<not> P x)\n\ngoal (1 subgoal):\n 1. (\\<And>P x.\n        \\<lbrakk>\\<forall>x.\n                    (\\<forall>y.\n                        (x, y) \\<in> r \\<longrightarrow>\n                        P y) \\<longrightarrow>\n                    P x;\n         \\<not> P x\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  \\<forall>x.\n     (\\<forall>y. (x, y) \\<in> r \\<longrightarrow> P y) \\<longrightarrow>\n     P x\n  \\<not> P x\n\ngoal (1 subgoal):\n 1. \\<not> wf (r\\<inverse>) \\<Longrightarrow> False", "let ?Q = \"{x. \\<not> P x}\""], ["proof (state)\ngoal (1 subgoal):\n 1. \\<not> wf (r\\<inverse>) \\<Longrightarrow> False", "from \\<open>\\<not> P x\\<close>"], ["proof (chain)\npicking this:\n  \\<not> P x", "have \"x \\<in> ?Q\""], ["proof (prove)\nusing this:\n  \\<not> P x\n\ngoal (1 subgoal):\n 1. x \\<in> {x. \\<not> P x}", "by simp"], ["proof (state)\nthis:\n  x \\<in> {x. \\<not> P x}\n\ngoal (1 subgoal):\n 1. \\<not> wf (r\\<inverse>) \\<Longrightarrow> False", "from assms"], ["proof (chain)\npicking this:\n  \\<forall>Q x.\n     x \\<in> Q \\<longrightarrow>\n     (\\<exists>z\\<in>Q.\n         \\<forall>y. (z, y) \\<in> r \\<longrightarrow> y \\<notin> Q)", "have \"\\<forall>x. x \\<in> ?Q \\<longrightarrow> (\\<exists>z\\<in>?Q. \\<forall>y. (z, y) \\<in> r \\<longrightarrow> y \\<notin> ?Q)\""], ["proof (prove)\nusing this:\n  \\<forall>Q x.\n     x \\<in> Q \\<longrightarrow>\n     (\\<exists>z\\<in>Q.\n         \\<forall>y. (z, y) \\<in> r \\<longrightarrow> y \\<notin> Q)\n\ngoal (1 subgoal):\n 1. \\<forall>x.\n       x \\<in> {x. \\<not> P x} \\<longrightarrow>\n       (\\<exists>z\\<in>{x. \\<not> P x}.\n           \\<forall>y.\n              (z, y) \\<in> r \\<longrightarrow> y \\<notin> {x. \\<not> P x})", "by (rule allE [where x = ?Q])"], ["proof (state)\nthis:\n  \\<forall>x.\n     x \\<in> {x. \\<not> P x} \\<longrightarrow>\n     (\\<exists>z\\<in>{x. \\<not> P x}.\n         \\<forall>y.\n            (z, y) \\<in> r \\<longrightarrow> y \\<notin> {x. \\<not> P x})\n\ngoal (1 subgoal):\n 1. \\<not> wf (r\\<inverse>) \\<Longrightarrow> False", "with \\<open>x \\<in> ?Q\\<close>"], ["proof (chain)\npicking this:\n  x \\<in> {x. \\<not> P x}\n  \\<forall>x.\n     x \\<in> {x. \\<not> P x} \\<longrightarrow>\n     (\\<exists>z\\<in>{x. \\<not> P x}.\n         \\<forall>y.\n            (z, y) \\<in> r \\<longrightarrow> y \\<notin> {x. \\<not> P x})", "obtain z where \"z \\<in> ?Q\" and min:\" \\<forall>y. (z, y) \\<in> r \\<longrightarrow> y \\<notin> ?Q\""], ["proof (prove)\nusing this:\n  x \\<in> {x. \\<not> P x}\n  \\<forall>x.\n     x \\<in> {x. \\<not> P x} \\<longrightarrow>\n     (\\<exists>z\\<in>{x. \\<not> P x}.\n         \\<forall>y.\n            (z, y) \\<in> r \\<longrightarrow> y \\<notin> {x. \\<not> P x})\n\ngoal (1 subgoal):\n 1. (\\<And>z.\n        \\<lbrakk>z \\<in> {x. \\<not> P x};\n         \\<forall>y.\n            (z, y) \\<in> r \\<longrightarrow>\n            y \\<notin> {x. \\<not> P x}\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by best"], ["proof (state)\nthis:\n  z \\<in> {x. \\<not> P x}\n  \\<forall>y. (z, y) \\<in> r \\<longrightarrow> y \\<notin> {x. \\<not> P x}\n\ngoal (1 subgoal):\n 1. \\<not> wf (r\\<inverse>) \\<Longrightarrow> False", "from \\<open>z \\<in> ?Q\\<close>"], ["proof (chain)\npicking this:\n  z \\<in> {x. \\<not> P x}", "have \"\\<not> P z\""], ["proof (prove)\nusing this:\n  z \\<in> {x. \\<not> P x}\n\ngoal (1 subgoal):\n 1. \\<not> P z", "by simp"], ["proof (state)\nthis:\n  \\<not> P z\n\ngoal (1 subgoal):\n 1. \\<not> wf (r\\<inverse>) \\<Longrightarrow> False", "with suc"], ["proof (chain)\npicking this:\n  \\<forall>x.\n     (\\<forall>y. (x, y) \\<in> r \\<longrightarrow> P y) \\<longrightarrow>\n     P x\n  \\<not> P z", "obtain y where \"(z, y) \\<in> r\" and \"\\<not> P y\""], ["proof (prove)\nusing this:\n  \\<forall>x.\n     (\\<forall>y. (x, y) \\<in> r \\<longrightarrow> P y) \\<longrightarrow>\n     P x\n  \\<not> P z\n\ngoal (1 subgoal):\n 1. (\\<And>y.\n        \\<lbrakk>(z, y) \\<in> r; \\<not> P y\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by best"], ["proof (state)\nthis:\n  (z, y) \\<in> r\n  \\<not> P y\n\ngoal (1 subgoal):\n 1. \\<not> wf (r\\<inverse>) \\<Longrightarrow> False", "then"], ["proof (chain)\npicking this:\n  (z, y) \\<in> r\n  \\<not> P y", "have \"y \\<in> ?Q\""], ["proof (prove)\nusing this:\n  (z, y) \\<in> r\n  \\<not> P y\n\ngoal (1 subgoal):\n 1. y \\<in> {x. \\<not> P x}", "by simp"], ["proof (state)\nthis:\n  y \\<in> {x. \\<not> P x}\n\ngoal (1 subgoal):\n 1. \\<not> wf (r\\<inverse>) \\<Longrightarrow> False", "with \\<open>(z, y) \\<in> r\\<close> and min"], ["proof (chain)\npicking this:\n  (z, y) \\<in> r\n  \\<forall>y. (z, y) \\<in> r \\<longrightarrow> y \\<notin> {x. \\<not> P x}\n  y \\<in> {x. \\<not> P x}", "show False"], ["proof (prove)\nusing this:\n  (z, y) \\<in> r\n  \\<forall>y. (z, y) \\<in> r \\<longrightarrow> y \\<notin> {x. \\<not> P x}\n  y \\<in> {x. \\<not> P x}\n\ngoal (1 subgoal):\n 1. False", "by simp"], ["proof (state)\nthis:\n  False\n\ngoal:\nNo subgoals!", "qed"], ["", "lemmas SN_imp_wf = SN_imp_minimal [THEN minimal_imp_wf]"], ["", "lemma wf_imp_SN:\n  assumes \"wf (A\\<inverse>)\" shows \"SN A\""], ["proof (prove)\ngoal (1 subgoal):\n 1. SN A", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. SN A", "{"], ["proof (state)\ngoal (1 subgoal):\n 1. SN A", "fix a"], ["proof (state)\ngoal (1 subgoal):\n 1. SN A", "let ?P = \"\\<lambda>a. \\<not>(\\<exists>S. S 0 = a \\<and> chain A S)\""], ["proof (state)\ngoal (1 subgoal):\n 1. SN A", "from \\<open>wf (A\\<inverse>)\\<close>"], ["proof (chain)\npicking this:\n  wf (A\\<inverse>)", "have \"?P a\""], ["proof (prove)\nusing this:\n  wf (A\\<inverse>)\n\ngoal (1 subgoal):\n 1. \\<nexists>S. S 0 = a \\<and> (\\<forall>i. (S i, S (Suc i)) \\<in> A)", "proof induct"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x.\n       (\\<And>y.\n           (y, x) \\<in> A\\<inverse> \\<Longrightarrow>\n           \\<nexists>S.\n              S 0 = y \\<and>\n              (\\<forall>i. (S i, S (Suc i)) \\<in> A)) \\<Longrightarrow>\n       \\<nexists>S. S 0 = x \\<and> (\\<forall>i. (S i, S (Suc i)) \\<in> A)", "case (less a)"], ["proof (state)\nthis:\n  (?y, a) \\<in> A\\<inverse> \\<Longrightarrow>\n  \\<nexists>S. S 0 = ?y \\<and> (\\<forall>i. (S i, S (Suc i)) \\<in> A)\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       (\\<And>y.\n           (y, x) \\<in> A\\<inverse> \\<Longrightarrow>\n           \\<nexists>S.\n              S 0 = y \\<and>\n              (\\<forall>i. (S i, S (Suc i)) \\<in> A)) \\<Longrightarrow>\n       \\<nexists>S. S 0 = x \\<and> (\\<forall>i. (S i, S (Suc i)) \\<in> A)", "then"], ["proof (chain)\npicking this:\n  (?y, a) \\<in> A\\<inverse> \\<Longrightarrow>\n  \\<nexists>S. S 0 = ?y \\<and> (\\<forall>i. (S i, S (Suc i)) \\<in> A)", "have IH: \"\\<And>b. (a, b) \\<in> A \\<Longrightarrow> ?P b\""], ["proof (prove)\nusing this:\n  (?y, a) \\<in> A\\<inverse> \\<Longrightarrow>\n  \\<nexists>S. S 0 = ?y \\<and> (\\<forall>i. (S i, S (Suc i)) \\<in> A)\n\ngoal (1 subgoal):\n 1. \\<And>b.\n       (a, b) \\<in> A \\<Longrightarrow>\n       \\<nexists>S. S 0 = b \\<and> (\\<forall>i. (S i, S (Suc i)) \\<in> A)", "by auto"], ["proof (state)\nthis:\n  (a, ?b) \\<in> A \\<Longrightarrow>\n  \\<nexists>S. S 0 = ?b \\<and> (\\<forall>i. (S i, S (Suc i)) \\<in> A)\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       (\\<And>y.\n           (y, x) \\<in> A\\<inverse> \\<Longrightarrow>\n           \\<nexists>S.\n              S 0 = y \\<and>\n              (\\<forall>i. (S i, S (Suc i)) \\<in> A)) \\<Longrightarrow>\n       \\<nexists>S. S 0 = x \\<and> (\\<forall>i. (S i, S (Suc i)) \\<in> A)", "show \"?P a\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<nexists>S. S 0 = a \\<and> (\\<forall>i. (S i, S (Suc i)) \\<in> A)", "proof (rule ccontr)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<not> (\\<nexists>S.\n               S 0 = a \\<and>\n               (\\<forall>i. (S i, S (Suc i)) \\<in> A)) \\<Longrightarrow>\n    False", "assume \"\\<not> ?P a\""], ["proof (state)\nthis:\n  \\<not> (\\<nexists>S.\n             S 0 = a \\<and> (\\<forall>i. (S i, S (Suc i)) \\<in> A))\n\ngoal (1 subgoal):\n 1. \\<not> (\\<nexists>S.\n               S 0 = a \\<and>\n               (\\<forall>i. (S i, S (Suc i)) \\<in> A)) \\<Longrightarrow>\n    False", "then"], ["proof (chain)\npicking this:\n  \\<not> (\\<nexists>S.\n             S 0 = a \\<and> (\\<forall>i. (S i, S (Suc i)) \\<in> A))", "obtain S where \"S 0 = a\" and \"chain A S\""], ["proof (prove)\nusing this:\n  \\<not> (\\<nexists>S.\n             S 0 = a \\<and> (\\<forall>i. (S i, S (Suc i)) \\<in> A))\n\ngoal (1 subgoal):\n 1. (\\<And>S.\n        \\<lbrakk>S 0 = a; \\<forall>i. (S i, S (Suc i)) \\<in> A\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  S 0 = a\n  \\<forall>i. (S i, S (Suc i)) \\<in> A\n\ngoal (1 subgoal):\n 1. \\<not> (\\<nexists>S.\n               S 0 = a \\<and>\n               (\\<forall>i. (S i, S (Suc i)) \\<in> A)) \\<Longrightarrow>\n    False", "then"], ["proof (chain)\npicking this:\n  S 0 = a\n  \\<forall>i. (S i, S (Suc i)) \\<in> A", "have \"(S 0, S 1) \\<in> A\""], ["proof (prove)\nusing this:\n  S 0 = a\n  \\<forall>i. (S i, S (Suc i)) \\<in> A\n\ngoal (1 subgoal):\n 1. (S 0, S 1) \\<in> A", "by auto"], ["proof (state)\nthis:\n  (S 0, S 1) \\<in> A\n\ngoal (1 subgoal):\n 1. \\<not> (\\<nexists>S.\n               S 0 = a \\<and>\n               (\\<forall>i. (S i, S (Suc i)) \\<in> A)) \\<Longrightarrow>\n    False", "with IH"], ["proof (chain)\npicking this:\n  (a, ?b) \\<in> A \\<Longrightarrow>\n  \\<nexists>S. S 0 = ?b \\<and> (\\<forall>i. (S i, S (Suc i)) \\<in> A)\n  (S 0, S 1) \\<in> A", "have \"?P (S 1)\""], ["proof (prove)\nusing this:\n  (a, ?b) \\<in> A \\<Longrightarrow>\n  \\<nexists>S. S 0 = ?b \\<and> (\\<forall>i. (S i, S (Suc i)) \\<in> A)\n  (S 0, S 1) \\<in> A\n\ngoal (1 subgoal):\n 1. \\<nexists>Sa. Sa 0 = S 1 \\<and> (\\<forall>i. (Sa i, Sa (Suc i)) \\<in> A)", "unfolding \\<open>S 0 = a\\<close>"], ["proof (prove)\nusing this:\n  (a, ?b) \\<in> A \\<Longrightarrow>\n  \\<nexists>S. S 0 = ?b \\<and> (\\<forall>i. (S i, S (Suc i)) \\<in> A)\n  (a, S 1) \\<in> A\n\ngoal (1 subgoal):\n 1. \\<nexists>Sa. Sa 0 = S 1 \\<and> (\\<forall>i. (Sa i, Sa (Suc i)) \\<in> A)", "by auto"], ["proof (state)\nthis:\n  \\<nexists>Sa. Sa 0 = S 1 \\<and> (\\<forall>i. (Sa i, Sa (Suc i)) \\<in> A)\n\ngoal (1 subgoal):\n 1. \\<not> (\\<nexists>S.\n               S 0 = a \\<and>\n               (\\<forall>i. (S i, S (Suc i)) \\<in> A)) \\<Longrightarrow>\n    False", "with \\<open>chain A S\\<close>"], ["proof (chain)\npicking this:\n  \\<forall>i. (S i, S (Suc i)) \\<in> A\n  \\<nexists>Sa. Sa 0 = S 1 \\<and> (\\<forall>i. (Sa i, Sa (Suc i)) \\<in> A)", "show False"], ["proof (prove)\nusing this:\n  \\<forall>i. (S i, S (Suc i)) \\<in> A\n  \\<nexists>Sa. Sa 0 = S 1 \\<and> (\\<forall>i. (Sa i, Sa (Suc i)) \\<in> A)\n\ngoal (1 subgoal):\n 1. False", "by auto"], ["proof (state)\nthis:\n  False\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<nexists>S. S 0 = a \\<and> (\\<forall>i. (S i, S (Suc i)) \\<in> A)\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<nexists>S. S 0 = a \\<and> (\\<forall>i. (S i, S (Suc i)) \\<in> A)\n\ngoal (1 subgoal):\n 1. SN A", "then"], ["proof (chain)\npicking this:\n  \\<nexists>S. S 0 = a \\<and> (\\<forall>i. (S i, S (Suc i)) \\<in> A)", "have \"SN_on A {a}\""], ["proof (prove)\nusing this:\n  \\<nexists>S. S 0 = a \\<and> (\\<forall>i. (S i, S (Suc i)) \\<in> A)\n\ngoal (1 subgoal):\n 1. SN_on A {a}", "unfolding SN_defs"], ["proof (prove)\nusing this:\n  \\<nexists>S. S 0 = a \\<and> (\\<forall>i. (S i, S (Suc i)) \\<in> A)\n\ngoal (1 subgoal):\n 1. \\<nexists>f. f 0 \\<in> {a} \\<and> (\\<forall>i. (f i, f (Suc i)) \\<in> A)", "by auto"], ["proof (state)\nthis:\n  SN_on A {a}\n\ngoal (1 subgoal):\n 1. SN A", "}"], ["proof (state)\nthis:\n  SN_on A {?a2}\n\ngoal (1 subgoal):\n 1. SN A", "then"], ["proof (chain)\npicking this:\n  SN_on A {?a2}", "show ?thesis"], ["proof (prove)\nusing this:\n  SN_on A {?a2}\n\ngoal (1 subgoal):\n 1. SN A", "by fast"], ["proof (state)\nthis:\n  SN A\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma SN_nat_gt: \"SN {(a, b :: nat) . a > b}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. SN {(a, b). b < a}", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. SN {(a, b). b < a}", "from wf_less"], ["proof (chain)\npicking this:\n  wf {(x, y). x < y}", "have \"wf ({(x, y) . (x :: nat) > y}\\<inverse>)\""], ["proof (prove)\nusing this:\n  wf {(x, y). x < y}\n\ngoal (1 subgoal):\n 1. wf ({(x, y). y < x}\\<inverse>)", "unfolding converse_unfold"], ["proof (prove)\nusing this:\n  wf {(x, y). x < y}\n\ngoal (1 subgoal):\n 1. wf {(y, x). (x, y) \\<in> {(x, y). y < x}}", "by auto"], ["proof (state)\nthis:\n  wf ({(x, y). y < x}\\<inverse>)\n\ngoal (1 subgoal):\n 1. SN {(a, b). b < a}", "from wf_imp_SN [OF this]"], ["proof (chain)\npicking this:\n  SN {(x, y). y < x}", "show ?thesis"], ["proof (prove)\nusing this:\n  SN {(x, y). y < x}\n\ngoal (1 subgoal):\n 1. SN {(a, b). b < a}", "."], ["proof (state)\nthis:\n  SN {(a, b). b < a}\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma SN_iff_wf: \"SN A = wf (A\\<inverse>)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. SN A = wf (A\\<inverse>)", "by (auto simp: SN_imp_wf wf_imp_SN)"], ["", "lemma SN_imp_acyclic: \"SN R \\<Longrightarrow> acyclic R\""], ["proof (prove)\ngoal (1 subgoal):\n 1. SN R \\<Longrightarrow> acyclic R", "using wf_acyclic [of \"R\\<inverse>\", unfolded SN_iff_wf [symmetric]]"], ["proof (prove)\nusing this:\n  SN R \\<Longrightarrow> acyclic (R\\<inverse>)\n\ngoal (1 subgoal):\n 1. SN R \\<Longrightarrow> acyclic R", "by auto"], ["", "lemma SN_induct:\n  assumes sn: \"SN r\" and step: \"\\<And>a. (\\<And>b. (a, b) \\<in> r \\<Longrightarrow> P b) \\<Longrightarrow> P a\"\n  shows \"P a\""], ["proof (prove)\ngoal (1 subgoal):\n 1. P a", "using sn"], ["proof (prove)\nusing this:\n  SN r\n\ngoal (1 subgoal):\n 1. P a", "unfolding SN_iff_wf"], ["proof (prove)\nusing this:\n  wf (r\\<inverse>)\n\ngoal (1 subgoal):\n 1. P a", "proof induct"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x.\n       (\\<And>y.\n           (y, x) \\<in> r\\<inverse> \\<Longrightarrow> P y) \\<Longrightarrow>\n       P x", "case (less a)"], ["proof (state)\nthis:\n  (?y, a) \\<in> r\\<inverse> \\<Longrightarrow> P ?y\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       (\\<And>y.\n           (y, x) \\<in> r\\<inverse> \\<Longrightarrow> P y) \\<Longrightarrow>\n       P x", "with step"], ["proof (chain)\npicking this:\n  (\\<And>b. (?a, b) \\<in> r \\<Longrightarrow> P b) \\<Longrightarrow> P ?a\n  (?y, a) \\<in> r\\<inverse> \\<Longrightarrow> P ?y", "show ?case"], ["proof (prove)\nusing this:\n  (\\<And>b. (?a, b) \\<in> r \\<Longrightarrow> P b) \\<Longrightarrow> P ?a\n  (?y, a) \\<in> r\\<inverse> \\<Longrightarrow> P ?y\n\ngoal (1 subgoal):\n 1. P a", "by best"], ["proof (state)\nthis:\n  P a\n\ngoal:\nNo subgoals!", "qed"], ["", "(* The same as well-founded induction, but in the 'correct' direction. *)"], ["", "lemmas SN_induct_rule = SN_induct [consumes 1, case_names IH, induct pred: SN]"], ["", "lemma SN_on_induct [consumes 2, case_names IH, induct pred: SN_on]:\n  assumes SN: \"SN_on R A\"\n    and \"s \\<in> A\"\n    and imp: \"\\<And>t. (\\<And>u. (t, u) \\<in> R \\<Longrightarrow> P u) \\<Longrightarrow> P t\"\n  shows \"P s\""], ["proof (prove)\ngoal (1 subgoal):\n 1. P s", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. P s", "let ?R = \"restrict_SN R R\""], ["proof (state)\ngoal (1 subgoal):\n 1. P s", "let ?P = \"\\<lambda>t. SN_on R {t} \\<longrightarrow> P t\""], ["proof (state)\ngoal (1 subgoal):\n 1. P s", "have \"SN_on R {s} \\<longrightarrow> P s\""], ["proof (prove)\ngoal (1 subgoal):\n 1. SN_on R {s} \\<longrightarrow> P s", "proof (rule SN_induct [OF SN_restrict_SN_idemp [of R], of ?P])"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>a.\n       (\\<And>b.\n           (a, b) \\<in> restrict_SN R R \\<Longrightarrow>\n           SN_on R {b} \\<longrightarrow> P b) \\<Longrightarrow>\n       SN_on R {a} \\<longrightarrow> P a", "fix a"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>a.\n       (\\<And>b.\n           (a, b) \\<in> restrict_SN R R \\<Longrightarrow>\n           SN_on R {b} \\<longrightarrow> P b) \\<Longrightarrow>\n       SN_on R {a} \\<longrightarrow> P a", "assume ind: \"\\<And>b. (a, b) \\<in> ?R \\<Longrightarrow> SN_on R {b} \\<longrightarrow> P b\""], ["proof (state)\nthis:\n  (a, ?b) \\<in> restrict_SN R R \\<Longrightarrow>\n  SN_on R {?b} \\<longrightarrow> P ?b\n\ngoal (1 subgoal):\n 1. \\<And>a.\n       (\\<And>b.\n           (a, b) \\<in> restrict_SN R R \\<Longrightarrow>\n           SN_on R {b} \\<longrightarrow> P b) \\<Longrightarrow>\n       SN_on R {a} \\<longrightarrow> P a", "show \"SN_on R {a} \\<longrightarrow> P a\""], ["proof (prove)\ngoal (1 subgoal):\n 1. SN_on R {a} \\<longrightarrow> P a", "proof"], ["proof (state)\ngoal (1 subgoal):\n 1. SN_on R {a} \\<Longrightarrow> P a", "assume SN: \"SN_on R {a}\""], ["proof (state)\nthis:\n  SN_on R {a}\n\ngoal (1 subgoal):\n 1. SN_on R {a} \\<Longrightarrow> P a", "show \"P a\""], ["proof (prove)\ngoal (1 subgoal):\n 1. P a", "proof (rule imp)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>u. (a, u) \\<in> R \\<Longrightarrow> P u", "fix b"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>u. (a, u) \\<in> R \\<Longrightarrow> P u", "assume \"(a, b) \\<in> R\""], ["proof (state)\nthis:\n  (a, b) \\<in> R\n\ngoal (1 subgoal):\n 1. \\<And>u. (a, u) \\<in> R \\<Longrightarrow> P u", "with SN step_preserves_SN_on [OF this SN]"], ["proof (chain)\npicking this:\n  SN_on R {a}\n  SN_on R {b}\n  (a, b) \\<in> R", "show \"P b\""], ["proof (prove)\nusing this:\n  SN_on R {a}\n  SN_on R {b}\n  (a, b) \\<in> R\n\ngoal (1 subgoal):\n 1. P b", "using ind [of b]"], ["proof (prove)\nusing this:\n  SN_on R {a}\n  SN_on R {b}\n  (a, b) \\<in> R\n  (a, b) \\<in> restrict_SN R R \\<Longrightarrow>\n  SN_on R {b} \\<longrightarrow> P b\n\ngoal (1 subgoal):\n 1. P b", "unfolding restrict_SN_def"], ["proof (prove)\nusing this:\n  SN_on R {a}\n  SN_on R {b}\n  (a, b) \\<in> R\n  (a, b)\n  \\<in> {(a, b) |a b. (a, b) \\<in> R \\<and> SN_on R {a}} \\<Longrightarrow>\n  SN_on R {b} \\<longrightarrow> P b\n\ngoal (1 subgoal):\n 1. P b", "by auto"], ["proof (state)\nthis:\n  P b\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  P a\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  SN_on R {a} \\<longrightarrow> P a\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  SN_on R {s} \\<longrightarrow> P s\n\ngoal (1 subgoal):\n 1. P s", "with SN"], ["proof (chain)\npicking this:\n  SN_on R A\n  SN_on R {s} \\<longrightarrow> P s", "show \"P s\""], ["proof (prove)\nusing this:\n  SN_on R A\n  SN_on R {s} \\<longrightarrow> P s\n\ngoal (1 subgoal):\n 1. P s", "using \\<open>s \\<in> A\\<close>"], ["proof (prove)\nusing this:\n  SN_on R A\n  SN_on R {s} \\<longrightarrow> P s\n  s \\<in> A\n\ngoal (1 subgoal):\n 1. P s", "unfolding SN_on_def"], ["proof (prove)\nusing this:\n  \\<nexists>f. f 0 \\<in> A \\<and> (\\<forall>i. (f i, f (Suc i)) \\<in> R)\n  (\\<nexists>f.\n      f 0 \\<in> {s} \\<and>\n      (\\<forall>i. (f i, f (Suc i)) \\<in> R)) \\<longrightarrow>\n  P s\n  s \\<in> A\n\ngoal (1 subgoal):\n 1. P s", "by blast"], ["proof (state)\nthis:\n  P s\n\ngoal:\nNo subgoals!", "qed"], ["", "(* link SN_on to acc / accp *)"], ["", "lemma accp_imp_SN_on:\n  assumes \"\\<And>x. x \\<in> A \\<Longrightarrow> Wellfounded.accp g x\"\n  shows \"SN_on {(y, z). g z y} A\""], ["proof (prove)\ngoal (1 subgoal):\n 1. SN_on {(y, z). g z y} A", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. SN_on {(y, z). g z y} A", "{"], ["proof (state)\ngoal (1 subgoal):\n 1. SN_on {(y, z). g z y} A", "fix x"], ["proof (state)\ngoal (1 subgoal):\n 1. SN_on {(y, z). g z y} A", "assume \"x \\<in> A\""], ["proof (state)\nthis:\n  x \\<in> A\n\ngoal (1 subgoal):\n 1. SN_on {(y, z). g z y} A", "from assms [OF this]"], ["proof (chain)\npicking this:\n  Wellfounded.accp g x", "have \"SN_on {(y, z). g z y} {x}\""], ["proof (prove)\nusing this:\n  Wellfounded.accp g x\n\ngoal (1 subgoal):\n 1. SN_on {(y, z). g z y} {x}", "proof (induct rule: accp.induct)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x.\n       \\<lbrakk>\\<And>y. g y x \\<Longrightarrow> Wellfounded.accp g y;\n        \\<And>y.\n           g y x \\<Longrightarrow>\n           SN_on {a. case a of (y, z) \\<Rightarrow> g z y} {y}\\<rbrakk>\n       \\<Longrightarrow> SN_on {a. case a of (y, z) \\<Rightarrow> g z y} {x}", "case (accI x)"], ["proof (state)\nthis:\n  g ?y x \\<Longrightarrow> Wellfounded.accp g ?y\n  g ?y x \\<Longrightarrow>\n  SN_on {a. case a of (y, z) \\<Rightarrow> g z y} {?y}\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       \\<lbrakk>\\<And>y. g y x \\<Longrightarrow> Wellfounded.accp g y;\n        \\<And>y.\n           g y x \\<Longrightarrow>\n           SN_on {a. case a of (y, z) \\<Rightarrow> g z y} {y}\\<rbrakk>\n       \\<Longrightarrow> SN_on {a. case a of (y, z) \\<Rightarrow> g z y} {x}", "show ?case"], ["proof (prove)\ngoal (1 subgoal):\n 1. SN_on {a. case a of (y, z) \\<Rightarrow> g z y} {x}", "proof"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>f.\n       \\<lbrakk>f 0 \\<in> {x};\n        \\<forall>i.\n           (f i, f (Suc i))\n           \\<in> {a. case a of (y, z) \\<Rightarrow> g z y}\\<rbrakk>\n       \\<Longrightarrow> False", "fix f"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>f.\n       \\<lbrakk>f 0 \\<in> {x};\n        \\<forall>i.\n           (f i, f (Suc i))\n           \\<in> {a. case a of (y, z) \\<Rightarrow> g z y}\\<rbrakk>\n       \\<Longrightarrow> False", "assume x: \"f 0 \\<in> {x}\" and steps: \"\\<forall> i. (f i, f (Suc i)) \\<in> {a. (\\<lambda>(y, z). g z y) a}\""], ["proof (state)\nthis:\n  f 0 \\<in> {x}\n  \\<forall>i.\n     (f i, f (Suc i)) \\<in> {a. case a of (y, z) \\<Rightarrow> g z y}\n\ngoal (1 subgoal):\n 1. \\<And>f.\n       \\<lbrakk>f 0 \\<in> {x};\n        \\<forall>i.\n           (f i, f (Suc i))\n           \\<in> {a. case a of (y, z) \\<Rightarrow> g z y}\\<rbrakk>\n       \\<Longrightarrow> False", "then"], ["proof (chain)\npicking this:\n  f 0 \\<in> {x}\n  \\<forall>i.\n     (f i, f (Suc i)) \\<in> {a. case a of (y, z) \\<Rightarrow> g z y}", "have \"g (f 1) x\""], ["proof (prove)\nusing this:\n  f 0 \\<in> {x}\n  \\<forall>i.\n     (f i, f (Suc i)) \\<in> {a. case a of (y, z) \\<Rightarrow> g z y}\n\ngoal (1 subgoal):\n 1. g (f 1) x", "by auto"], ["proof (state)\nthis:\n  g (f 1) x\n\ngoal (1 subgoal):\n 1. \\<And>f.\n       \\<lbrakk>f 0 \\<in> {x};\n        \\<forall>i.\n           (f i, f (Suc i))\n           \\<in> {a. case a of (y, z) \\<Rightarrow> g z y}\\<rbrakk>\n       \\<Longrightarrow> False", "from accI(2)[OF this] steps x"], ["proof (chain)\npicking this:\n  SN_on {a. case a of (y, z) \\<Rightarrow> g z y} {f 1}\n  \\<forall>i.\n     (f i, f (Suc i)) \\<in> {a. case a of (y, z) \\<Rightarrow> g z y}\n  f 0 \\<in> {x}", "show False"], ["proof (prove)\nusing this:\n  SN_on {a. case a of (y, z) \\<Rightarrow> g z y} {f 1}\n  \\<forall>i.\n     (f i, f (Suc i)) \\<in> {a. case a of (y, z) \\<Rightarrow> g z y}\n  f 0 \\<in> {x}\n\ngoal (1 subgoal):\n 1. False", "unfolding SN_on_def"], ["proof (prove)\nusing this:\n  \\<nexists>fa.\n     fa 0 \\<in> {f 1} \\<and>\n     (\\<forall>i. (fa i, fa (Suc i)) \\<in> {(y, z). g z y})\n  \\<forall>i.\n     (f i, f (Suc i)) \\<in> {a. case a of (y, z) \\<Rightarrow> g z y}\n  f 0 \\<in> {x}\n\ngoal (1 subgoal):\n 1. False", "by auto"], ["proof (state)\nthis:\n  False\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  SN_on {a. case a of (y, z) \\<Rightarrow> g z y} {x}\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  SN_on {(y, z). g z y} {x}\n\ngoal (1 subgoal):\n 1. SN_on {(y, z). g z y} A", "}"], ["proof (state)\nthis:\n  ?x2 \\<in> A \\<Longrightarrow> SN_on {(y, z). g z y} {?x2}\n\ngoal (1 subgoal):\n 1. SN_on {(y, z). g z y} A", "then"], ["proof (chain)\npicking this:\n  ?x2 \\<in> A \\<Longrightarrow> SN_on {(y, z). g z y} {?x2}", "show ?thesis"], ["proof (prove)\nusing this:\n  ?x2 \\<in> A \\<Longrightarrow> SN_on {(y, z). g z y} {?x2}\n\ngoal (1 subgoal):\n 1. SN_on {(y, z). g z y} A", "unfolding SN_on_def"], ["proof (prove)\nusing this:\n  ?x2 \\<in> A \\<Longrightarrow>\n  \\<nexists>f.\n     f 0 \\<in> {?x2} \\<and>\n     (\\<forall>i. (f i, f (Suc i)) \\<in> {(y, z). g z y})\n\ngoal (1 subgoal):\n 1. \\<nexists>f.\n       f 0 \\<in> A \\<and>\n       (\\<forall>i. (f i, f (Suc i)) \\<in> {(y, z). g z y})", "by blast"], ["proof (state)\nthis:\n  SN_on {(y, z). g z y} A\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma SN_on_imp_accp:\n  assumes \"SN_on {(y, z). g z y} A\"\n  shows \"\\<forall>x\\<in>A. Wellfounded.accp g x\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>A. Wellfounded.accp g x", "proof"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x. x \\<in> A \\<Longrightarrow> Wellfounded.accp g x", "fix x"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x. x \\<in> A \\<Longrightarrow> Wellfounded.accp g x", "assume \"x \\<in> A\""], ["proof (state)\nthis:\n  x \\<in> A\n\ngoal (1 subgoal):\n 1. \\<And>x. x \\<in> A \\<Longrightarrow> Wellfounded.accp g x", "with assms"], ["proof (chain)\npicking this:\n  SN_on {(y, z). g z y} A\n  x \\<in> A", "show \"Wellfounded.accp g x\""], ["proof (prove)\nusing this:\n  SN_on {(y, z). g z y} A\n  x \\<in> A\n\ngoal (1 subgoal):\n 1. Wellfounded.accp g x", "proof (induct rule: SN_on_induct)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>t.\n       (\\<And>u.\n           (t, u) \\<in> {(y, z). g z y} \\<Longrightarrow>\n           Wellfounded.accp g u) \\<Longrightarrow>\n       Wellfounded.accp g t", "case (IH x)"], ["proof (state)\nthis:\n  (x, ?u) \\<in> {(y, z). g z y} \\<Longrightarrow> Wellfounded.accp g ?u\n\ngoal (1 subgoal):\n 1. \\<And>t.\n       (\\<And>u.\n           (t, u) \\<in> {(y, z). g z y} \\<Longrightarrow>\n           Wellfounded.accp g u) \\<Longrightarrow>\n       Wellfounded.accp g t", "show ?case"], ["proof (prove)\ngoal (1 subgoal):\n 1. Wellfounded.accp g x", "proof"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>y. g y x \\<Longrightarrow> Wellfounded.accp g y", "fix y"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>y. g y x \\<Longrightarrow> Wellfounded.accp g y", "assume \"g y x\""], ["proof (state)\nthis:\n  g y x\n\ngoal (1 subgoal):\n 1. \\<And>y. g y x \\<Longrightarrow> Wellfounded.accp g y", "with IH"], ["proof (chain)\npicking this:\n  (x, ?u) \\<in> {(y, z). g z y} \\<Longrightarrow> Wellfounded.accp g ?u\n  g y x", "show \"Wellfounded.accp g y\""], ["proof (prove)\nusing this:\n  (x, ?u) \\<in> {(y, z). g z y} \\<Longrightarrow> Wellfounded.accp g ?u\n  g y x\n\ngoal (1 subgoal):\n 1. Wellfounded.accp g y", "by simp"], ["proof (state)\nthis:\n  Wellfounded.accp g y\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  Wellfounded.accp g x\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  Wellfounded.accp g x\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma SN_on_conv_accp:\n  \"SN_on {(y, z). g z y} {x} = Wellfounded.accp g x\""], ["proof (prove)\ngoal (1 subgoal):\n 1. SN_on {(y, z). g z y} {x} = Wellfounded.accp g x", "using SN_on_imp_accp [of g \"{x}\"]\n        accp_imp_SN_on [of \"{x}\" g]"], ["proof (prove)\nusing this:\n  SN_on {(y, z). g z y} {x} \\<Longrightarrow>\n  \\<forall>x\\<in>{x}. Wellfounded.accp g x\n  (\\<And>xa.\n      xa \\<in> {x} \\<Longrightarrow>\n      Wellfounded.accp g xa) \\<Longrightarrow>\n  SN_on {(y, z). g z y} {x}\n\ngoal (1 subgoal):\n 1. SN_on {(y, z). g z y} {x} = Wellfounded.accp g x", "by auto"], ["", "lemma SN_on_conv_acc: \"SN_on {(y, z). (z, y) \\<in> r} {x} \\<longleftrightarrow> x \\<in> Wellfounded.acc r\""], ["proof (prove)\ngoal (1 subgoal):\n 1. SN_on {(y, z). (z, y) \\<in> r} {x} = (x \\<in> Wellfounded.acc r)", "unfolding SN_on_conv_accp accp_acc_eq"], ["proof (prove)\ngoal (1 subgoal):\n 1. (x \\<in> Wellfounded.acc r) = (x \\<in> Wellfounded.acc r)", ".."], ["", "lemma acc_imp_SN_on:\n  assumes \"x \\<in> Wellfounded.acc r\" shows \"SN_on {(y, z). (z, y) \\<in> r} {x}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. SN_on {(y, z). (z, y) \\<in> r} {x}", "using assms"], ["proof (prove)\nusing this:\n  x \\<in> Wellfounded.acc r\n\ngoal (1 subgoal):\n 1. SN_on {(y, z). (z, y) \\<in> r} {x}", "unfolding SN_on_conv_acc"], ["proof (prove)\nusing this:\n  x \\<in> Wellfounded.acc r\n\ngoal (1 subgoal):\n 1. x \\<in> Wellfounded.acc r", "by simp"], ["", "lemma SN_on_imp_acc:\n  assumes \"SN_on {(y, z). (z, y) \\<in> r} {x}\" shows \"x \\<in> Wellfounded.acc r\""], ["proof (prove)\ngoal (1 subgoal):\n 1. x \\<in> Wellfounded.acc r", "using assms"], ["proof (prove)\nusing this:\n  SN_on {(y, z). (z, y) \\<in> r} {x}\n\ngoal (1 subgoal):\n 1. x \\<in> Wellfounded.acc r", "unfolding SN_on_conv_acc"], ["proof (prove)\nusing this:\n  x \\<in> Wellfounded.acc r\n\ngoal (1 subgoal):\n 1. x \\<in> Wellfounded.acc r", "by simp"], ["", "subsection \\<open>Newman's Lemma\\<close>"], ["", "lemma rtrancl_len_E [elim]:\n  assumes \"(x, y) \\<in> r\\<^sup>*\" obtains n where \"(x, y) \\<in> r^^n\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>n.\n        (x, y) \\<in> r ^^ n \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "using rtrancl_imp_UN_relpow [OF assms]"], ["proof (prove)\nusing this:\n  (x, y) \\<in> \\<Union> (range ((^^) r))\n\ngoal (1 subgoal):\n 1. (\\<And>n.\n        (x, y) \\<in> r ^^ n \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by best"], ["", "lemma relpow_Suc_E2' [elim]:\n  assumes \"(x, z) \\<in> A^^Suc n\" obtains y where \"(x, y) \\<in> A\" and \"(y, z) \\<in> A\\<^sup>*\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>y.\n        \\<lbrakk>(x, y) \\<in> A; (y, z) \\<in> A\\<^sup>*\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. (\\<And>y.\n        \\<lbrakk>(x, y) \\<in> A; (y, z) \\<in> A\\<^sup>*\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "assume assm: \"\\<And>y. (x, y) \\<in> A \\<Longrightarrow> (y, z) \\<in> A\\<^sup>* \\<Longrightarrow> thesis\""], ["proof (state)\nthis:\n  \\<lbrakk>(x, ?y) \\<in> A; (?y, z) \\<in> A\\<^sup>*\\<rbrakk>\n  \\<Longrightarrow> thesis\n\ngoal (1 subgoal):\n 1. (\\<And>y.\n        \\<lbrakk>(x, y) \\<in> A; (y, z) \\<in> A\\<^sup>*\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "from relpow_Suc_E2 [OF assms]"], ["proof (chain)\npicking this:\n  (\\<And>y.\n      \\<lbrakk>(x, y) \\<in> A; (y, z) \\<in> A ^^ n\\<rbrakk>\n      \\<Longrightarrow> ?P) \\<Longrightarrow>\n  ?P", "obtain y where \"(x, y) \\<in> A\" and \"(y, z) \\<in> A^^n\""], ["proof (prove)\nusing this:\n  (\\<And>y.\n      \\<lbrakk>(x, y) \\<in> A; (y, z) \\<in> A ^^ n\\<rbrakk>\n      \\<Longrightarrow> ?P) \\<Longrightarrow>\n  ?P\n\ngoal (1 subgoal):\n 1. (\\<And>y.\n        \\<lbrakk>(x, y) \\<in> A; (y, z) \\<in> A ^^ n\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  (x, y) \\<in> A\n  (y, z) \\<in> A ^^ n\n\ngoal (1 subgoal):\n 1. (\\<And>y.\n        \\<lbrakk>(x, y) \\<in> A; (y, z) \\<in> A\\<^sup>*\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "then"], ["proof (chain)\npicking this:\n  (x, y) \\<in> A\n  (y, z) \\<in> A ^^ n", "have \"(y, z) \\<in> A\\<^sup>*\""], ["proof (prove)\nusing this:\n  (x, y) \\<in> A\n  (y, z) \\<in> A ^^ n\n\ngoal (1 subgoal):\n 1. (y, z) \\<in> A\\<^sup>*", "using (*FIXME*) relpow_imp_rtrancl"], ["proof (prove)\nusing this:\n  (x, y) \\<in> A\n  (y, z) \\<in> A ^^ n\n  ?p \\<in> ?R ^^ ?n \\<Longrightarrow> ?p \\<in> ?R\\<^sup>*\n\ngoal (1 subgoal):\n 1. (y, z) \\<in> A\\<^sup>*", "by auto"], ["proof (state)\nthis:\n  (y, z) \\<in> A\\<^sup>*\n\ngoal (1 subgoal):\n 1. (\\<And>y.\n        \\<lbrakk>(x, y) \\<in> A; (y, z) \\<in> A\\<^sup>*\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "from assm [OF \\<open>(x, y) \\<in> A\\<close> this]"], ["proof (chain)\npicking this:\n  thesis", "show thesis"], ["proof (prove)\nusing this:\n  thesis\n\ngoal (1 subgoal):\n 1. thesis", "."], ["proof (state)\nthis:\n  thesis\n\ngoal:\nNo subgoals!", "qed"], ["", "lemmas SN_on_induct' [consumes 1, case_names IH] = SN_on_induct [OF _ singletonI]"], ["", "lemma Newman_local:\n  assumes \"SN_on r X\" and WCR: \"WCR_on r {x. SN_on r {x}}\"\n  shows \"CR_on r X\""], ["proof (prove)\ngoal (1 subgoal):\n 1. CR_on r X", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. CR_on r X", "{"], ["proof (state)\ngoal (1 subgoal):\n 1. CR_on r X", "fix x"], ["proof (state)\ngoal (1 subgoal):\n 1. CR_on r X", "assume \"x \\<in> X\""], ["proof (state)\nthis:\n  x \\<in> X\n\ngoal (1 subgoal):\n 1. CR_on r X", "with assms"], ["proof (chain)\npicking this:\n  SN_on r X\n  WCR_on r {x. SN_on r {x}}\n  x \\<in> X", "have \"SN_on r {x}\""], ["proof (prove)\nusing this:\n  SN_on r X\n  WCR_on r {x. SN_on r {x}}\n  x \\<in> X\n\ngoal (1 subgoal):\n 1. SN_on r {x}", "unfolding SN_on_def"], ["proof (prove)\nusing this:\n  \\<nexists>f. f 0 \\<in> X \\<and> (\\<forall>i. (f i, f (Suc i)) \\<in> r)\n  WCR_on r\n   {x. \\<nexists>f.\n          f 0 \\<in> {x} \\<and> (\\<forall>i. (f i, f (Suc i)) \\<in> r)}\n  x \\<in> X\n\ngoal (1 subgoal):\n 1. \\<nexists>f. f 0 \\<in> {x} \\<and> (\\<forall>i. (f i, f (Suc i)) \\<in> r)", "by auto"], ["proof (state)\nthis:\n  SN_on r {x}\n\ngoal (1 subgoal):\n 1. CR_on r X", "with this"], ["proof (chain)\npicking this:\n  SN_on r {x}\n  SN_on r {x}", "have \"CR_on r {x}\""], ["proof (prove)\nusing this:\n  SN_on r {x}\n  SN_on r {x}\n\ngoal (1 subgoal):\n 1. CR_on r {x}", "proof (induct rule: SN_on_induct')"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>t.\n       \\<lbrakk>\\<And>u.\n                   \\<lbrakk>(t, u) \\<in> r; SN_on r {u}\\<rbrakk>\n                   \\<Longrightarrow> CR_on r {u};\n        SN_on r {t}\\<rbrakk>\n       \\<Longrightarrow> CR_on r {t}", "case (IH x)"], ["proof (state)\nthis:\n  \\<lbrakk>(x, ?u) \\<in> r; SN_on r {?u}\\<rbrakk>\n  \\<Longrightarrow> CR_on r {?u}\n  SN_on r {x}\n\ngoal (1 subgoal):\n 1. \\<And>t.\n       \\<lbrakk>\\<And>u.\n                   \\<lbrakk>(t, u) \\<in> r; SN_on r {u}\\<rbrakk>\n                   \\<Longrightarrow> CR_on r {u};\n        SN_on r {t}\\<rbrakk>\n       \\<Longrightarrow> CR_on r {t}", "show ?case"], ["proof (prove)\ngoal (1 subgoal):\n 1. CR_on r {x}", "proof"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>b c.\n       \\<lbrakk>(x, b) \\<in> r\\<^sup>*; (x, c) \\<in> r\\<^sup>*\\<rbrakk>\n       \\<Longrightarrow> (b, c) \\<in> r\\<^sup>\\<down>", "fix y z"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>b c.\n       \\<lbrakk>(x, b) \\<in> r\\<^sup>*; (x, c) \\<in> r\\<^sup>*\\<rbrakk>\n       \\<Longrightarrow> (b, c) \\<in> r\\<^sup>\\<down>", "assume \"(x, y) \\<in> r\\<^sup>*\" and \"(x, z) \\<in> r\\<^sup>*\""], ["proof (state)\nthis:\n  (x, y) \\<in> r\\<^sup>*\n  (x, z) \\<in> r\\<^sup>*\n\ngoal (1 subgoal):\n 1. \\<And>b c.\n       \\<lbrakk>(x, b) \\<in> r\\<^sup>*; (x, c) \\<in> r\\<^sup>*\\<rbrakk>\n       \\<Longrightarrow> (b, c) \\<in> r\\<^sup>\\<down>", "from \\<open>(x, y) \\<in> r\\<^sup>*\\<close>"], ["proof (chain)\npicking this:\n  (x, y) \\<in> r\\<^sup>*", "obtain m where \"(x, y) \\<in> r^^m\""], ["proof (prove)\nusing this:\n  (x, y) \\<in> r\\<^sup>*\n\ngoal (1 subgoal):\n 1. (\\<And>m.\n        (x, y) \\<in> r ^^ m \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", ".."], ["proof (state)\nthis:\n  (x, y) \\<in> r ^^ m\n\ngoal (1 subgoal):\n 1. \\<And>b c.\n       \\<lbrakk>(x, b) \\<in> r\\<^sup>*; (x, c) \\<in> r\\<^sup>*\\<rbrakk>\n       \\<Longrightarrow> (b, c) \\<in> r\\<^sup>\\<down>", "from \\<open>(x, z) \\<in> r\\<^sup>*\\<close>"], ["proof (chain)\npicking this:\n  (x, z) \\<in> r\\<^sup>*", "obtain n where \"(x, z) \\<in> r^^n\""], ["proof (prove)\nusing this:\n  (x, z) \\<in> r\\<^sup>*\n\ngoal (1 subgoal):\n 1. (\\<And>n.\n        (x, z) \\<in> r ^^ n \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", ".."], ["proof (state)\nthis:\n  (x, z) \\<in> r ^^ n\n\ngoal (1 subgoal):\n 1. \\<And>b c.\n       \\<lbrakk>(x, b) \\<in> r\\<^sup>*; (x, c) \\<in> r\\<^sup>*\\<rbrakk>\n       \\<Longrightarrow> (b, c) \\<in> r\\<^sup>\\<down>", "show \"(y, z) \\<in> r\\<^sup>\\<down>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (y, z) \\<in> r\\<^sup>\\<down>", "proof (cases n)"], ["proof (state)\ngoal (2 subgoals):\n 1. n = 0 \\<Longrightarrow> (y, z) \\<in> r\\<^sup>\\<down>\n 2. \\<And>nat. n = Suc nat \\<Longrightarrow> (y, z) \\<in> r\\<^sup>\\<down>", "case 0"], ["proof (state)\nthis:\n  n = 0\n\ngoal (2 subgoals):\n 1. n = 0 \\<Longrightarrow> (y, z) \\<in> r\\<^sup>\\<down>\n 2. \\<And>nat. n = Suc nat \\<Longrightarrow> (y, z) \\<in> r\\<^sup>\\<down>", "from \\<open>(x, z) \\<in> r^^n\\<close>"], ["proof (chain)\npicking this:\n  (x, z) \\<in> r ^^ n", "have eq: \"x = z\""], ["proof (prove)\nusing this:\n  (x, z) \\<in> r ^^ n\n\ngoal (1 subgoal):\n 1. x = z", "by (simp add: 0)"], ["proof (state)\nthis:\n  x = z\n\ngoal (2 subgoals):\n 1. n = 0 \\<Longrightarrow> (y, z) \\<in> r\\<^sup>\\<down>\n 2. \\<And>nat. n = Suc nat \\<Longrightarrow> (y, z) \\<in> r\\<^sup>\\<down>", "from \\<open>(x, y) \\<in> r\\<^sup>*\\<close>"], ["proof (chain)\npicking this:\n  (x, y) \\<in> r\\<^sup>*", "show ?thesis"], ["proof (prove)\nusing this:\n  (x, y) \\<in> r\\<^sup>*\n\ngoal (1 subgoal):\n 1. (y, z) \\<in> r\\<^sup>\\<down>", "unfolding eq"], ["proof (prove)\nusing this:\n  (z, y) \\<in> r\\<^sup>*\n\ngoal (1 subgoal):\n 1. (y, z) \\<in> r\\<^sup>\\<down>", ".."], ["proof (state)\nthis:\n  (y, z) \\<in> r\\<^sup>\\<down>\n\ngoal (1 subgoal):\n 1. \\<And>nat. n = Suc nat \\<Longrightarrow> (y, z) \\<in> r\\<^sup>\\<down>", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>nat. n = Suc nat \\<Longrightarrow> (y, z) \\<in> r\\<^sup>\\<down>", "case (Suc n')"], ["proof (state)\nthis:\n  n = Suc n'\n\ngoal (1 subgoal):\n 1. \\<And>nat. n = Suc nat \\<Longrightarrow> (y, z) \\<in> r\\<^sup>\\<down>", "from \\<open>(x, z) \\<in> r^^n\\<close> [unfolded Suc]"], ["proof (chain)\npicking this:\n  (x, z) \\<in> r ^^ Suc n'", "obtain t where \"(x, t) \\<in> r\" and \"(t, z) \\<in> r\\<^sup>*\""], ["proof (prove)\nusing this:\n  (x, z) \\<in> r ^^ Suc n'\n\ngoal (1 subgoal):\n 1. (\\<And>t.\n        \\<lbrakk>(x, t) \\<in> r; (t, z) \\<in> r\\<^sup>*\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", ".."], ["proof (state)\nthis:\n  (x, t) \\<in> r\n  (t, z) \\<in> r\\<^sup>*\n\ngoal (1 subgoal):\n 1. \\<And>nat. n = Suc nat \\<Longrightarrow> (y, z) \\<in> r\\<^sup>\\<down>", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. (y, z) \\<in> r\\<^sup>\\<down>", "proof (cases m)"], ["proof (state)\ngoal (2 subgoals):\n 1. m = 0 \\<Longrightarrow> (y, z) \\<in> r\\<^sup>\\<down>\n 2. \\<And>nat. m = Suc nat \\<Longrightarrow> (y, z) \\<in> r\\<^sup>\\<down>", "case 0"], ["proof (state)\nthis:\n  m = 0\n\ngoal (2 subgoals):\n 1. m = 0 \\<Longrightarrow> (y, z) \\<in> r\\<^sup>\\<down>\n 2. \\<And>nat. m = Suc nat \\<Longrightarrow> (y, z) \\<in> r\\<^sup>\\<down>", "from \\<open>(x, y) \\<in> r^^m\\<close>"], ["proof (chain)\npicking this:\n  (x, y) \\<in> r ^^ m", "have eq: \"x = y\""], ["proof (prove)\nusing this:\n  (x, y) \\<in> r ^^ m\n\ngoal (1 subgoal):\n 1. x = y", "by (simp add: 0)"], ["proof (state)\nthis:\n  x = y\n\ngoal (2 subgoals):\n 1. m = 0 \\<Longrightarrow> (y, z) \\<in> r\\<^sup>\\<down>\n 2. \\<And>nat. m = Suc nat \\<Longrightarrow> (y, z) \\<in> r\\<^sup>\\<down>", "from \\<open>(x, z) \\<in> r\\<^sup>*\\<close>"], ["proof (chain)\npicking this:\n  (x, z) \\<in> r\\<^sup>*", "show ?thesis"], ["proof (prove)\nusing this:\n  (x, z) \\<in> r\\<^sup>*\n\ngoal (1 subgoal):\n 1. (y, z) \\<in> r\\<^sup>\\<down>", "unfolding eq"], ["proof (prove)\nusing this:\n  (y, z) \\<in> r\\<^sup>*\n\ngoal (1 subgoal):\n 1. (y, z) \\<in> r\\<^sup>\\<down>", ".."], ["proof (state)\nthis:\n  (y, z) \\<in> r\\<^sup>\\<down>\n\ngoal (1 subgoal):\n 1. \\<And>nat. m = Suc nat \\<Longrightarrow> (y, z) \\<in> r\\<^sup>\\<down>", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>nat. m = Suc nat \\<Longrightarrow> (y, z) \\<in> r\\<^sup>\\<down>", "case (Suc m')"], ["proof (state)\nthis:\n  m = Suc m'\n\ngoal (1 subgoal):\n 1. \\<And>nat. m = Suc nat \\<Longrightarrow> (y, z) \\<in> r\\<^sup>\\<down>", "from \\<open>(x, y) \\<in> r^^m\\<close> [unfolded Suc]"], ["proof (chain)\npicking this:\n  (x, y) \\<in> r ^^ Suc m'", "obtain s where \"(x, s) \\<in> r\" and \"(s, y) \\<in> r\\<^sup>*\""], ["proof (prove)\nusing this:\n  (x, y) \\<in> r ^^ Suc m'\n\ngoal (1 subgoal):\n 1. (\\<And>s.\n        \\<lbrakk>(x, s) \\<in> r; (s, y) \\<in> r\\<^sup>*\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", ".."], ["proof (state)\nthis:\n  (x, s) \\<in> r\n  (s, y) \\<in> r\\<^sup>*\n\ngoal (1 subgoal):\n 1. \\<And>nat. m = Suc nat \\<Longrightarrow> (y, z) \\<in> r\\<^sup>\\<down>", "from WCR IH(2)"], ["proof (chain)\npicking this:\n  WCR_on r {x. SN_on r {x}}\n  SN_on r {x}", "have \"WCR_on r {x}\""], ["proof (prove)\nusing this:\n  WCR_on r {x. SN_on r {x}}\n  SN_on r {x}\n\ngoal (1 subgoal):\n 1. WCR_on r {x}", "unfolding WCR_on_def"], ["proof (prove)\nusing this:\n  \\<forall>a\\<in>{x. SN_on r {x}}.\n     \\<forall>b c.\n        (a, b) \\<in> r \\<and> (a, c) \\<in> r \\<longrightarrow>\n        (b, c) \\<in> r\\<^sup>\\<down>\n  SN_on r {x}\n\ngoal (1 subgoal):\n 1. \\<forall>a\\<in>{x}.\n       \\<forall>b c.\n          (a, b) \\<in> r \\<and> (a, c) \\<in> r \\<longrightarrow>\n          (b, c) \\<in> r\\<^sup>\\<down>", "by auto"], ["proof (state)\nthis:\n  WCR_on r {x}\n\ngoal (1 subgoal):\n 1. \\<And>nat. m = Suc nat \\<Longrightarrow> (y, z) \\<in> r\\<^sup>\\<down>", "with \\<open>(x, s) \\<in> r\\<close> and \\<open>(x, t) \\<in> r\\<close>"], ["proof (chain)\npicking this:\n  (x, s) \\<in> r\n  (x, t) \\<in> r\n  WCR_on r {x}", "have \"(s, t) \\<in> r\\<^sup>\\<down>\""], ["proof (prove)\nusing this:\n  (x, s) \\<in> r\n  (x, t) \\<in> r\n  WCR_on r {x}\n\ngoal (1 subgoal):\n 1. (s, t) \\<in> r\\<^sup>\\<down>", "by auto"], ["proof (state)\nthis:\n  (s, t) \\<in> r\\<^sup>\\<down>\n\ngoal (1 subgoal):\n 1. \\<And>nat. m = Suc nat \\<Longrightarrow> (y, z) \\<in> r\\<^sup>\\<down>", "then"], ["proof (chain)\npicking this:\n  (s, t) \\<in> r\\<^sup>\\<down>", "obtain u where \"(s, u) \\<in> r\\<^sup>*\" and \"(t, u) \\<in> r\\<^sup>*\""], ["proof (prove)\nusing this:\n  (s, t) \\<in> r\\<^sup>\\<down>\n\ngoal (1 subgoal):\n 1. (\\<And>u.\n        \\<lbrakk>(s, u) \\<in> r\\<^sup>*; (t, u) \\<in> r\\<^sup>*\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", ".."], ["proof (state)\nthis:\n  (s, u) \\<in> r\\<^sup>*\n  (t, u) \\<in> r\\<^sup>*\n\ngoal (1 subgoal):\n 1. \\<And>nat. m = Suc nat \\<Longrightarrow> (y, z) \\<in> r\\<^sup>\\<down>", "from \\<open>(x, s) \\<in> r\\<close> IH(2)"], ["proof (chain)\npicking this:\n  (x, s) \\<in> r\n  SN_on r {x}", "have \"SN_on r {s}\""], ["proof (prove)\nusing this:\n  (x, s) \\<in> r\n  SN_on r {x}\n\ngoal (1 subgoal):\n 1. SN_on r {s}", "by (rule step_preserves_SN_on)"], ["proof (state)\nthis:\n  SN_on r {s}\n\ngoal (1 subgoal):\n 1. \\<And>nat. m = Suc nat \\<Longrightarrow> (y, z) \\<in> r\\<^sup>\\<down>", "from IH(1)[OF \\<open>(x, s) \\<in> r\\<close> this]"], ["proof (chain)\npicking this:\n  CR_on r {s}", "have \"CR_on r {s}\""], ["proof (prove)\nusing this:\n  CR_on r {s}\n\ngoal (1 subgoal):\n 1. CR_on r {s}", "."], ["proof (state)\nthis:\n  CR_on r {s}\n\ngoal (1 subgoal):\n 1. \\<And>nat. m = Suc nat \\<Longrightarrow> (y, z) \\<in> r\\<^sup>\\<down>", "from this and \\<open>(s, u) \\<in> r\\<^sup>*\\<close> and \\<open>(s, y) \\<in> r\\<^sup>*\\<close>"], ["proof (chain)\npicking this:\n  CR_on r {s}\n  (s, u) \\<in> r\\<^sup>*\n  (s, y) \\<in> r\\<^sup>*", "have \"(u, y) \\<in> r\\<^sup>\\<down>\""], ["proof (prove)\nusing this:\n  CR_on r {s}\n  (s, u) \\<in> r\\<^sup>*\n  (s, y) \\<in> r\\<^sup>*\n\ngoal (1 subgoal):\n 1. (u, y) \\<in> r\\<^sup>\\<down>", "by auto"], ["proof (state)\nthis:\n  (u, y) \\<in> r\\<^sup>\\<down>\n\ngoal (1 subgoal):\n 1. \\<And>nat. m = Suc nat \\<Longrightarrow> (y, z) \\<in> r\\<^sup>\\<down>", "then"], ["proof (chain)\npicking this:\n  (u, y) \\<in> r\\<^sup>\\<down>", "obtain v where \"(u, v) \\<in> r\\<^sup>*\" and \"(y, v) \\<in> r\\<^sup>*\""], ["proof (prove)\nusing this:\n  (u, y) \\<in> r\\<^sup>\\<down>\n\ngoal (1 subgoal):\n 1. (\\<And>v.\n        \\<lbrakk>(u, v) \\<in> r\\<^sup>*; (y, v) \\<in> r\\<^sup>*\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", ".."], ["proof (state)\nthis:\n  (u, v) \\<in> r\\<^sup>*\n  (y, v) \\<in> r\\<^sup>*\n\ngoal (1 subgoal):\n 1. \\<And>nat. m = Suc nat \\<Longrightarrow> (y, z) \\<in> r\\<^sup>\\<down>", "from \\<open>(x, t) \\<in> r\\<close> IH(2)"], ["proof (chain)\npicking this:\n  (x, t) \\<in> r\n  SN_on r {x}", "have \"SN_on r {t}\""], ["proof (prove)\nusing this:\n  (x, t) \\<in> r\n  SN_on r {x}\n\ngoal (1 subgoal):\n 1. SN_on r {t}", "by (rule step_preserves_SN_on)"], ["proof (state)\nthis:\n  SN_on r {t}\n\ngoal (1 subgoal):\n 1. \\<And>nat. m = Suc nat \\<Longrightarrow> (y, z) \\<in> r\\<^sup>\\<down>", "from IH(1)[OF \\<open>(x, t) \\<in> r\\<close> this]"], ["proof (chain)\npicking this:\n  CR_on r {t}", "have \"CR_on r {t}\""], ["proof (prove)\nusing this:\n  CR_on r {t}\n\ngoal (1 subgoal):\n 1. CR_on r {t}", "."], ["proof (state)\nthis:\n  CR_on r {t}\n\ngoal (1 subgoal):\n 1. \\<And>nat. m = Suc nat \\<Longrightarrow> (y, z) \\<in> r\\<^sup>\\<down>", "moreover"], ["proof (state)\nthis:\n  CR_on r {t}\n\ngoal (1 subgoal):\n 1. \\<And>nat. m = Suc nat \\<Longrightarrow> (y, z) \\<in> r\\<^sup>\\<down>", "from \\<open>(t, u) \\<in> r\\<^sup>*\\<close> and \\<open>(u, v) \\<in> r\\<^sup>*\\<close>"], ["proof (chain)\npicking this:\n  (t, u) \\<in> r\\<^sup>*\n  (u, v) \\<in> r\\<^sup>*", "have \"(t, v) \\<in> r\\<^sup>*\""], ["proof (prove)\nusing this:\n  (t, u) \\<in> r\\<^sup>*\n  (u, v) \\<in> r\\<^sup>*\n\ngoal (1 subgoal):\n 1. (t, v) \\<in> r\\<^sup>*", "by auto"], ["proof (state)\nthis:\n  (t, v) \\<in> r\\<^sup>*\n\ngoal (1 subgoal):\n 1. \\<And>nat. m = Suc nat \\<Longrightarrow> (y, z) \\<in> r\\<^sup>\\<down>", "ultimately"], ["proof (chain)\npicking this:\n  CR_on r {t}\n  (t, v) \\<in> r\\<^sup>*", "have \"(z, v) \\<in> r\\<^sup>\\<down>\""], ["proof (prove)\nusing this:\n  CR_on r {t}\n  (t, v) \\<in> r\\<^sup>*\n\ngoal (1 subgoal):\n 1. (z, v) \\<in> r\\<^sup>\\<down>", "using \\<open>(t, z) \\<in> r\\<^sup>*\\<close>"], ["proof (prove)\nusing this:\n  CR_on r {t}\n  (t, v) \\<in> r\\<^sup>*\n  (t, z) \\<in> r\\<^sup>*\n\ngoal (1 subgoal):\n 1. (z, v) \\<in> r\\<^sup>\\<down>", "by auto"], ["proof (state)\nthis:\n  (z, v) \\<in> r\\<^sup>\\<down>\n\ngoal (1 subgoal):\n 1. \\<And>nat. m = Suc nat \\<Longrightarrow> (y, z) \\<in> r\\<^sup>\\<down>", "then"], ["proof (chain)\npicking this:\n  (z, v) \\<in> r\\<^sup>\\<down>", "obtain w where \"(z, w) \\<in> r\\<^sup>*\" and \"(v, w) \\<in> r\\<^sup>*\""], ["proof (prove)\nusing this:\n  (z, v) \\<in> r\\<^sup>\\<down>\n\ngoal (1 subgoal):\n 1. (\\<And>w.\n        \\<lbrakk>(z, w) \\<in> r\\<^sup>*; (v, w) \\<in> r\\<^sup>*\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", ".."], ["proof (state)\nthis:\n  (z, w) \\<in> r\\<^sup>*\n  (v, w) \\<in> r\\<^sup>*\n\ngoal (1 subgoal):\n 1. \\<And>nat. m = Suc nat \\<Longrightarrow> (y, z) \\<in> r\\<^sup>\\<down>", "from \\<open>(y, v) \\<in> r\\<^sup>*\\<close> and \\<open>(v, w) \\<in> r\\<^sup>*\\<close>"], ["proof (chain)\npicking this:\n  (y, v) \\<in> r\\<^sup>*\n  (v, w) \\<in> r\\<^sup>*", "have \"(y, w) \\<in> r\\<^sup>*\""], ["proof (prove)\nusing this:\n  (y, v) \\<in> r\\<^sup>*\n  (v, w) \\<in> r\\<^sup>*\n\ngoal (1 subgoal):\n 1. (y, w) \\<in> r\\<^sup>*", "by auto"], ["proof (state)\nthis:\n  (y, w) \\<in> r\\<^sup>*\n\ngoal (1 subgoal):\n 1. \\<And>nat. m = Suc nat \\<Longrightarrow> (y, z) \\<in> r\\<^sup>\\<down>", "with \\<open>(z, w) \\<in> r\\<^sup>*\\<close>"], ["proof (chain)\npicking this:\n  (z, w) \\<in> r\\<^sup>*\n  (y, w) \\<in> r\\<^sup>*", "show ?thesis"], ["proof (prove)\nusing this:\n  (z, w) \\<in> r\\<^sup>*\n  (y, w) \\<in> r\\<^sup>*\n\ngoal (1 subgoal):\n 1. (y, z) \\<in> r\\<^sup>\\<down>", "by auto"], ["proof (state)\nthis:\n  (y, z) \\<in> r\\<^sup>\\<down>\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  (y, z) \\<in> r\\<^sup>\\<down>\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  (y, z) \\<in> r\\<^sup>\\<down>\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  CR_on r {x}\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  CR_on r {x}\n\ngoal (1 subgoal):\n 1. CR_on r X", "}"], ["proof (state)\nthis:\n  ?x2 \\<in> X \\<Longrightarrow> CR_on r {?x2}\n\ngoal (1 subgoal):\n 1. CR_on r X", "then"], ["proof (chain)\npicking this:\n  ?x2 \\<in> X \\<Longrightarrow> CR_on r {?x2}", "show ?thesis"], ["proof (prove)\nusing this:\n  ?x2 \\<in> X \\<Longrightarrow> CR_on r {?x2}\n\ngoal (1 subgoal):\n 1. CR_on r X", "unfolding CR_on_def"], ["proof (prove)\nusing this:\n  ?x2 \\<in> X \\<Longrightarrow>\n  \\<forall>a\\<in>{?x2}.\n     \\<forall>b c.\n        (a, b) \\<in> r\\<^sup>* \\<and>\n        (a, c) \\<in> r\\<^sup>* \\<longrightarrow>\n        (b, c) \\<in> r\\<^sup>\\<down>\n\ngoal (1 subgoal):\n 1. \\<forall>a\\<in>X.\n       \\<forall>b c.\n          (a, b) \\<in> r\\<^sup>* \\<and>\n          (a, c) \\<in> r\\<^sup>* \\<longrightarrow>\n          (b, c) \\<in> r\\<^sup>\\<down>", "by blast"], ["proof (state)\nthis:\n  CR_on r X\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma Newman: \"SN r \\<Longrightarrow> WCR r \\<Longrightarrow> CR r\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>SN r; WCR r\\<rbrakk> \\<Longrightarrow> CR r", "using Newman_local [of r UNIV]"], ["proof (prove)\nusing this:\n  \\<lbrakk>SN r; WCR_on r {x. SN_on r {x}}\\<rbrakk> \\<Longrightarrow> CR r\n\ngoal (1 subgoal):\n 1. \\<lbrakk>SN r; WCR r\\<rbrakk> \\<Longrightarrow> CR r", "unfolding WCR_on_def"], ["proof (prove)\nusing this:\n  \\<lbrakk>SN r;\n   \\<forall>a\\<in>{x. SN_on r {x}}.\n      \\<forall>b c.\n         (a, b) \\<in> r \\<and> (a, c) \\<in> r \\<longrightarrow>\n         (b, c) \\<in> r\\<^sup>\\<down>\\<rbrakk>\n  \\<Longrightarrow> CR r\n\ngoal (1 subgoal):\n 1. \\<lbrakk>SN r;\n     \\<forall>a\\<in>UNIV.\n        \\<forall>b c.\n           (a, b) \\<in> r \\<and> (a, c) \\<in> r \\<longrightarrow>\n           (b, c) \\<in> r\\<^sup>\\<down>\\<rbrakk>\n    \\<Longrightarrow> CR r", "by auto"], ["", "lemma Image_SN_on:\n  assumes \"SN_on r (r `` A)\"\n  shows \"SN_on r A\""], ["proof (prove)\ngoal (1 subgoal):\n 1. SN_on r A", "proof"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>f.\n       \\<lbrakk>f 0 \\<in> A; \\<forall>i. (f i, f (Suc i)) \\<in> r\\<rbrakk>\n       \\<Longrightarrow> False", "fix f"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>f.\n       \\<lbrakk>f 0 \\<in> A; \\<forall>i. (f i, f (Suc i)) \\<in> r\\<rbrakk>\n       \\<Longrightarrow> False", "assume \"f 0 \\<in> A\" and chain: \"chain r f\""], ["proof (state)\nthis:\n  f 0 \\<in> A\n  \\<forall>i. (f i, f (Suc i)) \\<in> r\n\ngoal (1 subgoal):\n 1. \\<And>f.\n       \\<lbrakk>f 0 \\<in> A; \\<forall>i. (f i, f (Suc i)) \\<in> r\\<rbrakk>\n       \\<Longrightarrow> False", "then"], ["proof (chain)\npicking this:\n  f 0 \\<in> A\n  \\<forall>i. (f i, f (Suc i)) \\<in> r", "have \"f (Suc 0) \\<in> r `` A\""], ["proof (prove)\nusing this:\n  f 0 \\<in> A\n  \\<forall>i. (f i, f (Suc i)) \\<in> r\n\ngoal (1 subgoal):\n 1. f (Suc 0) \\<in> r `` A", "by auto"], ["proof (state)\nthis:\n  f (Suc 0) \\<in> r `` A\n\ngoal (1 subgoal):\n 1. \\<And>f.\n       \\<lbrakk>f 0 \\<in> A; \\<forall>i. (f i, f (Suc i)) \\<in> r\\<rbrakk>\n       \\<Longrightarrow> False", "with assms"], ["proof (chain)\npicking this:\n  SN_on r (r `` A)\n  f (Suc 0) \\<in> r `` A", "have \"SN_on r {f (Suc 0)}\""], ["proof (prove)\nusing this:\n  SN_on r (r `` A)\n  f (Suc 0) \\<in> r `` A\n\ngoal (1 subgoal):\n 1. SN_on r {f (Suc 0)}", "by (auto simp add: \\<open>f 0 \\<in> A\\<close> SN_defs)"], ["proof (state)\nthis:\n  SN_on r {f (Suc 0)}\n\ngoal (1 subgoal):\n 1. \\<And>f.\n       \\<lbrakk>f 0 \\<in> A; \\<forall>i. (f i, f (Suc i)) \\<in> r\\<rbrakk>\n       \\<Longrightarrow> False", "moreover"], ["proof (state)\nthis:\n  SN_on r {f (Suc 0)}\n\ngoal (1 subgoal):\n 1. \\<And>f.\n       \\<lbrakk>f 0 \\<in> A; \\<forall>i. (f i, f (Suc i)) \\<in> r\\<rbrakk>\n       \\<Longrightarrow> False", "have \"\\<not> SN_on r {f (Suc 0)}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<not> SN_on r {f (Suc 0)}", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<not> SN_on r {f (Suc 0)}", "have \"f (Suc 0) \\<in> {f (Suc 0)}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. f (Suc 0) \\<in> {f (Suc 0)}", "by simp"], ["proof (state)\nthis:\n  f (Suc 0) \\<in> {f (Suc 0)}\n\ngoal (1 subgoal):\n 1. \\<not> SN_on r {f (Suc 0)}", "moreover"], ["proof (state)\nthis:\n  f (Suc 0) \\<in> {f (Suc 0)}\n\ngoal (1 subgoal):\n 1. \\<not> SN_on r {f (Suc 0)}", "from chain"], ["proof (chain)\npicking this:\n  \\<forall>i. (f i, f (Suc i)) \\<in> r", "have \"chain r (f \\<circ> Suc)\""], ["proof (prove)\nusing this:\n  \\<forall>i. (f i, f (Suc i)) \\<in> r\n\ngoal (1 subgoal):\n 1. \\<forall>i. ((f \\<circ> Suc) i, (f \\<circ> Suc) (Suc i)) \\<in> r", "by auto"], ["proof (state)\nthis:\n  \\<forall>i. ((f \\<circ> Suc) i, (f \\<circ> Suc) (Suc i)) \\<in> r\n\ngoal (1 subgoal):\n 1. \\<not> SN_on r {f (Suc 0)}", "ultimately"], ["proof (chain)\npicking this:\n  f (Suc 0) \\<in> {f (Suc 0)}\n  \\<forall>i. ((f \\<circ> Suc) i, (f \\<circ> Suc) (Suc i)) \\<in> r", "show ?thesis"], ["proof (prove)\nusing this:\n  f (Suc 0) \\<in> {f (Suc 0)}\n  \\<forall>i. ((f \\<circ> Suc) i, (f \\<circ> Suc) (Suc i)) \\<in> r\n\ngoal (1 subgoal):\n 1. \\<not> SN_on r {f (Suc 0)}", "by auto"], ["proof (state)\nthis:\n  \\<not> SN_on r {f (Suc 0)}\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<not> SN_on r {f (Suc 0)}\n\ngoal (1 subgoal):\n 1. \\<And>f.\n       \\<lbrakk>f 0 \\<in> A; \\<forall>i. (f i, f (Suc i)) \\<in> r\\<rbrakk>\n       \\<Longrightarrow> False", "ultimately"], ["proof (chain)\npicking this:\n  SN_on r {f (Suc 0)}\n  \\<not> SN_on r {f (Suc 0)}", "show False"], ["proof (prove)\nusing this:\n  SN_on r {f (Suc 0)}\n  \\<not> SN_on r {f (Suc 0)}\n\ngoal (1 subgoal):\n 1. False", "by simp"], ["proof (state)\nthis:\n  False\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma SN_on_Image_conv: \"SN_on r (r `` A) = SN_on r A\""], ["proof (prove)\ngoal (1 subgoal):\n 1. SN_on r (r `` A) = SN_on r A", "using SN_on_Image and Image_SN_on"], ["proof (prove)\nusing this:\n  SN_on ?r ?A \\<Longrightarrow> SN_on ?r (?r `` ?A)\n  SN_on ?r (?r `` ?A) \\<Longrightarrow> SN_on ?r ?A\n\ngoal (1 subgoal):\n 1. SN_on r (r `` A) = SN_on r A", "by blast"], ["", "text \\<open>If all successors are terminating, then the current element is also terminating.\\<close>"], ["", "lemma step_reflects_SN_on:\n  assumes \"(\\<And>b. (a, b) \\<in> r \\<Longrightarrow> SN_on r {b})\"\n  shows \"SN_on r {a}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. SN_on r {a}", "using assms and Image_SN_on [of r \"{a}\"]"], ["proof (prove)\nusing this:\n  (a, ?b) \\<in> r \\<Longrightarrow> SN_on r {?b}\n  SN_on r (r `` {a}) \\<Longrightarrow> SN_on r {a}\n\ngoal (1 subgoal):\n 1. SN_on r {a}", "by (auto simp: SN_defs)"], ["", "lemma SN_on_all_reducts_SN_on_conv:\n  \"SN_on r {a} = (\\<forall>b. (a, b) \\<in> r \\<longrightarrow> SN_on r {b})\""], ["proof (prove)\ngoal (1 subgoal):\n 1. SN_on r {a} = (\\<forall>b. (a, b) \\<in> r \\<longrightarrow> SN_on r {b})", "using SN_on_Image_conv [of r \"{a}\"]"], ["proof (prove)\nusing this:\n  SN_on r (r `` {a}) = SN_on r {a}\n\ngoal (1 subgoal):\n 1. SN_on r {a} = (\\<forall>b. (a, b) \\<in> r \\<longrightarrow> SN_on r {b})", "by (auto simp: SN_defs)"], ["", "lemma SN_imp_SN_trancl: \"SN R \\<Longrightarrow> SN (R\\<^sup>+)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. SN R \\<Longrightarrow> SN (R\\<^sup>+)", "unfolding SN_iff_wf"], ["proof (prove)\ngoal (1 subgoal):\n 1. wf (R\\<inverse>) \\<Longrightarrow> wf ((R\\<^sup>+)\\<inverse>)", "by (rule wf_converse_trancl)"], ["", "lemma SN_trancl_imp_SN:\n  assumes \"SN (R\\<^sup>+)\" shows \"SN R\""], ["proof (prove)\ngoal (1 subgoal):\n 1. SN R", "using assms"], ["proof (prove)\nusing this:\n  SN (R\\<^sup>+)\n\ngoal (1 subgoal):\n 1. SN R", "by (rule SN_on_trancl_imp_SN_on)"], ["", "lemma SN_trancl_SN_conv: \"SN (R\\<^sup>+) = SN R\""], ["proof (prove)\ngoal (1 subgoal):\n 1. SN (R\\<^sup>+) = SN R", "using SN_trancl_imp_SN [of R] SN_imp_SN_trancl [of R]"], ["proof (prove)\nusing this:\n  SN (R\\<^sup>+) \\<Longrightarrow> SN R\n  SN R \\<Longrightarrow> SN (R\\<^sup>+)\n\ngoal (1 subgoal):\n 1. SN (R\\<^sup>+) = SN R", "by blast"], ["", "lemma SN_inv_image: \"SN R \\<Longrightarrow> SN (inv_image R f)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. SN R \\<Longrightarrow> SN (inv_image R f)", "unfolding SN_iff_wf"], ["proof (prove)\ngoal (1 subgoal):\n 1. wf (R\\<inverse>) \\<Longrightarrow> wf ((inv_image R f)\\<inverse>)", "by simp"], ["", "lemma SN_subset: \"SN R \\<Longrightarrow> R' \\<subseteq> R \\<Longrightarrow> SN R'\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>SN R; R' \\<subseteq> R\\<rbrakk> \\<Longrightarrow> SN R'", "unfolding SN_defs"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<nexists>f.\n                f 0 \\<in> UNIV \\<and>\n                (\\<forall>i. (f i, f (Suc i)) \\<in> R);\n     R' \\<subseteq> R\\<rbrakk>\n    \\<Longrightarrow> \\<nexists>f.\n                         f 0 \\<in> UNIV \\<and>\n                         (\\<forall>i. (f i, f (Suc i)) \\<in> R')", "by blast"], ["", "lemma SN_pow_imp_SN:\n  assumes \"SN (A^^Suc n)\" shows \"SN A\""], ["proof (prove)\ngoal (1 subgoal):\n 1. SN A", "proof (rule ccontr)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<not> SN A \\<Longrightarrow> False", "assume \"\\<not> SN A\""], ["proof (state)\nthis:\n  \\<not> SN A\n\ngoal (1 subgoal):\n 1. \\<not> SN A \\<Longrightarrow> False", "then"], ["proof (chain)\npicking this:\n  \\<not> SN A", "obtain S where \"chain A S\""], ["proof (prove)\nusing this:\n  \\<not> SN A\n\ngoal (1 subgoal):\n 1. (\\<And>S.\n        \\<forall>i. (S i, S (Suc i)) \\<in> A \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "unfolding SN_defs"], ["proof (prove)\nusing this:\n  \\<not> (\\<nexists>f.\n             f 0 \\<in> UNIV \\<and> (\\<forall>i. (f i, f (Suc i)) \\<in> A))\n\ngoal (1 subgoal):\n 1. (\\<And>S.\n        \\<forall>i. (S i, S (Suc i)) \\<in> A \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  \\<forall>i. (S i, S (Suc i)) \\<in> A\n\ngoal (1 subgoal):\n 1. \\<not> SN A \\<Longrightarrow> False", "from chain_imp_relpow [OF this]"], ["proof (chain)\npicking this:\n  (S ?i, S (?i + ?j)) \\<in> A ^^ ?j", "have step: \"\\<And>i. (S i, S (i + (Suc n))) \\<in> A^^Suc n\""], ["proof (prove)\nusing this:\n  (S ?i, S (?i + ?j)) \\<in> A ^^ ?j\n\ngoal (1 subgoal):\n 1. \\<And>i. (S i, S (i + Suc n)) \\<in> A ^^ Suc n", "."], ["proof (state)\nthis:\n  (S ?i, S (?i + Suc n)) \\<in> A ^^ Suc n\n\ngoal (1 subgoal):\n 1. \\<not> SN A \\<Longrightarrow> False", "let ?T = \"\\<lambda>i. S (i * (Suc n))\""], ["proof (state)\ngoal (1 subgoal):\n 1. \\<not> SN A \\<Longrightarrow> False", "have \"chain (A^^Suc n) ?T\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>i. (S (i * Suc n), S (Suc i * Suc n)) \\<in> A ^^ Suc n", "proof"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>i. (S (i * Suc n), S (Suc i * Suc n)) \\<in> A ^^ Suc n", "fix i"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>i. (S (i * Suc n), S (Suc i * Suc n)) \\<in> A ^^ Suc n", "show \"(?T i, ?T (Suc i)) \\<in> A^^Suc n\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (S (i * Suc n), S (Suc i * Suc n)) \\<in> A ^^ Suc n", "unfolding mult_Suc"], ["proof (prove)\ngoal (1 subgoal):\n 1. (S (i * Suc n), S (Suc n + i * Suc n)) \\<in> A ^^ Suc n", "using step [of \"i * Suc n\"]"], ["proof (prove)\nusing this:\n  (S (i * Suc n), S (i * Suc n + Suc n)) \\<in> A ^^ Suc n\n\ngoal (1 subgoal):\n 1. (S (i * Suc n), S (Suc n + i * Suc n)) \\<in> A ^^ Suc n", "by (simp only: add.commute)"], ["proof (state)\nthis:\n  (S (i * Suc n), S (Suc i * Suc n)) \\<in> A ^^ Suc n\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<forall>i. (S (i * Suc n), S (Suc i * Suc n)) \\<in> A ^^ Suc n\n\ngoal (1 subgoal):\n 1. \\<not> SN A \\<Longrightarrow> False", "then"], ["proof (chain)\npicking this:\n  \\<forall>i. (S (i * Suc n), S (Suc i * Suc n)) \\<in> A ^^ Suc n", "have \"\\<not> SN (A^^Suc n)\""], ["proof (prove)\nusing this:\n  \\<forall>i. (S (i * Suc n), S (Suc i * Suc n)) \\<in> A ^^ Suc n\n\ngoal (1 subgoal):\n 1. \\<not> SN (A ^^ Suc n)", "unfolding SN_defs"], ["proof (prove)\nusing this:\n  \\<forall>i. (S (i * Suc n), S (Suc i * Suc n)) \\<in> A ^^ Suc n\n\ngoal (1 subgoal):\n 1. \\<not> (\\<nexists>f.\n               f 0 \\<in> UNIV \\<and>\n               (\\<forall>i. (f i, f (Suc i)) \\<in> A ^^ Suc n))", "by fast"], ["proof (state)\nthis:\n  \\<not> SN (A ^^ Suc n)\n\ngoal (1 subgoal):\n 1. \\<not> SN A \\<Longrightarrow> False", "with assms"], ["proof (chain)\npicking this:\n  SN (A ^^ Suc n)\n  \\<not> SN (A ^^ Suc n)", "show False"], ["proof (prove)\nusing this:\n  SN (A ^^ Suc n)\n  \\<not> SN (A ^^ Suc n)\n\ngoal (1 subgoal):\n 1. False", "by simp"], ["proof (state)\nthis:\n  False\n\ngoal:\nNo subgoals!", "qed"], ["", "(* TODO: move to Isabelle Library? *)"], ["", "lemma pow_Suc_subset_trancl: \"R^^(Suc n) \\<subseteq> R\\<^sup>+\""], ["proof (prove)\ngoal (1 subgoal):\n 1. R ^^ Suc n \\<subseteq> R\\<^sup>+", "using trancl_power [of _ R]"], ["proof (prove)\nusing this:\n  (?p \\<in> R\\<^sup>+) = (\\<exists>n>0. ?p \\<in> R ^^ n)\n\ngoal (1 subgoal):\n 1. R ^^ Suc n \\<subseteq> R\\<^sup>+", "by blast"], ["", "lemma SN_imp_SN_pow:\n  assumes \"SN R\" shows \"SN (R^^Suc n)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. SN (R ^^ Suc n)", "using SN_subset [where R=\"R\\<^sup>+\", OF SN_imp_SN_trancl [OF assms] pow_Suc_subset_trancl]"], ["proof (prove)\nusing this:\n  SN (R ^^ Suc ?n1)\n\ngoal (1 subgoal):\n 1. SN (R ^^ Suc n)", "by simp"], ["", "(*FIXME: needed in HOL/Wellfounded.thy*)"], ["", "lemma SN_pow: \"SN R \\<longleftrightarrow> SN (R ^^ Suc n)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. SN R = SN (R ^^ Suc n)", "by (rule iffI, rule SN_imp_SN_pow, assumption, rule SN_pow_imp_SN, assumption)"], ["", "lemma SN_on_trancl:\n  assumes \"SN_on r A\" shows \"SN_on (r\\<^sup>+) A\""], ["proof (prove)\ngoal (1 subgoal):\n 1. SN_on (r\\<^sup>+) A", "using assms"], ["proof (prove)\nusing this:\n  SN_on r A\n\ngoal (1 subgoal):\n 1. SN_on (r\\<^sup>+) A", "proof (rule contrapos_pp)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<not> SN_on (r\\<^sup>+) A \\<Longrightarrow> \\<not> SN_on r A", "let ?r = \"restrict_SN r r\""], ["proof (state)\ngoal (1 subgoal):\n 1. \\<not> SN_on (r\\<^sup>+) A \\<Longrightarrow> \\<not> SN_on r A", "assume \"\\<not> SN_on (r\\<^sup>+) A\""], ["proof (state)\nthis:\n  \\<not> SN_on (r\\<^sup>+) A\n\ngoal (1 subgoal):\n 1. \\<not> SN_on (r\\<^sup>+) A \\<Longrightarrow> \\<not> SN_on r A", "then"], ["proof (chain)\npicking this:\n  \\<not> SN_on (r\\<^sup>+) A", "obtain f where \"f 0 \\<in> A\" and chain: \"chain (r\\<^sup>+) f\""], ["proof (prove)\nusing this:\n  \\<not> SN_on (r\\<^sup>+) A\n\ngoal (1 subgoal):\n 1. (\\<And>f.\n        \\<lbrakk>f 0 \\<in> A;\n         \\<forall>i. (f i, f (Suc i)) \\<in> r\\<^sup>+\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  f 0 \\<in> A\n  \\<forall>i. (f i, f (Suc i)) \\<in> r\\<^sup>+\n\ngoal (1 subgoal):\n 1. \\<not> SN_on (r\\<^sup>+) A \\<Longrightarrow> \\<not> SN_on r A", "have \"SN ?r\""], ["proof (prove)\ngoal (1 subgoal):\n 1. SN (restrict_SN r r)", "by (rule SN_restrict_SN_idemp)"], ["proof (state)\nthis:\n  SN (restrict_SN r r)\n\ngoal (1 subgoal):\n 1. \\<not> SN_on (r\\<^sup>+) A \\<Longrightarrow> \\<not> SN_on r A", "then"], ["proof (chain)\npicking this:\n  SN (restrict_SN r r)", "have \"SN (?r\\<^sup>+)\""], ["proof (prove)\nusing this:\n  SN (restrict_SN r r)\n\ngoal (1 subgoal):\n 1. SN ((restrict_SN r r)\\<^sup>+)", "by (rule SN_imp_SN_trancl)"], ["proof (state)\nthis:\n  SN ((restrict_SN r r)\\<^sup>+)\n\ngoal (1 subgoal):\n 1. \\<not> SN_on (r\\<^sup>+) A \\<Longrightarrow> \\<not> SN_on r A", "have \"\\<forall>i. (f 0, f i) \\<in> r\\<^sup>*\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>i. (f 0, f i) \\<in> r\\<^sup>*", "proof"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>i. (f 0, f i) \\<in> r\\<^sup>*", "fix i"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>i. (f 0, f i) \\<in> r\\<^sup>*", "show \"(f 0, f i) \\<in> r\\<^sup>*\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (f 0, f i) \\<in> r\\<^sup>*", "proof (induct i)"], ["proof (state)\ngoal (2 subgoals):\n 1. (f 0, f 0) \\<in> r\\<^sup>*\n 2. \\<And>i.\n       (f 0, f i) \\<in> r\\<^sup>* \\<Longrightarrow>\n       (f 0, f (Suc i)) \\<in> r\\<^sup>*", "case 0"], ["proof (state)\nthis:\n  \n\ngoal (2 subgoals):\n 1. (f 0, f 0) \\<in> r\\<^sup>*\n 2. \\<And>i.\n       (f 0, f i) \\<in> r\\<^sup>* \\<Longrightarrow>\n       (f 0, f (Suc i)) \\<in> r\\<^sup>*", "show ?case"], ["proof (prove)\ngoal (1 subgoal):\n 1. (f 0, f 0) \\<in> r\\<^sup>*", ".."], ["proof (state)\nthis:\n  (f 0, f 0) \\<in> r\\<^sup>*\n\ngoal (1 subgoal):\n 1. \\<And>i.\n       (f 0, f i) \\<in> r\\<^sup>* \\<Longrightarrow>\n       (f 0, f (Suc i)) \\<in> r\\<^sup>*", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>i.\n       (f 0, f i) \\<in> r\\<^sup>* \\<Longrightarrow>\n       (f 0, f (Suc i)) \\<in> r\\<^sup>*", "case (Suc i)"], ["proof (state)\nthis:\n  (f 0, f i) \\<in> r\\<^sup>*\n\ngoal (1 subgoal):\n 1. \\<And>i.\n       (f 0, f i) \\<in> r\\<^sup>* \\<Longrightarrow>\n       (f 0, f (Suc i)) \\<in> r\\<^sup>*", "from chain"], ["proof (chain)\npicking this:\n  \\<forall>i. (f i, f (Suc i)) \\<in> r\\<^sup>+", "have \"(f i, f (Suc i)) \\<in> r\\<^sup>+\""], ["proof (prove)\nusing this:\n  \\<forall>i. (f i, f (Suc i)) \\<in> r\\<^sup>+\n\ngoal (1 subgoal):\n 1. (f i, f (Suc i)) \\<in> r\\<^sup>+", ".."], ["proof (state)\nthis:\n  (f i, f (Suc i)) \\<in> r\\<^sup>+\n\ngoal (1 subgoal):\n 1. \\<And>i.\n       (f 0, f i) \\<in> r\\<^sup>* \\<Longrightarrow>\n       (f 0, f (Suc i)) \\<in> r\\<^sup>*", "with Suc"], ["proof (chain)\npicking this:\n  (f 0, f i) \\<in> r\\<^sup>*\n  (f i, f (Suc i)) \\<in> r\\<^sup>+", "show ?case"], ["proof (prove)\nusing this:\n  (f 0, f i) \\<in> r\\<^sup>*\n  (f i, f (Suc i)) \\<in> r\\<^sup>+\n\ngoal (1 subgoal):\n 1. (f 0, f (Suc i)) \\<in> r\\<^sup>*", "by auto"], ["proof (state)\nthis:\n  (f 0, f (Suc i)) \\<in> r\\<^sup>*\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  (f 0, f i) \\<in> r\\<^sup>*\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<forall>i. (f 0, f i) \\<in> r\\<^sup>*\n\ngoal (1 subgoal):\n 1. \\<not> SN_on (r\\<^sup>+) A \\<Longrightarrow> \\<not> SN_on r A", "with assms"], ["proof (chain)\npicking this:\n  SN_on r A\n  \\<forall>i. (f 0, f i) \\<in> r\\<^sup>*", "have \"\\<forall>i. SN_on r {f i}\""], ["proof (prove)\nusing this:\n  SN_on r A\n  \\<forall>i. (f 0, f i) \\<in> r\\<^sup>*\n\ngoal (1 subgoal):\n 1. \\<forall>i. SN_on r {f i}", "using steps_preserve_SN_on [of \"f 0\" _ r]\n    and \\<open>f 0 \\<in> A\\<close>\n    and SN_on_subset2 [of \"{f 0}\" \"A\"]"], ["proof (prove)\nusing this:\n  SN_on r A\n  \\<forall>i. (f 0, f i) \\<in> r\\<^sup>*\n  \\<lbrakk>(f 0, ?b) \\<in> r\\<^sup>*; SN_on r {f 0}\\<rbrakk>\n  \\<Longrightarrow> SN_on r {?b}\n  f 0 \\<in> A\n  \\<lbrakk>{f 0} \\<subseteq> A; SN_on ?r A\\<rbrakk>\n  \\<Longrightarrow> SN_on ?r {f 0}\n\ngoal (1 subgoal):\n 1. \\<forall>i. SN_on r {f i}", "by auto"], ["proof (state)\nthis:\n  \\<forall>i. SN_on r {f i}\n\ngoal (1 subgoal):\n 1. \\<not> SN_on (r\\<^sup>+) A \\<Longrightarrow> \\<not> SN_on r A", "with chain"], ["proof (chain)\npicking this:\n  \\<forall>i. (f i, f (Suc i)) \\<in> r\\<^sup>+\n  \\<forall>i. SN_on r {f i}", "have \"chain (?r\\<^sup>+) f\""], ["proof (prove)\nusing this:\n  \\<forall>i. (f i, f (Suc i)) \\<in> r\\<^sup>+\n  \\<forall>i. SN_on r {f i}\n\ngoal (1 subgoal):\n 1. \\<forall>i. (f i, f (Suc i)) \\<in> (restrict_SN r r)\\<^sup>+", "unfolding restrict_SN_trancl_simp"], ["proof (prove)\nusing this:\n  \\<forall>i. (f i, f (Suc i)) \\<in> r\\<^sup>+\n  \\<forall>i. SN_on r {f i}\n\ngoal (1 subgoal):\n 1. \\<forall>i. (f i, f (Suc i)) \\<in> restrict_SN (r\\<^sup>+) r", "unfolding restrict_SN_def"], ["proof (prove)\nusing this:\n  \\<forall>i. (f i, f (Suc i)) \\<in> r\\<^sup>+\n  \\<forall>i. SN_on r {f i}\n\ngoal (1 subgoal):\n 1. \\<forall>i.\n       (f i, f (Suc i))\n       \\<in> {(a, b) |a b. (a, b) \\<in> r\\<^sup>+ \\<and> SN_on r {a}}", "by auto"], ["proof (state)\nthis:\n  \\<forall>i. (f i, f (Suc i)) \\<in> (restrict_SN r r)\\<^sup>+\n\ngoal (1 subgoal):\n 1. \\<not> SN_on (r\\<^sup>+) A \\<Longrightarrow> \\<not> SN_on r A", "then"], ["proof (chain)\npicking this:\n  \\<forall>i. (f i, f (Suc i)) \\<in> (restrict_SN r r)\\<^sup>+", "have \"\\<not> SN_on (?r\\<^sup>+) {f 0}\""], ["proof (prove)\nusing this:\n  \\<forall>i. (f i, f (Suc i)) \\<in> (restrict_SN r r)\\<^sup>+\n\ngoal (1 subgoal):\n 1. \\<not> SN_on ((restrict_SN r r)\\<^sup>+) {f 0}", "by auto"], ["proof (state)\nthis:\n  \\<not> SN_on ((restrict_SN r r)\\<^sup>+) {f 0}\n\ngoal (1 subgoal):\n 1. \\<not> SN_on (r\\<^sup>+) A \\<Longrightarrow> \\<not> SN_on r A", "with \\<open>SN (?r\\<^sup>+)\\<close>"], ["proof (chain)\npicking this:\n  SN ((restrict_SN r r)\\<^sup>+)\n  \\<not> SN_on ((restrict_SN r r)\\<^sup>+) {f 0}", "have False"], ["proof (prove)\nusing this:\n  SN ((restrict_SN r r)\\<^sup>+)\n  \\<not> SN_on ((restrict_SN r r)\\<^sup>+) {f 0}\n\ngoal (1 subgoal):\n 1. False", "by (simp add: SN_defs)"], ["proof (state)\nthis:\n  False\n\ngoal (1 subgoal):\n 1. \\<not> SN_on (r\\<^sup>+) A \\<Longrightarrow> \\<not> SN_on r A", "then"], ["proof (chain)\npicking this:\n  False", "show \"\\<not> SN_on r A\""], ["proof (prove)\nusing this:\n  False\n\ngoal (1 subgoal):\n 1. \\<not> SN_on r A", "by simp"], ["proof (state)\nthis:\n  \\<not> SN_on r A\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma SN_on_trancl_SN_on_conv: \"SN_on (R\\<^sup>+) T = SN_on R T\""], ["proof (prove)\ngoal (1 subgoal):\n 1. SN_on (R\\<^sup>+) T = SN_on R T", "using SN_on_trancl_imp_SN_on [of R] SN_on_trancl [of R]"], ["proof (prove)\nusing this:\n  SN_on (R\\<^sup>+) ?T \\<Longrightarrow> SN_on R ?T\n  SN_on R ?A \\<Longrightarrow> SN_on (R\\<^sup>+) ?A\n\ngoal (1 subgoal):\n 1. SN_on (R\\<^sup>+) T = SN_on R T", "by blast"], ["", "text \\<open>Restrict an ARS to elements of a given set.\\<close>"], ["", "definition \"restrict\" :: \"'a rel \\<Rightarrow> 'a set \\<Rightarrow> 'a rel\" where\n  \"restrict r S = {(x, y). x \\<in> S \\<and> y \\<in> S \\<and> (x, y) \\<in> r}\""], ["", "lemma SN_on_restrict:\n  assumes \"SN_on r A\"\n  shows \"SN_on (restrict r S) A\" (is \"SN_on ?r A\")"], ["proof (prove)\ngoal (1 subgoal):\n 1. SN_on (restrict r S) A", "proof (rule ccontr)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<not> SN_on (restrict r S) A \\<Longrightarrow> False", "assume \"\\<not> SN_on ?r A\""], ["proof (state)\nthis:\n  \\<not> SN_on (restrict r S) A\n\ngoal (1 subgoal):\n 1. \\<not> SN_on (restrict r S) A \\<Longrightarrow> False", "then"], ["proof (chain)\npicking this:\n  \\<not> SN_on (restrict r S) A", "have \"\\<exists>f. f 0 \\<in> A \\<and> chain ?r f\""], ["proof (prove)\nusing this:\n  \\<not> SN_on (restrict r S) A\n\ngoal (1 subgoal):\n 1. \\<exists>f.\n       f 0 \\<in> A \\<and> (\\<forall>i. (f i, f (Suc i)) \\<in> restrict r S)", "by auto"], ["proof (state)\nthis:\n  \\<exists>f.\n     f 0 \\<in> A \\<and> (\\<forall>i. (f i, f (Suc i)) \\<in> restrict r S)\n\ngoal (1 subgoal):\n 1. \\<not> SN_on (restrict r S) A \\<Longrightarrow> False", "then"], ["proof (chain)\npicking this:\n  \\<exists>f.\n     f 0 \\<in> A \\<and> (\\<forall>i. (f i, f (Suc i)) \\<in> restrict r S)", "have \"\\<exists>f. f 0 \\<in> A \\<and> chain r f\""], ["proof (prove)\nusing this:\n  \\<exists>f.\n     f 0 \\<in> A \\<and> (\\<forall>i. (f i, f (Suc i)) \\<in> restrict r S)\n\ngoal (1 subgoal):\n 1. \\<exists>f. f 0 \\<in> A \\<and> (\\<forall>i. (f i, f (Suc i)) \\<in> r)", "unfolding restrict_def"], ["proof (prove)\nusing this:\n  \\<exists>f.\n     f 0 \\<in> A \\<and>\n     (\\<forall>i.\n         (f i, f (Suc i))\n         \\<in> {(x, y). x \\<in> S \\<and> y \\<in> S \\<and> (x, y) \\<in> r})\n\ngoal (1 subgoal):\n 1. \\<exists>f. f 0 \\<in> A \\<and> (\\<forall>i. (f i, f (Suc i)) \\<in> r)", "by auto"], ["proof (state)\nthis:\n  \\<exists>f. f 0 \\<in> A \\<and> (\\<forall>i. (f i, f (Suc i)) \\<in> r)\n\ngoal (1 subgoal):\n 1. \\<not> SN_on (restrict r S) A \\<Longrightarrow> False", "with \\<open>SN_on r A\\<close>"], ["proof (chain)\npicking this:\n  SN_on r A\n  \\<exists>f. f 0 \\<in> A \\<and> (\\<forall>i. (f i, f (Suc i)) \\<in> r)", "show False"], ["proof (prove)\nusing this:\n  SN_on r A\n  \\<exists>f. f 0 \\<in> A \\<and> (\\<forall>i. (f i, f (Suc i)) \\<in> r)\n\ngoal (1 subgoal):\n 1. False", "by auto"], ["proof (state)\nthis:\n  False\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma restrict_rtrancl: \"(restrict r S)\\<^sup>* \\<subseteq> r\\<^sup>*\" (is \"?r\\<^sup>* \\<subseteq> r\\<^sup>*\")"], ["proof (prove)\ngoal (1 subgoal):\n 1. (restrict r S)\\<^sup>* \\<subseteq> r\\<^sup>*", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. (restrict r S)\\<^sup>* \\<subseteq> r\\<^sup>*", "{"], ["proof (state)\ngoal (1 subgoal):\n 1. (restrict r S)\\<^sup>* \\<subseteq> r\\<^sup>*", "fix x y"], ["proof (state)\ngoal (1 subgoal):\n 1. (restrict r S)\\<^sup>* \\<subseteq> r\\<^sup>*", "assume \"(x, y) \\<in> ?r\\<^sup>*\""], ["proof (state)\nthis:\n  (x, y) \\<in> (restrict r S)\\<^sup>*\n\ngoal (1 subgoal):\n 1. (restrict r S)\\<^sup>* \\<subseteq> r\\<^sup>*", "then"], ["proof (chain)\npicking this:\n  (x, y) \\<in> (restrict r S)\\<^sup>*", "have \"(x, y) \\<in> r\\<^sup>*\""], ["proof (prove)\nusing this:\n  (x, y) \\<in> (restrict r S)\\<^sup>*\n\ngoal (1 subgoal):\n 1. (x, y) \\<in> r\\<^sup>*", "unfolding restrict_def"], ["proof (prove)\nusing this:\n  (x, y)\n  \\<in> {(x, y). x \\<in> S \\<and> y \\<in> S \\<and> (x, y) \\<in> r}\\<^sup>*\n\ngoal (1 subgoal):\n 1. (x, y) \\<in> r\\<^sup>*", "by induct auto"], ["proof (state)\nthis:\n  (x, y) \\<in> r\\<^sup>*\n\ngoal (1 subgoal):\n 1. (restrict r S)\\<^sup>* \\<subseteq> r\\<^sup>*", "}"], ["proof (state)\nthis:\n  (?x2, ?y2) \\<in> (restrict r S)\\<^sup>* \\<Longrightarrow>\n  (?x2, ?y2) \\<in> r\\<^sup>*\n\ngoal (1 subgoal):\n 1. (restrict r S)\\<^sup>* \\<subseteq> r\\<^sup>*", "then"], ["proof (chain)\npicking this:\n  (?x2, ?y2) \\<in> (restrict r S)\\<^sup>* \\<Longrightarrow>\n  (?x2, ?y2) \\<in> r\\<^sup>*", "show ?thesis"], ["proof (prove)\nusing this:\n  (?x2, ?y2) \\<in> (restrict r S)\\<^sup>* \\<Longrightarrow>\n  (?x2, ?y2) \\<in> r\\<^sup>*\n\ngoal (1 subgoal):\n 1. (restrict r S)\\<^sup>* \\<subseteq> r\\<^sup>*", "by auto"], ["proof (state)\nthis:\n  (restrict r S)\\<^sup>* \\<subseteq> r\\<^sup>*\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma rtrancl_Image_step:\n  assumes \"a \\<in> r\\<^sup>* `` A\"\n    and \"(a, b) \\<in> r\\<^sup>*\"\n  shows \"b \\<in> r\\<^sup>* `` A\""], ["proof (prove)\ngoal (1 subgoal):\n 1. b \\<in> r\\<^sup>* `` A", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. b \\<in> r\\<^sup>* `` A", "from assms(1)"], ["proof (chain)\npicking this:\n  a \\<in> r\\<^sup>* `` A", "obtain c where \"c \\<in> A\" and \"(c, a) \\<in> r\\<^sup>*\""], ["proof (prove)\nusing this:\n  a \\<in> r\\<^sup>* `` A\n\ngoal (1 subgoal):\n 1. (\\<And>c.\n        \\<lbrakk>c \\<in> A; (c, a) \\<in> r\\<^sup>*\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  c \\<in> A\n  (c, a) \\<in> r\\<^sup>*\n\ngoal (1 subgoal):\n 1. b \\<in> r\\<^sup>* `` A", "with assms"], ["proof (chain)\npicking this:\n  a \\<in> r\\<^sup>* `` A\n  (a, b) \\<in> r\\<^sup>*\n  c \\<in> A\n  (c, a) \\<in> r\\<^sup>*", "have \"(c, b) \\<in> r\\<^sup>*\""], ["proof (prove)\nusing this:\n  a \\<in> r\\<^sup>* `` A\n  (a, b) \\<in> r\\<^sup>*\n  c \\<in> A\n  (c, a) \\<in> r\\<^sup>*\n\ngoal (1 subgoal):\n 1. (c, b) \\<in> r\\<^sup>*", "by auto"], ["proof (state)\nthis:\n  (c, b) \\<in> r\\<^sup>*\n\ngoal (1 subgoal):\n 1. b \\<in> r\\<^sup>* `` A", "with \\<open>c \\<in> A\\<close>"], ["proof (chain)\npicking this:\n  c \\<in> A\n  (c, b) \\<in> r\\<^sup>*", "show ?thesis"], ["proof (prove)\nusing this:\n  c \\<in> A\n  (c, b) \\<in> r\\<^sup>*\n\ngoal (1 subgoal):\n 1. b \\<in> r\\<^sup>* `` A", "by auto"], ["proof (state)\nthis:\n  b \\<in> r\\<^sup>* `` A\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma WCR_SN_on_imp_CR_on:\n  assumes \"WCR r\" and \"SN_on r A\" shows \"CR_on r A\""], ["proof (prove)\ngoal (1 subgoal):\n 1. CR_on r A", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. CR_on r A", "let ?S = \"r\\<^sup>* `` A\""], ["proof (state)\ngoal (1 subgoal):\n 1. CR_on r A", "let ?r = \"restrict r ?S\""], ["proof (state)\ngoal (1 subgoal):\n 1. CR_on r A", "have \"\\<forall>x. SN_on ?r {x}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>x. SN_on (restrict r (r\\<^sup>* `` A)) {x}", "proof"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x. SN_on (restrict r (r\\<^sup>* `` A)) {x}", "fix y"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x. SN_on (restrict r (r\\<^sup>* `` A)) {x}", "have \"y \\<notin> ?S \\<or> y \\<in> ?S\""], ["proof (prove)\ngoal (1 subgoal):\n 1. y \\<notin> r\\<^sup>* `` A \\<or> y \\<in> r\\<^sup>* `` A", "by simp"], ["proof (state)\nthis:\n  y \\<notin> r\\<^sup>* `` A \\<or> y \\<in> r\\<^sup>* `` A\n\ngoal (1 subgoal):\n 1. \\<And>x. SN_on (restrict r (r\\<^sup>* `` A)) {x}", "then"], ["proof (chain)\npicking this:\n  y \\<notin> r\\<^sup>* `` A \\<or> y \\<in> r\\<^sup>* `` A", "show \"SN_on ?r {y}\""], ["proof (prove)\nusing this:\n  y \\<notin> r\\<^sup>* `` A \\<or> y \\<in> r\\<^sup>* `` A\n\ngoal (1 subgoal):\n 1. SN_on (restrict r (r\\<^sup>* `` A)) {y}", "proof"], ["proof (state)\ngoal (2 subgoals):\n 1. y \\<notin> r\\<^sup>* `` A \\<Longrightarrow>\n    SN_on (restrict r (r\\<^sup>* `` A)) {y}\n 2. y \\<in> r\\<^sup>* `` A \\<Longrightarrow>\n    SN_on (restrict r (r\\<^sup>* `` A)) {y}", "assume \"y \\<notin> ?S\""], ["proof (state)\nthis:\n  y \\<notin> r\\<^sup>* `` A\n\ngoal (2 subgoals):\n 1. y \\<notin> r\\<^sup>* `` A \\<Longrightarrow>\n    SN_on (restrict r (r\\<^sup>* `` A)) {y}\n 2. y \\<in> r\\<^sup>* `` A \\<Longrightarrow>\n    SN_on (restrict r (r\\<^sup>* `` A)) {y}", "then"], ["proof (chain)\npicking this:\n  y \\<notin> r\\<^sup>* `` A", "show ?thesis"], ["proof (prove)\nusing this:\n  y \\<notin> r\\<^sup>* `` A\n\ngoal (1 subgoal):\n 1. SN_on (restrict r (r\\<^sup>* `` A)) {y}", "unfolding restrict_def"], ["proof (prove)\nusing this:\n  y \\<notin> r\\<^sup>* `` A\n\ngoal (1 subgoal):\n 1. SN_on\n     {(x, y).\n      x \\<in> r\\<^sup>* `` A \\<and>\n      y \\<in> r\\<^sup>* `` A \\<and> (x, y) \\<in> r}\n     {y}", "by auto"], ["proof (state)\nthis:\n  SN_on (restrict r (r\\<^sup>* `` A)) {y}\n\ngoal (1 subgoal):\n 1. y \\<in> r\\<^sup>* `` A \\<Longrightarrow>\n    SN_on (restrict r (r\\<^sup>* `` A)) {y}", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. y \\<in> r\\<^sup>* `` A \\<Longrightarrow>\n    SN_on (restrict r (r\\<^sup>* `` A)) {y}", "assume \"y \\<in> ?S\""], ["proof (state)\nthis:\n  y \\<in> r\\<^sup>* `` A\n\ngoal (1 subgoal):\n 1. y \\<in> r\\<^sup>* `` A \\<Longrightarrow>\n    SN_on (restrict r (r\\<^sup>* `` A)) {y}", "then"], ["proof (chain)\npicking this:\n  y \\<in> r\\<^sup>* `` A", "have \"y \\<in> r\\<^sup>* `` A\""], ["proof (prove)\nusing this:\n  y \\<in> r\\<^sup>* `` A\n\ngoal (1 subgoal):\n 1. y \\<in> r\\<^sup>* `` A", "by simp"], ["proof (state)\nthis:\n  y \\<in> r\\<^sup>* `` A\n\ngoal (1 subgoal):\n 1. y \\<in> r\\<^sup>* `` A \\<Longrightarrow>\n    SN_on (restrict r (r\\<^sup>* `` A)) {y}", "with SN_on_Image_rtrancl [OF \\<open>SN_on r A\\<close>]"], ["proof (chain)\npicking this:\n  SN_on r (r\\<^sup>* `` A)\n  y \\<in> r\\<^sup>* `` A", "have \"SN_on r {y}\""], ["proof (prove)\nusing this:\n  SN_on r (r\\<^sup>* `` A)\n  y \\<in> r\\<^sup>* `` A\n\ngoal (1 subgoal):\n 1. SN_on r {y}", "using SN_on_subset2 [of \"{y}\" \"r\\<^sup>* `` A\"]"], ["proof (prove)\nusing this:\n  SN_on r (r\\<^sup>* `` A)\n  y \\<in> r\\<^sup>* `` A\n  \\<lbrakk>{y} \\<subseteq> r\\<^sup>* `` A;\n   SN_on ?r (r\\<^sup>* `` A)\\<rbrakk>\n  \\<Longrightarrow> SN_on ?r {y}\n\ngoal (1 subgoal):\n 1. SN_on r {y}", "by blast"], ["proof (state)\nthis:\n  SN_on r {y}\n\ngoal (1 subgoal):\n 1. y \\<in> r\\<^sup>* `` A \\<Longrightarrow>\n    SN_on (restrict r (r\\<^sup>* `` A)) {y}", "then"], ["proof (chain)\npicking this:\n  SN_on r {y}", "show ?thesis"], ["proof (prove)\nusing this:\n  SN_on r {y}\n\ngoal (1 subgoal):\n 1. SN_on (restrict r (r\\<^sup>* `` A)) {y}", "by (rule SN_on_restrict)"], ["proof (state)\nthis:\n  SN_on (restrict r (r\\<^sup>* `` A)) {y}\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  SN_on (restrict r (r\\<^sup>* `` A)) {y}\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<forall>x. SN_on (restrict r (r\\<^sup>* `` A)) {x}\n\ngoal (1 subgoal):\n 1. CR_on r A", "then"], ["proof (chain)\npicking this:\n  \\<forall>x. SN_on (restrict r (r\\<^sup>* `` A)) {x}", "have \"SN ?r\""], ["proof (prove)\nusing this:\n  \\<forall>x. SN_on (restrict r (r\\<^sup>* `` A)) {x}\n\ngoal (1 subgoal):\n 1. SN (restrict r (r\\<^sup>* `` A))", "unfolding SN_defs"], ["proof (prove)\nusing this:\n  \\<forall>x.\n     \\<nexists>f.\n        f 0 \\<in> {x} \\<and>\n        (\\<forall>i. (f i, f (Suc i)) \\<in> restrict r (r\\<^sup>* `` A))\n\ngoal (1 subgoal):\n 1. \\<nexists>f.\n       f 0 \\<in> UNIV \\<and>\n       (\\<forall>i. (f i, f (Suc i)) \\<in> restrict r (r\\<^sup>* `` A))", "by auto"], ["proof (state)\nthis:\n  SN (restrict r (r\\<^sup>* `` A))\n\ngoal (1 subgoal):\n 1. CR_on r A", "{"], ["proof (state)\nthis:\n  SN (restrict r (r\\<^sup>* `` A))\n\ngoal (1 subgoal):\n 1. CR_on r A", "fix x y"], ["proof (state)\ngoal (1 subgoal):\n 1. CR_on r A", "assume \"(x, y) \\<in> r\\<^sup>*\" and \"x \\<in> ?S\" and \"y \\<in> ?S\""], ["proof (state)\nthis:\n  (x, y) \\<in> r\\<^sup>*\n  x \\<in> r\\<^sup>* `` A\n  y \\<in> r\\<^sup>* `` A\n\ngoal (1 subgoal):\n 1. CR_on r A", "then"], ["proof (chain)\npicking this:\n  (x, y) \\<in> r\\<^sup>*\n  x \\<in> r\\<^sup>* `` A\n  y \\<in> r\\<^sup>* `` A", "obtain n where \"(x, y) \\<in> r^^n\" and \"x \\<in> ?S\" and \"y \\<in> ?S\""], ["proof (prove)\nusing this:\n  (x, y) \\<in> r\\<^sup>*\n  x \\<in> r\\<^sup>* `` A\n  y \\<in> r\\<^sup>* `` A\n\ngoal (1 subgoal):\n 1. (\\<And>n.\n        \\<lbrakk>(x, y) \\<in> r ^^ n; x \\<in> r\\<^sup>* `` A;\n         y \\<in> r\\<^sup>* `` A\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "using rtrancl_imp_UN_relpow"], ["proof (prove)\nusing this:\n  (x, y) \\<in> r\\<^sup>*\n  x \\<in> r\\<^sup>* `` A\n  y \\<in> r\\<^sup>* `` A\n  ?p \\<in> ?R\\<^sup>* \\<Longrightarrow> ?p \\<in> \\<Union> (range ((^^) ?R))\n\ngoal (1 subgoal):\n 1. (\\<And>n.\n        \\<lbrakk>(x, y) \\<in> r ^^ n; x \\<in> r\\<^sup>* `` A;\n         y \\<in> r\\<^sup>* `` A\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by best"], ["proof (state)\nthis:\n  (x, y) \\<in> r ^^ n\n  x \\<in> r\\<^sup>* `` A\n  y \\<in> r\\<^sup>* `` A\n\ngoal (1 subgoal):\n 1. CR_on r A", "then"], ["proof (chain)\npicking this:\n  (x, y) \\<in> r ^^ n\n  x \\<in> r\\<^sup>* `` A\n  y \\<in> r\\<^sup>* `` A", "have \"(x, y) \\<in> ?r\\<^sup>*\""], ["proof (prove)\nusing this:\n  (x, y) \\<in> r ^^ n\n  x \\<in> r\\<^sup>* `` A\n  y \\<in> r\\<^sup>* `` A\n\ngoal (1 subgoal):\n 1. (x, y) \\<in> (restrict r (r\\<^sup>* `` A))\\<^sup>*", "proof (induct n arbitrary: x y)"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>x y.\n       \\<lbrakk>(x, y) \\<in> r ^^ 0; x \\<in> r\\<^sup>* `` A;\n        y \\<in> r\\<^sup>* `` A\\<rbrakk>\n       \\<Longrightarrow> (x, y) \\<in> (restrict r (r\\<^sup>* `` A))\\<^sup>*\n 2. \\<And>n x y.\n       \\<lbrakk>\\<And>x y.\n                   \\<lbrakk>(x, y) \\<in> r ^^ n; x \\<in> r\\<^sup>* `` A;\n                    y \\<in> r\\<^sup>* `` A\\<rbrakk>\n                   \\<Longrightarrow> (x, y)\n                                     \\<in> (restrict r\n       (r\\<^sup>* `` A))\\<^sup>*;\n        (x, y) \\<in> r ^^ Suc n; x \\<in> r\\<^sup>* `` A;\n        y \\<in> r\\<^sup>* `` A\\<rbrakk>\n       \\<Longrightarrow> (x, y) \\<in> (restrict r (r\\<^sup>* `` A))\\<^sup>*", "case 0"], ["proof (state)\nthis:\n  (x, y) \\<in> r ^^ 0\n  x \\<in> r\\<^sup>* `` A\n  y \\<in> r\\<^sup>* `` A\n\ngoal (2 subgoals):\n 1. \\<And>x y.\n       \\<lbrakk>(x, y) \\<in> r ^^ 0; x \\<in> r\\<^sup>* `` A;\n        y \\<in> r\\<^sup>* `` A\\<rbrakk>\n       \\<Longrightarrow> (x, y) \\<in> (restrict r (r\\<^sup>* `` A))\\<^sup>*\n 2. \\<And>n x y.\n       \\<lbrakk>\\<And>x y.\n                   \\<lbrakk>(x, y) \\<in> r ^^ n; x \\<in> r\\<^sup>* `` A;\n                    y \\<in> r\\<^sup>* `` A\\<rbrakk>\n                   \\<Longrightarrow> (x, y)\n                                     \\<in> (restrict r\n       (r\\<^sup>* `` A))\\<^sup>*;\n        (x, y) \\<in> r ^^ Suc n; x \\<in> r\\<^sup>* `` A;\n        y \\<in> r\\<^sup>* `` A\\<rbrakk>\n       \\<Longrightarrow> (x, y) \\<in> (restrict r (r\\<^sup>* `` A))\\<^sup>*", "then"], ["proof (chain)\npicking this:\n  (x, y) \\<in> r ^^ 0\n  x \\<in> r\\<^sup>* `` A\n  y \\<in> r\\<^sup>* `` A", "show ?case"], ["proof (prove)\nusing this:\n  (x, y) \\<in> r ^^ 0\n  x \\<in> r\\<^sup>* `` A\n  y \\<in> r\\<^sup>* `` A\n\ngoal (1 subgoal):\n 1. (x, y) \\<in> (restrict r (r\\<^sup>* `` A))\\<^sup>*", "by simp"], ["proof (state)\nthis:\n  (x, y) \\<in> (restrict r (r\\<^sup>* `` A))\\<^sup>*\n\ngoal (1 subgoal):\n 1. \\<And>n x y.\n       \\<lbrakk>\\<And>x y.\n                   \\<lbrakk>(x, y) \\<in> r ^^ n; x \\<in> r\\<^sup>* `` A;\n                    y \\<in> r\\<^sup>* `` A\\<rbrakk>\n                   \\<Longrightarrow> (x, y)\n                                     \\<in> (restrict r\n       (r\\<^sup>* `` A))\\<^sup>*;\n        (x, y) \\<in> r ^^ Suc n; x \\<in> r\\<^sup>* `` A;\n        y \\<in> r\\<^sup>* `` A\\<rbrakk>\n       \\<Longrightarrow> (x, y) \\<in> (restrict r (r\\<^sup>* `` A))\\<^sup>*", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>n x y.\n       \\<lbrakk>\\<And>x y.\n                   \\<lbrakk>(x, y) \\<in> r ^^ n; x \\<in> r\\<^sup>* `` A;\n                    y \\<in> r\\<^sup>* `` A\\<rbrakk>\n                   \\<Longrightarrow> (x, y)\n                                     \\<in> (restrict r\n       (r\\<^sup>* `` A))\\<^sup>*;\n        (x, y) \\<in> r ^^ Suc n; x \\<in> r\\<^sup>* `` A;\n        y \\<in> r\\<^sup>* `` A\\<rbrakk>\n       \\<Longrightarrow> (x, y) \\<in> (restrict r (r\\<^sup>* `` A))\\<^sup>*", "case (Suc n)"], ["proof (state)\nthis:\n  \\<lbrakk>(?x, ?y) \\<in> r ^^ n; ?x \\<in> r\\<^sup>* `` A;\n   ?y \\<in> r\\<^sup>* `` A\\<rbrakk>\n  \\<Longrightarrow> (?x, ?y) \\<in> (restrict r (r\\<^sup>* `` A))\\<^sup>*\n  (x, y) \\<in> r ^^ Suc n\n  x \\<in> r\\<^sup>* `` A\n  y \\<in> r\\<^sup>* `` A\n\ngoal (1 subgoal):\n 1. \\<And>n x y.\n       \\<lbrakk>\\<And>x y.\n                   \\<lbrakk>(x, y) \\<in> r ^^ n; x \\<in> r\\<^sup>* `` A;\n                    y \\<in> r\\<^sup>* `` A\\<rbrakk>\n                   \\<Longrightarrow> (x, y)\n                                     \\<in> (restrict r\n       (r\\<^sup>* `` A))\\<^sup>*;\n        (x, y) \\<in> r ^^ Suc n; x \\<in> r\\<^sup>* `` A;\n        y \\<in> r\\<^sup>* `` A\\<rbrakk>\n       \\<Longrightarrow> (x, y) \\<in> (restrict r (r\\<^sup>* `` A))\\<^sup>*", "from \\<open>(x, y) \\<in> r^^Suc n\\<close>"], ["proof (chain)\npicking this:\n  (x, y) \\<in> r ^^ Suc n", "obtain x' where \"(x, x') \\<in> r\" and \"(x', y) \\<in> r^^n\""], ["proof (prove)\nusing this:\n  (x, y) \\<in> r ^^ Suc n\n\ngoal (1 subgoal):\n 1. (\\<And>x'.\n        \\<lbrakk>(x, x') \\<in> r; (x', y) \\<in> r ^^ n\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "using relpow_Suc_D2"], ["proof (prove)\nusing this:\n  (x, y) \\<in> r ^^ Suc n\n  (?x, ?z) \\<in> ?R ^^ Suc ?n \\<Longrightarrow>\n  \\<exists>y. (?x, y) \\<in> ?R \\<and> (y, ?z) \\<in> ?R ^^ ?n\n\ngoal (1 subgoal):\n 1. (\\<And>x'.\n        \\<lbrakk>(x, x') \\<in> r; (x', y) \\<in> r ^^ n\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by best"], ["proof (state)\nthis:\n  (x, x') \\<in> r\n  (x', y) \\<in> r ^^ n\n\ngoal (1 subgoal):\n 1. \\<And>n x y.\n       \\<lbrakk>\\<And>x y.\n                   \\<lbrakk>(x, y) \\<in> r ^^ n; x \\<in> r\\<^sup>* `` A;\n                    y \\<in> r\\<^sup>* `` A\\<rbrakk>\n                   \\<Longrightarrow> (x, y)\n                                     \\<in> (restrict r\n       (r\\<^sup>* `` A))\\<^sup>*;\n        (x, y) \\<in> r ^^ Suc n; x \\<in> r\\<^sup>* `` A;\n        y \\<in> r\\<^sup>* `` A\\<rbrakk>\n       \\<Longrightarrow> (x, y) \\<in> (restrict r (r\\<^sup>* `` A))\\<^sup>*", "then"], ["proof (chain)\npicking this:\n  (x, x') \\<in> r\n  (x', y) \\<in> r ^^ n", "have \"(x, x') \\<in> r\\<^sup>*\""], ["proof (prove)\nusing this:\n  (x, x') \\<in> r\n  (x', y) \\<in> r ^^ n\n\ngoal (1 subgoal):\n 1. (x, x') \\<in> r\\<^sup>*", "by simp"], ["proof (state)\nthis:\n  (x, x') \\<in> r\\<^sup>*\n\ngoal (1 subgoal):\n 1. \\<And>n x y.\n       \\<lbrakk>\\<And>x y.\n                   \\<lbrakk>(x, y) \\<in> r ^^ n; x \\<in> r\\<^sup>* `` A;\n                    y \\<in> r\\<^sup>* `` A\\<rbrakk>\n                   \\<Longrightarrow> (x, y)\n                                     \\<in> (restrict r\n       (r\\<^sup>* `` A))\\<^sup>*;\n        (x, y) \\<in> r ^^ Suc n; x \\<in> r\\<^sup>* `` A;\n        y \\<in> r\\<^sup>* `` A\\<rbrakk>\n       \\<Longrightarrow> (x, y) \\<in> (restrict r (r\\<^sup>* `` A))\\<^sup>*", "with \\<open>x \\<in> ?S\\<close>"], ["proof (chain)\npicking this:\n  x \\<in> r\\<^sup>* `` A\n  (x, x') \\<in> r\\<^sup>*", "have \"x' \\<in> ?S\""], ["proof (prove)\nusing this:\n  x \\<in> r\\<^sup>* `` A\n  (x, x') \\<in> r\\<^sup>*\n\ngoal (1 subgoal):\n 1. x' \\<in> r\\<^sup>* `` A", "by (rule rtrancl_Image_step)"], ["proof (state)\nthis:\n  x' \\<in> r\\<^sup>* `` A\n\ngoal (1 subgoal):\n 1. \\<And>n x y.\n       \\<lbrakk>\\<And>x y.\n                   \\<lbrakk>(x, y) \\<in> r ^^ n; x \\<in> r\\<^sup>* `` A;\n                    y \\<in> r\\<^sup>* `` A\\<rbrakk>\n                   \\<Longrightarrow> (x, y)\n                                     \\<in> (restrict r\n       (r\\<^sup>* `` A))\\<^sup>*;\n        (x, y) \\<in> r ^^ Suc n; x \\<in> r\\<^sup>* `` A;\n        y \\<in> r\\<^sup>* `` A\\<rbrakk>\n       \\<Longrightarrow> (x, y) \\<in> (restrict r (r\\<^sup>* `` A))\\<^sup>*", "with Suc and \\<open>(x', y) \\<in> r^^n\\<close>"], ["proof (chain)\npicking this:\n  \\<lbrakk>(?x, ?y) \\<in> r ^^ n; ?x \\<in> r\\<^sup>* `` A;\n   ?y \\<in> r\\<^sup>* `` A\\<rbrakk>\n  \\<Longrightarrow> (?x, ?y) \\<in> (restrict r (r\\<^sup>* `` A))\\<^sup>*\n  (x, y) \\<in> r ^^ Suc n\n  x \\<in> r\\<^sup>* `` A\n  y \\<in> r\\<^sup>* `` A\n  (x', y) \\<in> r ^^ n\n  x' \\<in> r\\<^sup>* `` A", "have \"(x', y) \\<in> ?r\\<^sup>*\""], ["proof (prove)\nusing this:\n  \\<lbrakk>(?x, ?y) \\<in> r ^^ n; ?x \\<in> r\\<^sup>* `` A;\n   ?y \\<in> r\\<^sup>* `` A\\<rbrakk>\n  \\<Longrightarrow> (?x, ?y) \\<in> (restrict r (r\\<^sup>* `` A))\\<^sup>*\n  (x, y) \\<in> r ^^ Suc n\n  x \\<in> r\\<^sup>* `` A\n  y \\<in> r\\<^sup>* `` A\n  (x', y) \\<in> r ^^ n\n  x' \\<in> r\\<^sup>* `` A\n\ngoal (1 subgoal):\n 1. (x', y) \\<in> (restrict r (r\\<^sup>* `` A))\\<^sup>*", "by simp"], ["proof (state)\nthis:\n  (x', y) \\<in> (restrict r (r\\<^sup>* `` A))\\<^sup>*\n\ngoal (1 subgoal):\n 1. \\<And>n x y.\n       \\<lbrakk>\\<And>x y.\n                   \\<lbrakk>(x, y) \\<in> r ^^ n; x \\<in> r\\<^sup>* `` A;\n                    y \\<in> r\\<^sup>* `` A\\<rbrakk>\n                   \\<Longrightarrow> (x, y)\n                                     \\<in> (restrict r\n       (r\\<^sup>* `` A))\\<^sup>*;\n        (x, y) \\<in> r ^^ Suc n; x \\<in> r\\<^sup>* `` A;\n        y \\<in> r\\<^sup>* `` A\\<rbrakk>\n       \\<Longrightarrow> (x, y) \\<in> (restrict r (r\\<^sup>* `` A))\\<^sup>*", "from \\<open>(x, x') \\<in> r\\<close> and \\<open>x \\<in> ?S\\<close> and \\<open>x' \\<in> ?S\\<close>"], ["proof (chain)\npicking this:\n  (x, x') \\<in> r\n  x \\<in> r\\<^sup>* `` A\n  x' \\<in> r\\<^sup>* `` A", "have \"(x, x') \\<in> ?r\""], ["proof (prove)\nusing this:\n  (x, x') \\<in> r\n  x \\<in> r\\<^sup>* `` A\n  x' \\<in> r\\<^sup>* `` A\n\ngoal (1 subgoal):\n 1. (x, x') \\<in> restrict r (r\\<^sup>* `` A)", "unfolding restrict_def"], ["proof (prove)\nusing this:\n  (x, x') \\<in> r\n  x \\<in> r\\<^sup>* `` A\n  x' \\<in> r\\<^sup>* `` A\n\ngoal (1 subgoal):\n 1. (x, x')\n    \\<in> {(x, y).\n           x \\<in> r\\<^sup>* `` A \\<and>\n           y \\<in> r\\<^sup>* `` A \\<and> (x, y) \\<in> r}", "by simp"], ["proof (state)\nthis:\n  (x, x') \\<in> restrict r (r\\<^sup>* `` A)\n\ngoal (1 subgoal):\n 1. \\<And>n x y.\n       \\<lbrakk>\\<And>x y.\n                   \\<lbrakk>(x, y) \\<in> r ^^ n; x \\<in> r\\<^sup>* `` A;\n                    y \\<in> r\\<^sup>* `` A\\<rbrakk>\n                   \\<Longrightarrow> (x, y)\n                                     \\<in> (restrict r\n       (r\\<^sup>* `` A))\\<^sup>*;\n        (x, y) \\<in> r ^^ Suc n; x \\<in> r\\<^sup>* `` A;\n        y \\<in> r\\<^sup>* `` A\\<rbrakk>\n       \\<Longrightarrow> (x, y) \\<in> (restrict r (r\\<^sup>* `` A))\\<^sup>*", "with \\<open>(x', y) \\<in> ?r\\<^sup>*\\<close>"], ["proof (chain)\npicking this:\n  (x', y) \\<in> (restrict r (r\\<^sup>* `` A))\\<^sup>*\n  (x, x') \\<in> restrict r (r\\<^sup>* `` A)", "show ?case"], ["proof (prove)\nusing this:\n  (x', y) \\<in> (restrict r (r\\<^sup>* `` A))\\<^sup>*\n  (x, x') \\<in> restrict r (r\\<^sup>* `` A)\n\ngoal (1 subgoal):\n 1. (x, y) \\<in> (restrict r (r\\<^sup>* `` A))\\<^sup>*", "by simp"], ["proof (state)\nthis:\n  (x, y) \\<in> (restrict r (r\\<^sup>* `` A))\\<^sup>*\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  (x, y) \\<in> (restrict r (r\\<^sup>* `` A))\\<^sup>*\n\ngoal (1 subgoal):\n 1. CR_on r A", "}"], ["proof (state)\nthis:\n  \\<lbrakk>(?x2, ?y2) \\<in> r\\<^sup>*; ?x2 \\<in> r\\<^sup>* `` A;\n   ?y2 \\<in> r\\<^sup>* `` A\\<rbrakk>\n  \\<Longrightarrow> (?x2, ?y2) \\<in> (restrict r (r\\<^sup>* `` A))\\<^sup>*\n\ngoal (1 subgoal):\n 1. CR_on r A", "then"], ["proof (chain)\npicking this:\n  \\<lbrakk>(?x2, ?y2) \\<in> r\\<^sup>*; ?x2 \\<in> r\\<^sup>* `` A;\n   ?y2 \\<in> r\\<^sup>* `` A\\<rbrakk>\n  \\<Longrightarrow> (?x2, ?y2) \\<in> (restrict r (r\\<^sup>* `` A))\\<^sup>*", "have a:\"\\<forall>x y. (x, y) \\<in> r\\<^sup>* \\<and> x \\<in> ?S \\<and> y \\<in> ?S \\<longrightarrow> (x, y) \\<in> ?r\\<^sup>*\""], ["proof (prove)\nusing this:\n  \\<lbrakk>(?x2, ?y2) \\<in> r\\<^sup>*; ?x2 \\<in> r\\<^sup>* `` A;\n   ?y2 \\<in> r\\<^sup>* `` A\\<rbrakk>\n  \\<Longrightarrow> (?x2, ?y2) \\<in> (restrict r (r\\<^sup>* `` A))\\<^sup>*\n\ngoal (1 subgoal):\n 1. \\<forall>x y.\n       (x, y) \\<in> r\\<^sup>* \\<and>\n       x \\<in> r\\<^sup>* `` A \\<and>\n       y \\<in> r\\<^sup>* `` A \\<longrightarrow>\n       (x, y) \\<in> (restrict r (r\\<^sup>* `` A))\\<^sup>*", "by simp"], ["proof (state)\nthis:\n  \\<forall>x y.\n     (x, y) \\<in> r\\<^sup>* \\<and>\n     x \\<in> r\\<^sup>* `` A \\<and> y \\<in> r\\<^sup>* `` A \\<longrightarrow>\n     (x, y) \\<in> (restrict r (r\\<^sup>* `` A))\\<^sup>*\n\ngoal (1 subgoal):\n 1. CR_on r A", "{"], ["proof (state)\nthis:\n  \\<forall>x y.\n     (x, y) \\<in> r\\<^sup>* \\<and>\n     x \\<in> r\\<^sup>* `` A \\<and> y \\<in> r\\<^sup>* `` A \\<longrightarrow>\n     (x, y) \\<in> (restrict r (r\\<^sup>* `` A))\\<^sup>*\n\ngoal (1 subgoal):\n 1. CR_on r A", "fix x' y z"], ["proof (state)\ngoal (1 subgoal):\n 1. CR_on r A", "assume \"(x', y) \\<in> ?r\" and \"(x', z) \\<in> ?r\""], ["proof (state)\nthis:\n  (x', y) \\<in> restrict r (r\\<^sup>* `` A)\n  (x', z) \\<in> restrict r (r\\<^sup>* `` A)\n\ngoal (1 subgoal):\n 1. CR_on r A", "then"], ["proof (chain)\npicking this:\n  (x', y) \\<in> restrict r (r\\<^sup>* `` A)\n  (x', z) \\<in> restrict r (r\\<^sup>* `` A)", "have \"x' \\<in> ?S\" and \"y \\<in> ?S\" and \"z \\<in> ?S\" and \"(x', y) \\<in> r\" and \"(x', z) \\<in> r\""], ["proof (prove)\nusing this:\n  (x', y) \\<in> restrict r (r\\<^sup>* `` A)\n  (x', z) \\<in> restrict r (r\\<^sup>* `` A)\n\ngoal (1 subgoal):\n 1. (x' \\<in> r\\<^sup>* `` A &&& y \\<in> r\\<^sup>* `` A) &&&\n    z \\<in> r\\<^sup>* `` A &&& (x', y) \\<in> r &&& (x', z) \\<in> r", "unfolding restrict_def"], ["proof (prove)\nusing this:\n  (x', y)\n  \\<in> {(x, y).\n         x \\<in> r\\<^sup>* `` A \\<and>\n         y \\<in> r\\<^sup>* `` A \\<and> (x, y) \\<in> r}\n  (x', z)\n  \\<in> {(x, y).\n         x \\<in> r\\<^sup>* `` A \\<and>\n         y \\<in> r\\<^sup>* `` A \\<and> (x, y) \\<in> r}\n\ngoal (1 subgoal):\n 1. (x' \\<in> r\\<^sup>* `` A &&& y \\<in> r\\<^sup>* `` A) &&&\n    z \\<in> r\\<^sup>* `` A &&& (x', y) \\<in> r &&& (x', z) \\<in> r", "by auto"], ["proof (state)\nthis:\n  x' \\<in> r\\<^sup>* `` A\n  y \\<in> r\\<^sup>* `` A\n  z \\<in> r\\<^sup>* `` A\n  (x', y) \\<in> r\n  (x', z) \\<in> r\n\ngoal (1 subgoal):\n 1. CR_on r A", "with \\<open>WCR r\\<close>"], ["proof (chain)\npicking this:\n  WCR r\n  x' \\<in> r\\<^sup>* `` A\n  y \\<in> r\\<^sup>* `` A\n  z \\<in> r\\<^sup>* `` A\n  (x', y) \\<in> r\n  (x', z) \\<in> r", "have \"(y, z) \\<in> r\\<^sup>\\<down>\""], ["proof (prove)\nusing this:\n  WCR r\n  x' \\<in> r\\<^sup>* `` A\n  y \\<in> r\\<^sup>* `` A\n  z \\<in> r\\<^sup>* `` A\n  (x', y) \\<in> r\n  (x', z) \\<in> r\n\ngoal (1 subgoal):\n 1. (y, z) \\<in> r\\<^sup>\\<down>", "by auto"], ["proof (state)\nthis:\n  (y, z) \\<in> r\\<^sup>\\<down>\n\ngoal (1 subgoal):\n 1. CR_on r A", "then"], ["proof (chain)\npicking this:\n  (y, z) \\<in> r\\<^sup>\\<down>", "obtain u where \"(y, u) \\<in> r\\<^sup>*\" and \"(z, u) \\<in> r\\<^sup>*\""], ["proof (prove)\nusing this:\n  (y, z) \\<in> r\\<^sup>\\<down>\n\ngoal (1 subgoal):\n 1. (\\<And>u.\n        \\<lbrakk>(y, u) \\<in> r\\<^sup>*; (z, u) \\<in> r\\<^sup>*\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  (y, u) \\<in> r\\<^sup>*\n  (z, u) \\<in> r\\<^sup>*\n\ngoal (1 subgoal):\n 1. CR_on r A", "from \\<open>x' \\<in> ?S\\<close>"], ["proof (chain)\npicking this:\n  x' \\<in> r\\<^sup>* `` A", "obtain x where \"x \\<in> A\" and \"(x, x') \\<in> r\\<^sup>*\""], ["proof (prove)\nusing this:\n  x' \\<in> r\\<^sup>* `` A\n\ngoal (1 subgoal):\n 1. (\\<And>x.\n        \\<lbrakk>x \\<in> A; (x, x') \\<in> r\\<^sup>*\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  x \\<in> A\n  (x, x') \\<in> r\\<^sup>*\n\ngoal (1 subgoal):\n 1. CR_on r A", "from \\<open>(x', y) \\<in> r\\<close>"], ["proof (chain)\npicking this:\n  (x', y) \\<in> r", "have \"(x', y) \\<in> r\\<^sup>*\""], ["proof (prove)\nusing this:\n  (x', y) \\<in> r\n\ngoal (1 subgoal):\n 1. (x', y) \\<in> r\\<^sup>*", "by auto"], ["proof (state)\nthis:\n  (x', y) \\<in> r\\<^sup>*\n\ngoal (1 subgoal):\n 1. CR_on r A", "with \\<open>(y, u) \\<in> r\\<^sup>*\\<close>"], ["proof (chain)\npicking this:\n  (y, u) \\<in> r\\<^sup>*\n  (x', y) \\<in> r\\<^sup>*", "have \"(x', u) \\<in> r\\<^sup>*\""], ["proof (prove)\nusing this:\n  (y, u) \\<in> r\\<^sup>*\n  (x', y) \\<in> r\\<^sup>*\n\ngoal (1 subgoal):\n 1. (x', u) \\<in> r\\<^sup>*", "by auto"], ["proof (state)\nthis:\n  (x', u) \\<in> r\\<^sup>*\n\ngoal (1 subgoal):\n 1. CR_on r A", "with \\<open>(x, x') \\<in> r\\<^sup>*\\<close>"], ["proof (chain)\npicking this:\n  (x, x') \\<in> r\\<^sup>*\n  (x', u) \\<in> r\\<^sup>*", "have \"(x, u) \\<in> r\\<^sup>*\""], ["proof (prove)\nusing this:\n  (x, x') \\<in> r\\<^sup>*\n  (x', u) \\<in> r\\<^sup>*\n\ngoal (1 subgoal):\n 1. (x, u) \\<in> r\\<^sup>*", "by simp"], ["proof (state)\nthis:\n  (x, u) \\<in> r\\<^sup>*\n\ngoal (1 subgoal):\n 1. CR_on r A", "then"], ["proof (chain)\npicking this:\n  (x, u) \\<in> r\\<^sup>*", "have \"u \\<in> ?S\""], ["proof (prove)\nusing this:\n  (x, u) \\<in> r\\<^sup>*\n\ngoal (1 subgoal):\n 1. u \\<in> r\\<^sup>* `` A", "using \\<open>x \\<in> A\\<close>"], ["proof (prove)\nusing this:\n  (x, u) \\<in> r\\<^sup>*\n  x \\<in> A\n\ngoal (1 subgoal):\n 1. u \\<in> r\\<^sup>* `` A", "by auto"], ["proof (state)\nthis:\n  u \\<in> r\\<^sup>* `` A\n\ngoal (1 subgoal):\n 1. CR_on r A", "from \\<open>y \\<in> ?S\\<close> and \\<open>u \\<in> ?S\\<close> and \\<open>(y, u) \\<in> r\\<^sup>*\\<close>"], ["proof (chain)\npicking this:\n  y \\<in> r\\<^sup>* `` A\n  u \\<in> r\\<^sup>* `` A\n  (y, u) \\<in> r\\<^sup>*", "have \"(y, u) \\<in> ?r\\<^sup>*\""], ["proof (prove)\nusing this:\n  y \\<in> r\\<^sup>* `` A\n  u \\<in> r\\<^sup>* `` A\n  (y, u) \\<in> r\\<^sup>*\n\ngoal (1 subgoal):\n 1. (y, u) \\<in> (restrict r (r\\<^sup>* `` A))\\<^sup>*", "using a"], ["proof (prove)\nusing this:\n  y \\<in> r\\<^sup>* `` A\n  u \\<in> r\\<^sup>* `` A\n  (y, u) \\<in> r\\<^sup>*\n  \\<forall>x y.\n     (x, y) \\<in> r\\<^sup>* \\<and>\n     x \\<in> r\\<^sup>* `` A \\<and> y \\<in> r\\<^sup>* `` A \\<longrightarrow>\n     (x, y) \\<in> (restrict r (r\\<^sup>* `` A))\\<^sup>*\n\ngoal (1 subgoal):\n 1. (y, u) \\<in> (restrict r (r\\<^sup>* `` A))\\<^sup>*", "by auto"], ["proof (state)\nthis:\n  (y, u) \\<in> (restrict r (r\\<^sup>* `` A))\\<^sup>*\n\ngoal (1 subgoal):\n 1. CR_on r A", "from \\<open>z \\<in> ?S\\<close> and \\<open>u \\<in> ?S\\<close> and \\<open>(z, u) \\<in> r\\<^sup>*\\<close>"], ["proof (chain)\npicking this:\n  z \\<in> r\\<^sup>* `` A\n  u \\<in> r\\<^sup>* `` A\n  (z, u) \\<in> r\\<^sup>*", "have \"(z, u) \\<in> ?r\\<^sup>*\""], ["proof (prove)\nusing this:\n  z \\<in> r\\<^sup>* `` A\n  u \\<in> r\\<^sup>* `` A\n  (z, u) \\<in> r\\<^sup>*\n\ngoal (1 subgoal):\n 1. (z, u) \\<in> (restrict r (r\\<^sup>* `` A))\\<^sup>*", "using a"], ["proof (prove)\nusing this:\n  z \\<in> r\\<^sup>* `` A\n  u \\<in> r\\<^sup>* `` A\n  (z, u) \\<in> r\\<^sup>*\n  \\<forall>x y.\n     (x, y) \\<in> r\\<^sup>* \\<and>\n     x \\<in> r\\<^sup>* `` A \\<and> y \\<in> r\\<^sup>* `` A \\<longrightarrow>\n     (x, y) \\<in> (restrict r (r\\<^sup>* `` A))\\<^sup>*\n\ngoal (1 subgoal):\n 1. (z, u) \\<in> (restrict r (r\\<^sup>* `` A))\\<^sup>*", "by auto"], ["proof (state)\nthis:\n  (z, u) \\<in> (restrict r (r\\<^sup>* `` A))\\<^sup>*\n\ngoal (1 subgoal):\n 1. CR_on r A", "with \\<open>(y, u) \\<in> ?r\\<^sup>*\\<close>"], ["proof (chain)\npicking this:\n  (y, u) \\<in> (restrict r (r\\<^sup>* `` A))\\<^sup>*\n  (z, u) \\<in> (restrict r (r\\<^sup>* `` A))\\<^sup>*", "have \"(y, z) \\<in> ?r\\<^sup>\\<down>\""], ["proof (prove)\nusing this:\n  (y, u) \\<in> (restrict r (r\\<^sup>* `` A))\\<^sup>*\n  (z, u) \\<in> (restrict r (r\\<^sup>* `` A))\\<^sup>*\n\ngoal (1 subgoal):\n 1. (y, z) \\<in> (restrict r (r\\<^sup>* `` A))\\<^sup>\\<down>", "by auto"], ["proof (state)\nthis:\n  (y, z) \\<in> (restrict r (r\\<^sup>* `` A))\\<^sup>\\<down>\n\ngoal (1 subgoal):\n 1. CR_on r A", "}"], ["proof (state)\nthis:\n  \\<lbrakk>(?x'2, ?y2) \\<in> restrict r (r\\<^sup>* `` A);\n   (?x'2, ?z2) \\<in> restrict r (r\\<^sup>* `` A)\\<rbrakk>\n  \\<Longrightarrow> (?y2, ?z2)\n                    \\<in> (restrict r (r\\<^sup>* `` A))\\<^sup>\\<down>\n\ngoal (1 subgoal):\n 1. CR_on r A", "then"], ["proof (chain)\npicking this:\n  \\<lbrakk>(?x'2, ?y2) \\<in> restrict r (r\\<^sup>* `` A);\n   (?x'2, ?z2) \\<in> restrict r (r\\<^sup>* `` A)\\<rbrakk>\n  \\<Longrightarrow> (?y2, ?z2)\n                    \\<in> (restrict r (r\\<^sup>* `` A))\\<^sup>\\<down>", "have \"WCR ?r\""], ["proof (prove)\nusing this:\n  \\<lbrakk>(?x'2, ?y2) \\<in> restrict r (r\\<^sup>* `` A);\n   (?x'2, ?z2) \\<in> restrict r (r\\<^sup>* `` A)\\<rbrakk>\n  \\<Longrightarrow> (?y2, ?z2)\n                    \\<in> (restrict r (r\\<^sup>* `` A))\\<^sup>\\<down>\n\ngoal (1 subgoal):\n 1. WCR (restrict r (r\\<^sup>* `` A))", "by auto"], ["proof (state)\nthis:\n  WCR (restrict r (r\\<^sup>* `` A))\n\ngoal (1 subgoal):\n 1. CR_on r A", "have \"CR ?r\""], ["proof (prove)\ngoal (1 subgoal):\n 1. CR (restrict r (r\\<^sup>* `` A))", "using Newman [OF \\<open>SN ?r\\<close> \\<open>WCR ?r\\<close>]"], ["proof (prove)\nusing this:\n  CR (restrict r (r\\<^sup>* `` A))\n\ngoal (1 subgoal):\n 1. CR (restrict r (r\\<^sup>* `` A))", "by simp"], ["proof (state)\nthis:\n  CR (restrict r (r\\<^sup>* `` A))\n\ngoal (1 subgoal):\n 1. CR_on r A", "{"], ["proof (state)\nthis:\n  CR (restrict r (r\\<^sup>* `` A))\n\ngoal (1 subgoal):\n 1. CR_on r A", "fix x y z"], ["proof (state)\ngoal (1 subgoal):\n 1. CR_on r A", "assume \"x \\<in> A\" and \"(x, y) \\<in> r\\<^sup>*\" and \"(x, z) \\<in> r\\<^sup>*\""], ["proof (state)\nthis:\n  x \\<in> A\n  (x, y) \\<in> r\\<^sup>*\n  (x, z) \\<in> r\\<^sup>*\n\ngoal (1 subgoal):\n 1. CR_on r A", "then"], ["proof (chain)\npicking this:\n  x \\<in> A\n  (x, y) \\<in> r\\<^sup>*\n  (x, z) \\<in> r\\<^sup>*", "have \"y \\<in> ?S\" and \"z \\<in> ?S\""], ["proof (prove)\nusing this:\n  x \\<in> A\n  (x, y) \\<in> r\\<^sup>*\n  (x, z) \\<in> r\\<^sup>*\n\ngoal (1 subgoal):\n 1. y \\<in> r\\<^sup>* `` A &&& z \\<in> r\\<^sup>* `` A", "by auto"], ["proof (state)\nthis:\n  y \\<in> r\\<^sup>* `` A\n  z \\<in> r\\<^sup>* `` A\n\ngoal (1 subgoal):\n 1. CR_on r A", "have \"x \\<in> ?S\""], ["proof (prove)\ngoal (1 subgoal):\n 1. x \\<in> r\\<^sup>* `` A", "using \\<open>x \\<in> A\\<close>"], ["proof (prove)\nusing this:\n  x \\<in> A\n\ngoal (1 subgoal):\n 1. x \\<in> r\\<^sup>* `` A", "by auto"], ["proof (state)\nthis:\n  x \\<in> r\\<^sup>* `` A\n\ngoal (1 subgoal):\n 1. CR_on r A", "from a and \\<open>(x, y) \\<in> r\\<^sup>*\\<close> and \\<open>x \\<in> ?S\\<close> and \\<open>y \\<in> ?S\\<close>"], ["proof (chain)\npicking this:\n  \\<forall>x y.\n     (x, y) \\<in> r\\<^sup>* \\<and>\n     x \\<in> r\\<^sup>* `` A \\<and> y \\<in> r\\<^sup>* `` A \\<longrightarrow>\n     (x, y) \\<in> (restrict r (r\\<^sup>* `` A))\\<^sup>*\n  (x, y) \\<in> r\\<^sup>*\n  x \\<in> r\\<^sup>* `` A\n  y \\<in> r\\<^sup>* `` A", "have \"(x, y) \\<in> ?r\\<^sup>*\""], ["proof (prove)\nusing this:\n  \\<forall>x y.\n     (x, y) \\<in> r\\<^sup>* \\<and>\n     x \\<in> r\\<^sup>* `` A \\<and> y \\<in> r\\<^sup>* `` A \\<longrightarrow>\n     (x, y) \\<in> (restrict r (r\\<^sup>* `` A))\\<^sup>*\n  (x, y) \\<in> r\\<^sup>*\n  x \\<in> r\\<^sup>* `` A\n  y \\<in> r\\<^sup>* `` A\n\ngoal (1 subgoal):\n 1. (x, y) \\<in> (restrict r (r\\<^sup>* `` A))\\<^sup>*", "by simp"], ["proof (state)\nthis:\n  (x, y) \\<in> (restrict r (r\\<^sup>* `` A))\\<^sup>*\n\ngoal (1 subgoal):\n 1. CR_on r A", "from a and \\<open>(x, z) \\<in> r\\<^sup>*\\<close> and \\<open>x \\<in> ?S\\<close> and \\<open>z \\<in> ?S\\<close>"], ["proof (chain)\npicking this:\n  \\<forall>x y.\n     (x, y) \\<in> r\\<^sup>* \\<and>\n     x \\<in> r\\<^sup>* `` A \\<and> y \\<in> r\\<^sup>* `` A \\<longrightarrow>\n     (x, y) \\<in> (restrict r (r\\<^sup>* `` A))\\<^sup>*\n  (x, z) \\<in> r\\<^sup>*\n  x \\<in> r\\<^sup>* `` A\n  z \\<in> r\\<^sup>* `` A", "have \"(x, z) \\<in> ?r\\<^sup>*\""], ["proof (prove)\nusing this:\n  \\<forall>x y.\n     (x, y) \\<in> r\\<^sup>* \\<and>\n     x \\<in> r\\<^sup>* `` A \\<and> y \\<in> r\\<^sup>* `` A \\<longrightarrow>\n     (x, y) \\<in> (restrict r (r\\<^sup>* `` A))\\<^sup>*\n  (x, z) \\<in> r\\<^sup>*\n  x \\<in> r\\<^sup>* `` A\n  z \\<in> r\\<^sup>* `` A\n\ngoal (1 subgoal):\n 1. (x, z) \\<in> (restrict r (r\\<^sup>* `` A))\\<^sup>*", "by simp"], ["proof (state)\nthis:\n  (x, z) \\<in> (restrict r (r\\<^sup>* `` A))\\<^sup>*\n\ngoal (1 subgoal):\n 1. CR_on r A", "with \\<open>CR ?r\\<close> and \\<open>(x, y) \\<in> ?r\\<^sup>*\\<close>"], ["proof (chain)\npicking this:\n  CR (restrict r (r\\<^sup>* `` A))\n  (x, y) \\<in> (restrict r (r\\<^sup>* `` A))\\<^sup>*\n  (x, z) \\<in> (restrict r (r\\<^sup>* `` A))\\<^sup>*", "have \"(y, z) \\<in> ?r\\<^sup>\\<down>\""], ["proof (prove)\nusing this:\n  CR (restrict r (r\\<^sup>* `` A))\n  (x, y) \\<in> (restrict r (r\\<^sup>* `` A))\\<^sup>*\n  (x, z) \\<in> (restrict r (r\\<^sup>* `` A))\\<^sup>*\n\ngoal (1 subgoal):\n 1. (y, z) \\<in> (restrict r (r\\<^sup>* `` A))\\<^sup>\\<down>", "by auto"], ["proof (state)\nthis:\n  (y, z) \\<in> (restrict r (r\\<^sup>* `` A))\\<^sup>\\<down>\n\ngoal (1 subgoal):\n 1. CR_on r A", "then"], ["proof (chain)\npicking this:\n  (y, z) \\<in> (restrict r (r\\<^sup>* `` A))\\<^sup>\\<down>", "obtain u where \"(y, u) \\<in> ?r\\<^sup>*\" and \"(z, u) \\<in> ?r\\<^sup>*\""], ["proof (prove)\nusing this:\n  (y, z) \\<in> (restrict r (r\\<^sup>* `` A))\\<^sup>\\<down>\n\ngoal (1 subgoal):\n 1. (\\<And>u.\n        \\<lbrakk>(y, u) \\<in> (restrict r (r\\<^sup>* `` A))\\<^sup>*;\n         (z, u) \\<in> (restrict r (r\\<^sup>* `` A))\\<^sup>*\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by best"], ["proof (state)\nthis:\n  (y, u) \\<in> (restrict r (r\\<^sup>* `` A))\\<^sup>*\n  (z, u) \\<in> (restrict r (r\\<^sup>* `` A))\\<^sup>*\n\ngoal (1 subgoal):\n 1. CR_on r A", "then"], ["proof (chain)\npicking this:\n  (y, u) \\<in> (restrict r (r\\<^sup>* `` A))\\<^sup>*\n  (z, u) \\<in> (restrict r (r\\<^sup>* `` A))\\<^sup>*", "have \"(y, u) \\<in> r\\<^sup>*\" and \"(z, u) \\<in> r\\<^sup>*\""], ["proof (prove)\nusing this:\n  (y, u) \\<in> (restrict r (r\\<^sup>* `` A))\\<^sup>*\n  (z, u) \\<in> (restrict r (r\\<^sup>* `` A))\\<^sup>*\n\ngoal (1 subgoal):\n 1. (y, u) \\<in> r\\<^sup>* &&& (z, u) \\<in> r\\<^sup>*", "using restrict_rtrancl"], ["proof (prove)\nusing this:\n  (y, u) \\<in> (restrict r (r\\<^sup>* `` A))\\<^sup>*\n  (z, u) \\<in> (restrict r (r\\<^sup>* `` A))\\<^sup>*\n  (restrict ?r ?S)\\<^sup>* \\<subseteq> ?r\\<^sup>*\n\ngoal (1 subgoal):\n 1. (y, u) \\<in> r\\<^sup>* &&& (z, u) \\<in> r\\<^sup>*", "by auto"], ["proof (state)\nthis:\n  (y, u) \\<in> r\\<^sup>*\n  (z, u) \\<in> r\\<^sup>*\n\ngoal (1 subgoal):\n 1. CR_on r A", "then"], ["proof (chain)\npicking this:\n  (y, u) \\<in> r\\<^sup>*\n  (z, u) \\<in> r\\<^sup>*", "have \"(y, z) \\<in> r\\<^sup>\\<down>\""], ["proof (prove)\nusing this:\n  (y, u) \\<in> r\\<^sup>*\n  (z, u) \\<in> r\\<^sup>*\n\ngoal (1 subgoal):\n 1. (y, z) \\<in> r\\<^sup>\\<down>", "by auto"], ["proof (state)\nthis:\n  (y, z) \\<in> r\\<^sup>\\<down>\n\ngoal (1 subgoal):\n 1. CR_on r A", "}"], ["proof (state)\nthis:\n  \\<lbrakk>?x2 \\<in> A; (?x2, ?y2) \\<in> r\\<^sup>*;\n   (?x2, ?z2) \\<in> r\\<^sup>*\\<rbrakk>\n  \\<Longrightarrow> (?y2, ?z2) \\<in> r\\<^sup>\\<down>\n\ngoal (1 subgoal):\n 1. CR_on r A", "then"], ["proof (chain)\npicking this:\n  \\<lbrakk>?x2 \\<in> A; (?x2, ?y2) \\<in> r\\<^sup>*;\n   (?x2, ?z2) \\<in> r\\<^sup>*\\<rbrakk>\n  \\<Longrightarrow> (?y2, ?z2) \\<in> r\\<^sup>\\<down>", "show ?thesis"], ["proof (prove)\nusing this:\n  \\<lbrakk>?x2 \\<in> A; (?x2, ?y2) \\<in> r\\<^sup>*;\n   (?x2, ?z2) \\<in> r\\<^sup>*\\<rbrakk>\n  \\<Longrightarrow> (?y2, ?z2) \\<in> r\\<^sup>\\<down>\n\ngoal (1 subgoal):\n 1. CR_on r A", "by auto"], ["proof (state)\nthis:\n  CR_on r A\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma SN_on_Image_normalizable:\n  assumes \"SN_on r A\"\n  shows \"\\<forall>a\\<in>A. \\<exists>b. b \\<in> r\\<^sup>! `` A\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>a\\<in>A. \\<exists>b. b \\<in> r\\<^sup>! `` A", "proof"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>a. a \\<in> A \\<Longrightarrow> \\<exists>b. b \\<in> r\\<^sup>! `` A", "fix a"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>a. a \\<in> A \\<Longrightarrow> \\<exists>b. b \\<in> r\\<^sup>! `` A", "assume a: \"a \\<in> A\""], ["proof (state)\nthis:\n  a \\<in> A\n\ngoal (1 subgoal):\n 1. \\<And>a. a \\<in> A \\<Longrightarrow> \\<exists>b. b \\<in> r\\<^sup>! `` A", "show \"\\<exists>b. b \\<in> r\\<^sup>! `` A\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>b. b \\<in> r\\<^sup>! `` A", "proof (rule ccontr)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<nexists>b. b \\<in> r\\<^sup>! `` A \\<Longrightarrow> False", "assume \"\\<not> (\\<exists>b. b \\<in> r\\<^sup>! `` A)\""], ["proof (state)\nthis:\n  \\<nexists>b. b \\<in> r\\<^sup>! `` A\n\ngoal (1 subgoal):\n 1. \\<nexists>b. b \\<in> r\\<^sup>! `` A \\<Longrightarrow> False", "then"], ["proof (chain)\npicking this:\n  \\<nexists>b. b \\<in> r\\<^sup>! `` A", "have A: \"\\<forall>b. (a, b) \\<in> r\\<^sup>* \\<longrightarrow> b \\<notin> NF r\""], ["proof (prove)\nusing this:\n  \\<nexists>b. b \\<in> r\\<^sup>! `` A\n\ngoal (1 subgoal):\n 1. \\<forall>b. (a, b) \\<in> r\\<^sup>* \\<longrightarrow> b \\<notin> NF r", "using a"], ["proof (prove)\nusing this:\n  \\<nexists>b. b \\<in> r\\<^sup>! `` A\n  a \\<in> A\n\ngoal (1 subgoal):\n 1. \\<forall>b. (a, b) \\<in> r\\<^sup>* \\<longrightarrow> b \\<notin> NF r", "by auto"], ["proof (state)\nthis:\n  \\<forall>b. (a, b) \\<in> r\\<^sup>* \\<longrightarrow> b \\<notin> NF r\n\ngoal (1 subgoal):\n 1. \\<nexists>b. b \\<in> r\\<^sup>! `` A \\<Longrightarrow> False", "then"], ["proof (chain)\npicking this:\n  \\<forall>b. (a, b) \\<in> r\\<^sup>* \\<longrightarrow> b \\<notin> NF r", "have \"a \\<notin> NF r\""], ["proof (prove)\nusing this:\n  \\<forall>b. (a, b) \\<in> r\\<^sup>* \\<longrightarrow> b \\<notin> NF r\n\ngoal (1 subgoal):\n 1. a \\<notin> NF r", "by auto"], ["proof (state)\nthis:\n  a \\<notin> NF r\n\ngoal (1 subgoal):\n 1. \\<nexists>b. b \\<in> r\\<^sup>! `` A \\<Longrightarrow> False", "let ?Q = \"{c. (a, c) \\<in> r\\<^sup>* \\<and> c \\<notin> NF r}\""], ["proof (state)\ngoal (1 subgoal):\n 1. \\<nexists>b. b \\<in> r\\<^sup>! `` A \\<Longrightarrow> False", "have \"a \\<in> ?Q\""], ["proof (prove)\ngoal (1 subgoal):\n 1. a \\<in> {c. (a, c) \\<in> r\\<^sup>* \\<and> c \\<notin> NF r}", "using \\<open>a \\<notin> NF r\\<close>"], ["proof (prove)\nusing this:\n  a \\<notin> NF r\n\ngoal (1 subgoal):\n 1. a \\<in> {c. (a, c) \\<in> r\\<^sup>* \\<and> c \\<notin> NF r}", "by simp"], ["proof (state)\nthis:\n  a \\<in> {c. (a, c) \\<in> r\\<^sup>* \\<and> c \\<notin> NF r}\n\ngoal (1 subgoal):\n 1. \\<nexists>b. b \\<in> r\\<^sup>! `` A \\<Longrightarrow> False", "have \"\\<forall>c\\<in>?Q. \\<exists>b. (c, b) \\<in> r \\<and> b \\<in> ?Q\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>c\\<in>{c. (a, c) \\<in> r\\<^sup>* \\<and> c \\<notin> NF r}.\n       \\<exists>b.\n          (c, b) \\<in> r \\<and>\n          b \\<in> {c. (a, c) \\<in> r\\<^sup>* \\<and> c \\<notin> NF r}", "proof"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>c.\n       c \\<in> {c. (a, c) \\<in> r\\<^sup>* \\<and>\n                   c \\<notin> NF r} \\<Longrightarrow>\n       \\<exists>b.\n          (c, b) \\<in> r \\<and>\n          b \\<in> {c. (a, c) \\<in> r\\<^sup>* \\<and> c \\<notin> NF r}", "fix c"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>c.\n       c \\<in> {c. (a, c) \\<in> r\\<^sup>* \\<and>\n                   c \\<notin> NF r} \\<Longrightarrow>\n       \\<exists>b.\n          (c, b) \\<in> r \\<and>\n          b \\<in> {c. (a, c) \\<in> r\\<^sup>* \\<and> c \\<notin> NF r}", "assume \"c \\<in> ?Q\""], ["proof (state)\nthis:\n  c \\<in> {c. (a, c) \\<in> r\\<^sup>* \\<and> c \\<notin> NF r}\n\ngoal (1 subgoal):\n 1. \\<And>c.\n       c \\<in> {c. (a, c) \\<in> r\\<^sup>* \\<and>\n                   c \\<notin> NF r} \\<Longrightarrow>\n       \\<exists>b.\n          (c, b) \\<in> r \\<and>\n          b \\<in> {c. (a, c) \\<in> r\\<^sup>* \\<and> c \\<notin> NF r}", "then"], ["proof (chain)\npicking this:\n  c \\<in> {c. (a, c) \\<in> r\\<^sup>* \\<and> c \\<notin> NF r}", "have \"(a, c) \\<in> r\\<^sup>*\" and \"c \\<notin> NF r\""], ["proof (prove)\nusing this:\n  c \\<in> {c. (a, c) \\<in> r\\<^sup>* \\<and> c \\<notin> NF r}\n\ngoal (1 subgoal):\n 1. (a, c) \\<in> r\\<^sup>* &&& c \\<notin> NF r", "by auto"], ["proof (state)\nthis:\n  (a, c) \\<in> r\\<^sup>*\n  c \\<notin> NF r\n\ngoal (1 subgoal):\n 1. \\<And>c.\n       c \\<in> {c. (a, c) \\<in> r\\<^sup>* \\<and>\n                   c \\<notin> NF r} \\<Longrightarrow>\n       \\<exists>b.\n          (c, b) \\<in> r \\<and>\n          b \\<in> {c. (a, c) \\<in> r\\<^sup>* \\<and> c \\<notin> NF r}", "then"], ["proof (chain)\npicking this:\n  (a, c) \\<in> r\\<^sup>*\n  c \\<notin> NF r", "obtain d where \"(c, d) \\<in> r\""], ["proof (prove)\nusing this:\n  (a, c) \\<in> r\\<^sup>*\n  c \\<notin> NF r\n\ngoal (1 subgoal):\n 1. (\\<And>d. (c, d) \\<in> r \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  (c, d) \\<in> r\n\ngoal (1 subgoal):\n 1. \\<And>c.\n       c \\<in> {c. (a, c) \\<in> r\\<^sup>* \\<and>\n                   c \\<notin> NF r} \\<Longrightarrow>\n       \\<exists>b.\n          (c, b) \\<in> r \\<and>\n          b \\<in> {c. (a, c) \\<in> r\\<^sup>* \\<and> c \\<notin> NF r}", "with \\<open>(a, c) \\<in> r\\<^sup>*\\<close>"], ["proof (chain)\npicking this:\n  (a, c) \\<in> r\\<^sup>*\n  (c, d) \\<in> r", "have \"(a, d) \\<in> r\\<^sup>*\""], ["proof (prove)\nusing this:\n  (a, c) \\<in> r\\<^sup>*\n  (c, d) \\<in> r\n\ngoal (1 subgoal):\n 1. (a, d) \\<in> r\\<^sup>*", "by simp"], ["proof (state)\nthis:\n  (a, d) \\<in> r\\<^sup>*\n\ngoal (1 subgoal):\n 1. \\<And>c.\n       c \\<in> {c. (a, c) \\<in> r\\<^sup>* \\<and>\n                   c \\<notin> NF r} \\<Longrightarrow>\n       \\<exists>b.\n          (c, b) \\<in> r \\<and>\n          b \\<in> {c. (a, c) \\<in> r\\<^sup>* \\<and> c \\<notin> NF r}", "with A"], ["proof (chain)\npicking this:\n  \\<forall>b. (a, b) \\<in> r\\<^sup>* \\<longrightarrow> b \\<notin> NF r\n  (a, d) \\<in> r\\<^sup>*", "have \"d \\<notin> NF r\""], ["proof (prove)\nusing this:\n  \\<forall>b. (a, b) \\<in> r\\<^sup>* \\<longrightarrow> b \\<notin> NF r\n  (a, d) \\<in> r\\<^sup>*\n\ngoal (1 subgoal):\n 1. d \\<notin> NF r", "by simp"], ["proof (state)\nthis:\n  d \\<notin> NF r\n\ngoal (1 subgoal):\n 1. \\<And>c.\n       c \\<in> {c. (a, c) \\<in> r\\<^sup>* \\<and>\n                   c \\<notin> NF r} \\<Longrightarrow>\n       \\<exists>b.\n          (c, b) \\<in> r \\<and>\n          b \\<in> {c. (a, c) \\<in> r\\<^sup>* \\<and> c \\<notin> NF r}", "with \\<open>(c, d) \\<in> r\\<close> and \\<open>(a, c) \\<in> r\\<^sup>*\\<close>"], ["proof (chain)\npicking this:\n  (c, d) \\<in> r\n  (a, c) \\<in> r\\<^sup>*\n  d \\<notin> NF r", "show \"\\<exists>b. (c, b) \\<in> r \\<and> b \\<in> ?Q\""], ["proof (prove)\nusing this:\n  (c, d) \\<in> r\n  (a, c) \\<in> r\\<^sup>*\n  d \\<notin> NF r\n\ngoal (1 subgoal):\n 1. \\<exists>b.\n       (c, b) \\<in> r \\<and>\n       b \\<in> {c. (a, c) \\<in> r\\<^sup>* \\<and> c \\<notin> NF r}", "by auto"], ["proof (state)\nthis:\n  \\<exists>b.\n     (c, b) \\<in> r \\<and>\n     b \\<in> {c. (a, c) \\<in> r\\<^sup>* \\<and> c \\<notin> NF r}\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<forall>c\\<in>{c. (a, c) \\<in> r\\<^sup>* \\<and> c \\<notin> NF r}.\n     \\<exists>b.\n        (c, b) \\<in> r \\<and>\n        b \\<in> {c. (a, c) \\<in> r\\<^sup>* \\<and> c \\<notin> NF r}\n\ngoal (1 subgoal):\n 1. \\<nexists>b. b \\<in> r\\<^sup>! `` A \\<Longrightarrow> False", "with \\<open>a \\<in> ?Q\\<close>"], ["proof (chain)\npicking this:\n  a \\<in> {c. (a, c) \\<in> r\\<^sup>* \\<and> c \\<notin> NF r}\n  \\<forall>c\\<in>{c. (a, c) \\<in> r\\<^sup>* \\<and> c \\<notin> NF r}.\n     \\<exists>b.\n        (c, b) \\<in> r \\<and>\n        b \\<in> {c. (a, c) \\<in> r\\<^sup>* \\<and> c \\<notin> NF r}", "have \"a \\<in> ?Q \\<and> (\\<forall>c\\<in>?Q. \\<exists>b. (c, b) \\<in> r \\<and> b \\<in> ?Q)\""], ["proof (prove)\nusing this:\n  a \\<in> {c. (a, c) \\<in> r\\<^sup>* \\<and> c \\<notin> NF r}\n  \\<forall>c\\<in>{c. (a, c) \\<in> r\\<^sup>* \\<and> c \\<notin> NF r}.\n     \\<exists>b.\n        (c, b) \\<in> r \\<and>\n        b \\<in> {c. (a, c) \\<in> r\\<^sup>* \\<and> c \\<notin> NF r}\n\ngoal (1 subgoal):\n 1. a \\<in> {c. (a, c) \\<in> r\\<^sup>* \\<and> c \\<notin> NF r} \\<and>\n    (\\<forall>c\\<in>{c. (a, c) \\<in> r\\<^sup>* \\<and> c \\<notin> NF r}.\n        \\<exists>b.\n           (c, b) \\<in> r \\<and>\n           b \\<in> {c. (a, c) \\<in> r\\<^sup>* \\<and> c \\<notin> NF r})", "by auto"], ["proof (state)\nthis:\n  a \\<in> {c. (a, c) \\<in> r\\<^sup>* \\<and> c \\<notin> NF r} \\<and>\n  (\\<forall>c\\<in>{c. (a, c) \\<in> r\\<^sup>* \\<and> c \\<notin> NF r}.\n      \\<exists>b.\n         (c, b) \\<in> r \\<and>\n         b \\<in> {c. (a, c) \\<in> r\\<^sup>* \\<and> c \\<notin> NF r})\n\ngoal (1 subgoal):\n 1. \\<nexists>b. b \\<in> r\\<^sup>! `` A \\<Longrightarrow> False", "then"], ["proof (chain)\npicking this:\n  a \\<in> {c. (a, c) \\<in> r\\<^sup>* \\<and> c \\<notin> NF r} \\<and>\n  (\\<forall>c\\<in>{c. (a, c) \\<in> r\\<^sup>* \\<and> c \\<notin> NF r}.\n      \\<exists>b.\n         (c, b) \\<in> r \\<and>\n         b \\<in> {c. (a, c) \\<in> r\\<^sup>* \\<and> c \\<notin> NF r})", "have \"\\<exists>Q. a \\<in> Q \\<and> (\\<forall>c\\<in>Q. \\<exists>b. (c, b) \\<in> r \\<and> b \\<in> Q)\""], ["proof (prove)\nusing this:\n  a \\<in> {c. (a, c) \\<in> r\\<^sup>* \\<and> c \\<notin> NF r} \\<and>\n  (\\<forall>c\\<in>{c. (a, c) \\<in> r\\<^sup>* \\<and> c \\<notin> NF r}.\n      \\<exists>b.\n         (c, b) \\<in> r \\<and>\n         b \\<in> {c. (a, c) \\<in> r\\<^sup>* \\<and> c \\<notin> NF r})\n\ngoal (1 subgoal):\n 1. \\<exists>Q.\n       a \\<in> Q \\<and>\n       (\\<forall>c\\<in>Q. \\<exists>b. (c, b) \\<in> r \\<and> b \\<in> Q)", "by (rule exI [of _ \"?Q\"])"], ["proof (state)\nthis:\n  \\<exists>Q.\n     a \\<in> Q \\<and>\n     (\\<forall>c\\<in>Q. \\<exists>b. (c, b) \\<in> r \\<and> b \\<in> Q)\n\ngoal (1 subgoal):\n 1. \\<nexists>b. b \\<in> r\\<^sup>! `` A \\<Longrightarrow> False", "then"], ["proof (chain)\npicking this:\n  \\<exists>Q.\n     a \\<in> Q \\<and>\n     (\\<forall>c\\<in>Q. \\<exists>b. (c, b) \\<in> r \\<and> b \\<in> Q)", "have \"\\<not> (\\<forall>Q. a \\<in> Q \\<longrightarrow> (\\<exists>c\\<in>Q. \\<forall>b. (c, b) \\<in> r \\<longrightarrow> b \\<notin> Q))\""], ["proof (prove)\nusing this:\n  \\<exists>Q.\n     a \\<in> Q \\<and>\n     (\\<forall>c\\<in>Q. \\<exists>b. (c, b) \\<in> r \\<and> b \\<in> Q)\n\ngoal (1 subgoal):\n 1. \\<not> (\\<forall>Q.\n               a \\<in> Q \\<longrightarrow>\n               (\\<exists>c\\<in>Q.\n                   \\<forall>b.\n                      (c, b) \\<in> r \\<longrightarrow> b \\<notin> Q))", "by simp"], ["proof (state)\nthis:\n  \\<not> (\\<forall>Q.\n             a \\<in> Q \\<longrightarrow>\n             (\\<exists>c\\<in>Q.\n                 \\<forall>b. (c, b) \\<in> r \\<longrightarrow> b \\<notin> Q))\n\ngoal (1 subgoal):\n 1. \\<nexists>b. b \\<in> r\\<^sup>! `` A \\<Longrightarrow> False", "with SN_on_imp_on_minimal [of r a]"], ["proof (chain)\npicking this:\n  SN_on r {a} \\<Longrightarrow>\n  \\<forall>Q.\n     a \\<in> Q \\<longrightarrow>\n     (\\<exists>z\\<in>Q.\n         \\<forall>y. (z, y) \\<in> r \\<longrightarrow> y \\<notin> Q)\n  \\<not> (\\<forall>Q.\n             a \\<in> Q \\<longrightarrow>\n             (\\<exists>c\\<in>Q.\n                 \\<forall>b. (c, b) \\<in> r \\<longrightarrow> b \\<notin> Q))", "have \"\\<not> SN_on r {a}\""], ["proof (prove)\nusing this:\n  SN_on r {a} \\<Longrightarrow>\n  \\<forall>Q.\n     a \\<in> Q \\<longrightarrow>\n     (\\<exists>z\\<in>Q.\n         \\<forall>y. (z, y) \\<in> r \\<longrightarrow> y \\<notin> Q)\n  \\<not> (\\<forall>Q.\n             a \\<in> Q \\<longrightarrow>\n             (\\<exists>c\\<in>Q.\n                 \\<forall>b. (c, b) \\<in> r \\<longrightarrow> b \\<notin> Q))\n\ngoal (1 subgoal):\n 1. \\<not> SN_on r {a}", "by blast"], ["proof (state)\nthis:\n  \\<not> SN_on r {a}\n\ngoal (1 subgoal):\n 1. \\<nexists>b. b \\<in> r\\<^sup>! `` A \\<Longrightarrow> False", "with assms and \\<open>a \\<in> A\\<close> and SN_on_subset2 [of \"{a}\" A r]"], ["proof (chain)\npicking this:\n  SN_on r A\n  a \\<in> A\n  \\<lbrakk>{a} \\<subseteq> A; SN_on r A\\<rbrakk>\n  \\<Longrightarrow> SN_on r {a}\n  \\<not> SN_on r {a}", "show False"], ["proof (prove)\nusing this:\n  SN_on r A\n  a \\<in> A\n  \\<lbrakk>{a} \\<subseteq> A; SN_on r A\\<rbrakk>\n  \\<Longrightarrow> SN_on r {a}\n  \\<not> SN_on r {a}\n\ngoal (1 subgoal):\n 1. False", "by simp"], ["proof (state)\nthis:\n  False\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>b. b \\<in> r\\<^sup>! `` A\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma SN_on_imp_normalizability:\n  assumes \"SN_on r {a}\" shows \"\\<exists>b. (a, b) \\<in> r\\<^sup>!\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>b. (a, b) \\<in> r\\<^sup>!", "using SN_on_Image_normalizable [OF assms]"], ["proof (prove)\nusing this:\n  \\<forall>aa\\<in>{a}. \\<exists>b. b \\<in> r\\<^sup>! `` {a}\n\ngoal (1 subgoal):\n 1. \\<exists>b. (a, b) \\<in> r\\<^sup>!", "by auto"], ["", "subsection \\<open>Commutation\\<close>"], ["", "definition commute :: \"'a rel \\<Rightarrow> 'a rel \\<Rightarrow> bool\" where\n  \"commute r s \\<longleftrightarrow> ((r\\<inverse>)\\<^sup>* O s\\<^sup>*) \\<subseteq> (s\\<^sup>* O (r\\<inverse>)\\<^sup>*)\""], ["", "lemma CR_iff_self_commute: \"CR r = commute r r\""], ["proof (prove)\ngoal (1 subgoal):\n 1. CR r = commute r r", "unfolding commute_def CR_iff_meet_subset_join meet_def join_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. ((r\\<inverse>)\\<^sup>* O r\\<^sup>*\n     \\<subseteq> r\\<^sup>* O (r\\<inverse>)\\<^sup>*) =\n    ((r\\<inverse>)\\<^sup>* O r\\<^sup>*\n     \\<subseteq> r\\<^sup>* O (r\\<inverse>)\\<^sup>*)", "by simp"], ["", "(* FIXME: move somewhere else *)"], ["", "lemma rtrancl_imp_rtrancl_UN: \n  assumes \"(x, y) \\<in> r\\<^sup>*\" and \"r \\<in> I\"\n  shows \"(x, y) \\<in> (\\<Union>r\\<in>I. r)\\<^sup>*\" (is \"(x, y) \\<in> ?r\\<^sup>*\")"], ["proof (prove)\ngoal (1 subgoal):\n 1. (x, y) \\<in> (\\<Union>r\\<in>I. r)\\<^sup>*", "using assms"], ["proof (prove)\nusing this:\n  (x, y) \\<in> r\\<^sup>*\n  r \\<in> I\n\ngoal (1 subgoal):\n 1. (x, y) \\<in> (\\<Union>r\\<in>I. r)\\<^sup>*", "proof induct"], ["proof (state)\ngoal (2 subgoals):\n 1. r \\<in> I \\<Longrightarrow> (x, x) \\<in> (\\<Union>r\\<in>I. r)\\<^sup>*\n 2. \\<And>y z.\n       \\<lbrakk>(x, y) \\<in> r\\<^sup>*; (y, z) \\<in> r;\n        r \\<in> I \\<Longrightarrow>\n        (x, y) \\<in> (\\<Union>r\\<in>I. r)\\<^sup>*;\n        r \\<in> I\\<rbrakk>\n       \\<Longrightarrow> (x, z) \\<in> (\\<Union>r\\<in>I. r)\\<^sup>*", "case base"], ["proof (state)\nthis:\n  r \\<in> I\n\ngoal (2 subgoals):\n 1. r \\<in> I \\<Longrightarrow> (x, x) \\<in> (\\<Union>r\\<in>I. r)\\<^sup>*\n 2. \\<And>y z.\n       \\<lbrakk>(x, y) \\<in> r\\<^sup>*; (y, z) \\<in> r;\n        r \\<in> I \\<Longrightarrow>\n        (x, y) \\<in> (\\<Union>r\\<in>I. r)\\<^sup>*;\n        r \\<in> I\\<rbrakk>\n       \\<Longrightarrow> (x, z) \\<in> (\\<Union>r\\<in>I. r)\\<^sup>*", "then"], ["proof (chain)\npicking this:\n  r \\<in> I", "show ?case"], ["proof (prove)\nusing this:\n  r \\<in> I\n\ngoal (1 subgoal):\n 1. (x, x) \\<in> (\\<Union>r\\<in>I. r)\\<^sup>*", "by simp"], ["proof (state)\nthis:\n  (x, x) \\<in> (\\<Union>r\\<in>I. r)\\<^sup>*\n\ngoal (1 subgoal):\n 1. \\<And>y z.\n       \\<lbrakk>(x, y) \\<in> r\\<^sup>*; (y, z) \\<in> r;\n        r \\<in> I \\<Longrightarrow>\n        (x, y) \\<in> (\\<Union>r\\<in>I. r)\\<^sup>*;\n        r \\<in> I\\<rbrakk>\n       \\<Longrightarrow> (x, z) \\<in> (\\<Union>r\\<in>I. r)\\<^sup>*", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>y z.\n       \\<lbrakk>(x, y) \\<in> r\\<^sup>*; (y, z) \\<in> r;\n        r \\<in> I \\<Longrightarrow>\n        (x, y) \\<in> (\\<Union>r\\<in>I. r)\\<^sup>*;\n        r \\<in> I\\<rbrakk>\n       \\<Longrightarrow> (x, z) \\<in> (\\<Union>r\\<in>I. r)\\<^sup>*", "case (step y z)"], ["proof (state)\nthis:\n  (x, y) \\<in> r\\<^sup>*\n  (y, z) \\<in> r\n  r \\<in> I \\<Longrightarrow> (x, y) \\<in> (\\<Union>r\\<in>I. r)\\<^sup>*\n  r \\<in> I\n\ngoal (1 subgoal):\n 1. \\<And>y z.\n       \\<lbrakk>(x, y) \\<in> r\\<^sup>*; (y, z) \\<in> r;\n        r \\<in> I \\<Longrightarrow>\n        (x, y) \\<in> (\\<Union>r\\<in>I. r)\\<^sup>*;\n        r \\<in> I\\<rbrakk>\n       \\<Longrightarrow> (x, z) \\<in> (\\<Union>r\\<in>I. r)\\<^sup>*", "then"], ["proof (chain)\npicking this:\n  (x, y) \\<in> r\\<^sup>*\n  (y, z) \\<in> r\n  r \\<in> I \\<Longrightarrow> (x, y) \\<in> (\\<Union>r\\<in>I. r)\\<^sup>*\n  r \\<in> I", "have \"(x, y) \\<in> ?r\\<^sup>*\""], ["proof (prove)\nusing this:\n  (x, y) \\<in> r\\<^sup>*\n  (y, z) \\<in> r\n  r \\<in> I \\<Longrightarrow> (x, y) \\<in> (\\<Union>r\\<in>I. r)\\<^sup>*\n  r \\<in> I\n\ngoal (1 subgoal):\n 1. (x, y) \\<in> (\\<Union>r\\<in>I. r)\\<^sup>*", "by simp"], ["proof (state)\nthis:\n  (x, y) \\<in> (\\<Union>r\\<in>I. r)\\<^sup>*\n\ngoal (1 subgoal):\n 1. \\<And>y z.\n       \\<lbrakk>(x, y) \\<in> r\\<^sup>*; (y, z) \\<in> r;\n        r \\<in> I \\<Longrightarrow>\n        (x, y) \\<in> (\\<Union>r\\<in>I. r)\\<^sup>*;\n        r \\<in> I\\<rbrakk>\n       \\<Longrightarrow> (x, z) \\<in> (\\<Union>r\\<in>I. r)\\<^sup>*", "from \\<open>(y, z) \\<in> r\\<close> and \\<open>r \\<in> I\\<close>"], ["proof (chain)\npicking this:\n  (y, z) \\<in> r\n  r \\<in> I", "have \"(y, z) \\<in> ?r\\<^sup>*\""], ["proof (prove)\nusing this:\n  (y, z) \\<in> r\n  r \\<in> I\n\ngoal (1 subgoal):\n 1. (y, z) \\<in> (\\<Union>r\\<in>I. r)\\<^sup>*", "by auto"], ["proof (state)\nthis:\n  (y, z) \\<in> (\\<Union>r\\<in>I. r)\\<^sup>*\n\ngoal (1 subgoal):\n 1. \\<And>y z.\n       \\<lbrakk>(x, y) \\<in> r\\<^sup>*; (y, z) \\<in> r;\n        r \\<in> I \\<Longrightarrow>\n        (x, y) \\<in> (\\<Union>r\\<in>I. r)\\<^sup>*;\n        r \\<in> I\\<rbrakk>\n       \\<Longrightarrow> (x, z) \\<in> (\\<Union>r\\<in>I. r)\\<^sup>*", "with \\<open>(x, y) \\<in> ?r\\<^sup>*\\<close>"], ["proof (chain)\npicking this:\n  (x, y) \\<in> (\\<Union>r\\<in>I. r)\\<^sup>*\n  (y, z) \\<in> (\\<Union>r\\<in>I. r)\\<^sup>*", "show ?case"], ["proof (prove)\nusing this:\n  (x, y) \\<in> (\\<Union>r\\<in>I. r)\\<^sup>*\n  (y, z) \\<in> (\\<Union>r\\<in>I. r)\\<^sup>*\n\ngoal (1 subgoal):\n 1. (x, z) \\<in> (\\<Union>r\\<in>I. r)\\<^sup>*", "by auto"], ["proof (state)\nthis:\n  (x, z) \\<in> (\\<Union>r\\<in>I. r)\\<^sup>*\n\ngoal:\nNo subgoals!", "qed"], ["", "definition quasi_commute :: \"'a rel \\<Rightarrow> 'a rel \\<Rightarrow> bool\" where\n  \"quasi_commute r s \\<longleftrightarrow> (s O r) \\<subseteq> r O (r \\<union> s)\\<^sup>*\""], ["", "lemma rtrancl_union_subset_rtrancl_union_trancl: \"(r \\<union> s\\<^sup>+)\\<^sup>* = (r \\<union> s)\\<^sup>*\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (r \\<union> s\\<^sup>+)\\<^sup>* = (r \\<union> s)\\<^sup>*", "proof"], ["proof (state)\ngoal (2 subgoals):\n 1. (r \\<union> s\\<^sup>+)\\<^sup>* \\<subseteq> (r \\<union> s)\\<^sup>*\n 2. (r \\<union> s)\\<^sup>* \\<subseteq> (r \\<union> s\\<^sup>+)\\<^sup>*", "show \"(r \\<union> s\\<^sup>+)\\<^sup>* \\<subseteq> (r \\<union> s)\\<^sup>*\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (r \\<union> s\\<^sup>+)\\<^sup>* \\<subseteq> (r \\<union> s)\\<^sup>*", "proof (rule subrelI)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x y.\n       (x, y) \\<in> (r \\<union> s\\<^sup>+)\\<^sup>* \\<Longrightarrow>\n       (x, y) \\<in> (r \\<union> s)\\<^sup>*", "fix x y"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x y.\n       (x, y) \\<in> (r \\<union> s\\<^sup>+)\\<^sup>* \\<Longrightarrow>\n       (x, y) \\<in> (r \\<union> s)\\<^sup>*", "assume \"(x, y) \\<in> (r \\<union> s\\<^sup>+)\\<^sup>*\""], ["proof (state)\nthis:\n  (x, y) \\<in> (r \\<union> s\\<^sup>+)\\<^sup>*\n\ngoal (1 subgoal):\n 1. \\<And>x y.\n       (x, y) \\<in> (r \\<union> s\\<^sup>+)\\<^sup>* \\<Longrightarrow>\n       (x, y) \\<in> (r \\<union> s)\\<^sup>*", "then"], ["proof (chain)\npicking this:\n  (x, y) \\<in> (r \\<union> s\\<^sup>+)\\<^sup>*", "show \"(x, y) \\<in> (r \\<union> s)\\<^sup>*\""], ["proof (prove)\nusing this:\n  (x, y) \\<in> (r \\<union> s\\<^sup>+)\\<^sup>*\n\ngoal (1 subgoal):\n 1. (x, y) \\<in> (r \\<union> s)\\<^sup>*", "proof (induct)"], ["proof (state)\ngoal (2 subgoals):\n 1. (x, x) \\<in> (r \\<union> s)\\<^sup>*\n 2. \\<And>y z.\n       \\<lbrakk>(x, y) \\<in> (r \\<union> s\\<^sup>+)\\<^sup>*;\n        (y, z) \\<in> r \\<union> s\\<^sup>+;\n        (x, y) \\<in> (r \\<union> s)\\<^sup>*\\<rbrakk>\n       \\<Longrightarrow> (x, z) \\<in> (r \\<union> s)\\<^sup>*", "case base"], ["proof (state)\nthis:\n  \n\ngoal (2 subgoals):\n 1. (x, x) \\<in> (r \\<union> s)\\<^sup>*\n 2. \\<And>y z.\n       \\<lbrakk>(x, y) \\<in> (r \\<union> s\\<^sup>+)\\<^sup>*;\n        (y, z) \\<in> r \\<union> s\\<^sup>+;\n        (x, y) \\<in> (r \\<union> s)\\<^sup>*\\<rbrakk>\n       \\<Longrightarrow> (x, z) \\<in> (r \\<union> s)\\<^sup>*", "then"], ["proof (chain)\npicking this:", "show ?case"], ["proof (prove)\ngoal (1 subgoal):\n 1. (x, x) \\<in> (r \\<union> s)\\<^sup>*", "by auto"], ["proof (state)\nthis:\n  (x, x) \\<in> (r \\<union> s)\\<^sup>*\n\ngoal (1 subgoal):\n 1. \\<And>y z.\n       \\<lbrakk>(x, y) \\<in> (r \\<union> s\\<^sup>+)\\<^sup>*;\n        (y, z) \\<in> r \\<union> s\\<^sup>+;\n        (x, y) \\<in> (r \\<union> s)\\<^sup>*\\<rbrakk>\n       \\<Longrightarrow> (x, z) \\<in> (r \\<union> s)\\<^sup>*", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>y z.\n       \\<lbrakk>(x, y) \\<in> (r \\<union> s\\<^sup>+)\\<^sup>*;\n        (y, z) \\<in> r \\<union> s\\<^sup>+;\n        (x, y) \\<in> (r \\<union> s)\\<^sup>*\\<rbrakk>\n       \\<Longrightarrow> (x, z) \\<in> (r \\<union> s)\\<^sup>*", "case (step y z)"], ["proof (state)\nthis:\n  (x, y) \\<in> (r \\<union> s\\<^sup>+)\\<^sup>*\n  (y, z) \\<in> r \\<union> s\\<^sup>+\n  (x, y) \\<in> (r \\<union> s)\\<^sup>*\n\ngoal (1 subgoal):\n 1. \\<And>y z.\n       \\<lbrakk>(x, y) \\<in> (r \\<union> s\\<^sup>+)\\<^sup>*;\n        (y, z) \\<in> r \\<union> s\\<^sup>+;\n        (x, y) \\<in> (r \\<union> s)\\<^sup>*\\<rbrakk>\n       \\<Longrightarrow> (x, z) \\<in> (r \\<union> s)\\<^sup>*", "then"], ["proof (chain)\npicking this:\n  (x, y) \\<in> (r \\<union> s\\<^sup>+)\\<^sup>*\n  (y, z) \\<in> r \\<union> s\\<^sup>+\n  (x, y) \\<in> (r \\<union> s)\\<^sup>*", "have \"(y, z) \\<in> r \\<or> (y, z) \\<in> s\\<^sup>+\""], ["proof (prove)\nusing this:\n  (x, y) \\<in> (r \\<union> s\\<^sup>+)\\<^sup>*\n  (y, z) \\<in> r \\<union> s\\<^sup>+\n  (x, y) \\<in> (r \\<union> s)\\<^sup>*\n\ngoal (1 subgoal):\n 1. (y, z) \\<in> r \\<or> (y, z) \\<in> s\\<^sup>+", "by auto"], ["proof (state)\nthis:\n  (y, z) \\<in> r \\<or> (y, z) \\<in> s\\<^sup>+\n\ngoal (1 subgoal):\n 1. \\<And>y z.\n       \\<lbrakk>(x, y) \\<in> (r \\<union> s\\<^sup>+)\\<^sup>*;\n        (y, z) \\<in> r \\<union> s\\<^sup>+;\n        (x, y) \\<in> (r \\<union> s)\\<^sup>*\\<rbrakk>\n       \\<Longrightarrow> (x, z) \\<in> (r \\<union> s)\\<^sup>*", "then"], ["proof (chain)\npicking this:\n  (y, z) \\<in> r \\<or> (y, z) \\<in> s\\<^sup>+", "have \"(y, z) \\<in> (r \\<union> s)\\<^sup>*\""], ["proof (prove)\nusing this:\n  (y, z) \\<in> r \\<or> (y, z) \\<in> s\\<^sup>+\n\ngoal (1 subgoal):\n 1. (y, z) \\<in> (r \\<union> s)\\<^sup>*", "proof"], ["proof (state)\ngoal (2 subgoals):\n 1. (y, z) \\<in> r \\<Longrightarrow> (y, z) \\<in> (r \\<union> s)\\<^sup>*\n 2. (y, z) \\<in> s\\<^sup>+ \\<Longrightarrow>\n    (y, z) \\<in> (r \\<union> s)\\<^sup>*", "assume \"(y, z) \\<in> r\""], ["proof (state)\nthis:\n  (y, z) \\<in> r\n\ngoal (2 subgoals):\n 1. (y, z) \\<in> r \\<Longrightarrow> (y, z) \\<in> (r \\<union> s)\\<^sup>*\n 2. (y, z) \\<in> s\\<^sup>+ \\<Longrightarrow>\n    (y, z) \\<in> (r \\<union> s)\\<^sup>*", "then"], ["proof (chain)\npicking this:\n  (y, z) \\<in> r", "show ?thesis"], ["proof (prove)\nusing this:\n  (y, z) \\<in> r\n\ngoal (1 subgoal):\n 1. (y, z) \\<in> (r \\<union> s)\\<^sup>*", "by auto"], ["proof (state)\nthis:\n  (y, z) \\<in> (r \\<union> s)\\<^sup>*\n\ngoal (1 subgoal):\n 1. (y, z) \\<in> s\\<^sup>+ \\<Longrightarrow>\n    (y, z) \\<in> (r \\<union> s)\\<^sup>*", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. (y, z) \\<in> s\\<^sup>+ \\<Longrightarrow>\n    (y, z) \\<in> (r \\<union> s)\\<^sup>*", "assume \"(y, z) \\<in> s\\<^sup>+\""], ["proof (state)\nthis:\n  (y, z) \\<in> s\\<^sup>+\n\ngoal (1 subgoal):\n 1. (y, z) \\<in> s\\<^sup>+ \\<Longrightarrow>\n    (y, z) \\<in> (r \\<union> s)\\<^sup>*", "then"], ["proof (chain)\npicking this:\n  (y, z) \\<in> s\\<^sup>+", "have \"(y, z) \\<in> s\\<^sup>*\""], ["proof (prove)\nusing this:\n  (y, z) \\<in> s\\<^sup>+\n\ngoal (1 subgoal):\n 1. (y, z) \\<in> s\\<^sup>*", "by auto"], ["proof (state)\nthis:\n  (y, z) \\<in> s\\<^sup>*\n\ngoal (1 subgoal):\n 1. (y, z) \\<in> s\\<^sup>+ \\<Longrightarrow>\n    (y, z) \\<in> (r \\<union> s)\\<^sup>*", "then"], ["proof (chain)\npicking this:\n  (y, z) \\<in> s\\<^sup>*", "have \"(y, z) \\<in> r\\<^sup>* \\<union> s\\<^sup>*\""], ["proof (prove)\nusing this:\n  (y, z) \\<in> s\\<^sup>*\n\ngoal (1 subgoal):\n 1. (y, z) \\<in> r\\<^sup>* \\<union> s\\<^sup>*", "by auto"], ["proof (state)\nthis:\n  (y, z) \\<in> r\\<^sup>* \\<union> s\\<^sup>*\n\ngoal (1 subgoal):\n 1. (y, z) \\<in> s\\<^sup>+ \\<Longrightarrow>\n    (y, z) \\<in> (r \\<union> s)\\<^sup>*", "then"], ["proof (chain)\npicking this:\n  (y, z) \\<in> r\\<^sup>* \\<union> s\\<^sup>*", "show ?thesis"], ["proof (prove)\nusing this:\n  (y, z) \\<in> r\\<^sup>* \\<union> s\\<^sup>*\n\ngoal (1 subgoal):\n 1. (y, z) \\<in> (r \\<union> s)\\<^sup>*", "using rtrancl_Un_subset"], ["proof (prove)\nusing this:\n  (y, z) \\<in> r\\<^sup>* \\<union> s\\<^sup>*\n  ?R\\<^sup>* \\<union> ?S\\<^sup>* \\<subseteq> (?R \\<union> ?S)\\<^sup>*\n\ngoal (1 subgoal):\n 1. (y, z) \\<in> (r \\<union> s)\\<^sup>*", "by auto"], ["proof (state)\nthis:\n  (y, z) \\<in> (r \\<union> s)\\<^sup>*\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  (y, z) \\<in> (r \\<union> s)\\<^sup>*\n\ngoal (1 subgoal):\n 1. \\<And>y z.\n       \\<lbrakk>(x, y) \\<in> (r \\<union> s\\<^sup>+)\\<^sup>*;\n        (y, z) \\<in> r \\<union> s\\<^sup>+;\n        (x, y) \\<in> (r \\<union> s)\\<^sup>*\\<rbrakk>\n       \\<Longrightarrow> (x, z) \\<in> (r \\<union> s)\\<^sup>*", "with \\<open>(x, y) \\<in> (r \\<union> s)\\<^sup>*\\<close>"], ["proof (chain)\npicking this:\n  (x, y) \\<in> (r \\<union> s)\\<^sup>*\n  (y, z) \\<in> (r \\<union> s)\\<^sup>*", "show ?case"], ["proof (prove)\nusing this:\n  (x, y) \\<in> (r \\<union> s)\\<^sup>*\n  (y, z) \\<in> (r \\<union> s)\\<^sup>*\n\ngoal (1 subgoal):\n 1. (x, z) \\<in> (r \\<union> s)\\<^sup>*", "by simp"], ["proof (state)\nthis:\n  (x, z) \\<in> (r \\<union> s)\\<^sup>*\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  (x, y) \\<in> (r \\<union> s)\\<^sup>*\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  (r \\<union> s\\<^sup>+)\\<^sup>* \\<subseteq> (r \\<union> s)\\<^sup>*\n\ngoal (1 subgoal):\n 1. (r \\<union> s)\\<^sup>* \\<subseteq> (r \\<union> s\\<^sup>+)\\<^sup>*", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. (r \\<union> s)\\<^sup>* \\<subseteq> (r \\<union> s\\<^sup>+)\\<^sup>*", "show \"(r \\<union> s)\\<^sup>* \\<subseteq> (r \\<union> s\\<^sup>+)\\<^sup>*\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (r \\<union> s)\\<^sup>* \\<subseteq> (r \\<union> s\\<^sup>+)\\<^sup>*", "proof (rule subrelI)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x y.\n       (x, y) \\<in> (r \\<union> s)\\<^sup>* \\<Longrightarrow>\n       (x, y) \\<in> (r \\<union> s\\<^sup>+)\\<^sup>*", "fix x y"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x y.\n       (x, y) \\<in> (r \\<union> s)\\<^sup>* \\<Longrightarrow>\n       (x, y) \\<in> (r \\<union> s\\<^sup>+)\\<^sup>*", "assume \"(x, y) \\<in> (r \\<union> s)\\<^sup>*\""], ["proof (state)\nthis:\n  (x, y) \\<in> (r \\<union> s)\\<^sup>*\n\ngoal (1 subgoal):\n 1. \\<And>x y.\n       (x, y) \\<in> (r \\<union> s)\\<^sup>* \\<Longrightarrow>\n       (x, y) \\<in> (r \\<union> s\\<^sup>+)\\<^sup>*", "then"], ["proof (chain)\npicking this:\n  (x, y) \\<in> (r \\<union> s)\\<^sup>*", "show \"(x, y) \\<in> (r \\<union> s\\<^sup>+)\\<^sup>*\""], ["proof (prove)\nusing this:\n  (x, y) \\<in> (r \\<union> s)\\<^sup>*\n\ngoal (1 subgoal):\n 1. (x, y) \\<in> (r \\<union> s\\<^sup>+)\\<^sup>*", "proof (induct)"], ["proof (state)\ngoal (2 subgoals):\n 1. (x, x) \\<in> (r \\<union> s\\<^sup>+)\\<^sup>*\n 2. \\<And>y z.\n       \\<lbrakk>(x, y) \\<in> (r \\<union> s)\\<^sup>*;\n        (y, z) \\<in> r \\<union> s;\n        (x, y) \\<in> (r \\<union> s\\<^sup>+)\\<^sup>*\\<rbrakk>\n       \\<Longrightarrow> (x, z) \\<in> (r \\<union> s\\<^sup>+)\\<^sup>*", "case base"], ["proof (state)\nthis:\n  \n\ngoal (2 subgoals):\n 1. (x, x) \\<in> (r \\<union> s\\<^sup>+)\\<^sup>*\n 2. \\<And>y z.\n       \\<lbrakk>(x, y) \\<in> (r \\<union> s)\\<^sup>*;\n        (y, z) \\<in> r \\<union> s;\n        (x, y) \\<in> (r \\<union> s\\<^sup>+)\\<^sup>*\\<rbrakk>\n       \\<Longrightarrow> (x, z) \\<in> (r \\<union> s\\<^sup>+)\\<^sup>*", "then"], ["proof (chain)\npicking this:", "show ?case"], ["proof (prove)\ngoal (1 subgoal):\n 1. (x, x) \\<in> (r \\<union> s\\<^sup>+)\\<^sup>*", "by auto"], ["proof (state)\nthis:\n  (x, x) \\<in> (r \\<union> s\\<^sup>+)\\<^sup>*\n\ngoal (1 subgoal):\n 1. \\<And>y z.\n       \\<lbrakk>(x, y) \\<in> (r \\<union> s)\\<^sup>*;\n        (y, z) \\<in> r \\<union> s;\n        (x, y) \\<in> (r \\<union> s\\<^sup>+)\\<^sup>*\\<rbrakk>\n       \\<Longrightarrow> (x, z) \\<in> (r \\<union> s\\<^sup>+)\\<^sup>*", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>y z.\n       \\<lbrakk>(x, y) \\<in> (r \\<union> s)\\<^sup>*;\n        (y, z) \\<in> r \\<union> s;\n        (x, y) \\<in> (r \\<union> s\\<^sup>+)\\<^sup>*\\<rbrakk>\n       \\<Longrightarrow> (x, z) \\<in> (r \\<union> s\\<^sup>+)\\<^sup>*", "case (step y z)"], ["proof (state)\nthis:\n  (x, y) \\<in> (r \\<union> s)\\<^sup>*\n  (y, z) \\<in> r \\<union> s\n  (x, y) \\<in> (r \\<union> s\\<^sup>+)\\<^sup>*\n\ngoal (1 subgoal):\n 1. \\<And>y z.\n       \\<lbrakk>(x, y) \\<in> (r \\<union> s)\\<^sup>*;\n        (y, z) \\<in> r \\<union> s;\n        (x, y) \\<in> (r \\<union> s\\<^sup>+)\\<^sup>*\\<rbrakk>\n       \\<Longrightarrow> (x, z) \\<in> (r \\<union> s\\<^sup>+)\\<^sup>*", "then"], ["proof (chain)\npicking this:\n  (x, y) \\<in> (r \\<union> s)\\<^sup>*\n  (y, z) \\<in> r \\<union> s\n  (x, y) \\<in> (r \\<union> s\\<^sup>+)\\<^sup>*", "have \"(y, z) \\<in> (r \\<union> s\\<^sup>+)\\<^sup>*\""], ["proof (prove)\nusing this:\n  (x, y) \\<in> (r \\<union> s)\\<^sup>*\n  (y, z) \\<in> r \\<union> s\n  (x, y) \\<in> (r \\<union> s\\<^sup>+)\\<^sup>*\n\ngoal (1 subgoal):\n 1. (y, z) \\<in> (r \\<union> s\\<^sup>+)\\<^sup>*", "by auto"], ["proof (state)\nthis:\n  (y, z) \\<in> (r \\<union> s\\<^sup>+)\\<^sup>*\n\ngoal (1 subgoal):\n 1. \\<And>y z.\n       \\<lbrakk>(x, y) \\<in> (r \\<union> s)\\<^sup>*;\n        (y, z) \\<in> r \\<union> s;\n        (x, y) \\<in> (r \\<union> s\\<^sup>+)\\<^sup>*\\<rbrakk>\n       \\<Longrightarrow> (x, z) \\<in> (r \\<union> s\\<^sup>+)\\<^sup>*", "with \\<open>(x, y) \\<in> (r \\<union> s\\<^sup>+)\\<^sup>*\\<close>"], ["proof (chain)\npicking this:\n  (x, y) \\<in> (r \\<union> s\\<^sup>+)\\<^sup>*\n  (y, z) \\<in> (r \\<union> s\\<^sup>+)\\<^sup>*", "show ?case"], ["proof (prove)\nusing this:\n  (x, y) \\<in> (r \\<union> s\\<^sup>+)\\<^sup>*\n  (y, z) \\<in> (r \\<union> s\\<^sup>+)\\<^sup>*\n\ngoal (1 subgoal):\n 1. (x, z) \\<in> (r \\<union> s\\<^sup>+)\\<^sup>*", "by auto"], ["proof (state)\nthis:\n  (x, z) \\<in> (r \\<union> s\\<^sup>+)\\<^sup>*\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  (x, y) \\<in> (r \\<union> s\\<^sup>+)\\<^sup>*\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  (r \\<union> s)\\<^sup>* \\<subseteq> (r \\<union> s\\<^sup>+)\\<^sup>*\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma qc_imp_qc_trancl:\n  assumes \"quasi_commute r s\" shows \"quasi_commute r (s\\<^sup>+)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. quasi_commute r (s\\<^sup>+)", "unfolding quasi_commute_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. s\\<^sup>+ O r \\<subseteq> r O (r \\<union> s\\<^sup>+)\\<^sup>*", "proof (rule subrelI)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x y.\n       (x, y) \\<in> s\\<^sup>+ O r \\<Longrightarrow>\n       (x, y) \\<in> r O (r \\<union> s\\<^sup>+)\\<^sup>*", "fix x z"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x y.\n       (x, y) \\<in> s\\<^sup>+ O r \\<Longrightarrow>\n       (x, y) \\<in> r O (r \\<union> s\\<^sup>+)\\<^sup>*", "assume \"(x, z) \\<in> s\\<^sup>+ O r\""], ["proof (state)\nthis:\n  (x, z) \\<in> s\\<^sup>+ O r\n\ngoal (1 subgoal):\n 1. \\<And>x y.\n       (x, y) \\<in> s\\<^sup>+ O r \\<Longrightarrow>\n       (x, y) \\<in> r O (r \\<union> s\\<^sup>+)\\<^sup>*", "then"], ["proof (chain)\npicking this:\n  (x, z) \\<in> s\\<^sup>+ O r", "obtain y where \"(x, y) \\<in> s\\<^sup>+\" and \"(y, z) \\<in> r\""], ["proof (prove)\nusing this:\n  (x, z) \\<in> s\\<^sup>+ O r\n\ngoal (1 subgoal):\n 1. (\\<And>y.\n        \\<lbrakk>(x, y) \\<in> s\\<^sup>+; (y, z) \\<in> r\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by best"], ["proof (state)\nthis:\n  (x, y) \\<in> s\\<^sup>+\n  (y, z) \\<in> r\n\ngoal (1 subgoal):\n 1. \\<And>x y.\n       (x, y) \\<in> s\\<^sup>+ O r \\<Longrightarrow>\n       (x, y) \\<in> r O (r \\<union> s\\<^sup>+)\\<^sup>*", "then"], ["proof (chain)\npicking this:\n  (x, y) \\<in> s\\<^sup>+\n  (y, z) \\<in> r", "show \"(x, z) \\<in> r O (r \\<union> s\\<^sup>+)\\<^sup>*\""], ["proof (prove)\nusing this:\n  (x, y) \\<in> s\\<^sup>+\n  (y, z) \\<in> r\n\ngoal (1 subgoal):\n 1. (x, z) \\<in> r O (r \\<union> s\\<^sup>+)\\<^sup>*", "proof (induct arbitrary: z)"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>y z.\n       \\<lbrakk>(x, y) \\<in> s; (y, z) \\<in> r\\<rbrakk>\n       \\<Longrightarrow> (x, z) \\<in> r O (r \\<union> s\\<^sup>+)\\<^sup>*\n 2. \\<And>y z za.\n       \\<lbrakk>(x, y) \\<in> s\\<^sup>+; (y, z) \\<in> s;\n        \\<And>z.\n           (y, z) \\<in> r \\<Longrightarrow>\n           (x, z) \\<in> r O (r \\<union> s\\<^sup>+)\\<^sup>*;\n        (z, za) \\<in> r\\<rbrakk>\n       \\<Longrightarrow> (x, za) \\<in> r O (r \\<union> s\\<^sup>+)\\<^sup>*", "case (base y)"], ["proof (state)\nthis:\n  (x, y) \\<in> s\n  (y, z) \\<in> r\n\ngoal (2 subgoals):\n 1. \\<And>y z.\n       \\<lbrakk>(x, y) \\<in> s; (y, z) \\<in> r\\<rbrakk>\n       \\<Longrightarrow> (x, z) \\<in> r O (r \\<union> s\\<^sup>+)\\<^sup>*\n 2. \\<And>y z za.\n       \\<lbrakk>(x, y) \\<in> s\\<^sup>+; (y, z) \\<in> s;\n        \\<And>z.\n           (y, z) \\<in> r \\<Longrightarrow>\n           (x, z) \\<in> r O (r \\<union> s\\<^sup>+)\\<^sup>*;\n        (z, za) \\<in> r\\<rbrakk>\n       \\<Longrightarrow> (x, za) \\<in> r O (r \\<union> s\\<^sup>+)\\<^sup>*", "then"], ["proof (chain)\npicking this:\n  (x, y) \\<in> s\n  (y, z) \\<in> r", "have \"(x, z) \\<in> (s O r)\""], ["proof (prove)\nusing this:\n  (x, y) \\<in> s\n  (y, z) \\<in> r\n\ngoal (1 subgoal):\n 1. (x, z) \\<in> s O r", "by auto"], ["proof (state)\nthis:\n  (x, z) \\<in> s O r\n\ngoal (2 subgoals):\n 1. \\<And>y z.\n       \\<lbrakk>(x, y) \\<in> s; (y, z) \\<in> r\\<rbrakk>\n       \\<Longrightarrow> (x, z) \\<in> r O (r \\<union> s\\<^sup>+)\\<^sup>*\n 2. \\<And>y z za.\n       \\<lbrakk>(x, y) \\<in> s\\<^sup>+; (y, z) \\<in> s;\n        \\<And>z.\n           (y, z) \\<in> r \\<Longrightarrow>\n           (x, z) \\<in> r O (r \\<union> s\\<^sup>+)\\<^sup>*;\n        (z, za) \\<in> r\\<rbrakk>\n       \\<Longrightarrow> (x, za) \\<in> r O (r \\<union> s\\<^sup>+)\\<^sup>*", "with assms"], ["proof (chain)\npicking this:\n  quasi_commute r s\n  (x, z) \\<in> s O r", "have \"(x, z) \\<in> r O (r \\<union> s)\\<^sup>*\""], ["proof (prove)\nusing this:\n  quasi_commute r s\n  (x, z) \\<in> s O r\n\ngoal (1 subgoal):\n 1. (x, z) \\<in> r O (r \\<union> s)\\<^sup>*", "unfolding quasi_commute_def"], ["proof (prove)\nusing this:\n  s O r \\<subseteq> r O (r \\<union> s)\\<^sup>*\n  (x, z) \\<in> s O r\n\ngoal (1 subgoal):\n 1. (x, z) \\<in> r O (r \\<union> s)\\<^sup>*", "by auto"], ["proof (state)\nthis:\n  (x, z) \\<in> r O (r \\<union> s)\\<^sup>*\n\ngoal (2 subgoals):\n 1. \\<And>y z.\n       \\<lbrakk>(x, y) \\<in> s; (y, z) \\<in> r\\<rbrakk>\n       \\<Longrightarrow> (x, z) \\<in> r O (r \\<union> s\\<^sup>+)\\<^sup>*\n 2. \\<And>y z za.\n       \\<lbrakk>(x, y) \\<in> s\\<^sup>+; (y, z) \\<in> s;\n        \\<And>z.\n           (y, z) \\<in> r \\<Longrightarrow>\n           (x, z) \\<in> r O (r \\<union> s\\<^sup>+)\\<^sup>*;\n        (z, za) \\<in> r\\<rbrakk>\n       \\<Longrightarrow> (x, za) \\<in> r O (r \\<union> s\\<^sup>+)\\<^sup>*", "then"], ["proof (chain)\npicking this:\n  (x, z) \\<in> r O (r \\<union> s)\\<^sup>*", "show ?case"], ["proof (prove)\nusing this:\n  (x, z) \\<in> r O (r \\<union> s)\\<^sup>*\n\ngoal (1 subgoal):\n 1. (x, z) \\<in> r O (r \\<union> s\\<^sup>+)\\<^sup>*", "using rtrancl_union_subset_rtrancl_union_trancl"], ["proof (prove)\nusing this:\n  (x, z) \\<in> r O (r \\<union> s)\\<^sup>*\n  (?r \\<union> ?s\\<^sup>+)\\<^sup>* = (?r \\<union> ?s)\\<^sup>*\n\ngoal (1 subgoal):\n 1. (x, z) \\<in> r O (r \\<union> s\\<^sup>+)\\<^sup>*", "by auto"], ["proof (state)\nthis:\n  (x, z) \\<in> r O (r \\<union> s\\<^sup>+)\\<^sup>*\n\ngoal (1 subgoal):\n 1. \\<And>y z za.\n       \\<lbrakk>(x, y) \\<in> s\\<^sup>+; (y, z) \\<in> s;\n        \\<And>z.\n           (y, z) \\<in> r \\<Longrightarrow>\n           (x, z) \\<in> r O (r \\<union> s\\<^sup>+)\\<^sup>*;\n        (z, za) \\<in> r\\<rbrakk>\n       \\<Longrightarrow> (x, za) \\<in> r O (r \\<union> s\\<^sup>+)\\<^sup>*", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>y z za.\n       \\<lbrakk>(x, y) \\<in> s\\<^sup>+; (y, z) \\<in> s;\n        \\<And>z.\n           (y, z) \\<in> r \\<Longrightarrow>\n           (x, z) \\<in> r O (r \\<union> s\\<^sup>+)\\<^sup>*;\n        (z, za) \\<in> r\\<rbrakk>\n       \\<Longrightarrow> (x, za) \\<in> r O (r \\<union> s\\<^sup>+)\\<^sup>*", "case (step a b)"], ["proof (state)\nthis:\n  (x, a) \\<in> s\\<^sup>+\n  (a, b) \\<in> s\n  (a, ?z) \\<in> r \\<Longrightarrow>\n  (x, ?z) \\<in> r O (r \\<union> s\\<^sup>+)\\<^sup>*\n  (b, z) \\<in> r\n\ngoal (1 subgoal):\n 1. \\<And>y z za.\n       \\<lbrakk>(x, y) \\<in> s\\<^sup>+; (y, z) \\<in> s;\n        \\<And>z.\n           (y, z) \\<in> r \\<Longrightarrow>\n           (x, z) \\<in> r O (r \\<union> s\\<^sup>+)\\<^sup>*;\n        (z, za) \\<in> r\\<rbrakk>\n       \\<Longrightarrow> (x, za) \\<in> r O (r \\<union> s\\<^sup>+)\\<^sup>*", "then"], ["proof (chain)\npicking this:\n  (x, a) \\<in> s\\<^sup>+\n  (a, b) \\<in> s\n  (a, ?z) \\<in> r \\<Longrightarrow>\n  (x, ?z) \\<in> r O (r \\<union> s\\<^sup>+)\\<^sup>*\n  (b, z) \\<in> r", "have \"(a, z) \\<in> (s O r)\""], ["proof (prove)\nusing this:\n  (x, a) \\<in> s\\<^sup>+\n  (a, b) \\<in> s\n  (a, ?z) \\<in> r \\<Longrightarrow>\n  (x, ?z) \\<in> r O (r \\<union> s\\<^sup>+)\\<^sup>*\n  (b, z) \\<in> r\n\ngoal (1 subgoal):\n 1. (a, z) \\<in> s O r", "by auto"], ["proof (state)\nthis:\n  (a, z) \\<in> s O r\n\ngoal (1 subgoal):\n 1. \\<And>y z za.\n       \\<lbrakk>(x, y) \\<in> s\\<^sup>+; (y, z) \\<in> s;\n        \\<And>z.\n           (y, z) \\<in> r \\<Longrightarrow>\n           (x, z) \\<in> r O (r \\<union> s\\<^sup>+)\\<^sup>*;\n        (z, za) \\<in> r\\<rbrakk>\n       \\<Longrightarrow> (x, za) \\<in> r O (r \\<union> s\\<^sup>+)\\<^sup>*", "with assms"], ["proof (chain)\npicking this:\n  quasi_commute r s\n  (a, z) \\<in> s O r", "have \"(a, z) \\<in> r O (r \\<union> s)\\<^sup>*\""], ["proof (prove)\nusing this:\n  quasi_commute r s\n  (a, z) \\<in> s O r\n\ngoal (1 subgoal):\n 1. (a, z) \\<in> r O (r \\<union> s)\\<^sup>*", "unfolding quasi_commute_def"], ["proof (prove)\nusing this:\n  s O r \\<subseteq> r O (r \\<union> s)\\<^sup>*\n  (a, z) \\<in> s O r\n\ngoal (1 subgoal):\n 1. (a, z) \\<in> r O (r \\<union> s)\\<^sup>*", "by auto"], ["proof (state)\nthis:\n  (a, z) \\<in> r O (r \\<union> s)\\<^sup>*\n\ngoal (1 subgoal):\n 1. \\<And>y z za.\n       \\<lbrakk>(x, y) \\<in> s\\<^sup>+; (y, z) \\<in> s;\n        \\<And>z.\n           (y, z) \\<in> r \\<Longrightarrow>\n           (x, z) \\<in> r O (r \\<union> s\\<^sup>+)\\<^sup>*;\n        (z, za) \\<in> r\\<rbrakk>\n       \\<Longrightarrow> (x, za) \\<in> r O (r \\<union> s\\<^sup>+)\\<^sup>*", "then"], ["proof (chain)\npicking this:\n  (a, z) \\<in> r O (r \\<union> s)\\<^sup>*", "obtain u where \"(a, u) \\<in> r\" and \"(u, z) \\<in> (r \\<union> s)\\<^sup>*\""], ["proof (prove)\nusing this:\n  (a, z) \\<in> r O (r \\<union> s)\\<^sup>*\n\ngoal (1 subgoal):\n 1. (\\<And>u.\n        \\<lbrakk>(a, u) \\<in> r;\n         (u, z) \\<in> (r \\<union> s)\\<^sup>*\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by best"], ["proof (state)\nthis:\n  (a, u) \\<in> r\n  (u, z) \\<in> (r \\<union> s)\\<^sup>*\n\ngoal (1 subgoal):\n 1. \\<And>y z za.\n       \\<lbrakk>(x, y) \\<in> s\\<^sup>+; (y, z) \\<in> s;\n        \\<And>z.\n           (y, z) \\<in> r \\<Longrightarrow>\n           (x, z) \\<in> r O (r \\<union> s\\<^sup>+)\\<^sup>*;\n        (z, za) \\<in> r\\<rbrakk>\n       \\<Longrightarrow> (x, za) \\<in> r O (r \\<union> s\\<^sup>+)\\<^sup>*", "then"], ["proof (chain)\npicking this:\n  (a, u) \\<in> r\n  (u, z) \\<in> (r \\<union> s)\\<^sup>*", "have \"(u, z) \\<in> (r \\<union> s\\<^sup>+)\\<^sup>*\""], ["proof (prove)\nusing this:\n  (a, u) \\<in> r\n  (u, z) \\<in> (r \\<union> s)\\<^sup>*\n\ngoal (1 subgoal):\n 1. (u, z) \\<in> (r \\<union> s\\<^sup>+)\\<^sup>*", "using rtrancl_union_subset_rtrancl_union_trancl"], ["proof (prove)\nusing this:\n  (a, u) \\<in> r\n  (u, z) \\<in> (r \\<union> s)\\<^sup>*\n  (?r \\<union> ?s\\<^sup>+)\\<^sup>* = (?r \\<union> ?s)\\<^sup>*\n\ngoal (1 subgoal):\n 1. (u, z) \\<in> (r \\<union> s\\<^sup>+)\\<^sup>*", "by auto"], ["proof (state)\nthis:\n  (u, z) \\<in> (r \\<union> s\\<^sup>+)\\<^sup>*\n\ngoal (1 subgoal):\n 1. \\<And>y z za.\n       \\<lbrakk>(x, y) \\<in> s\\<^sup>+; (y, z) \\<in> s;\n        \\<And>z.\n           (y, z) \\<in> r \\<Longrightarrow>\n           (x, z) \\<in> r O (r \\<union> s\\<^sup>+)\\<^sup>*;\n        (z, za) \\<in> r\\<rbrakk>\n       \\<Longrightarrow> (x, za) \\<in> r O (r \\<union> s\\<^sup>+)\\<^sup>*", "from \\<open>(a, u) \\<in> r\\<close> and step"], ["proof (chain)\npicking this:\n  (a, u) \\<in> r\n  (x, a) \\<in> s\\<^sup>+\n  (a, b) \\<in> s\n  (a, ?z) \\<in> r \\<Longrightarrow>\n  (x, ?z) \\<in> r O (r \\<union> s\\<^sup>+)\\<^sup>*\n  (b, z) \\<in> r", "have \"(x, u) \\<in> r O (r \\<union> s\\<^sup>+)\\<^sup>*\""], ["proof (prove)\nusing this:\n  (a, u) \\<in> r\n  (x, a) \\<in> s\\<^sup>+\n  (a, b) \\<in> s\n  (a, ?z) \\<in> r \\<Longrightarrow>\n  (x, ?z) \\<in> r O (r \\<union> s\\<^sup>+)\\<^sup>*\n  (b, z) \\<in> r\n\ngoal (1 subgoal):\n 1. (x, u) \\<in> r O (r \\<union> s\\<^sup>+)\\<^sup>*", "by auto"], ["proof (state)\nthis:\n  (x, u) \\<in> r O (r \\<union> s\\<^sup>+)\\<^sup>*\n\ngoal (1 subgoal):\n 1. \\<And>y z za.\n       \\<lbrakk>(x, y) \\<in> s\\<^sup>+; (y, z) \\<in> s;\n        \\<And>z.\n           (y, z) \\<in> r \\<Longrightarrow>\n           (x, z) \\<in> r O (r \\<union> s\\<^sup>+)\\<^sup>*;\n        (z, za) \\<in> r\\<rbrakk>\n       \\<Longrightarrow> (x, za) \\<in> r O (r \\<union> s\\<^sup>+)\\<^sup>*", "then"], ["proof (chain)\npicking this:\n  (x, u) \\<in> r O (r \\<union> s\\<^sup>+)\\<^sup>*", "obtain v where \"(x, v) \\<in> r\" and \"(v, u) \\<in> (r \\<union> s\\<^sup>+)\\<^sup>*\""], ["proof (prove)\nusing this:\n  (x, u) \\<in> r O (r \\<union> s\\<^sup>+)\\<^sup>*\n\ngoal (1 subgoal):\n 1. (\\<And>v.\n        \\<lbrakk>(x, v) \\<in> r;\n         (v, u) \\<in> (r \\<union> s\\<^sup>+)\\<^sup>*\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by best"], ["proof (state)\nthis:\n  (x, v) \\<in> r\n  (v, u) \\<in> (r \\<union> s\\<^sup>+)\\<^sup>*\n\ngoal (1 subgoal):\n 1. \\<And>y z za.\n       \\<lbrakk>(x, y) \\<in> s\\<^sup>+; (y, z) \\<in> s;\n        \\<And>z.\n           (y, z) \\<in> r \\<Longrightarrow>\n           (x, z) \\<in> r O (r \\<union> s\\<^sup>+)\\<^sup>*;\n        (z, za) \\<in> r\\<rbrakk>\n       \\<Longrightarrow> (x, za) \\<in> r O (r \\<union> s\\<^sup>+)\\<^sup>*", "with \\<open>(u, z) \\<in> (r \\<union> s\\<^sup>+)\\<^sup>*\\<close>"], ["proof (chain)\npicking this:\n  (u, z) \\<in> (r \\<union> s\\<^sup>+)\\<^sup>*\n  (x, v) \\<in> r\n  (v, u) \\<in> (r \\<union> s\\<^sup>+)\\<^sup>*", "have \"(v, z) \\<in> (r \\<union> s\\<^sup>+)\\<^sup>*\""], ["proof (prove)\nusing this:\n  (u, z) \\<in> (r \\<union> s\\<^sup>+)\\<^sup>*\n  (x, v) \\<in> r\n  (v, u) \\<in> (r \\<union> s\\<^sup>+)\\<^sup>*\n\ngoal (1 subgoal):\n 1. (v, z) \\<in> (r \\<union> s\\<^sup>+)\\<^sup>*", "by auto"], ["proof (state)\nthis:\n  (v, z) \\<in> (r \\<union> s\\<^sup>+)\\<^sup>*\n\ngoal (1 subgoal):\n 1. \\<And>y z za.\n       \\<lbrakk>(x, y) \\<in> s\\<^sup>+; (y, z) \\<in> s;\n        \\<And>z.\n           (y, z) \\<in> r \\<Longrightarrow>\n           (x, z) \\<in> r O (r \\<union> s\\<^sup>+)\\<^sup>*;\n        (z, za) \\<in> r\\<rbrakk>\n       \\<Longrightarrow> (x, za) \\<in> r O (r \\<union> s\\<^sup>+)\\<^sup>*", "with \\<open>(x, v) \\<in> r\\<close>"], ["proof (chain)\npicking this:\n  (x, v) \\<in> r\n  (v, z) \\<in> (r \\<union> s\\<^sup>+)\\<^sup>*", "show ?case"], ["proof (prove)\nusing this:\n  (x, v) \\<in> r\n  (v, z) \\<in> (r \\<union> s\\<^sup>+)\\<^sup>*\n\ngoal (1 subgoal):\n 1. (x, z) \\<in> r O (r \\<union> s\\<^sup>+)\\<^sup>*", "by auto"], ["proof (state)\nthis:\n  (x, z) \\<in> r O (r \\<union> s\\<^sup>+)\\<^sup>*\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  (x, z) \\<in> r O (r \\<union> s\\<^sup>+)\\<^sup>*\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma steps_reflect_SN_on:\n  assumes \"\\<not> SN_on r {b}\" and \"(a, b) \\<in> r\\<^sup>*\"\n  shows \"\\<not> SN_on r {a}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<not> SN_on r {a}", "using SN_on_Image_rtrancl [of r \"{a}\"]\n  and assms and SN_on_subset2 [of \"{b}\" \"r\\<^sup>* `` {a}\" r]"], ["proof (prove)\nusing this:\n  SN_on r {a} \\<Longrightarrow> SN_on r (r\\<^sup>* `` {a})\n  \\<not> SN_on r {b}\n  (a, b) \\<in> r\\<^sup>*\n  \\<lbrakk>{b} \\<subseteq> r\\<^sup>* `` {a};\n   SN_on r (r\\<^sup>* `` {a})\\<rbrakk>\n  \\<Longrightarrow> SN_on r {b}\n\ngoal (1 subgoal):\n 1. \\<not> SN_on r {a}", "by blast"], ["", "lemma chain_imp_not_SN_on:\n   assumes \"chain r f\"\n   shows \"\\<not> SN_on r {f i}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<not> SN_on r {f i}", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<not> SN_on r {f i}", "let ?f = \"\\<lambda>j. f (i + j)\""], ["proof (state)\ngoal (1 subgoal):\n 1. \\<not> SN_on r {f i}", "have \"?f 0 \\<in> {f i}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. f (i + 0) \\<in> {f i}", "by simp"], ["proof (state)\nthis:\n  f (i + 0) \\<in> {f i}\n\ngoal (1 subgoal):\n 1. \\<not> SN_on r {f i}", "moreover"], ["proof (state)\nthis:\n  f (i + 0) \\<in> {f i}\n\ngoal (1 subgoal):\n 1. \\<not> SN_on r {f i}", "have \"chain r ?f\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>ia. (f (i + ia), f (i + Suc ia)) \\<in> r", "using assms"], ["proof (prove)\nusing this:\n  \\<forall>i. (f i, f (Suc i)) \\<in> r\n\ngoal (1 subgoal):\n 1. \\<forall>ia. (f (i + ia), f (i + Suc ia)) \\<in> r", "by auto"], ["proof (state)\nthis:\n  \\<forall>ia. (f (i + ia), f (i + Suc ia)) \\<in> r\n\ngoal (1 subgoal):\n 1. \\<not> SN_on r {f i}", "ultimately"], ["proof (chain)\npicking this:\n  f (i + 0) \\<in> {f i}\n  \\<forall>ia. (f (i + ia), f (i + Suc ia)) \\<in> r", "have \"?f 0 \\<in> {f i} \\<and> chain r ?f\""], ["proof (prove)\nusing this:\n  f (i + 0) \\<in> {f i}\n  \\<forall>ia. (f (i + ia), f (i + Suc ia)) \\<in> r\n\ngoal (1 subgoal):\n 1. f (i + 0) \\<in> {f i} \\<and>\n    (\\<forall>ia. (f (i + ia), f (i + Suc ia)) \\<in> r)", "by blast"], ["proof (state)\nthis:\n  f (i + 0) \\<in> {f i} \\<and>\n  (\\<forall>ia. (f (i + ia), f (i + Suc ia)) \\<in> r)\n\ngoal (1 subgoal):\n 1. \\<not> SN_on r {f i}", "then"], ["proof (chain)\npicking this:\n  f (i + 0) \\<in> {f i} \\<and>\n  (\\<forall>ia. (f (i + ia), f (i + Suc ia)) \\<in> r)", "have \"\\<exists>g. g 0 \\<in> {f i} \\<and> chain r g\""], ["proof (prove)\nusing this:\n  f (i + 0) \\<in> {f i} \\<and>\n  (\\<forall>ia. (f (i + ia), f (i + Suc ia)) \\<in> r)\n\ngoal (1 subgoal):\n 1. \\<exists>g.\n       g 0 \\<in> {f i} \\<and> (\\<forall>i. (g i, g (Suc i)) \\<in> r)", "by (rule exI [of _ \"?f\"])"], ["proof (state)\nthis:\n  \\<exists>g. g 0 \\<in> {f i} \\<and> (\\<forall>i. (g i, g (Suc i)) \\<in> r)\n\ngoal (1 subgoal):\n 1. \\<not> SN_on r {f i}", "then"], ["proof (chain)\npicking this:\n  \\<exists>g. g 0 \\<in> {f i} \\<and> (\\<forall>i. (g i, g (Suc i)) \\<in> r)", "show ?thesis"], ["proof (prove)\nusing this:\n  \\<exists>g. g 0 \\<in> {f i} \\<and> (\\<forall>i. (g i, g (Suc i)) \\<in> r)\n\ngoal (1 subgoal):\n 1. \\<not> SN_on r {f i}", "unfolding SN_defs"], ["proof (prove)\nusing this:\n  \\<exists>g. g 0 \\<in> {f i} \\<and> (\\<forall>i. (g i, g (Suc i)) \\<in> r)\n\ngoal (1 subgoal):\n 1. \\<not> (\\<nexists>fa.\n               fa 0 \\<in> {f i} \\<and>\n               (\\<forall>i. (fa i, fa (Suc i)) \\<in> r))", "by auto"], ["proof (state)\nthis:\n  \\<not> SN_on r {f i}\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma quasi_commute_imp_SN:\n  assumes \"SN r\" and \"SN s\" and \"quasi_commute r s\"\n  shows \"SN (r \\<union> s)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. SN (r \\<union> s)", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. SN (r \\<union> s)", "have \"quasi_commute r (s\\<^sup>+)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. quasi_commute r (s\\<^sup>+)", "by (rule qc_imp_qc_trancl [OF \\<open>quasi_commute r s\\<close>])"], ["proof (state)\nthis:\n  quasi_commute r (s\\<^sup>+)\n\ngoal (1 subgoal):\n 1. SN (r \\<union> s)", "let ?B = \"{a. \\<not> SN_on (r \\<union> s) {a}}\""], ["proof (state)\ngoal (1 subgoal):\n 1. SN (r \\<union> s)", "{"], ["proof (state)\ngoal (1 subgoal):\n 1. SN (r \\<union> s)", "assume \"\\<not> SN(r \\<union> s)\""], ["proof (state)\nthis:\n  \\<not> SN (r \\<union> s)\n\ngoal (1 subgoal):\n 1. SN (r \\<union> s)", "then"], ["proof (chain)\npicking this:\n  \\<not> SN (r \\<union> s)", "obtain a where \"a \\<in> ?B\""], ["proof (prove)\nusing this:\n  \\<not> SN (r \\<union> s)\n\ngoal (1 subgoal):\n 1. (\\<And>a.\n        a \\<in> {a. \\<not> SN_on (r \\<union> s) {a}} \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "unfolding SN_defs"], ["proof (prove)\nusing this:\n  \\<not> (\\<nexists>f.\n             f 0 \\<in> UNIV \\<and>\n             (\\<forall>i. (f i, f (Suc i)) \\<in> r \\<union> s))\n\ngoal (1 subgoal):\n 1. (\\<And>a.\n        a \\<in> {a. \\<not> (\\<nexists>f.\n                               f 0 \\<in> {a} \\<and>\n                               (\\<forall>i.\n                                   (f i, f (Suc i))\n                                   \\<in> r \\<union> s))} \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by fast"], ["proof (state)\nthis:\n  a \\<in> {a. \\<not> SN_on (r \\<union> s) {a}}\n\ngoal (1 subgoal):\n 1. SN (r \\<union> s)", "from \\<open>SN r\\<close>"], ["proof (chain)\npicking this:\n  SN r", "have \"\\<forall>Q x. x \\<in> Q \\<longrightarrow> (\\<exists>z\\<in>Q. \\<forall>y. (z, y) \\<in> r \\<longrightarrow> y \\<notin> Q)\""], ["proof (prove)\nusing this:\n  SN r\n\ngoal (1 subgoal):\n 1. \\<forall>Q x.\n       x \\<in> Q \\<longrightarrow>\n       (\\<exists>z\\<in>Q.\n           \\<forall>y. (z, y) \\<in> r \\<longrightarrow> y \\<notin> Q)", "by (rule SN_imp_minimal)"], ["proof (state)\nthis:\n  \\<forall>Q x.\n     x \\<in> Q \\<longrightarrow>\n     (\\<exists>z\\<in>Q.\n         \\<forall>y. (z, y) \\<in> r \\<longrightarrow> y \\<notin> Q)\n\ngoal (1 subgoal):\n 1. SN (r \\<union> s)", "then"], ["proof (chain)\npicking this:\n  \\<forall>Q x.\n     x \\<in> Q \\<longrightarrow>\n     (\\<exists>z\\<in>Q.\n         \\<forall>y. (z, y) \\<in> r \\<longrightarrow> y \\<notin> Q)", "have \"\\<forall>x. x \\<in> ?B \\<longrightarrow> (\\<exists>z\\<in>?B. \\<forall>y. (z, y) \\<in> r \\<longrightarrow> y \\<notin> ?B)\""], ["proof (prove)\nusing this:\n  \\<forall>Q x.\n     x \\<in> Q \\<longrightarrow>\n     (\\<exists>z\\<in>Q.\n         \\<forall>y. (z, y) \\<in> r \\<longrightarrow> y \\<notin> Q)\n\ngoal (1 subgoal):\n 1. \\<forall>x.\n       x \\<in> {a. \\<not> SN_on (r \\<union> s) {a}} \\<longrightarrow>\n       (\\<exists>z\\<in>{a. \\<not> SN_on (r \\<union> s) {a}}.\n           \\<forall>y.\n              (z, y) \\<in> r \\<longrightarrow>\n              y \\<notin> {a. \\<not> SN_on (r \\<union> s) {a}})", "by (rule spec [where x = ?B])"], ["proof (state)\nthis:\n  \\<forall>x.\n     x \\<in> {a. \\<not> SN_on (r \\<union> s) {a}} \\<longrightarrow>\n     (\\<exists>z\\<in>{a. \\<not> SN_on (r \\<union> s) {a}}.\n         \\<forall>y.\n            (z, y) \\<in> r \\<longrightarrow>\n            y \\<notin> {a. \\<not> SN_on (r \\<union> s) {a}})\n\ngoal (1 subgoal):\n 1. SN (r \\<union> s)", "with \\<open>a \\<in> ?B\\<close>"], ["proof (chain)\npicking this:\n  a \\<in> {a. \\<not> SN_on (r \\<union> s) {a}}\n  \\<forall>x.\n     x \\<in> {a. \\<not> SN_on (r \\<union> s) {a}} \\<longrightarrow>\n     (\\<exists>z\\<in>{a. \\<not> SN_on (r \\<union> s) {a}}.\n         \\<forall>y.\n            (z, y) \\<in> r \\<longrightarrow>\n            y \\<notin> {a. \\<not> SN_on (r \\<union> s) {a}})", "obtain b where \"b \\<in> ?B\" and min: \"\\<forall>y. (b, y) \\<in> r \\<longrightarrow> y \\<notin> ?B\""], ["proof (prove)\nusing this:\n  a \\<in> {a. \\<not> SN_on (r \\<union> s) {a}}\n  \\<forall>x.\n     x \\<in> {a. \\<not> SN_on (r \\<union> s) {a}} \\<longrightarrow>\n     (\\<exists>z\\<in>{a. \\<not> SN_on (r \\<union> s) {a}}.\n         \\<forall>y.\n            (z, y) \\<in> r \\<longrightarrow>\n            y \\<notin> {a. \\<not> SN_on (r \\<union> s) {a}})\n\ngoal (1 subgoal):\n 1. (\\<And>b.\n        \\<lbrakk>b \\<in> {a. \\<not> SN_on (r \\<union> s) {a}};\n         \\<forall>y.\n            (b, y) \\<in> r \\<longrightarrow>\n            y \\<notin> {a. \\<not> SN_on (r \\<union> s) {a}}\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  b \\<in> {a. \\<not> SN_on (r \\<union> s) {a}}\n  \\<forall>y.\n     (b, y) \\<in> r \\<longrightarrow>\n     y \\<notin> {a. \\<not> SN_on (r \\<union> s) {a}}\n\ngoal (1 subgoal):\n 1. SN (r \\<union> s)", "from \\<open>b \\<in> ?B\\<close>"], ["proof (chain)\npicking this:\n  b \\<in> {a. \\<not> SN_on (r \\<union> s) {a}}", "obtain S where \"S 0 = b\" and\n      chain: \"chain (r \\<union> s) S\""], ["proof (prove)\nusing this:\n  b \\<in> {a. \\<not> SN_on (r \\<union> s) {a}}\n\ngoal (1 subgoal):\n 1. (\\<And>S.\n        \\<lbrakk>S 0 = b;\n         \\<forall>i. (S i, S (Suc i)) \\<in> r \\<union> s\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "unfolding SN_on_def"], ["proof (prove)\nusing this:\n  b \\<in> {a. \\<not> (\\<nexists>f.\n                         f 0 \\<in> {a} \\<and>\n                         (\\<forall>i. (f i, f (Suc i)) \\<in> r \\<union> s))}\n\ngoal (1 subgoal):\n 1. (\\<And>S.\n        \\<lbrakk>S 0 = b;\n         \\<forall>i. (S i, S (Suc i)) \\<in> r \\<union> s\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  S 0 = b\n  \\<forall>i. (S i, S (Suc i)) \\<in> r \\<union> s\n\ngoal (1 subgoal):\n 1. SN (r \\<union> s)", "let ?S = \"\\<lambda>i. S(Suc i)\""], ["proof (state)\ngoal (1 subgoal):\n 1. SN (r \\<union> s)", "have \"?S 0 = S 1\""], ["proof (prove)\ngoal (1 subgoal):\n 1. S (Suc 0) = S 1", "by simp"], ["proof (state)\nthis:\n  S (Suc 0) = S 1\n\ngoal (1 subgoal):\n 1. SN (r \\<union> s)", "from chain"], ["proof (chain)\npicking this:\n  \\<forall>i. (S i, S (Suc i)) \\<in> r \\<union> s", "have \"chain (r \\<union> s) ?S\""], ["proof (prove)\nusing this:\n  \\<forall>i. (S i, S (Suc i)) \\<in> r \\<union> s\n\ngoal (1 subgoal):\n 1. \\<forall>i. (S (Suc i), S (Suc (Suc i))) \\<in> r \\<union> s", "by auto"], ["proof (state)\nthis:\n  \\<forall>i. (S (Suc i), S (Suc (Suc i))) \\<in> r \\<union> s\n\ngoal (1 subgoal):\n 1. SN (r \\<union> s)", "with \\<open>?S 0 = S 1\\<close>"], ["proof (chain)\npicking this:\n  S (Suc 0) = S 1\n  \\<forall>i. (S (Suc i), S (Suc (Suc i))) \\<in> r \\<union> s", "have \"\\<not> SN_on (r \\<union> s) {S 1}\""], ["proof (prove)\nusing this:\n  S (Suc 0) = S 1\n  \\<forall>i. (S (Suc i), S (Suc (Suc i))) \\<in> r \\<union> s\n\ngoal (1 subgoal):\n 1. \\<not> SN_on (r \\<union> s) {S 1}", "unfolding SN_on_def"], ["proof (prove)\nusing this:\n  S (Suc 0) = S 1\n  \\<forall>i. (S (Suc i), S (Suc (Suc i))) \\<in> r \\<union> s\n\ngoal (1 subgoal):\n 1. \\<not> (\\<nexists>f.\n               f 0 \\<in> {S 1} \\<and>\n               (\\<forall>i. (f i, f (Suc i)) \\<in> r \\<union> s))", "by auto"], ["proof (state)\nthis:\n  \\<not> SN_on (r \\<union> s) {S 1}\n\ngoal (1 subgoal):\n 1. SN (r \\<union> s)", "from \\<open>S 0 = b\\<close> and chain"], ["proof (chain)\npicking this:\n  S 0 = b\n  \\<forall>i. (S i, S (Suc i)) \\<in> r \\<union> s", "have \"(b, S 1) \\<in> r \\<union> s\""], ["proof (prove)\nusing this:\n  S 0 = b\n  \\<forall>i. (S i, S (Suc i)) \\<in> r \\<union> s\n\ngoal (1 subgoal):\n 1. (b, S 1) \\<in> r \\<union> s", "by auto"], ["proof (state)\nthis:\n  (b, S 1) \\<in> r \\<union> s\n\ngoal (1 subgoal):\n 1. SN (r \\<union> s)", "with min and \\<open>\\<not> SN_on (r \\<union> s) {S 1}\\<close>"], ["proof (chain)\npicking this:\n  \\<forall>y.\n     (b, y) \\<in> r \\<longrightarrow>\n     y \\<notin> {a. \\<not> SN_on (r \\<union> s) {a}}\n  \\<not> SN_on (r \\<union> s) {S 1}\n  (b, S 1) \\<in> r \\<union> s", "have \"(b, S 1) \\<in> s\""], ["proof (prove)\nusing this:\n  \\<forall>y.\n     (b, y) \\<in> r \\<longrightarrow>\n     y \\<notin> {a. \\<not> SN_on (r \\<union> s) {a}}\n  \\<not> SN_on (r \\<union> s) {S 1}\n  (b, S 1) \\<in> r \\<union> s\n\ngoal (1 subgoal):\n 1. (b, S 1) \\<in> s", "by auto"], ["proof (state)\nthis:\n  (b, S 1) \\<in> s\n\ngoal (1 subgoal):\n 1. SN (r \\<union> s)", "let ?i = \"LEAST i. (S i, S(Suc i)) \\<notin> s\""], ["proof (state)\ngoal (1 subgoal):\n 1. SN (r \\<union> s)", "{"], ["proof (state)\ngoal (1 subgoal):\n 1. SN (r \\<union> s)", "assume \"chain s S\""], ["proof (state)\nthis:\n  \\<forall>i. (S i, S (Suc i)) \\<in> s\n\ngoal (1 subgoal):\n 1. SN (r \\<union> s)", "with \\<open>S 0 = b\\<close>"], ["proof (chain)\npicking this:\n  S 0 = b\n  \\<forall>i. (S i, S (Suc i)) \\<in> s", "have \"\\<not> SN_on s {b}\""], ["proof (prove)\nusing this:\n  S 0 = b\n  \\<forall>i. (S i, S (Suc i)) \\<in> s\n\ngoal (1 subgoal):\n 1. \\<not> SN_on s {b}", "unfolding SN_on_def"], ["proof (prove)\nusing this:\n  S 0 = b\n  \\<forall>i. (S i, S (Suc i)) \\<in> s\n\ngoal (1 subgoal):\n 1. \\<not> (\\<nexists>f.\n               f 0 \\<in> {b} \\<and> (\\<forall>i. (f i, f (Suc i)) \\<in> s))", "by auto"], ["proof (state)\nthis:\n  \\<not> SN_on s {b}\n\ngoal (1 subgoal):\n 1. SN (r \\<union> s)", "with \\<open>SN s\\<close>"], ["proof (chain)\npicking this:\n  SN s\n  \\<not> SN_on s {b}", "have False"], ["proof (prove)\nusing this:\n  SN s\n  \\<not> SN_on s {b}\n\ngoal (1 subgoal):\n 1. False", "unfolding SN_defs"], ["proof (prove)\nusing this:\n  \\<nexists>f. f 0 \\<in> UNIV \\<and> (\\<forall>i. (f i, f (Suc i)) \\<in> s)\n  \\<not> (\\<nexists>f.\n             f 0 \\<in> {b} \\<and> (\\<forall>i. (f i, f (Suc i)) \\<in> s))\n\ngoal (1 subgoal):\n 1. False", "by auto"], ["proof (state)\nthis:\n  False\n\ngoal (1 subgoal):\n 1. SN (r \\<union> s)", "}"], ["proof (state)\nthis:\n  \\<forall>i. (S i, S (Suc i)) \\<in> s \\<Longrightarrow> False\n\ngoal (1 subgoal):\n 1. SN (r \\<union> s)", "then"], ["proof (chain)\npicking this:\n  \\<forall>i. (S i, S (Suc i)) \\<in> s \\<Longrightarrow> False", "have ex: \"\\<exists>i. (S i, S(Suc i)) \\<notin> s\""], ["proof (prove)\nusing this:\n  \\<forall>i. (S i, S (Suc i)) \\<in> s \\<Longrightarrow> False\n\ngoal (1 subgoal):\n 1. \\<exists>i. (S i, S (Suc i)) \\<notin> s", "by auto"], ["proof (state)\nthis:\n  \\<exists>i. (S i, S (Suc i)) \\<notin> s\n\ngoal (1 subgoal):\n 1. SN (r \\<union> s)", "then"], ["proof (chain)\npicking this:\n  \\<exists>i. (S i, S (Suc i)) \\<notin> s", "have \"(S ?i, S(Suc ?i)) \\<notin> s\""], ["proof (prove)\nusing this:\n  \\<exists>i. (S i, S (Suc i)) \\<notin> s\n\ngoal (1 subgoal):\n 1. (S (LEAST i. (S i, S (Suc i)) \\<notin> s),\n     S (Suc (LEAST i. (S i, S (Suc i)) \\<notin> s)))\n    \\<notin> s", "by (rule LeastI_ex)"], ["proof (state)\nthis:\n  (S (LEAST i. (S i, S (Suc i)) \\<notin> s),\n   S (Suc (LEAST i. (S i, S (Suc i)) \\<notin> s)))\n  \\<notin> s\n\ngoal (1 subgoal):\n 1. SN (r \\<union> s)", "with chain"], ["proof (chain)\npicking this:\n  \\<forall>i. (S i, S (Suc i)) \\<in> r \\<union> s\n  (S (LEAST i. (S i, S (Suc i)) \\<notin> s),\n   S (Suc (LEAST i. (S i, S (Suc i)) \\<notin> s)))\n  \\<notin> s", "have \"(S ?i, S(Suc ?i)) \\<in> r\""], ["proof (prove)\nusing this:\n  \\<forall>i. (S i, S (Suc i)) \\<in> r \\<union> s\n  (S (LEAST i. (S i, S (Suc i)) \\<notin> s),\n   S (Suc (LEAST i. (S i, S (Suc i)) \\<notin> s)))\n  \\<notin> s\n\ngoal (1 subgoal):\n 1. (S (LEAST i. (S i, S (Suc i)) \\<notin> s),\n     S (Suc (LEAST i. (S i, S (Suc i)) \\<notin> s)))\n    \\<in> r", "by auto"], ["proof (state)\nthis:\n  (S (LEAST i. (S i, S (Suc i)) \\<notin> s),\n   S (Suc (LEAST i. (S i, S (Suc i)) \\<notin> s)))\n  \\<in> r\n\ngoal (1 subgoal):\n 1. SN (r \\<union> s)", "have ini: \"\\<forall>i<?i. (S i, S(Suc i)) \\<in> s\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>i<LEAST i. (S i, S (Suc i)) \\<notin> s.\n       (S i, S (Suc i)) \\<in> s", "using not_less_Least"], ["proof (prove)\nusing this:\n  ?k < (LEAST x. ?P x) \\<Longrightarrow> \\<not> ?P ?k\n\ngoal (1 subgoal):\n 1. \\<forall>i<LEAST i. (S i, S (Suc i)) \\<notin> s.\n       (S i, S (Suc i)) \\<in> s", "by auto"], ["proof (state)\nthis:\n  \\<forall>i<LEAST i. (S i, S (Suc i)) \\<notin> s. (S i, S (Suc i)) \\<in> s\n\ngoal (1 subgoal):\n 1. SN (r \\<union> s)", "{"], ["proof (state)\nthis:\n  \\<forall>i<LEAST i. (S i, S (Suc i)) \\<notin> s. (S i, S (Suc i)) \\<in> s\n\ngoal (1 subgoal):\n 1. SN (r \\<union> s)", "fix i"], ["proof (state)\ngoal (1 subgoal):\n 1. SN (r \\<union> s)", "assume \"i < ?i\""], ["proof (state)\nthis:\n  i < (LEAST i. (S i, S (Suc i)) \\<notin> s)\n\ngoal (1 subgoal):\n 1. SN (r \\<union> s)", "then"], ["proof (chain)\npicking this:\n  i < (LEAST i. (S i, S (Suc i)) \\<notin> s)", "have \"(b, S(Suc i)) \\<in> s\\<^sup>+\""], ["proof (prove)\nusing this:\n  i < (LEAST i. (S i, S (Suc i)) \\<notin> s)\n\ngoal (1 subgoal):\n 1. (b, S (Suc i)) \\<in> s\\<^sup>+", "proof (induct i)"], ["proof (state)\ngoal (2 subgoals):\n 1. 0 < (LEAST i. (S i, S (Suc i)) \\<notin> s) \\<Longrightarrow>\n    (b, S (Suc 0)) \\<in> s\\<^sup>+\n 2. \\<And>i.\n       \\<lbrakk>i < (LEAST i. (S i, S (Suc i)) \\<notin> s) \\<Longrightarrow>\n                (b, S (Suc i)) \\<in> s\\<^sup>+;\n        Suc i < (LEAST i. (S i, S (Suc i)) \\<notin> s)\\<rbrakk>\n       \\<Longrightarrow> (b, S (Suc (Suc i))) \\<in> s\\<^sup>+", "case 0"], ["proof (state)\nthis:\n  0 < (LEAST i. (S i, S (Suc i)) \\<notin> s)\n\ngoal (2 subgoals):\n 1. 0 < (LEAST i. (S i, S (Suc i)) \\<notin> s) \\<Longrightarrow>\n    (b, S (Suc 0)) \\<in> s\\<^sup>+\n 2. \\<And>i.\n       \\<lbrakk>i < (LEAST i. (S i, S (Suc i)) \\<notin> s) \\<Longrightarrow>\n                (b, S (Suc i)) \\<in> s\\<^sup>+;\n        Suc i < (LEAST i. (S i, S (Suc i)) \\<notin> s)\\<rbrakk>\n       \\<Longrightarrow> (b, S (Suc (Suc i))) \\<in> s\\<^sup>+", "then"], ["proof (chain)\npicking this:\n  0 < (LEAST i. (S i, S (Suc i)) \\<notin> s)", "show ?case"], ["proof (prove)\nusing this:\n  0 < (LEAST i. (S i, S (Suc i)) \\<notin> s)\n\ngoal (1 subgoal):\n 1. (b, S (Suc 0)) \\<in> s\\<^sup>+", "using \\<open>(b, S 1) \\<in> s\\<close> and \\<open>S 0 = b\\<close>"], ["proof (prove)\nusing this:\n  0 < (LEAST i. (S i, S (Suc i)) \\<notin> s)\n  (b, S 1) \\<in> s\n  S 0 = b\n\ngoal (1 subgoal):\n 1. (b, S (Suc 0)) \\<in> s\\<^sup>+", "by auto"], ["proof (state)\nthis:\n  (b, S (Suc 0)) \\<in> s\\<^sup>+\n\ngoal (1 subgoal):\n 1. \\<And>i.\n       \\<lbrakk>i < (LEAST i. (S i, S (Suc i)) \\<notin> s) \\<Longrightarrow>\n                (b, S (Suc i)) \\<in> s\\<^sup>+;\n        Suc i < (LEAST i. (S i, S (Suc i)) \\<notin> s)\\<rbrakk>\n       \\<Longrightarrow> (b, S (Suc (Suc i))) \\<in> s\\<^sup>+", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>i.\n       \\<lbrakk>i < (LEAST i. (S i, S (Suc i)) \\<notin> s) \\<Longrightarrow>\n                (b, S (Suc i)) \\<in> s\\<^sup>+;\n        Suc i < (LEAST i. (S i, S (Suc i)) \\<notin> s)\\<rbrakk>\n       \\<Longrightarrow> (b, S (Suc (Suc i))) \\<in> s\\<^sup>+", "case (Suc k)"], ["proof (state)\nthis:\n  k < (LEAST i. (S i, S (Suc i)) \\<notin> s) \\<Longrightarrow>\n  (b, S (Suc k)) \\<in> s\\<^sup>+\n  Suc k < (LEAST i. (S i, S (Suc i)) \\<notin> s)\n\ngoal (1 subgoal):\n 1. \\<And>i.\n       \\<lbrakk>i < (LEAST i. (S i, S (Suc i)) \\<notin> s) \\<Longrightarrow>\n                (b, S (Suc i)) \\<in> s\\<^sup>+;\n        Suc i < (LEAST i. (S i, S (Suc i)) \\<notin> s)\\<rbrakk>\n       \\<Longrightarrow> (b, S (Suc (Suc i))) \\<in> s\\<^sup>+", "then"], ["proof (chain)\npicking this:\n  k < (LEAST i. (S i, S (Suc i)) \\<notin> s) \\<Longrightarrow>\n  (b, S (Suc k)) \\<in> s\\<^sup>+\n  Suc k < (LEAST i. (S i, S (Suc i)) \\<notin> s)", "have \"(b, S(Suc k)) \\<in> s\\<^sup>+\" and \"Suc k < ?i\""], ["proof (prove)\nusing this:\n  k < (LEAST i. (S i, S (Suc i)) \\<notin> s) \\<Longrightarrow>\n  (b, S (Suc k)) \\<in> s\\<^sup>+\n  Suc k < (LEAST i. (S i, S (Suc i)) \\<notin> s)\n\ngoal (1 subgoal):\n 1. (b, S (Suc k)) \\<in> s\\<^sup>+ &&&\n    Suc k < (LEAST i. (S i, S (Suc i)) \\<notin> s)", "by auto"], ["proof (state)\nthis:\n  (b, S (Suc k)) \\<in> s\\<^sup>+\n  Suc k < (LEAST i. (S i, S (Suc i)) \\<notin> s)\n\ngoal (1 subgoal):\n 1. \\<And>i.\n       \\<lbrakk>i < (LEAST i. (S i, S (Suc i)) \\<notin> s) \\<Longrightarrow>\n                (b, S (Suc i)) \\<in> s\\<^sup>+;\n        Suc i < (LEAST i. (S i, S (Suc i)) \\<notin> s)\\<rbrakk>\n       \\<Longrightarrow> (b, S (Suc (Suc i))) \\<in> s\\<^sup>+", "with \\<open>\\<forall>i<?i. (S i, S(Suc i)) \\<in> s\\<close>"], ["proof (chain)\npicking this:\n  \\<forall>i<LEAST i. (S i, S (Suc i)) \\<notin> s. (S i, S (Suc i)) \\<in> s\n  (b, S (Suc k)) \\<in> s\\<^sup>+\n  Suc k < (LEAST i. (S i, S (Suc i)) \\<notin> s)", "have \"(S(Suc k), S(Suc(Suc k))) \\<in> s\""], ["proof (prove)\nusing this:\n  \\<forall>i<LEAST i. (S i, S (Suc i)) \\<notin> s. (S i, S (Suc i)) \\<in> s\n  (b, S (Suc k)) \\<in> s\\<^sup>+\n  Suc k < (LEAST i. (S i, S (Suc i)) \\<notin> s)\n\ngoal (1 subgoal):\n 1. (S (Suc k), S (Suc (Suc k))) \\<in> s", "by fast"], ["proof (state)\nthis:\n  (S (Suc k), S (Suc (Suc k))) \\<in> s\n\ngoal (1 subgoal):\n 1. \\<And>i.\n       \\<lbrakk>i < (LEAST i. (S i, S (Suc i)) \\<notin> s) \\<Longrightarrow>\n                (b, S (Suc i)) \\<in> s\\<^sup>+;\n        Suc i < (LEAST i. (S i, S (Suc i)) \\<notin> s)\\<rbrakk>\n       \\<Longrightarrow> (b, S (Suc (Suc i))) \\<in> s\\<^sup>+", "with \\<open>(b, S(Suc k)) \\<in> s\\<^sup>+\\<close>"], ["proof (chain)\npicking this:\n  (b, S (Suc k)) \\<in> s\\<^sup>+\n  (S (Suc k), S (Suc (Suc k))) \\<in> s", "show ?case"], ["proof (prove)\nusing this:\n  (b, S (Suc k)) \\<in> s\\<^sup>+\n  (S (Suc k), S (Suc (Suc k))) \\<in> s\n\ngoal (1 subgoal):\n 1. (b, S (Suc (Suc k))) \\<in> s\\<^sup>+", "by auto"], ["proof (state)\nthis:\n  (b, S (Suc (Suc k))) \\<in> s\\<^sup>+\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  (b, S (Suc i)) \\<in> s\\<^sup>+\n\ngoal (1 subgoal):\n 1. SN (r \\<union> s)", "}"], ["proof (state)\nthis:\n  ?i2 < (LEAST i. (S i, S (Suc i)) \\<notin> s) \\<Longrightarrow>\n  (b, S (Suc ?i2)) \\<in> s\\<^sup>+\n\ngoal (1 subgoal):\n 1. SN (r \\<union> s)", "then"], ["proof (chain)\npicking this:\n  ?i2 < (LEAST i. (S i, S (Suc i)) \\<notin> s) \\<Longrightarrow>\n  (b, S (Suc ?i2)) \\<in> s\\<^sup>+", "have pref: \"\\<forall>i<?i. (b, S(Suc i)) \\<in> s\\<^sup>+\""], ["proof (prove)\nusing this:\n  ?i2 < (LEAST i. (S i, S (Suc i)) \\<notin> s) \\<Longrightarrow>\n  (b, S (Suc ?i2)) \\<in> s\\<^sup>+\n\ngoal (1 subgoal):\n 1. \\<forall>i<LEAST i. (S i, S (Suc i)) \\<notin> s.\n       (b, S (Suc i)) \\<in> s\\<^sup>+", "by auto"], ["proof (state)\nthis:\n  \\<forall>i<LEAST i. (S i, S (Suc i)) \\<notin> s.\n     (b, S (Suc i)) \\<in> s\\<^sup>+\n\ngoal (1 subgoal):\n 1. SN (r \\<union> s)", "from \\<open>(b, S 1) \\<in> s\\<close> and \\<open>S 0 = b\\<close>"], ["proof (chain)\npicking this:\n  (b, S 1) \\<in> s\n  S 0 = b", "have \"(S 0, S(Suc 0)) \\<in> s\""], ["proof (prove)\nusing this:\n  (b, S 1) \\<in> s\n  S 0 = b\n\ngoal (1 subgoal):\n 1. (S 0, S (Suc 0)) \\<in> s", "by auto"], ["proof (state)\nthis:\n  (S 0, S (Suc 0)) \\<in> s\n\ngoal (1 subgoal):\n 1. SN (r \\<union> s)", "{"], ["proof (state)\nthis:\n  (S 0, S (Suc 0)) \\<in> s\n\ngoal (1 subgoal):\n 1. SN (r \\<union> s)", "assume \"?i = 0\""], ["proof (state)\nthis:\n  (LEAST i. (S i, S (Suc i)) \\<notin> s) = 0\n\ngoal (1 subgoal):\n 1. SN (r \\<union> s)", "from ex"], ["proof (chain)\npicking this:\n  \\<exists>i. (S i, S (Suc i)) \\<notin> s", "have \"(S ?i, S(Suc ?i)) \\<notin> s\""], ["proof (prove)\nusing this:\n  \\<exists>i. (S i, S (Suc i)) \\<notin> s\n\ngoal (1 subgoal):\n 1. (S (LEAST i. (S i, S (Suc i)) \\<notin> s),\n     S (Suc (LEAST i. (S i, S (Suc i)) \\<notin> s)))\n    \\<notin> s", "by (rule LeastI_ex)"], ["proof (state)\nthis:\n  (S (LEAST i. (S i, S (Suc i)) \\<notin> s),\n   S (Suc (LEAST i. (S i, S (Suc i)) \\<notin> s)))\n  \\<notin> s\n\ngoal (1 subgoal):\n 1. SN (r \\<union> s)", "with \\<open>(S 0, S(Suc 0)) \\<in> s\\<close>"], ["proof (chain)\npicking this:\n  (S 0, S (Suc 0)) \\<in> s\n  (S (LEAST i. (S i, S (Suc i)) \\<notin> s),\n   S (Suc (LEAST i. (S i, S (Suc i)) \\<notin> s)))\n  \\<notin> s", "have False"], ["proof (prove)\nusing this:\n  (S 0, S (Suc 0)) \\<in> s\n  (S (LEAST i. (S i, S (Suc i)) \\<notin> s),\n   S (Suc (LEAST i. (S i, S (Suc i)) \\<notin> s)))\n  \\<notin> s\n\ngoal (1 subgoal):\n 1. False", "unfolding \\<open>?i = 0\\<close>"], ["proof (prove)\nusing this:\n  (S 0, S (Suc 0)) \\<in> s\n  (S 0, S (Suc 0)) \\<notin> s\n\ngoal (1 subgoal):\n 1. False", "by simp"], ["proof (state)\nthis:\n  False\n\ngoal (1 subgoal):\n 1. SN (r \\<union> s)", "}"], ["proof (state)\nthis:\n  (LEAST i. (S i, S (Suc i)) \\<notin> s) = 0 \\<Longrightarrow> False\n\ngoal (1 subgoal):\n 1. SN (r \\<union> s)", "then"], ["proof (chain)\npicking this:\n  (LEAST i. (S i, S (Suc i)) \\<notin> s) = 0 \\<Longrightarrow> False", "have \"0 < ?i\""], ["proof (prove)\nusing this:\n  (LEAST i. (S i, S (Suc i)) \\<notin> s) = 0 \\<Longrightarrow> False\n\ngoal (1 subgoal):\n 1. 0 < (LEAST i. (S i, S (Suc i)) \\<notin> s)", "by auto"], ["proof (state)\nthis:\n  0 < (LEAST i. (S i, S (Suc i)) \\<notin> s)\n\ngoal (1 subgoal):\n 1. SN (r \\<union> s)", "then"], ["proof (chain)\npicking this:\n  0 < (LEAST i. (S i, S (Suc i)) \\<notin> s)", "obtain j where \"?i =  Suc j\""], ["proof (prove)\nusing this:\n  0 < (LEAST i. (S i, S (Suc i)) \\<notin> s)\n\ngoal (1 subgoal):\n 1. (\\<And>j.\n        (LEAST i. (S i, S (Suc i)) \\<notin> s) = Suc j \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "unfolding gr0_conv_Suc"], ["proof (prove)\nusing this:\n  \\<exists>m. (LEAST i. (S i, S (Suc i)) \\<notin> s) = Suc m\n\ngoal (1 subgoal):\n 1. (\\<And>j.\n        (LEAST i. (S i, S (Suc i)) \\<notin> s) = Suc j \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by best"], ["proof (state)\nthis:\n  (LEAST i. (S i, S (Suc i)) \\<notin> s) = Suc j\n\ngoal (1 subgoal):\n 1. SN (r \\<union> s)", "with ini"], ["proof (chain)\npicking this:\n  \\<forall>i<LEAST i. (S i, S (Suc i)) \\<notin> s. (S i, S (Suc i)) \\<in> s\n  (LEAST i. (S i, S (Suc i)) \\<notin> s) = Suc j", "have \"(S(?i-Suc 0), S(Suc(?i-Suc 0))) \\<in> s\""], ["proof (prove)\nusing this:\n  \\<forall>i<LEAST i. (S i, S (Suc i)) \\<notin> s. (S i, S (Suc i)) \\<in> s\n  (LEAST i. (S i, S (Suc i)) \\<notin> s) = Suc j\n\ngoal (1 subgoal):\n 1. (S ((LEAST i. (S i, S (Suc i)) \\<notin> s) - Suc 0),\n     S (Suc ((LEAST i. (S i, S (Suc i)) \\<notin> s) - Suc 0)))\n    \\<in> s", "by auto"], ["proof (state)\nthis:\n  (S ((LEAST i. (S i, S (Suc i)) \\<notin> s) - Suc 0),\n   S (Suc ((LEAST i. (S i, S (Suc i)) \\<notin> s) - Suc 0)))\n  \\<in> s\n\ngoal (1 subgoal):\n 1. SN (r \\<union> s)", "with pref"], ["proof (chain)\npicking this:\n  \\<forall>i<LEAST i. (S i, S (Suc i)) \\<notin> s.\n     (b, S (Suc i)) \\<in> s\\<^sup>+\n  (S ((LEAST i. (S i, S (Suc i)) \\<notin> s) - Suc 0),\n   S (Suc ((LEAST i. (S i, S (Suc i)) \\<notin> s) - Suc 0)))\n  \\<in> s", "have \"(b, S(Suc j)) \\<in> s\\<^sup>+\""], ["proof (prove)\nusing this:\n  \\<forall>i<LEAST i. (S i, S (Suc i)) \\<notin> s.\n     (b, S (Suc i)) \\<in> s\\<^sup>+\n  (S ((LEAST i. (S i, S (Suc i)) \\<notin> s) - Suc 0),\n   S (Suc ((LEAST i. (S i, S (Suc i)) \\<notin> s) - Suc 0)))\n  \\<in> s\n\ngoal (1 subgoal):\n 1. (b, S (Suc j)) \\<in> s\\<^sup>+", "unfolding \\<open>?i = Suc j\\<close>"], ["proof (prove)\nusing this:\n  \\<forall>i<Suc j. (b, S (Suc i)) \\<in> s\\<^sup>+\n  (S (Suc j - Suc 0), S (Suc (Suc j - Suc 0))) \\<in> s\n\ngoal (1 subgoal):\n 1. (b, S (Suc j)) \\<in> s\\<^sup>+", "by auto"], ["proof (state)\nthis:\n  (b, S (Suc j)) \\<in> s\\<^sup>+\n\ngoal (1 subgoal):\n 1. SN (r \\<union> s)", "then"], ["proof (chain)\npicking this:\n  (b, S (Suc j)) \\<in> s\\<^sup>+", "have \"(b, S ?i) \\<in> s\\<^sup>+\""], ["proof (prove)\nusing this:\n  (b, S (Suc j)) \\<in> s\\<^sup>+\n\ngoal (1 subgoal):\n 1. (b, S (LEAST i. (S i, S (Suc i)) \\<notin> s)) \\<in> s\\<^sup>+", "unfolding \\<open>?i = Suc j\\<close>"], ["proof (prove)\nusing this:\n  (b, S (Suc j)) \\<in> s\\<^sup>+\n\ngoal (1 subgoal):\n 1. (b, S (Suc j)) \\<in> s\\<^sup>+", "by auto"], ["proof (state)\nthis:\n  (b, S (LEAST i. (S i, S (Suc i)) \\<notin> s)) \\<in> s\\<^sup>+\n\ngoal (1 subgoal):\n 1. SN (r \\<union> s)", "with \\<open>(S ?i, S(Suc ?i)) \\<in> r\\<close>"], ["proof (chain)\npicking this:\n  (S (LEAST i. (S i, S (Suc i)) \\<notin> s),\n   S (Suc (LEAST i. (S i, S (Suc i)) \\<notin> s)))\n  \\<in> r\n  (b, S (LEAST i. (S i, S (Suc i)) \\<notin> s)) \\<in> s\\<^sup>+", "have \"(b, S(Suc ?i)) \\<in> (s\\<^sup>+ O r)\""], ["proof (prove)\nusing this:\n  (S (LEAST i. (S i, S (Suc i)) \\<notin> s),\n   S (Suc (LEAST i. (S i, S (Suc i)) \\<notin> s)))\n  \\<in> r\n  (b, S (LEAST i. (S i, S (Suc i)) \\<notin> s)) \\<in> s\\<^sup>+\n\ngoal (1 subgoal):\n 1. (b, S (Suc (LEAST i. (S i, S (Suc i)) \\<notin> s))) \\<in> s\\<^sup>+ O r", "by auto"], ["proof (state)\nthis:\n  (b, S (Suc (LEAST i. (S i, S (Suc i)) \\<notin> s))) \\<in> s\\<^sup>+ O r\n\ngoal (1 subgoal):\n 1. SN (r \\<union> s)", "with \\<open>quasi_commute r (s\\<^sup>+)\\<close>"], ["proof (chain)\npicking this:\n  quasi_commute r (s\\<^sup>+)\n  (b, S (Suc (LEAST i. (S i, S (Suc i)) \\<notin> s))) \\<in> s\\<^sup>+ O r", "have \"(b, S(Suc ?i)) \\<in> r O (r \\<union> s\\<^sup>+)\\<^sup>*\""], ["proof (prove)\nusing this:\n  quasi_commute r (s\\<^sup>+)\n  (b, S (Suc (LEAST i. (S i, S (Suc i)) \\<notin> s))) \\<in> s\\<^sup>+ O r\n\ngoal (1 subgoal):\n 1. (b, S (Suc (LEAST i. (S i, S (Suc i)) \\<notin> s)))\n    \\<in> r O (r \\<union> s\\<^sup>+)\\<^sup>*", "unfolding quasi_commute_def"], ["proof (prove)\nusing this:\n  s\\<^sup>+ O r \\<subseteq> r O (r \\<union> s\\<^sup>+)\\<^sup>*\n  (b, S (Suc (LEAST i. (S i, S (Suc i)) \\<notin> s))) \\<in> s\\<^sup>+ O r\n\ngoal (1 subgoal):\n 1. (b, S (Suc (LEAST i. (S i, S (Suc i)) \\<notin> s)))\n    \\<in> r O (r \\<union> s\\<^sup>+)\\<^sup>*", "by auto"], ["proof (state)\nthis:\n  (b, S (Suc (LEAST i. (S i, S (Suc i)) \\<notin> s)))\n  \\<in> r O (r \\<union> s\\<^sup>+)\\<^sup>*\n\ngoal (1 subgoal):\n 1. SN (r \\<union> s)", "then"], ["proof (chain)\npicking this:\n  (b, S (Suc (LEAST i. (S i, S (Suc i)) \\<notin> s)))\n  \\<in> r O (r \\<union> s\\<^sup>+)\\<^sup>*", "obtain c where \"(b, c) \\<in> r\" and \"(c, S(Suc ?i)) \\<in> (r \\<union> s\\<^sup>+)\\<^sup>*\""], ["proof (prove)\nusing this:\n  (b, S (Suc (LEAST i. (S i, S (Suc i)) \\<notin> s)))\n  \\<in> r O (r \\<union> s\\<^sup>+)\\<^sup>*\n\ngoal (1 subgoal):\n 1. (\\<And>c.\n        \\<lbrakk>(b, c) \\<in> r;\n         (c, S (Suc (LEAST i. (S i, S (Suc i)) \\<notin> s)))\n         \\<in> (r \\<union> s\\<^sup>+)\\<^sup>*\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by best"], ["proof (state)\nthis:\n  (b, c) \\<in> r\n  (c, S (Suc (LEAST i. (S i, S (Suc i)) \\<notin> s)))\n  \\<in> (r \\<union> s\\<^sup>+)\\<^sup>*\n\ngoal (1 subgoal):\n 1. SN (r \\<union> s)", "from \\<open>(b, c) \\<in> r\\<close>"], ["proof (chain)\npicking this:\n  (b, c) \\<in> r", "have \"(b, c) \\<in> (r \\<union> s)\\<^sup>*\""], ["proof (prove)\nusing this:\n  (b, c) \\<in> r\n\ngoal (1 subgoal):\n 1. (b, c) \\<in> (r \\<union> s)\\<^sup>*", "by auto"], ["proof (state)\nthis:\n  (b, c) \\<in> (r \\<union> s)\\<^sup>*\n\ngoal (1 subgoal):\n 1. SN (r \\<union> s)", "from chain_imp_not_SN_on [of S \"r \\<union> s\"]\n      and chain"], ["proof (chain)\npicking this:\n  \\<forall>i. (S i, S (Suc i)) \\<in> r \\<union> s \\<Longrightarrow>\n  \\<not> SN_on (r \\<union> s) {S ?i}\n  \\<forall>i. (S i, S (Suc i)) \\<in> r \\<union> s", "have \"\\<not> SN_on (r \\<union> s) {S (Suc ?i)}\""], ["proof (prove)\nusing this:\n  \\<forall>i. (S i, S (Suc i)) \\<in> r \\<union> s \\<Longrightarrow>\n  \\<not> SN_on (r \\<union> s) {S ?i}\n  \\<forall>i. (S i, S (Suc i)) \\<in> r \\<union> s\n\ngoal (1 subgoal):\n 1. \\<not> SN_on (r \\<union> s)\n            {S (Suc (LEAST i. (S i, S (Suc i)) \\<notin> s))}", "by auto"], ["proof (state)\nthis:\n  \\<not> SN_on (r \\<union> s)\n          {S (Suc (LEAST i. (S i, S (Suc i)) \\<notin> s))}\n\ngoal (1 subgoal):\n 1. SN (r \\<union> s)", "from \\<open>(c, S(Suc ?i)) \\<in> (r \\<union> s\\<^sup>+)\\<^sup>*\\<close>"], ["proof (chain)\npicking this:\n  (c, S (Suc (LEAST i. (S i, S (Suc i)) \\<notin> s)))\n  \\<in> (r \\<union> s\\<^sup>+)\\<^sup>*", "have \"(c, S(Suc ?i)) \\<in> (r \\<union> s)\\<^sup>*\""], ["proof (prove)\nusing this:\n  (c, S (Suc (LEAST i. (S i, S (Suc i)) \\<notin> s)))\n  \\<in> (r \\<union> s\\<^sup>+)\\<^sup>*\n\ngoal (1 subgoal):\n 1. (c, S (Suc (LEAST i. (S i, S (Suc i)) \\<notin> s)))\n    \\<in> (r \\<union> s)\\<^sup>*", "unfolding rtrancl_union_subset_rtrancl_union_trancl"], ["proof (prove)\nusing this:\n  (c, S (Suc (LEAST i. (S i, S (Suc i)) \\<notin> s)))\n  \\<in> (r \\<union> s)\\<^sup>*\n\ngoal (1 subgoal):\n 1. (c, S (Suc (LEAST i. (S i, S (Suc i)) \\<notin> s)))\n    \\<in> (r \\<union> s)\\<^sup>*", "by auto"], ["proof (state)\nthis:\n  (c, S (Suc (LEAST i. (S i, S (Suc i)) \\<notin> s)))\n  \\<in> (r \\<union> s)\\<^sup>*\n\ngoal (1 subgoal):\n 1. SN (r \\<union> s)", "with steps_reflect_SN_on [of \"r \\<union> s\"]\n      and \\<open>\\<not> SN_on (r \\<union> s) {S(Suc ?i)}\\<close>"], ["proof (chain)\npicking this:\n  \\<lbrakk>\\<not> SN_on (r \\<union> s) {?b};\n   (?a, ?b) \\<in> (r \\<union> s)\\<^sup>*\\<rbrakk>\n  \\<Longrightarrow> \\<not> SN_on (r \\<union> s) {?a}\n  \\<not> SN_on (r \\<union> s)\n          {S (Suc (LEAST i. (S i, S (Suc i)) \\<notin> s))}\n  (c, S (Suc (LEAST i. (S i, S (Suc i)) \\<notin> s)))\n  \\<in> (r \\<union> s)\\<^sup>*", "have \"\\<not> SN_on (r \\<union> s) {c}\""], ["proof (prove)\nusing this:\n  \\<lbrakk>\\<not> SN_on (r \\<union> s) {?b};\n   (?a, ?b) \\<in> (r \\<union> s)\\<^sup>*\\<rbrakk>\n  \\<Longrightarrow> \\<not> SN_on (r \\<union> s) {?a}\n  \\<not> SN_on (r \\<union> s)\n          {S (Suc (LEAST i. (S i, S (Suc i)) \\<notin> s))}\n  (c, S (Suc (LEAST i. (S i, S (Suc i)) \\<notin> s)))\n  \\<in> (r \\<union> s)\\<^sup>*\n\ngoal (1 subgoal):\n 1. \\<not> SN_on (r \\<union> s) {c}", "by auto"], ["proof (state)\nthis:\n  \\<not> SN_on (r \\<union> s) {c}\n\ngoal (1 subgoal):\n 1. SN (r \\<union> s)", "then"], ["proof (chain)\npicking this:\n  \\<not> SN_on (r \\<union> s) {c}", "have \"c \\<in> ?B\""], ["proof (prove)\nusing this:\n  \\<not> SN_on (r \\<union> s) {c}\n\ngoal (1 subgoal):\n 1. c \\<in> {a. \\<not> SN_on (r \\<union> s) {a}}", "by simp"], ["proof (state)\nthis:\n  c \\<in> {a. \\<not> SN_on (r \\<union> s) {a}}\n\ngoal (1 subgoal):\n 1. SN (r \\<union> s)", "with \\<open>(b, c) \\<in> r\\<close> and min"], ["proof (chain)\npicking this:\n  (b, c) \\<in> r\n  \\<forall>y.\n     (b, y) \\<in> r \\<longrightarrow>\n     y \\<notin> {a. \\<not> SN_on (r \\<union> s) {a}}\n  c \\<in> {a. \\<not> SN_on (r \\<union> s) {a}}", "have False"], ["proof (prove)\nusing this:\n  (b, c) \\<in> r\n  \\<forall>y.\n     (b, y) \\<in> r \\<longrightarrow>\n     y \\<notin> {a. \\<not> SN_on (r \\<union> s) {a}}\n  c \\<in> {a. \\<not> SN_on (r \\<union> s) {a}}\n\ngoal (1 subgoal):\n 1. False", "by auto"], ["proof (state)\nthis:\n  False\n\ngoal (1 subgoal):\n 1. SN (r \\<union> s)", "}"], ["proof (state)\nthis:\n  \\<not> SN (r \\<union> s) \\<Longrightarrow> False\n\ngoal (1 subgoal):\n 1. SN (r \\<union> s)", "then"], ["proof (chain)\npicking this:\n  \\<not> SN (r \\<union> s) \\<Longrightarrow> False", "show ?thesis"], ["proof (prove)\nusing this:\n  \\<not> SN (r \\<union> s) \\<Longrightarrow> False\n\ngoal (1 subgoal):\n 1. SN (r \\<union> s)", "by auto"], ["proof (state)\nthis:\n  SN (r \\<union> s)\n\ngoal:\nNo subgoals!", "qed"], ["", "subsection \\<open>Strong Normalization\\<close>"], ["", "lemma non_strict_into_strict:\n  assumes compat: \"NS O S \\<subseteq> S\"\n    and steps: \"(s, t) \\<in> (NS\\<^sup>*) O S\"\n  shows \"(s, t) \\<in> S\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (s, t) \\<in> S", "using steps"], ["proof (prove)\nusing this:\n  (s, t) \\<in> NS\\<^sup>* O S\n\ngoal (1 subgoal):\n 1. (s, t) \\<in> S", "proof"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x y z.\n       \\<lbrakk>(s, t) = (x, z); (x, y) \\<in> NS\\<^sup>*;\n        (y, z) \\<in> S\\<rbrakk>\n       \\<Longrightarrow> (s, t) \\<in> S", "fix x u z"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x y z.\n       \\<lbrakk>(s, t) = (x, z); (x, y) \\<in> NS\\<^sup>*;\n        (y, z) \\<in> S\\<rbrakk>\n       \\<Longrightarrow> (s, t) \\<in> S", "assume \"(s, t) = (x, z)\" and \"(x, u) \\<in> NS\\<^sup>*\" and \"(u, z) \\<in> S\""], ["proof (state)\nthis:\n  (s, t) = (x, z)\n  (x, u) \\<in> NS\\<^sup>*\n  (u, z) \\<in> S\n\ngoal (1 subgoal):\n 1. \\<And>x y z.\n       \\<lbrakk>(s, t) = (x, z); (x, y) \\<in> NS\\<^sup>*;\n        (y, z) \\<in> S\\<rbrakk>\n       \\<Longrightarrow> (s, t) \\<in> S", "then"], ["proof (chain)\npicking this:\n  (s, t) = (x, z)\n  (x, u) \\<in> NS\\<^sup>*\n  (u, z) \\<in> S", "have \"(s, u) \\<in> NS\\<^sup>*\" and \"(u, t) \\<in> S\""], ["proof (prove)\nusing this:\n  (s, t) = (x, z)\n  (x, u) \\<in> NS\\<^sup>*\n  (u, z) \\<in> S\n\ngoal (1 subgoal):\n 1. (s, u) \\<in> NS\\<^sup>* &&& (u, t) \\<in> S", "by auto"], ["proof (state)\nthis:\n  (s, u) \\<in> NS\\<^sup>*\n  (u, t) \\<in> S\n\ngoal (1 subgoal):\n 1. \\<And>x y z.\n       \\<lbrakk>(s, t) = (x, z); (x, y) \\<in> NS\\<^sup>*;\n        (y, z) \\<in> S\\<rbrakk>\n       \\<Longrightarrow> (s, t) \\<in> S", "then"], ["proof (chain)\npicking this:\n  (s, u) \\<in> NS\\<^sup>*\n  (u, t) \\<in> S", "show ?thesis"], ["proof (prove)\nusing this:\n  (s, u) \\<in> NS\\<^sup>*\n  (u, t) \\<in> S\n\ngoal (1 subgoal):\n 1. (s, t) \\<in> S", "proof (induct rule:rtrancl.induct)"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>a. (a, t) \\<in> S \\<Longrightarrow> (a, t) \\<in> S\n 2. \\<And>a b c.\n       \\<lbrakk>(a, b) \\<in> NS\\<^sup>*;\n        (b, t) \\<in> S \\<Longrightarrow> (a, t) \\<in> S; (b, c) \\<in> NS;\n        (c, t) \\<in> S\\<rbrakk>\n       \\<Longrightarrow> (a, t) \\<in> S", "case (rtrancl_refl x)"], ["proof (state)\nthis:\n  (x, t) \\<in> S\n\ngoal (2 subgoals):\n 1. \\<And>a. (a, t) \\<in> S \\<Longrightarrow> (a, t) \\<in> S\n 2. \\<And>a b c.\n       \\<lbrakk>(a, b) \\<in> NS\\<^sup>*;\n        (b, t) \\<in> S \\<Longrightarrow> (a, t) \\<in> S; (b, c) \\<in> NS;\n        (c, t) \\<in> S\\<rbrakk>\n       \\<Longrightarrow> (a, t) \\<in> S", "then"], ["proof (chain)\npicking this:\n  (x, t) \\<in> S", "show ?case"], ["proof (prove)\nusing this:\n  (x, t) \\<in> S\n\ngoal (1 subgoal):\n 1. (x, t) \\<in> S", "."], ["proof (state)\nthis:\n  (x, t) \\<in> S\n\ngoal (1 subgoal):\n 1. \\<And>a b c.\n       \\<lbrakk>(a, b) \\<in> NS\\<^sup>*;\n        (b, t) \\<in> S \\<Longrightarrow> (a, t) \\<in> S; (b, c) \\<in> NS;\n        (c, t) \\<in> S\\<rbrakk>\n       \\<Longrightarrow> (a, t) \\<in> S", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>a b c.\n       \\<lbrakk>(a, b) \\<in> NS\\<^sup>*;\n        (b, t) \\<in> S \\<Longrightarrow> (a, t) \\<in> S; (b, c) \\<in> NS;\n        (c, t) \\<in> S\\<rbrakk>\n       \\<Longrightarrow> (a, t) \\<in> S", "case (rtrancl_into_rtrancl a b c)"], ["proof (state)\nthis:\n  (a, b) \\<in> NS\\<^sup>*\n  (b, t) \\<in> S \\<Longrightarrow> (a, t) \\<in> S\n  (b, c) \\<in> NS\n  (c, t) \\<in> S\n\ngoal (1 subgoal):\n 1. \\<And>a b c.\n       \\<lbrakk>(a, b) \\<in> NS\\<^sup>*;\n        (b, t) \\<in> S \\<Longrightarrow> (a, t) \\<in> S; (b, c) \\<in> NS;\n        (c, t) \\<in> S\\<rbrakk>\n       \\<Longrightarrow> (a, t) \\<in> S", "with compat"], ["proof (chain)\npicking this:\n  NS O S \\<subseteq> S\n  (a, b) \\<in> NS\\<^sup>*\n  (b, t) \\<in> S \\<Longrightarrow> (a, t) \\<in> S\n  (b, c) \\<in> NS\n  (c, t) \\<in> S", "show ?case"], ["proof (prove)\nusing this:\n  NS O S \\<subseteq> S\n  (a, b) \\<in> NS\\<^sup>*\n  (b, t) \\<in> S \\<Longrightarrow> (a, t) \\<in> S\n  (b, c) \\<in> NS\n  (c, t) \\<in> S\n\ngoal (1 subgoal):\n 1. (a, t) \\<in> S", "by auto"], ["proof (state)\nthis:\n  (a, t) \\<in> S\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  (s, t) \\<in> S\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma comp_trancl:\n  assumes \"R O S \\<subseteq> S\" shows \"R O S\\<^sup>+ \\<subseteq> S\\<^sup>+\""], ["proof (prove)\ngoal (1 subgoal):\n 1. R O S\\<^sup>+ \\<subseteq> S\\<^sup>+", "proof (rule subrelI)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x y.\n       (x, y) \\<in> R O S\\<^sup>+ \\<Longrightarrow> (x, y) \\<in> S\\<^sup>+", "fix w z"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x y.\n       (x, y) \\<in> R O S\\<^sup>+ \\<Longrightarrow> (x, y) \\<in> S\\<^sup>+", "assume \"(w, z) \\<in> R O S\\<^sup>+\""], ["proof (state)\nthis:\n  (w, z) \\<in> R O S\\<^sup>+\n\ngoal (1 subgoal):\n 1. \\<And>x y.\n       (x, y) \\<in> R O S\\<^sup>+ \\<Longrightarrow> (x, y) \\<in> S\\<^sup>+", "then"], ["proof (chain)\npicking this:\n  (w, z) \\<in> R O S\\<^sup>+", "obtain x where R_step: \"(w, x) \\<in> R\" and S_seq: \"(x, z) \\<in> S\\<^sup>+\""], ["proof (prove)\nusing this:\n  (w, z) \\<in> R O S\\<^sup>+\n\ngoal (1 subgoal):\n 1. (\\<And>x.\n        \\<lbrakk>(w, x) \\<in> R; (x, z) \\<in> S\\<^sup>+\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by best"], ["proof (state)\nthis:\n  (w, x) \\<in> R\n  (x, z) \\<in> S\\<^sup>+\n\ngoal (1 subgoal):\n 1. \\<And>x y.\n       (x, y) \\<in> R O S\\<^sup>+ \\<Longrightarrow> (x, y) \\<in> S\\<^sup>+", "from tranclD [OF S_seq]"], ["proof (chain)\npicking this:\n  \\<exists>za. (x, za) \\<in> S \\<and> (za, z) \\<in> S\\<^sup>*", "obtain y where S_step: \"(x, y) \\<in> S\" and S_seq': \"(y, z) \\<in> S\\<^sup>*\""], ["proof (prove)\nusing this:\n  \\<exists>za. (x, za) \\<in> S \\<and> (za, z) \\<in> S\\<^sup>*\n\ngoal (1 subgoal):\n 1. (\\<And>y.\n        \\<lbrakk>(x, y) \\<in> S; (y, z) \\<in> S\\<^sup>*\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  (x, y) \\<in> S\n  (y, z) \\<in> S\\<^sup>*\n\ngoal (1 subgoal):\n 1. \\<And>x y.\n       (x, y) \\<in> R O S\\<^sup>+ \\<Longrightarrow> (x, y) \\<in> S\\<^sup>+", "from R_step and S_step"], ["proof (chain)\npicking this:\n  (w, x) \\<in> R\n  (x, y) \\<in> S", "have \"(w, y) \\<in> R O S\""], ["proof (prove)\nusing this:\n  (w, x) \\<in> R\n  (x, y) \\<in> S\n\ngoal (1 subgoal):\n 1. (w, y) \\<in> R O S", "by auto"], ["proof (state)\nthis:\n  (w, y) \\<in> R O S\n\ngoal (1 subgoal):\n 1. \\<And>x y.\n       (x, y) \\<in> R O S\\<^sup>+ \\<Longrightarrow> (x, y) \\<in> S\\<^sup>+", "with assms"], ["proof (chain)\npicking this:\n  R O S \\<subseteq> S\n  (w, y) \\<in> R O S", "have \"(w, y) \\<in> S\""], ["proof (prove)\nusing this:\n  R O S \\<subseteq> S\n  (w, y) \\<in> R O S\n\ngoal (1 subgoal):\n 1. (w, y) \\<in> S", "by auto"], ["proof (state)\nthis:\n  (w, y) \\<in> S\n\ngoal (1 subgoal):\n 1. \\<And>x y.\n       (x, y) \\<in> R O S\\<^sup>+ \\<Longrightarrow> (x, y) \\<in> S\\<^sup>+", "with S_seq'"], ["proof (chain)\npicking this:\n  (y, z) \\<in> S\\<^sup>*\n  (w, y) \\<in> S", "show \"(w, z) \\<in> S\\<^sup>+\""], ["proof (prove)\nusing this:\n  (y, z) \\<in> S\\<^sup>*\n  (w, y) \\<in> S\n\ngoal (1 subgoal):\n 1. (w, z) \\<in> S\\<^sup>+", "by simp"], ["proof (state)\nthis:\n  (w, z) \\<in> S\\<^sup>+\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma comp_rtrancl_trancl:\n  assumes comp: \"R O S \\<subseteq> S\"\n    and seq: \"(s, t) \\<in> (R \\<union> S)\\<^sup>* O S\"\n  shows \"(s, t) \\<in> S\\<^sup>+\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (s, t) \\<in> S\\<^sup>+", "using seq"], ["proof (prove)\nusing this:\n  (s, t) \\<in> (R \\<union> S)\\<^sup>* O S\n\ngoal (1 subgoal):\n 1. (s, t) \\<in> S\\<^sup>+", "proof"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x y z.\n       \\<lbrakk>(s, t) = (x, z); (x, y) \\<in> (R \\<union> S)\\<^sup>*;\n        (y, z) \\<in> S\\<rbrakk>\n       \\<Longrightarrow> (s, t) \\<in> S\\<^sup>+", "fix x u z"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x y z.\n       \\<lbrakk>(s, t) = (x, z); (x, y) \\<in> (R \\<union> S)\\<^sup>*;\n        (y, z) \\<in> S\\<rbrakk>\n       \\<Longrightarrow> (s, t) \\<in> S\\<^sup>+", "assume \"(s, t) = (x, z)\" and \"(x, u) \\<in> (R \\<union> S)\\<^sup>*\" and \"(u, z) \\<in> S\""], ["proof (state)\nthis:\n  (s, t) = (x, z)\n  (x, u) \\<in> (R \\<union> S)\\<^sup>*\n  (u, z) \\<in> S\n\ngoal (1 subgoal):\n 1. \\<And>x y z.\n       \\<lbrakk>(s, t) = (x, z); (x, y) \\<in> (R \\<union> S)\\<^sup>*;\n        (y, z) \\<in> S\\<rbrakk>\n       \\<Longrightarrow> (s, t) \\<in> S\\<^sup>+", "then"], ["proof (chain)\npicking this:\n  (s, t) = (x, z)\n  (x, u) \\<in> (R \\<union> S)\\<^sup>*\n  (u, z) \\<in> S", "have \"(s, u) \\<in> (R \\<union> S)\\<^sup>*\" and \"(u, t) \\<in> S\\<^sup>+\""], ["proof (prove)\nusing this:\n  (s, t) = (x, z)\n  (x, u) \\<in> (R \\<union> S)\\<^sup>*\n  (u, z) \\<in> S\n\ngoal (1 subgoal):\n 1. (s, u) \\<in> (R \\<union> S)\\<^sup>* &&& (u, t) \\<in> S\\<^sup>+", "by auto"], ["proof (state)\nthis:\n  (s, u) \\<in> (R \\<union> S)\\<^sup>*\n  (u, t) \\<in> S\\<^sup>+\n\ngoal (1 subgoal):\n 1. \\<And>x y z.\n       \\<lbrakk>(s, t) = (x, z); (x, y) \\<in> (R \\<union> S)\\<^sup>*;\n        (y, z) \\<in> S\\<rbrakk>\n       \\<Longrightarrow> (s, t) \\<in> S\\<^sup>+", "then"], ["proof (chain)\npicking this:\n  (s, u) \\<in> (R \\<union> S)\\<^sup>*\n  (u, t) \\<in> S\\<^sup>+", "show ?thesis"], ["proof (prove)\nusing this:\n  (s, u) \\<in> (R \\<union> S)\\<^sup>*\n  (u, t) \\<in> S\\<^sup>+\n\ngoal (1 subgoal):\n 1. (s, t) \\<in> S\\<^sup>+", "proof (induct rule: rtrancl.induct)"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>a. (a, t) \\<in> S\\<^sup>+ \\<Longrightarrow> (a, t) \\<in> S\\<^sup>+\n 2. \\<And>a b c.\n       \\<lbrakk>(a, b) \\<in> (R \\<union> S)\\<^sup>*;\n        (b, t) \\<in> S\\<^sup>+ \\<Longrightarrow> (a, t) \\<in> S\\<^sup>+;\n        (b, c) \\<in> R \\<union> S; (c, t) \\<in> S\\<^sup>+\\<rbrakk>\n       \\<Longrightarrow> (a, t) \\<in> S\\<^sup>+", "case (rtrancl_refl x)"], ["proof (state)\nthis:\n  (x, t) \\<in> S\\<^sup>+\n\ngoal (2 subgoals):\n 1. \\<And>a. (a, t) \\<in> S\\<^sup>+ \\<Longrightarrow> (a, t) \\<in> S\\<^sup>+\n 2. \\<And>a b c.\n       \\<lbrakk>(a, b) \\<in> (R \\<union> S)\\<^sup>*;\n        (b, t) \\<in> S\\<^sup>+ \\<Longrightarrow> (a, t) \\<in> S\\<^sup>+;\n        (b, c) \\<in> R \\<union> S; (c, t) \\<in> S\\<^sup>+\\<rbrakk>\n       \\<Longrightarrow> (a, t) \\<in> S\\<^sup>+", "then"], ["proof (chain)\npicking this:\n  (x, t) \\<in> S\\<^sup>+", "show ?case"], ["proof (prove)\nusing this:\n  (x, t) \\<in> S\\<^sup>+\n\ngoal (1 subgoal):\n 1. (x, t) \\<in> S\\<^sup>+", "."], ["proof (state)\nthis:\n  (x, t) \\<in> S\\<^sup>+\n\ngoal (1 subgoal):\n 1. \\<And>a b c.\n       \\<lbrakk>(a, b) \\<in> (R \\<union> S)\\<^sup>*;\n        (b, t) \\<in> S\\<^sup>+ \\<Longrightarrow> (a, t) \\<in> S\\<^sup>+;\n        (b, c) \\<in> R \\<union> S; (c, t) \\<in> S\\<^sup>+\\<rbrakk>\n       \\<Longrightarrow> (a, t) \\<in> S\\<^sup>+", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>a b c.\n       \\<lbrakk>(a, b) \\<in> (R \\<union> S)\\<^sup>*;\n        (b, t) \\<in> S\\<^sup>+ \\<Longrightarrow> (a, t) \\<in> S\\<^sup>+;\n        (b, c) \\<in> R \\<union> S; (c, t) \\<in> S\\<^sup>+\\<rbrakk>\n       \\<Longrightarrow> (a, t) \\<in> S\\<^sup>+", "case (rtrancl_into_rtrancl a b c)"], ["proof (state)\nthis:\n  (a, b) \\<in> (R \\<union> S)\\<^sup>*\n  (b, t) \\<in> S\\<^sup>+ \\<Longrightarrow> (a, t) \\<in> S\\<^sup>+\n  (b, c) \\<in> R \\<union> S\n  (c, t) \\<in> S\\<^sup>+\n\ngoal (1 subgoal):\n 1. \\<And>a b c.\n       \\<lbrakk>(a, b) \\<in> (R \\<union> S)\\<^sup>*;\n        (b, t) \\<in> S\\<^sup>+ \\<Longrightarrow> (a, t) \\<in> S\\<^sup>+;\n        (b, c) \\<in> R \\<union> S; (c, t) \\<in> S\\<^sup>+\\<rbrakk>\n       \\<Longrightarrow> (a, t) \\<in> S\\<^sup>+", "then"], ["proof (chain)\npicking this:\n  (a, b) \\<in> (R \\<union> S)\\<^sup>*\n  (b, t) \\<in> S\\<^sup>+ \\<Longrightarrow> (a, t) \\<in> S\\<^sup>+\n  (b, c) \\<in> R \\<union> S\n  (c, t) \\<in> S\\<^sup>+", "have \"(b, c) \\<in> R \\<union> S\""], ["proof (prove)\nusing this:\n  (a, b) \\<in> (R \\<union> S)\\<^sup>*\n  (b, t) \\<in> S\\<^sup>+ \\<Longrightarrow> (a, t) \\<in> S\\<^sup>+\n  (b, c) \\<in> R \\<union> S\n  (c, t) \\<in> S\\<^sup>+\n\ngoal (1 subgoal):\n 1. (b, c) \\<in> R \\<union> S", "by simp"], ["proof (state)\nthis:\n  (b, c) \\<in> R \\<union> S\n\ngoal (1 subgoal):\n 1. \\<And>a b c.\n       \\<lbrakk>(a, b) \\<in> (R \\<union> S)\\<^sup>*;\n        (b, t) \\<in> S\\<^sup>+ \\<Longrightarrow> (a, t) \\<in> S\\<^sup>+;\n        (b, c) \\<in> R \\<union> S; (c, t) \\<in> S\\<^sup>+\\<rbrakk>\n       \\<Longrightarrow> (a, t) \\<in> S\\<^sup>+", "then"], ["proof (chain)\npicking this:\n  (b, c) \\<in> R \\<union> S", "show ?case"], ["proof (prove)\nusing this:\n  (b, c) \\<in> R \\<union> S\n\ngoal (1 subgoal):\n 1. (a, t) \\<in> S\\<^sup>+", "proof"], ["proof (state)\ngoal (2 subgoals):\n 1. (b, c) \\<in> R \\<Longrightarrow> (a, t) \\<in> S\\<^sup>+\n 2. (b, c) \\<in> S \\<Longrightarrow> (a, t) \\<in> S\\<^sup>+", "assume \"(b, c) \\<in> S\""], ["proof (state)\nthis:\n  (b, c) \\<in> S\n\ngoal (2 subgoals):\n 1. (b, c) \\<in> R \\<Longrightarrow> (a, t) \\<in> S\\<^sup>+\n 2. (b, c) \\<in> S \\<Longrightarrow> (a, t) \\<in> S\\<^sup>+", "with rtrancl_into_rtrancl"], ["proof (chain)\npicking this:\n  (a, b) \\<in> (R \\<union> S)\\<^sup>*\n  (b, t) \\<in> S\\<^sup>+ \\<Longrightarrow> (a, t) \\<in> S\\<^sup>+\n  (b, c) \\<in> R \\<union> S\n  (c, t) \\<in> S\\<^sup>+\n  (b, c) \\<in> S", "have \"(b, t) \\<in> S\\<^sup>+\""], ["proof (prove)\nusing this:\n  (a, b) \\<in> (R \\<union> S)\\<^sup>*\n  (b, t) \\<in> S\\<^sup>+ \\<Longrightarrow> (a, t) \\<in> S\\<^sup>+\n  (b, c) \\<in> R \\<union> S\n  (c, t) \\<in> S\\<^sup>+\n  (b, c) \\<in> S\n\ngoal (1 subgoal):\n 1. (b, t) \\<in> S\\<^sup>+", "by simp"], ["proof (state)\nthis:\n  (b, t) \\<in> S\\<^sup>+\n\ngoal (2 subgoals):\n 1. (b, c) \\<in> R \\<Longrightarrow> (a, t) \\<in> S\\<^sup>+\n 2. (b, c) \\<in> S \\<Longrightarrow> (a, t) \\<in> S\\<^sup>+", "with rtrancl_into_rtrancl"], ["proof (chain)\npicking this:\n  (a, b) \\<in> (R \\<union> S)\\<^sup>*\n  (b, t) \\<in> S\\<^sup>+ \\<Longrightarrow> (a, t) \\<in> S\\<^sup>+\n  (b, c) \\<in> R \\<union> S\n  (c, t) \\<in> S\\<^sup>+\n  (b, t) \\<in> S\\<^sup>+", "show ?thesis"], ["proof (prove)\nusing this:\n  (a, b) \\<in> (R \\<union> S)\\<^sup>*\n  (b, t) \\<in> S\\<^sup>+ \\<Longrightarrow> (a, t) \\<in> S\\<^sup>+\n  (b, c) \\<in> R \\<union> S\n  (c, t) \\<in> S\\<^sup>+\n  (b, t) \\<in> S\\<^sup>+\n\ngoal (1 subgoal):\n 1. (a, t) \\<in> S\\<^sup>+", "by simp"], ["proof (state)\nthis:\n  (a, t) \\<in> S\\<^sup>+\n\ngoal (1 subgoal):\n 1. (b, c) \\<in> R \\<Longrightarrow> (a, t) \\<in> S\\<^sup>+", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. (b, c) \\<in> R \\<Longrightarrow> (a, t) \\<in> S\\<^sup>+", "assume \"(b, c) \\<in> R\""], ["proof (state)\nthis:\n  (b, c) \\<in> R\n\ngoal (1 subgoal):\n 1. (b, c) \\<in> R \\<Longrightarrow> (a, t) \\<in> S\\<^sup>+", "with comp_trancl [OF comp] rtrancl_into_rtrancl"], ["proof (chain)\npicking this:\n  R O S\\<^sup>+ \\<subseteq> S\\<^sup>+\n  (a, b) \\<in> (R \\<union> S)\\<^sup>*\n  (b, t) \\<in> S\\<^sup>+ \\<Longrightarrow> (a, t) \\<in> S\\<^sup>+\n  (b, c) \\<in> R \\<union> S\n  (c, t) \\<in> S\\<^sup>+\n  (b, c) \\<in> R", "show ?thesis"], ["proof (prove)\nusing this:\n  R O S\\<^sup>+ \\<subseteq> S\\<^sup>+\n  (a, b) \\<in> (R \\<union> S)\\<^sup>*\n  (b, t) \\<in> S\\<^sup>+ \\<Longrightarrow> (a, t) \\<in> S\\<^sup>+\n  (b, c) \\<in> R \\<union> S\n  (c, t) \\<in> S\\<^sup>+\n  (b, c) \\<in> R\n\ngoal (1 subgoal):\n 1. (a, t) \\<in> S\\<^sup>+", "by auto"], ["proof (state)\nthis:\n  (a, t) \\<in> S\\<^sup>+\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  (a, t) \\<in> S\\<^sup>+\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  (s, t) \\<in> S\\<^sup>+\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma trancl_union_right: \"r\\<^sup>+ \\<subseteq> (s \\<union> r)\\<^sup>+\""], ["proof (prove)\ngoal (1 subgoal):\n 1. r\\<^sup>+ \\<subseteq> (s \\<union> r)\\<^sup>+", "proof (rule subrelI)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x y.\n       (x, y) \\<in> r\\<^sup>+ \\<Longrightarrow>\n       (x, y) \\<in> (s \\<union> r)\\<^sup>+", "fix x y"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x y.\n       (x, y) \\<in> r\\<^sup>+ \\<Longrightarrow>\n       (x, y) \\<in> (s \\<union> r)\\<^sup>+", "assume \"(x, y) \\<in> r\\<^sup>+\""], ["proof (state)\nthis:\n  (x, y) \\<in> r\\<^sup>+\n\ngoal (1 subgoal):\n 1. \\<And>x y.\n       (x, y) \\<in> r\\<^sup>+ \\<Longrightarrow>\n       (x, y) \\<in> (s \\<union> r)\\<^sup>+", "then"], ["proof (chain)\npicking this:\n  (x, y) \\<in> r\\<^sup>+", "show \"(x, y) \\<in> (s \\<union> r)\\<^sup>+\""], ["proof (prove)\nusing this:\n  (x, y) \\<in> r\\<^sup>+\n\ngoal (1 subgoal):\n 1. (x, y) \\<in> (s \\<union> r)\\<^sup>+", "proof (induct)"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>y.\n       (x, y) \\<in> r \\<Longrightarrow> (x, y) \\<in> (s \\<union> r)\\<^sup>+\n 2. \\<And>y z.\n       \\<lbrakk>(x, y) \\<in> r\\<^sup>+; (y, z) \\<in> r;\n        (x, y) \\<in> (s \\<union> r)\\<^sup>+\\<rbrakk>\n       \\<Longrightarrow> (x, z) \\<in> (s \\<union> r)\\<^sup>+", "case base"], ["proof (state)\nthis:\n  (x, y_) \\<in> r\n\ngoal (2 subgoals):\n 1. \\<And>y.\n       (x, y) \\<in> r \\<Longrightarrow> (x, y) \\<in> (s \\<union> r)\\<^sup>+\n 2. \\<And>y z.\n       \\<lbrakk>(x, y) \\<in> r\\<^sup>+; (y, z) \\<in> r;\n        (x, y) \\<in> (s \\<union> r)\\<^sup>+\\<rbrakk>\n       \\<Longrightarrow> (x, z) \\<in> (s \\<union> r)\\<^sup>+", "then"], ["proof (chain)\npicking this:\n  (x, y_) \\<in> r", "show ?case"], ["proof (prove)\nusing this:\n  (x, y_) \\<in> r\n\ngoal (1 subgoal):\n 1. (x, y_) \\<in> (s \\<union> r)\\<^sup>+", "by auto"], ["proof (state)\nthis:\n  (x, y_) \\<in> (s \\<union> r)\\<^sup>+\n\ngoal (1 subgoal):\n 1. \\<And>y z.\n       \\<lbrakk>(x, y) \\<in> r\\<^sup>+; (y, z) \\<in> r;\n        (x, y) \\<in> (s \\<union> r)\\<^sup>+\\<rbrakk>\n       \\<Longrightarrow> (x, z) \\<in> (s \\<union> r)\\<^sup>+", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>y z.\n       \\<lbrakk>(x, y) \\<in> r\\<^sup>+; (y, z) \\<in> r;\n        (x, y) \\<in> (s \\<union> r)\\<^sup>+\\<rbrakk>\n       \\<Longrightarrow> (x, z) \\<in> (s \\<union> r)\\<^sup>+", "case (step a b)"], ["proof (state)\nthis:\n  (x, a) \\<in> r\\<^sup>+\n  (a, b) \\<in> r\n  (x, a) \\<in> (s \\<union> r)\\<^sup>+\n\ngoal (1 subgoal):\n 1. \\<And>y z.\n       \\<lbrakk>(x, y) \\<in> r\\<^sup>+; (y, z) \\<in> r;\n        (x, y) \\<in> (s \\<union> r)\\<^sup>+\\<rbrakk>\n       \\<Longrightarrow> (x, z) \\<in> (s \\<union> r)\\<^sup>+", "then"], ["proof (chain)\npicking this:\n  (x, a) \\<in> r\\<^sup>+\n  (a, b) \\<in> r\n  (x, a) \\<in> (s \\<union> r)\\<^sup>+", "have \"(a, b) \\<in> (s \\<union> r)\\<^sup>+\""], ["proof (prove)\nusing this:\n  (x, a) \\<in> r\\<^sup>+\n  (a, b) \\<in> r\n  (x, a) \\<in> (s \\<union> r)\\<^sup>+\n\ngoal (1 subgoal):\n 1. (a, b) \\<in> (s \\<union> r)\\<^sup>+", "by auto"], ["proof (state)\nthis:\n  (a, b) \\<in> (s \\<union> r)\\<^sup>+\n\ngoal (1 subgoal):\n 1. \\<And>y z.\n       \\<lbrakk>(x, y) \\<in> r\\<^sup>+; (y, z) \\<in> r;\n        (x, y) \\<in> (s \\<union> r)\\<^sup>+\\<rbrakk>\n       \\<Longrightarrow> (x, z) \\<in> (s \\<union> r)\\<^sup>+", "with \\<open>(x, a) \\<in> (s \\<union> r)\\<^sup>+\\<close>"], ["proof (chain)\npicking this:\n  (x, a) \\<in> (s \\<union> r)\\<^sup>+\n  (a, b) \\<in> (s \\<union> r)\\<^sup>+", "show ?case"], ["proof (prove)\nusing this:\n  (x, a) \\<in> (s \\<union> r)\\<^sup>+\n  (a, b) \\<in> (s \\<union> r)\\<^sup>+\n\ngoal (1 subgoal):\n 1. (x, b) \\<in> (s \\<union> r)\\<^sup>+", "by auto"], ["proof (state)\nthis:\n  (x, b) \\<in> (s \\<union> r)\\<^sup>+\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  (x, y) \\<in> (s \\<union> r)\\<^sup>+\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma restrict_SN_subset: \"restrict_SN R S \\<subseteq> R\""], ["proof (prove)\ngoal (1 subgoal):\n 1. restrict_SN R S \\<subseteq> R", "proof (rule subrelI)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x y. (x, y) \\<in> restrict_SN R S \\<Longrightarrow> (x, y) \\<in> R", "fix a b"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x y. (x, y) \\<in> restrict_SN R S \\<Longrightarrow> (x, y) \\<in> R", "assume \"(a, b) \\<in> restrict_SN R S\""], ["proof (state)\nthis:\n  (a, b) \\<in> restrict_SN R S\n\ngoal (1 subgoal):\n 1. \\<And>x y. (x, y) \\<in> restrict_SN R S \\<Longrightarrow> (x, y) \\<in> R", "then"], ["proof (chain)\npicking this:\n  (a, b) \\<in> restrict_SN R S", "show \"(a, b) \\<in> R\""], ["proof (prove)\nusing this:\n  (a, b) \\<in> restrict_SN R S\n\ngoal (1 subgoal):\n 1. (a, b) \\<in> R", "unfolding restrict_SN_def"], ["proof (prove)\nusing this:\n  (a, b) \\<in> {(a, b) |a b. (a, b) \\<in> R \\<and> SN_on S {a}}\n\ngoal (1 subgoal):\n 1. (a, b) \\<in> R", "by simp"], ["proof (state)\nthis:\n  (a, b) \\<in> R\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma chain_Un_SN_on_imp_first_step:\n  assumes \"chain (R \\<union> S) t\" and \"SN_on S {t 0}\"\n  shows \"\\<exists>i. (t i, t (Suc i)) \\<in> R \\<and> (\\<forall>j<i. (t j, t (Suc j)) \\<in> S \\<and> (t j, t (Suc j)) \\<notin> R)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>i.\n       (t i, t (Suc i)) \\<in> R \\<and>\n       (\\<forall>j<i.\n           (t j, t (Suc j)) \\<in> S \\<and> (t j, t (Suc j)) \\<notin> R)", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<exists>i.\n       (t i, t (Suc i)) \\<in> R \\<and>\n       (\\<forall>j<i.\n           (t j, t (Suc j)) \\<in> S \\<and> (t j, t (Suc j)) \\<notin> R)", "from \\<open>SN_on S {t 0}\\<close>"], ["proof (chain)\npicking this:\n  SN_on S {t 0}", "obtain i where \"(t i, t (Suc i)) \\<notin> S\""], ["proof (prove)\nusing this:\n  SN_on S {t 0}\n\ngoal (1 subgoal):\n 1. (\\<And>i.\n        (t i, t (Suc i)) \\<notin> S \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by blast"], ["proof (state)\nthis:\n  (t i, t (Suc i)) \\<notin> S\n\ngoal (1 subgoal):\n 1. \\<exists>i.\n       (t i, t (Suc i)) \\<in> R \\<and>\n       (\\<forall>j<i.\n           (t j, t (Suc j)) \\<in> S \\<and> (t j, t (Suc j)) \\<notin> R)", "with assms"], ["proof (chain)\npicking this:\n  \\<forall>i. (t i, t (Suc i)) \\<in> R \\<union> S\n  SN_on S {t 0}\n  (t i, t (Suc i)) \\<notin> S", "have \"(t i, t (Suc i)) \\<in> R\" (is \"?P i\")"], ["proof (prove)\nusing this:\n  \\<forall>i. (t i, t (Suc i)) \\<in> R \\<union> S\n  SN_on S {t 0}\n  (t i, t (Suc i)) \\<notin> S\n\ngoal (1 subgoal):\n 1. (t i, t (Suc i)) \\<in> R", "by auto"], ["proof (state)\nthis:\n  (t i, t (Suc i)) \\<in> R\n\ngoal (1 subgoal):\n 1. \\<exists>i.\n       (t i, t (Suc i)) \\<in> R \\<and>\n       (\\<forall>j<i.\n           (t j, t (Suc j)) \\<in> S \\<and> (t j, t (Suc j)) \\<notin> R)", "let ?i = \"Least ?P\""], ["proof (state)\ngoal (1 subgoal):\n 1. \\<exists>i.\n       (t i, t (Suc i)) \\<in> R \\<and>\n       (\\<forall>j<i.\n           (t j, t (Suc j)) \\<in> S \\<and> (t j, t (Suc j)) \\<notin> R)", "from \\<open>?P i\\<close>"], ["proof (chain)\npicking this:\n  (t i, t (Suc i)) \\<in> R", "have \"?P ?i\""], ["proof (prove)\nusing this:\n  (t i, t (Suc i)) \\<in> R\n\ngoal (1 subgoal):\n 1. (t (LEAST a. (t a, t (Suc a)) \\<in> R),\n     t (Suc (LEAST a. (t a, t (Suc a)) \\<in> R)))\n    \\<in> R", "by (rule LeastI)"], ["proof (state)\nthis:\n  (t (LEAST a. (t a, t (Suc a)) \\<in> R),\n   t (Suc (LEAST a. (t a, t (Suc a)) \\<in> R)))\n  \\<in> R\n\ngoal (1 subgoal):\n 1. \\<exists>i.\n       (t i, t (Suc i)) \\<in> R \\<and>\n       (\\<forall>j<i.\n           (t j, t (Suc j)) \\<in> S \\<and> (t j, t (Suc j)) \\<notin> R)", "have \"\\<forall>j<?i. (t j, t (Suc j)) \\<notin> R\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>j<LEAST a. (t a, t (Suc a)) \\<in> R.\n       (t j, t (Suc j)) \\<notin> R", "using not_less_Least"], ["proof (prove)\nusing this:\n  ?k < (LEAST x. ?P x) \\<Longrightarrow> \\<not> ?P ?k\n\ngoal (1 subgoal):\n 1. \\<forall>j<LEAST a. (t a, t (Suc a)) \\<in> R.\n       (t j, t (Suc j)) \\<notin> R", "by auto"], ["proof (state)\nthis:\n  \\<forall>j<LEAST a. (t a, t (Suc a)) \\<in> R. (t j, t (Suc j)) \\<notin> R\n\ngoal (1 subgoal):\n 1. \\<exists>i.\n       (t i, t (Suc i)) \\<in> R \\<and>\n       (\\<forall>j<i.\n           (t j, t (Suc j)) \\<in> S \\<and> (t j, t (Suc j)) \\<notin> R)", "moreover"], ["proof (state)\nthis:\n  \\<forall>j<LEAST a. (t a, t (Suc a)) \\<in> R. (t j, t (Suc j)) \\<notin> R\n\ngoal (1 subgoal):\n 1. \\<exists>i.\n       (t i, t (Suc i)) \\<in> R \\<and>\n       (\\<forall>j<i.\n           (t j, t (Suc j)) \\<in> S \\<and> (t j, t (Suc j)) \\<notin> R)", "with assms"], ["proof (chain)\npicking this:\n  \\<forall>i. (t i, t (Suc i)) \\<in> R \\<union> S\n  SN_on S {t 0}\n  \\<forall>j<LEAST a. (t a, t (Suc a)) \\<in> R. (t j, t (Suc j)) \\<notin> R", "have \"\\<forall>j<?i. (t j, t (Suc j)) \\<in> S\""], ["proof (prove)\nusing this:\n  \\<forall>i. (t i, t (Suc i)) \\<in> R \\<union> S\n  SN_on S {t 0}\n  \\<forall>j<LEAST a. (t a, t (Suc a)) \\<in> R. (t j, t (Suc j)) \\<notin> R\n\ngoal (1 subgoal):\n 1. \\<forall>j<LEAST a. (t a, t (Suc a)) \\<in> R. (t j, t (Suc j)) \\<in> S", "by best"], ["proof (state)\nthis:\n  \\<forall>j<LEAST a. (t a, t (Suc a)) \\<in> R. (t j, t (Suc j)) \\<in> S\n\ngoal (1 subgoal):\n 1. \\<exists>i.\n       (t i, t (Suc i)) \\<in> R \\<and>\n       (\\<forall>j<i.\n           (t j, t (Suc j)) \\<in> S \\<and> (t j, t (Suc j)) \\<notin> R)", "ultimately"], ["proof (chain)\npicking this:\n  \\<forall>j<LEAST a. (t a, t (Suc a)) \\<in> R. (t j, t (Suc j)) \\<notin> R\n  \\<forall>j<LEAST a. (t a, t (Suc a)) \\<in> R. (t j, t (Suc j)) \\<in> S", "have \"\\<forall>j<?i. (t j, t (Suc j)) \\<in> S \\<and> (t j, t (Suc j)) \\<notin> R\""], ["proof (prove)\nusing this:\n  \\<forall>j<LEAST a. (t a, t (Suc a)) \\<in> R. (t j, t (Suc j)) \\<notin> R\n  \\<forall>j<LEAST a. (t a, t (Suc a)) \\<in> R. (t j, t (Suc j)) \\<in> S\n\ngoal (1 subgoal):\n 1. \\<forall>j<LEAST a. (t a, t (Suc a)) \\<in> R.\n       (t j, t (Suc j)) \\<in> S \\<and> (t j, t (Suc j)) \\<notin> R", "by best"], ["proof (state)\nthis:\n  \\<forall>j<LEAST a. (t a, t (Suc a)) \\<in> R.\n     (t j, t (Suc j)) \\<in> S \\<and> (t j, t (Suc j)) \\<notin> R\n\ngoal (1 subgoal):\n 1. \\<exists>i.\n       (t i, t (Suc i)) \\<in> R \\<and>\n       (\\<forall>j<i.\n           (t j, t (Suc j)) \\<in> S \\<and> (t j, t (Suc j)) \\<notin> R)", "with \\<open>?P ?i\\<close>"], ["proof (chain)\npicking this:\n  (t (LEAST a. (t a, t (Suc a)) \\<in> R),\n   t (Suc (LEAST a. (t a, t (Suc a)) \\<in> R)))\n  \\<in> R\n  \\<forall>j<LEAST a. (t a, t (Suc a)) \\<in> R.\n     (t j, t (Suc j)) \\<in> S \\<and> (t j, t (Suc j)) \\<notin> R", "show ?thesis"], ["proof (prove)\nusing this:\n  (t (LEAST a. (t a, t (Suc a)) \\<in> R),\n   t (Suc (LEAST a. (t a, t (Suc a)) \\<in> R)))\n  \\<in> R\n  \\<forall>j<LEAST a. (t a, t (Suc a)) \\<in> R.\n     (t j, t (Suc j)) \\<in> S \\<and> (t j, t (Suc j)) \\<notin> R\n\ngoal (1 subgoal):\n 1. \\<exists>i.\n       (t i, t (Suc i)) \\<in> R \\<and>\n       (\\<forall>j<i.\n           (t j, t (Suc j)) \\<in> S \\<and> (t j, t (Suc j)) \\<notin> R)", "by best"], ["proof (state)\nthis:\n  \\<exists>i.\n     (t i, t (Suc i)) \\<in> R \\<and>\n     (\\<forall>j<i.\n         (t j, t (Suc j)) \\<in> S \\<and> (t j, t (Suc j)) \\<notin> R)\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma first_step:\n  assumes C: \"C = A \\<union> B\" and steps: \"(x, y) \\<in> C\\<^sup>*\" and Bstep: \"(y, z) \\<in> B\"\n  shows \"\\<exists>y. (x, y) \\<in> A\\<^sup>* O B\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>y. (x, y) \\<in> A\\<^sup>* O B", "using steps"], ["proof (prove)\nusing this:\n  (x, y) \\<in> C\\<^sup>*\n\ngoal (1 subgoal):\n 1. \\<exists>y. (x, y) \\<in> A\\<^sup>* O B", "proof (induct rule: converse_rtrancl_induct)"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<exists>ya. (y, ya) \\<in> A\\<^sup>* O B\n 2. \\<And>ya z.\n       \\<lbrakk>(ya, z) \\<in> C; (z, y) \\<in> C\\<^sup>*;\n        \\<exists>y. (z, y) \\<in> A\\<^sup>* O B\\<rbrakk>\n       \\<Longrightarrow> \\<exists>y. (ya, y) \\<in> A\\<^sup>* O B", "case base"], ["proof (state)\nthis:\n  \n\ngoal (2 subgoals):\n 1. \\<exists>ya. (y, ya) \\<in> A\\<^sup>* O B\n 2. \\<And>ya z.\n       \\<lbrakk>(ya, z) \\<in> C; (z, y) \\<in> C\\<^sup>*;\n        \\<exists>y. (z, y) \\<in> A\\<^sup>* O B\\<rbrakk>\n       \\<Longrightarrow> \\<exists>y. (ya, y) \\<in> A\\<^sup>* O B", "show ?case"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>ya. (y, ya) \\<in> A\\<^sup>* O B", "using Bstep"], ["proof (prove)\nusing this:\n  (y, z) \\<in> B\n\ngoal (1 subgoal):\n 1. \\<exists>ya. (y, ya) \\<in> A\\<^sup>* O B", "by auto"], ["proof (state)\nthis:\n  \\<exists>ya. (y, ya) \\<in> A\\<^sup>* O B\n\ngoal (1 subgoal):\n 1. \\<And>ya z.\n       \\<lbrakk>(ya, z) \\<in> C; (z, y) \\<in> C\\<^sup>*;\n        \\<exists>y. (z, y) \\<in> A\\<^sup>* O B\\<rbrakk>\n       \\<Longrightarrow> \\<exists>y. (ya, y) \\<in> A\\<^sup>* O B", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>ya z.\n       \\<lbrakk>(ya, z) \\<in> C; (z, y) \\<in> C\\<^sup>*;\n        \\<exists>y. (z, y) \\<in> A\\<^sup>* O B\\<rbrakk>\n       \\<Longrightarrow> \\<exists>y. (ya, y) \\<in> A\\<^sup>* O B", "case (step u x)"], ["proof (state)\nthis:\n  (u, x) \\<in> C\n  (x, y) \\<in> C\\<^sup>*\n  \\<exists>y. (x, y) \\<in> A\\<^sup>* O B\n\ngoal (1 subgoal):\n 1. \\<And>ya z.\n       \\<lbrakk>(ya, z) \\<in> C; (z, y) \\<in> C\\<^sup>*;\n        \\<exists>y. (z, y) \\<in> A\\<^sup>* O B\\<rbrakk>\n       \\<Longrightarrow> \\<exists>y. (ya, y) \\<in> A\\<^sup>* O B", "from step(1)[unfolded C]"], ["proof (chain)\npicking this:\n  (u, x) \\<in> A \\<union> B", "show ?case"], ["proof (prove)\nusing this:\n  (u, x) \\<in> A \\<union> B\n\ngoal (1 subgoal):\n 1. \\<exists>y. (u, y) \\<in> A\\<^sup>* O B", "proof"], ["proof (state)\ngoal (2 subgoals):\n 1. (u, x) \\<in> A \\<Longrightarrow> \\<exists>y. (u, y) \\<in> A\\<^sup>* O B\n 2. (u, x) \\<in> B \\<Longrightarrow> \\<exists>y. (u, y) \\<in> A\\<^sup>* O B", "assume \"(u, x) \\<in> B\""], ["proof (state)\nthis:\n  (u, x) \\<in> B\n\ngoal (2 subgoals):\n 1. (u, x) \\<in> A \\<Longrightarrow> \\<exists>y. (u, y) \\<in> A\\<^sup>* O B\n 2. (u, x) \\<in> B \\<Longrightarrow> \\<exists>y. (u, y) \\<in> A\\<^sup>* O B", "then"], ["proof (chain)\npicking this:\n  (u, x) \\<in> B", "show ?thesis"], ["proof (prove)\nusing this:\n  (u, x) \\<in> B\n\ngoal (1 subgoal):\n 1. \\<exists>y. (u, y) \\<in> A\\<^sup>* O B", "by auto"], ["proof (state)\nthis:\n  \\<exists>y. (u, y) \\<in> A\\<^sup>* O B\n\ngoal (1 subgoal):\n 1. (u, x) \\<in> A \\<Longrightarrow> \\<exists>y. (u, y) \\<in> A\\<^sup>* O B", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. (u, x) \\<in> A \\<Longrightarrow> \\<exists>y. (u, y) \\<in> A\\<^sup>* O B", "assume ux: \"(u, x) \\<in> A\""], ["proof (state)\nthis:\n  (u, x) \\<in> A\n\ngoal (1 subgoal):\n 1. (u, x) \\<in> A \\<Longrightarrow> \\<exists>y. (u, y) \\<in> A\\<^sup>* O B", "from step(3)"], ["proof (chain)\npicking this:\n  \\<exists>y. (x, y) \\<in> A\\<^sup>* O B", "obtain y where \"(x, y) \\<in> A\\<^sup>* O B\""], ["proof (prove)\nusing this:\n  \\<exists>y. (x, y) \\<in> A\\<^sup>* O B\n\ngoal (1 subgoal):\n 1. (\\<And>y.\n        (x, y) \\<in> A\\<^sup>* O B \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  (x, y) \\<in> A\\<^sup>* O B\n\ngoal (1 subgoal):\n 1. (u, x) \\<in> A \\<Longrightarrow> \\<exists>y. (u, y) \\<in> A\\<^sup>* O B", "then"], ["proof (chain)\npicking this:\n  (x, y) \\<in> A\\<^sup>* O B", "obtain z where \"(x, z) \\<in> A\\<^sup>*\" and step: \"(z, y) \\<in> B\""], ["proof (prove)\nusing this:\n  (x, y) \\<in> A\\<^sup>* O B\n\ngoal (1 subgoal):\n 1. (\\<And>z.\n        \\<lbrakk>(x, z) \\<in> A\\<^sup>*; (z, y) \\<in> B\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  (x, z) \\<in> A\\<^sup>*\n  (z, y) \\<in> B\n\ngoal (1 subgoal):\n 1. (u, x) \\<in> A \\<Longrightarrow> \\<exists>y. (u, y) \\<in> A\\<^sup>* O B", "with ux"], ["proof (chain)\npicking this:\n  (u, x) \\<in> A\n  (x, z) \\<in> A\\<^sup>*\n  (z, y) \\<in> B", "have \"(u, z) \\<in> A\\<^sup>*\""], ["proof (prove)\nusing this:\n  (u, x) \\<in> A\n  (x, z) \\<in> A\\<^sup>*\n  (z, y) \\<in> B\n\ngoal (1 subgoal):\n 1. (u, z) \\<in> A\\<^sup>*", "by auto"], ["proof (state)\nthis:\n  (u, z) \\<in> A\\<^sup>*\n\ngoal (1 subgoal):\n 1. (u, x) \\<in> A \\<Longrightarrow> \\<exists>y. (u, y) \\<in> A\\<^sup>* O B", "with step"], ["proof (chain)\npicking this:\n  (z, y) \\<in> B\n  (u, z) \\<in> A\\<^sup>*", "have \"(u, y) \\<in> A\\<^sup>* O B\""], ["proof (prove)\nusing this:\n  (z, y) \\<in> B\n  (u, z) \\<in> A\\<^sup>*\n\ngoal (1 subgoal):\n 1. (u, y) \\<in> A\\<^sup>* O B", "by auto"], ["proof (state)\nthis:\n  (u, y) \\<in> A\\<^sup>* O B\n\ngoal (1 subgoal):\n 1. (u, x) \\<in> A \\<Longrightarrow> \\<exists>y. (u, y) \\<in> A\\<^sup>* O B", "then"], ["proof (chain)\npicking this:\n  (u, y) \\<in> A\\<^sup>* O B", "show ?thesis"], ["proof (prove)\nusing this:\n  (u, y) \\<in> A\\<^sup>* O B\n\ngoal (1 subgoal):\n 1. \\<exists>y. (u, y) \\<in> A\\<^sup>* O B", "by auto"], ["proof (state)\nthis:\n  \\<exists>y. (u, y) \\<in> A\\<^sup>* O B\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>y. (u, y) \\<in> A\\<^sup>* O B\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma first_step_O:\n  assumes C: \"C = A \\<union> B\" and steps: \"(x, y) \\<in> C\\<^sup>* O B\"\n  shows \"\\<exists> y. (x, y) \\<in> A\\<^sup>* O B\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>y. (x, y) \\<in> A\\<^sup>* O B", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<exists>y. (x, y) \\<in> A\\<^sup>* O B", "from steps"], ["proof (chain)\npicking this:\n  (x, y) \\<in> C\\<^sup>* O B", "obtain z where \"(x, z) \\<in> C\\<^sup>*\" and \"(z, y) \\<in> B\""], ["proof (prove)\nusing this:\n  (x, y) \\<in> C\\<^sup>* O B\n\ngoal (1 subgoal):\n 1. (\\<And>z.\n        \\<lbrakk>(x, z) \\<in> C\\<^sup>*; (z, y) \\<in> B\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  (x, z) \\<in> C\\<^sup>*\n  (z, y) \\<in> B\n\ngoal (1 subgoal):\n 1. \\<exists>y. (x, y) \\<in> A\\<^sup>* O B", "from first_step [OF C this]"], ["proof (chain)\npicking this:\n  \\<exists>y. (x, y) \\<in> A\\<^sup>* O B", "show ?thesis"], ["proof (prove)\nusing this:\n  \\<exists>y. (x, y) \\<in> A\\<^sup>* O B\n\ngoal (1 subgoal):\n 1. \\<exists>y. (x, y) \\<in> A\\<^sup>* O B", "."], ["proof (state)\nthis:\n  \\<exists>y. (x, y) \\<in> A\\<^sup>* O B\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma firstStep:\n  assumes LSR: \"L = S \\<union> R\" and xyL: \"(x, y) \\<in> L\\<^sup>*\"\n  shows \"(x, y) \\<in> R\\<^sup>* \\<or> (x, y) \\<in> R\\<^sup>* O S O L\\<^sup>*\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (x, y) \\<in> R\\<^sup>* \\<or> (x, y) \\<in> R\\<^sup>* O S O L\\<^sup>*", "proof (cases \"(x, y) \\<in> R\\<^sup>*\")"], ["proof (state)\ngoal (2 subgoals):\n 1. (x, y) \\<in> R\\<^sup>* \\<Longrightarrow>\n    (x, y) \\<in> R\\<^sup>* \\<or> (x, y) \\<in> R\\<^sup>* O S O L\\<^sup>*\n 2. (x, y) \\<notin> R\\<^sup>* \\<Longrightarrow>\n    (x, y) \\<in> R\\<^sup>* \\<or> (x, y) \\<in> R\\<^sup>* O S O L\\<^sup>*", "case True"], ["proof (state)\nthis:\n  (x, y) \\<in> R\\<^sup>*\n\ngoal (2 subgoals):\n 1. (x, y) \\<in> R\\<^sup>* \\<Longrightarrow>\n    (x, y) \\<in> R\\<^sup>* \\<or> (x, y) \\<in> R\\<^sup>* O S O L\\<^sup>*\n 2. (x, y) \\<notin> R\\<^sup>* \\<Longrightarrow>\n    (x, y) \\<in> R\\<^sup>* \\<or> (x, y) \\<in> R\\<^sup>* O S O L\\<^sup>*", "then"], ["proof (chain)\npicking this:\n  (x, y) \\<in> R\\<^sup>*", "show ?thesis"], ["proof (prove)\nusing this:\n  (x, y) \\<in> R\\<^sup>*\n\ngoal (1 subgoal):\n 1. (x, y) \\<in> R\\<^sup>* \\<or> (x, y) \\<in> R\\<^sup>* O S O L\\<^sup>*", "by simp"], ["proof (state)\nthis:\n  (x, y) \\<in> R\\<^sup>* \\<or> (x, y) \\<in> R\\<^sup>* O S O L\\<^sup>*\n\ngoal (1 subgoal):\n 1. (x, y) \\<notin> R\\<^sup>* \\<Longrightarrow>\n    (x, y) \\<in> R\\<^sup>* \\<or> (x, y) \\<in> R\\<^sup>* O S O L\\<^sup>*", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. (x, y) \\<notin> R\\<^sup>* \\<Longrightarrow>\n    (x, y) \\<in> R\\<^sup>* \\<or> (x, y) \\<in> R\\<^sup>* O S O L\\<^sup>*", "case False"], ["proof (state)\nthis:\n  (x, y) \\<notin> R\\<^sup>*\n\ngoal (1 subgoal):\n 1. (x, y) \\<notin> R\\<^sup>* \\<Longrightarrow>\n    (x, y) \\<in> R\\<^sup>* \\<or> (x, y) \\<in> R\\<^sup>* O S O L\\<^sup>*", "let ?SR = \"S \\<union> R\""], ["proof (state)\ngoal (1 subgoal):\n 1. (x, y) \\<notin> R\\<^sup>* \\<Longrightarrow>\n    (x, y) \\<in> R\\<^sup>* \\<or> (x, y) \\<in> R\\<^sup>* O S O L\\<^sup>*", "from xyL and LSR"], ["proof (chain)\npicking this:\n  (x, y) \\<in> L\\<^sup>*\n  L = S \\<union> R", "have \"(x, y) \\<in> ?SR\\<^sup>*\""], ["proof (prove)\nusing this:\n  (x, y) \\<in> L\\<^sup>*\n  L = S \\<union> R\n\ngoal (1 subgoal):\n 1. (x, y) \\<in> (S \\<union> R)\\<^sup>*", "by simp"], ["proof (state)\nthis:\n  (x, y) \\<in> (S \\<union> R)\\<^sup>*\n\ngoal (1 subgoal):\n 1. (x, y) \\<notin> R\\<^sup>* \\<Longrightarrow>\n    (x, y) \\<in> R\\<^sup>* \\<or> (x, y) \\<in> R\\<^sup>* O S O L\\<^sup>*", "from this and False"], ["proof (chain)\npicking this:\n  (x, y) \\<in> (S \\<union> R)\\<^sup>*\n  (x, y) \\<notin> R\\<^sup>*", "have \"(x, y) \\<in> R\\<^sup>* O S O ?SR\\<^sup>*\""], ["proof (prove)\nusing this:\n  (x, y) \\<in> (S \\<union> R)\\<^sup>*\n  (x, y) \\<notin> R\\<^sup>*\n\ngoal (1 subgoal):\n 1. (x, y) \\<in> R\\<^sup>* O S O (S \\<union> R)\\<^sup>*", "proof (induct rule: rtrancl_induct)"], ["proof (state)\ngoal (2 subgoals):\n 1. (x, x) \\<notin> R\\<^sup>* \\<Longrightarrow>\n    (x, x) \\<in> R\\<^sup>* O S O (S \\<union> R)\\<^sup>*\n 2. \\<And>y z.\n       \\<lbrakk>(x, y) \\<in> (S \\<union> R)\\<^sup>*;\n        (y, z) \\<in> S \\<union> R;\n        (x, y) \\<notin> R\\<^sup>* \\<Longrightarrow>\n        (x, y) \\<in> R\\<^sup>* O S O (S \\<union> R)\\<^sup>*;\n        (x, z) \\<notin> R\\<^sup>*\\<rbrakk>\n       \\<Longrightarrow> (x, z) \\<in> R\\<^sup>* O S O (S \\<union> R)\\<^sup>*", "case base"], ["proof (state)\nthis:\n  (x, x) \\<notin> R\\<^sup>*\n\ngoal (2 subgoals):\n 1. (x, x) \\<notin> R\\<^sup>* \\<Longrightarrow>\n    (x, x) \\<in> R\\<^sup>* O S O (S \\<union> R)\\<^sup>*\n 2. \\<And>y z.\n       \\<lbrakk>(x, y) \\<in> (S \\<union> R)\\<^sup>*;\n        (y, z) \\<in> S \\<union> R;\n        (x, y) \\<notin> R\\<^sup>* \\<Longrightarrow>\n        (x, y) \\<in> R\\<^sup>* O S O (S \\<union> R)\\<^sup>*;\n        (x, z) \\<notin> R\\<^sup>*\\<rbrakk>\n       \\<Longrightarrow> (x, z) \\<in> R\\<^sup>* O S O (S \\<union> R)\\<^sup>*", "then"], ["proof (chain)\npicking this:\n  (x, x) \\<notin> R\\<^sup>*", "show ?case"], ["proof (prove)\nusing this:\n  (x, x) \\<notin> R\\<^sup>*\n\ngoal (1 subgoal):\n 1. (x, x) \\<in> R\\<^sup>* O S O (S \\<union> R)\\<^sup>*", "by simp"], ["proof (state)\nthis:\n  (x, x) \\<in> R\\<^sup>* O S O (S \\<union> R)\\<^sup>*\n\ngoal (1 subgoal):\n 1. \\<And>y z.\n       \\<lbrakk>(x, y) \\<in> (S \\<union> R)\\<^sup>*;\n        (y, z) \\<in> S \\<union> R;\n        (x, y) \\<notin> R\\<^sup>* \\<Longrightarrow>\n        (x, y) \\<in> R\\<^sup>* O S O (S \\<union> R)\\<^sup>*;\n        (x, z) \\<notin> R\\<^sup>*\\<rbrakk>\n       \\<Longrightarrow> (x, z) \\<in> R\\<^sup>* O S O (S \\<union> R)\\<^sup>*", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>y z.\n       \\<lbrakk>(x, y) \\<in> (S \\<union> R)\\<^sup>*;\n        (y, z) \\<in> S \\<union> R;\n        (x, y) \\<notin> R\\<^sup>* \\<Longrightarrow>\n        (x, y) \\<in> R\\<^sup>* O S O (S \\<union> R)\\<^sup>*;\n        (x, z) \\<notin> R\\<^sup>*\\<rbrakk>\n       \\<Longrightarrow> (x, z) \\<in> R\\<^sup>* O S O (S \\<union> R)\\<^sup>*", "case (step y z)"], ["proof (state)\nthis:\n  (x, y) \\<in> (S \\<union> R)\\<^sup>*\n  (y, z) \\<in> S \\<union> R\n  (x, y) \\<notin> R\\<^sup>* \\<Longrightarrow>\n  (x, y) \\<in> R\\<^sup>* O S O (S \\<union> R)\\<^sup>*\n  (x, z) \\<notin> R\\<^sup>*\n\ngoal (1 subgoal):\n 1. \\<And>y z.\n       \\<lbrakk>(x, y) \\<in> (S \\<union> R)\\<^sup>*;\n        (y, z) \\<in> S \\<union> R;\n        (x, y) \\<notin> R\\<^sup>* \\<Longrightarrow>\n        (x, y) \\<in> R\\<^sup>* O S O (S \\<union> R)\\<^sup>*;\n        (x, z) \\<notin> R\\<^sup>*\\<rbrakk>\n       \\<Longrightarrow> (x, z) \\<in> R\\<^sup>* O S O (S \\<union> R)\\<^sup>*", "then"], ["proof (chain)\npicking this:\n  (x, y) \\<in> (S \\<union> R)\\<^sup>*\n  (y, z) \\<in> S \\<union> R\n  (x, y) \\<notin> R\\<^sup>* \\<Longrightarrow>\n  (x, y) \\<in> R\\<^sup>* O S O (S \\<union> R)\\<^sup>*\n  (x, z) \\<notin> R\\<^sup>*", "show ?case"], ["proof (prove)\nusing this:\n  (x, y) \\<in> (S \\<union> R)\\<^sup>*\n  (y, z) \\<in> S \\<union> R\n  (x, y) \\<notin> R\\<^sup>* \\<Longrightarrow>\n  (x, y) \\<in> R\\<^sup>* O S O (S \\<union> R)\\<^sup>*\n  (x, z) \\<notin> R\\<^sup>*\n\ngoal (1 subgoal):\n 1. (x, z) \\<in> R\\<^sup>* O S O (S \\<union> R)\\<^sup>*", "proof (cases \"(x, y) \\<in> R\\<^sup>*\")"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<lbrakk>(x, y) \\<in> (S \\<union> R)\\<^sup>*; (y, z) \\<in> S \\<union> R;\n     (x, y) \\<notin> R\\<^sup>* \\<Longrightarrow>\n     (x, y) \\<in> R\\<^sup>* O S O (S \\<union> R)\\<^sup>*;\n     (x, z) \\<notin> R\\<^sup>*; (x, y) \\<in> R\\<^sup>*\\<rbrakk>\n    \\<Longrightarrow> (x, z) \\<in> R\\<^sup>* O S O (S \\<union> R)\\<^sup>*\n 2. \\<lbrakk>(x, y) \\<in> (S \\<union> R)\\<^sup>*; (y, z) \\<in> S \\<union> R;\n     (x, y) \\<notin> R\\<^sup>* \\<Longrightarrow>\n     (x, y) \\<in> R\\<^sup>* O S O (S \\<union> R)\\<^sup>*;\n     (x, z) \\<notin> R\\<^sup>*; (x, y) \\<notin> R\\<^sup>*\\<rbrakk>\n    \\<Longrightarrow> (x, z) \\<in> R\\<^sup>* O S O (S \\<union> R)\\<^sup>*", "case False"], ["proof (state)\nthis:\n  (x, y) \\<notin> R\\<^sup>*\n\ngoal (2 subgoals):\n 1. \\<lbrakk>(x, y) \\<in> (S \\<union> R)\\<^sup>*; (y, z) \\<in> S \\<union> R;\n     (x, y) \\<notin> R\\<^sup>* \\<Longrightarrow>\n     (x, y) \\<in> R\\<^sup>* O S O (S \\<union> R)\\<^sup>*;\n     (x, z) \\<notin> R\\<^sup>*; (x, y) \\<in> R\\<^sup>*\\<rbrakk>\n    \\<Longrightarrow> (x, z) \\<in> R\\<^sup>* O S O (S \\<union> R)\\<^sup>*\n 2. \\<lbrakk>(x, y) \\<in> (S \\<union> R)\\<^sup>*; (y, z) \\<in> S \\<union> R;\n     (x, y) \\<notin> R\\<^sup>* \\<Longrightarrow>\n     (x, y) \\<in> R\\<^sup>* O S O (S \\<union> R)\\<^sup>*;\n     (x, z) \\<notin> R\\<^sup>*; (x, y) \\<notin> R\\<^sup>*\\<rbrakk>\n    \\<Longrightarrow> (x, z) \\<in> R\\<^sup>* O S O (S \\<union> R)\\<^sup>*", "with step"], ["proof (chain)\npicking this:\n  (x, y) \\<in> (S \\<union> R)\\<^sup>*\n  (y, z) \\<in> S \\<union> R\n  (x, y) \\<notin> R\\<^sup>* \\<Longrightarrow>\n  (x, y) \\<in> R\\<^sup>* O S O (S \\<union> R)\\<^sup>*\n  (x, z) \\<notin> R\\<^sup>*\n  (x, y) \\<notin> R\\<^sup>*", "have \"(x, y) \\<in> R\\<^sup>* O S O ?SR\\<^sup>*\""], ["proof (prove)\nusing this:\n  (x, y) \\<in> (S \\<union> R)\\<^sup>*\n  (y, z) \\<in> S \\<union> R\n  (x, y) \\<notin> R\\<^sup>* \\<Longrightarrow>\n  (x, y) \\<in> R\\<^sup>* O S O (S \\<union> R)\\<^sup>*\n  (x, z) \\<notin> R\\<^sup>*\n  (x, y) \\<notin> R\\<^sup>*\n\ngoal (1 subgoal):\n 1. (x, y) \\<in> R\\<^sup>* O S O (S \\<union> R)\\<^sup>*", "by simp"], ["proof (state)\nthis:\n  (x, y) \\<in> R\\<^sup>* O S O (S \\<union> R)\\<^sup>*\n\ngoal (2 subgoals):\n 1. \\<lbrakk>(x, y) \\<in> (S \\<union> R)\\<^sup>*; (y, z) \\<in> S \\<union> R;\n     (x, y) \\<notin> R\\<^sup>* \\<Longrightarrow>\n     (x, y) \\<in> R\\<^sup>* O S O (S \\<union> R)\\<^sup>*;\n     (x, z) \\<notin> R\\<^sup>*; (x, y) \\<in> R\\<^sup>*\\<rbrakk>\n    \\<Longrightarrow> (x, z) \\<in> R\\<^sup>* O S O (S \\<union> R)\\<^sup>*\n 2. \\<lbrakk>(x, y) \\<in> (S \\<union> R)\\<^sup>*; (y, z) \\<in> S \\<union> R;\n     (x, y) \\<notin> R\\<^sup>* \\<Longrightarrow>\n     (x, y) \\<in> R\\<^sup>* O S O (S \\<union> R)\\<^sup>*;\n     (x, z) \\<notin> R\\<^sup>*; (x, y) \\<notin> R\\<^sup>*\\<rbrakk>\n    \\<Longrightarrow> (x, z) \\<in> R\\<^sup>* O S O (S \\<union> R)\\<^sup>*", "from this"], ["proof (chain)\npicking this:\n  (x, y) \\<in> R\\<^sup>* O S O (S \\<union> R)\\<^sup>*", "obtain u where xu: \"(x, u) \\<in> R\\<^sup>* O S\" and uy: \"(u, y) \\<in> ?SR\\<^sup>*\""], ["proof (prove)\nusing this:\n  (x, y) \\<in> R\\<^sup>* O S O (S \\<union> R)\\<^sup>*\n\ngoal (1 subgoal):\n 1. (\\<And>u.\n        \\<lbrakk>(x, u) \\<in> R\\<^sup>* O S;\n         (u, y) \\<in> (S \\<union> R)\\<^sup>*\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by force"], ["proof (state)\nthis:\n  (x, u) \\<in> R\\<^sup>* O S\n  (u, y) \\<in> (S \\<union> R)\\<^sup>*\n\ngoal (2 subgoals):\n 1. \\<lbrakk>(x, y) \\<in> (S \\<union> R)\\<^sup>*; (y, z) \\<in> S \\<union> R;\n     (x, y) \\<notin> R\\<^sup>* \\<Longrightarrow>\n     (x, y) \\<in> R\\<^sup>* O S O (S \\<union> R)\\<^sup>*;\n     (x, z) \\<notin> R\\<^sup>*; (x, y) \\<in> R\\<^sup>*\\<rbrakk>\n    \\<Longrightarrow> (x, z) \\<in> R\\<^sup>* O S O (S \\<union> R)\\<^sup>*\n 2. \\<lbrakk>(x, y) \\<in> (S \\<union> R)\\<^sup>*; (y, z) \\<in> S \\<union> R;\n     (x, y) \\<notin> R\\<^sup>* \\<Longrightarrow>\n     (x, y) \\<in> R\\<^sup>* O S O (S \\<union> R)\\<^sup>*;\n     (x, z) \\<notin> R\\<^sup>*; (x, y) \\<notin> R\\<^sup>*\\<rbrakk>\n    \\<Longrightarrow> (x, z) \\<in> R\\<^sup>* O S O (S \\<union> R)\\<^sup>*", "from \\<open>(y, z) \\<in> ?SR\\<close>"], ["proof (chain)\npicking this:\n  (y, z) \\<in> S \\<union> R", "have \"(y, z) \\<in> ?SR\\<^sup>*\""], ["proof (prove)\nusing this:\n  (y, z) \\<in> S \\<union> R\n\ngoal (1 subgoal):\n 1. (y, z) \\<in> (S \\<union> R)\\<^sup>*", "by auto"], ["proof (state)\nthis:\n  (y, z) \\<in> (S \\<union> R)\\<^sup>*\n\ngoal (2 subgoals):\n 1. \\<lbrakk>(x, y) \\<in> (S \\<union> R)\\<^sup>*; (y, z) \\<in> S \\<union> R;\n     (x, y) \\<notin> R\\<^sup>* \\<Longrightarrow>\n     (x, y) \\<in> R\\<^sup>* O S O (S \\<union> R)\\<^sup>*;\n     (x, z) \\<notin> R\\<^sup>*; (x, y) \\<in> R\\<^sup>*\\<rbrakk>\n    \\<Longrightarrow> (x, z) \\<in> R\\<^sup>* O S O (S \\<union> R)\\<^sup>*\n 2. \\<lbrakk>(x, y) \\<in> (S \\<union> R)\\<^sup>*; (y, z) \\<in> S \\<union> R;\n     (x, y) \\<notin> R\\<^sup>* \\<Longrightarrow>\n     (x, y) \\<in> R\\<^sup>* O S O (S \\<union> R)\\<^sup>*;\n     (x, z) \\<notin> R\\<^sup>*; (x, y) \\<notin> R\\<^sup>*\\<rbrakk>\n    \\<Longrightarrow> (x, z) \\<in> R\\<^sup>* O S O (S \\<union> R)\\<^sup>*", "with uy"], ["proof (chain)\npicking this:\n  (u, y) \\<in> (S \\<union> R)\\<^sup>*\n  (y, z) \\<in> (S \\<union> R)\\<^sup>*", "have \"(u, z) \\<in> ?SR\\<^sup>*\""], ["proof (prove)\nusing this:\n  (u, y) \\<in> (S \\<union> R)\\<^sup>*\n  (y, z) \\<in> (S \\<union> R)\\<^sup>*\n\ngoal (1 subgoal):\n 1. (u, z) \\<in> (S \\<union> R)\\<^sup>*", "by (rule rtrancl_trans)"], ["proof (state)\nthis:\n  (u, z) \\<in> (S \\<union> R)\\<^sup>*\n\ngoal (2 subgoals):\n 1. \\<lbrakk>(x, y) \\<in> (S \\<union> R)\\<^sup>*; (y, z) \\<in> S \\<union> R;\n     (x, y) \\<notin> R\\<^sup>* \\<Longrightarrow>\n     (x, y) \\<in> R\\<^sup>* O S O (S \\<union> R)\\<^sup>*;\n     (x, z) \\<notin> R\\<^sup>*; (x, y) \\<in> R\\<^sup>*\\<rbrakk>\n    \\<Longrightarrow> (x, z) \\<in> R\\<^sup>* O S O (S \\<union> R)\\<^sup>*\n 2. \\<lbrakk>(x, y) \\<in> (S \\<union> R)\\<^sup>*; (y, z) \\<in> S \\<union> R;\n     (x, y) \\<notin> R\\<^sup>* \\<Longrightarrow>\n     (x, y) \\<in> R\\<^sup>* O S O (S \\<union> R)\\<^sup>*;\n     (x, z) \\<notin> R\\<^sup>*; (x, y) \\<notin> R\\<^sup>*\\<rbrakk>\n    \\<Longrightarrow> (x, z) \\<in> R\\<^sup>* O S O (S \\<union> R)\\<^sup>*", "with xu"], ["proof (chain)\npicking this:\n  (x, u) \\<in> R\\<^sup>* O S\n  (u, z) \\<in> (S \\<union> R)\\<^sup>*", "show ?thesis"], ["proof (prove)\nusing this:\n  (x, u) \\<in> R\\<^sup>* O S\n  (u, z) \\<in> (S \\<union> R)\\<^sup>*\n\ngoal (1 subgoal):\n 1. (x, z) \\<in> R\\<^sup>* O S O (S \\<union> R)\\<^sup>*", "by auto"], ["proof (state)\nthis:\n  (x, z) \\<in> R\\<^sup>* O S O (S \\<union> R)\\<^sup>*\n\ngoal (1 subgoal):\n 1. \\<lbrakk>(x, y) \\<in> (S \\<union> R)\\<^sup>*; (y, z) \\<in> S \\<union> R;\n     (x, y) \\<notin> R\\<^sup>* \\<Longrightarrow>\n     (x, y) \\<in> R\\<^sup>* O S O (S \\<union> R)\\<^sup>*;\n     (x, z) \\<notin> R\\<^sup>*; (x, y) \\<in> R\\<^sup>*\\<rbrakk>\n    \\<Longrightarrow> (x, z) \\<in> R\\<^sup>* O S O (S \\<union> R)\\<^sup>*", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<lbrakk>(x, y) \\<in> (S \\<union> R)\\<^sup>*; (y, z) \\<in> S \\<union> R;\n     (x, y) \\<notin> R\\<^sup>* \\<Longrightarrow>\n     (x, y) \\<in> R\\<^sup>* O S O (S \\<union> R)\\<^sup>*;\n     (x, z) \\<notin> R\\<^sup>*; (x, y) \\<in> R\\<^sup>*\\<rbrakk>\n    \\<Longrightarrow> (x, z) \\<in> R\\<^sup>* O S O (S \\<union> R)\\<^sup>*", "case True"], ["proof (state)\nthis:\n  (x, y) \\<in> R\\<^sup>*\n\ngoal (1 subgoal):\n 1. \\<lbrakk>(x, y) \\<in> (S \\<union> R)\\<^sup>*; (y, z) \\<in> S \\<union> R;\n     (x, y) \\<notin> R\\<^sup>* \\<Longrightarrow>\n     (x, y) \\<in> R\\<^sup>* O S O (S \\<union> R)\\<^sup>*;\n     (x, z) \\<notin> R\\<^sup>*; (x, y) \\<in> R\\<^sup>*\\<rbrakk>\n    \\<Longrightarrow> (x, z) \\<in> R\\<^sup>* O S O (S \\<union> R)\\<^sup>*", "have \"(y, z) \\<in> S\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (y, z) \\<in> S", "proof (rule ccontr)"], ["proof (state)\ngoal (1 subgoal):\n 1. (y, z) \\<notin> S \\<Longrightarrow> False", "assume \"(y, z) \\<notin> S\""], ["proof (state)\nthis:\n  (y, z) \\<notin> S\n\ngoal (1 subgoal):\n 1. (y, z) \\<notin> S \\<Longrightarrow> False", "with \\<open>(y, z) \\<in> ?SR\\<close>"], ["proof (chain)\npicking this:\n  (y, z) \\<in> S \\<union> R\n  (y, z) \\<notin> S", "have \"(y, z) \\<in> R\""], ["proof (prove)\nusing this:\n  (y, z) \\<in> S \\<union> R\n  (y, z) \\<notin> S\n\ngoal (1 subgoal):\n 1. (y, z) \\<in> R", "by auto"], ["proof (state)\nthis:\n  (y, z) \\<in> R\n\ngoal (1 subgoal):\n 1. (y, z) \\<notin> S \\<Longrightarrow> False", "with True"], ["proof (chain)\npicking this:\n  (x, y) \\<in> R\\<^sup>*\n  (y, z) \\<in> R", "have \"(x, z) \\<in> R\\<^sup>*\""], ["proof (prove)\nusing this:\n  (x, y) \\<in> R\\<^sup>*\n  (y, z) \\<in> R\n\ngoal (1 subgoal):\n 1. (x, z) \\<in> R\\<^sup>*", "by auto"], ["proof (state)\nthis:\n  (x, z) \\<in> R\\<^sup>*\n\ngoal (1 subgoal):\n 1. (y, z) \\<notin> S \\<Longrightarrow> False", "with \\<open>(x, z) \\<notin> R\\<^sup>*\\<close>"], ["proof (chain)\npicking this:\n  (x, z) \\<notin> R\\<^sup>*\n  (x, z) \\<in> R\\<^sup>*", "show False"], ["proof (prove)\nusing this:\n  (x, z) \\<notin> R\\<^sup>*\n  (x, z) \\<in> R\\<^sup>*\n\ngoal (1 subgoal):\n 1. False", ".."], ["proof (state)\nthis:\n  False\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  (y, z) \\<in> S\n\ngoal (1 subgoal):\n 1. \\<lbrakk>(x, y) \\<in> (S \\<union> R)\\<^sup>*; (y, z) \\<in> S \\<union> R;\n     (x, y) \\<notin> R\\<^sup>* \\<Longrightarrow>\n     (x, y) \\<in> R\\<^sup>* O S O (S \\<union> R)\\<^sup>*;\n     (x, z) \\<notin> R\\<^sup>*; (x, y) \\<in> R\\<^sup>*\\<rbrakk>\n    \\<Longrightarrow> (x, z) \\<in> R\\<^sup>* O S O (S \\<union> R)\\<^sup>*", "with True"], ["proof (chain)\npicking this:\n  (x, y) \\<in> R\\<^sup>*\n  (y, z) \\<in> S", "show ?thesis"], ["proof (prove)\nusing this:\n  (x, y) \\<in> R\\<^sup>*\n  (y, z) \\<in> S\n\ngoal (1 subgoal):\n 1. (x, z) \\<in> R\\<^sup>* O S O (S \\<union> R)\\<^sup>*", "by auto"], ["proof (state)\nthis:\n  (x, z) \\<in> R\\<^sup>* O S O (S \\<union> R)\\<^sup>*\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  (x, z) \\<in> R\\<^sup>* O S O (S \\<union> R)\\<^sup>*\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  (x, y) \\<in> R\\<^sup>* O S O (S \\<union> R)\\<^sup>*\n\ngoal (1 subgoal):\n 1. (x, y) \\<notin> R\\<^sup>* \\<Longrightarrow>\n    (x, y) \\<in> R\\<^sup>* \\<or> (x, y) \\<in> R\\<^sup>* O S O L\\<^sup>*", "with LSR"], ["proof (chain)\npicking this:\n  L = S \\<union> R\n  (x, y) \\<in> R\\<^sup>* O S O (S \\<union> R)\\<^sup>*", "show ?thesis"], ["proof (prove)\nusing this:\n  L = S \\<union> R\n  (x, y) \\<in> R\\<^sup>* O S O (S \\<union> R)\\<^sup>*\n\ngoal (1 subgoal):\n 1. (x, y) \\<in> R\\<^sup>* \\<or> (x, y) \\<in> R\\<^sup>* O S O L\\<^sup>*", "by simp"], ["proof (state)\nthis:\n  (x, y) \\<in> R\\<^sup>* \\<or> (x, y) \\<in> R\\<^sup>* O S O L\\<^sup>*\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma non_strict_ending:\n  assumes chain: \"chain (R \\<union> S) t\"\n    and comp: \"R O S \\<subseteq> S\"\n    and SN: \"SN_on S {t 0}\"\n  shows \"\\<exists>j. \\<forall>i\\<ge>j. (t i, t (Suc i)) \\<in> R - S\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>j. \\<forall>i\\<ge>j. (t i, t (Suc i)) \\<in> R - S", "proof (rule ccontr)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<nexists>j.\n       \\<forall>i\\<ge>j. (t i, t (Suc i)) \\<in> R - S \\<Longrightarrow>\n    False", "assume \"\\<not> ?thesis\""], ["proof (state)\nthis:\n  \\<nexists>j. \\<forall>i\\<ge>j. (t i, t (Suc i)) \\<in> R - S\n\ngoal (1 subgoal):\n 1. \\<nexists>j.\n       \\<forall>i\\<ge>j. (t i, t (Suc i)) \\<in> R - S \\<Longrightarrow>\n    False", "with chain"], ["proof (chain)\npicking this:\n  \\<forall>i. (t i, t (Suc i)) \\<in> R \\<union> S\n  \\<nexists>j. \\<forall>i\\<ge>j. (t i, t (Suc i)) \\<in> R - S", "have \"\\<forall>i. \\<exists>j. j \\<ge> i \\<and> (t j, t (Suc j)) \\<in> S\""], ["proof (prove)\nusing this:\n  \\<forall>i. (t i, t (Suc i)) \\<in> R \\<union> S\n  \\<nexists>j. \\<forall>i\\<ge>j. (t i, t (Suc i)) \\<in> R - S\n\ngoal (1 subgoal):\n 1. \\<forall>i. \\<exists>j\\<ge>i. (t j, t (Suc j)) \\<in> S", "by blast"], ["proof (state)\nthis:\n  \\<forall>i. \\<exists>j\\<ge>i. (t j, t (Suc j)) \\<in> S\n\ngoal (1 subgoal):\n 1. \\<nexists>j.\n       \\<forall>i\\<ge>j. (t i, t (Suc i)) \\<in> R - S \\<Longrightarrow>\n    False", "from choice [OF this]"], ["proof (chain)\npicking this:\n  \\<exists>f.\n     \\<forall>x. x \\<le> f x \\<and> (t (f x), t (Suc (f x))) \\<in> S", "obtain f where S_steps: \"\\<forall>i. i \\<le> f i \\<and> (t (f i), t (Suc (f i))) \\<in> S\""], ["proof (prove)\nusing this:\n  \\<exists>f.\n     \\<forall>x. x \\<le> f x \\<and> (t (f x), t (Suc (f x))) \\<in> S\n\ngoal (1 subgoal):\n 1. (\\<And>f.\n        \\<forall>i.\n           i \\<le> f i \\<and>\n           (t (f i), t (Suc (f i))) \\<in> S \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", ".."], ["proof (state)\nthis:\n  \\<forall>i. i \\<le> f i \\<and> (t (f i), t (Suc (f i))) \\<in> S\n\ngoal (1 subgoal):\n 1. \\<nexists>j.\n       \\<forall>i\\<ge>j. (t i, t (Suc i)) \\<in> R - S \\<Longrightarrow>\n    False", "let ?t = \"\\<lambda>i. t (((Suc \\<circ> f) ^^ i) 0)\""], ["proof (state)\ngoal (1 subgoal):\n 1. \\<nexists>j.\n       \\<forall>i\\<ge>j. (t i, t (Suc i)) \\<in> R - S \\<Longrightarrow>\n    False", "have S_chain: \"\\<forall>i. (t i, t (Suc (f i))) \\<in> S\\<^sup>+\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>i. (t i, t (Suc (f i))) \\<in> S\\<^sup>+", "proof"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>i. (t i, t (Suc (f i))) \\<in> S\\<^sup>+", "fix i"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>i. (t i, t (Suc (f i))) \\<in> S\\<^sup>+", "from S_steps"], ["proof (chain)\npicking this:\n  \\<forall>i. i \\<le> f i \\<and> (t (f i), t (Suc (f i))) \\<in> S", "have leq: \"i\\<le>f i\" and step: \"(t(f i), t(Suc(f i))) \\<in> S\""], ["proof (prove)\nusing this:\n  \\<forall>i. i \\<le> f i \\<and> (t (f i), t (Suc (f i))) \\<in> S\n\ngoal (1 subgoal):\n 1. i \\<le> f i &&& (t (f i), t (Suc (f i))) \\<in> S", "by auto"], ["proof (state)\nthis:\n  i \\<le> f i\n  (t (f i), t (Suc (f i))) \\<in> S\n\ngoal (1 subgoal):\n 1. \\<And>i. (t i, t (Suc (f i))) \\<in> S\\<^sup>+", "from chain_imp_rtrancl [OF chain leq]"], ["proof (chain)\npicking this:\n  (t i, t (f i)) \\<in> (R \\<union> S)\\<^sup>*", "have \"(t i, t(f i)) \\<in> (R \\<union> S)\\<^sup>*\""], ["proof (prove)\nusing this:\n  (t i, t (f i)) \\<in> (R \\<union> S)\\<^sup>*\n\ngoal (1 subgoal):\n 1. (t i, t (f i)) \\<in> (R \\<union> S)\\<^sup>*", "."], ["proof (state)\nthis:\n  (t i, t (f i)) \\<in> (R \\<union> S)\\<^sup>*\n\ngoal (1 subgoal):\n 1. \\<And>i. (t i, t (Suc (f i))) \\<in> S\\<^sup>+", "with step"], ["proof (chain)\npicking this:\n  (t (f i), t (Suc (f i))) \\<in> S\n  (t i, t (f i)) \\<in> (R \\<union> S)\\<^sup>*", "have \"(t i, t(Suc(f i))) \\<in> (R \\<union> S)\\<^sup>* O S\""], ["proof (prove)\nusing this:\n  (t (f i), t (Suc (f i))) \\<in> S\n  (t i, t (f i)) \\<in> (R \\<union> S)\\<^sup>*\n\ngoal (1 subgoal):\n 1. (t i, t (Suc (f i))) \\<in> (R \\<union> S)\\<^sup>* O S", "by auto"], ["proof (state)\nthis:\n  (t i, t (Suc (f i))) \\<in> (R \\<union> S)\\<^sup>* O S\n\ngoal (1 subgoal):\n 1. \\<And>i. (t i, t (Suc (f i))) \\<in> S\\<^sup>+", "from comp_rtrancl_trancl [OF comp this]"], ["proof (chain)\npicking this:\n  (t i, t (Suc (f i))) \\<in> S\\<^sup>+", "show \"(t i, t(Suc(f i))) \\<in> S\\<^sup>+\""], ["proof (prove)\nusing this:\n  (t i, t (Suc (f i))) \\<in> S\\<^sup>+\n\ngoal (1 subgoal):\n 1. (t i, t (Suc (f i))) \\<in> S\\<^sup>+", "."], ["proof (state)\nthis:\n  (t i, t (Suc (f i))) \\<in> S\\<^sup>+\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<forall>i. (t i, t (Suc (f i))) \\<in> S\\<^sup>+\n\ngoal (1 subgoal):\n 1. \\<nexists>j.\n       \\<forall>i\\<ge>j. (t i, t (Suc i)) \\<in> R - S \\<Longrightarrow>\n    False", "then"], ["proof (chain)\npicking this:\n  \\<forall>i. (t i, t (Suc (f i))) \\<in> S\\<^sup>+", "have \"chain (S\\<^sup>+) ?t\""], ["proof (prove)\nusing this:\n  \\<forall>i. (t i, t (Suc (f i))) \\<in> S\\<^sup>+\n\ngoal (1 subgoal):\n 1. \\<forall>i.\n       (t (((Suc \\<circ> f) ^^ i) 0), t (((Suc \\<circ> f) ^^ Suc i) 0))\n       \\<in> S\\<^sup>+", "by simp"], ["proof (state)\nthis:\n  \\<forall>i.\n     (t (((Suc \\<circ> f) ^^ i) 0), t (((Suc \\<circ> f) ^^ Suc i) 0))\n     \\<in> S\\<^sup>+\n\ngoal (1 subgoal):\n 1. \\<nexists>j.\n       \\<forall>i\\<ge>j. (t i, t (Suc i)) \\<in> R - S \\<Longrightarrow>\n    False", "moreover"], ["proof (state)\nthis:\n  \\<forall>i.\n     (t (((Suc \\<circ> f) ^^ i) 0), t (((Suc \\<circ> f) ^^ Suc i) 0))\n     \\<in> S\\<^sup>+\n\ngoal (1 subgoal):\n 1. \\<nexists>j.\n       \\<forall>i\\<ge>j. (t i, t (Suc i)) \\<in> R - S \\<Longrightarrow>\n    False", "have \"SN_on (S\\<^sup>+) {?t 0}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. SN_on (S\\<^sup>+) {t (((Suc \\<circ> f) ^^ 0) 0)}", "using SN_on_trancl [OF SN]"], ["proof (prove)\nusing this:\n  SN_on (S\\<^sup>+) {t 0}\n\ngoal (1 subgoal):\n 1. SN_on (S\\<^sup>+) {t (((Suc \\<circ> f) ^^ 0) 0)}", "by simp"], ["proof (state)\nthis:\n  SN_on (S\\<^sup>+) {t (((Suc \\<circ> f) ^^ 0) 0)}\n\ngoal (1 subgoal):\n 1. \\<nexists>j.\n       \\<forall>i\\<ge>j. (t i, t (Suc i)) \\<in> R - S \\<Longrightarrow>\n    False", "ultimately"], ["proof (chain)\npicking this:\n  \\<forall>i.\n     (t (((Suc \\<circ> f) ^^ i) 0), t (((Suc \\<circ> f) ^^ Suc i) 0))\n     \\<in> S\\<^sup>+\n  SN_on (S\\<^sup>+) {t (((Suc \\<circ> f) ^^ 0) 0)}", "show False"], ["proof (prove)\nusing this:\n  \\<forall>i.\n     (t (((Suc \\<circ> f) ^^ i) 0), t (((Suc \\<circ> f) ^^ Suc i) 0))\n     \\<in> S\\<^sup>+\n  SN_on (S\\<^sup>+) {t (((Suc \\<circ> f) ^^ 0) 0)}\n\ngoal (1 subgoal):\n 1. False", "unfolding SN_defs"], ["proof (prove)\nusing this:\n  \\<forall>i.\n     (t (((Suc \\<circ> f) ^^ i) 0), t (((Suc \\<circ> f) ^^ Suc i) 0))\n     \\<in> S\\<^sup>+\n  \\<nexists>fa.\n     fa 0 \\<in> {t (((Suc \\<circ> f) ^^ 0) 0)} \\<and>\n     (\\<forall>i. (fa i, fa (Suc i)) \\<in> S\\<^sup>+)\n\ngoal (1 subgoal):\n 1. False", "by best"], ["proof (state)\nthis:\n  False\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma SN_on_subset1:\n  assumes \"SN_on r A\" and \"s \\<subseteq> r\"\n  shows \"SN_on s A\""], ["proof (prove)\ngoal (1 subgoal):\n 1. SN_on s A", "using assms"], ["proof (prove)\nusing this:\n  SN_on r A\n  s \\<subseteq> r\n\ngoal (1 subgoal):\n 1. SN_on s A", "unfolding SN_defs"], ["proof (prove)\nusing this:\n  \\<nexists>f. f 0 \\<in> A \\<and> (\\<forall>i. (f i, f (Suc i)) \\<in> r)\n  s \\<subseteq> r\n\ngoal (1 subgoal):\n 1. \\<nexists>f. f 0 \\<in> A \\<and> (\\<forall>i. (f i, f (Suc i)) \\<in> s)", "by blast"], ["", "lemmas SN_on_mono = SN_on_subset1"], ["", "lemma rtrancl_fun_conv:\n  \"((s, t) \\<in> R\\<^sup>*) = (\\<exists> f n. f 0 = s \\<and> f n = t \\<and> (\\<forall> i < n. (f i, f (Suc i)) \\<in> R))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. ((s, t) \\<in> R\\<^sup>*) =\n    (\\<exists>f n.\n        f 0 = s \\<and>\n        f n = t \\<and> (\\<forall>i<n. (f i, f (Suc i)) \\<in> R))", "unfolding rtrancl_is_UN_relpow"], ["proof (prove)\ngoal (1 subgoal):\n 1. ((s, t) \\<in> \\<Union> (range ((^^) R))) =\n    (\\<exists>f n.\n        f 0 = s \\<and>\n        f n = t \\<and> (\\<forall>i<n. (f i, f (Suc i)) \\<in> R))", "using relpow_fun_conv [where R = R]"], ["proof (prove)\nusing this:\n  ((?a, ?b) \\<in> R ^^ ?n) =\n  (\\<exists>f.\n      f 0 = ?a \\<and>\n      f ?n = ?b \\<and> (\\<forall>i<?n. (f i, f (Suc i)) \\<in> R))\n\ngoal (1 subgoal):\n 1. ((s, t) \\<in> \\<Union> (range ((^^) R))) =\n    (\\<exists>f n.\n        f 0 = s \\<and>\n        f n = t \\<and> (\\<forall>i<n. (f i, f (Suc i)) \\<in> R))", "by auto"], ["", "lemma compat_tr_compat:\n  assumes \"NS O S \\<subseteq> S\" shows \"NS\\<^sup>* O S \\<subseteq> S\""], ["proof (prove)\ngoal (1 subgoal):\n 1. NS\\<^sup>* O S \\<subseteq> S", "using non_strict_into_strict [where S = S and NS = NS] assms"], ["proof (prove)\nusing this:\n  \\<lbrakk>NS O S \\<subseteq> S; (?s, ?t) \\<in> NS\\<^sup>* O S\\<rbrakk>\n  \\<Longrightarrow> (?s, ?t) \\<in> S\n  NS O S \\<subseteq> S\n\ngoal (1 subgoal):\n 1. NS\\<^sup>* O S \\<subseteq> S", "by blast"], ["", "lemma right_comp_S [simp]:\n  assumes \"(x, y) \\<in> S O (S O S\\<^sup>* O NS\\<^sup>* \\<union> NS\\<^sup>*)\"\n  shows \"(x, y) \\<in> (S O S\\<^sup>* O NS\\<^sup>*)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (x, y) \\<in> S O S\\<^sup>* O NS\\<^sup>*", "proof-"], ["proof (state)\ngoal (1 subgoal):\n 1. (x, y) \\<in> S O S\\<^sup>* O NS\\<^sup>*", "from assms"], ["proof (chain)\npicking this:\n  (x, y) \\<in> S O (S O S\\<^sup>* O NS\\<^sup>* \\<union> NS\\<^sup>*)", "have \"(x, y) \\<in> (S O S O S\\<^sup>* O NS\\<^sup>*) \\<union> (S O NS\\<^sup>*)\""], ["proof (prove)\nusing this:\n  (x, y) \\<in> S O (S O S\\<^sup>* O NS\\<^sup>* \\<union> NS\\<^sup>*)\n\ngoal (1 subgoal):\n 1. (x, y) \\<in> S O S O S\\<^sup>* O NS\\<^sup>* \\<union> S O NS\\<^sup>*", "by auto"], ["proof (state)\nthis:\n  (x, y) \\<in> S O S O S\\<^sup>* O NS\\<^sup>* \\<union> S O NS\\<^sup>*\n\ngoal (1 subgoal):\n 1. (x, y) \\<in> S O S\\<^sup>* O NS\\<^sup>*", "then"], ["proof (chain)\npicking this:\n  (x, y) \\<in> S O S O S\\<^sup>* O NS\\<^sup>* \\<union> S O NS\\<^sup>*", "have  xy:\"(x, y) \\<in> (S O (S O S\\<^sup>*) O NS\\<^sup>*) \\<union> (S O NS\\<^sup>*)\""], ["proof (prove)\nusing this:\n  (x, y) \\<in> S O S O S\\<^sup>* O NS\\<^sup>* \\<union> S O NS\\<^sup>*\n\ngoal (1 subgoal):\n 1. (x, y) \\<in> S O (S O S\\<^sup>*) O NS\\<^sup>* \\<union> S O NS\\<^sup>*", "by auto"], ["proof (state)\nthis:\n  (x, y) \\<in> S O (S O S\\<^sup>*) O NS\\<^sup>* \\<union> S O NS\\<^sup>*\n\ngoal (1 subgoal):\n 1. (x, y) \\<in> S O S\\<^sup>* O NS\\<^sup>*", "have \"S O S\\<^sup>* \\<subseteq> S\\<^sup>*\""], ["proof (prove)\ngoal (1 subgoal):\n 1. S O S\\<^sup>* \\<subseteq> S\\<^sup>*", "by auto"], ["proof (state)\nthis:\n  S O S\\<^sup>* \\<subseteq> S\\<^sup>*\n\ngoal (1 subgoal):\n 1. (x, y) \\<in> S O S\\<^sup>* O NS\\<^sup>*", "with xy"], ["proof (chain)\npicking this:\n  (x, y) \\<in> S O (S O S\\<^sup>*) O NS\\<^sup>* \\<union> S O NS\\<^sup>*\n  S O S\\<^sup>* \\<subseteq> S\\<^sup>*", "have \"(x, y) \\<in> (S O S\\<^sup>* O NS\\<^sup>*) \\<union> (S O NS\\<^sup>*)\""], ["proof (prove)\nusing this:\n  (x, y) \\<in> S O (S O S\\<^sup>*) O NS\\<^sup>* \\<union> S O NS\\<^sup>*\n  S O S\\<^sup>* \\<subseteq> S\\<^sup>*\n\ngoal (1 subgoal):\n 1. (x, y) \\<in> S O S\\<^sup>* O NS\\<^sup>* \\<union> S O NS\\<^sup>*", "by auto"], ["proof (state)\nthis:\n  (x, y) \\<in> S O S\\<^sup>* O NS\\<^sup>* \\<union> S O NS\\<^sup>*\n\ngoal (1 subgoal):\n 1. (x, y) \\<in> S O S\\<^sup>* O NS\\<^sup>*", "then"], ["proof (chain)\npicking this:\n  (x, y) \\<in> S O S\\<^sup>* O NS\\<^sup>* \\<union> S O NS\\<^sup>*", "show \"(x, y) \\<in> (S O S\\<^sup>* O NS\\<^sup>*)\""], ["proof (prove)\nusing this:\n  (x, y) \\<in> S O S\\<^sup>* O NS\\<^sup>* \\<union> S O NS\\<^sup>*\n\ngoal (1 subgoal):\n 1. (x, y) \\<in> S O S\\<^sup>* O NS\\<^sup>*", "by auto"], ["proof (state)\nthis:\n  (x, y) \\<in> S O S\\<^sup>* O NS\\<^sup>*\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma compatible_SN:\n  assumes SN: \"SN S\"\n  and compat: \"NS O S \\<subseteq> S\" \n  shows \"SN (S O S\\<^sup>* O NS\\<^sup>*)\" (is \"SN ?A\")"], ["proof (prove)\ngoal (1 subgoal):\n 1. SN (S O S\\<^sup>* O NS\\<^sup>*)", "proof"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>f.\n       \\<lbrakk>f 0 \\<in> UNIV;\n        \\<forall>i.\n           (f i, f (Suc i)) \\<in> S O S\\<^sup>* O NS\\<^sup>*\\<rbrakk>\n       \\<Longrightarrow> False", "fix F"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>f.\n       \\<lbrakk>f 0 \\<in> UNIV;\n        \\<forall>i.\n           (f i, f (Suc i)) \\<in> S O S\\<^sup>* O NS\\<^sup>*\\<rbrakk>\n       \\<Longrightarrow> False", "assume chain: \"chain ?A F\""], ["proof (state)\nthis:\n  \\<forall>i. (F i, F (Suc i)) \\<in> S O S\\<^sup>* O NS\\<^sup>*\n\ngoal (1 subgoal):\n 1. \\<And>f.\n       \\<lbrakk>f 0 \\<in> UNIV;\n        \\<forall>i.\n           (f i, f (Suc i)) \\<in> S O S\\<^sup>* O NS\\<^sup>*\\<rbrakk>\n       \\<Longrightarrow> False", "from compat compat_tr_compat"], ["proof (chain)\npicking this:\n  NS O S \\<subseteq> S\n  ?NS O ?S \\<subseteq> ?S \\<Longrightarrow> ?NS\\<^sup>* O ?S \\<subseteq> ?S", "have tr_compat: \"NS\\<^sup>* O S \\<subseteq> S\""], ["proof (prove)\nusing this:\n  NS O S \\<subseteq> S\n  ?NS O ?S \\<subseteq> ?S \\<Longrightarrow> ?NS\\<^sup>* O ?S \\<subseteq> ?S\n\ngoal (1 subgoal):\n 1. NS\\<^sup>* O S \\<subseteq> S", "by blast"], ["proof (state)\nthis:\n  NS\\<^sup>* O S \\<subseteq> S\n\ngoal (1 subgoal):\n 1. \\<And>f.\n       \\<lbrakk>f 0 \\<in> UNIV;\n        \\<forall>i.\n           (f i, f (Suc i)) \\<in> S O S\\<^sup>* O NS\\<^sup>*\\<rbrakk>\n       \\<Longrightarrow> False", "have \"\\<forall>i. (\\<exists>y z. (F i, y) \\<in> S \\<and> (y, z)  \\<in> S\\<^sup>* \\<and> (z, F (Suc i)) \\<in> NS\\<^sup>*)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>i.\n       \\<exists>y z.\n          (F i, y) \\<in> S \\<and>\n          (y, z) \\<in> S\\<^sup>* \\<and> (z, F (Suc i)) \\<in> NS\\<^sup>*", "proof"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>i.\n       \\<exists>y z.\n          (F i, y) \\<in> S \\<and>\n          (y, z) \\<in> S\\<^sup>* \\<and> (z, F (Suc i)) \\<in> NS\\<^sup>*", "fix i"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>i.\n       \\<exists>y z.\n          (F i, y) \\<in> S \\<and>\n          (y, z) \\<in> S\\<^sup>* \\<and> (z, F (Suc i)) \\<in> NS\\<^sup>*", "from chain"], ["proof (chain)\npicking this:\n  \\<forall>i. (F i, F (Suc i)) \\<in> S O S\\<^sup>* O NS\\<^sup>*", "have \"(F i, F (Suc i)) \\<in> (S O S\\<^sup>* O NS\\<^sup>*)\""], ["proof (prove)\nusing this:\n  \\<forall>i. (F i, F (Suc i)) \\<in> S O S\\<^sup>* O NS\\<^sup>*\n\ngoal (1 subgoal):\n 1. (F i, F (Suc i)) \\<in> S O S\\<^sup>* O NS\\<^sup>*", "by auto"], ["proof (state)\nthis:\n  (F i, F (Suc i)) \\<in> S O S\\<^sup>* O NS\\<^sup>*\n\ngoal (1 subgoal):\n 1. \\<And>i.\n       \\<exists>y z.\n          (F i, y) \\<in> S \\<and>\n          (y, z) \\<in> S\\<^sup>* \\<and> (z, F (Suc i)) \\<in> NS\\<^sup>*", "then"], ["proof (chain)\npicking this:\n  (F i, F (Suc i)) \\<in> S O S\\<^sup>* O NS\\<^sup>*", "show \"\\<exists> y z. (F i, y)  \\<in> S \\<and> (y, z)  \\<in> S\\<^sup>* \\<and> (z, F (Suc i)) \\<in> NS\\<^sup>*\""], ["proof (prove)\nusing this:\n  (F i, F (Suc i)) \\<in> S O S\\<^sup>* O NS\\<^sup>*\n\ngoal (1 subgoal):\n 1. \\<exists>y z.\n       (F i, y) \\<in> S \\<and>\n       (y, z) \\<in> S\\<^sup>* \\<and> (z, F (Suc i)) \\<in> NS\\<^sup>*", "unfolding relcomp_def"], ["proof (prove)\nusing this:\n  (F i, F (Suc i))\n  \\<in> {(x, y).\n         ((\\<lambda>x xa. (x, xa) \\<in> S) OO\n          (\\<lambda>x xa.\n              (x, xa)\n              \\<in> {(x, y).\n                     ((\\<lambda>x xa. (x, xa) \\<in> S\\<^sup>*) OO\n                      (\\<lambda>x xa. (x, xa) \\<in> NS\\<^sup>*))\n                      x y}))\n          x y}\n\ngoal (1 subgoal):\n 1. \\<exists>y z.\n       (F i, y) \\<in> S \\<and>\n       (y, z) \\<in> S\\<^sup>* \\<and> (z, F (Suc i)) \\<in> NS\\<^sup>*", "(*FIXME:relcomp_unfold*)"], ["proof (prove)\nusing this:\n  (F i, F (Suc i))\n  \\<in> {(x, y).\n         ((\\<lambda>x xa. (x, xa) \\<in> S) OO\n          (\\<lambda>x xa.\n              (x, xa)\n              \\<in> {(x, y).\n                     ((\\<lambda>x xa. (x, xa) \\<in> S\\<^sup>*) OO\n                      (\\<lambda>x xa. (x, xa) \\<in> NS\\<^sup>*))\n                      x y}))\n          x y}\n\ngoal (1 subgoal):\n 1. \\<exists>y z.\n       (F i, y) \\<in> S \\<and>\n       (y, z) \\<in> S\\<^sup>* \\<and> (z, F (Suc i)) \\<in> NS\\<^sup>*", "using mem_Collect_eq"], ["proof (prove)\nusing this:\n  (F i, F (Suc i))\n  \\<in> {(x, y).\n         ((\\<lambda>x xa. (x, xa) \\<in> S) OO\n          (\\<lambda>x xa.\n              (x, xa)\n              \\<in> {(x, y).\n                     ((\\<lambda>x xa. (x, xa) \\<in> S\\<^sup>*) OO\n                      (\\<lambda>x xa. (x, xa) \\<in> NS\\<^sup>*))\n                      x y}))\n          x y}\n  (?a \\<in> Collect ?P) = ?P ?a\n\ngoal (1 subgoal):\n 1. \\<exists>y z.\n       (F i, y) \\<in> S \\<and>\n       (y, z) \\<in> S\\<^sup>* \\<and> (z, F (Suc i)) \\<in> NS\\<^sup>*", "by auto"], ["proof (state)\nthis:\n  \\<exists>y z.\n     (F i, y) \\<in> S \\<and>\n     (y, z) \\<in> S\\<^sup>* \\<and> (z, F (Suc i)) \\<in> NS\\<^sup>*\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<forall>i.\n     \\<exists>y z.\n        (F i, y) \\<in> S \\<and>\n        (y, z) \\<in> S\\<^sup>* \\<and> (z, F (Suc i)) \\<in> NS\\<^sup>*\n\ngoal (1 subgoal):\n 1. \\<And>f.\n       \\<lbrakk>f 0 \\<in> UNIV;\n        \\<forall>i.\n           (f i, f (Suc i)) \\<in> S O S\\<^sup>* O NS\\<^sup>*\\<rbrakk>\n       \\<Longrightarrow> False", "then"], ["proof (chain)\npicking this:\n  \\<forall>i.\n     \\<exists>y z.\n        (F i, y) \\<in> S \\<and>\n        (y, z) \\<in> S\\<^sup>* \\<and> (z, F (Suc i)) \\<in> NS\\<^sup>*", "have \"\\<exists> f. (\\<forall> i. (\\<exists> z. (F i, f i)  \\<in> S \\<and> ((f i, z)  \\<in> S\\<^sup>*) \\<and>(z, F (Suc i)) \\<in> NS\\<^sup>*))\""], ["proof (prove)\nusing this:\n  \\<forall>i.\n     \\<exists>y z.\n        (F i, y) \\<in> S \\<and>\n        (y, z) \\<in> S\\<^sup>* \\<and> (z, F (Suc i)) \\<in> NS\\<^sup>*\n\ngoal (1 subgoal):\n 1. \\<exists>f.\n       \\<forall>i.\n          \\<exists>z.\n             (F i, f i) \\<in> S \\<and>\n             (f i, z) \\<in> S\\<^sup>* \\<and> (z, F (Suc i)) \\<in> NS\\<^sup>*", "by (rule choice)"], ["proof (state)\nthis:\n  \\<exists>f.\n     \\<forall>i.\n        \\<exists>z.\n           (F i, f i) \\<in> S \\<and>\n           (f i, z) \\<in> S\\<^sup>* \\<and> (z, F (Suc i)) \\<in> NS\\<^sup>*\n\ngoal (1 subgoal):\n 1. \\<And>f.\n       \\<lbrakk>f 0 \\<in> UNIV;\n        \\<forall>i.\n           (f i, f (Suc i)) \\<in> S O S\\<^sup>* O NS\\<^sup>*\\<rbrakk>\n       \\<Longrightarrow> False", "then"], ["proof (chain)\npicking this:\n  \\<exists>f.\n     \\<forall>i.\n        \\<exists>z.\n           (F i, f i) \\<in> S \\<and>\n           (f i, z) \\<in> S\\<^sup>* \\<and> (z, F (Suc i)) \\<in> NS\\<^sup>*", "obtain f\n    where \"\\<forall> i. (\\<exists> z. (F i, f i)  \\<in> S \\<and> ((f i, z)  \\<in> S\\<^sup>*) \\<and>(z, F (Suc i)) \\<in> NS\\<^sup>*)\""], ["proof (prove)\nusing this:\n  \\<exists>f.\n     \\<forall>i.\n        \\<exists>z.\n           (F i, f i) \\<in> S \\<and>\n           (f i, z) \\<in> S\\<^sup>* \\<and> (z, F (Suc i)) \\<in> NS\\<^sup>*\n\ngoal (1 subgoal):\n 1. (\\<And>f.\n        \\<forall>i.\n           \\<exists>z.\n              (F i, f i) \\<in> S \\<and>\n              (f i, z) \\<in> S\\<^sup>* \\<and>\n              (z, F (Suc i)) \\<in> NS\\<^sup>* \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", ".."], ["proof (state)\nthis:\n  \\<forall>i.\n     \\<exists>z.\n        (F i, f i) \\<in> S \\<and>\n        (f i, z) \\<in> S\\<^sup>* \\<and> (z, F (Suc i)) \\<in> NS\\<^sup>*\n\ngoal (1 subgoal):\n 1. \\<And>f.\n       \\<lbrakk>f 0 \\<in> UNIV;\n        \\<forall>i.\n           (f i, f (Suc i)) \\<in> S O S\\<^sup>* O NS\\<^sup>*\\<rbrakk>\n       \\<Longrightarrow> False", "then"], ["proof (chain)\npicking this:\n  \\<forall>i.\n     \\<exists>z.\n        (F i, f i) \\<in> S \\<and>\n        (f i, z) \\<in> S\\<^sup>* \\<and> (z, F (Suc i)) \\<in> NS\\<^sup>*", "have \"\\<exists> g. \\<forall> i. (F i, f i)  \\<in> S \\<and> (f i, g i)  \\<in> S\\<^sup>* \\<and> (g i, F (Suc i)) \\<in> NS\\<^sup>*\""], ["proof (prove)\nusing this:\n  \\<forall>i.\n     \\<exists>z.\n        (F i, f i) \\<in> S \\<and>\n        (f i, z) \\<in> S\\<^sup>* \\<and> (z, F (Suc i)) \\<in> NS\\<^sup>*\n\ngoal (1 subgoal):\n 1. \\<exists>g.\n       \\<forall>i.\n          (F i, f i) \\<in> S \\<and>\n          (f i, g i) \\<in> S\\<^sup>* \\<and>\n          (g i, F (Suc i)) \\<in> NS\\<^sup>*", "by (rule choice)"], ["proof (state)\nthis:\n  \\<exists>g.\n     \\<forall>i.\n        (F i, f i) \\<in> S \\<and>\n        (f i, g i) \\<in> S\\<^sup>* \\<and> (g i, F (Suc i)) \\<in> NS\\<^sup>*\n\ngoal (1 subgoal):\n 1. \\<And>f.\n       \\<lbrakk>f 0 \\<in> UNIV;\n        \\<forall>i.\n           (f i, f (Suc i)) \\<in> S O S\\<^sup>* O NS\\<^sup>*\\<rbrakk>\n       \\<Longrightarrow> False", "then"], ["proof (chain)\npicking this:\n  \\<exists>g.\n     \\<forall>i.\n        (F i, f i) \\<in> S \\<and>\n        (f i, g i) \\<in> S\\<^sup>* \\<and> (g i, F (Suc i)) \\<in> NS\\<^sup>*", "obtain g where \"\\<forall> i. (F i, f i)  \\<in> S \\<and> (f i, g i)  \\<in> S\\<^sup>* \\<and> (g i, F (Suc i)) \\<in> NS\\<^sup>*\""], ["proof (prove)\nusing this:\n  \\<exists>g.\n     \\<forall>i.\n        (F i, f i) \\<in> S \\<and>\n        (f i, g i) \\<in> S\\<^sup>* \\<and> (g i, F (Suc i)) \\<in> NS\\<^sup>*\n\ngoal (1 subgoal):\n 1. (\\<And>g.\n        \\<forall>i.\n           (F i, f i) \\<in> S \\<and>\n           (f i, g i) \\<in> S\\<^sup>* \\<and>\n           (g i, F (Suc i)) \\<in> NS\\<^sup>* \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", ".."], ["proof (state)\nthis:\n  \\<forall>i.\n     (F i, f i) \\<in> S \\<and>\n     (f i, g i) \\<in> S\\<^sup>* \\<and> (g i, F (Suc i)) \\<in> NS\\<^sup>*\n\ngoal (1 subgoal):\n 1. \\<And>f.\n       \\<lbrakk>f 0 \\<in> UNIV;\n        \\<forall>i.\n           (f i, f (Suc i)) \\<in> S O S\\<^sup>* O NS\\<^sup>*\\<rbrakk>\n       \\<Longrightarrow> False", "then"], ["proof (chain)\npicking this:\n  \\<forall>i.\n     (F i, f i) \\<in> S \\<and>\n     (f i, g i) \\<in> S\\<^sup>* \\<and> (g i, F (Suc i)) \\<in> NS\\<^sup>*", "have \"\\<forall> i. (f i, g i)  \\<in> S\\<^sup>* \\<and> (g i, F (Suc i)) \\<in> NS\\<^sup>* \\<and> (F (Suc i), f (Suc i))  \\<in> S\""], ["proof (prove)\nusing this:\n  \\<forall>i.\n     (F i, f i) \\<in> S \\<and>\n     (f i, g i) \\<in> S\\<^sup>* \\<and> (g i, F (Suc i)) \\<in> NS\\<^sup>*\n\ngoal (1 subgoal):\n 1. \\<forall>i.\n       (f i, g i) \\<in> S\\<^sup>* \\<and>\n       (g i, F (Suc i)) \\<in> NS\\<^sup>* \\<and>\n       (F (Suc i), f (Suc i)) \\<in> S", "by auto"], ["proof (state)\nthis:\n  \\<forall>i.\n     (f i, g i) \\<in> S\\<^sup>* \\<and>\n     (g i, F (Suc i)) \\<in> NS\\<^sup>* \\<and> (F (Suc i), f (Suc i)) \\<in> S\n\ngoal (1 subgoal):\n 1. \\<And>f.\n       \\<lbrakk>f 0 \\<in> UNIV;\n        \\<forall>i.\n           (f i, f (Suc i)) \\<in> S O S\\<^sup>* O NS\\<^sup>*\\<rbrakk>\n       \\<Longrightarrow> False", "then"], ["proof (chain)\npicking this:\n  \\<forall>i.\n     (f i, g i) \\<in> S\\<^sup>* \\<and>\n     (g i, F (Suc i)) \\<in> NS\\<^sup>* \\<and> (F (Suc i), f (Suc i)) \\<in> S", "have \"\\<forall> i. (f i, g i)  \\<in> S\\<^sup>* \\<and> (g i, f (Suc i))  \\<in> S\""], ["proof (prove)\nusing this:\n  \\<forall>i.\n     (f i, g i) \\<in> S\\<^sup>* \\<and>\n     (g i, F (Suc i)) \\<in> NS\\<^sup>* \\<and> (F (Suc i), f (Suc i)) \\<in> S\n\ngoal (1 subgoal):\n 1. \\<forall>i. (f i, g i) \\<in> S\\<^sup>* \\<and> (g i, f (Suc i)) \\<in> S", "unfolding relcomp_def"], ["proof (prove)\nusing this:\n  \\<forall>i.\n     (f i, g i) \\<in> S\\<^sup>* \\<and>\n     (g i, F (Suc i)) \\<in> NS\\<^sup>* \\<and> (F (Suc i), f (Suc i)) \\<in> S\n\ngoal (1 subgoal):\n 1. \\<forall>i. (f i, g i) \\<in> S\\<^sup>* \\<and> (g i, f (Suc i)) \\<in> S", "(*FIXME*)"], ["proof (prove)\nusing this:\n  \\<forall>i.\n     (f i, g i) \\<in> S\\<^sup>* \\<and>\n     (g i, F (Suc i)) \\<in> NS\\<^sup>* \\<and> (F (Suc i), f (Suc i)) \\<in> S\n\ngoal (1 subgoal):\n 1. \\<forall>i. (f i, g i) \\<in> S\\<^sup>* \\<and> (g i, f (Suc i)) \\<in> S", "using tr_compat"], ["proof (prove)\nusing this:\n  \\<forall>i.\n     (f i, g i) \\<in> S\\<^sup>* \\<and>\n     (g i, F (Suc i)) \\<in> NS\\<^sup>* \\<and> (F (Suc i), f (Suc i)) \\<in> S\n  NS\\<^sup>* O S \\<subseteq> S\n\ngoal (1 subgoal):\n 1. \\<forall>i. (f i, g i) \\<in> S\\<^sup>* \\<and> (g i, f (Suc i)) \\<in> S", "by auto"], ["proof (state)\nthis:\n  \\<forall>i. (f i, g i) \\<in> S\\<^sup>* \\<and> (g i, f (Suc i)) \\<in> S\n\ngoal (1 subgoal):\n 1. \\<And>f.\n       \\<lbrakk>f 0 \\<in> UNIV;\n        \\<forall>i.\n           (f i, f (Suc i)) \\<in> S O S\\<^sup>* O NS\\<^sup>*\\<rbrakk>\n       \\<Longrightarrow> False", "then"], ["proof (chain)\npicking this:\n  \\<forall>i. (f i, g i) \\<in> S\\<^sup>* \\<and> (g i, f (Suc i)) \\<in> S", "have all:\"\\<forall> i. (f i, g i)  \\<in> S\\<^sup>* \\<and> (g i, f (Suc i))  \\<in> S\\<^sup>+\""], ["proof (prove)\nusing this:\n  \\<forall>i. (f i, g i) \\<in> S\\<^sup>* \\<and> (g i, f (Suc i)) \\<in> S\n\ngoal (1 subgoal):\n 1. \\<forall>i.\n       (f i, g i) \\<in> S\\<^sup>* \\<and> (g i, f (Suc i)) \\<in> S\\<^sup>+", "by auto"], ["proof (state)\nthis:\n  \\<forall>i.\n     (f i, g i) \\<in> S\\<^sup>* \\<and> (g i, f (Suc i)) \\<in> S\\<^sup>+\n\ngoal (1 subgoal):\n 1. \\<And>f.\n       \\<lbrakk>f 0 \\<in> UNIV;\n        \\<forall>i.\n           (f i, f (Suc i)) \\<in> S O S\\<^sup>* O NS\\<^sup>*\\<rbrakk>\n       \\<Longrightarrow> False", "have \"\\<forall> i. (f i, f (Suc i))  \\<in> S\\<^sup>+\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>i. (f i, f (Suc i)) \\<in> S\\<^sup>+", "proof"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>i. (f i, f (Suc i)) \\<in> S\\<^sup>+", "fix i"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>i. (f i, f (Suc i)) \\<in> S\\<^sup>+", "from all"], ["proof (chain)\npicking this:\n  \\<forall>i.\n     (f i, g i) \\<in> S\\<^sup>* \\<and> (g i, f (Suc i)) \\<in> S\\<^sup>+", "have \"(f i, g i)  \\<in> S\\<^sup>* \\<and> (g i, f (Suc i))  \\<in> S\\<^sup>+\""], ["proof (prove)\nusing this:\n  \\<forall>i.\n     (f i, g i) \\<in> S\\<^sup>* \\<and> (g i, f (Suc i)) \\<in> S\\<^sup>+\n\ngoal (1 subgoal):\n 1. (f i, g i) \\<in> S\\<^sup>* \\<and> (g i, f (Suc i)) \\<in> S\\<^sup>+", ".."], ["proof (state)\nthis:\n  (f i, g i) \\<in> S\\<^sup>* \\<and> (g i, f (Suc i)) \\<in> S\\<^sup>+\n\ngoal (1 subgoal):\n 1. \\<And>i. (f i, f (Suc i)) \\<in> S\\<^sup>+", "then"], ["proof (chain)\npicking this:\n  (f i, g i) \\<in> S\\<^sup>* \\<and> (g i, f (Suc i)) \\<in> S\\<^sup>+", "show \"(f i, f (Suc i))  \\<in> S\\<^sup>+\""], ["proof (prove)\nusing this:\n  (f i, g i) \\<in> S\\<^sup>* \\<and> (g i, f (Suc i)) \\<in> S\\<^sup>+\n\ngoal (1 subgoal):\n 1. (f i, f (Suc i)) \\<in> S\\<^sup>+", "using transitive_closure_trans"], ["proof (prove)\nusing this:\n  (f i, g i) \\<in> S\\<^sup>* \\<and> (g i, f (Suc i)) \\<in> S\\<^sup>+\n  \\<lbrakk>(?a, ?b) \\<in> ?R; (?b, ?c) \\<in> ?R\\<rbrakk>\n  \\<Longrightarrow> (?a, ?c) \\<in> ?R\\<^sup>+\n  \\<lbrakk>(?x, ?y) \\<in> ?r\\<^sup>+; (?y, ?z) \\<in> ?r\\<^sup>+\\<rbrakk>\n  \\<Longrightarrow> (?x, ?z) \\<in> ?r\\<^sup>+\n  \\<lbrakk>(?x, ?y) \\<in> ?r\\<^sup>*; (?y, ?z) \\<in> ?r\\<^sup>*\\<rbrakk>\n  \\<Longrightarrow> (?x, ?z) \\<in> ?r\\<^sup>*\n  \\<lbrakk>(?a, ?b) \\<in> ?r\\<^sup>+; (?b, ?c) \\<in> ?r\\<rbrakk>\n  \\<Longrightarrow> (?a, ?c) \\<in> ?r\\<^sup>+\n  \\<lbrakk>(?a, ?b) \\<in> ?r; (?b, ?c) \\<in> ?r\\<^sup>+\\<rbrakk>\n  \\<Longrightarrow> (?a, ?c) \\<in> ?r\\<^sup>+\n  \\<lbrakk>(?a, ?b) \\<in> ?r\\<^sup>*; (?b, ?c) \\<in> ?r\\<rbrakk>\n  \\<Longrightarrow> (?a, ?c) \\<in> ?r\\<^sup>*\n  \\<lbrakk>(?a, ?b) \\<in> ?r; (?b, ?c) \\<in> ?r\\<^sup>*\\<rbrakk>\n  \\<Longrightarrow> (?a, ?c) \\<in> ?r\\<^sup>*\n  \\<lbrakk>(?x, ?y) \\<in> ?r\\<^sup>*; (?y, ?z) \\<in> ?r\\<^sup>+\\<rbrakk>\n  \\<Longrightarrow> (?x, ?z) \\<in> ?r\\<^sup>+\n  \\<lbrakk>(?a, ?b) \\<in> ?r\\<^sup>+; (?b, ?c) \\<in> ?r\\<^sup>*\\<rbrakk>\n  \\<Longrightarrow> (?a, ?c) \\<in> ?r\\<^sup>+\n\ngoal (1 subgoal):\n 1. (f i, f (Suc i)) \\<in> S\\<^sup>+", "by auto"], ["proof (state)\nthis:\n  (f i, f (Suc i)) \\<in> S\\<^sup>+\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<forall>i. (f i, f (Suc i)) \\<in> S\\<^sup>+\n\ngoal (1 subgoal):\n 1. \\<And>f.\n       \\<lbrakk>f 0 \\<in> UNIV;\n        \\<forall>i.\n           (f i, f (Suc i)) \\<in> S O S\\<^sup>* O NS\\<^sup>*\\<rbrakk>\n       \\<Longrightarrow> False", "then"], ["proof (chain)\npicking this:\n  \\<forall>i. (f i, f (Suc i)) \\<in> S\\<^sup>+", "have \"\\<exists>x. f 0 = x \\<and> chain (S\\<^sup>+) f\""], ["proof (prove)\nusing this:\n  \\<forall>i. (f i, f (Suc i)) \\<in> S\\<^sup>+\n\ngoal (1 subgoal):\n 1. \\<exists>x.\n       f 0 = x \\<and> (\\<forall>i. (f i, f (Suc i)) \\<in> S\\<^sup>+)", "by auto"], ["proof (state)\nthis:\n  \\<exists>x. f 0 = x \\<and> (\\<forall>i. (f i, f (Suc i)) \\<in> S\\<^sup>+)\n\ngoal (1 subgoal):\n 1. \\<And>f.\n       \\<lbrakk>f 0 \\<in> UNIV;\n        \\<forall>i.\n           (f i, f (Suc i)) \\<in> S O S\\<^sup>* O NS\\<^sup>*\\<rbrakk>\n       \\<Longrightarrow> False", "then"], ["proof (chain)\npicking this:\n  \\<exists>x. f 0 = x \\<and> (\\<forall>i. (f i, f (Suc i)) \\<in> S\\<^sup>+)", "obtain x where \"f 0 = x \\<and> chain (S\\<^sup>+) f\""], ["proof (prove)\nusing this:\n  \\<exists>x. f 0 = x \\<and> (\\<forall>i. (f i, f (Suc i)) \\<in> S\\<^sup>+)\n\ngoal (1 subgoal):\n 1. (\\<And>x.\n        f 0 = x \\<and>\n        (\\<forall>i. (f i, f (Suc i)) \\<in> S\\<^sup>+) \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  f 0 = x \\<and> (\\<forall>i. (f i, f (Suc i)) \\<in> S\\<^sup>+)\n\ngoal (1 subgoal):\n 1. \\<And>f.\n       \\<lbrakk>f 0 \\<in> UNIV;\n        \\<forall>i.\n           (f i, f (Suc i)) \\<in> S O S\\<^sup>* O NS\\<^sup>*\\<rbrakk>\n       \\<Longrightarrow> False", "then"], ["proof (chain)\npicking this:\n  f 0 = x \\<and> (\\<forall>i. (f i, f (Suc i)) \\<in> S\\<^sup>+)", "have \"\\<exists>f. f 0 = x \\<and> chain (S\\<^sup>+) f\""], ["proof (prove)\nusing this:\n  f 0 = x \\<and> (\\<forall>i. (f i, f (Suc i)) \\<in> S\\<^sup>+)\n\ngoal (1 subgoal):\n 1. \\<exists>f.\n       f 0 = x \\<and> (\\<forall>i. (f i, f (Suc i)) \\<in> S\\<^sup>+)", "by auto"], ["proof (state)\nthis:\n  \\<exists>f. f 0 = x \\<and> (\\<forall>i. (f i, f (Suc i)) \\<in> S\\<^sup>+)\n\ngoal (1 subgoal):\n 1. \\<And>f.\n       \\<lbrakk>f 0 \\<in> UNIV;\n        \\<forall>i.\n           (f i, f (Suc i)) \\<in> S O S\\<^sup>* O NS\\<^sup>*\\<rbrakk>\n       \\<Longrightarrow> False", "then"], ["proof (chain)\npicking this:\n  \\<exists>f. f 0 = x \\<and> (\\<forall>i. (f i, f (Suc i)) \\<in> S\\<^sup>+)", "have \"\\<not> SN_on (S\\<^sup>+) {x}\""], ["proof (prove)\nusing this:\n  \\<exists>f. f 0 = x \\<and> (\\<forall>i. (f i, f (Suc i)) \\<in> S\\<^sup>+)\n\ngoal (1 subgoal):\n 1. \\<not> SN_on (S\\<^sup>+) {x}", "by auto"], ["proof (state)\nthis:\n  \\<not> SN_on (S\\<^sup>+) {x}\n\ngoal (1 subgoal):\n 1. \\<And>f.\n       \\<lbrakk>f 0 \\<in> UNIV;\n        \\<forall>i.\n           (f i, f (Suc i)) \\<in> S O S\\<^sup>* O NS\\<^sup>*\\<rbrakk>\n       \\<Longrightarrow> False", "then"], ["proof (chain)\npicking this:\n  \\<not> SN_on (S\\<^sup>+) {x}", "have \"\\<not> SN (S\\<^sup>+)\""], ["proof (prove)\nusing this:\n  \\<not> SN_on (S\\<^sup>+) {x}\n\ngoal (1 subgoal):\n 1. \\<not> SN (S\\<^sup>+)", "unfolding SN_defs"], ["proof (prove)\nusing this:\n  \\<not> (\\<nexists>f.\n             f 0 \\<in> {x} \\<and>\n             (\\<forall>i. (f i, f (Suc i)) \\<in> S\\<^sup>+))\n\ngoal (1 subgoal):\n 1. \\<not> (\\<nexists>f.\n               f 0 \\<in> UNIV \\<and>\n               (\\<forall>i. (f i, f (Suc i)) \\<in> S\\<^sup>+))", "by auto"], ["proof (state)\nthis:\n  \\<not> SN (S\\<^sup>+)\n\ngoal (1 subgoal):\n 1. \\<And>f.\n       \\<lbrakk>f 0 \\<in> UNIV;\n        \\<forall>i.\n           (f i, f (Suc i)) \\<in> S O S\\<^sup>* O NS\\<^sup>*\\<rbrakk>\n       \\<Longrightarrow> False", "then"], ["proof (chain)\npicking this:\n  \\<not> SN (S\\<^sup>+)", "have wfSconv:\"\\<not> wf ((S\\<^sup>+)\\<inverse>)\""], ["proof (prove)\nusing this:\n  \\<not> SN (S\\<^sup>+)\n\ngoal (1 subgoal):\n 1. \\<not> wf ((S\\<^sup>+)\\<inverse>)", "using SN_iff_wf"], ["proof (prove)\nusing this:\n  \\<not> SN (S\\<^sup>+)\n  SN ?A = wf (?A\\<inverse>)\n\ngoal (1 subgoal):\n 1. \\<not> wf ((S\\<^sup>+)\\<inverse>)", "by auto"], ["proof (state)\nthis:\n  \\<not> wf ((S\\<^sup>+)\\<inverse>)\n\ngoal (1 subgoal):\n 1. \\<And>f.\n       \\<lbrakk>f 0 \\<in> UNIV;\n        \\<forall>i.\n           (f i, f (Suc i)) \\<in> S O S\\<^sup>* O NS\\<^sup>*\\<rbrakk>\n       \\<Longrightarrow> False", "from SN"], ["proof (chain)\npicking this:\n  SN S", "have \"wf (S\\<inverse>)\""], ["proof (prove)\nusing this:\n  SN S\n\ngoal (1 subgoal):\n 1. wf (S\\<inverse>)", "using SN_imp_wf [where?r=S]"], ["proof (prove)\nusing this:\n  SN S\n  SN S \\<Longrightarrow> wf (S\\<inverse>)\n\ngoal (1 subgoal):\n 1. wf (S\\<inverse>)", "by simp"], ["proof (state)\nthis:\n  wf (S\\<inverse>)\n\ngoal (1 subgoal):\n 1. \\<And>f.\n       \\<lbrakk>f 0 \\<in> UNIV;\n        \\<forall>i.\n           (f i, f (Suc i)) \\<in> S O S\\<^sup>* O NS\\<^sup>*\\<rbrakk>\n       \\<Longrightarrow> False", "with wf_converse_trancl wfSconv"], ["proof (chain)\npicking this:\n  wf (?r\\<inverse>) \\<Longrightarrow> wf ((?r\\<^sup>+)\\<inverse>)\n  \\<not> wf ((S\\<^sup>+)\\<inverse>)\n  wf (S\\<inverse>)", "show False"], ["proof (prove)\nusing this:\n  wf (?r\\<inverse>) \\<Longrightarrow> wf ((?r\\<^sup>+)\\<inverse>)\n  \\<not> wf ((S\\<^sup>+)\\<inverse>)\n  wf (S\\<inverse>)\n\ngoal (1 subgoal):\n 1. False", "by auto"], ["proof (state)\nthis:\n  False\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma compatible_rtrancl_split:\n  assumes compat: \"NS O S \\<subseteq> S\"\n   and steps: \"(x, y) \\<in> (NS \\<union> S)\\<^sup>*\"\n  shows \"(x, y) \\<in> S O S\\<^sup>* O NS\\<^sup>* \\<union> NS\\<^sup>*\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (x, y) \\<in> S O S\\<^sup>* O NS\\<^sup>* \\<union> NS\\<^sup>*", "proof-"], ["proof (state)\ngoal (1 subgoal):\n 1. (x, y) \\<in> S O S\\<^sup>* O NS\\<^sup>* \\<union> NS\\<^sup>*", "from steps"], ["proof (chain)\npicking this:\n  (x, y) \\<in> (NS \\<union> S)\\<^sup>*", "have \"\\<exists> n. (x, y) \\<in> (NS \\<union> S)^^n\""], ["proof (prove)\nusing this:\n  (x, y) \\<in> (NS \\<union> S)\\<^sup>*\n\ngoal (1 subgoal):\n 1. \\<exists>n. (x, y) \\<in> (NS \\<union> S) ^^ n", "using rtrancl_imp_relpow [where ?R=\"NS \\<union> S\"]"], ["proof (prove)\nusing this:\n  (x, y) \\<in> (NS \\<union> S)\\<^sup>*\n  ?p \\<in> (NS \\<union> S)\\<^sup>* \\<Longrightarrow>\n  \\<exists>n. ?p \\<in> (NS \\<union> S) ^^ n\n\ngoal (1 subgoal):\n 1. \\<exists>n. (x, y) \\<in> (NS \\<union> S) ^^ n", "by auto"], ["proof (state)\nthis:\n  \\<exists>n. (x, y) \\<in> (NS \\<union> S) ^^ n\n\ngoal (1 subgoal):\n 1. (x, y) \\<in> S O S\\<^sup>* O NS\\<^sup>* \\<union> NS\\<^sup>*", "then"], ["proof (chain)\npicking this:\n  \\<exists>n. (x, y) \\<in> (NS \\<union> S) ^^ n", "obtain n where \"(x, y) \\<in> (NS \\<union> S)^^n\""], ["proof (prove)\nusing this:\n  \\<exists>n. (x, y) \\<in> (NS \\<union> S) ^^ n\n\ngoal (1 subgoal):\n 1. (\\<And>n.\n        (x, y) \\<in> (NS \\<union> S) ^^ n \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  (x, y) \\<in> (NS \\<union> S) ^^ n\n\ngoal (1 subgoal):\n 1. (x, y) \\<in> S O S\\<^sup>* O NS\\<^sup>* \\<union> NS\\<^sup>*", "then"], ["proof (chain)\npicking this:\n  (x, y) \\<in> (NS \\<union> S) ^^ n", "show \"(x, y) \\<in>  S O S\\<^sup>* O NS\\<^sup>* \\<union> NS\\<^sup>*\""], ["proof (prove)\nusing this:\n  (x, y) \\<in> (NS \\<union> S) ^^ n\n\ngoal (1 subgoal):\n 1. (x, y) \\<in> S O S\\<^sup>* O NS\\<^sup>* \\<union> NS\\<^sup>*", "proof (induct n arbitrary: x, simp)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>n x.\n       \\<lbrakk>\\<And>x.\n                   (x, y) \\<in> (NS \\<union> S) ^^ n \\<Longrightarrow>\n                   (x, y)\n                   \\<in> S O S\\<^sup>* O NS\\<^sup>* \\<union> NS\\<^sup>*;\n        (x, y) \\<in> (NS \\<union> S) ^^ Suc n\\<rbrakk>\n       \\<Longrightarrow> (x, y)\n                         \\<in> S O S\\<^sup>* O NS\\<^sup>* \\<union>\n                               NS\\<^sup>*", "case (Suc m)"], ["proof (state)\nthis:\n  (?x, y) \\<in> (NS \\<union> S) ^^ m \\<Longrightarrow>\n  (?x, y) \\<in> S O S\\<^sup>* O NS\\<^sup>* \\<union> NS\\<^sup>*\n  (x, y) \\<in> (NS \\<union> S) ^^ Suc m\n\ngoal (1 subgoal):\n 1. \\<And>n x.\n       \\<lbrakk>\\<And>x.\n                   (x, y) \\<in> (NS \\<union> S) ^^ n \\<Longrightarrow>\n                   (x, y)\n                   \\<in> S O S\\<^sup>* O NS\\<^sup>* \\<union> NS\\<^sup>*;\n        (x, y) \\<in> (NS \\<union> S) ^^ Suc n\\<rbrakk>\n       \\<Longrightarrow> (x, y)\n                         \\<in> S O S\\<^sup>* O NS\\<^sup>* \\<union>\n                               NS\\<^sup>*", "assume \"(x, y) \\<in> (NS \\<union> S)^^(Suc m)\""], ["proof (state)\nthis:\n  (x, y) \\<in> (NS \\<union> S) ^^ Suc m\n\ngoal (1 subgoal):\n 1. \\<And>n x.\n       \\<lbrakk>\\<And>x.\n                   (x, y) \\<in> (NS \\<union> S) ^^ n \\<Longrightarrow>\n                   (x, y)\n                   \\<in> S O S\\<^sup>* O NS\\<^sup>* \\<union> NS\\<^sup>*;\n        (x, y) \\<in> (NS \\<union> S) ^^ Suc n\\<rbrakk>\n       \\<Longrightarrow> (x, y)\n                         \\<in> S O S\\<^sup>* O NS\\<^sup>* \\<union>\n                               NS\\<^sup>*", "then"], ["proof (chain)\npicking this:\n  (x, y) \\<in> (NS \\<union> S) ^^ Suc m", "have \"\\<exists> z. (x, z) \\<in> (NS \\<union> S) \\<and> (z, y) \\<in> (NS \\<union> S)^^m\""], ["proof (prove)\nusing this:\n  (x, y) \\<in> (NS \\<union> S) ^^ Suc m\n\ngoal (1 subgoal):\n 1. \\<exists>z.\n       (x, z) \\<in> NS \\<union> S \\<and> (z, y) \\<in> (NS \\<union> S) ^^ m", "using relpow_Suc_D2 [where ?R=\"NS \\<union> S\"]"], ["proof (prove)\nusing this:\n  (x, y) \\<in> (NS \\<union> S) ^^ Suc m\n  (?x, ?z) \\<in> (NS \\<union> S) ^^ Suc ?n \\<Longrightarrow>\n  \\<exists>y.\n     (?x, y) \\<in> NS \\<union> S \\<and> (y, ?z) \\<in> (NS \\<union> S) ^^ ?n\n\ngoal (1 subgoal):\n 1. \\<exists>z.\n       (x, z) \\<in> NS \\<union> S \\<and> (z, y) \\<in> (NS \\<union> S) ^^ m", "by auto"], ["proof (state)\nthis:\n  \\<exists>z.\n     (x, z) \\<in> NS \\<union> S \\<and> (z, y) \\<in> (NS \\<union> S) ^^ m\n\ngoal (1 subgoal):\n 1. \\<And>n x.\n       \\<lbrakk>\\<And>x.\n                   (x, y) \\<in> (NS \\<union> S) ^^ n \\<Longrightarrow>\n                   (x, y)\n                   \\<in> S O S\\<^sup>* O NS\\<^sup>* \\<union> NS\\<^sup>*;\n        (x, y) \\<in> (NS \\<union> S) ^^ Suc n\\<rbrakk>\n       \\<Longrightarrow> (x, y)\n                         \\<in> S O S\\<^sup>* O NS\\<^sup>* \\<union>\n                               NS\\<^sup>*", "then"], ["proof (chain)\npicking this:\n  \\<exists>z.\n     (x, z) \\<in> NS \\<union> S \\<and> (z, y) \\<in> (NS \\<union> S) ^^ m", "obtain z where xz:\"(x, z) \\<in> (NS \\<union> S)\" and zy:\"(z, y) \\<in> (NS \\<union> S)^^m\""], ["proof (prove)\nusing this:\n  \\<exists>z.\n     (x, z) \\<in> NS \\<union> S \\<and> (z, y) \\<in> (NS \\<union> S) ^^ m\n\ngoal (1 subgoal):\n 1. (\\<And>z.\n        \\<lbrakk>(x, z) \\<in> NS \\<union> S;\n         (z, y) \\<in> (NS \\<union> S) ^^ m\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  (x, z) \\<in> NS \\<union> S\n  (z, y) \\<in> (NS \\<union> S) ^^ m\n\ngoal (1 subgoal):\n 1. \\<And>n x.\n       \\<lbrakk>\\<And>x.\n                   (x, y) \\<in> (NS \\<union> S) ^^ n \\<Longrightarrow>\n                   (x, y)\n                   \\<in> S O S\\<^sup>* O NS\\<^sup>* \\<union> NS\\<^sup>*;\n        (x, y) \\<in> (NS \\<union> S) ^^ Suc n\\<rbrakk>\n       \\<Longrightarrow> (x, y)\n                         \\<in> S O S\\<^sup>* O NS\\<^sup>* \\<union>\n                               NS\\<^sup>*", "with Suc"], ["proof (chain)\npicking this:\n  (?x, y) \\<in> (NS \\<union> S) ^^ m \\<Longrightarrow>\n  (?x, y) \\<in> S O S\\<^sup>* O NS\\<^sup>* \\<union> NS\\<^sup>*\n  (x, y) \\<in> (NS \\<union> S) ^^ Suc m\n  (x, z) \\<in> NS \\<union> S\n  (z, y) \\<in> (NS \\<union> S) ^^ m", "have zy:\"(z, y) \\<in>  S O S\\<^sup>* O NS\\<^sup>* \\<union> NS\\<^sup>*\""], ["proof (prove)\nusing this:\n  (?x, y) \\<in> (NS \\<union> S) ^^ m \\<Longrightarrow>\n  (?x, y) \\<in> S O S\\<^sup>* O NS\\<^sup>* \\<union> NS\\<^sup>*\n  (x, y) \\<in> (NS \\<union> S) ^^ Suc m\n  (x, z) \\<in> NS \\<union> S\n  (z, y) \\<in> (NS \\<union> S) ^^ m\n\ngoal (1 subgoal):\n 1. (z, y) \\<in> S O S\\<^sup>* O NS\\<^sup>* \\<union> NS\\<^sup>*", "by auto"], ["proof (state)\nthis:\n  (z, y) \\<in> S O S\\<^sup>* O NS\\<^sup>* \\<union> NS\\<^sup>*\n\ngoal (1 subgoal):\n 1. \\<And>n x.\n       \\<lbrakk>\\<And>x.\n                   (x, y) \\<in> (NS \\<union> S) ^^ n \\<Longrightarrow>\n                   (x, y)\n                   \\<in> S O S\\<^sup>* O NS\\<^sup>* \\<union> NS\\<^sup>*;\n        (x, y) \\<in> (NS \\<union> S) ^^ Suc n\\<rbrakk>\n       \\<Longrightarrow> (x, y)\n                         \\<in> S O S\\<^sup>* O NS\\<^sup>* \\<union>\n                               NS\\<^sup>*", "then"], ["proof (chain)\npicking this:\n  (z, y) \\<in> S O S\\<^sup>* O NS\\<^sup>* \\<union> NS\\<^sup>*", "show \"(x, y) \\<in>  S O S\\<^sup>* O NS\\<^sup>* \\<union> NS\\<^sup>*\""], ["proof (prove)\nusing this:\n  (z, y) \\<in> S O S\\<^sup>* O NS\\<^sup>* \\<union> NS\\<^sup>*\n\ngoal (1 subgoal):\n 1. (x, y) \\<in> S O S\\<^sup>* O NS\\<^sup>* \\<union> NS\\<^sup>*", "proof (cases \"(x, z) \\<in> NS\")"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<lbrakk>(z, y) \\<in> S O S\\<^sup>* O NS\\<^sup>* \\<union> NS\\<^sup>*;\n     (x, z) \\<in> NS\\<rbrakk>\n    \\<Longrightarrow> (x, y)\n                      \\<in> S O S\\<^sup>* O NS\\<^sup>* \\<union> NS\\<^sup>*\n 2. \\<lbrakk>(z, y) \\<in> S O S\\<^sup>* O NS\\<^sup>* \\<union> NS\\<^sup>*;\n     (x, z) \\<notin> NS\\<rbrakk>\n    \\<Longrightarrow> (x, y)\n                      \\<in> S O S\\<^sup>* O NS\\<^sup>* \\<union> NS\\<^sup>*", "case True"], ["proof (state)\nthis:\n  (x, z) \\<in> NS\n\ngoal (2 subgoals):\n 1. \\<lbrakk>(z, y) \\<in> S O S\\<^sup>* O NS\\<^sup>* \\<union> NS\\<^sup>*;\n     (x, z) \\<in> NS\\<rbrakk>\n    \\<Longrightarrow> (x, y)\n                      \\<in> S O S\\<^sup>* O NS\\<^sup>* \\<union> NS\\<^sup>*\n 2. \\<lbrakk>(z, y) \\<in> S O S\\<^sup>* O NS\\<^sup>* \\<union> NS\\<^sup>*;\n     (x, z) \\<notin> NS\\<rbrakk>\n    \\<Longrightarrow> (x, y)\n                      \\<in> S O S\\<^sup>* O NS\\<^sup>* \\<union> NS\\<^sup>*", "from compat compat_tr_compat"], ["proof (chain)\npicking this:\n  NS O S \\<subseteq> S\n  ?NS O ?S \\<subseteq> ?S \\<Longrightarrow> ?NS\\<^sup>* O ?S \\<subseteq> ?S", "have trCompat: \"NS\\<^sup>* O S \\<subseteq> S\""], ["proof (prove)\nusing this:\n  NS O S \\<subseteq> S\n  ?NS O ?S \\<subseteq> ?S \\<Longrightarrow> ?NS\\<^sup>* O ?S \\<subseteq> ?S\n\ngoal (1 subgoal):\n 1. NS\\<^sup>* O S \\<subseteq> S", "by blast"], ["proof (state)\nthis:\n  NS\\<^sup>* O S \\<subseteq> S\n\ngoal (2 subgoals):\n 1. \\<lbrakk>(z, y) \\<in> S O S\\<^sup>* O NS\\<^sup>* \\<union> NS\\<^sup>*;\n     (x, z) \\<in> NS\\<rbrakk>\n    \\<Longrightarrow> (x, y)\n                      \\<in> S O S\\<^sup>* O NS\\<^sup>* \\<union> NS\\<^sup>*\n 2. \\<lbrakk>(z, y) \\<in> S O S\\<^sup>* O NS\\<^sup>* \\<union> NS\\<^sup>*;\n     (x, z) \\<notin> NS\\<rbrakk>\n    \\<Longrightarrow> (x, y)\n                      \\<in> S O S\\<^sup>* O NS\\<^sup>* \\<union> NS\\<^sup>*", "from zy True"], ["proof (chain)\npicking this:\n  (z, y) \\<in> S O S\\<^sup>* O NS\\<^sup>* \\<union> NS\\<^sup>*\n  (x, z) \\<in> NS", "have \"(x, y) \\<in> (NS O S O S\\<^sup>* O NS\\<^sup>*) \\<union> (NS O NS\\<^sup>*)\""], ["proof (prove)\nusing this:\n  (z, y) \\<in> S O S\\<^sup>* O NS\\<^sup>* \\<union> NS\\<^sup>*\n  (x, z) \\<in> NS\n\ngoal (1 subgoal):\n 1. (x, y) \\<in> NS O S O S\\<^sup>* O NS\\<^sup>* \\<union> NS O NS\\<^sup>*", "by auto"], ["proof (state)\nthis:\n  (x, y) \\<in> NS O S O S\\<^sup>* O NS\\<^sup>* \\<union> NS O NS\\<^sup>*\n\ngoal (2 subgoals):\n 1. \\<lbrakk>(z, y) \\<in> S O S\\<^sup>* O NS\\<^sup>* \\<union> NS\\<^sup>*;\n     (x, z) \\<in> NS\\<rbrakk>\n    \\<Longrightarrow> (x, y)\n                      \\<in> S O S\\<^sup>* O NS\\<^sup>* \\<union> NS\\<^sup>*\n 2. \\<lbrakk>(z, y) \\<in> S O S\\<^sup>* O NS\\<^sup>* \\<union> NS\\<^sup>*;\n     (x, z) \\<notin> NS\\<rbrakk>\n    \\<Longrightarrow> (x, y)\n                      \\<in> S O S\\<^sup>* O NS\\<^sup>* \\<union> NS\\<^sup>*", "then"], ["proof (chain)\npicking this:\n  (x, y) \\<in> NS O S O S\\<^sup>* O NS\\<^sup>* \\<union> NS O NS\\<^sup>*", "have \"(x, y) \\<in> ((NS O S) O S\\<^sup>* O NS\\<^sup>*) \\<union> (NS O NS\\<^sup>*)\""], ["proof (prove)\nusing this:\n  (x, y) \\<in> NS O S O S\\<^sup>* O NS\\<^sup>* \\<union> NS O NS\\<^sup>*\n\ngoal (1 subgoal):\n 1. (x, y) \\<in> (NS O S) O S\\<^sup>* O NS\\<^sup>* \\<union> NS O NS\\<^sup>*", "by auto"], ["proof (state)\nthis:\n  (x, y) \\<in> (NS O S) O S\\<^sup>* O NS\\<^sup>* \\<union> NS O NS\\<^sup>*\n\ngoal (2 subgoals):\n 1. \\<lbrakk>(z, y) \\<in> S O S\\<^sup>* O NS\\<^sup>* \\<union> NS\\<^sup>*;\n     (x, z) \\<in> NS\\<rbrakk>\n    \\<Longrightarrow> (x, y)\n                      \\<in> S O S\\<^sup>* O NS\\<^sup>* \\<union> NS\\<^sup>*\n 2. \\<lbrakk>(z, y) \\<in> S O S\\<^sup>* O NS\\<^sup>* \\<union> NS\\<^sup>*;\n     (x, z) \\<notin> NS\\<rbrakk>\n    \\<Longrightarrow> (x, y)\n                      \\<in> S O S\\<^sup>* O NS\\<^sup>* \\<union> NS\\<^sup>*", "then"], ["proof (chain)\npicking this:\n  (x, y) \\<in> (NS O S) O S\\<^sup>* O NS\\<^sup>* \\<union> NS O NS\\<^sup>*", "have \"(x, y) \\<in> ((NS\\<^sup>* O S) O S\\<^sup>* O NS\\<^sup>*) \\<union> (NS O NS\\<^sup>*)\""], ["proof (prove)\nusing this:\n  (x, y) \\<in> (NS O S) O S\\<^sup>* O NS\\<^sup>* \\<union> NS O NS\\<^sup>*\n\ngoal (1 subgoal):\n 1. (x, y)\n    \\<in> (NS\\<^sup>* O S) O S\\<^sup>* O NS\\<^sup>* \\<union> NS O NS\\<^sup>*", "by auto"], ["proof (state)\nthis:\n  (x, y)\n  \\<in> (NS\\<^sup>* O S) O S\\<^sup>* O NS\\<^sup>* \\<union> NS O NS\\<^sup>*\n\ngoal (2 subgoals):\n 1. \\<lbrakk>(z, y) \\<in> S O S\\<^sup>* O NS\\<^sup>* \\<union> NS\\<^sup>*;\n     (x, z) \\<in> NS\\<rbrakk>\n    \\<Longrightarrow> (x, y)\n                      \\<in> S O S\\<^sup>* O NS\\<^sup>* \\<union> NS\\<^sup>*\n 2. \\<lbrakk>(z, y) \\<in> S O S\\<^sup>* O NS\\<^sup>* \\<union> NS\\<^sup>*;\n     (x, z) \\<notin> NS\\<rbrakk>\n    \\<Longrightarrow> (x, y)\n                      \\<in> S O S\\<^sup>* O NS\\<^sup>* \\<union> NS\\<^sup>*", "with trCompat"], ["proof (chain)\npicking this:\n  NS\\<^sup>* O S \\<subseteq> S\n  (x, y)\n  \\<in> (NS\\<^sup>* O S) O S\\<^sup>* O NS\\<^sup>* \\<union> NS O NS\\<^sup>*", "have xy:\"(x, y) \\<in> (S O S\\<^sup>* O NS\\<^sup>*) \\<union> (NS O NS\\<^sup>*)\""], ["proof (prove)\nusing this:\n  NS\\<^sup>* O S \\<subseteq> S\n  (x, y)\n  \\<in> (NS\\<^sup>* O S) O S\\<^sup>* O NS\\<^sup>* \\<union> NS O NS\\<^sup>*\n\ngoal (1 subgoal):\n 1. (x, y) \\<in> S O S\\<^sup>* O NS\\<^sup>* \\<union> NS O NS\\<^sup>*", "by auto"], ["proof (state)\nthis:\n  (x, y) \\<in> S O S\\<^sup>* O NS\\<^sup>* \\<union> NS O NS\\<^sup>*\n\ngoal (2 subgoals):\n 1. \\<lbrakk>(z, y) \\<in> S O S\\<^sup>* O NS\\<^sup>* \\<union> NS\\<^sup>*;\n     (x, z) \\<in> NS\\<rbrakk>\n    \\<Longrightarrow> (x, y)\n                      \\<in> S O S\\<^sup>* O NS\\<^sup>* \\<union> NS\\<^sup>*\n 2. \\<lbrakk>(z, y) \\<in> S O S\\<^sup>* O NS\\<^sup>* \\<union> NS\\<^sup>*;\n     (x, z) \\<notin> NS\\<rbrakk>\n    \\<Longrightarrow> (x, y)\n                      \\<in> S O S\\<^sup>* O NS\\<^sup>* \\<union> NS\\<^sup>*", "have \"NS O NS\\<^sup>* \\<subseteq> NS\\<^sup>*\""], ["proof (prove)\ngoal (1 subgoal):\n 1. NS O NS\\<^sup>* \\<subseteq> NS\\<^sup>*", "by auto"], ["proof (state)\nthis:\n  NS O NS\\<^sup>* \\<subseteq> NS\\<^sup>*\n\ngoal (2 subgoals):\n 1. \\<lbrakk>(z, y) \\<in> S O S\\<^sup>* O NS\\<^sup>* \\<union> NS\\<^sup>*;\n     (x, z) \\<in> NS\\<rbrakk>\n    \\<Longrightarrow> (x, y)\n                      \\<in> S O S\\<^sup>* O NS\\<^sup>* \\<union> NS\\<^sup>*\n 2. \\<lbrakk>(z, y) \\<in> S O S\\<^sup>* O NS\\<^sup>* \\<union> NS\\<^sup>*;\n     (x, z) \\<notin> NS\\<rbrakk>\n    \\<Longrightarrow> (x, y)\n                      \\<in> S O S\\<^sup>* O NS\\<^sup>* \\<union> NS\\<^sup>*", "with xy"], ["proof (chain)\npicking this:\n  (x, y) \\<in> S O S\\<^sup>* O NS\\<^sup>* \\<union> NS O NS\\<^sup>*\n  NS O NS\\<^sup>* \\<subseteq> NS\\<^sup>*", "show \"(x, y) \\<in> (S O S\\<^sup>* O NS\\<^sup>*) \\<union> NS\\<^sup>*\""], ["proof (prove)\nusing this:\n  (x, y) \\<in> S O S\\<^sup>* O NS\\<^sup>* \\<union> NS O NS\\<^sup>*\n  NS O NS\\<^sup>* \\<subseteq> NS\\<^sup>*\n\ngoal (1 subgoal):\n 1. (x, y) \\<in> S O S\\<^sup>* O NS\\<^sup>* \\<union> NS\\<^sup>*", "by auto"], ["proof (state)\nthis:\n  (x, y) \\<in> S O S\\<^sup>* O NS\\<^sup>* \\<union> NS\\<^sup>*\n\ngoal (1 subgoal):\n 1. \\<lbrakk>(z, y) \\<in> S O S\\<^sup>* O NS\\<^sup>* \\<union> NS\\<^sup>*;\n     (x, z) \\<notin> NS\\<rbrakk>\n    \\<Longrightarrow> (x, y)\n                      \\<in> S O S\\<^sup>* O NS\\<^sup>* \\<union> NS\\<^sup>*", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<lbrakk>(z, y) \\<in> S O S\\<^sup>* O NS\\<^sup>* \\<union> NS\\<^sup>*;\n     (x, z) \\<notin> NS\\<rbrakk>\n    \\<Longrightarrow> (x, y)\n                      \\<in> S O S\\<^sup>* O NS\\<^sup>* \\<union> NS\\<^sup>*", "case False"], ["proof (state)\nthis:\n  (x, z) \\<notin> NS\n\ngoal (1 subgoal):\n 1. \\<lbrakk>(z, y) \\<in> S O S\\<^sup>* O NS\\<^sup>* \\<union> NS\\<^sup>*;\n     (x, z) \\<notin> NS\\<rbrakk>\n    \\<Longrightarrow> (x, y)\n                      \\<in> S O S\\<^sup>* O NS\\<^sup>* \\<union> NS\\<^sup>*", "with xz"], ["proof (chain)\npicking this:\n  (x, z) \\<in> NS \\<union> S\n  (x, z) \\<notin> NS", "have xz:\"(x, z) \\<in> S\""], ["proof (prove)\nusing this:\n  (x, z) \\<in> NS \\<union> S\n  (x, z) \\<notin> NS\n\ngoal (1 subgoal):\n 1. (x, z) \\<in> S", "by auto"], ["proof (state)\nthis:\n  (x, z) \\<in> S\n\ngoal (1 subgoal):\n 1. \\<lbrakk>(z, y) \\<in> S O S\\<^sup>* O NS\\<^sup>* \\<union> NS\\<^sup>*;\n     (x, z) \\<notin> NS\\<rbrakk>\n    \\<Longrightarrow> (x, y)\n                      \\<in> S O S\\<^sup>* O NS\\<^sup>* \\<union> NS\\<^sup>*", "with zy"], ["proof (chain)\npicking this:\n  (z, y) \\<in> S O S\\<^sup>* O NS\\<^sup>* \\<union> NS\\<^sup>*\n  (x, z) \\<in> S", "have \"(x, y) \\<in> S O (S O S\\<^sup>* O NS\\<^sup>* \\<union> NS\\<^sup>*)\""], ["proof (prove)\nusing this:\n  (z, y) \\<in> S O S\\<^sup>* O NS\\<^sup>* \\<union> NS\\<^sup>*\n  (x, z) \\<in> S\n\ngoal (1 subgoal):\n 1. (x, y) \\<in> S O (S O S\\<^sup>* O NS\\<^sup>* \\<union> NS\\<^sup>*)", "by auto"], ["proof (state)\nthis:\n  (x, y) \\<in> S O (S O S\\<^sup>* O NS\\<^sup>* \\<union> NS\\<^sup>*)\n\ngoal (1 subgoal):\n 1. \\<lbrakk>(z, y) \\<in> S O S\\<^sup>* O NS\\<^sup>* \\<union> NS\\<^sup>*;\n     (x, z) \\<notin> NS\\<rbrakk>\n    \\<Longrightarrow> (x, y)\n                      \\<in> S O S\\<^sup>* O NS\\<^sup>* \\<union> NS\\<^sup>*", "then"], ["proof (chain)\npicking this:\n  (x, y) \\<in> S O (S O S\\<^sup>* O NS\\<^sup>* \\<union> NS\\<^sup>*)", "show \"(x, y) \\<in> (S O S\\<^sup>* O NS\\<^sup>*) \\<union> NS\\<^sup>*\""], ["proof (prove)\nusing this:\n  (x, y) \\<in> S O (S O S\\<^sup>* O NS\\<^sup>* \\<union> NS\\<^sup>*)\n\ngoal (1 subgoal):\n 1. (x, y) \\<in> S O S\\<^sup>* O NS\\<^sup>* \\<union> NS\\<^sup>*", "using right_comp_S"], ["proof (prove)\nusing this:\n  (x, y) \\<in> S O (S O S\\<^sup>* O NS\\<^sup>* \\<union> NS\\<^sup>*)\n  (?x, ?y)\n  \\<in> ?S O\n        (?S O ?S\\<^sup>* O ?NS\\<^sup>* \\<union>\n         ?NS\\<^sup>*) \\<Longrightarrow>\n  (?x, ?y) \\<in> ?S O ?S\\<^sup>* O ?NS\\<^sup>*\n\ngoal (1 subgoal):\n 1. (x, y) \\<in> S O S\\<^sup>* O NS\\<^sup>* \\<union> NS\\<^sup>*", "by simp"], ["proof (state)\nthis:\n  (x, y) \\<in> S O S\\<^sup>* O NS\\<^sup>* \\<union> NS\\<^sup>*\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  (x, y) \\<in> S O S\\<^sup>* O NS\\<^sup>* \\<union> NS\\<^sup>*\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  (x, y) \\<in> S O S\\<^sup>* O NS\\<^sup>* \\<union> NS\\<^sup>*\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma compatible_conv:\n  assumes compat: \"NS O S \\<subseteq> S\" \n  shows \"(NS \\<union> S)\\<^sup>* O S O (NS \\<union> S)\\<^sup>* = S O S\\<^sup>* O NS\\<^sup>*\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (NS \\<union> S)\\<^sup>* O S O (NS \\<union> S)\\<^sup>* =\n    S O S\\<^sup>* O NS\\<^sup>*", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. (NS \\<union> S)\\<^sup>* O S O (NS \\<union> S)\\<^sup>* =\n    S O S\\<^sup>* O NS\\<^sup>*", "let ?NSuS = \"NS \\<union> S\""], ["proof (state)\ngoal (1 subgoal):\n 1. (NS \\<union> S)\\<^sup>* O S O (NS \\<union> S)\\<^sup>* =\n    S O S\\<^sup>* O NS\\<^sup>*", "let ?NSS = \"S O S\\<^sup>* O NS\\<^sup>*\""], ["proof (state)\ngoal (1 subgoal):\n 1. (NS \\<union> S)\\<^sup>* O S O (NS \\<union> S)\\<^sup>* =\n    S O S\\<^sup>* O NS\\<^sup>*", "let ?midS = \"?NSuS\\<^sup>* O S O ?NSuS\\<^sup>*\""], ["proof (state)\ngoal (1 subgoal):\n 1. (NS \\<union> S)\\<^sup>* O S O (NS \\<union> S)\\<^sup>* =\n    S O S\\<^sup>* O NS\\<^sup>*", "have one: \"?NSS \\<subseteq> ?midS\""], ["proof (prove)\ngoal (1 subgoal):\n 1. S O S\\<^sup>* O NS\\<^sup>*\n    \\<subseteq> (NS \\<union> S)\\<^sup>* O S O (NS \\<union> S)\\<^sup>*", "by regexp"], ["proof (state)\nthis:\n  S O S\\<^sup>* O NS\\<^sup>*\n  \\<subseteq> (NS \\<union> S)\\<^sup>* O S O (NS \\<union> S)\\<^sup>*\n\ngoal (1 subgoal):\n 1. (NS \\<union> S)\\<^sup>* O S O (NS \\<union> S)\\<^sup>* =\n    S O S\\<^sup>* O NS\\<^sup>*", "have \"?NSuS\\<^sup>* O S \\<subseteq> (?NSS \\<union> NS\\<^sup>*) O S\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (NS \\<union> S)\\<^sup>* O S\n    \\<subseteq> (S O S\\<^sup>* O NS\\<^sup>* \\<union> NS\\<^sup>*) O S", "using compatible_rtrancl_split [where S = S and NS = NS] compat"], ["proof (prove)\nusing this:\n  \\<lbrakk>NS O S \\<subseteq> S;\n   (?x, ?y) \\<in> (NS \\<union> S)\\<^sup>*\\<rbrakk>\n  \\<Longrightarrow> (?x, ?y)\n                    \\<in> S O S\\<^sup>* O NS\\<^sup>* \\<union> NS\\<^sup>*\n  NS O S \\<subseteq> S\n\ngoal (1 subgoal):\n 1. (NS \\<union> S)\\<^sup>* O S\n    \\<subseteq> (S O S\\<^sup>* O NS\\<^sup>* \\<union> NS\\<^sup>*) O S", "by blast"], ["proof (state)\nthis:\n  (NS \\<union> S)\\<^sup>* O S\n  \\<subseteq> (S O S\\<^sup>* O NS\\<^sup>* \\<union> NS\\<^sup>*) O S\n\ngoal (1 subgoal):\n 1. (NS \\<union> S)\\<^sup>* O S O (NS \\<union> S)\\<^sup>* =\n    S O S\\<^sup>* O NS\\<^sup>*", "also"], ["proof (state)\nthis:\n  (NS \\<union> S)\\<^sup>* O S\n  \\<subseteq> (S O S\\<^sup>* O NS\\<^sup>* \\<union> NS\\<^sup>*) O S\n\ngoal (1 subgoal):\n 1. (NS \\<union> S)\\<^sup>* O S O (NS \\<union> S)\\<^sup>* =\n    S O S\\<^sup>* O NS\\<^sup>*", "have \"\\<dots> \\<subseteq> ?NSS O S \\<union> NS\\<^sup>* O S\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (S O S\\<^sup>* O NS\\<^sup>* \\<union> NS\\<^sup>*) O S\n    \\<subseteq> (S O S\\<^sup>* O NS\\<^sup>*) O S \\<union> NS\\<^sup>* O S", "by auto"], ["proof (state)\nthis:\n  (S O S\\<^sup>* O NS\\<^sup>* \\<union> NS\\<^sup>*) O S\n  \\<subseteq> (S O S\\<^sup>* O NS\\<^sup>*) O S \\<union> NS\\<^sup>* O S\n\ngoal (1 subgoal):\n 1. (NS \\<union> S)\\<^sup>* O S O (NS \\<union> S)\\<^sup>* =\n    S O S\\<^sup>* O NS\\<^sup>*", "also"], ["proof (state)\nthis:\n  (S O S\\<^sup>* O NS\\<^sup>* \\<union> NS\\<^sup>*) O S\n  \\<subseteq> (S O S\\<^sup>* O NS\\<^sup>*) O S \\<union> NS\\<^sup>* O S\n\ngoal (1 subgoal):\n 1. (NS \\<union> S)\\<^sup>* O S O (NS \\<union> S)\\<^sup>* =\n    S O S\\<^sup>* O NS\\<^sup>*", "have \"\\<dots> \\<subseteq> ?NSS O S \\<union> S\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (S O S\\<^sup>* O NS\\<^sup>*) O S \\<union> NS\\<^sup>* O S\n    \\<subseteq> (S O S\\<^sup>* O NS\\<^sup>*) O S \\<union> S", "using compat compat_tr_compat [where S = S and NS = NS]"], ["proof (prove)\nusing this:\n  NS O S \\<subseteq> S\n  NS O S \\<subseteq> S \\<Longrightarrow> NS\\<^sup>* O S \\<subseteq> S\n\ngoal (1 subgoal):\n 1. (S O S\\<^sup>* O NS\\<^sup>*) O S \\<union> NS\\<^sup>* O S\n    \\<subseteq> (S O S\\<^sup>* O NS\\<^sup>*) O S \\<union> S", "by auto"], ["proof (state)\nthis:\n  (S O S\\<^sup>* O NS\\<^sup>*) O S \\<union> NS\\<^sup>* O S\n  \\<subseteq> (S O S\\<^sup>* O NS\\<^sup>*) O S \\<union> S\n\ngoal (1 subgoal):\n 1. (NS \\<union> S)\\<^sup>* O S O (NS \\<union> S)\\<^sup>* =\n    S O S\\<^sup>* O NS\\<^sup>*", "also"], ["proof (state)\nthis:\n  (S O S\\<^sup>* O NS\\<^sup>*) O S \\<union> NS\\<^sup>* O S\n  \\<subseteq> (S O S\\<^sup>* O NS\\<^sup>*) O S \\<union> S\n\ngoal (1 subgoal):\n 1. (NS \\<union> S)\\<^sup>* O S O (NS \\<union> S)\\<^sup>* =\n    S O S\\<^sup>* O NS\\<^sup>*", "have \"\\<dots> \\<subseteq> S O ?NSuS\\<^sup>*\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (S O S\\<^sup>* O NS\\<^sup>*) O S \\<union> S\n    \\<subseteq> S O (NS \\<union> S)\\<^sup>*", "by regexp"], ["proof (state)\nthis:\n  (S O S\\<^sup>* O NS\\<^sup>*) O S \\<union> S\n  \\<subseteq> S O (NS \\<union> S)\\<^sup>*\n\ngoal (1 subgoal):\n 1. (NS \\<union> S)\\<^sup>* O S O (NS \\<union> S)\\<^sup>* =\n    S O S\\<^sup>* O NS\\<^sup>*", "finally"], ["proof (chain)\npicking this:\n  (NS \\<union> S)\\<^sup>* O S \\<subseteq> S O (NS \\<union> S)\\<^sup>*", "have \"?midS \\<subseteq> S O ?NSuS\\<^sup>* O ?NSuS\\<^sup>*\""], ["proof (prove)\nusing this:\n  (NS \\<union> S)\\<^sup>* O S \\<subseteq> S O (NS \\<union> S)\\<^sup>*\n\ngoal (1 subgoal):\n 1. (NS \\<union> S)\\<^sup>* O S O (NS \\<union> S)\\<^sup>*\n    \\<subseteq> S O (NS \\<union> S)\\<^sup>* O (NS \\<union> S)\\<^sup>*", "by blast"], ["proof (state)\nthis:\n  (NS \\<union> S)\\<^sup>* O S O (NS \\<union> S)\\<^sup>*\n  \\<subseteq> S O (NS \\<union> S)\\<^sup>* O (NS \\<union> S)\\<^sup>*\n\ngoal (1 subgoal):\n 1. (NS \\<union> S)\\<^sup>* O S O (NS \\<union> S)\\<^sup>* =\n    S O S\\<^sup>* O NS\\<^sup>*", "also"], ["proof (state)\nthis:\n  (NS \\<union> S)\\<^sup>* O S O (NS \\<union> S)\\<^sup>*\n  \\<subseteq> S O (NS \\<union> S)\\<^sup>* O (NS \\<union> S)\\<^sup>*\n\ngoal (1 subgoal):\n 1. (NS \\<union> S)\\<^sup>* O S O (NS \\<union> S)\\<^sup>* =\n    S O S\\<^sup>* O NS\\<^sup>*", "have \"\\<dots> \\<subseteq> S O ?NSuS\\<^sup>*\""], ["proof (prove)\ngoal (1 subgoal):\n 1. S O (NS \\<union> S)\\<^sup>* O (NS \\<union> S)\\<^sup>*\n    \\<subseteq> S O (NS \\<union> S)\\<^sup>*", "by regexp"], ["proof (state)\nthis:\n  S O (NS \\<union> S)\\<^sup>* O (NS \\<union> S)\\<^sup>*\n  \\<subseteq> S O (NS \\<union> S)\\<^sup>*\n\ngoal (1 subgoal):\n 1. (NS \\<union> S)\\<^sup>* O S O (NS \\<union> S)\\<^sup>* =\n    S O S\\<^sup>* O NS\\<^sup>*", "also"], ["proof (state)\nthis:\n  S O (NS \\<union> S)\\<^sup>* O (NS \\<union> S)\\<^sup>*\n  \\<subseteq> S O (NS \\<union> S)\\<^sup>*\n\ngoal (1 subgoal):\n 1. (NS \\<union> S)\\<^sup>* O S O (NS \\<union> S)\\<^sup>* =\n    S O S\\<^sup>* O NS\\<^sup>*", "have \"\\<dots> \\<subseteq> S O (?NSS \\<union> NS\\<^sup>*)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. S O (NS \\<union> S)\\<^sup>*\n    \\<subseteq> S O (S O S\\<^sup>* O NS\\<^sup>* \\<union> NS\\<^sup>*)", "using compatible_rtrancl_split [where S = S and NS = NS] compat"], ["proof (prove)\nusing this:\n  \\<lbrakk>NS O S \\<subseteq> S;\n   (?x, ?y) \\<in> (NS \\<union> S)\\<^sup>*\\<rbrakk>\n  \\<Longrightarrow> (?x, ?y)\n                    \\<in> S O S\\<^sup>* O NS\\<^sup>* \\<union> NS\\<^sup>*\n  NS O S \\<subseteq> S\n\ngoal (1 subgoal):\n 1. S O (NS \\<union> S)\\<^sup>*\n    \\<subseteq> S O (S O S\\<^sup>* O NS\\<^sup>* \\<union> NS\\<^sup>*)", "by blast"], ["proof (state)\nthis:\n  S O (NS \\<union> S)\\<^sup>*\n  \\<subseteq> S O (S O S\\<^sup>* O NS\\<^sup>* \\<union> NS\\<^sup>*)\n\ngoal (1 subgoal):\n 1. (NS \\<union> S)\\<^sup>* O S O (NS \\<union> S)\\<^sup>* =\n    S O S\\<^sup>* O NS\\<^sup>*", "also"], ["proof (state)\nthis:\n  S O (NS \\<union> S)\\<^sup>*\n  \\<subseteq> S O (S O S\\<^sup>* O NS\\<^sup>* \\<union> NS\\<^sup>*)\n\ngoal (1 subgoal):\n 1. (NS \\<union> S)\\<^sup>* O S O (NS \\<union> S)\\<^sup>* =\n    S O S\\<^sup>* O NS\\<^sup>*", "have \"\\<dots> \\<subseteq> ?NSS\""], ["proof (prove)\ngoal (1 subgoal):\n 1. S O (S O S\\<^sup>* O NS\\<^sup>* \\<union> NS\\<^sup>*)\n    \\<subseteq> S O S\\<^sup>* O NS\\<^sup>*", "by regexp"], ["proof (state)\nthis:\n  S O (S O S\\<^sup>* O NS\\<^sup>* \\<union> NS\\<^sup>*)\n  \\<subseteq> S O S\\<^sup>* O NS\\<^sup>*\n\ngoal (1 subgoal):\n 1. (NS \\<union> S)\\<^sup>* O S O (NS \\<union> S)\\<^sup>* =\n    S O S\\<^sup>* O NS\\<^sup>*", "finally"], ["proof (chain)\npicking this:\n  (NS \\<union> S)\\<^sup>* O S O (NS \\<union> S)\\<^sup>*\n  \\<subseteq> S O S\\<^sup>* O NS\\<^sup>*", "have two: \"?midS \\<subseteq> ?NSS\""], ["proof (prove)\nusing this:\n  (NS \\<union> S)\\<^sup>* O S O (NS \\<union> S)\\<^sup>*\n  \\<subseteq> S O S\\<^sup>* O NS\\<^sup>*\n\ngoal (1 subgoal):\n 1. (NS \\<union> S)\\<^sup>* O S O (NS \\<union> S)\\<^sup>*\n    \\<subseteq> S O S\\<^sup>* O NS\\<^sup>*", "."], ["proof (state)\nthis:\n  (NS \\<union> S)\\<^sup>* O S O (NS \\<union> S)\\<^sup>*\n  \\<subseteq> S O S\\<^sup>* O NS\\<^sup>*\n\ngoal (1 subgoal):\n 1. (NS \\<union> S)\\<^sup>* O S O (NS \\<union> S)\\<^sup>* =\n    S O S\\<^sup>* O NS\\<^sup>*", "from one two"], ["proof (chain)\npicking this:\n  S O S\\<^sup>* O NS\\<^sup>*\n  \\<subseteq> (NS \\<union> S)\\<^sup>* O S O (NS \\<union> S)\\<^sup>*\n  (NS \\<union> S)\\<^sup>* O S O (NS \\<union> S)\\<^sup>*\n  \\<subseteq> S O S\\<^sup>* O NS\\<^sup>*", "show ?thesis"], ["proof (prove)\nusing this:\n  S O S\\<^sup>* O NS\\<^sup>*\n  \\<subseteq> (NS \\<union> S)\\<^sup>* O S O (NS \\<union> S)\\<^sup>*\n  (NS \\<union> S)\\<^sup>* O S O (NS \\<union> S)\\<^sup>*\n  \\<subseteq> S O S\\<^sup>* O NS\\<^sup>*\n\ngoal (1 subgoal):\n 1. (NS \\<union> S)\\<^sup>* O S O (NS \\<union> S)\\<^sup>* =\n    S O S\\<^sup>* O NS\\<^sup>*", "by auto"], ["proof (state)\nthis:\n  (NS \\<union> S)\\<^sup>* O S O (NS \\<union> S)\\<^sup>* =\n  S O S\\<^sup>* O NS\\<^sup>*\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma compatible_SN': \n  assumes compat: \"NS O S \\<subseteq> S\" and SN: \"SN S\"\n  shows \"SN((NS \\<union> S)\\<^sup>* O S O (NS \\<union> S)\\<^sup>*)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. SN ((NS \\<union> S)\\<^sup>* O S O (NS \\<union> S)\\<^sup>*)", "using compatible_conv [where S = S and NS = NS] \n  compatible_SN [where S = S and NS = NS] assms"], ["proof (prove)\nusing this:\n  NS O S \\<subseteq> S \\<Longrightarrow>\n  (NS \\<union> S)\\<^sup>* O S O (NS \\<union> S)\\<^sup>* =\n  S O S\\<^sup>* O NS\\<^sup>*\n  \\<lbrakk>SN S; NS O S \\<subseteq> S\\<rbrakk>\n  \\<Longrightarrow> SN (S O S\\<^sup>* O NS\\<^sup>*)\n  NS O S \\<subseteq> S\n  SN S\n\ngoal (1 subgoal):\n 1. SN ((NS \\<union> S)\\<^sup>* O S O (NS \\<union> S)\\<^sup>*)", "by force"], ["", "lemma rtrancl_diff_decomp:\n  assumes \"(x, y) \\<in> A\\<^sup>* - B\\<^sup>*\"\n  shows \"(x, y) \\<in> A\\<^sup>* O (A - B) O A\\<^sup>*\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (x, y) \\<in> A\\<^sup>* O (A - B) O A\\<^sup>*", "proof-"], ["proof (state)\ngoal (1 subgoal):\n 1. (x, y) \\<in> A\\<^sup>* O (A - B) O A\\<^sup>*", "from assms"], ["proof (chain)\npicking this:\n  (x, y) \\<in> A\\<^sup>* - B\\<^sup>*", "have A: \"(x, y) \\<in> A\\<^sup>*\" and B:\"(x, y) \\<notin> B\\<^sup>*\""], ["proof (prove)\nusing this:\n  (x, y) \\<in> A\\<^sup>* - B\\<^sup>*\n\ngoal (1 subgoal):\n 1. (x, y) \\<in> A\\<^sup>* &&& (x, y) \\<notin> B\\<^sup>*", "by auto"], ["proof (state)\nthis:\n  (x, y) \\<in> A\\<^sup>*\n  (x, y) \\<notin> B\\<^sup>*\n\ngoal (1 subgoal):\n 1. (x, y) \\<in> A\\<^sup>* O (A - B) O A\\<^sup>*", "from A"], ["proof (chain)\npicking this:\n  (x, y) \\<in> A\\<^sup>*", "have \"\\<exists> k. (x, y) \\<in> A^^k\""], ["proof (prove)\nusing this:\n  (x, y) \\<in> A\\<^sup>*\n\ngoal (1 subgoal):\n 1. \\<exists>k. (x, y) \\<in> A ^^ k", "by (rule rtrancl_imp_relpow)"], ["proof (state)\nthis:\n  \\<exists>k. (x, y) \\<in> A ^^ k\n\ngoal (1 subgoal):\n 1. (x, y) \\<in> A\\<^sup>* O (A - B) O A\\<^sup>*", "then"], ["proof (chain)\npicking this:\n  \\<exists>k. (x, y) \\<in> A ^^ k", "obtain k where Ak:\"(x, y) \\<in> A^^k\""], ["proof (prove)\nusing this:\n  \\<exists>k. (x, y) \\<in> A ^^ k\n\ngoal (1 subgoal):\n 1. (\\<And>k.\n        (x, y) \\<in> A ^^ k \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  (x, y) \\<in> A ^^ k\n\ngoal (1 subgoal):\n 1. (x, y) \\<in> A\\<^sup>* O (A - B) O A\\<^sup>*", "from Ak B"], ["proof (chain)\npicking this:\n  (x, y) \\<in> A ^^ k\n  (x, y) \\<notin> B\\<^sup>*", "show \"(x, y) \\<in> A\\<^sup>* O (A - B) O A\\<^sup>*\""], ["proof (prove)\nusing this:\n  (x, y) \\<in> A ^^ k\n  (x, y) \\<notin> B\\<^sup>*\n\ngoal (1 subgoal):\n 1. (x, y) \\<in> A\\<^sup>* O (A - B) O A\\<^sup>*", "proof (induct k arbitrary: x)"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>x.\n       \\<lbrakk>(x, y) \\<in> A ^^ 0; (x, y) \\<notin> B\\<^sup>*\\<rbrakk>\n       \\<Longrightarrow> (x, y) \\<in> A\\<^sup>* O (A - B) O A\\<^sup>*\n 2. \\<And>k x.\n       \\<lbrakk>\\<And>x.\n                   \\<lbrakk>(x, y) \\<in> A ^^ k;\n                    (x, y) \\<notin> B\\<^sup>*\\<rbrakk>\n                   \\<Longrightarrow> (x, y)\n                                     \\<in> A\\<^sup>* O (A - B) O A\\<^sup>*;\n        (x, y) \\<in> A ^^ Suc k; (x, y) \\<notin> B\\<^sup>*\\<rbrakk>\n       \\<Longrightarrow> (x, y) \\<in> A\\<^sup>* O (A - B) O A\\<^sup>*", "case 0"], ["proof (state)\nthis:\n  (x, y) \\<in> A ^^ 0\n  (x, y) \\<notin> B\\<^sup>*\n\ngoal (2 subgoals):\n 1. \\<And>x.\n       \\<lbrakk>(x, y) \\<in> A ^^ 0; (x, y) \\<notin> B\\<^sup>*\\<rbrakk>\n       \\<Longrightarrow> (x, y) \\<in> A\\<^sup>* O (A - B) O A\\<^sup>*\n 2. \\<And>k x.\n       \\<lbrakk>\\<And>x.\n                   \\<lbrakk>(x, y) \\<in> A ^^ k;\n                    (x, y) \\<notin> B\\<^sup>*\\<rbrakk>\n                   \\<Longrightarrow> (x, y)\n                                     \\<in> A\\<^sup>* O (A - B) O A\\<^sup>*;\n        (x, y) \\<in> A ^^ Suc k; (x, y) \\<notin> B\\<^sup>*\\<rbrakk>\n       \\<Longrightarrow> (x, y) \\<in> A\\<^sup>* O (A - B) O A\\<^sup>*", "with \\<open>(x, y) \\<notin> B\\<^sup>*\\<close> 0"], ["proof (chain)\npicking this:\n  (x, y) \\<notin> B\\<^sup>*\n  (x, y) \\<in> A ^^ 0\n  (x, y) \\<notin> B\\<^sup>*\n  (x, y) \\<in> A ^^ 0\n  (x, y) \\<notin> B\\<^sup>*", "show ?case"], ["proof (prove)\nusing this:\n  (x, y) \\<notin> B\\<^sup>*\n  (x, y) \\<in> A ^^ 0\n  (x, y) \\<notin> B\\<^sup>*\n  (x, y) \\<in> A ^^ 0\n  (x, y) \\<notin> B\\<^sup>*\n\ngoal (1 subgoal):\n 1. (x, y) \\<in> A\\<^sup>* O (A - B) O A\\<^sup>*", "using ccontr"], ["proof (prove)\nusing this:\n  (x, y) \\<notin> B\\<^sup>*\n  (x, y) \\<in> A ^^ 0\n  (x, y) \\<notin> B\\<^sup>*\n  (x, y) \\<in> A ^^ 0\n  (x, y) \\<notin> B\\<^sup>*\n  (\\<not> ?P \\<Longrightarrow> False) \\<Longrightarrow> ?P\n\ngoal (1 subgoal):\n 1. (x, y) \\<in> A\\<^sup>* O (A - B) O A\\<^sup>*", "by auto"], ["proof (state)\nthis:\n  (x, y) \\<in> A\\<^sup>* O (A - B) O A\\<^sup>*\n\ngoal (1 subgoal):\n 1. \\<And>k x.\n       \\<lbrakk>\\<And>x.\n                   \\<lbrakk>(x, y) \\<in> A ^^ k;\n                    (x, y) \\<notin> B\\<^sup>*\\<rbrakk>\n                   \\<Longrightarrow> (x, y)\n                                     \\<in> A\\<^sup>* O (A - B) O A\\<^sup>*;\n        (x, y) \\<in> A ^^ Suc k; (x, y) \\<notin> B\\<^sup>*\\<rbrakk>\n       \\<Longrightarrow> (x, y) \\<in> A\\<^sup>* O (A - B) O A\\<^sup>*", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>k x.\n       \\<lbrakk>\\<And>x.\n                   \\<lbrakk>(x, y) \\<in> A ^^ k;\n                    (x, y) \\<notin> B\\<^sup>*\\<rbrakk>\n                   \\<Longrightarrow> (x, y)\n                                     \\<in> A\\<^sup>* O (A - B) O A\\<^sup>*;\n        (x, y) \\<in> A ^^ Suc k; (x, y) \\<notin> B\\<^sup>*\\<rbrakk>\n       \\<Longrightarrow> (x, y) \\<in> A\\<^sup>* O (A - B) O A\\<^sup>*", "case (Suc i)"], ["proof (state)\nthis:\n  \\<lbrakk>(?x, y) \\<in> A ^^ i; (?x, y) \\<notin> B\\<^sup>*\\<rbrakk>\n  \\<Longrightarrow> (?x, y) \\<in> A\\<^sup>* O (A - B) O A\\<^sup>*\n  (x, y) \\<in> A ^^ Suc i\n  (x, y) \\<notin> B\\<^sup>*\n\ngoal (1 subgoal):\n 1. \\<And>k x.\n       \\<lbrakk>\\<And>x.\n                   \\<lbrakk>(x, y) \\<in> A ^^ k;\n                    (x, y) \\<notin> B\\<^sup>*\\<rbrakk>\n                   \\<Longrightarrow> (x, y)\n                                     \\<in> A\\<^sup>* O (A - B) O A\\<^sup>*;\n        (x, y) \\<in> A ^^ Suc k; (x, y) \\<notin> B\\<^sup>*\\<rbrakk>\n       \\<Longrightarrow> (x, y) \\<in> A\\<^sup>* O (A - B) O A\\<^sup>*", "then"], ["proof (chain)\npicking this:\n  \\<lbrakk>(?x, y) \\<in> A ^^ i; (?x, y) \\<notin> B\\<^sup>*\\<rbrakk>\n  \\<Longrightarrow> (?x, y) \\<in> A\\<^sup>* O (A - B) O A\\<^sup>*\n  (x, y) \\<in> A ^^ Suc i\n  (x, y) \\<notin> B\\<^sup>*", "have B:\"(x, y) \\<notin> B\\<^sup>*\" and ASk:\"(x, y) \\<in> A ^^ Suc i\""], ["proof (prove)\nusing this:\n  \\<lbrakk>(?x, y) \\<in> A ^^ i; (?x, y) \\<notin> B\\<^sup>*\\<rbrakk>\n  \\<Longrightarrow> (?x, y) \\<in> A\\<^sup>* O (A - B) O A\\<^sup>*\n  (x, y) \\<in> A ^^ Suc i\n  (x, y) \\<notin> B\\<^sup>*\n\ngoal (1 subgoal):\n 1. (x, y) \\<notin> B\\<^sup>* &&& (x, y) \\<in> A ^^ Suc i", "by auto"], ["proof (state)\nthis:\n  (x, y) \\<notin> B\\<^sup>*\n  (x, y) \\<in> A ^^ Suc i\n\ngoal (1 subgoal):\n 1. \\<And>k x.\n       \\<lbrakk>\\<And>x.\n                   \\<lbrakk>(x, y) \\<in> A ^^ k;\n                    (x, y) \\<notin> B\\<^sup>*\\<rbrakk>\n                   \\<Longrightarrow> (x, y)\n                                     \\<in> A\\<^sup>* O (A - B) O A\\<^sup>*;\n        (x, y) \\<in> A ^^ Suc k; (x, y) \\<notin> B\\<^sup>*\\<rbrakk>\n       \\<Longrightarrow> (x, y) \\<in> A\\<^sup>* O (A - B) O A\\<^sup>*", "from ASk"], ["proof (chain)\npicking this:\n  (x, y) \\<in> A ^^ Suc i", "have \"\\<exists>z. (x, z) \\<in> A \\<and> (z, y) \\<in> A ^^ i\""], ["proof (prove)\nusing this:\n  (x, y) \\<in> A ^^ Suc i\n\ngoal (1 subgoal):\n 1. \\<exists>z. (x, z) \\<in> A \\<and> (z, y) \\<in> A ^^ i", "using relpow_Suc_D2 [where ?R=A]"], ["proof (prove)\nusing this:\n  (x, y) \\<in> A ^^ Suc i\n  (?x, ?z) \\<in> A ^^ Suc ?n \\<Longrightarrow>\n  \\<exists>y. (?x, y) \\<in> A \\<and> (y, ?z) \\<in> A ^^ ?n\n\ngoal (1 subgoal):\n 1. \\<exists>z. (x, z) \\<in> A \\<and> (z, y) \\<in> A ^^ i", "by auto"], ["proof (state)\nthis:\n  \\<exists>z. (x, z) \\<in> A \\<and> (z, y) \\<in> A ^^ i\n\ngoal (1 subgoal):\n 1. \\<And>k x.\n       \\<lbrakk>\\<And>x.\n                   \\<lbrakk>(x, y) \\<in> A ^^ k;\n                    (x, y) \\<notin> B\\<^sup>*\\<rbrakk>\n                   \\<Longrightarrow> (x, y)\n                                     \\<in> A\\<^sup>* O (A - B) O A\\<^sup>*;\n        (x, y) \\<in> A ^^ Suc k; (x, y) \\<notin> B\\<^sup>*\\<rbrakk>\n       \\<Longrightarrow> (x, y) \\<in> A\\<^sup>* O (A - B) O A\\<^sup>*", "then"], ["proof (chain)\npicking this:\n  \\<exists>z. (x, z) \\<in> A \\<and> (z, y) \\<in> A ^^ i", "obtain z where xz:\"(x, z) \\<in> A\" and \"(z, y) \\<in> A ^^ i\""], ["proof (prove)\nusing this:\n  \\<exists>z. (x, z) \\<in> A \\<and> (z, y) \\<in> A ^^ i\n\ngoal (1 subgoal):\n 1. (\\<And>z.\n        \\<lbrakk>(x, z) \\<in> A; (z, y) \\<in> A ^^ i\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  (x, z) \\<in> A\n  (z, y) \\<in> A ^^ i\n\ngoal (1 subgoal):\n 1. \\<And>k x.\n       \\<lbrakk>\\<And>x.\n                   \\<lbrakk>(x, y) \\<in> A ^^ k;\n                    (x, y) \\<notin> B\\<^sup>*\\<rbrakk>\n                   \\<Longrightarrow> (x, y)\n                                     \\<in> A\\<^sup>* O (A - B) O A\\<^sup>*;\n        (x, y) \\<in> A ^^ Suc k; (x, y) \\<notin> B\\<^sup>*\\<rbrakk>\n       \\<Longrightarrow> (x, y) \\<in> A\\<^sup>* O (A - B) O A\\<^sup>*", "then"], ["proof (chain)\npicking this:\n  (x, z) \\<in> A\n  (z, y) \\<in> A ^^ i", "have zy:\"(z, y) \\<in> A\\<^sup>*\""], ["proof (prove)\nusing this:\n  (x, z) \\<in> A\n  (z, y) \\<in> A ^^ i\n\ngoal (1 subgoal):\n 1. (z, y) \\<in> A\\<^sup>*", "using relpow_imp_rtrancl"], ["proof (prove)\nusing this:\n  (x, z) \\<in> A\n  (z, y) \\<in> A ^^ i\n  ?p \\<in> ?R ^^ ?n \\<Longrightarrow> ?p \\<in> ?R\\<^sup>*\n\ngoal (1 subgoal):\n 1. (z, y) \\<in> A\\<^sup>*", "by auto"], ["proof (state)\nthis:\n  (z, y) \\<in> A\\<^sup>*\n\ngoal (1 subgoal):\n 1. \\<And>k x.\n       \\<lbrakk>\\<And>x.\n                   \\<lbrakk>(x, y) \\<in> A ^^ k;\n                    (x, y) \\<notin> B\\<^sup>*\\<rbrakk>\n                   \\<Longrightarrow> (x, y)\n                                     \\<in> A\\<^sup>* O (A - B) O A\\<^sup>*;\n        (x, y) \\<in> A ^^ Suc k; (x, y) \\<notin> B\\<^sup>*\\<rbrakk>\n       \\<Longrightarrow> (x, y) \\<in> A\\<^sup>* O (A - B) O A\\<^sup>*", "from xz"], ["proof (chain)\npicking this:\n  (x, z) \\<in> A", "show \"(x, y) \\<in> A\\<^sup>* O (A - B) O A\\<^sup>*\""], ["proof (prove)\nusing this:\n  (x, z) \\<in> A\n\ngoal (1 subgoal):\n 1. (x, y) \\<in> A\\<^sup>* O (A - B) O A\\<^sup>*", "proof (cases \"(x, z) \\<in> B\")"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<lbrakk>(x, z) \\<in> A; (x, z) \\<in> B\\<rbrakk>\n    \\<Longrightarrow> (x, y) \\<in> A\\<^sup>* O (A - B) O A\\<^sup>*\n 2. \\<lbrakk>(x, z) \\<in> A; (x, z) \\<notin> B\\<rbrakk>\n    \\<Longrightarrow> (x, y) \\<in> A\\<^sup>* O (A - B) O A\\<^sup>*", "case False"], ["proof (state)\nthis:\n  (x, z) \\<notin> B\n\ngoal (2 subgoals):\n 1. \\<lbrakk>(x, z) \\<in> A; (x, z) \\<in> B\\<rbrakk>\n    \\<Longrightarrow> (x, y) \\<in> A\\<^sup>* O (A - B) O A\\<^sup>*\n 2. \\<lbrakk>(x, z) \\<in> A; (x, z) \\<notin> B\\<rbrakk>\n    \\<Longrightarrow> (x, y) \\<in> A\\<^sup>* O (A - B) O A\\<^sup>*", "with xz zy"], ["proof (chain)\npicking this:\n  (x, z) \\<in> A\n  (z, y) \\<in> A\\<^sup>*\n  (x, z) \\<notin> B", "show \"(x, y) \\<in> A\\<^sup>* O (A - B) O A\\<^sup>*\""], ["proof (prove)\nusing this:\n  (x, z) \\<in> A\n  (z, y) \\<in> A\\<^sup>*\n  (x, z) \\<notin> B\n\ngoal (1 subgoal):\n 1. (x, y) \\<in> A\\<^sup>* O (A - B) O A\\<^sup>*", "by auto"], ["proof (state)\nthis:\n  (x, y) \\<in> A\\<^sup>* O (A - B) O A\\<^sup>*\n\ngoal (1 subgoal):\n 1. \\<lbrakk>(x, z) \\<in> A; (x, z) \\<in> B\\<rbrakk>\n    \\<Longrightarrow> (x, y) \\<in> A\\<^sup>* O (A - B) O A\\<^sup>*", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<lbrakk>(x, z) \\<in> A; (x, z) \\<in> B\\<rbrakk>\n    \\<Longrightarrow> (x, y) \\<in> A\\<^sup>* O (A - B) O A\\<^sup>*", "case True"], ["proof (state)\nthis:\n  (x, z) \\<in> B\n\ngoal (1 subgoal):\n 1. \\<lbrakk>(x, z) \\<in> A; (x, z) \\<in> B\\<rbrakk>\n    \\<Longrightarrow> (x, y) \\<in> A\\<^sup>* O (A - B) O A\\<^sup>*", "then"], ["proof (chain)\npicking this:\n  (x, z) \\<in> B", "have \"(x, z) \\<in> B\\<^sup>*\""], ["proof (prove)\nusing this:\n  (x, z) \\<in> B\n\ngoal (1 subgoal):\n 1. (x, z) \\<in> B\\<^sup>*", "by auto"], ["proof (state)\nthis:\n  (x, z) \\<in> B\\<^sup>*\n\ngoal (1 subgoal):\n 1. \\<lbrakk>(x, z) \\<in> A; (x, z) \\<in> B\\<rbrakk>\n    \\<Longrightarrow> (x, y) \\<in> A\\<^sup>* O (A - B) O A\\<^sup>*", "have \"\\<lbrakk>(x, z) \\<in> B\\<^sup>*; (z, y) \\<in> B\\<^sup>*\\<rbrakk> \\<Longrightarrow> (x, y) \\<in> B\\<^sup>*\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>(x, z) \\<in> B\\<^sup>*; (z, y) \\<in> B\\<^sup>*\\<rbrakk>\n    \\<Longrightarrow> (x, y) \\<in> B\\<^sup>*", "using rtrancl_trans [of x z B]"], ["proof (prove)\nusing this:\n  \\<lbrakk>(x, z) \\<in> B\\<^sup>*; (z, ?z) \\<in> B\\<^sup>*\\<rbrakk>\n  \\<Longrightarrow> (x, ?z) \\<in> B\\<^sup>*\n\ngoal (1 subgoal):\n 1. \\<lbrakk>(x, z) \\<in> B\\<^sup>*; (z, y) \\<in> B\\<^sup>*\\<rbrakk>\n    \\<Longrightarrow> (x, y) \\<in> B\\<^sup>*", "by auto"], ["proof (state)\nthis:\n  \\<lbrakk>(x, z) \\<in> B\\<^sup>*; (z, y) \\<in> B\\<^sup>*\\<rbrakk>\n  \\<Longrightarrow> (x, y) \\<in> B\\<^sup>*\n\ngoal (1 subgoal):\n 1. \\<lbrakk>(x, z) \\<in> A; (x, z) \\<in> B\\<rbrakk>\n    \\<Longrightarrow> (x, y) \\<in> A\\<^sup>* O (A - B) O A\\<^sup>*", "with  \\<open>(x, z) \\<in> B\\<^sup>*\\<close> \\<open>(x, y) \\<notin> B\\<^sup>*\\<close>"], ["proof (chain)\npicking this:\n  (x, z) \\<in> B\\<^sup>*\n  (x, y) \\<notin> B\\<^sup>*\n  \\<lbrakk>(x, z) \\<in> B\\<^sup>*; (z, y) \\<in> B\\<^sup>*\\<rbrakk>\n  \\<Longrightarrow> (x, y) \\<in> B\\<^sup>*", "have \"(z, y) \\<notin> B\\<^sup>*\""], ["proof (prove)\nusing this:\n  (x, z) \\<in> B\\<^sup>*\n  (x, y) \\<notin> B\\<^sup>*\n  \\<lbrakk>(x, z) \\<in> B\\<^sup>*; (z, y) \\<in> B\\<^sup>*\\<rbrakk>\n  \\<Longrightarrow> (x, y) \\<in> B\\<^sup>*\n\ngoal (1 subgoal):\n 1. (z, y) \\<notin> B\\<^sup>*", "by auto"], ["proof (state)\nthis:\n  (z, y) \\<notin> B\\<^sup>*\n\ngoal (1 subgoal):\n 1. \\<lbrakk>(x, z) \\<in> A; (x, z) \\<in> B\\<rbrakk>\n    \\<Longrightarrow> (x, y) \\<in> A\\<^sup>* O (A - B) O A\\<^sup>*", "with Suc \\<open>(z, y) \\<in> A ^^ i\\<close>"], ["proof (chain)\npicking this:\n  \\<lbrakk>(?x, y) \\<in> A ^^ i; (?x, y) \\<notin> B\\<^sup>*\\<rbrakk>\n  \\<Longrightarrow> (?x, y) \\<in> A\\<^sup>* O (A - B) O A\\<^sup>*\n  (x, y) \\<in> A ^^ Suc i\n  (x, y) \\<notin> B\\<^sup>*\n  (z, y) \\<in> A ^^ i\n  (z, y) \\<notin> B\\<^sup>*", "have \"(z, y) \\<in> A\\<^sup>* O (A - B) O A\\<^sup>*\""], ["proof (prove)\nusing this:\n  \\<lbrakk>(?x, y) \\<in> A ^^ i; (?x, y) \\<notin> B\\<^sup>*\\<rbrakk>\n  \\<Longrightarrow> (?x, y) \\<in> A\\<^sup>* O (A - B) O A\\<^sup>*\n  (x, y) \\<in> A ^^ Suc i\n  (x, y) \\<notin> B\\<^sup>*\n  (z, y) \\<in> A ^^ i\n  (z, y) \\<notin> B\\<^sup>*\n\ngoal (1 subgoal):\n 1. (z, y) \\<in> A\\<^sup>* O (A - B) O A\\<^sup>*", "by auto"], ["proof (state)\nthis:\n  (z, y) \\<in> A\\<^sup>* O (A - B) O A\\<^sup>*\n\ngoal (1 subgoal):\n 1. \\<lbrakk>(x, z) \\<in> A; (x, z) \\<in> B\\<rbrakk>\n    \\<Longrightarrow> (x, y) \\<in> A\\<^sup>* O (A - B) O A\\<^sup>*", "with xz"], ["proof (chain)\npicking this:\n  (x, z) \\<in> A\n  (z, y) \\<in> A\\<^sup>* O (A - B) O A\\<^sup>*", "have xy:\"(x, y) \\<in> A O A\\<^sup>* O (A - B) O A\\<^sup>*\""], ["proof (prove)\nusing this:\n  (x, z) \\<in> A\n  (z, y) \\<in> A\\<^sup>* O (A - B) O A\\<^sup>*\n\ngoal (1 subgoal):\n 1. (x, y) \\<in> A O A\\<^sup>* O (A - B) O A\\<^sup>*", "by auto"], ["proof (state)\nthis:\n  (x, y) \\<in> A O A\\<^sup>* O (A - B) O A\\<^sup>*\n\ngoal (1 subgoal):\n 1. \\<lbrakk>(x, z) \\<in> A; (x, z) \\<in> B\\<rbrakk>\n    \\<Longrightarrow> (x, y) \\<in> A\\<^sup>* O (A - B) O A\\<^sup>*", "have \"A O A\\<^sup>* O (A - B) O A\\<^sup>* \\<subseteq> A\\<^sup>* O (A - B) O A\\<^sup>*\""], ["proof (prove)\ngoal (1 subgoal):\n 1. A O A\\<^sup>* O (A - B) O A\\<^sup>*\n    \\<subseteq> A\\<^sup>* O (A - B) O A\\<^sup>*", "by regexp"], ["proof (state)\nthis:\n  A O A\\<^sup>* O (A - B) O A\\<^sup>*\n  \\<subseteq> A\\<^sup>* O (A - B) O A\\<^sup>*\n\ngoal (1 subgoal):\n 1. \\<lbrakk>(x, z) \\<in> A; (x, z) \\<in> B\\<rbrakk>\n    \\<Longrightarrow> (x, y) \\<in> A\\<^sup>* O (A - B) O A\\<^sup>*", "from this xy"], ["proof (chain)\npicking this:\n  A O A\\<^sup>* O (A - B) O A\\<^sup>*\n  \\<subseteq> A\\<^sup>* O (A - B) O A\\<^sup>*\n  (x, y) \\<in> A O A\\<^sup>* O (A - B) O A\\<^sup>*", "show \"(x, y) \\<in> A\\<^sup>* O (A - B) O A\\<^sup>*\""], ["proof (prove)\nusing this:\n  A O A\\<^sup>* O (A - B) O A\\<^sup>*\n  \\<subseteq> A\\<^sup>* O (A - B) O A\\<^sup>*\n  (x, y) \\<in> A O A\\<^sup>* O (A - B) O A\\<^sup>*\n\ngoal (1 subgoal):\n 1. (x, y) \\<in> A\\<^sup>* O (A - B) O A\\<^sup>*", "using subsetD [where ?A=\"A O A\\<^sup>* O (A - B) O A\\<^sup>*\"]"], ["proof (prove)\nusing this:\n  A O A\\<^sup>* O (A - B) O A\\<^sup>*\n  \\<subseteq> A\\<^sup>* O (A - B) O A\\<^sup>*\n  (x, y) \\<in> A O A\\<^sup>* O (A - B) O A\\<^sup>*\n  \\<lbrakk>A O A\\<^sup>* O (A - B) O A\\<^sup>* \\<subseteq> ?B;\n   ?c \\<in> A O A\\<^sup>* O (A - B) O A\\<^sup>*\\<rbrakk>\n  \\<Longrightarrow> ?c \\<in> ?B\n\ngoal (1 subgoal):\n 1. (x, y) \\<in> A\\<^sup>* O (A - B) O A\\<^sup>*", "by auto"], ["proof (state)\nthis:\n  (x, y) \\<in> A\\<^sup>* O (A - B) O A\\<^sup>*\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  (x, y) \\<in> A\\<^sup>* O (A - B) O A\\<^sup>*\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  (x, y) \\<in> A\\<^sup>* O (A - B) O A\\<^sup>*\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma SN_empty [simp]: \"SN {}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. SN {}", "by auto"], ["", "lemma SN_on_weakening:\n  assumes \"SN_on R1 A\"\n  shows \"SN_on (R1 \\<inter> R2) A\""], ["proof (prove)\ngoal (1 subgoal):\n 1. SN_on (R1 \\<inter> R2) A", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. SN_on (R1 \\<inter> R2) A", "{"], ["proof (state)\ngoal (1 subgoal):\n 1. SN_on (R1 \\<inter> R2) A", "assume \"\\<exists>S. S 0 \\<in> A \\<and> chain (R1 \\<inter> R2) S\""], ["proof (state)\nthis:\n  \\<exists>S.\n     S 0 \\<in> A \\<and> (\\<forall>i. (S i, S (Suc i)) \\<in> R1 \\<inter> R2)\n\ngoal (1 subgoal):\n 1. SN_on (R1 \\<inter> R2) A", "then"], ["proof (chain)\npicking this:\n  \\<exists>S.\n     S 0 \\<in> A \\<and> (\\<forall>i. (S i, S (Suc i)) \\<in> R1 \\<inter> R2)", "obtain S where\n      S0: \"S 0 \\<in> A\" and\n      SN: \"chain (R1 \\<inter> R2) S\""], ["proof (prove)\nusing this:\n  \\<exists>S.\n     S 0 \\<in> A \\<and> (\\<forall>i. (S i, S (Suc i)) \\<in> R1 \\<inter> R2)\n\ngoal (1 subgoal):\n 1. (\\<And>S.\n        \\<lbrakk>S 0 \\<in> A;\n         \\<forall>i. (S i, S (Suc i)) \\<in> R1 \\<inter> R2\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  S 0 \\<in> A\n  \\<forall>i. (S i, S (Suc i)) \\<in> R1 \\<inter> R2\n\ngoal (1 subgoal):\n 1. SN_on (R1 \\<inter> R2) A", "from SN"], ["proof (chain)\npicking this:\n  \\<forall>i. (S i, S (Suc i)) \\<in> R1 \\<inter> R2", "have SN': \"chain R1 S\""], ["proof (prove)\nusing this:\n  \\<forall>i. (S i, S (Suc i)) \\<in> R1 \\<inter> R2\n\ngoal (1 subgoal):\n 1. \\<forall>i. (S i, S (Suc i)) \\<in> R1", "by simp"], ["proof (state)\nthis:\n  \\<forall>i. (S i, S (Suc i)) \\<in> R1\n\ngoal (1 subgoal):\n 1. SN_on (R1 \\<inter> R2) A", "with S0 and assms"], ["proof (chain)\npicking this:\n  S 0 \\<in> A\n  SN_on R1 A\n  \\<forall>i. (S i, S (Suc i)) \\<in> R1", "have \"False\""], ["proof (prove)\nusing this:\n  S 0 \\<in> A\n  SN_on R1 A\n  \\<forall>i. (S i, S (Suc i)) \\<in> R1\n\ngoal (1 subgoal):\n 1. False", "by auto"], ["proof (state)\nthis:\n  False\n\ngoal (1 subgoal):\n 1. SN_on (R1 \\<inter> R2) A", "}"], ["proof (state)\nthis:\n  \\<exists>S.\n     S 0 \\<in> A \\<and>\n     (\\<forall>i. (S i, S (Suc i)) \\<in> R1 \\<inter> R2) \\<Longrightarrow>\n  False\n\ngoal (1 subgoal):\n 1. SN_on (R1 \\<inter> R2) A", "then"], ["proof (chain)\npicking this:\n  \\<exists>S.\n     S 0 \\<in> A \\<and>\n     (\\<forall>i. (S i, S (Suc i)) \\<in> R1 \\<inter> R2) \\<Longrightarrow>\n  False", "show ?thesis"], ["proof (prove)\nusing this:\n  \\<exists>S.\n     S 0 \\<in> A \\<and>\n     (\\<forall>i. (S i, S (Suc i)) \\<in> R1 \\<inter> R2) \\<Longrightarrow>\n  False\n\ngoal (1 subgoal):\n 1. SN_on (R1 \\<inter> R2) A", "by force"], ["proof (state)\nthis:\n  SN_on (R1 \\<inter> R2) A\n\ngoal:\nNo subgoals!", "qed"], ["", "(* an explicit version of infinite reduction *)"], ["", "definition ideriv :: \"'a rel \\<Rightarrow> 'a rel \\<Rightarrow> (nat \\<Rightarrow> 'a) \\<Rightarrow> bool\" where\n  \"ideriv R S as \\<longleftrightarrow> (\\<forall>i. (as i, as (Suc i)) \\<in> R \\<union> S) \\<and> (INFM i. (as i, as (Suc i)) \\<in> R)\""], ["", "lemma ideriv_mono: \"R \\<subseteq> R' \\<Longrightarrow> S \\<subseteq> S' \\<Longrightarrow> ideriv R S as \\<Longrightarrow> ideriv R' S' as\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>R \\<subseteq> R'; S \\<subseteq> S'; ideriv R S as\\<rbrakk>\n    \\<Longrightarrow> ideriv R' S' as", "unfolding ideriv_def INFM_nat"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>R \\<subseteq> R'; S \\<subseteq> S';\n     (\\<forall>i. (as i, as (Suc i)) \\<in> R \\<union> S) \\<and>\n     (\\<forall>m. \\<exists>n>m. (as n, as (Suc n)) \\<in> R)\\<rbrakk>\n    \\<Longrightarrow> (\\<forall>i.\n                          (as i, as (Suc i)) \\<in> R' \\<union> S') \\<and>\n                      (\\<forall>m.\n                          \\<exists>n>m. (as n, as (Suc n)) \\<in> R')", "by blast"], ["", "fun\n  shift :: \"(nat \\<Rightarrow> 'a) \\<Rightarrow> nat \\<Rightarrow> nat \\<Rightarrow> 'a\"\nwhere\n  \"shift f j = (\\<lambda> i. f (i+j))\""], ["", "lemma ideriv_split:\n  assumes ideriv: \"ideriv R S as\"\n    and nideriv: \"\\<not> ideriv (D \\<inter> (R \\<union> S)) (R \\<union> S - D) as\"\n  shows \"\\<exists> i. ideriv (R - D) (S - D) (shift as i)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>i. ideriv (R - D) (S - D) (shift as i)", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<exists>i. ideriv (R - D) (S - D) (shift as i)", "have RS: \"R - D \\<union> (S - D) = R \\<union> S - D\""], ["proof (prove)\ngoal (1 subgoal):\n 1. R - D \\<union> (S - D) = R \\<union> S - D", "by auto"], ["proof (state)\nthis:\n  R - D \\<union> (S - D) = R \\<union> S - D\n\ngoal (1 subgoal):\n 1. \\<exists>i. ideriv (R - D) (S - D) (shift as i)", "from ideriv [unfolded ideriv_def]"], ["proof (chain)\npicking this:\n  (\\<forall>i. (as i, as (Suc i)) \\<in> R \\<union> S) \\<and>\n  (\\<exists>\\<^sub>\\<infinity>i. (as i, as (Suc i)) \\<in> R)", "have as: \"\\<And> i. (as i, as (Suc i)) \\<in> R \\<union> S\"\n    and inf: \"INFM i. (as i, as (Suc i)) \\<in> R\""], ["proof (prove)\nusing this:\n  (\\<forall>i. (as i, as (Suc i)) \\<in> R \\<union> S) \\<and>\n  (\\<exists>\\<^sub>\\<infinity>i. (as i, as (Suc i)) \\<in> R)\n\ngoal (1 subgoal):\n 1. (\\<And>i. (as i, as (Suc i)) \\<in> R \\<union> S) &&&\n    \\<exists>\\<^sub>\\<infinity>i. (as i, as (Suc i)) \\<in> R", "by auto"], ["proof (state)\nthis:\n  (as ?i, as (Suc ?i)) \\<in> R \\<union> S\n  \\<exists>\\<^sub>\\<infinity>i. (as i, as (Suc i)) \\<in> R\n\ngoal (1 subgoal):\n 1. \\<exists>i. ideriv (R - D) (S - D) (shift as i)", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>i. ideriv (R - D) (S - D) (shift as i)", "proof (cases \"INFM i. (as i, as (Suc i)) \\<in> D \\<inter> (R \\<union> S)\")"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<exists>\\<^sub>\\<infinity>i.\n       (as i, as (Suc i)) \\<in> D \\<inter> (R \\<union> S) \\<Longrightarrow>\n    \\<exists>i. ideriv (R - D) (S - D) (shift as i)\n 2. \\<not> (\\<exists>\\<^sub>\\<infinity>i.\n               (as i, as (Suc i))\n               \\<in> D \\<inter> (R \\<union> S)) \\<Longrightarrow>\n    \\<exists>i. ideriv (R - D) (S - D) (shift as i)", "case True"], ["proof (state)\nthis:\n  \\<exists>\\<^sub>\\<infinity>i.\n     (as i, as (Suc i)) \\<in> D \\<inter> (R \\<union> S)\n\ngoal (2 subgoals):\n 1. \\<exists>\\<^sub>\\<infinity>i.\n       (as i, as (Suc i)) \\<in> D \\<inter> (R \\<union> S) \\<Longrightarrow>\n    \\<exists>i. ideriv (R - D) (S - D) (shift as i)\n 2. \\<not> (\\<exists>\\<^sub>\\<infinity>i.\n               (as i, as (Suc i))\n               \\<in> D \\<inter> (R \\<union> S)) \\<Longrightarrow>\n    \\<exists>i. ideriv (R - D) (S - D) (shift as i)", "have \"ideriv (D \\<inter> (R \\<union> S)) (R \\<union> S - D) as\""], ["proof (prove)\ngoal (1 subgoal):\n 1. ideriv (D \\<inter> (R \\<union> S)) (R \\<union> S - D) as", "unfolding ideriv_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<forall>i.\n        (as i, as (Suc i))\n        \\<in> D \\<inter> (R \\<union> S) \\<union> (R \\<union> S - D)) \\<and>\n    (\\<exists>\\<^sub>\\<infinity>i.\n        (as i, as (Suc i)) \\<in> D \\<inter> (R \\<union> S))", "using as True"], ["proof (prove)\nusing this:\n  (as ?i, as (Suc ?i)) \\<in> R \\<union> S\n  \\<exists>\\<^sub>\\<infinity>i.\n     (as i, as (Suc i)) \\<in> D \\<inter> (R \\<union> S)\n\ngoal (1 subgoal):\n 1. (\\<forall>i.\n        (as i, as (Suc i))\n        \\<in> D \\<inter> (R \\<union> S) \\<union> (R \\<union> S - D)) \\<and>\n    (\\<exists>\\<^sub>\\<infinity>i.\n        (as i, as (Suc i)) \\<in> D \\<inter> (R \\<union> S))", "by auto"], ["proof (state)\nthis:\n  ideriv (D \\<inter> (R \\<union> S)) (R \\<union> S - D) as\n\ngoal (2 subgoals):\n 1. \\<exists>\\<^sub>\\<infinity>i.\n       (as i, as (Suc i)) \\<in> D \\<inter> (R \\<union> S) \\<Longrightarrow>\n    \\<exists>i. ideriv (R - D) (S - D) (shift as i)\n 2. \\<not> (\\<exists>\\<^sub>\\<infinity>i.\n               (as i, as (Suc i))\n               \\<in> D \\<inter> (R \\<union> S)) \\<Longrightarrow>\n    \\<exists>i. ideriv (R - D) (S - D) (shift as i)", "with nideriv"], ["proof (chain)\npicking this:\n  \\<not> ideriv (D \\<inter> (R \\<union> S)) (R \\<union> S - D) as\n  ideriv (D \\<inter> (R \\<union> S)) (R \\<union> S - D) as", "show ?thesis"], ["proof (prove)\nusing this:\n  \\<not> ideriv (D \\<inter> (R \\<union> S)) (R \\<union> S - D) as\n  ideriv (D \\<inter> (R \\<union> S)) (R \\<union> S - D) as\n\ngoal (1 subgoal):\n 1. \\<exists>i. ideriv (R - D) (S - D) (shift as i)", ".."], ["proof (state)\nthis:\n  \\<exists>i. ideriv (R - D) (S - D) (shift as i)\n\ngoal (1 subgoal):\n 1. \\<not> (\\<exists>\\<^sub>\\<infinity>i.\n               (as i, as (Suc i))\n               \\<in> D \\<inter> (R \\<union> S)) \\<Longrightarrow>\n    \\<exists>i. ideriv (R - D) (S - D) (shift as i)", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<not> (\\<exists>\\<^sub>\\<infinity>i.\n               (as i, as (Suc i))\n               \\<in> D \\<inter> (R \\<union> S)) \\<Longrightarrow>\n    \\<exists>i. ideriv (R - D) (S - D) (shift as i)", "case False"], ["proof (state)\nthis:\n  \\<not> (\\<exists>\\<^sub>\\<infinity>i.\n             (as i, as (Suc i)) \\<in> D \\<inter> (R \\<union> S))\n\ngoal (1 subgoal):\n 1. \\<not> (\\<exists>\\<^sub>\\<infinity>i.\n               (as i, as (Suc i))\n               \\<in> D \\<inter> (R \\<union> S)) \\<Longrightarrow>\n    \\<exists>i. ideriv (R - D) (S - D) (shift as i)", "from False [unfolded INFM_nat]"], ["proof (chain)\npicking this:\n  \\<not> (\\<forall>m.\n             \\<exists>n>m.\n                (as n, as (Suc n)) \\<in> D \\<inter> (R \\<union> S))", "obtain i where Dn: \"\\<And> j. i < j \\<Longrightarrow> (as j, as (Suc j)) \\<notin> D \\<inter> (R \\<union> S)\""], ["proof (prove)\nusing this:\n  \\<not> (\\<forall>m.\n             \\<exists>n>m.\n                (as n, as (Suc n)) \\<in> D \\<inter> (R \\<union> S))\n\ngoal (1 subgoal):\n 1. (\\<And>i.\n        (\\<And>j.\n            i < j \\<Longrightarrow>\n            (as j, as (Suc j))\n            \\<notin> D \\<inter> (R \\<union> S)) \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  i < ?j \\<Longrightarrow>\n  (as ?j, as (Suc ?j)) \\<notin> D \\<inter> (R \\<union> S)\n\ngoal (1 subgoal):\n 1. \\<not> (\\<exists>\\<^sub>\\<infinity>i.\n               (as i, as (Suc i))\n               \\<in> D \\<inter> (R \\<union> S)) \\<Longrightarrow>\n    \\<exists>i. ideriv (R - D) (S - D) (shift as i)", "from Dn as"], ["proof (chain)\npicking this:\n  i < ?j \\<Longrightarrow>\n  (as ?j, as (Suc ?j)) \\<notin> D \\<inter> (R \\<union> S)\n  (as ?i, as (Suc ?i)) \\<in> R \\<union> S", "have as: \"\\<And> j. i < j \\<Longrightarrow> (as j, as (Suc j)) \\<in> R \\<union> S - D\""], ["proof (prove)\nusing this:\n  i < ?j \\<Longrightarrow>\n  (as ?j, as (Suc ?j)) \\<notin> D \\<inter> (R \\<union> S)\n  (as ?i, as (Suc ?i)) \\<in> R \\<union> S\n\ngoal (1 subgoal):\n 1. \\<And>j.\n       i < j \\<Longrightarrow> (as j, as (Suc j)) \\<in> R \\<union> S - D", "by auto"], ["proof (state)\nthis:\n  i < ?j \\<Longrightarrow> (as ?j, as (Suc ?j)) \\<in> R \\<union> S - D\n\ngoal (1 subgoal):\n 1. \\<not> (\\<exists>\\<^sub>\\<infinity>i.\n               (as i, as (Suc i))\n               \\<in> D \\<inter> (R \\<union> S)) \\<Longrightarrow>\n    \\<exists>i. ideriv (R - D) (S - D) (shift as i)", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>i. ideriv (R - D) (S - D) (shift as i)", "proof (rule exI [of _ \"Suc i\"], unfold ideriv_def RS, insert as, intro conjI, simp, unfold INFM_nat, intro allI)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>m.\n       (\\<And>j.\n           i < j \\<Longrightarrow>\n           (as j, as (Suc j)) \\<in> R \\<union> S - D) \\<Longrightarrow>\n       \\<exists>n>m.\n          (shift as (Suc i) n, shift as (Suc i) (Suc n)) \\<in> R - D", "fix m"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>m.\n       (\\<And>j.\n           i < j \\<Longrightarrow>\n           (as j, as (Suc j)) \\<in> R \\<union> S - D) \\<Longrightarrow>\n       \\<exists>n>m.\n          (shift as (Suc i) n, shift as (Suc i) (Suc n)) \\<in> R - D", "from inf [unfolded INFM_nat]"], ["proof (chain)\npicking this:\n  \\<forall>m. \\<exists>n>m. (as n, as (Suc n)) \\<in> R", "obtain j where j: \"j > Suc i + m\"\n        and R: \"(as j, as (Suc j)) \\<in> R\""], ["proof (prove)\nusing this:\n  \\<forall>m. \\<exists>n>m. (as n, as (Suc n)) \\<in> R\n\ngoal (1 subgoal):\n 1. (\\<And>j.\n        \\<lbrakk>Suc i + m < j; (as j, as (Suc j)) \\<in> R\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  Suc i + m < j\n  (as j, as (Suc j)) \\<in> R\n\ngoal (1 subgoal):\n 1. \\<And>m.\n       (\\<And>j.\n           i < j \\<Longrightarrow>\n           (as j, as (Suc j)) \\<in> R \\<union> S - D) \\<Longrightarrow>\n       \\<exists>n>m.\n          (shift as (Suc i) n, shift as (Suc i) (Suc n)) \\<in> R - D", "with as [of j]"], ["proof (chain)\npicking this:\n  i < j \\<Longrightarrow> (as j, as (Suc j)) \\<in> R \\<union> S - D\n  Suc i + m < j\n  (as j, as (Suc j)) \\<in> R", "have RD: \"(as j, as (Suc j)) \\<in> R - D\""], ["proof (prove)\nusing this:\n  i < j \\<Longrightarrow> (as j, as (Suc j)) \\<in> R \\<union> S - D\n  Suc i + m < j\n  (as j, as (Suc j)) \\<in> R\n\ngoal (1 subgoal):\n 1. (as j, as (Suc j)) \\<in> R - D", "by auto"], ["proof (state)\nthis:\n  (as j, as (Suc j)) \\<in> R - D\n\ngoal (1 subgoal):\n 1. \\<And>m.\n       (\\<And>j.\n           i < j \\<Longrightarrow>\n           (as j, as (Suc j)) \\<in> R \\<union> S - D) \\<Longrightarrow>\n       \\<exists>n>m.\n          (shift as (Suc i) n, shift as (Suc i) (Suc n)) \\<in> R - D", "show \"\\<exists> j > m. (shift as (Suc i) j, shift as (Suc i) (Suc j)) \\<in> R - D\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>j>m. (shift as (Suc i) j, shift as (Suc i) (Suc j)) \\<in> R - D", "by (rule exI [of _ \"j - Suc i\"], insert j RD, auto)"], ["proof (state)\nthis:\n  \\<exists>j>m. (shift as (Suc i) j, shift as (Suc i) (Suc j)) \\<in> R - D\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>i. ideriv (R - D) (S - D) (shift as i)\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>i. ideriv (R - D) (S - D) (shift as i)\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma ideriv_SN:\n  assumes SN: \"SN S\"\n    and compat: \"NS O S \\<subseteq> S\"\n    and R: \"R \\<subseteq> NS \\<union> S\"\n  shows \"\\<not> ideriv (S \\<inter> R) (R - S) as\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<not> ideriv (S \\<inter> R) (R - S) as", "proof"], ["proof (state)\ngoal (1 subgoal):\n 1. ideriv (S \\<inter> R) (R - S) as \\<Longrightarrow> False", "assume \"ideriv (S \\<inter> R) (R - S) as\""], ["proof (state)\nthis:\n  ideriv (S \\<inter> R) (R - S) as\n\ngoal (1 subgoal):\n 1. ideriv (S \\<inter> R) (R - S) as \\<Longrightarrow> False", "with R"], ["proof (chain)\npicking this:\n  R \\<subseteq> NS \\<union> S\n  ideriv (S \\<inter> R) (R - S) as", "have steps: \"\\<forall> i. (as i, as (Suc i)) \\<in> NS \\<union> S\"\n    and inf: \"INFM i. (as i, as (Suc i)) \\<in> S \\<inter> R\""], ["proof (prove)\nusing this:\n  R \\<subseteq> NS \\<union> S\n  ideriv (S \\<inter> R) (R - S) as\n\ngoal (1 subgoal):\n 1. \\<forall>i. (as i, as (Suc i)) \\<in> NS \\<union> S &&&\n    \\<exists>\\<^sub>\\<infinity>i. (as i, as (Suc i)) \\<in> S \\<inter> R", "unfolding ideriv_def"], ["proof (prove)\nusing this:\n  R \\<subseteq> NS \\<union> S\n  (\\<forall>i.\n      (as i, as (Suc i)) \\<in> S \\<inter> R \\<union> (R - S)) \\<and>\n  (\\<exists>\\<^sub>\\<infinity>i. (as i, as (Suc i)) \\<in> S \\<inter> R)\n\ngoal (1 subgoal):\n 1. \\<forall>i. (as i, as (Suc i)) \\<in> NS \\<union> S &&&\n    \\<exists>\\<^sub>\\<infinity>i. (as i, as (Suc i)) \\<in> S \\<inter> R", "by auto"], ["proof (state)\nthis:\n  \\<forall>i. (as i, as (Suc i)) \\<in> NS \\<union> S\n  \\<exists>\\<^sub>\\<infinity>i. (as i, as (Suc i)) \\<in> S \\<inter> R\n\ngoal (1 subgoal):\n 1. ideriv (S \\<inter> R) (R - S) as \\<Longrightarrow> False", "from non_strict_ending [OF steps compat] SN"], ["proof (chain)\npicking this:\n  SN_on S {as 0} \\<Longrightarrow>\n  \\<exists>j. \\<forall>i\\<ge>j. (as i, as (Suc i)) \\<in> NS - S\n  SN S", "obtain i where i: \"\\<And> j. j \\<ge> i \\<Longrightarrow> (as j, as (Suc j)) \\<in> NS - S\""], ["proof (prove)\nusing this:\n  SN_on S {as 0} \\<Longrightarrow>\n  \\<exists>j. \\<forall>i\\<ge>j. (as i, as (Suc i)) \\<in> NS - S\n  SN S\n\ngoal (1 subgoal):\n 1. (\\<And>i.\n        (\\<And>j.\n            i \\<le> j \\<Longrightarrow>\n            (as j, as (Suc j)) \\<in> NS - S) \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by fast"], ["proof (state)\nthis:\n  i \\<le> ?j \\<Longrightarrow> (as ?j, as (Suc ?j)) \\<in> NS - S\n\ngoal (1 subgoal):\n 1. ideriv (S \\<inter> R) (R - S) as \\<Longrightarrow> False", "from inf [unfolded INFM_nat]"], ["proof (chain)\npicking this:\n  \\<forall>m. \\<exists>n>m. (as n, as (Suc n)) \\<in> S \\<inter> R", "obtain j where \"j > i\" and \"(as j, as (Suc j)) \\<in> S\""], ["proof (prove)\nusing this:\n  \\<forall>m. \\<exists>n>m. (as n, as (Suc n)) \\<in> S \\<inter> R\n\ngoal (1 subgoal):\n 1. (\\<And>j.\n        \\<lbrakk>i < j; (as j, as (Suc j)) \\<in> S\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  i < j\n  (as j, as (Suc j)) \\<in> S\n\ngoal (1 subgoal):\n 1. ideriv (S \\<inter> R) (R - S) as \\<Longrightarrow> False", "with i [of j]"], ["proof (chain)\npicking this:\n  i \\<le> j \\<Longrightarrow> (as j, as (Suc j)) \\<in> NS - S\n  i < j\n  (as j, as (Suc j)) \\<in> S", "show False"], ["proof (prove)\nusing this:\n  i \\<le> j \\<Longrightarrow> (as j, as (Suc j)) \\<in> NS - S\n  i < j\n  (as j, as (Suc j)) \\<in> S\n\ngoal (1 subgoal):\n 1. False", "by auto"], ["proof (state)\nthis:\n  False\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma Infm_shift: \"(INFM i. P (shift f n i)) = (INFM i. P (f i))\" (is \"?S = ?O\")"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<exists>\\<^sub>\\<infinity>i. P (shift f n i)) =\n    (\\<exists>\\<^sub>\\<infinity>i. P (f i))", "proof"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<exists>\\<^sub>\\<infinity>i. P (shift f n i) \\<Longrightarrow>\n    \\<exists>\\<^sub>\\<infinity>i. P (f i)\n 2. \\<exists>\\<^sub>\\<infinity>i. P (f i) \\<Longrightarrow>\n    \\<exists>\\<^sub>\\<infinity>i. P (shift f n i)", "assume ?S"], ["proof (state)\nthis:\n  \\<exists>\\<^sub>\\<infinity>i. P (shift f n i)\n\ngoal (2 subgoals):\n 1. \\<exists>\\<^sub>\\<infinity>i. P (shift f n i) \\<Longrightarrow>\n    \\<exists>\\<^sub>\\<infinity>i. P (f i)\n 2. \\<exists>\\<^sub>\\<infinity>i. P (f i) \\<Longrightarrow>\n    \\<exists>\\<^sub>\\<infinity>i. P (shift f n i)", "show ?O"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>\\<^sub>\\<infinity>i. P (f i)", "unfolding INFM_nat_le"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>m. \\<exists>n\\<ge>m. P (f n)", "proof"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>m. \\<exists>n\\<ge>m. P (f n)", "fix m"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>m. \\<exists>n\\<ge>m. P (f n)", "from \\<open>?S\\<close> [unfolded INFM_nat_le]"], ["proof (chain)\npicking this:\n  \\<forall>m. \\<exists>na\\<ge>m. P (shift f n na)", "obtain k where k: \"k \\<ge> m\" and p: \"P (shift f n k)\""], ["proof (prove)\nusing this:\n  \\<forall>m. \\<exists>na\\<ge>m. P (shift f n na)\n\ngoal (1 subgoal):\n 1. (\\<And>k.\n        \\<lbrakk>m \\<le> k; P (shift f n k)\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  m \\<le> k\n  P (shift f n k)\n\ngoal (1 subgoal):\n 1. \\<And>m. \\<exists>n\\<ge>m. P (f n)", "show \"\\<exists> k \\<ge> m. P (f k)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>k\\<ge>m. P (f k)", "by (rule exI [of _ \"k + n\"], insert k p, auto)"], ["proof (state)\nthis:\n  \\<exists>k\\<ge>m. P (f k)\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>\\<^sub>\\<infinity>i. P (f i)\n\ngoal (1 subgoal):\n 1. \\<exists>\\<^sub>\\<infinity>i. P (f i) \\<Longrightarrow>\n    \\<exists>\\<^sub>\\<infinity>i. P (shift f n i)", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<exists>\\<^sub>\\<infinity>i. P (f i) \\<Longrightarrow>\n    \\<exists>\\<^sub>\\<infinity>i. P (shift f n i)", "assume ?O"], ["proof (state)\nthis:\n  \\<exists>\\<^sub>\\<infinity>i. P (f i)\n\ngoal (1 subgoal):\n 1. \\<exists>\\<^sub>\\<infinity>i. P (f i) \\<Longrightarrow>\n    \\<exists>\\<^sub>\\<infinity>i. P (shift f n i)", "show ?S"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>\\<^sub>\\<infinity>i. P (shift f n i)", "unfolding INFM_nat_le"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>m. \\<exists>na\\<ge>m. P (shift f n na)", "proof"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>m. \\<exists>na\\<ge>m. P (shift f n na)", "fix m"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>m. \\<exists>na\\<ge>m. P (shift f n na)", "from \\<open>?O\\<close> [unfolded INFM_nat_le]"], ["proof (chain)\npicking this:\n  \\<forall>m. \\<exists>n\\<ge>m. P (f n)", "obtain k where k: \"k \\<ge> m + n\" and p: \"P (f k)\""], ["proof (prove)\nusing this:\n  \\<forall>m. \\<exists>n\\<ge>m. P (f n)\n\ngoal (1 subgoal):\n 1. (\\<And>k.\n        \\<lbrakk>m + n \\<le> k; P (f k)\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  m + n \\<le> k\n  P (f k)\n\ngoal (1 subgoal):\n 1. \\<And>m. \\<exists>na\\<ge>m. P (shift f n na)", "show \"\\<exists> k \\<ge> m. P (shift f n k)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>k\\<ge>m. P (shift f n k)", "by (rule exI [of _ \"k - n\"], insert k p, auto)"], ["proof (state)\nthis:\n  \\<exists>k\\<ge>m. P (shift f n k)\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>\\<^sub>\\<infinity>i. P (shift f n i)\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma rtrancl_list_conv:\n  \"(s, t) \\<in> R\\<^sup>* \\<longleftrightarrow> \n    (\\<exists> ts. last (s # ts) = t \\<and> (\\<forall>i<length ts. ((s # ts) ! i, (s # ts) ! Suc i) \\<in> R))\" (is \"?l = ?r\")"], ["proof (prove)\ngoal (1 subgoal):\n 1. ((s, t) \\<in> R\\<^sup>*) =\n    (\\<exists>ts.\n        last (s # ts) = t \\<and>\n        (\\<forall>i<length ts. ((s # ts) ! i, (s # ts) ! Suc i) \\<in> R))", "proof"], ["proof (state)\ngoal (2 subgoals):\n 1. (s, t) \\<in> R\\<^sup>* \\<Longrightarrow>\n    \\<exists>ts.\n       last (s # ts) = t \\<and>\n       (\\<forall>i<length ts. ((s # ts) ! i, (s # ts) ! Suc i) \\<in> R)\n 2. \\<exists>ts.\n       last (s # ts) = t \\<and>\n       (\\<forall>i<length ts.\n           ((s # ts) ! i, (s # ts) ! Suc i) \\<in> R) \\<Longrightarrow>\n    (s, t) \\<in> R\\<^sup>*", "assume ?r"], ["proof (state)\nthis:\n  \\<exists>ts.\n     last (s # ts) = t \\<and>\n     (\\<forall>i<length ts. ((s # ts) ! i, (s # ts) ! Suc i) \\<in> R)\n\ngoal (2 subgoals):\n 1. (s, t) \\<in> R\\<^sup>* \\<Longrightarrow>\n    \\<exists>ts.\n       last (s # ts) = t \\<and>\n       (\\<forall>i<length ts. ((s # ts) ! i, (s # ts) ! Suc i) \\<in> R)\n 2. \\<exists>ts.\n       last (s # ts) = t \\<and>\n       (\\<forall>i<length ts.\n           ((s # ts) ! i, (s # ts) ! Suc i) \\<in> R) \\<Longrightarrow>\n    (s, t) \\<in> R\\<^sup>*", "then"], ["proof (chain)\npicking this:\n  \\<exists>ts.\n     last (s # ts) = t \\<and>\n     (\\<forall>i<length ts. ((s # ts) ! i, (s # ts) ! Suc i) \\<in> R)", "obtain ts where \"last (s # ts) = t \\<and> (\\<forall>i<length ts. ((s # ts) ! i, (s # ts) ! Suc i) \\<in> R)\""], ["proof (prove)\nusing this:\n  \\<exists>ts.\n     last (s # ts) = t \\<and>\n     (\\<forall>i<length ts. ((s # ts) ! i, (s # ts) ! Suc i) \\<in> R)\n\ngoal (1 subgoal):\n 1. (\\<And>ts.\n        last (s # ts) = t \\<and>\n        (\\<forall>i<length ts.\n            ((s # ts) ! i, (s # ts) ! Suc i) \\<in> R) \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", ".."], ["proof (state)\nthis:\n  last (s # ts) = t \\<and>\n  (\\<forall>i<length ts. ((s # ts) ! i, (s # ts) ! Suc i) \\<in> R)\n\ngoal (2 subgoals):\n 1. (s, t) \\<in> R\\<^sup>* \\<Longrightarrow>\n    \\<exists>ts.\n       last (s # ts) = t \\<and>\n       (\\<forall>i<length ts. ((s # ts) ! i, (s # ts) ! Suc i) \\<in> R)\n 2. \\<exists>ts.\n       last (s # ts) = t \\<and>\n       (\\<forall>i<length ts.\n           ((s # ts) ! i, (s # ts) ! Suc i) \\<in> R) \\<Longrightarrow>\n    (s, t) \\<in> R\\<^sup>*", "then"], ["proof (chain)\npicking this:\n  last (s # ts) = t \\<and>\n  (\\<forall>i<length ts. ((s # ts) ! i, (s # ts) ! Suc i) \\<in> R)", "show ?l"], ["proof (prove)\nusing this:\n  last (s # ts) = t \\<and>\n  (\\<forall>i<length ts. ((s # ts) ! i, (s # ts) ! Suc i) \\<in> R)\n\ngoal (1 subgoal):\n 1. (s, t) \\<in> R\\<^sup>*", "proof (induct ts arbitrary: s, simp)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>a ts s.\n       \\<lbrakk>\\<And>s.\n                   last (s # ts) = t \\<and>\n                   (\\<forall>i<length ts.\n                       ((s # ts) ! i, (s # ts) ! Suc i)\n                       \\<in> R) \\<Longrightarrow>\n                   (s, t) \\<in> R\\<^sup>*;\n        last (s # a # ts) = t \\<and>\n        (\\<forall>i<length (a # ts).\n            ((s # a # ts) ! i, (s # a # ts) ! Suc i) \\<in> R)\\<rbrakk>\n       \\<Longrightarrow> (s, t) \\<in> R\\<^sup>*", "case (Cons u ll)"], ["proof (state)\nthis:\n  last (?s # ll) = t \\<and>\n  (\\<forall>i<length ll.\n      ((?s # ll) ! i, (?s # ll) ! Suc i) \\<in> R) \\<Longrightarrow>\n  (?s, t) \\<in> R\\<^sup>*\n  last (s # u # ll) = t \\<and>\n  (\\<forall>i<length (u # ll).\n      ((s # u # ll) ! i, (s # u # ll) ! Suc i) \\<in> R)\n\ngoal (1 subgoal):\n 1. \\<And>a ts s.\n       \\<lbrakk>\\<And>s.\n                   last (s # ts) = t \\<and>\n                   (\\<forall>i<length ts.\n                       ((s # ts) ! i, (s # ts) ! Suc i)\n                       \\<in> R) \\<Longrightarrow>\n                   (s, t) \\<in> R\\<^sup>*;\n        last (s # a # ts) = t \\<and>\n        (\\<forall>i<length (a # ts).\n            ((s # a # ts) ! i, (s # a # ts) ! Suc i) \\<in> R)\\<rbrakk>\n       \\<Longrightarrow> (s, t) \\<in> R\\<^sup>*", "then"], ["proof (chain)\npicking this:\n  last (?s # ll) = t \\<and>\n  (\\<forall>i<length ll.\n      ((?s # ll) ! i, (?s # ll) ! Suc i) \\<in> R) \\<Longrightarrow>\n  (?s, t) \\<in> R\\<^sup>*\n  last (s # u # ll) = t \\<and>\n  (\\<forall>i<length (u # ll).\n      ((s # u # ll) ! i, (s # u # ll) ! Suc i) \\<in> R)", "have \"last (u # ll) = t \\<and> (\\<forall>i<length ll. ((u # ll) ! i, (u # ll) ! Suc i) \\<in> R)\""], ["proof (prove)\nusing this:\n  last (?s # ll) = t \\<and>\n  (\\<forall>i<length ll.\n      ((?s # ll) ! i, (?s # ll) ! Suc i) \\<in> R) \\<Longrightarrow>\n  (?s, t) \\<in> R\\<^sup>*\n  last (s # u # ll) = t \\<and>\n  (\\<forall>i<length (u # ll).\n      ((s # u # ll) ! i, (s # u # ll) ! Suc i) \\<in> R)\n\ngoal (1 subgoal):\n 1. last (u # ll) = t \\<and>\n    (\\<forall>i<length ll. ((u # ll) ! i, (u # ll) ! Suc i) \\<in> R)", "by auto"], ["proof (state)\nthis:\n  last (u # ll) = t \\<and>\n  (\\<forall>i<length ll. ((u # ll) ! i, (u # ll) ! Suc i) \\<in> R)\n\ngoal (1 subgoal):\n 1. \\<And>a ts s.\n       \\<lbrakk>\\<And>s.\n                   last (s # ts) = t \\<and>\n                   (\\<forall>i<length ts.\n                       ((s # ts) ! i, (s # ts) ! Suc i)\n                       \\<in> R) \\<Longrightarrow>\n                   (s, t) \\<in> R\\<^sup>*;\n        last (s # a # ts) = t \\<and>\n        (\\<forall>i<length (a # ts).\n            ((s # a # ts) ! i, (s # a # ts) ! Suc i) \\<in> R)\\<rbrakk>\n       \\<Longrightarrow> (s, t) \\<in> R\\<^sup>*", "from Cons(1)[OF this]"], ["proof (chain)\npicking this:\n  (u, t) \\<in> R\\<^sup>*", "have rec: \"(u, t) \\<in> R\\<^sup>*\""], ["proof (prove)\nusing this:\n  (u, t) \\<in> R\\<^sup>*\n\ngoal (1 subgoal):\n 1. (u, t) \\<in> R\\<^sup>*", "."], ["proof (state)\nthis:\n  (u, t) \\<in> R\\<^sup>*\n\ngoal (1 subgoal):\n 1. \\<And>a ts s.\n       \\<lbrakk>\\<And>s.\n                   last (s # ts) = t \\<and>\n                   (\\<forall>i<length ts.\n                       ((s # ts) ! i, (s # ts) ! Suc i)\n                       \\<in> R) \\<Longrightarrow>\n                   (s, t) \\<in> R\\<^sup>*;\n        last (s # a # ts) = t \\<and>\n        (\\<forall>i<length (a # ts).\n            ((s # a # ts) ! i, (s # a # ts) ! Suc i) \\<in> R)\\<rbrakk>\n       \\<Longrightarrow> (s, t) \\<in> R\\<^sup>*", "from Cons"], ["proof (chain)\npicking this:\n  last (?s # ll) = t \\<and>\n  (\\<forall>i<length ll.\n      ((?s # ll) ! i, (?s # ll) ! Suc i) \\<in> R) \\<Longrightarrow>\n  (?s, t) \\<in> R\\<^sup>*\n  last (s # u # ll) = t \\<and>\n  (\\<forall>i<length (u # ll).\n      ((s # u # ll) ! i, (s # u # ll) ! Suc i) \\<in> R)", "have \"(s, u) \\<in> R\""], ["proof (prove)\nusing this:\n  last (?s # ll) = t \\<and>\n  (\\<forall>i<length ll.\n      ((?s # ll) ! i, (?s # ll) ! Suc i) \\<in> R) \\<Longrightarrow>\n  (?s, t) \\<in> R\\<^sup>*\n  last (s # u # ll) = t \\<and>\n  (\\<forall>i<length (u # ll).\n      ((s # u # ll) ! i, (s # u # ll) ! Suc i) \\<in> R)\n\ngoal (1 subgoal):\n 1. (s, u) \\<in> R", "by auto"], ["proof (state)\nthis:\n  (s, u) \\<in> R\n\ngoal (1 subgoal):\n 1. \\<And>a ts s.\n       \\<lbrakk>\\<And>s.\n                   last (s # ts) = t \\<and>\n                   (\\<forall>i<length ts.\n                       ((s # ts) ! i, (s # ts) ! Suc i)\n                       \\<in> R) \\<Longrightarrow>\n                   (s, t) \\<in> R\\<^sup>*;\n        last (s # a # ts) = t \\<and>\n        (\\<forall>i<length (a # ts).\n            ((s # a # ts) ! i, (s # a # ts) ! Suc i) \\<in> R)\\<rbrakk>\n       \\<Longrightarrow> (s, t) \\<in> R\\<^sup>*", "with rec"], ["proof (chain)\npicking this:\n  (u, t) \\<in> R\\<^sup>*\n  (s, u) \\<in> R", "show ?case"], ["proof (prove)\nusing this:\n  (u, t) \\<in> R\\<^sup>*\n  (s, u) \\<in> R\n\ngoal (1 subgoal):\n 1. (s, t) \\<in> R\\<^sup>*", "by auto"], ["proof (state)\nthis:\n  (s, t) \\<in> R\\<^sup>*\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  (s, t) \\<in> R\\<^sup>*\n\ngoal (1 subgoal):\n 1. (s, t) \\<in> R\\<^sup>* \\<Longrightarrow>\n    \\<exists>ts.\n       last (s # ts) = t \\<and>\n       (\\<forall>i<length ts. ((s # ts) ! i, (s # ts) ! Suc i) \\<in> R)", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. (s, t) \\<in> R\\<^sup>* \\<Longrightarrow>\n    \\<exists>ts.\n       last (s # ts) = t \\<and>\n       (\\<forall>i<length ts. ((s # ts) ! i, (s # ts) ! Suc i) \\<in> R)", "assume ?l"], ["proof (state)\nthis:\n  (s, t) \\<in> R\\<^sup>*\n\ngoal (1 subgoal):\n 1. (s, t) \\<in> R\\<^sup>* \\<Longrightarrow>\n    \\<exists>ts.\n       last (s # ts) = t \\<and>\n       (\\<forall>i<length ts. ((s # ts) ! i, (s # ts) ! Suc i) \\<in> R)", "from rtrancl_imp_seq [OF this]"], ["proof (chain)\npicking this:\n  \\<exists>f n.\n     f 0 = s \\<and> f n = t \\<and> (\\<forall>i<n. (f i, f (Suc i)) \\<in> R)", "obtain S n where s: \"S 0 = s\" and t: \"S n = t\" and steps: \"\\<forall> i<n. (S i, S (Suc i)) \\<in> R\""], ["proof (prove)\nusing this:\n  \\<exists>f n.\n     f 0 = s \\<and> f n = t \\<and> (\\<forall>i<n. (f i, f (Suc i)) \\<in> R)\n\ngoal (1 subgoal):\n 1. (\\<And>S n.\n        \\<lbrakk>S 0 = s; S n = t;\n         \\<forall>i<n. (S i, S (Suc i)) \\<in> R\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  S 0 = s\n  S n = t\n  \\<forall>i<n. (S i, S (Suc i)) \\<in> R\n\ngoal (1 subgoal):\n 1. (s, t) \\<in> R\\<^sup>* \\<Longrightarrow>\n    \\<exists>ts.\n       last (s # ts) = t \\<and>\n       (\\<forall>i<length ts. ((s # ts) ! i, (s # ts) ! Suc i) \\<in> R)", "let ?ts = \"map (\\<lambda> i. S (Suc i)) [0 ..< n]\""], ["proof (state)\ngoal (1 subgoal):\n 1. (s, t) \\<in> R\\<^sup>* \\<Longrightarrow>\n    \\<exists>ts.\n       last (s # ts) = t \\<and>\n       (\\<forall>i<length ts. ((s # ts) ! i, (s # ts) ! Suc i) \\<in> R)", "show ?r"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>ts.\n       last (s # ts) = t \\<and>\n       (\\<forall>i<length ts. ((s # ts) ! i, (s # ts) ! Suc i) \\<in> R)", "proof (rule exI [of _ ?ts], intro conjI, \n      cases n, simp add: s [symmetric] t [symmetric], simp add: t [symmetric])"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<forall>i<length (map (\\<lambda>i. S (Suc i)) [0..<n]).\n       ((s # map (\\<lambda>i. S (Suc i)) [0..<n]) ! i,\n        (s # map (\\<lambda>i. S (Suc i)) [0..<n]) ! Suc i)\n       \\<in> R", "show \"\\<forall> i < length ?ts. ((s # ?ts) ! i, (s # ?ts) ! Suc i) \\<in> R\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>i<length (map (\\<lambda>i. S (Suc i)) [0..<n]).\n       ((s # map (\\<lambda>i. S (Suc i)) [0..<n]) ! i,\n        (s # map (\\<lambda>i. S (Suc i)) [0..<n]) ! Suc i)\n       \\<in> R", "proof (intro allI impI)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>i.\n       i < length (map (\\<lambda>i. S (Suc i)) [0..<n]) \\<Longrightarrow>\n       ((s # map (\\<lambda>i. S (Suc i)) [0..<n]) ! i,\n        (s # map (\\<lambda>i. S (Suc i)) [0..<n]) ! Suc i)\n       \\<in> R", "fix i"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>i.\n       i < length (map (\\<lambda>i. S (Suc i)) [0..<n]) \\<Longrightarrow>\n       ((s # map (\\<lambda>i. S (Suc i)) [0..<n]) ! i,\n        (s # map (\\<lambda>i. S (Suc i)) [0..<n]) ! Suc i)\n       \\<in> R", "assume i: \"i < length ?ts\""], ["proof (state)\nthis:\n  i < length (map (\\<lambda>i. S (Suc i)) [0..<n])\n\ngoal (1 subgoal):\n 1. \\<And>i.\n       i < length (map (\\<lambda>i. S (Suc i)) [0..<n]) \\<Longrightarrow>\n       ((s # map (\\<lambda>i. S (Suc i)) [0..<n]) ! i,\n        (s # map (\\<lambda>i. S (Suc i)) [0..<n]) ! Suc i)\n       \\<in> R", "then"], ["proof (chain)\npicking this:\n  i < length (map (\\<lambda>i. S (Suc i)) [0..<n])", "show \"((s # ?ts) ! i, (s # ?ts) ! Suc i) \\<in> R\""], ["proof (prove)\nusing this:\n  i < length (map (\\<lambda>i. S (Suc i)) [0..<n])\n\ngoal (1 subgoal):\n 1. ((s # map (\\<lambda>i. S (Suc i)) [0..<n]) ! i,\n     (s # map (\\<lambda>i. S (Suc i)) [0..<n]) ! Suc i)\n    \\<in> R", "proof (cases i, simp add: s [symmetric] steps)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>nat.\n       \\<lbrakk>i < length (map (\\<lambda>i. S (Suc i)) [0..<n]);\n        i = Suc nat\\<rbrakk>\n       \\<Longrightarrow> ((s # map (\\<lambda>i. S (Suc i)) [0..<n]) ! i,\n                          (s # map (\\<lambda>i. S (Suc i)) [0..<n]) ! Suc i)\n                         \\<in> R", "case (Suc j)"], ["proof (state)\nthis:\n  i = Suc j\n\ngoal (1 subgoal):\n 1. \\<And>nat.\n       \\<lbrakk>i < length (map (\\<lambda>i. S (Suc i)) [0..<n]);\n        i = Suc nat\\<rbrakk>\n       \\<Longrightarrow> ((s # map (\\<lambda>i. S (Suc i)) [0..<n]) ! i,\n                          (s # map (\\<lambda>i. S (Suc i)) [0..<n]) ! Suc i)\n                         \\<in> R", "with i steps"], ["proof (chain)\npicking this:\n  i < length (map (\\<lambda>i. S (Suc i)) [0..<n])\n  \\<forall>i<n. (S i, S (Suc i)) \\<in> R\n  i = Suc j", "show ?thesis"], ["proof (prove)\nusing this:\n  i < length (map (\\<lambda>i. S (Suc i)) [0..<n])\n  \\<forall>i<n. (S i, S (Suc i)) \\<in> R\n  i = Suc j\n\ngoal (1 subgoal):\n 1. ((s # map (\\<lambda>i. S (Suc i)) [0..<n]) ! i,\n     (s # map (\\<lambda>i. S (Suc i)) [0..<n]) ! Suc i)\n    \\<in> R", "by simp"], ["proof (state)\nthis:\n  ((s # map (\\<lambda>i. S (Suc i)) [0..<n]) ! i,\n   (s # map (\\<lambda>i. S (Suc i)) [0..<n]) ! Suc i)\n  \\<in> R\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  ((s # map (\\<lambda>i. S (Suc i)) [0..<n]) ! i,\n   (s # map (\\<lambda>i. S (Suc i)) [0..<n]) ! Suc i)\n  \\<in> R\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<forall>i<length (map (\\<lambda>i. S (Suc i)) [0..<n]).\n     ((s # map (\\<lambda>i. S (Suc i)) [0..<n]) ! i,\n      (s # map (\\<lambda>i. S (Suc i)) [0..<n]) ! Suc i)\n     \\<in> R\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>ts.\n     last (s # ts) = t \\<and>\n     (\\<forall>i<length ts. ((s # ts) ! i, (s # ts) ! Suc i) \\<in> R)\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma SN_reaches_NF:\n  assumes \"SN_on r {x}\"\n  shows \"\\<exists>y. (x, y) \\<in> r\\<^sup>* \\<and> y \\<in> NF r\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>y. (x, y) \\<in> r\\<^sup>* \\<and> y \\<in> NF r", "using assms"], ["proof (prove)\nusing this:\n  SN_on r {x}\n\ngoal (1 subgoal):\n 1. \\<exists>y. (x, y) \\<in> r\\<^sup>* \\<and> y \\<in> NF r", "proof (induct rule: SN_on_induct')"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>t.\n       (\\<And>u.\n           (t, u) \\<in> r \\<Longrightarrow>\n           \\<exists>y.\n              (u, y) \\<in> r\\<^sup>* \\<and> y \\<in> NF r) \\<Longrightarrow>\n       \\<exists>y. (t, y) \\<in> r\\<^sup>* \\<and> y \\<in> NF r", "case (IH x)"], ["proof (state)\nthis:\n  (x, ?u) \\<in> r \\<Longrightarrow>\n  \\<exists>y. (?u, y) \\<in> r\\<^sup>* \\<and> y \\<in> NF r\n\ngoal (1 subgoal):\n 1. \\<And>t.\n       (\\<And>u.\n           (t, u) \\<in> r \\<Longrightarrow>\n           \\<exists>y.\n              (u, y) \\<in> r\\<^sup>* \\<and> y \\<in> NF r) \\<Longrightarrow>\n       \\<exists>y. (t, y) \\<in> r\\<^sup>* \\<and> y \\<in> NF r", "show ?case"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>y. (x, y) \\<in> r\\<^sup>* \\<and> y \\<in> NF r", "proof (cases \"x \\<in> NF r\")"], ["proof (state)\ngoal (2 subgoals):\n 1. x \\<in> NF r \\<Longrightarrow>\n    \\<exists>y. (x, y) \\<in> r\\<^sup>* \\<and> y \\<in> NF r\n 2. x \\<notin> NF r \\<Longrightarrow>\n    \\<exists>y. (x, y) \\<in> r\\<^sup>* \\<and> y \\<in> NF r", "case True"], ["proof (state)\nthis:\n  x \\<in> NF r\n\ngoal (2 subgoals):\n 1. x \\<in> NF r \\<Longrightarrow>\n    \\<exists>y. (x, y) \\<in> r\\<^sup>* \\<and> y \\<in> NF r\n 2. x \\<notin> NF r \\<Longrightarrow>\n    \\<exists>y. (x, y) \\<in> r\\<^sup>* \\<and> y \\<in> NF r", "then"], ["proof (chain)\npicking this:\n  x \\<in> NF r", "show ?thesis"], ["proof (prove)\nusing this:\n  x \\<in> NF r\n\ngoal (1 subgoal):\n 1. \\<exists>y. (x, y) \\<in> r\\<^sup>* \\<and> y \\<in> NF r", "by auto"], ["proof (state)\nthis:\n  \\<exists>y. (x, y) \\<in> r\\<^sup>* \\<and> y \\<in> NF r\n\ngoal (1 subgoal):\n 1. x \\<notin> NF r \\<Longrightarrow>\n    \\<exists>y. (x, y) \\<in> r\\<^sup>* \\<and> y \\<in> NF r", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. x \\<notin> NF r \\<Longrightarrow>\n    \\<exists>y. (x, y) \\<in> r\\<^sup>* \\<and> y \\<in> NF r", "case False"], ["proof (state)\nthis:\n  x \\<notin> NF r\n\ngoal (1 subgoal):\n 1. x \\<notin> NF r \\<Longrightarrow>\n    \\<exists>y. (x, y) \\<in> r\\<^sup>* \\<and> y \\<in> NF r", "then"], ["proof (chain)\npicking this:\n  x \\<notin> NF r", "obtain y where step: \"(x, y) \\<in> r\""], ["proof (prove)\nusing this:\n  x \\<notin> NF r\n\ngoal (1 subgoal):\n 1. (\\<And>y. (x, y) \\<in> r \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  (x, y) \\<in> r\n\ngoal (1 subgoal):\n 1. x \\<notin> NF r \\<Longrightarrow>\n    \\<exists>y. (x, y) \\<in> r\\<^sup>* \\<and> y \\<in> NF r", "from IH [OF this]"], ["proof (chain)\npicking this:\n  \\<exists>ya. (y, ya) \\<in> r\\<^sup>* \\<and> ya \\<in> NF r", "obtain z where steps: \"(y, z) \\<in> r\\<^sup>*\" and NF: \"z \\<in> NF r\""], ["proof (prove)\nusing this:\n  \\<exists>ya. (y, ya) \\<in> r\\<^sup>* \\<and> ya \\<in> NF r\n\ngoal (1 subgoal):\n 1. (\\<And>z.\n        \\<lbrakk>(y, z) \\<in> r\\<^sup>*; z \\<in> NF r\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  (y, z) \\<in> r\\<^sup>*\n  z \\<in> NF r\n\ngoal (1 subgoal):\n 1. x \\<notin> NF r \\<Longrightarrow>\n    \\<exists>y. (x, y) \\<in> r\\<^sup>* \\<and> y \\<in> NF r", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>y. (x, y) \\<in> r\\<^sup>* \\<and> y \\<in> NF r", "by (intro exI, rule conjI [OF _ NF], insert step steps, auto)"], ["proof (state)\nthis:\n  \\<exists>y. (x, y) \\<in> r\\<^sup>* \\<and> y \\<in> NF r\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>y. (x, y) \\<in> r\\<^sup>* \\<and> y \\<in> NF r\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma SN_WCR_reaches_NF:\n  assumes SN: \"SN_on r {x}\" \n    and WCR: \"WCR_on r {x. SN_on r {x}}\"\n  shows \"\\<exists>! y. (x, y) \\<in> r\\<^sup>* \\<and> y \\<in> NF r\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>!y. (x, y) \\<in> r\\<^sup>* \\<and> y \\<in> NF r", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<exists>!y. (x, y) \\<in> r\\<^sup>* \\<and> y \\<in> NF r", "from SN_reaches_NF [OF SN]"], ["proof (chain)\npicking this:\n  \\<exists>y. (x, y) \\<in> r\\<^sup>* \\<and> y \\<in> NF r", "obtain y where steps: \"(x, y) \\<in> r\\<^sup>*\" and NF: \"y \\<in> NF r\""], ["proof (prove)\nusing this:\n  \\<exists>y. (x, y) \\<in> r\\<^sup>* \\<and> y \\<in> NF r\n\ngoal (1 subgoal):\n 1. (\\<And>y.\n        \\<lbrakk>(x, y) \\<in> r\\<^sup>*; y \\<in> NF r\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  (x, y) \\<in> r\\<^sup>*\n  y \\<in> NF r\n\ngoal (1 subgoal):\n 1. \\<exists>!y. (x, y) \\<in> r\\<^sup>* \\<and> y \\<in> NF r", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>!y. (x, y) \\<in> r\\<^sup>* \\<and> y \\<in> NF r", "proof(rule, rule conjI [OF steps NF])"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>ya.\n       (x, ya) \\<in> r\\<^sup>* \\<and> ya \\<in> NF r \\<Longrightarrow> ya = y", "fix z"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>ya.\n       (x, ya) \\<in> r\\<^sup>* \\<and> ya \\<in> NF r \\<Longrightarrow> ya = y", "assume steps': \"(x, z) \\<in> r\\<^sup>* \\<and> z \\<in> NF r\""], ["proof (state)\nthis:\n  (x, z) \\<in> r\\<^sup>* \\<and> z \\<in> NF r\n\ngoal (1 subgoal):\n 1. \\<And>ya.\n       (x, ya) \\<in> r\\<^sup>* \\<and> ya \\<in> NF r \\<Longrightarrow> ya = y", "from Newman_local [OF SN WCR]"], ["proof (chain)\npicking this:\n  CR_on r {x}", "have \"CR_on r {x}\""], ["proof (prove)\nusing this:\n  CR_on r {x}\n\ngoal (1 subgoal):\n 1. CR_on r {x}", "by auto"], ["proof (state)\nthis:\n  CR_on r {x}\n\ngoal (1 subgoal):\n 1. \\<And>ya.\n       (x, ya) \\<in> r\\<^sup>* \\<and> ya \\<in> NF r \\<Longrightarrow> ya = y", "from CR_onD [OF this _ steps] steps'"], ["proof (chain)\npicking this:\n  \\<lbrakk>x \\<in> {x}; (x, ?c) \\<in> r\\<^sup>*\\<rbrakk>\n  \\<Longrightarrow> (y, ?c) \\<in> r\\<^sup>\\<down>\n  (x, z) \\<in> r\\<^sup>* \\<and> z \\<in> NF r", "have \"(y, z) \\<in> r\\<^sup>\\<down>\""], ["proof (prove)\nusing this:\n  \\<lbrakk>x \\<in> {x}; (x, ?c) \\<in> r\\<^sup>*\\<rbrakk>\n  \\<Longrightarrow> (y, ?c) \\<in> r\\<^sup>\\<down>\n  (x, z) \\<in> r\\<^sup>* \\<and> z \\<in> NF r\n\ngoal (1 subgoal):\n 1. (y, z) \\<in> r\\<^sup>\\<down>", "by simp"], ["proof (state)\nthis:\n  (y, z) \\<in> r\\<^sup>\\<down>\n\ngoal (1 subgoal):\n 1. \\<And>ya.\n       (x, ya) \\<in> r\\<^sup>* \\<and> ya \\<in> NF r \\<Longrightarrow> ya = y", "from join_NF_imp_eq [OF this NF] steps'"], ["proof (chain)\npicking this:\n  z \\<in> NF r \\<Longrightarrow> y = z\n  (x, z) \\<in> r\\<^sup>* \\<and> z \\<in> NF r", "show \"z = y\""], ["proof (prove)\nusing this:\n  z \\<in> NF r \\<Longrightarrow> y = z\n  (x, z) \\<in> r\\<^sup>* \\<and> z \\<in> NF r\n\ngoal (1 subgoal):\n 1. z = y", "by simp"], ["proof (state)\nthis:\n  z = y\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>!y. (x, y) \\<in> r\\<^sup>* \\<and> y \\<in> NF r\n\ngoal:\nNo subgoals!", "qed"], ["", "definition some_NF :: \"'a rel \\<Rightarrow> 'a \\<Rightarrow> 'a\" where\n  \"some_NF r x = (SOME y. (x, y) \\<in> r\\<^sup>* \\<and> y \\<in> NF r)\""], ["", "lemma some_NF:\n  assumes SN: \"SN_on r {x}\" \n  shows \"(x, some_NF r x) \\<in> r\\<^sup>* \\<and> some_NF r x \\<in> NF r\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (x, some_NF r x) \\<in> r\\<^sup>* \\<and> some_NF r x \\<in> NF r", "using someI_ex [OF SN_reaches_NF [OF SN]]"], ["proof (prove)\nusing this:\n  (x, SOME xa. (x, xa) \\<in> r\\<^sup>* \\<and> xa \\<in> NF r)\n  \\<in> r\\<^sup>* \\<and>\n  (SOME xa. (x, xa) \\<in> r\\<^sup>* \\<and> xa \\<in> NF r) \\<in> NF r\n\ngoal (1 subgoal):\n 1. (x, some_NF r x) \\<in> r\\<^sup>* \\<and> some_NF r x \\<in> NF r", "unfolding some_NF_def"], ["proof (prove)\nusing this:\n  (x, SOME xa. (x, xa) \\<in> r\\<^sup>* \\<and> xa \\<in> NF r)\n  \\<in> r\\<^sup>* \\<and>\n  (SOME xa. (x, xa) \\<in> r\\<^sup>* \\<and> xa \\<in> NF r) \\<in> NF r\n\ngoal (1 subgoal):\n 1. (x, SOME y. (x, y) \\<in> r\\<^sup>* \\<and> y \\<in> NF r)\n    \\<in> r\\<^sup>* \\<and>\n    (SOME y. (x, y) \\<in> r\\<^sup>* \\<and> y \\<in> NF r) \\<in> NF r", "."], ["", "lemma some_NF_WCR:\n  assumes SN: \"SN_on r {x}\"\n    and WCR: \"WCR_on r {x. SN_on r {x}}\"\n    and steps: \"(x, y) \\<in> r\\<^sup>*\"\n    and NF: \"y \\<in> NF r\"\n  shows \"y = some_NF r x\""], ["proof (prove)\ngoal (1 subgoal):\n 1. y = some_NF r x", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. y = some_NF r x", "let ?p = \"\\<lambda> y. (x, y) \\<in> r\\<^sup>* \\<and> y \\<in> NF r\""], ["proof (state)\ngoal (1 subgoal):\n 1. y = some_NF r x", "from SN_WCR_reaches_NF [OF SN WCR]"], ["proof (chain)\npicking this:\n  \\<exists>!y. (x, y) \\<in> r\\<^sup>* \\<and> y \\<in> NF r", "have one: \"\\<exists>! y. ?p y\""], ["proof (prove)\nusing this:\n  \\<exists>!y. (x, y) \\<in> r\\<^sup>* \\<and> y \\<in> NF r\n\ngoal (1 subgoal):\n 1. \\<exists>!y. (x, y) \\<in> r\\<^sup>* \\<and> y \\<in> NF r", "."], ["proof (state)\nthis:\n  \\<exists>!y. (x, y) \\<in> r\\<^sup>* \\<and> y \\<in> NF r\n\ngoal (1 subgoal):\n 1. y = some_NF r x", "from steps NF"], ["proof (chain)\npicking this:\n  (x, y) \\<in> r\\<^sup>*\n  y \\<in> NF r", "have y: \"?p y\""], ["proof (prove)\nusing this:\n  (x, y) \\<in> r\\<^sup>*\n  y \\<in> NF r\n\ngoal (1 subgoal):\n 1. (x, y) \\<in> r\\<^sup>* \\<and> y \\<in> NF r", ".."], ["proof (state)\nthis:\n  (x, y) \\<in> r\\<^sup>* \\<and> y \\<in> NF r\n\ngoal (1 subgoal):\n 1. y = some_NF r x", "from some_NF [OF SN]"], ["proof (chain)\npicking this:\n  (x, some_NF r x) \\<in> r\\<^sup>* \\<and> some_NF r x \\<in> NF r", "have some: \"?p (some_NF r x)\""], ["proof (prove)\nusing this:\n  (x, some_NF r x) \\<in> r\\<^sup>* \\<and> some_NF r x \\<in> NF r\n\ngoal (1 subgoal):\n 1. (x, some_NF r x) \\<in> r\\<^sup>* \\<and> some_NF r x \\<in> NF r", "."], ["proof (state)\nthis:\n  (x, some_NF r x) \\<in> r\\<^sup>* \\<and> some_NF r x \\<in> NF r\n\ngoal (1 subgoal):\n 1. y = some_NF r x", "from one some y"], ["proof (chain)\npicking this:\n  \\<exists>!y. (x, y) \\<in> r\\<^sup>* \\<and> y \\<in> NF r\n  (x, some_NF r x) \\<in> r\\<^sup>* \\<and> some_NF r x \\<in> NF r\n  (x, y) \\<in> r\\<^sup>* \\<and> y \\<in> NF r", "show ?thesis"], ["proof (prove)\nusing this:\n  \\<exists>!y. (x, y) \\<in> r\\<^sup>* \\<and> y \\<in> NF r\n  (x, some_NF r x) \\<in> r\\<^sup>* \\<and> some_NF r x \\<in> NF r\n  (x, y) \\<in> r\\<^sup>* \\<and> y \\<in> NF r\n\ngoal (1 subgoal):\n 1. y = some_NF r x", "by auto"], ["proof (state)\nthis:\n  y = some_NF r x\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma some_NF_UNF:\n  assumes UNF: \"UNF r\"\n    and steps: \"(x, y) \\<in> r\\<^sup>*\"\n    and NF: \"y \\<in> NF r\"\n  shows \"y = some_NF r x\""], ["proof (prove)\ngoal (1 subgoal):\n 1. y = some_NF r x", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. y = some_NF r x", "let ?p = \"\\<lambda> y. (x, y) \\<in> r\\<^sup>* \\<and> y \\<in> NF r\""], ["proof (state)\ngoal (1 subgoal):\n 1. y = some_NF r x", "from steps NF"], ["proof (chain)\npicking this:\n  (x, y) \\<in> r\\<^sup>*\n  y \\<in> NF r", "have py: \"?p y\""], ["proof (prove)\nusing this:\n  (x, y) \\<in> r\\<^sup>*\n  y \\<in> NF r\n\ngoal (1 subgoal):\n 1. (x, y) \\<in> r\\<^sup>* \\<and> y \\<in> NF r", "by simp"], ["proof (state)\nthis:\n  (x, y) \\<in> r\\<^sup>* \\<and> y \\<in> NF r\n\ngoal (1 subgoal):\n 1. y = some_NF r x", "then"], ["proof (chain)\npicking this:\n  (x, y) \\<in> r\\<^sup>* \\<and> y \\<in> NF r", "have pNF: \"?p (some_NF r x)\""], ["proof (prove)\nusing this:\n  (x, y) \\<in> r\\<^sup>* \\<and> y \\<in> NF r\n\ngoal (1 subgoal):\n 1. (x, some_NF r x) \\<in> r\\<^sup>* \\<and> some_NF r x \\<in> NF r", "unfolding some_NF_def"], ["proof (prove)\nusing this:\n  (x, y) \\<in> r\\<^sup>* \\<and> y \\<in> NF r\n\ngoal (1 subgoal):\n 1. (x, SOME y. (x, y) \\<in> r\\<^sup>* \\<and> y \\<in> NF r)\n    \\<in> r\\<^sup>* \\<and>\n    (SOME y. (x, y) \\<in> r\\<^sup>* \\<and> y \\<in> NF r) \\<in> NF r", "by (rule someI)"], ["proof (state)\nthis:\n  (x, some_NF r x) \\<in> r\\<^sup>* \\<and> some_NF r x \\<in> NF r\n\ngoal (1 subgoal):\n 1. y = some_NF r x", "from py"], ["proof (chain)\npicking this:\n  (x, y) \\<in> r\\<^sup>* \\<and> y \\<in> NF r", "have y: \"(x, y) \\<in> r\\<^sup>!\""], ["proof (prove)\nusing this:\n  (x, y) \\<in> r\\<^sup>* \\<and> y \\<in> NF r\n\ngoal (1 subgoal):\n 1. (x, y) \\<in> r\\<^sup>!", "by auto"], ["proof (state)\nthis:\n  (x, y) \\<in> r\\<^sup>!\n\ngoal (1 subgoal):\n 1. y = some_NF r x", "from pNF"], ["proof (chain)\npicking this:\n  (x, some_NF r x) \\<in> r\\<^sup>* \\<and> some_NF r x \\<in> NF r", "have nf: \"(x, some_NF r x) \\<in> r\\<^sup>!\""], ["proof (prove)\nusing this:\n  (x, some_NF r x) \\<in> r\\<^sup>* \\<and> some_NF r x \\<in> NF r\n\ngoal (1 subgoal):\n 1. (x, some_NF r x) \\<in> r\\<^sup>!", "by auto"], ["proof (state)\nthis:\n  (x, some_NF r x) \\<in> r\\<^sup>!\n\ngoal (1 subgoal):\n 1. y = some_NF r x", "from UNF [unfolded UNF_on_def] y nf"], ["proof (chain)\npicking this:\n  \\<forall>a\\<in>UNIV.\n     \\<forall>b c.\n        (a, b) \\<in> r\\<^sup>! \\<and>\n        (a, c) \\<in> r\\<^sup>! \\<longrightarrow>\n        b = c\n  (x, y) \\<in> r\\<^sup>!\n  (x, some_NF r x) \\<in> r\\<^sup>!", "show ?thesis"], ["proof (prove)\nusing this:\n  \\<forall>a\\<in>UNIV.\n     \\<forall>b c.\n        (a, b) \\<in> r\\<^sup>! \\<and>\n        (a, c) \\<in> r\\<^sup>! \\<longrightarrow>\n        b = c\n  (x, y) \\<in> r\\<^sup>!\n  (x, some_NF r x) \\<in> r\\<^sup>!\n\ngoal (1 subgoal):\n 1. y = some_NF r x", "by auto"], ["proof (state)\nthis:\n  y = some_NF r x\n\ngoal:\nNo subgoals!", "qed"], ["", "definition \"the_NF A a = (THE b. (a, b) \\<in> A\\<^sup>!)\""], ["", "context\n  fixes A\n  assumes SN: \"SN A\" and CR: \"CR A\"\nbegin"], ["", "lemma the_NF: \"(a, the_NF A a) \\<in> A\\<^sup>!\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (a, the_NF A a) \\<in> A\\<^sup>!", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. (a, the_NF A a) \\<in> A\\<^sup>!", "obtain b where ab: \"(a, b) \\<in> A\\<^sup>!\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>b.\n        (a, b) \\<in> A\\<^sup>! \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "using SN"], ["proof (prove)\nusing this:\n  SN A\n\ngoal (1 subgoal):\n 1. (\\<And>b.\n        (a, b) \\<in> A\\<^sup>! \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by (meson SN_imp_WN UNIV_I WN_onE)"], ["proof (state)\nthis:\n  (a, b) \\<in> A\\<^sup>!\n\ngoal (1 subgoal):\n 1. (a, the_NF A a) \\<in> A\\<^sup>!", "moreover"], ["proof (state)\nthis:\n  (a, b) \\<in> A\\<^sup>!\n\ngoal (1 subgoal):\n 1. (a, the_NF A a) \\<in> A\\<^sup>!", "have \"(a, c) \\<in> A\\<^sup>! \\<Longrightarrow> c = b\" for c"], ["proof (prove)\ngoal (1 subgoal):\n 1. (a, c) \\<in> A\\<^sup>! \\<Longrightarrow> c = b", "using CR and ab"], ["proof (prove)\nusing this:\n  CR A\n  (a, b) \\<in> A\\<^sup>!\n\ngoal (1 subgoal):\n 1. (a, c) \\<in> A\\<^sup>! \\<Longrightarrow> c = b", "by (meson CR_divergence_imp_join join_NF_imp_eq normalizability_E)"], ["proof (state)\nthis:\n  (a, ?c) \\<in> A\\<^sup>! \\<Longrightarrow> ?c = b\n\ngoal (1 subgoal):\n 1. (a, the_NF A a) \\<in> A\\<^sup>!", "ultimately"], ["proof (chain)\npicking this:\n  (a, b) \\<in> A\\<^sup>!\n  (a, ?c) \\<in> A\\<^sup>! \\<Longrightarrow> ?c = b", "have \"\\<exists>!b. (a, b) \\<in> A\\<^sup>!\""], ["proof (prove)\nusing this:\n  (a, b) \\<in> A\\<^sup>!\n  (a, ?c) \\<in> A\\<^sup>! \\<Longrightarrow> ?c = b\n\ngoal (1 subgoal):\n 1. \\<exists>!b. (a, b) \\<in> A\\<^sup>!", "by blast"], ["proof (state)\nthis:\n  \\<exists>!b. (a, b) \\<in> A\\<^sup>!\n\ngoal (1 subgoal):\n 1. (a, the_NF A a) \\<in> A\\<^sup>!", "then"], ["proof (chain)\npicking this:\n  \\<exists>!b. (a, b) \\<in> A\\<^sup>!", "show ?thesis"], ["proof (prove)\nusing this:\n  \\<exists>!b. (a, b) \\<in> A\\<^sup>!\n\ngoal (1 subgoal):\n 1. (a, the_NF A a) \\<in> A\\<^sup>!", "unfolding the_NF_def"], ["proof (prove)\nusing this:\n  \\<exists>!b. (a, b) \\<in> A\\<^sup>!\n\ngoal (1 subgoal):\n 1. (a, THE b. (a, b) \\<in> A\\<^sup>!) \\<in> A\\<^sup>!", "by (rule theI')"], ["proof (state)\nthis:\n  (a, the_NF A a) \\<in> A\\<^sup>!\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma the_NF_NF: \"the_NF A a \\<in> NF A\""], ["proof (prove)\ngoal (1 subgoal):\n 1. the_NF A a \\<in> NF A", "using the_NF"], ["proof (prove)\nusing this:\n  (?a, the_NF A ?a) \\<in> A\\<^sup>!\n\ngoal (1 subgoal):\n 1. the_NF A a \\<in> NF A", "by (auto simp: normalizability_def)"], ["", "lemma the_NF_step:\n  assumes \"(a, b) \\<in> A\"\n  shows \"the_NF A a = the_NF A b\""], ["proof (prove)\ngoal (1 subgoal):\n 1. the_NF A a = the_NF A b", "using the_NF and assms"], ["proof (prove)\nusing this:\n  (?a, the_NF A ?a) \\<in> A\\<^sup>!\n  (a, b) \\<in> A\n\ngoal (1 subgoal):\n 1. the_NF A a = the_NF A b", "by (meson CR SN SN_imp_WN conversionI' r_into_rtrancl semi_complete_imp_conversionIff_same_NF semi_complete_onI)"], ["", "lemma the_NF_steps:\n  assumes \"(a, b) \\<in> A\\<^sup>*\"\n  shows \"the_NF A a = the_NF A b\""], ["proof (prove)\ngoal (1 subgoal):\n 1. the_NF A a = the_NF A b", "using assms"], ["proof (prove)\nusing this:\n  (a, b) \\<in> A\\<^sup>*\n\ngoal (1 subgoal):\n 1. the_NF A a = the_NF A b", "by (induct) (auto dest: the_NF_step)"], ["", "lemma the_NF_conv:\n  assumes \"(a, b) \\<in> A\\<^sup>\\<leftrightarrow>\\<^sup>*\"\n  shows \"the_NF A a = the_NF A b\""], ["proof (prove)\ngoal (1 subgoal):\n 1. the_NF A a = the_NF A b", "using assms"], ["proof (prove)\nusing this:\n  (a, b) \\<in> A\\<^sup>\\<leftrightarrow>\\<^sup>*\n\ngoal (1 subgoal):\n 1. the_NF A a = the_NF A b", "by (meson CR WN_on_def the_NF semi_complete_imp_conversionIff_same_NF semi_complete_onI)"], ["", "end"], ["", "definition weak_diamond :: \"'a rel \\<Rightarrow> bool\" (\"w\\<diamond>\") where\n  \"w\\<diamond> r \\<longleftrightarrow> (r\\<inverse> O r) - Id \\<subseteq> (r O r\\<inverse>)\""], ["", "lemma weak_diamond_imp_CR:\n  assumes wd: \"w\\<diamond> r\"\n  shows \"CR r\""], ["proof (prove)\ngoal (1 subgoal):\n 1. CR r", "proof (rule semi_confluence_imp_CR, rule)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x y.\n       (x, y) \\<in> r\\<inverse> O r\\<^sup>* \\<Longrightarrow>\n       (x, y) \\<in> r\\<^sup>\\<down>", "fix x y"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x y.\n       (x, y) \\<in> r\\<inverse> O r\\<^sup>* \\<Longrightarrow>\n       (x, y) \\<in> r\\<^sup>\\<down>", "assume \"(x, y) \\<in> r\\<inverse> O r\\<^sup>*\""], ["proof (state)\nthis:\n  (x, y) \\<in> r\\<inverse> O r\\<^sup>*\n\ngoal (1 subgoal):\n 1. \\<And>x y.\n       (x, y) \\<in> r\\<inverse> O r\\<^sup>* \\<Longrightarrow>\n       (x, y) \\<in> r\\<^sup>\\<down>", "then"], ["proof (chain)\npicking this:\n  (x, y) \\<in> r\\<inverse> O r\\<^sup>*", "obtain z where step: \"(z, x) \\<in> r\" and steps: \"(z, y) \\<in> r\\<^sup>*\""], ["proof (prove)\nusing this:\n  (x, y) \\<in> r\\<inverse> O r\\<^sup>*\n\ngoal (1 subgoal):\n 1. (\\<And>z.\n        \\<lbrakk>(z, x) \\<in> r; (z, y) \\<in> r\\<^sup>*\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  (z, x) \\<in> r\n  (z, y) \\<in> r\\<^sup>*\n\ngoal (1 subgoal):\n 1. \\<And>x y.\n       (x, y) \\<in> r\\<inverse> O r\\<^sup>* \\<Longrightarrow>\n       (x, y) \\<in> r\\<^sup>\\<down>", "from steps"], ["proof (chain)\npicking this:\n  (z, y) \\<in> r\\<^sup>*", "have \"\\<exists> u. (x, u) \\<in> r\\<^sup>* \\<and> (y, u) \\<in> r\\<^sup>=\""], ["proof (prove)\nusing this:\n  (z, y) \\<in> r\\<^sup>*\n\ngoal (1 subgoal):\n 1. \\<exists>u. (x, u) \\<in> r\\<^sup>* \\<and> (y, u) \\<in> r\\<^sup>=", "proof (induct)"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<exists>u. (x, u) \\<in> r\\<^sup>* \\<and> (z, u) \\<in> r\\<^sup>=\n 2. \\<And>y za.\n       \\<lbrakk>(z, y) \\<in> r\\<^sup>*; (y, za) \\<in> r;\n        \\<exists>u.\n           (x, u) \\<in> r\\<^sup>* \\<and> (y, u) \\<in> r\\<^sup>=\\<rbrakk>\n       \\<Longrightarrow> \\<exists>u.\n                            (x, u) \\<in> r\\<^sup>* \\<and>\n                            (za, u) \\<in> r\\<^sup>=", "case base"], ["proof (state)\nthis:\n  \n\ngoal (2 subgoals):\n 1. \\<exists>u. (x, u) \\<in> r\\<^sup>* \\<and> (z, u) \\<in> r\\<^sup>=\n 2. \\<And>y za.\n       \\<lbrakk>(z, y) \\<in> r\\<^sup>*; (y, za) \\<in> r;\n        \\<exists>u.\n           (x, u) \\<in> r\\<^sup>* \\<and> (y, u) \\<in> r\\<^sup>=\\<rbrakk>\n       \\<Longrightarrow> \\<exists>u.\n                            (x, u) \\<in> r\\<^sup>* \\<and>\n                            (za, u) \\<in> r\\<^sup>=", "show ?case"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>u. (x, u) \\<in> r\\<^sup>* \\<and> (z, u) \\<in> r\\<^sup>=", "by (rule exI [of _ x], insert step, auto)"], ["proof (state)\nthis:\n  \\<exists>u. (x, u) \\<in> r\\<^sup>* \\<and> (z, u) \\<in> r\\<^sup>=\n\ngoal (1 subgoal):\n 1. \\<And>y za.\n       \\<lbrakk>(z, y) \\<in> r\\<^sup>*; (y, za) \\<in> r;\n        \\<exists>u.\n           (x, u) \\<in> r\\<^sup>* \\<and> (y, u) \\<in> r\\<^sup>=\\<rbrakk>\n       \\<Longrightarrow> \\<exists>u.\n                            (x, u) \\<in> r\\<^sup>* \\<and>\n                            (za, u) \\<in> r\\<^sup>=", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>y za.\n       \\<lbrakk>(z, y) \\<in> r\\<^sup>*; (y, za) \\<in> r;\n        \\<exists>u.\n           (x, u) \\<in> r\\<^sup>* \\<and> (y, u) \\<in> r\\<^sup>=\\<rbrakk>\n       \\<Longrightarrow> \\<exists>u.\n                            (x, u) \\<in> r\\<^sup>* \\<and>\n                            (za, u) \\<in> r\\<^sup>=", "case (step y' y)"], ["proof (state)\nthis:\n  (z, y') \\<in> r\\<^sup>*\n  (y', y) \\<in> r\n  \\<exists>u. (x, u) \\<in> r\\<^sup>* \\<and> (y', u) \\<in> r\\<^sup>=\n\ngoal (1 subgoal):\n 1. \\<And>y za.\n       \\<lbrakk>(z, y) \\<in> r\\<^sup>*; (y, za) \\<in> r;\n        \\<exists>u.\n           (x, u) \\<in> r\\<^sup>* \\<and> (y, u) \\<in> r\\<^sup>=\\<rbrakk>\n       \\<Longrightarrow> \\<exists>u.\n                            (x, u) \\<in> r\\<^sup>* \\<and>\n                            (za, u) \\<in> r\\<^sup>=", "from step(3)"], ["proof (chain)\npicking this:\n  \\<exists>u. (x, u) \\<in> r\\<^sup>* \\<and> (y', u) \\<in> r\\<^sup>=", "obtain u where xu: \"(x, u) \\<in> r\\<^sup>*\" and y'u: \"(y', u) \\<in> r\\<^sup>=\""], ["proof (prove)\nusing this:\n  \\<exists>u. (x, u) \\<in> r\\<^sup>* \\<and> (y', u) \\<in> r\\<^sup>=\n\ngoal (1 subgoal):\n 1. (\\<And>u.\n        \\<lbrakk>(x, u) \\<in> r\\<^sup>*; (y', u) \\<in> r\\<^sup>=\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  (x, u) \\<in> r\\<^sup>*\n  (y', u) \\<in> r\\<^sup>=\n\ngoal (1 subgoal):\n 1. \\<And>y za.\n       \\<lbrakk>(z, y) \\<in> r\\<^sup>*; (y, za) \\<in> r;\n        \\<exists>u.\n           (x, u) \\<in> r\\<^sup>* \\<and> (y, u) \\<in> r\\<^sup>=\\<rbrakk>\n       \\<Longrightarrow> \\<exists>u.\n                            (x, u) \\<in> r\\<^sup>* \\<and>\n                            (za, u) \\<in> r\\<^sup>=", "from y'u"], ["proof (chain)\npicking this:\n  (y', u) \\<in> r\\<^sup>=", "have \"(y', u) \\<in> r \\<or> y' = u\""], ["proof (prove)\nusing this:\n  (y', u) \\<in> r\\<^sup>=\n\ngoal (1 subgoal):\n 1. (y', u) \\<in> r \\<or> y' = u", "by auto"], ["proof (state)\nthis:\n  (y', u) \\<in> r \\<or> y' = u\n\ngoal (1 subgoal):\n 1. \\<And>y za.\n       \\<lbrakk>(z, y) \\<in> r\\<^sup>*; (y, za) \\<in> r;\n        \\<exists>u.\n           (x, u) \\<in> r\\<^sup>* \\<and> (y, u) \\<in> r\\<^sup>=\\<rbrakk>\n       \\<Longrightarrow> \\<exists>u.\n                            (x, u) \\<in> r\\<^sup>* \\<and>\n                            (za, u) \\<in> r\\<^sup>=", "then"], ["proof (chain)\npicking this:\n  (y', u) \\<in> r \\<or> y' = u", "show ?case"], ["proof (prove)\nusing this:\n  (y', u) \\<in> r \\<or> y' = u\n\ngoal (1 subgoal):\n 1. \\<exists>u. (x, u) \\<in> r\\<^sup>* \\<and> (y, u) \\<in> r\\<^sup>=", "proof"], ["proof (state)\ngoal (2 subgoals):\n 1. (y', u) \\<in> r \\<Longrightarrow>\n    \\<exists>u. (x, u) \\<in> r\\<^sup>* \\<and> (y, u) \\<in> r\\<^sup>=\n 2. y' = u \\<Longrightarrow>\n    \\<exists>u. (x, u) \\<in> r\\<^sup>* \\<and> (y, u) \\<in> r\\<^sup>=", "assume y'u: \"y' = u\""], ["proof (state)\nthis:\n  y' = u\n\ngoal (2 subgoals):\n 1. (y', u) \\<in> r \\<Longrightarrow>\n    \\<exists>u. (x, u) \\<in> r\\<^sup>* \\<and> (y, u) \\<in> r\\<^sup>=\n 2. y' = u \\<Longrightarrow>\n    \\<exists>u. (x, u) \\<in> r\\<^sup>* \\<and> (y, u) \\<in> r\\<^sup>=", "with xu step(2)"], ["proof (chain)\npicking this:\n  (x, u) \\<in> r\\<^sup>*\n  (y', y) \\<in> r\n  y' = u", "have xy: \"(x, y) \\<in> r\\<^sup>*\""], ["proof (prove)\nusing this:\n  (x, u) \\<in> r\\<^sup>*\n  (y', y) \\<in> r\n  y' = u\n\ngoal (1 subgoal):\n 1. (x, y) \\<in> r\\<^sup>*", "by auto"], ["proof (state)\nthis:\n  (x, y) \\<in> r\\<^sup>*\n\ngoal (2 subgoals):\n 1. (y', u) \\<in> r \\<Longrightarrow>\n    \\<exists>u. (x, u) \\<in> r\\<^sup>* \\<and> (y, u) \\<in> r\\<^sup>=\n 2. y' = u \\<Longrightarrow>\n    \\<exists>u. (x, u) \\<in> r\\<^sup>* \\<and> (y, u) \\<in> r\\<^sup>=", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>u. (x, u) \\<in> r\\<^sup>* \\<and> (y, u) \\<in> r\\<^sup>=", "by (intro exI conjI, rule xy, simp)"], ["proof (state)\nthis:\n  \\<exists>u. (x, u) \\<in> r\\<^sup>* \\<and> (y, u) \\<in> r\\<^sup>=\n\ngoal (1 subgoal):\n 1. (y', u) \\<in> r \\<Longrightarrow>\n    \\<exists>u. (x, u) \\<in> r\\<^sup>* \\<and> (y, u) \\<in> r\\<^sup>=", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. (y', u) \\<in> r \\<Longrightarrow>\n    \\<exists>u. (x, u) \\<in> r\\<^sup>* \\<and> (y, u) \\<in> r\\<^sup>=", "assume \"(y', u) \\<in> r\""], ["proof (state)\nthis:\n  (y', u) \\<in> r\n\ngoal (1 subgoal):\n 1. (y', u) \\<in> r \\<Longrightarrow>\n    \\<exists>u. (x, u) \\<in> r\\<^sup>* \\<and> (y, u) \\<in> r\\<^sup>=", "with step(2)"], ["proof (chain)\npicking this:\n  (y', y) \\<in> r\n  (y', u) \\<in> r", "have uy: \"(u, y) \\<in> r\\<inverse> O r\""], ["proof (prove)\nusing this:\n  (y', y) \\<in> r\n  (y', u) \\<in> r\n\ngoal (1 subgoal):\n 1. (u, y) \\<in> r\\<inverse> O r", "by auto"], ["proof (state)\nthis:\n  (u, y) \\<in> r\\<inverse> O r\n\ngoal (1 subgoal):\n 1. (y', u) \\<in> r \\<Longrightarrow>\n    \\<exists>u. (x, u) \\<in> r\\<^sup>* \\<and> (y, u) \\<in> r\\<^sup>=", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>u. (x, u) \\<in> r\\<^sup>* \\<and> (y, u) \\<in> r\\<^sup>=", "proof (cases \"u = y\")"], ["proof (state)\ngoal (2 subgoals):\n 1. u = y \\<Longrightarrow>\n    \\<exists>u. (x, u) \\<in> r\\<^sup>* \\<and> (y, u) \\<in> r\\<^sup>=\n 2. u \\<noteq> y \\<Longrightarrow>\n    \\<exists>u. (x, u) \\<in> r\\<^sup>* \\<and> (y, u) \\<in> r\\<^sup>=", "case True"], ["proof (state)\nthis:\n  u = y\n\ngoal (2 subgoals):\n 1. u = y \\<Longrightarrow>\n    \\<exists>u. (x, u) \\<in> r\\<^sup>* \\<and> (y, u) \\<in> r\\<^sup>=\n 2. u \\<noteq> y \\<Longrightarrow>\n    \\<exists>u. (x, u) \\<in> r\\<^sup>* \\<and> (y, u) \\<in> r\\<^sup>=", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>u. (x, u) \\<in> r\\<^sup>* \\<and> (y, u) \\<in> r\\<^sup>=", "by (intro exI conjI, rule xu, unfold True, simp)"], ["proof (state)\nthis:\n  \\<exists>u. (x, u) \\<in> r\\<^sup>* \\<and> (y, u) \\<in> r\\<^sup>=\n\ngoal (1 subgoal):\n 1. u \\<noteq> y \\<Longrightarrow>\n    \\<exists>u. (x, u) \\<in> r\\<^sup>* \\<and> (y, u) \\<in> r\\<^sup>=", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. u \\<noteq> y \\<Longrightarrow>\n    \\<exists>u. (x, u) \\<in> r\\<^sup>* \\<and> (y, u) \\<in> r\\<^sup>=", "case False"], ["proof (state)\nthis:\n  u \\<noteq> y\n\ngoal (1 subgoal):\n 1. u \\<noteq> y \\<Longrightarrow>\n    \\<exists>u. (x, u) \\<in> r\\<^sup>* \\<and> (y, u) \\<in> r\\<^sup>=", "with uy\n          wd [unfolded weak_diamond_def]"], ["proof (chain)\npicking this:\n  (u, y) \\<in> r\\<inverse> O r\n  r\\<inverse> O r - Id \\<subseteq> r O r\\<inverse>\n  u \\<noteq> y", "obtain u' where uu': \"(u, u') \\<in> r\"\n          and yu': \"(y, u') \\<in> r\""], ["proof (prove)\nusing this:\n  (u, y) \\<in> r\\<inverse> O r\n  r\\<inverse> O r - Id \\<subseteq> r O r\\<inverse>\n  u \\<noteq> y\n\ngoal (1 subgoal):\n 1. (\\<And>u'.\n        \\<lbrakk>(u, u') \\<in> r; (y, u') \\<in> r\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  (u, u') \\<in> r\n  (y, u') \\<in> r\n\ngoal (1 subgoal):\n 1. u \\<noteq> y \\<Longrightarrow>\n    \\<exists>u. (x, u) \\<in> r\\<^sup>* \\<and> (y, u) \\<in> r\\<^sup>=", "from xu uu'"], ["proof (chain)\npicking this:\n  (x, u) \\<in> r\\<^sup>*\n  (u, u') \\<in> r", "have xu: \"(x, u') \\<in> r\\<^sup>*\""], ["proof (prove)\nusing this:\n  (x, u) \\<in> r\\<^sup>*\n  (u, u') \\<in> r\n\ngoal (1 subgoal):\n 1. (x, u') \\<in> r\\<^sup>*", "by auto"], ["proof (state)\nthis:\n  (x, u') \\<in> r\\<^sup>*\n\ngoal (1 subgoal):\n 1. u \\<noteq> y \\<Longrightarrow>\n    \\<exists>u. (x, u) \\<in> r\\<^sup>* \\<and> (y, u) \\<in> r\\<^sup>=", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>u. (x, u) \\<in> r\\<^sup>* \\<and> (y, u) \\<in> r\\<^sup>=", "by (intro exI conjI, rule xu, insert yu', auto)"], ["proof (state)\nthis:\n  \\<exists>u. (x, u) \\<in> r\\<^sup>* \\<and> (y, u) \\<in> r\\<^sup>=\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>u. (x, u) \\<in> r\\<^sup>* \\<and> (y, u) \\<in> r\\<^sup>=\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>u. (x, u) \\<in> r\\<^sup>* \\<and> (y, u) \\<in> r\\<^sup>=\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>u. (x, u) \\<in> r\\<^sup>* \\<and> (y, u) \\<in> r\\<^sup>=\n\ngoal (1 subgoal):\n 1. \\<And>x y.\n       (x, y) \\<in> r\\<inverse> O r\\<^sup>* \\<Longrightarrow>\n       (x, y) \\<in> r\\<^sup>\\<down>", "then"], ["proof (chain)\npicking this:\n  \\<exists>u. (x, u) \\<in> r\\<^sup>* \\<and> (y, u) \\<in> r\\<^sup>=", "show \"(x, y) \\<in> r\\<^sup>\\<down>\""], ["proof (prove)\nusing this:\n  \\<exists>u. (x, u) \\<in> r\\<^sup>* \\<and> (y, u) \\<in> r\\<^sup>=\n\ngoal (1 subgoal):\n 1. (x, y) \\<in> r\\<^sup>\\<down>", "by auto"], ["proof (state)\nthis:\n  (x, y) \\<in> r\\<^sup>\\<down>\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma steps_imp_not_SN_on:\n  fixes t :: \"'a \\<Rightarrow> 'b\"\n    and R :: \"'b rel\"\n  assumes steps: \"\\<And> x. (t x, t (f x)) \\<in> R\"\n  shows \"\\<not> SN_on R {t x}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<not> SN_on R {t x}", "proof"], ["proof (state)\ngoal (1 subgoal):\n 1. SN_on R {t x} \\<Longrightarrow> False", "let ?U = \"range t\""], ["proof (state)\ngoal (1 subgoal):\n 1. SN_on R {t x} \\<Longrightarrow> False", "assume \"SN_on R {t x}\""], ["proof (state)\nthis:\n  SN_on R {t x}\n\ngoal (1 subgoal):\n 1. SN_on R {t x} \\<Longrightarrow> False", "from SN_on_imp_on_minimal [OF this, rule_format, of ?U]"], ["proof (chain)\npicking this:\n  t x \\<in> range t \\<Longrightarrow>\n  \\<exists>z\\<in>range t.\n     \\<forall>y. (z, y) \\<in> R \\<longrightarrow> y \\<notin> range t", "obtain tz where tz: \"tz \\<in> range t\" and min: \"\\<And> y. (tz, y) \\<in> R \\<Longrightarrow> y \\<notin> range t\""], ["proof (prove)\nusing this:\n  t x \\<in> range t \\<Longrightarrow>\n  \\<exists>z\\<in>range t.\n     \\<forall>y. (z, y) \\<in> R \\<longrightarrow> y \\<notin> range t\n\ngoal (1 subgoal):\n 1. (\\<And>tz.\n        \\<lbrakk>tz \\<in> range t;\n         \\<And>y.\n            (tz, y) \\<in> R \\<Longrightarrow> y \\<notin> range t\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  tz \\<in> range t\n  (tz, ?y) \\<in> R \\<Longrightarrow> ?y \\<notin> range t\n\ngoal (1 subgoal):\n 1. SN_on R {t x} \\<Longrightarrow> False", "from tz"], ["proof (chain)\npicking this:\n  tz \\<in> range t", "obtain z where tz: \"tz = t z\""], ["proof (prove)\nusing this:\n  tz \\<in> range t\n\ngoal (1 subgoal):\n 1. (\\<And>z. tz = t z \\<Longrightarrow> thesis) \\<Longrightarrow> thesis", "by auto"], ["proof (state)\nthis:\n  tz = t z\n\ngoal (1 subgoal):\n 1. SN_on R {t x} \\<Longrightarrow> False", "from steps [of z] min [of \"t (f z)\"]"], ["proof (chain)\npicking this:\n  (t z, t (f z)) \\<in> R\n  (tz, t (f z)) \\<in> R \\<Longrightarrow> t (f z) \\<notin> range t", "show False"], ["proof (prove)\nusing this:\n  (t z, t (f z)) \\<in> R\n  (tz, t (f z)) \\<in> R \\<Longrightarrow> t (f z) \\<notin> range t\n\ngoal (1 subgoal):\n 1. False", "unfolding tz"], ["proof (prove)\nusing this:\n  (t z, t (f z)) \\<in> R\n  (t z, t (f z)) \\<in> R \\<Longrightarrow> t (f z) \\<notin> range t\n\ngoal (1 subgoal):\n 1. False", "by auto"], ["proof (state)\nthis:\n  False\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma steps_imp_not_SN:\n  fixes t :: \"'a \\<Rightarrow> 'b\"\n    and R :: \"'b rel\"\n  assumes steps: \"\\<And> x. (t x, t (f x)) \\<in> R\"\n  shows \"\\<not> SN R\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<not> SN R", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<not> SN R", "from steps_imp_not_SN_on [of t f R, OF steps]"], ["proof (chain)\npicking this:\n  \\<not> SN_on R {t ?x}", "show ?thesis"], ["proof (prove)\nusing this:\n  \\<not> SN_on R {t ?x}\n\ngoal (1 subgoal):\n 1. \\<not> SN R", "unfolding SN_def"], ["proof (prove)\nusing this:\n  \\<not> SN_on R {t ?x}\n\ngoal (1 subgoal):\n 1. \\<not> (\\<forall>x. SN_on R {x})", "by blast"], ["proof (state)\nthis:\n  \\<not> SN R\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma steps_map:\n  assumes fg: \"\\<And>t u R . P t \\<Longrightarrow> Q R \\<Longrightarrow> (t, u) \\<in> R \\<Longrightarrow> P u \\<and> (f t, f u) \\<in> g R\"\n  and t: \"P t\"\n  and R: \"Q R\"\n  and S: \"Q S\"\n  shows \"((t, u) \\<in> R\\<^sup>* \\<longrightarrow> (f t, f u) \\<in> (g R)\\<^sup>*)\n    \\<and> ((t, u) \\<in> R\\<^sup>* O S O R\\<^sup>* \\<longrightarrow> (f t, f u) \\<in> (g R)\\<^sup>* O (g S) O (g R)\\<^sup>*)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. ((t, u) \\<in> R\\<^sup>* \\<longrightarrow>\n     (f t, f u) \\<in> (g R)\\<^sup>*) \\<and>\n    ((t, u) \\<in> R\\<^sup>* O S O R\\<^sup>* \\<longrightarrow>\n     (f t, f u) \\<in> (g R)\\<^sup>* O g S O (g R)\\<^sup>*)", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. ((t, u) \\<in> R\\<^sup>* \\<longrightarrow>\n     (f t, f u) \\<in> (g R)\\<^sup>*) \\<and>\n    ((t, u) \\<in> R\\<^sup>* O S O R\\<^sup>* \\<longrightarrow>\n     (f t, f u) \\<in> (g R)\\<^sup>* O g S O (g R)\\<^sup>*)", "{"], ["proof (state)\ngoal (1 subgoal):\n 1. ((t, u) \\<in> R\\<^sup>* \\<longrightarrow>\n     (f t, f u) \\<in> (g R)\\<^sup>*) \\<and>\n    ((t, u) \\<in> R\\<^sup>* O S O R\\<^sup>* \\<longrightarrow>\n     (f t, f u) \\<in> (g R)\\<^sup>* O g S O (g R)\\<^sup>*)", "fix t u"], ["proof (state)\ngoal (1 subgoal):\n 1. ((t, u) \\<in> R\\<^sup>* \\<longrightarrow>\n     (f t, f u) \\<in> (g R)\\<^sup>*) \\<and>\n    ((t, u) \\<in> R\\<^sup>* O S O R\\<^sup>* \\<longrightarrow>\n     (f t, f u) \\<in> (g R)\\<^sup>* O g S O (g R)\\<^sup>*)", "assume \"(t, u) \\<in> R\\<^sup>*\" and \"P t\""], ["proof (state)\nthis:\n  (t, u) \\<in> R\\<^sup>*\n  P t\n\ngoal (1 subgoal):\n 1. ((t, u) \\<in> R\\<^sup>* \\<longrightarrow>\n     (f t, f u) \\<in> (g R)\\<^sup>*) \\<and>\n    ((t, u) \\<in> R\\<^sup>* O S O R\\<^sup>* \\<longrightarrow>\n     (f t, f u) \\<in> (g R)\\<^sup>* O g S O (g R)\\<^sup>*)", "then"], ["proof (chain)\npicking this:\n  (t, u) \\<in> R\\<^sup>*\n  P t", "have \"P u \\<and> (f t, f u) \\<in> (g R)\\<^sup>*\""], ["proof (prove)\nusing this:\n  (t, u) \\<in> R\\<^sup>*\n  P t\n\ngoal (1 subgoal):\n 1. P u \\<and> (f t, f u) \\<in> (g R)\\<^sup>*", "proof (induct)"], ["proof (state)\ngoal (2 subgoals):\n 1. P t \\<Longrightarrow> P t \\<and> (f t, f t) \\<in> (g R)\\<^sup>*\n 2. \\<And>y z.\n       \\<lbrakk>(t, y) \\<in> R\\<^sup>*; (y, z) \\<in> R;\n        P t \\<Longrightarrow> P y \\<and> (f t, f y) \\<in> (g R)\\<^sup>*;\n        P t\\<rbrakk>\n       \\<Longrightarrow> P z \\<and> (f t, f z) \\<in> (g R)\\<^sup>*", "case (step u v)"], ["proof (state)\nthis:\n  (t, u) \\<in> R\\<^sup>*\n  (u, v) \\<in> R\n  P t \\<Longrightarrow> P u \\<and> (f t, f u) \\<in> (g R)\\<^sup>*\n  P t\n\ngoal (2 subgoals):\n 1. P t \\<Longrightarrow> P t \\<and> (f t, f t) \\<in> (g R)\\<^sup>*\n 2. \\<And>y z.\n       \\<lbrakk>(t, y) \\<in> R\\<^sup>*; (y, z) \\<in> R;\n        P t \\<Longrightarrow> P y \\<and> (f t, f y) \\<in> (g R)\\<^sup>*;\n        P t\\<rbrakk>\n       \\<Longrightarrow> P z \\<and> (f t, f z) \\<in> (g R)\\<^sup>*", "from step(3)[OF step(4)]"], ["proof (chain)\npicking this:\n  P u \\<and> (f t, f u) \\<in> (g R)\\<^sup>*", "have Pu: \"P u\" and steps: \"(f t, f u) \\<in> (g R)\\<^sup>*\""], ["proof (prove)\nusing this:\n  P u \\<and> (f t, f u) \\<in> (g R)\\<^sup>*\n\ngoal (1 subgoal):\n 1. P u &&& (f t, f u) \\<in> (g R)\\<^sup>*", "by auto"], ["proof (state)\nthis:\n  P u\n  (f t, f u) \\<in> (g R)\\<^sup>*\n\ngoal (2 subgoals):\n 1. P t \\<Longrightarrow> P t \\<and> (f t, f t) \\<in> (g R)\\<^sup>*\n 2. \\<And>y z.\n       \\<lbrakk>(t, y) \\<in> R\\<^sup>*; (y, z) \\<in> R;\n        P t \\<Longrightarrow> P y \\<and> (f t, f y) \\<in> (g R)\\<^sup>*;\n        P t\\<rbrakk>\n       \\<Longrightarrow> P z \\<and> (f t, f z) \\<in> (g R)\\<^sup>*", "from fg [OF Pu R step(2)]"], ["proof (chain)\npicking this:\n  P v \\<and> (f u, f v) \\<in> g R", "have Pv: \"P v\" and step: \"(f u, f v) \\<in> g R\""], ["proof (prove)\nusing this:\n  P v \\<and> (f u, f v) \\<in> g R\n\ngoal (1 subgoal):\n 1. P v &&& (f u, f v) \\<in> g R", "by auto"], ["proof (state)\nthis:\n  P v\n  (f u, f v) \\<in> g R\n\ngoal (2 subgoals):\n 1. P t \\<Longrightarrow> P t \\<and> (f t, f t) \\<in> (g R)\\<^sup>*\n 2. \\<And>y z.\n       \\<lbrakk>(t, y) \\<in> R\\<^sup>*; (y, z) \\<in> R;\n        P t \\<Longrightarrow> P y \\<and> (f t, f y) \\<in> (g R)\\<^sup>*;\n        P t\\<rbrakk>\n       \\<Longrightarrow> P z \\<and> (f t, f z) \\<in> (g R)\\<^sup>*", "with steps"], ["proof (chain)\npicking this:\n  (f t, f u) \\<in> (g R)\\<^sup>*\n  P v\n  (f u, f v) \\<in> g R", "have \"(f t, f v) \\<in> (g R)\\<^sup>*\""], ["proof (prove)\nusing this:\n  (f t, f u) \\<in> (g R)\\<^sup>*\n  P v\n  (f u, f v) \\<in> g R\n\ngoal (1 subgoal):\n 1. (f t, f v) \\<in> (g R)\\<^sup>*", "by auto"], ["proof (state)\nthis:\n  (f t, f v) \\<in> (g R)\\<^sup>*\n\ngoal (2 subgoals):\n 1. P t \\<Longrightarrow> P t \\<and> (f t, f t) \\<in> (g R)\\<^sup>*\n 2. \\<And>y z.\n       \\<lbrakk>(t, y) \\<in> R\\<^sup>*; (y, z) \\<in> R;\n        P t \\<Longrightarrow> P y \\<and> (f t, f y) \\<in> (g R)\\<^sup>*;\n        P t\\<rbrakk>\n       \\<Longrightarrow> P z \\<and> (f t, f z) \\<in> (g R)\\<^sup>*", "with Pv"], ["proof (chain)\npicking this:\n  P v\n  (f t, f v) \\<in> (g R)\\<^sup>*", "show ?case"], ["proof (prove)\nusing this:\n  P v\n  (f t, f v) \\<in> (g R)\\<^sup>*\n\ngoal (1 subgoal):\n 1. P v \\<and> (f t, f v) \\<in> (g R)\\<^sup>*", "by simp"], ["proof (state)\nthis:\n  P v \\<and> (f t, f v) \\<in> (g R)\\<^sup>*\n\ngoal (1 subgoal):\n 1. P t \\<Longrightarrow> P t \\<and> (f t, f t) \\<in> (g R)\\<^sup>*", "qed simp"], ["proof (state)\nthis:\n  P u \\<and> (f t, f u) \\<in> (g R)\\<^sup>*\n\ngoal (1 subgoal):\n 1. ((t, u) \\<in> R\\<^sup>* \\<longrightarrow>\n     (f t, f u) \\<in> (g R)\\<^sup>*) \\<and>\n    ((t, u) \\<in> R\\<^sup>* O S O R\\<^sup>* \\<longrightarrow>\n     (f t, f u) \\<in> (g R)\\<^sup>* O g S O (g R)\\<^sup>*)", "}"], ["proof (state)\nthis:\n  \\<lbrakk>(?ta2, ?ua2) \\<in> R\\<^sup>*; P ?ta2\\<rbrakk>\n  \\<Longrightarrow> P ?ua2 \\<and> (f ?ta2, f ?ua2) \\<in> (g R)\\<^sup>*\n\ngoal (1 subgoal):\n 1. ((t, u) \\<in> R\\<^sup>* \\<longrightarrow>\n     (f t, f u) \\<in> (g R)\\<^sup>*) \\<and>\n    ((t, u) \\<in> R\\<^sup>* O S O R\\<^sup>* \\<longrightarrow>\n     (f t, f u) \\<in> (g R)\\<^sup>* O g S O (g R)\\<^sup>*)", "note main = this"], ["proof (state)\nthis:\n  \\<lbrakk>(?ta2, ?ua2) \\<in> R\\<^sup>*; P ?ta2\\<rbrakk>\n  \\<Longrightarrow> P ?ua2 \\<and> (f ?ta2, f ?ua2) \\<in> (g R)\\<^sup>*\n\ngoal (1 subgoal):\n 1. ((t, u) \\<in> R\\<^sup>* \\<longrightarrow>\n     (f t, f u) \\<in> (g R)\\<^sup>*) \\<and>\n    ((t, u) \\<in> R\\<^sup>* O S O R\\<^sup>* \\<longrightarrow>\n     (f t, f u) \\<in> (g R)\\<^sup>* O g S O (g R)\\<^sup>*)", "note maint = main [OF _ t]"], ["proof (state)\nthis:\n  (t, ?ua2) \\<in> R\\<^sup>* \\<Longrightarrow>\n  P ?ua2 \\<and> (f t, f ?ua2) \\<in> (g R)\\<^sup>*\n\ngoal (1 subgoal):\n 1. ((t, u) \\<in> R\\<^sup>* \\<longrightarrow>\n     (f t, f u) \\<in> (g R)\\<^sup>*) \\<and>\n    ((t, u) \\<in> R\\<^sup>* O S O R\\<^sup>* \\<longrightarrow>\n     (f t, f u) \\<in> (g R)\\<^sup>* O g S O (g R)\\<^sup>*)", "from maint [of u]"], ["proof (chain)\npicking this:\n  (t, u) \\<in> R\\<^sup>* \\<Longrightarrow>\n  P u \\<and> (f t, f u) \\<in> (g R)\\<^sup>*", "have one: \"(t, u) \\<in> R\\<^sup>* \\<longrightarrow> (f t, f u) \\<in> (g R)\\<^sup>*\""], ["proof (prove)\nusing this:\n  (t, u) \\<in> R\\<^sup>* \\<Longrightarrow>\n  P u \\<and> (f t, f u) \\<in> (g R)\\<^sup>*\n\ngoal (1 subgoal):\n 1. (t, u) \\<in> R\\<^sup>* \\<longrightarrow> (f t, f u) \\<in> (g R)\\<^sup>*", "by simp"], ["proof (state)\nthis:\n  (t, u) \\<in> R\\<^sup>* \\<longrightarrow> (f t, f u) \\<in> (g R)\\<^sup>*\n\ngoal (1 subgoal):\n 1. ((t, u) \\<in> R\\<^sup>* \\<longrightarrow>\n     (f t, f u) \\<in> (g R)\\<^sup>*) \\<and>\n    ((t, u) \\<in> R\\<^sup>* O S O R\\<^sup>* \\<longrightarrow>\n     (f t, f u) \\<in> (g R)\\<^sup>* O g S O (g R)\\<^sup>*)", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. ((t, u) \\<in> R\\<^sup>* \\<longrightarrow>\n     (f t, f u) \\<in> (g R)\\<^sup>*) \\<and>\n    ((t, u) \\<in> R\\<^sup>* O S O R\\<^sup>* \\<longrightarrow>\n     (f t, f u) \\<in> (g R)\\<^sup>* O g S O (g R)\\<^sup>*)", "proof (rule conjI [OF one impI])"], ["proof (state)\ngoal (1 subgoal):\n 1. (t, u) \\<in> R\\<^sup>* O S O R\\<^sup>* \\<Longrightarrow>\n    (f t, f u) \\<in> (g R)\\<^sup>* O g S O (g R)\\<^sup>*", "assume \"(t, u) \\<in> R\\<^sup>* O S O R\\<^sup>*\""], ["proof (state)\nthis:\n  (t, u) \\<in> R\\<^sup>* O S O R\\<^sup>*\n\ngoal (1 subgoal):\n 1. (t, u) \\<in> R\\<^sup>* O S O R\\<^sup>* \\<Longrightarrow>\n    (f t, f u) \\<in> (g R)\\<^sup>* O g S O (g R)\\<^sup>*", "then"], ["proof (chain)\npicking this:\n  (t, u) \\<in> R\\<^sup>* O S O R\\<^sup>*", "obtain s v where ts: \"(t, s) \\<in> R\\<^sup>*\" and sv: \"(s, v) \\<in> S\" and vu: \"(v, u) \\<in> R\\<^sup>*\""], ["proof (prove)\nusing this:\n  (t, u) \\<in> R\\<^sup>* O S O R\\<^sup>*\n\ngoal (1 subgoal):\n 1. (\\<And>s v.\n        \\<lbrakk>(t, s) \\<in> R\\<^sup>*; (s, v) \\<in> S;\n         (v, u) \\<in> R\\<^sup>*\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  (t, s) \\<in> R\\<^sup>*\n  (s, v) \\<in> S\n  (v, u) \\<in> R\\<^sup>*\n\ngoal (1 subgoal):\n 1. (t, u) \\<in> R\\<^sup>* O S O R\\<^sup>* \\<Longrightarrow>\n    (f t, f u) \\<in> (g R)\\<^sup>* O g S O (g R)\\<^sup>*", "from maint [OF ts]"], ["proof (chain)\npicking this:\n  P s \\<and> (f t, f s) \\<in> (g R)\\<^sup>*", "have Ps: \"P s\" and ts: \"(f t, f s) \\<in> (g R)\\<^sup>*\""], ["proof (prove)\nusing this:\n  P s \\<and> (f t, f s) \\<in> (g R)\\<^sup>*\n\ngoal (1 subgoal):\n 1. P s &&& (f t, f s) \\<in> (g R)\\<^sup>*", "by auto"], ["proof (state)\nthis:\n  P s\n  (f t, f s) \\<in> (g R)\\<^sup>*\n\ngoal (1 subgoal):\n 1. (t, u) \\<in> R\\<^sup>* O S O R\\<^sup>* \\<Longrightarrow>\n    (f t, f u) \\<in> (g R)\\<^sup>* O g S O (g R)\\<^sup>*", "from fg [OF Ps S sv]"], ["proof (chain)\npicking this:\n  P v \\<and> (f s, f v) \\<in> g S", "have Pv: \"P v\" and sv: \"(f s, f v) \\<in> g S\""], ["proof (prove)\nusing this:\n  P v \\<and> (f s, f v) \\<in> g S\n\ngoal (1 subgoal):\n 1. P v &&& (f s, f v) \\<in> g S", "by auto"], ["proof (state)\nthis:\n  P v\n  (f s, f v) \\<in> g S\n\ngoal (1 subgoal):\n 1. (t, u) \\<in> R\\<^sup>* O S O R\\<^sup>* \\<Longrightarrow>\n    (f t, f u) \\<in> (g R)\\<^sup>* O g S O (g R)\\<^sup>*", "from main [OF vu Pv]"], ["proof (chain)\npicking this:\n  P u \\<and> (f v, f u) \\<in> (g R)\\<^sup>*", "have vu: \"(f v, f u) \\<in> (g R)\\<^sup>*\""], ["proof (prove)\nusing this:\n  P u \\<and> (f v, f u) \\<in> (g R)\\<^sup>*\n\ngoal (1 subgoal):\n 1. (f v, f u) \\<in> (g R)\\<^sup>*", "by auto"], ["proof (state)\nthis:\n  (f v, f u) \\<in> (g R)\\<^sup>*\n\ngoal (1 subgoal):\n 1. (t, u) \\<in> R\\<^sup>* O S O R\\<^sup>* \\<Longrightarrow>\n    (f t, f u) \\<in> (g R)\\<^sup>* O g S O (g R)\\<^sup>*", "from ts sv vu"], ["proof (chain)\npicking this:\n  (f t, f s) \\<in> (g R)\\<^sup>*\n  (f s, f v) \\<in> g S\n  (f v, f u) \\<in> (g R)\\<^sup>*", "show \"(f t, f u) \\<in> (g R)\\<^sup>* O g S O (g R)\\<^sup>*\""], ["proof (prove)\nusing this:\n  (f t, f s) \\<in> (g R)\\<^sup>*\n  (f s, f v) \\<in> g S\n  (f v, f u) \\<in> (g R)\\<^sup>*\n\ngoal (1 subgoal):\n 1. (f t, f u) \\<in> (g R)\\<^sup>* O g S O (g R)\\<^sup>*", "by auto"], ["proof (state)\nthis:\n  (f t, f u) \\<in> (g R)\\<^sup>* O g S O (g R)\\<^sup>*\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  ((t, u) \\<in> R\\<^sup>* \\<longrightarrow>\n   (f t, f u) \\<in> (g R)\\<^sup>*) \\<and>\n  ((t, u) \\<in> R\\<^sup>* O S O R\\<^sup>* \\<longrightarrow>\n   (f t, f u) \\<in> (g R)\\<^sup>* O g S O (g R)\\<^sup>*)\n\ngoal:\nNo subgoals!", "qed"], ["", "subsection \\<open>Terminating part of a relation\\<close>"], ["", "inductive_set\n  SN_part :: \"'a rel \\<Rightarrow> 'a set\"\n  for r :: \"'a rel\"\nwhere\n  SN_partI: \"(\\<And>y. (x, y) \\<in> r \\<Longrightarrow> y \\<in> SN_part r) \\<Longrightarrow> x \\<in> SN_part r\""], ["", "text \\<open>The accessible part of a relation is the same as the terminating part\n(just two names for the same definition -- modulo argument order). See\n@{thm accI}.\\<close>"], ["", "text \\<open>Characterization of @{const SN_on} via terminating part.\\<close>"], ["", "lemma SN_on_SN_part_conv:\n  \"SN_on r A \\<longleftrightarrow> A \\<subseteq> SN_part r\""], ["proof (prove)\ngoal (1 subgoal):\n 1. SN_on r A = (A \\<subseteq> SN_part r)", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. SN_on r A = (A \\<subseteq> SN_part r)", "{"], ["proof (state)\ngoal (1 subgoal):\n 1. SN_on r A = (A \\<subseteq> SN_part r)", "fix x"], ["proof (state)\ngoal (1 subgoal):\n 1. SN_on r A = (A \\<subseteq> SN_part r)", "assume \"SN_on r A\" and \"x \\<in> A\""], ["proof (state)\nthis:\n  SN_on r A\n  x \\<in> A\n\ngoal (1 subgoal):\n 1. SN_on r A = (A \\<subseteq> SN_part r)", "then"], ["proof (chain)\npicking this:\n  SN_on r A\n  x \\<in> A", "have \"x \\<in> SN_part r\""], ["proof (prove)\nusing this:\n  SN_on r A\n  x \\<in> A\n\ngoal (1 subgoal):\n 1. x \\<in> SN_part r", "by (induct) (auto intro: SN_partI)"], ["proof (state)\nthis:\n  x \\<in> SN_part r\n\ngoal (1 subgoal):\n 1. SN_on r A = (A \\<subseteq> SN_part r)", "}"], ["proof (state)\nthis:\n  \\<lbrakk>SN_on r A; ?x2 \\<in> A\\<rbrakk>\n  \\<Longrightarrow> ?x2 \\<in> SN_part r\n\ngoal (1 subgoal):\n 1. SN_on r A = (A \\<subseteq> SN_part r)", "moreover"], ["proof (state)\nthis:\n  \\<lbrakk>SN_on r A; ?x2 \\<in> A\\<rbrakk>\n  \\<Longrightarrow> ?x2 \\<in> SN_part r\n\ngoal (1 subgoal):\n 1. SN_on r A = (A \\<subseteq> SN_part r)", "{"], ["proof (state)\nthis:\n  \\<lbrakk>SN_on r A; ?x2 \\<in> A\\<rbrakk>\n  \\<Longrightarrow> ?x2 \\<in> SN_part r\n\ngoal (1 subgoal):\n 1. SN_on r A = (A \\<subseteq> SN_part r)", "fix x"], ["proof (state)\ngoal (1 subgoal):\n 1. SN_on r A = (A \\<subseteq> SN_part r)", "assume \"x \\<in> A\" and \"A \\<subseteq> SN_part r\""], ["proof (state)\nthis:\n  x \\<in> A\n  A \\<subseteq> SN_part r\n\ngoal (1 subgoal):\n 1. SN_on r A = (A \\<subseteq> SN_part r)", "then"], ["proof (chain)\npicking this:\n  x \\<in> A\n  A \\<subseteq> SN_part r", "have \"x \\<in> SN_part r\""], ["proof (prove)\nusing this:\n  x \\<in> A\n  A \\<subseteq> SN_part r\n\ngoal (1 subgoal):\n 1. x \\<in> SN_part r", "by auto"], ["proof (state)\nthis:\n  x \\<in> SN_part r\n\ngoal (1 subgoal):\n 1. SN_on r A = (A \\<subseteq> SN_part r)", "then"], ["proof (chain)\npicking this:\n  x \\<in> SN_part r", "have \"SN_on r {x}\""], ["proof (prove)\nusing this:\n  x \\<in> SN_part r\n\ngoal (1 subgoal):\n 1. SN_on r {x}", "by (induct) (auto intro: step_reflects_SN_on)"], ["proof (state)\nthis:\n  SN_on r {x}\n\ngoal (1 subgoal):\n 1. SN_on r A = (A \\<subseteq> SN_part r)", "}"], ["proof (state)\nthis:\n  \\<lbrakk>?x2 \\<in> A; A \\<subseteq> SN_part r\\<rbrakk>\n  \\<Longrightarrow> SN_on r {?x2}\n\ngoal (1 subgoal):\n 1. SN_on r A = (A \\<subseteq> SN_part r)", "ultimately"], ["proof (chain)\npicking this:\n  \\<lbrakk>SN_on r A; ?x2 \\<in> A\\<rbrakk>\n  \\<Longrightarrow> ?x2 \\<in> SN_part r\n  \\<lbrakk>?x2 \\<in> A; A \\<subseteq> SN_part r\\<rbrakk>\n  \\<Longrightarrow> SN_on r {?x2}", "show ?thesis"], ["proof (prove)\nusing this:\n  \\<lbrakk>SN_on r A; ?x2 \\<in> A\\<rbrakk>\n  \\<Longrightarrow> ?x2 \\<in> SN_part r\n  \\<lbrakk>?x2 \\<in> A; A \\<subseteq> SN_part r\\<rbrakk>\n  \\<Longrightarrow> SN_on r {?x2}\n\ngoal (1 subgoal):\n 1. SN_on r A = (A \\<subseteq> SN_part r)", "by (force simp: SN_defs)"], ["proof (state)\nthis:\n  SN_on r A = (A \\<subseteq> SN_part r)\n\ngoal:\nNo subgoals!", "qed"], ["", "text \\<open>Special case for ``full'' termination.\\<close>"], ["", "lemma SN_SN_part_UNIV_conv:\n  \"SN r \\<longleftrightarrow> SN_part r = UNIV\""], ["proof (prove)\ngoal (1 subgoal):\n 1. SN r = (SN_part r = UNIV)", "using SN_on_SN_part_conv [of r UNIV]"], ["proof (prove)\nusing this:\n  SN r = (UNIV \\<subseteq> SN_part r)\n\ngoal (1 subgoal):\n 1. SN r = (SN_part r = UNIV)", "by auto"], ["", "lemma closed_imp_rtrancl_closed: assumes L: \"L \\<subseteq> A\"\n  and R: \"R `` A \\<subseteq> A\"\n  shows \"{t | s. s \\<in> L \\<and> (s,t) \\<in> R^*} \\<subseteq> A\""], ["proof (prove)\ngoal (1 subgoal):\n 1. {uu_.\n     \\<exists>s. uu_ = t \\<and> s \\<in> L \\<and> (s, t) \\<in> R\\<^sup>*}\n    \\<subseteq> A", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. {uu_.\n     \\<exists>s. uu_ = t \\<and> s \\<in> L \\<and> (s, t) \\<in> R\\<^sup>*}\n    \\<subseteq> A", "{"], ["proof (state)\ngoal (1 subgoal):\n 1. {uu_.\n     \\<exists>s. uu_ = t \\<and> s \\<in> L \\<and> (s, t) \\<in> R\\<^sup>*}\n    \\<subseteq> A", "fix s t"], ["proof (state)\ngoal (1 subgoal):\n 1. {uu_.\n     \\<exists>s. uu_ = t \\<and> s \\<in> L \\<and> (s, t) \\<in> R\\<^sup>*}\n    \\<subseteq> A", "assume \"(s,t) \\<in> R^*\" and \"s \\<in> L\""], ["proof (state)\nthis:\n  (s, t) \\<in> R\\<^sup>*\n  s \\<in> L\n\ngoal (1 subgoal):\n 1. {uu_.\n     \\<exists>s. uu_ = t \\<and> s \\<in> L \\<and> (s, t) \\<in> R\\<^sup>*}\n    \\<subseteq> A", "hence \"t \\<in> A\""], ["proof (prove)\nusing this:\n  (s, t) \\<in> R\\<^sup>*\n  s \\<in> L\n\ngoal (1 subgoal):\n 1. t \\<in> A", "by (induct, insert L R, auto)"], ["proof (state)\nthis:\n  t \\<in> A\n\ngoal (1 subgoal):\n 1. {uu_.\n     \\<exists>s. uu_ = t \\<and> s \\<in> L \\<and> (s, t) \\<in> R\\<^sup>*}\n    \\<subseteq> A", "}"], ["proof (state)\nthis:\n  \\<lbrakk>(?s2, ?ta2) \\<in> R\\<^sup>*; ?s2 \\<in> L\\<rbrakk>\n  \\<Longrightarrow> ?ta2 \\<in> A\n\ngoal (1 subgoal):\n 1. {uu_.\n     \\<exists>s. uu_ = t \\<and> s \\<in> L \\<and> (s, t) \\<in> R\\<^sup>*}\n    \\<subseteq> A", "thus ?thesis"], ["proof (prove)\nusing this:\n  \\<lbrakk>(?s2, ?ta2) \\<in> R\\<^sup>*; ?s2 \\<in> L\\<rbrakk>\n  \\<Longrightarrow> ?ta2 \\<in> A\n\ngoal (1 subgoal):\n 1. {uu_.\n     \\<exists>s. uu_ = t \\<and> s \\<in> L \\<and> (s, t) \\<in> R\\<^sup>*}\n    \\<subseteq> A", "by auto"], ["proof (state)\nthis:\n  {uu_. \\<exists>s. uu_ = t \\<and> s \\<in> L \\<and> (s, t) \\<in> R\\<^sup>*}\n  \\<subseteq> A\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma trancl_steps_relpow: assumes \"a \\<subseteq> b^+\"\n  shows \"(x,y) \\<in> a^^n \\<Longrightarrow> \\<exists> m. m \\<ge> n \\<and> (x,y) \\<in> b^^m\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (x, y) \\<in> a ^^ n \\<Longrightarrow>\n    \\<exists>m\\<ge>n. (x, y) \\<in> b ^^ m", "proof (induct n arbitrary: y)"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>y.\n       (x, y) \\<in> a ^^ 0 \\<Longrightarrow>\n       \\<exists>m\\<ge>0. (x, y) \\<in> b ^^ m\n 2. \\<And>n y.\n       \\<lbrakk>\\<And>y.\n                   (x, y) \\<in> a ^^ n \\<Longrightarrow>\n                   \\<exists>m\\<ge>n. (x, y) \\<in> b ^^ m;\n        (x, y) \\<in> a ^^ Suc n\\<rbrakk>\n       \\<Longrightarrow> \\<exists>m\\<ge>Suc n. (x, y) \\<in> b ^^ m", "case 0"], ["proof (state)\nthis:\n  (x, y) \\<in> a ^^ 0\n\ngoal (2 subgoals):\n 1. \\<And>y.\n       (x, y) \\<in> a ^^ 0 \\<Longrightarrow>\n       \\<exists>m\\<ge>0. (x, y) \\<in> b ^^ m\n 2. \\<And>n y.\n       \\<lbrakk>\\<And>y.\n                   (x, y) \\<in> a ^^ n \\<Longrightarrow>\n                   \\<exists>m\\<ge>n. (x, y) \\<in> b ^^ m;\n        (x, y) \\<in> a ^^ Suc n\\<rbrakk>\n       \\<Longrightarrow> \\<exists>m\\<ge>Suc n. (x, y) \\<in> b ^^ m", "thus ?case"], ["proof (prove)\nusing this:\n  (x, y) \\<in> a ^^ 0\n\ngoal (1 subgoal):\n 1. \\<exists>m\\<ge>0. (x, y) \\<in> b ^^ m", "by (intro exI[of _ 0], auto)"], ["proof (state)\nthis:\n  \\<exists>m\\<ge>0. (x, y) \\<in> b ^^ m\n\ngoal (1 subgoal):\n 1. \\<And>n y.\n       \\<lbrakk>\\<And>y.\n                   (x, y) \\<in> a ^^ n \\<Longrightarrow>\n                   \\<exists>m\\<ge>n. (x, y) \\<in> b ^^ m;\n        (x, y) \\<in> a ^^ Suc n\\<rbrakk>\n       \\<Longrightarrow> \\<exists>m\\<ge>Suc n. (x, y) \\<in> b ^^ m", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>n y.\n       \\<lbrakk>\\<And>y.\n                   (x, y) \\<in> a ^^ n \\<Longrightarrow>\n                   \\<exists>m\\<ge>n. (x, y) \\<in> b ^^ m;\n        (x, y) \\<in> a ^^ Suc n\\<rbrakk>\n       \\<Longrightarrow> \\<exists>m\\<ge>Suc n. (x, y) \\<in> b ^^ m", "case (Suc n z)"], ["proof (state)\nthis:\n  (x, ?y) \\<in> a ^^ n \\<Longrightarrow>\n  \\<exists>m\\<ge>n. (x, ?y) \\<in> b ^^ m\n  (x, z) \\<in> a ^^ Suc n\n\ngoal (1 subgoal):\n 1. \\<And>n y.\n       \\<lbrakk>\\<And>y.\n                   (x, y) \\<in> a ^^ n \\<Longrightarrow>\n                   \\<exists>m\\<ge>n. (x, y) \\<in> b ^^ m;\n        (x, y) \\<in> a ^^ Suc n\\<rbrakk>\n       \\<Longrightarrow> \\<exists>m\\<ge>Suc n. (x, y) \\<in> b ^^ m", "from Suc(2)"], ["proof (chain)\npicking this:\n  (x, z) \\<in> a ^^ Suc n", "obtain y where xy: \"(x,y) \\<in> a ^^ n\" and yz: \"(y,z) \\<in> a\""], ["proof (prove)\nusing this:\n  (x, z) \\<in> a ^^ Suc n\n\ngoal (1 subgoal):\n 1. (\\<And>y.\n        \\<lbrakk>(x, y) \\<in> a ^^ n; (y, z) \\<in> a\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  (x, y) \\<in> a ^^ n\n  (y, z) \\<in> a\n\ngoal (1 subgoal):\n 1. \\<And>n y.\n       \\<lbrakk>\\<And>y.\n                   (x, y) \\<in> a ^^ n \\<Longrightarrow>\n                   \\<exists>m\\<ge>n. (x, y) \\<in> b ^^ m;\n        (x, y) \\<in> a ^^ Suc n\\<rbrakk>\n       \\<Longrightarrow> \\<exists>m\\<ge>Suc n. (x, y) \\<in> b ^^ m", "from Suc(1)[OF xy]"], ["proof (chain)\npicking this:\n  \\<exists>m\\<ge>n. (x, y) \\<in> b ^^ m", "obtain m where m: \"m \\<ge> n\" and xy: \"(x,y) \\<in> b ^^ m\""], ["proof (prove)\nusing this:\n  \\<exists>m\\<ge>n. (x, y) \\<in> b ^^ m\n\ngoal (1 subgoal):\n 1. (\\<And>m.\n        \\<lbrakk>n \\<le> m; (x, y) \\<in> b ^^ m\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  n \\<le> m\n  (x, y) \\<in> b ^^ m\n\ngoal (1 subgoal):\n 1. \\<And>n y.\n       \\<lbrakk>\\<And>y.\n                   (x, y) \\<in> a ^^ n \\<Longrightarrow>\n                   \\<exists>m\\<ge>n. (x, y) \\<in> b ^^ m;\n        (x, y) \\<in> a ^^ Suc n\\<rbrakk>\n       \\<Longrightarrow> \\<exists>m\\<ge>Suc n. (x, y) \\<in> b ^^ m", "from yz assms"], ["proof (chain)\npicking this:\n  (y, z) \\<in> a\n  a \\<subseteq> b\\<^sup>+", "have \"(y,z) \\<in> b^+\""], ["proof (prove)\nusing this:\n  (y, z) \\<in> a\n  a \\<subseteq> b\\<^sup>+\n\ngoal (1 subgoal):\n 1. (y, z) \\<in> b\\<^sup>+", "by auto"], ["proof (state)\nthis:\n  (y, z) \\<in> b\\<^sup>+\n\ngoal (1 subgoal):\n 1. \\<And>n y.\n       \\<lbrakk>\\<And>y.\n                   (x, y) \\<in> a ^^ n \\<Longrightarrow>\n                   \\<exists>m\\<ge>n. (x, y) \\<in> b ^^ m;\n        (x, y) \\<in> a ^^ Suc n\\<rbrakk>\n       \\<Longrightarrow> \\<exists>m\\<ge>Suc n. (x, y) \\<in> b ^^ m", "from this[unfolded trancl_power]"], ["proof (chain)\npicking this:\n  \\<exists>n>0. (y, z) \\<in> b ^^ n", "obtain k where k: \"k > 0\" and yz: \"(y,z) \\<in> b ^^ k\""], ["proof (prove)\nusing this:\n  \\<exists>n>0. (y, z) \\<in> b ^^ n\n\ngoal (1 subgoal):\n 1. (\\<And>k.\n        \\<lbrakk>0 < k; (y, z) \\<in> b ^^ k\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  0 < k\n  (y, z) \\<in> b ^^ k\n\ngoal (1 subgoal):\n 1. \\<And>n y.\n       \\<lbrakk>\\<And>y.\n                   (x, y) \\<in> a ^^ n \\<Longrightarrow>\n                   \\<exists>m\\<ge>n. (x, y) \\<in> b ^^ m;\n        (x, y) \\<in> a ^^ Suc n\\<rbrakk>\n       \\<Longrightarrow> \\<exists>m\\<ge>Suc n. (x, y) \\<in> b ^^ m", "from xy yz"], ["proof (chain)\npicking this:\n  (x, y) \\<in> b ^^ m\n  (y, z) \\<in> b ^^ k", "have \"(x,z) \\<in> b ^^ (m + k)\""], ["proof (prove)\nusing this:\n  (x, y) \\<in> b ^^ m\n  (y, z) \\<in> b ^^ k\n\ngoal (1 subgoal):\n 1. (x, z) \\<in> b ^^ (m + k)", "unfolding relpow_add"], ["proof (prove)\nusing this:\n  (x, y) \\<in> b ^^ m\n  (y, z) \\<in> b ^^ k\n\ngoal (1 subgoal):\n 1. (x, z) \\<in> b ^^ m O b ^^ k", "by auto"], ["proof (state)\nthis:\n  (x, z) \\<in> b ^^ (m + k)\n\ngoal (1 subgoal):\n 1. \\<And>n y.\n       \\<lbrakk>\\<And>y.\n                   (x, y) \\<in> a ^^ n \\<Longrightarrow>\n                   \\<exists>m\\<ge>n. (x, y) \\<in> b ^^ m;\n        (x, y) \\<in> a ^^ Suc n\\<rbrakk>\n       \\<Longrightarrow> \\<exists>m\\<ge>Suc n. (x, y) \\<in> b ^^ m", "with k m"], ["proof (chain)\npicking this:\n  0 < k\n  n \\<le> m\n  (x, z) \\<in> b ^^ (m + k)", "show ?case"], ["proof (prove)\nusing this:\n  0 < k\n  n \\<le> m\n  (x, z) \\<in> b ^^ (m + k)\n\ngoal (1 subgoal):\n 1. \\<exists>m\\<ge>Suc n. (x, z) \\<in> b ^^ m", "by (intro exI[of _ \"m + k\"], auto)"], ["proof (state)\nthis:\n  \\<exists>m\\<ge>Suc n. (x, z) \\<in> b ^^ m\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma relpow_image: assumes f: \"\\<And> s t. (s,t) \\<in> r \\<Longrightarrow> (f s, f t) \\<in> r'\"\n  shows \"(s,t) \\<in> r ^^ n \\<Longrightarrow> (f s, f t) \\<in> r' ^^ n\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (s, t) \\<in> r ^^ n \\<Longrightarrow> (f s, f t) \\<in> r' ^^ n", "proof (induct n arbitrary: t)"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>t. (s, t) \\<in> r ^^ 0 \\<Longrightarrow> (f s, f t) \\<in> r' ^^ 0\n 2. \\<And>n t.\n       \\<lbrakk>\\<And>t.\n                   (s, t) \\<in> r ^^ n \\<Longrightarrow>\n                   (f s, f t) \\<in> r' ^^ n;\n        (s, t) \\<in> r ^^ Suc n\\<rbrakk>\n       \\<Longrightarrow> (f s, f t) \\<in> r' ^^ Suc n", "case (Suc n u)"], ["proof (state)\nthis:\n  (s, ?t) \\<in> r ^^ n \\<Longrightarrow> (f s, f ?t) \\<in> r' ^^ n\n  (s, u) \\<in> r ^^ Suc n\n\ngoal (2 subgoals):\n 1. \\<And>t. (s, t) \\<in> r ^^ 0 \\<Longrightarrow> (f s, f t) \\<in> r' ^^ 0\n 2. \\<And>n t.\n       \\<lbrakk>\\<And>t.\n                   (s, t) \\<in> r ^^ n \\<Longrightarrow>\n                   (f s, f t) \\<in> r' ^^ n;\n        (s, t) \\<in> r ^^ Suc n\\<rbrakk>\n       \\<Longrightarrow> (f s, f t) \\<in> r' ^^ Suc n", "from Suc(2)"], ["proof (chain)\npicking this:\n  (s, u) \\<in> r ^^ Suc n", "obtain t where st: \"(s,t) \\<in> r ^^ n\" and tu: \"(t,u) \\<in> r\""], ["proof (prove)\nusing this:\n  (s, u) \\<in> r ^^ Suc n\n\ngoal (1 subgoal):\n 1. (\\<And>t.\n        \\<lbrakk>(s, t) \\<in> r ^^ n; (t, u) \\<in> r\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  (s, t) \\<in> r ^^ n\n  (t, u) \\<in> r\n\ngoal (2 subgoals):\n 1. \\<And>t. (s, t) \\<in> r ^^ 0 \\<Longrightarrow> (f s, f t) \\<in> r' ^^ 0\n 2. \\<And>n t.\n       \\<lbrakk>\\<And>t.\n                   (s, t) \\<in> r ^^ n \\<Longrightarrow>\n                   (f s, f t) \\<in> r' ^^ n;\n        (s, t) \\<in> r ^^ Suc n\\<rbrakk>\n       \\<Longrightarrow> (f s, f t) \\<in> r' ^^ Suc n", "from Suc(1)[OF st] f[OF tu]"], ["proof (chain)\npicking this:\n  (f s, f t) \\<in> r' ^^ n\n  (f t, f u) \\<in> r'", "show ?case"], ["proof (prove)\nusing this:\n  (f s, f t) \\<in> r' ^^ n\n  (f t, f u) \\<in> r'\n\ngoal (1 subgoal):\n 1. (f s, f u) \\<in> r' ^^ Suc n", "by auto"], ["proof (state)\nthis:\n  (f s, f u) \\<in> r' ^^ Suc n\n\ngoal (1 subgoal):\n 1. \\<And>t. (s, t) \\<in> r ^^ 0 \\<Longrightarrow> (f s, f t) \\<in> r' ^^ 0", "qed auto"], ["", "lemma relpow_refl_mono:\n assumes refl:\"\\<And> x. (x,x) \\<in> Rel\"\n shows \"m \\<le> n \\<Longrightarrow>(a,b) \\<in> Rel ^^ m \\<Longrightarrow> (a,b) \\<in> Rel ^^ n\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>m \\<le> n; (a, b) \\<in> Rel ^^ m\\<rbrakk>\n    \\<Longrightarrow> (a, b) \\<in> Rel ^^ n", "proof (induct rule:dec_induct)"], ["proof (state)\ngoal (2 subgoals):\n 1. (a, b) \\<in> Rel ^^ m \\<Longrightarrow> (a, b) \\<in> Rel ^^ m\n 2. \\<And>na.\n       \\<lbrakk>m \\<le> na; na < n;\n        (a, b) \\<in> Rel ^^ m \\<Longrightarrow> (a, b) \\<in> Rel ^^ na;\n        (a, b) \\<in> Rel ^^ m\\<rbrakk>\n       \\<Longrightarrow> (a, b) \\<in> Rel ^^ Suc na", "case (step i)"], ["proof (state)\nthis:\n  m \\<le> i\n  i < n\n  (a, b) \\<in> Rel ^^ m \\<Longrightarrow> (a, b) \\<in> Rel ^^ i\n  (a, b) \\<in> Rel ^^ m\n\ngoal (2 subgoals):\n 1. (a, b) \\<in> Rel ^^ m \\<Longrightarrow> (a, b) \\<in> Rel ^^ m\n 2. \\<And>na.\n       \\<lbrakk>m \\<le> na; na < n;\n        (a, b) \\<in> Rel ^^ m \\<Longrightarrow> (a, b) \\<in> Rel ^^ na;\n        (a, b) \\<in> Rel ^^ m\\<rbrakk>\n       \\<Longrightarrow> (a, b) \\<in> Rel ^^ Suc na", "hence abi:\"(a, b) \\<in> Rel ^^ i\""], ["proof (prove)\nusing this:\n  m \\<le> i\n  i < n\n  (a, b) \\<in> Rel ^^ m \\<Longrightarrow> (a, b) \\<in> Rel ^^ i\n  (a, b) \\<in> Rel ^^ m\n\ngoal (1 subgoal):\n 1. (a, b) \\<in> Rel ^^ i", "by auto"], ["proof (state)\nthis:\n  (a, b) \\<in> Rel ^^ i\n\ngoal (2 subgoals):\n 1. (a, b) \\<in> Rel ^^ m \\<Longrightarrow> (a, b) \\<in> Rel ^^ m\n 2. \\<And>na.\n       \\<lbrakk>m \\<le> na; na < n;\n        (a, b) \\<in> Rel ^^ m \\<Longrightarrow> (a, b) \\<in> Rel ^^ na;\n        (a, b) \\<in> Rel ^^ m\\<rbrakk>\n       \\<Longrightarrow> (a, b) \\<in> Rel ^^ Suc na", "from refl[of b] abi relpowp_Suc_I[of i \"\\<lambda> x y. (x,y) \\<in> Rel\"]"], ["proof (chain)\npicking this:\n  (b, b) \\<in> Rel\n  (a, b) \\<in> Rel ^^ i\n  \\<lbrakk>((\\<lambda>x y. (x, y) \\<in> Rel) ^^ i) ?x ?y;\n   (?y, ?z) \\<in> Rel\\<rbrakk>\n  \\<Longrightarrow> ((\\<lambda>x y. (x, y) \\<in> Rel) ^^ Suc i) ?x ?z", "show \"(a, b) \\<in> Rel ^^ Suc i\""], ["proof (prove)\nusing this:\n  (b, b) \\<in> Rel\n  (a, b) \\<in> Rel ^^ i\n  \\<lbrakk>((\\<lambda>x y. (x, y) \\<in> Rel) ^^ i) ?x ?y;\n   (?y, ?z) \\<in> Rel\\<rbrakk>\n  \\<Longrightarrow> ((\\<lambda>x y. (x, y) \\<in> Rel) ^^ Suc i) ?x ?z\n\ngoal (1 subgoal):\n 1. (a, b) \\<in> Rel ^^ Suc i", "by auto"], ["proof (state)\nthis:\n  (a, b) \\<in> Rel ^^ Suc i\n\ngoal (1 subgoal):\n 1. (a, b) \\<in> Rel ^^ m \\<Longrightarrow> (a, b) \\<in> Rel ^^ m", "qed"], ["", "lemma SN_on_induct_acc_style [consumes 1, case_names IH]:\n  assumes sn: \"SN_on R {a}\"\n    and IH: \"\\<And>x. SN_on R {x} \\<Longrightarrow> \\<lbrakk>\\<And>y. (x, y) \\<in> R \\<Longrightarrow> P y\\<rbrakk>  \\<Longrightarrow> P x\"\n  shows \"P a\""], ["proof (prove)\ngoal (1 subgoal):\n 1. P a", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. P a", "from sn SN_on_conv_acc [of \"R\\<inverse>\" a]"], ["proof (chain)\npicking this:\n  SN_on R {a}\n  SN_on {(y, z). (z, y) \\<in> R\\<inverse>} {a} = (a \\<in> termi R)", "have a: \"a \\<in> termi R\""], ["proof (prove)\nusing this:\n  SN_on R {a}\n  SN_on {(y, z). (z, y) \\<in> R\\<inverse>} {a} = (a \\<in> termi R)\n\ngoal (1 subgoal):\n 1. a \\<in> termi R", "by auto"], ["proof (state)\nthis:\n  a \\<in> termi R\n\ngoal (1 subgoal):\n 1. P a", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. P a", "proof (rule Wellfounded.acc.induct [OF a, of P], rule IH)"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>x.\n       \\<lbrakk>\\<And>y.\n                   (y, x) \\<in> R\\<inverse> \\<Longrightarrow>\n                   y \\<in> termi R;\n        \\<And>y. (y, x) \\<in> R\\<inverse> \\<Longrightarrow> P y\\<rbrakk>\n       \\<Longrightarrow> SN_on R {x}\n 2. \\<And>x y.\n       \\<lbrakk>\\<And>y.\n                   (y, x) \\<in> R\\<inverse> \\<Longrightarrow>\n                   y \\<in> termi R;\n        \\<And>y. (y, x) \\<in> R\\<inverse> \\<Longrightarrow> P y;\n        (x, y) \\<in> R\\<rbrakk>\n       \\<Longrightarrow> P y", "fix x"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>x.\n       \\<lbrakk>\\<And>y.\n                   (y, x) \\<in> R\\<inverse> \\<Longrightarrow>\n                   y \\<in> termi R;\n        \\<And>y. (y, x) \\<in> R\\<inverse> \\<Longrightarrow> P y\\<rbrakk>\n       \\<Longrightarrow> SN_on R {x}\n 2. \\<And>x y.\n       \\<lbrakk>\\<And>y.\n                   (y, x) \\<in> R\\<inverse> \\<Longrightarrow>\n                   y \\<in> termi R;\n        \\<And>y. (y, x) \\<in> R\\<inverse> \\<Longrightarrow> P y;\n        (x, y) \\<in> R\\<rbrakk>\n       \\<Longrightarrow> P y", "assume \"\\<And>y. (y, x) \\<in> R\\<inverse> \\<Longrightarrow> y \\<in> termi R\""], ["proof (state)\nthis:\n  (?y, x) \\<in> R\\<inverse> \\<Longrightarrow> ?y \\<in> termi R\n\ngoal (2 subgoals):\n 1. \\<And>x.\n       \\<lbrakk>\\<And>y.\n                   (y, x) \\<in> R\\<inverse> \\<Longrightarrow>\n                   y \\<in> termi R;\n        \\<And>y. (y, x) \\<in> R\\<inverse> \\<Longrightarrow> P y\\<rbrakk>\n       \\<Longrightarrow> SN_on R {x}\n 2. \\<And>x y.\n       \\<lbrakk>\\<And>y.\n                   (y, x) \\<in> R\\<inverse> \\<Longrightarrow>\n                   y \\<in> termi R;\n        \\<And>y. (y, x) \\<in> R\\<inverse> \\<Longrightarrow> P y;\n        (x, y) \\<in> R\\<rbrakk>\n       \\<Longrightarrow> P y", "from this [folded SN_on_conv_acc]"], ["proof (chain)\npicking this:\n  (?y, x) \\<in> R\\<inverse> \\<Longrightarrow>\n  SN_on {(y, z). (z, y) \\<in> R\\<inverse>} {?y}", "show \"SN_on R {x}\""], ["proof (prove)\nusing this:\n  (?y, x) \\<in> R\\<inverse> \\<Longrightarrow>\n  SN_on {(y, z). (z, y) \\<in> R\\<inverse>} {?y}\n\ngoal (1 subgoal):\n 1. SN_on R {x}", "by simp fast"], ["proof (state)\nthis:\n  SN_on R {x}\n\ngoal (1 subgoal):\n 1. \\<And>x y.\n       \\<lbrakk>\\<And>y.\n                   (y, x) \\<in> R\\<inverse> \\<Longrightarrow>\n                   y \\<in> termi R;\n        \\<And>y. (y, x) \\<in> R\\<inverse> \\<Longrightarrow> P y;\n        (x, y) \\<in> R\\<rbrakk>\n       \\<Longrightarrow> P y", "qed auto"], ["proof (state)\nthis:\n  P a\n\ngoal:\nNo subgoals!", "qed"], ["", "(* Lemma 2.3 in Huet: Confluent Reductions *)"], ["", "lemma partially_localize_CR:\n  \"CR r \\<longleftrightarrow> (\\<forall> x y z. (x, y) \\<in> r \\<and> (x, z) \\<in> r\\<^sup>* \\<longrightarrow> (y, z) \\<in> join r)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. CR r =\n    (\\<forall>x y z.\n        (x, y) \\<in> r \\<and> (x, z) \\<in> r\\<^sup>* \\<longrightarrow>\n        (y, z) \\<in> r\\<^sup>\\<down>)", "proof"], ["proof (state)\ngoal (2 subgoals):\n 1. CR r \\<Longrightarrow>\n    \\<forall>x y z.\n       (x, y) \\<in> r \\<and> (x, z) \\<in> r\\<^sup>* \\<longrightarrow>\n       (y, z) \\<in> r\\<^sup>\\<down>\n 2. \\<forall>x y z.\n       (x, y) \\<in> r \\<and> (x, z) \\<in> r\\<^sup>* \\<longrightarrow>\n       (y, z) \\<in> r\\<^sup>\\<down> \\<Longrightarrow>\n    CR r", "assume \"CR r\""], ["proof (state)\nthis:\n  CR r\n\ngoal (2 subgoals):\n 1. CR r \\<Longrightarrow>\n    \\<forall>x y z.\n       (x, y) \\<in> r \\<and> (x, z) \\<in> r\\<^sup>* \\<longrightarrow>\n       (y, z) \\<in> r\\<^sup>\\<down>\n 2. \\<forall>x y z.\n       (x, y) \\<in> r \\<and> (x, z) \\<in> r\\<^sup>* \\<longrightarrow>\n       (y, z) \\<in> r\\<^sup>\\<down> \\<Longrightarrow>\n    CR r", "thus \"\\<forall> x y z. (x, y) \\<in> r \\<and> (x, z) \\<in> r\\<^sup>* \\<longrightarrow> (y, z) \\<in> join r\""], ["proof (prove)\nusing this:\n  CR r\n\ngoal (1 subgoal):\n 1. \\<forall>x y z.\n       (x, y) \\<in> r \\<and> (x, z) \\<in> r\\<^sup>* \\<longrightarrow>\n       (y, z) \\<in> r\\<^sup>\\<down>", "by auto"], ["proof (state)\nthis:\n  \\<forall>x y z.\n     (x, y) \\<in> r \\<and> (x, z) \\<in> r\\<^sup>* \\<longrightarrow>\n     (y, z) \\<in> r\\<^sup>\\<down>\n\ngoal (1 subgoal):\n 1. \\<forall>x y z.\n       (x, y) \\<in> r \\<and> (x, z) \\<in> r\\<^sup>* \\<longrightarrow>\n       (y, z) \\<in> r\\<^sup>\\<down> \\<Longrightarrow>\n    CR r", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<forall>x y z.\n       (x, y) \\<in> r \\<and> (x, z) \\<in> r\\<^sup>* \\<longrightarrow>\n       (y, z) \\<in> r\\<^sup>\\<down> \\<Longrightarrow>\n    CR r", "assume 1:\"\\<forall> x y z. (x, y) \\<in> r \\<and> (x, z) \\<in> r\\<^sup>* \\<longrightarrow> (y, z) \\<in> join r\""], ["proof (state)\nthis:\n  \\<forall>x y z.\n     (x, y) \\<in> r \\<and> (x, z) \\<in> r\\<^sup>* \\<longrightarrow>\n     (y, z) \\<in> r\\<^sup>\\<down>\n\ngoal (1 subgoal):\n 1. \\<forall>x y z.\n       (x, y) \\<in> r \\<and> (x, z) \\<in> r\\<^sup>* \\<longrightarrow>\n       (y, z) \\<in> r\\<^sup>\\<down> \\<Longrightarrow>\n    CR r", "show \"CR r\""], ["proof (prove)\ngoal (1 subgoal):\n 1. CR r", "proof"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>a b c.\n       \\<lbrakk>a \\<in> UNIV; (a, b) \\<in> r\\<^sup>*;\n        (a, c) \\<in> r\\<^sup>*\\<rbrakk>\n       \\<Longrightarrow> (b, c) \\<in> r\\<^sup>\\<down>", "fix a b c"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>a b c.\n       \\<lbrakk>a \\<in> UNIV; (a, b) \\<in> r\\<^sup>*;\n        (a, c) \\<in> r\\<^sup>*\\<rbrakk>\n       \\<Longrightarrow> (b, c) \\<in> r\\<^sup>\\<down>", "assume 2: \"a \\<in> UNIV\" and 3: \"(a, b) \\<in> r\\<^sup>*\" and 4: \"(a, c) \\<in> r\\<^sup>*\""], ["proof (state)\nthis:\n  a \\<in> UNIV\n  (a, b) \\<in> r\\<^sup>*\n  (a, c) \\<in> r\\<^sup>*\n\ngoal (1 subgoal):\n 1. \\<And>a b c.\n       \\<lbrakk>a \\<in> UNIV; (a, b) \\<in> r\\<^sup>*;\n        (a, c) \\<in> r\\<^sup>*\\<rbrakk>\n       \\<Longrightarrow> (b, c) \\<in> r\\<^sup>\\<down>", "then"], ["proof (chain)\npicking this:\n  a \\<in> UNIV\n  (a, b) \\<in> r\\<^sup>*\n  (a, c) \\<in> r\\<^sup>*", "obtain n  where \"(a,c) \\<in> r^^n\""], ["proof (prove)\nusing this:\n  a \\<in> UNIV\n  (a, b) \\<in> r\\<^sup>*\n  (a, c) \\<in> r\\<^sup>*\n\ngoal (1 subgoal):\n 1. (\\<And>n.\n        (a, c) \\<in> r ^^ n \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "using rtrancl_is_UN_relpow"], ["proof (prove)\nusing this:\n  a \\<in> UNIV\n  (a, b) \\<in> r\\<^sup>*\n  (a, c) \\<in> r\\<^sup>*\n  ?R\\<^sup>* = \\<Union> (range ((^^) ?R))\n\ngoal (1 subgoal):\n 1. (\\<And>n.\n        (a, c) \\<in> r ^^ n \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by fast"], ["proof (state)\nthis:\n  (a, c) \\<in> r ^^ n\n\ngoal (1 subgoal):\n 1. \\<And>a b c.\n       \\<lbrakk>a \\<in> UNIV; (a, b) \\<in> r\\<^sup>*;\n        (a, c) \\<in> r\\<^sup>*\\<rbrakk>\n       \\<Longrightarrow> (b, c) \\<in> r\\<^sup>\\<down>", "with 2 3"], ["proof (chain)\npicking this:\n  a \\<in> UNIV\n  (a, b) \\<in> r\\<^sup>*\n  (a, c) \\<in> r ^^ n", "show \"(b,c) \\<in> join r\""], ["proof (prove)\nusing this:\n  a \\<in> UNIV\n  (a, b) \\<in> r\\<^sup>*\n  (a, c) \\<in> r ^^ n\n\ngoal (1 subgoal):\n 1. (b, c) \\<in> r\\<^sup>\\<down>", "proof (induct n arbitrary: a b c)"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>a b c.\n       \\<lbrakk>a \\<in> UNIV; (a, b) \\<in> r\\<^sup>*;\n        (a, c) \\<in> r ^^ 0\\<rbrakk>\n       \\<Longrightarrow> (b, c) \\<in> r\\<^sup>\\<down>\n 2. \\<And>n a b c.\n       \\<lbrakk>\\<And>a b c.\n                   \\<lbrakk>a \\<in> UNIV; (a, b) \\<in> r\\<^sup>*;\n                    (a, c) \\<in> r ^^ n\\<rbrakk>\n                   \\<Longrightarrow> (b, c) \\<in> r\\<^sup>\\<down>;\n        a \\<in> UNIV; (a, b) \\<in> r\\<^sup>*;\n        (a, c) \\<in> r ^^ Suc n\\<rbrakk>\n       \\<Longrightarrow> (b, c) \\<in> r\\<^sup>\\<down>", "case 0"], ["proof (state)\nthis:\n  a \\<in> UNIV\n  (a, b) \\<in> r\\<^sup>*\n  (a, c) \\<in> r ^^ 0\n\ngoal (2 subgoals):\n 1. \\<And>a b c.\n       \\<lbrakk>a \\<in> UNIV; (a, b) \\<in> r\\<^sup>*;\n        (a, c) \\<in> r ^^ 0\\<rbrakk>\n       \\<Longrightarrow> (b, c) \\<in> r\\<^sup>\\<down>\n 2. \\<And>n a b c.\n       \\<lbrakk>\\<And>a b c.\n                   \\<lbrakk>a \\<in> UNIV; (a, b) \\<in> r\\<^sup>*;\n                    (a, c) \\<in> r ^^ n\\<rbrakk>\n                   \\<Longrightarrow> (b, c) \\<in> r\\<^sup>\\<down>;\n        a \\<in> UNIV; (a, b) \\<in> r\\<^sup>*;\n        (a, c) \\<in> r ^^ Suc n\\<rbrakk>\n       \\<Longrightarrow> (b, c) \\<in> r\\<^sup>\\<down>", "thus ?case"], ["proof (prove)\nusing this:\n  a \\<in> UNIV\n  (a, b) \\<in> r\\<^sup>*\n  (a, c) \\<in> r ^^ 0\n\ngoal (1 subgoal):\n 1. (b, c) \\<in> r\\<^sup>\\<down>", "by auto"], ["proof (state)\nthis:\n  (b, c) \\<in> r\\<^sup>\\<down>\n\ngoal (1 subgoal):\n 1. \\<And>n a b c.\n       \\<lbrakk>\\<And>a b c.\n                   \\<lbrakk>a \\<in> UNIV; (a, b) \\<in> r\\<^sup>*;\n                    (a, c) \\<in> r ^^ n\\<rbrakk>\n                   \\<Longrightarrow> (b, c) \\<in> r\\<^sup>\\<down>;\n        a \\<in> UNIV; (a, b) \\<in> r\\<^sup>*;\n        (a, c) \\<in> r ^^ Suc n\\<rbrakk>\n       \\<Longrightarrow> (b, c) \\<in> r\\<^sup>\\<down>", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>n a b c.\n       \\<lbrakk>\\<And>a b c.\n                   \\<lbrakk>a \\<in> UNIV; (a, b) \\<in> r\\<^sup>*;\n                    (a, c) \\<in> r ^^ n\\<rbrakk>\n                   \\<Longrightarrow> (b, c) \\<in> r\\<^sup>\\<down>;\n        a \\<in> UNIV; (a, b) \\<in> r\\<^sup>*;\n        (a, c) \\<in> r ^^ Suc n\\<rbrakk>\n       \\<Longrightarrow> (b, c) \\<in> r\\<^sup>\\<down>", "case (Suc m)"], ["proof (state)\nthis:\n  \\<lbrakk>?a \\<in> UNIV; (?a, ?b) \\<in> r\\<^sup>*;\n   (?a, ?c) \\<in> r ^^ m\\<rbrakk>\n  \\<Longrightarrow> (?b, ?c) \\<in> r\\<^sup>\\<down>\n  a \\<in> UNIV\n  (a, b) \\<in> r\\<^sup>*\n  (a, c) \\<in> r ^^ Suc m\n\ngoal (1 subgoal):\n 1. \\<And>n a b c.\n       \\<lbrakk>\\<And>a b c.\n                   \\<lbrakk>a \\<in> UNIV; (a, b) \\<in> r\\<^sup>*;\n                    (a, c) \\<in> r ^^ n\\<rbrakk>\n                   \\<Longrightarrow> (b, c) \\<in> r\\<^sup>\\<down>;\n        a \\<in> UNIV; (a, b) \\<in> r\\<^sup>*;\n        (a, c) \\<in> r ^^ Suc n\\<rbrakk>\n       \\<Longrightarrow> (b, c) \\<in> r\\<^sup>\\<down>", "from Suc(4)"], ["proof (chain)\npicking this:\n  (a, c) \\<in> r ^^ Suc m", "obtain d where ad: \"(a, d) \\<in> r^^m\" and dc: \"(d, c) \\<in> r\""], ["proof (prove)\nusing this:\n  (a, c) \\<in> r ^^ Suc m\n\ngoal (1 subgoal):\n 1. (\\<And>d.\n        \\<lbrakk>(a, d) \\<in> r ^^ m; (d, c) \\<in> r\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  (a, d) \\<in> r ^^ m\n  (d, c) \\<in> r\n\ngoal (1 subgoal):\n 1. \\<And>n a b c.\n       \\<lbrakk>\\<And>a b c.\n                   \\<lbrakk>a \\<in> UNIV; (a, b) \\<in> r\\<^sup>*;\n                    (a, c) \\<in> r ^^ n\\<rbrakk>\n                   \\<Longrightarrow> (b, c) \\<in> r\\<^sup>\\<down>;\n        a \\<in> UNIV; (a, b) \\<in> r\\<^sup>*;\n        (a, c) \\<in> r ^^ Suc n\\<rbrakk>\n       \\<Longrightarrow> (b, c) \\<in> r\\<^sup>\\<down>", "from Suc(1) [OF Suc(2) Suc(3) ad]"], ["proof (chain)\npicking this:\n  (b, d) \\<in> r\\<^sup>\\<down>", "have \"(b, d) \\<in> join r\""], ["proof (prove)\nusing this:\n  (b, d) \\<in> r\\<^sup>\\<down>\n\ngoal (1 subgoal):\n 1. (b, d) \\<in> r\\<^sup>\\<down>", "."], ["proof (state)\nthis:\n  (b, d) \\<in> r\\<^sup>\\<down>\n\ngoal (1 subgoal):\n 1. \\<And>n a b c.\n       \\<lbrakk>\\<And>a b c.\n                   \\<lbrakk>a \\<in> UNIV; (a, b) \\<in> r\\<^sup>*;\n                    (a, c) \\<in> r ^^ n\\<rbrakk>\n                   \\<Longrightarrow> (b, c) \\<in> r\\<^sup>\\<down>;\n        a \\<in> UNIV; (a, b) \\<in> r\\<^sup>*;\n        (a, c) \\<in> r ^^ Suc n\\<rbrakk>\n       \\<Longrightarrow> (b, c) \\<in> r\\<^sup>\\<down>", "with 1 dc joinE joinI [of b _ r c] join_rtrancl_join"], ["proof (chain)\npicking this:\n  \\<forall>x y z.\n     (x, y) \\<in> r \\<and> (x, z) \\<in> r\\<^sup>* \\<longrightarrow>\n     (y, z) \\<in> r\\<^sup>\\<down>\n  (d, c) \\<in> r\n  \\<lbrakk>(?a, ?b) \\<in> ?A\\<^sup>\\<down>;\n   \\<And>c.\n      \\<lbrakk>(?a, c) \\<in> ?A\\<^sup>*; (?b, c) \\<in> ?A\\<^sup>*\\<rbrakk>\n      \\<Longrightarrow> ?thesis\\<rbrakk>\n  \\<Longrightarrow> ?thesis\n  \\<lbrakk>(b, ?c) \\<in> r\\<^sup>*; (c, ?c) \\<in> r\\<^sup>*\\<rbrakk>\n  \\<Longrightarrow> (b, c) \\<in> r\\<^sup>\\<down>\n  \\<lbrakk>(?a, ?b) \\<in> ?A\\<^sup>\\<down>;\n   (?c, ?b) \\<in> ?A\\<^sup>*\\<rbrakk>\n  \\<Longrightarrow> (?a, ?c) \\<in> ?A\\<^sup>\\<down>\n  (b, d) \\<in> r\\<^sup>\\<down>", "show ?case"], ["proof (prove)\nusing this:\n  \\<forall>x y z.\n     (x, y) \\<in> r \\<and> (x, z) \\<in> r\\<^sup>* \\<longrightarrow>\n     (y, z) \\<in> r\\<^sup>\\<down>\n  (d, c) \\<in> r\n  \\<lbrakk>(?a, ?b) \\<in> ?A\\<^sup>\\<down>;\n   \\<And>c.\n      \\<lbrakk>(?a, c) \\<in> ?A\\<^sup>*; (?b, c) \\<in> ?A\\<^sup>*\\<rbrakk>\n      \\<Longrightarrow> ?thesis\\<rbrakk>\n  \\<Longrightarrow> ?thesis\n  \\<lbrakk>(b, ?c) \\<in> r\\<^sup>*; (c, ?c) \\<in> r\\<^sup>*\\<rbrakk>\n  \\<Longrightarrow> (b, c) \\<in> r\\<^sup>\\<down>\n  \\<lbrakk>(?a, ?b) \\<in> ?A\\<^sup>\\<down>;\n   (?c, ?b) \\<in> ?A\\<^sup>*\\<rbrakk>\n  \\<Longrightarrow> (?a, ?c) \\<in> ?A\\<^sup>\\<down>\n  (b, d) \\<in> r\\<^sup>\\<down>\n\ngoal (1 subgoal):\n 1. (b, c) \\<in> r\\<^sup>\\<down>", "by metis"], ["proof (state)\nthis:\n  (b, c) \\<in> r\\<^sup>\\<down>\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  (b, c) \\<in> r\\<^sup>\\<down>\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  CR r\n\ngoal:\nNo subgoals!", "qed"], ["", "definition strongly_confluent_on :: \"'a rel \\<Rightarrow> 'a set \\<Rightarrow> bool\"\nwhere \n  \"strongly_confluent_on r A \\<longleftrightarrow>\n    (\\<forall>x \\<in> A.  \\<forall>y z. (x, y) \\<in> r \\<and> (x, z) \\<in> r \\<longrightarrow> (\\<exists>u. (y, u) \\<in> r\\<^sup>* \\<and> (z, u) \\<in> r\\<^sup>=))\""], ["", "abbreviation strongly_confluent :: \"'a rel \\<Rightarrow> bool\"\nwhere\n  \"strongly_confluent r \\<equiv> strongly_confluent_on r UNIV\""], ["", "lemma strongly_confluent_on_E11:\n  \"strongly_confluent_on r A \\<Longrightarrow> x \\<in> A \\<Longrightarrow> (x, y) \\<in> r \\<Longrightarrow> (x, z) \\<in> r \\<Longrightarrow>\n    \\<exists>u. (y, u) \\<in> r\\<^sup>* \\<and> (z, u) \\<in> r\\<^sup>=\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>strongly_confluent_on r A; x \\<in> A; (x, y) \\<in> r;\n     (x, z) \\<in> r\\<rbrakk>\n    \\<Longrightarrow> \\<exists>u.\n                         (y, u) \\<in> r\\<^sup>* \\<and>\n                         (z, u) \\<in> r\\<^sup>=", "unfolding strongly_confluent_on_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<forall>x\\<in>A.\n                \\<forall>y z.\n                   (x, y) \\<in> r \\<and> (x, z) \\<in> r \\<longrightarrow>\n                   (\\<exists>u.\n                       (y, u) \\<in> r\\<^sup>* \\<and>\n                       (z, u) \\<in> r\\<^sup>=);\n     x \\<in> A; (x, y) \\<in> r; (x, z) \\<in> r\\<rbrakk>\n    \\<Longrightarrow> \\<exists>u.\n                         (y, u) \\<in> r\\<^sup>* \\<and>\n                         (z, u) \\<in> r\\<^sup>=", "by blast"], ["", "lemma strongly_confluentI [intro]:\n  \"\\<lbrakk>\\<And>x y z. (x, y) \\<in> r \\<Longrightarrow> (x, z) \\<in> r \\<Longrightarrow> \\<exists>u. (y, u) \\<in> r\\<^sup>* \\<and> (z, u) \\<in> r\\<^sup>=\\<rbrakk> \\<Longrightarrow> strongly_confluent r\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>x y z.\n        \\<lbrakk>(x, y) \\<in> r; (x, z) \\<in> r\\<rbrakk>\n        \\<Longrightarrow> \\<exists>u.\n                             (y, u) \\<in> r\\<^sup>* \\<and>\n                             (z, u) \\<in> r\\<^sup>=) \\<Longrightarrow>\n    strongly_confluent r", "unfolding strongly_confluent_on_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>x y z.\n        \\<lbrakk>(x, y) \\<in> r; (x, z) \\<in> r\\<rbrakk>\n        \\<Longrightarrow> \\<exists>u.\n                             (y, u) \\<in> r\\<^sup>* \\<and>\n                             (z, u) \\<in> r\\<^sup>=) \\<Longrightarrow>\n    \\<forall>x\\<in>UNIV.\n       \\<forall>y z.\n          (x, y) \\<in> r \\<and> (x, z) \\<in> r \\<longrightarrow>\n          (\\<exists>u. (y, u) \\<in> r\\<^sup>* \\<and> (z, u) \\<in> r\\<^sup>=)", "by auto"], ["", "lemma strongly_confluent_E1n:\n  assumes scr: \"strongly_confluent r\"\n  shows \"(x, y) \\<in> r\\<^sup>= \\<Longrightarrow> (x, z) \\<in> r ^^ n \\<Longrightarrow> \\<exists>u. (y, u) \\<in> r\\<^sup>* \\<and> (z, u) \\<in> r\\<^sup>=\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>(x, y) \\<in> r\\<^sup>=; (x, z) \\<in> r ^^ n\\<rbrakk>\n    \\<Longrightarrow> \\<exists>u.\n                         (y, u) \\<in> r\\<^sup>* \\<and>\n                         (z, u) \\<in> r\\<^sup>=", "proof (induct n arbitrary: x y z)"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>x y z.\n       \\<lbrakk>(x, y) \\<in> r\\<^sup>=; (x, z) \\<in> r ^^ 0\\<rbrakk>\n       \\<Longrightarrow> \\<exists>u.\n                            (y, u) \\<in> r\\<^sup>* \\<and>\n                            (z, u) \\<in> r\\<^sup>=\n 2. \\<And>n x y z.\n       \\<lbrakk>\\<And>x y z.\n                   \\<lbrakk>(x, y) \\<in> r\\<^sup>=;\n                    (x, z) \\<in> r ^^ n\\<rbrakk>\n                   \\<Longrightarrow> \\<exists>u.\n  (y, u) \\<in> r\\<^sup>* \\<and> (z, u) \\<in> r\\<^sup>=;\n        (x, y) \\<in> r\\<^sup>=; (x, z) \\<in> r ^^ Suc n\\<rbrakk>\n       \\<Longrightarrow> \\<exists>u.\n                            (y, u) \\<in> r\\<^sup>* \\<and>\n                            (z, u) \\<in> r\\<^sup>=", "case (Suc m)"], ["proof (state)\nthis:\n  \\<lbrakk>(?x, ?y) \\<in> r\\<^sup>=; (?x, ?z) \\<in> r ^^ m\\<rbrakk>\n  \\<Longrightarrow> \\<exists>u.\n                       (?y, u) \\<in> r\\<^sup>* \\<and>\n                       (?z, u) \\<in> r\\<^sup>=\n  (x, y) \\<in> r\\<^sup>=\n  (x, z) \\<in> r ^^ Suc m\n\ngoal (2 subgoals):\n 1. \\<And>x y z.\n       \\<lbrakk>(x, y) \\<in> r\\<^sup>=; (x, z) \\<in> r ^^ 0\\<rbrakk>\n       \\<Longrightarrow> \\<exists>u.\n                            (y, u) \\<in> r\\<^sup>* \\<and>\n                            (z, u) \\<in> r\\<^sup>=\n 2. \\<And>n x y z.\n       \\<lbrakk>\\<And>x y z.\n                   \\<lbrakk>(x, y) \\<in> r\\<^sup>=;\n                    (x, z) \\<in> r ^^ n\\<rbrakk>\n                   \\<Longrightarrow> \\<exists>u.\n  (y, u) \\<in> r\\<^sup>* \\<and> (z, u) \\<in> r\\<^sup>=;\n        (x, y) \\<in> r\\<^sup>=; (x, z) \\<in> r ^^ Suc n\\<rbrakk>\n       \\<Longrightarrow> \\<exists>u.\n                            (y, u) \\<in> r\\<^sup>* \\<and>\n                            (z, u) \\<in> r\\<^sup>=", "from Suc(3)"], ["proof (chain)\npicking this:\n  (x, z) \\<in> r ^^ Suc m", "obtain w where xw: \"(x, w) \\<in> r^^m\" and wz: \"(w, z) \\<in> r\""], ["proof (prove)\nusing this:\n  (x, z) \\<in> r ^^ Suc m\n\ngoal (1 subgoal):\n 1. (\\<And>w.\n        \\<lbrakk>(x, w) \\<in> r ^^ m; (w, z) \\<in> r\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  (x, w) \\<in> r ^^ m\n  (w, z) \\<in> r\n\ngoal (2 subgoals):\n 1. \\<And>x y z.\n       \\<lbrakk>(x, y) \\<in> r\\<^sup>=; (x, z) \\<in> r ^^ 0\\<rbrakk>\n       \\<Longrightarrow> \\<exists>u.\n                            (y, u) \\<in> r\\<^sup>* \\<and>\n                            (z, u) \\<in> r\\<^sup>=\n 2. \\<And>n x y z.\n       \\<lbrakk>\\<And>x y z.\n                   \\<lbrakk>(x, y) \\<in> r\\<^sup>=;\n                    (x, z) \\<in> r ^^ n\\<rbrakk>\n                   \\<Longrightarrow> \\<exists>u.\n  (y, u) \\<in> r\\<^sup>* \\<and> (z, u) \\<in> r\\<^sup>=;\n        (x, y) \\<in> r\\<^sup>=; (x, z) \\<in> r ^^ Suc n\\<rbrakk>\n       \\<Longrightarrow> \\<exists>u.\n                            (y, u) \\<in> r\\<^sup>* \\<and>\n                            (z, u) \\<in> r\\<^sup>=", "from Suc(1) [OF Suc(2) xw]"], ["proof (chain)\npicking this:\n  \\<exists>u. (y, u) \\<in> r\\<^sup>* \\<and> (w, u) \\<in> r\\<^sup>=", "obtain u where yu: \"(y, u) \\<in> r\\<^sup>*\" and wu: \"(w, u) \\<in> r\\<^sup>=\""], ["proof (prove)\nusing this:\n  \\<exists>u. (y, u) \\<in> r\\<^sup>* \\<and> (w, u) \\<in> r\\<^sup>=\n\ngoal (1 subgoal):\n 1. (\\<And>u.\n        \\<lbrakk>(y, u) \\<in> r\\<^sup>*; (w, u) \\<in> r\\<^sup>=\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  (y, u) \\<in> r\\<^sup>*\n  (w, u) \\<in> r\\<^sup>=\n\ngoal (2 subgoals):\n 1. \\<And>x y z.\n       \\<lbrakk>(x, y) \\<in> r\\<^sup>=; (x, z) \\<in> r ^^ 0\\<rbrakk>\n       \\<Longrightarrow> \\<exists>u.\n                            (y, u) \\<in> r\\<^sup>* \\<and>\n                            (z, u) \\<in> r\\<^sup>=\n 2. \\<And>n x y z.\n       \\<lbrakk>\\<And>x y z.\n                   \\<lbrakk>(x, y) \\<in> r\\<^sup>=;\n                    (x, z) \\<in> r ^^ n\\<rbrakk>\n                   \\<Longrightarrow> \\<exists>u.\n  (y, u) \\<in> r\\<^sup>* \\<and> (z, u) \\<in> r\\<^sup>=;\n        (x, y) \\<in> r\\<^sup>=; (x, z) \\<in> r ^^ Suc n\\<rbrakk>\n       \\<Longrightarrow> \\<exists>u.\n                            (y, u) \\<in> r\\<^sup>* \\<and>\n                            (z, u) \\<in> r\\<^sup>=", "from strongly_confluent_on_E11 [OF scr, of w] wz yu wu"], ["proof (chain)\npicking this:\n  \\<lbrakk>w \\<in> UNIV; (w, ?y) \\<in> r; (w, ?z) \\<in> r\\<rbrakk>\n  \\<Longrightarrow> \\<exists>u.\n                       (?y, u) \\<in> r\\<^sup>* \\<and>\n                       (?z, u) \\<in> r\\<^sup>=\n  (w, z) \\<in> r\n  (y, u) \\<in> r\\<^sup>*\n  (w, u) \\<in> r\\<^sup>=", "show ?case"], ["proof (prove)\nusing this:\n  \\<lbrakk>w \\<in> UNIV; (w, ?y) \\<in> r; (w, ?z) \\<in> r\\<rbrakk>\n  \\<Longrightarrow> \\<exists>u.\n                       (?y, u) \\<in> r\\<^sup>* \\<and>\n                       (?z, u) \\<in> r\\<^sup>=\n  (w, z) \\<in> r\n  (y, u) \\<in> r\\<^sup>*\n  (w, u) \\<in> r\\<^sup>=\n\ngoal (1 subgoal):\n 1. \\<exists>u. (y, u) \\<in> r\\<^sup>* \\<and> (z, u) \\<in> r\\<^sup>=", "by (metis UnE converse_rtrancl_into_rtrancl iso_tuple_UNIV_I pair_in_Id_conv rtrancl_trans)"], ["proof (state)\nthis:\n  \\<exists>u. (y, u) \\<in> r\\<^sup>* \\<and> (z, u) \\<in> r\\<^sup>=\n\ngoal (1 subgoal):\n 1. \\<And>x y z.\n       \\<lbrakk>(x, y) \\<in> r\\<^sup>=; (x, z) \\<in> r ^^ 0\\<rbrakk>\n       \\<Longrightarrow> \\<exists>u.\n                            (y, u) \\<in> r\\<^sup>* \\<and>\n                            (z, u) \\<in> r\\<^sup>=", "qed auto"], ["", "(* Lemma 2.5 in Huet: Confluent Reductions *)"], ["", "lemma strong_confluence_imp_CR: \n  assumes \"strongly_confluent r\"\n  shows \"CR r\""], ["proof (prove)\ngoal (1 subgoal):\n 1. CR r", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. CR r", "{"], ["proof (state)\ngoal (1 subgoal):\n 1. CR r", "fix x y z"], ["proof (state)\ngoal (1 subgoal):\n 1. CR r", "have \"(x, y) \\<in> r \\<Longrightarrow> (x, z) \\<in> r\\<^sup>* \\<Longrightarrow> (y, z) \\<in> join r\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>(x, y) \\<in> r; (x, z) \\<in> r\\<^sup>*\\<rbrakk>\n    \\<Longrightarrow> (y, z) \\<in> r\\<^sup>\\<down>", "by (cases \"x = y\", insert strongly_confluent_E1n [OF assms], blast+)"], ["proof (state)\nthis:\n  \\<lbrakk>(x, y) \\<in> r; (x, z) \\<in> r\\<^sup>*\\<rbrakk>\n  \\<Longrightarrow> (y, z) \\<in> r\\<^sup>\\<down>\n\ngoal (1 subgoal):\n 1. CR r", "}"], ["proof (state)\nthis:\n  \\<lbrakk>(?x2, ?y2) \\<in> r; (?x2, ?z2) \\<in> r\\<^sup>*\\<rbrakk>\n  \\<Longrightarrow> (?y2, ?z2) \\<in> r\\<^sup>\\<down>\n\ngoal (1 subgoal):\n 1. CR r", "then"], ["proof (chain)\npicking this:\n  \\<lbrakk>(?x2, ?y2) \\<in> r; (?x2, ?z2) \\<in> r\\<^sup>*\\<rbrakk>\n  \\<Longrightarrow> (?y2, ?z2) \\<in> r\\<^sup>\\<down>", "show \"CR r\""], ["proof (prove)\nusing this:\n  \\<lbrakk>(?x2, ?y2) \\<in> r; (?x2, ?z2) \\<in> r\\<^sup>*\\<rbrakk>\n  \\<Longrightarrow> (?y2, ?z2) \\<in> r\\<^sup>\\<down>\n\ngoal (1 subgoal):\n 1. CR r", "using partially_localize_CR"], ["proof (prove)\nusing this:\n  \\<lbrakk>(?x2, ?y2) \\<in> r; (?x2, ?z2) \\<in> r\\<^sup>*\\<rbrakk>\n  \\<Longrightarrow> (?y2, ?z2) \\<in> r\\<^sup>\\<down>\n  CR ?r =\n  (\\<forall>x y z.\n      (x, y) \\<in> ?r \\<and> (x, z) \\<in> ?r\\<^sup>* \\<longrightarrow>\n      (y, z) \\<in> ?r\\<^sup>\\<down>)\n\ngoal (1 subgoal):\n 1. CR r", "by blast"], ["proof (state)\nthis:\n  CR r\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma WCR_alt_def: \"WCR A \\<longleftrightarrow> A\\<inverse> O A \\<subseteq> A\\<^sup>\\<down>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. WCR A = (A\\<inverse> O A \\<subseteq> A\\<^sup>\\<down>)", "by (auto simp: WCR_defs)"], ["", "lemma NF_imp_SN_on: \"a \\<in> NF R \\<Longrightarrow> SN_on R {a}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. a \\<in> NF R \\<Longrightarrow> SN_on R {a}", "unfolding SN_on_def NF_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. a \\<in> {a. R `` {a} = {}} \\<Longrightarrow>\n    \\<nexists>f. f 0 \\<in> {a} \\<and> (\\<forall>i. (f i, f (Suc i)) \\<in> R)", "by blast"], ["", "lemma Union_sym: \"(s, t) \\<in> (\\<Union>i\\<le>n. (S i)\\<^sup>\\<leftrightarrow>) \\<longleftrightarrow> (t, s) \\<in> (\\<Union>i\\<le>n. (S i)\\<^sup>\\<leftrightarrow>)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. ((s, t) \\<in> (\\<Union>i\\<le>n. (S i)\\<^sup>\\<leftrightarrow>)) =\n    ((t, s) \\<in> (\\<Union>i\\<le>n. (S i)\\<^sup>\\<leftrightarrow>))", "by auto"], ["", "lemma peak_iff: \"(x, y) \\<in> A\\<inverse> O B \\<longleftrightarrow> (\\<exists>u. (u, x) \\<in> A \\<and> (u, y) \\<in> B)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. ((x, y) \\<in> A\\<inverse> O B) =\n    (\\<exists>u. (u, x) \\<in> A \\<and> (u, y) \\<in> B)", "by auto"], ["", "lemma CR_NF_conv:\n  assumes \"CR r\" and \"t \\<in> NF r\" and \"(u, t) \\<in> r\\<^sup>\\<leftrightarrow>\\<^sup>*\"\n  shows \"(u, t) \\<in> r\\<^sup>!\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (u, t) \\<in> r\\<^sup>!", "using assms"], ["proof (prove)\nusing this:\n  CR r\n  t \\<in> NF r\n  (u, t) \\<in> r\\<^sup>\\<leftrightarrow>\\<^sup>*\n\ngoal (1 subgoal):\n 1. (u, t) \\<in> r\\<^sup>!", "unfolding CR_imp_conversionIff_join [OF \\<open>CR r\\<close>]"], ["proof (prove)\nusing this:\n  CR r\n  t \\<in> NF r\n  (u, t) \\<in> r\\<^sup>\\<down>\n\ngoal (1 subgoal):\n 1. (u, t) \\<in> r\\<^sup>!", "by (auto simp: NF_iff_no_step normalizability_def)\n   (metis (mono_tags) converse_rtranclE joinE)"], ["", "lemma NF_join_imp_reach:\n  assumes \"y \\<in> NF A\" and \"(x, y) \\<in> A\\<^sup>\\<down>\"\n  shows \"(x, y) \\<in> A\\<^sup>*\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (x, y) \\<in> A\\<^sup>*", "using assms"], ["proof (prove)\nusing this:\n  y \\<in> NF A\n  (x, y) \\<in> A\\<^sup>\\<down>\n\ngoal (1 subgoal):\n 1. (x, y) \\<in> A\\<^sup>*", "by (auto simp: join_def) (metis NF_not_suc rtrancl_converseD)"], ["", "lemma conversion_O_conversion [simp]:\n  \"A\\<^sup>\\<leftrightarrow>\\<^sup>* O A\\<^sup>\\<leftrightarrow>\\<^sup>* = A\\<^sup>\\<leftrightarrow>\\<^sup>*\""], ["proof (prove)\ngoal (1 subgoal):\n 1. A\\<^sup>\\<leftrightarrow>\\<^sup>* O A\\<^sup>\\<leftrightarrow>\\<^sup>* =\n    A\\<^sup>\\<leftrightarrow>\\<^sup>*", "by (force simp: converse_def)"], ["", "lemma trans_O_iff: \"trans A \\<longleftrightarrow> A O A \\<subseteq> A\""], ["proof (prove)\ngoal (1 subgoal):\n 1. trans A = (A O A \\<subseteq> A)", "unfolding trans_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<forall>x y z.\n        (x, y) \\<in> A \\<longrightarrow>\n        (y, z) \\<in> A \\<longrightarrow> (x, z) \\<in> A) =\n    (A O A \\<subseteq> A)", "by auto"], ["", "lemma refl_O_iff: \"refl A \\<longleftrightarrow> Id \\<subseteq> A\""], ["proof (prove)\ngoal (1 subgoal):\n 1. refl A = (Id \\<subseteq> A)", "unfolding refl_on_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. (A \\<subseteq> UNIV \\<times> UNIV \\<and>\n     (\\<forall>x\\<in>UNIV. (x, x) \\<in> A)) =\n    (Id \\<subseteq> A)", "by auto"], ["", "lemma relpow_Suc: \"r ^^ Suc n = r O r ^^ n\""], ["proof (prove)\ngoal (1 subgoal):\n 1. r ^^ Suc n = r O r ^^ n", "using relpow_add[of 1 n r]"], ["proof (prove)\nusing this:\n  r ^^ (1 + n) = r ^^ 1 O r ^^ n\n\ngoal (1 subgoal):\n 1. r ^^ Suc n = r O r ^^ n", "by auto"], ["", "lemma converse_power: fixes r :: \"'a rel\" shows \"(r\\<inverse>)^^n = (r^^n)\\<inverse>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. r\\<inverse> ^^ n = (r ^^ n)\\<inverse>", "proof (induct n)"], ["proof (state)\ngoal (2 subgoals):\n 1. r\\<inverse> ^^ 0 = (r ^^ 0)\\<inverse>\n 2. \\<And>n.\n       r\\<inverse> ^^ n = (r ^^ n)\\<inverse> \\<Longrightarrow>\n       r\\<inverse> ^^ Suc n = (r ^^ Suc n)\\<inverse>", "case (Suc n)"], ["proof (state)\nthis:\n  r\\<inverse> ^^ n = (r ^^ n)\\<inverse>\n\ngoal (2 subgoals):\n 1. r\\<inverse> ^^ 0 = (r ^^ 0)\\<inverse>\n 2. \\<And>n.\n       r\\<inverse> ^^ n = (r ^^ n)\\<inverse> \\<Longrightarrow>\n       r\\<inverse> ^^ Suc n = (r ^^ Suc n)\\<inverse>", "show ?case"], ["proof (prove)\ngoal (1 subgoal):\n 1. r\\<inverse> ^^ Suc n = (r ^^ Suc n)\\<inverse>", "unfolding relpow.simps(2)[of _ \"r\\<inverse>\"] relpow_Suc[of _ r]"], ["proof (prove)\ngoal (1 subgoal):\n 1. r\\<inverse> ^^ n O r\\<inverse> = (r O r ^^ n)\\<inverse>", "by (simp add: Suc converse_relcomp)"], ["proof (state)\nthis:\n  r\\<inverse> ^^ Suc n = (r ^^ Suc n)\\<inverse>\n\ngoal (1 subgoal):\n 1. r\\<inverse> ^^ 0 = (r ^^ 0)\\<inverse>", "qed simp"], ["", "lemma conversion_mono: \"A \\<subseteq> B \\<Longrightarrow> A\\<^sup>\\<leftrightarrow>\\<^sup>* \\<subseteq> B\\<^sup>\\<leftrightarrow>\\<^sup>*\""], ["proof (prove)\ngoal (1 subgoal):\n 1. A \\<subseteq> B \\<Longrightarrow>\n    A\\<^sup>\\<leftrightarrow>\\<^sup>*\n    \\<subseteq> B\\<^sup>\\<leftrightarrow>\\<^sup>*", "by (auto simp: conversion_def intro!: rtrancl_mono)"], ["", "lemma conversion_conversion_idemp [simp]: \"(A\\<^sup>\\<leftrightarrow>\\<^sup>*)\\<^sup>\\<leftrightarrow>\\<^sup>* = A\\<^sup>\\<leftrightarrow>\\<^sup>*\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (A\\<^sup>\\<leftrightarrow>\\<^sup>*)\\<^sup>\\<leftrightarrow>\\<^sup>* =\n    A\\<^sup>\\<leftrightarrow>\\<^sup>*", "by auto"], ["", "lemma lower_set_imp_not_SN_on:\n  assumes \"s \\<in> X\" \"\\<forall>t \\<in> X. \\<exists>u \\<in> X. (t,u) \\<in> R\" shows \"\\<not> SN_on R {s}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<not> SN_on R {s}", "by (meson SN_on_imp_on_minimal assms)"], ["", "lemma SN_on_Image_rtrancl_iff[simp]: \"SN_on R (R\\<^sup>* `` X) \\<longleftrightarrow> SN_on R X\" (is \"?l = ?r\")"], ["proof (prove)\ngoal (1 subgoal):\n 1. SN_on R (R\\<^sup>* `` X) = SN_on R X", "proof(intro iffI)"], ["proof (state)\ngoal (2 subgoals):\n 1. SN_on R (R\\<^sup>* `` X) \\<Longrightarrow> SN_on R X\n 2. SN_on R X \\<Longrightarrow> SN_on R (R\\<^sup>* `` X)", "assume \"?l\""], ["proof (state)\nthis:\n  SN_on R (R\\<^sup>* `` X)\n\ngoal (2 subgoals):\n 1. SN_on R (R\\<^sup>* `` X) \\<Longrightarrow> SN_on R X\n 2. SN_on R X \\<Longrightarrow> SN_on R (R\\<^sup>* `` X)", "show \"?r\""], ["proof (prove)\ngoal (1 subgoal):\n 1. SN_on R X", "by (rule SN_on_subset2[OF _ \\<open>?l\\<close>], auto)"], ["proof (state)\nthis:\n  SN_on R X\n\ngoal (1 subgoal):\n 1. SN_on R X \\<Longrightarrow> SN_on R (R\\<^sup>* `` X)", "qed (fact SN_on_Image_rtrancl)"], ["", "lemma O_mono1: \"R \\<subseteq> R' \\<Longrightarrow> S O R \\<subseteq> S O R'\""], ["proof (prove)\ngoal (1 subgoal):\n 1. R \\<subseteq> R' \\<Longrightarrow> S O R \\<subseteq> S O R'", "by auto"], ["", "lemma O_mono2: \"R \\<subseteq> R' \\<Longrightarrow> R O T \\<subseteq> R' O T\""], ["proof (prove)\ngoal (1 subgoal):\n 1. R \\<subseteq> R' \\<Longrightarrow> R O T \\<subseteq> R' O T", "by auto"], ["", "lemma rtrancl_O_shift: \"(S O R)\\<^sup>* O S = S O (R O S)\\<^sup>*\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (S O R)\\<^sup>* O S = S O (R O S)\\<^sup>*", "(* regexp does not work, since R is of type 'a x 'b set, not 'a rel *)"], ["proof (prove)\ngoal (1 subgoal):\n 1. (S O R)\\<^sup>* O S = S O (R O S)\\<^sup>*", "proof(intro equalityI subrelI)"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>x y.\n       (x, y) \\<in> (S O R)\\<^sup>* O S \\<Longrightarrow>\n       (x, y) \\<in> S O (R O S)\\<^sup>*\n 2. \\<And>x y.\n       (x, y) \\<in> S O (R O S)\\<^sup>* \\<Longrightarrow>\n       (x, y) \\<in> (S O R)\\<^sup>* O S", "fix x y"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>x y.\n       (x, y) \\<in> (S O R)\\<^sup>* O S \\<Longrightarrow>\n       (x, y) \\<in> S O (R O S)\\<^sup>*\n 2. \\<And>x y.\n       (x, y) \\<in> S O (R O S)\\<^sup>* \\<Longrightarrow>\n       (x, y) \\<in> (S O R)\\<^sup>* O S", "assume \"(x,y) \\<in> (S O R)\\<^sup>* O S\""], ["proof (state)\nthis:\n  (x, y) \\<in> (S O R)\\<^sup>* O S\n\ngoal (2 subgoals):\n 1. \\<And>x y.\n       (x, y) \\<in> (S O R)\\<^sup>* O S \\<Longrightarrow>\n       (x, y) \\<in> S O (R O S)\\<^sup>*\n 2. \\<And>x y.\n       (x, y) \\<in> S O (R O S)\\<^sup>* \\<Longrightarrow>\n       (x, y) \\<in> (S O R)\\<^sup>* O S", "then"], ["proof (chain)\npicking this:\n  (x, y) \\<in> (S O R)\\<^sup>* O S", "obtain n where \"(x,y) \\<in> (S O R)^^n O S\""], ["proof (prove)\nusing this:\n  (x, y) \\<in> (S O R)\\<^sup>* O S\n\ngoal (1 subgoal):\n 1. (\\<And>n.\n        (x, y) \\<in> (S O R) ^^ n O S \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by blast"], ["proof (state)\nthis:\n  (x, y) \\<in> (S O R) ^^ n O S\n\ngoal (2 subgoals):\n 1. \\<And>x y.\n       (x, y) \\<in> (S O R)\\<^sup>* O S \\<Longrightarrow>\n       (x, y) \\<in> S O (R O S)\\<^sup>*\n 2. \\<And>x y.\n       (x, y) \\<in> S O (R O S)\\<^sup>* \\<Longrightarrow>\n       (x, y) \\<in> (S O R)\\<^sup>* O S", "then"], ["proof (chain)\npicking this:\n  (x, y) \\<in> (S O R) ^^ n O S", "show \"(x,y) \\<in> S O (R O S)\\<^sup>*\""], ["proof (prove)\nusing this:\n  (x, y) \\<in> (S O R) ^^ n O S\n\ngoal (1 subgoal):\n 1. (x, y) \\<in> S O (R O S)\\<^sup>*", "proof(induct n arbitrary: y)"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>y.\n       (x, y) \\<in> (S O R) ^^ 0 O S \\<Longrightarrow>\n       (x, y) \\<in> S O (R O S)\\<^sup>*\n 2. \\<And>n y.\n       \\<lbrakk>\\<And>y.\n                   (x, y) \\<in> (S O R) ^^ n O S \\<Longrightarrow>\n                   (x, y) \\<in> S O (R O S)\\<^sup>*;\n        (x, y) \\<in> (S O R) ^^ Suc n O S\\<rbrakk>\n       \\<Longrightarrow> (x, y) \\<in> S O (R O S)\\<^sup>*", "case IH: (Suc n)"], ["proof (state)\nthis:\n  (x, ?y) \\<in> (S O R) ^^ n O S \\<Longrightarrow>\n  (x, ?y) \\<in> S O (R O S)\\<^sup>*\n  (x, y) \\<in> (S O R) ^^ Suc n O S\n\ngoal (2 subgoals):\n 1. \\<And>y.\n       (x, y) \\<in> (S O R) ^^ 0 O S \\<Longrightarrow>\n       (x, y) \\<in> S O (R O S)\\<^sup>*\n 2. \\<And>n y.\n       \\<lbrakk>\\<And>y.\n                   (x, y) \\<in> (S O R) ^^ n O S \\<Longrightarrow>\n                   (x, y) \\<in> S O (R O S)\\<^sup>*;\n        (x, y) \\<in> (S O R) ^^ Suc n O S\\<rbrakk>\n       \\<Longrightarrow> (x, y) \\<in> S O (R O S)\\<^sup>*", "then"], ["proof (chain)\npicking this:\n  (x, ?y) \\<in> (S O R) ^^ n O S \\<Longrightarrow>\n  (x, ?y) \\<in> S O (R O S)\\<^sup>*\n  (x, y) \\<in> (S O R) ^^ Suc n O S", "obtain z where xz: \"(x,z) \\<in> (S O R)^^n O S\" and zy: \"(z,y) \\<in> R O S\""], ["proof (prove)\nusing this:\n  (x, ?y) \\<in> (S O R) ^^ n O S \\<Longrightarrow>\n  (x, ?y) \\<in> S O (R O S)\\<^sup>*\n  (x, y) \\<in> (S O R) ^^ Suc n O S\n\ngoal (1 subgoal):\n 1. (\\<And>z.\n        \\<lbrakk>(x, z) \\<in> (S O R) ^^ n O S; (z, y) \\<in> R O S\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  (x, z) \\<in> (S O R) ^^ n O S\n  (z, y) \\<in> R O S\n\ngoal (2 subgoals):\n 1. \\<And>y.\n       (x, y) \\<in> (S O R) ^^ 0 O S \\<Longrightarrow>\n       (x, y) \\<in> S O (R O S)\\<^sup>*\n 2. \\<And>n y.\n       \\<lbrakk>\\<And>y.\n                   (x, y) \\<in> (S O R) ^^ n O S \\<Longrightarrow>\n                   (x, y) \\<in> S O (R O S)\\<^sup>*;\n        (x, y) \\<in> (S O R) ^^ Suc n O S\\<rbrakk>\n       \\<Longrightarrow> (x, y) \\<in> S O (R O S)\\<^sup>*", "from IH.hyps[OF xz] zy"], ["proof (chain)\npicking this:\n  (x, z) \\<in> S O (R O S)\\<^sup>*\n  (z, y) \\<in> R O S", "have \"(x,y) \\<in> S O (R O S)\\<^sup>* O R O S\""], ["proof (prove)\nusing this:\n  (x, z) \\<in> S O (R O S)\\<^sup>*\n  (z, y) \\<in> R O S\n\ngoal (1 subgoal):\n 1. (x, y) \\<in> S O (R O S)\\<^sup>* O R O S", "by auto"], ["proof (state)\nthis:\n  (x, y) \\<in> S O (R O S)\\<^sup>* O R O S\n\ngoal (2 subgoals):\n 1. \\<And>y.\n       (x, y) \\<in> (S O R) ^^ 0 O S \\<Longrightarrow>\n       (x, y) \\<in> S O (R O S)\\<^sup>*\n 2. \\<And>n y.\n       \\<lbrakk>\\<And>y.\n                   (x, y) \\<in> (S O R) ^^ n O S \\<Longrightarrow>\n                   (x, y) \\<in> S O (R O S)\\<^sup>*;\n        (x, y) \\<in> (S O R) ^^ Suc n O S\\<rbrakk>\n       \\<Longrightarrow> (x, y) \\<in> S O (R O S)\\<^sup>*", "then"], ["proof (chain)\npicking this:\n  (x, y) \\<in> S O (R O S)\\<^sup>* O R O S", "show ?case"], ["proof (prove)\nusing this:\n  (x, y) \\<in> S O (R O S)\\<^sup>* O R O S\n\ngoal (1 subgoal):\n 1. (x, y) \\<in> S O (R O S)\\<^sup>*", "by(fold trancl_unfold_right, auto)"], ["proof (state)\nthis:\n  (x, y) \\<in> S O (R O S)\\<^sup>*\n\ngoal (1 subgoal):\n 1. \\<And>y.\n       (x, y) \\<in> (S O R) ^^ 0 O S \\<Longrightarrow>\n       (x, y) \\<in> S O (R O S)\\<^sup>*", "qed auto"], ["proof (state)\nthis:\n  (x, y) \\<in> S O (R O S)\\<^sup>*\n\ngoal (1 subgoal):\n 1. \\<And>x y.\n       (x, y) \\<in> S O (R O S)\\<^sup>* \\<Longrightarrow>\n       (x, y) \\<in> (S O R)\\<^sup>* O S", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x y.\n       (x, y) \\<in> S O (R O S)\\<^sup>* \\<Longrightarrow>\n       (x, y) \\<in> (S O R)\\<^sup>* O S", "fix x y"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x y.\n       (x, y) \\<in> S O (R O S)\\<^sup>* \\<Longrightarrow>\n       (x, y) \\<in> (S O R)\\<^sup>* O S", "assume \"(x,y) \\<in> S O (R O S)\\<^sup>*\""], ["proof (state)\nthis:\n  (x, y) \\<in> S O (R O S)\\<^sup>*\n\ngoal (1 subgoal):\n 1. \\<And>x y.\n       (x, y) \\<in> S O (R O S)\\<^sup>* \\<Longrightarrow>\n       (x, y) \\<in> (S O R)\\<^sup>* O S", "then"], ["proof (chain)\npicking this:\n  (x, y) \\<in> S O (R O S)\\<^sup>*", "obtain n where \"(x,y) \\<in> S O (R O S)^^n\""], ["proof (prove)\nusing this:\n  (x, y) \\<in> S O (R O S)\\<^sup>*\n\ngoal (1 subgoal):\n 1. (\\<And>n.\n        (x, y) \\<in> S O (R O S) ^^ n \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by blast"], ["proof (state)\nthis:\n  (x, y) \\<in> S O (R O S) ^^ n\n\ngoal (1 subgoal):\n 1. \\<And>x y.\n       (x, y) \\<in> S O (R O S)\\<^sup>* \\<Longrightarrow>\n       (x, y) \\<in> (S O R)\\<^sup>* O S", "then"], ["proof (chain)\npicking this:\n  (x, y) \\<in> S O (R O S) ^^ n", "show \"(x,y) \\<in> (S O R)\\<^sup>* O S\""], ["proof (prove)\nusing this:\n  (x, y) \\<in> S O (R O S) ^^ n\n\ngoal (1 subgoal):\n 1. (x, y) \\<in> (S O R)\\<^sup>* O S", "proof(induct n arbitrary: y)"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>y.\n       (x, y) \\<in> S O (R O S) ^^ 0 \\<Longrightarrow>\n       (x, y) \\<in> (S O R)\\<^sup>* O S\n 2. \\<And>n y.\n       \\<lbrakk>\\<And>y.\n                   (x, y) \\<in> S O (R O S) ^^ n \\<Longrightarrow>\n                   (x, y) \\<in> (S O R)\\<^sup>* O S;\n        (x, y) \\<in> S O (R O S) ^^ Suc n\\<rbrakk>\n       \\<Longrightarrow> (x, y) \\<in> (S O R)\\<^sup>* O S", "case IH: (Suc n)"], ["proof (state)\nthis:\n  (x, ?y) \\<in> S O (R O S) ^^ n \\<Longrightarrow>\n  (x, ?y) \\<in> (S O R)\\<^sup>* O S\n  (x, y) \\<in> S O (R O S) ^^ Suc n\n\ngoal (2 subgoals):\n 1. \\<And>y.\n       (x, y) \\<in> S O (R O S) ^^ 0 \\<Longrightarrow>\n       (x, y) \\<in> (S O R)\\<^sup>* O S\n 2. \\<And>n y.\n       \\<lbrakk>\\<And>y.\n                   (x, y) \\<in> S O (R O S) ^^ n \\<Longrightarrow>\n                   (x, y) \\<in> (S O R)\\<^sup>* O S;\n        (x, y) \\<in> S O (R O S) ^^ Suc n\\<rbrakk>\n       \\<Longrightarrow> (x, y) \\<in> (S O R)\\<^sup>* O S", "then"], ["proof (chain)\npicking this:\n  (x, ?y) \\<in> S O (R O S) ^^ n \\<Longrightarrow>\n  (x, ?y) \\<in> (S O R)\\<^sup>* O S\n  (x, y) \\<in> S O (R O S) ^^ Suc n", "obtain z where xz: \"(x,z) \\<in> S O (R O S)^^n\" and zy: \"(z,y) \\<in> R O S\""], ["proof (prove)\nusing this:\n  (x, ?y) \\<in> S O (R O S) ^^ n \\<Longrightarrow>\n  (x, ?y) \\<in> (S O R)\\<^sup>* O S\n  (x, y) \\<in> S O (R O S) ^^ Suc n\n\ngoal (1 subgoal):\n 1. (\\<And>z.\n        \\<lbrakk>(x, z) \\<in> S O (R O S) ^^ n; (z, y) \\<in> R O S\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  (x, z) \\<in> S O (R O S) ^^ n\n  (z, y) \\<in> R O S\n\ngoal (2 subgoals):\n 1. \\<And>y.\n       (x, y) \\<in> S O (R O S) ^^ 0 \\<Longrightarrow>\n       (x, y) \\<in> (S O R)\\<^sup>* O S\n 2. \\<And>n y.\n       \\<lbrakk>\\<And>y.\n                   (x, y) \\<in> S O (R O S) ^^ n \\<Longrightarrow>\n                   (x, y) \\<in> (S O R)\\<^sup>* O S;\n        (x, y) \\<in> S O (R O S) ^^ Suc n\\<rbrakk>\n       \\<Longrightarrow> (x, y) \\<in> (S O R)\\<^sup>* O S", "from IH.hyps[OF xz] zy"], ["proof (chain)\npicking this:\n  (x, z) \\<in> (S O R)\\<^sup>* O S\n  (z, y) \\<in> R O S", "have \"(x,y) \\<in> ((S O R)\\<^sup>* O S O R) O S\""], ["proof (prove)\nusing this:\n  (x, z) \\<in> (S O R)\\<^sup>* O S\n  (z, y) \\<in> R O S\n\ngoal (1 subgoal):\n 1. (x, y) \\<in> ((S O R)\\<^sup>* O S O R) O S", "by auto"], ["proof (state)\nthis:\n  (x, y) \\<in> ((S O R)\\<^sup>* O S O R) O S\n\ngoal (2 subgoals):\n 1. \\<And>y.\n       (x, y) \\<in> S O (R O S) ^^ 0 \\<Longrightarrow>\n       (x, y) \\<in> (S O R)\\<^sup>* O S\n 2. \\<And>n y.\n       \\<lbrakk>\\<And>y.\n                   (x, y) \\<in> S O (R O S) ^^ n \\<Longrightarrow>\n                   (x, y) \\<in> (S O R)\\<^sup>* O S;\n        (x, y) \\<in> S O (R O S) ^^ Suc n\\<rbrakk>\n       \\<Longrightarrow> (x, y) \\<in> (S O R)\\<^sup>* O S", "from this[folded trancl_unfold_right]"], ["proof (chain)\npicking this:\n  (x, y) \\<in> (S O R)\\<^sup>+ O S", "show ?case"], ["proof (prove)\nusing this:\n  (x, y) \\<in> (S O R)\\<^sup>+ O S\n\ngoal (1 subgoal):\n 1. (x, y) \\<in> (S O R)\\<^sup>* O S", "by (rule rev_subsetD[OF _ O_mono2], auto simp: O_assoc)"], ["proof (state)\nthis:\n  (x, y) \\<in> (S O R)\\<^sup>* O S\n\ngoal (1 subgoal):\n 1. \\<And>y.\n       (x, y) \\<in> S O (R O S) ^^ 0 \\<Longrightarrow>\n       (x, y) \\<in> (S O R)\\<^sup>* O S", "qed auto"], ["proof (state)\nthis:\n  (x, y) \\<in> (S O R)\\<^sup>* O S\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma O_rtrancl_O_O: \"R O (S O R)\\<^sup>* O S = (R O S)\\<^sup>+\""], ["proof (prove)\ngoal (1 subgoal):\n 1. R O (S O R)\\<^sup>* O S = (R O S)\\<^sup>+", "by (unfold rtrancl_O_shift trancl_unfold_left, auto)"], ["", "lemma SN_on_subset_SN_terms:\n  assumes SN: \"SN_on R X\" shows \"X \\<subseteq> {x. SN_on R {x}}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. X \\<subseteq> {x. SN_on R {x}}", "proof(intro subsetI, unfold mem_Collect_eq)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x. x \\<in> X \\<Longrightarrow> SN_on R {x}", "fix x"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x. x \\<in> X \\<Longrightarrow> SN_on R {x}", "assume x: \"x \\<in> X\""], ["proof (state)\nthis:\n  x \\<in> X\n\ngoal (1 subgoal):\n 1. \\<And>x. x \\<in> X \\<Longrightarrow> SN_on R {x}", "show \"SN_on R {x}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. SN_on R {x}", "by (rule SN_on_subset2[OF _ SN], insert x, auto)"], ["proof (state)\nthis:\n  SN_on R {x}\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma SN_on_Un2:\n  assumes \"SN_on R X\" and \"SN_on R Y\" shows \"SN_on R (X \\<union> Y)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. SN_on R (X \\<union> Y)", "using assms"], ["proof (prove)\nusing this:\n  SN_on R X\n  SN_on R Y\n\ngoal (1 subgoal):\n 1. SN_on R (X \\<union> Y)", "by fast"], ["", "lemma SN_on_UN:\n  assumes \"\\<And>x. SN_on R (X x)\" shows \"SN_on R (\\<Union>x. X x)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. SN_on R (\\<Union> (range X))", "using assms"], ["proof (prove)\nusing this:\n  SN_on R (X ?x)\n\ngoal (1 subgoal):\n 1. SN_on R (\\<Union> (range X))", "by fast"], ["", "lemma Image_subsetI: \"R \\<subseteq> R' \\<Longrightarrow> R `` X \\<subseteq> R' `` X\""], ["proof (prove)\ngoal (1 subgoal):\n 1. R \\<subseteq> R' \\<Longrightarrow> R `` X \\<subseteq> R' `` X", "by auto"], ["", "lemma SN_on_O_comm:\n  assumes SN: \"SN_on ((R :: ('a\\<times>'b) set) O (S :: ('b\\<times>'a) set)) (S `` X)\"\n  shows \"SN_on (S O R) X\""], ["proof (prove)\ngoal (1 subgoal):\n 1. SN_on (S O R) X", "proof"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>f.\n       \\<lbrakk>f 0 \\<in> X;\n        \\<forall>i. (f i, f (Suc i)) \\<in> S O R\\<rbrakk>\n       \\<Longrightarrow> False", "fix seq :: \"nat \\<Rightarrow> 'b\""], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>f.\n       \\<lbrakk>f 0 \\<in> X;\n        \\<forall>i. (f i, f (Suc i)) \\<in> S O R\\<rbrakk>\n       \\<Longrightarrow> False", "assume seq0: \"seq 0 \\<in> X\" and chain: \"chain (S O R) seq\""], ["proof (state)\nthis:\n  seq 0 \\<in> X\n  \\<forall>i. (seq i, seq (Suc i)) \\<in> S O R\n\ngoal (1 subgoal):\n 1. \\<And>f.\n       \\<lbrakk>f 0 \\<in> X;\n        \\<forall>i. (f i, f (Suc i)) \\<in> S O R\\<rbrakk>\n       \\<Longrightarrow> False", "from SN"], ["proof (chain)\npicking this:\n  SN_on (R O S) (S `` X)", "have SN: \"SN_on (R O S) ((R O S)\\<^sup>* `` S `` X)\""], ["proof (prove)\nusing this:\n  SN_on (R O S) (S `` X)\n\ngoal (1 subgoal):\n 1. SN_on (R O S) ((R O S)\\<^sup>* `` S `` X)", "by simp"], ["proof (state)\nthis:\n  SN_on (R O S) ((R O S)\\<^sup>* `` S `` X)\n\ngoal (1 subgoal):\n 1. \\<And>f.\n       \\<lbrakk>f 0 \\<in> X;\n        \\<forall>i. (f i, f (Suc i)) \\<in> S O R\\<rbrakk>\n       \\<Longrightarrow> False", "{"], ["proof (state)\nthis:\n  SN_on (R O S) ((R O S)\\<^sup>* `` S `` X)\n\ngoal (1 subgoal):\n 1. \\<And>f.\n       \\<lbrakk>f 0 \\<in> X;\n        \\<forall>i. (f i, f (Suc i)) \\<in> S O R\\<rbrakk>\n       \\<Longrightarrow> False", "fix i a"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>f.\n       \\<lbrakk>f 0 \\<in> X;\n        \\<forall>i. (f i, f (Suc i)) \\<in> S O R\\<rbrakk>\n       \\<Longrightarrow> False", "assume ia: \"(seq i,a) \\<in> S\" and aSi: \"(a,seq (Suc i)) \\<in> R\""], ["proof (state)\nthis:\n  (seq i, a) \\<in> S\n  (a, seq (Suc i)) \\<in> R\n\ngoal (1 subgoal):\n 1. \\<And>f.\n       \\<lbrakk>f 0 \\<in> X;\n        \\<forall>i. (f i, f (Suc i)) \\<in> S O R\\<rbrakk>\n       \\<Longrightarrow> False", "have \"seq i \\<in> (S O R)\\<^sup>* `` X\""], ["proof (prove)\ngoal (1 subgoal):\n 1. seq i \\<in> (S O R)\\<^sup>* `` X", "proof (induct i)"], ["proof (state)\ngoal (2 subgoals):\n 1. seq 0 \\<in> (S O R)\\<^sup>* `` X\n 2. \\<And>i.\n       seq i \\<in> (S O R)\\<^sup>* `` X \\<Longrightarrow>\n       seq (Suc i) \\<in> (S O R)\\<^sup>* `` X", "case 0"], ["proof (state)\nthis:\n  \n\ngoal (2 subgoals):\n 1. seq 0 \\<in> (S O R)\\<^sup>* `` X\n 2. \\<And>i.\n       seq i \\<in> (S O R)\\<^sup>* `` X \\<Longrightarrow>\n       seq (Suc i) \\<in> (S O R)\\<^sup>* `` X", "from seq0"], ["proof (chain)\npicking this:\n  seq 0 \\<in> X", "show ?case"], ["proof (prove)\nusing this:\n  seq 0 \\<in> X\n\ngoal (1 subgoal):\n 1. seq 0 \\<in> (S O R)\\<^sup>* `` X", "by auto"], ["proof (state)\nthis:\n  seq 0 \\<in> (S O R)\\<^sup>* `` X\n\ngoal (1 subgoal):\n 1. \\<And>i.\n       seq i \\<in> (S O R)\\<^sup>* `` X \\<Longrightarrow>\n       seq (Suc i) \\<in> (S O R)\\<^sup>* `` X", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>i.\n       seq i \\<in> (S O R)\\<^sup>* `` X \\<Longrightarrow>\n       seq (Suc i) \\<in> (S O R)\\<^sup>* `` X", "case (Suc i)"], ["proof (state)\nthis:\n  seq i \\<in> (S O R)\\<^sup>* `` X\n\ngoal (1 subgoal):\n 1. \\<And>i.\n       seq i \\<in> (S O R)\\<^sup>* `` X \\<Longrightarrow>\n       seq (Suc i) \\<in> (S O R)\\<^sup>* `` X", "with chain"], ["proof (chain)\npicking this:\n  \\<forall>i. (seq i, seq (Suc i)) \\<in> S O R\n  seq i \\<in> (S O R)\\<^sup>* `` X", "have \"seq (Suc i) \\<in> ((S O R)\\<^sup>* O S O R) `` X\""], ["proof (prove)\nusing this:\n  \\<forall>i. (seq i, seq (Suc i)) \\<in> S O R\n  seq i \\<in> (S O R)\\<^sup>* `` X\n\ngoal (1 subgoal):\n 1. seq (Suc i) \\<in> ((S O R)\\<^sup>* O S O R) `` X", "by blast"], ["proof (state)\nthis:\n  seq (Suc i) \\<in> ((S O R)\\<^sup>* O S O R) `` X\n\ngoal (1 subgoal):\n 1. \\<And>i.\n       seq i \\<in> (S O R)\\<^sup>* `` X \\<Longrightarrow>\n       seq (Suc i) \\<in> (S O R)\\<^sup>* `` X", "also"], ["proof (state)\nthis:\n  seq (Suc i) \\<in> ((S O R)\\<^sup>* O S O R) `` X\n\ngoal (1 subgoal):\n 1. \\<And>i.\n       seq i \\<in> (S O R)\\<^sup>* `` X \\<Longrightarrow>\n       seq (Suc i) \\<in> (S O R)\\<^sup>* `` X", "have \"... \\<subseteq> (S O R)\\<^sup>* `` X\""], ["proof (prove)\ngoal (1 subgoal):\n 1. ((S O R)\\<^sup>* O S O R) `` X \\<subseteq> (S O R)\\<^sup>* `` X", "by (fold trancl_unfold_right, auto)"], ["proof (state)\nthis:\n  ((S O R)\\<^sup>* O S O R) `` X \\<subseteq> (S O R)\\<^sup>* `` X\n\ngoal (1 subgoal):\n 1. \\<And>i.\n       seq i \\<in> (S O R)\\<^sup>* `` X \\<Longrightarrow>\n       seq (Suc i) \\<in> (S O R)\\<^sup>* `` X", "finally"], ["proof (chain)\npicking this:\n  seq (Suc i) \\<in> (S O R)\\<^sup>* `` X", "show ?case"], ["proof (prove)\nusing this:\n  seq (Suc i) \\<in> (S O R)\\<^sup>* `` X\n\ngoal (1 subgoal):\n 1. seq (Suc i) \\<in> (S O R)\\<^sup>* `` X", "."], ["proof (state)\nthis:\n  seq (Suc i) \\<in> (S O R)\\<^sup>* `` X\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  seq i \\<in> (S O R)\\<^sup>* `` X\n\ngoal (1 subgoal):\n 1. \\<And>f.\n       \\<lbrakk>f 0 \\<in> X;\n        \\<forall>i. (f i, f (Suc i)) \\<in> S O R\\<rbrakk>\n       \\<Longrightarrow> False", "with ia"], ["proof (chain)\npicking this:\n  (seq i, a) \\<in> S\n  seq i \\<in> (S O R)\\<^sup>* `` X", "have \"a \\<in> ((S O R)\\<^sup>* O S) `` X\""], ["proof (prove)\nusing this:\n  (seq i, a) \\<in> S\n  seq i \\<in> (S O R)\\<^sup>* `` X\n\ngoal (1 subgoal):\n 1. a \\<in> ((S O R)\\<^sup>* O S) `` X", "by auto"], ["proof (state)\nthis:\n  a \\<in> ((S O R)\\<^sup>* O S) `` X\n\ngoal (1 subgoal):\n 1. \\<And>f.\n       \\<lbrakk>f 0 \\<in> X;\n        \\<forall>i. (f i, f (Suc i)) \\<in> S O R\\<rbrakk>\n       \\<Longrightarrow> False", "then"], ["proof (chain)\npicking this:\n  a \\<in> ((S O R)\\<^sup>* O S) `` X", "have a: \"a \\<in> ((R O S)\\<^sup>*) `` S `` X\""], ["proof (prove)\nusing this:\n  a \\<in> ((S O R)\\<^sup>* O S) `` X\n\ngoal (1 subgoal):\n 1. a \\<in> (R O S)\\<^sup>* `` S `` X", "by (auto simp: rtrancl_O_shift)"], ["proof (state)\nthis:\n  a \\<in> (R O S)\\<^sup>* `` S `` X\n\ngoal (1 subgoal):\n 1. \\<And>f.\n       \\<lbrakk>f 0 \\<in> X;\n        \\<forall>i. (f i, f (Suc i)) \\<in> S O R\\<rbrakk>\n       \\<Longrightarrow> False", "with ia aSi"], ["proof (chain)\npicking this:\n  (seq i, a) \\<in> S\n  (a, seq (Suc i)) \\<in> R\n  a \\<in> (R O S)\\<^sup>* `` S `` X", "have False"], ["proof (prove)\nusing this:\n  (seq i, a) \\<in> S\n  (a, seq (Suc i)) \\<in> R\n  a \\<in> (R O S)\\<^sup>* `` S `` X\n\ngoal (1 subgoal):\n 1. False", "proof(induct \"a\" arbitrary: i rule: SN_on_induct[OF SN])"], ["proof (state)\ngoal (2 subgoals):\n 1. a \\<in> (R O S)\\<^sup>* `` S `` X\n 2. \\<And>t i.\n       \\<lbrakk>\\<And>u i.\n                   \\<lbrakk>(t, u) \\<in> R O S; (seq i, u) \\<in> S;\n                    (u, seq (Suc i)) \\<in> R;\n                    u \\<in> (R O S)\\<^sup>* `` S `` X\\<rbrakk>\n                   \\<Longrightarrow> False;\n        (seq i, t) \\<in> S; (t, seq (Suc i)) \\<in> R;\n        t \\<in> (R O S)\\<^sup>* `` S `` X\\<rbrakk>\n       \\<Longrightarrow> False", "case 1"], ["proof (state)\nthis:\n  \n\ngoal (2 subgoals):\n 1. a \\<in> (R O S)\\<^sup>* `` S `` X\n 2. \\<And>t i.\n       \\<lbrakk>\\<And>u i.\n                   \\<lbrakk>(t, u) \\<in> R O S; (seq i, u) \\<in> S;\n                    (u, seq (Suc i)) \\<in> R;\n                    u \\<in> (R O S)\\<^sup>* `` S `` X\\<rbrakk>\n                   \\<Longrightarrow> False;\n        (seq i, t) \\<in> S; (t, seq (Suc i)) \\<in> R;\n        t \\<in> (R O S)\\<^sup>* `` S `` X\\<rbrakk>\n       \\<Longrightarrow> False", "show ?case"], ["proof (prove)\ngoal (1 subgoal):\n 1. a \\<in> (R O S)\\<^sup>* `` S `` X", "by (fact a)"], ["proof (state)\nthis:\n  a \\<in> (R O S)\\<^sup>* `` S `` X\n\ngoal (1 subgoal):\n 1. \\<And>t i.\n       \\<lbrakk>\\<And>u i.\n                   \\<lbrakk>(t, u) \\<in> R O S; (seq i, u) \\<in> S;\n                    (u, seq (Suc i)) \\<in> R;\n                    u \\<in> (R O S)\\<^sup>* `` S `` X\\<rbrakk>\n                   \\<Longrightarrow> False;\n        (seq i, t) \\<in> S; (t, seq (Suc i)) \\<in> R;\n        t \\<in> (R O S)\\<^sup>* `` S `` X\\<rbrakk>\n       \\<Longrightarrow> False", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>t i.\n       \\<lbrakk>\\<And>u i.\n                   \\<lbrakk>(t, u) \\<in> R O S; (seq i, u) \\<in> S;\n                    (u, seq (Suc i)) \\<in> R;\n                    u \\<in> (R O S)\\<^sup>* `` S `` X\\<rbrakk>\n                   \\<Longrightarrow> False;\n        (seq i, t) \\<in> S; (t, seq (Suc i)) \\<in> R;\n        t \\<in> (R O S)\\<^sup>* `` S `` X\\<rbrakk>\n       \\<Longrightarrow> False", "case IH: (2 a)"], ["proof (state)\nthis:\n  \\<lbrakk>(a, ?u) \\<in> R O S; (seq ?i, ?u) \\<in> S;\n   (?u, seq (Suc ?i)) \\<in> R; ?u \\<in> (R O S)\\<^sup>* `` S `` X\\<rbrakk>\n  \\<Longrightarrow> False\n  (seq i, a) \\<in> S\n  (a, seq (Suc i)) \\<in> R\n  a \\<in> (R O S)\\<^sup>* `` S `` X\n\ngoal (1 subgoal):\n 1. \\<And>t i.\n       \\<lbrakk>\\<And>u i.\n                   \\<lbrakk>(t, u) \\<in> R O S; (seq i, u) \\<in> S;\n                    (u, seq (Suc i)) \\<in> R;\n                    u \\<in> (R O S)\\<^sup>* `` S `` X\\<rbrakk>\n                   \\<Longrightarrow> False;\n        (seq i, t) \\<in> S; (t, seq (Suc i)) \\<in> R;\n        t \\<in> (R O S)\\<^sup>* `` S `` X\\<rbrakk>\n       \\<Longrightarrow> False", "from chain"], ["proof (chain)\npicking this:\n  \\<forall>i. (seq i, seq (Suc i)) \\<in> S O R", "obtain b\n      where *: \"(seq (Suc i), b) \\<in> S\" \"(b, seq (Suc (Suc i))) \\<in> R\""], ["proof (prove)\nusing this:\n  \\<forall>i. (seq i, seq (Suc i)) \\<in> S O R\n\ngoal (1 subgoal):\n 1. (\\<And>b.\n        \\<lbrakk>(seq (Suc i), b) \\<in> S;\n         (b, seq (Suc (Suc i))) \\<in> R\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  (seq (Suc i), b) \\<in> S\n  (b, seq (Suc (Suc i))) \\<in> R\n\ngoal (1 subgoal):\n 1. \\<And>t i.\n       \\<lbrakk>\\<And>u i.\n                   \\<lbrakk>(t, u) \\<in> R O S; (seq i, u) \\<in> S;\n                    (u, seq (Suc i)) \\<in> R;\n                    u \\<in> (R O S)\\<^sup>* `` S `` X\\<rbrakk>\n                   \\<Longrightarrow> False;\n        (seq i, t) \\<in> S; (t, seq (Suc i)) \\<in> R;\n        t \\<in> (R O S)\\<^sup>* `` S `` X\\<rbrakk>\n       \\<Longrightarrow> False", "with IH"], ["proof (chain)\npicking this:\n  \\<lbrakk>(a, ?u) \\<in> R O S; (seq ?i, ?u) \\<in> S;\n   (?u, seq (Suc ?i)) \\<in> R; ?u \\<in> (R O S)\\<^sup>* `` S `` X\\<rbrakk>\n  \\<Longrightarrow> False\n  (seq i, a) \\<in> S\n  (a, seq (Suc i)) \\<in> R\n  a \\<in> (R O S)\\<^sup>* `` S `` X\n  (seq (Suc i), b) \\<in> S\n  (b, seq (Suc (Suc i))) \\<in> R", "have ab: \"(a,b) \\<in> R O S\""], ["proof (prove)\nusing this:\n  \\<lbrakk>(a, ?u) \\<in> R O S; (seq ?i, ?u) \\<in> S;\n   (?u, seq (Suc ?i)) \\<in> R; ?u \\<in> (R O S)\\<^sup>* `` S `` X\\<rbrakk>\n  \\<Longrightarrow> False\n  (seq i, a) \\<in> S\n  (a, seq (Suc i)) \\<in> R\n  a \\<in> (R O S)\\<^sup>* `` S `` X\n  (seq (Suc i), b) \\<in> S\n  (b, seq (Suc (Suc i))) \\<in> R\n\ngoal (1 subgoal):\n 1. (a, b) \\<in> R O S", "by auto"], ["proof (state)\nthis:\n  (a, b) \\<in> R O S\n\ngoal (1 subgoal):\n 1. \\<And>t i.\n       \\<lbrakk>\\<And>u i.\n                   \\<lbrakk>(t, u) \\<in> R O S; (seq i, u) \\<in> S;\n                    (u, seq (Suc i)) \\<in> R;\n                    u \\<in> (R O S)\\<^sup>* `` S `` X\\<rbrakk>\n                   \\<Longrightarrow> False;\n        (seq i, t) \\<in> S; (t, seq (Suc i)) \\<in> R;\n        t \\<in> (R O S)\\<^sup>* `` S `` X\\<rbrakk>\n       \\<Longrightarrow> False", "with \\<open>a \\<in> (R O S)\\<^sup>* `` S `` X\\<close>"], ["proof (chain)\npicking this:\n  a \\<in> (R O S)\\<^sup>* `` S `` X\n  (a, b) \\<in> R O S", "have \"b \\<in> ((R O S)\\<^sup>* O R O S) `` S `` X\""], ["proof (prove)\nusing this:\n  a \\<in> (R O S)\\<^sup>* `` S `` X\n  (a, b) \\<in> R O S\n\ngoal (1 subgoal):\n 1. b \\<in> ((R O S)\\<^sup>* O R O S) `` S `` X", "by auto"], ["proof (state)\nthis:\n  b \\<in> ((R O S)\\<^sup>* O R O S) `` S `` X\n\ngoal (1 subgoal):\n 1. \\<And>t i.\n       \\<lbrakk>\\<And>u i.\n                   \\<lbrakk>(t, u) \\<in> R O S; (seq i, u) \\<in> S;\n                    (u, seq (Suc i)) \\<in> R;\n                    u \\<in> (R O S)\\<^sup>* `` S `` X\\<rbrakk>\n                   \\<Longrightarrow> False;\n        (seq i, t) \\<in> S; (t, seq (Suc i)) \\<in> R;\n        t \\<in> (R O S)\\<^sup>* `` S `` X\\<rbrakk>\n       \\<Longrightarrow> False", "then"], ["proof (chain)\npicking this:\n  b \\<in> ((R O S)\\<^sup>* O R O S) `` S `` X", "have \"b \\<in> (R O S)\\<^sup>* `` S `` X\""], ["proof (prove)\nusing this:\n  b \\<in> ((R O S)\\<^sup>* O R O S) `` S `` X\n\ngoal (1 subgoal):\n 1. b \\<in> (R O S)\\<^sup>* `` S `` X", "by (rule rev_subsetD, intro Image_subsetI, fold trancl_unfold_right, auto)"], ["proof (state)\nthis:\n  b \\<in> (R O S)\\<^sup>* `` S `` X\n\ngoal (1 subgoal):\n 1. \\<And>t i.\n       \\<lbrakk>\\<And>u i.\n                   \\<lbrakk>(t, u) \\<in> R O S; (seq i, u) \\<in> S;\n                    (u, seq (Suc i)) \\<in> R;\n                    u \\<in> (R O S)\\<^sup>* `` S `` X\\<rbrakk>\n                   \\<Longrightarrow> False;\n        (seq i, t) \\<in> S; (t, seq (Suc i)) \\<in> R;\n        t \\<in> (R O S)\\<^sup>* `` S `` X\\<rbrakk>\n       \\<Longrightarrow> False", "from IH.hyps[OF ab * this] IH.prems ab"], ["proof (chain)\npicking this:\n  False\n  (seq i, a) \\<in> S\n  (a, seq (Suc i)) \\<in> R\n  a \\<in> (R O S)\\<^sup>* `` S `` X\n  (a, b) \\<in> R O S", "show False"], ["proof (prove)\nusing this:\n  False\n  (seq i, a) \\<in> S\n  (a, seq (Suc i)) \\<in> R\n  a \\<in> (R O S)\\<^sup>* `` S `` X\n  (a, b) \\<in> R O S\n\ngoal (1 subgoal):\n 1. False", "by auto"], ["proof (state)\nthis:\n  False\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  False\n\ngoal (1 subgoal):\n 1. \\<And>f.\n       \\<lbrakk>f 0 \\<in> X;\n        \\<forall>i. (f i, f (Suc i)) \\<in> S O R\\<rbrakk>\n       \\<Longrightarrow> False", "}"], ["proof (state)\nthis:\n  \\<lbrakk>(seq ?i2, ?a2) \\<in> S; (?a2, seq (Suc ?i2)) \\<in> R\\<rbrakk>\n  \\<Longrightarrow> False\n\ngoal (1 subgoal):\n 1. \\<And>f.\n       \\<lbrakk>f 0 \\<in> X;\n        \\<forall>i. (f i, f (Suc i)) \\<in> S O R\\<rbrakk>\n       \\<Longrightarrow> False", "with chain"], ["proof (chain)\npicking this:\n  \\<forall>i. (seq i, seq (Suc i)) \\<in> S O R\n  \\<lbrakk>(seq ?i2, ?a2) \\<in> S; (?a2, seq (Suc ?i2)) \\<in> R\\<rbrakk>\n  \\<Longrightarrow> False", "show False"], ["proof (prove)\nusing this:\n  \\<forall>i. (seq i, seq (Suc i)) \\<in> S O R\n  \\<lbrakk>(seq ?i2, ?a2) \\<in> S; (?a2, seq (Suc ?i2)) \\<in> R\\<rbrakk>\n  \\<Longrightarrow> False\n\ngoal (1 subgoal):\n 1. False", "by auto"], ["proof (state)\nthis:\n  False\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma SN_O_comm: \"SN (R O S) \\<longleftrightarrow> SN (S O R)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. SN (R O S) = SN (S O R)", "by (intro iffI; rule SN_on_O_comm[OF SN_on_subset2], auto)"], ["", "lemma chain_mono: assumes \"R' \\<subseteq> R\" \"chain R' seq\" shows \"chain R seq\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>i. (seq i, seq (Suc i)) \\<in> R", "using assms"], ["proof (prove)\nusing this:\n  R' \\<subseteq> R\n  \\<forall>i. (seq i, seq (Suc i)) \\<in> R'\n\ngoal (1 subgoal):\n 1. \\<forall>i. (seq i, seq (Suc i)) \\<in> R", "by auto"], ["", "context\n  fixes S R\n  assumes push: \"S O R \\<subseteq> R O S\\<^sup>*\"\nbegin"], ["", "lemma rtrancl_O_push: \"S\\<^sup>* O R \\<subseteq> R O S\\<^sup>*\""], ["proof (prove)\ngoal (1 subgoal):\n 1. S\\<^sup>* O R \\<subseteq> R O S\\<^sup>*", "proof-"], ["proof (state)\ngoal (1 subgoal):\n 1. S\\<^sup>* O R \\<subseteq> R O S\\<^sup>*", "{"], ["proof (state)\ngoal (1 subgoal):\n 1. S\\<^sup>* O R \\<subseteq> R O S\\<^sup>*", "fix n"], ["proof (state)\ngoal (1 subgoal):\n 1. S\\<^sup>* O R \\<subseteq> R O S\\<^sup>*", "have \"\\<And>s t. (s,t) \\<in> S ^^ n O R \\<Longrightarrow> (s,t) \\<in> R O S\\<^sup>*\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>s t.\n       (s, t) \\<in> S ^^ n O R \\<Longrightarrow> (s, t) \\<in> R O S\\<^sup>*", "proof(induct n)"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>s t.\n       (s, t) \\<in> S ^^ 0 O R \\<Longrightarrow> (s, t) \\<in> R O S\\<^sup>*\n 2. \\<And>n s t.\n       \\<lbrakk>\\<And>s t.\n                   (s, t) \\<in> S ^^ n O R \\<Longrightarrow>\n                   (s, t) \\<in> R O S\\<^sup>*;\n        (s, t) \\<in> S ^^ Suc n O R\\<rbrakk>\n       \\<Longrightarrow> (s, t) \\<in> R O S\\<^sup>*", "case (Suc n)"], ["proof (state)\nthis:\n  (?s, ?t) \\<in> S ^^ n O R \\<Longrightarrow> (?s, ?t) \\<in> R O S\\<^sup>*\n  (s, t) \\<in> S ^^ Suc n O R\n\ngoal (2 subgoals):\n 1. \\<And>s t.\n       (s, t) \\<in> S ^^ 0 O R \\<Longrightarrow> (s, t) \\<in> R O S\\<^sup>*\n 2. \\<And>n s t.\n       \\<lbrakk>\\<And>s t.\n                   (s, t) \\<in> S ^^ n O R \\<Longrightarrow>\n                   (s, t) \\<in> R O S\\<^sup>*;\n        (s, t) \\<in> S ^^ Suc n O R\\<rbrakk>\n       \\<Longrightarrow> (s, t) \\<in> R O S\\<^sup>*", "then"], ["proof (chain)\npicking this:\n  (?s, ?t) \\<in> S ^^ n O R \\<Longrightarrow> (?s, ?t) \\<in> R O S\\<^sup>*\n  (s, t) \\<in> S ^^ Suc n O R", "obtain u where \"(s,u) \\<in> S\" \"(u,t) \\<in> R O S\\<^sup>*\""], ["proof (prove)\nusing this:\n  (?s, ?t) \\<in> S ^^ n O R \\<Longrightarrow> (?s, ?t) \\<in> R O S\\<^sup>*\n  (s, t) \\<in> S ^^ Suc n O R\n\ngoal (1 subgoal):\n 1. (\\<And>u.\n        \\<lbrakk>(s, u) \\<in> S; (u, t) \\<in> R O S\\<^sup>*\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "unfolding relpow_Suc"], ["proof (prove)\nusing this:\n  (?s, ?t) \\<in> S ^^ n O R \\<Longrightarrow> (?s, ?t) \\<in> R O S\\<^sup>*\n  (s, t) \\<in> (S O S ^^ n) O R\n\ngoal (1 subgoal):\n 1. (\\<And>u.\n        \\<lbrakk>(s, u) \\<in> S; (u, t) \\<in> R O S\\<^sup>*\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by blast"], ["proof (state)\nthis:\n  (s, u) \\<in> S\n  (u, t) \\<in> R O S\\<^sup>*\n\ngoal (2 subgoals):\n 1. \\<And>s t.\n       (s, t) \\<in> S ^^ 0 O R \\<Longrightarrow> (s, t) \\<in> R O S\\<^sup>*\n 2. \\<And>n s t.\n       \\<lbrakk>\\<And>s t.\n                   (s, t) \\<in> S ^^ n O R \\<Longrightarrow>\n                   (s, t) \\<in> R O S\\<^sup>*;\n        (s, t) \\<in> S ^^ Suc n O R\\<rbrakk>\n       \\<Longrightarrow> (s, t) \\<in> R O S\\<^sup>*", "then"], ["proof (chain)\npicking this:\n  (s, u) \\<in> S\n  (u, t) \\<in> R O S\\<^sup>*", "have \"(s,t) \\<in> S O R O S\\<^sup>*\""], ["proof (prove)\nusing this:\n  (s, u) \\<in> S\n  (u, t) \\<in> R O S\\<^sup>*\n\ngoal (1 subgoal):\n 1. (s, t) \\<in> S O R O S\\<^sup>*", "by auto"], ["proof (state)\nthis:\n  (s, t) \\<in> S O R O S\\<^sup>*\n\ngoal (2 subgoals):\n 1. \\<And>s t.\n       (s, t) \\<in> S ^^ 0 O R \\<Longrightarrow> (s, t) \\<in> R O S\\<^sup>*\n 2. \\<And>n s t.\n       \\<lbrakk>\\<And>s t.\n                   (s, t) \\<in> S ^^ n O R \\<Longrightarrow>\n                   (s, t) \\<in> R O S\\<^sup>*;\n        (s, t) \\<in> S ^^ Suc n O R\\<rbrakk>\n       \\<Longrightarrow> (s, t) \\<in> R O S\\<^sup>*", "also"], ["proof (state)\nthis:\n  (s, t) \\<in> S O R O S\\<^sup>*\n\ngoal (2 subgoals):\n 1. \\<And>s t.\n       (s, t) \\<in> S ^^ 0 O R \\<Longrightarrow> (s, t) \\<in> R O S\\<^sup>*\n 2. \\<And>n s t.\n       \\<lbrakk>\\<And>s t.\n                   (s, t) \\<in> S ^^ n O R \\<Longrightarrow>\n                   (s, t) \\<in> R O S\\<^sup>*;\n        (s, t) \\<in> S ^^ Suc n O R\\<rbrakk>\n       \\<Longrightarrow> (s, t) \\<in> R O S\\<^sup>*", "have \"... \\<subseteq> R O S\\<^sup>* O S\\<^sup>*\""], ["proof (prove)\ngoal (1 subgoal):\n 1. S O R O S\\<^sup>* \\<subseteq> R O S\\<^sup>* O S\\<^sup>*", "using push"], ["proof (prove)\nusing this:\n  S O R \\<subseteq> R O S\\<^sup>*\n\ngoal (1 subgoal):\n 1. S O R O S\\<^sup>* \\<subseteq> R O S\\<^sup>* O S\\<^sup>*", "by blast"], ["proof (state)\nthis:\n  S O R O S\\<^sup>* \\<subseteq> R O S\\<^sup>* O S\\<^sup>*\n\ngoal (2 subgoals):\n 1. \\<And>s t.\n       (s, t) \\<in> S ^^ 0 O R \\<Longrightarrow> (s, t) \\<in> R O S\\<^sup>*\n 2. \\<And>n s t.\n       \\<lbrakk>\\<And>s t.\n                   (s, t) \\<in> S ^^ n O R \\<Longrightarrow>\n                   (s, t) \\<in> R O S\\<^sup>*;\n        (s, t) \\<in> S ^^ Suc n O R\\<rbrakk>\n       \\<Longrightarrow> (s, t) \\<in> R O S\\<^sup>*", "also"], ["proof (state)\nthis:\n  S O R O S\\<^sup>* \\<subseteq> R O S\\<^sup>* O S\\<^sup>*\n\ngoal (2 subgoals):\n 1. \\<And>s t.\n       (s, t) \\<in> S ^^ 0 O R \\<Longrightarrow> (s, t) \\<in> R O S\\<^sup>*\n 2. \\<And>n s t.\n       \\<lbrakk>\\<And>s t.\n                   (s, t) \\<in> S ^^ n O R \\<Longrightarrow>\n                   (s, t) \\<in> R O S\\<^sup>*;\n        (s, t) \\<in> S ^^ Suc n O R\\<rbrakk>\n       \\<Longrightarrow> (s, t) \\<in> R O S\\<^sup>*", "have \"... \\<subseteq> R O S\\<^sup>*\""], ["proof (prove)\ngoal (1 subgoal):\n 1. R O S\\<^sup>* O S\\<^sup>* \\<subseteq> R O S\\<^sup>*", "by auto"], ["proof (state)\nthis:\n  R O S\\<^sup>* O S\\<^sup>* \\<subseteq> R O S\\<^sup>*\n\ngoal (2 subgoals):\n 1. \\<And>s t.\n       (s, t) \\<in> S ^^ 0 O R \\<Longrightarrow> (s, t) \\<in> R O S\\<^sup>*\n 2. \\<And>n s t.\n       \\<lbrakk>\\<And>s t.\n                   (s, t) \\<in> S ^^ n O R \\<Longrightarrow>\n                   (s, t) \\<in> R O S\\<^sup>*;\n        (s, t) \\<in> S ^^ Suc n O R\\<rbrakk>\n       \\<Longrightarrow> (s, t) \\<in> R O S\\<^sup>*", "finally"], ["proof (chain)\npicking this:\n  (s, t) \\<in> R O S\\<^sup>*", "show ?case"], ["proof (prove)\nusing this:\n  (s, t) \\<in> R O S\\<^sup>*\n\ngoal (1 subgoal):\n 1. (s, t) \\<in> R O S\\<^sup>*", "."], ["proof (state)\nthis:\n  (s, t) \\<in> R O S\\<^sup>*\n\ngoal (1 subgoal):\n 1. \\<And>s t.\n       (s, t) \\<in> S ^^ 0 O R \\<Longrightarrow> (s, t) \\<in> R O S\\<^sup>*", "qed auto"], ["proof (state)\nthis:\n  (?s, ?t) \\<in> S ^^ n O R \\<Longrightarrow> (?s, ?t) \\<in> R O S\\<^sup>*\n\ngoal (1 subgoal):\n 1. S\\<^sup>* O R \\<subseteq> R O S\\<^sup>*", "}"], ["proof (state)\nthis:\n  (?s, ?t) \\<in> S ^^ ?n3 O R \\<Longrightarrow> (?s, ?t) \\<in> R O S\\<^sup>*\n\ngoal (1 subgoal):\n 1. S\\<^sup>* O R \\<subseteq> R O S\\<^sup>*", "thus ?thesis"], ["proof (prove)\nusing this:\n  (?s, ?t) \\<in> S ^^ ?n3 O R \\<Longrightarrow> (?s, ?t) \\<in> R O S\\<^sup>*\n\ngoal (1 subgoal):\n 1. S\\<^sup>* O R \\<subseteq> R O S\\<^sup>*", "by blast"], ["proof (state)\nthis:\n  S\\<^sup>* O R \\<subseteq> R O S\\<^sup>*\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma rtrancl_U_push: \"(S \\<union> R)\\<^sup>* = R\\<^sup>* O S\\<^sup>*\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (S \\<union> R)\\<^sup>* = R\\<^sup>* O S\\<^sup>*", "proof(intro equalityI subrelI)"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>x y.\n       (x, y) \\<in> (S \\<union> R)\\<^sup>* \\<Longrightarrow>\n       (x, y) \\<in> R\\<^sup>* O S\\<^sup>*\n 2. \\<And>x y.\n       (x, y) \\<in> R\\<^sup>* O S\\<^sup>* \\<Longrightarrow>\n       (x, y) \\<in> (S \\<union> R)\\<^sup>*", "fix x y"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>x y.\n       (x, y) \\<in> (S \\<union> R)\\<^sup>* \\<Longrightarrow>\n       (x, y) \\<in> R\\<^sup>* O S\\<^sup>*\n 2. \\<And>x y.\n       (x, y) \\<in> R\\<^sup>* O S\\<^sup>* \\<Longrightarrow>\n       (x, y) \\<in> (S \\<union> R)\\<^sup>*", "assume \"(x,y) \\<in> (S \\<union> R)\\<^sup>*\""], ["proof (state)\nthis:\n  (x, y) \\<in> (S \\<union> R)\\<^sup>*\n\ngoal (2 subgoals):\n 1. \\<And>x y.\n       (x, y) \\<in> (S \\<union> R)\\<^sup>* \\<Longrightarrow>\n       (x, y) \\<in> R\\<^sup>* O S\\<^sup>*\n 2. \\<And>x y.\n       (x, y) \\<in> R\\<^sup>* O S\\<^sup>* \\<Longrightarrow>\n       (x, y) \\<in> (S \\<union> R)\\<^sup>*", "also"], ["proof (state)\nthis:\n  (x, y) \\<in> (S \\<union> R)\\<^sup>*\n\ngoal (2 subgoals):\n 1. \\<And>x y.\n       (x, y) \\<in> (S \\<union> R)\\<^sup>* \\<Longrightarrow>\n       (x, y) \\<in> R\\<^sup>* O S\\<^sup>*\n 2. \\<And>x y.\n       (x, y) \\<in> R\\<^sup>* O S\\<^sup>* \\<Longrightarrow>\n       (x, y) \\<in> (S \\<union> R)\\<^sup>*", "have \"... \\<subseteq> (S\\<^sup>* O R)\\<^sup>* O S\\<^sup>*\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (S \\<union> R)\\<^sup>* \\<subseteq> (S\\<^sup>* O R)\\<^sup>* O S\\<^sup>*", "by regexp"], ["proof (state)\nthis:\n  (S \\<union> R)\\<^sup>* \\<subseteq> (S\\<^sup>* O R)\\<^sup>* O S\\<^sup>*\n\ngoal (2 subgoals):\n 1. \\<And>x y.\n       (x, y) \\<in> (S \\<union> R)\\<^sup>* \\<Longrightarrow>\n       (x, y) \\<in> R\\<^sup>* O S\\<^sup>*\n 2. \\<And>x y.\n       (x, y) \\<in> R\\<^sup>* O S\\<^sup>* \\<Longrightarrow>\n       (x, y) \\<in> (S \\<union> R)\\<^sup>*", "finally"], ["proof (chain)\npicking this:\n  (x, y) \\<in> (S\\<^sup>* O R)\\<^sup>* O S\\<^sup>*", "obtain z where xz: \"(x,z) \\<in> (S\\<^sup>* O R)\\<^sup>*\" and zy: \"(z,y) \\<in> S\\<^sup>*\""], ["proof (prove)\nusing this:\n  (x, y) \\<in> (S\\<^sup>* O R)\\<^sup>* O S\\<^sup>*\n\ngoal (1 subgoal):\n 1. (\\<And>z.\n        \\<lbrakk>(x, z) \\<in> (S\\<^sup>* O R)\\<^sup>*;\n         (z, y) \\<in> S\\<^sup>*\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  (x, z) \\<in> (S\\<^sup>* O R)\\<^sup>*\n  (z, y) \\<in> S\\<^sup>*\n\ngoal (2 subgoals):\n 1. \\<And>x y.\n       (x, y) \\<in> (S \\<union> R)\\<^sup>* \\<Longrightarrow>\n       (x, y) \\<in> R\\<^sup>* O S\\<^sup>*\n 2. \\<And>x y.\n       (x, y) \\<in> R\\<^sup>* O S\\<^sup>* \\<Longrightarrow>\n       (x, y) \\<in> (S \\<union> R)\\<^sup>*", "from xz"], ["proof (chain)\npicking this:\n  (x, z) \\<in> (S\\<^sup>* O R)\\<^sup>*", "have \"(x,z) \\<in> R\\<^sup>* O S\\<^sup>*\""], ["proof (prove)\nusing this:\n  (x, z) \\<in> (S\\<^sup>* O R)\\<^sup>*\n\ngoal (1 subgoal):\n 1. (x, z) \\<in> R\\<^sup>* O S\\<^sup>*", "proof (induct rule: rtrancl_induct)"], ["proof (state)\ngoal (2 subgoals):\n 1. (x, x) \\<in> R\\<^sup>* O S\\<^sup>*\n 2. \\<And>y z.\n       \\<lbrakk>(x, y) \\<in> (S\\<^sup>* O R)\\<^sup>*;\n        (y, z) \\<in> S\\<^sup>* O R;\n        (x, y) \\<in> R\\<^sup>* O S\\<^sup>*\\<rbrakk>\n       \\<Longrightarrow> (x, z) \\<in> R\\<^sup>* O S\\<^sup>*", "case (step z w)"], ["proof (state)\nthis:\n  (x, z) \\<in> (S\\<^sup>* O R)\\<^sup>*\n  (z, w) \\<in> S\\<^sup>* O R\n  (x, z) \\<in> R\\<^sup>* O S\\<^sup>*\n\ngoal (2 subgoals):\n 1. (x, x) \\<in> R\\<^sup>* O S\\<^sup>*\n 2. \\<And>y z.\n       \\<lbrakk>(x, y) \\<in> (S\\<^sup>* O R)\\<^sup>*;\n        (y, z) \\<in> S\\<^sup>* O R;\n        (x, y) \\<in> R\\<^sup>* O S\\<^sup>*\\<rbrakk>\n       \\<Longrightarrow> (x, z) \\<in> R\\<^sup>* O S\\<^sup>*", "then"], ["proof (chain)\npicking this:\n  (x, z) \\<in> (S\\<^sup>* O R)\\<^sup>*\n  (z, w) \\<in> S\\<^sup>* O R\n  (x, z) \\<in> R\\<^sup>* O S\\<^sup>*", "have \"(x,w) \\<in> R\\<^sup>* O S\\<^sup>* O S\\<^sup>* O R\""], ["proof (prove)\nusing this:\n  (x, z) \\<in> (S\\<^sup>* O R)\\<^sup>*\n  (z, w) \\<in> S\\<^sup>* O R\n  (x, z) \\<in> R\\<^sup>* O S\\<^sup>*\n\ngoal (1 subgoal):\n 1. (x, w) \\<in> R\\<^sup>* O S\\<^sup>* O S\\<^sup>* O R", "by auto"], ["proof (state)\nthis:\n  (x, w) \\<in> R\\<^sup>* O S\\<^sup>* O S\\<^sup>* O R\n\ngoal (2 subgoals):\n 1. (x, x) \\<in> R\\<^sup>* O S\\<^sup>*\n 2. \\<And>y z.\n       \\<lbrakk>(x, y) \\<in> (S\\<^sup>* O R)\\<^sup>*;\n        (y, z) \\<in> S\\<^sup>* O R;\n        (x, y) \\<in> R\\<^sup>* O S\\<^sup>*\\<rbrakk>\n       \\<Longrightarrow> (x, z) \\<in> R\\<^sup>* O S\\<^sup>*", "also"], ["proof (state)\nthis:\n  (x, w) \\<in> R\\<^sup>* O S\\<^sup>* O S\\<^sup>* O R\n\ngoal (2 subgoals):\n 1. (x, x) \\<in> R\\<^sup>* O S\\<^sup>*\n 2. \\<And>y z.\n       \\<lbrakk>(x, y) \\<in> (S\\<^sup>* O R)\\<^sup>*;\n        (y, z) \\<in> S\\<^sup>* O R;\n        (x, y) \\<in> R\\<^sup>* O S\\<^sup>*\\<rbrakk>\n       \\<Longrightarrow> (x, z) \\<in> R\\<^sup>* O S\\<^sup>*", "have \"... \\<subseteq> R\\<^sup>* O S\\<^sup>* O R\""], ["proof (prove)\ngoal (1 subgoal):\n 1. R\\<^sup>* O S\\<^sup>* O S\\<^sup>* O R\n    \\<subseteq> R\\<^sup>* O S\\<^sup>* O R", "by regexp"], ["proof (state)\nthis:\n  R\\<^sup>* O S\\<^sup>* O S\\<^sup>* O R\n  \\<subseteq> R\\<^sup>* O S\\<^sup>* O R\n\ngoal (2 subgoals):\n 1. (x, x) \\<in> R\\<^sup>* O S\\<^sup>*\n 2. \\<And>y z.\n       \\<lbrakk>(x, y) \\<in> (S\\<^sup>* O R)\\<^sup>*;\n        (y, z) \\<in> S\\<^sup>* O R;\n        (x, y) \\<in> R\\<^sup>* O S\\<^sup>*\\<rbrakk>\n       \\<Longrightarrow> (x, z) \\<in> R\\<^sup>* O S\\<^sup>*", "also"], ["proof (state)\nthis:\n  R\\<^sup>* O S\\<^sup>* O S\\<^sup>* O R\n  \\<subseteq> R\\<^sup>* O S\\<^sup>* O R\n\ngoal (2 subgoals):\n 1. (x, x) \\<in> R\\<^sup>* O S\\<^sup>*\n 2. \\<And>y z.\n       \\<lbrakk>(x, y) \\<in> (S\\<^sup>* O R)\\<^sup>*;\n        (y, z) \\<in> S\\<^sup>* O R;\n        (x, y) \\<in> R\\<^sup>* O S\\<^sup>*\\<rbrakk>\n       \\<Longrightarrow> (x, z) \\<in> R\\<^sup>* O S\\<^sup>*", "have \"... \\<subseteq> R\\<^sup>* O R O S\\<^sup>*\""], ["proof (prove)\ngoal (1 subgoal):\n 1. R\\<^sup>* O S\\<^sup>* O R \\<subseteq> R\\<^sup>* O R O S\\<^sup>*", "using rtrancl_O_push"], ["proof (prove)\nusing this:\n  S\\<^sup>* O R \\<subseteq> R O S\\<^sup>*\n\ngoal (1 subgoal):\n 1. R\\<^sup>* O S\\<^sup>* O R \\<subseteq> R\\<^sup>* O R O S\\<^sup>*", "by auto"], ["proof (state)\nthis:\n  R\\<^sup>* O S\\<^sup>* O R \\<subseteq> R\\<^sup>* O R O S\\<^sup>*\n\ngoal (2 subgoals):\n 1. (x, x) \\<in> R\\<^sup>* O S\\<^sup>*\n 2. \\<And>y z.\n       \\<lbrakk>(x, y) \\<in> (S\\<^sup>* O R)\\<^sup>*;\n        (y, z) \\<in> S\\<^sup>* O R;\n        (x, y) \\<in> R\\<^sup>* O S\\<^sup>*\\<rbrakk>\n       \\<Longrightarrow> (x, z) \\<in> R\\<^sup>* O S\\<^sup>*", "also"], ["proof (state)\nthis:\n  R\\<^sup>* O S\\<^sup>* O R \\<subseteq> R\\<^sup>* O R O S\\<^sup>*\n\ngoal (2 subgoals):\n 1. (x, x) \\<in> R\\<^sup>* O S\\<^sup>*\n 2. \\<And>y z.\n       \\<lbrakk>(x, y) \\<in> (S\\<^sup>* O R)\\<^sup>*;\n        (y, z) \\<in> S\\<^sup>* O R;\n        (x, y) \\<in> R\\<^sup>* O S\\<^sup>*\\<rbrakk>\n       \\<Longrightarrow> (x, z) \\<in> R\\<^sup>* O S\\<^sup>*", "have \"... \\<subseteq> R\\<^sup>* O S\\<^sup>*\""], ["proof (prove)\ngoal (1 subgoal):\n 1. R\\<^sup>* O R O S\\<^sup>* \\<subseteq> R\\<^sup>* O S\\<^sup>*", "by regexp"], ["proof (state)\nthis:\n  R\\<^sup>* O R O S\\<^sup>* \\<subseteq> R\\<^sup>* O S\\<^sup>*\n\ngoal (2 subgoals):\n 1. (x, x) \\<in> R\\<^sup>* O S\\<^sup>*\n 2. \\<And>y z.\n       \\<lbrakk>(x, y) \\<in> (S\\<^sup>* O R)\\<^sup>*;\n        (y, z) \\<in> S\\<^sup>* O R;\n        (x, y) \\<in> R\\<^sup>* O S\\<^sup>*\\<rbrakk>\n       \\<Longrightarrow> (x, z) \\<in> R\\<^sup>* O S\\<^sup>*", "finally"], ["proof (chain)\npicking this:\n  (x, w) \\<in> R\\<^sup>* O S\\<^sup>*", "show ?case"], ["proof (prove)\nusing this:\n  (x, w) \\<in> R\\<^sup>* O S\\<^sup>*\n\ngoal (1 subgoal):\n 1. (x, w) \\<in> R\\<^sup>* O S\\<^sup>*", "."], ["proof (state)\nthis:\n  (x, w) \\<in> R\\<^sup>* O S\\<^sup>*\n\ngoal (1 subgoal):\n 1. (x, x) \\<in> R\\<^sup>* O S\\<^sup>*", "qed auto"], ["proof (state)\nthis:\n  (x, z) \\<in> R\\<^sup>* O S\\<^sup>*\n\ngoal (2 subgoals):\n 1. \\<And>x y.\n       (x, y) \\<in> (S \\<union> R)\\<^sup>* \\<Longrightarrow>\n       (x, y) \\<in> R\\<^sup>* O S\\<^sup>*\n 2. \\<And>x y.\n       (x, y) \\<in> R\\<^sup>* O S\\<^sup>* \\<Longrightarrow>\n       (x, y) \\<in> (S \\<union> R)\\<^sup>*", "with zy"], ["proof (chain)\npicking this:\n  (z, y) \\<in> S\\<^sup>*\n  (x, z) \\<in> R\\<^sup>* O S\\<^sup>*", "show \"(x,y) \\<in> R\\<^sup>* O S\\<^sup>*\""], ["proof (prove)\nusing this:\n  (z, y) \\<in> S\\<^sup>*\n  (x, z) \\<in> R\\<^sup>* O S\\<^sup>*\n\ngoal (1 subgoal):\n 1. (x, y) \\<in> R\\<^sup>* O S\\<^sup>*", "by auto"], ["proof (state)\nthis:\n  (x, y) \\<in> R\\<^sup>* O S\\<^sup>*\n\ngoal (1 subgoal):\n 1. \\<And>x y.\n       (x, y) \\<in> R\\<^sup>* O S\\<^sup>* \\<Longrightarrow>\n       (x, y) \\<in> (S \\<union> R)\\<^sup>*", "qed regexp"], ["", "lemma SN_on_O_push:\n  assumes SN: \"SN_on R X\" shows \"SN_on (R O S\\<^sup>*) X\""], ["proof (prove)\ngoal (1 subgoal):\n 1. SN_on (R O S\\<^sup>*) X", "proof"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>f.\n       \\<lbrakk>f 0 \\<in> X;\n        \\<forall>i. (f i, f (Suc i)) \\<in> R O S\\<^sup>*\\<rbrakk>\n       \\<Longrightarrow> False", "fix seq"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>f.\n       \\<lbrakk>f 0 \\<in> X;\n        \\<forall>i. (f i, f (Suc i)) \\<in> R O S\\<^sup>*\\<rbrakk>\n       \\<Longrightarrow> False", "have SN: \"SN_on R (R\\<^sup>* `` X)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. SN_on R (R\\<^sup>* `` X)", "using SN_on_Image_rtrancl[OF SN]"], ["proof (prove)\nusing this:\n  SN_on R (R\\<^sup>* `` X)\n\ngoal (1 subgoal):\n 1. SN_on R (R\\<^sup>* `` X)", "."], ["proof (state)\nthis:\n  SN_on R (R\\<^sup>* `` X)\n\ngoal (1 subgoal):\n 1. \\<And>f.\n       \\<lbrakk>f 0 \\<in> X;\n        \\<forall>i. (f i, f (Suc i)) \\<in> R O S\\<^sup>*\\<rbrakk>\n       \\<Longrightarrow> False", "moreover"], ["proof (state)\nthis:\n  SN_on R (R\\<^sup>* `` X)\n\ngoal (1 subgoal):\n 1. \\<And>f.\n       \\<lbrakk>f 0 \\<in> X;\n        \\<forall>i. (f i, f (Suc i)) \\<in> R O S\\<^sup>*\\<rbrakk>\n       \\<Longrightarrow> False", "assume \"seq (0::nat) \\<in> X\""], ["proof (state)\nthis:\n  seq 0 \\<in> X\n\ngoal (1 subgoal):\n 1. \\<And>f.\n       \\<lbrakk>f 0 \\<in> X;\n        \\<forall>i. (f i, f (Suc i)) \\<in> R O S\\<^sup>*\\<rbrakk>\n       \\<Longrightarrow> False", "then"], ["proof (chain)\npicking this:\n  seq 0 \\<in> X", "have \"seq 0 \\<in> R\\<^sup>* `` X\""], ["proof (prove)\nusing this:\n  seq 0 \\<in> X\n\ngoal (1 subgoal):\n 1. seq 0 \\<in> R\\<^sup>* `` X", "by auto"], ["proof (state)\nthis:\n  seq 0 \\<in> R\\<^sup>* `` X\n\ngoal (1 subgoal):\n 1. \\<And>f.\n       \\<lbrakk>f 0 \\<in> X;\n        \\<forall>i. (f i, f (Suc i)) \\<in> R O S\\<^sup>*\\<rbrakk>\n       \\<Longrightarrow> False", "ultimately"], ["proof (chain)\npicking this:\n  SN_on R (R\\<^sup>* `` X)\n  seq 0 \\<in> R\\<^sup>* `` X", "show \"chain (R O S\\<^sup>*) seq \\<Longrightarrow> False\""], ["proof (prove)\nusing this:\n  SN_on R (R\\<^sup>* `` X)\n  seq 0 \\<in> R\\<^sup>* `` X\n\ngoal (1 subgoal):\n 1. \\<forall>i. (seq i, seq (Suc i)) \\<in> R O S\\<^sup>* \\<Longrightarrow>\n    False", "proof(induct \"seq 0\" arbitrary: seq rule: SN_on_induct)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>seq.\n       \\<lbrakk>\\<And>seqa.\n                   \\<lbrakk>(seq 0, seqa 0) \\<in> R;\n                    \\<forall>i.\n                       (seqa i, seqa (Suc i)) \\<in> R O S\\<^sup>*\\<rbrakk>\n                   \\<Longrightarrow> False;\n        \\<forall>i. (seq i, seq (Suc i)) \\<in> R O S\\<^sup>*\\<rbrakk>\n       \\<Longrightarrow> False", "case IH"], ["proof (state)\nthis:\n  \\<lbrakk>(seq 0, ?seq 0) \\<in> R;\n   \\<forall>i. (?seq i, ?seq (Suc i)) \\<in> R O S\\<^sup>*\\<rbrakk>\n  \\<Longrightarrow> False\n  \\<forall>i. (seq i, seq (Suc i)) \\<in> R O S\\<^sup>*\n\ngoal (1 subgoal):\n 1. \\<And>seq.\n       \\<lbrakk>\\<And>seqa.\n                   \\<lbrakk>(seq 0, seqa 0) \\<in> R;\n                    \\<forall>i.\n                       (seqa i, seqa (Suc i)) \\<in> R O S\\<^sup>*\\<rbrakk>\n                   \\<Longrightarrow> False;\n        \\<forall>i. (seq i, seq (Suc i)) \\<in> R O S\\<^sup>*\\<rbrakk>\n       \\<Longrightarrow> False", "then"], ["proof (chain)\npicking this:\n  \\<lbrakk>(seq 0, ?seq 0) \\<in> R;\n   \\<forall>i. (?seq i, ?seq (Suc i)) \\<in> R O S\\<^sup>*\\<rbrakk>\n  \\<Longrightarrow> False\n  \\<forall>i. (seq i, seq (Suc i)) \\<in> R O S\\<^sup>*", "have 01: \"(seq 0, seq 1) \\<in> R O S\\<^sup>*\"\n          and 12: \"(seq 1, seq 2) \\<in> R O S\\<^sup>*\"\n          and 23: \"(seq 2, seq 3) \\<in> R O S\\<^sup>*\""], ["proof (prove)\nusing this:\n  \\<lbrakk>(seq 0, ?seq 0) \\<in> R;\n   \\<forall>i. (?seq i, ?seq (Suc i)) \\<in> R O S\\<^sup>*\\<rbrakk>\n  \\<Longrightarrow> False\n  \\<forall>i. (seq i, seq (Suc i)) \\<in> R O S\\<^sup>*\n\ngoal (1 subgoal):\n 1. (seq 0, seq 1) \\<in> R O S\\<^sup>* &&&\n    (seq 1, seq 2) \\<in> R O S\\<^sup>* &&&\n    (seq 2, seq 3) \\<in> R O S\\<^sup>*", "by (auto simp: eval_nat_numeral)"], ["proof (state)\nthis:\n  (seq 0, seq 1) \\<in> R O S\\<^sup>*\n  (seq 1, seq 2) \\<in> R O S\\<^sup>*\n  (seq 2, seq 3) \\<in> R O S\\<^sup>*\n\ngoal (1 subgoal):\n 1. \\<And>seq.\n       \\<lbrakk>\\<And>seqa.\n                   \\<lbrakk>(seq 0, seqa 0) \\<in> R;\n                    \\<forall>i.\n                       (seqa i, seqa (Suc i)) \\<in> R O S\\<^sup>*\\<rbrakk>\n                   \\<Longrightarrow> False;\n        \\<forall>i. (seq i, seq (Suc i)) \\<in> R O S\\<^sup>*\\<rbrakk>\n       \\<Longrightarrow> False", "then"], ["proof (chain)\npicking this:\n  (seq 0, seq 1) \\<in> R O S\\<^sup>*\n  (seq 1, seq 2) \\<in> R O S\\<^sup>*\n  (seq 2, seq 3) \\<in> R O S\\<^sup>*", "obtain s t\n    where s: \"(seq 0, s) \\<in> R\" and s1: \"(s, seq 1) \\<in> S\\<^sup>*\"\n      and t: \"(seq 1, t) \\<in> R\" and t2: \"(t, seq 2) \\<in> S\\<^sup>*\""], ["proof (prove)\nusing this:\n  (seq 0, seq 1) \\<in> R O S\\<^sup>*\n  (seq 1, seq 2) \\<in> R O S\\<^sup>*\n  (seq 2, seq 3) \\<in> R O S\\<^sup>*\n\ngoal (1 subgoal):\n 1. (\\<And>s t.\n        \\<lbrakk>(seq 0, s) \\<in> R; (s, seq 1) \\<in> S\\<^sup>*;\n         (seq 1, t) \\<in> R; (t, seq 2) \\<in> S\\<^sup>*\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  (seq 0, s) \\<in> R\n  (s, seq 1) \\<in> S\\<^sup>*\n  (seq 1, t) \\<in> R\n  (t, seq 2) \\<in> S\\<^sup>*\n\ngoal (1 subgoal):\n 1. \\<And>seq.\n       \\<lbrakk>\\<And>seqa.\n                   \\<lbrakk>(seq 0, seqa 0) \\<in> R;\n                    \\<forall>i.\n                       (seqa i, seqa (Suc i)) \\<in> R O S\\<^sup>*\\<rbrakk>\n                   \\<Longrightarrow> False;\n        \\<forall>i. (seq i, seq (Suc i)) \\<in> R O S\\<^sup>*\\<rbrakk>\n       \\<Longrightarrow> False", "from s1 t"], ["proof (chain)\npicking this:\n  (s, seq 1) \\<in> S\\<^sup>*\n  (seq 1, t) \\<in> R", "have \"(s,t) \\<in> S\\<^sup>* O R\""], ["proof (prove)\nusing this:\n  (s, seq 1) \\<in> S\\<^sup>*\n  (seq 1, t) \\<in> R\n\ngoal (1 subgoal):\n 1. (s, t) \\<in> S\\<^sup>* O R", "by auto"], ["proof (state)\nthis:\n  (s, t) \\<in> S\\<^sup>* O R\n\ngoal (1 subgoal):\n 1. \\<And>seq.\n       \\<lbrakk>\\<And>seqa.\n                   \\<lbrakk>(seq 0, seqa 0) \\<in> R;\n                    \\<forall>i.\n                       (seqa i, seqa (Suc i)) \\<in> R O S\\<^sup>*\\<rbrakk>\n                   \\<Longrightarrow> False;\n        \\<forall>i. (seq i, seq (Suc i)) \\<in> R O S\\<^sup>*\\<rbrakk>\n       \\<Longrightarrow> False", "with rtrancl_O_push"], ["proof (chain)\npicking this:\n  S\\<^sup>* O R \\<subseteq> R O S\\<^sup>*\n  (s, t) \\<in> S\\<^sup>* O R", "have st: \"(s,t) \\<in> R O S\\<^sup>*\""], ["proof (prove)\nusing this:\n  S\\<^sup>* O R \\<subseteq> R O S\\<^sup>*\n  (s, t) \\<in> S\\<^sup>* O R\n\ngoal (1 subgoal):\n 1. (s, t) \\<in> R O S\\<^sup>*", "by auto"], ["proof (state)\nthis:\n  (s, t) \\<in> R O S\\<^sup>*\n\ngoal (1 subgoal):\n 1. \\<And>seq.\n       \\<lbrakk>\\<And>seqa.\n                   \\<lbrakk>(seq 0, seqa 0) \\<in> R;\n                    \\<forall>i.\n                       (seqa i, seqa (Suc i)) \\<in> R O S\\<^sup>*\\<rbrakk>\n                   \\<Longrightarrow> False;\n        \\<forall>i. (seq i, seq (Suc i)) \\<in> R O S\\<^sup>*\\<rbrakk>\n       \\<Longrightarrow> False", "from t2 23"], ["proof (chain)\npicking this:\n  (t, seq 2) \\<in> S\\<^sup>*\n  (seq 2, seq 3) \\<in> R O S\\<^sup>*", "have \"(t, seq 3) \\<in> S\\<^sup>* O R O S\\<^sup>*\""], ["proof (prove)\nusing this:\n  (t, seq 2) \\<in> S\\<^sup>*\n  (seq 2, seq 3) \\<in> R O S\\<^sup>*\n\ngoal (1 subgoal):\n 1. (t, seq 3) \\<in> S\\<^sup>* O R O S\\<^sup>*", "by auto"], ["proof (state)\nthis:\n  (t, seq 3) \\<in> S\\<^sup>* O R O S\\<^sup>*\n\ngoal (1 subgoal):\n 1. \\<And>seq.\n       \\<lbrakk>\\<And>seqa.\n                   \\<lbrakk>(seq 0, seqa 0) \\<in> R;\n                    \\<forall>i.\n                       (seqa i, seqa (Suc i)) \\<in> R O S\\<^sup>*\\<rbrakk>\n                   \\<Longrightarrow> False;\n        \\<forall>i. (seq i, seq (Suc i)) \\<in> R O S\\<^sup>*\\<rbrakk>\n       \\<Longrightarrow> False", "also"], ["proof (state)\nthis:\n  (t, seq 3) \\<in> S\\<^sup>* O R O S\\<^sup>*\n\ngoal (1 subgoal):\n 1. \\<And>seq.\n       \\<lbrakk>\\<And>seqa.\n                   \\<lbrakk>(seq 0, seqa 0) \\<in> R;\n                    \\<forall>i.\n                       (seqa i, seqa (Suc i)) \\<in> R O S\\<^sup>*\\<rbrakk>\n                   \\<Longrightarrow> False;\n        \\<forall>i. (seq i, seq (Suc i)) \\<in> R O S\\<^sup>*\\<rbrakk>\n       \\<Longrightarrow> False", "from rtrancl_O_push"], ["proof (chain)\npicking this:\n  S\\<^sup>* O R \\<subseteq> R O S\\<^sup>*", "have \"... \\<subseteq> R O S\\<^sup>* O S\\<^sup>*\""], ["proof (prove)\nusing this:\n  S\\<^sup>* O R \\<subseteq> R O S\\<^sup>*\n\ngoal (1 subgoal):\n 1. S\\<^sup>* O R O S\\<^sup>* \\<subseteq> R O S\\<^sup>* O S\\<^sup>*", "by blast"], ["proof (state)\nthis:\n  S\\<^sup>* O R O S\\<^sup>* \\<subseteq> R O S\\<^sup>* O S\\<^sup>*\n\ngoal (1 subgoal):\n 1. \\<And>seq.\n       \\<lbrakk>\\<And>seqa.\n                   \\<lbrakk>(seq 0, seqa 0) \\<in> R;\n                    \\<forall>i.\n                       (seqa i, seqa (Suc i)) \\<in> R O S\\<^sup>*\\<rbrakk>\n                   \\<Longrightarrow> False;\n        \\<forall>i. (seq i, seq (Suc i)) \\<in> R O S\\<^sup>*\\<rbrakk>\n       \\<Longrightarrow> False", "finally"], ["proof (chain)\npicking this:\n  (t, seq 3) \\<in> R O S\\<^sup>* O S\\<^sup>*", "have t3: \"(t, seq 3) \\<in> R O S\\<^sup>*\""], ["proof (prove)\nusing this:\n  (t, seq 3) \\<in> R O S\\<^sup>* O S\\<^sup>*\n\ngoal (1 subgoal):\n 1. (t, seq 3) \\<in> R O S\\<^sup>*", "by regexp"], ["proof (state)\nthis:\n  (t, seq 3) \\<in> R O S\\<^sup>*\n\ngoal (1 subgoal):\n 1. \\<And>seq.\n       \\<lbrakk>\\<And>seqa.\n                   \\<lbrakk>(seq 0, seqa 0) \\<in> R;\n                    \\<forall>i.\n                       (seqa i, seqa (Suc i)) \\<in> R O S\\<^sup>*\\<rbrakk>\n                   \\<Longrightarrow> False;\n        \\<forall>i. (seq i, seq (Suc i)) \\<in> R O S\\<^sup>*\\<rbrakk>\n       \\<Longrightarrow> False", "let ?seq = \"\\<lambda>i. case i of 0 \\<Rightarrow> s | Suc 0 \\<Rightarrow> t | i \\<Rightarrow> seq (Suc i)\""], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>seq.\n       \\<lbrakk>\\<And>seqa.\n                   \\<lbrakk>(seq 0, seqa 0) \\<in> R;\n                    \\<forall>i.\n                       (seqa i, seqa (Suc i)) \\<in> R O S\\<^sup>*\\<rbrakk>\n                   \\<Longrightarrow> False;\n        \\<forall>i. (seq i, seq (Suc i)) \\<in> R O S\\<^sup>*\\<rbrakk>\n       \\<Longrightarrow> False", "show ?case"], ["proof (prove)\ngoal (1 subgoal):\n 1. False", "proof(rule IH)"], ["proof (state)\ngoal (2 subgoals):\n 1. (seq 0, ?seq 0) \\<in> R\n 2. \\<forall>i. (?seq i, ?seq (Suc i)) \\<in> R O S\\<^sup>*", "from s"], ["proof (chain)\npicking this:\n  (seq 0, s) \\<in> R", "show \"(seq 0, ?seq 0) \\<in> R\""], ["proof (prove)\nusing this:\n  (seq 0, s) \\<in> R\n\ngoal (1 subgoal):\n 1. (seq 0,\n     case 0 of 0 \\<Rightarrow> s | Suc 0 \\<Rightarrow> t\n     | Suc (Suc nata) \\<Rightarrow> seq (Suc (Suc (Suc nata))))\n    \\<in> R", "by auto"], ["proof (state)\nthis:\n  (seq 0,\n   case 0 of 0 \\<Rightarrow> s | Suc 0 \\<Rightarrow> t\n   | Suc (Suc nata) \\<Rightarrow> seq (Suc (Suc (Suc nata))))\n  \\<in> R\n\ngoal (1 subgoal):\n 1. \\<forall>i.\n       (case i of 0 \\<Rightarrow> s | Suc 0 \\<Rightarrow> t\n        | Suc (Suc nata) \\<Rightarrow> seq (Suc (Suc (Suc nata))),\n        case Suc i of 0 \\<Rightarrow> s | Suc 0 \\<Rightarrow> t\n        | Suc (Suc nata) \\<Rightarrow> seq (Suc (Suc (Suc nata))))\n       \\<in> R O S\\<^sup>*", "show \"chain (R O S\\<^sup>*) ?seq\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>i.\n       (case i of 0 \\<Rightarrow> s | Suc 0 \\<Rightarrow> t\n        | Suc (Suc nata) \\<Rightarrow> seq (Suc (Suc (Suc nata))),\n        case Suc i of 0 \\<Rightarrow> s | Suc 0 \\<Rightarrow> t\n        | Suc (Suc nata) \\<Rightarrow> seq (Suc (Suc (Suc nata))))\n       \\<in> R O S\\<^sup>*", "proof (intro allI)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>i.\n       (case i of 0 \\<Rightarrow> s | Suc 0 \\<Rightarrow> t\n        | Suc (Suc nata) \\<Rightarrow> seq (Suc (Suc (Suc nata))),\n        case Suc i of 0 \\<Rightarrow> s | Suc 0 \\<Rightarrow> t\n        | Suc (Suc nata) \\<Rightarrow> seq (Suc (Suc (Suc nata))))\n       \\<in> R O S\\<^sup>*", "fix i"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>i.\n       (case i of 0 \\<Rightarrow> s | Suc 0 \\<Rightarrow> t\n        | Suc (Suc nata) \\<Rightarrow> seq (Suc (Suc (Suc nata))),\n        case Suc i of 0 \\<Rightarrow> s | Suc 0 \\<Rightarrow> t\n        | Suc (Suc nata) \\<Rightarrow> seq (Suc (Suc (Suc nata))))\n       \\<in> R O S\\<^sup>*", "show \"(?seq i, ?seq (Suc i)) \\<in> R O S\\<^sup>*\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (case i of 0 \\<Rightarrow> s | Suc 0 \\<Rightarrow> t\n     | Suc (Suc nata) \\<Rightarrow> seq (Suc (Suc (Suc nata))),\n     case Suc i of 0 \\<Rightarrow> s | Suc 0 \\<Rightarrow> t\n     | Suc (Suc nata) \\<Rightarrow> seq (Suc (Suc (Suc nata))))\n    \\<in> R O S\\<^sup>*", "proof (cases i)"], ["proof (state)\ngoal (2 subgoals):\n 1. i = 0 \\<Longrightarrow>\n    (case i of 0 \\<Rightarrow> s | Suc 0 \\<Rightarrow> t\n     | Suc (Suc nata) \\<Rightarrow> seq (Suc (Suc (Suc nata))),\n     case Suc i of 0 \\<Rightarrow> s | Suc 0 \\<Rightarrow> t\n     | Suc (Suc nata) \\<Rightarrow> seq (Suc (Suc (Suc nata))))\n    \\<in> R O S\\<^sup>*\n 2. \\<And>nat.\n       i = Suc nat \\<Longrightarrow>\n       (case i of 0 \\<Rightarrow> s | Suc 0 \\<Rightarrow> t\n        | Suc (Suc nata) \\<Rightarrow> seq (Suc (Suc (Suc nata))),\n        case Suc i of 0 \\<Rightarrow> s | Suc 0 \\<Rightarrow> t\n        | Suc (Suc nata) \\<Rightarrow> seq (Suc (Suc (Suc nata))))\n       \\<in> R O S\\<^sup>*", "case 0"], ["proof (state)\nthis:\n  i = 0\n\ngoal (2 subgoals):\n 1. i = 0 \\<Longrightarrow>\n    (case i of 0 \\<Rightarrow> s | Suc 0 \\<Rightarrow> t\n     | Suc (Suc nata) \\<Rightarrow> seq (Suc (Suc (Suc nata))),\n     case Suc i of 0 \\<Rightarrow> s | Suc 0 \\<Rightarrow> t\n     | Suc (Suc nata) \\<Rightarrow> seq (Suc (Suc (Suc nata))))\n    \\<in> R O S\\<^sup>*\n 2. \\<And>nat.\n       i = Suc nat \\<Longrightarrow>\n       (case i of 0 \\<Rightarrow> s | Suc 0 \\<Rightarrow> t\n        | Suc (Suc nata) \\<Rightarrow> seq (Suc (Suc (Suc nata))),\n        case Suc i of 0 \\<Rightarrow> s | Suc 0 \\<Rightarrow> t\n        | Suc (Suc nata) \\<Rightarrow> seq (Suc (Suc (Suc nata))))\n       \\<in> R O S\\<^sup>*", "with st"], ["proof (chain)\npicking this:\n  (s, t) \\<in> R O S\\<^sup>*\n  i = 0", "show ?thesis"], ["proof (prove)\nusing this:\n  (s, t) \\<in> R O S\\<^sup>*\n  i = 0\n\ngoal (1 subgoal):\n 1. (case i of 0 \\<Rightarrow> s | Suc 0 \\<Rightarrow> t\n     | Suc (Suc nata) \\<Rightarrow> seq (Suc (Suc (Suc nata))),\n     case Suc i of 0 \\<Rightarrow> s | Suc 0 \\<Rightarrow> t\n     | Suc (Suc nata) \\<Rightarrow> seq (Suc (Suc (Suc nata))))\n    \\<in> R O S\\<^sup>*", "by auto"], ["proof (state)\nthis:\n  (case i of 0 \\<Rightarrow> s | Suc 0 \\<Rightarrow> t\n   | Suc (Suc nata) \\<Rightarrow> seq (Suc (Suc (Suc nata))),\n   case Suc i of 0 \\<Rightarrow> s | Suc 0 \\<Rightarrow> t\n   | Suc (Suc nata) \\<Rightarrow> seq (Suc (Suc (Suc nata))))\n  \\<in> R O S\\<^sup>*\n\ngoal (1 subgoal):\n 1. \\<And>nat.\n       i = Suc nat \\<Longrightarrow>\n       (case i of 0 \\<Rightarrow> s | Suc 0 \\<Rightarrow> t\n        | Suc (Suc nata) \\<Rightarrow> seq (Suc (Suc (Suc nata))),\n        case Suc i of 0 \\<Rightarrow> s | Suc 0 \\<Rightarrow> t\n        | Suc (Suc nata) \\<Rightarrow> seq (Suc (Suc (Suc nata))))\n       \\<in> R O S\\<^sup>*", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>nat.\n       i = Suc nat \\<Longrightarrow>\n       (case i of 0 \\<Rightarrow> s | Suc 0 \\<Rightarrow> t\n        | Suc (Suc nata) \\<Rightarrow> seq (Suc (Suc (Suc nata))),\n        case Suc i of 0 \\<Rightarrow> s | Suc 0 \\<Rightarrow> t\n        | Suc (Suc nata) \\<Rightarrow> seq (Suc (Suc (Suc nata))))\n       \\<in> R O S\\<^sup>*", "case (Suc i)"], ["proof (state)\nthis:\n  i__ = Suc i\n\ngoal (1 subgoal):\n 1. \\<And>nat.\n       i__ = Suc nat \\<Longrightarrow>\n       (case i__ of 0 \\<Rightarrow> s | Suc 0 \\<Rightarrow> t\n        | Suc (Suc nata) \\<Rightarrow> seq (Suc (Suc (Suc nata))),\n        case Suc i__ of 0 \\<Rightarrow> s | Suc 0 \\<Rightarrow> t\n        | Suc (Suc nata) \\<Rightarrow> seq (Suc (Suc (Suc nata))))\n       \\<in> R O S\\<^sup>*", "with t3 IH"], ["proof (chain)\npicking this:\n  (t, seq 3) \\<in> R O S\\<^sup>*\n  \\<lbrakk>(seq 0, ?seq 0) \\<in> R;\n   \\<forall>i. (?seq i, ?seq (Suc i)) \\<in> R O S\\<^sup>*\\<rbrakk>\n  \\<Longrightarrow> False\n  \\<forall>i. (seq i, seq (Suc i)) \\<in> R O S\\<^sup>*\n  i__ = Suc i", "show ?thesis"], ["proof (prove)\nusing this:\n  (t, seq 3) \\<in> R O S\\<^sup>*\n  \\<lbrakk>(seq 0, ?seq 0) \\<in> R;\n   \\<forall>i. (?seq i, ?seq (Suc i)) \\<in> R O S\\<^sup>*\\<rbrakk>\n  \\<Longrightarrow> False\n  \\<forall>i. (seq i, seq (Suc i)) \\<in> R O S\\<^sup>*\n  i__ = Suc i\n\ngoal (1 subgoal):\n 1. (case i__ of 0 \\<Rightarrow> s | Suc 0 \\<Rightarrow> t\n     | Suc (Suc nata) \\<Rightarrow> seq (Suc (Suc (Suc nata))),\n     case Suc i__ of 0 \\<Rightarrow> s | Suc 0 \\<Rightarrow> t\n     | Suc (Suc nata) \\<Rightarrow> seq (Suc (Suc (Suc nata))))\n    \\<in> R O S\\<^sup>*", "by (cases i, auto simp: eval_nat_numeral)"], ["proof (state)\nthis:\n  (case i__ of 0 \\<Rightarrow> s | Suc 0 \\<Rightarrow> t\n   | Suc (Suc nata) \\<Rightarrow> seq (Suc (Suc (Suc nata))),\n   case Suc i__ of 0 \\<Rightarrow> s | Suc 0 \\<Rightarrow> t\n   | Suc (Suc nata) \\<Rightarrow> seq (Suc (Suc (Suc nata))))\n  \\<in> R O S\\<^sup>*\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  (case i of 0 \\<Rightarrow> s | Suc 0 \\<Rightarrow> t\n   | Suc (Suc nata) \\<Rightarrow> seq (Suc (Suc (Suc nata))),\n   case Suc i of 0 \\<Rightarrow> s | Suc 0 \\<Rightarrow> t\n   | Suc (Suc nata) \\<Rightarrow> seq (Suc (Suc (Suc nata))))\n  \\<in> R O S\\<^sup>*\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<forall>i.\n     (case i of 0 \\<Rightarrow> s | Suc 0 \\<Rightarrow> t\n      | Suc (Suc nata) \\<Rightarrow> seq (Suc (Suc (Suc nata))),\n      case Suc i of 0 \\<Rightarrow> s | Suc 0 \\<Rightarrow> t\n      | Suc (Suc nata) \\<Rightarrow> seq (Suc (Suc (Suc nata))))\n     \\<in> R O S\\<^sup>*\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  False\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<forall>i. (seq i, seq (Suc i)) \\<in> R O S\\<^sup>* \\<Longrightarrow>\n  False\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma SN_on_Image_push:\n  assumes SN: \"SN_on R X\" shows \"SN_on R (S\\<^sup>* `` X)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. SN_on R (S\\<^sup>* `` X)", "proof-"], ["proof (state)\ngoal (1 subgoal):\n 1. SN_on R (S\\<^sup>* `` X)", "{"], ["proof (state)\ngoal (1 subgoal):\n 1. SN_on R (S\\<^sup>* `` X)", "fix n"], ["proof (state)\ngoal (1 subgoal):\n 1. SN_on R (S\\<^sup>* `` X)", "have \"SN_on R ((S^^n) `` X)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. SN_on R ((S ^^ n) `` X)", "proof(induct n)"], ["proof (state)\ngoal (2 subgoals):\n 1. SN_on R ((S ^^ 0) `` X)\n 2. \\<And>n.\n       SN_on R ((S ^^ n) `` X) \\<Longrightarrow> SN_on R ((S ^^ Suc n) `` X)", "case 0"], ["proof (state)\nthis:\n  \n\ngoal (2 subgoals):\n 1. SN_on R ((S ^^ 0) `` X)\n 2. \\<And>n.\n       SN_on R ((S ^^ n) `` X) \\<Longrightarrow> SN_on R ((S ^^ Suc n) `` X)", "from SN"], ["proof (chain)\npicking this:\n  SN_on R X", "show ?case"], ["proof (prove)\nusing this:\n  SN_on R X\n\ngoal (1 subgoal):\n 1. SN_on R ((S ^^ 0) `` X)", "by auto"], ["proof (state)\nthis:\n  SN_on R ((S ^^ 0) `` X)\n\ngoal (1 subgoal):\n 1. \\<And>n.\n       SN_on R ((S ^^ n) `` X) \\<Longrightarrow> SN_on R ((S ^^ Suc n) `` X)", "case (Suc n)"], ["proof (state)\nthis:\n  SN_on R ((S ^^ n) `` X)\n\ngoal (1 subgoal):\n 1. \\<And>n.\n       SN_on R ((S ^^ n) `` X) \\<Longrightarrow> SN_on R ((S ^^ Suc n) `` X)", "from SN_on_O_push[OF this]"], ["proof (chain)\npicking this:\n  SN_on (R O S\\<^sup>*) ((S ^^ n) `` X)", "have \"SN_on (R O S\\<^sup>*) ((S ^^ n) `` X)\""], ["proof (prove)\nusing this:\n  SN_on (R O S\\<^sup>*) ((S ^^ n) `` X)\n\ngoal (1 subgoal):\n 1. SN_on (R O S\\<^sup>*) ((S ^^ n) `` X)", "."], ["proof (state)\nthis:\n  SN_on (R O S\\<^sup>*) ((S ^^ n) `` X)\n\ngoal (1 subgoal):\n 1. \\<And>n.\n       SN_on R ((S ^^ n) `` X) \\<Longrightarrow> SN_on R ((S ^^ Suc n) `` X)", "from SN_on_Image[OF this]"], ["proof (chain)\npicking this:\n  SN_on (R O S\\<^sup>*) ((R O S\\<^sup>*) `` (S ^^ n) `` X)", "have \"SN_on (R O S\\<^sup>*) ((R O S\\<^sup>*) `` (S ^^ n) `` X)\""], ["proof (prove)\nusing this:\n  SN_on (R O S\\<^sup>*) ((R O S\\<^sup>*) `` (S ^^ n) `` X)\n\ngoal (1 subgoal):\n 1. SN_on (R O S\\<^sup>*) ((R O S\\<^sup>*) `` (S ^^ n) `` X)", "."], ["proof (state)\nthis:\n  SN_on (R O S\\<^sup>*) ((R O S\\<^sup>*) `` (S ^^ n) `` X)\n\ngoal (1 subgoal):\n 1. \\<And>n.\n       SN_on R ((S ^^ n) `` X) \\<Longrightarrow> SN_on R ((S ^^ Suc n) `` X)", "then"], ["proof (chain)\npicking this:\n  SN_on (R O S\\<^sup>*) ((R O S\\<^sup>*) `` (S ^^ n) `` X)", "have \"SN_on R ((R O S\\<^sup>*) `` (S ^^ n) `` X)\""], ["proof (prove)\nusing this:\n  SN_on (R O S\\<^sup>*) ((R O S\\<^sup>*) `` (S ^^ n) `` X)\n\ngoal (1 subgoal):\n 1. SN_on R ((R O S\\<^sup>*) `` (S ^^ n) `` X)", "by (rule SN_on_mono, auto)"], ["proof (state)\nthis:\n  SN_on R ((R O S\\<^sup>*) `` (S ^^ n) `` X)\n\ngoal (1 subgoal):\n 1. \\<And>n.\n       SN_on R ((S ^^ n) `` X) \\<Longrightarrow> SN_on R ((S ^^ Suc n) `` X)", "from SN_on_subset2[OF Image_mono[OF push subset_refl] this]"], ["proof (chain)\npicking this:\n  SN_on R ((S O R) `` (S ^^ n) `` X)", "have \"SN_on R (R `` (S ^^ Suc n) `` X)\""], ["proof (prove)\nusing this:\n  SN_on R ((S O R) `` (S ^^ n) `` X)\n\ngoal (1 subgoal):\n 1. SN_on R (R `` (S ^^ Suc n) `` X)", "by (auto simp: relcomp_Image)"], ["proof (state)\nthis:\n  SN_on R (R `` (S ^^ Suc n) `` X)\n\ngoal (1 subgoal):\n 1. \\<And>n.\n       SN_on R ((S ^^ n) `` X) \\<Longrightarrow> SN_on R ((S ^^ Suc n) `` X)", "then"], ["proof (chain)\npicking this:\n  SN_on R (R `` (S ^^ Suc n) `` X)", "show ?case"], ["proof (prove)\nusing this:\n  SN_on R (R `` (S ^^ Suc n) `` X)\n\ngoal (1 subgoal):\n 1. SN_on R ((S ^^ Suc n) `` X)", "by fast"], ["proof (state)\nthis:\n  SN_on R ((S ^^ Suc n) `` X)\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  SN_on R ((S ^^ n) `` X)\n\ngoal (1 subgoal):\n 1. SN_on R (S\\<^sup>* `` X)", "}"], ["proof (state)\nthis:\n  SN_on R ((S ^^ ?n2) `` X)\n\ngoal (1 subgoal):\n 1. SN_on R (S\\<^sup>* `` X)", "then"], ["proof (chain)\npicking this:\n  SN_on R ((S ^^ ?n2) `` X)", "show ?thesis"], ["proof (prove)\nusing this:\n  SN_on R ((S ^^ ?n2) `` X)\n\ngoal (1 subgoal):\n 1. SN_on R (S\\<^sup>* `` X)", "by fast"], ["proof (state)\nthis:\n  SN_on R (S\\<^sup>* `` X)\n\ngoal:\nNo subgoals!", "qed"], ["", "end"], ["", "lemma not_SN_onI[intro]: \"f 0 \\<in> X \\<Longrightarrow> chain R f \\<Longrightarrow> \\<not> SN_on R X\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>f 0 \\<in> X; \\<forall>i. (f i, f (Suc i)) \\<in> R\\<rbrakk>\n    \\<Longrightarrow> \\<not> SN_on R X", "by (unfold SN_on_def not_not, intro exI conjI)"], ["", "lemma shift_comp[simp]: \"shift (f \\<circ> seq) n = f \\<circ> (shift seq n)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. shift (f \\<circ> seq) n = f \\<circ> shift seq n", "by auto"], ["", "lemma Id_on_union: \"Id_on (A \\<union> B) = Id_on A \\<union> Id_on B\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Id_on (A \\<union> B) = Id_on A \\<union> Id_on B", "unfolding Id_on_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Union>x\\<in>A \\<union> B. {(x, x)}) =\n    (\\<Union>x\\<in>A. {(x, x)}) \\<union> (\\<Union>x\\<in>B. {(x, x)})", "by auto"], ["", "lemma relpow_union_cases: \"(a,d) \\<in> (A \\<union> B)^^n \\<Longrightarrow> (a,d) \\<in> B^^n \\<or> (\\<exists> b c k m. (a,b) \\<in> B^^k \\<and> (b,c) \\<in> A \\<and> (c,d) \\<in> (A \\<union> B)^^m \\<and> n = Suc (k + m))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (a, d) \\<in> (A \\<union> B) ^^ n \\<Longrightarrow>\n    (a, d) \\<in> B ^^ n \\<or>\n    (\\<exists>b c k m.\n        (a, b) \\<in> B ^^ k \\<and>\n        (b, c) \\<in> A \\<and>\n        (c, d) \\<in> (A \\<union> B) ^^ m \\<and> n = Suc (k + m))", "proof (induct n arbitrary: a d)"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>a d.\n       (a, d) \\<in> (A \\<union> B) ^^ 0 \\<Longrightarrow>\n       (a, d) \\<in> B ^^ 0 \\<or>\n       (\\<exists>b c k m.\n           (a, b) \\<in> B ^^ k \\<and>\n           (b, c) \\<in> A \\<and>\n           (c, d) \\<in> (A \\<union> B) ^^ m \\<and> 0 = Suc (k + m))\n 2. \\<And>n a d.\n       \\<lbrakk>\\<And>a d.\n                   (a, d) \\<in> (A \\<union> B) ^^ n \\<Longrightarrow>\n                   (a, d) \\<in> B ^^ n \\<or>\n                   (\\<exists>b c k m.\n                       (a, b) \\<in> B ^^ k \\<and>\n                       (b, c) \\<in> A \\<and>\n                       (c, d) \\<in> (A \\<union> B) ^^ m \\<and>\n                       n = Suc (k + m));\n        (a, d) \\<in> (A \\<union> B) ^^ Suc n\\<rbrakk>\n       \\<Longrightarrow> (a, d) \\<in> B ^^ Suc n \\<or>\n                         (\\<exists>b c k m.\n                             (a, b) \\<in> B ^^ k \\<and>\n                             (b, c) \\<in> A \\<and>\n                             (c, d) \\<in> (A \\<union> B) ^^ m \\<and>\n                             Suc n = Suc (k + m))", "case (Suc n a e)"], ["proof (state)\nthis:\n  (?a, ?d) \\<in> (A \\<union> B) ^^ n \\<Longrightarrow>\n  (?a, ?d) \\<in> B ^^ n \\<or>\n  (\\<exists>b c k m.\n      (?a, b) \\<in> B ^^ k \\<and>\n      (b, c) \\<in> A \\<and>\n      (c, ?d) \\<in> (A \\<union> B) ^^ m \\<and> n = Suc (k + m))\n  (a, e) \\<in> (A \\<union> B) ^^ Suc n\n\ngoal (2 subgoals):\n 1. \\<And>a d.\n       (a, d) \\<in> (A \\<union> B) ^^ 0 \\<Longrightarrow>\n       (a, d) \\<in> B ^^ 0 \\<or>\n       (\\<exists>b c k m.\n           (a, b) \\<in> B ^^ k \\<and>\n           (b, c) \\<in> A \\<and>\n           (c, d) \\<in> (A \\<union> B) ^^ m \\<and> 0 = Suc (k + m))\n 2. \\<And>n a d.\n       \\<lbrakk>\\<And>a d.\n                   (a, d) \\<in> (A \\<union> B) ^^ n \\<Longrightarrow>\n                   (a, d) \\<in> B ^^ n \\<or>\n                   (\\<exists>b c k m.\n                       (a, b) \\<in> B ^^ k \\<and>\n                       (b, c) \\<in> A \\<and>\n                       (c, d) \\<in> (A \\<union> B) ^^ m \\<and>\n                       n = Suc (k + m));\n        (a, d) \\<in> (A \\<union> B) ^^ Suc n\\<rbrakk>\n       \\<Longrightarrow> (a, d) \\<in> B ^^ Suc n \\<or>\n                         (\\<exists>b c k m.\n                             (a, b) \\<in> B ^^ k \\<and>\n                             (b, c) \\<in> A \\<and>\n                             (c, d) \\<in> (A \\<union> B) ^^ m \\<and>\n                             Suc n = Suc (k + m))", "let ?AB = \"A \\<union> B\""], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>a d.\n       (a, d) \\<in> (A \\<union> B) ^^ 0 \\<Longrightarrow>\n       (a, d) \\<in> B ^^ 0 \\<or>\n       (\\<exists>b c k m.\n           (a, b) \\<in> B ^^ k \\<and>\n           (b, c) \\<in> A \\<and>\n           (c, d) \\<in> (A \\<union> B) ^^ m \\<and> 0 = Suc (k + m))\n 2. \\<And>n a d.\n       \\<lbrakk>\\<And>a d.\n                   (a, d) \\<in> (A \\<union> B) ^^ n \\<Longrightarrow>\n                   (a, d) \\<in> B ^^ n \\<or>\n                   (\\<exists>b c k m.\n                       (a, b) \\<in> B ^^ k \\<and>\n                       (b, c) \\<in> A \\<and>\n                       (c, d) \\<in> (A \\<union> B) ^^ m \\<and>\n                       n = Suc (k + m));\n        (a, d) \\<in> (A \\<union> B) ^^ Suc n\\<rbrakk>\n       \\<Longrightarrow> (a, d) \\<in> B ^^ Suc n \\<or>\n                         (\\<exists>b c k m.\n                             (a, b) \\<in> B ^^ k \\<and>\n                             (b, c) \\<in> A \\<and>\n                             (c, d) \\<in> (A \\<union> B) ^^ m \\<and>\n                             Suc n = Suc (k + m))", "from Suc(2)"], ["proof (chain)\npicking this:\n  (a, e) \\<in> (A \\<union> B) ^^ Suc n", "obtain b where ab: \"(a,b) \\<in> ?AB\" and be: \"(b,e) \\<in> ?AB^^n\""], ["proof (prove)\nusing this:\n  (a, e) \\<in> (A \\<union> B) ^^ Suc n\n\ngoal (1 subgoal):\n 1. (\\<And>b.\n        \\<lbrakk>(a, b) \\<in> A \\<union> B;\n         (b, e) \\<in> (A \\<union> B) ^^ n\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by (rule relpow_Suc_E2)"], ["proof (state)\nthis:\n  (a, b) \\<in> A \\<union> B\n  (b, e) \\<in> (A \\<union> B) ^^ n\n\ngoal (2 subgoals):\n 1. \\<And>a d.\n       (a, d) \\<in> (A \\<union> B) ^^ 0 \\<Longrightarrow>\n       (a, d) \\<in> B ^^ 0 \\<or>\n       (\\<exists>b c k m.\n           (a, b) \\<in> B ^^ k \\<and>\n           (b, c) \\<in> A \\<and>\n           (c, d) \\<in> (A \\<union> B) ^^ m \\<and> 0 = Suc (k + m))\n 2. \\<And>n a d.\n       \\<lbrakk>\\<And>a d.\n                   (a, d) \\<in> (A \\<union> B) ^^ n \\<Longrightarrow>\n                   (a, d) \\<in> B ^^ n \\<or>\n                   (\\<exists>b c k m.\n                       (a, b) \\<in> B ^^ k \\<and>\n                       (b, c) \\<in> A \\<and>\n                       (c, d) \\<in> (A \\<union> B) ^^ m \\<and>\n                       n = Suc (k + m));\n        (a, d) \\<in> (A \\<union> B) ^^ Suc n\\<rbrakk>\n       \\<Longrightarrow> (a, d) \\<in> B ^^ Suc n \\<or>\n                         (\\<exists>b c k m.\n                             (a, b) \\<in> B ^^ k \\<and>\n                             (b, c) \\<in> A \\<and>\n                             (c, d) \\<in> (A \\<union> B) ^^ m \\<and>\n                             Suc n = Suc (k + m))", "from ab"], ["proof (chain)\npicking this:\n  (a, b) \\<in> A \\<union> B", "show ?case"], ["proof (prove)\nusing this:\n  (a, b) \\<in> A \\<union> B\n\ngoal (1 subgoal):\n 1. (a, e) \\<in> B ^^ Suc n \\<or>\n    (\\<exists>b c k m.\n        (a, b) \\<in> B ^^ k \\<and>\n        (b, c) \\<in> A \\<and>\n        (c, e) \\<in> (A \\<union> B) ^^ m \\<and> Suc n = Suc (k + m))", "proof"], ["proof (state)\ngoal (2 subgoals):\n 1. (a, b) \\<in> A \\<Longrightarrow>\n    (a, e) \\<in> B ^^ Suc n \\<or>\n    (\\<exists>b c k m.\n        (a, b) \\<in> B ^^ k \\<and>\n        (b, c) \\<in> A \\<and>\n        (c, e) \\<in> (A \\<union> B) ^^ m \\<and> Suc n = Suc (k + m))\n 2. (a, b) \\<in> B \\<Longrightarrow>\n    (a, e) \\<in> B ^^ Suc n \\<or>\n    (\\<exists>b c k m.\n        (a, b) \\<in> B ^^ k \\<and>\n        (b, c) \\<in> A \\<and>\n        (c, e) \\<in> (A \\<union> B) ^^ m \\<and> Suc n = Suc (k + m))", "assume \"(a,b) \\<in> A\""], ["proof (state)\nthis:\n  (a, b) \\<in> A\n\ngoal (2 subgoals):\n 1. (a, b) \\<in> A \\<Longrightarrow>\n    (a, e) \\<in> B ^^ Suc n \\<or>\n    (\\<exists>b c k m.\n        (a, b) \\<in> B ^^ k \\<and>\n        (b, c) \\<in> A \\<and>\n        (c, e) \\<in> (A \\<union> B) ^^ m \\<and> Suc n = Suc (k + m))\n 2. (a, b) \\<in> B \\<Longrightarrow>\n    (a, e) \\<in> B ^^ Suc n \\<or>\n    (\\<exists>b c k m.\n        (a, b) \\<in> B ^^ k \\<and>\n        (b, c) \\<in> A \\<and>\n        (c, e) \\<in> (A \\<union> B) ^^ m \\<and> Suc n = Suc (k + m))", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. (a, e) \\<in> B ^^ Suc n \\<or>\n    (\\<exists>b c k m.\n        (a, b) \\<in> B ^^ k \\<and>\n        (b, c) \\<in> A \\<and>\n        (c, e) \\<in> (A \\<union> B) ^^ m \\<and> Suc n = Suc (k + m))", "proof (rule disjI2, intro exI conjI)"], ["proof (state)\ngoal (4 subgoals):\n 1. (a, ?b2) \\<in> B ^^ ?k4\n 2. (?b2, ?c3) \\<in> A\n 3. (?c3, e) \\<in> (A \\<union> B) ^^ ?m5\n 4. Suc n = Suc (?k4 + ?m5)", "show \"Suc n = Suc (0 + n)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Suc n = Suc (0 + n)", "by simp"], ["proof (state)\nthis:\n  Suc n = Suc (0 + n)\n\ngoal (3 subgoals):\n 1. (a, ?b2) \\<in> B ^^ 0\n 2. (?b2, ?c3) \\<in> A\n 3. (?c3, e) \\<in> (A \\<union> B) ^^ n", "show \"(a,b) \\<in> A\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (a, b) \\<in> A", "by fact"], ["proof (state)\nthis:\n  (a, b) \\<in> A\n\ngoal (2 subgoals):\n 1. (a, a) \\<in> B ^^ 0\n 2. (b, e) \\<in> (A \\<union> B) ^^ n", "qed (insert be, auto)"], ["proof (state)\nthis:\n  (a, e) \\<in> B ^^ Suc n \\<or>\n  (\\<exists>b c k m.\n      (a, b) \\<in> B ^^ k \\<and>\n      (b, c) \\<in> A \\<and>\n      (c, e) \\<in> (A \\<union> B) ^^ m \\<and> Suc n = Suc (k + m))\n\ngoal (1 subgoal):\n 1. (a, b) \\<in> B \\<Longrightarrow>\n    (a, e) \\<in> B ^^ Suc n \\<or>\n    (\\<exists>b c k m.\n        (a, b) \\<in> B ^^ k \\<and>\n        (b, c) \\<in> A \\<and>\n        (c, e) \\<in> (A \\<union> B) ^^ m \\<and> Suc n = Suc (k + m))", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. (a, b) \\<in> B \\<Longrightarrow>\n    (a, e) \\<in> B ^^ Suc n \\<or>\n    (\\<exists>b c k m.\n        (a, b) \\<in> B ^^ k \\<and>\n        (b, c) \\<in> A \\<and>\n        (c, e) \\<in> (A \\<union> B) ^^ m \\<and> Suc n = Suc (k + m))", "assume ab: \"(a,b) \\<in> B\""], ["proof (state)\nthis:\n  (a, b) \\<in> B\n\ngoal (1 subgoal):\n 1. (a, b) \\<in> B \\<Longrightarrow>\n    (a, e) \\<in> B ^^ Suc n \\<or>\n    (\\<exists>b c k m.\n        (a, b) \\<in> B ^^ k \\<and>\n        (b, c) \\<in> A \\<and>\n        (c, e) \\<in> (A \\<union> B) ^^ m \\<and> Suc n = Suc (k + m))", "from Suc(1)[OF be]"], ["proof (chain)\npicking this:\n  (b, e) \\<in> B ^^ n \\<or>\n  (\\<exists>ba c k m.\n      (b, ba) \\<in> B ^^ k \\<and>\n      (ba, c) \\<in> A \\<and>\n      (c, e) \\<in> (A \\<union> B) ^^ m \\<and> n = Suc (k + m))", "show ?thesis"], ["proof (prove)\nusing this:\n  (b, e) \\<in> B ^^ n \\<or>\n  (\\<exists>ba c k m.\n      (b, ba) \\<in> B ^^ k \\<and>\n      (ba, c) \\<in> A \\<and>\n      (c, e) \\<in> (A \\<union> B) ^^ m \\<and> n = Suc (k + m))\n\ngoal (1 subgoal):\n 1. (a, e) \\<in> B ^^ Suc n \\<or>\n    (\\<exists>b c k m.\n        (a, b) \\<in> B ^^ k \\<and>\n        (b, c) \\<in> A \\<and>\n        (c, e) \\<in> (A \\<union> B) ^^ m \\<and> Suc n = Suc (k + m))", "proof"], ["proof (state)\ngoal (2 subgoals):\n 1. (b, e) \\<in> B ^^ n \\<Longrightarrow>\n    (a, e) \\<in> B ^^ Suc n \\<or>\n    (\\<exists>b c k m.\n        (a, b) \\<in> B ^^ k \\<and>\n        (b, c) \\<in> A \\<and>\n        (c, e) \\<in> (A \\<union> B) ^^ m \\<and> Suc n = Suc (k + m))\n 2. \\<exists>ba c k m.\n       (b, ba) \\<in> B ^^ k \\<and>\n       (ba, c) \\<in> A \\<and>\n       (c, e) \\<in> (A \\<union> B) ^^ m \\<and>\n       n = Suc (k + m) \\<Longrightarrow>\n    (a, e) \\<in> B ^^ Suc n \\<or>\n    (\\<exists>b c k m.\n        (a, b) \\<in> B ^^ k \\<and>\n        (b, c) \\<in> A \\<and>\n        (c, e) \\<in> (A \\<union> B) ^^ m \\<and> Suc n = Suc (k + m))", "assume \"(b,e) \\<in> B ^^ n\""], ["proof (state)\nthis:\n  (b, e) \\<in> B ^^ n\n\ngoal (2 subgoals):\n 1. (b, e) \\<in> B ^^ n \\<Longrightarrow>\n    (a, e) \\<in> B ^^ Suc n \\<or>\n    (\\<exists>b c k m.\n        (a, b) \\<in> B ^^ k \\<and>\n        (b, c) \\<in> A \\<and>\n        (c, e) \\<in> (A \\<union> B) ^^ m \\<and> Suc n = Suc (k + m))\n 2. \\<exists>ba c k m.\n       (b, ba) \\<in> B ^^ k \\<and>\n       (ba, c) \\<in> A \\<and>\n       (c, e) \\<in> (A \\<union> B) ^^ m \\<and>\n       n = Suc (k + m) \\<Longrightarrow>\n    (a, e) \\<in> B ^^ Suc n \\<or>\n    (\\<exists>b c k m.\n        (a, b) \\<in> B ^^ k \\<and>\n        (b, c) \\<in> A \\<and>\n        (c, e) \\<in> (A \\<union> B) ^^ m \\<and> Suc n = Suc (k + m))", "with ab"], ["proof (chain)\npicking this:\n  (a, b) \\<in> B\n  (b, e) \\<in> B ^^ n", "show ?thesis"], ["proof (prove)\nusing this:\n  (a, b) \\<in> B\n  (b, e) \\<in> B ^^ n\n\ngoal (1 subgoal):\n 1. (a, e) \\<in> B ^^ Suc n \\<or>\n    (\\<exists>b c k m.\n        (a, b) \\<in> B ^^ k \\<and>\n        (b, c) \\<in> A \\<and>\n        (c, e) \\<in> (A \\<union> B) ^^ m \\<and> Suc n = Suc (k + m))", "by (intro disjI1 relpow_Suc_I2)"], ["proof (state)\nthis:\n  (a, e) \\<in> B ^^ Suc n \\<or>\n  (\\<exists>b c k m.\n      (a, b) \\<in> B ^^ k \\<and>\n      (b, c) \\<in> A \\<and>\n      (c, e) \\<in> (A \\<union> B) ^^ m \\<and> Suc n = Suc (k + m))\n\ngoal (1 subgoal):\n 1. \\<exists>ba c k m.\n       (b, ba) \\<in> B ^^ k \\<and>\n       (ba, c) \\<in> A \\<and>\n       (c, e) \\<in> (A \\<union> B) ^^ m \\<and>\n       n = Suc (k + m) \\<Longrightarrow>\n    (a, e) \\<in> B ^^ Suc n \\<or>\n    (\\<exists>b c k m.\n        (a, b) \\<in> B ^^ k \\<and>\n        (b, c) \\<in> A \\<and>\n        (c, e) \\<in> (A \\<union> B) ^^ m \\<and> Suc n = Suc (k + m))", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<exists>ba c k m.\n       (b, ba) \\<in> B ^^ k \\<and>\n       (ba, c) \\<in> A \\<and>\n       (c, e) \\<in> (A \\<union> B) ^^ m \\<and>\n       n = Suc (k + m) \\<Longrightarrow>\n    (a, e) \\<in> B ^^ Suc n \\<or>\n    (\\<exists>b c k m.\n        (a, b) \\<in> B ^^ k \\<and>\n        (b, c) \\<in> A \\<and>\n        (c, e) \\<in> (A \\<union> B) ^^ m \\<and> Suc n = Suc (k + m))", "assume \"\\<exists> c d k m. (b, c) \\<in> B ^^ k \\<and> (c, d) \\<in> A \\<and> (d, e) \\<in> ?AB ^^ m \\<and> n = Suc (k + m)\""], ["proof (state)\nthis:\n  \\<exists>c d k m.\n     (b, c) \\<in> B ^^ k \\<and>\n     (c, d) \\<in> A \\<and>\n     (d, e) \\<in> (A \\<union> B) ^^ m \\<and> n = Suc (k + m)\n\ngoal (1 subgoal):\n 1. \\<exists>ba c k m.\n       (b, ba) \\<in> B ^^ k \\<and>\n       (ba, c) \\<in> A \\<and>\n       (c, e) \\<in> (A \\<union> B) ^^ m \\<and>\n       n = Suc (k + m) \\<Longrightarrow>\n    (a, e) \\<in> B ^^ Suc n \\<or>\n    (\\<exists>b c k m.\n        (a, b) \\<in> B ^^ k \\<and>\n        (b, c) \\<in> A \\<and>\n        (c, e) \\<in> (A \\<union> B) ^^ m \\<and> Suc n = Suc (k + m))", "then"], ["proof (chain)\npicking this:\n  \\<exists>c d k m.\n     (b, c) \\<in> B ^^ k \\<and>\n     (c, d) \\<in> A \\<and>\n     (d, e) \\<in> (A \\<union> B) ^^ m \\<and> n = Suc (k + m)", "obtain c d k m where \"(b, c) \\<in> B ^^ k\" and *: \"(c, d) \\<in> A\" \"(d, e) \\<in> ?AB ^^ m\" \"n = Suc (k + m)\""], ["proof (prove)\nusing this:\n  \\<exists>c d k m.\n     (b, c) \\<in> B ^^ k \\<and>\n     (c, d) \\<in> A \\<and>\n     (d, e) \\<in> (A \\<union> B) ^^ m \\<and> n = Suc (k + m)\n\ngoal (1 subgoal):\n 1. (\\<And>c k d m.\n        \\<lbrakk>(b, c) \\<in> B ^^ k; (c, d) \\<in> A;\n         (d, e) \\<in> (A \\<union> B) ^^ m; n = Suc (k + m)\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by blast"], ["proof (state)\nthis:\n  (b, c) \\<in> B ^^ k\n  (c, d) \\<in> A\n  (d, e) \\<in> (A \\<union> B) ^^ m\n  n = Suc (k + m)\n\ngoal (1 subgoal):\n 1. \\<exists>ba c k m.\n       (b, ba) \\<in> B ^^ k \\<and>\n       (ba, c) \\<in> A \\<and>\n       (c, e) \\<in> (A \\<union> B) ^^ m \\<and>\n       n = Suc (k + m) \\<Longrightarrow>\n    (a, e) \\<in> B ^^ Suc n \\<or>\n    (\\<exists>b c k m.\n        (a, b) \\<in> B ^^ k \\<and>\n        (b, c) \\<in> A \\<and>\n        (c, e) \\<in> (A \\<union> B) ^^ m \\<and> Suc n = Suc (k + m))", "with ab"], ["proof (chain)\npicking this:\n  (a, b) \\<in> B\n  (b, c) \\<in> B ^^ k\n  (c, d) \\<in> A\n  (d, e) \\<in> (A \\<union> B) ^^ m\n  n = Suc (k + m)", "have ac: \"(a,c) \\<in> B ^^ (Suc k)\""], ["proof (prove)\nusing this:\n  (a, b) \\<in> B\n  (b, c) \\<in> B ^^ k\n  (c, d) \\<in> A\n  (d, e) \\<in> (A \\<union> B) ^^ m\n  n = Suc (k + m)\n\ngoal (1 subgoal):\n 1. (a, c) \\<in> B ^^ Suc k", "by (intro relpow_Suc_I2)"], ["proof (state)\nthis:\n  (a, c) \\<in> B ^^ Suc k\n\ngoal (1 subgoal):\n 1. \\<exists>ba c k m.\n       (b, ba) \\<in> B ^^ k \\<and>\n       (ba, c) \\<in> A \\<and>\n       (c, e) \\<in> (A \\<union> B) ^^ m \\<and>\n       n = Suc (k + m) \\<Longrightarrow>\n    (a, e) \\<in> B ^^ Suc n \\<or>\n    (\\<exists>b c k m.\n        (a, b) \\<in> B ^^ k \\<and>\n        (b, c) \\<in> A \\<and>\n        (c, e) \\<in> (A \\<union> B) ^^ m \\<and> Suc n = Suc (k + m))", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. (a, e) \\<in> B ^^ Suc n \\<or>\n    (\\<exists>b c k m.\n        (a, b) \\<in> B ^^ k \\<and>\n        (b, c) \\<in> A \\<and>\n        (c, e) \\<in> (A \\<union> B) ^^ m \\<and> Suc n = Suc (k + m))", "by (intro disjI2 exI conjI, rule ac, (rule *)+, simp add: *)"], ["proof (state)\nthis:\n  (a, e) \\<in> B ^^ Suc n \\<or>\n  (\\<exists>b c k m.\n      (a, b) \\<in> B ^^ k \\<and>\n      (b, c) \\<in> A \\<and>\n      (c, e) \\<in> (A \\<union> B) ^^ m \\<and> Suc n = Suc (k + m))\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  (a, e) \\<in> B ^^ Suc n \\<or>\n  (\\<exists>b c k m.\n      (a, b) \\<in> B ^^ k \\<and>\n      (b, c) \\<in> A \\<and>\n      (c, e) \\<in> (A \\<union> B) ^^ m \\<and> Suc n = Suc (k + m))\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  (a, e) \\<in> B ^^ Suc n \\<or>\n  (\\<exists>b c k m.\n      (a, b) \\<in> B ^^ k \\<and>\n      (b, c) \\<in> A \\<and>\n      (c, e) \\<in> (A \\<union> B) ^^ m \\<and> Suc n = Suc (k + m))\n\ngoal (1 subgoal):\n 1. \\<And>a d.\n       (a, d) \\<in> (A \\<union> B) ^^ 0 \\<Longrightarrow>\n       (a, d) \\<in> B ^^ 0 \\<or>\n       (\\<exists>b c k m.\n           (a, b) \\<in> B ^^ k \\<and>\n           (b, c) \\<in> A \\<and>\n           (c, d) \\<in> (A \\<union> B) ^^ m \\<and> 0 = Suc (k + m))", "qed simp"], ["", "lemma trans_refl_imp_rtrancl_id:\n  assumes \"trans r\" \"refl r\"\n  shows \"r\\<^sup>* = r\""], ["proof (prove)\ngoal (1 subgoal):\n 1. r\\<^sup>* = r", "proof"], ["proof (state)\ngoal (2 subgoals):\n 1. r\\<^sup>* \\<subseteq> r\n 2. r \\<subseteq> r\\<^sup>*", "show \"r\\<^sup>* \\<subseteq> r\""], ["proof (prove)\ngoal (1 subgoal):\n 1. r\\<^sup>* \\<subseteq> r", "proof"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x y. (x, y) \\<in> r\\<^sup>* \\<Longrightarrow> (x, y) \\<in> r", "fix x y"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x y. (x, y) \\<in> r\\<^sup>* \\<Longrightarrow> (x, y) \\<in> r", "assume \"(x,y) \\<in> r\\<^sup>*\""], ["proof (state)\nthis:\n  (x, y) \\<in> r\\<^sup>*\n\ngoal (1 subgoal):\n 1. \\<And>x y. (x, y) \\<in> r\\<^sup>* \\<Longrightarrow> (x, y) \\<in> r", "thus \"(x,y) \\<in> r\""], ["proof (prove)\nusing this:\n  (x, y) \\<in> r\\<^sup>*\n\ngoal (1 subgoal):\n 1. (x, y) \\<in> r", "by (induct, insert assms, unfold refl_on_def trans_def, blast+)"], ["proof (state)\nthis:\n  (x, y) \\<in> r\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  r\\<^sup>* \\<subseteq> r\n\ngoal (1 subgoal):\n 1. r \\<subseteq> r\\<^sup>*", "qed regexp"], ["", "lemma trans_refl_imp_O_id:\n  assumes \"trans r\" \"refl r\"\n  shows \"r O r = r\""], ["proof (prove)\ngoal (1 subgoal):\n 1. r O r = r", "proof(intro equalityI)"], ["proof (state)\ngoal (2 subgoals):\n 1. r O r \\<subseteq> r\n 2. r \\<subseteq> r O r", "show \"r O r \\<subseteq> r\""], ["proof (prove)\ngoal (1 subgoal):\n 1. r O r \\<subseteq> r", "by(fact trans_O_subset[OF assms(1)])"], ["proof (state)\nthis:\n  r O r \\<subseteq> r\n\ngoal (1 subgoal):\n 1. r \\<subseteq> r O r", "have \"r \\<subseteq> r O Id\""], ["proof (prove)\ngoal (1 subgoal):\n 1. r \\<subseteq> r O Id", "by auto"], ["proof (state)\nthis:\n  r \\<subseteq> r O Id\n\ngoal (1 subgoal):\n 1. r \\<subseteq> r O r", "moreover"], ["proof (state)\nthis:\n  r \\<subseteq> r O Id\n\ngoal (1 subgoal):\n 1. r \\<subseteq> r O r", "have \"Id \\<subseteq> r\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Id \\<subseteq> r", "by(fact assms(2)[unfolded refl_O_iff])"], ["proof (state)\nthis:\n  Id \\<subseteq> r\n\ngoal (1 subgoal):\n 1. r \\<subseteq> r O r", "ultimately"], ["proof (chain)\npicking this:\n  r \\<subseteq> r O Id\n  Id \\<subseteq> r", "show \"r \\<subseteq> r O r\""], ["proof (prove)\nusing this:\n  r \\<subseteq> r O Id\n  Id \\<subseteq> r\n\ngoal (1 subgoal):\n 1. r \\<subseteq> r O r", "by auto"], ["proof (state)\nthis:\n  r \\<subseteq> r O r\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma relcomp3_I:\n  assumes \"(t, u) \\<in> A\" and \"(s, t) \\<in> B\" and \"(u, v) \\<in> B\"\n  shows \"(s, v) \\<in> B O A O B\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (s, v) \\<in> B O A O B", "using assms"], ["proof (prove)\nusing this:\n  (t, u) \\<in> A\n  (s, t) \\<in> B\n  (u, v) \\<in> B\n\ngoal (1 subgoal):\n 1. (s, v) \\<in> B O A O B", "by blast"], ["", "lemma relcomp3_transI:\n  assumes \"trans B\" and \"(t, u) \\<in> B O A O B\" and \"(s, t) \\<in> B\" and \"(u, v) \\<in> B\"\n  shows \"(s, v) \\<in> B O A O B\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (s, v) \\<in> B O A O B", "using assms"], ["proof (prove)\nusing this:\n  trans B\n  (t, u) \\<in> B O A O B\n  (s, t) \\<in> B\n  (u, v) \\<in> B\n\ngoal (1 subgoal):\n 1. (s, v) \\<in> B O A O B", "by (auto simp: trans_def intro: relcomp3_I)"], ["", "lemmas converse_inward = rtrancl_converse[symmetric] converse_Un converse_UNION converse_relcomp\n  converse_converse converse_Id"], ["", "lemma qc_SN_relto_iff:\n  assumes \"r O s \\<subseteq> s O (s \\<union> r)\\<^sup>*\"\n  shows \"SN (r\\<^sup>* O s O r\\<^sup>*) = SN s\""], ["proof (prove)\ngoal (1 subgoal):\n 1. SN (r\\<^sup>* O s O r\\<^sup>*) = SN s", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. SN (r\\<^sup>* O s O r\\<^sup>*) = SN s", "from converse_mono [THEN iffD2 , OF assms]"], ["proof (chain)\npicking this:\n  (r O s)\\<inverse> \\<subseteq> (s O (s \\<union> r)\\<^sup>*)\\<inverse>", "have *: \"s\\<inverse> O r\\<inverse> \\<subseteq> (s\\<inverse> \\<union> r\\<inverse>)\\<^sup>* O s\\<inverse>\""], ["proof (prove)\nusing this:\n  (r O s)\\<inverse> \\<subseteq> (s O (s \\<union> r)\\<^sup>*)\\<inverse>\n\ngoal (1 subgoal):\n 1. s\\<inverse> O r\\<inverse>\n    \\<subseteq> (s\\<inverse> \\<union> r\\<inverse>)\\<^sup>* O s\\<inverse>", "unfolding converse_inward"], ["proof (prove)\nusing this:\n  s\\<inverse> O r\\<inverse>\n  \\<subseteq> (s\\<inverse> \\<union> r\\<inverse>)\\<^sup>* O s\\<inverse>\n\ngoal (1 subgoal):\n 1. s\\<inverse> O r\\<inverse>\n    \\<subseteq> (s\\<inverse> \\<union> r\\<inverse>)\\<^sup>* O s\\<inverse>", "."], ["proof (state)\nthis:\n  s\\<inverse> O r\\<inverse>\n  \\<subseteq> (s\\<inverse> \\<union> r\\<inverse>)\\<^sup>* O s\\<inverse>\n\ngoal (1 subgoal):\n 1. SN (r\\<^sup>* O s O r\\<^sup>*) = SN s", "have \"(r\\<^sup>* O s O r\\<^sup>*)\\<inverse> = (r\\<inverse>)\\<^sup>* O s\\<inverse> O (r\\<inverse>)\\<^sup>*\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (r\\<^sup>* O s O r\\<^sup>*)\\<inverse> =\n    (r\\<inverse>)\\<^sup>* O s\\<inverse> O (r\\<inverse>)\\<^sup>*", "by (simp only: converse_relcomp O_assoc rtrancl_converse)"], ["proof (state)\nthis:\n  (r\\<^sup>* O s O r\\<^sup>*)\\<inverse> =\n  (r\\<inverse>)\\<^sup>* O s\\<inverse> O (r\\<inverse>)\\<^sup>*\n\ngoal (1 subgoal):\n 1. SN (r\\<^sup>* O s O r\\<^sup>*) = SN s", "with qc_wf_relto_iff [OF *]"], ["proof (chain)\npicking this:\n  wf ((r\\<inverse>)\\<^sup>* O s\\<inverse> O (r\\<inverse>)\\<^sup>*) =\n  wf (s\\<inverse>)\n  (r\\<^sup>* O s O r\\<^sup>*)\\<inverse> =\n  (r\\<inverse>)\\<^sup>* O s\\<inverse> O (r\\<inverse>)\\<^sup>*", "show ?thesis"], ["proof (prove)\nusing this:\n  wf ((r\\<inverse>)\\<^sup>* O s\\<inverse> O (r\\<inverse>)\\<^sup>*) =\n  wf (s\\<inverse>)\n  (r\\<^sup>* O s O r\\<^sup>*)\\<inverse> =\n  (r\\<inverse>)\\<^sup>* O s\\<inverse> O (r\\<inverse>)\\<^sup>*\n\ngoal (1 subgoal):\n 1. SN (r\\<^sup>* O s O r\\<^sup>*) = SN s", "by (simp add: SN_iff_wf)"], ["proof (state)\nthis:\n  SN (r\\<^sup>* O s O r\\<^sup>*) = SN s\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma conversion_empty [simp]: \"conversion {} = Id\""], ["proof (prove)\ngoal (1 subgoal):\n 1. {}\\<^sup>\\<leftrightarrow>\\<^sup>* = Id", "by (auto simp: conversion_def)"], ["", "lemma symcl_idemp [simp]: \"(r\\<^sup>\\<leftrightarrow>)\\<^sup>\\<leftrightarrow> = r\\<^sup>\\<leftrightarrow>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (r\\<^sup>\\<leftrightarrow>)\\<^sup>\\<leftrightarrow> =\n    r\\<^sup>\\<leftrightarrow>", "by auto"], ["", "end"]]}