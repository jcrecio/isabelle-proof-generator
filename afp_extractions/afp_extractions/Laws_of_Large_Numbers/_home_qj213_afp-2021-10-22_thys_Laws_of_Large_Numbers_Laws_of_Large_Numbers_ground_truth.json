{"file_name": "/home/qj213/afp-2021-10-22/thys/Laws_of_Large_Numbers/Laws_of_Large_Numbers.thy", "working_directory": "/home/qj213/afp-2021-10-22/thys/Laws_of_Large_Numbers", "problem_names": ["theorem (in prob_space) strong_law_of_large_numbers_iid:\n  fixes X :: \"nat \\<Rightarrow> 'a \\<Rightarrow> real\"\n  assumes indep: \"indep_vars (\\<lambda>_. borel) X UNIV\"\n  assumes distr: \"\\<And>i. distr M borel (X i) = distr M borel (X 0)\"\n  assumes L1:    \"integrable M (X 0)\"\n  shows \"AE x in M. (\\<lambda>n. (\\<Sum>i<n. X i x) / n) \\<longlonglongrightarrow> expectation (X 0)\"", "lemma (in prob_space) AE_convergence_imp_convergence_in_prob:\n  assumes [measurable]: \"\\<And>i. random_variable borel (X i)\" \"random_variable borel Y\"\n  assumes AE: \"AE x in M. (\\<lambda>i. X i x) \\<longlonglongrightarrow> Y x\"\n  assumes \"\\<epsilon> > (0 :: real)\"\n  shows   \"(\\<lambda>i. prob {x\\<in>space M. \\<bar>X i x - Y x\\<bar> > \\<epsilon>}) \\<longlonglongrightarrow> 0\""], "translations": [["", "theorem (in prob_space) strong_law_of_large_numbers_iid:\n  fixes X :: \"nat \\<Rightarrow> 'a \\<Rightarrow> real\"\n  assumes indep: \"indep_vars (\\<lambda>_. borel) X UNIV\"\n  assumes distr: \"\\<And>i. distr M borel (X i) = distr M borel (X 0)\"\n  assumes L1:    \"integrable M (X 0)\"\n  shows \"AE x in M. (\\<lambda>n. (\\<Sum>i<n. X i x) / n) \\<longlonglongrightarrow> expectation (X 0)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. AE x in M. (\\<lambda>n. (\\<Sum>i<n. X i x) / real n)\n               \\<longlonglongrightarrow> expectation (X 0)", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. AE x in M. (\\<lambda>n. (\\<Sum>i<n. X i x) / real n)\n               \\<longlonglongrightarrow> expectation (X 0)", "text \\<open>\n    We adopt a more explicit view of \\<^term>\\<open>M\\<close> as a countably infinite product of i.i.d.\n    random variables, indexed by the natural numbers:\n  \\<close>"], ["proof (state)\ngoal (1 subgoal):\n 1. AE x in M. (\\<lambda>n. (\\<Sum>i<n. X i x) / real n)\n               \\<longlonglongrightarrow> expectation (X 0)", "define M' :: \"(nat \\<Rightarrow> real) measure\" where \"M' = Pi\\<^sub>M UNIV (\\<lambda>i. distr M borel (X i))\""], ["proof (state)\nthis:\n  M' = Pi\\<^sub>M UNIV (\\<lambda>i. distr M borel (X i))\n\ngoal (1 subgoal):\n 1. AE x in M. (\\<lambda>n. (\\<Sum>i<n. X i x) / real n)\n               \\<longlonglongrightarrow> expectation (X 0)", "have [measurable]: \"random_variable borel (X i)\" for i"], ["proof (prove)\ngoal (1 subgoal):\n 1. random_variable borel (X i)", "using indep"], ["proof (prove)\nusing this:\n  indep_vars (\\<lambda>_. borel) X UNIV\n\ngoal (1 subgoal):\n 1. random_variable borel (X i)", "by (auto simp: indep_vars_def)"], ["proof (state)\nthis:\n  random_variable borel (X ?i12)\n\ngoal (1 subgoal):\n 1. AE x in M. (\\<lambda>n. (\\<Sum>i<n. X i x) / real n)\n               \\<longlonglongrightarrow> expectation (X 0)", "have M'_eq: \"M' = distr M (Pi\\<^sub>M UNIV (\\<lambda>i. borel)) (\\<lambda>x. \\<lambda>i\\<in>UNIV. X i x)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. M' =\n    distr M (Pi\\<^sub>M UNIV (\\<lambda>i. borel))\n     (\\<lambda>x. \\<lambda>i\\<in>UNIV. X i x)", "using indep"], ["proof (prove)\nusing this:\n  indep_vars (\\<lambda>_. borel) X UNIV\n\ngoal (1 subgoal):\n 1. M' =\n    distr M (Pi\\<^sub>M UNIV (\\<lambda>i. borel))\n     (\\<lambda>x. \\<lambda>i\\<in>UNIV. X i x)", "unfolding M'_def"], ["proof (prove)\nusing this:\n  indep_vars (\\<lambda>_. borel) X UNIV\n\ngoal (1 subgoal):\n 1. Pi\\<^sub>M UNIV (\\<lambda>i. distr M borel (X i)) =\n    distr M (Pi\\<^sub>M UNIV (\\<lambda>i. borel))\n     (\\<lambda>x. \\<lambda>i\\<in>UNIV. X i x)", "by (subst (asm) indep_vars_iff_distr_eq_PiM) auto"], ["proof (state)\nthis:\n  M' =\n  distr M (Pi\\<^sub>M UNIV (\\<lambda>i. borel))\n   (\\<lambda>x. \\<lambda>i\\<in>UNIV. X i x)\n\ngoal (1 subgoal):\n 1. AE x in M. (\\<lambda>n. (\\<Sum>i<n. X i x) / real n)\n               \\<longlonglongrightarrow> expectation (X 0)", "have space_M': \"space M' = UNIV\""], ["proof (prove)\ngoal (1 subgoal):\n 1. space M' = UNIV", "by (simp add: M'_def space_PiM)"], ["proof (state)\nthis:\n  space M' = UNIV\n\ngoal (1 subgoal):\n 1. AE x in M. (\\<lambda>n. (\\<Sum>i<n. X i x) / real n)\n               \\<longlonglongrightarrow> expectation (X 0)", "have sets_M' [measurable_cong]: \"sets M' = sets (Pi\\<^sub>M UNIV (\\<lambda>i. borel))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. sets M' = sets (Pi\\<^sub>M UNIV (\\<lambda>i. borel))", "by (simp add: M'_eq)"], ["proof (state)\nthis:\n  sets M' = sets (Pi\\<^sub>M UNIV (\\<lambda>i. borel))\n\ngoal (1 subgoal):\n 1. AE x in M. (\\<lambda>n. (\\<Sum>i<n. X i x) / real n)\n               \\<longlonglongrightarrow> expectation (X 0)", "interpret M': prob_space M'"], ["proof (prove)\ngoal (1 subgoal):\n 1. prob_space M'", "unfolding M'_eq"], ["proof (prove)\ngoal (1 subgoal):\n 1. prob_space\n     (distr M (Pi\\<^sub>M UNIV (\\<lambda>i. borel))\n       (\\<lambda>x. \\<lambda>i\\<in>UNIV. X i x))", "by (intro prob_space_distr) auto"], ["proof (state)\ngoal (1 subgoal):\n 1. AE x in M. (\\<lambda>n. (\\<Sum>i<n. X i x) / real n)\n               \\<longlonglongrightarrow> expectation (X 0)", "text \\<open>We introduce a shift operator that forgets the first variable in the sequence.\\<close>"], ["proof (state)\ngoal (1 subgoal):\n 1. AE x in M. (\\<lambda>n. (\\<Sum>i<n. X i x) / real n)\n               \\<longlonglongrightarrow> expectation (X 0)", "define T :: \"(nat \\<Rightarrow> real) \\<Rightarrow> (nat \\<Rightarrow> real)\" where\n    \"T = (\\<lambda>f. f \\<circ> Suc)\""], ["proof (state)\nthis:\n  T = (\\<lambda>f. f \\<circ> Suc)\n\ngoal (1 subgoal):\n 1. AE x in M. (\\<lambda>n. (\\<Sum>i<n. X i x) / real n)\n               \\<longlonglongrightarrow> expectation (X 0)", "have funpow_T: \"(T ^^ i) = (\\<lambda>f. f \\<circ> (\\<lambda>n. n + i))\" for i"], ["proof (prove)\ngoal (1 subgoal):\n 1. T ^^ i = (\\<lambda>f. f \\<circ> (\\<lambda>n. n + i))", "by (induction i) (auto simp: T_def)"], ["proof (state)\nthis:\n  T ^^ ?i12 = (\\<lambda>f. f \\<circ> (\\<lambda>n. n + ?i12))\n\ngoal (1 subgoal):\n 1. AE x in M. (\\<lambda>n. (\\<Sum>i<n. X i x) / real n)\n               \\<longlonglongrightarrow> expectation (X 0)", "interpret T: shift_operator_ergodic \"distr M borel (X 0)\" T M'"], ["proof (prove)\ngoal (1 subgoal):\n 1. shift_operator_ergodic (distr M borel (X 0)) &&&\n    (T \\<equiv> \\<lambda>f. f \\<circ> Suc) &&&\n    M' \\<equiv> Pi\\<^sub>M UNIV (\\<lambda>_. distr M borel (X 0))", "proof -"], ["proof (state)\ngoal (3 subgoals):\n 1. shift_operator_ergodic (distr M borel (X 0))\n 2. T \\<equiv> \\<lambda>f. f \\<circ> Suc\n 3. M' \\<equiv> Pi\\<^sub>M UNIV (\\<lambda>_. distr M borel (X 0))", "interpret X0: prob_space \"distr M borel (X 0)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. prob_space (distr M borel (X 0))", "by (rule prob_space_distr) auto"], ["proof (state)\ngoal (3 subgoals):\n 1. shift_operator_ergodic (distr M borel (X 0))\n 2. T \\<equiv> \\<lambda>f. f \\<circ> Suc\n 3. M' \\<equiv> Pi\\<^sub>M UNIV (\\<lambda>_. distr M borel (X 0))", "show \"shift_operator_ergodic (distr M borel (X 0))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. shift_operator_ergodic (distr M borel (X 0))", "by unfold_locales"], ["proof (state)\nthis:\n  shift_operator_ergodic (distr M borel (X 0))\n\ngoal (2 subgoals):\n 1. T \\<equiv> \\<lambda>f. f \\<circ> Suc\n 2. M' \\<equiv> Pi\\<^sub>M UNIV (\\<lambda>_. distr M borel (X 0))", "show \"M' \\<equiv> Pi\\<^sub>M UNIV (\\<lambda>_. distr M borel (X 0)) \""], ["proof (prove)\ngoal (1 subgoal):\n 1. M' \\<equiv> Pi\\<^sub>M UNIV (\\<lambda>_. distr M borel (X 0))", "unfolding M'_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. Pi\\<^sub>M UNIV (\\<lambda>i. distr M borel (X i)) \\<equiv>\n    Pi\\<^sub>M UNIV (\\<lambda>_. distr M borel (X 0))", "by (subst distr)"], ["proof (state)\nthis:\n  M' \\<equiv> Pi\\<^sub>M UNIV (\\<lambda>_. distr M borel (X 0))\n\ngoal (1 subgoal):\n 1. T \\<equiv> \\<lambda>f. f \\<circ> Suc", "qed (simp_all add: T_def)"], ["proof (state)\ngoal (1 subgoal):\n 1. AE x in M. (\\<lambda>n. (\\<Sum>i<n. X i x) / real n)\n               \\<longlonglongrightarrow> expectation (X 0)", "have [intro]: \"integrable M' (\\<lambda>f. f 0)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. integrable M' (\\<lambda>f. f 0)", "unfolding M'_eq"], ["proof (prove)\ngoal (1 subgoal):\n 1. integrable\n     (distr M (Pi\\<^sub>M UNIV (\\<lambda>i. borel))\n       (\\<lambda>x. \\<lambda>i\\<in>UNIV. X i x))\n     (\\<lambda>f. f 0)", "by (subst integrable_distr_eq) (use L1 in auto)"], ["proof (state)\nthis:\n  integrable M' (\\<lambda>f. f 0)\n\ngoal (1 subgoal):\n 1. AE x in M. (\\<lambda>n. (\\<Sum>i<n. X i x) / real n)\n               \\<longlonglongrightarrow> expectation (X 0)", "have \"AE f in M'. (\\<lambda>n. T.birkhoff_sum (\\<lambda>f. f 0) n f / real n)\n            \\<longlonglongrightarrow> real_cond_exp M' T.Invariants (\\<lambda>f. f 0) f\""], ["proof (prove)\ngoal (1 subgoal):\n 1. AE f in M'. (\\<lambda>n. T.birkhoff_sum (\\<lambda>f. f 0) n f / real n)\n                \\<longlonglongrightarrow> real_cond_exp M' T.Invariants\n     (\\<lambda>f. f 0) f", "by (rule T.birkhoff_theorem_AE_nonergodic) auto"], ["proof (state)\nthis:\n  AE f in M'. (\\<lambda>n. T.birkhoff_sum (\\<lambda>f. f 0) n f / real n)\n              \\<longlonglongrightarrow> real_cond_exp M' T.Invariants\n   (\\<lambda>f. f 0) f\n\ngoal (1 subgoal):\n 1. AE x in M. (\\<lambda>n. (\\<Sum>i<n. X i x) / real n)\n               \\<longlonglongrightarrow> expectation (X 0)", "moreover"], ["proof (state)\nthis:\n  AE f in M'. (\\<lambda>n. T.birkhoff_sum (\\<lambda>f. f 0) n f / real n)\n              \\<longlonglongrightarrow> real_cond_exp M' T.Invariants\n   (\\<lambda>f. f 0) f\n\ngoal (1 subgoal):\n 1. AE x in M. (\\<lambda>n. (\\<Sum>i<n. X i x) / real n)\n               \\<longlonglongrightarrow> expectation (X 0)", "have \"AE x in M'. real_cond_exp M' T.Invariants (\\<lambda>f. f 0) x =\n                    M'.expectation (\\<lambda>f. f 0) / M'.prob (space M')\""], ["proof (prove)\ngoal (1 subgoal):\n 1. AE x in M'. real_cond_exp M' T.Invariants (\\<lambda>f. f 0) x =\n                M'.expectation (\\<lambda>f. f 0) / M'.prob (space M')", "by (intro T.Invariants_cond_exp_is_integral_fmpt) auto"], ["proof (state)\nthis:\n  AE x in M'. real_cond_exp M' T.Invariants (\\<lambda>f. f 0) x =\n              M'.expectation (\\<lambda>f. f 0) / M'.prob (space M')\n\ngoal (1 subgoal):\n 1. AE x in M. (\\<lambda>n. (\\<Sum>i<n. X i x) / real n)\n               \\<longlonglongrightarrow> expectation (X 0)", "ultimately"], ["proof (chain)\npicking this:\n  AE f in M'. (\\<lambda>n. T.birkhoff_sum (\\<lambda>f. f 0) n f / real n)\n              \\<longlonglongrightarrow> real_cond_exp M' T.Invariants\n   (\\<lambda>f. f 0) f\n  AE x in M'. real_cond_exp M' T.Invariants (\\<lambda>f. f 0) x =\n              M'.expectation (\\<lambda>f. f 0) / M'.prob (space M')", "have \"AE f in M'. (\\<lambda>n. T.birkhoff_sum (\\<lambda>f. f 0) n f / real n)\n                     \\<longlonglongrightarrow> M'.expectation (\\<lambda>f. f 0)\""], ["proof (prove)\nusing this:\n  AE f in M'. (\\<lambda>n. T.birkhoff_sum (\\<lambda>f. f 0) n f / real n)\n              \\<longlonglongrightarrow> real_cond_exp M' T.Invariants\n   (\\<lambda>f. f 0) f\n  AE x in M'. real_cond_exp M' T.Invariants (\\<lambda>f. f 0) x =\n              M'.expectation (\\<lambda>f. f 0) / M'.prob (space M')\n\ngoal (1 subgoal):\n 1. AE f in M'. (\\<lambda>n. T.birkhoff_sum (\\<lambda>f. f 0) n f / real n)\n                \\<longlonglongrightarrow> M'.expectation (\\<lambda>f. f 0)", "by eventually_elim (simp_all add: M'.prob_space)"], ["proof (state)\nthis:\n  AE f in M'. (\\<lambda>n. T.birkhoff_sum (\\<lambda>f. f 0) n f / real n)\n              \\<longlonglongrightarrow> M'.expectation (\\<lambda>f. f 0)\n\ngoal (1 subgoal):\n 1. AE x in M. (\\<lambda>n. (\\<Sum>i<n. X i x) / real n)\n               \\<longlonglongrightarrow> expectation (X 0)", "also"], ["proof (state)\nthis:\n  AE f in M'. (\\<lambda>n. T.birkhoff_sum (\\<lambda>f. f 0) n f / real n)\n              \\<longlonglongrightarrow> M'.expectation (\\<lambda>f. f 0)\n\ngoal (1 subgoal):\n 1. AE x in M. (\\<lambda>n. (\\<Sum>i<n. X i x) / real n)\n               \\<longlonglongrightarrow> expectation (X 0)", "have \"M'.expectation (\\<lambda>f. f 0) = expectation (X 0)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. M'.expectation (\\<lambda>f. f 0) = expectation (X 0)", "unfolding M'_eq"], ["proof (prove)\ngoal (1 subgoal):\n 1. LINT f|distr M (Pi\\<^sub>M UNIV (\\<lambda>i. borel))\n            (\\<lambda>x. \\<lambda>i\\<in>UNIV. X i x).\n       f 0 =\n    expectation (X 0)", "by (subst integral_distr) simp_all"], ["proof (state)\nthis:\n  M'.expectation (\\<lambda>f. f 0) = expectation (X 0)\n\ngoal (1 subgoal):\n 1. AE x in M. (\\<lambda>n. (\\<Sum>i<n. X i x) / real n)\n               \\<longlonglongrightarrow> expectation (X 0)", "also"], ["proof (state)\nthis:\n  M'.expectation (\\<lambda>f. f 0) = expectation (X 0)\n\ngoal (1 subgoal):\n 1. AE x in M. (\\<lambda>n. (\\<Sum>i<n. X i x) / real n)\n               \\<longlonglongrightarrow> expectation (X 0)", "have \"T.birkhoff_sum (\\<lambda>f. f 0) = (\\<lambda>n f. sum f {..<n})\""], ["proof (prove)\ngoal (1 subgoal):\n 1. T.birkhoff_sum (\\<lambda>f. f 0) = (\\<lambda>n f. sum f {..<n})", "by (intro ext) (simp_all add:T.birkhoff_sum_def funpow_T)"], ["proof (state)\nthis:\n  T.birkhoff_sum (\\<lambda>f. f 0) = (\\<lambda>n f. sum f {..<n})\n\ngoal (1 subgoal):\n 1. AE x in M. (\\<lambda>n. (\\<Sum>i<n. X i x) / real n)\n               \\<longlonglongrightarrow> expectation (X 0)", "finally"], ["proof (chain)\npicking this:\n  AE f in M'. (\\<lambda>n. sum f {..<n} / real n)\n              \\<longlonglongrightarrow> expectation (X 0)", "show ?thesis"], ["proof (prove)\nusing this:\n  AE f in M'. (\\<lambda>n. sum f {..<n} / real n)\n              \\<longlonglongrightarrow> expectation (X 0)\n\ngoal (1 subgoal):\n 1. AE x in M. (\\<lambda>n. (\\<Sum>i<n. X i x) / real n)\n               \\<longlonglongrightarrow> expectation (X 0)", "unfolding M'_eq"], ["proof (prove)\nusing this:\n  AE f in distr M (Pi\\<^sub>M UNIV (\\<lambda>i. borel))\n           (\\<lambda>x.\n               \\<lambda>i\\<in>UNIV.\n                  X i x). (\\<lambda>n. sum f {..<n} / real n)\n                          \\<longlonglongrightarrow> expectation (X 0)\n\ngoal (1 subgoal):\n 1. AE x in M. (\\<lambda>n. (\\<Sum>i<n. X i x) / real n)\n               \\<longlonglongrightarrow> expectation (X 0)", "by (subst (asm) AE_distr_iff) simp_all"], ["proof (state)\nthis:\n  AE x in M. (\\<lambda>n. (\\<Sum>i<n. X i x) / real n)\n             \\<longlonglongrightarrow> expectation (X 0)\n\ngoal:\nNo subgoals!", "qed"], ["", "subsection \\<open>The weak law\\<close>"], ["", "text \\<open>\n  To go from the strong law to the weak one, we need the fact that almost sure convergence\n  implies convergence in probability. We prove this for sequences of random variables here.\n\\<close>"], ["", "lemma (in prob_space) AE_convergence_imp_convergence_in_prob:\n  assumes [measurable]: \"\\<And>i. random_variable borel (X i)\" \"random_variable borel Y\"\n  assumes AE: \"AE x in M. (\\<lambda>i. X i x) \\<longlonglongrightarrow> Y x\"\n  assumes \"\\<epsilon> > (0 :: real)\"\n  shows   \"(\\<lambda>i. prob {x\\<in>space M. \\<bar>X i x - Y x\\<bar> > \\<epsilon>}) \\<longlonglongrightarrow> 0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>i.\n        prob {x \\<in> space M. \\<epsilon> < \\<bar>X i x - Y x\\<bar>})\n    \\<longlonglongrightarrow> 0", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. (\\<lambda>i.\n        prob {x \\<in> space M. \\<epsilon> < \\<bar>X i x - Y x\\<bar>})\n    \\<longlonglongrightarrow> 0", "define A where \"A = (\\<lambda>i. {x\\<in>space M. \\<bar>X i x - Y x\\<bar> > \\<epsilon>})\""], ["proof (state)\nthis:\n  A = (\\<lambda>i. {x \\<in> space M. \\<epsilon> < \\<bar>X i x - Y x\\<bar>})\n\ngoal (1 subgoal):\n 1. (\\<lambda>i.\n        prob {x \\<in> space M. \\<epsilon> < \\<bar>X i x - Y x\\<bar>})\n    \\<longlonglongrightarrow> 0", "define B where \"B = (\\<lambda>n. (\\<Union>i\\<in>{n..}. A i))\""], ["proof (state)\nthis:\n  B = (\\<lambda>n. \\<Union> (A ` {n..}))\n\ngoal (1 subgoal):\n 1. (\\<lambda>i.\n        prob {x \\<in> space M. \\<epsilon> < \\<bar>X i x - Y x\\<bar>})\n    \\<longlonglongrightarrow> 0", "have [measurable]: \"A i \\<in> sets M\"  \"B i \\<in> sets M\" for i"], ["proof (prove)\ngoal (1 subgoal):\n 1. A i \\<in> events &&& B i \\<in> events", "unfolding A_def B_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. {x \\<in> space M. \\<epsilon> < \\<bar>X i x - Y x\\<bar>} \\<in> events &&&\n    (\\<Union>i\\<in>{i..}.\n        {x \\<in> space M. \\<epsilon> < \\<bar>X i x - Y x\\<bar>})\n    \\<in> events", "by measurable"], ["proof (state)\nthis:\n  A ?i12 \\<in> events\n  B ?i12 \\<in> events\n\ngoal (1 subgoal):\n 1. (\\<lambda>i.\n        prob {x \\<in> space M. \\<epsilon> < \\<bar>X i x - Y x\\<bar>})\n    \\<longlonglongrightarrow> 0", "have \"AE x in M. x \\<notin> (\\<Inter>i. B i)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. AE x in M. x \\<notin> \\<Inter> (range B)", "using AE"], ["proof (prove)\nusing this:\n  AE x in M. (\\<lambda>i. X i x) \\<longlonglongrightarrow> Y x\n\ngoal (1 subgoal):\n 1. AE x in M. x \\<notin> \\<Inter> (range B)", "unfolding B_def A_def"], ["proof (prove)\nusing this:\n  AE x in M. (\\<lambda>i. X i x) \\<longlonglongrightarrow> Y x\n\ngoal (1 subgoal):\n 1. AE x in M. x \\<notin> (\\<Inter>i.\n                              \\<Union>i\\<in>{i..}.\n                                 {x \\<in> space M.\n                                  \\<epsilon> < \\<bar>X i x - Y x\\<bar>})", "by eventually_elim\n       (use \\<open>\\<epsilon> > 0\\<close> in \\<open>fastforce simp: tendsto_iff dist_norm eventually_at_top_linorder\\<close>)"], ["proof (state)\nthis:\n  AE x in M. x \\<notin> \\<Inter> (range B)\n\ngoal (1 subgoal):\n 1. (\\<lambda>i.\n        prob {x \\<in> space M. \\<epsilon> < \\<bar>X i x - Y x\\<bar>})\n    \\<longlonglongrightarrow> 0", "hence \"(\\<Inter>i. B i) \\<in> null_sets M\""], ["proof (prove)\nusing this:\n  AE x in M. x \\<notin> \\<Inter> (range B)\n\ngoal (1 subgoal):\n 1. \\<Inter> (range B) \\<in> null_sets M", "by (subst AE_iff_null_sets) auto"], ["proof (state)\nthis:\n  \\<Inter> (range B) \\<in> null_sets M\n\ngoal (1 subgoal):\n 1. (\\<lambda>i.\n        prob {x \\<in> space M. \\<epsilon> < \\<bar>X i x - Y x\\<bar>})\n    \\<longlonglongrightarrow> 0", "show \"(\\<lambda>i. prob (A i)) \\<longlonglongrightarrow> 0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>i. prob (A i)) \\<longlonglongrightarrow> 0", "proof (rule Lim_null_comparison)"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<forall>\\<^sub>F x in sequentially. norm (prob (A x)) \\<le> ?g x\n 2. ?g \\<longlonglongrightarrow> 0", "have \"(\\<lambda>i. prob (B i)) \\<longlonglongrightarrow> prob (\\<Inter>i. B i)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>i. prob (B i))\n    \\<longlonglongrightarrow> prob (\\<Inter> (range B))", "proof (rule finite_Lim_measure_decseq)"], ["proof (state)\ngoal (2 subgoals):\n 1. range B \\<subseteq> events\n 2. decseq B", "show \"decseq B\""], ["proof (prove)\ngoal (1 subgoal):\n 1. decseq B", "by (rule decseq_SucI) (force simp: B_def)"], ["proof (state)\nthis:\n  decseq B\n\ngoal (1 subgoal):\n 1. range B \\<subseteq> events", "qed auto"], ["proof (state)\nthis:\n  (\\<lambda>i. prob (B i))\n  \\<longlonglongrightarrow> prob (\\<Inter> (range B))\n\ngoal (2 subgoals):\n 1. \\<forall>\\<^sub>F x in sequentially. norm (prob (A x)) \\<le> ?g x\n 2. ?g \\<longlonglongrightarrow> 0", "also"], ["proof (state)\nthis:\n  (\\<lambda>i. prob (B i))\n  \\<longlonglongrightarrow> prob (\\<Inter> (range B))\n\ngoal (2 subgoals):\n 1. \\<forall>\\<^sub>F x in sequentially. norm (prob (A x)) \\<le> ?g x\n 2. ?g \\<longlonglongrightarrow> 0", "have \"prob (\\<Inter>i. B i) = 0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. prob (\\<Inter> (range B)) = 0", "using \\<open>(\\<Inter>i. B i) \\<in> null_sets M\\<close>"], ["proof (prove)\nusing this:\n  \\<Inter> (range B) \\<in> null_sets M\n\ngoal (1 subgoal):\n 1. prob (\\<Inter> (range B)) = 0", "by (simp add: measure_eq_0_null_sets)"], ["proof (state)\nthis:\n  prob (\\<Inter> (range B)) = 0\n\ngoal (2 subgoals):\n 1. \\<forall>\\<^sub>F x in sequentially. norm (prob (A x)) \\<le> ?g x\n 2. ?g \\<longlonglongrightarrow> 0", "finally"], ["proof (chain)\npicking this:\n  (\\<lambda>i. prob (B i)) \\<longlonglongrightarrow> 0", "show \"(\\<lambda>i. prob (B i)) \\<longlonglongrightarrow> 0\""], ["proof (prove)\nusing this:\n  (\\<lambda>i. prob (B i)) \\<longlonglongrightarrow> 0\n\ngoal (1 subgoal):\n 1. (\\<lambda>i. prob (B i)) \\<longlonglongrightarrow> 0", "."], ["proof (state)\nthis:\n  (\\<lambda>i. prob (B i)) \\<longlonglongrightarrow> 0\n\ngoal (1 subgoal):\n 1. \\<forall>\\<^sub>F x in sequentially. norm (prob (A x)) \\<le> prob (B x)", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<forall>\\<^sub>F x in sequentially. norm (prob (A x)) \\<le> prob (B x)", "have \"prob (A n) \\<le> prob (B n)\" for n"], ["proof (prove)\ngoal (1 subgoal):\n 1. prob (A n) \\<le> prob (B n)", "unfolding B_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. prob (A n) \\<le> prob (\\<Union> (A ` {n..}))", "by (intro finite_measure_mono) auto"], ["proof (state)\nthis:\n  prob (A ?n12) \\<le> prob (B ?n12)\n\ngoal (1 subgoal):\n 1. \\<forall>\\<^sub>F x in sequentially. norm (prob (A x)) \\<le> prob (B x)", "thus \"\\<forall>\\<^sub>F n in at_top. norm (prob (A n)) \\<le> prob (B n)\""], ["proof (prove)\nusing this:\n  prob (A ?n12) \\<le> prob (B ?n12)\n\ngoal (1 subgoal):\n 1. \\<forall>\\<^sub>F n in sequentially. norm (prob (A n)) \\<le> prob (B n)", "by (intro always_eventually) auto"], ["proof (state)\nthis:\n  \\<forall>\\<^sub>F n in sequentially. norm (prob (A n)) \\<le> prob (B n)\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  (\\<lambda>i. prob (A i)) \\<longlonglongrightarrow> 0\n\ngoal:\nNo subgoals!", "qed"], ["", "text \\<open>\n  The weak law is now a simple corollary: we again have the same setting as before. The weak\n  law now states that $\\overline{X}_n$ converges to $E[X_0]$ in probability. This means that\n  for any \\<open>\\<epsilon> > 0\\<close>, the probability that $|\\overline{X}_n - X_0| > \\varepsilon$ vanishes as\n  \\<open>n \\<rightarrow> \\<infinity>\\<close>.\n\\<close>"], ["", "corollary (in prob_space) weak_law_of_large_numbers_iid:\n  fixes X :: \"nat \\<Rightarrow> 'a \\<Rightarrow> real\" and \\<epsilon> :: real\n  assumes indep: \"indep_vars (\\<lambda>_. borel) X UNIV\"\n  assumes distr: \"\\<And>i. distr M borel (X i) = distr M borel (X 0)\"\n  assumes L1:    \"integrable M (X 0)\"\n  assumes \"\\<epsilon> > 0\"\n  shows   \"(\\<lambda>n. prob {x\\<in>space M. \\<bar>(\\<Sum>i<n. X i x) / n - expectation (X 0)\\<bar> > \\<epsilon>}) \\<longlonglongrightarrow> 0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>n.\n        prob\n         {x \\<in> space M.\n          \\<epsilon>\n          < \\<bar>(\\<Sum>i<n. X i x) / real n - expectation (X 0)\\<bar>})\n    \\<longlonglongrightarrow> 0", "proof (rule AE_convergence_imp_convergence_in_prob)"], ["proof (state)\ngoal (4 subgoals):\n 1. \\<And>n. random_variable borel (\\<lambda>x. (\\<Sum>i<n. X i x) / real n)\n 2. random_variable borel (\\<lambda>x. expectation (X 0))\n 3. AE x in M. (\\<lambda>n. (\\<Sum>i<n. X i x) / real n)\n               \\<longlonglongrightarrow> expectation (X 0)\n 4. 0 < \\<epsilon>", "show \"AE x in M. (\\<lambda>n. (\\<Sum>i<n. X i x) / n) \\<longlonglongrightarrow> expectation (X 0)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. AE x in M. (\\<lambda>n. (\\<Sum>i<n. X i x) / real n)\n               \\<longlonglongrightarrow> expectation (X 0)", "by (rule strong_law_of_large_numbers_iid) fact+"], ["proof (state)\nthis:\n  AE x in M. (\\<lambda>n. (\\<Sum>i<n. X i x) / real n)\n             \\<longlonglongrightarrow> expectation (X 0)\n\ngoal (3 subgoals):\n 1. \\<And>n. random_variable borel (\\<lambda>x. (\\<Sum>i<n. X i x) / real n)\n 2. random_variable borel (\\<lambda>x. expectation (X 0))\n 3. 0 < \\<epsilon>", "next"], ["proof (state)\ngoal (3 subgoals):\n 1. \\<And>n. random_variable borel (\\<lambda>x. (\\<Sum>i<n. X i x) / real n)\n 2. random_variable borel (\\<lambda>x. expectation (X 0))\n 3. 0 < \\<epsilon>", "have [measurable]: \"random_variable borel (X i)\" for i"], ["proof (prove)\ngoal (1 subgoal):\n 1. random_variable borel (X i)", "using indep"], ["proof (prove)\nusing this:\n  indep_vars (\\<lambda>_. borel) X UNIV\n\ngoal (1 subgoal):\n 1. random_variable borel (X i)", "by (auto simp: indep_vars_def)"], ["proof (state)\nthis:\n  random_variable borel (X ?i12)\n\ngoal (3 subgoals):\n 1. \\<And>n. random_variable borel (\\<lambda>x. (\\<Sum>i<n. X i x) / real n)\n 2. random_variable borel (\\<lambda>x. expectation (X 0))\n 3. 0 < \\<epsilon>", "show \"random_variable borel (\\<lambda>x. (\\<Sum>i<n. X i x) / real n)\" for n"], ["proof (prove)\ngoal (1 subgoal):\n 1. random_variable borel (\\<lambda>x. (\\<Sum>i<n. X i x) / real n)", "by measurable"], ["proof (state)\nthis:\n  random_variable borel (\\<lambda>x. (\\<Sum>i<?n12. X i x) / real ?n12)\n\ngoal (2 subgoals):\n 1. random_variable borel (\\<lambda>x. expectation (X 0))\n 2. 0 < \\<epsilon>", "qed (use \\<open>\\<epsilon> > 0\\<close> in simp_all)"], ["", "end"]]}